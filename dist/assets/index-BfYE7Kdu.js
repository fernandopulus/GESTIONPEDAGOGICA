var bce=Object.defineProperty;var yce=(e,t,r)=>t in e?bce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var aB=(e,t,r)=>yce(e,typeof t!="symbol"?t+"":t,r);function wce(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var xot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function il(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ece(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var sB={exports:{}},g1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S8;function Cce(){if(S8)return g1;S8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return g1.Fragment=t,g1.jsx=r,g1.jsxs=r,g1}var N8;function _ce(){return N8||(N8=1,sB.exports=Cce()),sB.exports}var c=_ce(),iB={exports:{}},Jr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B8;function Sce(){if(B8)return Jr;B8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=f&&G[f]||G["@@iterator"],typeof G=="function"?G:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,g={};function b(G,ne,R){this.props=G,this.context=ne,this.refs=g,this.updater=R||p}b.prototype.isReactComponent={},b.prototype.setState=function(G,ne){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ne,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function y(){}y.prototype=b.prototype;function _(G,ne,R){this.props=G,this.context=ne,this.refs=g,this.updater=R||p}var S=_.prototype=new y;S.constructor=_,x(S,b.prototype),S.isPureReactComponent=!0;var B=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(G,ne,R,q,Y,te){return R=te.ref,{$$typeof:e,type:G,key:ne,ref:R!==void 0?R:null,props:te}}function C(G,ne){return E(G.type,ne,void 0,void 0,void 0,G.props)}function N(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function P(G){var ne={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(R){return ne[R]})}var O=/\/+/g;function F(G,ne){return typeof G=="object"&&G!==null&&G.key!=null?P(""+G.key):ne.toString(36)}function M(){}function Q(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(M,M):(G.status="pending",G.then(function(ne){G.status==="pending"&&(G.status="fulfilled",G.value=ne)},function(ne){G.status==="pending"&&(G.status="rejected",G.reason=ne)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function J(G,ne,R,q,Y){var te=typeof G;(te==="undefined"||te==="boolean")&&(G=null);var ie=!1;if(G===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(G.$$typeof){case e:case t:ie=!0;break;case d:return ie=G._init,J(ie(G._payload),ne,R,q,Y)}}if(ie)return Y=Y(G),ie=q===""?"."+F(G,0):q,B(Y)?(R="",ie!=null&&(R=ie.replace(O,"$&/")+"/"),J(Y,ne,R,"",function(ce){return ce})):Y!=null&&(N(Y)&&(Y=C(Y,R+(Y.key==null||G&&G.key===Y.key?"":(""+Y.key).replace(O,"$&/")+"/")+ie)),ne.push(Y)),1;ie=0;var pe=q===""?".":q+":";if(B(G))for(var oe=0;oe<G.length;oe++)q=G[oe],te=pe+F(q,oe),ie+=J(q,ne,R,te,Y);else if(oe=m(G),typeof oe=="function")for(G=oe.call(G),oe=0;!(q=G.next()).done;)q=q.value,te=pe+F(q,oe++),ie+=J(q,ne,R,te,Y);else if(te==="object"){if(typeof G.then=="function")return J(Q(G),ne,R,q,Y);throw ne=String(G),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ie}function W(G,ne,R){if(G==null)return G;var q=[],Y=0;return J(G,q,"","",function(te){return ne.call(R,te,Y++)}),q}function Z(G){if(G._status===-1){var ne=G._result;ne=ne(),ne.then(function(R){(G._status===0||G._status===-1)&&(G._status=1,G._result=R)},function(R){(G._status===0||G._status===-1)&&(G._status=2,G._result=R)}),G._status===-1&&(G._status=0,G._result=ne)}if(G._status===1)return G._result.default;throw G._result}var H=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function z(){}return Jr.Children={map:W,forEach:function(G,ne,R){W(G,function(){ne.apply(this,arguments)},R)},count:function(G){var ne=0;return W(G,function(){ne++}),ne},toArray:function(G){return W(G,function(ne){return ne})||[]},only:function(G){if(!N(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Jr.Component=b,Jr.Fragment=r,Jr.Profiler=a,Jr.PureComponent=_,Jr.StrictMode=n,Jr.Suspense=l,Jr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Jr.__COMPILER_RUNTIME={__proto__:null,c:function(G){return I.H.useMemoCache(G)}},Jr.cache=function(G){return function(){return G.apply(null,arguments)}},Jr.cloneElement=function(G,ne,R){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var q=x({},G.props),Y=G.key,te=void 0;if(ne!=null)for(ie in ne.ref!==void 0&&(te=void 0),ne.key!==void 0&&(Y=""+ne.key),ne)!D.call(ne,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ne.ref===void 0||(q[ie]=ne[ie]);var ie=arguments.length-2;if(ie===1)q.children=R;else if(1<ie){for(var pe=Array(ie),oe=0;oe<ie;oe++)pe[oe]=arguments[oe+2];q.children=pe}return E(G.type,Y,void 0,void 0,te,q)},Jr.createContext=function(G){return G={$$typeof:i,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},Jr.createElement=function(G,ne,R){var q,Y={},te=null;if(ne!=null)for(q in ne.key!==void 0&&(te=""+ne.key),ne)D.call(ne,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(Y[q]=ne[q]);var ie=arguments.length-2;if(ie===1)Y.children=R;else if(1<ie){for(var pe=Array(ie),oe=0;oe<ie;oe++)pe[oe]=arguments[oe+2];Y.children=pe}if(G&&G.defaultProps)for(q in ie=G.defaultProps,ie)Y[q]===void 0&&(Y[q]=ie[q]);return E(G,te,void 0,void 0,null,Y)},Jr.createRef=function(){return{current:null}},Jr.forwardRef=function(G){return{$$typeof:o,render:G}},Jr.isValidElement=N,Jr.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:Z}},Jr.memo=function(G,ne){return{$$typeof:u,type:G,compare:ne===void 0?null:ne}},Jr.startTransition=function(G){var ne=I.T,R={};I.T=R;try{var q=G(),Y=I.S;Y!==null&&Y(R,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(z,H)}catch(te){H(te)}finally{I.T=ne}},Jr.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Jr.use=function(G){return I.H.use(G)},Jr.useActionState=function(G,ne,R){return I.H.useActionState(G,ne,R)},Jr.useCallback=function(G,ne){return I.H.useCallback(G,ne)},Jr.useContext=function(G){return I.H.useContext(G)},Jr.useDebugValue=function(){},Jr.useDeferredValue=function(G,ne){return I.H.useDeferredValue(G,ne)},Jr.useEffect=function(G,ne,R){var q=I.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(G,ne)},Jr.useId=function(){return I.H.useId()},Jr.useImperativeHandle=function(G,ne,R){return I.H.useImperativeHandle(G,ne,R)},Jr.useInsertionEffect=function(G,ne){return I.H.useInsertionEffect(G,ne)},Jr.useLayoutEffect=function(G,ne){return I.H.useLayoutEffect(G,ne)},Jr.useMemo=function(G,ne){return I.H.useMemo(G,ne)},Jr.useOptimistic=function(G,ne){return I.H.useOptimistic(G,ne)},Jr.useReducer=function(G,ne,R){return I.H.useReducer(G,ne,R)},Jr.useRef=function(G){return I.H.useRef(G)},Jr.useState=function(G){return I.H.useState(G)},Jr.useSyncExternalStore=function(G,ne,R){return I.H.useSyncExternalStore(G,ne,R)},Jr.useTransition=function(){return I.H.useTransition()},Jr.version="19.1.1",Jr}var k8;function tx(){return k8||(k8=1,iB.exports=Sce()),iB.exports}var T=tx();const ft=il(T),Nce=wce({__proto__:null,default:ft},[T]);var oB={exports:{}},v1={},lB={exports:{}},cB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T8;function Bce(){return T8||(T8=1,function(e){function t(W,Z){var H=W.length;W.push(Z);e:for(;0<H;){var z=H-1>>>1,G=W[z];if(0<a(G,Z))W[z]=Z,W[H]=G,H=z;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var Z=W[0],H=W.pop();if(H!==Z){W[0]=H;e:for(var z=0,G=W.length,ne=G>>>1;z<ne;){var R=2*(z+1)-1,q=W[R],Y=R+1,te=W[Y];if(0>a(q,H))Y<G&&0>a(te,q)?(W[z]=te,W[Y]=H,z=Y):(W[z]=q,W[R]=H,z=R);else if(Y<G&&0>a(te,H))W[z]=te,W[Y]=H,z=Y;else break e}}return Z}function a(W,Z){var H=W.sortIndex-Z.sortIndex;return H!==0?H:W.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,m=3,p=!1,x=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function B(W){for(var Z=r(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=W)n(u),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=r(u)}}function I(W){if(g=!1,B(W),!x)if(r(l)!==null)x=!0,D||(D=!0,F());else{var Z=r(u);Z!==null&&J(I,Z.startTime-W)}}var D=!1,E=-1,C=5,N=-1;function P(){return b?!0:!(e.unstable_now()-N<C)}function O(){if(b=!1,D){var W=e.unstable_now();N=W;var Z=!0;try{e:{x=!1,g&&(g=!1,_(E),E=-1),p=!0;var H=m;try{t:{for(B(W),f=r(l);f!==null&&!(f.expirationTime>W&&P());){var z=f.callback;if(typeof z=="function"){f.callback=null,m=f.priorityLevel;var G=z(f.expirationTime<=W);if(W=e.unstable_now(),typeof G=="function"){f.callback=G,B(W),Z=!0;break t}f===r(l)&&n(l),B(W)}else n(l);f=r(l)}if(f!==null)Z=!0;else{var ne=r(u);ne!==null&&J(I,ne.startTime-W),Z=!1}}break e}finally{f=null,m=H,p=!1}Z=void 0}}finally{Z?F():D=!1}}}var F;if(typeof S=="function")F=function(){S(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Q=M.port2;M.port1.onmessage=O,F=function(){Q.postMessage(null)}}else F=function(){y(O,0)};function J(W,Z){E=y(function(){W(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(W){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var H=m;m=Z;try{return W()}finally{m=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=m;m=W;try{return Z()}finally{m=H}},e.unstable_scheduleCallback=function(W,Z,H){var z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,W){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,W={id:d++,callback:Z,priorityLevel:W,startTime:H,expirationTime:G,sortIndex:-1},H>z?(W.sortIndex=H,t(u,W),r(l)===null&&W===r(u)&&(g?(_(E),E=-1):g=!0,J(I,H-z))):(W.sortIndex=G,t(l,W),x||p||(x=!0,D||(D=!0,F()))),W},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(W){var Z=m;return function(){var H=m;m=Z;try{return W.apply(this,arguments)}finally{m=H}}}}(cB)),cB}var I8;function kce(){return I8||(I8=1,lB.exports=Bce()),lB.exports}var uB={exports:{}},xo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j8;function Tce(){if(j8)return xo;j8=1;var e=tx();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return xo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xo.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(l,u,null,d)},xo.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},xo.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},xo.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},xo.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:p}):d==="script"&&n.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},xo.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},xo.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},xo.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},xo.requestFormReset=function(l){n.d.r(l)},xo.unstable_batchedUpdates=function(l,u){return l(u)},xo.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},xo.useFormStatus=function(){return i.H.useHostTransitionStatus()},xo.version="19.1.1",xo}var F8;function GG(){if(F8)return uB.exports;F8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uB.exports=Tce(),uB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O8;function Ice(){if(O8)return v1;O8=1;var e=kce(),t=tx(),r=GG();function n(A){var h="https://react.dev/errors/"+A;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+A+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var h=A,v=A;if(A.alternate)for(;h.return;)h=h.return;else{A=h;do h=A,(h.flags&4098)!==0&&(v=h.return),A=h.return;while(A)}return h.tag===3?v:null}function i(A){if(A.tag===13){var h=A.memoizedState;if(h===null&&(A=A.alternate,A!==null&&(h=A.memoizedState)),h!==null)return h.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var h=A.alternate;if(!h){if(h=s(A),h===null)throw Error(n(188));return h!==A?null:A}for(var v=A,w=h;;){var L=v.return;if(L===null)break;var V=L.alternate;if(V===null){if(w=L.return,w!==null){v=w;continue}break}if(L.child===V.child){for(V=L.child;V;){if(V===v)return o(L),A;if(V===w)return o(L),h;V=V.sibling}throw Error(n(188))}if(v.return!==w.return)v=L,w=V;else{for(var le=!1,be=L.child;be;){if(be===v){le=!0,v=L,w=V;break}if(be===w){le=!0,w=L,v=V;break}be=be.sibling}if(!le){for(be=V.child;be;){if(be===v){le=!0,v=V,w=L;break}if(be===w){le=!0,w=V,v=L;break}be=be.sibling}if(!le)throw Error(n(189))}}if(v.alternate!==w)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?A:h}function u(A){var h=A.tag;if(h===5||h===26||h===27||h===6)return A;for(A=A.child;A!==null;){if(h=u(A),h!==null)return h;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(A){return A===null||typeof A!="object"?null:(A=O&&A[O]||A["@@iterator"],typeof A=="function"?A:null)}var M=Symbol.for("react.client.reference");function Q(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===M?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case x:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case S:return(A.displayName||"Context")+".Provider";case _:return(A._context.displayName||"Context")+".Consumer";case B:var h=A.render;return A=A.displayName,A||(A=h.displayName||h.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return h=A.displayName||null,h!==null?h:Q(A.type)||"Memo";case C:h=A._payload,A=A._init;try{return Q(A(h))}catch{}}return null}var J=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],G=-1;function ne(A){return{current:A}}function R(A){0>G||(A.current=z[G],z[G]=null,G--)}function q(A,h){G++,z[G]=A.current,A.current=h}var Y=ne(null),te=ne(null),ie=ne(null),pe=ne(null);function oe(A,h){switch(q(ie,h),q(te,A),q(Y,null),h.nodeType){case 9:case 11:A=(A=h.documentElement)&&(A=A.namespaceURI)?e8(A):0;break;default:if(A=h.tagName,h=h.namespaceURI)h=e8(h),A=t8(h,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}R(Y),q(Y,A)}function ce(){R(Y),R(te),R(ie)}function ge(A){A.memoizedState!==null&&q(pe,A);var h=Y.current,v=t8(h,A.type);h!==v&&(q(te,A),q(Y,v))}function Fe(A){te.current===A&&(R(Y),R(te)),pe.current===A&&(R(pe),A1._currentValue=H)}var re=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,Oe=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,fe=e.unstable_requestPaint,Ie=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,dt=e.unstable_UserBlockingPriority,Et=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,Ct=e.unstable_IdlePriority,Dt=e.log,Jt=e.unstable_setDisableYieldValue,Pt=null,Mt=null;function Wt(A){if(typeof Dt=="function"&&Jt(A),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Pt,A)}catch{}}var Pe=Math.clz32?Math.clz32:ot,Re=Math.log,Te=Math.LN2;function ot(A){return A>>>=0,A===0?32:31-(Re(A)/Te|0)|0}var vt=256,ur=4194304;function Gt(A){var h=A&42;if(h!==0)return h;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Rt(A,h,v){var w=A.pendingLanes;if(w===0)return 0;var L=0,V=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var be=w&134217727;return be!==0?(w=be&~V,w!==0?L=Gt(w):(le&=be,le!==0?L=Gt(le):v||(v=be&~A,v!==0&&(L=Gt(v))))):(be=w&~V,be!==0?L=Gt(be):le!==0?L=Gt(le):v||(v=w&~A,v!==0&&(L=Gt(v)))),L===0?0:h!==0&&h!==L&&(h&V)===0&&(V=L&-L,v=h&-h,V>=v||V===32&&(v&4194048)!==0)?h:L}function Vr(A,h){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&h)===0}function dr(A,h){switch(A){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yn(){var A=vt;return vt<<=1,(vt&4194048)===0&&(vt=256),A}function Qr(){var A=ur;return ur<<=1,(ur&62914560)===0&&(ur=4194304),A}function kn(A){for(var h=[],v=0;31>v;v++)h.push(A);return h}function ea(A,h){A.pendingLanes|=h,h!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function or(A,h,v,w,L,V){var le=A.pendingLanes;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=v,A.entangledLanes&=v,A.errorRecoveryDisabledLanes&=v,A.shellSuspendCounter=0;var be=A.entanglements,De=A.expirationTimes,nt=A.hiddenUpdates;for(v=le&~v;0<v;){var mt=31-Pe(v),_t=1<<mt;be[mt]=0,De[mt]=-1;var it=nt[mt];if(it!==null)for(nt[mt]=null,mt=0;mt<it.length;mt++){var lt=it[mt];lt!==null&&(lt.lane&=-536870913)}v&=~_t}w!==0&&Zt(A,w,0),V!==0&&L===0&&A.tag!==0&&(A.suspendedLanes|=V&~(le&~h))}function Zt(A,h,v){A.pendingLanes|=h,A.suspendedLanes&=~h;var w=31-Pe(h);A.entangledLanes|=h,A.entanglements[w]=A.entanglements[w]|1073741824|v&4194090}function Kr(A,h){var v=A.entangledLanes|=h;for(A=A.entanglements;v;){var w=31-Pe(v),L=1<<w;L&h|A[w]&h&&(A[w]|=h),v&=~L}}function Ms(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Aa(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Va(){var A=Z.p;return A!==0?A:(A=window.event,A===void 0?32:b8(A.type))}function si(A,h){var v=Z.p;try{return Z.p=A,h()}finally{Z.p=v}}var qt=Math.random().toString(36).slice(2),wn="__reactFiber$"+qt,fn="__reactProps$"+qt,Vn="__reactContainer$"+qt,ta="__reactEvents$"+qt,fa="__reactListeners$"+qt,Ae="__reactHandles$"+qt,Be="__reactResources$"+qt,we="__reactMarker$"+qt;function Ee(A){delete A[wn],delete A[fn],delete A[ta],delete A[fa],delete A[Ae]}function _e(A){var h=A[wn];if(h)return h;for(var v=A.parentNode;v;){if(h=v[Vn]||v[wn]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(A=s8(A);A!==null;){if(v=A[wn])return v;A=s8(A)}return h}A=v,v=A.parentNode}return null}function ke(A){if(A=A[wn]||A[Vn]){var h=A.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return A}return null}function We(A){var h=A.tag;if(h===5||h===26||h===27||h===6)return A.stateNode;throw Error(n(33))}function st(A){var h=A[Be];return h||(h=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function $e(A){A[we]=!0}var Je=new Set,tt={};function wt(A,h){Ot(A,h),Ot(A+"Capture",h)}function Ot(A,h){for(tt[A]=h,A=0;A<h.length;A++)Je.add(h[A])}var Vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Lt={};function wr(A){return re.call(Lt,A)?!0:re.call(jt,A)?!1:Vt.test(A)?Lt[A]=!0:(jt[A]=!0,!1)}function Wr(A,h,v){if(wr(h))if(v===null)A.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":A.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(h);return}}A.setAttribute(h,""+v)}}function Xr(A,h,v){if(v===null)A.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(h);return}A.setAttribute(h,""+v)}}function tn(A,h,v,w){if(w===null)A.removeAttribute(v);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(v);return}A.setAttributeNS(h,v,""+w)}}var rs,oo;function ns(A){if(rs===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);rs=h&&h[1]||"",oo=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rs+A+oo}var Qs=!1;function Es(A,h){if(!A||Qs)return"";Qs=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(lt){var it=lt}Reflect.construct(A,[],_t)}else{try{_t.call()}catch(lt){it=lt}A.call(_t.prototype)}}else{try{throw Error()}catch(lt){it=lt}(_t=A())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(lt){if(lt&&it&&typeof lt.stack=="string")return[lt.stack,it.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=w.DetermineComponentFrameRoot(),le=V[0],be=V[1];if(le&&be){var De=le.split(`
`),nt=be.split(`
`);for(L=w=0;w<De.length&&!De[w].includes("DetermineComponentFrameRoot");)w++;for(;L<nt.length&&!nt[L].includes("DetermineComponentFrameRoot");)L++;if(w===De.length||L===nt.length)for(w=De.length-1,L=nt.length-1;1<=w&&0<=L&&De[w]!==nt[L];)L--;for(;1<=w&&0<=L;w--,L--)if(De[w]!==nt[L]){if(w!==1||L!==1)do if(w--,L--,0>L||De[w]!==nt[L]){var mt=`
`+De[w].replace(" at new "," at ");return A.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",A.displayName)),mt}while(1<=w&&0<=L);break}}}finally{Qs=!1,Error.prepareStackTrace=v}return(v=A?A.displayName||A.name:"")?ns(v):""}function ii(A){switch(A.tag){case 26:case 27:case 5:return ns(A.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return Es(A.type,!1);case 11:return Es(A.type.render,!1);case 1:return Es(A.type,!0);case 31:return ns("Activity");default:return""}}function ha(A){try{var h="";do h+=ii(A),A=A.return;while(A);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Hs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Ad(A){var h=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Xf(A){var h=Ad(A)?"checked":"value",v=Object.getOwnPropertyDescriptor(A.constructor.prototype,h),w=""+A[h];if(!A.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var L=v.get,V=v.set;return Object.defineProperty(A,h,{configurable:!0,get:function(){return L.call(this)},set:function(le){w=""+le,V.call(this,le)}}),Object.defineProperty(A,h,{enumerable:v.enumerable}),{getValue:function(){return w},setValue:function(le){w=""+le},stopTracking:function(){A._valueTracker=null,delete A[h]}}}}function Cc(A){A._valueTracker||(A._valueTracker=Xf(A))}function _A(A){if(!A)return!1;var h=A._valueTracker;if(!h)return!0;var v=h.getValue(),w="";return A&&(w=Ad(A)?A.checked?"true":"false":A.value),A=w,A!==v?(h.setValue(A),!0):!1}function oi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var fd=/[\n"\\]/g;function En(A){return A.replace(fd,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function li(A,h,v,w,L,V,le,be){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),h!=null?le==="number"?(h===0&&A.value===""||A.value!=h)&&(A.value=""+Hs(h)):A.value!==""+Hs(h)&&(A.value=""+Hs(h)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),h!=null?Sc(A,le,Hs(h)):v!=null?Sc(A,le,Hs(v)):w!=null&&A.removeAttribute("value"),L==null&&V!=null&&(A.defaultChecked=!!V),L!=null&&(A.checked=L&&typeof L!="function"&&typeof L!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+Hs(be):A.removeAttribute("name")}function _c(A,h,v,w,L,V,le,be){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(A.type=V),h!=null||v!=null){if(!(V!=="submit"&&V!=="reset"||h!=null))return;v=v!=null?""+Hs(v):"",h=h!=null?""+Hs(h):v,be||h===A.value||(A.value=h),A.defaultValue=h}w=w??L,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=be?A.checked:!!w,A.defaultChecked=!!w,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function Sc(A,h,v){h==="number"&&oi(A.ownerDocument)===A||A.defaultValue===""+v||(A.defaultValue=""+v)}function ll(A,h,v,w){if(A=A.options,h){h={};for(var L=0;L<v.length;L++)h["$"+v[L]]=!0;for(v=0;v<A.length;v++)L=h.hasOwnProperty("$"+A[v].value),A[v].selected!==L&&(A[v].selected=L),L&&w&&(A[v].defaultSelected=!0)}else{for(v=""+Hs(v),h=null,L=0;L<A.length;L++){if(A[L].value===v){A[L].selected=!0,w&&(A[L].defaultSelected=!0);return}h!==null||A[L].disabled||(h=A[L])}h!==null&&(h.selected=!0)}}function Fn(A,h,v){if(h!=null&&(h=""+Hs(h),h!==A.value&&(A.value=h),v==null)){A.defaultValue!==h&&(A.defaultValue=h);return}A.defaultValue=v!=null?""+Hs(v):""}function Nc(A,h,v,w){if(h==null){if(w!=null){if(v!=null)throw Error(n(92));if(J(w)){if(1<w.length)throw Error(n(93));w=w[0]}v=w}v==null&&(v=""),h=v}v=Hs(h),A.defaultValue=v,w=A.textContent,w===v&&w!==""&&w!==null&&(A.value=w)}function lo(A,h){if(h){var v=A.firstChild;if(v&&v===A.lastChild&&v.nodeType===3){v.nodeValue=h;return}}A.textContent=h}var Ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yf(A,h,v){var w=h.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?w?A.setProperty(h,""):h==="float"?A.cssFloat="":A[h]="":w?A.setProperty(h,v):typeof v!="number"||v===0||Ll.has(h)?h==="float"?A.cssFloat=v:A[h]=(""+v).trim():A[h]=v+"px"}function SA(A,h,v){if(h!=null&&typeof h!="object")throw Error(n(62));if(A=A.style,v!=null){for(var w in v)!v.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var L in h)w=h[L],h.hasOwnProperty(L)&&v[L]!==w&&Yf(A,L,w)}else for(var V in h)h.hasOwnProperty(V)&&Yf(A,V,h[V])}function NA(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ml(A){return hd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var cl=null;function ra(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Ql=null,ul=null;function _r(A){var h=ke(A);if(h&&(A=h.stateNode)){var v=A[fn]||null;e:switch(A=h.stateNode,h.type){case"input":if(li(A,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),h=v.name,v.type==="radio"&&h!=null){for(v=A;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+En(""+h)+'"][type="radio"]'),h=0;h<v.length;h++){var w=v[h];if(w!==A&&w.form===A.form){var L=w[fn]||null;if(!L)throw Error(n(90));li(w,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(h=0;h<v.length;h++)w=v[h],w.form===A.form&&_A(w)}break e;case"textarea":Fn(A,v.value,v.defaultValue);break e;case"select":h=v.value,h!=null&&ll(A,!!v.multiple,h,!1)}}}var dl=!1;function Jf(A,h,v){if(dl)return A(h,v);dl=!0;try{var w=A(h);return w}finally{if(dl=!1,(Ql!==null||ul!==null)&&(o2(),Ql&&(h=Ql,A=ul,ul=Ql=null,_r(h),A)))for(h=0;h<A.length;h++)_r(A[h])}}function yi(A,h){var v=A.stateNode;if(v===null)return null;var w=v[fn]||null;if(w===null)return null;v=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(v&&typeof v!="function")throw Error(n(231,h,typeof v));return v}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hi=!1;if(co)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{Hi=!1}var uo=null,Bc=null,Hl=null;function BA(){if(Hl)return Hl;var A,h=Bc,v=h.length,w,L="value"in uo?uo.value:uo.textContent,V=L.length;for(A=0;A<v&&h[A]===L[A];A++);var le=v-A;for(w=1;w<=le&&h[v-w]===L[V-w];w++);return Hl=L.slice(A,1<w?1-w:void 0)}function Ao(A){var h=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&h===13&&(A=13)):A=h,A===10&&(A=13),32<=A||A===13?A:0}function wi(){return!0}function fl(){return!1}function as(A){function h(v,w,L,V,le){this._reactName=v,this._targetInst=L,this.type=w,this.nativeEvent=V,this.target=le,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(v=A[be],this[be]=v?v(V):V[be]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?wi:fl,this.isPropagationStopped=fl,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),h}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=as(on),hl=d({},on,{view:0,detail:0}),kA=as(hl),yu,wu,$o,Ei=d({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==$o&&($o&&A.type==="mousemove"?(yu=A.screenX-$o.screenX,wu=A.screenY-$o.screenY):wu=yu=0,$o=A),yu)},movementY:function(A){return"movementY"in A?A.movementY:wu}}),ss=as(Ei),Zf=d({},Ei,{dataTransfer:0}),Tc=as(Zf),ci=d({},hl,{relatedTarget:0}),Ic=as(ci),Vl=d({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),md=as(Vl),Eu=d({},on,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),pd=as(Eu),TA=d({},on,{data:0}),Cu=as(TA),jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Su(A){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(A):(A=gd[A])?!!h[A]:!1}function Fc(){return Su}var eh=d({},hl,{key:function(A){if(A.key){var h=jc[A.key]||A.key;if(h!=="Unidentified")return h}return A.type==="keypress"?(A=Ao(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?_u[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(A){return A.type==="keypress"?Ao(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Ao(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),zl=as(eh),Oc=d({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nu=as(Oc),Ci=d({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),vd=as(Ci),K=d({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),de=as(K),je=d({},Ei,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=as(je),Ke=d({},on,{newState:0,oldState:0}),ut=as(Ke),kt=[9,13,27,32],zt=co&&"CompositionEvent"in window,j=null;co&&"documentMode"in document&&(j=document.documentMode);var ee=co&&"TextEvent"in window&&!j,se=co&&(!zt||j&&8<j&&11>=j),xe=" ",ze=!1;function rt(A,h){switch(A){case"keyup":return kt.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function It(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Sr=!1;function ln(A,h){switch(A){case"compositionend":return It(h);case"keypress":return h.which!==32?null:(ze=!0,xe);case"textInput":return A=h.data,A===xe&&ze?null:A;default:return null}}function Lr(A,h){if(Sr)return A==="compositionend"||!zt&&rt(A,h)?(A=BA(),Hl=Bc=uo=null,Sr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return se&&h.locale!=="ko"?null:h.data;default:return null}}var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(A){var h=A&&A.nodeName&&A.nodeName.toLowerCase();return h==="input"?!!On[A.type]:h==="textarea"}function ml(A,h,v,w){Ql?ul?ul.push(w):ul=[w]:Ql=w,h=f2(h,"onChange"),0<h.length&&(v=new kc("onChange","change",null,v,w),A.push({event:v,listeners:h}))}var za=null,fo=null;function Dc(A){WL(A,0)}function xd(A){var h=We(A);if(_A(h))return A}function th(A,h){if(A==="change")return h}var IA=!1;if(co){var Cs;if(co){var bd="oninput"in document;if(!bd){var jA=document.createElement("div");jA.setAttribute("oninput","return;"),bd=typeof jA.oninput=="function"}Cs=bd}else Cs=!1;IA=Cs&&(!document.documentMode||9<document.documentMode)}function FA(){za&&(za.detachEvent("onpropertychange",rh),fo=za=null)}function rh(A){if(A.propertyName==="value"&&xd(fo)){var h=[];ml(h,fo,A,ra(A)),Jf(Dc,h)}}function ho(A,h,v){A==="focusin"?(FA(),za=h,fo=v,za.attachEvent("onpropertychange",rh)):A==="focusout"&&FA()}function Fx(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return xd(fo)}function W0(A,h){if(A==="click")return xd(h)}function Pp(A,h){if(A==="input"||A==="change")return xd(h)}function pl(A,h){return A===h&&(A!==0||1/A===1/h)||A!==A&&h!==h}var Vs=typeof Object.is=="function"?Object.is:pl;function yd(A,h){if(Vs(A,h))return!0;if(typeof A!="object"||A===null||typeof h!="object"||h===null)return!1;var v=Object.keys(A),w=Object.keys(h);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var L=v[w];if(!re.call(h,L)||!Vs(A[L],h[L]))return!1}return!0}function X0(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Bu(A,h){var v=X0(A);A=0;for(var w;v;){if(v.nodeType===3){if(w=A+v.textContent.length,A<=h&&w>=h)return{node:v,offset:h-A};A=w}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=X0(v)}}function wd(A,h){return A&&h?A===h?!0:A&&A.nodeType===3?!1:h&&h.nodeType===3?wd(A,h.parentNode):"contains"in A?A.contains(h):A.compareDocumentPosition?!!(A.compareDocumentPosition(h)&16):!1:!1}function Vi(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var h=oi(A.document);h instanceof A.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)A=h.contentWindow;else break;h=oi(A.document)}return h}function ui(A){var h=A&&A.nodeName&&A.nodeName.toLowerCase();return h&&(h==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||h==="textarea"||A.contentEditable==="true")}var Ed=co&&"documentMode"in document&&11>=document.documentMode,mo=null,$l=null,Pc=null,Kl=!1;function Ra(A,h,v){var w=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Kl||mo==null||mo!==oi(w)||(w=mo,"selectionStart"in w&&ui(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Pc&&yd(Pc,w)||(Pc=w,w=f2($l,"onSelect"),0<w.length&&(h=new kc("onSelect","select",null,h,v),A.push({event:h,listeners:w}),h.target=mo)))}function Gl(A,h){var v={};return v[A.toLowerCase()]=h.toLowerCase(),v["Webkit"+A]="webkit"+h,v["Moz"+A]="moz"+h,v}var is={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionrun:Gl("Transition","TransitionRun"),transitionstart:Gl("Transition","TransitionStart"),transitioncancel:Gl("Transition","TransitionCancel"),transitionend:Gl("Transition","TransitionEnd")},po={},OA={};co&&(OA=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Rc(A){if(po[A])return po[A];if(!is[A])return A;var h=is[A],v;for(v in h)if(h.hasOwnProperty(v)&&v in OA)return po[A]=h[v];return A}var nh=Rc("animationend"),Cd=Rc("animationiteration"),_d=Rc("animationstart"),Sd=Rc("transitionrun"),DA=Rc("transitionstart"),ah=Rc("transitioncancel"),Nd=Rc("transitionend"),ku=new Map,PA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");PA.push("scrollEnd");function La(A,h){ku.set(A,h),wt(h,[A])}var Ko=new WeakMap;function nn(A,h){if(typeof A=="object"&&A!==null){var v=Ko.get(A);return v!==void 0?v:(h={value:A,source:h,stack:ha(h)},Ko.set(A,h),h)}return{value:A,source:h,stack:ha(h)}}var an=[],ma=0,$a=0;function gl(){for(var A=ma,h=$a=ma=0;h<A;){var v=an[h];an[h++]=null;var w=an[h];an[h++]=null;var L=an[h];an[h++]=null;var V=an[h];if(an[h++]=null,w!==null&&L!==null){var le=w.pending;le===null?L.next=L:(L.next=le.next,le.next=L),w.pending=L}V!==0&&Rp(v,L,V)}}function Bd(A,h,v,w){an[ma++]=A,an[ma++]=h,an[ma++]=v,an[ma++]=w,$a|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function kd(A,h,v,w){return Bd(A,h,v,w),RA(A)}function Tu(A,h){return Bd(A,null,null,h),RA(A)}function Rp(A,h,v){A.lanes|=v;var w=A.alternate;w!==null&&(w.lanes|=v);for(var L=!1,V=A.return;V!==null;)V.childLanes|=v,w=V.alternate,w!==null&&(w.childLanes|=v),V.tag===22&&(A=V.stateNode,A===null||A._visibility&1||(L=!0)),A=V,V=V.return;return A.tag===3?(V=A.stateNode,L&&h!==null&&(L=31-Pe(v),A=V.hiddenUpdates,w=A[L],w===null?A[L]=[h]:w.push(h),h.lane=v|536870912),V):null}function RA(A){if(50<a1)throw a1=0,B4=null,Error(n(185));for(var h=A.return;h!==null;)A=h,h=A.return;return A.tag===3?A.stateNode:null}var zs={};function vl(A,h,v,w){this.tag=A,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(A,h,v,w){return new vl(A,h,v,w)}function sh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Lc(A,h){var v=A.alternate;return v===null?(v=_i(A.tag,h,A.key,A.mode),v.elementType=A.elementType,v.type=A.type,v.stateNode=A.stateNode,v.alternate=A,A.alternate=v):(v.pendingProps=h,v.type=A.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=A.flags&65011712,v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,h=A.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=A.sibling,v.index=A.index,v.ref=A.ref,v.refCleanup=A.refCleanup,v}function Y0(A,h){A.flags&=65011714;var v=A.alternate;return v===null?(A.childLanes=0,A.lanes=h,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=v.childLanes,A.lanes=v.lanes,A.child=v.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=v.memoizedProps,A.memoizedState=v.memoizedState,A.updateQueue=v.updateQueue,A.type=v.type,h=v.dependencies,A.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),A}function LA(A,h,v,w,L,V){var le=0;if(w=A,typeof A=="function")sh(A)&&(le=1);else if(typeof A=="string")le=oce(A,v,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=_i(31,v,h,L),A.elementType=N,A.lanes=V,A;case x:return Iu(v.children,L,V,h);case g:le=8,L|=24;break;case b:return A=_i(12,v,h,L|2),A.elementType=b,A.lanes=V,A;case I:return A=_i(13,v,h,L),A.elementType=I,A.lanes=V,A;case D:return A=_i(19,v,h,L),A.elementType=D,A.lanes=V,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case S:le=10;break e;case _:le=9;break e;case B:le=11;break e;case E:le=14;break e;case C:le=16,w=null;break e}le=29,v=Error(n(130,A===null?"null":typeof A,"")),w=null}return h=_i(le,v,h,L),h.elementType=A,h.type=w,h.lanes=V,h}function Iu(A,h,v,w){return A=_i(7,A,w,h),A.lanes=v,A}function Lp(A,h,v){return A=_i(6,A,null,h),A.lanes=v,A}function J0(A,h,v){return h=_i(4,A.children!==null?A.children:[],A.key,h),h.lanes=v,h.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},h}var Td=[],ju=0,ih=null,Up=0,xl=[],Go=0,UA=null,Fu=1,Ou="";function MA(A,h){Td[ju++]=Up,Td[ju++]=ih,ih=A,Up=h}function Iw(A,h,v){xl[Go++]=Fu,xl[Go++]=Ou,xl[Go++]=UA,UA=A;var w=Fu;A=Ou;var L=32-Pe(w)-1;w&=~(1<<L),v+=1;var V=32-Pe(h)+L;if(30<V){var le=L-L%5;V=(w&(1<<le)-1).toString(32),w>>=le,L-=le,Fu=1<<32-Pe(h)+L|v<<L|w,Ou=V+A}else Fu=1<<V|v<<L|w,Ou=A}function Z0(A){A.return!==null&&(MA(A,1),Iw(A,1,0))}function em(A){for(;A===ih;)ih=Td[--ju],Td[ju]=null,Up=Td[--ju],Td[ju]=null;for(;A===UA;)UA=xl[--Go],xl[Go]=null,Ou=xl[--Go],xl[Go]=null,Fu=xl[--Go],xl[Go]=null}var _s=null,Ua=null,Tn=!1,Id=null,Uc=!1,Ox=Error(n(519));function QA(A){var h=Error(n(418,""));throw oh(nn(h,A)),Ox}function jw(A){var h=A.stateNode,v=A.type,w=A.memoizedProps;switch(h[wn]=A,h[fn]=w,v){case"dialog":mn("cancel",h),mn("close",h);break;case"iframe":case"object":case"embed":mn("load",h);break;case"video":case"audio":for(v=0;v<i1.length;v++)mn(i1[v],h);break;case"source":mn("error",h);break;case"img":case"image":case"link":mn("error",h),mn("load",h);break;case"details":mn("toggle",h);break;case"input":mn("invalid",h),_c(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),Cc(h);break;case"select":mn("invalid",h);break;case"textarea":mn("invalid",h),Nc(h,w.value,w.defaultValue,w.children),Cc(h)}v=w.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||h.textContent===""+v||w.suppressHydrationWarning===!0||ZL(h.textContent,v)?(w.popover!=null&&(mn("beforetoggle",h),mn("toggle",h)),w.onScroll!=null&&mn("scroll",h),w.onScrollEnd!=null&&mn("scrollend",h),w.onClick!=null&&(h.onclick=h2),h=!0):h=!1,h||QA(A)}function Du(A){for(_s=A.return;_s;)switch(_s.tag){case 5:case 13:Uc=!1;return;case 27:case 3:Uc=!0;return;default:_s=_s.return}}function zi(A){if(A!==_s)return!1;if(!Tn)return Du(A),Tn=!0,!1;var h=A.tag,v;if((v=h!==3&&h!==27)&&((v=h===5)&&(v=A.type,v=!(v!=="form"&&v!=="button")||z4(A.type,A.memoizedProps)),v=!v),v&&Ua&&QA(A),Du(A),h===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,h=0;A;){if(A.nodeType===8)if(v=A.data,v==="/$"){if(h===0){Ua=Vu(A.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++;A=A.nextSibling}Ua=null}}else h===27?(h=Ua,Ch(A.type)?(A=q4,q4=null,Ua=A):Ua=h):Ua=_s?Vu(A.stateNode.nextSibling):null;return!0}function qo(){Ua=_s=null,Tn=!1}function Fw(){var A=Id;return A!==null&&(wl===null?wl=A:wl.push.apply(wl,A),Id=null),A}function oh(A){Id===null?Id=[A]:Id.push(A)}var Mc=ne(null),$s=null,Pu=null;function jd(A,h,v){q(Mc,h._currentValue),h._currentValue=v}function Qc(A){A._currentValue=Mc.current,R(Mc)}function Mp(A,h,v){for(;A!==null;){var w=A.alternate;if((A.childLanes&h)!==h?(A.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),A===v)break;A=A.return}}function Qp(A,h,v,w){var L=A.child;for(L!==null&&(L.return=A);L!==null;){var V=L.dependencies;if(V!==null){var le=L.child;V=V.firstContext;e:for(;V!==null;){var be=V;V=L;for(var De=0;De<h.length;De++)if(be.context===h[De]){V.lanes|=v,be=V.alternate,be!==null&&(be.lanes|=v),Mp(V.return,v,A),w||(le=null);break e}V=be.next}}else if(L.tag===18){if(le=L.return,le===null)throw Error(n(341));le.lanes|=v,V=le.alternate,V!==null&&(V.lanes|=v),Mp(le,v,A),le=null}else le=L.child;if(le!==null)le.return=L;else for(le=L;le!==null;){if(le===A){le=null;break}if(L=le.sibling,L!==null){L.return=le.return,le=L;break}le=le.return}L=le}}function lh(A,h,v,w){A=null;for(var L=h,V=!1;L!==null;){if(!V){if((L.flags&524288)!==0)V=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var le=L.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var be=L.type;Vs(L.pendingProps.value,le.value)||(A!==null?A.push(be):A=[be])}}else if(L===pe.current){if(le=L.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(A!==null?A.push(A1):A=[A1])}L=L.return}A!==null&&Qp(h,A,v,w),h.flags|=262144}function Hp(A){for(A=A.firstContext;A!==null;){if(!Vs(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Hc(A){$s=A,Pu=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ss(A){return Vp($s,A)}function Fd(A,h){return $s===null&&Hc(A),Vp(A,h)}function Vp(A,h){var v=h._currentValue;if(h={context:h,memoizedValue:v,next:null},Pu===null){if(A===null)throw Error(n(308));Pu=h,A.dependencies={lanes:0,firstContext:h},A.flags|=524288}else Pu=Pu.next=h;return v}var ZN=typeof AbortController<"u"?AbortController:function(){var A=[],h=this.signal={aborted:!1,addEventListener:function(v,w){A.push(w)}};this.abort=function(){h.aborted=!0,A.forEach(function(v){return v()})}},Ow=e.unstable_scheduleCallback,e4=e.unstable_NormalPriority,Ns={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dx(){return{controller:new ZN,data:new Map,refCount:0}}function tm(A){A.refCount--,A.refCount===0&&Ow(e4,function(){A.controller.abort()})}var rm=null,Px=0,HA=0,Ru=null;function t4(A,h){if(rm===null){var v=rm=[];Px=0,HA=D4(),Ru={status:"pending",value:void 0,then:function(w){v.push(w)}}}return Px++,h.then(Dw,Dw),h}function Dw(){if(--Px===0&&rm!==null){Ru!==null&&(Ru.status="fulfilled");var A=rm;rm=null,HA=0,Ru=null;for(var h=0;h<A.length;h++)(0,A[h])()}}function Pw(A,h){var v=[],w={status:"pending",value:null,reason:null,then:function(L){v.push(L)}};return A.then(function(){w.status="fulfilled",w.value=h;for(var L=0;L<v.length;L++)(0,v[L])(h)},function(L){for(w.status="rejected",w.reason=L,L=0;L<v.length;L++)(0,v[L])(void 0)}),w}var k=W.S;W.S=function(A,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&t4(A,h),k!==null&&k(A,h)};var U=ne(null);function X(){var A=U.current;return A!==null?A:Sa.pooledCache}function ae(A,h){h===null?q(U,U.current):q(U,h.pool)}function ue(){var A=X();return A===null?null:{parent:Ns._currentValue,pool:A}}var he=Error(n(460)),me=Error(n(474)),ve=Error(n(542)),ye={then:function(){}};function Se(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function et(A,h,v){switch(v=A[v],v===void 0?A.push(h):v!==h&&(h.then(Ue,Ue),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw A=h.reason,bt(A),A;default:if(typeof h.status=="string")h.then(Ue,Ue);else{if(A=Sa,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=h,A.status="pending",A.then(function(w){if(h.status==="pending"){var L=h;L.status="fulfilled",L.value=w}},function(w){if(h.status==="pending"){var L=h;L.status="rejected",L.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw A=h.reason,bt(A),A}throw Ye=h,he}}var Ye=null;function Ge(){if(Ye===null)throw Error(n(459));var A=Ye;return Ye=null,A}function bt(A){if(A===he||A===ve)throw Error(n(483))}var ct=!1;function Me(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,h){A=A.updateQueue,h.updateQueue===A&&(h.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ht(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function yt(A,h,v){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(aa&2)!==0){var L=w.pending;return L===null?h.next=h:(h.next=L.next,L.next=h),w.pending=h,h=RA(A),Rp(A,null,v),h}return Bd(A,w,h,v),RA(A)}function pt(A,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194048)!==0)){var w=h.lanes;w&=A.pendingLanes,v|=w,h.lanes=v,Kr(A,v)}}function Yt(A,h){var v=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var L=null,V=null;if(v=v.firstBaseUpdate,v!==null){do{var le={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};V===null?L=V=le:V=V.next=le,v=v.next}while(v!==null);V===null?L=V=h:V=V.next=h}else L=V=h;v={baseState:w.baseState,firstBaseUpdate:L,lastBaseUpdate:V,shared:w.shared,callbacks:w.callbacks},A.updateQueue=v;return}A=v.lastBaseUpdate,A===null?v.firstBaseUpdate=h:A.next=h,v.lastBaseUpdate=h}var Ht=!1;function Ar(){if(Ht){var A=Ru;if(A!==null)throw A}}function $t(A,h,v,w){Ht=!1;var L=A.updateQueue;ct=!1;var V=L.firstBaseUpdate,le=L.lastBaseUpdate,be=L.shared.pending;if(be!==null){L.shared.pending=null;var De=be,nt=De.next;De.next=null,le===null?V=nt:le.next=nt,le=De;var mt=A.alternate;mt!==null&&(mt=mt.updateQueue,be=mt.lastBaseUpdate,be!==le&&(be===null?mt.firstBaseUpdate=nt:be.next=nt,mt.lastBaseUpdate=De))}if(V!==null){var _t=L.baseState;le=0,mt=nt=De=null,be=V;do{var it=be.lane&-536870913,lt=it!==be.lane;if(lt?(Nn&it)===it:(w&it)===it){it!==0&&it===HA&&(Ht=!0),mt!==null&&(mt=mt.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var Pr=A,Nr=be;it=h;var ga=v;switch(Nr.tag){case 1:if(Pr=Nr.payload,typeof Pr=="function"){_t=Pr.call(ga,_t,it);break e}_t=Pr;break e;case 3:Pr.flags=Pr.flags&-65537|128;case 0:if(Pr=Nr.payload,it=typeof Pr=="function"?Pr.call(ga,_t,it):Pr,it==null)break e;_t=d({},_t,it);break e;case 2:ct=!0}}it=be.callback,it!==null&&(A.flags|=64,lt&&(A.flags|=8192),lt=L.callbacks,lt===null?L.callbacks=[it]:lt.push(it))}else lt={lane:it,tag:be.tag,payload:be.payload,callback:be.callback,next:null},mt===null?(nt=mt=lt,De=_t):mt=mt.next=lt,le|=it;if(be=be.next,be===null){if(be=L.shared.pending,be===null)break;lt=be,be=lt.next,lt.next=null,L.lastBaseUpdate=lt,L.shared.pending=null}}while(!0);mt===null&&(De=_t),L.baseState=De,L.firstBaseUpdate=nt,L.lastBaseUpdate=mt,V===null&&(L.shared.lanes=0),bh|=le,A.lanes=le,A.memoizedState=_t}}function _n(A,h){if(typeof A!="function")throw Error(n(191,A));A.call(h)}function Dn(A,h){var v=A.callbacks;if(v!==null)for(A.callbacks=null,A=0;A<v.length;A++)_n(v[A],h)}var rn=ne(null),Yr=ne(0);function qn(A,h){A=JA,q(Yr,A),q(rn,h),JA=A|h.baseLanes}function Pn(){q(Yr,JA),q(rn,rn.current)}function Ur(){JA=Yr.current,R(rn),R(Yr)}var na=0,Er=null,Ir=null,Cn=null,Sn=!1,Ks=!1,Bs=!1,Ka=0,Ga=0,os=null,bl=0;function Rn(){throw Error(n(321))}function ls(A,h){if(h===null)return!1;for(var v=0;v<h.length&&v<A.length;v++)if(!Vs(A[v],h[v]))return!1;return!0}function ql(A,h,v,w,L,V){return na=V,Er=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,W.H=A===null||A.memoizedState===null?FR:OR,Bs=!1,V=v(w,L),Bs=!1,Ks&&(V=VA(h,v,w,L)),Od(A),V}function Od(A){W.H=qw;var h=Ir!==null&&Ir.next!==null;if(na=0,Cn=Ir=Er=null,Sn=!1,Ga=0,os=null,h)throw Error(n(300));A===null||Si||(A=A.dependencies,A!==null&&Hp(A)&&(Si=!0))}function VA(A,h,v,w){Er=A;var L=0;do{if(Ks&&(os=null),Ga=0,Ks=!1,25<=L)throw Error(n(301));if(L+=1,Cn=Ir=null,A.updateQueue!=null){var V=A.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}W.H=vle,V=h(v,w)}while(Ks);return V}function Dd(){var A=W.H,h=A.useState()[0];return h=typeof h.then=="function"?Pd(h):h,A=A.useState()[0],(Ir!==null?Ir.memoizedState:null)!==A&&(Er.flags|=1024),h}function _a(){var A=Ka!==0;return Ka=0,A}function nm(A,h,v){h.updateQueue=A.updateQueue,h.flags&=-2053,A.lanes&=~v}function zp(A){if(Sn){for(A=A.memoizedState;A!==null;){var h=A.queue;h!==null&&(h.pending=null),A=A.next}Sn=!1}na=0,Cn=Ir=Er=null,Ks=!1,Ga=Ka=0,os=null}function $i(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Er.memoizedState=Cn=A:Cn=Cn.next=A,Cn}function Ia(){if(Ir===null){var A=Er.alternate;A=A!==null?A.memoizedState:null}else A=Ir.next;var h=Cn===null?Er.memoizedState:Cn.next;if(h!==null)Cn=h,Ir=A;else{if(A===null)throw Er.alternate===null?Error(n(467)):Error(n(310));Ir=A,A={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Cn===null?Er.memoizedState=Cn=A:Cn=Cn.next=A}return Cn}function zA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pd(A){var h=Ga;return Ga+=1,os===null&&(os=[]),A=et(os,A,h),h=Er,(Cn===null?h.memoizedState:Cn.next)===null&&(h=h.alternate,W.H=h===null||h.memoizedState===null?FR:OR),A}function go(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Pd(A);if(A.$$typeof===S)return Ss(A)}throw Error(n(438,String(A)))}function Rd(A){var h=null,v=Er.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var w=Er.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(L){return L.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=zA(),Er.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(A),w=0;w<A;w++)v[w]=P;return h.index++,v}function vo(A,h){return typeof h=="function"?h(A):h}function am(A){var h=Ia();return ch(h,Ir,A)}function ch(A,h,v){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=v;var L=A.baseQueue,V=w.pending;if(V!==null){if(L!==null){var le=L.next;L.next=V.next,V.next=le}h.baseQueue=L=V,w.pending=null}if(V=A.baseState,L===null)A.memoizedState=V;else{h=L.next;var be=le=null,De=null,nt=h,mt=!1;do{var _t=nt.lane&-536870913;if(_t!==nt.lane?(Nn&_t)===_t:(na&_t)===_t){var it=nt.revertLane;if(it===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),_t===HA&&(mt=!0);else if((na&it)===it){nt=nt.next,it===HA&&(mt=!0);continue}else _t={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},De===null?(be=De=_t,le=V):De=De.next=_t,Er.lanes|=it,bh|=it;_t=nt.action,Bs&&v(V,_t),V=nt.hasEagerState?nt.eagerState:v(V,_t)}else it={lane:_t,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},De===null?(be=De=it,le=V):De=De.next=it,Er.lanes|=_t,bh|=_t;nt=nt.next}while(nt!==null&&nt!==h);if(De===null?le=V:De.next=be,!Vs(V,A.memoizedState)&&(Si=!0,mt&&(v=Ru,v!==null)))throw v;A.memoizedState=V,A.baseState=le,A.baseQueue=De,w.lastRenderedState=V}return L===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function $p(A){var h=Ia(),v=h.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=A;var w=v.dispatch,L=v.pending,V=h.memoizedState;if(L!==null){v.pending=null;var le=L=L.next;do V=A(V,le.action),le=le.next;while(le!==L);Vs(V,h.memoizedState)||(Si=!0),h.memoizedState=V,h.baseQueue===null&&(h.baseState=V),v.lastRenderedState=V}return[V,w]}function sm(A,h,v){var w=Er,L=Ia(),V=Tn;if(V){if(v===void 0)throw Error(n(407));v=v()}else v=h();var le=!Vs((Ir||L).memoizedState,v);le&&(L.memoizedState=v,Si=!0),L=L.queue;var be=uh.bind(null,w,L,A);if(fh(2048,8,be,[A]),L.getSnapshot!==h||le||Cn!==null&&Cn.memoizedState.tag&1){if(w.flags|=2048,Uu(9,cm(),im.bind(null,w,L,v,h),null),Sa===null)throw Error(n(349));V||(na&124)!==0||Kp(w,h,v)}return v}function Kp(A,h,v){A.flags|=16384,A={getSnapshot:h,value:v},h=Er.updateQueue,h===null?(h=zA(),Er.updateQueue=h,h.stores=[A]):(v=h.stores,v===null?h.stores=[A]:v.push(A))}function im(A,h,v,w){h.value=v,h.getSnapshot=w,Rw(h)&&Lw(A)}function uh(A,h,v){return v(function(){Rw(h)&&Lw(A)})}function Rw(A){var h=A.getSnapshot;A=A.value;try{var v=h();return!Vs(A,v)}catch{return!0}}function Lw(A){var h=Tu(A,2);h!==null&&ec(h,A,2)}function om(A){var h=$i();if(typeof A=="function"){var v=A;if(A=v(),Bs){Wt(!0);try{v()}finally{Wt(!1)}}}return h.memoizedState=h.baseState=A,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:A},h}function Lu(A,h,v,w){return A.baseState=v,ch(A,Ir,typeof w=="function"?w:vo)}function r4(A,h,v,w,L){if(Gw(A))throw Error(n(485));if(A=h.action,A!==null){var V={payload:L,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){V.listeners.push(le)}};W.T!==null?v(!0):V.isTransition=!1,w(V),v=h.pending,v===null?(V.next=h.pending=V,Uw(h,V)):(V.next=v.next,h.pending=v.next=V)}}function Uw(A,h){var v=h.action,w=h.payload,L=A.state;if(h.isTransition){var V=W.T,le={};W.T=le;try{var be=v(L,w),De=W.S;De!==null&&De(le,be),Mw(A,h,be)}catch(nt){dh(A,h,nt)}finally{W.T=V}}else try{V=v(L,w),Mw(A,h,V)}catch(nt){dh(A,h,nt)}}function Mw(A,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(w){Rx(A,h,w)},function(w){return dh(A,h,w)}):Rx(A,h,v)}function Rx(A,h,v){h.status="fulfilled",h.value=v,Lx(h),A.state=v,h=A.pending,h!==null&&(v=h.next,v===h?A.pending=null:(v=v.next,h.next=v,Uw(A,v)))}function dh(A,h,v){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=v,Lx(h),h=h.next;while(h!==w)}A.action=null}function Lx(A){A=A.listeners;for(var h=0;h<A.length;h++)(0,A[h])()}function Ux(A,h){return h}function lm(A,h){if(Tn){var v=Sa.formState;if(v!==null){e:{var w=Er;if(Tn){if(Ua){t:{for(var L=Ua,V=Uc;L.nodeType!==8;){if(!V){L=null;break t}if(L=Vu(L.nextSibling),L===null){L=null;break t}}V=L.data,L=V==="F!"||V==="F"?L:null}if(L){Ua=Vu(L.nextSibling),w=L.data==="F!";break e}}QA(w)}w=!1}w&&(h=v[0])}}return v=$i(),v.memoizedState=v.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ux,lastRenderedState:h},v.queue=w,v=TR.bind(null,Er,w),w.dispatch=v,w=om(!1),V=n4.bind(null,Er,!1,w.queue),w=$i(),L={state:h,dispatch:null,action:A,pending:null},w.queue=L,v=r4.bind(null,Er,L,V,v),L.dispatch=v,w.memoizedState=A,[h,v,!1]}function Gp(A){var h=Ia();return Ah(h,Ir,A)}function Ah(A,h,v){if(h=ch(A,h,Ux)[0],A=am(vo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=Pd(h)}catch(le){throw le===he?ve:le}else w=h;h=Ia();var L=h.queue,V=L.dispatch;return v!==h.memoizedState&&(Er.flags|=2048,Uu(9,cm(),Qw.bind(null,L,v),null)),[w,V,A]}function Qw(A,h){A.action=h}function Hw(A){var h=Ia(),v=Ir;if(v!==null)return Ah(h,v,A);Ia(),h=h.memoizedState,v=Ia();var w=v.queue.dispatch;return v.memoizedState=A,[h,w,!1]}function Uu(A,h,v,w){return A={tag:A,create:v,deps:w,inst:h,next:null},h=Er.updateQueue,h===null&&(h=zA(),Er.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=A.next=A:(w=v.next,v.next=A,A.next=w,h.lastEffect=A),A}function cm(){return{destroy:void 0,resource:void 0}}function qp(){return Ia().memoizedState}function Wl(A,h,v,w){var L=$i();w=w===void 0?null:w,Er.flags|=A,L.memoizedState=Uu(1|h,cm(),v,w)}function fh(A,h,v,w){var L=Ia();w=w===void 0?null:w;var V=L.memoizedState.inst;Ir!==null&&w!==null&&ls(w,Ir.memoizedState.deps)?L.memoizedState=Uu(h,V,v,w):(Er.flags|=A,L.memoizedState=Uu(1|h,V,v,w))}function Mx(A,h){Wl(8390656,8,A,h)}function Vw(A,h){fh(2048,8,A,h)}function Qx(A,h){return fh(4,2,A,h)}function $A(A,h){return fh(4,4,A,h)}function zw(A,h){if(typeof h=="function"){A=A();var v=h(A);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return A=A(),h.current=A,function(){h.current=null}}function Hx(A,h,v){v=v!=null?v.concat([A]):null,fh(4,4,zw.bind(null,h,A),v)}function Vx(){}function zx(A,h){var v=Ia();h=h===void 0?null:h;var w=v.memoizedState;return h!==null&&ls(h,w[1])?w[0]:(v.memoizedState=[A,h],A)}function $w(A,h){var v=Ia();h=h===void 0?null:h;var w=v.memoizedState;if(h!==null&&ls(h,w[1]))return w[0];if(w=A(),Bs){Wt(!0);try{A()}finally{Wt(!1)}}return v.memoizedState=[w,h],w}function KA(A,h,v){return v===void 0||(na&1073741824)!==0?A.memoizedState=h:(A.memoizedState=v,A=SL(),Er.lanes|=A,bh|=A,v)}function Wp(A,h,v,w){return Vs(v,h)?v:rn.current!==null?(A=KA(A,v,w),Vs(A,h)||(Si=!0),A):(na&42)===0?(Si=!0,A.memoizedState=v):(A=SL(),Er.lanes|=A,bh|=A,h)}function um(A,h,v,w,L){var V=Z.p;Z.p=V!==0&&8>V?V:8;var le=W.T,be={};W.T=be,n4(A,!1,h,v);try{var De=L(),nt=W.S;if(nt!==null&&nt(be,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var mt=Pw(De,w);qx(A,h,mt,Zl(A))}else qx(A,h,w,Zl(A))}catch(_t){qx(A,h,{then:function(){},status:"rejected",reason:_t},Zl())}finally{Z.p=V,W.T=le}}function Mu(){}function Vc(A,h,v,w){if(A.tag!==5)throw Error(n(476));var L=Qu(A).queue;um(A,L,h,H,v===null?Mu:function(){return dm(A),v(w)})}function Qu(A){var h=A.memoizedState;if(h!==null)return h;h={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:H},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:v},next:null},A.memoizedState=h,A=A.alternate,A!==null&&(A.memoizedState=h),h}function dm(A){var h=Qu(A).next.queue;qx(A,h,{},Zl())}function Am(){return Ss(A1)}function $x(){return Ia().memoizedState}function Kw(){return Ia().memoizedState}function Kx(A){for(var h=A.return;h!==null;){switch(h.tag){case 24:case 3:var v=Zl();A=ht(v);var w=yt(h,A,v);w!==null&&(ec(w,h,v),pt(w,h,v)),h={cache:Dx()},A.payload=h;return}h=h.return}}function Gx(A,h,v){var w=Zl();v={lane:w,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Gw(A)?IR(h,v):(v=kd(A,h,v,w),v!==null&&(ec(v,A,w),jR(v,h,w)))}function TR(A,h,v){var w=Zl();qx(A,h,v,w)}function qx(A,h,v,w){var L={lane:w,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Gw(A))IR(h,L);else{var V=A.alternate;if(A.lanes===0&&(V===null||V.lanes===0)&&(V=h.lastRenderedReducer,V!==null))try{var le=h.lastRenderedState,be=V(le,v);if(L.hasEagerState=!0,L.eagerState=be,Vs(be,le))return Bd(A,h,L,0),Sa===null&&gl(),!1}catch{}finally{}if(v=kd(A,h,L,w),v!==null)return ec(v,A,w),jR(v,h,w),!0}return!1}function n4(A,h,v,w){if(w={lane:2,revertLane:D4(),action:w,hasEagerState:!1,eagerState:null,next:null},Gw(A)){if(h)throw Error(n(479))}else h=kd(A,v,w,2),h!==null&&ec(h,A,2)}function Gw(A){var h=A.alternate;return A===Er||h!==null&&h===Er}function IR(A,h){Ks=Sn=!0;var v=A.pending;v===null?h.next=h:(h.next=v.next,v.next=h),A.pending=h}function jR(A,h,v){if((v&4194048)!==0){var w=h.lanes;w&=A.pendingLanes,v|=w,h.lanes=v,Kr(A,v)}}var qw={readContext:Ss,use:go,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useInsertionEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useSyncExternalStore:Rn,useId:Rn,useHostTransitionStatus:Rn,useFormState:Rn,useActionState:Rn,useOptimistic:Rn,useMemoCache:Rn,useCacheRefresh:Rn},FR={readContext:Ss,use:go,useCallback:function(A,h){return $i().memoizedState=[A,h===void 0?null:h],A},useContext:Ss,useEffect:Mx,useImperativeHandle:function(A,h,v){v=v!=null?v.concat([A]):null,Wl(4194308,4,zw.bind(null,h,A),v)},useLayoutEffect:function(A,h){return Wl(4194308,4,A,h)},useInsertionEffect:function(A,h){Wl(4,2,A,h)},useMemo:function(A,h){var v=$i();h=h===void 0?null:h;var w=A();if(Bs){Wt(!0);try{A()}finally{Wt(!1)}}return v.memoizedState=[w,h],w},useReducer:function(A,h,v){var w=$i();if(v!==void 0){var L=v(h);if(Bs){Wt(!0);try{v(h)}finally{Wt(!1)}}}else L=h;return w.memoizedState=w.baseState=L,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:L},w.queue=A,A=A.dispatch=Gx.bind(null,Er,A),[w.memoizedState,A]},useRef:function(A){var h=$i();return A={current:A},h.memoizedState=A},useState:function(A){A=om(A);var h=A.queue,v=TR.bind(null,Er,h);return h.dispatch=v,[A.memoizedState,v]},useDebugValue:Vx,useDeferredValue:function(A,h){var v=$i();return KA(v,A,h)},useTransition:function(){var A=om(!1);return A=um.bind(null,Er,A.queue,!0,!1),$i().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,h,v){var w=Er,L=$i();if(Tn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=h(),Sa===null)throw Error(n(349));(Nn&124)!==0||Kp(w,h,v)}L.memoizedState=v;var V={value:v,getSnapshot:h};return L.queue=V,Mx(uh.bind(null,w,V,A),[A]),w.flags|=2048,Uu(9,cm(),im.bind(null,w,V,v,h),null),v},useId:function(){var A=$i(),h=Sa.identifierPrefix;if(Tn){var v=Ou,w=Fu;v=(w&~(1<<32-Pe(w)-1)).toString(32)+v,h=""+h+"R"+v,v=Ka++,0<v&&(h+="H"+v.toString(32)),h+=""}else v=bl++,h=""+h+"r"+v.toString(32)+"";return A.memoizedState=h},useHostTransitionStatus:Am,useFormState:lm,useActionState:lm,useOptimistic:function(A){var h=$i();h.memoizedState=h.baseState=A;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=n4.bind(null,Er,!0,v),v.dispatch=h,[A,h]},useMemoCache:Rd,useCacheRefresh:function(){return $i().memoizedState=Kx.bind(null,Er)}},OR={readContext:Ss,use:go,useCallback:zx,useContext:Ss,useEffect:Vw,useImperativeHandle:Hx,useInsertionEffect:Qx,useLayoutEffect:$A,useMemo:$w,useReducer:am,useRef:qp,useState:function(){return am(vo)},useDebugValue:Vx,useDeferredValue:function(A,h){var v=Ia();return Wp(v,Ir.memoizedState,A,h)},useTransition:function(){var A=am(vo)[0],h=Ia().memoizedState;return[typeof A=="boolean"?A:Pd(A),h]},useSyncExternalStore:sm,useId:$x,useHostTransitionStatus:Am,useFormState:Gp,useActionState:Gp,useOptimistic:function(A,h){var v=Ia();return Lu(v,Ir,A,h)},useMemoCache:Rd,useCacheRefresh:Kw},vle={readContext:Ss,use:go,useCallback:zx,useContext:Ss,useEffect:Vw,useImperativeHandle:Hx,useInsertionEffect:Qx,useLayoutEffect:$A,useMemo:$w,useReducer:$p,useRef:qp,useState:function(){return $p(vo)},useDebugValue:Vx,useDeferredValue:function(A,h){var v=Ia();return Ir===null?KA(v,A,h):Wp(v,Ir.memoizedState,A,h)},useTransition:function(){var A=$p(vo)[0],h=Ia().memoizedState;return[typeof A=="boolean"?A:Pd(A),h]},useSyncExternalStore:sm,useId:$x,useHostTransitionStatus:Am,useFormState:Hw,useActionState:Hw,useOptimistic:function(A,h){var v=Ia();return Ir!==null?Lu(v,Ir,A,h):(v.baseState=A,[A,v.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:Kw},Xp=null,Wx=0;function Ww(A){var h=Wx;return Wx+=1,Xp===null&&(Xp=[]),et(Xp,A,h)}function Xx(A,h){h=h.props.ref,A.ref=h!==void 0?h:null}function Xw(A,h){throw h.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(h),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":A)))}function DR(A){var h=A._init;return h(A._payload)}function PR(A){function h(qe,Qe){if(A){var Ze=qe.deletions;Ze===null?(qe.deletions=[Qe],qe.flags|=16):Ze.push(Qe)}}function v(qe,Qe){if(!A)return null;for(;Qe!==null;)h(qe,Qe),Qe=Qe.sibling;return null}function w(qe){for(var Qe=new Map;qe!==null;)qe.key!==null?Qe.set(qe.key,qe):Qe.set(qe.index,qe),qe=qe.sibling;return Qe}function L(qe,Qe){return qe=Lc(qe,Qe),qe.index=0,qe.sibling=null,qe}function V(qe,Qe,Ze){return qe.index=Ze,A?(Ze=qe.alternate,Ze!==null?(Ze=Ze.index,Ze<Qe?(qe.flags|=67108866,Qe):Ze):(qe.flags|=67108866,Qe)):(qe.flags|=1048576,Qe)}function le(qe){return A&&qe.alternate===null&&(qe.flags|=67108866),qe}function be(qe,Qe,Ze,xt){return Qe===null||Qe.tag!==6?(Qe=Lp(Ze,qe.mode,xt),Qe.return=qe,Qe):(Qe=L(Qe,Ze),Qe.return=qe,Qe)}function De(qe,Qe,Ze,xt){var lr=Ze.type;return lr===x?mt(qe,Qe,Ze.props.children,xt,Ze.key):Qe!==null&&(Qe.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===C&&DR(lr)===Qe.type)?(Qe=L(Qe,Ze.props),Xx(Qe,Ze),Qe.return=qe,Qe):(Qe=LA(Ze.type,Ze.key,Ze.props,null,qe.mode,xt),Xx(Qe,Ze),Qe.return=qe,Qe)}function nt(qe,Qe,Ze,xt){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==Ze.containerInfo||Qe.stateNode.implementation!==Ze.implementation?(Qe=J0(Ze,qe.mode,xt),Qe.return=qe,Qe):(Qe=L(Qe,Ze.children||[]),Qe.return=qe,Qe)}function mt(qe,Qe,Ze,xt,lr){return Qe===null||Qe.tag!==7?(Qe=Iu(Ze,qe.mode,xt,lr),Qe.return=qe,Qe):(Qe=L(Qe,Ze),Qe.return=qe,Qe)}function _t(qe,Qe,Ze){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Lp(""+Qe,qe.mode,Ze),Qe.return=qe,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case m:return Ze=LA(Qe.type,Qe.key,Qe.props,null,qe.mode,Ze),Xx(Ze,Qe),Ze.return=qe,Ze;case p:return Qe=J0(Qe,qe.mode,Ze),Qe.return=qe,Qe;case C:var xt=Qe._init;return Qe=xt(Qe._payload),_t(qe,Qe,Ze)}if(J(Qe)||F(Qe))return Qe=Iu(Qe,qe.mode,Ze,null),Qe.return=qe,Qe;if(typeof Qe.then=="function")return _t(qe,Ww(Qe),Ze);if(Qe.$$typeof===S)return _t(qe,Fd(qe,Qe),Ze);Xw(qe,Qe)}return null}function it(qe,Qe,Ze,xt){var lr=Qe!==null?Qe.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return lr!==null?null:be(qe,Qe,""+Ze,xt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:return Ze.key===lr?De(qe,Qe,Ze,xt):null;case p:return Ze.key===lr?nt(qe,Qe,Ze,xt):null;case C:return lr=Ze._init,Ze=lr(Ze._payload),it(qe,Qe,Ze,xt)}if(J(Ze)||F(Ze))return lr!==null?null:mt(qe,Qe,Ze,xt,null);if(typeof Ze.then=="function")return it(qe,Qe,Ww(Ze),xt);if(Ze.$$typeof===S)return it(qe,Qe,Fd(qe,Ze),xt);Xw(qe,Ze)}return null}function lt(qe,Qe,Ze,xt,lr){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return qe=qe.get(Ze)||null,be(Qe,qe,""+xt,lr);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case m:return qe=qe.get(xt.key===null?Ze:xt.key)||null,De(Qe,qe,xt,lr);case p:return qe=qe.get(xt.key===null?Ze:xt.key)||null,nt(Qe,qe,xt,lr);case C:var cn=xt._init;return xt=cn(xt._payload),lt(qe,Qe,Ze,xt,lr)}if(J(xt)||F(xt))return qe=qe.get(Ze)||null,mt(Qe,qe,xt,lr,null);if(typeof xt.then=="function")return lt(qe,Qe,Ze,Ww(xt),lr);if(xt.$$typeof===S)return lt(qe,Qe,Ze,Fd(Qe,xt),lr);Xw(Qe,xt)}return null}function Pr(qe,Qe,Ze,xt){for(var lr=null,cn=null,mr=Qe,Br=Qe=0,Bi=null;mr!==null&&Br<Ze.length;Br++){mr.index>Br?(Bi=mr,mr=null):Bi=mr.sibling;var Ln=it(qe,mr,Ze[Br],xt);if(Ln===null){mr===null&&(mr=Bi);break}A&&mr&&Ln.alternate===null&&h(qe,mr),Qe=V(Ln,Qe,Br),cn===null?lr=Ln:cn.sibling=Ln,cn=Ln,mr=Bi}if(Br===Ze.length)return v(qe,mr),Tn&&MA(qe,Br),lr;if(mr===null){for(;Br<Ze.length;Br++)mr=_t(qe,Ze[Br],xt),mr!==null&&(Qe=V(mr,Qe,Br),cn===null?lr=mr:cn.sibling=mr,cn=mr);return Tn&&MA(qe,Br),lr}for(mr=w(mr);Br<Ze.length;Br++)Bi=lt(mr,qe,Br,Ze[Br],xt),Bi!==null&&(A&&Bi.alternate!==null&&mr.delete(Bi.key===null?Br:Bi.key),Qe=V(Bi,Qe,Br),cn===null?lr=Bi:cn.sibling=Bi,cn=Bi);return A&&mr.forEach(function(kh){return h(qe,kh)}),Tn&&MA(qe,Br),lr}function Nr(qe,Qe,Ze,xt){if(Ze==null)throw Error(n(151));for(var lr=null,cn=null,mr=Qe,Br=Qe=0,Bi=null,Ln=Ze.next();mr!==null&&!Ln.done;Br++,Ln=Ze.next()){mr.index>Br?(Bi=mr,mr=null):Bi=mr.sibling;var kh=it(qe,mr,Ln.value,xt);if(kh===null){mr===null&&(mr=Bi);break}A&&mr&&kh.alternate===null&&h(qe,mr),Qe=V(kh,Qe,Br),cn===null?lr=kh:cn.sibling=kh,cn=kh,mr=Bi}if(Ln.done)return v(qe,mr),Tn&&MA(qe,Br),lr;if(mr===null){for(;!Ln.done;Br++,Ln=Ze.next())Ln=_t(qe,Ln.value,xt),Ln!==null&&(Qe=V(Ln,Qe,Br),cn===null?lr=Ln:cn.sibling=Ln,cn=Ln);return Tn&&MA(qe,Br),lr}for(mr=w(mr);!Ln.done;Br++,Ln=Ze.next())Ln=lt(mr,qe,Br,Ln.value,xt),Ln!==null&&(A&&Ln.alternate!==null&&mr.delete(Ln.key===null?Br:Ln.key),Qe=V(Ln,Qe,Br),cn===null?lr=Ln:cn.sibling=Ln,cn=Ln);return A&&mr.forEach(function(xce){return h(qe,xce)}),Tn&&MA(qe,Br),lr}function ga(qe,Qe,Ze,xt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===x&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:e:{for(var lr=Ze.key;Qe!==null;){if(Qe.key===lr){if(lr=Ze.type,lr===x){if(Qe.tag===7){v(qe,Qe.sibling),xt=L(Qe,Ze.props.children),xt.return=qe,qe=xt;break e}}else if(Qe.elementType===lr||typeof lr=="object"&&lr!==null&&lr.$$typeof===C&&DR(lr)===Qe.type){v(qe,Qe.sibling),xt=L(Qe,Ze.props),Xx(xt,Ze),xt.return=qe,qe=xt;break e}v(qe,Qe);break}else h(qe,Qe);Qe=Qe.sibling}Ze.type===x?(xt=Iu(Ze.props.children,qe.mode,xt,Ze.key),xt.return=qe,qe=xt):(xt=LA(Ze.type,Ze.key,Ze.props,null,qe.mode,xt),Xx(xt,Ze),xt.return=qe,qe=xt)}return le(qe);case p:e:{for(lr=Ze.key;Qe!==null;){if(Qe.key===lr)if(Qe.tag===4&&Qe.stateNode.containerInfo===Ze.containerInfo&&Qe.stateNode.implementation===Ze.implementation){v(qe,Qe.sibling),xt=L(Qe,Ze.children||[]),xt.return=qe,qe=xt;break e}else{v(qe,Qe);break}else h(qe,Qe);Qe=Qe.sibling}xt=J0(Ze,qe.mode,xt),xt.return=qe,qe=xt}return le(qe);case C:return lr=Ze._init,Ze=lr(Ze._payload),ga(qe,Qe,Ze,xt)}if(J(Ze))return Pr(qe,Qe,Ze,xt);if(F(Ze)){if(lr=F(Ze),typeof lr!="function")throw Error(n(150));return Ze=lr.call(Ze),Nr(qe,Qe,Ze,xt)}if(typeof Ze.then=="function")return ga(qe,Qe,Ww(Ze),xt);if(Ze.$$typeof===S)return ga(qe,Qe,Fd(qe,Ze),xt);Xw(qe,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,Qe!==null&&Qe.tag===6?(v(qe,Qe.sibling),xt=L(Qe,Ze),xt.return=qe,qe=xt):(v(qe,Qe),xt=Lp(Ze,qe.mode,xt),xt.return=qe,qe=xt),le(qe)):v(qe,Qe)}return function(qe,Qe,Ze,xt){try{Wx=0;var lr=ga(qe,Qe,Ze,xt);return Xp=null,lr}catch(mr){if(mr===he||mr===ve)throw mr;var cn=_i(29,mr,null,qe.mode);return cn.lanes=xt,cn.return=qe,cn}finally{}}}var Yp=PR(!0),RR=PR(!1),zc=ne(null),Ld=null;function hh(A){var h=A.alternate;q(di,di.current&1),q(zc,A),Ld===null&&(h===null||rn.current!==null||h.memoizedState!==null)&&(Ld=A)}function LR(A){if(A.tag===22){if(q(di,di.current),q(zc,A),Ld===null){var h=A.alternate;h!==null&&h.memoizedState!==null&&(Ld=A)}}else mh()}function mh(){q(di,di.current),q(zc,zc.current)}function GA(A){R(zc),Ld===A&&(Ld=null),R(di)}var di=ne(0);function Yw(A){for(var h=A;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||G4(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===A)break;for(;h.sibling===null;){if(h.return===null||h.return===A)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function a4(A,h,v,w){h=A.memoizedState,v=v(w,h),v=v==null?h:d({},h,v),A.memoizedState=v,A.lanes===0&&(A.updateQueue.baseState=v)}var s4={enqueueSetState:function(A,h,v){A=A._reactInternals;var w=Zl(),L=ht(w);L.payload=h,v!=null&&(L.callback=v),h=yt(A,L,w),h!==null&&(ec(h,A,w),pt(h,A,w))},enqueueReplaceState:function(A,h,v){A=A._reactInternals;var w=Zl(),L=ht(w);L.tag=1,L.payload=h,v!=null&&(L.callback=v),h=yt(A,L,w),h!==null&&(ec(h,A,w),pt(h,A,w))},enqueueForceUpdate:function(A,h){A=A._reactInternals;var v=Zl(),w=ht(v);w.tag=2,h!=null&&(w.callback=h),h=yt(A,w,v),h!==null&&(ec(h,A,v),pt(h,A,v))}};function UR(A,h,v,w,L,V,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,V,le):h.prototype&&h.prototype.isPureReactComponent?!yd(v,w)||!yd(L,V):!0}function MR(A,h,v,w){A=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,w),h.state!==A&&s4.enqueueReplaceState(h,h.state,null)}function fm(A,h){var v=h;if("ref"in h){v={};for(var w in h)w!=="ref"&&(v[w]=h[w])}if(A=A.defaultProps){v===h&&(v=d({},v));for(var L in A)v[L]===void 0&&(v[L]=A[L])}return v}var Jw=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function QR(A){Jw(A)}function HR(A){console.error(A)}function VR(A){Jw(A)}function Zw(A,h){try{var v=A.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function zR(A,h,v){try{var w=A.onCaughtError;w(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function i4(A,h,v){return v=ht(v),v.tag=3,v.payload={element:null},v.callback=function(){Zw(A,h)},v}function $R(A){return A=ht(A),A.tag=3,A}function KR(A,h,v,w){var L=v.type.getDerivedStateFromError;if(typeof L=="function"){var V=w.value;A.payload=function(){return L(V)},A.callback=function(){zR(h,v,w)}}var le=v.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){zR(h,v,w),typeof L!="function"&&(yh===null?yh=new Set([this]):yh.add(this));var be=w.stack;this.componentDidCatch(w.value,{componentStack:be!==null?be:""})})}function xle(A,h,v,w,L){if(v.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=v.alternate,h!==null&&lh(h,v,L,!0),v=zc.current,v!==null){switch(v.tag){case 13:return Ld===null?T4():v.alternate===null&&cs===0&&(cs=3),v.flags&=-257,v.flags|=65536,v.lanes=L,w===ye?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([w]):h.add(w),j4(A,w,L)),!1;case 22:return v.flags|=65536,w===ye?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([w]):v.add(w)),j4(A,w,L)),!1}throw Error(n(435,v.tag))}return j4(A,w,L),T4(),!1}if(Tn)return h=zc.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=L,w!==Ox&&(A=Error(n(422),{cause:w}),oh(nn(A,v)))):(w!==Ox&&(h=Error(n(423),{cause:w}),oh(nn(h,v))),A=A.current.alternate,A.flags|=65536,L&=-L,A.lanes|=L,w=nn(w,v),L=i4(A.stateNode,w,L),Yt(A,L),cs!==4&&(cs=2)),!1;var V=Error(n(520),{cause:w});if(V=nn(V,v),n1===null?n1=[V]:n1.push(V),cs!==4&&(cs=2),h===null)return!0;w=nn(w,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,A=L&-L,v.lanes|=A,A=i4(v.stateNode,w,A),Yt(v,A),!1;case 1:if(h=v.type,V=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(yh===null||!yh.has(V))))return v.flags|=65536,L&=-L,v.lanes|=L,L=$R(L),KR(L,A,v,w),Yt(v,L),!1}v=v.return}while(v!==null);return!1}var GR=Error(n(461)),Si=!1;function Ki(A,h,v,w){h.child=A===null?RR(h,null,v,w):Yp(h,A.child,v,w)}function qR(A,h,v,w,L){v=v.render;var V=h.ref;if("ref"in w){var le={};for(var be in w)be!=="ref"&&(le[be]=w[be])}else le=w;return Hc(h),w=ql(A,h,v,le,V,L),be=_a(),A!==null&&!Si?(nm(A,h,L),qA(A,h,L)):(Tn&&be&&Z0(h),h.flags|=1,Ki(A,h,w,L),h.child)}function WR(A,h,v,w,L){if(A===null){var V=v.type;return typeof V=="function"&&!sh(V)&&V.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=V,XR(A,h,V,w,L)):(A=LA(v.type,null,w,h,h.mode,L),A.ref=h.ref,A.return=h,h.child=A)}if(V=A.child,!h4(A,L)){var le=V.memoizedProps;if(v=v.compare,v=v!==null?v:yd,v(le,w)&&A.ref===h.ref)return qA(A,h,L)}return h.flags|=1,A=Lc(V,w),A.ref=h.ref,A.return=h,h.child=A}function XR(A,h,v,w,L){if(A!==null){var V=A.memoizedProps;if(yd(V,w)&&A.ref===h.ref)if(Si=!1,h.pendingProps=w=V,h4(A,L))(A.flags&131072)!==0&&(Si=!0);else return h.lanes=A.lanes,qA(A,h,L)}return o4(A,h,v,w,L)}function YR(A,h,v){var w=h.pendingProps,L=w.children,V=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((h.flags&128)!==0){if(w=V!==null?V.baseLanes|v:v,A!==null){for(L=h.child=A.child,V=0;L!==null;)V=V|L.lanes|L.childLanes,L=L.sibling;h.childLanes=V&~w}else h.childLanes=0,h.child=null;return JR(A,h,w,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(h,V!==null?V.cachePool:null),V!==null?qn(h,V):Pn(),LR(h);else return h.lanes=h.childLanes=536870912,JR(A,h,V!==null?V.baseLanes|v:v,v)}else V!==null?(ae(h,V.cachePool),qn(h,V),mh(),h.memoizedState=null):(A!==null&&ae(h,null),Pn(),mh());return Ki(A,h,L,v),h.child}function JR(A,h,v,w){var L=X();return L=L===null?null:{parent:Ns._currentValue,pool:L},h.memoizedState={baseLanes:v,cachePool:L},A!==null&&ae(h,null),Pn(),LR(h),A!==null&&lh(A,h,w,!0),null}function e2(A,h){var v=h.ref;if(v===null)A!==null&&A.ref!==null&&(h.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(A===null||A.ref!==v)&&(h.flags|=4194816)}}function o4(A,h,v,w,L){return Hc(h),v=ql(A,h,v,w,void 0,L),w=_a(),A!==null&&!Si?(nm(A,h,L),qA(A,h,L)):(Tn&&w&&Z0(h),h.flags|=1,Ki(A,h,v,L),h.child)}function ZR(A,h,v,w,L,V){return Hc(h),h.updateQueue=null,v=VA(h,w,v,L),Od(A),w=_a(),A!==null&&!Si?(nm(A,h,V),qA(A,h,V)):(Tn&&w&&Z0(h),h.flags|=1,Ki(A,h,v,V),h.child)}function eL(A,h,v,w,L){if(Hc(h),h.stateNode===null){var V=zs,le=v.contextType;typeof le=="object"&&le!==null&&(V=Ss(le)),V=new v(w,V),h.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=s4,h.stateNode=V,V._reactInternals=h,V=h.stateNode,V.props=w,V.state=h.memoizedState,V.refs={},Me(h),le=v.contextType,V.context=typeof le=="object"&&le!==null?Ss(le):zs,V.state=h.memoizedState,le=v.getDerivedStateFromProps,typeof le=="function"&&(a4(h,v,le,w),V.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(le=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),le!==V.state&&s4.enqueueReplaceState(V,V.state,null),$t(h,w,V,L),Ar(),V.state=h.memoizedState),typeof V.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(A===null){V=h.stateNode;var be=h.memoizedProps,De=fm(v,be);V.props=De;var nt=V.context,mt=v.contextType;le=zs,typeof mt=="object"&&mt!==null&&(le=Ss(mt));var _t=v.getDerivedStateFromProps;mt=typeof _t=="function"||typeof V.getSnapshotBeforeUpdate=="function",be=h.pendingProps!==be,mt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(be||nt!==le)&&MR(h,V,w,le),ct=!1;var it=h.memoizedState;V.state=it,$t(h,w,V,L),Ar(),nt=h.memoizedState,be||it!==nt||ct?(typeof _t=="function"&&(a4(h,v,_t,w),nt=h.memoizedState),(De=ct||UR(h,v,De,w,it,nt,le))?(mt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=nt),V.props=w,V.state=nt,V.context=le,w=De):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{V=h.stateNode,Ve(A,h),le=h.memoizedProps,mt=fm(v,le),V.props=mt,_t=h.pendingProps,it=V.context,nt=v.contextType,De=zs,typeof nt=="object"&&nt!==null&&(De=Ss(nt)),be=v.getDerivedStateFromProps,(nt=typeof be=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(le!==_t||it!==De)&&MR(h,V,w,De),ct=!1,it=h.memoizedState,V.state=it,$t(h,w,V,L),Ar();var lt=h.memoizedState;le!==_t||it!==lt||ct||A!==null&&A.dependencies!==null&&Hp(A.dependencies)?(typeof be=="function"&&(a4(h,v,be,w),lt=h.memoizedState),(mt=ct||UR(h,v,mt,w,it,lt,De)||A!==null&&A.dependencies!==null&&Hp(A.dependencies))?(nt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(w,lt,De),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(w,lt,De)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||le===A.memoizedProps&&it===A.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&it===A.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=lt),V.props=w,V.state=lt,V.context=De,w=mt):(typeof V.componentDidUpdate!="function"||le===A.memoizedProps&&it===A.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&it===A.memoizedState||(h.flags|=1024),w=!1)}return V=w,e2(A,h),w=(h.flags&128)!==0,V||w?(V=h.stateNode,v=w&&typeof v.getDerivedStateFromError!="function"?null:V.render(),h.flags|=1,A!==null&&w?(h.child=Yp(h,A.child,null,L),h.child=Yp(h,null,v,L)):Ki(A,h,v,L),h.memoizedState=V.state,A=h.child):A=qA(A,h,L),A}function tL(A,h,v,w){return qo(),h.flags|=256,Ki(A,h,v,w),h.child}var l4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function c4(A){return{baseLanes:A,cachePool:ue()}}function u4(A,h,v){return A=A!==null?A.childLanes&~v:0,h&&(A|=$c),A}function rL(A,h,v){var w=h.pendingProps,L=!1,V=(h.flags&128)!==0,le;if((le=V)||(le=A!==null&&A.memoizedState===null?!1:(di.current&2)!==0),le&&(L=!0,h.flags&=-129),le=(h.flags&32)!==0,h.flags&=-33,A===null){if(Tn){if(L?hh(h):mh(),Tn){var be=Ua,De;if(De=be){e:{for(De=be,be=Uc;De.nodeType!==8;){if(!be){be=null;break e}if(De=Vu(De.nextSibling),De===null){be=null;break e}}be=De}be!==null?(h.memoizedState={dehydrated:be,treeContext:UA!==null?{id:Fu,overflow:Ou}:null,retryLane:536870912,hydrationErrors:null},De=_i(18,null,null,0),De.stateNode=be,De.return=h,h.child=De,_s=h,Ua=null,De=!0):De=!1}De||QA(h)}if(be=h.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return G4(be)?h.lanes=32:h.lanes=536870912,null;GA(h)}return be=w.children,w=w.fallback,L?(mh(),L=h.mode,be=t2({mode:"hidden",children:be},L),w=Iu(w,L,v,null),be.return=h,w.return=h,be.sibling=w,h.child=be,L=h.child,L.memoizedState=c4(v),L.childLanes=u4(A,le,v),h.memoizedState=l4,w):(hh(h),d4(h,be))}if(De=A.memoizedState,De!==null&&(be=De.dehydrated,be!==null)){if(V)h.flags&256?(hh(h),h.flags&=-257,h=A4(A,h,v)):h.memoizedState!==null?(mh(),h.child=A.child,h.flags|=128,h=null):(mh(),L=w.fallback,be=h.mode,w=t2({mode:"visible",children:w.children},be),L=Iu(L,be,v,null),L.flags|=2,w.return=h,L.return=h,w.sibling=L,h.child=w,Yp(h,A.child,null,v),w=h.child,w.memoizedState=c4(v),w.childLanes=u4(A,le,v),h.memoizedState=l4,h=L);else if(hh(h),G4(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var nt=le.dgst;le=nt,w=Error(n(419)),w.stack="",w.digest=le,oh({value:w,source:null,stack:null}),h=A4(A,h,v)}else if(Si||lh(A,h,v,!1),le=(v&A.childLanes)!==0,Si||le){if(le=Sa,le!==null&&(w=v&-v,w=(w&42)!==0?1:Ms(w),w=(w&(le.suspendedLanes|v))!==0?0:w,w!==0&&w!==De.retryLane))throw De.retryLane=w,Tu(A,w),ec(le,A,w),GR;be.data==="$?"||T4(),h=A4(A,h,v)}else be.data==="$?"?(h.flags|=192,h.child=A.child,h=null):(A=De.treeContext,Ua=Vu(be.nextSibling),_s=h,Tn=!0,Id=null,Uc=!1,A!==null&&(xl[Go++]=Fu,xl[Go++]=Ou,xl[Go++]=UA,Fu=A.id,Ou=A.overflow,UA=h),h=d4(h,w.children),h.flags|=4096);return h}return L?(mh(),L=w.fallback,be=h.mode,De=A.child,nt=De.sibling,w=Lc(De,{mode:"hidden",children:w.children}),w.subtreeFlags=De.subtreeFlags&65011712,nt!==null?L=Lc(nt,L):(L=Iu(L,be,v,null),L.flags|=2),L.return=h,w.return=h,w.sibling=L,h.child=w,w=L,L=h.child,be=A.child.memoizedState,be===null?be=c4(v):(De=be.cachePool,De!==null?(nt=Ns._currentValue,De=De.parent!==nt?{parent:nt,pool:nt}:De):De=ue(),be={baseLanes:be.baseLanes|v,cachePool:De}),L.memoizedState=be,L.childLanes=u4(A,le,v),h.memoizedState=l4,w):(hh(h),v=A.child,A=v.sibling,v=Lc(v,{mode:"visible",children:w.children}),v.return=h,v.sibling=null,A!==null&&(le=h.deletions,le===null?(h.deletions=[A],h.flags|=16):le.push(A)),h.child=v,h.memoizedState=null,v)}function d4(A,h){return h=t2({mode:"visible",children:h},A.mode),h.return=A,A.child=h}function t2(A,h){return A=_i(22,A,null,h),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function A4(A,h,v){return Yp(h,A.child,null,v),A=d4(h,h.pendingProps.children),A.flags|=2,h.memoizedState=null,A}function nL(A,h,v){A.lanes|=h;var w=A.alternate;w!==null&&(w.lanes|=h),Mp(A.return,h,v)}function f4(A,h,v,w,L){var V=A.memoizedState;V===null?A.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:L}:(V.isBackwards=h,V.rendering=null,V.renderingStartTime=0,V.last=w,V.tail=v,V.tailMode=L)}function aL(A,h,v){var w=h.pendingProps,L=w.revealOrder,V=w.tail;if(Ki(A,h,w.children,v),w=di.current,(w&2)!==0)w=w&1|2,h.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=h.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&nL(A,v,h);else if(A.tag===19)nL(A,v,h);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(q(di,w),L){case"forwards":for(v=h.child,L=null;v!==null;)A=v.alternate,A!==null&&Yw(A)===null&&(L=v),v=v.sibling;v=L,v===null?(L=h.child,h.child=null):(L=v.sibling,v.sibling=null),f4(h,!1,L,v,V);break;case"backwards":for(v=null,L=h.child,h.child=null;L!==null;){if(A=L.alternate,A!==null&&Yw(A)===null){h.child=L;break}A=L.sibling,L.sibling=v,v=L,L=A}f4(h,!0,v,null,V);break;case"together":f4(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function qA(A,h,v){if(A!==null&&(h.dependencies=A.dependencies),bh|=h.lanes,(v&h.childLanes)===0)if(A!==null){if(lh(A,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(A!==null&&h.child!==A.child)throw Error(n(153));if(h.child!==null){for(A=h.child,v=Lc(A,A.pendingProps),h.child=v,v.return=h;A.sibling!==null;)A=A.sibling,v=v.sibling=Lc(A,A.pendingProps),v.return=h;v.sibling=null}return h.child}function h4(A,h){return(A.lanes&h)!==0?!0:(A=A.dependencies,!!(A!==null&&Hp(A)))}function ble(A,h,v){switch(h.tag){case 3:oe(h,h.stateNode.containerInfo),jd(h,Ns,A.memoizedState.cache),qo();break;case 27:case 5:ge(h);break;case 4:oe(h,h.stateNode.containerInfo);break;case 10:jd(h,h.type,h.memoizedProps.value);break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(hh(h),h.flags|=128,null):(v&h.child.childLanes)!==0?rL(A,h,v):(hh(h),A=qA(A,h,v),A!==null?A.sibling:null);hh(h);break;case 19:var L=(A.flags&128)!==0;if(w=(v&h.childLanes)!==0,w||(lh(A,h,v,!1),w=(v&h.childLanes)!==0),L){if(w)return aL(A,h,v);h.flags|=128}if(L=h.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),q(di,di.current),w)break;return null;case 22:case 23:return h.lanes=0,YR(A,h,v);case 24:jd(h,Ns,A.memoizedState.cache)}return qA(A,h,v)}function sL(A,h,v){if(A!==null)if(A.memoizedProps!==h.pendingProps)Si=!0;else{if(!h4(A,v)&&(h.flags&128)===0)return Si=!1,ble(A,h,v);Si=(A.flags&131072)!==0}else Si=!1,Tn&&(h.flags&1048576)!==0&&Iw(h,Up,h.index);switch(h.lanes=0,h.tag){case 16:e:{A=h.pendingProps;var w=h.elementType,L=w._init;if(w=L(w._payload),h.type=w,typeof w=="function")sh(w)?(A=fm(w,A),h.tag=1,h=eL(null,h,w,A,v)):(h.tag=0,h=o4(null,h,w,A,v));else{if(w!=null){if(L=w.$$typeof,L===B){h.tag=11,h=qR(null,h,w,A,v);break e}else if(L===E){h.tag=14,h=WR(null,h,w,A,v);break e}}throw h=Q(w)||w,Error(n(306,h,""))}}return h;case 0:return o4(A,h,h.type,h.pendingProps,v);case 1:return w=h.type,L=fm(w,h.pendingProps),eL(A,h,w,L,v);case 3:e:{if(oe(h,h.stateNode.containerInfo),A===null)throw Error(n(387));w=h.pendingProps;var V=h.memoizedState;L=V.element,Ve(A,h),$t(h,w,null,v);var le=h.memoizedState;if(w=le.cache,jd(h,Ns,w),w!==V.cache&&Qp(h,[Ns],v,!0),Ar(),w=le.element,V.isDehydrated)if(V={element:w,isDehydrated:!1,cache:le.cache},h.updateQueue.baseState=V,h.memoizedState=V,h.flags&256){h=tL(A,h,w,v);break e}else if(w!==L){L=nn(Error(n(424)),h),oh(L),h=tL(A,h,w,v);break e}else{switch(A=h.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(Ua=Vu(A.firstChild),_s=h,Tn=!0,Id=null,Uc=!0,v=RR(h,null,w,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(qo(),w===L){h=qA(A,h,v);break e}Ki(A,h,w,v)}h=h.child}return h;case 26:return e2(A,h),A===null?(v=c8(h.type,null,h.pendingProps,null))?h.memoizedState=v:Tn||(v=h.type,A=h.pendingProps,w=m2(ie.current).createElement(v),w[wn]=h,w[fn]=A,qi(w,v,A),$e(w),h.stateNode=w):h.memoizedState=c8(h.type,A.memoizedProps,h.pendingProps,A.memoizedState),null;case 27:return ge(h),A===null&&Tn&&(w=h.stateNode=i8(h.type,h.pendingProps,ie.current),_s=h,Uc=!0,L=Ua,Ch(h.type)?(q4=L,Ua=Vu(w.firstChild)):Ua=L),Ki(A,h,h.pendingProps.children,v),e2(A,h),A===null&&(h.flags|=4194304),h.child;case 5:return A===null&&Tn&&((L=w=Ua)&&(w=qle(w,h.type,h.pendingProps,Uc),w!==null?(h.stateNode=w,_s=h,Ua=Vu(w.firstChild),Uc=!1,L=!0):L=!1),L||QA(h)),ge(h),L=h.type,V=h.pendingProps,le=A!==null?A.memoizedProps:null,w=V.children,z4(L,V)?w=null:le!==null&&z4(L,le)&&(h.flags|=32),h.memoizedState!==null&&(L=ql(A,h,Dd,null,null,v),A1._currentValue=L),e2(A,h),Ki(A,h,w,v),h.child;case 6:return A===null&&Tn&&((A=v=Ua)&&(v=Wle(v,h.pendingProps,Uc),v!==null?(h.stateNode=v,_s=h,Ua=null,A=!0):A=!1),A||QA(h)),null;case 13:return rL(A,h,v);case 4:return oe(h,h.stateNode.containerInfo),w=h.pendingProps,A===null?h.child=Yp(h,null,w,v):Ki(A,h,w,v),h.child;case 11:return qR(A,h,h.type,h.pendingProps,v);case 7:return Ki(A,h,h.pendingProps,v),h.child;case 8:return Ki(A,h,h.pendingProps.children,v),h.child;case 12:return Ki(A,h,h.pendingProps.children,v),h.child;case 10:return w=h.pendingProps,jd(h,h.type,w.value),Ki(A,h,w.children,v),h.child;case 9:return L=h.type._context,w=h.pendingProps.children,Hc(h),L=Ss(L),w=w(L),h.flags|=1,Ki(A,h,w,v),h.child;case 14:return WR(A,h,h.type,h.pendingProps,v);case 15:return XR(A,h,h.type,h.pendingProps,v);case 19:return aL(A,h,v);case 31:return w=h.pendingProps,v=h.mode,w={mode:w.mode,children:w.children},A===null?(v=t2(w,v),v.ref=h.ref,h.child=v,v.return=h,h=v):(v=Lc(A.child,w),v.ref=h.ref,h.child=v,v.return=h,h=v),h;case 22:return YR(A,h,v);case 24:return Hc(h),w=Ss(Ns),A===null?(L=X(),L===null&&(L=Sa,V=Dx(),L.pooledCache=V,V.refCount++,V!==null&&(L.pooledCacheLanes|=v),L=V),h.memoizedState={parent:w,cache:L},Me(h),jd(h,Ns,L)):((A.lanes&v)!==0&&(Ve(A,h),$t(h,null,null,v),Ar()),L=A.memoizedState,V=h.memoizedState,L.parent!==w?(L={parent:w,cache:w},h.memoizedState=L,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=L),jd(h,Ns,w)):(w=V.cache,jd(h,Ns,w),w!==L.cache&&Qp(h,[Ns],v,!0))),Ki(A,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function WA(A){A.flags|=4}function iL(A,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!h8(h)){if(h=zc.current,h!==null&&((Nn&4194048)===Nn?Ld!==null:(Nn&62914560)!==Nn&&(Nn&536870912)===0||h!==Ld))throw Ye=ye,me;A.flags|=8192}}function r2(A,h){h!==null&&(A.flags|=4),A.flags&16384&&(h=A.tag!==22?Qr():536870912,A.lanes|=h,tg|=h)}function Yx(A,h){if(!Tn)switch(A.tailMode){case"hidden":h=A.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?A.tail=null:v.sibling=null;break;case"collapsed":v=A.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?h||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function qa(A){var h=A.alternate!==null&&A.alternate.child===A.child,v=0,w=0;if(h)for(var L=A.child;L!==null;)v|=L.lanes|L.childLanes,w|=L.subtreeFlags&65011712,w|=L.flags&65011712,L.return=A,L=L.sibling;else for(L=A.child;L!==null;)v|=L.lanes|L.childLanes,w|=L.subtreeFlags,w|=L.flags,L.return=A,L=L.sibling;return A.subtreeFlags|=w,A.childLanes=v,h}function yle(A,h,v){var w=h.pendingProps;switch(em(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(h),null;case 1:return qa(h),null;case 3:return v=h.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),Qc(Ns),ce(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(zi(h)?WA(h):A===null||A.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Fw())),qa(h),null;case 26:return v=h.memoizedState,A===null?(WA(h),v!==null?(qa(h),iL(h,v)):(qa(h),h.flags&=-16777217)):v?v!==A.memoizedState?(WA(h),qa(h),iL(h,v)):(qa(h),h.flags&=-16777217):(A.memoizedProps!==w&&WA(h),qa(h),h.flags&=-16777217),null;case 27:Fe(h),v=ie.current;var L=h.type;if(A!==null&&h.stateNode!=null)A.memoizedProps!==w&&WA(h);else{if(!w){if(h.stateNode===null)throw Error(n(166));return qa(h),null}A=Y.current,zi(h)?jw(h):(A=i8(L,w,v),h.stateNode=A,WA(h))}return qa(h),null;case 5:if(Fe(h),v=h.type,A!==null&&h.stateNode!=null)A.memoizedProps!==w&&WA(h);else{if(!w){if(h.stateNode===null)throw Error(n(166));return qa(h),null}if(A=Y.current,zi(h))jw(h);else{switch(L=m2(ie.current),A){case 1:A=L.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:A=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":A=L.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":A=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":A=L.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?L.createElement("select",{is:w.is}):L.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?L.createElement(v,{is:w.is}):L.createElement(v)}}A[wn]=h,A[fn]=w;e:for(L=h.child;L!==null;){if(L.tag===5||L.tag===6)A.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===h)break e;for(;L.sibling===null;){if(L.return===null||L.return===h)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}h.stateNode=A;e:switch(qi(A,v,w),v){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&WA(h)}}return qa(h),h.flags&=-16777217,null;case 6:if(A&&h.stateNode!=null)A.memoizedProps!==w&&WA(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(n(166));if(A=ie.current,zi(h)){if(A=h.stateNode,v=h.memoizedProps,w=null,L=_s,L!==null)switch(L.tag){case 27:case 5:w=L.memoizedProps}A[wn]=h,A=!!(A.nodeValue===v||w!==null&&w.suppressHydrationWarning===!0||ZL(A.nodeValue,v)),A||QA(h)}else A=m2(A).createTextNode(w),A[wn]=h,h.stateNode=A}return qa(h),null;case 13:if(w=h.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(L=zi(h),w!==null&&w.dehydrated!==null){if(A===null){if(!L)throw Error(n(318));if(L=h.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[wn]=h}else qo(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;qa(h),L=!1}else L=Fw(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=L),L=!0;if(!L)return h.flags&256?(GA(h),h):(GA(h),null)}if(GA(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=w!==null,A=A!==null&&A.memoizedState!==null,v){w=h.child,L=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(L=w.alternate.memoizedState.cachePool.pool);var V=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(V=w.memoizedState.cachePool.pool),V!==L&&(w.flags|=2048)}return v!==A&&v&&(h.child.flags|=8192),r2(h,h.updateQueue),qa(h),null;case 4:return ce(),A===null&&U4(h.stateNode.containerInfo),qa(h),null;case 10:return Qc(h.type),qa(h),null;case 19:if(R(di),L=h.memoizedState,L===null)return qa(h),null;if(w=(h.flags&128)!==0,V=L.rendering,V===null)if(w)Yx(L,!1);else{if(cs!==0||A!==null&&(A.flags&128)!==0)for(A=h.child;A!==null;){if(V=Yw(A),V!==null){for(h.flags|=128,Yx(L,!1),A=V.updateQueue,h.updateQueue=A,r2(h,A),h.subtreeFlags=0,A=v,v=h.child;v!==null;)Y0(v,A),v=v.sibling;return q(di,di.current&1|2),h.child}A=A.sibling}L.tail!==null&&Ie()>s2&&(h.flags|=128,w=!0,Yx(L,!1),h.lanes=4194304)}else{if(!w)if(A=Yw(V),A!==null){if(h.flags|=128,w=!0,A=A.updateQueue,h.updateQueue=A,r2(h,A),Yx(L,!0),L.tail===null&&L.tailMode==="hidden"&&!V.alternate&&!Tn)return qa(h),null}else 2*Ie()-L.renderingStartTime>s2&&v!==536870912&&(h.flags|=128,w=!0,Yx(L,!1),h.lanes=4194304);L.isBackwards?(V.sibling=h.child,h.child=V):(A=L.last,A!==null?A.sibling=V:h.child=V,L.last=V)}return L.tail!==null?(h=L.tail,L.rendering=h,L.tail=h.sibling,L.renderingStartTime=Ie(),h.sibling=null,A=di.current,q(di,w?A&1|2:A&1),h):(qa(h),null);case 22:case 23:return GA(h),Ur(),w=h.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(v&536870912)!==0&&(h.flags&128)===0&&(qa(h),h.subtreeFlags&6&&(h.flags|=8192)):qa(h),v=h.updateQueue,v!==null&&r2(h,v.retryQueue),v=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048),A!==null&&R(U),null;case 24:return v=null,A!==null&&(v=A.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Qc(Ns),qa(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function wle(A,h){switch(em(h),h.tag){case 1:return A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 3:return Qc(Ns),ce(),A=h.flags,(A&65536)!==0&&(A&128)===0?(h.flags=A&-65537|128,h):null;case 26:case 27:case 5:return Fe(h),null;case 13:if(GA(h),A=h.memoizedState,A!==null&&A.dehydrated!==null){if(h.alternate===null)throw Error(n(340));qo()}return A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 19:return R(di),null;case 4:return ce(),null;case 10:return Qc(h.type),null;case 22:case 23:return GA(h),Ur(),A!==null&&R(U),A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 24:return Qc(Ns),null;case 25:return null;default:return null}}function oL(A,h){switch(em(h),h.tag){case 3:Qc(Ns),ce();break;case 26:case 27:case 5:Fe(h);break;case 4:ce();break;case 13:GA(h);break;case 19:R(di);break;case 10:Qc(h.type);break;case 22:case 23:GA(h),Ur(),A!==null&&R(U);break;case 24:Qc(Ns)}}function Jx(A,h){try{var v=h.updateQueue,w=v!==null?v.lastEffect:null;if(w!==null){var L=w.next;v=L;do{if((v.tag&A)===A){w=void 0;var V=v.create,le=v.inst;w=V(),le.destroy=w}v=v.next}while(v!==L)}}catch(be){ya(h,h.return,be)}}function ph(A,h,v){try{var w=h.updateQueue,L=w!==null?w.lastEffect:null;if(L!==null){var V=L.next;w=V;do{if((w.tag&A)===A){var le=w.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,L=h;var De=v,nt=be;try{nt()}catch(mt){ya(L,De,mt)}}}w=w.next}while(w!==V)}}catch(mt){ya(h,h.return,mt)}}function lL(A){var h=A.updateQueue;if(h!==null){var v=A.stateNode;try{Dn(h,v)}catch(w){ya(A,A.return,w)}}}function cL(A,h,v){v.props=fm(A.type,A.memoizedProps),v.state=A.memoizedState;try{v.componentWillUnmount()}catch(w){ya(A,h,w)}}function Zx(A,h){try{var v=A.ref;if(v!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof v=="function"?A.refCleanup=v(w):v.current=w}}catch(L){ya(A,h,L)}}function Ud(A,h){var v=A.ref,w=A.refCleanup;if(v!==null)if(typeof w=="function")try{w()}catch(L){ya(A,h,L)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(L){ya(A,h,L)}else v.current=null}function uL(A){var h=A.type,v=A.memoizedProps,w=A.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":v.autoFocus&&w.focus();break e;case"img":v.src?w.src=v.src:v.srcSet&&(w.srcset=v.srcSet)}}catch(L){ya(A,A.return,L)}}function m4(A,h,v){try{var w=A.stateNode;Vle(w,A.type,v,h),w[fn]=h}catch(L){ya(A,A.return,L)}}function dL(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Ch(A.type)||A.tag===4}function p4(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||dL(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Ch(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function g4(A,h,v){var w=A.tag;if(w===5||w===6)A=A.stateNode,h?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(A,h):(h=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,h.appendChild(A),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=h2));else if(w!==4&&(w===27&&Ch(A.type)&&(v=A.stateNode,h=null),A=A.child,A!==null))for(g4(A,h,v),A=A.sibling;A!==null;)g4(A,h,v),A=A.sibling}function n2(A,h,v){var w=A.tag;if(w===5||w===6)A=A.stateNode,h?v.insertBefore(A,h):v.appendChild(A);else if(w!==4&&(w===27&&Ch(A.type)&&(v=A.stateNode),A=A.child,A!==null))for(n2(A,h,v),A=A.sibling;A!==null;)n2(A,h,v),A=A.sibling}function AL(A){var h=A.stateNode,v=A.memoizedProps;try{for(var w=A.type,L=h.attributes;L.length;)h.removeAttributeNode(L[0]);qi(h,w,v),h[wn]=A,h[fn]=v}catch(V){ya(A,A.return,V)}}var XA=!1,ks=!1,v4=!1,fL=typeof WeakSet=="function"?WeakSet:Set,Ni=null;function Ele(A,h){if(A=A.containerInfo,H4=y2,A=Vi(A),ui(A)){if("selectionStart"in A)var v={start:A.selectionStart,end:A.selectionEnd};else e:{v=(v=A.ownerDocument)&&v.defaultView||window;var w=v.getSelection&&v.getSelection();if(w&&w.rangeCount!==0){v=w.anchorNode;var L=w.anchorOffset,V=w.focusNode;w=w.focusOffset;try{v.nodeType,V.nodeType}catch{v=null;break e}var le=0,be=-1,De=-1,nt=0,mt=0,_t=A,it=null;t:for(;;){for(var lt;_t!==v||L!==0&&_t.nodeType!==3||(be=le+L),_t!==V||w!==0&&_t.nodeType!==3||(De=le+w),_t.nodeType===3&&(le+=_t.nodeValue.length),(lt=_t.firstChild)!==null;)it=_t,_t=lt;for(;;){if(_t===A)break t;if(it===v&&++nt===L&&(be=le),it===V&&++mt===w&&(De=le),(lt=_t.nextSibling)!==null)break;_t=it,it=_t.parentNode}_t=lt}v=be===-1||De===-1?null:{start:be,end:De}}else v=null}v=v||{start:0,end:0}}else v=null;for(V4={focusedElem:A,selectionRange:v},y2=!1,Ni=h;Ni!==null;)if(h=Ni,A=h.child,(h.subtreeFlags&1024)!==0&&A!==null)A.return=h,Ni=A;else for(;Ni!==null;){switch(h=Ni,V=h.alternate,A=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&V!==null){A=void 0,v=h,L=V.memoizedProps,V=V.memoizedState,w=v.stateNode;try{var Pr=fm(v.type,L,v.elementType===v.type);A=w.getSnapshotBeforeUpdate(Pr,V),w.__reactInternalSnapshotBeforeUpdate=A}catch(Nr){ya(v,v.return,Nr)}}break;case 3:if((A&1024)!==0){if(A=h.stateNode.containerInfo,v=A.nodeType,v===9)K4(A);else if(v===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":K4(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=h.sibling,A!==null){A.return=h.return,Ni=A;break}Ni=h.return}}function hL(A,h,v){var w=v.flags;switch(v.tag){case 0:case 11:case 15:gh(A,v),w&4&&Jx(5,v);break;case 1:if(gh(A,v),w&4)if(A=v.stateNode,h===null)try{A.componentDidMount()}catch(le){ya(v,v.return,le)}else{var L=fm(v.type,h.memoizedProps);h=h.memoizedState;try{A.componentDidUpdate(L,h,A.__reactInternalSnapshotBeforeUpdate)}catch(le){ya(v,v.return,le)}}w&64&&lL(v),w&512&&Zx(v,v.return);break;case 3:if(gh(A,v),w&64&&(A=v.updateQueue,A!==null)){if(h=null,v.child!==null)switch(v.child.tag){case 27:case 5:h=v.child.stateNode;break;case 1:h=v.child.stateNode}try{Dn(A,h)}catch(le){ya(v,v.return,le)}}break;case 27:h===null&&w&4&&AL(v);case 26:case 5:gh(A,v),h===null&&w&4&&uL(v),w&512&&Zx(v,v.return);break;case 12:gh(A,v);break;case 13:gh(A,v),w&4&&gL(A,v),w&64&&(A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(v=jle.bind(null,v),Xle(A,v))));break;case 22:if(w=v.memoizedState!==null||XA,!w){h=h!==null&&h.memoizedState!==null||ks,L=XA;var V=ks;XA=w,(ks=h)&&!V?vh(A,v,(v.subtreeFlags&8772)!==0):gh(A,v),XA=L,ks=V}break;case 30:break;default:gh(A,v)}}function mL(A){var h=A.alternate;h!==null&&(A.alternate=null,mL(h)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(h=A.stateNode,h!==null&&Ee(h)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ma=null,yl=!1;function YA(A,h,v){for(v=v.child;v!==null;)pL(A,h,v),v=v.sibling}function pL(A,h,v){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Pt,v)}catch{}switch(v.tag){case 26:ks||Ud(v,h),YA(A,h,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:ks||Ud(v,h);var w=Ma,L=yl;Ch(v.type)&&(Ma=v.stateNode,yl=!1),YA(A,h,v),l1(v.stateNode),Ma=w,yl=L;break;case 5:ks||Ud(v,h);case 6:if(w=Ma,L=yl,Ma=null,YA(A,h,v),Ma=w,yl=L,Ma!==null)if(yl)try{(Ma.nodeType===9?Ma.body:Ma.nodeName==="HTML"?Ma.ownerDocument.body:Ma).removeChild(v.stateNode)}catch(V){ya(v,h,V)}else try{Ma.removeChild(v.stateNode)}catch(V){ya(v,h,V)}break;case 18:Ma!==null&&(yl?(A=Ma,a8(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,v.stateNode),p1(A)):a8(Ma,v.stateNode));break;case 4:w=Ma,L=yl,Ma=v.stateNode.containerInfo,yl=!0,YA(A,h,v),Ma=w,yl=L;break;case 0:case 11:case 14:case 15:ks||ph(2,v,h),ks||ph(4,v,h),YA(A,h,v);break;case 1:ks||(Ud(v,h),w=v.stateNode,typeof w.componentWillUnmount=="function"&&cL(v,h,w)),YA(A,h,v);break;case 21:YA(A,h,v);break;case 22:ks=(w=ks)||v.memoizedState!==null,YA(A,h,v),ks=w;break;default:YA(A,h,v)}}function gL(A,h){if(h.memoizedState===null&&(A=h.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{p1(A)}catch(v){ya(h,h.return,v)}}function Cle(A){switch(A.tag){case 13:case 19:var h=A.stateNode;return h===null&&(h=A.stateNode=new fL),h;case 22:return A=A.stateNode,h=A._retryCache,h===null&&(h=A._retryCache=new fL),h;default:throw Error(n(435,A.tag))}}function x4(A,h){var v=Cle(A);h.forEach(function(w){var L=Fle.bind(null,A,w);v.has(w)||(v.add(w),w.then(L,L))})}function Xl(A,h){var v=h.deletions;if(v!==null)for(var w=0;w<v.length;w++){var L=v[w],V=A,le=h,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(Ch(be.type)){Ma=be.stateNode,yl=!1;break e}break;case 5:Ma=be.stateNode,yl=!1;break e;case 3:case 4:Ma=be.stateNode.containerInfo,yl=!0;break e}be=be.return}if(Ma===null)throw Error(n(160));pL(V,le,L),Ma=null,yl=!1,V=L.alternate,V!==null&&(V.return=null),L.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)vL(h,A),h=h.sibling}var Hu=null;function vL(A,h){var v=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Xl(h,A),Yl(A),w&4&&(ph(3,A,A.return),Jx(3,A),ph(5,A,A.return));break;case 1:Xl(h,A),Yl(A),w&512&&(ks||v===null||Ud(v,v.return)),w&64&&XA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(v=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=v===null?w:v.concat(w))));break;case 26:var L=Hu;if(Xl(h,A),Yl(A),w&512&&(ks||v===null||Ud(v,v.return)),w&4){var V=v!==null?v.memoizedState:null;if(w=A.memoizedState,v===null)if(w===null)if(A.stateNode===null){e:{w=A.type,v=A.memoizedProps,L=L.ownerDocument||L;t:switch(w){case"title":V=L.getElementsByTagName("title")[0],(!V||V[we]||V[wn]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=L.createElement(w),L.head.insertBefore(V,L.querySelector("head > title"))),qi(V,w,v),V[wn]=A,$e(V),w=V;break e;case"link":var le=A8("link","href",L).get(w+(v.href||""));if(le){for(var be=0;be<le.length;be++)if(V=le[be],V.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&V.getAttribute("rel")===(v.rel==null?null:v.rel)&&V.getAttribute("title")===(v.title==null?null:v.title)&&V.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){le.splice(be,1);break t}}V=L.createElement(w),qi(V,w,v),L.head.appendChild(V);break;case"meta":if(le=A8("meta","content",L).get(w+(v.content||""))){for(be=0;be<le.length;be++)if(V=le[be],V.getAttribute("content")===(v.content==null?null:""+v.content)&&V.getAttribute("name")===(v.name==null?null:v.name)&&V.getAttribute("property")===(v.property==null?null:v.property)&&V.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&V.getAttribute("charset")===(v.charSet==null?null:v.charSet)){le.splice(be,1);break t}}V=L.createElement(w),qi(V,w,v),L.head.appendChild(V);break;default:throw Error(n(468,w))}V[wn]=A,$e(V),w=V}A.stateNode=w}else f8(L,A.type,A.stateNode);else A.stateNode=d8(L,w,A.memoizedProps);else V!==w?(V===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):V.count--,w===null?f8(L,A.type,A.stateNode):d8(L,w,A.memoizedProps)):w===null&&A.stateNode!==null&&m4(A,A.memoizedProps,v.memoizedProps)}break;case 27:Xl(h,A),Yl(A),w&512&&(ks||v===null||Ud(v,v.return)),v!==null&&w&4&&m4(A,A.memoizedProps,v.memoizedProps);break;case 5:if(Xl(h,A),Yl(A),w&512&&(ks||v===null||Ud(v,v.return)),A.flags&32){L=A.stateNode;try{lo(L,"")}catch(lt){ya(A,A.return,lt)}}w&4&&A.stateNode!=null&&(L=A.memoizedProps,m4(A,L,v!==null?v.memoizedProps:L)),w&1024&&(v4=!0);break;case 6:if(Xl(h,A),Yl(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,v=A.stateNode;try{v.nodeValue=w}catch(lt){ya(A,A.return,lt)}}break;case 3:if(v2=null,L=Hu,Hu=p2(h.containerInfo),Xl(h,A),Hu=L,Yl(A),w&4&&v!==null&&v.memoizedState.isDehydrated)try{p1(h.containerInfo)}catch(lt){ya(A,A.return,lt)}v4&&(v4=!1,xL(A));break;case 4:w=Hu,Hu=p2(A.stateNode.containerInfo),Xl(h,A),Yl(A),Hu=w;break;case 12:Xl(h,A),Yl(A);break;case 13:Xl(h,A),Yl(A),A.child.flags&8192&&A.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(_4=Ie()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,x4(A,w)));break;case 22:L=A.memoizedState!==null;var De=v!==null&&v.memoizedState!==null,nt=XA,mt=ks;if(XA=nt||L,ks=mt||De,Xl(h,A),ks=mt,XA=nt,Yl(A),w&8192)e:for(h=A.stateNode,h._visibility=L?h._visibility&-2:h._visibility|1,L&&(v===null||De||XA||ks||hm(A)),v=null,h=A;;){if(h.tag===5||h.tag===26){if(v===null){De=v=h;try{if(V=De.stateNode,L)le=V.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=De.stateNode;var _t=De.memoizedProps.style,it=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;be.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(lt){ya(De,De.return,lt)}}}else if(h.tag===6){if(v===null){De=h;try{De.stateNode.nodeValue=L?"":De.memoizedProps}catch(lt){ya(De,De.return,lt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===A)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===A)break e;for(;h.sibling===null;){if(h.return===null||h.return===A)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=A.updateQueue,w!==null&&(v=w.retryQueue,v!==null&&(w.retryQueue=null,x4(A,v))));break;case 19:Xl(h,A),Yl(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,x4(A,w)));break;case 30:break;case 21:break;default:Xl(h,A),Yl(A)}}function Yl(A){var h=A.flags;if(h&2){try{for(var v,w=A.return;w!==null;){if(dL(w)){v=w;break}w=w.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var L=v.stateNode,V=p4(A);n2(A,V,L);break;case 5:var le=v.stateNode;v.flags&32&&(lo(le,""),v.flags&=-33);var be=p4(A);n2(A,be,le);break;case 3:case 4:var De=v.stateNode.containerInfo,nt=p4(A);g4(A,nt,De);break;default:throw Error(n(161))}}catch(mt){ya(A,A.return,mt)}A.flags&=-3}h&4096&&(A.flags&=-4097)}function xL(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var h=A;xL(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),A=A.sibling}}function gh(A,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)hL(A,h.alternate,h),h=h.sibling}function hm(A){for(A=A.child;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 14:case 15:ph(4,h,h.return),hm(h);break;case 1:Ud(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&cL(h,h.return,v),hm(h);break;case 27:l1(h.stateNode);case 26:case 5:Ud(h,h.return),hm(h);break;case 22:h.memoizedState===null&&hm(h);break;case 30:hm(h);break;default:hm(h)}A=A.sibling}}function vh(A,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,L=A,V=h,le=V.flags;switch(V.tag){case 0:case 11:case 15:vh(L,V,v),Jx(4,V);break;case 1:if(vh(L,V,v),w=V,L=w.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(nt){ya(w,w.return,nt)}if(w=V,L=w.updateQueue,L!==null){var be=w.stateNode;try{var De=L.shared.hiddenCallbacks;if(De!==null)for(L.shared.hiddenCallbacks=null,L=0;L<De.length;L++)_n(De[L],be)}catch(nt){ya(w,w.return,nt)}}v&&le&64&&lL(V),Zx(V,V.return);break;case 27:AL(V);case 26:case 5:vh(L,V,v),v&&w===null&&le&4&&uL(V),Zx(V,V.return);break;case 12:vh(L,V,v);break;case 13:vh(L,V,v),v&&le&4&&gL(L,V);break;case 22:V.memoizedState===null&&vh(L,V,v),Zx(V,V.return);break;case 30:break;default:vh(L,V,v)}h=h.sibling}}function b4(A,h){var v=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),A=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),A!==v&&(A!=null&&A.refCount++,v!=null&&tm(v))}function y4(A,h){A=null,h.alternate!==null&&(A=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==A&&(h.refCount++,A!=null&&tm(A))}function Md(A,h,v,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)bL(A,h,v,w),h=h.sibling}function bL(A,h,v,w){var L=h.flags;switch(h.tag){case 0:case 11:case 15:Md(A,h,v,w),L&2048&&Jx(9,h);break;case 1:Md(A,h,v,w);break;case 3:Md(A,h,v,w),L&2048&&(A=null,h.alternate!==null&&(A=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==A&&(h.refCount++,A!=null&&tm(A)));break;case 12:if(L&2048){Md(A,h,v,w),A=h.stateNode;try{var V=h.memoizedProps,le=V.id,be=V.onPostCommit;typeof be=="function"&&be(le,h.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(De){ya(h,h.return,De)}}else Md(A,h,v,w);break;case 13:Md(A,h,v,w);break;case 23:break;case 22:V=h.stateNode,le=h.alternate,h.memoizedState!==null?V._visibility&2?Md(A,h,v,w):e1(A,h):V._visibility&2?Md(A,h,v,w):(V._visibility|=2,Jp(A,h,v,w,(h.subtreeFlags&10256)!==0)),L&2048&&b4(le,h);break;case 24:Md(A,h,v,w),L&2048&&y4(h.alternate,h);break;default:Md(A,h,v,w)}}function Jp(A,h,v,w,L){for(L=L&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var V=A,le=h,be=v,De=w,nt=le.flags;switch(le.tag){case 0:case 11:case 15:Jp(V,le,be,De,L),Jx(8,le);break;case 23:break;case 22:var mt=le.stateNode;le.memoizedState!==null?mt._visibility&2?Jp(V,le,be,De,L):e1(V,le):(mt._visibility|=2,Jp(V,le,be,De,L)),L&&nt&2048&&b4(le.alternate,le);break;case 24:Jp(V,le,be,De,L),L&&nt&2048&&y4(le.alternate,le);break;default:Jp(V,le,be,De,L)}h=h.sibling}}function e1(A,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=A,w=h,L=w.flags;switch(w.tag){case 22:e1(v,w),L&2048&&b4(w.alternate,w);break;case 24:e1(v,w),L&2048&&y4(w.alternate,w);break;default:e1(v,w)}h=h.sibling}}var t1=8192;function Zp(A){if(A.subtreeFlags&t1)for(A=A.child;A!==null;)yL(A),A=A.sibling}function yL(A){switch(A.tag){case 26:Zp(A),A.flags&t1&&A.memoizedState!==null&&cce(Hu,A.memoizedState,A.memoizedProps);break;case 5:Zp(A);break;case 3:case 4:var h=Hu;Hu=p2(A.stateNode.containerInfo),Zp(A),Hu=h;break;case 22:A.memoizedState===null&&(h=A.alternate,h!==null&&h.memoizedState!==null?(h=t1,t1=16777216,Zp(A),t1=h):Zp(A));break;default:Zp(A)}}function wL(A){var h=A.alternate;if(h!==null&&(A=h.child,A!==null)){h.child=null;do h=A.sibling,A.sibling=null,A=h;while(A!==null)}}function r1(A){var h=A.deletions;if((A.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var w=h[v];Ni=w,CL(w,A)}wL(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)EL(A),A=A.sibling}function EL(A){switch(A.tag){case 0:case 11:case 15:r1(A),A.flags&2048&&ph(9,A,A.return);break;case 3:r1(A);break;case 12:r1(A);break;case 22:var h=A.stateNode;A.memoizedState!==null&&h._visibility&2&&(A.return===null||A.return.tag!==13)?(h._visibility&=-3,a2(A)):r1(A);break;default:r1(A)}}function a2(A){var h=A.deletions;if((A.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var w=h[v];Ni=w,CL(w,A)}wL(A)}for(A=A.child;A!==null;){switch(h=A,h.tag){case 0:case 11:case 15:ph(8,h,h.return),a2(h);break;case 22:v=h.stateNode,v._visibility&2&&(v._visibility&=-3,a2(h));break;default:a2(h)}A=A.sibling}}function CL(A,h){for(;Ni!==null;){var v=Ni;switch(v.tag){case 0:case 11:case 15:ph(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var w=v.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:tm(v.memoizedState.cache)}if(w=v.child,w!==null)w.return=v,Ni=w;else e:for(v=A;Ni!==null;){w=Ni;var L=w.sibling,V=w.return;if(mL(w),w===v){Ni=null;break e}if(L!==null){L.return=V,Ni=L;break e}Ni=V}}}var _le={getCacheForType:function(A){var h=Ss(Ns),v=h.data.get(A);return v===void 0&&(v=A(),h.data.set(A,v)),v}},Sle=typeof WeakMap=="function"?WeakMap:Map,aa=0,Sa=null,hn=null,Nn=0,sa=0,Jl=null,xh=!1,eg=!1,w4=!1,JA=0,cs=0,bh=0,mm=0,E4=0,$c=0,tg=0,n1=null,wl=null,C4=!1,_4=0,s2=1/0,i2=null,yh=null,Gi=0,wh=null,rg=null,ng=0,S4=0,N4=null,_L=null,a1=0,B4=null;function Zl(){if((aa&2)!==0&&Nn!==0)return Nn&-Nn;if(W.T!==null){var A=HA;return A!==0?A:D4()}return Va()}function SL(){$c===0&&($c=(Nn&536870912)===0||Tn?yn():536870912);var A=zc.current;return A!==null&&(A.flags|=32),$c}function ec(A,h,v){(A===Sa&&(sa===2||sa===9)||A.cancelPendingCommit!==null)&&(ag(A,0),Eh(A,Nn,$c,!1)),ea(A,v),((aa&2)===0||A!==Sa)&&(A===Sa&&((aa&2)===0&&(mm|=v),cs===4&&Eh(A,Nn,$c,!1)),Qd(A))}function NL(A,h,v){if((aa&6)!==0)throw Error(n(327));var w=!v&&(h&124)===0&&(h&A.expiredLanes)===0||Vr(A,h),L=w?kle(A,h):I4(A,h,!0),V=w;do{if(L===0){eg&&!w&&Eh(A,h,0,!1);break}else{if(v=A.current.alternate,V&&!Nle(v)){L=I4(A,h,!1),V=!1;continue}if(L===2){if(V=h,A.errorRecoveryDisabledLanes&V)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){h=le;e:{var be=A;L=n1;var De=be.current.memoizedState.isDehydrated;if(De&&(ag(be,le).flags|=256),le=I4(be,le,!1),le!==2){if(w4&&!De){be.errorRecoveryDisabledLanes|=V,mm|=V,L=4;break e}V=wl,wl=L,V!==null&&(wl===null?wl=V:wl.push.apply(wl,V))}L=le}if(V=!1,L!==2)continue}}if(L===1){ag(A,0),Eh(A,h,0,!0);break}e:{switch(w=A,V=L,V){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:Eh(w,h,$c,!xh);break e;case 2:wl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(L=_4+300-Ie(),10<L)){if(Eh(w,h,$c,!xh),Rt(w,0,!0)!==0)break e;w.timeoutHandle=r8(BL.bind(null,w,v,wl,i2,C4,h,$c,mm,tg,xh,V,2,-0,0),L);break e}BL(w,v,wl,i2,C4,h,$c,mm,tg,xh,V,0,-0,0)}}break}while(!0);Qd(A)}function BL(A,h,v,w,L,V,le,be,De,nt,mt,_t,it,lt){if(A.timeoutHandle=-1,_t=h.subtreeFlags,(_t&8192||(_t&16785408)===16785408)&&(d1={stylesheets:null,count:0,unsuspend:lce},yL(h),_t=uce(),_t!==null)){A.cancelPendingCommit=_t(DL.bind(null,A,h,V,v,w,L,le,be,De,mt,1,it,lt)),Eh(A,V,le,!nt);return}DL(A,h,V,v,w,L,le,be,De)}function Nle(A){for(var h=A;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var w=0;w<v.length;w++){var L=v[w],V=L.getSnapshot;L=L.value;try{if(!Vs(V(),L))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===A)break;for(;h.sibling===null;){if(h.return===null||h.return===A)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Eh(A,h,v,w){h&=~E4,h&=~mm,A.suspendedLanes|=h,A.pingedLanes&=~h,w&&(A.warmLanes|=h),w=A.expirationTimes;for(var L=h;0<L;){var V=31-Pe(L),le=1<<V;w[V]=-1,L&=~le}v!==0&&Zt(A,v,h)}function o2(){return(aa&6)===0?(s1(0),!1):!0}function k4(){if(hn!==null){if(sa===0)var A=hn.return;else A=hn,Pu=$s=null,zp(A),Xp=null,Wx=0,A=hn;for(;A!==null;)oL(A.alternate,A),A=A.return;hn=null}}function ag(A,h){var v=A.timeoutHandle;v!==-1&&(A.timeoutHandle=-1,$le(v)),v=A.cancelPendingCommit,v!==null&&(A.cancelPendingCommit=null,v()),k4(),Sa=A,hn=v=Lc(A.current,null),Nn=h,sa=0,Jl=null,xh=!1,eg=Vr(A,h),w4=!1,tg=$c=E4=mm=bh=cs=0,wl=n1=null,C4=!1,(h&8)!==0&&(h|=h&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=h;0<w;){var L=31-Pe(w),V=1<<L;h|=A[L],w&=~V}return JA=h,gl(),v}function kL(A,h){Er=null,W.H=qw,h===he||h===ve?(h=Ge(),sa=3):h===me?(h=Ge(),sa=4):sa=h===GR?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Jl=h,hn===null&&(cs=1,Zw(A,nn(h,A.current)))}function TL(){var A=W.H;return W.H=qw,A===null?qw:A}function IL(){var A=W.A;return W.A=_le,A}function T4(){cs=4,xh||(Nn&4194048)!==Nn&&zc.current!==null||(eg=!0),(bh&134217727)===0&&(mm&134217727)===0||Sa===null||Eh(Sa,Nn,$c,!1)}function I4(A,h,v){var w=aa;aa|=2;var L=TL(),V=IL();(Sa!==A||Nn!==h)&&(i2=null,ag(A,h)),h=!1;var le=cs;e:do try{if(sa!==0&&hn!==null){var be=hn,De=Jl;switch(sa){case 8:k4(),le=6;break e;case 3:case 2:case 9:case 6:zc.current===null&&(h=!0);var nt=sa;if(sa=0,Jl=null,sg(A,be,De,nt),v&&eg){le=0;break e}break;default:nt=sa,sa=0,Jl=null,sg(A,be,De,nt)}}Ble(),le=cs;break}catch(mt){kL(A,mt)}while(!0);return h&&A.shellSuspendCounter++,Pu=$s=null,aa=w,W.H=L,W.A=V,hn===null&&(Sa=null,Nn=0,gl()),le}function Ble(){for(;hn!==null;)jL(hn)}function kle(A,h){var v=aa;aa|=2;var w=TL(),L=IL();Sa!==A||Nn!==h?(i2=null,s2=Ie()+500,ag(A,h)):eg=Vr(A,h);e:do try{if(sa!==0&&hn!==null){h=hn;var V=Jl;t:switch(sa){case 1:sa=0,Jl=null,sg(A,h,V,1);break;case 2:case 9:if(Se(V)){sa=0,Jl=null,FL(h);break}h=function(){sa!==2&&sa!==9||Sa!==A||(sa=7),Qd(A)},V.then(h,h);break e;case 3:sa=7;break e;case 4:sa=5;break e;case 7:Se(V)?(sa=0,Jl=null,FL(h)):(sa=0,Jl=null,sg(A,h,V,7));break;case 5:var le=null;switch(hn.tag){case 26:le=hn.memoizedState;case 5:case 27:var be=hn;if(!le||h8(le)){sa=0,Jl=null;var De=be.sibling;if(De!==null)hn=De;else{var nt=be.return;nt!==null?(hn=nt,l2(nt)):hn=null}break t}}sa=0,Jl=null,sg(A,h,V,5);break;case 6:sa=0,Jl=null,sg(A,h,V,6);break;case 8:k4(),cs=6;break e;default:throw Error(n(462))}}Tle();break}catch(mt){kL(A,mt)}while(!0);return Pu=$s=null,W.H=w,W.A=L,aa=v,hn!==null?0:(Sa=null,Nn=0,gl(),cs)}function Tle(){for(;hn!==null&&!Ce();)jL(hn)}function jL(A){var h=sL(A.alternate,A,JA);A.memoizedProps=A.pendingProps,h===null?l2(A):hn=h}function FL(A){var h=A,v=h.alternate;switch(h.tag){case 15:case 0:h=ZR(v,h,h.pendingProps,h.type,void 0,Nn);break;case 11:h=ZR(v,h,h.pendingProps,h.type.render,h.ref,Nn);break;case 5:zp(h);default:oL(v,h),h=hn=Y0(h,JA),h=sL(v,h,JA)}A.memoizedProps=A.pendingProps,h===null?l2(A):hn=h}function sg(A,h,v,w){Pu=$s=null,zp(h),Xp=null,Wx=0;var L=h.return;try{if(xle(A,L,h,v,Nn)){cs=1,Zw(A,nn(v,A.current)),hn=null;return}}catch(V){if(L!==null)throw hn=L,V;cs=1,Zw(A,nn(v,A.current)),hn=null;return}h.flags&32768?(Tn||w===1?A=!0:eg||(Nn&536870912)!==0?A=!1:(xh=A=!0,(w===2||w===9||w===3||w===6)&&(w=zc.current,w!==null&&w.tag===13&&(w.flags|=16384))),OL(h,A)):l2(h)}function l2(A){var h=A;do{if((h.flags&32768)!==0){OL(h,xh);return}A=h.return;var v=yle(h.alternate,h,JA);if(v!==null){hn=v;return}if(h=h.sibling,h!==null){hn=h;return}hn=h=A}while(h!==null);cs===0&&(cs=5)}function OL(A,h){do{var v=wle(A.alternate,A);if(v!==null){v.flags&=32767,hn=v;return}if(v=A.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(A=A.sibling,A!==null)){hn=A;return}hn=A=v}while(A!==null);cs=6,hn=null}function DL(A,h,v,w,L,V,le,be,De){A.cancelPendingCommit=null;do c2();while(Gi!==0);if((aa&6)!==0)throw Error(n(327));if(h!==null){if(h===A.current)throw Error(n(177));if(V=h.lanes|h.childLanes,V|=$a,or(A,v,V,le,be,De),A===Sa&&(hn=Sa=null,Nn=0),rg=h,wh=A,ng=v,S4=V,N4=L,_L=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Ole(Et,function(){return ML(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=W.T,W.T=null,L=Z.p,Z.p=2,le=aa,aa|=4;try{Ele(A,h,v)}finally{aa=le,Z.p=L,W.T=w}}Gi=1,PL(),RL(),LL()}}function PL(){if(Gi===1){Gi=0;var A=wh,h=rg,v=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||v){v=W.T,W.T=null;var w=Z.p;Z.p=2;var L=aa;aa|=4;try{vL(h,A);var V=V4,le=Vi(A.containerInfo),be=V.focusedElem,De=V.selectionRange;if(le!==be&&be&&be.ownerDocument&&wd(be.ownerDocument.documentElement,be)){if(De!==null&&ui(be)){var nt=De.start,mt=De.end;if(mt===void 0&&(mt=nt),"selectionStart"in be)be.selectionStart=nt,be.selectionEnd=Math.min(mt,be.value.length);else{var _t=be.ownerDocument||document,it=_t&&_t.defaultView||window;if(it.getSelection){var lt=it.getSelection(),Pr=be.textContent.length,Nr=Math.min(De.start,Pr),ga=De.end===void 0?Nr:Math.min(De.end,Pr);!lt.extend&&Nr>ga&&(le=ga,ga=Nr,Nr=le);var qe=Bu(be,Nr),Qe=Bu(be,ga);if(qe&&Qe&&(lt.rangeCount!==1||lt.anchorNode!==qe.node||lt.anchorOffset!==qe.offset||lt.focusNode!==Qe.node||lt.focusOffset!==Qe.offset)){var Ze=_t.createRange();Ze.setStart(qe.node,qe.offset),lt.removeAllRanges(),Nr>ga?(lt.addRange(Ze),lt.extend(Qe.node,Qe.offset)):(Ze.setEnd(Qe.node,Qe.offset),lt.addRange(Ze))}}}}for(_t=[],lt=be;lt=lt.parentNode;)lt.nodeType===1&&_t.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<_t.length;be++){var xt=_t[be];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}y2=!!H4,V4=H4=null}finally{aa=L,Z.p=w,W.T=v}}A.current=h,Gi=2}}function RL(){if(Gi===2){Gi=0;var A=wh,h=rg,v=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||v){v=W.T,W.T=null;var w=Z.p;Z.p=2;var L=aa;aa|=4;try{hL(A,h.alternate,h)}finally{aa=L,Z.p=w,W.T=v}}Gi=3}}function LL(){if(Gi===4||Gi===3){Gi=0,fe();var A=wh,h=rg,v=ng,w=_L;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Gi=5:(Gi=0,rg=wh=null,UL(A,A.pendingLanes));var L=A.pendingLanes;if(L===0&&(yh=null),Aa(v),h=h.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Pt,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=W.T,L=Z.p,Z.p=2,W.T=null;try{for(var V=A.onRecoverableError,le=0;le<w.length;le++){var be=w[le];V(be.value,{componentStack:be.stack})}}finally{W.T=h,Z.p=L}}(ng&3)!==0&&c2(),Qd(A),L=A.pendingLanes,(v&4194090)!==0&&(L&42)!==0?A===B4?a1++:(a1=0,B4=A):a1=0,s1(0)}}function UL(A,h){(A.pooledCacheLanes&=h)===0&&(h=A.pooledCache,h!=null&&(A.pooledCache=null,tm(h)))}function c2(A){return PL(),RL(),LL(),ML()}function ML(){if(Gi!==5)return!1;var A=wh,h=S4;S4=0;var v=Aa(ng),w=W.T,L=Z.p;try{Z.p=32>v?32:v,W.T=null,v=N4,N4=null;var V=wh,le=ng;if(Gi=0,rg=wh=null,ng=0,(aa&6)!==0)throw Error(n(331));var be=aa;if(aa|=4,EL(V.current),bL(V,V.current,le,v),aa=be,s1(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Pt,V)}catch{}return!0}finally{Z.p=L,W.T=w,UL(A,h)}}function QL(A,h,v){h=nn(v,h),h=i4(A.stateNode,h,2),A=yt(A,h,2),A!==null&&(ea(A,2),Qd(A))}function ya(A,h,v){if(A.tag===3)QL(A,A,v);else for(;h!==null;){if(h.tag===3){QL(h,A,v);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(yh===null||!yh.has(w))){A=nn(v,A),v=$R(2),w=yt(h,v,2),w!==null&&(KR(v,w,h,A),ea(w,2),Qd(w));break}}h=h.return}}function j4(A,h,v){var w=A.pingCache;if(w===null){w=A.pingCache=new Sle;var L=new Set;w.set(h,L)}else L=w.get(h),L===void 0&&(L=new Set,w.set(h,L));L.has(v)||(w4=!0,L.add(v),A=Ile.bind(null,A,h,v),h.then(A,A))}function Ile(A,h,v){var w=A.pingCache;w!==null&&w.delete(h),A.pingedLanes|=A.suspendedLanes&v,A.warmLanes&=~v,Sa===A&&(Nn&v)===v&&(cs===4||cs===3&&(Nn&62914560)===Nn&&300>Ie()-_4?(aa&2)===0&&ag(A,0):E4|=v,tg===Nn&&(tg=0)),Qd(A)}function HL(A,h){h===0&&(h=Qr()),A=Tu(A,h),A!==null&&(ea(A,h),Qd(A))}function jle(A){var h=A.memoizedState,v=0;h!==null&&(v=h.retryLane),HL(A,v)}function Fle(A,h){var v=0;switch(A.tag){case 13:var w=A.stateNode,L=A.memoizedState;L!==null&&(v=L.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(h),HL(A,v)}function Ole(A,h){return Ne(A,h)}var u2=null,ig=null,F4=!1,d2=!1,O4=!1,pm=0;function Qd(A){A!==ig&&A.next===null&&(ig===null?u2=ig=A:ig=ig.next=A),d2=!0,F4||(F4=!0,Ple())}function s1(A,h){if(!O4&&d2){O4=!0;do for(var v=!1,w=u2;w!==null;){if(A!==0){var L=w.pendingLanes;if(L===0)var V=0;else{var le=w.suspendedLanes,be=w.pingedLanes;V=(1<<31-Pe(42|A)+1)-1,V&=L&~(le&~be),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(v=!0,KL(w,V))}else V=Nn,V=Rt(w,w===Sa?V:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(V&3)===0||Vr(w,V)||(v=!0,KL(w,V));w=w.next}while(v);O4=!1}}function Dle(){VL()}function VL(){d2=F4=!1;var A=0;pm!==0&&(zle()&&(A=pm),pm=0);for(var h=Ie(),v=null,w=u2;w!==null;){var L=w.next,V=zL(w,h);V===0?(w.next=null,v===null?u2=L:v.next=L,L===null&&(ig=v)):(v=w,(A!==0||(V&3)!==0)&&(d2=!0)),w=L}s1(A)}function zL(A,h){for(var v=A.suspendedLanes,w=A.pingedLanes,L=A.expirationTimes,V=A.pendingLanes&-62914561;0<V;){var le=31-Pe(V),be=1<<le,De=L[le];De===-1?((be&v)===0||(be&w)!==0)&&(L[le]=dr(be,h)):De<=h&&(A.expiredLanes|=be),V&=~be}if(h=Sa,v=Nn,v=Rt(A,A===h?v:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,v===0||A===h&&(sa===2||sa===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&Oe(w),A.callbackNode=null,A.callbackPriority=0;if((v&3)===0||Vr(A,v)){if(h=v&-v,h===A.callbackPriority)return h;switch(w!==null&&Oe(w),Aa(v)){case 2:case 8:v=dt;break;case 32:v=Et;break;case 268435456:v=Ct;break;default:v=Et}return w=$L.bind(null,A),v=Ne(v,w),A.callbackPriority=h,A.callbackNode=v,h}return w!==null&&w!==null&&Oe(w),A.callbackPriority=2,A.callbackNode=null,2}function $L(A,h){if(Gi!==0&&Gi!==5)return A.callbackNode=null,A.callbackPriority=0,null;var v=A.callbackNode;if(c2()&&A.callbackNode!==v)return null;var w=Nn;return w=Rt(A,A===Sa?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(NL(A,w,h),zL(A,Ie()),A.callbackNode!=null&&A.callbackNode===v?$L.bind(null,A):null)}function KL(A,h){if(c2())return null;NL(A,h,!0)}function Ple(){Kle(function(){(aa&6)!==0?Ne(Xe,Dle):VL()})}function D4(){return pm===0&&(pm=yn()),pm}function GL(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Ml(""+A)}function qL(A,h){var v=h.ownerDocument.createElement("input");return v.name=h.name,v.value=h.value,A.id&&v.setAttribute("form",A.id),h.parentNode.insertBefore(v,h),A=new FormData(A),v.parentNode.removeChild(v),A}function Rle(A,h,v,w,L){if(h==="submit"&&v&&v.stateNode===L){var V=GL((L[fn]||null).action),le=w.submitter;le&&(h=(h=le[fn]||null)?GL(h.formAction):le.getAttribute("formAction"),h!==null&&(V=h,le=null));var be=new kc("action","action",null,w,L);A.push({event:be,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(pm!==0){var De=le?qL(L,le):new FormData(L);Vc(v,{pending:!0,data:De,method:L.method,action:V},null,De)}}else typeof V=="function"&&(be.preventDefault(),De=le?qL(L,le):new FormData(L),Vc(v,{pending:!0,data:De,method:L.method,action:V},V,De))},currentTarget:L}]})}}for(var P4=0;P4<PA.length;P4++){var R4=PA[P4],Lle=R4.toLowerCase(),Ule=R4[0].toUpperCase()+R4.slice(1);La(Lle,"on"+Ule)}La(nh,"onAnimationEnd"),La(Cd,"onAnimationIteration"),La(_d,"onAnimationStart"),La("dblclick","onDoubleClick"),La("focusin","onFocus"),La("focusout","onBlur"),La(Sd,"onTransitionRun"),La(DA,"onTransitionStart"),La(ah,"onTransitionCancel"),La(Nd,"onTransitionEnd"),Ot("onMouseEnter",["mouseout","mouseover"]),Ot("onMouseLeave",["mouseout","mouseover"]),Ot("onPointerEnter",["pointerout","pointerover"]),Ot("onPointerLeave",["pointerout","pointerover"]),wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var i1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mle=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(i1));function WL(A,h){h=(h&4)!==0;for(var v=0;v<A.length;v++){var w=A[v],L=w.event;w=w.listeners;e:{var V=void 0;if(h)for(var le=w.length-1;0<=le;le--){var be=w[le],De=be.instance,nt=be.currentTarget;if(be=be.listener,De!==V&&L.isPropagationStopped())break e;V=be,L.currentTarget=nt;try{V(L)}catch(mt){Jw(mt)}L.currentTarget=null,V=De}else for(le=0;le<w.length;le++){if(be=w[le],De=be.instance,nt=be.currentTarget,be=be.listener,De!==V&&L.isPropagationStopped())break e;V=be,L.currentTarget=nt;try{V(L)}catch(mt){Jw(mt)}L.currentTarget=null,V=De}}}}function mn(A,h){var v=h[ta];v===void 0&&(v=h[ta]=new Set);var w=A+"__bubble";v.has(w)||(XL(h,A,2,!1),v.add(w))}function L4(A,h,v){var w=0;h&&(w|=4),XL(v,A,w,h)}var A2="_reactListening"+Math.random().toString(36).slice(2);function U4(A){if(!A[A2]){A[A2]=!0,Je.forEach(function(v){v!=="selectionchange"&&(Mle.has(v)||L4(v,!1,A),L4(v,!0,A))});var h=A.nodeType===9?A:A.ownerDocument;h===null||h[A2]||(h[A2]=!0,L4("selectionchange",!1,h))}}function XL(A,h,v,w){switch(b8(h)){case 2:var L=fce;break;case 8:L=hce;break;default:L=Z4}v=L.bind(null,h,v,A),L=void 0,!Hi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(L=!0),w?L!==void 0?A.addEventListener(h,v,{capture:!0,passive:L}):A.addEventListener(h,v,!0):L!==void 0?A.addEventListener(h,v,{passive:L}):A.addEventListener(h,v,!1)}function M4(A,h,v,w,L){var V=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var le=w.tag;if(le===3||le===4){var be=w.stateNode.containerInfo;if(be===L)break;if(le===4)for(le=w.return;le!==null;){var De=le.tag;if((De===3||De===4)&&le.stateNode.containerInfo===L)return;le=le.return}for(;be!==null;){if(le=_e(be),le===null)return;if(De=le.tag,De===5||De===6||De===26||De===27){w=V=le;continue e}be=be.parentNode}}w=w.return}Jf(function(){var nt=V,mt=ra(v),_t=[];e:{var it=ku.get(A);if(it!==void 0){var lt=kc,Pr=A;switch(A){case"keypress":if(Ao(v)===0)break e;case"keydown":case"keyup":lt=zl;break;case"focusin":Pr="focus",lt=Ic;break;case"focusout":Pr="blur",lt=Ic;break;case"beforeblur":case"afterblur":lt=Ic;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=ss;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=vd;break;case nh:case Cd:case _d:lt=md;break;case Nd:lt=de;break;case"scroll":case"scrollend":lt=kA;break;case"wheel":lt=Le;break;case"copy":case"cut":case"paste":lt=pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Nu;break;case"toggle":case"beforetoggle":lt=ut}var Nr=(h&4)!==0,ga=!Nr&&(A==="scroll"||A==="scrollend"),qe=Nr?it!==null?it+"Capture":null:it;Nr=[];for(var Qe=nt,Ze;Qe!==null;){var xt=Qe;if(Ze=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||Ze===null||qe===null||(xt=yi(Qe,qe),xt!=null&&Nr.push(o1(Qe,xt,Ze))),ga)break;Qe=Qe.return}0<Nr.length&&(it=new lt(it,Pr,null,v,mt),_t.push({event:it,listeners:Nr}))}}if((h&7)===0){e:{if(it=A==="mouseover"||A==="pointerover",lt=A==="mouseout"||A==="pointerout",it&&v!==cl&&(Pr=v.relatedTarget||v.fromElement)&&(_e(Pr)||Pr[Vn]))break e;if((lt||it)&&(it=mt.window===mt?mt:(it=mt.ownerDocument)?it.defaultView||it.parentWindow:window,lt?(Pr=v.relatedTarget||v.toElement,lt=nt,Pr=Pr?_e(Pr):null,Pr!==null&&(ga=s(Pr),Nr=Pr.tag,Pr!==ga||Nr!==5&&Nr!==27&&Nr!==6)&&(Pr=null)):(lt=null,Pr=nt),lt!==Pr)){if(Nr=ss,xt="onMouseLeave",qe="onMouseEnter",Qe="mouse",(A==="pointerout"||A==="pointerover")&&(Nr=Nu,xt="onPointerLeave",qe="onPointerEnter",Qe="pointer"),ga=lt==null?it:We(lt),Ze=Pr==null?it:We(Pr),it=new Nr(xt,Qe+"leave",lt,v,mt),it.target=ga,it.relatedTarget=Ze,xt=null,_e(mt)===nt&&(Nr=new Nr(qe,Qe+"enter",Pr,v,mt),Nr.target=Ze,Nr.relatedTarget=ga,xt=Nr),ga=xt,lt&&Pr)t:{for(Nr=lt,qe=Pr,Qe=0,Ze=Nr;Ze;Ze=og(Ze))Qe++;for(Ze=0,xt=qe;xt;xt=og(xt))Ze++;for(;0<Qe-Ze;)Nr=og(Nr),Qe--;for(;0<Ze-Qe;)qe=og(qe),Ze--;for(;Qe--;){if(Nr===qe||qe!==null&&Nr===qe.alternate)break t;Nr=og(Nr),qe=og(qe)}Nr=null}else Nr=null;lt!==null&&YL(_t,it,lt,Nr,!1),Pr!==null&&ga!==null&&YL(_t,ga,Pr,Nr,!0)}}e:{if(it=nt?We(nt):window,lt=it.nodeName&&it.nodeName.toLowerCase(),lt==="select"||lt==="input"&&it.type==="file")var lr=th;else if(Gn(it))if(IA)lr=Pp;else{lr=Fx;var cn=ho}else lt=it.nodeName,!lt||lt.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?nt&&NA(nt.elementType)&&(lr=th):lr=W0;if(lr&&(lr=lr(A,nt))){ml(_t,lr,v,mt);break e}cn&&cn(A,it,nt),A==="focusout"&&nt&&it.type==="number"&&nt.memoizedProps.value!=null&&Sc(it,"number",it.value)}switch(cn=nt?We(nt):window,A){case"focusin":(Gn(cn)||cn.contentEditable==="true")&&(mo=cn,$l=nt,Pc=null);break;case"focusout":Pc=$l=mo=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Ra(_t,v,mt);break;case"selectionchange":if(Ed)break;case"keydown":case"keyup":Ra(_t,v,mt)}var mr;if(zt)e:{switch(A){case"compositionstart":var Br="onCompositionStart";break e;case"compositionend":Br="onCompositionEnd";break e;case"compositionupdate":Br="onCompositionUpdate";break e}Br=void 0}else Sr?rt(A,v)&&(Br="onCompositionEnd"):A==="keydown"&&v.keyCode===229&&(Br="onCompositionStart");Br&&(se&&v.locale!=="ko"&&(Sr||Br!=="onCompositionStart"?Br==="onCompositionEnd"&&Sr&&(mr=BA()):(uo=mt,Bc="value"in uo?uo.value:uo.textContent,Sr=!0)),cn=f2(nt,Br),0<cn.length&&(Br=new Cu(Br,A,null,v,mt),_t.push({event:Br,listeners:cn}),mr?Br.data=mr:(mr=It(v),mr!==null&&(Br.data=mr)))),(mr=ee?ln(A,v):Lr(A,v))&&(Br=f2(nt,"onBeforeInput"),0<Br.length&&(cn=new Cu("onBeforeInput","beforeinput",null,v,mt),_t.push({event:cn,listeners:Br}),cn.data=mr)),Rle(_t,A,nt,v,mt)}WL(_t,h)})}function o1(A,h,v){return{instance:A,listener:h,currentTarget:v}}function f2(A,h){for(var v=h+"Capture",w=[];A!==null;){var L=A,V=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||V===null||(L=yi(A,v),L!=null&&w.unshift(o1(A,L,V)),L=yi(A,h),L!=null&&w.push(o1(A,L,V))),A.tag===3)return w;A=A.return}return[]}function og(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function YL(A,h,v,w,L){for(var V=h._reactName,le=[];v!==null&&v!==w;){var be=v,De=be.alternate,nt=be.stateNode;if(be=be.tag,De!==null&&De===w)break;be!==5&&be!==26&&be!==27||nt===null||(De=nt,L?(nt=yi(v,V),nt!=null&&le.unshift(o1(v,nt,De))):L||(nt=yi(v,V),nt!=null&&le.push(o1(v,nt,De)))),v=v.return}le.length!==0&&A.push({event:h,listeners:le})}var Qle=/\r\n?/g,Hle=/\u0000|\uFFFD/g;function JL(A){return(typeof A=="string"?A:""+A).replace(Qle,`
`).replace(Hle,"")}function ZL(A,h){return h=JL(h),JL(A)===h}function h2(){}function pa(A,h,v,w,L,V){switch(v){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||lo(A,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&lo(A,""+w);break;case"className":Xr(A,"class",w);break;case"tabIndex":Xr(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(A,v,w);break;case"style":SA(A,w,V);break;case"data":if(h!=="object"){Xr(A,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||v!=="href")){A.removeAttribute(v);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(v);break}w=Ml(""+w),A.setAttribute(v,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(v==="formAction"?(h!=="input"&&pa(A,h,"name",L.name,L,null),pa(A,h,"formEncType",L.formEncType,L,null),pa(A,h,"formMethod",L.formMethod,L,null),pa(A,h,"formTarget",L.formTarget,L,null)):(pa(A,h,"encType",L.encType,L,null),pa(A,h,"method",L.method,L,null),pa(A,h,"target",L.target,L,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(v);break}w=Ml(""+w),A.setAttribute(v,w);break;case"onClick":w!=null&&(A.onclick=h2);break;case"onScroll":w!=null&&mn("scroll",A);break;case"onScrollEnd":w!=null&&mn("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(v=w.__html,v!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}v=Ml(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(v,""+w):A.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(v,""):A.removeAttribute(v);break;case"capture":case"download":w===!0?A.setAttribute(v,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(v,w):A.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(v,w):A.removeAttribute(v);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(v):A.setAttribute(v,w);break;case"popover":mn("beforetoggle",A),mn("toggle",A),Wr(A,"popover",w);break;case"xlinkActuate":tn(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":tn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":tn(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":tn(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":tn(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":tn(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":tn(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":tn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":tn(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Wr(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Ul.get(v)||v,Wr(A,v,w))}}function Q4(A,h,v,w,L,V){switch(v){case"style":SA(A,w,V);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(v=w.__html,v!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"children":typeof w=="string"?lo(A,w):(typeof w=="number"||typeof w=="bigint")&&lo(A,""+w);break;case"onScroll":w!=null&&mn("scroll",A);break;case"onScrollEnd":w!=null&&mn("scrollend",A);break;case"onClick":w!=null&&(A.onclick=h2);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tt.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(L=v.endsWith("Capture"),h=v.slice(2,L?v.length-7:void 0),V=A[fn]||null,V=V!=null?V[v]:null,typeof V=="function"&&A.removeEventListener(h,V,L),typeof w=="function")){typeof V!="function"&&V!==null&&(v in A?A[v]=null:A.hasAttribute(v)&&A.removeAttribute(v)),A.addEventListener(h,w,L);break e}v in A?A[v]=w:w===!0?A.setAttribute(v,""):Wr(A,v,w)}}}function qi(A,h,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mn("error",A),mn("load",A);var w=!1,L=!1,V;for(V in v)if(v.hasOwnProperty(V)){var le=v[V];if(le!=null)switch(V){case"src":w=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:pa(A,h,V,le,v,null)}}L&&pa(A,h,"srcSet",v.srcSet,v,null),w&&pa(A,h,"src",v.src,v,null);return;case"input":mn("invalid",A);var be=V=le=L=null,De=null,nt=null;for(w in v)if(v.hasOwnProperty(w)){var mt=v[w];if(mt!=null)switch(w){case"name":L=mt;break;case"type":le=mt;break;case"checked":De=mt;break;case"defaultChecked":nt=mt;break;case"value":V=mt;break;case"defaultValue":be=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(n(137,h));break;default:pa(A,h,w,mt,v,null)}}_c(A,V,be,De,nt,le,L,!1),Cc(A);return;case"select":mn("invalid",A),w=le=V=null;for(L in v)if(v.hasOwnProperty(L)&&(be=v[L],be!=null))switch(L){case"value":V=be;break;case"defaultValue":le=be;break;case"multiple":w=be;default:pa(A,h,L,be,v,null)}h=V,v=le,A.multiple=!!w,h!=null?ll(A,!!w,h,!1):v!=null&&ll(A,!!w,v,!0);return;case"textarea":mn("invalid",A),V=L=w=null;for(le in v)if(v.hasOwnProperty(le)&&(be=v[le],be!=null))switch(le){case"value":w=be;break;case"defaultValue":L=be;break;case"children":V=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:pa(A,h,le,be,v,null)}Nc(A,w,L,V),Cc(A);return;case"option":for(De in v)if(v.hasOwnProperty(De)&&(w=v[De],w!=null))switch(De){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:pa(A,h,De,w,v,null)}return;case"dialog":mn("beforetoggle",A),mn("toggle",A),mn("cancel",A),mn("close",A);break;case"iframe":case"object":mn("load",A);break;case"video":case"audio":for(w=0;w<i1.length;w++)mn(i1[w],A);break;case"image":mn("error",A),mn("load",A);break;case"details":mn("toggle",A);break;case"embed":case"source":case"link":mn("error",A),mn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in v)if(v.hasOwnProperty(nt)&&(w=v[nt],w!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:pa(A,h,nt,w,v,null)}return;default:if(NA(h)){for(mt in v)v.hasOwnProperty(mt)&&(w=v[mt],w!==void 0&&Q4(A,h,mt,w,v,void 0));return}}for(be in v)v.hasOwnProperty(be)&&(w=v[be],w!=null&&pa(A,h,be,w,v,null))}function Vle(A,h,v,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,V=null,le=null,be=null,De=null,nt=null,mt=null;for(lt in v){var _t=v[lt];if(v.hasOwnProperty(lt)&&_t!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":De=_t;default:w.hasOwnProperty(lt)||pa(A,h,lt,null,w,_t)}}for(var it in w){var lt=w[it];if(_t=v[it],w.hasOwnProperty(it)&&(lt!=null||_t!=null))switch(it){case"type":V=lt;break;case"name":L=lt;break;case"checked":nt=lt;break;case"defaultChecked":mt=lt;break;case"value":le=lt;break;case"defaultValue":be=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,h));break;default:lt!==_t&&pa(A,h,it,lt,w,_t)}}li(A,le,be,De,nt,mt,V,L);return;case"select":lt=le=be=it=null;for(V in v)if(De=v[V],v.hasOwnProperty(V)&&De!=null)switch(V){case"value":break;case"multiple":lt=De;default:w.hasOwnProperty(V)||pa(A,h,V,null,w,De)}for(L in w)if(V=w[L],De=v[L],w.hasOwnProperty(L)&&(V!=null||De!=null))switch(L){case"value":it=V;break;case"defaultValue":be=V;break;case"multiple":le=V;default:V!==De&&pa(A,h,L,V,w,De)}h=be,v=le,w=lt,it!=null?ll(A,!!v,it,!1):!!w!=!!v&&(h!=null?ll(A,!!v,h,!0):ll(A,!!v,v?[]:"",!1));return;case"textarea":lt=it=null;for(be in v)if(L=v[be],v.hasOwnProperty(be)&&L!=null&&!w.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:pa(A,h,be,null,w,L)}for(le in w)if(L=w[le],V=v[le],w.hasOwnProperty(le)&&(L!=null||V!=null))switch(le){case"value":it=L;break;case"defaultValue":lt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:L!==V&&pa(A,h,le,L,w,V)}Fn(A,it,lt);return;case"option":for(var Pr in v)if(it=v[Pr],v.hasOwnProperty(Pr)&&it!=null&&!w.hasOwnProperty(Pr))switch(Pr){case"selected":A.selected=!1;break;default:pa(A,h,Pr,null,w,it)}for(De in w)if(it=w[De],lt=v[De],w.hasOwnProperty(De)&&it!==lt&&(it!=null||lt!=null))switch(De){case"selected":A.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:pa(A,h,De,it,w,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nr in v)it=v[Nr],v.hasOwnProperty(Nr)&&it!=null&&!w.hasOwnProperty(Nr)&&pa(A,h,Nr,null,w,it);for(nt in w)if(it=w[nt],lt=v[nt],w.hasOwnProperty(nt)&&it!==lt&&(it!=null||lt!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,h));break;default:pa(A,h,nt,it,w,lt)}return;default:if(NA(h)){for(var ga in v)it=v[ga],v.hasOwnProperty(ga)&&it!==void 0&&!w.hasOwnProperty(ga)&&Q4(A,h,ga,void 0,w,it);for(mt in w)it=w[mt],lt=v[mt],!w.hasOwnProperty(mt)||it===lt||it===void 0&&lt===void 0||Q4(A,h,mt,it,w,lt);return}}for(var qe in v)it=v[qe],v.hasOwnProperty(qe)&&it!=null&&!w.hasOwnProperty(qe)&&pa(A,h,qe,null,w,it);for(_t in w)it=w[_t],lt=v[_t],!w.hasOwnProperty(_t)||it===lt||it==null&&lt==null||pa(A,h,_t,it,w,lt)}var H4=null,V4=null;function m2(A){return A.nodeType===9?A:A.ownerDocument}function e8(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t8(A,h){if(A===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&h==="foreignObject"?0:A}function z4(A,h){return A==="textarea"||A==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var $4=null;function zle(){var A=window.event;return A&&A.type==="popstate"?A===$4?!1:($4=A,!0):($4=null,!1)}var r8=typeof setTimeout=="function"?setTimeout:void 0,$le=typeof clearTimeout=="function"?clearTimeout:void 0,n8=typeof Promise=="function"?Promise:void 0,Kle=typeof queueMicrotask=="function"?queueMicrotask:typeof n8<"u"?function(A){return n8.resolve(null).then(A).catch(Gle)}:r8;function Gle(A){setTimeout(function(){throw A})}function Ch(A){return A==="head"}function a8(A,h){var v=h,w=0,L=0;do{var V=v.nextSibling;if(A.removeChild(v),V&&V.nodeType===8)if(v=V.data,v==="/$"){if(0<w&&8>w){v=w;var le=A.ownerDocument;if(v&1&&l1(le.documentElement),v&2&&l1(le.body),v&4)for(v=le.head,l1(v),le=v.firstChild;le;){var be=le.nextSibling,De=le.nodeName;le[we]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&le.rel.toLowerCase()==="stylesheet"||v.removeChild(le),le=be}}if(L===0){A.removeChild(V),p1(h);return}L--}else v==="$"||v==="$?"||v==="$!"?L++:w=v.charCodeAt(0)-48;else w=0;v=V}while(v);p1(h)}function K4(A){var h=A.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var v=h;switch(h=h.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":K4(v),Ee(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}A.removeChild(v)}}function qle(A,h,v,w){for(;A.nodeType===1;){var L=v;if(A.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[we])switch(h){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(V=A.getAttribute("rel"),V==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(V!==L.rel||A.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||A.getAttribute("title")!==(L.title==null?null:L.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(V=A.getAttribute("src"),(V!==(L.src==null?null:L.src)||A.getAttribute("type")!==(L.type==null?null:L.type)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&V&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(h==="input"&&A.type==="hidden"){var V=L.name==null?null:""+L.name;if(L.type==="hidden"&&A.getAttribute("name")===V)return A}else return A;if(A=Vu(A.nextSibling),A===null)break}return null}function Wle(A,h,v){if(h==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!v||(A=Vu(A.nextSibling),A===null))return null;return A}function G4(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Xle(A,h){var v=A.ownerDocument;if(A.data!=="$?"||v.readyState==="complete")h();else{var w=function(){h(),v.removeEventListener("DOMContentLoaded",w)};v.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function Vu(A){for(;A!=null;A=A.nextSibling){var h=A.nodeType;if(h===1||h===3)break;if(h===8){if(h=A.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return A}var q4=null;function s8(A){A=A.previousSibling;for(var h=0;A;){if(A.nodeType===8){var v=A.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return A;h--}else v==="/$"&&h++}A=A.previousSibling}return null}function i8(A,h,v){switch(h=m2(v),A){case"html":if(A=h.documentElement,!A)throw Error(n(452));return A;case"head":if(A=h.head,!A)throw Error(n(453));return A;case"body":if(A=h.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function l1(A){for(var h=A.attributes;h.length;)A.removeAttributeNode(h[0]);Ee(A)}var Kc=new Map,o8=new Set;function p2(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var ZA=Z.d;Z.d={f:Yle,r:Jle,D:Zle,C:ece,L:tce,m:rce,X:ace,S:nce,M:sce};function Yle(){var A=ZA.f(),h=o2();return A||h}function Jle(A){var h=ke(A);h!==null&&h.tag===5&&h.type==="form"?dm(h):ZA.r(A)}var lg=typeof document>"u"?null:document;function l8(A,h,v){var w=lg;if(w&&typeof h=="string"&&h){var L=En(h);L='link[rel="'+A+'"][href="'+L+'"]',typeof v=="string"&&(L+='[crossorigin="'+v+'"]'),o8.has(L)||(o8.add(L),A={rel:A,crossOrigin:v,href:h},w.querySelector(L)===null&&(h=w.createElement("link"),qi(h,"link",A),$e(h),w.head.appendChild(h)))}}function Zle(A){ZA.D(A),l8("dns-prefetch",A,null)}function ece(A,h){ZA.C(A,h),l8("preconnect",A,h)}function tce(A,h,v){ZA.L(A,h,v);var w=lg;if(w&&A&&h){var L='link[rel="preload"][as="'+En(h)+'"]';h==="image"&&v&&v.imageSrcSet?(L+='[imagesrcset="'+En(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(L+='[imagesizes="'+En(v.imageSizes)+'"]')):L+='[href="'+En(A)+'"]';var V=L;switch(h){case"style":V=cg(A);break;case"script":V=ug(A)}Kc.has(V)||(A=d({rel:"preload",href:h==="image"&&v&&v.imageSrcSet?void 0:A,as:h},v),Kc.set(V,A),w.querySelector(L)!==null||h==="style"&&w.querySelector(c1(V))||h==="script"&&w.querySelector(u1(V))||(h=w.createElement("link"),qi(h,"link",A),$e(h),w.head.appendChild(h)))}}function rce(A,h){ZA.m(A,h);var v=lg;if(v&&A){var w=h&&typeof h.as=="string"?h.as:"script",L='link[rel="modulepreload"][as="'+En(w)+'"][href="'+En(A)+'"]',V=L;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=ug(A)}if(!Kc.has(V)&&(A=d({rel:"modulepreload",href:A},h),Kc.set(V,A),v.querySelector(L)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(u1(V)))return}w=v.createElement("link"),qi(w,"link",A),$e(w),v.head.appendChild(w)}}}function nce(A,h,v){ZA.S(A,h,v);var w=lg;if(w&&A){var L=st(w).hoistableStyles,V=cg(A);h=h||"default";var le=L.get(V);if(!le){var be={loading:0,preload:null};if(le=w.querySelector(c1(V)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":h},v),(v=Kc.get(V))&&W4(A,v);var De=le=w.createElement("link");$e(De),qi(De,"link",A),De._p=new Promise(function(nt,mt){De.onload=nt,De.onerror=mt}),De.addEventListener("load",function(){be.loading|=1}),De.addEventListener("error",function(){be.loading|=2}),be.loading|=4,g2(le,h,w)}le={type:"stylesheet",instance:le,count:1,state:be},L.set(V,le)}}}function ace(A,h){ZA.X(A,h);var v=lg;if(v&&A){var w=st(v).hoistableScripts,L=ug(A),V=w.get(L);V||(V=v.querySelector(u1(L)),V||(A=d({src:A,async:!0},h),(h=Kc.get(L))&&X4(A,h),V=v.createElement("script"),$e(V),qi(V,"link",A),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},w.set(L,V))}}function sce(A,h){ZA.M(A,h);var v=lg;if(v&&A){var w=st(v).hoistableScripts,L=ug(A),V=w.get(L);V||(V=v.querySelector(u1(L)),V||(A=d({src:A,async:!0,type:"module"},h),(h=Kc.get(L))&&X4(A,h),V=v.createElement("script"),$e(V),qi(V,"link",A),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},w.set(L,V))}}function c8(A,h,v,w){var L=(L=ie.current)?p2(L):null;if(!L)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(h=cg(v.href),v=st(L).hoistableStyles,w=v.get(h),w||(w={type:"style",instance:null,count:0,state:null},v.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){A=cg(v.href);var V=st(L).hoistableStyles,le=V.get(A);if(le||(L=L.ownerDocument||L,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(A,le),(V=L.querySelector(c1(A)))&&!V._p&&(le.instance=V,le.state.loading=5),Kc.has(A)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Kc.set(A,v),V||ice(L,A,v,le.state))),h&&w===null)throw Error(n(528,""));return le}if(h&&w!==null)throw Error(n(529,""));return null;case"script":return h=v.async,v=v.src,typeof v=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=ug(v),v=st(L).hoistableScripts,w=v.get(h),w||(w={type:"script",instance:null,count:0,state:null},v.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function cg(A){return'href="'+En(A)+'"'}function c1(A){return'link[rel="stylesheet"]['+A+"]"}function u8(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function ice(A,h,v,w){A.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=A.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),qi(h,"link",v),$e(h),A.head.appendChild(h))}function ug(A){return'[src="'+En(A)+'"]'}function u1(A){return"script[async]"+A}function d8(A,h,v){if(h.count++,h.instance===null)switch(h.type){case"style":var w=A.querySelector('style[data-href~="'+En(v.href)+'"]');if(w)return h.instance=w,$e(w),w;var L=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),$e(w),qi(w,"style",L),g2(w,v.precedence,A),h.instance=w;case"stylesheet":L=cg(v.href);var V=A.querySelector(c1(L));if(V)return h.state.loading|=4,h.instance=V,$e(V),V;w=u8(v),(L=Kc.get(L))&&W4(w,L),V=(A.ownerDocument||A).createElement("link"),$e(V);var le=V;return le._p=new Promise(function(be,De){le.onload=be,le.onerror=De}),qi(V,"link",w),h.state.loading|=4,g2(V,v.precedence,A),h.instance=V;case"script":return V=ug(v.src),(L=A.querySelector(u1(V)))?(h.instance=L,$e(L),L):(w=v,(L=Kc.get(V))&&(w=d({},v),X4(w,L)),A=A.ownerDocument||A,L=A.createElement("script"),$e(L),qi(L,"link",w),A.head.appendChild(L),h.instance=L);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,g2(w,v.precedence,A));return h.instance}function g2(A,h,v){for(var w=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=w.length?w[w.length-1]:null,V=L,le=0;le<w.length;le++){var be=w[le];if(be.dataset.precedence===h)V=be;else if(V!==L)break}V?V.parentNode.insertBefore(A,V.nextSibling):(h=v.nodeType===9?v.head:v,h.insertBefore(A,h.firstChild))}function W4(A,h){A.crossOrigin==null&&(A.crossOrigin=h.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=h.referrerPolicy),A.title==null&&(A.title=h.title)}function X4(A,h){A.crossOrigin==null&&(A.crossOrigin=h.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=h.referrerPolicy),A.integrity==null&&(A.integrity=h.integrity)}var v2=null;function A8(A,h,v){if(v2===null){var w=new Map,L=v2=new Map;L.set(v,w)}else L=v2,w=L.get(v),w||(w=new Map,L.set(v,w));if(w.has(A))return w;for(w.set(A,null),v=v.getElementsByTagName(A),L=0;L<v.length;L++){var V=v[L];if(!(V[we]||V[wn]||A==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var le=V.getAttribute(h)||"";le=A+le;var be=w.get(le);be?be.push(V):w.set(le,[V])}}return w}function f8(A,h,v){A=A.ownerDocument||A,A.head.insertBefore(v,h==="title"?A.querySelector("head > title"):null)}function oce(A,h,v){if(v===1||h.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return A=h.disabled,typeof h.precedence=="string"&&A==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function h8(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var d1=null;function lce(){}function cce(A,h,v){if(d1===null)throw Error(n(475));var w=d1;if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var L=cg(v.href),V=A.querySelector(c1(L));if(V){A=V._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=x2.bind(w),A.then(w,w)),h.state.loading|=4,h.instance=V,$e(V);return}V=A.ownerDocument||A,v=u8(v),(L=Kc.get(L))&&W4(v,L),V=V.createElement("link"),$e(V);var le=V;le._p=new Promise(function(be,De){le.onload=be,le.onerror=De}),qi(V,"link",v),h.instance=V}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(h,A),(A=h.state.preload)&&(h.state.loading&3)===0&&(w.count++,h=x2.bind(w),A.addEventListener("load",h),A.addEventListener("error",h))}}function uce(){if(d1===null)throw Error(n(475));var A=d1;return A.stylesheets&&A.count===0&&Y4(A,A.stylesheets),0<A.count?function(h){var v=setTimeout(function(){if(A.stylesheets&&Y4(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=h,function(){A.unsuspend=null,clearTimeout(v)}}:null}function x2(){if(this.count--,this.count===0){if(this.stylesheets)Y4(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var b2=null;function Y4(A,h){A.stylesheets=null,A.unsuspend!==null&&(A.count++,b2=new Map,h.forEach(dce,A),b2=null,x2.call(A))}function dce(A,h){if(!(h.state.loading&4)){var v=b2.get(A);if(v)var w=v.get(null);else{v=new Map,b2.set(A,v);for(var L=A.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<L.length;V++){var le=L[V];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(v.set(le.dataset.precedence,le),w=le)}w&&v.set(null,w)}L=h.instance,le=L.getAttribute("data-precedence"),V=v.get(le)||w,V===w&&v.set(null,L),v.set(le,L),this.count++,w=x2.bind(this),L.addEventListener("load",w),L.addEventListener("error",w),V?V.parentNode.insertBefore(L,V.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(L,A.firstChild)),h.state.loading|=4}}var A1={$$typeof:S,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Ace(A,h,v,w,L,V,le,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.hiddenUpdates=kn(null),this.identifierPrefix=w,this.onUncaughtError=L,this.onCaughtError=V,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function m8(A,h,v,w,L,V,le,be,De,nt,mt,_t){return A=new Ace(A,h,v,le,be,De,nt,_t),h=1,V===!0&&(h|=24),V=_i(3,null,null,h),A.current=V,V.stateNode=A,h=Dx(),h.refCount++,A.pooledCache=h,h.refCount++,V.memoizedState={element:w,isDehydrated:v,cache:h},Me(V),A}function p8(A){return A?(A=zs,A):zs}function g8(A,h,v,w,L,V){L=p8(L),w.context===null?w.context=L:w.pendingContext=L,w=ht(h),w.payload={element:v},V=V===void 0?null:V,V!==null&&(w.callback=V),v=yt(A,w,h),v!==null&&(ec(v,A,h),pt(v,A,h))}function v8(A,h){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var v=A.retryLane;A.retryLane=v!==0&&v<h?v:h}}function J4(A,h){v8(A,h),(A=A.alternate)&&v8(A,h)}function x8(A){if(A.tag===13){var h=Tu(A,67108864);h!==null&&ec(h,A,67108864),J4(A,67108864)}}var y2=!0;function fce(A,h,v,w){var L=W.T;W.T=null;var V=Z.p;try{Z.p=2,Z4(A,h,v,w)}finally{Z.p=V,W.T=L}}function hce(A,h,v,w){var L=W.T;W.T=null;var V=Z.p;try{Z.p=8,Z4(A,h,v,w)}finally{Z.p=V,W.T=L}}function Z4(A,h,v,w){if(y2){var L=eB(w);if(L===null)M4(A,h,w,w2,v),y8(A,w);else if(pce(L,A,h,v,w))w.stopPropagation();else if(y8(A,w),h&4&&-1<mce.indexOf(A)){for(;L!==null;){var V=ke(L);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var le=Gt(V.pendingLanes);if(le!==0){var be=V;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var De=1<<31-Pe(le);be.entanglements[1]|=De,le&=~De}Qd(V),(aa&6)===0&&(s2=Ie()+500,s1(0))}}break;case 13:be=Tu(V,2),be!==null&&ec(be,V,2),o2(),J4(V,2)}if(V=eB(w),V===null&&M4(A,h,w,w2,v),V===L)break;L=V}L!==null&&w.stopPropagation()}else M4(A,h,w,null,v)}}function eB(A){return A=ra(A),tB(A)}var w2=null;function tB(A){if(w2=null,A=_e(A),A!==null){var h=s(A);if(h===null)A=null;else{var v=h.tag;if(v===13){if(A=i(h),A!==null)return A;A=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;A=null}else h!==A&&(A=null)}}return w2=A,null}function b8(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case dt:return 8;case Et:case Tt:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var rB=!1,_h=null,Sh=null,Nh=null,f1=new Map,h1=new Map,Bh=[],mce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y8(A,h){switch(A){case"focusin":case"focusout":_h=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":Nh=null;break;case"pointerover":case"pointerout":f1.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":h1.delete(h.pointerId)}}function m1(A,h,v,w,L,V){return A===null||A.nativeEvent!==V?(A={blockedOn:h,domEventName:v,eventSystemFlags:w,nativeEvent:V,targetContainers:[L]},h!==null&&(h=ke(h),h!==null&&x8(h)),A):(A.eventSystemFlags|=w,h=A.targetContainers,L!==null&&h.indexOf(L)===-1&&h.push(L),A)}function pce(A,h,v,w,L){switch(h){case"focusin":return _h=m1(_h,A,h,v,w,L),!0;case"dragenter":return Sh=m1(Sh,A,h,v,w,L),!0;case"mouseover":return Nh=m1(Nh,A,h,v,w,L),!0;case"pointerover":var V=L.pointerId;return f1.set(V,m1(f1.get(V)||null,A,h,v,w,L)),!0;case"gotpointercapture":return V=L.pointerId,h1.set(V,m1(h1.get(V)||null,A,h,v,w,L)),!0}return!1}function w8(A){var h=_e(A.target);if(h!==null){var v=s(h);if(v!==null){if(h=v.tag,h===13){if(h=i(v),h!==null){A.blockedOn=h,si(A.priority,function(){if(v.tag===13){var w=Zl();w=Ms(w);var L=Tu(v,w);L!==null&&ec(L,v,w),J4(v,w)}});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){A.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}A.blockedOn=null}function E2(A){if(A.blockedOn!==null)return!1;for(var h=A.targetContainers;0<h.length;){var v=eB(A.nativeEvent);if(v===null){v=A.nativeEvent;var w=new v.constructor(v.type,v);cl=w,v.target.dispatchEvent(w),cl=null}else return h=ke(v),h!==null&&x8(h),A.blockedOn=v,!1;h.shift()}return!0}function E8(A,h,v){E2(A)&&v.delete(h)}function gce(){rB=!1,_h!==null&&E2(_h)&&(_h=null),Sh!==null&&E2(Sh)&&(Sh=null),Nh!==null&&E2(Nh)&&(Nh=null),f1.forEach(E8),h1.forEach(E8)}function C2(A,h){A.blockedOn===h&&(A.blockedOn=null,rB||(rB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gce)))}var _2=null;function C8(A){_2!==A&&(_2=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_2===A&&(_2=null);for(var h=0;h<A.length;h+=3){var v=A[h],w=A[h+1],L=A[h+2];if(typeof w!="function"){if(tB(w||v)===null)continue;break}var V=ke(v);V!==null&&(A.splice(h,3),h-=3,Vc(V,{pending:!0,data:L,method:v.method,action:w},w,L))}}))}function p1(A){function h(De){return C2(De,A)}_h!==null&&C2(_h,A),Sh!==null&&C2(Sh,A),Nh!==null&&C2(Nh,A),f1.forEach(h),h1.forEach(h);for(var v=0;v<Bh.length;v++){var w=Bh[v];w.blockedOn===A&&(w.blockedOn=null)}for(;0<Bh.length&&(v=Bh[0],v.blockedOn===null);)w8(v),v.blockedOn===null&&Bh.shift();if(v=(A.ownerDocument||A).$$reactFormReplay,v!=null)for(w=0;w<v.length;w+=3){var L=v[w],V=v[w+1],le=L[fn]||null;if(typeof V=="function")le||C8(v);else if(le){var be=null;if(V&&V.hasAttribute("formAction")){if(L=V,le=V[fn]||null)be=le.formAction;else if(tB(L)!==null)continue}else be=le.action;typeof be=="function"?v[w+1]=be:(v.splice(w,3),w-=3),C8(v)}}}function nB(A){this._internalRoot=A}S2.prototype.render=nB.prototype.render=function(A){var h=this._internalRoot;if(h===null)throw Error(n(409));var v=h.current,w=Zl();g8(v,w,A,h,null,null)},S2.prototype.unmount=nB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var h=A.containerInfo;g8(A.current,2,null,A,null,null),o2(),h[Vn]=null}};function S2(A){this._internalRoot=A}S2.prototype.unstable_scheduleHydration=function(A){if(A){var h=Va();A={blockedOn:null,target:A,priority:h};for(var v=0;v<Bh.length&&h!==0&&h<Bh[v].priority;v++);Bh.splice(v,0,A),v===0&&w8(A)}};var _8=t.version;if(_8!=="19.1.1")throw Error(n(527,_8,"19.1.1"));Z.findDOMNode=function(A){var h=A._reactInternals;if(h===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(h),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var vce={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var N2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!N2.isDisabled&&N2.supportsFiber)try{Pt=N2.inject(vce),Mt=N2}catch{}}return v1.createRoot=function(A,h){if(!a(A))throw Error(n(299));var v=!1,w="",L=QR,V=HR,le=VR,be=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(L=h.onUncaughtError),h.onCaughtError!==void 0&&(V=h.onCaughtError),h.onRecoverableError!==void 0&&(le=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(be=h.unstable_transitionCallbacks)),h=m8(A,1,!1,null,null,v,w,L,V,le,be,null),A[Vn]=h.current,U4(A),new nB(h)},v1.hydrateRoot=function(A,h,v){if(!a(A))throw Error(n(299));var w=!1,L="",V=QR,le=HR,be=VR,De=null,nt=null;return v!=null&&(v.unstable_strictMode===!0&&(w=!0),v.identifierPrefix!==void 0&&(L=v.identifierPrefix),v.onUncaughtError!==void 0&&(V=v.onUncaughtError),v.onCaughtError!==void 0&&(le=v.onCaughtError),v.onRecoverableError!==void 0&&(be=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(De=v.unstable_transitionCallbacks),v.formState!==void 0&&(nt=v.formState)),h=m8(A,1,!0,h,v??null,w,L,V,le,be,De,nt),h.context=p8(null),v=h.current,w=Zl(),w=Ms(w),L=ht(w),L.callback=null,yt(v,L,w),v=w,h.current.lanes=v,ea(h,v),Qd(h),A[Vn]=h.current,U4(A),new S2(h)},v1.version="19.1.1",v1}var D8;function jce(){if(D8)return oB.exports;D8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oB.exports=Ice(),oB.exports}var Fce=jce();const Oce=il(Fce),Dce=()=>{};var P8={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Pce=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},WG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,l=a+2<e.length,u=l?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;l||(p=64,i||(m=64)),n.push(r[d],r[f],r[m],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qG(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Pce(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Rce;const m=s<<2|o>>4;if(n.push(m),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const x=u<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Rce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lce=function(e){const t=qG(e);return WG.encodeByteArray(t,!0)},$C=function(e){return Lce(e).replace(/\./g,"")},XG=function(e){try{return WG.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mce=()=>Uce().__FIREBASE_DEFAULTS__,Qce=()=>{if(typeof process>"u"||typeof P8>"u")return;const e=P8.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Hce=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&XG(e[1]);return t&&JSON.parse(t)},$S=()=>{try{return Dce()||Mce()||Qce()||Hce()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},YG=e=>{var t,r;return(r=(t=$S())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},LF=e=>{const t=YG(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},JG=()=>{var e;return(e=$S())==null?void 0:e.config},ZG=e=>{var t;return(t=$S())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KS(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[$C(JSON.stringify(r)),$C(JSON.stringify(i)),""].join(".")}const Ab={};function zce(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ab))Ab[t]?e.emulator.push(t):e.prod.push(t);return e}function $ce(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let R8=!1;function GS(e,t){if(typeof window>"u"||typeof document>"u"||!Uf(window.location.host)||Ab[e]===t||Ab[e]||R8)return;Ab[e]=t;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",s=zce().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{R8=!0,i()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=$ce(n),p=r("text"),x=document.getElementById(p)||document.createElement("span"),g=r("learnmore"),b=document.getElementById(g)||document.createElement("a"),y=r("preprendIcon"),_=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;o(S),d(b,g);const B=u();l(_,y),S.append(_,x,b,B),document.body.appendChild(S)}s?(x.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mo())}function Gce(){var t;const e=(t=$S())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qce(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wce(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Xce(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yce(){const e=Mo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Jce(){return!Gce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zce(){try{return typeof indexedDB=="object"}catch{return!1}}function eue(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tue="FirebaseError";class id extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=tue,Object.setPrototypeOf(this,id.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dy.prototype.create)}}class Dy{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?rue(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new id(a,o,n)}}function rue(e,t){return e.replace(nue,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const nue=/\{\$([^}]+)}/g;function aue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function v0(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(L8(s)&&L8(i)){if(!v0(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function L8(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function V1(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function z1(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function sue(e,t){const r=new iue(e,t);return r.subscribe.bind(r)}class iue{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");oue(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=dB),a.error===void 0&&(a.error=dB),a.complete===void 0&&(a.complete=dB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oue(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function dB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(e){return e&&e._delegate?e._delegate:e}class wf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lue=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Vce;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uue(t))try{this.getOrInitializeService({instanceIdentifier:bm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=bm){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=bm){return this.instances.has(t)}getOptions(t=bm){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cue(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=bm){return this.component?this.component.multipleInstances?t:bm:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cue(e){return e===bm?void 0:e}function uue(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class due{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new lue(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(gn||(gn={}));const Aue={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},fue=gn.INFO,hue={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},mue=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=hue[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let UF=class{constructor(t){this.name=t,this._logLevel=fue,this._logHandler=mue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Aue[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...t),this._logHandler(this,gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...t),this._logHandler(this,gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...t),this._logHandler(this,gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...t),this._logHandler(this,gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...t),this._logHandler(this,gn.ERROR,...t)}};const pue=(e,t)=>t.some(r=>e instanceof r);let U8,M8;function gue(){return U8||(U8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vue(){return M8||(M8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tq=new WeakMap,Q3=new WeakMap,rq=new WeakMap,AB=new WeakMap,MF=new WeakMap;function xue(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(a0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&tq.set(r,e)}).catch(()=>{}),MF.set(t,e),t}function bue(e){if(Q3.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Q3.set(e,t)}let H3={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Q3.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rq.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return a0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function yue(e){H3=e(H3)}function wue(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(fB(this),t,...r);return rq.set(n,t.sort?t.sort():[t]),a0(n)}:vue().includes(e)?function(...t){return e.apply(fB(this),t),a0(tq.get(this))}:function(...t){return a0(e.apply(fB(this),t))}}function Eue(e){return typeof e=="function"?wue(e):(e instanceof IDBTransaction&&bue(e),pue(e,gue())?new Proxy(e,H3):e)}function a0(e){if(e instanceof IDBRequest)return xue(e);if(AB.has(e))return AB.get(e);const t=Eue(e);return t!==e&&(AB.set(e,t),MF.set(t,e)),t}const fB=e=>MF.get(e);function Cue(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=a0(i);return n&&i.addEventListener("upgradeneeded",l=>{n(a0(i.result),l.oldVersion,l.newVersion,a0(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const _ue=["get","getKey","getAll","getAllKeys","count"],Sue=["put","add","delete","clear"],hB=new Map;function Q8(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(hB.get(t))return hB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Sue.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||_ue.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return hB.set(t,s),s}yue(e=>({...e,get:(t,r,n)=>Q8(t,r)||e.get(t,r,n),has:(t,r)=>!!Q8(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Bue(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Bue(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const V3="@firebase/app",H8="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new UF("@firebase/app"),kue="@firebase/app-compat",Tue="@firebase/analytics-compat",Iue="@firebase/analytics",jue="@firebase/app-check-compat",Fue="@firebase/app-check",Oue="@firebase/auth",Due="@firebase/auth-compat",Pue="@firebase/database",Rue="@firebase/data-connect",Lue="@firebase/database-compat",Uue="@firebase/functions",Mue="@firebase/functions-compat",Que="@firebase/installations",Hue="@firebase/installations-compat",Vue="@firebase/messaging",zue="@firebase/messaging-compat",$ue="@firebase/performance",Kue="@firebase/performance-compat",Gue="@firebase/remote-config",que="@firebase/remote-config-compat",Wue="@firebase/storage",Xue="@firebase/storage-compat",Yue="@firebase/firestore",Jue="@firebase/ai",Zue="@firebase/firestore-compat",ede="firebase",tde="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="[DEFAULT]",rde={[V3]:"fire-core",[kue]:"fire-core-compat",[Iue]:"fire-analytics",[Tue]:"fire-analytics-compat",[Fue]:"fire-app-check",[jue]:"fire-app-check-compat",[Oue]:"fire-auth",[Due]:"fire-auth-compat",[Pue]:"fire-rtdb",[Rue]:"fire-data-connect",[Lue]:"fire-rtdb-compat",[Uue]:"fire-fn",[Mue]:"fire-fn-compat",[Que]:"fire-iid",[Hue]:"fire-iid-compat",[Vue]:"fire-fcm",[zue]:"fire-fcm-compat",[$ue]:"fire-perf",[Kue]:"fire-perf-compat",[Gue]:"fire-rc",[que]:"fire-rc-compat",[Wue]:"fire-gcs",[Xue]:"fire-gcs-compat",[Yue]:"fire-fst",[Zue]:"fire-fst-compat",[Jue]:"fire-vertex","fire-js":"fire-js",[ede]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new Map,nde=new Map,$3=new Map;function V8(e,t){try{e.container.addComponent(t)}catch(r){Ef.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function x0(e){const t=e.name;if($3.has(t))return Ef.debug(`There were multiple attempts to register component ${t}.`),!1;$3.set(t,e);for(const r of Mb.values())V8(r,e);for(const r of nde.values())V8(r,e);return!0}function Ry(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function lc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ade={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},s0=new Dy("app","Firebase",ade);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw s0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=tde;function QF(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:z3,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw s0.create("bad-app-name",{appName:String(a)});if(r||(r=JG()),!r)throw s0.create("no-options");const s=Mb.get(a);if(s){if(v0(r,s.options)&&v0(n,s.config))return s;throw s0.create("duplicate-app",{appName:a})}const i=new due(a);for(const l of $3.values())i.addComponent(l);const o=new sde(r,n,i);return Mb.set(a,o),o}function qS(e=z3){const t=Mb.get(e);if(!t&&e===z3&&JG())return QF();if(!t)throw s0.create("no-app",{appName:e});return t}function z8(){return Array.from(Mb.values())}function fu(e,t,r){let n=rde[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ef.warn(i.join(" "));return}x0(new wf(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ide="firebase-heartbeat-database",ode=1,Qb="firebase-heartbeat-store";let mB=null;function nq(){return mB||(mB=Cue(ide,ode,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Qb)}catch(r){console.warn(r)}}}}).catch(e=>{throw s0.create("idb-open",{originalErrorMessage:e.message})})),mB}async function lde(e){try{const r=(await nq()).transaction(Qb),n=await r.objectStore(Qb).get(aq(e));return await r.done,n}catch(t){if(t instanceof id)Ef.warn(t.message);else{const r=s0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ef.warn(r.message)}}}async function $8(e,t){try{const n=(await nq()).transaction(Qb,"readwrite");await n.objectStore(Qb).put(t,aq(e)),await n.done}catch(r){if(r instanceof id)Ef.warn(r.message);else{const n=s0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ef.warn(n.message)}}}function aq(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cde=1024,ude=30;class dde{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fde(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=K8();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>ude){const i=hde(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ef.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=K8(),{heartbeatsToSend:n,unsentEntries:a}=Ade(this._heartbeatsCache.heartbeats),s=$C(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Ef.warn(r),""}}}function K8(){return new Date().toISOString().substring(0,10)}function Ade(e,t=cde){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),G8(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),G8(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class fde{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zce()?eue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await lde(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return $8(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return $8(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function G8(e){return $C(JSON.stringify({version:2,heartbeats:e})).length}function hde(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mde(e){x0(new wf("platform-logger",t=>new Nue(t),"PRIVATE")),x0(new wf("heartbeat",t=>new dde(t),"PRIVATE")),fu(V3,H8,e),fu(V3,H8,"esm2020"),fu("fire-js","")}mde("");function sq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pde=sq,iq=new Dy("auth","Firebase",sq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new UF("@firebase/auth");function gde(e,...t){KC.logLevel<=gn.WARN&&KC.warn(`Auth (${yp}): ${e}`,...t)}function nC(e,...t){KC.logLevel<=gn.ERROR&&KC.error(`Auth (${yp}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(e,...t){throw HF(e,...t)}function iA(e,...t){return HF(e,...t)}function oq(e,t,r){const n={...pde(),[t]:r};return new Dy("auth","Firebase",n).create(t,{appName:e.name})}function i0(e){return oq(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HF(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return iq.create(e,...t)}function Or(e,t,...r){if(!e)throw HF(t,...r)}function of(e){const t="INTERNAL ASSERTION FAILED: "+e;throw nC(t),new Error(t)}function Cf(e,t){e||of(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function vde(){return q8()==="http:"||q8()==="https:"}function q8(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xde(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vde()||Wce()||"connection"in navigator)?navigator.onLine:!0}function bde(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(t,r){this.shortDelay=t,this.longDelay=r,Cf(r>t,"Short delay should be less than long delay!"),this.isMobile=Kce()||Xce()}get(){return xde()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(e,t){Cf(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;of("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;of("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;of("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wde=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ede=new Ly(3e4,6e4);function P0(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Mf(e,t,r,n,a={}){return cq(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=Py({key:e.config.apiKey,...i}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...s};return qce()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Uf(e.emulatorConfig.host)&&(u.credentials="include"),lq.fetch()(await uq(e,e.config.apiHost,r,o),u)})}async function cq(e,t,r){e._canInitEmulator=!1;const n={...yde,...t};try{const a=new _de(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw B2(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw B2(e,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw B2(e,"email-already-in-use",i);if(l==="USER_DISABLED")throw B2(e,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw oq(e,d,u);ad(e,d)}}catch(a){if(a instanceof id)throw a;ad(e,"network-request-failed",{message:String(a)})}}async function WS(e,t,r,n,a={}){const s=await Mf(e,t,r,n,a);return"mfaPendingCredential"in s&&ad(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function uq(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?VF(e.config,a):`${e.config.apiScheme}://${a}`;return wde.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function Cde(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _de{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(iA(this.auth,"network-request-failed")),Ede.get())})}}function B2(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=iA(e,t,n);return a.customData._tokenResponse=r,a}function W8(e){return e!==void 0&&e.enterprise!==void 0}class Sde{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Cde(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Nde(e,t){return Mf(e,"GET","/v2/recaptchaConfig",P0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bde(e,t){return Mf(e,"POST","/v1/accounts:delete",t)}async function GC(e,t){return Mf(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function kde(e,t=!1){const r=ba(e),n=await r.getIdToken(t),a=zF(n);Or(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:fb(pB(a.auth_time)),issuedAtTime:fb(pB(a.iat)),expirationTime:fb(pB(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function pB(e){return Number(e)*1e3}function zF(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return nC("JWT malformed, contained fewer than 3 sections"),null;try{const a=XG(r);return a?JSON.parse(a):(nC("Failed to decode base64 JWT payload"),null)}catch(a){return nC("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function X8(e){const t=zF(e);return Or(t,"internal-error"),Or(typeof t.exp<"u","internal-error"),Or(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof id&&Tde(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Tde({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ide{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fb(this.lastLoginAt),this.creationTime=fb(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(e){var f;const t=e.auth,r=await e.getIdToken(),n=await Hb(e,GC(t,{idToken:r}));Or(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?dq(a.providerUserInfo):[],i=Fde(e.providerData,s),o=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new G3(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function jde(e){const t=ba(e);await qC(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Fde(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function dq(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ode(e,t){const r=await cq(e,{},async()=>{const n=Py({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await uq(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&Uf(e.emulatorConfig.host)&&(l.credentials="include"),lq.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Dde(e,t){return Mf(e,"POST","/v2/accounts:revokeToken",P0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Or(t.idToken,"internal-error"),Or(typeof t.idToken<"u","internal-error"),Or(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):X8(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Or(t.length!==0,"internal-error");const r=X8(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Or(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Ode(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new nv;return n&&(Or(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Or(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Or(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new nv,this.toJSON())}_performRefresh(){return of("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(e,t){Or(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ju{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Ide(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new G3(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await Hb(this,this.stsTokenManager.getToken(this.auth,t));return Or(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return kde(this,t)}reload(){return jde(this)}_assign(t){this!==t&&(Or(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Ju({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Or(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await qC(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lc(this.auth.app))return Promise.reject(i0(this.auth));const t=await this.getIdToken();return await Hb(this,Bde(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:p,providerData:x,stsTokenManager:g}=r;Or(f&&g,t,"internal-error");const b=nv.fromJSON(this.name,g);Or(typeof f=="string",t,"internal-error"),Th(n,t.name),Th(a,t.name),Or(typeof m=="boolean",t,"internal-error"),Or(typeof p=="boolean",t,"internal-error"),Th(s,t.name),Th(i,t.name),Th(o,t.name),Th(l,t.name),Th(u,t.name),Th(d,t.name);const y=new Ju({uid:f,auth:t,email:a,emailVerified:m,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return x&&Array.isArray(x)&&(y.providerData=x.map(_=>({..._}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new nv;a.updateFromServerResponse(r);const s=new Ju({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await qC(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Or(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?dq(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new nv;o.updateFromIdToken(n);const l=new Ju({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new G3(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=new Map;function lf(e){Cf(e instanceof Function,"Expected a class definition");let t=Y8.get(e);return t?(Cf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Y8.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Aq.type="NONE";const J8=Aq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(e,t,r){return`firebase:${e}:${t}:${r}`}class av{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=aC(this.userKey,a.apiKey,s),this.fullPersistenceKey=aC("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await GC(this.auth,{idToken:t}).catch(()=>{});return r?Ju._fromGetAccountInfoResponse(this.auth,r,t):null}return Ju._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new av(lf(J8),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||lf(J8);const i=aC(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const m=await GC(t,{idToken:d}).catch(()=>{});if(!m)break;f=await Ju._fromGetAccountInfoResponse(t,m,d)}else f=Ju._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new av(s,t,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new av(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pq(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fq(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vq(t))return"Blackberry";if(xq(t))return"Webos";if(hq(t))return"Safari";if((t.includes("chrome/")||mq(t))&&!t.includes("edge/"))return"Chrome";if(gq(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fq(e=Mo()){return/firefox\//i.test(e)}function hq(e=Mo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mq(e=Mo()){return/crios\//i.test(e)}function pq(e=Mo()){return/iemobile/i.test(e)}function gq(e=Mo()){return/android/i.test(e)}function vq(e=Mo()){return/blackberry/i.test(e)}function xq(e=Mo()){return/webos/i.test(e)}function $F(e=Mo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pde(e=Mo()){var t;return $F(e)&&!!((t=window.navigator)!=null&&t.standalone)}function Rde(){return Yce()&&document.documentMode===10}function bq(e=Mo()){return $F(e)||gq(e)||xq(e)||vq(e)||/windows phone/i.test(e)||pq(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(e,t=[]){let r;switch(e){case"Browser":r=Z8(Mo());break;case"Worker":r=`${Z8(Mo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${yp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lde{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const l=t(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ude(e,t={}){return Mf(e,"GET","/v2/passwordPolicy",P0(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mde=6;class Qde{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Mde,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eU(this),this.idTokenSubscription=new eU(this),this.beforeStateQueue=new Lde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=lf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await av.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await GC(this,{idToken:t}),n=await Ju._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(lc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Or(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await qC(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=bde()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(lc(this.app))return Promise.reject(i0(this));const r=t?ba(t):null;return r&&Or(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Or(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return lc(this.app)?Promise.reject(i0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return lc(this.app)?Promise.reject(i0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ude(this),r=new Qde(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Dy("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Dde(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&lf(t)||this._popupRedirectResolver;Or(r,this,"argument-error"),this.redirectPersistenceManager=await av.create(this,[lf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Or(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=t.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Or(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(lc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&gde(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function wp(e){return ba(e)}class eU{constructor(t){this.auth=t,this.observer=null,this.addObserver=sue(r=>this.observer=r)}get next(){return Or(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vde(e){XS=e}function wq(e){return XS.loadJS(e)}function zde(){return XS.recaptchaEnterpriseScript}function $de(){return XS.gapiScript}function Kde(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Gde{constructor(){this.enterprise=new qde}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class qde{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const Wde="recaptcha-enterprise",Eq="NO_RECAPTCHA";class Xde{constructor(t){this.type=Wde,this.auth=wp(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{Nde(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Sde(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;W8(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(Eq)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gde().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&W8(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=zde();l.length!==0&&(l+=o),wq(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function tU(e,t,r,n=!1,a=!1){const s=new Xde(e);let i;if(a)i=Eq;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function q3(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tU(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await tU(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yde(e,t){const r=Ry(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(v0(s,t??{}))return a;ad(a,"already-initialized")}return r.initialize({options:t})}function Jde(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(lf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Zde(e,t,r){const n=wp(e);Or(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=Cq(t),{host:i,port:o}=eAe(t),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Or(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Or(v0(u,n.config.emulator)&&v0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Uf(i)?(KS(`${s}//${i}${l}`),GS("Auth",!0)):tAe()}function Cq(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eAe(e){const t=Cq(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:rU(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:rU(i)}}}function rU(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function tAe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return of("not implemented")}_getIdTokenResponse(t){return of("not implemented")}_linkToIdToken(t,r){return of("not implemented")}_getReauthenticationResolver(t){return of("not implemented")}}async function rAe(e,t){return Mf(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nAe(e,t){return WS(e,"POST","/v1/accounts:signInWithPassword",P0(e,t))}async function aAe(e,t){return Mf(e,"POST","/v1/accounts:sendOobCode",P0(e,t))}async function sAe(e,t){return aAe(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iAe(e,t){return WS(e,"POST","/v1/accounts:signInWithEmailLink",P0(e,t))}async function oAe(e,t){return WS(e,"POST","/v1/accounts:signInWithEmailLink",P0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends KF{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new Vb(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new Vb(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q3(t,r,"signInWithPassword",nAe);case"emailLink":return iAe(t,{email:this._email,oobCode:this._password});default:ad(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q3(t,n,"signUpPassword",rAe);case"emailLink":return oAe(t,{idToken:r,email:this._email,oobCode:this._password});default:ad(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sv(e,t){return WS(e,"POST","/v1/accounts:signInWithIdp",P0(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lAe="http://localhost";class ap extends KF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new ap(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):ad("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new ap(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return sv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,sv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,sv(t,r)}buildRequest(){const t={requestUri:lAe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Py(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cAe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uAe(e){const t=V1(z1(e)).link,r=t?V1(z1(t)).deep_link_id:null,n=V1(z1(e)).deep_link_id;return(n?V1(z1(n)).link:null)||n||r||t||e}class GF{constructor(t){const r=V1(z1(t)),n=r.apiKey??null,a=r.oobCode??null,s=cAe(r.mode??null);Or(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=uAe(t);try{return new GF(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.providerId=rx.PROVIDER_ID}static credential(t,r){return Vb._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=GF.parseLink(r);return Or(n,"argument-error"),Vb._fromEmailAndCode(t,n.code,n.tenantId)}}rx.PROVIDER_ID="password";rx.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends _q{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Uy{constructor(){super("facebook.com")}static credential(t){return ap._fromParams({providerId:zh.PROVIDER_ID,signInMethod:zh.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zh.credentialFromTaggedObject(t)}static credentialFromError(t){return zh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zh.credential(t.oauthAccessToken)}catch{return null}}}zh.FACEBOOK_SIGN_IN_METHOD="facebook.com";zh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Uy{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ap._fromParams({providerId:$h.PROVIDER_ID,signInMethod:$h.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return $h.credentialFromTaggedObject(t)}static credentialFromError(t){return $h.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return $h.credential(r,n)}catch{return null}}}$h.GOOGLE_SIGN_IN_METHOD="google.com";$h.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends Uy{constructor(){super("github.com")}static credential(t){return ap._fromParams({providerId:Kh.PROVIDER_ID,signInMethod:Kh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Kh.credentialFromTaggedObject(t)}static credentialFromError(t){return Kh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Kh.credential(t.oauthAccessToken)}catch{return null}}}Kh.GITHUB_SIGN_IN_METHOD="github.com";Kh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends Uy{constructor(){super("twitter.com")}static credential(t,r){return ap._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Gh.credentialFromTaggedObject(t)}static credentialFromError(t){return Gh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Gh.credential(r,n)}catch{return null}}}Gh.TWITTER_SIGN_IN_METHOD="twitter.com";Gh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Ju._fromIdTokenResponse(t,n,a),i=nU(n);return new Cv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=nU(n);return new Cv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function nU(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC extends id{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,WC.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new WC(t,r,n,a)}}function Sq(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?WC._fromErrorAndOperation(e,s,t,n):s})}async function dAe(e,t,r=!1){const n=await Hb(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Cv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AAe(e,t,r=!1){const{auth:n}=e;if(lc(n.app))return Promise.reject(i0(n));const a="reauthenticate";try{const s=await Hb(e,Sq(n,a,t,e),r);Or(s.idToken,n,"internal-error");const i=zF(s.idToken);Or(i,n,"internal-error");const{sub:o}=i;return Or(e.uid===o,n,"user-mismatch"),Cv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ad(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nq(e,t,r=!1){if(lc(e.app))return Promise.reject(i0(e));const n="signIn",a=await Sq(e,n,t),s=await Cv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function fAe(e,t){return Nq(wp(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hAe(e){const t=wp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function mAe(e,t,r){const n=wp(e);await q3(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sAe)}function pAe(e,t,r){return lc(e.app)?Promise.reject(i0(e)):fAe(ba(e),rx.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&hAe(e),n})}function gAe(e,t,r,n){return ba(e).onIdTokenChanged(t,r,n)}function vAe(e,t,r){return ba(e).beforeAuthStateChanged(t,r)}function Bq(e,t,r,n){return ba(e).onAuthStateChanged(t,r,n)}function xAe(e){return ba(e).signOut()}const XC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(XC,"1"),this.storage.removeItem(XC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bAe=1e3,yAe=10;class Tq extends kq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bq(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Rde()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,yAe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},bAe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Tq.type="LOCAL";const wAe=Tq;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq extends kq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}Iq.type="SESSION";const jq=Iq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EAe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new YS(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await EAe(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}YS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CAe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=qF("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return window}function _Ae(e){oA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(){return typeof oA().WorkerGlobalScope<"u"&&typeof oA().importScripts=="function"}async function SAe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NAe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function BAe(){return Fq()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq="firebaseLocalStorageDb",kAe=1,YC="firebaseLocalStorage",Dq="fbase_key";class My{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function JS(e,t){return e.transaction([YC],t?"readwrite":"readonly").objectStore(YC)}function TAe(){const e=indexedDB.deleteDatabase(Oq);return new My(e).toPromise()}function W3(){const e=indexedDB.open(Oq,kAe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(YC,{keyPath:Dq})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(YC)?t(n):(n.close(),await TAe(),t(await W3()))})})}async function aU(e,t,r){const n=JS(e,!0).put({[Dq]:t,value:r});return new My(n).toPromise()}async function IAe(e,t){const r=JS(e,!1).get(t),n=await new My(r).toPromise();return n===void 0?null:n.value}function sU(e,t){const r=JS(e,!0).delete(t);return new My(r).toPromise()}const jAe=800,FAe=3;class Pq{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await W3(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>FAe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fq()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=YS._getInstance(BAe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await SAe(),!this.activeServiceWorker)return;this.sender=new CAe(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||NAe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await W3();return await aU(t,XC,"1"),await sU(t,XC),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>aU(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>IAe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>sU(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=JS(a,!1).getAll();return new My(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jAe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pq.type="LOCAL";const OAe=Pq;new Ly(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DAe(e,t){return t?lf(t):(Or(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF extends KF{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return sv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return sv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return sv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function PAe(e){return Nq(e.auth,new WF(e),e.bypassAuthState)}function RAe(e){const{auth:t,user:r}=e;return Or(r,t,"internal-error"),AAe(r,new WF(e),e.bypassAuthState)}async function LAe(e){const{auth:t,user:r}=e;return Or(r,t,"internal-error"),dAe(r,new WF(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PAe;case"linkViaPopup":case"linkViaRedirect":return LAe;case"reauthViaPopup":case"reauthViaRedirect":return RAe;default:ad(this.auth,"internal-error")}}resolve(t){Cf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Cf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UAe=new Ly(2e3,1e4);class zg extends Rq{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,zg.currentPopupAction&&zg.currentPopupAction.cancel(),zg.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Or(t,this.auth,"internal-error"),t}async onExecution(){Cf(this.filter.length===1,"Popup operations only handle one event");const t=qF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(iA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(iA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zg.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(iA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,UAe.get())};t()}}zg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAe="pendingRedirect",sC=new Map;class QAe extends Rq{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=sC.get(this.auth._key());if(!t){try{const n=await HAe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}sC.set(this.auth._key(),t)}return this.bypassAuthState||sC.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HAe(e,t){const r=$Ae(t),n=zAe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function VAe(e,t){sC.set(e._key(),t)}function zAe(e){return lf(e._redirectPersistence)}function $Ae(e){return aC(MAe,e.config.apiKey,e.name)}async function KAe(e,t,r=!1){if(lc(e.app))return Promise.reject(i0(e));const n=wp(e),a=DAe(n,t),i=await new QAe(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GAe=600*1e3;class qAe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WAe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!Lq(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(iA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=GAe&&this.cachedEventUids.clear(),this.cachedEventUids.has(iU(t))}saveEventToCache(t){this.cachedEventUids.add(iU(t)),this.lastProcessedEventTime=Date.now()}}function iU(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Lq({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function WAe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lq(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XAe(e,t={}){return Mf(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YAe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JAe=/^https?/;async function ZAe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await XAe(e);for(const r of t)try{if(efe(r))return}catch{}ad(e,"unauthorized-domain")}function efe(e){const t=K3(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!JAe.test(r))return!1;if(YAe.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tfe=new Ly(3e4,6e4);function oU(){const e=oA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function rfe(e){return new Promise((t,r)=>{var a,s,i;function n(){oU(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oU(),r(iA(e,"network-request-failed"))},timeout:tfe.get()})}if((s=(a=oA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=oA().gapi)!=null&&i.load)n();else{const o=Kde("iframefcb");return oA()[o]=()=>{gapi.load?n():r(iA(e,"network-request-failed"))},wq(`${$de()}?onload=${o}`).catch(l=>r(l))}}).catch(t=>{throw iC=null,t})}let iC=null;function nfe(e){return iC=iC||rfe(e),iC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const afe=new Ly(5e3,15e3),sfe="__/auth/iframe",ife="emulator/auth/iframe",ofe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lfe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cfe(e){const t=e.config;Or(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?VF(t,ife):`https://${e.config.authDomain}/${sfe}`,n={apiKey:t.apiKey,appName:e.name,v:yp},a=lfe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Py(n).slice(1)}`}async function ufe(e){const t=await nfe(e),r=oA().gapi;return Or(r,e,"internal-error"),t.open({where:document.body,url:cfe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ofe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=iA(e,"network-request-failed"),o=oA().setTimeout(()=>{s(i)},afe.get());function l(){oA().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Afe=500,ffe=600,hfe="_blank",mfe="http://localhost";class lU{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pfe(e,t,r,n=Afe,a=ffe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...dfe,width:n.toString(),height:a.toString(),top:s,left:i},u=Mo().toLowerCase();r&&(o=mq(u)?hfe:r),fq(u)&&(t=t||mfe,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,x])=>`${m}${p}=${x},`,"");if(Pde(u)&&o!=="_self")return gfe(t||"",o),new lU(null);const f=window.open(t||"",o,d);Or(f,e,"popup-blocked");try{f.focus()}catch{}return new lU(f)}function gfe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vfe="__/auth/handler",xfe="emulator/auth/handler",bfe=encodeURIComponent("fac");async function cU(e,t,r,n,a,s){Or(e.config.authDomain,e,"auth-domain-config-required"),Or(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:yp,eventId:a};if(t instanceof _q){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",aue(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof Uy){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await e._getAppCheckToken(),u=l?`#${bfe}=${encodeURIComponent(l)}`:"";return`${yfe(e)}?${Py(o).slice(1)}${u}`}function yfe({config:e}){return e.emulator?VF(e,xfe):`https://${e.authDomain}/${vfe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="webStorageSupport";class wfe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jq,this._completeRedirectFn=KAe,this._overrideRedirectResult=VAe}async _openPopup(t,r,n,a){var i;Cf((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await cU(t,r,n,K3(),a);return pfe(t,s,qF())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await cU(t,r,n,K3(),a);return _Ae(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Cf(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await ufe(t),n=new qAe(t);return r.register("authEvent",a=>(Or(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(gB,{type:gB},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[gB];s!==void 0&&r(!!s),ad(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=ZAe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return bq()||hq()||$F()}}const Efe=wfe;var uU="@firebase/auth",dU="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Or(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sfe(e){x0(new wf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Or(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yq(e)},u=new Hde(n,a,s,l);return Jde(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),x0(new wf("auth-internal",t=>{const r=wp(t.getProvider("auth").getImmediate());return(n=>new Cfe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),fu(uU,dU,_fe(e)),fu(uU,dU,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=300,Bfe=ZG("authIdTokenMaxAge")||Nfe;let AU=null;const kfe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Bfe)return;const a=r==null?void 0:r.token;AU!==a&&(AU=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Uq(e=qS()){const t=Ry(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Yde(e,{popupRedirectResolver:Efe,persistence:[OAe,wAe,jq]}),n=ZG("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=kfe(s.toString());vAe(r,i,()=>i(r.currentUser)),gAe(r,o=>i(o))}}const a=YG("auth");return a&&Zde(r,`http://${a}`),r}function Tfe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Vde({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=iA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Tfe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sfe("Browser");var Ife="firebase",jfe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fu(Ife,jfe,"app");var fU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o0,Mq;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,C){function N(){}N.prototype=C.prototype,E.D=C.prototype,E.prototype=new N,E.prototype.constructor=E,E.C=function(P,O,F){for(var M=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)M[Q-2]=arguments[Q];return C.prototype[O].apply(P,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,C,N){N||(N=0);var P=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)P[O]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(O=0;16>O;++O)P[O]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=E.g[0],N=E.g[1],O=E.g[2];var F=E.g[3],M=C+(F^N&(O^F))+P[0]+3614090360&4294967295;C=N+(M<<7&4294967295|M>>>25),M=F+(O^C&(N^O))+P[1]+3905402710&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(N^F&(C^N))+P[2]+606105819&4294967295,O=F+(M<<17&4294967295|M>>>15),M=N+(C^O&(F^C))+P[3]+3250441966&4294967295,N=O+(M<<22&4294967295|M>>>10),M=C+(F^N&(O^F))+P[4]+4118548399&4294967295,C=N+(M<<7&4294967295|M>>>25),M=F+(O^C&(N^O))+P[5]+1200080426&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(N^F&(C^N))+P[6]+2821735955&4294967295,O=F+(M<<17&4294967295|M>>>15),M=N+(C^O&(F^C))+P[7]+4249261313&4294967295,N=O+(M<<22&4294967295|M>>>10),M=C+(F^N&(O^F))+P[8]+1770035416&4294967295,C=N+(M<<7&4294967295|M>>>25),M=F+(O^C&(N^O))+P[9]+2336552879&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(N^F&(C^N))+P[10]+4294925233&4294967295,O=F+(M<<17&4294967295|M>>>15),M=N+(C^O&(F^C))+P[11]+2304563134&4294967295,N=O+(M<<22&4294967295|M>>>10),M=C+(F^N&(O^F))+P[12]+1804603682&4294967295,C=N+(M<<7&4294967295|M>>>25),M=F+(O^C&(N^O))+P[13]+4254626195&4294967295,F=C+(M<<12&4294967295|M>>>20),M=O+(N^F&(C^N))+P[14]+2792965006&4294967295,O=F+(M<<17&4294967295|M>>>15),M=N+(C^O&(F^C))+P[15]+1236535329&4294967295,N=O+(M<<22&4294967295|M>>>10),M=C+(O^F&(N^O))+P[1]+4129170786&4294967295,C=N+(M<<5&4294967295|M>>>27),M=F+(N^O&(C^N))+P[6]+3225465664&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^N&(F^C))+P[11]+643717713&4294967295,O=F+(M<<14&4294967295|M>>>18),M=N+(F^C&(O^F))+P[0]+3921069994&4294967295,N=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(N^O))+P[5]+3593408605&4294967295,C=N+(M<<5&4294967295|M>>>27),M=F+(N^O&(C^N))+P[10]+38016083&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^N&(F^C))+P[15]+3634488961&4294967295,O=F+(M<<14&4294967295|M>>>18),M=N+(F^C&(O^F))+P[4]+3889429448&4294967295,N=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(N^O))+P[9]+568446438&4294967295,C=N+(M<<5&4294967295|M>>>27),M=F+(N^O&(C^N))+P[14]+3275163606&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^N&(F^C))+P[3]+4107603335&4294967295,O=F+(M<<14&4294967295|M>>>18),M=N+(F^C&(O^F))+P[8]+1163531501&4294967295,N=O+(M<<20&4294967295|M>>>12),M=C+(O^F&(N^O))+P[13]+2850285829&4294967295,C=N+(M<<5&4294967295|M>>>27),M=F+(N^O&(C^N))+P[2]+4243563512&4294967295,F=C+(M<<9&4294967295|M>>>23),M=O+(C^N&(F^C))+P[7]+1735328473&4294967295,O=F+(M<<14&4294967295|M>>>18),M=N+(F^C&(O^F))+P[12]+2368359562&4294967295,N=O+(M<<20&4294967295|M>>>12),M=C+(N^O^F)+P[5]+4294588738&4294967295,C=N+(M<<4&4294967295|M>>>28),M=F+(C^N^O)+P[8]+2272392833&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^N)+P[11]+1839030562&4294967295,O=F+(M<<16&4294967295|M>>>16),M=N+(O^F^C)+P[14]+4259657740&4294967295,N=O+(M<<23&4294967295|M>>>9),M=C+(N^O^F)+P[1]+2763975236&4294967295,C=N+(M<<4&4294967295|M>>>28),M=F+(C^N^O)+P[4]+1272893353&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^N)+P[7]+4139469664&4294967295,O=F+(M<<16&4294967295|M>>>16),M=N+(O^F^C)+P[10]+3200236656&4294967295,N=O+(M<<23&4294967295|M>>>9),M=C+(N^O^F)+P[13]+681279174&4294967295,C=N+(M<<4&4294967295|M>>>28),M=F+(C^N^O)+P[0]+3936430074&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^N)+P[3]+3572445317&4294967295,O=F+(M<<16&4294967295|M>>>16),M=N+(O^F^C)+P[6]+76029189&4294967295,N=O+(M<<23&4294967295|M>>>9),M=C+(N^O^F)+P[9]+3654602809&4294967295,C=N+(M<<4&4294967295|M>>>28),M=F+(C^N^O)+P[12]+3873151461&4294967295,F=C+(M<<11&4294967295|M>>>21),M=O+(F^C^N)+P[15]+530742520&4294967295,O=F+(M<<16&4294967295|M>>>16),M=N+(O^F^C)+P[2]+3299628645&4294967295,N=O+(M<<23&4294967295|M>>>9),M=C+(O^(N|~F))+P[0]+4096336452&4294967295,C=N+(M<<6&4294967295|M>>>26),M=F+(N^(C|~O))+P[7]+1126891415&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~N))+P[14]+2878612391&4294967295,O=F+(M<<15&4294967295|M>>>17),M=N+(F^(O|~C))+P[5]+4237533241&4294967295,N=O+(M<<21&4294967295|M>>>11),M=C+(O^(N|~F))+P[12]+1700485571&4294967295,C=N+(M<<6&4294967295|M>>>26),M=F+(N^(C|~O))+P[3]+2399980690&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~N))+P[10]+4293915773&4294967295,O=F+(M<<15&4294967295|M>>>17),M=N+(F^(O|~C))+P[1]+2240044497&4294967295,N=O+(M<<21&4294967295|M>>>11),M=C+(O^(N|~F))+P[8]+1873313359&4294967295,C=N+(M<<6&4294967295|M>>>26),M=F+(N^(C|~O))+P[15]+4264355552&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~N))+P[6]+2734768916&4294967295,O=F+(M<<15&4294967295|M>>>17),M=N+(F^(O|~C))+P[13]+1309151649&4294967295,N=O+(M<<21&4294967295|M>>>11),M=C+(O^(N|~F))+P[4]+4149444226&4294967295,C=N+(M<<6&4294967295|M>>>26),M=F+(N^(C|~O))+P[11]+3174756917&4294967295,F=C+(M<<10&4294967295|M>>>22),M=O+(C^(F|~N))+P[2]+718787259&4294967295,O=F+(M<<15&4294967295|M>>>17),M=N+(F^(O|~C))+P[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,E.g[2]=E.g[2]+O&4294967295,E.g[3]=E.g[3]+F&4294967295}n.prototype.u=function(E,C){C===void 0&&(C=E.length);for(var N=C-this.blockSize,P=this.B,O=this.h,F=0;F<C;){if(O==0)for(;F<=N;)a(this,E,F),F+=this.blockSize;if(typeof E=="string"){for(;F<C;)if(P[O++]=E.charCodeAt(F++),O==this.blockSize){a(this,P),O=0;break}}else for(;F<C;)if(P[O++]=E[F++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=C},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;var N=8*this.o;for(C=E.length-8;C<E.length;++C)E[C]=N&255,N/=256;for(this.u(E),E=Array(16),C=N=0;4>C;++C)for(var P=0;32>P;P+=8)E[N++]=this.g[C]>>>P&255;return E};function s(E,C){var N=o;return Object.prototype.hasOwnProperty.call(N,E)?N[E]:N[E]=C(E)}function i(E,C){this.h=C;for(var N=[],P=!0,O=E.length-1;0<=O;O--){var F=E[O]|0;P&&F==C||(N[O]=F,P=!1)}this.g=N}var o={};function l(E){return-128<=E&&128>E?s(E,function(C){return new i([C|0],0>C?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(u(-E));for(var C=[],N=1,P=0;E>=N;P++)C[P]=E/N|0,N*=4294967296;return new i(C,0)}function d(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return b(d(E.substring(1),C));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(C,8)),P=f,O=0;O<E.length;O+=8){var F=Math.min(8,E.length-O),M=parseInt(E.substring(O,O+F),C);8>F?(F=u(Math.pow(C,F)),P=P.j(F).add(u(M))):(P=P.j(N),P=P.add(u(M)))}return P}var f=l(0),m=l(1),p=l(16777216);e=i.prototype,e.m=function(){if(g(this))return-b(this).m();for(var E=0,C=1,N=0;N<this.g.length;N++){var P=this.i(N);E+=(0<=P?P:4294967296+P)*C,C*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(g(this))return"-"+b(this).toString(E);for(var C=u(Math.pow(E,6)),N=this,P="";;){var O=B(N,C).g;N=y(N,O.j(C));var F=((0<N.g.length?N.g[0]:N.h)>>>0).toString(E);if(N=O,x(N))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function g(E){return E.h==-1}e.l=function(E){return E=y(this,E),g(E)?-1:x(E)?0:1};function b(E){for(var C=E.g.length,N=[],P=0;P<C;P++)N[P]=~E.g[P];return new i(N,~E.h).add(m)}e.abs=function(){return g(this)?b(this):this},e.add=function(E){for(var C=Math.max(this.g.length,E.g.length),N=[],P=0,O=0;O<=C;O++){var F=P+(this.i(O)&65535)+(E.i(O)&65535),M=(F>>>16)+(this.i(O)>>>16)+(E.i(O)>>>16);P=M>>>16,F&=65535,M&=65535,N[O]=M<<16|F}return new i(N,N[N.length-1]&-2147483648?-1:0)};function y(E,C){return E.add(b(C))}e.j=function(E){if(x(this)||x(E))return f;if(g(this))return g(E)?b(this).j(b(E)):b(b(this).j(E));if(g(E))return b(this.j(b(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var C=this.g.length+E.g.length,N=[],P=0;P<2*C;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var O=0;O<E.g.length;O++){var F=this.i(P)>>>16,M=this.i(P)&65535,Q=E.i(O)>>>16,J=E.i(O)&65535;N[2*P+2*O]+=M*J,_(N,2*P+2*O),N[2*P+2*O+1]+=F*J,_(N,2*P+2*O+1),N[2*P+2*O+1]+=M*Q,_(N,2*P+2*O+1),N[2*P+2*O+2]+=F*Q,_(N,2*P+2*O+2)}for(P=0;P<C;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=C;P<2*C;P++)N[P]=0;return new i(N,0)};function _(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function S(E,C){this.g=E,this.h=C}function B(E,C){if(x(C))throw Error("division by zero");if(x(E))return new S(f,f);if(g(E))return C=B(b(E),C),new S(b(C.g),b(C.h));if(g(C))return C=B(E,b(C)),new S(b(C.g),C.h);if(30<E.g.length){if(g(E)||g(C))throw Error("slowDivide_ only works with positive integers.");for(var N=m,P=C;0>=P.l(E);)N=I(N),P=I(P);var O=D(N,1),F=D(P,1);for(P=D(P,2),N=D(N,2);!x(P);){var M=F.add(P);0>=M.l(E)&&(O=O.add(N),F=M),P=D(P,1),N=D(N,1)}return C=y(E,O.j(C)),new S(O,C)}for(O=f;0<=E.l(C);){for(N=Math.max(1,Math.floor(E.m()/C.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=u(N),M=F.j(C);g(M)||0<M.l(E);)N-=P,F=u(N),M=F.j(C);x(F)&&(F=m),O=O.add(F),E=y(E,M)}return new S(O,E)}e.A=function(E){return B(this,E).h},e.and=function(E){for(var C=Math.max(this.g.length,E.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)&E.i(P);return new i(N,this.h&E.h)},e.or=function(E){for(var C=Math.max(this.g.length,E.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)|E.i(P);return new i(N,this.h|E.h)},e.xor=function(E){for(var C=Math.max(this.g.length,E.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)^E.i(P);return new i(N,this.h^E.h)};function I(E){for(var C=E.g.length+1,N=[],P=0;P<C;P++)N[P]=E.i(P)<<1|E.i(P-1)>>>31;return new i(N,E.h)}function D(E,C){var N=C>>5;C%=32;for(var P=E.g.length-N,O=[],F=0;F<P;F++)O[F]=0<C?E.i(F+N)>>>C|E.i(F+N+1)<<32-C:E.i(F+N);return new i(O,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Mq=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,o0=i}).apply(typeof fU<"u"?fU:typeof self<"u"?self:typeof window<"u"?window:{});var k2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qq,$1,Hq,oC,X3,Vq,zq,$q;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(j,ee,se){return j==Array.prototype||j==Object.prototype||(j[ee]=se.value),j};function r(j){j=[typeof globalThis=="object"&&globalThis,j,typeof window=="object"&&window,typeof self=="object"&&self,typeof k2=="object"&&k2];for(var ee=0;ee<j.length;++ee){var se=j[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(j,ee){if(ee)e:{var se=n;j=j.split(".");for(var xe=0;xe<j.length-1;xe++){var ze=j[xe];if(!(ze in se))break e;se=se[ze]}j=j[j.length-1],xe=se[j],ee=ee(xe),ee!=xe&&ee!=null&&t(se,j,{configurable:!0,writable:!0,value:ee})}}function s(j,ee){j instanceof String&&(j+="");var se=0,xe=!1,ze={next:function(){if(!xe&&se<j.length){var rt=se++;return{value:ee(rt,j[rt]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(j){return j||function(){return s(this,function(ee,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(j){var ee=typeof j;return ee=ee!="object"?ee:j?Array.isArray(j)?"array":ee:"null",ee=="array"||ee=="object"&&typeof j.length=="number"}function u(j){var ee=typeof j;return ee=="object"&&j!=null||ee=="function"}function d(j,ee,se){return j.call.apply(j.bind,arguments)}function f(j,ee,se){if(!j)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,xe),j.apply(ee,ze)}}return function(){return j.apply(ee,arguments)}}function m(j,ee,se){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function p(j,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),j.apply(this,xe)}}function x(j,ee){function se(){}se.prototype=ee.prototype,j.aa=ee.prototype,j.prototype=new se,j.prototype.constructor=j,j.Qb=function(xe,ze,rt){for(var It=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)It[Sr-2]=arguments[Sr];return ee.prototype[ze].apply(xe,It)}}function g(j){const ee=j.length;if(0<ee){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=j[xe];return se}return[]}function b(j,ee){for(let se=1;se<arguments.length;se++){const xe=arguments[se];if(l(xe)){const ze=j.length||0,rt=xe.length||0;j.length=ze+rt;for(let It=0;It<rt;It++)j[ze+It]=xe[It]}else j.push(xe)}}class y{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function _(j){return/^[\s\xa0]*$/.test(j)}function S(){var j=o.navigator;return j&&(j=j.userAgent)?j:""}function B(j){return B[" "](j),j}B[" "]=function(){};var I=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(j,ee,se){for(const xe in j)ee.call(se,j[xe],xe,j)}function E(j,ee){for(const se in j)ee.call(void 0,j[se],se,j)}function C(j){const ee={};for(const se in j)ee[se]=j[se];return ee}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(j,ee){let se,xe;for(let ze=1;ze<arguments.length;ze++){xe=arguments[ze];for(se in xe)j[se]=xe[se];for(let rt=0;rt<N.length;rt++)se=N[rt],Object.prototype.hasOwnProperty.call(xe,se)&&(j[se]=xe[se])}}function O(j){var ee=1;j=j.split(":");const se=[];for(;0<ee&&j.length;)se.push(j.shift()),ee--;return j.length&&se.push(j.join(":")),se}function F(j){o.setTimeout(()=>{throw j},0)}function M(){var j=z;let ee=null;return j.g&&(ee=j.g,j.g=j.g.next,j.g||(j.h=null),ee.next=null),ee}class Q{constructor(){this.h=this.g=null}add(ee,se){const xe=J.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var J=new y(()=>new W,j=>j.reset());class W{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,H=!1,z=new Q,G=()=>{const j=o.Promise.resolve(void 0);Z=()=>{j.then(ne)}};var ne=()=>{for(var j;j=M();){try{j.h.call(j.g)}catch(se){F(se)}var ee=J;ee.j(j),100>ee.h&&(ee.h++,j.next=ee.g,ee.g=j)}H=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(j,ee){this.type=j,this.g=this.target=ee,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var j=!1,ee=Object.defineProperty({},"passive",{get:function(){j=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return j}();function te(j,ee){if(q.call(this,j?j.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,j){var se=this.type=j.type,xe=j.changedTouches&&j.changedTouches.length?j.changedTouches[0]:null;if(this.target=j.target||j.srcElement,this.g=ee,ee=j.relatedTarget){if(I){e:{try{B(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else se=="mouseover"?ee=j.fromElement:se=="mouseout"&&(ee=j.toElement);this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0),this.button=j.button,this.key=j.key||"",this.ctrlKey=j.ctrlKey,this.altKey=j.altKey,this.shiftKey=j.shiftKey,this.metaKey=j.metaKey,this.pointerId=j.pointerId||0,this.pointerType=typeof j.pointerType=="string"?j.pointerType:ie[j.pointerType]||"",this.state=j.state,this.i=j,j.defaultPrevented&&te.aa.h.call(this)}}x(te,q);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var j=this.i;j.preventDefault?j.preventDefault():j.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(j,ee,se,xe,ze){this.listener=j,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function ge(j){j.da=!0,j.listener=null,j.proxy=null,j.src=null,j.ha=null}function Fe(j){this.src=j,this.g={},this.h=0}Fe.prototype.add=function(j,ee,se,xe,ze){var rt=j.toString();j=this.g[rt],j||(j=this.g[rt]=[],this.h++);var It=Ne(j,ee,xe,ze);return-1<It?(ee=j[It],se||(ee.fa=!1)):(ee=new ce(ee,this.src,rt,!!xe,ze),ee.fa=se,j.push(ee)),ee};function re(j,ee){var se=ee.type;if(se in j.g){var xe=j.g[se],ze=Array.prototype.indexOf.call(xe,ee,void 0),rt;(rt=0<=ze)&&Array.prototype.splice.call(xe,ze,1),rt&&(ge(ee),j.g[se].length==0&&(delete j.g[se],j.h--))}}function Ne(j,ee,se,xe){for(var ze=0;ze<j.length;++ze){var rt=j[ze];if(!rt.da&&rt.listener==ee&&rt.capture==!!se&&rt.ha==xe)return ze}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),Ce={};function fe(j,ee,se,xe,ze){if(Array.isArray(ee)){for(var rt=0;rt<ee.length;rt++)fe(j,ee[rt],se,xe,ze);return null}return se=Jt(se),j&&j[pe]?j.K(ee,se,u(xe)?!!xe.capture:!1,ze):Ie(j,ee,se,!1,xe,ze)}function Ie(j,ee,se,xe,ze,rt){if(!ee)throw Error("Invalid event type");var It=u(ze)?!!ze.capture:!!ze,Sr=Ct(j);if(Sr||(j[Oe]=Sr=new Fe(j)),se=Sr.add(ee,se,xe,It,rt),se.proxy)return se;if(xe=He(),se.proxy=xe,xe.src=j,xe.listener=se,j.addEventListener)Y||(ze=It),ze===void 0&&(ze=!1),j.addEventListener(ee.toString(),xe,ze);else if(j.attachEvent)j.attachEvent(Et(ee.toString()),xe);else if(j.addListener&&j.removeListener)j.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function j(se){return ee.call(j.src,j.listener,se)}const ee=Tt;return j}function Xe(j,ee,se,xe,ze){if(Array.isArray(ee))for(var rt=0;rt<ee.length;rt++)Xe(j,ee[rt],se,xe,ze);else xe=u(xe)?!!xe.capture:!!xe,se=Jt(se),j&&j[pe]?(j=j.i,ee=String(ee).toString(),ee in j.g&&(rt=j.g[ee],se=Ne(rt,se,xe,ze),-1<se&&(ge(rt[se]),Array.prototype.splice.call(rt,se,1),rt.length==0&&(delete j.g[ee],j.h--)))):j&&(j=Ct(j))&&(ee=j.g[ee.toString()],j=-1,ee&&(j=Ne(ee,se,xe,ze)),(se=-1<j?ee[j]:null)&&dt(se))}function dt(j){if(typeof j!="number"&&j&&!j.da){var ee=j.src;if(ee&&ee[pe])re(ee.i,j);else{var se=j.type,xe=j.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,j.capture):ee.detachEvent?ee.detachEvent(Et(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=Ct(ee))?(re(se,j),se.h==0&&(se.src=null,ee[Oe]=null)):ge(j)}}}function Et(j){return j in Ce?Ce[j]:Ce[j]="on"+j}function Tt(j,ee){if(j.da)j=!0;else{ee=new te(ee,this);var se=j.listener,xe=j.ha||j.src;j.fa&&dt(j),j=se.call(xe,ee)}return j}function Ct(j){return j=j[Oe],j instanceof Fe?j:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jt(j){return typeof j=="function"?j:(j[Dt]||(j[Dt]=function(ee){return j.handleEvent(ee)}),j[Dt])}function Pt(){R.call(this),this.i=new Fe(this),this.M=this,this.F=null}x(Pt,R),Pt.prototype[pe]=!0,Pt.prototype.removeEventListener=function(j,ee,se,xe){Xe(this,j,ee,se,xe)};function Mt(j,ee){var se,xe=j.F;if(xe)for(se=[];xe;xe=xe.F)se.push(xe);if(j=j.M,xe=ee.type||ee,typeof ee=="string")ee=new q(ee,j);else if(ee instanceof q)ee.target=ee.target||j;else{var ze=ee;ee=new q(xe,j),P(ee,ze)}if(ze=!0,se)for(var rt=se.length-1;0<=rt;rt--){var It=ee.g=se[rt];ze=Wt(It,xe,!0,ee)&&ze}if(It=ee.g=j,ze=Wt(It,xe,!0,ee)&&ze,ze=Wt(It,xe,!1,ee)&&ze,se)for(rt=0;rt<se.length;rt++)It=ee.g=se[rt],ze=Wt(It,xe,!1,ee)&&ze}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var j=this.i,ee;for(ee in j.g){for(var se=j.g[ee],xe=0;xe<se.length;xe++)ge(se[xe]);delete j.g[ee],j.h--}}this.F=null},Pt.prototype.K=function(j,ee,se,xe){return this.i.add(String(j),ee,!1,se,xe)},Pt.prototype.L=function(j,ee,se,xe){return this.i.add(String(j),ee,!0,se,xe)};function Wt(j,ee,se,xe){if(ee=j.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,rt=0;rt<ee.length;++rt){var It=ee[rt];if(It&&!It.da&&It.capture==se){var Sr=It.listener,ln=It.ha||It.src;It.fa&&re(j.i,It),ze=Sr.call(ln,xe)!==!1&&ze}}return ze&&!xe.defaultPrevented}function Pe(j,ee,se){if(typeof j=="function")se&&(j=m(j,se));else if(j&&typeof j.handleEvent=="function")j=m(j.handleEvent,j);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(j,ee||0)}function Re(j){j.g=Pe(()=>{j.g=null,j.i&&(j.i=!1,Re(j))},j.l);const ee=j.h;j.h=null,j.m.apply(null,ee)}class Te extends R{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(j){R.call(this),this.h=j,this.g={}}x(ot,R);var vt=[];function ur(j){D(j.g,function(ee,se){this.g.hasOwnProperty(se)&&dt(ee)},j),j.g={}}ot.prototype.N=function(){ot.aa.N.call(this),ur(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=o.JSON.stringify,Rt=o.JSON.parse,Vr=class{stringify(j){return o.JSON.stringify(j,void 0)}parse(j){return o.JSON.parse(j,void 0)}};function dr(){}dr.prototype.h=null;function yn(j){return j.h||(j.h=j.i())}function Qr(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ea(){q.call(this,"d")}x(ea,q);function or(){q.call(this,"c")}x(or,q);var Zt={},Kr=null;function Ms(){return Kr=Kr||new Pt}Zt.La="serverreachability";function Aa(j){q.call(this,Zt.La,j)}x(Aa,q);function Va(j){const ee=Ms();Mt(ee,new Aa(ee))}Zt.STAT_EVENT="statevent";function si(j,ee){q.call(this,Zt.STAT_EVENT,j),this.stat=ee}x(si,q);function qt(j){const ee=Ms();Mt(ee,new si(ee,j))}Zt.Ma="timingevent";function wn(j,ee){q.call(this,Zt.Ma,j),this.size=ee}x(wn,q);function fn(j,ee){if(typeof j!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){j()},ee)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function ta(j,ee,se,xe,ze,rt){j.info(function(){if(j.g)if(rt)for(var It="",Sr=rt.split("&"),ln=0;ln<Sr.length;ln++){var Lr=Sr[ln].split("=");if(1<Lr.length){var On=Lr[0];Lr=Lr[1];var Gn=On.split("_");It=2<=Gn.length&&Gn[1]=="type"?It+(On+"="+Lr+"&"):It+(On+"=redacted&")}}else It=null;else It=rt;return"XMLHTTP REQ ("+xe+") [attempt "+ze+"]: "+ee+`
`+se+`
`+It})}function fa(j,ee,se,xe,ze,rt,It){j.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ze+"]: "+ee+`
`+se+`
`+rt+" "+It})}function Ae(j,ee,se,xe){j.info(function(){return"XMLHTTP TEXT ("+ee+"): "+we(j,se)+(xe?" "+xe:"")})}function Be(j,ee){j.info(function(){return"TIMEOUT: "+ee})}Vn.prototype.info=function(){};function we(j,ee){if(!j.g)return ee;if(!ee)return null;try{var se=JSON.parse(ee);if(se){for(j=0;j<se.length;j++)if(Array.isArray(se[j])){var xe=se[j];if(!(2>xe.length)){var ze=xe[1];if(Array.isArray(ze)&&!(1>ze.length)){var rt=ze[0];if(rt!="noop"&&rt!="stop"&&rt!="close")for(var It=1;It<ze.length;It++)ze[It]=""}}}}return Gt(se)}catch{return ee}}var Ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function We(){}x(We,dr),We.prototype.g=function(){return new XMLHttpRequest},We.prototype.i=function(){return{}},ke=new We;function st(j,ee,se,xe){this.j=j,this.i=ee,this.l=se,this.R=xe||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var Je={},tt={};function wt(j,ee,se){j.L=1,j.v=Nc(li(ee)),j.m=se,j.P=!0,Ot(j,null)}function Ot(j,ee){j.F=Date.now(),Lt(j),j.A=li(j.v);var se=j.A,xe=j.R;Array.isArray(xe)||(xe=[String(xe)]),_r(se.i,"t",xe),j.C=0,se=j.j.J,j.h=new $e,j.g=de(j.j,se?ee:null,!j.m),0<j.O&&(j.M=new Te(m(j.Y,j,j.g),j.O)),ee=j.U,se=j.g,xe=j.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(vt[0]=ze.toString()),ze=vt);for(var rt=0;rt<ze.length;rt++){var It=fe(se,ze[rt],xe||ee.handleEvent,!1,ee.h||ee);if(!It)break;ee.g[It.key]=It}ee=j.H?C(j.H):{},j.m?(j.u||(j.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",j.g.ea(j.A,j.u,j.m,ee)):(j.u="GET",j.g.ea(j.A,j.u,null,ee)),Va(),ta(j.i,j.u,j.A,j.l,j.R,j.m)}st.prototype.ca=function(j){j=j.target;const ee=this.M;ee&&ss(j)==3?ee.j():this.Y(j)},st.prototype.Y=function(j){try{if(j==this.g)e:{const Gn=ss(this.g);var ee=this.g.Ba();const ml=this.g.Z();if(!(3>Gn)&&(Gn!=3||this.g&&(this.h.h||this.g.oa()||Zf(this.g)))){this.J||Gn!=4||ee==7||(ee==8||0>=ml?Va(3):Va(2)),Wr(this);var se=this.g.Z();this.X=se;t:if(Vt(this)){var xe=Zf(this.g);j="";var ze=xe.length,rt=ss(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Xr(this);var It="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,j+=this.h.i.decode(xe[ee],{stream:!(rt&&ee==ze-1)});xe.length=0,this.h.g+=j,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=se==200,fa(this.i,this.u,this.A,this.l,this.R,Gn,se),this.o){if(this.T&&!this.K){t:{if(this.g){var Sr,ln=this.g;if((Sr=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Sr)){var Lr=Sr;break t}}Lr=null}if(se=Lr)Ae(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,se);else{this.o=!1,this.s=3,qt(12),tn(this),Xr(this);break e}}if(this.P){se=!0;let za;for(;!this.J&&this.C<It.length;)if(za=jt(this,It),za==tt){Gn==4&&(this.s=4,qt(14),se=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}else if(za==Je){this.s=4,qt(15),Ae(this.i,this.l,It,"[Invalid Chunk]"),se=!1;break}else Ae(this.i,this.l,za,null),rs(this,za);if(Vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gn!=4||It.length!=0||this.h.h||(this.s=1,qt(16),se=!1),this.o=this.o&&se,!se)Ae(this.i,this.l,It,"[Invalid Chunked Response]"),tn(this),Xr(this);else if(0<It.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),Fc(On),On.M=!0,qt(11))}}else Ae(this.i,this.l,It,null),rs(this,It);Gn==4&&tn(this),this.o&&!this.J&&(Gn==4?Oc(this.j,this):(this.o=!1,Lt(this)))}else Tc(this.g),se==400&&0<It.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),tn(this),Xr(this)}}}catch{}finally{}};function Vt(j){return j.g?j.u=="GET"&&j.L!=2&&j.j.Ca:!1}function jt(j,ee){var se=j.C,xe=ee.indexOf(`
`,se);return xe==-1?tt:(se=Number(ee.substring(se,xe)),isNaN(se)?Je:(xe+=1,xe+se>ee.length?tt:(ee=ee.slice(xe,xe+se),j.C=xe+se,ee)))}st.prototype.cancel=function(){this.J=!0,tn(this)};function Lt(j){j.S=Date.now()+j.I,wr(j,j.I)}function wr(j,ee){if(j.B!=null)throw Error("WatchDog timer not null");j.B=fn(m(j.ba,j),ee)}function Wr(j){j.B&&(o.clearTimeout(j.B),j.B=null)}st.prototype.ba=function(){this.B=null;const j=Date.now();0<=j-this.S?(Be(this.i,this.A),this.L!=2&&(Va(),qt(17)),tn(this),this.s=2,Xr(this)):wr(this,this.S-j)};function Xr(j){j.j.G==0||j.J||Oc(j.j,j)}function tn(j){Wr(j);var ee=j.M;ee&&typeof ee.ma=="function"&&ee.ma(),j.M=null,ur(j.U),j.g&&(ee=j.g,j.g=null,ee.abort(),ee.ma())}function rs(j,ee){try{var se=j.j;if(se.G!=0&&(se.g==j||ii(se.h,j))){if(!j.K&&ii(se.h,j)&&se.G==3){try{var xe=se.Da.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ze=xe;if(ze[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<j.F)zl(se),md(se);else break e;Su(se),qt(18)}}else se.za=ze[1],0<se.za-se.T&&37500>ze[2]&&se.F&&se.v==0&&!se.C&&(se.C=fn(m(se.Za,se),6e3));if(1>=Es(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Ci(se,11)}else if((j.K||se.g==j)&&zl(se),!_(ee))for(ze=se.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let Lr=ze[ee];if(se.T=Lr[0],Lr=Lr[1],se.G==2)if(Lr[0]=="c"){se.K=Lr[1],se.ia=Lr[2];const On=Lr[3];On!=null&&(se.la=On,se.j.info("VER="+se.la));const Gn=Lr[4];Gn!=null&&(se.Aa=Gn,se.j.info("SVER="+se.Aa));const ml=Lr[5];ml!=null&&typeof ml=="number"&&0<ml&&(xe=1.5*ml,se.L=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const za=j.g;if(za){const fo=za.g?za.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var rt=xe.h;rt.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(rt.j=rt.l,rt.g=new Set,rt.h&&(ha(rt,rt.h),rt.h=null))}if(xe.D){const Dc=za.g?za.g.getResponseHeader("X-HTTP-Session-Id"):null;Dc&&(xe.ya=Dc,Fn(xe.I,xe.D,Dc))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-j.F,se.j.info("Handshake RTT: "+se.R+"ms")),xe=se;var It=j;if(xe.qa=K(xe,xe.J?xe.ia:null,xe.W),It.K){Hs(xe.h,It);var Sr=It,ln=xe.L;ln&&(Sr.I=ln),Sr.B&&(Wr(Sr),Lt(Sr)),xe.g=It}else gd(xe);0<se.i.length&&pd(se)}else Lr[0]!="stop"&&Lr[0]!="close"||Ci(se,7);else se.G==3&&(Lr[0]=="stop"||Lr[0]=="close"?Lr[0]=="stop"?Ci(se,7):Vl(se):Lr[0]!="noop"&&se.l&&se.l.ta(Lr),se.v=0)}}Va(4)}catch{}}var oo=class{constructor(j,ee){this.g=j,this.map=ee}};function ns(j){this.l=j||10,o.PerformanceNavigationTiming?(j=o.performance.getEntriesByType("navigation"),j=0<j.length&&(j[0].nextHopProtocol=="hq"||j[0].nextHopProtocol=="h2")):j=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=j?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(j){return j.h?!0:j.g?j.g.size>=j.j:!1}function Es(j){return j.h?1:j.g?j.g.size:0}function ii(j,ee){return j.h?j.h==ee:j.g?j.g.has(ee):!1}function ha(j,ee){j.g?j.g.add(ee):j.h=ee}function Hs(j,ee){j.h&&j.h==ee?j.h=null:j.g&&j.g.has(ee)&&j.g.delete(ee)}ns.prototype.cancel=function(){if(this.i=Ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const j of this.g.values())j.cancel();this.g.clear()}};function Ad(j){if(j.h!=null)return j.i.concat(j.h.D);if(j.g!=null&&j.g.size!==0){let ee=j.i;for(const se of j.g.values())ee=ee.concat(se.D);return ee}return g(j.i)}function Xf(j){if(j.V&&typeof j.V=="function")return j.V();if(typeof Map<"u"&&j instanceof Map||typeof Set<"u"&&j instanceof Set)return Array.from(j.values());if(typeof j=="string")return j.split("");if(l(j)){for(var ee=[],se=j.length,xe=0;xe<se;xe++)ee.push(j[xe]);return ee}ee=[],se=0;for(xe in j)ee[se++]=j[xe];return ee}function Cc(j){if(j.na&&typeof j.na=="function")return j.na();if(!j.V||typeof j.V!="function"){if(typeof Map<"u"&&j instanceof Map)return Array.from(j.keys());if(!(typeof Set<"u"&&j instanceof Set)){if(l(j)||typeof j=="string"){var ee=[];j=j.length;for(var se=0;se<j;se++)ee.push(se);return ee}ee=[],se=0;for(const xe in j)ee[se++]=xe;return ee}}}function _A(j,ee){if(j.forEach&&typeof j.forEach=="function")j.forEach(ee,void 0);else if(l(j)||typeof j=="string")Array.prototype.forEach.call(j,ee,void 0);else for(var se=Cc(j),xe=Xf(j),ze=xe.length,rt=0;rt<ze;rt++)ee.call(void 0,xe[rt],se&&se[rt],j)}var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fd(j,ee){if(j){j=j.split("&");for(var se=0;se<j.length;se++){var xe=j[se].indexOf("="),ze=null;if(0<=xe){var rt=j[se].substring(0,xe);ze=j[se].substring(xe+1)}else rt=j[se];ee(rt,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function En(j){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,j instanceof En){this.h=j.h,_c(this,j.j),this.o=j.o,this.g=j.g,Sc(this,j.s),this.l=j.l;var ee=j.i,se=new cl;se.i=ee.i,ee.g&&(se.g=new Map(ee.g),se.h=ee.h),ll(this,se),this.m=j.m}else j&&(ee=String(j).match(oi))?(this.h=!1,_c(this,ee[1]||"",!0),this.o=lo(ee[2]||""),this.g=lo(ee[3]||"",!0),Sc(this,ee[4]),this.l=lo(ee[5]||"",!0),ll(this,ee[6]||"",!0),this.m=lo(ee[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}En.prototype.toString=function(){var j=[],ee=this.j;ee&&j.push(Ll(ee,SA,!0),":");var se=this.g;return(se||ee=="file")&&(j.push("//"),(ee=this.o)&&j.push(Ll(ee,SA,!0),"@"),j.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&j.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&j.push("/"),j.push(Ll(se,se.charAt(0)=="/"?Ul:NA,!0))),(se=this.i.toString())&&j.push("?",se),(se=this.m)&&j.push("#",Ll(se,Ml)),j.join("")};function li(j){return new En(j)}function _c(j,ee,se){j.j=se?lo(ee,!0):ee,j.j&&(j.j=j.j.replace(/:$/,""))}function Sc(j,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);j.s=ee}else j.s=null}function ll(j,ee,se){ee instanceof cl?(j.i=ee,Jf(j.i,j.h)):(se||(ee=Ll(ee,hd)),j.i=new cl(ee,j.h))}function Fn(j,ee,se){j.i.set(ee,se)}function Nc(j){return Fn(j,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),j}function lo(j,ee){return j?ee?decodeURI(j.replace(/%25/g,"%2525")):decodeURIComponent(j):""}function Ll(j,ee,se){return typeof j=="string"?(j=encodeURI(j).replace(ee,Yf),se&&(j=j.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j):null}function Yf(j){return j=j.charCodeAt(0),"%"+(j>>4&15).toString(16)+(j&15).toString(16)}var SA=/[#\/\?@]/g,NA=/[#\?:]/g,Ul=/[#\?]/g,hd=/[#\?@]/g,Ml=/#/g;function cl(j,ee){this.h=this.g=null,this.i=j||null,this.j=!!ee}function ra(j){j.g||(j.g=new Map,j.h=0,j.i&&fd(j.i,function(ee,se){j.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}e=cl.prototype,e.add=function(j,ee){ra(this),this.i=null,j=dl(this,j);var se=this.g.get(j);return se||this.g.set(j,se=[]),se.push(ee),this.h+=1,this};function Ql(j,ee){ra(j),ee=dl(j,ee),j.g.has(ee)&&(j.i=null,j.h-=j.g.get(ee).length,j.g.delete(ee))}function ul(j,ee){return ra(j),ee=dl(j,ee),j.g.has(ee)}e.forEach=function(j,ee){ra(this),this.g.forEach(function(se,xe){se.forEach(function(ze){j.call(ee,ze,xe,this)},this)},this)},e.na=function(){ra(this);const j=Array.from(this.g.values()),ee=Array.from(this.g.keys()),se=[];for(let xe=0;xe<ee.length;xe++){const ze=j[xe];for(let rt=0;rt<ze.length;rt++)se.push(ee[xe])}return se},e.V=function(j){ra(this);let ee=[];if(typeof j=="string")ul(this,j)&&(ee=ee.concat(this.g.get(dl(this,j))));else{j=Array.from(this.g.values());for(let se=0;se<j.length;se++)ee=ee.concat(j[se])}return ee},e.set=function(j,ee){return ra(this),this.i=null,j=dl(this,j),ul(this,j)&&(this.h-=this.g.get(j).length),this.g.set(j,[ee]),this.h+=1,this},e.get=function(j,ee){return j?(j=this.V(j),0<j.length?String(j[0]):ee):ee};function _r(j,ee,se){Ql(j,ee),0<se.length&&(j.i=null,j.g.set(dl(j,ee),g(se)),j.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const j=[],ee=Array.from(this.g.keys());for(var se=0;se<ee.length;se++){var xe=ee[se];const rt=encodeURIComponent(String(xe)),It=this.V(xe);for(xe=0;xe<It.length;xe++){var ze=rt;It[xe]!==""&&(ze+="="+encodeURIComponent(String(It[xe]))),j.push(ze)}}return this.i=j.join("&")};function dl(j,ee){return ee=String(ee),j.j&&(ee=ee.toLowerCase()),ee}function Jf(j,ee){ee&&!j.j&&(ra(j),j.i=null,j.g.forEach(function(se,xe){var ze=xe.toLowerCase();xe!=ze&&(Ql(this,xe),_r(this,ze,se))},j)),j.j=ee}function yi(j,ee){const se=new Vn;if(o.Image){const xe=new Image;xe.onload=p(Hi,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=p(Hi,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=p(Hi,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=p(Hi,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=j}else ee(!1)}function co(j,ee){const se=new Vn,xe=new AbortController,ze=setTimeout(()=>{xe.abort(),Hi(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(j,{signal:xe.signal}).then(rt=>{clearTimeout(ze),rt.ok?Hi(se,"TestPingServer: ok",!0,ee):Hi(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),Hi(se,"TestPingServer: error",!1,ee)})}function Hi(j,ee,se,xe,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),xe(se)}catch{}}function Al(){this.g=new Vr}function uo(j,ee,se){const xe=se||"";try{_A(j,function(ze,rt){let It=ze;u(ze)&&(It=Gt(ze)),ee.push(xe+rt+"="+encodeURIComponent(It))})}catch(ze){throw ee.push(xe+"type="+encodeURIComponent("_badmap")),ze}}function Bc(j){this.l=j.Ub||null,this.j=j.eb||!1}x(Bc,dr),Bc.prototype.g=function(){return new Hl(this.l,this.j)},Bc.prototype.i=function(j){return function(){return j}}({});function Hl(j,ee){Pt.call(this),this.D=j,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Hl,Pt),e=Hl.prototype,e.open=function(j,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=j,this.A=ee,this.readyState=1,wi(this)},e.send=function(j){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};j&&(ee.body=j),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},e.Sa=function(j){if(this.g&&(this.l=j,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=j.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")j.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in j){if(this.j=j.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;BA(this)}else j.text().then(this.Ra.bind(this),this.ga.bind(this))};function BA(j){j.j.read().then(j.Pa.bind(j)).catch(j.ga.bind(j))}e.Pa=function(j){if(this.g){if(this.o&&j.value)this.response.push(j.value);else if(!this.o){var ee=j.value?j.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!j.done}))&&(this.response=this.responseText+=ee)}j.done?Ao(this):wi(this),this.readyState==3&&BA(this)}},e.Ra=function(j){this.g&&(this.response=this.responseText=j,Ao(this))},e.Qa=function(j){this.g&&(this.response=j,Ao(this))},e.ga=function(){this.g&&Ao(this)};function Ao(j){j.readyState=4,j.l=null,j.j=null,j.v=null,wi(j)}e.setRequestHeader=function(j,ee){this.u.append(j,ee)},e.getResponseHeader=function(j){return this.h&&this.h.get(j.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const j=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,j.push(se[0]+": "+se[1]),se=ee.next();return j.join(`\r
`)};function wi(j){j.onreadystatechange&&j.onreadystatechange.call(j)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(j){this.m=j?"include":"same-origin"}});function fl(j){let ee="";return D(j,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function as(j,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=fl(se),typeof j=="string"?se!=null&&encodeURIComponent(String(se)):Fn(j,ee,se))}function on(j){Pt.call(this),this.headers=new Map,this.o=j||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(on,Pt);var kc=/^https?$/i,hl=["POST","PUT"];e=on.prototype,e.Ha=function(j){this.J=j},e.ea=function(j,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+j);ee=ee?ee.toUpperCase():"GET",this.D=j,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?yn(this.o):yn(ke),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(ee,String(j),!0),this.B=!1}catch(rt){kA(this,rt);return}if(j=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ze in xe)se.set(ze,xe[ze]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const rt of xe.keys())se.set(rt,xe.get(rt));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(rt=>rt.toLowerCase()=="content-type"),ze=o.FormData&&j instanceof o.FormData,!(0<=Array.prototype.indexOf.call(hl,ee,void 0))||xe||ze||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[rt,It]of se)this.g.setRequestHeader(rt,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ei(this),this.u=!0,this.g.send(j),this.u=!1}catch(rt){kA(this,rt)}};function kA(j,ee){j.h=!1,j.g&&(j.j=!0,j.g.abort(),j.j=!1),j.l=ee,j.m=5,yu(j),$o(j)}function yu(j){j.A||(j.A=!0,Mt(j,"complete"),Mt(j,"error"))}e.abort=function(j){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=j||7,Mt(this,"complete"),Mt(this,"abort"),$o(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),on.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?wu(this):this.bb())},e.bb=function(){wu(this)};function wu(j){if(j.h&&typeof i<"u"&&(!j.v[1]||ss(j)!=4||j.Z()!=2)){if(j.u&&ss(j)==4)Pe(j.Ea,0,j);else if(Mt(j,"readystatechange"),ss(j)==4){j.h=!1;try{const It=j.Z();e:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=It===0){var ze=String(j.D).match(oi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),xe=!kc.test(ze?ze.toLowerCase():"")}se=xe}if(se)Mt(j,"complete"),Mt(j,"success");else{j.m=6;try{var rt=2<ss(j)?j.g.statusText:""}catch{rt=""}j.l=rt+" ["+j.Z()+"]",yu(j)}}finally{$o(j)}}}}function $o(j,ee){if(j.g){Ei(j);const se=j.g,xe=j.v[0]?()=>{}:null;j.g=null,j.v=null,ee||Mt(j,"ready");try{se.onreadystatechange=xe}catch{}}}function Ei(j){j.I&&(o.clearTimeout(j.I),j.I=null)}e.isActive=function(){return!!this.g};function ss(j){return j.g?j.g.readyState:0}e.Z=function(){try{return 2<ss(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(j){if(this.g){var ee=this.g.responseText;return j&&ee.indexOf(j)==0&&(ee=ee.substring(j.length)),Rt(ee)}};function Zf(j){try{if(!j.g)return null;if("response"in j.g)return j.g.response;switch(j.H){case"":case"text":return j.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in j.g)return j.g.mozResponseArrayBuffer}return null}catch{return null}}function Tc(j){const ee={};j=(j.g&&2<=ss(j)&&j.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<j.length;xe++){if(_(j[xe]))continue;var se=O(j[xe]);const ze=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const rt=ee[ze]||[];ee[ze]=rt,rt.push(se)}E(ee,function(xe){return xe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(j,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[j]||ee}function Ic(j){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,j),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,j),this.cb=ci("retryDelaySeedMs",1e4,j),this.Wa=ci("forwardChannelMaxRetries",2,j),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,j),this.pa=j&&j.xmlHttpFactory||void 0,this.Xa=j&&j.Tb||void 0,this.Ca=j&&j.useFetchStreams||!1,this.L=void 0,this.J=j&&j.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(j&&j.concurrentRequestLimit),this.Da=new Al,this.P=j&&j.fastHandshake||!1,this.O=j&&j.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=j&&j.Rb||!1,j&&j.xa&&this.j.xa(),j&&j.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&j&&j.detectBufferingProxy||!1,this.ja=void 0,j&&j.longPollingTimeout&&0<j.longPollingTimeout&&(this.ja=j.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ic.prototype,e.la=8,e.G=1,e.connect=function(j,ee,se,xe){qt(0),this.W=j,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.I=K(this,null,this.W),pd(this)};function Vl(j){if(Eu(j),j.G==3){var ee=j.U++,se=li(j.I);if(Fn(se,"SID",j.K),Fn(se,"RID",ee),Fn(se,"TYPE","terminate"),jc(j,se),ee=new st(j,j.j,ee),ee.L=2,ee.v=Nc(li(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.v,se=!0),se||(ee.g=de(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Lt(ee)}vd(j)}function md(j){j.g&&(Fc(j),j.g.cancel(),j.g=null)}function Eu(j){md(j),j.u&&(o.clearTimeout(j.u),j.u=null),zl(j),j.h.cancel(),j.s&&(typeof j.s=="number"&&o.clearTimeout(j.s),j.s=null)}function pd(j){if(!Qs(j.h)&&!j.s){j.s=!0;var ee=j.Ga;Z||G(),H||(Z(),H=!0),z.add(ee,j),j.B=0}}function TA(j,ee){return Es(j.h)>=j.h.j-(j.s?1:0)?!1:j.s?(j.i=ee.D.concat(j.i),!0):j.G==1||j.G==2||j.B>=(j.Va?0:j.Wa)?!1:(j.s=fn(m(j.Ga,j,ee),Nu(j,j.B)),j.B++,!0)}e.Ga=function(j){if(this.s)if(this.s=null,this.G==1){if(!j){this.U=Math.floor(1e5*Math.random()),j=this.U++;const ze=new st(this,this.j,j);let rt=this.o;if(this.S&&(rt?(rt=C(rt),P(rt,this.S)):rt=this.S),this.m!==null||this.O||(ze.H=rt,rt=null),this.P)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,4096<ee){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=_u(this,ze,ee),se=li(this.I),Fn(se,"RID",j),Fn(se,"CVER",22),this.D&&Fn(se,"X-HTTP-Session-Id",this.D),jc(this,se),rt&&(this.O?ee="headers="+encodeURIComponent(String(fl(rt)))+"&"+ee:this.m&&as(se,this.m,rt)),ha(this.h,ze),this.Ua&&Fn(se,"TYPE","init"),this.P?(Fn(se,"$req",ee),Fn(se,"SID","null"),ze.T=!0,wt(ze,se,null)):wt(ze,se,ee),this.G=2}}else this.G==3&&(j?Cu(this,j):this.i.length==0||Qs(this.h)||Cu(this))};function Cu(j,ee){var se;ee?se=ee.l:se=j.U++;const xe=li(j.I);Fn(xe,"SID",j.K),Fn(xe,"RID",se),Fn(xe,"AID",j.T),jc(j,xe),j.m&&j.o&&as(xe,j.m,j.o),se=new st(j,j.j,se,j.B+1),j.m===null&&(se.H=j.o),ee&&(j.i=ee.D.concat(j.i)),ee=_u(j,se,1e3),se.I=Math.round(.5*j.wa)+Math.round(.5*j.wa*Math.random()),ha(j.h,se),wt(se,xe,ee)}function jc(j,ee){j.H&&D(j.H,function(se,xe){Fn(ee,xe,se)}),j.l&&_A({},function(se,xe){Fn(ee,xe,se)})}function _u(j,ee,se){se=Math.min(j.i.length,se);var xe=j.l?m(j.l.Na,j.l,j):null;e:{var ze=j.i;let rt=-1;for(;;){const It=["count="+se];rt==-1?0<se?(rt=ze[0].g,It.push("ofs="+rt)):rt=0:It.push("ofs="+rt);let Sr=!0;for(let ln=0;ln<se;ln++){let Lr=ze[ln].g;const On=ze[ln].map;if(Lr-=rt,0>Lr)rt=Math.max(0,ze[ln].g-100),Sr=!1;else try{uo(On,It,"req"+Lr+"_")}catch{xe&&xe(On)}}if(Sr){xe=It.join("&");break e}}}return j=j.i.splice(0,se),ee.D=j,xe}function gd(j){if(!j.g&&!j.u){j.Y=1;var ee=j.Fa;Z||G(),H||(Z(),H=!0),z.add(ee,j),j.v=0}}function Su(j){return j.g||j.u||3<=j.v?!1:(j.Y++,j.u=fn(m(j.Fa,j),Nu(j,j.v)),j.v++,!0)}e.Fa=function(){if(this.u=null,eh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var j=2*this.R;this.j.info("BP detection timer enabled: "+j),this.A=fn(m(this.ab,this),j)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),md(this),eh(this))};function Fc(j){j.A!=null&&(o.clearTimeout(j.A),j.A=null)}function eh(j){j.g=new st(j,j.j,"rpc",j.Y),j.m===null&&(j.g.H=j.o),j.g.O=0;var ee=li(j.qa);Fn(ee,"RID","rpc"),Fn(ee,"SID",j.K),Fn(ee,"AID",j.T),Fn(ee,"CI",j.F?"0":"1"),!j.F&&j.ja&&Fn(ee,"TO",j.ja),Fn(ee,"TYPE","xmlhttp"),jc(j,ee),j.m&&j.o&&as(ee,j.m,j.o),j.L&&(j.g.I=j.L);var se=j.g;j=j.ia,se.L=1,se.v=Nc(li(ee)),se.m=null,se.P=!0,Ot(se,j)}e.Za=function(){this.C!=null&&(this.C=null,md(this),Su(this),qt(19))};function zl(j){j.C!=null&&(o.clearTimeout(j.C),j.C=null)}function Oc(j,ee){var se=null;if(j.g==ee){zl(j),Fc(j),j.g=null;var xe=2}else if(ii(j.h,ee))se=ee.D,Hs(j.h,ee),xe=1;else return;if(j.G!=0){if(ee.o)if(xe==1){se=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=j.B;xe=Ms(),Mt(xe,new wn(xe,se)),pd(j)}else gd(j);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(xe==1&&TA(j,ee)||xe==2&&Su(j)))switch(se&&0<se.length&&(ee=j.h,ee.i=ee.i.concat(se)),ze){case 1:Ci(j,5);break;case 4:Ci(j,10);break;case 3:Ci(j,6);break;default:Ci(j,2)}}}function Nu(j,ee){let se=j.Ta+Math.floor(Math.random()*j.cb);return j.isActive()||(se*=2),se*ee}function Ci(j,ee){if(j.j.info("Error code "+ee),ee==2){var se=m(j.fb,j),xe=j.Xa;const ze=!xe;xe=new En(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_c(xe,"https"),Nc(xe),ze?yi(xe.toString(),se):co(xe.toString(),se)}else qt(2);j.G=0,j.l&&j.l.sa(ee),vd(j),Eu(j)}e.fb=function(j){j?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function vd(j){if(j.G=0,j.ka=[],j.l){const ee=Ad(j.h);(ee.length!=0||j.i.length!=0)&&(b(j.ka,ee),b(j.ka,j.i),j.h.i.length=0,g(j.i),j.i.length=0),j.l.ra()}}function K(j,ee,se){var xe=se instanceof En?li(se):new En(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),Sc(xe,xe.s);else{var ze=o.location;xe=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var rt=new En(null);xe&&_c(rt,xe),ee&&(rt.g=ee),ze&&Sc(rt,ze),se&&(rt.l=se),xe=rt}return se=j.D,ee=j.ya,se&&ee&&Fn(xe,se,ee),Fn(xe,"VER",j.la),jc(j,xe),xe}function de(j,ee,se){if(ee&&!j.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=j.Ca&&!j.pa?new on(new Bc({eb:se})):new on(j.pa),ee.Ha(j.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function je(){}e=je.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(j,ee){return new Ke(j,ee)};function Ke(j,ee){Pt.call(this),this.g=new Ic(ee),this.l=j,this.h=ee&&ee.messageUrlParams||null,j=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(j?j["X-Client-Protocol"]="webchannel":j={"X-Client-Protocol":"webchannel"}),this.g.o=j,j=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(j?j["X-WebChannel-Content-Type"]=ee.messageContentType:j={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(j?j["X-WebChannel-Client-Profile"]=ee.va:j={"X-WebChannel-Client-Profile":ee.va}),this.g.S=j,(j=ee&&ee.Sb)&&!_(j)&&(this.g.m=j),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!_(ee)&&(this.g.D=ee,j=this.h,j!==null&&ee in j&&(j=this.h,ee in j&&delete j[ee])),this.j=new zt(this)}x(Ke,Pt),Ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ke.prototype.close=function(){Vl(this.g)},Ke.prototype.o=function(j){var ee=this.g;if(typeof j=="string"){var se={};se.__data__=j,j=se}else this.u&&(se={},se.__data__=Gt(j),j=se);ee.i.push(new oo(ee.Ya++,j)),ee.G==3&&pd(ee)},Ke.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,Ke.aa.N.call(this)};function ut(j){ea.call(this),j.__headers__&&(this.headers=j.__headers__,this.statusCode=j.__status__,delete j.__headers__,delete j.__status__);var ee=j.__sm__;if(ee){e:{for(const se in ee){j=se;break e}j=void 0}(this.i=j)&&(j=this.i,ee=ee!==null&&j in ee?ee[j]:void 0),this.data=ee}else this.data=j}x(ut,ea);function kt(){or.call(this),this.status=1}x(kt,or);function zt(j){this.g=j}x(zt,je),zt.prototype.ua=function(){Mt(this.g,"a")},zt.prototype.ta=function(j){Mt(this.g,new ut(j))},zt.prototype.sa=function(j){Mt(this.g,new kt)},zt.prototype.ra=function(){Mt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ke.prototype.send=Ke.prototype.o,Ke.prototype.open=Ke.prototype.m,Ke.prototype.close=Ke.prototype.close,$q=function(){return new Le},zq=function(){return Ms()},Vq=Zt,X3={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,oC=Ee,_e.COMPLETE="complete",Hq=_e,Qr.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,$1=Qr,on.prototype.listenOnce=on.prototype.L,on.prototype.getLastError=on.prototype.Ka,on.prototype.getLastErrorCode=on.prototype.Ba,on.prototype.getStatus=on.prototype.Z,on.prototype.getResponseJson=on.prototype.Oa,on.prototype.getResponseText=on.prototype.oa,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Ha,Qq=on}).apply(typeof k2<"u"?k2:typeof self<"u"?self:typeof window<"u"?window:{});const hU="@firebase/firestore",mU="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Bo.UNAUTHENTICATED=new Bo(null),Bo.GOOGLE_CREDENTIALS=new Bo("google-credentials-uid"),Bo.FIRST_PARTY=new Bo("first-party-uid"),Bo.MOCK_USER=new Bo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nx="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new UF("@firebase/firestore");function Dg(){return sp.logLevel}function ar(e,...t){if(sp.logLevel<=gn.DEBUG){const r=t.map(XF);sp.debug(`Firestore (${nx}): ${e}`,...r)}}function _f(e,...t){if(sp.logLevel<=gn.ERROR){const r=t.map(XF);sp.error(`Firestore (${nx}): ${e}`,...r)}}function _v(e,...t){if(sp.logLevel<=gn.WARN){const r=t.map(XF);sp.warn(`Firestore (${nx}): ${e}`,...r)}}function XF(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,Kq(e,n,r)}function Kq(e,t,r){let n=`FIRESTORE (${nx}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw _f(n),new Error(n)}function Jn(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||Kq(t,a,n)}function $r(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends id{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ffe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Bo.UNAUTHENTICATED))}shutdown(){}}class Ofe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Dfe{constructor(t){this.t=t,this.currentUser=Bo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Jn(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new hf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{ar("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Jn(typeof n.accessToken=="string",31837,{l:n}),new Gq(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jn(t===null||typeof t=="string",2055,{h:t}),new Bo(t)}}class Pfe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Bo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rfe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Pfe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Bo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lfe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Jn(this.o===void 0,3512);const n=s=>{s.error!=null&&ar("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,ar("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{ar("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new pU(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Jn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new pU(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ufe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Ufe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function vn(e,t){return e<t?-1:e>t?1:0}function Y3(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return vB(a)===vB(s)?vn(a,s):vB(a)?1:-1}return vn(e.length,t.length)}const Mfe=55296,Qfe=57343;function vB(e){const t=e.charCodeAt(0);return t>=Mfe&&t<=Qfe}function Sv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU="__name__";class qd{constructor(t,r,n){r===void 0?r=0:r>t.length&&Dr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Dr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return qd.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof qd?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=qd.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return vn(t.length,r.length)}static compareSegments(t,r){const n=qd.isNumericId(t),a=qd.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?qd.extractNumericId(t).compare(qd.extractNumericId(r)):Y3(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return o0.fromString(t.substring(4,t.length-2))}}class Ba extends qd{construct(t,r,n){return new Ba(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Xt(gt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Ba(r)}static emptyPath(){return new Ba([])}}const Hfe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ro extends qd{construct(t,r,n){return new ro(t,r,n)}static isValidIdentifier(t){return Hfe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ro.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gU}static keyField(){return new ro([gU])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Xt(gt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Xt(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Xt(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Xt(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ro(r)}static emptyPath(){return new ro([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.path=t}static fromPath(t){return new xr(Ba.fromString(t))}static fromName(t){return new xr(Ba.fromString(t).popFirst(5))}static empty(){return new xr(Ba.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ba.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ba.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xr(new Ba(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(e,t,r){if(!r)throw new Xt(gt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Vfe(e,t,r,n){if(t===!0&&n===!0)throw new Xt(gt.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function vU(e){if(!xr.isDocumentKey(e))throw new Xt(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xU(e){if(xr.isDocumentKey(e))throw new Xt(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Wq(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ZS(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dr(12329,{type:typeof e})}function tl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ZS(e);throw new Xt(gt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function zfe(e,t){if(t<=0)throw new Xt(gt.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(e,t){const r={typeString:e};return t&&(r.value=t),r}function Qy(e,t){if(!Wq(e))throw new Xt(gt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Xt(gt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=-62135596800,yU=1e6;class hr{static now(){return hr.fromMillis(Date.now())}static fromDate(t){return hr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*yU);return new hr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Xt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<bU)throw new Xt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yU}_compareTo(t){return this.seconds===t.seconds?vn(this.nanoseconds,t.nanoseconds):vn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:hr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qy(t,hr._jsonSchema))return new hr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-bU;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}hr._jsonSchemaVersion="firestore/timestamp/1.0",hr._jsonSchema={type:ei("string",hr._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{static fromTimestamp(t){return new Hr(t)}static min(){return new Hr(new hr(0,0))}static max(){return new Hr(new hr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=-1;function $fe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Hr.fromTimestamp(n===1e9?new hr(r+1,0):new hr(r,n));return new b0(a,xr.empty(),t)}function Kfe(e){return new b0(e.readTime,e.key,zb)}class b0{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new b0(Hr.min(),xr.empty(),zb)}static max(){return new b0(Hr.max(),xr.empty(),zb)}}function Gfe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=xr.comparator(e.documentKey,t.documentKey),r!==0?r:vn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qfe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wfe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(e){if(e.code!==gt.FAILED_PRECONDITION||e.message!==qfe)throw e;ar("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Dr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new St((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof St?r:St.resolve(r)}catch(r){return St.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):St.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):St.reject(r)}static resolve(t){return new St((r,n)=>{r(t)})}static reject(t){return new St((r,n)=>{n(t)})}static waitFor(t){return new St((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(t){let r=St.resolve(!1);for(const n of t)r=r.next(a=>a?St.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new St((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new St((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Xfe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function sx(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}e5.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=-1;function t5(e){return e==null}function JC(e){return e===0&&1/e==-1/0}function Yfe(e){return typeof e=="number"&&Number.isInteger(e)&&!JC(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq="";function Jfe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=wU(t)),t=Zfe(e.get(r),t);return wU(t)}function Zfe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case Xq:r+="";break;default:r+=s}}return r}function wU(e){return e+Xq+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function R0(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Yq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t,r){this.comparator=t,this.root=r||Zi.EMPTY}insert(t,r){return new Ja(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(t){return new Ja(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new T2(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new T2(this.root,t,this.comparator,!1)}getReverseIterator(){return new T2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new T2(this.root,t,this.comparator,!0)}}class T2{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Zi{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??Zi.RED,this.left=a??Zi.EMPTY,this.right=s??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new Zi(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Zi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dr(27949);return t+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1;Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Dr(57766)}get value(){throw Dr(16141)}get color(){throw Dr(16727)}get left(){throw Dr(29726)}get right(){throw Dr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new Zi(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this.comparator=t,this.data=new Ja(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new CU(this.data.getIterator())}getIteratorFrom(t){return new CU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof mi)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new mi(this.comparator);return r.data=t,r}}class CU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t){this.fields=t,t.sort(ro.comparator)}static empty(){return new Ac([])}unionWith(t){let r=new mi(ro.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Ac(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Sv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jq("Invalid base64 string: "+s):s}}(t);return new so(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new so(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}so.EMPTY_BYTE_STRING=new so("");const ehe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function y0(e){if(Jn(!!e,39018),typeof e=="string"){let t=0;const r=ehe.exec(e);if(Jn(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Fs(e.seconds),nanos:Fs(e.nanos)}}function Fs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function w0(e){return typeof e=="string"?so.fromBase64String(e):so.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="server_timestamp",eW="__type__",tW="__previous_value__",rW="__local_write_time__";function ZF(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[eW])==null?void 0:n.stringValue)===Zq}function r5(e){const t=e.mapValue.fields[tW];return ZF(t)?r5(t):t}function $b(e){const t=y0(e.mapValue.fields[rW].timestampValue);return new hr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(t,r,n,a,s,i,o,l,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const ZC="(default)";class Kb{constructor(t,r){this.projectId=t,this.database=r||ZC}static empty(){return new Kb("","")}get isDefaultDatabase(){return this.database===ZC}isEqual(t){return t instanceof Kb&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW="__type__",rhe="__max__",I2={mapValue:{}},aW="__vector__",e_="value";function E0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ZF(e)?4:ahe(e)?9007199254740991:nhe(e)?10:11:Dr(28295,{value:e})}function mA(e,t){if(e===t)return!0;const r=E0(e);if(r!==E0(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $b(e).isEqual($b(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=y0(a.timestampValue),o=y0(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return w0(a.bytesValue).isEqual(w0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Fs(a.geoPointValue.latitude)===Fs(s.geoPointValue.latitude)&&Fs(a.geoPointValue.longitude)===Fs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Fs(a.integerValue)===Fs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Fs(a.doubleValue),o=Fs(s.doubleValue);return i===o?JC(i)===JC(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return Sv(e.arrayValue.values||[],t.arrayValue.values||[],mA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(EU(i)!==EU(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!mA(i[l],o[l])))return!1;return!0}(e,t);default:return Dr(52216,{left:e})}}function Gb(e,t){return(e.values||[]).find(r=>mA(r,t))!==void 0}function Nv(e,t){if(e===t)return 0;const r=E0(e),n=E0(t);if(r!==n)return vn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return vn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Fs(s.integerValue||s.doubleValue),l=Fs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(e,t);case 3:return _U(e.timestampValue,t.timestampValue);case 4:return _U($b(e),$b(t));case 5:return Y3(e.stringValue,t.stringValue);case 6:return function(s,i){const o=w0(s),l=w0(i);return o.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=vn(o[u],l[u]);if(d!==0)return d}return vn(o.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=vn(Fs(s.latitude),Fs(i.latitude));return o!==0?o:vn(Fs(s.longitude),Fs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return SU(e.arrayValue,t.arrayValue);case 10:return function(s,i){var m,p,x,g;const o=s.fields||{},l=i.fields||{},u=(m=o[e_])==null?void 0:m.arrayValue,d=(p=l[e_])==null?void 0:p.arrayValue,f=vn(((x=u==null?void 0:u.values)==null?void 0:x.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return f!==0?f:SU(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===I2.mapValue&&i===I2.mapValue)return 0;if(s===I2.mapValue)return 1;if(i===I2.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Y3(l[f],d[f]);if(m!==0)return m;const p=Nv(o[l[f]],u[d[f]]);if(p!==0)return p}return vn(l.length,d.length)}(e.mapValue,t.mapValue);default:throw Dr(23264,{he:r})}}function _U(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vn(e,t);const r=y0(e),n=y0(t),a=vn(r.seconds,n.seconds);return a!==0?a:vn(r.nanos,n.nanos)}function SU(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Nv(r[a],n[a]);if(s)return s}return vn(r.length,n.length)}function Bv(e){return J3(e)}function J3(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=y0(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return w0(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return xr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=J3(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${J3(r.fields[i])}`;return a+"}"}(e.mapValue):Dr(61005,{value:e})}function lC(e){switch(E0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=r5(e);return t?16+lC(t):16;case 5:return 2*e.stringValue.length;case 6:return w0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+lC(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return R0(n.fields,(s,i)=>{a+=s.length+lC(i)}),a}(e.mapValue);default:throw Dr(13486,{value:e})}}function NU(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Z3(e){return!!e&&"integerValue"in e}function e6(e){return!!e&&"arrayValue"in e}function BU(e){return!!e&&"nullValue"in e}function kU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cC(e){return!!e&&"mapValue"in e}function nhe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[nW])==null?void 0:n.stringValue)===aW}function hb(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return R0(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=hb(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=hb(e.arrayValue.values[r]);return t}return{...e}}function ahe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===rhe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t){this.value=t}static empty(){return new kl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!cC(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=hb(r)}setAll(t){let r=ro.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=hb(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());cC(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return mA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];cC(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){R0(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new kl(hb(this.value))}}function sW(e){const t=[];return R0(e.fields,(r,n)=>{const a=new ro([r]);if(cC(n)){const s=sW(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Ac(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new jo(t,0,Hr.min(),Hr.min(),Hr.min(),kl.empty(),0)}static newFoundDocument(t,r,n,a){return new jo(t,1,r,Hr.min(),n,a,0)}static newNoDocument(t,r){return new jo(t,2,r,Hr.min(),Hr.min(),kl.empty(),0)}static newUnknownDocument(t,r){return new jo(t,3,r,Hr.min(),Hr.min(),kl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Hr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Hr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof jo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new jo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,r){this.position=t,this.inclusive=r}}function TU(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=xr.comparator(xr.fromName(i.referenceValue),r.key):n=Nv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function IU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!mA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t,r="asc"){this.field=t,this.dir=r}}function she(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{}class Zs extends iW{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new ohe(t,r,n):r==="array-contains"?new uhe(t,n):r==="in"?new dhe(t,n):r==="not-in"?new Ahe(t,n):r==="array-contains-any"?new fhe(t,n):new Zs(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new lhe(t,n):new che(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Nv(r,this.value)):r!==null&&E0(this.value)===E0(r)&&this.matchesComparison(Nv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sd extends iW{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new sd(t,r)}matches(t){return oW(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oW(e){return e.op==="and"}function lW(e){return ihe(e)&&oW(e)}function ihe(e){for(const t of e.filters)if(t instanceof sd)return!1;return!0}function eI(e){if(e instanceof Zs)return e.field.canonicalString()+e.op.toString()+Bv(e.value);if(lW(e))return e.filters.map(t=>eI(t)).join(",");{const t=e.filters.map(r=>eI(r)).join(",");return`${e.op}(${t})`}}function cW(e,t){return e instanceof Zs?function(n,a){return a instanceof Zs&&n.op===a.op&&n.field.isEqual(a.field)&&mA(n.value,a.value)}(e,t):e instanceof sd?function(n,a){return a instanceof sd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&cW(i,a.filters[o]),!0):!1}(e,t):void Dr(19439)}function uW(e){return e instanceof Zs?function(r){return`${r.field.canonicalString()} ${r.op} ${Bv(r.value)}`}(e):e instanceof sd?function(r){return r.op.toString()+" {"+r.getFilters().map(uW).join(" ,")+"}"}(e):"Filter"}class ohe extends Zs{constructor(t,r,n){super(t,r,n),this.key=xr.fromName(n.referenceValue)}matches(t){const r=xr.comparator(t.key,this.key);return this.matchesComparison(r)}}class lhe extends Zs{constructor(t,r){super(t,"in",r),this.keys=dW("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class che extends Zs{constructor(t,r){super(t,"not-in",r),this.keys=dW("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function dW(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>xr.fromName(n.referenceValue))}class uhe extends Zs{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return e6(r)&&Gb(r.arrayValue,this.value)}}class dhe extends Zs{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Gb(this.value.arrayValue,r)}}class Ahe extends Zs{constructor(t,r){super(t,"not-in",r)}matches(t){if(Gb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Gb(this.value.arrayValue,r)}}class fhe extends Zs{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!e6(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Gb(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hhe{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function jU(e,t=null,r=[],n=[],a=null,s=null,i=null){return new hhe(e,t,r,n,a,s,i)}function t6(e){const t=$r(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>eI(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),t5(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Bv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Bv(n)).join(",")),t.Te=r}return t.Te}function r6(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!she(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!cW(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!IU(e.startAt,t.startAt)&&IU(e.endAt,t.endAt)}function tI(e){return xr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mhe(e,t,r,n,a,s,i,o){return new ix(e,t,r,n,a,s,i,o)}function n5(e){return new ix(e)}function FU(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function AW(e){return e.collectionGroup!==null}function mb(e){const t=$r(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new mi(ro.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new qb(s,n))}),r.has(ro.keyField().canonicalString())||t.Ie.push(new qb(ro.keyField(),n))}return t.Ie}function lA(e){const t=$r(e);return t.Ee||(t.Ee=phe(t,mb(e))),t.Ee}function phe(e,t){if(e.limitType==="F")return jU(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new qb(a.field,s)});const r=e.endAt?new t_(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new t_(e.startAt.position,e.startAt.inclusive):null;return jU(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function rI(e,t){const r=e.filters.concat([t]);return new ix(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function r_(e,t,r){return new ix(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function a5(e,t){return r6(lA(e),lA(t))&&e.limitType===t.limitType}function fW(e){return`${t6(lA(e))}|lt:${e.limitType}`}function Pg(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>uW(a)).join(", ")}]`),t5(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Bv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Bv(a)).join(",")),`Target(${n})`}(lA(e))}; limitType=${e.limitType})`}function s5(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):xr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of mb(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=TU(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,mb(n),a)||n.endAt&&!function(i,o,l){const u=TU(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,mb(n),a))}(e,t)}function ghe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hW(e){return(t,r)=>{let n=!1;for(const a of mb(e)){const s=vhe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function vhe(e,t,r){const n=e.field.isKeyField()?xr.comparator(t.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Nv(l,u):Dr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Dr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){R0(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return Yq(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xhe=new Ja(xr.comparator);function Sf(){return xhe}const mW=new Ja(xr.comparator);function K1(...e){let t=mW;for(const r of e)t=t.insert(r.key,r);return t}function pW(e){let t=mW;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Im(){return pb()}function gW(){return pb()}function pb(){return new Ep(e=>e.toString(),(e,t)=>e.isEqual(t))}const bhe=new Ja(xr.comparator),yhe=new mi(xr.comparator);function xn(...e){let t=yhe;for(const r of e)t=t.add(r);return t}const whe=new mi(vn);function Ehe(){return whe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:JC(t)?"-0":t}}function vW(e){return{integerValue:""+e}}function Che(e,t){return Yfe(t)?vW(t):n6(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this._=void 0}}function _he(e,t,r){return e instanceof Wb?function(a,s){const i={fields:{[eW]:{stringValue:Zq},[rW]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&ZF(s)&&(s=r5(s)),s&&(i.fields[tW]=s),{mapValue:i}}(r,t):e instanceof kv?bW(e,t):e instanceof Xb?yW(e,t):function(a,s){const i=xW(a,s),o=OU(i)+OU(a.Ae);return Z3(i)&&Z3(a.Ae)?vW(o):n6(a.serializer,o)}(e,t)}function She(e,t,r){return e instanceof kv?bW(e,t):e instanceof Xb?yW(e,t):r}function xW(e,t){return e instanceof n_?function(n){return Z3(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Wb extends i5{}class kv extends i5{constructor(t){super(),this.elements=t}}function bW(e,t){const r=wW(t);for(const n of e.elements)r.some(a=>mA(a,n))||r.push(n);return{arrayValue:{values:r}}}class Xb extends i5{constructor(t){super(),this.elements=t}}function yW(e,t){let r=wW(t);for(const n of e.elements)r=r.filter(a=>!mA(a,n));return{arrayValue:{values:r}}}class n_ extends i5{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function OU(e){return Fs(e.integerValue||e.doubleValue)}function wW(e){return e6(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(t,r){this.field=t,this.transform=r}}function Nhe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof kv&&a instanceof kv||n instanceof Xb&&a instanceof Xb?Sv(n.elements,a.elements,mA):n instanceof n_&&a instanceof n_?mA(n.Ae,a.Ae):n instanceof Wb&&a instanceof Wb}(e.transform,t.transform)}class Bhe{constructor(t,r){this.version=t,this.transformResults=r}}class rl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new rl}static exists(t){return new rl(void 0,t)}static updateTime(t){return new rl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uC(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class o5{}function CW(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new l5(e.key,rl.none()):new Hy(e.key,e.data,rl.none());{const r=e.data,n=kl.empty();let a=new mi(ro.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new L0(e.key,n,new Ac(a.toArray()),rl.none())}}function khe(e,t,r){e instanceof Hy?function(a,s,i){const o=a.value.clone(),l=PU(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof L0?function(a,s,i){if(!uC(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=PU(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(_W(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function gb(e,t,r,n){return e instanceof Hy?function(s,i,o,l){if(!uC(s.precondition,i))return o;const u=s.value.clone(),d=RU(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof L0?function(s,i,o,l){if(!uC(s.precondition,i))return o;const u=RU(s.fieldTransforms,l,i),d=i.data;return d.setAll(_W(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return uC(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function The(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=xW(n.transform,a||null);s!=null&&(r===null&&(r=kl.empty()),r.set(n.field,s))}return r||null}function DU(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Sv(n,a,(s,i)=>Nhe(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hy extends o5{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class L0 extends o5{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _W(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function PU(e,t,r){const n=new Map;Jn(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,She(i,o,r[a]))}return n}function RU(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,_he(s,i,t))}return n}class l5 extends o5{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ihe extends o5{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jhe{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&khe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=gb(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=gb(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=gW();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=CW(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Hr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),xn())}isEqual(t){return this.batchId===t.batchId&&Sv(this.mutations,t.mutations,(r,n)=>DU(r,n))&&Sv(this.baseMutations,t.baseMutations,(r,n)=>DU(r,n))}}class a6{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){Jn(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return bhe}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new a6(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fhe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ohe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs,Bn;function Dhe(e){switch(e){case gt.OK:return Dr(64938);case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Dr(15467,{code:e})}}function SW(e){if(e===void 0)return _f("GRPC error has no .code"),gt.UNKNOWN;switch(e){case qs.OK:return gt.OK;case qs.CANCELLED:return gt.CANCELLED;case qs.UNKNOWN:return gt.UNKNOWN;case qs.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case qs.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case qs.INTERNAL:return gt.INTERNAL;case qs.UNAVAILABLE:return gt.UNAVAILABLE;case qs.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case qs.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case qs.NOT_FOUND:return gt.NOT_FOUND;case qs.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case qs.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case qs.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case qs.ABORTED:return gt.ABORTED;case qs.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case qs.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case qs.DATA_LOSS:return gt.DATA_LOSS;default:return Dr(39323,{code:e})}}(Bn=qs||(qs={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Phe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe=new o0([4294967295,4294967295],0);function LU(e){const t=Phe().encode(e),r=new Mq;return r.update(t),new Uint8Array(r.digest())}function UU(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new o0([r,n],0),new o0([a,s],0)]}class s6{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new G1(`Invalid padding: ${r}`);if(n<0)throw new G1(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new G1(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new G1(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=o0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(o0.fromNumber(n)));return a.compare(Rhe)===1&&(a=new o0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=LU(t),[n,a]=UU(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new s6(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=LU(t),[n,a]=UU(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class G1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,Vy.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new c5(Hr.min(),a,new Ja(vn),Sf(),xn())}}class Vy{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new Vy(n,r,xn(),xn(),xn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class NW{constructor(t,r){this.targetId=t,this.Ce=r}}class BW{constructor(t,r,n=so.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class MU{constructor(){this.ve=0,this.Fe=QU(),this.Me=so.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=xn(),r=xn(),n=xn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Dr(38017,{changeType:s})}}),new Vy(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=QU()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Lhe{constructor(t){this.Ge=t,this.ze=new Map,this.je=Sf(),this.Je=j2(),this.He=j2(),this.Ye=new Ja(vn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Dr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(tI(s))if(n===0){const i=new xr(s.path);this.et(r,i,jo.newNoDocument(i,Hr.min()))}else Jn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),l=o?this.ct(o,t,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=w0(n).toUint8Array()}catch(l){if(l instanceof Jq)return _v("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new s6(i,a,s)}catch(l){return _v(l instanceof G1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&tI(o.target)){const l=new xr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,jo.newNoDocument(l,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=xn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new c5(t,r,this.Ye,this.je,n);return this.je=Sf(),this.Je=j2(),this.He=j2(),this.Ye=new Ja(vn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new MU,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new mi(vn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new mi(vn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||ar("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new MU),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function j2(){return new Ja(xr.comparator)}function QU(){return new Ja(xr.comparator)}const Uhe={asc:"ASCENDING",desc:"DESCENDING"},Mhe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qhe={and:"AND",or:"OR"};class Hhe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function nI(e,t){return e.useProto3Json||t5(t)?t:{value:t}}function a_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kW(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vhe(e,t){return a_(e,t.toTimestamp())}function cA(e){return Jn(!!e,49232),Hr.fromTimestamp(function(r){const n=y0(r);return new hr(n.seconds,n.nanos)}(e))}function i6(e,t){return aI(e,t).canonicalString()}function aI(e,t){const r=function(a){return new Ba(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function TW(e){const t=Ba.fromString(e);return Jn(DW(t),10190,{key:t.toString()}),t}function sI(e,t){return i6(e.databaseId,t.path)}function xB(e,t){const r=TW(t);if(r.get(1)!==e.databaseId.projectId)throw new Xt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Xt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new xr(jW(r))}function IW(e,t){return i6(e.databaseId,t)}function zhe(e){const t=TW(e);return t.length===4?Ba.emptyPath():jW(t)}function iI(e){return new Ba(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jW(e){return Jn(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function HU(e,t,r){return{name:sI(e,t),fields:r.value.mapValue.fields}}function $he(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Dr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Jn(d===void 0||typeof d=="string",58123),so.fromBase64String(d||"")):(Jn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),so.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?gt.UNKNOWN:SW(u.code);return new Xt(d,u.message||"")}(i);r=new BW(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=xB(e,n.document.name),s=cA(n.document.updateTime),i=n.document.createTime?cA(n.document.createTime):Hr.min(),o=new kl({mapValue:{fields:n.document.fields}}),l=jo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new dC(u,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=xB(e,n.document),s=n.readTime?cA(n.readTime):Hr.min(),i=jo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new dC([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=xB(e,n.document),s=n.removedTargetIds||[];r=new dC([],s,a,null)}else{if(!("filter"in t))return Dr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Ohe(a,s),o=n.targetId;r=new NW(o,i)}}return r}function Khe(e,t){let r;if(t instanceof Hy)r={update:HU(e,t.key,t.value)};else if(t instanceof l5)r={delete:sI(e,t.key)};else if(t instanceof L0)r={update:HU(e,t.key,t.data),updateMask:t0e(t.fieldMask)};else{if(!(t instanceof Ihe))return Dr(16599,{Vt:t.type});r={verify:sI(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Wb)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof kv)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xb)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof n_)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Dr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Vhe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Dr(27497)}(e,t.precondition)),r}function Ghe(e,t){return e&&e.length>0?(Jn(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?cA(a.updateTime):cA(s);return i.isEqual(Hr.min())&&(i=cA(s)),new Bhe(i,a.transformResults||[])}(r,t))):[]}function qhe(e,t){return{documents:[IW(e,t.path)]}}function Whe(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=IW(e,a);const s=function(u){if(u.length!==0)return OW(sd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Rg(m.field),direction:Jhe(m.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=nI(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Xhe(e){let t=zhe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Jn(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const m=FW(f);return m instanceof sd&&lW(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(m=>function(x){return new qb(Lg(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,t5(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(f){const m=!!f.before,p=f.values||[];return new t_(p,m)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new t_(p,m)}(r.endAt)),mhe(t,a,i,s,o,"F",l,u)}function Yhe(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function FW(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Lg(r.unaryFilter.field);return Zs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Lg(r.unaryFilter.field);return Zs.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lg(r.unaryFilter.field);return Zs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Lg(r.unaryFilter.field);return Zs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dr(61313);default:return Dr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Zs.create(Lg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dr(58110);default:return Dr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return sd.create(r.compositeFilter.filters.map(n=>FW(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dr(1026)}}(r.compositeFilter.op))}(e):Dr(30097,{filter:e})}function Jhe(e){return Uhe[e]}function Zhe(e){return Mhe[e]}function e0e(e){return Qhe[e]}function Rg(e){return{fieldPath:e.canonicalString()}}function Lg(e){return ro.fromServerFormat(e.fieldPath)}function OW(e){return e instanceof Zs?function(r){if(r.op==="=="){if(kU(r.value))return{unaryFilter:{field:Rg(r.field),op:"IS_NAN"}};if(BU(r.value))return{unaryFilter:{field:Rg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(kU(r.value))return{unaryFilter:{field:Rg(r.field),op:"IS_NOT_NAN"}};if(BU(r.value))return{unaryFilter:{field:Rg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rg(r.field),op:Zhe(r.op),value:r.value}}}(e):e instanceof sd?function(r){const n=r.getFilters().map(a=>OW(a));return n.length===1?n[0]:{compositeFilter:{op:e0e(r.op),filters:n}}}(e):Dr(54877,{filter:e})}function t0e(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function DW(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,r,n,a,s=Hr.min(),i=Hr.min(),o=so.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(t){return new Yh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0e{constructor(t){this.yt=t}}function n0e(e){const t=Xhe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?r_(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0e{constructor(){this.Cn=new s0e}addToCollectionParentIndex(t,r){return this.Cn.add(r),St.resolve()}getCollectionParents(t,r){return St.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return St.resolve()}deleteFieldIndex(t,r){return St.resolve()}deleteAllFieldIndexes(t){return St.resolve()}createTargetIndexes(t,r){return St.resolve()}getDocumentsMatchingTarget(t,r){return St.resolve(null)}getIndexType(t,r){return St.resolve(0)}getFieldIndexes(t,r){return St.resolve([])}getNextCollectionGroupToUpdate(t){return St.resolve(null)}getMinOffset(t,r){return St.resolve(b0.min())}getMinOffsetFromCollectionGroup(t,r){return St.resolve(b0.min())}updateCollectionGroup(t,r,n){return St.resolve()}updateIndexEntries(t,r){return St.resolve()}}class s0e{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new mi(Ba.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new mi(Ba.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PW=41943040;class _l{static withCacheSize(t){return new _l(t,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_l.DEFAULT_COLLECTION_PERCENTILE=10,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_l.DEFAULT=new _l(PW,_l.DEFAULT_COLLECTION_PERCENTILE,_l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_l.DISABLED=new _l(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Tv(0)}static cr(){return new Tv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="LruGarbageCollector",i0e=1048576;function $U([e,t],[r,n]){const a=vn(e,r);return a===0?vn(t,n):a}class o0e{constructor(t){this.Ir=t,this.buffer=new mi($U),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();$U(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class l0e{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ar(zU,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){sx(r)?ar(zU,"Ignoring IndexedDB error during garbage collection: ",r):await ax(r)}await this.Vr(3e5)})}}class c0e{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return St.resolve(e5.ce);const n=new o0e(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(ar("LruGarbageCollector","Garbage collection skipped; disabled"),St.resolve(VU)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(ar("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VU):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ar("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Dg()<=gn.DEBUG&&ar("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),St.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function u0e(e,t){return new c0e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0e{constructor(){this.changes=new Ep(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,jo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?St.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0e{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&gb(n.mutation,a,Ac.empty(),hr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,xn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=xn()){const a=Im();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=K1();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Im();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,xn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=Sf();const i=pb(),o=function(){return pb()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof L0)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),gb(d.mutation,u,d.mutation.getFieldMask(),hr.now())):i.set(u.key,Ac.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new A0e(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=pb();let a=new Ja((i,o)=>i-o),s=xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||Ac.empty();d=o.applyToLocalView(u,d),n.set(l,d);const f=(a.get(o.batchId)||xn()).add(l);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,f=gW();d.forEach(m=>{if(!s.has(m)){const p=CW(r.get(m),n.get(m));p!==null&&f.set(m,p),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return St.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return xr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):AW(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):St.resolve(Im());let o=zb,l=s;return i.next(u=>St.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?St.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,xn())).next(d=>({batchId:o,changes:pW(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new xr(r)).next(n=>{let a=K1();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=K1();return this.indexManager.getCollectionParents(t,s).next(o=>St.forEach(o,l=>{const u=function(f,m){return new ix(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,m)=>{i=i.insert(f,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,jo.newInvalidDocument(d)))});let o=K1();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&gb(d.mutation,u,Ac.empty(),hr.now()),s5(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0e{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return St.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:cA(a.createTime)}}(r)),St.resolve()}getNamedQuery(t,r){return St.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:n0e(a.bundledQuery),readTime:cA(a.readTime)}}(r)),St.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0e{constructor(){this.overlays=new Ja(xr.comparator),this.qr=new Map}getOverlay(t,r){return St.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Im();return St.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),St.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),St.resolve()}getOverlaysForCollection(t,r,n){const a=Im(),s=r.length+1,i=new xr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return St.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new Ja((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Im(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Im(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return St.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Fhe(r,n));let s=this.qr.get(r);s===void 0&&(s=xn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0e{constructor(){this.sessionToken=so.EMPTY_BYTE_STRING}getSessionToken(t){return St.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,St.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.Qr=new mi(Ii.$r),this.Ur=new mi(Ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Ii(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Ii(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new xr(new Ba([])),n=new Ii(r,t),a=new Ii(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new xr(new Ba([])),n=new Ii(r,t),a=new Ii(r,t+1);let s=xn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Ii(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Ii{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return xr.comparator(t.key,r.key)||vn(t.Yr,r.Yr)}static Kr(t,r){return vn(t.Yr,r.Yr)||xr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0e{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new mi(Ii.$r)}checkEmpty(t){return St.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new jhe(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Ii(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return St.resolve(i)}lookupMutationBatch(t,r){return St.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return St.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return St.resolve(this.mutationQueue.length===0?JF:this.tr-1)}getAllMutationBatches(t){return St.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Ii(r,0),a=new Ii(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),St.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new mi(vn);return r.forEach(a=>{const s=new Ii(a,0),i=new Ii(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),St.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;xr.isDocumentKey(s)||(s=s.child(""));const i=new Ii(new xr(s),0);let o=new mi(vn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),St.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){Jn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return St.forEach(r.mutations,a=>{const s=new Ii(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Ii(r,0),a=this.Zr.firstAfterOrEqual(n);return St.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,St.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0e{constructor(t){this.ri=t,this.docs=function(){return new Ja(xr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return St.resolve(n?n.document.mutableCopy():jo.newInvalidDocument(r))}getEntries(t,r){let n=Sf();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():jo.newInvalidDocument(a))}),St.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Sf();const i=r.path,o=new xr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Gfe(Kfe(d),n)<=0||(a.has(d.key)||s5(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return St.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Dr(9500)}ii(t,r){return St.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new x0e(this)}getSize(t){return St.resolve(this.size)}}class x0e extends d0e{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),St.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0e{constructor(t){this.persistence=t,this.si=new Ep(r=>t6(r),r6),this.lastRemoteSnapshotVersion=Hr.min(),this.highestTargetId=0,this.oi=0,this._i=new o6,this.targetCount=0,this.ai=Tv.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),St.resolve()}getLastRemoteSnapshotVersion(t){return St.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return St.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),St.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),St.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Tv(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,St.resolve()}updateTargetData(t,r){return this.Pr(r),St.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,St.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),St.waitFor(s).next(()=>a)}getTargetCount(t){return St.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return St.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),St.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),St.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),St.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return St.resolve(n)}containsKey(t,r){return St.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(t,r){this.ui={},this.overlays={},this.ci=new e5(0),this.li=!1,this.li=!0,this.hi=new p0e,this.referenceDelegate=t(this),this.Pi=new b0e(this),this.indexManager=new a0e,this.remoteDocumentCache=function(a){return new v0e(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new r0e(r),this.Ii=new h0e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new m0e,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new g0e(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){ar("MemoryPersistence","Starting transaction:",t);const a=new y0e(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return St.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class y0e extends Wfe{constructor(t){super(),this.currentSequenceNumber=t}}class l6{constructor(t){this.persistence=t,this.Ri=new o6,this.Vi=null}static mi(t){return new l6(t)}get fi(){if(this.Vi)return this.Vi;throw Dr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),St.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),St.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),St.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return St.forEach(this.fi,n=>{const a=xr.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Hr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return St.or([()=>St.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class s_{constructor(t,r){this.persistence=t,this.pi=new Ep(n=>Jfe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=u0e(this,r)}static mi(t,r){return new s_(t,r)}Ei(){}di(t){return St.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return St.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?St.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Hr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),St.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),St.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),St.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),St.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=lC(t.data.value)),r}br(t,r,n){return St.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return St.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=xn(),a=xn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new c6(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0e{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Jce()?8:Xfe(Mo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new w0e;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Dg()<=gn.DEBUG&&ar("QueryEngine","SDK will not create cache indexes for query:",Pg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),St.resolve()):(Dg()<=gn.DEBUG&&ar("QueryEngine","Query:",Pg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Dg()<=gn.DEBUG&&ar("QueryEngine","The SDK decides to create cache indexes for query:",Pg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,lA(r))):St.resolve())}ys(t,r){if(FU(r))return St.resolve(null);let n=lA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=r_(r,null,"F"),n=lA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=xn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(t,r_(r,null,"F")):this.vs(t,u,r,l)}))})))}ws(t,r,n,a){return FU(r)||a.isEqual(Hr.min())?St.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?St.resolve(null):(Dg()<=gn.DEBUG&&ar("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Pg(r)),this.vs(t,i,r,$fe(a,zb)).next(o=>o))})}Ds(t,r){let n=new mi(hW(t));return r.forEach((a,s)=>{s5(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Dg()<=gn.DEBUG&&ar("QueryEngine","Using full collection scan to execute query:",Pg(r)),this.ps.getDocumentsMatchingQuery(t,r,b0.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="LocalStore",C0e=3e8;class _0e{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new Ja(vn),this.xs=new Ep(s=>t6(s),r6),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new f0e(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function S0e(e,t,r,n){return new _0e(e,t,r,n)}async function LW(e,t){const r=$r(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=xn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function N0e(e,t){const r=$r(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const f=u.batch,m=f.keys();let p=St.resolve();return m.forEach(x=>{p=p.next(()=>d.getEntry(l,x)).next(g=>{const b=u.docVersions.get(x);Jn(b!==null,48541),g.version.compareTo(b)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=xn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function UW(e){const t=$r(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function B0e(e,t){const r=$r(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const m=a.get(f);if(!m)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(so.EMPTY_BYTE_STRING,Hr.min()).withLastLimboFreeSnapshotVersion(Hr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(g,b,y){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=C0e?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let l=Sf(),u=xn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(k0e(s,i,t.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Hr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return St.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function k0e(e,t,r){let n=xn(),a=xn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=Sf();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Hr.min())?(t.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),i=i.insert(o,l)):ar(u6,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function T0e(e,t){const r=$r(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=JF),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function I0e(e,t){const r=$r(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,St.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new Yh(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function oI(e,t,r){const n=$r(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!sx(i))throw i;ar(u6,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function KU(e,t,r){const n=$r(e);let a=Hr.min(),s=xn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const f=$r(l),m=f.xs.get(d);return m!==void 0?St.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,d)}(n,i,lA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Hr.min(),r?s:xn())).next(o=>(j0e(n,ghe(t),o),{documents:o,Qs:s})))}function j0e(e,t,r){let n=e.Os.get(t)||Hr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class GU{constructor(){this.activeTargetIds=Ehe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class F0e{constructor(){this.Mo=new GU,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new GU,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0e{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU="ConnectivityMonitor";class WU{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ar(qU,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ar(qU,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F2=null;function lI(){return F2===null?F2=function(){return 268435456+Math.round(2147483648*Math.random())}():F2++,"0x"+F2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="RestConnection",D0e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P0e{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===ZC?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=lI(),o=this.zo(t,r.toUriEncodedString());ar(bB,`Sending RPC '${t}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=Uf(u);return this.Jo(t,o,l,n,d).then(f=>(ar(bB,`Received RPC '${t}' ${i}: `,f),f),f=>{throw _v(bB,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nx}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=D0e[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0e{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="WebChannelConnection";class L0e extends P0e{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=lI();return new Promise((o,l)=>{const u=new Qq;u.setWithCredentials(!0),u.listenOnce(Hq.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oC.NO_ERROR:const f=u.getResponseJson();ar(bo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case oC.TIMEOUT:ar(bo,`RPC '${t}' ${i} timed out`),l(new Xt(gt.DEADLINE_EXCEEDED,"Request time out"));break;case oC.HTTP_ERROR:const m=u.getStatus();if(ar(bo,`RPC '${t}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const x=p==null?void 0:p.error;if(x&&x.status&&x.message){const g=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(_)>=0?_:gt.UNKNOWN}(x.status);l(new Xt(g,x.message))}else l(new Xt(gt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Xt(gt.UNAVAILABLE,"Connection failed."));break;default:Dr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ar(bo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);ar(bo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=lI(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=$q(),o=zq(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");ar(bo,`Creating RPC '${t}' stream ${a}: ${d}`,l);const f=i.createWebChannel(d,l);this.I_(f);let m=!1,p=!1;const x=new R0e({Yo:b=>{p?ar(bo,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(m||(ar(bo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),m=!0),ar(bo,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),g=(b,y,_)=>{b.listen(y,S=>{try{_(S)}catch(B){setTimeout(()=>{throw B},0)}})};return g(f,$1.EventType.OPEN,()=>{p||(ar(bo,`RPC '${t}' stream ${a} transport opened.`),x.o_())}),g(f,$1.EventType.CLOSE,()=>{p||(p=!0,ar(bo,`RPC '${t}' stream ${a} transport closed`),x.a_(),this.E_(f))}),g(f,$1.EventType.ERROR,b=>{p||(p=!0,_v(bo,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),x.a_(new Xt(gt.UNAVAILABLE,"The operation could not be completed")))}),g(f,$1.EventType.MESSAGE,b=>{var y;if(!p){const _=b.data[0];Jn(!!_,16349);const S=_,B=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(B){ar(bo,`RPC '${t}' stream ${a} received error:`,B);const I=B.status;let D=function(N){const P=qs[N];if(P!==void 0)return SW(P)}(I),E=B.message;D===void 0&&(D=gt.INTERNAL,E="Unknown error status: "+I+" with message "+B.message),p=!0,x.a_(new Xt(D,E)),f.close()}else ar(bo,`RPC '${t}' stream ${a} received:`,_),x.u_(_)}}),g(o,Vq.STAT_EVENT,b=>{b.stat===X3.PROXY?ar(bo,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===X3.NOPROXY&&ar(bo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function yB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(e){return new Hhe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&ar("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="PersistentStream";class QW{constructor(t,r,n,a,s,i,o,l){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MW(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===gt.RESOURCE_EXHAUSTED?(_f(r.toString()),_f("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Xt(gt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ar(XU,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(ar(XU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U0e extends QW{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=$he(this.serializer,t),n=function(s){if(!("targetChange"in s))return Hr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Hr.min():i.readTime?cA(i.readTime):Hr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=iI(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=tI(l)?{documents:qhe(s,l)}:{query:Whe(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=kW(s,i.resumeToken);const u=nI(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Hr.min())>0){o.readTime=a_(s,i.snapshotVersion.toTimestamp());const u=nI(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Yhe(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=iI(this.serializer),r.removeTarget=t,this.q_(r)}}class M0e extends QW{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return Jn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Ghe(t.writeResults,t.commitTime),n=cA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=iI(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Khe(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0e{}class H0e extends Q0e{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Xt(gt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,aI(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xt(gt.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,aI(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(gt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class V0e{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_f(r),this.aa=!1):ar("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="RemoteStore";class z0e{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Cp(this)&&(ar(ip,"Restarting streams for network reachability change."),await async function(l){const u=$r(l);u.Ea.add(4),await zy(u),u.Ra.set("Unknown"),u.Ea.delete(4),await d5(u)}(this))})}),this.Ra=new V0e(n,a)}}async function d5(e){if(Cp(e))for(const t of e.da)await t(!0)}async function zy(e){for(const t of e.da)await t(!1)}function HW(e,t){const r=$r(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),h6(r)?f6(r):ox(r).O_()&&A6(r,t))}function d6(e,t){const r=$r(e),n=ox(r);r.Ia.delete(t),n.O_()&&VW(r,t),r.Ia.size===0&&(n.O_()?n.L_():Cp(r)&&r.Ra.set("Unknown"))}function A6(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}ox(e).Y_(t)}function VW(e,t){e.Va.Ue(t),ox(e).Z_(t)}function f6(e){e.Va=new Lhe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ox(e).start(),e.Ra.ua()}function h6(e){return Cp(e)&&!ox(e).x_()&&e.Ia.size>0}function Cp(e){return $r(e).Ea.size===0}function zW(e){e.Va=void 0}async function $0e(e){e.Ra.set("Online")}async function K0e(e){e.Ia.forEach((t,r)=>{A6(e,t)})}async function G0e(e,t){zW(e),h6(e)?(e.Ra.ha(t),f6(e)):e.Ra.set("Unknown")}async function q0e(e,t,r){if(e.Ra.set("Online"),t instanceof BW&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){ar(ip,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await i_(e,n)}else if(t instanceof dC?e.Va.Ze(t):t instanceof NW?e.Va.st(t):e.Va.tt(t),!r.isEqual(Hr.min()))try{const n=await UW(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(so.EMPTY_BYTE_STRING,d.snapshotVersion)),VW(s,l);const f=new Yh(d.target,l,u,d.sequenceNumber);A6(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){ar(ip,"Failed to raise snapshot:",n),await i_(e,n)}}async function i_(e,t,r){if(!sx(t))throw t;e.Ea.add(1),await zy(e),e.Ra.set("Offline"),r||(r=()=>UW(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ar(ip,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await d5(e)})}function $W(e,t){return t().catch(r=>i_(e,r,t))}async function A5(e){const t=$r(e),r=C0(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:JF;for(;W0e(t);)try{const a=await T0e(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,X0e(t,a)}catch(a){await i_(t,a)}KW(t)&&GW(t)}function W0e(e){return Cp(e)&&e.Ta.length<10}function X0e(e,t){e.Ta.push(t);const r=C0(e);r.O_()&&r.X_&&r.ea(t.mutations)}function KW(e){return Cp(e)&&!C0(e).x_()&&e.Ta.length>0}function GW(e){C0(e).start()}async function Y0e(e){C0(e).ra()}async function J0e(e){const t=C0(e);for(const r of e.Ta)t.ea(r.mutations)}async function Z0e(e,t,r){const n=e.Ta.shift(),a=a6.from(n,t,r);await $W(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await A5(e)}async function eme(e,t){t&&C0(e).X_&&await async function(n,a){if(function(i){return Dhe(i)&&i!==gt.ABORTED}(a.code)){const s=n.Ta.shift();C0(n).B_(),await $W(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await A5(n)}}(e,t),KW(e)&&GW(e)}async function YU(e,t){const r=$r(e);r.asyncQueue.verifyOperationInProgress(),ar(ip,"RemoteStore received new credentials");const n=Cp(r);r.Ea.add(3),await zy(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await d5(r)}async function tme(e,t){const r=$r(e);t?(r.Ea.delete(2),await d5(r)):t||(r.Ea.add(2),await zy(r),r.Ra.set("Unknown"))}function ox(e){return e.ma||(e.ma=function(r,n,a){const s=$r(r);return s.sa(),new U0e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:$0e.bind(null,e),t_:K0e.bind(null,e),r_:G0e.bind(null,e),H_:q0e.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),h6(e)?f6(e):e.Ra.set("Unknown")):(await e.ma.stop(),zW(e))})),e.ma}function C0(e){return e.fa||(e.fa=function(r,n,a){const s=$r(r);return s.sa(),new M0e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Y0e.bind(null,e),r_:eme.bind(null,e),ta:J0e.bind(null,e),na:Z0e.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await A5(e)):(await e.fa.stop(),e.Ta.length>0&&(ar(ip,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new hf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new m6(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p6(e,t){if(_f("AsyncQueue",`${t}: ${e}`),sx(e))return new Xt(gt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{static emptySet(t){return new iv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||xr.comparator(r.key,n.key):(r,n)=>xr.comparator(r.key,n.key),this.keyedMap=K1(),this.sortedSet=new Ja(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof iv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new iv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(){this.ga=new Ja(xr.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Dr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Iv{constructor(t,r,n,a,s,i,o,l,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Iv(t,r,iv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&a5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rme{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class nme{constructor(){this.queries=ZU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=$r(r),s=a.queries;a.queries=ZU(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Xt(gt.ABORTED,"Firestore shutting down"))}}function ZU(){return new Ep(e=>fW(e),a5)}async function g6(e,t){const r=$r(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new rme,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=p6(i,`Initialization of query '${Pg(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&x6(r)}async function v6(e,t){const r=$r(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function ame(e,t){const r=$r(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&x6(r)}function sme(e,t,r){const n=$r(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function x6(e){e.Ca.forEach(t=>{t.next()})}var cI,eM;(eM=cI||(cI={})).Ma="default",eM.Cache="cache";class b6{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Iv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Iv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==cI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(t){this.key=t}}class WW{constructor(t){this.key=t}}class ime{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xn(),this.mutatedKeys=xn(),this.eu=hW(t),this.tu=new iv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new JU,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const m=a.get(d),p=s5(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;m&&p?m.data.isEqual(p.data)?x!==g&&(n.track({type:3,doc:p}),b=!0):this.su(m,p)||(n.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!m&&p?(n.track({type:0,doc:p}),b=!0):m&&!p&&(n.track({type:1,doc:m}),b=!0,(l||u)&&(o=!0)),b&&(p?(i=i.add(p),s=g?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,x){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dr(20277,{Rt:b})}};return g(p)-g(x)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Iv(this.query,t.tu,s,i,t.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JU,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=xn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new WW(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new qW(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=xn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Iv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const y6="SyncEngine";class ome{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class lme{constructor(t){this.key=t,this.hu=!1}}class cme{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ep(o=>fW(o),a5),this.Iu=new Map,this.Eu=new Set,this.du=new Ja(xr.comparator),this.Au=new Map,this.Ru=new o6,this.Vu={},this.mu=new Map,this.fu=Tv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ume(e,t,r=!0){const n=tX(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await XW(n,t,r,!0),a}async function dme(e,t){const r=tX(e);await XW(r,t,!0,!1)}async function XW(e,t,r,n){const a=await I0e(e.localStore,lA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await Ame(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&HW(e.remoteStore,a),o}async function Ame(e,t,r,n,a){e.pu=(f,m,p)=>async function(g,b,y,_){let S=b.view.ru(y);S.Cs&&(S=await KU(g.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,S)));const B=_&&_.targetChanges.get(b.targetId),I=_&&_.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(S,g.isPrimaryClient,B,I);return rM(g,b.targetId,D.au),D.snapshot}(e,f,m,p);const s=await KU(e.localStore,t,!0),i=new ime(t,s.Qs),o=i.ru(s.documents),l=Vy.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,l);rM(e,r,u.au);const d=new ome(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function fme(e,t,r){const n=$r(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!a5(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await oI(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&d6(n.remoteStore,a.targetId),uI(n,a.targetId)}).catch(ax)):(uI(n,a.targetId),await oI(n.localStore,a.targetId,!0))}async function hme(e,t){const r=$r(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),d6(r.remoteStore,n.targetId))}async function mme(e,t,r){const n=wme(e);try{const a=await function(i,o){const l=$r(i),u=hr.now(),d=o.reduce((p,x)=>p.add(x.key),xn());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=Sf(),g=xn();return l.Ns.getEntries(p,d).next(b=>{x=b,x.forEach((y,_)=>{_.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,x)).next(b=>{f=b;const y=[];for(const _ of o){const S=The(_,f.get(_.key).overlayedDocument);S!=null&&y.push(new L0(_.key,S,sW(S.value.mapValue),rl.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{m=b;const y=b.applyToLocalDocumentSet(f,g);return l.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:m.batchId,changes:pW(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Ja(vn)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await $y(n,a.changes),await A5(n.remoteStore)}catch(a){const s=p6(a,"Failed to persist write");r.reject(s)}}async function YW(e,t){const r=$r(e);try{const n=await B0e(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Jn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Jn(i.hu,14607):a.removedDocuments.size>0&&(Jn(i.hu,42227),i.hu=!1))}),await $y(r,n,t)}catch(n){await ax(n)}}function tM(e,t,r){const n=$r(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=$r(i);l.onlineState=o;let u=!1;l.queries.forEach((d,f)=>{for(const m of f.Sa)m.va(o)&&(u=!0)}),u&&x6(l)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function pme(e,t,r){const n=$r(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new Ja(xr.comparator);i=i.insert(s,jo.newNoDocument(s,Hr.min()));const o=xn().add(s),l=new c5(Hr.min(),new Map,new Ja(vn),i,o);await YW(n,l),n.du=n.du.remove(s),n.Au.delete(t),w6(n)}else await oI(n.localStore,t,!1).then(()=>uI(n,t,r)).catch(ax)}async function gme(e,t){const r=$r(e),n=t.batch.batchId;try{const a=await N0e(r.localStore,t);ZW(r,n,null),JW(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $y(r,a)}catch(a){await ax(a)}}async function vme(e,t,r){const n=$r(e);try{const a=await function(i,o){const l=$r(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(Jn(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,t);ZW(n,t,r),JW(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await $y(n,a)}catch(a){await ax(a)}}function JW(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function ZW(e,t,r){const n=$r(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function uI(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||eX(e,n)})}function eX(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(d6(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),w6(e))}function rM(e,t,r){for(const n of r)n instanceof qW?(e.Ru.addReference(n.key,t),xme(e,n)):n instanceof WW?(ar(y6,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||eX(e,n.key)):Dr(19791,{wu:n})}function xme(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(ar(y6,"New document in limbo: "+r),e.Eu.add(n),w6(e))}function w6(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new xr(Ba.fromString(t)),n=e.fu.next();e.Au.set(n,new lme(r)),e.du=e.du.insert(r,n),HW(e.remoteStore,new Yh(lA(n5(r.path)),n,"TargetPurposeLimboResolution",e5.ce))}}async function $y(e,t,r){const n=$r(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){a.push(u);const f=c6.As(l.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=$r(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>St.forEach(u,m=>St.forEach(m.Es,p=>d.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>St.forEach(m.ds,p=>d.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!sx(f))throw f;ar(u6,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=d.Ms.get(m),x=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,g)}}}(n.localStore,s))}async function bme(e,t){const r=$r(e);if(!r.currentUser.isEqual(t)){ar(y6,"User change. New user:",t.toKey());const n=await LW(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Xt(gt.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await $y(r,n.Ls)}}function yme(e,t){const r=$r(e),n=r.Au.get(t);if(n&&n.hu)return xn().add(n.key);{let a=xn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function tX(e){const t=$r(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yme.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pme.bind(null,t),t.Pu.H_=ame.bind(null,t.eventManager),t.Pu.yu=sme.bind(null,t.eventManager),t}function wme(e){const t=$r(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gme.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vme.bind(null,t),t}class o_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=u5(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return S0e(this.persistence,new E0e,t.initialUser,this.serializer)}Cu(t){return new RW(l6.mi,this.serializer)}Du(t){return new F0e}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}o_.provider={build:()=>new o_};class Eme extends o_{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){Jn(this.persistence.referenceDelegate instanceof s_,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new l0e(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?_l.withCacheSize(this.cacheSizeBytes):_l.DEFAULT;return new RW(n=>s_.mi(n,r),this.serializer)}}class dI{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>tM(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=bme.bind(null,this.syncEngine),await tme(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new nme}()}createDatastore(t){const r=u5(t.databaseInfo.databaseId),n=function(s){return new L0e(s)}(t.databaseInfo);return function(s,i,o,l){return new H0e(s,i,o,l)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new z0e(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>tM(this.syncEngine,r,0),function(){return WU.v()?new WU:new O0e}())}createSyncEngine(t,r){return function(a,s,i,o,l,u,d){const f=new cme(a,s,i,o,l,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=$r(a);ar(ip,"RemoteStore shutting down."),s.Ea.add(5),await zy(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}dI.provider={build:()=>new dI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_f("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="FirestoreClient";class Cme{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Bo.UNAUTHENTICATED,this.clientId=YF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{ar(_0,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ar(_0,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=p6(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function wB(e,t){e.asyncQueue.verifyOperationInProgress(),ar(_0,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await LW(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nM(e,t){e.asyncQueue.verifyOperationInProgress();const r=await _me(e);ar(_0,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>YU(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>YU(t.remoteStore,a)),e._onlineComponents=t}async function _me(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ar(_0,"Using user provided OfflineComponentProvider");try{await wB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===gt.FAILED_PRECONDITION||a.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;_v("Error using user provided cache. Falling back to memory cache: "+r),await wB(e,new o_)}}else ar(_0,"Using default OfflineComponentProvider"),await wB(e,new Eme(void 0));return e._offlineComponents}async function rX(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ar(_0,"Using user provided OnlineComponentProvider"),await nM(e,e._uninitializedComponentsProvider._online)):(ar(_0,"Using default OnlineComponentProvider"),await nM(e,new dI))),e._onlineComponents}function Sme(e){return rX(e).then(t=>t.syncEngine)}async function l_(e){const t=await rX(e),r=t.eventManager;return r.onListen=ume.bind(null,t.syncEngine),r.onUnlisten=fme.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=dme.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=hme.bind(null,t.syncEngine),r}function Nme(e,t,r={}){const n=new hf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new E6({next:m=>{d.Nu(),i.enqueueAndForget(()=>v6(s,f));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new Xt(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new Xt(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new b6(n5(o.path),d,{includeMetadataChanges:!0,qa:!0});return g6(s,f)}(await l_(e),e.asyncQueue,t,r,n)),n.promise}function Bme(e,t,r={}){const n=new hf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new E6({next:m=>{d.Nu(),i.enqueueAndForget(()=>v6(s,f)),m.fromCache&&l.source==="server"?u.reject(new Xt(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new b6(o,d,{includeMetadataChanges:!0,qa:!0});return g6(s,f)}(await l_(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nX(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX="firestore.googleapis.com",sM=!0;class iM{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aX,this.ssl=sM}else this.host=t.host,this.ssl=t.ssl??sM;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=PW;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<i0e)throw new Xt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vfe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nX(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class f5{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Xt(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iM(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Ffe;switch(n.type){case"firstParty":return new Rfe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xt(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=aM.get(r);n&&(ar("ComponentProvider","Removing Datastore"),aM.delete(r),n.terminate())}(this),Promise.resolve()}}function kme(e,t,r,n={}){var u;e=tl(e,f5);const a=Uf(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(KS(`https://${o}`),GS("Firestore",!0)),s.host!==aX&&s.host!==o&&_v("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!v0(l,i)&&(e._setSettings(l),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Bo.MOCK_USER;else{d=eq(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new Xt(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bo(m)}e._authCredentials=new Ofe(new Gq(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Qf(this.firestore,t,this._query)}}class ms{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new l0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ms(this.firestore,t,this._key)}toJSON(){return{type:ms._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(Qy(r,ms._jsonSchema))return new ms(t,n||null,new xr(Ba.fromString(r.referencePath)))}}ms._jsonSchemaVersion="firestore/documentReference/1.0",ms._jsonSchema={type:ei("string",ms._jsonSchemaVersion),referencePath:ei("string")};class l0 extends Qf{constructor(t,r,n){super(t,r,n5(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ms(this.firestore,null,new xr(t))}withConverter(t){return new l0(this.firestore,t,this._path)}}function Ft(e,t,...r){if(e=ba(e),qq("collection","path",t),e instanceof f5){const n=Ba.fromString(t,...r);return xU(n),new l0(e,null,n)}{if(!(e instanceof ms||e instanceof l0))throw new Xt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ba.fromString(t,...r));return xU(n),new l0(e.firestore,null,n)}}function br(e,t,...r){if(e=ba(e),arguments.length===1&&(t=YF.newId()),qq("doc","path",t),e instanceof f5){const n=Ba.fromString(t,...r);return vU(n),new ms(e,null,new xr(n))}{if(!(e instanceof ms||e instanceof l0))throw new Xt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ba.fromString(t,...r));return vU(n),new ms(e.firestore,e instanceof l0?e.converter:null,new xr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="AsyncQueue";class lM{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MW(this,"async_queue_retry"),this._c=()=>{const n=yB();n&&ar(oM,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=yB();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=yB();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new hf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!sx(t))throw t;ar(oM,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,_f("INTERNAL UNHANDLED ERROR: ",cM(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=m6.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Dr(47125,{Pc:cM(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function cM(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class pA extends f5{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new lM,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lM(t),this._firestoreClient=void 0,await t}}}function sX(e,t){const r=typeof e=="object"?e:qS(),n=typeof e=="string"?e:ZC,a=Ry(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=LF("firestore");s&&kme(a,...s)}return a}function Ky(e){if(e._terminated)throw new Xt(gt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Tme(e),e._firestoreClient}function Tme(e){var n,a,s;const t=e._freezeSettings(),r=function(o,l,u,d){return new the(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nX(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Cme(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new iu(so.fromBase64String(t))}catch(r){throw new Xt(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new iu(so.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:iu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qy(t,iu._jsonSchema))return iu.fromBase64String(t.bytes)}}iu._jsonSchemaVersion="firestore/bytes/1.0",iu._jsonSchema={type:ei("string",iu._jsonSchemaVersion),bytes:ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Xt(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ro(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Xt(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Xt(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return vn(this._lat,t._lat)||vn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:uA._jsonSchemaVersion}}static fromJSON(t){if(Qy(t,uA._jsonSchema))return new uA(t.latitude,t.longitude)}}uA._jsonSchemaVersion="firestore/geoPoint/1.0",uA._jsonSchema={type:ei("string",uA._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:dA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qy(t,dA._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new dA(t.vectorValues);throw new Xt(gt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dA._jsonSchemaVersion="firestore/vectorValue/1.0",dA._jsonSchema={type:ei("string",dA._jsonSchemaVersion),vectorValues:ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=/^__.*__$/;class jme{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new L0(t,this.data,this.fieldMask,r,this.fieldTransforms):new Hy(t,this.data,r,this.fieldTransforms)}}class iX{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new L0(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function oX(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dr(40011,{Ac:e})}}class h5{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new h5({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return c_(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(oX(this.Ac)&&Ime.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fme{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||u5(t)}Cc(t,r,n,a=!1){return new h5({Ac:t,methodName:r,Dc:n,path:ro.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wy(e){const t=e._freezeSettings(),r=u5(e._databaseId);return new Fme(e._databaseId,!!t.ignoreUndefinedProperties,r)}function C6(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);N6("Data must be an object, but it was:",i,n);const o=uX(n,i);let l,u;if(s.merge)l=new Ac(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=AI(t,f,r);if(!i.contains(m))throw new Xt(gt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);AX(d,m)||d.push(m)}l=new Ac(d),u=i.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=i.fieldTransforms;return new jme(new kl(o),l,u)}class m5 extends qy{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof m5}}function Ome(e,t,r){return new h5({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _6 extends qy{_toFieldTransform(t){return new EW(t.path,new Wb)}isEqual(t){return t instanceof _6}}class S6 extends qy{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Ome(this,t,!0),n=this.vc.map(s=>lx(s,r)),a=new kv(n);return new EW(t.path,a)}isEqual(t){return t instanceof S6&&v0(this.vc,t.vc)}}function lX(e,t,r,n){const a=e.Cc(1,t,r);N6("Data must be an object, but it was:",a,n);const s=[],i=kl.empty();R0(n,(l,u)=>{const d=B6(t,l,r);u=ba(u);const f=a.yc(d);if(u instanceof m5)s.push(d);else{const m=lx(u,f);m!=null&&(s.push(d),i.set(d,m))}});const o=new Ac(s);return new iX(i,o,a.fieldTransforms)}function cX(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[AI(t,n,r)],l=[a];if(s.length%2!=0)throw new Xt(gt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(AI(t,s[m])),l.push(s[m+1]);const u=[],d=kl.empty();for(let m=o.length-1;m>=0;--m)if(!AX(u,o[m])){const p=o[m];let x=l[m];x=ba(x);const g=i.yc(p);if(x instanceof m5)u.push(p);else{const b=lx(x,g);b!=null&&(u.push(p),d.set(p,b))}}const f=new Ac(u);return new iX(d,f,i.fieldTransforms)}function Dme(e,t,r,n=!1){return lx(r,e.Cc(n?4:3,t))}function lx(e,t){if(dX(e=ba(e)))return N6("Unsupported field value:",t,e),uX(e,t);if(e instanceof qy)return function(n,a){if(!oX(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=lx(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=ba(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Che(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=hr.fromDate(n);return{timestampValue:a_(a.serializer,s)}}if(n instanceof hr){const s=new hr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:a_(a.serializer,s)}}if(n instanceof uA)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof iu)return{bytesValue:kW(a.serializer,n._byteString)};if(n instanceof ms){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:i6(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof dA)return function(i,o){return{mapValue:{fields:{[nW]:{stringValue:aW},[e_]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return n6(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${ZS(n)}`)}(e,t)}function uX(e,t){const r={};return Yq(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):R0(e,(n,a)=>{const s=lx(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function dX(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof hr||e instanceof uA||e instanceof iu||e instanceof ms||e instanceof qy||e instanceof dA)}function N6(e,t,r){if(!dX(r)||!Wq(r)){const n=ZS(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function AI(e,t,r){if((t=ba(t))instanceof Gy)return t._internalPath;if(typeof t=="string")return B6(e,t);throw c_("Field path arguments must be of type string or ",e,!1,void 0,r)}const Pme=new RegExp("[~\\*/\\[\\]]");function B6(e,t,r){if(t.search(Pme)>=0)throw c_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Gy(...t.split("."))._internalPath}catch{throw c_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function c_(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new Xt(gt.INVALID_ARGUMENT,o+e+l)}function AX(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Rme(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(p5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Rme extends fX{data(){return super.data()}}function p5(e,t){return typeof t=="string"?B6(e,t):t instanceof Gy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hX(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Xt(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k6{}class T6 extends k6{}function tr(e,t,...r){let n=[];t instanceof k6&&n.push(t),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof I6).length,o=s.filter(l=>l instanceof g5).length;if(i>1||i>0&&o>0)throw new Xt(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class g5 extends T6{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new g5(t,r,n)}_apply(t){const r=this._parse(t);return mX(t._query,r),new Qf(t.firestore,t.converter,rI(t._query,r))}_parse(t){const r=Wy(t.firestore);return function(s,i,o,l,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Xt(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){AM(f,d);const x=[];for(const g of f)x.push(dM(l,s,g));m={arrayValue:{values:x}}}else m=dM(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||AM(f,d),m=Dme(o,i,f,d==="in"||d==="not-in");return Zs.create(u,d,m)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Mn(e,t,r){const n=t,a=p5("where",e);return g5._create(a,n,r)}class I6 extends k6{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new I6(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:sd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)mX(i,l),i=rI(i,l)}(t._query,r),new Qf(t.firestore,t.converter,rI(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class j6 extends T6{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new j6(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Xt(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Xt(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qb(s,i)}(t._query,this._field,this._direction);return new Qf(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new ix(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function qr(e,t="asc"){const r=t,n=p5("orderBy",e);return j6._create(n,r)}class F6 extends T6{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new F6(t,r,n)}_apply(t){return new Qf(t.firestore,t.converter,r_(t._query,this._limit,this._limitType))}}function c0(e){return zfe("limit",e),F6._create("limit",e,"F")}function dM(e,t,r){if(typeof(r=ba(r))=="string"){if(r==="")throw new Xt(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AW(t)&&r.indexOf("/")!==-1)throw new Xt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Ba.fromString(r));if(!xr.isDocumentKey(n))throw new Xt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return NU(e,new xr(n))}if(r instanceof ms)return NU(e,r._key);throw new Xt(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZS(r)}.`)}function AM(e,t){if(!Array.isArray(e)||e.length===0)throw new Xt(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mX(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Xt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xt(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Lme{convertValue(t,r="none"){switch(E0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(w0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Dr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return R0(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[e_].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Fs(i.doubleValue));return new dA(r)}convertGeoPoint(t){return new uA(Fs(t.latitude),Fs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=r5(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp($b(t));default:return null}}convertTimestamp(t){const r=y0(t);return new hr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Ba.fromString(t);Jn(DW(n),9688,{name:t});const a=new Kb(n.get(1),n.get(3)),s=new xr(n.popFirst(5));return a.isEqual(r)||_f(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class q1{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mm extends fX{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new AC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(p5("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(gt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Mm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Mm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mm._jsonSchema={type:ei("string",Mm._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class AC extends Mm{data(t={}){return super.data(t)}}class Qm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new q1(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new AC(this._firestore,this._userDataWriter,n.key,n,new q1(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xt(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new AC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new q1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new AC(a._firestore,a._userDataWriter,o.doc.key,o.doc,new q1(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Ume(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(gt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Qm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=YF.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Ume(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(e){e=tl(e,ms);const t=tl(e.firestore,pA);return Nme(Ky(t),e._key).then(r=>pX(t,e,r))}Qm._jsonSchemaVersion="firestore/querySnapshot/1.0",Qm._jsonSchema={type:ei("string",Qm._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class D6 extends Lme{constructor(t){super(),this.firestore=t}convertBytes(t){return new iu(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ms(this.firestore,null,r)}}function ti(e){e=tl(e,Qf);const t=tl(e.firestore,pA),r=Ky(t),n=new D6(t);return hX(e._query),Bme(r,e._query).then(a=>new Qm(t,n,e,a))}function io(e,t,r){e=tl(e,ms);const n=tl(e.firestore,pA),a=O6(e.converter,t,r);return Yy(n,[C6(Wy(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,rl.none())])}function cx(e,t,r,...n){e=tl(e,ms);const a=tl(e.firestore,pA),s=Wy(a);let i;return i=typeof(t=ba(t))=="string"||t instanceof Gy?cX(s,"updateDoc",e._key,t,r,n):lX(s,"updateDoc",e._key,t),Yy(a,[i.toMutation(e._key,rl.exists(!0))])}function ni(e){return Yy(tl(e.firestore,pA),[new l5(e._key,rl.none())])}function da(e,t){const r=tl(e.firestore,pA),n=br(e),a=O6(e.converter,t);return Yy(r,[C6(Wy(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,rl.exists(!1))]).then(()=>n)}function yr(e,...t){var l,u,d;e=ba(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||uM(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(uM(t[n])){const f=t[n];t[n]=(l=f.next)==null?void 0:l.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ms)i=tl(e.firestore,pA),o=n5(e._key.path),s={next:f=>{t[n]&&t[n](pX(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=tl(e,Qf);i=tl(f.firestore,pA),o=f._query;const m=new D6(i);s={next:p=>{t[n]&&t[n](new Qm(i,m,f,p))},error:t[n+1],complete:t[n+2]},hX(e._query)}return function(m,p,x,g){const b=new E6(g),y=new b6(p,b,x);return m.asyncQueue.enqueueAndForget(async()=>g6(await l_(m),y)),()=>{b.Nu(),m.asyncQueue.enqueueAndForget(async()=>v6(await l_(m),y))}}(Ky(i),o,a,s)}function Yy(e,t){return function(n,a){const s=new hf;return n.asyncQueue.enqueueAndForget(async()=>mme(await Sme(n),a,s)),s.promise}(Ky(e),t)}function pX(e,t,r){const n=r.docs.get(t._key),a=new D6(e);return new Mm(e,a,t._key,n,new q1(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mme{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Wy(t)}set(t,r,n){this._verifyNotCommitted();const a=EB(t,this._firestore),s=O6(a.converter,r,n),i=C6(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,rl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=EB(t,this._firestore);let i;return i=typeof(r=ba(r))=="string"||r instanceof Gy?cX(this._dataReader,"WriteBatch.update",s._key,r,n,a):lX(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,rl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=EB(t,this._firestore);return this._mutations=this._mutations.concat(new l5(r._key,rl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function EB(e,t){if((e=ba(e)).firestore!==t)throw new Xt(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function P6(){return new _6("serverTimestamp")}function Qme(...e){return new S6("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(e){return Ky(e=tl(e,pA)),new Mme(e,t=>Yy(e,t))}(function(t,r=!0){(function(a){nx=a})(yp),x0(new wf("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new pA(new Dfe(n.getProvider("auth-internal")),new Lfe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xt(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kb(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),fu(hU,mU,t),fu(hU,mU,"esm2020")})();const Hme={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},gX=QF(Hme),Jy=Uq(gX),Mr=sX(gX),Vme=Object.freeze(Object.defineProperty({__proto__:null,auth:Jy,db:Mr},Symbol.toStringTag,{value:"Module"})),zme=async(e,t)=>{try{return(await pAe(Jy,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},CB=async()=>{try{await xAe(Jy)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},$me=async e=>{try{await mAe(Jy,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},vX=async e=>{try{const t=br(Mr,"usuarios",e),r=await Xy(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Kt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Kt||{}),en=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(en||{}),Sm=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Sm||{});const Kme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),ai="w-6 h-6",v5="w-24 h-24",L6=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),Gme=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),qme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Wme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),W1=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),X1=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),xX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Xme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v5,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Yme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v5,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Jme=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:v5,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Zme=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v5,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),epe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),fM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),O2=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_B=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),D2=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),SB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),hM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),tpe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),rpe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),npe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),ape=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),mM=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),spe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),NB=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),ipe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ai,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),ope=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:ai,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),pM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:ai,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),lpe=[{id:Kt.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:c.jsx(Xme,{})},{id:Kt.PROFESORADO,label:"Profesorado",icon:c.jsx(Yme,{})},{id:Kt.COORDINACION_TP,label:"Coordinacin TP",icon:c.jsx(Jme,{})},{id:Kt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(Zme,{})}],cpe={[Kt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(epe,{})},{name:"Administracin",icon:c.jsx(ape,{})},{name:"Seguimiento Curricular",icon:c.jsx(ope,{})},{name:"Acompaamiento docente",icon:c.jsx(npe,{})},{name:"Anlisis Taxonmico",icon:c.jsx(pM,{})},{name:"Interdisciplinario",icon:c.jsx(NB,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(fM,{})},{name:"Crear horarios",icon:c.jsx(_B,{})},{name:"Seguimiento de acciones pedaggicas",icon:c.jsx(D2,{})},{name:"Inclusin",icon:c.jsx(mM,{})},{name:"Calendario Acadmico",icon:c.jsx(O2,{})},{name:"Muro de Anuncios",icon:c.jsx(W1,{})},{name:"Mensajera Interna",icon:c.jsx(X1,{})},{name:"Generador de Actas",icon:c.jsx(SB,{})}],[Kt.PROFESORADO]:[{name:"Planificacin",icon:c.jsx(hM,{})},{name:"Mis Acompaamientos",icon:c.jsx(spe,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(tpe,{})},{name:"Anlisis Taxonmico",icon:c.jsx(pM,{})},{name:"Interdisciplinario",icon:c.jsx(NB,{})},{name:"Inclusin",icon:c.jsx(mM,{})},{name:"Actividades Remotas",icon:c.jsx(rpe,{})},{name:"Evaluacin de Aprendizajes",icon:c.jsx(SB,{})},{name:"Evaluaciones Formativas",icon:c.jsx(D2,{})},{name:"Calendario Acadmico",icon:c.jsx(O2,{})},{name:"Muro de Anuncios",icon:c.jsx(W1,{})},{name:"Mensajera Interna",icon:c.jsx(X1,{})},{name:"Generador de Actas",icon:c.jsx(fM,{})}],[Kt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(D2,{})},{name:"Asistencia Dual",icon:c.jsx(_B,{})},{name:"Paol",icon:c.jsx(ipe,{})},{name:"Gestin de Empresas",icon:c.jsx(Kme,{})},{name:"Calendario Acadmico",icon:c.jsx(O2,{})},{name:"Muro de Anuncios",icon:c.jsx(W1,{})},{name:"Mensajera Interna",icon:c.jsx(X1,{})},{name:"Alternancia TP",icon:""},{name:"Generador de Actas",icon:c.jsx(SB,{})}],[Kt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(hM,{})},{name:"Evaluacin Formativa",icon:c.jsx(D2,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(NB,{})},{name:"Asistencia a Empresa",icon:c.jsx(_B,{})},{name:"Calendario Acadmico",icon:c.jsx(O2,{})},{name:"Muro de Anuncios",icon:c.jsx(W1,{})},{name:"Mensajera Interna",icon:c.jsx(X1,{})}]},gM=["Currculum y Evaluacin","Convivencia Escolar","Orientacin","Gestin Pedaggica General"],P2=["Pendiente","En Proceso","Cumplida"],$g=["1 Medio","2 Medio","3 Medio","4 Medio"],Pi=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],Wa=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],fI=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],fC=["Lunes","Martes","Mircoles","Jueves","Viernes"],hI=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],upe={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},ov={[en.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[en.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[en.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[en.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},dpe=Object.values(Sm),BB=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],kB=["Vinculado","Desvinculado","En proceso","Empresa"],Hm=["3A","3B","3C","3D","4A","4B","4C","4D"],Ape=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],u_=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],vb=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],bX=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],R2=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],fpe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState("login"),u=m=>{m.preventDefault(),e(n,s)},d=m=>{m.preventDefault(),t(n),l("forgot_sent")},f=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L6,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},L2=({trigger:e,children:t,onOpen:r})=>{const[n,a]=T.useState(!1),s=T.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return T.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:e}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},vM="usuariosLiceo",hpe=({user:e,onClose:t,onSave:r})=>{const[n,a]=T.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...e,...n};try{const u=localStorage.getItem(vM);let d=u?JSON.parse(u):[];const f=d.findIndex(m=>m.id===e.id);f>-1?d[f]=l:d.push(l),localStorage.setItem(vM,JSON.stringify(d)),r(l),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},xM="usuariosLiceo",mpe=({user:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contrasea no puede estar en blanco.");return}if(n!==s){l("Las contraseas no coinciden.");return}const f={...e,password:n};try{const m=localStorage.getItem(xM);let p=m?JSON.parse(m):[];const x=p.findIndex(g=>g.id===e.id);x>-1?p[x]=f:p.push(f),localStorage.setItem(xM,JSON.stringify(p)),r(f),t()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contrasea.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ppe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gpe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),bM=e=>{const t=gpe(e);return t.charAt(0).toUpperCase()+t.slice(1)},yX=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),vpe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bpe=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},l)=>T.createElement("svg",{ref:l,...xpe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:yX("lucide",a),...!s&&!vpe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>T.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=(e,t)=>{const r=T.forwardRef(({className:n,...a},s)=>T.createElement(bpe,{ref:s,iconNode:t,className:yX(`lucide-${ppe(bM(e))}`,`lucide-${e}`,n),...a}));return r.displayName=bM(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wpe=Kn("book-open",ype);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Epe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Cpe=Kn("briefcase",Epe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Spe=Kn("building",_pe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Npe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Bpe=Kn("calendar-check",Npe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kpe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tpe=Kn("chart-column",kpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ipe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jpe=Kn("chevron-left",Ipe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fpe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ope=Kn("chevron-right",Fpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ppe=Kn("clipboard-list",Dpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rpe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lpe=Kn("clock",Rpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wX=Kn("download",Upe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mpe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Qpe=Kn("funnel",Mpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hpe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Vpe=Kn("hash",Hpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$pe=Kn("info",zpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kpe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Gpe=Kn("layout-dashboard",Kpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qpe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wpe=Kn("mail",qpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xpe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mI=Kn("map-pin",Xpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ype=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Jpe=Kn("megaphone",Ype);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zpe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ege=Kn("message-square",Zpe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tge=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EX=Kn("pencil",tge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nge=Kn("plus",rge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const age=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],sge=Kn("puzzle",age);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ige=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],oge=Kn("route",ige);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lge=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cge=Kn("save",lge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],pI=Kn("square-plus",uge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Age=Kn("star",dge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hge=Kn("target",fge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],x5=Kn("trash-2",mge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yM=Kn("user",pge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vge=Kn("users",gge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],bge=Kn("video",xge);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wM=Kn("x",yge);async function wge(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:P6()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await da(Ft(Mr,"notificaciones"),t)).id}function Ege(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(l=>{l.id&&(i.has(l.id)||i.set(l.id,l))});const o=Array.from(i.values()).sort((l,u)=>{var m,p;const d=(m=l.createdAt)!=null&&m.toDate?l.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=tr(Ft(Mr,"notificaciones"),Mn("docenteEmailLower","==",e.email.toLowerCase()),qr("createdAt","desc"));r.push(yr(i,o=>{n=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}if(e.nombreCompleto){const i=tr(Ft(Mr,"notificaciones"),Mn("docenteNombre","==",e.nombreCompleto),qr("createdAt","desc"));r.push(yr(i,o=>{a=o.docs.map(l=>({id:l.id,...l.data()})),s()}))}return()=>r.forEach(i=>i())}async function Cge(e){const t=br(Mr,"notificaciones",e);await cx(t,{leida:!0})}async function _ge(e){const t=br(Mr,"notificaciones",e);await ni(t)}const EM="anunciosMuro",CM="mensajesInternos",_M="lir-read-status",Sge=({user:e})=>{if(e.fotoUrl)return c.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},Nge=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=T.useState([]),[f,m]=T.useState([]),[p,x]=T.useState(!1),[g,b]=T.useState(!1),[y,_]=T.useState([]),S=T.useCallback(()=>{try{const N=localStorage.getItem(`${_M}-${e.id}`);return N?JSON.parse(N):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),B=T.useCallback(N=>{try{localStorage.setItem(`${_M}-${e.id}`,JSON.stringify(N))}catch(P){console.error("Failed to set read status:",P)}},[e.id]);T.useEffect(()=>{const N=JSON.parse(localStorage.getItem(EM)||"[]"),P=S();d(N.filter(F=>!P.announcements.includes(F.id)));const O=JSON.parse(localStorage.getItem(CM)||"[]");m(O.filter(F=>F.para===e.email).sort((F,M)=>new Date(M.fecha).getTime()-new Date(F.fecha).getTime()).slice(0,5))},[e.id,S,o]),T.useEffect(()=>{if(!(e!=null&&e.email))return;const N=Ege({email:e.email,nombreCompleto:e.nombreCompleto},P=>{const O=P.filter(F=>F.tipo&&(F.tipo.toLowerCase()==="pie"||F.tipo==="nueva_intervencion"));_(O)});return()=>N()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const I=()=>{const N=S(),P=JSON.parse(localStorage.getItem(EM)||"[]").map(O=>O.id);N.announcements=P,B(N),d([])},D=()=>{const N=S(),O=JSON.parse(localStorage.getItem(CM)||"[]").filter(F=>F.para===e.email).map(F=>F.id);N.messages=[...new Set([...N.messages,...O])],B(N),l()},E=y.filter(N=>!N.leida).length,C=N=>{var P;try{const O=(P=N.createdAt)!=null&&P.toDate?N.createdAt.toDate():new Date(N.createdAt);return O?O.toLocaleString("es-CL"):""}catch{return""}};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(qme,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:c.jsx(Wme,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(L2,{onOpen:I,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[c.jsx(W1,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:N.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.mensaje})]},N.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(L2,{trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[c.jsx(sge,{className:"w-5 h-5"}),E>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:c.jsxs("div",{className:"p-2 w-80",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),c.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&c.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(N=>c.jsx("li",{className:"p-2 text-sm",children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:N.titulo}),c.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:N.mensaje}),N.estudianteNombre&&c.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",c.jsx("b",{children:N.estudianteNombre})]}),c.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:C(N)})]}),c.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!N.leida&&c.jsx("button",{onClick:()=>N.id&&Cge(N.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),c.jsx("button",{onClick:()=>N.id&&_ge(N.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},N.id))]})]})}),c.jsx(L2,{onOpen:D,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(X1,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(N=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",N.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:N.asunto})]},N.id)),f.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(L2,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(Sge,{user:e})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>x(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),p&&c.jsx(hpe,{user:e,onClose:()=>x(!1),onSave:n}),g&&c.jsx(mpe,{user:e,onClose:()=>b(!1),onSave:n})]})};var gm={};const Bge={apiKey:gm.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:gm.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:gm.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:gm.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:gm.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:gm.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:gm.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},CX=z8().length===0?QF(Bge):z8()[0],Nt=sX(CX),kge=Uq(CX),Zy="reemplazos_docentes",Tge="usuarios",U6=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},Ige=e=>{const t=e.data();return{id:e.id,...t}},jge=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await da(Ft(Nt,Zy),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},Fge=async(e,t)=>{try{const r=br(Nt,Zy,e),n=await Xy(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await ni(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},Oge=(e,t,r=50)=>{try{const n=tr(Ft(Nt,Zy),Mn("userId","==",e),qr("diaAusencia","desc"),c0(r));return yr(n,a=>{const s=a.docs.map(U6);t(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},Dge=e=>{try{const t=tr(Ft(Nt,Tge),Mn("profile","==",Kt.PROFESORADO));return yr(t,n=>{const a=n.docs.map(Ige);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},Pge=async e=>{try{const t=tr(Ft(Nt,Zy),Mn("userId","==",e)),n=(await ti(t)).docs.map(U6),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadsticas:",t),new Error("No se pudieron obtener las estadsticas")}},Rge=async(e,t)=>{try{if(!t.trim())return[];const r=tr(Ft(Nt,Zy),Mn("userId","==",e),qr("diaAusencia","desc"),c0(100)),a=(await ti(r)).docs.map(U6),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}},Lge=Array.from({length:12},(e,t)=>t+1),SM={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Uge=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);T.useEffect(()=>e?Oge(e,f=>{r(f),a(!1)}):void 0,[e]);const o=T.useCallback(async d=>{try{return i(null),await jge(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),l=T.useCallback(async d=>{try{i(null),await Fge(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=T.useCallback(async d=>{try{return i(null),d.trim()?await Rge(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:l,search:u}},Mge=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0);T.useEffect(()=>Dge(i=>{t(i),n(!1)}),[]);const a=T.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},Qge=({selectedBlocks:e,onChange:t,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:Lge.map(a=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:a,checked:e.includes(a),onChange:t,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),Hge=({userId:e})=>{const[t,r]=T.useState(null),[n,a]=T.useState(!1),s=T.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await Pge(e);r(u)}catch(i){console.error("Error al cargar estadsticas:",i)}finally{a(!1)}},[e]);return T.useEffect(()=>{e&&s()},[e,s]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):t?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadsticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},Vge=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=Uge(t),{profesorNames:l,loading:u}=Mge(),[d,f]=T.useState(SM),[m,p]=T.useState(""),[x,g]=T.useState([]),[b,y]=T.useState(null),[_,S]=T.useState(!1),[B,I]=T.useState(!1);T.useEffect(()=>{(async()=>{if(!m.trim()){g(r);return}I(!0);try{const F=await s(m);g(F)}catch(F){console.error("Error en bsqueda:",F),g(r)}finally{I(!1)}})()},[r,m,s]);const D=T.useCallback(O=>{const{name:F,value:M}=O.target;f(Q=>({...Q,[F]:M}))},[]),E=T.useCallback(O=>{const F=parseInt(O.target.value,10);f(M=>{const Q=M.bloquesAfectados,J=Q.includes(F)?Q.filter(W=>W!==F):[...Q,F].sort((W,Z)=>W-Z);return{...M,bloquesAfectados:J}})},[]),C=T.useCallback(async O=>{O.preventDefault(),y(null),S(!0);const{docenteAusente:F,asignaturaAusente:M,curso:Q,diaAusencia:J,bloquesAfectados:W,docenteReemplazante:Z,asignaturaReemplazante:H}=d;if(!F||!M||!Q||!J||!Z||!H||W.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),S(!1);return}if(F===Z){y("El docente ausente y el reemplazante no pueden ser la misma persona."),S(!1);return}const z=new Date(J),G=new Date;if(G.setHours(0,0,0,0),z<G&&!window.confirm("La fecha seleccionada es anterior a hoy. Desea continuar?")){S(!1);return}try{const ne=M.trim().toLowerCase()===H.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",R={...d,resultado:ne};await n(R),f(SM);const q=ne==="Hora realizada"?" Reemplazo registrado - Hora realizada":" Reemplazo registrado - Hora cubierta, no realizada",Y=document.createElement("div");Y.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Y.textContent=q,document.body.appendChild(Y),setTimeout(()=>{document.body.contains(Y)&&document.body.removeChild(Y)},3e3)}catch(ne){console.error("Error al guardar reemplazo:",ne),y("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{S(!1)}},[d,n]),N=T.useCallback(async O=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await a(O)}catch(F){console.error("Error al eliminar reemplazo:",F),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),P="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(Hge,{userId:t}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:D,className:P,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:D,className:P,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),Pi.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:D,className:P,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Wa.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Da Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:D,className:P,disabled:_,required:!0})]}),c.jsx(Qge,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:E,disabled:_})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:D,className:P,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:D,className:P,disabled:_,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),Pi.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?" Hora realizada":" Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(b||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:b||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:_||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[_&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),_?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:O=>p(O.target.value),className:`${P} md:w-1/2 pl-10`,disabled:B}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:B?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:B?"Buscando...":`${x.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:x.length>0?x.map(O=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(O.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:O.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[O.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:O.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[O.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:O.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:O.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:O.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>N(O.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:_,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},O.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la bsqueda.":"No hay registros de reemplazos."})})})]})}),x.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los ltimos ",x.length," registros"]})]})]})},zge=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=Ft(Mr,"reemplazos"),r=tr(t,qr("fecha","desc"));return yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},$ge=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=Ft(Mr,"acompanamientos"),r=tr(t,qr("fecha","desc"));return yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},Kge=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=Ft(Mr,"calendar_events"),r=tr(t,qr("date","asc"));return yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},Hd=({title:e,value:t,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),vm=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=T.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=T.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Gge=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState(!0),[l,u]=T.useState(null);return T.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,m=()=>{d++,d>=f&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const p=zge(b=>{t(b),m()}),x=$ge(b=>{n(b),m()}),g=Kge(b=>{s(b),m()});return()=>{p(),x(),g()}}catch(p){console.error(" Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:l}},qge=({currentUser:e})=>{var f,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((m=e==null?void 0:e.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Gge(),[i,o]=T.useState(vb);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),T.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):vb)}catch(p){console.error("Error al leer rbrica personalizada",p),o(vb)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const l=T.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const x=t.filter(I=>I.resultado==="Hora realizada").length,g=p-x,b=`${(x/p*100).toFixed(1)}%`,y=(I,D)=>I.reduce((E,C)=>{const N=C[D];return typeof N=="string"&&(E[N]=(E[N]||0)+1),E},{}),_=y(t,"docenteAusente"),S=y(t,"docenteReemplazante"),B=y(t,"curso");return{totalInasistencias:p,horasRealizadas:x,horasCubiertas:g,tasaCobertura:b,inasistenciasPorDocente:Object.entries(_).map(([I,D])=>({label:I,value:D})),reemplazosPorDocente:Object.entries(S).map(([I,D])=>({label:I,value:D})),inasistenciasPorCurso:Object.entries(B).map(([I,D])=>({label:I,value:D})),distribucionResultados:[{label:"Hora Realizada",value:x},{label:"Hora Cubierta",value:g}]}},[t]),u=T.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const x=new Map;i.forEach(D=>{D.criteria.forEach(E=>{x.set(E.name,D.domain)})});let g=0,b=0;const y={},_={};r.forEach(D=>{y[D.docente]||(y[D.docente]={total:0,count:0}),Object.entries(D.rubricaResultados).forEach(([E,C])=>{g+=C,b++,y[D.docente].total+=C,y[D.docente].count++;const N=x.get(E);N&&(_[N]||(_[N]={total:0,count:0}),_[N].total+=C,_[N].count++)})});const S=b>0?(g/b).toFixed(2):"N/A",B=Object.entries(y).map(([D,E])=>({label:D,value:E.count>0?(E.total/E.count).toFixed(2):0})),I=Object.entries(_).map(([D,E])=>({label:D,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:S,desempenoPorDocente:B,desempenoPorDominio:I}},[r,i]),d=T.useMemo(()=>{const p={[en.EVALUACION]:0,[en.ACTO]:0,[en.ACTIVIDAD_FOCALIZADA]:0,[en.SALIDA_PEDAGOGICA]:0};for(const g of n)p.hasOwnProperty(g.type)&&p[g.type]++;const x=Object.entries(p).map(([g,b])=>({label:ov[g].label,value:b}));return{totalEvaluaciones:p[en.EVALUACION],totalActos:p[en.ACTO],totalActividadesFocalizadas:p[en.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[en.SALIDA_PEDAGOGICA],distribucionEventos:x}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),c.jsx("p",{children:" Calendario Acadmico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Hd,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(Hd,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(Hd,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(Hd,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(vm,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(vm,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(vm,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(vm,{title:"Distribucin de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Hd,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(Hd,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(vm,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),c.jsx(vm,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(Hd,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(Hd,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(Hd,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(Hd,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(vm,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,x)=>{var g,b;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin ttulo"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",p.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((g=ov[p.type])==null?void 0:g.color)||"bg-gray-100 text-gray-800"}`,children:((b=ov[p.type])==null?void 0:b.label)||p.type})]})},p.id||x)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var NM;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(NM||(NM={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BM;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(BM||(BM={}));var kM;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(kM||(kM={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=["user","model","function","system"];var IM;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(IM||(IM={}));var jM;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(jM||(jM={}));var FM;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(FM||(FM={}));var OM;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(OM||(OM={}));var xb;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(xb||(xb={}));var DM;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(DM||(DM={}));var PM;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(PM||(PM={}));var RM;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(RM||(RM={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class dg extends Po{constructor(t,r){super(t),this.response=r}}class _X extends Po{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class u0 extends Po{}class SX extends Po{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wge="https://generativelanguage.googleapis.com",Xge="v1beta",Yge="0.24.1",Jge="genai-js";var op;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(op||(op={}));class Zge{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Xge;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Wge}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function eve(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Jge}/${Yge}`),t.join(" ")}async function tve(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",eve(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new u0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new u0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new u0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function rve(e,t,r,n,a,s){const i=new Zge(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},ive(s)),{method:"POST",headers:await tve(i),body:a})}}async function ew(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:l}=await rve(e,t,r,n,a,s);return nve(o,l,i)}async function nve(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){ave(a,e)}return n.ok||await sve(n,e),n}function ave(e,t){let r=e;throw r.name==="AbortError"?(r=new SX(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof _X||e instanceof u0||(r=new Po(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function sve(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new _X(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function ive(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hC(e.candidates[0]))throw new dg(`${Mh(e)}`,e);return ove(e)}else if(e.promptFeedback)throw new dg(`Text not available. ${Mh(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hC(e.candidates[0]))throw new dg(`${Mh(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),LM(e)[0]}else if(e.promptFeedback)throw new dg(`Function call not available. ${Mh(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hC(e.candidates[0]))throw new dg(`${Mh(e)}`,e);return LM(e)}else if(e.promptFeedback)throw new dg(`Function call not available. ${Mh(e)}`,e)},e}function ove(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function LM(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const lve=[xb.RECITATION,xb.SAFETY,xb.LANGUAGE];function hC(e){return!!e.finishReason&&lve.includes(e.finishReason)}function Mh(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];hC(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function Yb(e){return this instanceof Yb?(this.v=e,this):new Yb(e)}function cve(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(m){n[m]&&(a[m]=function(p){return new Promise(function(x,g){s.push([m,p,x,g])>1||o(m,p)})})}function o(m,p){try{l(n[m](p))}catch(x){f(s[0][3],x)}}function l(m){m.value instanceof Yb?Promise.resolve(m.value.v).then(u,d):f(s[0][2],m)}function u(m){o("next",m)}function d(m){o("throw",m)}function f(m,p){m(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function uve(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=fve(t),[n,a]=r.tee();return{stream:Ave(n),response:dve(a)}}async function dve(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return M6(hve(t));t.push(a)}}function Ave(e){return cve(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield Yb(r.read());if(a)break;yield yield Yb(M6(n))}})}function fve(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Po("Failed to parse stream"));return}n.close();return}a+=i;let l=a.match(UM),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new Po(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),a=a.substring(l[0].length),l=a.match(UM)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new SX("Request aborted when reading from the stream"):o=new Po("Error reading from the stream"),o})}}})}function hve(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(e,t,r,n){const a=await ew(t,op.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return uve(a)}async function BX(e,t,r,n){const s=await(await ew(t,op.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:M6(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kX(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Jb(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return mve(t)}function mve(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Po("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Po("No content is provided for sending chat message.");return n?t:r}function pve(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new u0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Jb(e);n.contents=[s]}return{generateContentRequest:n}}function MM(e){let t;return e.contents?t=e:t={contents:[Jb(e)]},e.systemInstruction&&(t.systemInstruction=kX(e.systemInstruction)),t}function gve(e){return typeof e=="string"||Array.isArray(e)?{content:Jb(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vve={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function xve(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Po(`First content should be with role 'user', got ${n}`);if(!TM.includes(n))throw new Po(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(TM)}`);if(!Array.isArray(a))throw new Po("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Po("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const l of QM)l in o&&(s[l]+=1);const i=vve[n];for(const o of QM)if(!i.includes(o)&&s[o]>0)throw new Po(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function HM(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="SILENT_ERROR";class bve{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(xve(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Jb(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>BX(this._apiKey,this.model,d,f)).then(p=>{var x;if(HM(p.response)){this._history.push(u);const g=Object.assign({parts:[],role:"model"},(x=p.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(g)}else{const g=Mh(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}m=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,m}async sendMessageStream(t,r={}){var n,a,s,i,o,l;await this._sendPromise;const u=Jb(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),m=NX(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(VM)}).then(p=>p.response).then(p=>{if(HM(p)){this._history.push(u);const x=Object.assign({},p.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Mh(p);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(p=>{p.message!==VM&&console.error(p)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yve(e,t,r,n){return(await ew(t,op.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wve(e,t,r,n){return(await ew(t,op.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function Eve(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await ew(t,op.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=kX(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=MM(t),s=Object.assign(Object.assign({},this._requestOptions),r);return BX(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=MM(t),s=Object.assign(Object.assign({},this._requestOptions),r);return NX(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new bve(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=pve(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return yve(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=gve(t),a=Object.assign(Object.assign({},this._requestOptions),r);return wve(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Eve(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Po("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zM(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new u0("Cached content must contain a `name` field.");if(!t.model)throw new u0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new u0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new zM(this.apiKey,s,n)}}const Q6="horario_asignaciones",TX="horarios_generados",Cve="usuarios",IX=e=>{const t=e.data();return{id:e.id,...t}},_ve=e=>{const t=tr(Ft(Nt,Q6));return yr(t,n=>{const a=n.docs.map(s=>IX(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},Sve=async e=>{try{return(await da(Ft(Nt,Q6),e)).id}catch(t){throw console.error("Error al agregar asignacin:",t),new Error("No se pudo agregar la asignacin.")}},Nve=async e=>{try{const t=br(Nt,Q6,e);await ni(t)}catch(t){throw console.error("Error al eliminar asignacin:",t),new Error("No se pudo eliminar la asignacin.")}},$M=async e=>{try{const t=br(Nt,TX,"global");await io(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},Bve=e=>{const t=br(Nt,TX,"global");return yr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},kve=e=>{const t=tr(Ft(Nt,Cve),Mn("profile","==",Kt.PROFESORADO));return yr(t,n=>{const a=n.docs.map(s=>IX(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},Tve=({horarios:e})=>Object.keys(e).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Wa.map(t=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),c.jsx("tbody",{children:fC.map(t=>c.jsxs(ft.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+Wa.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),hI.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Wa.map(s=>{var o,l;const i=(l=(o=e[s])==null?void 0:o[t])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),Ive=()=>{const[e,t]=T.useState([]),[r,n]=T.useState({curso:"",asignatura:"",profesor:""}),[a,s]=T.useState([]),[i,o]=T.useState({}),[l,u]=T.useState(Wa[0]),[d,f]=T.useState(!1),[m,p]=T.useState(!0),[x,g]=T.useState(null),[b,y]=T.useState(null),[_,S]=T.useState(null),[B,I]=T.useState({asignatura:"",profesor:""}),[D,E]=T.useState("edicion"),[C,N]=T.useState("");T.useEffect(()=>{p(!0);const H=_ve(t),z=Bve(o),G=kve(ne=>{const R=ne.map(q=>q.nombreCompleto).sort();s(R),p(!1)});return()=>{H(),z(),G()}},[]);const P=async H=>{if(H.preventDefault(),g(null),!r.curso||!r.asignatura||!r.profesor){g("Todos los campos de la asignacin son obligatorios.");return}try{await Sve({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){g(z instanceof Error?z.message:"Error al guardar la asignacin.")}},O=async H=>{try{await Nve(H)}catch(z){g(z instanceof Error?z.message:"Error al eliminar la asignacin.")}},F=async()=>{if(e.length===0){g("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}f(!0),g(null),y(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new xs(H),G=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${fC.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(hI,null,2)}
                - Cursos del liceo: ${Wa.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(upe,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${C||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await z.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),ie=JSON.parse(te);await $M(ie),y("Horario generado y guardado con xito!")}catch(H){console.error("Error al generar horario con IA:",H),g("Ocurri un error al contactar con la IA o al procesar la respuesta. Revisa la consola para ms detalles.")}finally{f(!1)}},M=(H,z,G)=>{S({dia:H,bloque:z}),I({asignatura:(G==null?void 0:G.asignatura)||"",profesor:(G==null?void 0:G.profesor)||""})},Q=async()=>{if(!_)return;const{dia:H,bloque:z}=_,G=JSON.parse(JSON.stringify(i));G[l]||(G[l]={}),G[l][H]||(G[l][H]={}),G[l][H][z]={asignatura:B.asignatura||null,profesor:B.profesor||null};try{await $M(G),S(null)}catch(ne){g(ne instanceof Error?ne.message:"Error al guardar la edicin.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=()=>{const H=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),fC.map(z=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),c.jsx("tbody",{children:hI.map(({bloque:z,inicio:G,fin:ne})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${G} - ${ne}`})]}),fC.map(R=>{var te;const q=(_==null?void 0:_.dia)===R&&(_==null?void 0:_.bloque)===z,Y=(te=H[R])==null?void 0:te[z];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!q&&M(R,z,Y),children:q?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:B.asignatura,onChange:ie=>I(pe=>({...pe,asignatura:ie.target.value})),className:J+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:B.profesor,onChange:ie=>I(pe=>({...pe,profesor:ie.target.value})),className:J+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>S(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:Q,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Y!=null&&Y.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Y.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Y.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${R}-${z}`)})]},z))})]})})},Z=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),c.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:H=>n(z=>({...z,curso:H.target.value})),className:J,children:[c.jsx("option",{value:"",children:"Seleccione"}),Wa.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:H=>n(z=>({...z,asignatura:H.target.value})),className:J,children:[c.jsx("option",{value:"",children:"Seleccione"}),Pi.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:H=>n(z=>({...z,profesor:H.target.value})),className:J,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:e.map(H=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[H.curso," - ",H.asignatura," - ",c.jsx("strong",{children:H.profesor})]}),c.jsx("button",{onClick:()=>O(H.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},H.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:C,onChange:H=>N(H.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:J})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:F,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),x&&c.jsx("p",{className:"text-red-600",children:x}),b&&c.jsx("p",{className:"text-green-600",children:b})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:H=>u(H.target.value),className:J+" md:w-1/3",children:Wa.map(H=>c.jsx("option",{value:H,children:H},H))})]}),Object.keys(i).length>0?W():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>E("edicion"),className:`${D==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),c.jsx("button",{onClick:()=>E("global"),className:`${D==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),D==="edicion"?Z():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(Tve,{horarios:i})]})]})},b5="acciones",jve=async()=>{try{const e=tr(Ft(Mr,b5),qr("fechaRegistro","desc"));return(await ti(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedaggicas")}},Fve=async e=>{try{return{id:(await da(Ft(Mr,b5),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear accin:",t),new Error("No se pudo crear la accin pedaggica")}},KM=async(e,t)=>{try{const r=br(Mr,b5,e);await cx(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar accin:",r,"ID:",e),new Error("No se pudo actualizar la accin pedaggica")}},Ove=async e=>{try{const t=br(Mr,b5,e);await ni(t)}catch(t){throw console.error("Error al eliminar accin:",t,"ID:",e),new Error("No se pudo eliminar la accin pedaggica")}},GM={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},Dve={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},Pve=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!1),[a,s]=T.useState(null),[i,o]=T.useState(GM),[l,u]=T.useState(null),[d,f]=T.useState(""),[m,p]=T.useState(""),[x,g]=T.useState(""),b=T.useCallback(async()=>{n(!0);try{const N=await jve();t(N),s(null)}catch(N){console.error("Error al cargar acciones:",N),s("No se pudieron cargar las acciones pedaggicas.")}finally{n(!1)}},[]);T.useEffect(()=>{b()},[b]);const y=T.useCallback(N=>{const{name:P,value:O}=N.target;o(F=>({...F,[P]:O}))},[]),_=T.useCallback(()=>{o(GM),u(null),s(null)},[]),S=T.useCallback(async N=>{if(N.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, rea, descripcin y fecha de cumplimiento son obligatorios.");return}try{l?await KM(l,i):await Fve(i),await b(),_()}catch(P){console.error("Error al guardar accin:",P),s("Error al guardar la accin.")}},[i,l,b,_]),B=T.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),u(N.id),o({...N,enlaceDocumento:N.enlaceDocumento||""})},[]),I=T.useCallback(async N=>{if(window.confirm("Est seguro de que desea eliminar esta accin?"))try{await Ove(N),await b()}catch(P){console.error("Error al eliminar accin:",P),s("No se pudo eliminar la accin.")}},[b]),D=T.useCallback(async N=>{try{const P=e.find(O=>O.id===N);if(P){const F=(P2.indexOf(P.estado)+1)%P2.length,M=P2[F];await KM(N,{estado:M}),await b()}}catch(P){console.error("Error al cambiar estado:",P),s("No se pudo cambiar el estado de la accin.")}},[e,b]),E=T.useMemo(()=>e.filter(N=>{const P=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),O=m===""||N.area===m,F=x===""||N.estado===x;return P&&O&&F}),[e,d,m,x]),C="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedaggicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando accin existente.":"Registre una nueva accin de seguimiento."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"rea Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:y,className:C,children:[c.jsx("option",{value:"",children:"Seleccione un rea"}),gM.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripcin de la Accin"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la accin a realizar...",className:C})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:C})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:C})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:_,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Accin":"Registrar Accin"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>f(N.target.value),className:C+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:N=>p(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por rea"}),gM.map(N=>c.jsx("option",{value:N,children:N},N))]}),c.jsxs("select",{value:x,onChange:N=>g(N.target.value),className:C,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),P2.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripcin"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):E.length>0?E.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:N.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",N.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>D(N.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Dve[N.estado]}`,children:N.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[N.enlaceDocumento&&c.jsx("a",{href:N.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:""}),c.jsx("button",{onClick:()=>B(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>I(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},N.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},y5="planificaciones",jX="actividades_calendario",FX=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},Rve=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await da(Ft(Nt,y5),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},Lve=async(e,t,r)=>{try{const n=br(Nt,y5,e),a=await Xy(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await cx(n,{...t,fechaActualizacion:hr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},Uve=async(e,t)=>{try{const r=br(Nt,y5,e),n=await Xy(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await ni(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},Mve=(e,t)=>{const r=tr(Ft(Nt,y5),Mn("userId","==",e),qr("fechaCreacion","desc"));return yr(r,n=>{const a=n.docs.map(FX);t(a)},n=>{console.error("Error en suscripcin a planificaciones:",n)})},Qve=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:hr.fromDate(new Date),fechaActualizacion:hr.fromDate(new Date)};return(await da(Ft(Nt,jX),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Hve=(e,t)=>{const r=tr(Ft(Nt,jX),Mn("userId","==",e),qr("fecha","desc"));return yr(r,n=>{const a=n.docs.map(FX);t(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},Vve=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);return T.useEffect(()=>e?(a(!0),Mve(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await Rve(d,e)}catch(f){throw i(f.message||"Error al guardar planificacin"),f}},update:async(d,f)=>{try{i(null),await Lve(d,f,e)}catch(m){throw i(m.message||"Error al actualizar planificacin"),m}},remove:async d=>{try{i(null),await Uve(d,e)}catch(f){throw i(f.message||"Error al eliminar planificacin"),f}}}},gI=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},zve=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null);T.useEffect(()=>e?Hve(e,u=>{r(u),a(!1)}):void 0,[e]);const o=T.useCallback(async l=>{try{return i(null),await Qve(l,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},$ve=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=T.useState(e),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),t()}catch(l){console.error("Error al guardar leccin:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Kve=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=T.useState(e.progreso??0),[o,l]=T.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),l(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log(" Progreso actualizado exitosamente"))}catch(m){console.error(" Error completo:",m),alert(`Error al guardar el avance: ${m.message}`),i(e.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),c.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},Gve=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=T.useState(e),[o,l]=T.useState(!1),u=f=>{const{name:m,value:p}=f.target,[x,g]=m.split(".");i(x==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[g]:p}}):b=>({...b,[m]:p}))},d=async()=>{l(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),c.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:" Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:" Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},qve=({userId:e})=>{const{actividades:t,save:r}=zve(e),[n,a]=T.useState("list"),[s,i]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,p]=T.useState(f);T.useEffect(()=>{n==="summary"&&s&&x()},[n,s,e]);const x=async()=>{if(s)try{d(!1)}catch(D){console.error("Error al verificar evento en calendario:",D)}},g=D=>{const{name:E,value:C}=D.target;p(N=>({...N,[E]:C}))},b=(D,E,C)=>{p(N=>({...N,tareas:N.tareas.map(P=>P.id===D?{...P,[E]:C}:P)}))},y=()=>{p(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},_=D=>{p(E=>({...E,tareas:E.tareas.filter(C=>C.id!==D)}))},S=async D=>{D.preventDefault(),l(!0);const E=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripcin: ${m.descripcion}
    - Tareas: ${m.tareas.map(C=>C.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{gI("Planificacin - Actividad Calendario");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new xs(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),Q={...m,objetivo:M.replace(/(\*\*|\*)/g,"")},J=await r(Q),W={...Q,id:J};i(W),a("summary")}catch(C){console.error("Error al generar objetivo con IA:",C),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const N={...m,objetivo:"No generado"},P=await r(N),O={...N,id:P};i(O),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},B=async D=>{if(D)try{d(!0),alert("Actividad marcada como aadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:g,placeholder:"Nombre de la Actividad",className:I,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:g,className:I,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:g,className:I,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:g,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:I,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:g,placeholder:"Ubicacin",className:I,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:g,placeholder:"Participantes",className:I,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:g,placeholder:"Recursos Generales Necesarios",rows:2,className:I,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((D,E)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>_(D.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),c.jsx("textarea",{value:D.descripcion,onChange:C=>b(D.id,"descripcion",C.target.value),placeholder:`Descripcin de la Tarea ${E+1}`,rows:2,className:I,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:D.responsable,onChange:C=>b(D.id,"responsable",C.target.value),placeholder:"Responsable",className:I,required:!0,disabled:o}),c.jsx("input",{value:D.recursos,onChange:C=>b(D.id,"recursos",C.target.value),placeholder:"Recursos Necesarios",className:I,disabled:o})]})]},D.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>B(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:t.length>0?t.map(D=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Wve=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=Vve(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=T.useState(o),[d,f]=T.useState(null),[m,p]=T.useState(!1),[x,g]=T.useState(null),[b,y]=T.useState("unidad"),[_,S]=T.useState(null),[B,I]=T.useState(null),D=T.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=T.useMemo(()=>{const G=e.cursos||[],ne=new Set;return G.forEach(R=>{R.startsWith("1")?ne.add("1 Medio"):R.startsWith("2")?ne.add("2 Medio"):R.startsWith("3")?ne.add("3 Medio"):R.startsWith("4")&&ne.add("4 Medio")}),Array.from(ne)},[e.cursos]);T.useEffect(()=>{u(G=>({...G,asignatura:D[0]||"",nivel:E[0]||""})),console.log(" Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(G=>({id:G.id,autor:G.autor,tipo:G.tipo,coincideConUserId:G.autor===t}))})},[D,E,e,t,r]);const C=G=>{const{name:ne,value:R}=G.target;u(q=>({...q,[ne]:ne==="cantidadClases"?parseInt(R,10):R}))},N=()=>{const{asignatura:G,nivel:ne,nombreUnidad:R,contenidos:q,cantidadClases:Y,observaciones:te,ideasParaUnidad:ie}=l;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${G}
    - Nivel: ${ne}
    - Nombre de la Unidad: "${R}"
    - Contenidos clave a trabajar (insumo principal): "${q}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${ie||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},P=async G=>{if(G.preventDefault(),p(!0),g(null),!l.contenidos||!l.nombreUnidad){g("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{gI("Planificacin - Unidad");const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new xs(ne).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=N(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await q.generateContent({contents:[{parts:[{text:Y}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),ge={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,ge),f({...ge,id:d.id});else{const Fe=await n(ge);f({...ge,id:Fe})}}catch(ne){console.error("Error al generar planificacin con IA",ne),g("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{p(!1)}},O=async(G,ne)=>{p(!0),g(null);const R=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ne.asignatura}
    - Nivel: ${ne.nivel}
    - Objetivo de la clase: ${G.objetivosAprendizaje}
    - Contenidos: ${G.contenidosConceptuales}
    - Actividades sugeridas: ${G.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{gI("Planificacin - Utilizar Clase");const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new xs(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ie={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:R}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),ge=JSON.parse(ce),Fe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ne.asignatura,nivel:ne.nivel,contenidos:G.contenidosConceptuales,observaciones:"",nombreClase:G.actividades,duracionClase:80,momentosClase:ge,detalleLeccionOrigen:G};await n(Fe),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),y("clase")}catch(q){console.error("Error al generar plan de clase con IA",q),g("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{p(!1)}},F=G=>{G.tipo==="Unidad"&&(u({asignatura:G.asignatura,nivel:G.nivel,nombreUnidad:G.nombreUnidad,contenidos:G.contenidos,cantidadClases:G.cantidadClases,observaciones:G.observaciones,ideasParaUnidad:G.ideasParaUnidad||""}),f(G),window.scrollTo({top:0,behavior:"smooth"}))},M=async G=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await s(G),(d==null?void 0:d.id)===G&&(f(null),u(o))}catch(ne){console.error("Error al eliminar planificacin:",ne),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},Q=async G=>{if(window.confirm("Est seguro de que desea eliminar este plan de clase?"))try{await s(G),(_==null?void 0:_.id)===G&&S(null),console.log(" Plan de clase eliminado exitosamente")}catch(ne){console.error("Error al eliminar plan de clase:",ne),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},J=(G,ne)=>{d&&I({planId:d.id,lessonIndex:G,lessonData:ne})},W=async G=>{if(B)try{const{planId:ne,lessonIndex:R}=B,q=r.find(ie=>ie.id===ne&&ie.tipo==="Unidad");if(!q)return;const Y=[...q.detallesLeccion];Y[R]=G;const te={...q,detallesLeccion:Y};await a(ne,te),f(te),I(null)}catch(ne){console.error("Error al actualizar leccin:",ne),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:C,className:Z,disabled:m,children:D.length>0?D.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:C,className:Z,disabled:m,children:E.length>0?E.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:C,className:Z,placeholder:"Ej: La Clula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:C,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:Z,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:C,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:Z,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:C,className:Z,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:C,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),x&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:x})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),c.jsx(Kve,{plan:d,onEditLesson:J,onUseLesson:O,onUpdatePlan:a,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(G=>G.tipo==="Unidad").length>0?r.filter(G=>G.tipo==="Unidad").map(G=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===G.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(G.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",G.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>F(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>M(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:""})]})]})},G.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),z=()=>{const G=r.filter(ne=>ne.tipo==="Clase").sort((ne,R)=>new Date(R.fechaCreacion).getTime()-new Date(ne.fechaCreacion).getTime());return _?c.jsx(Gve,{plan:_,onBack:()=>S(null),onDelete:Q,onSave:async ne=>{try{await a(ne.id,ne),S(ne)}catch(R){console.error("Error al actualizar plan de clase:",R),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:G.length>0?G.map(ne=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ne.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ne.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ne.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>S(ne),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ne.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!e||!e.email&&!e.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&H(),b==="clase"&&z(),b==="calendario"&&c.jsx(qve,{userId:t}),B&&c.jsx($ve,{lesson:B.lessonData,onClose:()=>I(null),onSave:W,isLoading:m})]})},w5="events",Xve=async()=>{try{const e=tr(Ft(Mr,w5),qr("date","asc"));return(await ti(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},Yve=async e=>{try{return{id:(await da(Ft(Mr,w5),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},Jve=async(e,t)=>{try{const r=br(Mr,w5,e);await cx(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},Zve=async e=>{try{const t=br(Mr,w5,e);await ni(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},exe=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],qM={[en.EVALUACION]:c.jsx(wpe,{className:"h-4 w-4"}),[en.ACTO]:c.jsx(Jpe,{className:"h-4 w-4"}),[en.ACTIVIDAD_FOCALIZADA]:c.jsx(hge,{className:"h-4 w-4"}),[en.SALIDA_PEDAGOGICA]:c.jsx(oge,{className:"h-4 w-4"})},txe=e=>{switch(e.type){case en.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case en.ACTO:return`Acto: ${e.ubicacion}`;case en.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case en.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},rxe=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=T.useState({});T.useEffect(()=>{l(a||{type:en.EVALUACION,subtype:Sm.PRUEBA_PARCIAL,asignatura:Pi[0],curso:Wa[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=g=>{const{name:b,value:y}=g.target;l(_=>({..._,[b]:y}))},f=g=>{l(b=>{if(b.type===en.SALIDA_PEDAGOGICA){const y=b.cursos||[],_=y.includes(g)?y.filter(S=>S!==g):[...y,g];return{...b,cursos:_.sort()}}return b})},m=g=>{var y;g.preventDefault();let b;switch(o.type){case en.EVALUACION:{const _={date:s,type:en.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Sm.RUBRICA||o.subtype===Sm.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(_.enlace=o.enlace.trim()),b=_;break}case en.ACTO:b={date:s,type:en.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case en.ACTIVIDAD_FOCALIZADA:b={date:s,type:en.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case en.SALIDA_PEDAGOGICA:b={date:s,type:en.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),x=()=>{switch(o.type){case en.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:dpe.map(g=>c.jsx("option",{value:g,children:g},g))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:Pi.map(g=>c.jsx("option",{value:g,children:g},g))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Wa.map(g=>c.jsx("option",{value:g,children:g},g))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Sm.RUBRICA||o.subtype===Sm.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case en.ACTO:case en.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),c.jsxs("div",{className:"relative",children:[c.jsx(mI,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),c.jsxs("div",{className:"relative",children:[c.jsx(Lpe,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case en.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),c.jsxs("div",{className:"relative",children:[c.jsx(mI,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Wa.map(g=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(g),onChange:()=>f(g),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),c.jsx("span",{children:g})]},g))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:c.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:g=>g.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:c.jsx(wM,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(en).map(g=>c.jsx("option",{value:g,children:g},g))})]}),x()]})]}),c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[c.jsx(x5,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[c.jsx(wM,{className:"h-4 w-4"}),"Cancelar"]}),c.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[c.jsx(cge,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},nxe=({profile:e})=>{const[t,r]=T.useState(new Date),[n,a]=T.useState([]),[s,i]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[f,m]=T.useState(Object.values(en)),[p,x]=T.useState(!1),[g,b]=T.useState(null),[y,_]=T.useState(null),S=T.useCallback(async()=>{i(!0);try{const O=await Xve();a(O),l(null)}catch(O){console.error("Error al cargar eventos desde Firestore",O),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);T.useEffect(()=>{S()},[S]);const B=T.useMemo(()=>{const O=t.getFullYear(),F=t.getMonth(),M=new Date(O,F,1).getDay(),Q=new Date(O,F+1,0).getDate(),J=[];let W=1;for(let Z=0;Z<6;Z++){const H=[];for(let z=0;z<7;z++)Z===0&&z<M||W>Q?H.push(null):(H.push(new Date(O,F,W)),W++);if(J.push(H),W>Q)break}return J},[t]),I=O=>{m(F=>F.includes(O)?F.filter(M=>M!==O):[...F,O])},D=()=>{f.length===Object.values(en).length?m([]):m(Object.values(en))},E=O=>{e!==Kt.ESTUDIANTE&&(b(O.toISOString().split("T")[0]),_(null),x(!0))},C=(O,F)=>{F.stopPropagation(),e!==Kt.ESTUDIANTE&&(b(O.date),_(O),x(!0))},N=async O=>{d(!0);try{y?await Jve(y.id,O):await Yve(O),await S(),x(!1)}catch(F){console.error("Error al guardar evento:",F);const M=F instanceof Error?F.message:"Error desconocido";l(`Error al guardar el evento: ${M}`)}finally{d(!1)}},P=async()=>{if(y){d(!0);try{await Zve(y.id),await S(),x(!1)}catch(O){console.error("Error al eliminar evento:",O);const F=O instanceof Error?O.message:"Error desconocido";l(`No se pudo eliminar el evento: ${F}`)}finally{d(!1)}}};return c.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),c.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),c.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&c.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),o&&c.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&c.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[c.jsx($pe,{className:"h-5 w-5 mt-0.5"}),c.jsx("p",{children:"No hay eventos registrados en la nube."})]}),c.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[c.jsx(Qpe,{className:"h-4 w-4"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:D,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(en).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(en).map(O=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(O)?`shadow-sm ${ov[O].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[c.jsx("input",{type:"checkbox",checked:f.includes(O),onChange:()=>I(O),className:"hidden"}),c.jsx("span",{className:"shrink-0",children:qM[O]}),c.jsx("span",{children:ov[O].label})]},O))]})]}),c.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(jpe,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:c.jsx(Ope,{className:"h-5 w-5"})})]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:exe.map(O=>c.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:O},O))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:B.flat().map((O,F)=>{const M=O&&O.toDateString()===new Date().toDateString(),Q=O==null?void 0:O.toISOString().split("T")[0],J=Q?n.filter(W=>W.date===Q&&f.includes(W.type)):[];return c.jsx("div",{onClick:()=>O&&E(O),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${O?e!==Kt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:O&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${M?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:O.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:J.map(W=>c.jsxs("div",{onClick:Z=>C(W,Z),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${ov[W.type].color}`,children:[c.jsx("span",{className:"shrink-0",children:qM[W.type]}),c.jsx("span",{className:"truncate",children:txe(W)})]},W.id))}),e!==Kt.ESTUDIANTE&&c.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:c.jsx(nge,{className:"h-4 w-4"})})]})},F)})})]}),p&&c.jsx(rxe,{isOpen:p,onClose:()=>x(!1),onSave:N,onDelete:P,event:y,date:g,isLoading:u})]})},E5="anuncios",axe=async()=>{try{const e=tr(Ft(Mr,E5),qr("fechaPublicacion","desc"));return(await ti(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},sxe=async e=>{try{return{id:(await da(Ft(Mr,E5),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},ixe=async(e,t)=>{try{const r=br(Mr,E5,e);await cx(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},oxe=async e=>{try{const t=br(Mr,E5,e);await ni(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},WM=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],lxe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=T.useState({tipo:"Todos",cursos:[]}),f=T.useCallback(async()=>{a(!0);try{const E=await axe();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);T.useEffect(()=>{f()},[f]);const m=E=>{const{name:C,value:N}=E.target;l(P=>({...P,[C]:N}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},x=E=>{d(C=>{var P;if(C.tipo!=="Cursos")return C;const N=(P=C.cursos)!=null&&P.includes(E)?C.cursos.filter(O=>O!==E):[...C.cursos||[],E];return{...C,cursos:N}})},g=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const C={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await sxe(C),await f(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(C){console.error("Error al crear anuncio:",C),i("Error al publicar el anuncio en la nube.")}},b=async E=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await oxe(E),await f()}catch(C){console.error("Error al eliminar anuncio:",C),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const C=t.find(N=>N.id===E);C&&(await ixe(E,{destacado:!C.destacado}),await f())}catch(C){console.error("Error al actualizar anuncio:",C),i("No se pudo actualizar el estado del anuncio en la nube.")}},_=T.useMemo(()=>[...t].sort((E,C)=>E.destacado&&!C.destacado?-1:!E.destacado&&C.destacado?1:new Date(C.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),S=T.useMemo(()=>{const E=e.profile,C=e.curso;return _.filter(N=>{if(E===Kt.SUBDIRECCION)return!0;if(!N.destinatarios)return E!==Kt.ESTUDIANTE;const{tipo:P,cursos:O}=N.destinatarios;return P==="Todos"||P==="Profesores"&&E===Kt.PROFESORADO||P==="Coordinacin TP"&&E===Kt.COORDINACION_TP?!0:P==="Cursos"?E===Kt.ESTUDIANTE?O==null?void 0:O.includes(C||""):!0:!1})},[_,e]),B=E=>e.profile===Kt.ESTUDIANTE?!1:e.profile===Kt.SUBDIRECCION||e.profile===E.profileCreador,I=()=>e.profile===Kt.SUBDIRECCION||e.profile===Kt.PROFESORADO,D="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Kt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(E=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinacin TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Wa.map(E=>{var C;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(C=u.cursos)==null?void 0:C.includes(E),onChange:()=>x(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:D})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!n&&S.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&S.length>0&&S.map((E,C)=>{const N=WM[C%WM.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[E.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:E.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[I()&&c.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:""})}),B(E)&&c.jsx("button",{onClick:()=>b(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},OX="api_logs",cxe=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:hr.fromDate(new Date)};await da(Ft(Nt,OX),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},uxe=e=>{const t=tr(Ft(Nt,OX),qr("timestamp","desc"));return yr(t,n=>{const a=n.docs.map(s=>{var o,l;const i=s.data();return{id:s.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},S0=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}cxe(e,t)},H6="actas_de_reunion",dxe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},Axe=e=>{const t=tr(Ft(Nt,H6),qr("fechaCreacion","desc"));return yr(t,n=>{const a=n.docs.map(s=>dxe(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},fxe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:hr.fromDate(new Date(e.fechaCreacion))};return(await da(Ft(Nt,H6),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},hxe=async e=>{try{const t=br(Nt,H6,e);await ni(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},DX=window.SpeechRecognition||window.webkitSpeechRecognition,XM=!!DX,mxe=({isListening:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),pxe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(null),[s,i]=T.useState({tipoReunion:BB[0],asistentes:"",textoReunion:""}),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[f,m]=T.useState(!0),[p,x]=T.useState(null),g=T.useRef(null);T.useEffect(()=>{m(!0);const E=Axe(C=>{r(C),!n&&C.length>0&&a(C[0]),m(!1)});return()=>E()},[n]);const b=E=>{const{name:C,value:N}=E.target;i(P=>({...P,[C]:N}))},y=T.useCallback(()=>{var E;if(!XM){x("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=g.current)==null||E.stop():(g.current=new DX,g.current.lang="es-CL",g.current.continuous=!0,g.current.interimResults=!0,g.current.onresult=C=>{let N="";for(let P=C.resultIndex;P<C.results.length;++P)C.results[P].isFinal&&(N+=C.results[P][0].transcript+". ");i(P=>({...P,textoReunion:P.textoReunion+N}))},g.current.onstart=()=>l(!0),g.current.onend=()=>l(!1),g.current.onerror=C=>{console.error("Speech recognition error",C.error),x(`Error de reconocimiento: ${C.error}`),l(!1)},g.current.start())},[o]),_=async E=>{E.preventDefault();const{tipoReunion:C,asistentes:N,textoReunion:P}=s;if(!C||!N.trim()||!P.trim()){x("Todos los campos son obligatorios.");return}d(!0),x(null);try{S0("Generador de Actas");const O="",M=new globalThis.GoogleGenerativeAI(O).getGenerativeModel({model:"gemini-pro"}),Q=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${P}"
                
                Asistentes a la reunin para referencia de nombres: ${N}
            `,H=(await(await M.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(H),G={fechaCreacion:new Date().toISOString(),...s,...z},ne=await fxe(G,e);i({tipoReunion:BB[0],asistentes:"",textoReunion:""})}catch(O){console.error("Error al analizar acta con IA:",O),x("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{d(!1)}},S=async E=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await hxe(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(C){console.error("Error deleting acta:",C),alert("No se pudo eliminar el acta.")}},B=E=>{a(E)},I=E=>E.temas||E.acuerdos||E.plazos||E.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),E.temas&&E.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((N,P)=>c.jsx("li",{children:N},P))})]}),E.acuerdos&&E.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((N,P)=>c.jsx("li",{children:N},P))})]}),E.plazos&&E.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((N,P)=>c.jsx("li",{children:N},P))})]}),E.responsables&&E.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((N,P)=>c.jsx("li",{children:N},P))})]})]}):null,D="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),c.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:D,children:BB.map(E=>c.jsx("option",{value:E,children:E},E))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:D})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:D}),XM&&c.jsx("button",{type:"button",onClick:y,title:o?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(mxe,{isListening:o})})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>c.jsxs("button",{onClick:()=>B(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>S(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,C)=>E.trim()&&c.jsx("li",{children:E.trim()},C))}),I(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},gxe="modulepreload",vxe=function(e){return"/"+e},YM={},d_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=vxe(u),u in YM)return;YM[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":gxe,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,x)=>{m.addEventListener("load",p),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ca(e){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(e)}var Ro=Uint8Array,fc=Uint16Array,V6=Int32Array,C5=new Ro([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_5=new Ro([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vI=new Ro([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PX=function(e,t){for(var r=new fc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new V6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},RX=PX(C5,2),LX=RX.b,xI=RX.r;LX[28]=258,xI[258]=28;var UX=PX(_5,0),xxe=UX.b,JM=UX.r,bI=new fc(32768);for(var Oa=0;Oa<32768;++Oa){var Ih=(Oa&43690)>>1|(Oa&21845)<<1;Ih=(Ih&52428)>>2|(Ih&13107)<<2,Ih=(Ih&61680)>>4|(Ih&3855)<<4,bI[Oa]=((Ih&65280)>>8|(Ih&255)<<8)>>1}var AA=function(e,t,r){for(var n=e.length,a=0,s=new fc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new fc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new fc(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)o[bI[f]>>l]=u}else for(o=new fc(n),a=0;a<n;++a)e[a]&&(o[a]=bI[i[e[a]-1]++]>>15-e[a]);return o},N0=new Ro(288);for(var Oa=0;Oa<144;++Oa)N0[Oa]=8;for(var Oa=144;Oa<256;++Oa)N0[Oa]=9;for(var Oa=256;Oa<280;++Oa)N0[Oa]=7;for(var Oa=280;Oa<288;++Oa)N0[Oa]=8;var Zb=new Ro(32);for(var Oa=0;Oa<32;++Oa)Zb[Oa]=5;var bxe=AA(N0,9,0),yxe=AA(N0,9,1),wxe=AA(Zb,5,0),Exe=AA(Zb,5,1),TB=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},zu=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},IB=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},z6=function(e){return(e+7)/8|0},MX=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Ro(e.subarray(t,r))},Cxe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qu=function(e,t,r){var n=new Error(t||Cxe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,qu),!r)throw n;return n},_xe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Ro(0);var i=!r,o=i||t.i!=2,l=t.i;i&&(r=new Ro(a*3));var u=function(Fe){var re=r.length;if(Fe>re){var Ne=new Ro(Math.max(re*2,Fe));Ne.set(r),r=Ne}},d=t.f||0,f=t.p||0,m=t.b||0,p=t.l,x=t.d,g=t.m,b=t.n,y=a*8;do{if(!p){d=zu(e,f,1);var _=zu(e,f+1,3);if(f+=3,_)if(_==1)p=yxe,x=Exe,g=9,b=5;else if(_==2){var D=zu(e,f,31)+257,E=zu(e,f+10,15)+4,C=D+zu(e,f+5,31)+1;f+=14;for(var N=new Ro(C),P=new Ro(19),O=0;O<E;++O)P[vI[O]]=zu(e,f+O*3,7);f+=E*3;for(var F=TB(P),M=(1<<F)-1,Q=AA(P,F,1),O=0;O<C;){var J=Q[zu(e,f,M)];f+=J&15;var S=J>>4;if(S<16)N[O++]=S;else{var W=0,Z=0;for(S==16?(Z=3+zu(e,f,3),f+=2,W=N[O-1]):S==17?(Z=3+zu(e,f,7),f+=3):S==18&&(Z=11+zu(e,f,127),f+=7);Z--;)N[O++]=W}}var H=N.subarray(0,D),z=N.subarray(D);g=TB(H),b=TB(z),p=AA(H,g,1),x=AA(z,b,1)}else qu(1);else{var S=z6(f)+4,B=e[S-4]|e[S-3]<<8,I=S+B;if(I>a){l&&qu(0);break}o&&u(m+B),r.set(e.subarray(S,I),m),t.b=m+=B,t.p=f=I*8,t.f=d;continue}if(f>y){l&&qu(0);break}}o&&u(m+131072);for(var G=(1<<g)-1,ne=(1<<b)-1,R=f;;R=f){var W=p[IB(e,f)&G],q=W>>4;if(f+=W&15,f>y){l&&qu(0);break}if(W||qu(2),q<256)r[m++]=q;else if(q==256){R=f,p=null;break}else{var Y=q-254;if(q>264){var O=q-257,te=C5[O];Y=zu(e,f,(1<<te)-1)+LX[O],f+=te}var ie=x[IB(e,f)&ne],pe=ie>>4;ie||qu(3),f+=ie&15;var z=xxe[pe];if(pe>3){var te=_5[pe];z+=IB(e,f)&(1<<te)-1,f+=te}if(f>y){l&&qu(0);break}o&&u(m+131072);var oe=m+Y;if(m<z){var ce=s-z,ge=Math.min(z,oe);for(ce+m<0&&qu(3);m<ge;++m)r[m]=n[ce+m]}for(;m<oe;++m)r[m]=r[m-z]}}t.l=p,t.p=R,t.b=m,t.f=d,p&&(d=1,t.m=g,t.d=x,t.n=b)}while(!d);return m!=r.length&&i?MX(r,0,m):r.subarray(0,m)},ef=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},x1=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},jB=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:HX,l:0};if(a==1){var i=new Ro(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(I,D){return I.f-D.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,n=1;n<a;++n)s[n].s>m&&(m=s[n].s);var p=new fc(m+1),x=yI(r[d-1],p,0);if(x>t){var n=0,g=0,b=x-t,y=1<<b;for(s.sort(function(D,E){return p[E.s]-p[D.s]||D.f-E.f});n<a;++n){var _=s[n].s;if(p[_]>t)g+=y-(1<<x-p[_]),p[_]=t;else break}for(g>>=b;g>0;){var S=s[n].s;p[S]<t?g-=1<<t-p[S]++-1:++n}for(;n>=0&&g;--n){var B=s[n].s;p[B]==t&&(--p[B],++g)}x=t}return{t:new Ro(p),l:x}},yI=function(e,t,r){return e.s==-1?Math.max(yI(e.l,t,r+1),yI(e.r,t,r+1)):t[e.s]=r},ZM=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new fc(++t),n=0,a=e[0],s=1,i=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},b1=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},QX=function(e,t,r){var n=r.length,a=z6(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},e7=function(e,t,r,n,a,s,i,o,l,u,d){ef(t,d++,r),++a[256];for(var f=jB(a,15),m=f.t,p=f.l,x=jB(s,15),g=x.t,b=x.l,y=ZM(m),_=y.c,S=y.n,B=ZM(g),I=B.c,D=B.n,E=new fc(19),C=0;C<_.length;++C)++E[_[C]&31];for(var C=0;C<I.length;++C)++E[I[C]&31];for(var N=jB(E,7),P=N.t,O=N.l,F=19;F>4&&!P[vI[F-1]];--F);var M=u+5<<3,Q=b1(a,N0)+b1(s,Zb)+i,J=b1(a,m)+b1(s,g)+i+14+3*F+b1(E,P)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&M<=Q&&M<=J)return QX(t,d,e.subarray(l,l+u));var W,Z,H,z;if(ef(t,d,1+(J<Q)),d+=2,J<Q){W=AA(m,p,0),Z=m,H=AA(g,b,0),z=g;var G=AA(P,O,0);ef(t,d,S-257),ef(t,d+5,D-1),ef(t,d+10,F-4),d+=14;for(var C=0;C<F;++C)ef(t,d+3*C,P[vI[C]]);d+=3*F;for(var ne=[_,I],R=0;R<2;++R)for(var q=ne[R],C=0;C<q.length;++C){var Y=q[C]&31;ef(t,d,G[Y]),d+=P[Y],Y>15&&(ef(t,d,q[C]>>5&127),d+=q[C]>>12)}}else W=bxe,Z=N0,H=wxe,z=Zb;for(var C=0;C<o;++C){var te=n[C];if(te>255){var Y=te>>18&31;x1(t,d,W[Y+257]),d+=Z[Y+257],Y>7&&(ef(t,d,te>>23&31),d+=C5[Y]);var ie=te&31;x1(t,d,H[ie]),d+=z[ie],ie>3&&(x1(t,d,te>>5&8191),d+=_5[ie])}else x1(t,d,W[te]),d+=Z[te]}return x1(t,d,W[256]),d+Z[256]},Sxe=new V6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HX=new Ro(0),Nxe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Ro(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(l[0]=s.r>>3);for(var f=Sxe[t-1],m=f>>13,p=f&8191,x=(1<<r)-1,g=s.p||new fc(32768),b=s.h||new fc(x+1),y=Math.ceil(r/3),_=2*y,S=function(Oe){return(e[Oe]^e[Oe+1]<<y^e[Oe+2]<<_)&x},B=new V6(25e3),I=new fc(288),D=new fc(32),E=0,C=0,N=s.i||0,P=0,O=s.w||0,F=0;N+2<i;++N){var M=S(N),Q=N&32767,J=b[M];if(g[Q]=J,b[M]=Q,O<=N){var W=i-N;if((E>7e3||P>24576)&&(W>423||!u)){d=e7(e,l,0,B,I,D,C,P,F,N-F,d),P=E=C=0,F=N;for(var Z=0;Z<286;++Z)I[Z]=0;for(var Z=0;Z<30;++Z)D[Z]=0}var H=2,z=0,G=p,ne=Q-J&32767;if(W>2&&M==S(N-ne))for(var R=Math.min(m,W)-1,q=Math.min(32767,N),Y=Math.min(258,W);ne<=q&&--G&&Q!=J;){if(e[N+H]==e[N+H-ne]){for(var te=0;te<Y&&e[N+te]==e[N+te-ne];++te);if(te>H){if(H=te,z=ne,te>R)break;for(var ie=Math.min(ne,te-2),pe=0,Z=0;Z<ie;++Z){var oe=N-ne+Z&32767,ce=g[oe],ge=oe-ce&32767;ge>pe&&(pe=ge,J=oe)}}}Q=J,J=g[Q],ne+=Q-J&32767}if(z){B[P++]=268435456|xI[H]<<18|JM[z];var Fe=xI[H]&31,re=JM[z]&31;C+=C5[Fe]+_5[re],++I[257+Fe],++D[re],O=N+H,++E}else B[P++]=e[N],++I[e[N]]}}for(N=Math.max(N,O);N<i;++N)B[P++]=e[N],++I[e[N]];d=e7(e,l,u,B,I,D,C,P,F,N-F,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=b,s.p=g,s.i=N,s.w=O)}else{for(var N=s.w||0;N<i+u;N+=65535){var Ne=N+65535;Ne>=i&&(l[d/8|0]=u,Ne=i),d=QX(l,d+1,e.subarray(N,Ne))}s.i=i}return MX(o,0,n+z6(d)+a)},VX=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Bxe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Ro(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return Nxe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},zX=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},kxe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=VX();a.p(t.dictionary),zX(e,2,a.d())}},Txe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&qu(6,"invalid zlib data"),(e[1]>>5&1)==1&&qu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function wI(e,t){t||(t={});var r=VX();r.p(e);var n=Bxe(e,t,t.dictionary?6:2,4);return kxe(n,t),zX(n,n.length-4,r.d()),n}function Ixe(e,t){return _xe(e.subarray(Txe(e),-4),{i:2},t,t)}var jxe=typeof TextDecoder<"u"&&new TextDecoder,Fxe=0;try{jxe.decode(HX,{stream:!0}),Fxe=1}catch{}var jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function FB(){jr.console&&typeof jr.console.log=="function"&&jr.console.log.apply(jr.console,arguments)}var wa={log:FB,warn:function(e){jr.console&&(typeof jr.console.warn=="function"?jr.console.warn.apply(jr.console,arguments):FB.call(null,arguments))},error:function(e){jr.console&&(typeof jr.console.error=="function"?jr.console.error.apply(jr.console,arguments):FB(e))}};function OB(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){ym(n.response,t,r)},n.onerror=function(){wa.error("could not download file")},n.send()}function t7(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function U2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var bb,EI,ym=jr.saveAs||((typeof window>"u"?"undefined":ca(window))!=="object"||window!==jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=jr.URL||jr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?t7(a.href)?OB(e,t,r):U2(a,a.target="_blank"):U2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){U2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(t7(e))OB(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){U2(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ca(s)!=="object"&&(wa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return OB(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(jr.HTMLElement)||jr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ca(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var l=jr.URL||jr.webkitURL,u=l.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $X(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function DB(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=yo(r,n,a,s,t[0],7,-680876936),s=yo(s,r,n,a,t[1],12,-389564586),a=yo(a,s,r,n,t[2],17,606105819),n=yo(n,a,s,r,t[3],22,-1044525330),r=yo(r,n,a,s,t[4],7,-176418897),s=yo(s,r,n,a,t[5],12,1200080426),a=yo(a,s,r,n,t[6],17,-1473231341),n=yo(n,a,s,r,t[7],22,-45705983),r=yo(r,n,a,s,t[8],7,1770035416),s=yo(s,r,n,a,t[9],12,-1958414417),a=yo(a,s,r,n,t[10],17,-42063),n=yo(n,a,s,r,t[11],22,-1990404162),r=yo(r,n,a,s,t[12],7,1804603682),s=yo(s,r,n,a,t[13],12,-40341101),a=yo(a,s,r,n,t[14],17,-1502002290),r=wo(r,n=yo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=wo(s,r,n,a,t[6],9,-1069501632),a=wo(a,s,r,n,t[11],14,643717713),n=wo(n,a,s,r,t[0],20,-373897302),r=wo(r,n,a,s,t[5],5,-701558691),s=wo(s,r,n,a,t[10],9,38016083),a=wo(a,s,r,n,t[15],14,-660478335),n=wo(n,a,s,r,t[4],20,-405537848),r=wo(r,n,a,s,t[9],5,568446438),s=wo(s,r,n,a,t[14],9,-1019803690),a=wo(a,s,r,n,t[3],14,-187363961),n=wo(n,a,s,r,t[8],20,1163531501),r=wo(r,n,a,s,t[13],5,-1444681467),s=wo(s,r,n,a,t[2],9,-51403784),a=wo(a,s,r,n,t[7],14,1735328473),r=Eo(r,n=wo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Eo(s,r,n,a,t[8],11,-2022574463),a=Eo(a,s,r,n,t[11],16,1839030562),n=Eo(n,a,s,r,t[14],23,-35309556),r=Eo(r,n,a,s,t[1],4,-1530992060),s=Eo(s,r,n,a,t[4],11,1272893353),a=Eo(a,s,r,n,t[7],16,-155497632),n=Eo(n,a,s,r,t[10],23,-1094730640),r=Eo(r,n,a,s,t[13],4,681279174),s=Eo(s,r,n,a,t[0],11,-358537222),a=Eo(a,s,r,n,t[3],16,-722521979),n=Eo(n,a,s,r,t[6],23,76029189),r=Eo(r,n,a,s,t[9],4,-640364487),s=Eo(s,r,n,a,t[12],11,-421815835),a=Eo(a,s,r,n,t[15],16,530742520),r=Co(r,n=Eo(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Co(s,r,n,a,t[7],10,1126891415),a=Co(a,s,r,n,t[14],15,-1416354905),n=Co(n,a,s,r,t[5],21,-57434055),r=Co(r,n,a,s,t[12],6,1700485571),s=Co(s,r,n,a,t[3],10,-1894986606),a=Co(a,s,r,n,t[10],15,-1051523),n=Co(n,a,s,r,t[1],21,-2054922799),r=Co(r,n,a,s,t[8],6,1873313359),s=Co(s,r,n,a,t[15],10,-30611744),a=Co(a,s,r,n,t[6],15,-1560198380),n=Co(n,a,s,r,t[13],21,1309151649),r=Co(r,n,a,s,t[4],6,-145523070),s=Co(s,r,n,a,t[11],10,-1120210379),a=Co(a,s,r,n,t[2],15,718787259),n=Co(n,a,s,r,t[9],21,-343485551),e[0]=Jh(r,e[0]),e[1]=Jh(n,e[1]),e[2]=Jh(a,e[2]),e[3]=Jh(s,e[3])}function S5(e,t,r,n,a,s){return t=Jh(Jh(t,e),Jh(n,s)),Jh(t<<a|t>>>32-a,r)}function yo(e,t,r,n,a,s,i){return S5(t&r|~t&n,e,t,a,s,i)}function wo(e,t,r,n,a,s,i){return S5(t&n|r&~n,e,t,a,s,i)}function Eo(e,t,r,n,a,s,i){return S5(t^r^n,e,t,a,s,i)}function Co(e,t,r,n,a,s,i){return S5(r^(t|~n),e,t,a,s,i)}function KX(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)DB(n,Oxe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(DB(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,DB(n,a),n}function Oxe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}bb=jr.atob.bind(jr),EI=jr.btoa.bind(jr);var r7="0123456789abcdef".split("");function Dxe(e){for(var t="",r=0;r<4;r++)t+=r7[e>>8*r+4&15]+r7[e>>8*r&15];return t}function Pxe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function CI(e){return KX(e).map(Pxe).join("")}var Rxe=function(e){for(var t=0;t<e.length;t++)e[t]=Dxe(e[t]);return e.join("")}(KX("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jh(e,t){if(Rxe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _I(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,m=0,p=0,x="";for(l=0;l<f;l++)p=(p+(d=o[m=(m+1)%256]))%256,o[m]=o[p],o[p]=d,i=o[(o[m]+o[p])%256],x+=String.fromCharCode(t.charCodeAt(l)^i);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var n7={print:4,modify:8,copy:16,"annot-forms":32};function Ug(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(n7.perm!==void 0)throw new Error("Invalid permission: "+o);a+=n7[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=CI(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_I(this.encryptionKey,this.padding)}function Mg(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function a7(e){if(ca(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){jr.console&&wa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function A_(e){if(!(this instanceof A_))return new A_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function GX(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Nm(e,t,r,n,a){if(!(this instanceof Nm))return new Nm(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,GX.call(this,n,a)}function Kg(e,t,r,n,a){if(!(this instanceof Kg))return new Kg(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,GX.call(this,n,a)}function fr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;ca(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=a7;var x="1.3",g=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(K){x=K};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(K){return b[K]};a=a||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},S=_.COMPAT;function B(){this.saveGraphicsState(),fe(new qt(Te,0,0,-Te,0,Ci()*Te).toString()+" cm"),this.setFontSize(this.getFontSize()/Te),u="n",S=_.ADVANCED}function I(){this.restoreGraphicsState(),u="S",S=_.COMPAT}var D=p.__private__.combineFontStyleAndFontWeight=function(K,de){if(K=="bold"&&de=="normal"||K=="bold"&&de==400||K=="normal"&&de=="italic"||K=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(K=de==400||de==="normal"?K==="italic"?"italic":"normal":de!=700&&de!=="bold"||K!=="normal"?(de==700?"bold":de)+""+K:"bold"),K};p.advancedAPI=function(K){var de=S===_.COMPAT;return de&&B.call(this),typeof K!="function"||(K(this),de&&I.call(this)),this},p.compatAPI=function(K){var de=S===_.ADVANCED;return de&&I.call(this),typeof K!="function"||(K(this),de&&B.call(this)),this},p.isAdvancedAPI=function(){return S===_.ADVANCED};var E,C=function(K){if(S!==_.ADVANCED)throw new Error(K+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=p.roundToPrecision=p.__private__.roundToPrecision=function(K,de){var je=t||de;if(isNaN(K)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return K.toFixed(je).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof l=="number"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return N(K,l)}:l==="smart"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return N(K,K>-1&&K<1?16:5)}:function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return N(K,16)};var P=p.f2=p.__private__.f2=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f2");return N(K,2)},O=p.__private__.f3=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f3");return N(K,3)},F=p.scale=p.__private__.scale=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.scale");return S===_.COMPAT?K*Te:S===_.ADVANCED?K:void 0},M=function(K){return S===_.COMPAT?Ci()-K:S===_.ADVANCED?K:void 0},Q=function(K){return F(M(K))};p.__private__.setPrecision=p.setPrecision=function(K){typeof parseInt(K,10)=="number"&&(t=parseInt(K,10))};var J,W="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return W},H=p.__private__.setFileId=function(K){return W=K!==void 0&&/^[a-fA-F0-9]{32}$/.test(K)?K.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ra=new Ug(d.userPermissions,d.userPassword,d.ownerPassword,W)),W};p.setFileId=function(K){return H(K),this},p.getFileId=function(){return Z()};var z=p.__private__.convertDateToPDFDate=function(K){var de=K.getTimezoneOffset(),je=de<0?"+":"-",Le=Math.floor(Math.abs(de/60)),Ke=Math.abs(de%60),ut=[je,Y(Le),"'",Y(Ke),"'"].join("");return["D:",K.getFullYear(),Y(K.getMonth()+1),Y(K.getDate()),Y(K.getHours()),Y(K.getMinutes()),Y(K.getSeconds()),ut].join("")},G=p.__private__.convertPDFDateToDate=function(K){var de=parseInt(K.substr(2,4),10),je=parseInt(K.substr(6,2),10)-1,Le=parseInt(K.substr(8,2),10),Ke=parseInt(K.substr(10,2),10),ut=parseInt(K.substr(12,2),10),kt=parseInt(K.substr(14,2),10);return new Date(de,je,Le,Ke,ut,kt,0)},ne=p.__private__.setCreationDate=function(K){var de;if(K===void 0&&(K=new Date),K instanceof Date)de=z(K);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(K))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=K}return J=de},R=p.__private__.getCreationDate=function(K){var de=J;return K==="jsDate"&&(de=G(J)),de};p.setCreationDate=function(K){return ne(K),this},p.getCreationDate=function(K){return R(K)};var q,Y=p.__private__.padd2=function(K){return("0"+parseInt(K)).slice(-2)},te=p.__private__.padd2Hex=function(K){return("00"+(K=K.toString())).substr(K.length)},ie=0,pe=[],oe=[],ce=0,ge=[],Fe=[],re=!1,Ne=oe,Oe=function(){ie=0,ce=0,oe=[],pe=[],ge=[],we=fa(),Ee=fa()};p.__private__.setCustomOutputDestination=function(K){re=!0,Ne=K};var Ce=function(K){re||(Ne=K)};p.__private__.resetCustomOutputDestination=function(){re=!1,Ne=oe};var fe=p.__private__.out=function(K){return K=K.toString(),ce+=K.length+1,Ne.push(K),Ne},Ie=p.__private__.write=function(K){return fe(arguments.length===1?K.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(K){for(var de=K.length,je=new ArrayBuffer(de),Le=new Uint8Array(je);de--;)Le[de]=K.charCodeAt(de);return je},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var dt=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(K){return dt=S===_.ADVANCED?K/Te:K,this};var Et,Tt=p.__private__.getFontSize=p.getFontSize=function(){return S===_.COMPAT?dt:dt*Te},Ct=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(K){return Ct=K,this},p.__private__.getR2L=p.getR2L=function(){return Ct};var Dt,Jt=p.__private__.setZoomMode=function(K){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(K))Et=K;else if(isNaN(K)){if(de.indexOf(K)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+K+'" is not recognized.');Et=K}else Et=parseInt(K,10)};p.__private__.getZoomMode=function(){return Et};var Pt,Mt=p.__private__.setPageMode=function(K){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(K)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+K+'" is not recognized.');Dt=K};p.__private__.getPageMode=function(){return Dt};var Wt=p.__private__.setLayoutMode=function(K){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(K)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+K+'" is not recognized.');Pt=K};p.__private__.getLayoutMode=function(){return Pt},p.__private__.setDisplayMode=p.setDisplayMode=function(K,de,je){return Jt(K),Wt(de),Mt(je),this};var Pe={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(K){if(Object.keys(Pe).indexOf(K)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pe[K]},p.__private__.getDocumentProperties=function(){return Pe},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(K){for(var de in Pe)Pe.hasOwnProperty(de)&&K[de]&&(Pe[de]=K[de]);return this},p.__private__.setDocumentProperty=function(K,de){if(Object.keys(Pe).indexOf(K)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pe[K]=de};var Re,Te,ot,vt,ur,Gt={},Rt={},Vr=[],dr={},yn={},Qr={},kn={},ea=null,or=0,Zt=[],Kr=new a7(p),Ms=e.hotfixes||[],Aa={},Va={},si=[],qt=function K(de,je,Le,Ke,ut,kt){if(!(this instanceof K))return new K(de,je,Le,Ke,ut,kt);isNaN(de)&&(de=1),isNaN(je)&&(je=0),isNaN(Le)&&(Le=0),isNaN(Ke)&&(Ke=1),isNaN(ut)&&(ut=0),isNaN(kt)&&(kt=0),this._matrix=[de,je,Le,Ke,ut,kt]};Object.defineProperty(qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qt.prototype.join=function(K){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(K)},qt.prototype.multiply=function(K){var de=K.sx*this.sx+K.shy*this.shx,je=K.sx*this.shy+K.shy*this.sy,Le=K.shx*this.sx+K.sy*this.shx,Ke=K.shx*this.shy+K.sy*this.sy,ut=K.tx*this.sx+K.ty*this.shx+this.tx,kt=K.tx*this.shy+K.ty*this.sy+this.ty;return new qt(de,je,Le,Ke,ut,kt)},qt.prototype.decompose=function(){var K=this.sx,de=this.shy,je=this.shx,Le=this.sy,Ke=this.tx,ut=this.ty,kt=Math.sqrt(K*K+de*de),zt=(K/=kt)*je+(de/=kt)*Le;je-=K*zt,Le-=de*zt;var j=Math.sqrt(je*je+Le*Le);return zt/=j,K*(Le/=j)<de*(je/=j)&&(K=-K,de=-de,zt=-zt,kt=-kt),{scale:new qt(kt,0,0,j,0,0),translate:new qt(1,0,0,1,Ke,ut),rotate:new qt(K,de,-de,K,0,0),skew:new qt(1,0,zt,1,0,0)}},qt.prototype.toString=function(K){return this.join(" ")},qt.prototype.inversed=function(){var K=this.sx,de=this.shy,je=this.shx,Le=this.sy,Ke=this.tx,ut=this.ty,kt=1/(K*Le-de*je),zt=Le*kt,j=-de*kt,ee=-je*kt,se=K*kt;return new qt(zt,j,ee,se,-zt*Ke-ee*ut,-j*Ke-se*ut)},qt.prototype.applyToPoint=function(K){var de=K.x*this.sx+K.y*this.shx+this.tx,je=K.x*this.shy+K.y*this.sy+this.ty;return new _u(de,je)},qt.prototype.applyToRectangle=function(K){var de=this.applyToPoint(K),je=this.applyToPoint(new _u(K.x+K.w,K.y+K.h));return new gd(de.x,de.y,je.x-de.x,je.y-de.y)},qt.prototype.clone=function(){var K=this.sx,de=this.shy,je=this.shx,Le=this.sy,Ke=this.tx,ut=this.ty;return new qt(K,de,je,Le,Ke,ut)},p.Matrix=qt;var wn=p.matrixMult=function(K,de){return de.multiply(K)},fn=new qt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=fn;var Vn=function(K,de){if(!yn[K]){var je=(de instanceof Nm?"Sh":"P")+(Object.keys(dr).length+1).toString(10);de.id=je,yn[K]=je,dr[je]=de,Kr.publish("addPattern",de)}};p.ShadingPattern=Nm,p.TilingPattern=Kg,p.addShadingPattern=function(K,de){return C("addShadingPattern()"),Vn(K,de),this},p.beginTilingPattern=function(K){C("beginTilingPattern()"),Fc(K.boundingBox[0],K.boundingBox[1],K.boundingBox[2]-K.boundingBox[0],K.boundingBox[3]-K.boundingBox[1],K.matrix)},p.endTilingPattern=function(K,de){C("endTilingPattern()"),de.stream=Fe[q].join(`
`),Vn(K,de),Kr.publish("endTilingPattern",de),si.pop().restore()};var ta=p.__private__.newObject=function(){var K=fa();return Ae(K,!0),K},fa=p.__private__.newObjectDeferred=function(){return ie++,pe[ie]=function(){return ce},ie},Ae=function(K,de){return de=typeof de=="boolean"&&de,pe[K]=ce,de&&fe(K+" 0 obj"),K},Be=p.__private__.newAdditionalObject=function(){var K={objId:fa(),content:""};return ge.push(K),K},we=fa(),Ee=fa(),_e=p.__private__.decodeColorString=function(K){var de=K.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var je=parseFloat(de[0]);de=[je,je,je,"r"]}for(var Le="#",Ke=0;Ke<3;Ke++)Le+=("0"+Math.floor(255*parseFloat(de[Ke])).toString(16)).slice(-2);return Le},ke=p.__private__.encodeColorString=function(K){var de;typeof K=="string"&&(K={ch1:K});var je=K.ch1,Le=K.ch2,Ke=K.ch3,ut=K.ch4,kt=K.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var zt=new $X(je);if(zt.ok)je=zt.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var j=parseInt(je.substr(1),16);je=j>>16&255,Le=j>>8&255,Ke=255&j}if(Le===void 0||ut===void 0&&je===Le&&Le===Ke)if(typeof je=="string")de=je+" "+kt[0];else switch(K.precision){case 2:de=P(je/255)+" "+kt[0];break;case 3:default:de=O(je/255)+" "+kt[0]}else if(ut===void 0||ca(ut)==="object"){if(ut&&!isNaN(ut.a)&&ut.a===0)return de=["1.","1.","1.",kt[1]].join(" ");if(typeof je=="string")de=[je,Le,Ke,kt[1]].join(" ");else switch(K.precision){case 2:de=[P(je/255),P(Le/255),P(Ke/255),kt[1]].join(" ");break;default:case 3:de=[O(je/255),O(Le/255),O(Ke/255),kt[1]].join(" ")}}else if(typeof je=="string")de=[je,Le,Ke,ut,kt[2]].join(" ");else switch(K.precision){case 2:de=[P(je),P(Le),P(Ke),P(ut),kt[2]].join(" ");break;case 3:default:de=[O(je),O(Le),O(Ke),O(ut),kt[2]].join(" ")}return de},We=p.__private__.getFilters=function(){return i},st=p.__private__.putStream=function(K){var de=(K=K||{}).data||"",je=K.filters||We(),Le=K.alreadyAppliedFilters||[],Ke=K.addLength1||!1,ut=de.length,kt=K.objectId,zt=function(Sr){return Sr};if(d!==null&&kt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(zt=ra.encryptor(kt,0));var j={};je===!0&&(je=["FlateEncode"]);var ee=K.additionalKeyValues||[],se=(j=fr.API.processDataByFilters!==void 0?fr.API.processDataByFilters(de,je):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(j.data.length!==0&&(ee.push({key:"Length",value:j.data.length}),Ke===!0&&ee.push({key:"Length1",value:ut})),se.length!=0)if(se.split("/").length-1==1)ee.push({key:"Filter",value:se});else{ee.push({key:"Filter",value:"["+se+"]"});for(var xe=0;xe<ee.length;xe+=1)if(ee[xe].key==="DecodeParms"){for(var ze=[],rt=0;rt<j.reverseChain.split("/").length-1;rt+=1)ze.push("null");ze.push(ee[xe].value),ee[xe].value="["+ze.join(" ")+"]"}}fe("<<");for(var It=0;It<ee.length;It++)fe("/"+ee[It].key+" "+ee[It].value);fe(">>"),j.data.length!==0&&(fe("stream"),fe(zt(j.data)),fe("endstream"))},$e=p.__private__.putPage=function(K){var de=K.number,je=K.data,Le=K.objId,Ke=K.contentsObjId;Ae(Le,!0),fe("<</Type /Page"),fe("/Parent "+K.rootDictionaryObjId+" 0 R"),fe("/Resources "+K.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(E(K.mediaBox.bottomLeftX))+" "+parseFloat(E(K.mediaBox.bottomLeftY))+" "+E(K.mediaBox.topRightX)+" "+E(K.mediaBox.topRightY)+"]"),K.cropBox!==null&&fe("/CropBox ["+E(K.cropBox.bottomLeftX)+" "+E(K.cropBox.bottomLeftY)+" "+E(K.cropBox.topRightX)+" "+E(K.cropBox.topRightY)+"]"),K.bleedBox!==null&&fe("/BleedBox ["+E(K.bleedBox.bottomLeftX)+" "+E(K.bleedBox.bottomLeftY)+" "+E(K.bleedBox.topRightX)+" "+E(K.bleedBox.topRightY)+"]"),K.trimBox!==null&&fe("/TrimBox ["+E(K.trimBox.bottomLeftX)+" "+E(K.trimBox.bottomLeftY)+" "+E(K.trimBox.topRightX)+" "+E(K.trimBox.topRightY)+"]"),K.artBox!==null&&fe("/ArtBox ["+E(K.artBox.bottomLeftX)+" "+E(K.artBox.bottomLeftY)+" "+E(K.artBox.topRightX)+" "+E(K.artBox.topRightY)+"]"),typeof K.userUnit=="number"&&K.userUnit!==1&&fe("/UserUnit "+K.userUnit),Kr.publish("putPage",{objId:Le,pageContext:Zt[de],pageNumber:de,page:je}),fe("/Contents "+Ke+" 0 R"),fe(">>"),fe("endobj");var ut=je.join(`
`);return S===_.ADVANCED&&(ut+=`
Q`),Ae(Ke,!0),st({data:ut,filters:We(),objectId:Ke}),fe("endobj"),Le},Je=p.__private__.putPages=function(){var K,de,je=[];for(K=1;K<=or;K++)Zt[K].objId=fa(),Zt[K].contentsObjId=fa();for(K=1;K<=or;K++)je.push($e({number:K,data:Fe[K],objId:Zt[K].objId,contentsObjId:Zt[K].contentsObjId,mediaBox:Zt[K].mediaBox,cropBox:Zt[K].cropBox,bleedBox:Zt[K].bleedBox,trimBox:Zt[K].trimBox,artBox:Zt[K].artBox,userUnit:Zt[K].userUnit,rootDictionaryObjId:we,resourceDictionaryObjId:Ee}));Ae(we,!0),fe("<</Type /Pages");var Le="/Kids [";for(de=0;de<or;de++)Le+=je[de]+" 0 R ";fe(Le+"]"),fe("/Count "+or),fe(">>"),fe("endobj"),Kr.publish("postPutPages")},tt=function(K){Kr.publish("putFont",{font:K,out:fe,newObject:ta,putStream:st}),K.isAlreadyPutted!==!0&&(K.objectNumber=ta(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Mg(K.postScriptName)),fe("/Subtype /Type1"),typeof K.encoding=="string"&&fe("/Encoding /"+K.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},wt=function(){for(var K in Gt)Gt.hasOwnProperty(K)&&(f===!1||f===!0&&m.hasOwnProperty(K))&&tt(Gt[K])},Ot=function(K){K.objectNumber=ta();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[E(K.x),E(K.y),E(K.x+K.width),E(K.y+K.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+K.matrix.toString()+"]"});var je=K.pages[1].join(`
`);st({data:je,additionalKeyValues:de,objectId:K.objectNumber}),fe("endobj")},Vt=function(){for(var K in Aa)Aa.hasOwnProperty(K)&&Ot(Aa[K])},jt=function(K,de){var je,Le=[],Ke=1/(de-1);for(je=0;je<1;je+=Ke)Le.push(je);if(Le.push(1),K[0].offset!=0){var ut={offset:0,color:K[0].color};K.unshift(ut)}if(K[K.length-1].offset!=1){var kt={offset:1,color:K[K.length-1].color};K.push(kt)}for(var zt="",j=0,ee=0;ee<Le.length;ee++){for(je=Le[ee];je>K[j+1].offset;)j++;var se=K[j].offset,xe=(je-se)/(K[j+1].offset-se),ze=K[j].color,rt=K[j+1].color;zt+=te(Math.round((1-xe)*ze[0]+xe*rt[0]).toString(16))+te(Math.round((1-xe)*ze[1]+xe*rt[1]).toString(16))+te(Math.round((1-xe)*ze[2]+xe*rt[2]).toString(16))}return zt.trim()},Lt=function(K,de){de||(de=21);var je=ta(),Le=jt(K.colors,de),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+de+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st({data:Le,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),fe("endobj"),K.objectNumber=ta(),fe("<< /ShadingType "+K.type),fe("/ColorSpace /DeviceRGB");var ut="/Coords ["+E(parseFloat(K.coords[0]))+" "+E(parseFloat(K.coords[1]))+" ";K.type===2?ut+=E(parseFloat(K.coords[2]))+" "+E(parseFloat(K.coords[3])):ut+=E(parseFloat(K.coords[2]))+" "+E(parseFloat(K.coords[3]))+" "+E(parseFloat(K.coords[4]))+" "+E(parseFloat(K.coords[5])),fe(ut+="]"),K.matrix&&fe("/Matrix ["+K.matrix.toString()+"]"),fe("/Function "+je+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},wr=function(K,de){var je=fa(),Le=ta();de.push({resourcesOid:je,objectOid:Le}),K.objectNumber=Le;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+K.boundingBox.map(E).join(" ")+"]"}),Ke.push({key:"XStep",value:E(K.xStep)}),Ke.push({key:"YStep",value:E(K.yStep)}),Ke.push({key:"Resources",value:je+" 0 R"}),K.matrix&&Ke.push({key:"Matrix",value:"["+K.matrix.toString()+"]"}),st({data:K.stream,additionalKeyValues:Ke,objectId:K.objectNumber}),fe("endobj")},Wr=function(K){var de;for(de in dr)dr.hasOwnProperty(de)&&(dr[de]instanceof Nm?Lt(dr[de]):dr[de]instanceof Kg&&wr(dr[de],K))},Xr=function(K){for(var de in K.objectNumber=ta(),fe("<<"),K)switch(de){case"opacity":fe("/ca "+P(K[de]));break;case"stroke-opacity":fe("/CA "+P(K[de]))}fe(">>"),fe("endobj")},tn=function(){var K;for(K in Qr)Qr.hasOwnProperty(K)&&Xr(Qr[K])},rs=function(){for(var K in fe("/XObject <<"),Aa)Aa.hasOwnProperty(K)&&Aa[K].objectNumber>=0&&fe("/"+K+" "+Aa[K].objectNumber+" 0 R");Kr.publish("putXobjectDict"),fe(">>")},oo=function(){ra.oid=ta(),fe("<<"),fe("/Filter /Standard"),fe("/V "+ra.v),fe("/R "+ra.r),fe("/U <"+ra.toHexString(ra.U)+">"),fe("/O <"+ra.toHexString(ra.O)+">"),fe("/P "+ra.P),fe(">>"),fe("endobj")},ns=function(){for(var K in fe("/Font <<"),Gt)Gt.hasOwnProperty(K)&&(f===!1||f===!0&&m.hasOwnProperty(K))&&fe("/"+K+" "+Gt[K].objectNumber+" 0 R");fe(">>")},Qs=function(){if(Object.keys(dr).length>0){for(var K in fe("/Shading <<"),dr)dr.hasOwnProperty(K)&&dr[K]instanceof Nm&&dr[K].objectNumber>=0&&fe("/"+K+" "+dr[K].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),fe(">>")}},Es=function(K){if(Object.keys(dr).length>0){for(var de in fe("/Pattern <<"),dr)dr.hasOwnProperty(de)&&dr[de]instanceof p.TilingPattern&&dr[de].objectNumber>=0&&dr[de].objectNumber<K&&fe("/"+de+" "+dr[de].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),fe(">>")}},ii=function(){if(Object.keys(Qr).length>0){var K;for(K in fe("/ExtGState <<"),Qr)Qr.hasOwnProperty(K)&&Qr[K].objectNumber>=0&&fe("/"+K+" "+Qr[K].objectNumber+" 0 R");Kr.publish("putGStateDict"),fe(">>")}},ha=function(K){Ae(K.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ns(),Qs(),Es(K.objectOid),ii(),rs(),fe(">>"),fe("endobj")},Hs=function(){var K=[];wt(),tn(),Vt(),Wr(K),Kr.publish("putResources"),K.forEach(ha),ha({resourcesOid:Ee,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},Ad=function(){Kr.publish("putAdditionalObjects");for(var K=0;K<ge.length;K++){var de=ge[K];Ae(de.objId,!0),fe(de.content),fe("endobj")}Kr.publish("postPutAdditionalObjects")},Xf=function(K){Rt[K.fontName]=Rt[K.fontName]||{},Rt[K.fontName][K.fontStyle]=K.id},Cc=function(K,de,je,Le,Ke){var ut={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:K,fontName:de,fontStyle:je,encoding:Le,isStandardFont:Ke||!1,metadata:{}};return Kr.publish("addFont",{font:ut,instance:this}),Gt[ut.id]=ut,Xf(ut),ut.id},_A=function(K){for(var de=0,je=Xe.length;de<je;de++){var Le=Cc.call(this,K[de][0],K[de][1],K[de][2],Xe[de][3],!0);f===!1&&(m[Le]=!0);var Ke=K[de][0].split("-");Xf({id:Le,fontName:Ke[0],fontStyle:Ke[1]||""})}Kr.publish("addFonts",{fonts:Gt,dictionary:Rt})},oi=function(K){return K.foo=function(){try{return K.apply(this,arguments)}catch(Le){var de=Le.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var je="Error in function "+de.split(`
`)[0].split("<")[0]+": "+Le.message;if(!jr.console)throw new Error(je);jr.console.error(je,Le),jr.alert&&alert(je)}},K.foo.bar=K,K.foo},fd=function(K,de){var je,Le,Ke,ut,kt,zt,j,ee,se;if(Ke=(de=de||{}).sourceEncoding||"Unicode",kt=de.outputEncoding,(de.autoencode||kt)&&Gt[Re].metadata&&Gt[Re].metadata[Ke]&&Gt[Re].metadata[Ke].encoding&&(ut=Gt[Re].metadata[Ke].encoding,!kt&&Gt[Re].encoding&&(kt=Gt[Re].encoding),!kt&&ut.codePages&&(kt=ut.codePages[0]),typeof kt=="string"&&(kt=ut[kt]),kt)){for(j=!1,zt=[],je=0,Le=K.length;je<Le;je++)(ee=kt[K.charCodeAt(je)])?zt.push(String.fromCharCode(ee)):zt.push(K[je]),zt[je].charCodeAt(0)>>8&&(j=!0);K=zt.join("")}for(je=K.length;j===void 0&&je!==0;)K.charCodeAt(je-1)>>8&&(j=!0),je--;if(!j)return K;for(zt=de.noBOM?[]:[254,255],je=0,Le=K.length;je<Le;je++){if((se=(ee=K.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(se),zt.push(ee-(se<<8))}return String.fromCharCode.apply(void 0,zt)},En=p.__private__.pdfEscape=p.pdfEscape=function(K,de){return fd(K,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},li=p.__private__.beginPage=function(K){Fe[++or]=[],Zt[or]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(K[0]),topRightY:Number(K[1])}},ll(or),Ce(Fe[q])},_c=function(K,de){var je,Le,Ke;switch(r=de||r,typeof K=="string"&&(je=y(K.toLowerCase()),Array.isArray(je)&&(Le=je[0],Ke=je[1])),Array.isArray(K)&&(Le=K[0]*Te,Ke=K[1]*Te),isNaN(Le)&&(Le=a[0],Ke=a[1]),(Le>14400||Ke>14400)&&(wa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ke=Math.min(14400,Ke)),a=[Le,Ke],r.substr(0,1)){case"l":Ke>Le&&(a=[Ke,Le]);break;case"p":Le>Ke&&(a=[Ke,Le])}li(a),kA(kc),fe(ci),TA!==0&&fe(TA+" J"),Cu!==0&&fe(Cu+" j"),Kr.publish("addPage",{pageNumber:or})},Sc=function(K){K>0&&K<=or&&(Fe.splice(K,1),Zt.splice(K,1),or--,q>or&&(q=or),this.setPage(q))},ll=function(K){K>0&&K<=or&&(q=K)},Fn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Fe.length-1},Nc=function(K,de,je){var Le,Ke=void 0;return je=je||{},K=K!==void 0?K:Gt[Re].fontName,de=de!==void 0?de:Gt[Re].fontStyle,Le=K.toLowerCase(),Rt[Le]!==void 0&&Rt[Le][de]!==void 0?Ke=Rt[Le][de]:Rt[K]!==void 0&&Rt[K][de]!==void 0?Ke=Rt[K][de]:je.disableWarning===!1&&wa.warn("Unable to look up font label for font '"+K+"', '"+de+"'. Refer to getFontList() for available fonts."),Ke||je.noFallback||(Ke=Rt.times[de])==null&&(Ke=Rt.times.normal),Ke},lo=p.__private__.putInfo=function(){var K=ta(),de=function(Le){return Le};for(var je in d!==null&&(de=ra.encryptor(K,0)),fe("<<"),fe("/Producer ("+En(de("jsPDF "+fr.version))+")"),Pe)Pe.hasOwnProperty(je)&&Pe[je]&&fe("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+En(de(Pe[je]))+")");fe("/CreationDate ("+En(de(J))+")"),fe(">>"),fe("endobj")},Ll=p.__private__.putCatalog=function(K){var de=(K=K||{}).rootDictionaryObjId||we;switch(ta(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+de+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+Et;je.substr(je.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+P(Et)+"]")}switch(Pt||(Pt="continuous"),Pt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Dt&&fe("/PageMode /"+Dt),Kr.publish("putCatalog"),fe(">>"),fe("endobj")},Yf=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ie+1)),fe("/Root "+ie+" 0 R"),fe("/Info "+(ie-1)+" 0 R"),d!==null&&fe("/Encrypt "+ra.oid+" 0 R"),fe("/ID [ <"+W+"> <"+W+"> ]"),fe(">>")},SA=p.__private__.putHeader=function(){fe("%PDF-"+x),fe("%")},NA=p.__private__.putXRef=function(){var K="0000000000";fe("xref"),fe("0 "+(ie+1)),fe("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof pe[de]=="function"?fe((K+pe[de]()).slice(-10)+" 00000 n "):pe[de]!==void 0?fe((K+pe[de]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},Ul=p.__private__.buildDocument=function(){Oe(),Ce(oe),Kr.publish("buildDocument"),SA(),Je(),Ad(),Hs(),d!==null&&oo(),lo(),Ll();var K=ce;return NA(),Yf(),fe("startxref"),fe(""+K),fe("%%EOF"),Ce(Fe[q]),oe.join(`
`)},hd=p.__private__.getBlob=function(K){return new Blob([He(K)],{type:"application/pdf"})},Ml=p.output=p.__private__.output=oi(function(K,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",K){case void 0:return Ul();case"save":p.save(de.filename);break;case"arraybuffer":return He(Ul());case"blob":return hd(Ul());case"bloburi":case"bloburl":if(jr.URL!==void 0&&typeof jr.URL.createObjectURL=="function")return jr.URL&&jr.URL.createObjectURL(hd(Ul()))||void 0;wa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",Le=Ul();try{je=EI(Le)}catch{je=EI(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+de.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Ke=de.pdfObjectUrl,ut="");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",zt=jr.open();return zt!==null&&zt.document.write(kt),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var j='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',ee=jr.open();if(ee!==null){ee.document.write(j);var se=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=de.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',ze=jr.open();if(ze!==null&&(ze.document.write(xe),ze.document.title=de.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return jr.document.location.href=this.output("datauristring",de);default:return null}}),cl=function(K){return Array.isArray(Ms)===!0&&Ms.indexOf(K)>-1};switch(n){case"pt":Te=1;break;case"mm":Te=72/25.4;break;case"cm":Te=72/2.54;break;case"in":Te=72;break;case"px":Te=cl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Te=12;break;case"ex":Te=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Te=n}var ra=null;ne(),H();var Ql=function(K){return d!==null?ra.encryptor(K,0):function(de){return de}},ul=p.__private__.getPageInfo=p.getPageInfo=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[K].objId,pageNumber:K,pageContext:Zt[K]}},_r=p.__private__.getPageInfoByObjId=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in Zt)if(Zt[de].objId===K)break;return ul(de)},dl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Zt[q].objId,pageNumber:q,pageContext:Zt[q]}};p.addPage=function(){return _c.apply(this,arguments),this},p.setPage=function(){return ll.apply(this,arguments),Ce.call(this,Fe[q]),this},p.insertPage=function(K){return this.addPage(),this.movePage(q,K),this},p.movePage=function(K,de){var je,Le;if(K>de){je=Fe[K],Le=Zt[K];for(var Ke=K;Ke>de;Ke--)Fe[Ke]=Fe[Ke-1],Zt[Ke]=Zt[Ke-1];Fe[de]=je,Zt[de]=Le,this.setPage(de)}else if(K<de){je=Fe[K],Le=Zt[K];for(var ut=K;ut<de;ut++)Fe[ut]=Fe[ut+1],Zt[ut]=Zt[ut+1];Fe[de]=je,Zt[de]=Le,this.setPage(de)}return this},p.deletePage=function(){return Sc.apply(this,arguments),this},p.__private__.text=p.text=function(K,de,je,Le,Ke){var ut,kt,zt,j,ee,se,xe,ze,rt,It=(Le=Le||{}).scope||this;if(typeof K=="number"&&typeof de=="number"&&(typeof je=="string"||Array.isArray(je))){var Sr=je;je=de,de=K,K=Sr}if(arguments[3]instanceof qt?(C("The transform parameter of text() with a Matrix value"),rt=Ke):(zt=arguments[4],j=arguments[5],ca(xe=arguments[3])==="object"&&xe!==null||(typeof zt=="string"&&(j=zt,zt=null),typeof xe=="string"&&(j=xe,xe=null),typeof xe=="number"&&(zt=xe,xe=null),Le={flags:xe,angle:zt,align:j})),isNaN(de)||isNaN(je)||K==null)throw new Error("Invalid arguments passed to jsPDF.text");if(K.length===0)return It;var ln="",Lr=!1,On=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:on,Gn=It.internal.scaleFactor;function ml(nn){return nn=nn.split("	").join(Array(Le.TabLen||9).join(" ")),En(nn,xe)}function za(nn){for(var an,ma=nn.concat(),$a=[],gl=ma.length;gl--;)typeof(an=ma.shift())=="string"?$a.push(an):Array.isArray(nn)&&(an.length===1||an[1]===void 0&&an[2]===void 0)?$a.push(an[0]):$a.push([an[0],an[1],an[2]]);return $a}function fo(nn,an){var ma;if(typeof nn=="string")ma=an(nn)[0];else if(Array.isArray(nn)){for(var $a,gl,Bd=nn.concat(),kd=[],Tu=Bd.length;Tu--;)typeof($a=Bd.shift())=="string"?kd.push(an($a)[0]):Array.isArray($a)&&typeof $a[0]=="string"&&(gl=an($a[0],$a[1],$a[2]),kd.push([gl[0],gl[1],gl[2]]));ma=kd}return ma}var Dc=!1,xd=!0;if(typeof K=="string")Dc=!0;else if(Array.isArray(K)){var th=K.concat();kt=[];for(var IA,Cs=th.length;Cs--;)(typeof(IA=th.shift())!="string"||Array.isArray(IA)&&typeof IA[0]!="string")&&(xd=!1);Dc=xd}if(Dc===!1)throw new Error('Type of text must be string or Array. "'+K+'" is not recognized.');typeof K=="string"&&(K=K.match(/[\r?\n]/)?K.split(/\r\n|\r|\n/g):[K]);var bd=dt/It.internal.scaleFactor,jA=bd*(On-1);switch(Le.baseline){case"bottom":je-=jA;break;case"top":je+=bd-jA;break;case"hanging":je+=bd-2*jA;break;case"middle":je+=bd/2-jA}if((se=Le.maxWidth||0)>0&&(typeof K=="string"?K=It.splitTextToSize(K,se):Object.prototype.toString.call(K)==="[object Array]"&&(K=K.reduce(function(nn,an){return nn.concat(It.splitTextToSize(an,se))},[]))),ut={text:K,x:de,y:je,options:Le,mutex:{pdfEscape:En,activeFontKey:Re,fonts:Gt,activeFontSize:dt}},Kr.publish("preProcessText",ut),K=ut.text,zt=(Le=ut.options).angle,!(rt instanceof qt)&&zt&&typeof zt=="number"){zt*=Math.PI/180,Le.rotationDirection===0&&(zt=-zt),S===_.ADVANCED&&(zt=-zt);var FA=Math.cos(zt),rh=Math.sin(zt);rt=new qt(FA,rh,-rh,FA,0,0)}else zt&&zt instanceof qt&&(rt=zt);S!==_.ADVANCED||rt||(rt=fn),(ee=Le.charSpace||Eu)!==void 0&&(ln+=E(F(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(ln+=E(100*ze)+` Tz
`),Le.lang;var ho=-1,Fx=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,W0=It.internal.getCurrentPageInfo().pageContext;switch(Fx){case 0:case!1:case"fill":ho=0;break;case 1:case!0:case"stroke":ho=1;break;case 2:case"fillThenStroke":ho=2;break;case 3:case"invisible":ho=3;break;case 4:case"fillAndAddForClipping":ho=4;break;case 5:case"strokeAndAddPathForClipping":ho=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ho=6;break;case 7:case"addToPathForClipping":ho=7}var Pp=W0.usedRenderingMode!==void 0?W0.usedRenderingMode:-1;ho!==-1?ln+=ho+` Tr
`:Pp!==-1&&(ln+=`0 Tr
`),ho!==-1&&(W0.usedRenderingMode=ho),j=Le.align||"left";var pl,Vs=dt*On,yd=It.internal.pageSize.getWidth(),X0=Gt[Re];ee=Le.charSpace||Eu,se=Le.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Bu=[],wd=function(nn){return It.getStringUnitWidth(nn,{font:X0,charSpace:ee,fontSize:dt,doKerning:!1})*dt/Gn};if(Object.prototype.toString.call(K)==="[object Array]"){var Vi;kt=za(K),j!=="left"&&(pl=kt.map(wd));var ui,Ed=0;if(j==="right"){de-=pl[0],K=[],Cs=kt.length;for(var mo=0;mo<Cs;mo++)mo===0?(ui=Ei(de),Vi=ss(je)):(ui=F(Ed-pl[mo]),Vi=-Vs),K.push([kt[mo],ui,Vi]),Ed=pl[mo]}else if(j==="center"){de-=pl[0]/2,K=[],Cs=kt.length;for(var $l=0;$l<Cs;$l++)$l===0?(ui=Ei(de),Vi=ss(je)):(ui=F((Ed-pl[$l])/2),Vi=-Vs),K.push([kt[$l],ui,Vi]),Ed=pl[$l]}else if(j==="left"){K=[],Cs=kt.length;for(var Pc=0;Pc<Cs;Pc++)K.push(kt[Pc])}else if(j==="justify"&&X0.encoding==="Identity-H"){K=[],Cs=kt.length,se=se!==0?se:yd;for(var Kl=0,Ra=0;Ra<Cs;Ra++)if(Vi=Ra===0?ss(je):-Vs,ui=Ra===0?Ei(de):Kl,Ra<Cs-1){var Gl=F((se-pl[Ra])/(kt[Ra].split(" ").length-1)),is=kt[Ra].split(" ");K.push([is[0]+" ",ui,Vi]),Kl=0;for(var po=1;po<is.length;po++){var OA=(wd(is[po-1]+" "+is[po])-wd(is[po]))*Gn+Gl;po==is.length-1?K.push([is[po],OA,0]):K.push([is[po]+" ",OA,0]),Kl-=OA}}else K.push([kt[Ra],ui,Vi]);K.push(["",Kl,0])}else{if(j!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(K=[],Cs=kt.length,se=se!==0?se:yd,Ra=0;Ra<Cs;Ra++)Vi=Ra===0?ss(je):-Vs,ui=Ra===0?Ei(de):0,Ra<Cs-1?Bu.push(E(F((se-pl[Ra])/(kt[Ra].split(" ").length-1)))):Bu.push(0),K.push([kt[Ra],ui,Vi])}}var Rc=typeof Le.R2L=="boolean"?Le.R2L:Ct;Rc===!0&&(K=fo(K,function(nn,an,ma){return[nn.split("").reverse().join(""),an,ma]})),ut={text:K,x:de,y:je,options:Le,mutex:{pdfEscape:En,activeFontKey:Re,fonts:Gt,activeFontSize:dt}},Kr.publish("postProcessText",ut),K=ut.text,Lr=ut.mutex.isHex||!1;var nh=Gt[Re].encoding;nh!=="WinAnsiEncoding"&&nh!=="StandardEncoding"||(K=fo(K,function(nn,an,ma){return[ml(nn),an,ma]})),kt=za(K),K=[];for(var Cd,_d,Sd,DA=0,ah=1,Nd=Array.isArray(kt[0])?ah:DA,ku="",PA=function(nn,an,ma){var $a="";return ma instanceof qt?(ma=typeof Le.angle=="number"?wn(ma,new qt(1,0,0,1,nn,an)):wn(new qt(1,0,0,1,nn,an),ma),S===_.ADVANCED&&(ma=wn(new qt(1,0,0,-1,0,0),ma)),$a=ma.join(" ")+` Tm
`):$a=E(nn)+" "+E(an)+` Td
`,$a},La=0;La<kt.length;La++){switch(ku="",Nd){case ah:Sd=(Lr?"<":"(")+kt[La][0]+(Lr?">":")"),Cd=parseFloat(kt[La][1]),_d=parseFloat(kt[La][2]);break;case DA:Sd=(Lr?"<":"(")+kt[La]+(Lr?">":")"),Cd=Ei(de),_d=ss(je)}Bu!==void 0&&Bu[La]!==void 0&&(ku=Bu[La]+` Tw
`),La===0?K.push(ku+PA(Cd,_d,rt)+Sd):Nd===DA?K.push(ku+Sd):Nd===ah&&K.push(ku+PA(Cd,_d,rt)+Sd)}K=Nd===DA?K.join(` Tj
T* `):K.join(` Tj
`),K+=` Tj
`;var Ko=`BT
/`;return Ko+=Re+" "+dt+` Tf
`,Ko+=E(dt*On)+` TL
`,Ko+=Vl+`
`,Ko+=ln,Ko+=K,fe(Ko+="ET"),m[Re]=!0,It};var Jf=p.__private__.clip=p.clip=function(K){return fe(K==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Jf("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var yi=p.__private__.isValidStyle=function(K){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(K)!==-1&&(de=!0),de};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(K){return yi(K)&&(u=K),this};var co=p.__private__.getStyle=p.getStyle=function(K){var de=u;switch(K){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=K}return de},Hi=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(K){return Al("f",K),this},p.fillEvenOdd=function(K){return Al("f*",K),this},p.fillStroke=function(K){return Al("B",K),this},p.fillStrokeEvenOdd=function(K){return Al("B*",K),this};var Al=function(K,de){ca(de)==="object"?Hl(de,K):fe(K)},uo=function(K){K===null||S===_.ADVANCED&&K===void 0||(K=co(K),fe(K))};function Bc(K,de,je,Le,Ke){var ut=new Kg(de||this.boundingBox,je||this.xStep,Le||this.yStep,this.gState,Ke||this.matrix);ut.stream=this.stream;var kt=K+"$$"+this.cloneIndex+++"$$";return Vn(kt,ut),ut}var Hl=function(K,de){var je=yn[K.key],Le=dr[je];if(Le instanceof Nm)fe("q"),fe(BA(de)),Le.gState&&p.setGState(Le.gState),fe(K.matrix.toString()+" cm"),fe("/"+je+" sh"),fe("Q");else if(Le instanceof Kg){var Ke=new qt(1,0,0,-1,0,Ci());K.matrix&&(Ke=Ke.multiply(K.matrix||fn),je=Bc.call(Le,K.key,K.boundingBox,K.xStep,K.yStep,Ke).id),fe("q"),fe("/Pattern cs"),fe("/"+je+" scn"),Le.gState&&p.setGState(Le.gState),fe(de),fe("Q")}},BA=function(K){switch(K){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ao=p.moveTo=function(K,de){return fe(E(F(K))+" "+E(Q(de))+" m"),this},wi=p.lineTo=function(K,de){return fe(E(F(K))+" "+E(Q(de))+" l"),this},fl=p.curveTo=function(K,de,je,Le,Ke,ut){return fe([E(F(K)),E(Q(de)),E(F(je)),E(Q(Le)),E(F(Ke)),E(Q(ut)),"c"].join(" ")),this};p.__private__.line=p.line=function(K,de,je,Le,Ke){if(isNaN(K)||isNaN(de)||isNaN(je)||isNaN(Le)||!yi(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return S===_.COMPAT?this.lines([[je-K,Le-de]],K,de,[1,1],Ke||"S"):this.lines([[je-K,Le-de]],K,de,[1,1]).stroke()},p.__private__.lines=p.lines=function(K,de,je,Le,Ke,ut){var kt,zt,j,ee,se,xe,ze,rt,It,Sr,ln,Lr;if(typeof K=="number"&&(Lr=je,je=de,de=K,K=Lr),Le=Le||[1,1],ut=ut||!1,isNaN(de)||isNaN(je)||!Array.isArray(K)||!Array.isArray(Le)||!yi(Ke)||typeof ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ao(de,je),kt=Le[0],zt=Le[1],ee=K.length,Sr=de,ln=je,j=0;j<ee;j++)(se=K[j]).length===2?(Sr=se[0]*kt+Sr,ln=se[1]*zt+ln,wi(Sr,ln)):(xe=se[0]*kt+Sr,ze=se[1]*zt+ln,rt=se[2]*kt+Sr,It=se[3]*zt+ln,Sr=se[4]*kt+Sr,ln=se[5]*zt+ln,fl(xe,ze,rt,It,Sr,ln));return ut&&Hi(),uo(Ke),this},p.path=function(K){for(var de=0;de<K.length;de++){var je=K[de],Le=je.c;switch(je.op){case"m":Ao(Le[0],Le[1]);break;case"l":wi(Le[0],Le[1]);break;case"c":fl.apply(this,Le);break;case"h":Hi()}}return this},p.__private__.rect=p.rect=function(K,de,je,Le,Ke){if(isNaN(K)||isNaN(de)||isNaN(je)||isNaN(Le)||!yi(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return S===_.COMPAT&&(Le=-Le),fe([E(F(K)),E(Q(de)),E(F(je)),E(F(Le)),"re"].join(" ")),uo(Ke),this},p.__private__.triangle=p.triangle=function(K,de,je,Le,Ke,ut,kt){if(isNaN(K)||isNaN(de)||isNaN(je)||isNaN(Le)||isNaN(Ke)||isNaN(ut)||!yi(kt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-K,Le-de],[Ke-je,ut-Le],[K-Ke,de-ut]],K,de,[1,1],kt,!0),this},p.__private__.roundedRect=p.roundedRect=function(K,de,je,Le,Ke,ut,kt){if(isNaN(K)||isNaN(de)||isNaN(je)||isNaN(Le)||isNaN(Ke)||isNaN(ut)||!yi(kt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*je),ut=Math.min(ut,.5*Le),this.lines([[je-2*Ke,0],[Ke*zt,0,Ke,ut-ut*zt,Ke,ut],[0,Le-2*ut],[0,ut*zt,-Ke*zt,ut,-Ke,ut],[2*Ke-je,0],[-Ke*zt,0,-Ke,-ut*zt,-Ke,-ut],[0,2*ut-Le],[0,-ut*zt,Ke*zt,-ut,Ke,-ut]],K+Ke,de,[1,1],kt,!0),this},p.__private__.ellipse=p.ellipse=function(K,de,je,Le,Ke){if(isNaN(K)||isNaN(de)||isNaN(je)||isNaN(Le)||!yi(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ut=4/3*(Math.SQRT2-1)*je,kt=4/3*(Math.SQRT2-1)*Le;return Ao(K+je,de),fl(K+je,de-kt,K+ut,de-Le,K,de-Le),fl(K-ut,de-Le,K-je,de-kt,K-je,de),fl(K-je,de+kt,K-ut,de+Le,K,de+Le),fl(K+ut,de+Le,K+je,de+kt,K+je,de),uo(Ke),this},p.__private__.circle=p.circle=function(K,de,je,Le){if(isNaN(K)||isNaN(de)||isNaN(je)||!yi(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(K,de,je,je,Le)},p.setFont=function(K,de,je){return je&&(de=D(de,je)),Re=Nc(K,de,{disableWarning:!1}),this};var as=p.__private__.getFont=p.getFont=function(){return Gt[Nc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var K,de,je={};for(K in Rt)if(Rt.hasOwnProperty(K))for(de in je[K]=[],Rt[K])Rt[K].hasOwnProperty(de)&&je[K].push(de);return je},p.addFont=function(K,de,je,Le,Ke){var ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ut.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&ut.indexOf(arguments[3])==-1&&(je=D(je,Le)),Ke=Ke||"Identity-H",Cc.call(this,K,de,je,Ke)};var on,kc=e.lineWidth||.200025,hl=p.__private__.getLineWidth=p.getLineWidth=function(){return kc},kA=p.__private__.setLineWidth=p.setLineWidth=function(K){return kc=K,fe(E(F(K))+" w"),this};p.__private__.setLineDash=fr.API.setLineDash=fr.API.setLineDashPattern=function(K,de){if(K=K||[],de=de||0,isNaN(de)||!Array.isArray(K))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return K=K.map(function(je){return E(F(je))}).join(" "),de=E(F(de)),fe("["+K+"] "+de+" d"),this};var yu=p.__private__.getLineHeight=p.getLineHeight=function(){return dt*on};p.__private__.getLineHeight=p.getLineHeight=function(){return dt*on};var wu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(K){return typeof(K=K||1.15)=="number"&&(on=K),this},$o=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return on};wu(e.lineHeight);var Ei=p.__private__.getHorizontalCoordinate=function(K){return F(K)},ss=p.__private__.getVerticalCoordinate=function(K){return S===_.ADVANCED?K:Zt[q].mediaBox.topRightY-Zt[q].mediaBox.bottomLeftY-F(K)},Zf=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(K){return E(Ei(K))},Tc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(K){return E(ss(K))},ci=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return _e(ci)},p.__private__.setStrokeColor=p.setDrawColor=function(K,de,je,Le){return ci=ke({ch1:K,ch2:de,ch3:je,ch4:Le,pdfColorType:"draw",precision:2}),fe(ci),this};var Ic=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return _e(Ic)},p.__private__.setFillColor=p.setFillColor=function(K,de,je,Le){return Ic=ke({ch1:K,ch2:de,ch3:je,ch4:Le,pdfColorType:"fill",precision:2}),fe(Ic),this};var Vl=e.textColor||"0 g",md=p.__private__.getTextColor=p.getTextColor=function(){return _e(Vl)};p.__private__.setTextColor=p.setTextColor=function(K,de,je,Le){return Vl=ke({ch1:K,ch2:de,ch3:je,ch4:Le,pdfColorType:"text",precision:3}),this};var Eu=e.charSpace,pd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Eu||0)};p.__private__.setCharSpace=p.setCharSpace=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Eu=K,this};var TA=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(K){var de=p.CapJoinStyles[K];if(de===void 0)throw new Error("Line cap style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return TA=de,fe(de+" J"),this};var Cu=0;p.__private__.setLineJoin=p.setLineJoin=function(K){var de=p.CapJoinStyles[K];if(de===void 0)throw new Error("Line join style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cu=de,fe(de+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(K){if(K=K||0,isNaN(K))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(E(F(K))+" M"),this},p.GState=A_,p.setGState=function(K){(K=typeof K=="string"?Qr[kn[K]]:jc(null,K)).equals(ea)||(fe("/"+K.id+" gs"),ea=K)};var jc=function(K,de){if(!K||!kn[K]){var je=!1;for(var Le in Qr)if(Qr.hasOwnProperty(Le)&&Qr[Le].equals(de)){je=!0;break}if(je)de=Qr[Le];else{var Ke="GS"+(Object.keys(Qr).length+1).toString(10);Qr[Ke]=de,de.id=Ke}return K&&(kn[K]=de.id),Kr.publish("addGState",de),de}};p.addGState=function(K,de){return jc(K,de),this},p.saveGraphicsState=function(){return fe("q"),Vr.push({key:Re,size:dt,color:Vl}),this},p.restoreGraphicsState=function(){fe("Q");var K=Vr.pop();return Re=K.key,dt=K.size,Vl=K.color,ea=null,this},p.setCurrentTransformationMatrix=function(K){return fe(K.toString()+" cm"),this},p.comment=function(K){return fe("#"+K),this};var _u=function(K,de){var je=K||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(ut){isNaN(ut)||(je=parseFloat(ut))}});var Le=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ut){isNaN(ut)||(Le=parseFloat(ut))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(ut){Ke=ut.toString()}}),this},gd=function(K,de,je,Le){_u.call(this,K,de),this.type="rect";var Ke=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(kt){isNaN(kt)||(Ke=parseFloat(kt))}});var ut=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ut},set:function(kt){isNaN(kt)||(ut=parseFloat(kt))}}),this},Su=function(){this.page=or,this.currentPage=q,this.pages=Fe.slice(0),this.pagesContext=Zt.slice(0),this.x=ot,this.y=vt,this.matrix=ur,this.width=Oc(q),this.height=Ci(q),this.outputDestination=Ne,this.id="",this.objectNumber=-1};Su.prototype.restore=function(){or=this.page,q=this.currentPage,Zt=this.pagesContext,Fe=this.pages,ot=this.x,vt=this.y,ur=this.matrix,Nu(q,this.width),vd(q,this.height),Ne=this.outputDestination};var Fc=function(K,de,je,Le,Ke){si.push(new Su),or=q=0,Fe=[],ot=K,vt=de,ur=Ke,li([je,Le])},eh=function(K){if(Va[K])si.pop().restore();else{var de=new Su,je="Xo"+(Object.keys(Aa).length+1).toString(10);de.id=je,Va[K]=je,Aa[je]=de,Kr.publish("addFormObject",de),si.pop().restore()}};for(var zl in p.beginFormObject=function(K,de,je,Le,Ke){return Fc(K,de,je,Le,Ke),this},p.endFormObject=function(K){return eh(K),this},p.doFormObject=function(K,de){var je=Aa[Va[K]];return fe("q"),fe(de.toString()+" cm"),fe("/"+je.id+" Do"),fe("Q"),this},p.getFormObject=function(K){var de=Aa[Va[K]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},p.save=function(K,de){return K=K||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?(ym(hd(Ul()),K),typeof ym.unload=="function"&&jr.setTimeout&&setTimeout(ym.unload,911),this):new Promise(function(je,Le){try{var Ke=ym(hd(Ul()),K);typeof ym.unload=="function"&&jr.setTimeout&&setTimeout(ym.unload,911),je(Ke)}catch(ut){Le(ut.message)}})},fr.API)fr.API.hasOwnProperty(zl)&&(zl==="events"&&fr.API.events.length?function(K,de){var je,Le,Ke;for(Ke=de.length-1;Ke!==-1;Ke--)je=de[Ke][0],Le=de[Ke][1],K.subscribe.apply(K,[je].concat(typeof Le=="function"?[Le]:Le))}(Kr,fr.API.events):p[zl]=fr.API[zl]);var Oc=p.getPageWidth=function(K){return(Zt[K=K||q].mediaBox.topRightX-Zt[K].mediaBox.bottomLeftX)/Te},Nu=p.setPageWidth=function(K,de){Zt[K].mediaBox.topRightX=de*Te+Zt[K].mediaBox.bottomLeftX},Ci=p.getPageHeight=function(K){return(Zt[K=K||q].mediaBox.topRightY-Zt[K].mediaBox.bottomLeftY)/Te},vd=p.setPageHeight=function(K,de){Zt[K].mediaBox.topRightY=de*Te+Zt[K].mediaBox.bottomLeftY};return p.internal={pdfEscape:En,getStyle:co,getFont:as,getFontSize:Tt,getCharSpace:pd,getTextColor:md,getLineHeight:yu,getLineHeightFactor:$o,getLineWidth:hl,write:Ie,getHorizontalCoordinate:Ei,getVerticalCoordinate:ss,getCoordinateString:Zf,getVerticalCoordinateString:Tc,collections:{},newObject:ta,newAdditionalObject:Be,newObjectDeferred:fa,newObjectDeferredBegin:Ae,getFilters:We,putStream:st,events:Kr,scaleFactor:Te,pageSize:{getWidth:function(){return Oc(q)},setWidth:function(K){Nu(q,K)},getHeight:function(){return Ci(q)},setHeight:function(K){vd(q,K)}},encryptionOptions:d,encryption:ra,getEncryptor:Ql,output:Ml,getNumberOfPages:Fn,pages:Fe,out:fe,f2:P,f3:O,getPageInfo:ul,getPageInfoByObjId:_r,getCurrentPageInfo:dl,getPDFVersion:g,Point:_u,Rectangle:gd,Matrix:qt,hasHotfix:cl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Oc(q)},set:function(K){Nu(q,K)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ci(q)},set:function(K){vd(q,K)},enumerable:!0,configurable:!0}),_A.call(p,Xe),Re="F1",_c(a,r),Kr.publish("initialized"),p}Ug.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Ug.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ug.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Ug.prototype.processOwnerPassword=function(e,t){return _I(CI(t).substr(0,5),e)},Ug.prototype.encryptor=function(e,t){var r=CI(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return _I(r,n)}},A_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ca(e)!==ca(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},fr.API={events:[]},fr.version="2.5.2";var As=fr.API,$6=1,_p=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ag=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zr=function(e){return e.toFixed(2)},jh=function(e){return e.toFixed(5)};As.__acroform__={};var Pl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},s7=function(e){return e*$6},$d=function(e){var t=new WX,r=cr.internal.getHeight(e)||0,n=cr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(zr(n)),Number(zr(r))],t},Lxe=As.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Uxe=As.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Mxe=As.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Os=As.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Mxe(e,t-1)},Ds=As.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Lxe(e,t-1)},Ps=As.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uxe(e,t-1)},Qxe=As.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(zr(l.lowerLeft_X)),Number(zr(l.lowerLeft_Y)),Number(zr(l.upperRight_X)),Number(zr(l.upperRight_Y))]},Hxe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=SI(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+zr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=$d(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},SI=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(O){return O.split(`
`)}):a.map(function(O){return[O]});var s=r,i=cr.internal.getHeight(e)||0;i=i<0?-i:i;var o=cr.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(O,F,M){if(O+1<a.length){var Q=F+" "+a[O+1][0];return M2(Q,e,M).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=M2("3",e,s).height,m=e.multiline?i-s:(i-f)/2,p=m+=2,x=0,g=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+M2(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",_=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var B=!1;if(a[S].length!==1&&b!==a[S].length-1){if((f+2)*(_+2)+2>i)continue e;y+=a[S][b],B=!0,g=S,S--}else{y=(y+=a[S][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var I=parseInt(S),D=l(I,y,s),E=S>=a.length-1;if(D&&!E){y+=" ",b=0;continue}if(D||E){if(E)g=I;else if(e.multiline&&(f+2)*(_+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>i)continue e;g=I}}for(var C="",N=x;N<=g;N++){var P=a[N];if(e.multiline){if(N===g){C+=P[b]+" ",b=(b+1)%P.length;continue}if(N===x){C+=P[P.length-1]+" ";continue}}C+=P[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,d=M2(C,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=zr(u)+" "+zr(p)+` Td
`,t+="("+_p(C)+`) Tj
`,t+=-zr(u)+` 0 Td
`,p=-(s+2),d=0,x=B?g:g+1,_++,y=""}break}return n.text=t,n.fontSize=s,n},M2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Vxe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zxe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},$xe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ca(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},Kxe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(od.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Vxe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$6=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new XX,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&zxe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=Qxe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=cr.createDefaultAppearanceStream(o),ca(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Hxe(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var p=o.appearanceStreamContent[m];if(f+="/"+m+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var x=p[i];typeof x=="function"&&(x=x.call(a,o)),f+="/"+i+" "+x+" ",a.internal.acroformPlugin.xForms.indexOf(x)>=0||a.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(a,o)),f+="/"+i+" "+x,a.internal.acroformPlugin.xForms.indexOf(x)>=0||a.internal.acroformPlugin.xForms.push(x);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&$xe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},qX=As.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ca(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+_p(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},PB=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+_p(n(e))+")"},tA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tA.prototype.toString=function(){return this.objId+" 0 R"},tA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},tA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:qX(a,this.objId,this.scope)}):a instanceof tA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var WX=function(){tA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Pl(WX,tA);var XX=function(){tA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+_p(r(e))+")"}},set:function(r){e=r}})};Pl(XX,tA);var od=function e(){tA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Os(t,3)},set:function(y){y?this.F=Ds(t,3):this.F=Ps(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof f_)return;s="FieldObject"+e.FieldNum++}var y=function(_){return _};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+_p(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/$6:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof f_||this instanceof Vm))return PB(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Oi?m:PB(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Oi?y:y.substr(0,1)==="("?Ag(y.substr(1,y.length-2)):Ag(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?Ag(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Oi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Oi?p:PB(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Oi?y:y.substr(0,1)==="("?Ag(y.substr(1,y.length-2)):Ag(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?Ag(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Oi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(y){x=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,1)},set:function(y){y?this.Ff=Ds(this.Ff,1):this.Ff=Ps(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,2)},set:function(y){y?this.Ff=Ds(this.Ff,2):this.Ff=Ps(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,3)},set:function(y){y?this.Ff=Ds(this.Ff,3):this.Ff=Ps(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Pl(od,tA);var lv=function(){od.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return qX(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,18)},set:function(r){r?this.Ff=Ds(this.Ff,18):this.Ff=Ps(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ds(this.Ff,19):this.Ff=Ps(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,20)},set:function(r){r?(this.Ff=Ds(this.Ff,20),t.sort()):this.Ff=Ps(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,22)},set:function(r){r?this.Ff=Ds(this.Ff,22):this.Ff=Ps(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,23)},set:function(r){r?this.Ff=Ds(this.Ff,23):this.Ff=Ps(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,27)},set:function(r){r?this.Ff=Ds(this.Ff,27):this.Ff=Ps(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(lv,od);var cv=function(){lv.call(this),this.fontName="helvetica",this.combo=!1};Pl(cv,lv);var uv=function(){cv.call(this),this.combo=!0};Pl(uv,cv);var mC=function(){uv.call(this),this.edit=!0};Pl(mC,uv);var Oi=function(){od.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,15)},set:function(r){r?this.Ff=Ds(this.Ff,15):this.Ff=Ps(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,16)},set:function(r){r?this.Ff=Ds(this.Ff,16):this.Ff=Ps(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,17)},set:function(r){r?this.Ff=Ds(this.Ff,17):this.Ff=Ps(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,26)},set:function(r){r?this.Ff=Ds(this.Ff,26):this.Ff=Ps(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+_p(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ca(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Pl(Oi,od);var pC=function(){Oi.call(this),this.pushButton=!0};Pl(pC,Oi);var dv=function(){Oi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Pl(dv,Oi);var f_=function(){var e,t;od.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+_p(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ca(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=cr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(f_,od),dv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},dv.prototype.createOption=function(e){var t=new f_;return t.Parent=this,t.optionName=e,this.Kids.push(t),Gxe.call(this.scope,t),t};var gC=function(){Oi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=cr.CheckBox.createAppearanceStream()};Pl(gC,Oi);var Vm=function(){od.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,13)},set:function(t){t?this.Ff=Ds(this.Ff,13):this.Ff=Ps(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,21)},set:function(t){t?this.Ff=Ds(this.Ff,21):this.Ff=Ps(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,23)},set:function(t){t?this.Ff=Ds(this.Ff,23):this.Ff=Ps(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,24)},set:function(t){t?this.Ff=Ds(this.Ff,24):this.Ff=Ps(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,25)},set:function(t){t?this.Ff=Ds(this.Ff,25):this.Ff=Ps(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,26)},set:function(t){t?this.Ff=Ds(this.Ff,26):this.Ff=Ps(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(Vm,od);var vC=function(){Vm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,14)},set:function(e){e?this.Ff=Ds(this.Ff,14):this.Ff=Ps(this.Ff,14)}}),this.password=!0};Pl(vC,Vm);var cr={CheckBox:{createAppearanceStream:function(){return{N:{On:cr.CheckBox.YesNormal},D:{On:cr.CheckBox.YesPushDown,Off:cr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=SI(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+zr(cr.internal.getWidth(e))+" "+zr(cr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+zr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=cr.internal.getHeight(e),i=cr.internal.getWidth(e),o=SI(e,e.caption);return a.push("1 g"),a.push("0 0 "+zr(i)+" "+zr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+zr(i-1)+" "+zr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+zr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zr(cr.internal.getWidth(e))+" "+zr(cr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:cr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=cr.RadioButton.Circle.YesNormal,t.D[e]=cr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=cr.internal.getWidth(e)<=cr.internal.getHeight(e)?cr.internal.getWidth(e)/4:cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=cr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+jh(cr.internal.getWidth(e)/2)+" "+jh(cr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=cr.internal.getWidth(e)<=cr.internal.getHeight(e)?cr.internal.getWidth(e)/4:cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*cr.internal.Bezier_C).toFixed(5)),i=Number((n*cr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jh(cr.internal.getWidth(e)/2)+" "+jh(cr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+jh(cr.internal.getWidth(e)/2)+" "+jh(cr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=cr.internal.getWidth(e)<=cr.internal.getHeight(e)?cr.internal.getWidth(e)/4:cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*cr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jh(cr.internal.getWidth(e)/2)+" "+jh(cr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:cr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=cr.RadioButton.Cross.YesNormal,t.D[e]=cr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=cr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+zr(cr.internal.getWidth(e)-2)+" "+zr(cr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(zr(n.x1.x)+" "+zr(n.x1.y)+" m"),r.push(zr(n.x2.x)+" "+zr(n.x2.y)+" l"),r.push(zr(n.x4.x)+" "+zr(n.x4.y)+" m"),r.push(zr(n.x3.x)+" "+zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=cr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+zr(cr.internal.getWidth(e))+" "+zr(cr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+zr(cr.internal.getWidth(e)-2)+" "+zr(cr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(zr(r.x1.x)+" "+zr(r.x1.y)+" m"),n.push(zr(r.x2.x)+" "+zr(r.x2.y)+" l"),n.push(zr(r.x4.x)+" "+zr(r.x4.y)+" m"),n.push(zr(r.x3.x)+" "+zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zr(cr.internal.getWidth(e))+" "+zr(cr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};cr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=cr.internal.getWidth(e),r=cr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},cr.internal.getWidth=function(e){var t=0;return ca(e)==="object"&&(t=s7(e.Rect[2])),t},cr.internal.getHeight=function(e){var t=0;return ca(e)==="object"&&(t=s7(e.Rect[3])),t};var Gxe=As.addField=function(e){if(Kxe(this,e),!(e instanceof od))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};As.AcroFormChoiceField=lv,As.AcroFormListBox=cv,As.AcroFormComboBox=uv,As.AcroFormEditBox=mC,As.AcroFormButton=Oi,As.AcroFormPushButton=pC,As.AcroFormRadioButton=dv,As.AcroFormCheckBox=gC,As.AcroFormTextField=Vm,As.AcroFormPasswordField=vC,As.AcroFormAppearance=cr,As.AcroForm={ChoiceField:lv,ListBox:cv,ComboBox:uv,EditBox:mC,Button:Oi,PushButton:pC,RadioButton:dv,CheckBox:gC,TextField:Vm,PasswordField:vC,Appearance:cr},fr.AcroForm={ChoiceField:lv,ListBox:cv,ComboBox:uv,EditBox:mC,Button:Oi,PushButton:pC,RadioButton:dv,CheckBox:gC,TextField:Vm,PasswordField:vC,Appearance:cr};fr.AcroForm;function YX(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(O,F){var M,Q,J,W,Z,H=t;if((F=F||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(D(O))for(Z in r)for(J=r[Z],M=0;M<J.length;M+=1){for(W=!0,Q=0;Q<J[M].length;Q+=1)if(J[M][Q]!==void 0&&J[M][Q]!==O[Q]){W=!1;break}if(W===!0){H=Z;break}}else for(Z in r)for(J=r[Z],M=0;M<J.length;M+=1){for(W=!0,Q=0;Q<J[M].length;Q+=1)if(J[M][Q]!==void 0&&J[M][Q]!==O.charCodeAt(Q)){W=!1;break}if(W===!0){H=Z;break}}return H===t&&F!==t&&(H=F),H},a=function O(F){for(var M=this.internal.write,Q=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:F.width}),W.push({key:"Height",value:F.height}),F.colorSpace===b.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===b.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var Z="",H=0,z=F.transparency.length;H<z;H++)Z+=F.transparency[H]+" "+F.transparency[H]+" ";W.push({key:"Mask",value:"["+Z+"]"})}F.sMask!==void 0&&W.push({key:"SMask",value:F.objectId+1+" 0 R"});var G=F.filter!==void 0?["/"+F.filter]:void 0;if(Q({data:F.data,additionalKeyValues:W,alreadyAppliedFilters:G,objectId:F.objectId}),M("endobj"),"sMask"in F&&F.sMask!==void 0){var ne="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,R={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:ne,data:F.sMask};"filter"in F&&(R.filter=F.filter),O.call(this,R)}if(F.colorSpace===b.INDEXED){var q=this.internal.newObject();Q({data:C(new Uint8Array(F.palette)),objectId:q}),M("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var F in O)a.call(this,O[F])},i=function(){var O,F=this.internal.collections.addImage_images,M=this.internal.write;for(var Q in F)M("/I"+(O=F[Q]).index,O.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var O=this.internal.collections.addImage_images;return o.call(this),O},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(O){return typeof e["process"+O.toUpperCase()]=="function"},f=function(O){return ca(O)==="object"&&O.nodeType===1},m=function(O,F){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var M=""+O.getAttribute("src");if(M.indexOf("data:image/")===0)return bb(unescape(M).split("base64,").pop());var Q=e.loadFile(M,!0);if(Q!==void 0)return Q}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var J;switch(F){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return bb(O.toDataURL(J,1).split("base64,").pop())}},p=function(O){var F=this.internal.collections.addImage_images;if(F){for(var M in F)if(O===F[M].alias)return F[M]}},x=function(O,F,M){return O||F||(O=-96,F=-96),O<0&&(O=-1*M.width*72/O/this.internal.scaleFactor),F<0&&(F=-1*M.height*72/F/this.internal.scaleFactor),O===0&&(O=F*M.width/M.height),F===0&&(F=O*M.height/M.width),[O,F]},g=function(O,F,M,Q,J,W){var Z=x.call(this,M,Q,J),H=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,G=l.call(this);if(M=Z[0],Q=Z[1],G[J.index]=J,W){W*=Math.PI/180;var ne=Math.cos(W),R=Math.sin(W),q=function(te){return te.toFixed(4)},Y=[q(ne),q(R),q(-1*R),q(ne),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,H(O),z(F+Q),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([H(M),"0","0",H(Q),"0","0","cm"].join(" "))):this.internal.write([H(M),"0","0",H(Q),H(O),z(F+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(O){var F,M,Q=0;if(typeof O=="string")for(M=O.length,F=0;F<M;F++)Q=(Q<<5)-Q+O.charCodeAt(F),Q|=0;else if(D(O))for(M=O.byteLength/2,F=0;F<M;F++)Q=(Q<<5)-Q+O[F],Q|=0;return Q},S=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var F=!0;return O.length===0&&(F=!1),O.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(F=!1),F},B=e.__addimage__.extractImageFromDataUrl=function(O){var F=(O=O||"").split("base64,"),M=null;if(F.length===2){var Q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(Q)&&(M={mimeType:Q[1],charset:Q[2],data:F[1]})}return M},I=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return I()&&O instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(O){return I()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(O){for(var F=O.length,M=new Uint8Array(F),Q=0;Q<F;Q++)M[Q]=O.charCodeAt(Q);return M},C=e.__addimage__.arrayBufferToBinaryString=function(O){for(var F="",M=D(O)?O:new Uint8Array(O),Q=0;Q<M.length;Q+=8192)F+=String.fromCharCode.apply(null,M.subarray(Q,Q+8192));return F};e.addImage=function(){var O,F,M,Q,J,W,Z,H,z;if(typeof arguments[1]=="number"?(F=t,M=arguments[1],Q=arguments[2],J=arguments[3],W=arguments[4],Z=arguments[5],H=arguments[6],z=arguments[7]):(F=arguments[1],M=arguments[2],Q=arguments[3],J=arguments[4],W=arguments[5],Z=arguments[6],H=arguments[7],z=arguments[8]),ca(O=arguments[0])==="object"&&!f(O)&&"imageData"in O){var G=O;O=G.imageData,F=G.format||F||t,M=G.x||M||0,Q=G.y||Q||0,J=G.w||G.width||J,W=G.h||G.height||W,Z=G.alias||Z,H=G.compression||H,z=G.rotation||G.angle||z}var ne=this.internal.getFilters();if(H===void 0&&ne.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(M)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var R=N.call(this,O,F,Z,H);return g.call(this,M,Q,J,W,R,z),this};var N=function(O,F,M,Q){var J,W,Z;if(typeof O=="string"&&n(O)===t){O=unescape(O);var H=P(O,!1);(H!==""||(H=e.loadFile(O,!0))!==void 0)&&(O=H)}if(f(O)&&(O=m(O,F)),F=n(O,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((Z=M)==null||Z.length===0)&&(M=function(z){return typeof z=="string"||D(z)?_(z):D(z.data)?_(z.data):null}(O)),(J=p.call(this,M))||(I()&&(O instanceof Uint8Array||F==="RGBA"||(W=O,O=E(O))),J=this["process"+F.toUpperCase()](O,u.call(this),M,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:y.NONE}(Q),W)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},P=e.__addimage__.convertBase64ToBinaryString=function(O,F){var M;F=typeof F!="boolean"||F;var Q,J="";if(typeof O=="string"){Q=(M=B(O))!==null?M.data:O;try{J=bb(Q)}catch(W){if(F)throw S(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(O){var F,M,Q="";if(f(O)&&(O=m(O)),typeof O=="string"&&n(O)===t&&((Q=P(O,!1))===""&&(Q=e.loadFile(O)||""),O=Q),M=n(O),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!I()||O instanceof Uint8Array||(O=E(O)),!(F=this["process"+M.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=M,F}})(fr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};fr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),_=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(y(_))+") >>",g.content=s;var S=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(x(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var I=this.annotations._nameMap[n.options.name];n.options.pageNumber=I.page,n.options.top=I.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(fr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return i(g)&&s(g)&&t[g.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(g){return i(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return i(g)&&s(g)&&t[g.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return i(g)&&s(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return i(g)&&s(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return i(g)&&s(g)&&t[g.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,_="",S=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(S++,typeof(y=y[g.charCodeAt(b)])=="number"&&(_+=String.fromCharCode(y),y=r,S=0),b===g.length-1&&(y=r,_+=g.charAt(b-(S-1)),b-=S-1,S=0)):(y=r,_+=g.charAt(b-S),b-=S,S=0);return _};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,b,y){return i(g)?s(g)===!1?-1:!u(g)||!i(b)&&!i(y)||!i(y)&&o(b)||o(g)&&!i(b)||o(g)&&l(b)||o(g)&&o(b)?0:d(g)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(g)||!i(y)?1:2:-1},p=function(g){var b=0,y=0,_=0,S="",B="",I="",D=(g=g||"").split("\\s+"),E=[];for(b=0;b<D.length;b+=1){for(E.push(""),y=0;y<D[b].length;y+=1)S=D[b][y],B=D[b][y-1],I=D[b][y+1],i(S)?(_=m(S,B,I),E[b]+=_!==-1?String.fromCharCode(t[S.charCodeAt(0)][_]):S):E[b]+=S;E[b]=f(E[b])}return E.join(" ")},x=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var _=0;for(y=[],_=0;_<b.length;_+=1)Array.isArray(b[_])?y.push([p(b[_][0]),b[_][1],b[_][2]]):y.push([p(b[_])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",x])}(fr.API),fr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(fr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(g){x=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,x=0,g=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=u.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,B){return S.concat(b.splitTextToSize(B,y))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)p<(g=this.getStringUnitWidth(l[_],{font:f})*d)&&(p=g);return p!==0&&(x=l.length),{w:p/=m,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,d,f,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,x,g,b,y=[],_=[],S=[],B={},I={},D=[],E=[],C=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,P=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,O=m.margins||Object.assign({width:this.getPageWidth()},t),F=typeof m.padding=="number"?m.padding:3,M=m.headerBackgroundColor||"#c8c8c8",Q=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=Q,this.setFontSize(P),f==null)_=y=Object.keys(d[0]),S=y.map(function(){return"left"});else if(Array.isArray(f)&&ca(f[0])==="object")for(y=f.map(function(G){return G.name}),_=f.map(function(G){return G.prompt||G.name||""}),S=f.map(function(G){return G.align||"left"}),p=0;p<f.length;p+=1)I[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(_=y=f,S=y.map(function(){return"left"}));if(C||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(B[b=y[p]]=d.map(function(G){return G[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(_[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=B[b],this.setFont(void 0,"normal"),g=0;g<x.length;g+=1)D.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[b]=Math.max.apply(null,D)+F+F,D=[]}if(N){var J={};for(p=0;p<y.length;p+=1)J[y[p]]={},J[y[p]].text=_[p],J[y[p]].align=S[p];var W=o.call(this,J,I);E=y.map(function(G){return new s(l,u,I[G],W,J[G].text,void 0,J[G].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var Z=f.reduce(function(G,ne){return G[ne.name]=ne.align,G},{});for(p=0;p<d.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:d[p]},this);var H=o.call(this,d[p],I);for(g=0;g<y.length;g+=1){var z=d[p][y[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:g,data:z},this),i.call(this,new s(l,u,I[y[g]],H,z,p+2,Z[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var x=l[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/m+d+d},this).reduce(function(p,x){return Math.max(p,x)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(fr.API);var JX={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ZX=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],NI=YX(ZX),eY=[100,200,300,400,500,600,700,800,900],qxe=YX(eY);function BI(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return JX[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof NI[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function i7(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Wxe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},o7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function l7(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Xxe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Wxe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=BI(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+l7(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=NI[l],f=d<=NI.normal?-1:1,m=i7(u,ZX,d,f);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=JX[l],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=qxe[l],f=i7(u,eY,d,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+l7(s)+"'.");return i}function c7(e){return e.trimLeft()}function Yxe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Jxe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Q2,u7,d7,RB=["times"];(function(e){var t,r,n,a,s,i,o,l,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new l,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new i,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new i,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=R;Object.defineProperty(this,"pdf",{get:function(){return q}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Ce){Y=!!Ce}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Ce){te=!!Ce}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(Ce){isNaN(Ce)||(ie=Ce)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Ce){isNaN(Ce)||(pe=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ce){var fe;typeof Ce=="number"?fe=[Ce,Ce,Ce,Ce]:((fe=new Array(4))[0]=Ce[0],fe[1]=Ce.length>=2?Ce[1]:fe[0],fe[2]=Ce.length>=3?Ce[2]:fe[0],fe[3]=Ce.length>=4?Ce[3]:fe[1]),u.margin=fe}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ce){oe=Ce}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ce){ce=Ce}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(Ce){ge=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ce){Ce instanceof d&&(u=Ce)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ce){u.path=Ce}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Ce){Fe=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var fe;fe=m(Ce),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var fe=m(Ce);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var re=null;function Ne(Ce,fe){if(re===null){var Ie=function(He){var Xe=[];return Object.keys(He).forEach(function(dt){He[dt].forEach(function(Et){var Tt=null;switch(Et){case"bold":Tt={family:dt,weight:"bold"};break;case"italic":Tt={family:dt,style:"italic"};break;case"bolditalic":Tt={family:dt,weight:"bold",style:"italic"};break;case"":case"normal":Tt={family:dt}}Tt!==null&&(Tt.ref={name:dt,style:Et},Xe.push(Tt))})}),Xe}(Ce.getFontList());re=function(He){for(var Xe={},dt=0;dt<He.length;++dt){var Et=BI(He[dt]),Tt=Et.family,Ct=Et.stretch,Dt=Et.style,Jt=Et.weight;Xe[Tt]=Xe[Tt]||{},Xe[Tt][Ct]=Xe[Tt][Ct]||{},Xe[Tt][Ct][Dt]=Xe[Tt][Ct][Dt]||{},Xe[Tt][Ct][Dt][Jt]=Et}return Xe}(Ie.concat(fe))}return re}var Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(Ce){re=null,Oe=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var fe;if(this.ctx.font=Ce,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var Ie=fe[1],He=(fe[2],fe[3]),Xe=fe[4],dt=(fe[5],fe[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Et==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Tt=function(Pe){var Re,Te,ot=[],vt=Pe.trim();if(vt==="")return RB;if(vt in o7)return[o7[vt]];for(;vt!=="";){switch(Te=null,Re=(vt=c7(vt)).charAt(0)){case'"':case"'":Te=Yxe(vt.substring(1),Re);break;default:Te=Jxe(vt)}if(Te===null||(ot.push(Te[0]),(vt=c7(Te[1]))!==""&&vt.charAt(0)!==","))return RB;vt=vt.replace(/^,/,"")}return ot}(dt);if(this.fontFaces){var Ct=Xxe(Ne(this.pdf,this.fontFaces),Tt.map(function(Pe){return{family:Pe,stretch:"normal",weight:He,style:Ie}}));this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var Dt="";(He==="bold"||parseInt(He,10)>=700||Ie==="bold")&&(Dt="bold"),Ie==="italic"&&(Dt+="italic"),Dt.length===0&&(Dt="normal");for(var Jt="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mt=0;Mt<Tt.length;Mt++){if(this.pdf.internal.getFont(Tt[Mt],Dt,{noFallback:!0,disableWarning:!0})!==void 0){Jt=Tt[Mt];break}if(Dt==="bolditalic"&&this.pdf.internal.getFont(Tt[Mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Jt=Tt[Mt],Dt="bold";else if(this.pdf.internal.getFont(Tt[Mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Jt=Tt[Mt],Dt="normal";break}}if(Jt===""){for(var Wt=0;Wt<Tt.length;Wt++)if(Pt[Tt[Wt]]){Jt=Pt[Tt[Wt]];break}}Jt=Jt===""?"Times":Jt,this.pdf.setFont(Jt,Dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){B.call(this,"fill",!1)},f.prototype.stroke=function(){B.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,q){if(isNaN(R)||isNaN(q))throw wa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(R,q)},f.prototype.closePath=function(){var R=new i(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&ca(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){R=new i(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(R.x,R.y)},f.prototype.lineTo=function(R,q){if(isNaN(R)||isNaN(q))throw wa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,q,Y,te){if(isNaN(Y)||isNaN(te)||isNaN(R)||isNaN(q))throw wa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(Y,te)),pe=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.bezierCurveTo=function(R,q,Y,te,ie,pe){if(isNaN(ie)||isNaN(pe)||isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te))throw wa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ie,pe)),ce=this.ctx.transform.applyToPoint(new i(R,q)),ge=this.ctx.transform.applyToPoint(new i(Y,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:ge.x,y2:ge.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(R,q,Y,te,ie,pe){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te)||isNaN(ie))throw wa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(R,q));R=oe.x,q=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,Y)),ge=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(ce.x-ge.x,2)+Math.pow(ce.y-ge.y,2))}Math.abs(ie-te)>=2*Math.PI&&(te=0,ie=2*Math.PI),this.path.push({type:"arc",x:R,y:q,radius:Y,startAngle:te,endAngle:ie,counterclockwise:pe})},f.prototype.arcTo=function(R,q,Y,te,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,q,Y,te){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te))throw wa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,q),this.lineTo(R+Y,q),this.lineTo(R+Y,q+te),this.lineTo(R,q+te),this.lineTo(R,q),this.lineTo(R+Y,q),this.lineTo(R,q)},f.prototype.fillRect=function(R,q,Y,te){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te))throw wa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,q,Y,te),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(R,q,Y,te){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te))throw wa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(R,q,Y,te),this.stroke())},f.prototype.clearRect=function(R,q,Y,te){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te))throw wa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,q,Y,te))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(q),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(R){var q,Y,te,ie;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))q=0,Y=0,te=0,ie=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(pe!==null)q=parseInt(pe[1]),Y=parseInt(pe[2]),te=parseInt(pe[3]),ie=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)q=parseInt(pe[1]),Y=parseInt(pe[2]),te=parseInt(pe[3]),ie=parseFloat(pe[4]);else{if(ie=1,typeof R=="string"&&R.charAt(0)!=="#"){var oe=new $X(R);R=oe.ok?oe.toHex():"#000000"}R.length===4?(q=R.substring(1,2),q+=q,Y=R.substring(2,3),Y+=Y,te=R.substring(3,4),te+=te):(q=R.substring(1,3),Y=R.substring(3,5),te=R.substring(5,7)),q=parseInt(q,16),Y=parseInt(Y,16),te=parseInt(te,16)}}return{r:q,g:Y,b:te,a:ie,style:R}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,q,Y,te){if(isNaN(q)||isNaN(Y)||typeof R!="string")throw wa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ie=H(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;F.call(this,{text:R,x:q,y:Y,scale:pe,angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(R,q,Y,te){if(isNaN(q)||isNaN(Y)||typeof R!="string")throw wa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){te=isNaN(te)?void 0:te;var ie=H(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;F.call(this,{text:R,x:q,y:Y,scale:pe,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(R){if(typeof R!="string")throw wa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Y=this.pdf.internal.scaleFactor,te=q.internal.getFontSize(),ie=q.getStringUnitWidth(R)*te/q.internal.scaleFactor,pe=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new pe({width:ie*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(R,q){if(isNaN(R)||isNaN(q))throw wa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(R,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(R){if(isNaN(R))throw wa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(R,q){if(isNaN(R)||isNaN(q))throw wa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,R,q);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(R,q,Y,te,ie,pe){if(isNaN(R)||isNaN(q)||isNaN(Y)||isNaN(te)||isNaN(ie)||isNaN(pe))throw wa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new l(R,q,Y,te,ie,pe);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(R,q,Y,te,ie,pe){R=isNaN(R)?1:R,q=isNaN(q)?0:q,Y=isNaN(Y)?0:Y,te=isNaN(te)?1:te,ie=isNaN(ie)?0:ie,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(R,q,Y,te,ie,pe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,q,Y,te,ie,pe,oe,ce,ge){var Fe=this.pdf.getImageProperties(R),re=1,Ne=1,Oe=1,Ce=1;te!==void 0&&ce!==void 0&&(Oe=ce/te,Ce=ge/ie,re=Fe.width/te*ce/te,Ne=Fe.height/ie*ge/ie),pe===void 0&&(pe=q,oe=Y,q=0,Y=0),te!==void 0&&ce===void 0&&(ce=te,ge=ie),te===void 0&&ce===void 0&&(ce=Fe.width,ge=Fe.height);for(var fe,Ie=this.ctx.transform.decompose(),He=H(Ie.rotate.shx),Xe=new l,dt=(Xe=(Xe=(Xe=Xe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(pe-q*Oe,oe-Y*Ce,te*re,ie*Ne)),Et=b.call(this,dt),Tt=[],Ct=0;Ct<Et.length;Ct+=1)Tt.indexOf(Et[Ct])===-1&&Tt.push(Et[Ct]);if(S(Tt),this.autoPaging)for(var Dt=Tt[0],Jt=Tt[Tt.length-1],Pt=Dt;Pt<Jt+1;Pt++){this.pdf.setPage(Pt);var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Pt===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Te=Pt===1?0:Pe+(Pt-2)*Re;if(this.ctx.clip_path.length!==0){var ot=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(fe,this.posX+this.margin[3],-Te+Wt+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=ot}var vt=JSON.parse(JSON.stringify(dt));vt=_([vt],this.posX+this.margin[3],-Te+Wt+this.ctx.prevPageLastElemOffset)[0];var ur=(Pt>Dt||Pt<Jt)&&g.call(this);ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Re,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,He),ur&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,He)};var b=function(R,q,Y){var te=[];q=q||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":te.push(Math.floor((R.y+ie)/Y)+1);break;case"arc":te.push(Math.floor((R.y+ie-R.radius)/Y)+1),te.push(Math.floor((R.y+ie+R.radius)/Y)+1);break;case"qct":var pe=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);te.push(Math.floor((pe.y+ie)/Y)+1),te.push(Math.floor((pe.y+pe.h+ie)/Y)+1);break;case"bct":var oe=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);te.push(Math.floor((oe.y+ie)/Y)+1),te.push(Math.floor((oe.y+oe.h+ie)/Y)+1);break;case"rect":te.push(Math.floor((R.y+ie)/Y)+1),te.push(Math.floor((R.y+R.h+ie)/Y)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var R=this.fillStyle,q=this.strokeStyle,Y=this.font,te=this.lineCap,ie=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=q,this.font=Y,this.lineCap=te,this.lineWidth=ie,this.lineJoin=pe},_=function(R,q,Y){for(var te=0;te<R.length;te++)switch(R[te].type){case"bct":R[te].x2+=q,R[te].y2+=Y;case"qct":R[te].x1+=q,R[te].y1+=Y;case"mt":case"lt":case"arc":default:R[te].x+=q,R[te].y+=Y}return R},S=function(R){return R.sort(function(q,Y){return q-Y})},B=function(R,q){for(var Y,te,ie=this.fillStyle,pe=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,ge=Math.abs(ce*this.ctx.transform.scaleX),Fe=this.lineJoin,re=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Oe=[],Ce=0;Ce<Ne.length;Ce++)if(Ne[Ce].x!==void 0)for(var fe=b.call(this,Ne[Ce]),Ie=0;Ie<fe.length;Ie+=1)Oe.indexOf(fe[Ie])===-1&&Oe.push(fe[Ie]);for(var He=0;He<Oe.length;He++)for(;this.pdf.internal.getNumberOfPages()<Oe[He];)y.call(this);if(S(Oe),this.autoPaging)for(var Xe=Oe[0],dt=Oe[Oe.length-1],Et=Xe;Et<dt+1;Et++){this.pdf.setPage(Et),this.fillStyle=ie,this.strokeStyle=pe,this.lineCap=oe,this.lineWidth=ge,this.lineJoin=Fe;var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=Et===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=Et===1?0:Dt+(Et-2)*Jt;if(this.ctx.clip_path.length!==0){var Mt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Y,this.posX+this.margin[3],-Pt+Ct+this.ctx.prevPageLastElemOffset),I.call(this,R,!0),this.path=Mt}if(te=JSON.parse(JSON.stringify(re)),this.path=_(te,this.posX+this.margin[3],-Pt+Ct+this.ctx.prevPageLastElemOffset),q===!1||Et===0){var Wt=(Et>Xe||Et<dt)&&g.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,Jt,null).clip().discardPath()),I.call(this,R,q),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=ge,I.call(this,R,q),this.lineWidth=ce;this.path=re},I=function(R,q){if((R!=="stroke"||q||!x.call(this))&&(R==="stroke"||q||!p.call(this))){for(var Y,te,ie=[],pe=this.path,oe=0;oe<pe.length;oe++){var ce=pe[oe];switch(ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ce,deltas:[],abs:[]});break;case"lt":var ge=ie.length;if(pe[oe-1]&&!isNaN(pe[oe-1].x)&&(Y=[ce.x-pe[oe-1].x,ce.y-pe[oe-1].y],ge>0)){for(;ge>=0;ge--)if(ie[ge-1].close!==!0&&ie[ge-1].begin!==!0){ie[ge-1].deltas.push(Y),ie[ge-1].abs.push(ce);break}}break;case"bct":Y=[ce.x1-pe[oe-1].x,ce.y1-pe[oe-1].y,ce.x2-pe[oe-1].x,ce.y2-pe[oe-1].y,ce.x-pe[oe-1].x,ce.y-pe[oe-1].y],ie[ie.length-1].deltas.push(Y);break;case"qct":var Fe=pe[oe-1].x+2/3*(ce.x1-pe[oe-1].x),re=pe[oe-1].y+2/3*(ce.y1-pe[oe-1].y),Ne=ce.x+2/3*(ce.x1-ce.x),Oe=ce.y+2/3*(ce.y1-ce.y),Ce=ce.x,fe=ce.y;Y=[Fe-pe[oe-1].x,re-pe[oe-1].y,Ne-pe[oe-1].x,Oe-pe[oe-1].y,Ce-pe[oe-1].x,fe-pe[oe-1].y],ie[ie.length-1].deltas.push(Y);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ce)}}te=q?null:R==="stroke"?"stroke":"fill";for(var Ie=!1,He=0;He<ie.length;He++)if(ie[He].arc)for(var Xe=ie[He].abs,dt=0;dt<Xe.length;dt++){var Et=Xe[dt];Et.type==="arc"?C.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,q,!Ie):M.call(this,Et.x,Et.y),Ie=!0}else if(ie[He].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ie[He].begin!==!0){var Tt=ie[He].start.x,Ct=ie[He].start.y;Q.call(this,ie[He].deltas,Tt,Ct),Ie=!0}te&&N.call(this,te),q&&P.call(this)}},D=function(R){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-Y;case"top":return R+q-Y;case"hanging":return R+q-2*Y;case"middle":return R+q/2-Y;case"ideographic":return R;case"alphabetic":default:return R}},E=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(q,Y){this.colorStops.push([q,Y])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(R,q,Y,te,ie,pe,oe,ce,ge){for(var Fe=W.call(this,Y,te,ie,pe),re=0;re<Fe.length;re++){var Ne=Fe[re];re===0&&(ge?O.call(this,Ne.x1+R,Ne.y1+q):M.call(this,Ne.x1+R,Ne.y1+q)),J.call(this,R,q,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}ce?P.call(this):N.call(this,oe)},N=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(R,q){this.pdf.internal.out(r(R)+" "+n(q)+" m")},F=function(R){var q;switch(R.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Y=this.pdf.getTextDimensions(R.text),te=D.call(this,R.y),ie=E.call(this,te)-Y.h,pe=this.ctx.transform.applyToPoint(new i(R.x,te)),oe=this.ctx.transform.decompose(),ce=new l;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var ge,Fe,re,Ne=this.ctx.transform.applyToRectangle(new o(R.x,te,Y.w,Y.h)),Oe=ce.applyToRectangle(new o(R.x,ie,Y.w,Y.h)),Ce=b.call(this,Oe),fe=[],Ie=0;Ie<Ce.length;Ie+=1)fe.indexOf(Ce[Ie])===-1&&fe.push(Ce[Ie]);if(S(fe),this.autoPaging)for(var He=fe[0],Xe=fe[fe.length-1],dt=He;dt<Xe+1;dt++){this.pdf.setPage(dt);var Et=dt===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[2],Dt=Ct-this.margin[0],Jt=this.pdf.internal.pageSize.width-this.margin[1],Pt=Jt-this.margin[3],Mt=dt===1?0:Tt+(dt-2)*Dt;if(this.ctx.clip_path.length!==0){var Wt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ge,this.posX+this.margin[3],-1*Mt+Et),I.call(this,"fill",!0),this.path=Wt}var Pe=_([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Mt+Et+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*R.scale),re=this.lineWidth,this.lineWidth=re*R.scale);var Re=this.autoPaging!=="text";if(Re||Pe.y+Pe.h<=Ct){if(Re||Pe.y>=Et&&Pe.x<=Jt){var Te=Re?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||Jt-Pe.x)[0],ot=_([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-Mt+Et+this.ctx.prevPageLastElemOffset)[0],vt=Re&&(dt>He||dt<Xe)&&g.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Dt,null).clip().discardPath()),this.pdf.text(Te,ot.x,ot.y,{angle:R.angle,align:q,renderingMode:R.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else Pe.y<Ct&&(this.ctx.prevPageLastElemOffset+=Ct-Pe.y);R.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=re)}else R.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*R.scale),re=this.lineWidth,this.lineWidth=re*R.scale),this.pdf.text(R.text,pe.x+this.posX,pe.y+this.posY,{angle:R.angle,align:q,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=re)},M=function(R,q,Y,te){Y=Y||0,te=te||0,this.pdf.internal.out(r(R+Y)+" "+n(q+te)+" l")},Q=function(R,q,Y){return this.pdf.lines(R,q,Y,null,null)},J=function(R,q,Y,te,ie,pe,oe,ce){this.pdf.internal.out([t(a(Y+R)),t(s(te+q)),t(a(ie+R)),t(s(pe+q)),t(a(oe+R)),t(s(ce+q)),"c"].join(" "))},W=function(R,q,Y,te){for(var ie=2*Math.PI,pe=Math.PI/2;q>Y;)q-=ie;var oe=Math.abs(Y-q);oe<ie&&te&&(oe=ie-oe);for(var ce=[],ge=te?-1:1,Fe=q;oe>1e-5;){var re=Fe+ge*Math.min(oe,pe);ce.push(Z.call(this,R,Fe,re)),oe-=Math.abs(re-Fe),Fe=re}return ce},Z=function(R,q,Y){var te=(Y-q)/2,ie=R*Math.cos(te),pe=R*Math.sin(te),oe=ie,ce=-pe,ge=oe*oe+ce*ce,Fe=ge+oe*ie+ce*pe,re=4/3*(Math.sqrt(2*ge*Fe)-Fe)/(oe*pe-ce*ie),Ne=oe-re*ce,Oe=ce+re*oe,Ce=Ne,fe=-Oe,Ie=te+q,He=Math.cos(Ie),Xe=Math.sin(Ie);return{x1:R*Math.cos(q),y1:R*Math.sin(q),x2:Ne*He-Oe*Xe,y2:Ne*Xe+Oe*He,x3:Ce*He-fe*Xe,y3:Ce*Xe+fe*He,x4:R*Math.cos(Y),y4:R*Math.sin(Y)}},H=function(R){return 180*R/Math.PI},z=function(R,q,Y,te,ie,pe){var oe=R+.5*(Y-R),ce=q+.5*(te-q),ge=ie+.5*(Y-ie),Fe=pe+.5*(te-pe),re=Math.min(R,ie,oe,ge),Ne=Math.max(R,ie,oe,ge),Oe=Math.min(q,pe,ce,Fe),Ce=Math.max(q,pe,ce,Fe);return new o(re,Oe,Ne-re,Ce-Oe)},G=function(R,q,Y,te,ie,pe,oe,ce){var ge,Fe,re,Ne,Oe,Ce,fe,Ie,He,Xe,dt,Et,Tt,Ct,Dt=Y-R,Jt=te-q,Pt=ie-Y,Mt=pe-te,Wt=oe-ie,Pe=ce-pe;for(Fe=0;Fe<41;Fe++)He=(fe=(re=R+(ge=Fe/40)*Dt)+ge*((Oe=Y+ge*Pt)-re))+ge*(Oe+ge*(ie+ge*Wt-Oe)-fe),Xe=(Ie=(Ne=q+ge*Jt)+ge*((Ce=te+ge*Mt)-Ne))+ge*(Ce+ge*(pe+ge*Pe-Ce)-Ie),Fe==0?(dt=He,Et=Xe,Tt=He,Ct=Xe):(dt=Math.min(dt,He),Et=Math.min(Et,Xe),Tt=Math.max(Tt,He),Ct=Math.max(Ct,Xe));return new o(Math.round(dt),Math.round(Et),Math.round(Tt-dt),Math.round(Ct-Et))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,q,Y=(R=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:q}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(fr.API),function(e){var t=function(s){var i,o,l,u,d,f,m,p,x,g;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(d=((d=((d=((d=(d-(g=d%85))/85)-(x=d%85))/85)-(p=d%85))/85)-(m=d%85))/85)%85,o.push(f+33,m+33,p+33,x+33,g+33)):o.push(122);return function(b,y){for(var _=y;_>0;_--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,f=String,m="length",p=255,x="charCodeAt",g="slice",b="replace";for(s[g](-2),s=s[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[g](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,_){for(var S=_;S>0;S--)y.pop()}(l,i[m]),f.fromCharCode.apply(f,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=wI(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(fr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,m=0,p=function(x){var g=x.length,b=[],y=String.fromCharCode;for(m=0;m<g;m+=1)b.push(y(255&x.charCodeAt(m)));return b.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(fr.API),function(e){function t(){return(jr.html2canvas?Promise.resolve(jr.html2canvas):d_(()=>Promise.resolve().then(()=>oPe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(jr.DOMPurify?Promise.resolve(jr.DOMPurify):d_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ca(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||f.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],x=p.src.find(function(g){return g.format==="truetype"});x&&l.addFont(x.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||fr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,d).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,fr.getPageSize=function(i,o,l){if(ca(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,x=0,g=0;if(m.hasOwnProperty(f))x=m[f][1]/d,g=m[f][0]/d;else try{x=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",g>x&&(p=g,g=x,x=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",x>g&&(p=g,g=x,x=p)}return{width:g,height:x,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(BI):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(fr.API),fr.API.addJS=function(e){return d7=e,this.internal.events.subscribe("postPutResources",function(){Q2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Q2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+d7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Q2!==void 0&&u7!==void 0&&this.internal.out("/Names <</JavaScript "+Q2+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(fr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var m,p=256*f.charCodeAt(4)+f.charCodeAt(5),x=f.length,g={width:0,height:0,numcomponents:1},b=4;b<x;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){m=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),g={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:m,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(fr.API);var fg,H2,A7,f7,h7,Zxe=function(){var e,t,r;function n(s){var i,o,l,u,d,f,m,p,x,g,b,y,_,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),x=(function(){var B,I;for(I=[],B=0;B<4;++B)I.push(String.fromCharCode(this.data[this.pos++]));return I}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(_=0;0<=g?_<g:_>g;0<=g?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,b.slice(m+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,m,p,x){var g,b,y,_,S,B,I,D,E,C,N,P,O,F,M,Q,J,W,Z,H,z,G=Math.ceil((u.width-f)/p),ne=Math.ceil((u.height-m)/x),R=u.width==G&&u.height==ne;for(F=i*G,P=R?o:new Uint8Array(F*ne),B=s.length,O=0,b=0;O<ne&&l<B;){switch(s[l++]){case 0:for(_=J=0;J<F;_=J+=1)P[b++]=s[l++];break;case 1:for(_=W=0;W<F;_=W+=1)g=s[l++],S=_<i?0:P[b-i],P[b++]=(g+S)%256;break;case 2:for(_=Z=0;Z<F;_=Z+=1)g=s[l++],y=(_-_%i)/i,M=O&&P[(O-1)*F+y*i+_%i],P[b++]=(M+g)%256;break;case 3:for(_=H=0;H<F;_=H+=1)g=s[l++],y=(_-_%i)/i,S=_<i?0:P[b-i],M=O&&P[(O-1)*F+y*i+_%i],P[b++]=(g+Math.floor((S+M)/2))%256;break;case 4:for(_=z=0;z<F;_=z+=1)g=s[l++],y=(_-_%i)/i,S=_<i?0:P[b-i],O===0?M=Q=0:(M=P[(O-1)*F+y*i+_%i],Q=y&&P[(O-1)*F+(y-1)*i+_%i]),I=S+M-Q,D=Math.abs(I-S),C=Math.abs(I-M),N=Math.abs(I-Q),E=D<=C&&D<=N?S:C<=N?M:Q,P[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!R){var q=((m+O*x)*u.width+f)*i,Y=O*F;for(_=0;_<G;_+=1){for(var te=0;te<i;te+=1)o[q++]=P[Y++];q+=(p-1)*i}}O++}}return s=Ixe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,f,m,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=f=0,m=o.length;f<m;i=f+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,f,m,p,x,g,b,y;if(l=this.colors,g=null,o=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),x=(u=s.data||s).length,f=g||i,d=m=0,l===1)for(;d<x;)p=g?4*i[d/4]:m,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,m=p;else for(;d<x;)p=g?4*i[d/4]:m,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,m=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(jr)==="[object Window]"){try{t=jr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,f,m,p;if(this.animation){for(p=[],o=d=0,f=(m=this.animation.frames).length;d<f;o=++d)i=m[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,p.push(i.image=e(l));return p}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,f,m=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,d=f.numPlays,(i=function(){var p,x;if(p=o++%u,x=l[p],m.renderFrame(s,p),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,x.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function e1e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var u=!0,d=[],f=0,m=null,p=0,x=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,x=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];f=e[t++]|e[t++]<<8,m=e[t++],(1&g)==0&&(m=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,B=e[t++],I=B>>6&1,D=1<<(7&B)+1,E=o,C=l,N=!1;B>>7&&(N=!0,E=t,C=D,t+=3*D);var P=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}d.push({x:b,y,width:_,height:S,has_local_palette:N,palette_offset:E,palette_size:C,data_offset:P,data_length:t-P,transparent_index:m,interlaced:!!I,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,M){var Q=this.frameInfo(F),J=Q.width*Q.height,W=new Uint8Array(J);m7(e,Q.data_offset,W,J);var Z=Q.palette_offset,H=Q.transparent_index;H===null&&(H=256);var z=Q.width,G=r-z,ne=z,R=4*(Q.y*r+Q.x),q=4*((Q.y+Q.height)*r+Q.x),Y=R,te=4*G;Q.interlaced===!0&&(te+=4*r*7);for(var ie=8,pe=0,oe=W.length;pe<oe;++pe){var ce=W[pe];if(ne===0&&(ne=z,(Y+=te)>=q&&(te=4*G+4*r*(ie-1),Y=R+(z+G)*(ie<<1),ie>>=1)),ce===H)Y+=4;else{var ge=e[Z+3*ce],Fe=e[Z+3*ce+1],re=e[Z+3*ce+2];M[Y++]=re,M[Y++]=Fe,M[Y++]=ge,M[Y++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(F,M){var Q=this.frameInfo(F),J=Q.width*Q.height,W=new Uint8Array(J);m7(e,Q.data_offset,W,J);var Z=Q.palette_offset,H=Q.transparent_index;H===null&&(H=256);var z=Q.width,G=r-z,ne=z,R=4*(Q.y*r+Q.x),q=4*((Q.y+Q.height)*r+Q.x),Y=R,te=4*G;Q.interlaced===!0&&(te+=4*r*7);for(var ie=8,pe=0,oe=W.length;pe<oe;++pe){var ce=W[pe];if(ne===0&&(ne=z,(Y+=te)>=q&&(te=4*G+4*r*(ie-1),Y=R+(z+G)*(ie<<1),ie>>=1)),ce===H)Y+=4;else{var ge=e[Z+3*ce],Fe=e[Z+3*ce+1],re=e[Z+3*ce+2];M[Y++]=ge,M[Y++]=Fe,M[Y++]=re,M[Y++]=255}--ne}}}function m7(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,f=0,m=0,p=e[t++],x=new Int32Array(4096),g=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<l)break;var b=f&u;if(f>>=l,d-=l,b!==s){if(b===i)break;for(var y=b<o?b:g,_=0,S=y;S>s;)S=x[S]>>8,++_;var B=S;if(m+_+(y!==b?1:0)>n)return void wa.log("Warning, gif stream longer than expected.");r[m++]=B;var I=m+=_;for(y!==b&&(r[m++]=B),S=y;_--;)S=x[S],r[--I]=255&S,S>>=8;g!==null&&o<4096&&(x[o++]=g<<8|B,o>=u+1&&l<12&&(++l,u=u<<1|1)),g=b}else o=i+1,u=(1<<(l=a+1))-1,g=null}return m!==n&&wa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function LB(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),m=new Array(65535),p=new Array(64),x=new Array(64),g=[],b=0,y=7,_=new Array(64),S=new Array(64),B=new Array(64),I=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(R,q){for(var Y=0,te=0,ie=new Array,pe=1;pe<=16;pe++){for(var oe=1;oe<=R[pe];oe++)ie[q[te]]=[],ie[q[te]][0]=Y,ie[q[te]][1]=pe,te++,Y++;Y*=2}return ie}function Z(R){for(var q=R[0],Y=R[1]-1;Y>=0;)q&1<<Y&&(b|=1<<y),Y--,--y<0&&(b==255?(H(255),H(0)):H(b),y=7,b=0)}function H(R){g.push(R)}function z(R){H(R>>8&255),H(255&R)}function G(R,q,Y,te,ie){for(var pe,oe=ie[0],ce=ie[240],ge=function(Xe,dt){var Et,Tt,Ct,Dt,Jt,Pt,Mt,Wt,Pe,Re,Te=0;for(Pe=0;Pe<8;++Pe){Et=Xe[Te],Tt=Xe[Te+1],Ct=Xe[Te+2],Dt=Xe[Te+3],Jt=Xe[Te+4],Pt=Xe[Te+5],Mt=Xe[Te+6];var ot=Et+(Wt=Xe[Te+7]),vt=Et-Wt,ur=Tt+Mt,Gt=Tt-Mt,Rt=Ct+Pt,Vr=Ct-Pt,dr=Dt+Jt,yn=Dt-Jt,Qr=ot+dr,kn=ot-dr,ea=ur+Rt,or=ur-Rt;Xe[Te]=Qr+ea,Xe[Te+4]=Qr-ea;var Zt=.707106781*(or+kn);Xe[Te+2]=kn+Zt,Xe[Te+6]=kn-Zt;var Kr=.382683433*((Qr=yn+Vr)-(or=Gt+vt)),Ms=.5411961*Qr+Kr,Aa=1.306562965*or+Kr,Va=.707106781*(ea=Vr+Gt),si=vt+Va,qt=vt-Va;Xe[Te+5]=qt+Ms,Xe[Te+3]=qt-Ms,Xe[Te+1]=si+Aa,Xe[Te+7]=si-Aa,Te+=8}for(Te=0,Pe=0;Pe<8;++Pe){Et=Xe[Te],Tt=Xe[Te+8],Ct=Xe[Te+16],Dt=Xe[Te+24],Jt=Xe[Te+32],Pt=Xe[Te+40],Mt=Xe[Te+48];var wn=Et+(Wt=Xe[Te+56]),fn=Et-Wt,Vn=Tt+Mt,ta=Tt-Mt,fa=Ct+Pt,Ae=Ct-Pt,Be=Dt+Jt,we=Dt-Jt,Ee=wn+Be,_e=wn-Be,ke=Vn+fa,We=Vn-fa;Xe[Te]=Ee+ke,Xe[Te+32]=Ee-ke;var st=.707106781*(We+_e);Xe[Te+16]=_e+st,Xe[Te+48]=_e-st;var $e=.382683433*((Ee=we+Ae)-(We=ta+fn)),Je=.5411961*Ee+$e,tt=1.306562965*We+$e,wt=.707106781*(ke=Ae+ta),Ot=fn+wt,Vt=fn-wt;Xe[Te+40]=Vt+Je,Xe[Te+24]=Vt-Je,Xe[Te+8]=Ot+tt,Xe[Te+56]=Ot-tt,Te++}for(Pe=0;Pe<64;++Pe)Re=Xe[Pe]*dt[Pe],p[Pe]=Re>0?Re+.5|0:Re-.5|0;return p}(R,q),Fe=0;Fe<64;++Fe)x[E[Fe]]=ge[Fe];var re=x[0]-Y;Y=x[0],re==0?Z(te[0]):(Z(te[m[pe=32767+re]]),Z(f[pe]));for(var Ne=63;Ne>0&&x[Ne]==0;)Ne--;if(Ne==0)return Z(oe),Y;for(var Oe,Ce=1;Ce<=Ne;){for(var fe=Ce;x[Ce]==0&&Ce<=Ne;)++Ce;var Ie=Ce-fe;if(Ie>=16){Oe=Ie>>4;for(var He=1;He<=Oe;++He)Z(ce);Ie&=15}pe=32767+x[Ce],Z(ie[(Ie<<4)+m[pe]]),Z(f[pe]),Ce++}return Ne!=63&&Z(oe),Y}function ne(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(q){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ie=i((Y[te]*q+50)/100);ie=Math.min(Math.max(ie,1),255),o[E[te]]=ie}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((pe[oe]*q+50)/100);ce=Math.min(Math.max(ce,1),255),l[E[oe]]=ce}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,re=0;re<8;re++)for(var Ne=0;Ne<8;Ne++)u[Fe]=1/(o[E[Fe]]*ge[re]*ge[Ne]*8),d[Fe]=1/(l[E[Fe]]*ge[re]*ge[Ne]*8),Fe++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,q){q&&ne(q),g=new Array,b=0,y=7,z(65496),z(65504),z(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),z(1),z(1),H(0),H(0),function(){z(65499),z(132),H(0);for(var Tt=0;Tt<64;Tt++)H(o[Tt]);H(1);for(var Ct=0;Ct<64;Ct++)H(l[Ct])}(),function(Tt,Ct){z(65472),z(17),H(8),z(Ct),z(Tt),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(R.width,R.height),function(){z(65476),z(418),H(0);for(var Tt=0;Tt<16;Tt++)H(C[Tt+1]);for(var Ct=0;Ct<=11;Ct++)H(N[Ct]);H(16);for(var Dt=0;Dt<16;Dt++)H(P[Dt+1]);for(var Jt=0;Jt<=161;Jt++)H(O[Jt]);H(1);for(var Pt=0;Pt<16;Pt++)H(F[Pt+1]);for(var Mt=0;Mt<=11;Mt++)H(M[Mt]);H(17);for(var Wt=0;Wt<16;Wt++)H(Q[Wt+1]);for(var Pe=0;Pe<=161;Pe++)H(J[Pe])}(),z(65498),z(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var Y=0,te=0,ie=0;b=0,y=7,this.encode.displayName="_encode_";for(var pe,oe,ce,ge,Fe,re,Ne,Oe,Ce,fe=R.data,Ie=R.width,He=R.height,Xe=4*Ie,dt=0;dt<He;){for(pe=0;pe<Xe;){for(Fe=Xe*dt+pe,Ne=-1,Oe=0,Ce=0;Ce<64;Ce++)re=Fe+(Oe=Ce>>3)*Xe+(Ne=4*(7&Ce)),dt+Oe>=He&&(re-=Xe*(dt+1+Oe-He)),pe+Ne>=Xe&&(re-=pe+Ne-Xe+4),oe=fe[re++],ce=fe[re++],ge=fe[re++],_[Ce]=(D[oe]+D[ce+256>>0]+D[ge+512>>0]>>16)-128,S[Ce]=(D[oe+768>>0]+D[ce+1024>>0]+D[ge+1280>>0]>>16)-128,B[Ce]=(D[oe+1280>>0]+D[ce+1536>>0]+D[ge+1792>>0]>>16)-128;Y=G(_,u,Y,t,n),te=G(S,d,te,r,a),ie=G(B,d,ie,r,a),pe+=32}dt+=8}if(y>=0){var Et=[];Et[1]=y+1,Et[0]=(1<<y+1)-1,Z(Et)}return z(65497),new Uint8Array(g)},e=e||50,function(){for(var R=String.fromCharCode,q=0;q<256;q++)I[q]=R(q)}(),t=W(C,N),r=W(F,M),n=W(P,O),a=W(Q,J),function(){for(var R=1,q=2,Y=1;Y<=15;Y++){for(var te=R;te<q;te++)m[32767+te]=Y,f[32767+te]=[],f[32767+te][1]=Y,f[32767+te][0]=te;for(var ie=-(q-1);ie<=-R;ie++)m[32767+ie]=Y,f[32767+ie]=[],f[32767+ie][1]=Y,f[32767+ie][0]=q-1+ie;R<<=1,q<<=1}}(),function(){for(var R=0;R<256;R++)D[R]=19595*R,D[R+256>>0]=38470*R,D[R+512>>0]=7471*R+32768,D[R+768>>0]=-11059*R,D[R+1024>>0]=-21709*R,D[R+1280>>0]=32768*R+8421375,D[R+1536>>0]=-27439*R,D[R+1792>>0]=-5329*R}(),ne(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $u(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function p7(e){function t(C){if(!C)throw Error("assert :P")}function r(C,N,P){for(var O=0;4>O;O++)if(C[N+O]!=P.charCodeAt(O))return!0;return!1}function n(C,N,P,O,F){for(var M=0;M<F;M++)C[N+M]=P[O+M]}function a(C,N,P,O){for(var F=0;F<O;F++)C[N+F]=P}function s(C){return new Int32Array(C)}function i(C,N){for(var P=[],O=0;O<C;O++)P.push(new N);return P}function o(C,N){var P=[];return function O(F,M,Q){for(var J=Q[M],W=0;W<J&&(F.push(Q.length>M+1?[]:new N),!(Q.length<M+1));W++)O(F[W],M+1,Q)}(P,0,C),P}var l=function(){var C=this;function N(k,U){for(var X=1<<U-1>>>0;k&X;)X>>>=1;return X?(k&X-1)+X:k}function P(k,U,X,ae,ue){t(!(ae%X));do k[U+(ae-=X)]=ue;while(0<ae)}function O(k,U,X,ae,ue){if(t(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(me,ve,ye,Se,Ue,et){var Ye,Ge,bt=ve,ct=1<<ye,Me=s(16),Ve=s(16);for(t(Ue!=0),t(Se!=null),t(me!=null),t(0<ye),Ge=0;Ge<Ue;++Ge){if(15<Se[Ge])return 0;++Me[Se[Ge]]}if(Me[0]==Ue)return 0;for(Ve[1]=0,Ye=1;15>Ye;++Ye){if(Me[Ye]>1<<Ye)return 0;Ve[Ye+1]=Ve[Ye]+Me[Ye]}for(Ge=0;Ge<Ue;++Ge)Ye=Se[Ge],0<Se[Ge]&&(et[Ve[Ye]++]=Ge);if(Ve[15]==1)return(Se=new F).g=0,Se.value=et[0],P(me,bt,1,ct,Se),ct;var ht,yt=-1,pt=ct-1,Yt=0,Ht=1,Ar=1,$t=1<<ye;for(Ge=0,Ye=1,Ue=2;Ye<=ye;++Ye,Ue<<=1){if(Ht+=Ar<<=1,0>(Ar-=Me[Ye]))return 0;for(;0<Me[Ye];--Me[Ye])(Se=new F).g=Ye,Se.value=et[Ge++],P(me,bt+Yt,Ue,$t,Se),Yt=N(Yt,Ye)}for(Ye=ye+1,Ue=2;15>=Ye;++Ye,Ue<<=1){if(Ht+=Ar<<=1,0>(Ar-=Me[Ye]))return 0;for(;0<Me[Ye];--Me[Ye]){if(Se=new F,(Yt&pt)!=yt){for(bt+=$t,ht=1<<(yt=Ye)-ye;15>yt&&!(0>=(ht-=Me[yt]));)++yt,ht<<=1;ct+=$t=1<<(ht=yt-ye),me[ve+(yt=Yt&pt)].g=ht+ye,me[ve+yt].value=bt-ve-yt}Se.g=Ye-ye,Se.value=et[Ge++],P(me,bt+(Yt>>ye),Ue,$t,Se),Yt=N(Yt,Ye)}}return Ht!=2*Ve[15]-1?0:ct}(k,U,X,ae,ue,he)}function F(){this.value=this.g=0}function M(){this.value=this.g=0}function Q(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Cs,M)}function J(k,U,X,ae){t(k!=null),t(U!=null),t(2147483648>ae),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=U,k.pa=X,k.Jd=U,k.Yc=X+ae,k.Zc=4<=ae?X+ae-4+1:X,pe(k)}function W(k,U){for(var X=0;0<U--;)X|=ce(k,128)<<U;return X}function Z(k,U){var X=W(k,U);return oe(k)?-X:X}function H(k,U,X,ae){var ue,he=0;for(t(k!=null),t(U!=null),t(4294967288>ae),k.Sb=ae,k.Ra=0,k.u=0,k.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)he+=U[X+ue]<<8*ue;k.Ra=he,k.bb=ae,k.oa=U,k.pa=X}function z(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<FA-8>>>0,++k.bb,k.u-=8;Y(k)&&(k.h=1,k.u=0)}function G(k,U){if(t(0<=U),!k.h&&U<=jA){var X=q(k)&bd[U];return k.u+=U,z(k),X}return k.h=1,k.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(k){return k.Ra>>>(k.u&FA-1)>>>0}function Y(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>FA}function te(k,U){k.u=U,k.h=Y(k)}function ie(k){k.u>=rh&&(t(k.u>=rh),z(k))}function pe(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function oe(k){return W(k,1)}function ce(k,U){var X=k.Ca;0>k.b&&pe(k);var ae=k.b,ue=X*U>>>8,he=(k.I>>>ae>ue)+0;for(he?(X-=ue,k.I-=ue+1<<ae>>>0):X=ue+1,ae=X,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+ho[ae],k.b-=ae,k.Ca=(X<<ae)-1,he}function ge(k,U,X){k[U+0]=X>>24&255,k[U+1]=X>>16&255,k[U+2]=X>>8&255,k[U+3]=X>>0&255}function Fe(k,U){return k[U+0]<<0|k[U+1]<<8}function re(k,U){return Fe(k,U)|k[U+2]<<16}function Ne(k,U){return Fe(k,U)|Fe(k,U+2)<<16}function Oe(k,U){var X=1<<U;return t(k!=null),t(0<U),k.X=s(X),k.X==null?0:(k.Mb=32-U,k.Xa=U,1)}function Ce(k,U){t(k!=null),t(U!=null),t(k.Xa==U.Xa),n(U.X,0,k.X,0,1<<U.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ie(k,U,X,ae){t(X!=null),t(ae!=null);var ue=X[0],he=ae[0];return ue==0&&(ue=(k*he+U/2)/U),he==0&&(he=(U*ue+k/2)/k),0>=ue||0>=he?0:(X[0]=ue,ae[0]=he,1)}function He(k,U){return k+(1<<U)-1>>>U}function Xe(k,U){return((4278255360&k)+(4278255360&U)>>>0&4278255360)+((16711935&k)+(16711935&U)>>>0&16711935)>>>0}function dt(k,U){C[U]=function(X,ae,ue,he,me,ve,ye){var Se;for(Se=0;Se<me;++Se){var Ue=C[k](ve[ye+Se-1],ue,he+Se);ve[ye+Se]=Xe(X[ae+Se],Ue)}}}function Et(){this.ud=this.hd=this.jd=0}function Tt(k,U){return((4278124286&(k^U))>>>1)+(k&U)>>>0}function Ct(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function Dt(k,U){return Ct(k+(k-U+.5>>1))}function Jt(k,U,X){return Math.abs(U-X)-Math.abs(k-X)}function Pt(k,U,X,ae,ue,he,me){for(ae=he[me-1],X=0;X<ue;++X)he[me+X]=ae=Xe(k[U+X],ae)}function Mt(k,U,X,ae,ue){var he;for(he=0;he<X;++he){var me=k[U+he],ve=me>>8&255,ye=16711935&(ye=(ye=16711935&me)+((ve<<16)+ve));ae[ue+he]=(4278255360&me)+ye>>>0}}function Wt(k,U){U.jd=k>>0&255,U.hd=k>>8&255,U.ud=k>>16&255}function Pe(k,U,X,ae,ue,he){var me;for(me=0;me<ae;++me){var ve=U[X+me],ye=ve>>>8,Se=ve,Ue=255&(Ue=(Ue=ve>>>16)+((k.jd<<24>>24)*(ye<<24>>24)>>>5));Se=255&(Se=(Se=Se+((k.hd<<24>>24)*(ye<<24>>24)>>>5))+((k.ud<<24>>24)*(Ue<<24>>24)>>>5)),ue[he+me]=(4278255360&ve)+(Ue<<16)+Se}}function Re(k,U,X,ae,ue){C[U]=function(he,me,ve,ye,Se,Ue,et,Ye,Ge){for(ye=et;ye<Ye;++ye)for(et=0;et<Ge;++et)Se[Ue++]=ue(ve[ae(he[me++])])},C[k]=function(he,me,ve,ye,Se,Ue,et){var Ye=8>>he.b,Ge=he.Ea,bt=he.K[0],ct=he.w;if(8>Ye)for(he=(1<<he.b)-1,ct=(1<<Ye)-1;me<ve;++me){var Me,Ve=0;for(Me=0;Me<Ge;++Me)Me&he||(Ve=ae(ye[Se++])),Ue[et++]=ue(bt[Ve&ct]),Ve>>=Ye}else C["VP8LMapColor"+X](ye,Se,bt,ct,Ue,et,me,ve,Ge)}}function Te(k,U,X,ae,ue){for(X=U+X;U<X;){var he=k[U++];ae[ue++]=he>>16&255,ae[ue++]=he>>8&255,ae[ue++]=he>>0&255}}function ot(k,U,X,ae,ue){for(X=U+X;U<X;){var he=k[U++];ae[ue++]=he>>16&255,ae[ue++]=he>>8&255,ae[ue++]=he>>0&255,ae[ue++]=he>>24&255}}function vt(k,U,X,ae,ue){for(X=U+X;U<X;){var he=(me=k[U++])>>16&240|me>>12&15,me=me>>0&240|me>>28&15;ae[ue++]=he,ae[ue++]=me}}function ur(k,U,X,ae,ue){for(X=U+X;U<X;){var he=(me=k[U++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;ae[ue++]=he,ae[ue++]=me}}function Gt(k,U,X,ae,ue){for(X=U+X;U<X;){var he=k[U++];ae[ue++]=he>>0&255,ae[ue++]=he>>8&255,ae[ue++]=he>>16&255}}function Rt(k,U,X,ae,ue,he){if(he==0)for(X=U+X;U<X;)ge(ae,((he=k[U++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(ae,ue,k,U,X)}function Vr(k,U){C[U][0]=C[k+"0"],C[U][1]=C[k+"1"],C[U][2]=C[k+"2"],C[U][3]=C[k+"3"],C[U][4]=C[k+"4"],C[U][5]=C[k+"5"],C[U][6]=C[k+"6"],C[U][7]=C[k+"7"],C[U][8]=C[k+"8"],C[U][9]=C[k+"9"],C[U][10]=C[k+"10"],C[U][11]=C[k+"11"],C[U][12]=C[k+"12"],C[U][13]=C[k+"13"],C[U][14]=C[k+"0"],C[U][15]=C[k+"0"]}function dr(k){return k==J0||k==Td||k==ju||k==ih}function yn(){this.eb=[],this.size=this.A=this.fb=0}function Qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yn,this.f.kb=new Qr,this.sd=null}function ea(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function or(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Zt(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function Kr(k,U){var X=k.T,ae=U.ba.f.RGBA,ue=ae.eb,he=ae.fb+k.ka*ae.A,me=$s[U.ba.S],ve=k.y,ye=k.O,Se=k.f,Ue=k.N,et=k.ea,Ye=k.W,Ge=U.cc,bt=U.dc,ct=U.Mc,Me=U.Nc,Ve=k.ka,ht=k.ka+k.T,yt=k.U,pt=yt+1>>1;for(Ve==0?me(ve,ye,null,null,Se,Ue,et,Ye,Se,Ue,et,Ye,ue,he,null,null,yt):(me(U.ec,U.fc,ve,ye,Ge,bt,ct,Me,Se,Ue,et,Ye,ue,he-ae.A,ue,he,yt),++X);Ve+2<ht;Ve+=2)Ge=Se,bt=Ue,ct=et,Me=Ye,Ue+=k.Rc,Ye+=k.Rc,he+=2*ae.A,me(ve,(ye+=2*k.fa)-k.fa,ve,ye,Ge,bt,ct,Me,Se,Ue,et,Ye,ue,he-ae.A,ue,he,yt);return ye+=k.fa,k.j+ht<k.o?(n(U.ec,U.fc,ve,ye,yt),n(U.cc,U.dc,Se,Ue,pt),n(U.Mc,U.Nc,et,Ye,pt),X--):1&ht||me(ve,ye,null,null,Se,Ue,et,Ye,Se,Ue,et,Ye,ue,he+ae.A,null,null,yt),X}function Ms(k,U,X){var ae=k.F,ue=[k.J];if(ae!=null){var he=k.U,me=U.ba.S,ve=me==LA||me==ju;U=U.ba.f.RGBA;var ye=[0],Se=k.ka;ye[0]=k.T,k.Kb&&(Se==0?--ye[0]:(--Se,ue[0]-=k.width),k.j+k.ka+k.T==k.o&&(ye[0]=k.o-k.j-Se));var Ue=U.eb;Se=U.fb+Se*U.A,k=an(ae,ue[0],k.width,he,ye,Ue,Se+(ve?0:3),U.A),t(X==ye),k&&dr(me)&&Ko(Ue,Se,ve,he,ye,U.A)}return 0}function Aa(k){var U=k.ma,X=U.ba.S,ae=11>X,ue=X==sh||X==Y0||X==LA||X==Iu||X==12||dr(X);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!xd(U.Oa,k,ue?11:12))return 0;if(ue&&dr(X)&&kt(),k.da)alert("todo:use_scaling");else{if(ae){if(U.Ib=Zt,k.Kb){if(X=k.U+1>>1,U.memory=s(k.U+2*X),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+k.U,U.Mc=U.cc,U.Nc=U.dc+X,U.Ib=Kr,kt()}}else alert("todo:EmitYUV");ue&&(U.Jb=Ms,ae&&Ke())}if(ae&&!Ow){for(k=0;256>k;++k)e4[k]=89858*(k-128)+Ss>>Hc,tm[k]=-22014*(k-128)+Ss,Dx[k]=-45773*(k-128),Ns[k]=113618*(k-128)+Ss>>Hc;for(k=Fd;k<Vp;++k)U=76283*(k-16)+Ss>>Hc,rm[k-Fd]=On(U,255),Px[k-Fd]=On(U+8>>4,15);Ow=1}return 1}function Va(k){var U=k.ma,X=k.U,ae=k.T;return t(!(1&k.ka)),0>=X||0>=ae?0:(X=U.Ib(k,U),U.Jb!=null&&U.Jb(k,U,X),U.Dc+=X,1)}function si(k){k.ma.memory=null}function qt(k,U,X,ae){return G(k,8)!=47?0:(U[0]=G(k,14)+1,X[0]=G(k,14)+1,ae[0]=G(k,1),G(k,3)!=0?0:!k.h)}function wn(k,U){if(4>k)return k+1;var X=k-2>>1;return(2+(1&k)<<X)+G(U,X)+1}function fn(k,U){return 120<U?U-120:1<=(X=((X=Ou[U-1])>>4)*k+(8-(15&X)))?X:1;var X}function Vn(k,U,X){var ae=q(X),ue=k[U+=255&ae].g-8;return 0<ue&&(te(X,X.u+8),ae=q(X),U+=k[U].value,U+=ae&(1<<ue)-1),te(X,X.u+k[U].g),k[U].value}function ta(k,U,X){return X.g+=k.g,X.value+=k.value<<U>>>0,t(8>=X.g),k.g}function fa(k,U,X){var ae=k.xc;return t((U=ae==0?0:k.vc[k.md*(X>>ae)+(U>>ae)])<k.Wb),k.Ya[U]}function Ae(k,U,X,ae){var ue=k.ab,he=k.c*U,me=k.C;U=me+U;var ve=X,ye=ae;for(ae=k.Ta,X=k.Ua;0<ue--;){var Se=k.gc[ue],Ue=me,et=U,Ye=ve,Ge=ye,bt=(ye=ae,ve=X,Se.Ea);switch(t(Ue<et),t(et<=Se.nc),Se.hc){case 2:Pp(Ye,Ge,(et-Ue)*bt,ye,ve);break;case 0:var ct=Ue,Me=et,Ve=ye,ht=ve,yt=($t=Se).Ea;ct==0&&(Fx(Ye,Ge,null,null,1,Ve,ht),Pt(Ye,Ge+1,0,0,yt-1,Ve,ht+1),Ge+=yt,ht+=yt,++ct);for(var pt=1<<$t.b,Yt=pt-1,Ht=He(yt,$t.b),Ar=$t.K,$t=$t.w+(ct>>$t.b)*Ht;ct<Me;){var _n=Ar,Dn=$t,rn=1;for(W0(Ye,Ge,Ve,ht-yt,1,Ve,ht);rn<yt;){var Yr=(rn&~Yt)+pt;Yr>yt&&(Yr=yt),(0,Bu[_n[Dn++]>>8&15])(Ye,Ge+ +rn,Ve,ht+rn-yt,Yr-rn,Ve,ht+rn),rn=Yr}Ge+=yt,ht+=yt,++ct&Yt||($t+=Ht)}et!=Se.nc&&n(ye,ve-bt,ye,ve+(et-Ue-1)*bt,bt);break;case 1:for(bt=Ye,Me=Ge,yt=(Ye=Se.Ea)-(ht=Ye&~(Ve=(Ge=1<<Se.b)-1)),ct=He(Ye,Se.b),pt=Se.K,Se=Se.w+(Ue>>Se.b)*ct;Ue<et;){for(Yt=pt,Ht=Se,Ar=new Et,$t=Me+ht,_n=Me+Ye;Me<$t;)Wt(Yt[Ht++],Ar),wd(Ar,bt,Me,Ge,ye,ve),Me+=Ge,ve+=Ge;Me<_n&&(Wt(Yt[Ht++],Ar),wd(Ar,bt,Me,yt,ye,ve),Me+=yt,ve+=yt),++Ue&Ve||(Se+=ct)}break;case 3:if(Ye==ye&&Ge==ve&&0<Se.b){for(Me=ye,Ye=bt=ve+(et-Ue)*bt-(ht=(et-Ue)*He(Se.Ea,Se.b)),Ge=ye,Ve=ve,ct=[],ht=(yt=ht)-1;0<=ht;--ht)ct[ht]=Ge[Ve+ht];for(ht=yt-1;0<=ht;--ht)Me[Ye+ht]=ct[ht];pl(Se,Ue,et,ye,bt,ye,ve)}else pl(Se,Ue,et,Ye,Ge,ye,ve)}ve=ae,ye=X}ye!=X&&n(ae,X,ve,ye,he)}function Be(k,U){var X=k.V,ae=k.Ba+k.c*k.C,ue=U-k.C;if(t(U<=k.l.o),t(16>=ue),0<ue){var he=k.l,me=k.Ta,ve=k.Ua,ye=he.width;if(Ae(k,ue,X,ae),ue=ve=[ve],t((X=k.C)<(ae=U)),t(he.v<he.va),ae>he.o&&(ae=he.o),X<he.j){var Se=he.j-X;X=he.j,ue[0]+=Se*ye}if(X>=ae?X=0:(ue[0]+=4*he.v,he.ka=X-he.j,he.U=he.va-he.v,he.T=ae-X,X=1),X){if(ve=ve[0],11>(X=k.ca).S){var Ue=X.f.RGBA,et=(ae=X.S,ue=he.U,he=he.T,Se=Ue.eb,Ue.A),Ye=he;for(Ue=Ue.fb+k.Ma*Ue.A;0<Ye--;){var Ge=me,bt=ve,ct=ue,Me=Se,Ve=Ue;switch(ae){case _i:Vi(Ge,bt,ct,Me,Ve);break;case sh:ui(Ge,bt,ct,Me,Ve);break;case J0:ui(Ge,bt,ct,Me,Ve),Ko(Me,Ve,0,ct,1,0);break;case Lc:$l(Ge,bt,ct,Me,Ve);break;case Y0:Rt(Ge,bt,ct,Me,Ve,1);break;case Td:Rt(Ge,bt,ct,Me,Ve,1),Ko(Me,Ve,0,ct,1,0);break;case LA:Rt(Ge,bt,ct,Me,Ve,0);break;case ju:Rt(Ge,bt,ct,Me,Ve,0),Ko(Me,Ve,1,ct,1,0);break;case Iu:Ed(Ge,bt,ct,Me,Ve);break;case ih:Ed(Ge,bt,ct,Me,Ve),nn(Me,Ve,ct,1,0);break;case Lp:mo(Ge,bt,ct,Me,Ve);break;default:t(0)}ve+=ye,Ue+=et}k.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=X.height)}}k.C=U,t(k.C<=k.i)}function we(k){var U;if(0<k.ua)return 0;for(U=0;U<k.Wb;++U){var X=k.Ya[U].G,ae=k.Ya[U].H;if(0<X[1][ae[1]+0].g||0<X[2][ae[2]+0].g||0<X[3][ae[3]+0].g)return 0}return 1}function Ee(k,U,X,ae,ue,he){if(k.Z!=0){var me=k.qd,ve=k.rd;for(t(Mc[k.Z]!=null);U<X;++U)Mc[k.Z](me,ve,ae,ue,ae,ue,he),me=ae,ve=ue,ue+=he;k.qd=me,k.rd=ve}}function _e(k,U){var X=k.l.ma,ae=X.Z==0||X.Z==1?k.l.j:k.C;if(ae=k.C<ae?ae:k.C,t(U<=k.l.o),U>ae){var ue=k.l.width,he=X.ca,me=X.tb+ue*ae,ve=k.V,ye=k.Ba+k.c*ae,Se=k.gc;t(k.ab==1),t(Se[0].hc==3),yd(Se[0],ae,U,ve,ye,he,me),Ee(X,ae,U,he,me,ue)}k.C=k.Ma=U}function ke(k,U,X,ae,ue,he,me){var ve=k.$/ae,ye=k.$%ae,Se=k.m,Ue=k.s,et=X+k.$,Ye=et;ue=X+ae*ue;var Ge=X+ae*he,bt=280+Ue.ua,ct=k.Pb?ve:16777216,Me=0<Ue.ua?Ue.Wa:null,Ve=Ue.wc,ht=et<Ge?fa(Ue,ye,ve):null;t(k.C<he),t(Ge<=ue);var yt=!1;e:for(;;){for(;yt||et<Ge;){var pt=0;if(ve>=ct){var Yt=et-X;t((ct=k).Pb),ct.wd=ct.m,ct.xd=Yt,0<ct.s.ua&&Ce(ct.s.Wa,ct.s.vb),ct=ve+Iw}if(ye&Ve||(ht=fa(Ue,ye,ve)),t(ht!=null),ht.Qb&&(U[et]=ht.qb,yt=!0),!yt)if(ie(Se),ht.jc){pt=Se,Yt=U;var Ht=et,Ar=ht.pd[q(pt)&Cs-1];t(ht.jc),256>Ar.g?(te(pt,pt.u+Ar.g),Yt[Ht]=Ar.value,pt=0):(te(pt,pt.u+Ar.g-256),t(256<=Ar.value),pt=Ar.value),pt==0&&(yt=!0)}else pt=Vn(ht.G[0],ht.H[0],Se);if(Se.h)break;if(yt||256>pt){if(!yt)if(ht.nd)U[et]=(ht.qb|pt<<8)>>>0;else{if(ie(Se),yt=Vn(ht.G[1],ht.H[1],Se),ie(Se),Yt=Vn(ht.G[2],ht.H[2],Se),Ht=Vn(ht.G[3],ht.H[3],Se),Se.h)break;U[et]=(Ht<<24|yt<<16|pt<<8|Yt)>>>0}if(yt=!1,++et,++ye>=ae&&(ye=0,++ve,me!=null&&ve<=he&&!(ve%16)&&me(k,ve),Me!=null))for(;Ye<et;)pt=U[Ye++],Me.X[(506832829*pt&4294967295)>>>Me.Mb]=pt}else if(280>pt){if(pt=wn(pt-256,Se),Yt=Vn(ht.G[4],ht.H[4],Se),ie(Se),Yt=fn(ae,Yt=wn(Yt,Se)),Se.h)break;if(et-X<Yt||ue-et<pt)break e;for(Ht=0;Ht<pt;++Ht)U[et+Ht]=U[et+Ht-Yt];for(et+=pt,ye+=pt;ye>=ae;)ye-=ae,++ve,me!=null&&ve<=he&&!(ve%16)&&me(k,ve);if(t(et<=ue),ye&Ve&&(ht=fa(Ue,ye,ve)),Me!=null)for(;Ye<et;)pt=U[Ye++],Me.X[(506832829*pt&4294967295)>>>Me.Mb]=pt}else{if(!(pt<bt))break e;for(yt=pt-280,t(Me!=null);Ye<et;)pt=U[Ye++],Me.X[(506832829*pt&4294967295)>>>Me.Mb]=pt;pt=et,t(!(yt>>>(Yt=Me).Xa)),U[pt]=Yt.X[yt],yt=!0}yt||t(Se.h==Y(Se))}if(k.Pb&&Se.h&&et<ue)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&Ce(k.s.vb,k.s.Wa);else{if(Se.h)break e;me!=null&&me(k,ve>he?he:ve),k.a=0,k.$=et-X}return 1}return k.a=3,0}function We(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var U=k.Wa;U!=null&&(U.X=null),k.vb=null,t(k!=null)}function st(){var k=new eh;return k==null?null:(k.a=0,k.xb=oh,Vr("Predictor","VP8LPredictors"),Vr("Predictor","VP8LPredictors_C"),Vr("PredictorAdd","VP8LPredictorsAdd"),Vr("PredictorAdd","VP8LPredictorsAdd_C"),Pp=Mt,wd=Pe,Vi=Te,ui=ot,Ed=vt,mo=ur,$l=Gt,C.VP8LMapColor32b=Vs,C.VP8LMapColor8b=X0,k)}function $e(k,U,X,ae,ue){var he=1,me=[k],ve=[U],ye=ae.m,Se=ae.s,Ue=null,et=0;e:for(;;){if(X)for(;he&&G(ye,1);){var Ye=me,Ge=ve,bt=ae,ct=1,Me=bt.m,Ve=bt.gc[bt.ab],ht=G(Me,2);if(bt.Oc&1<<ht)he=0;else{switch(bt.Oc|=1<<ht,Ve.hc=ht,Ve.Ea=Ye[0],Ve.nc=Ge[0],Ve.K=[null],++bt.ab,t(4>=bt.ab),ht){case 0:case 1:Ve.b=G(Me,3)+2,ct=$e(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,bt,Ve.K),Ve.K=Ve.K[0];break;case 3:var yt,pt=G(Me,8)+1,Yt=16<pt?0:4<pt?1:2<pt?2:3;if(Ye[0]=He(Ve.Ea,Yt),Ve.b=Yt,yt=ct=$e(pt,1,0,bt,Ve.K)){var Ht,Ar=pt,$t=Ve,_n=1<<(8>>$t.b),Dn=s(_n);if(Dn==null)yt=0;else{var rn=$t.K[0],Yr=$t.w;for(Dn[0]=$t.K[0][0],Ht=1;Ht<1*Ar;++Ht)Dn[Ht]=Xe(rn[Yr+Ht],Dn[Ht-1]);for(;Ht<4*_n;++Ht)Dn[Ht]=0;$t.K[0]=null,$t.K[0]=Dn,yt=1}}ct=yt;break;case 2:break;default:t(0)}he=ct}}if(me=me[0],ve=ve[0],he&&G(ye,1)&&!(he=1<=(et=G(ye,4))&&11>=et)){ae.a=3;break e}var qn;if(qn=he)t:{var Pn,Ur,na,Er=ae,Ir=me,Cn=ve,Sn=et,Ks=X,Bs=Er.m,Ka=Er.s,Ga=[null],os=1,bl=0,Rn=MA[Sn];r:for(;;){if(Ks&&G(Bs,1)){var ls=G(Bs,3)+2,ql=He(Ir,ls),Od=He(Cn,ls),VA=ql*Od;if(!$e(ql,Od,0,Er,Ga))break r;for(Ga=Ga[0],Ka.xc=ls,Pn=0;Pn<VA;++Pn){var Dd=Ga[Pn]>>8&65535;Ga[Pn]=Dd,Dd>=os&&(os=Dd+1)}}if(Bs.h)break r;for(Ur=0;5>Ur;++Ur){var _a=Go[Ur];!Ur&&0<Sn&&(_a+=1<<Sn),bl<_a&&(bl=_a)}var nm=i(os*Rn,F),zp=os,$i=i(zp,Q);if($i==null)var Ia=null;else t(65536>=zp),Ia=$i;var zA=s(bl);if(Ia==null||zA==null||nm==null){Er.a=1;break r}var Pd=nm;for(Pn=na=0;Pn<os;++Pn){var go=Ia[Pn],Rd=go.G,vo=go.H,am=0,ch=1,$p=0;for(Ur=0;5>Ur;++Ur){_a=Go[Ur],Rd[Ur]=Pd,vo[Ur]=na,!Ur&&0<Sn&&(_a+=1<<Sn);a:{var sm,Kp=_a,im=Er,uh=zA,Rw=Pd,Lw=na,om=0,Lu=im.m,r4=G(Lu,1);if(a(uh,0,0,Kp),r4){var Uw=G(Lu,1)+1,Mw=G(Lu,1),Rx=G(Lu,Mw==0?1:8);uh[Rx]=1,Uw==2&&(uh[Rx=G(Lu,8)]=1);var dh=1}else{var Lx=s(19),Ux=G(Lu,4)+4;if(19<Ux){im.a=3;var lm=0;break a}for(sm=0;sm<Ux;++sm)Lx[Fu[sm]]=G(Lu,3);var Gp=void 0,Ah=void 0,Qw=im,Hw=Lx,Uu=Kp,cm=uh,qp=0,Wl=Qw.m,fh=8,Mx=i(128,F);n:for(;O(Mx,0,7,Hw,19);){if(G(Wl,1)){var Vw=2+2*G(Wl,3);if((Gp=2+G(Wl,Vw))>Uu)break n}else Gp=Uu;for(Ah=0;Ah<Uu&&Gp--;){ie(Wl);var Qx=Mx[0+(127&q(Wl))];te(Wl,Wl.u+Qx.g);var $A=Qx.value;if(16>$A)cm[Ah++]=$A,$A!=0&&(fh=$A);else{var zw=$A==16,Hx=$A-16,Vx=xl[Hx],zx=G(Wl,Up[Hx])+Vx;if(Ah+zx>Uu)break n;for(var $w=zw?fh:0;0<zx--;)cm[Ah++]=$w}}qp=1;break n}qp||(Qw.a=3),dh=qp}(dh=dh&&!Lu.h)&&(om=O(Rw,Lw,8,uh,Kp)),dh&&om!=0?lm=om:(im.a=3,lm=0)}if(lm==0)break r;if(ch&&UA[Ur]==1&&(ch=Pd[na].g==0),am+=Pd[na].g,na+=lm,3>=Ur){var KA,Wp=zA[0];for(KA=1;KA<_a;++KA)zA[KA]>Wp&&(Wp=zA[KA]);$p+=Wp}}if(go.nd=ch,go.Qb=0,ch&&(go.qb=(Rd[3][vo[3]+0].value<<24|Rd[1][vo[1]+0].value<<16|Rd[2][vo[2]+0].value)>>>0,am==0&&256>Rd[0][vo[0]+0].value&&(go.Qb=1,go.qb+=Rd[0][vo[0]+0].value<<8)),go.jc=!go.Qb&&6>$p,go.jc){var um,Mu=go;for(um=0;um<Cs;++um){var Vc=um,Qu=Mu.pd[Vc],dm=Mu.G[0][Mu.H[0]+Vc];256<=dm.value?(Qu.g=dm.g+256,Qu.value=dm.value):(Qu.g=0,Qu.value=0,Vc>>=ta(dm,8,Qu),Vc>>=ta(Mu.G[1][Mu.H[1]+Vc],16,Qu),Vc>>=ta(Mu.G[2][Mu.H[2]+Vc],0,Qu),ta(Mu.G[3][Mu.H[3]+Vc],24,Qu))}}}Ka.vc=Ga,Ka.Wb=os,Ka.Ya=Ia,Ka.yc=nm,qn=1;break t}qn=0}if(!(he=qn)){ae.a=3;break e}if(0<et){if(Se.ua=1<<et,!Oe(Se.Wa,et)){ae.a=1,he=0;break e}}else Se.ua=0;var Am=ae,$x=me,Kw=ve,Kx=Am.s,Gx=Kx.xc;if(Am.c=$x,Am.i=Kw,Kx.md=He($x,Gx),Kx.wc=Gx==0?-1:(1<<Gx)-1,X){ae.xb=Fw;break e}if((Ue=s(me*ve))==null){ae.a=1,he=0;break e}he=(he=ke(ae,Ue,0,me,ve,ve,null))&&!ye.h;break e}return he?(ue!=null?ue[0]=Ue:(t(Ue==null),t(X)),ae.$=0,X||We(Se)):We(Se),he}function Je(k,U){var X=k.c*k.i,ae=X+U+16*U;return t(k.c<=U),k.V=s(ae),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+X+U,1)}function tt(k,U){var X=k.C,ae=U-X,ue=k.V,he=k.Ba+k.c*X;for(t(U<=k.l.o);0<ae;){var me=16<ae?16:ae,ve=k.l.ma,ye=k.l.width,Se=ye*me,Ue=ve.ca,et=ve.tb+ye*X,Ye=k.Ta,Ge=k.Ua;Ae(k,me,ue,he),ma(Ye,Ge,Ue,et,Se),Ee(ve,X,X+me,Ue,et,ye),ae-=me,ue+=me*k.c,X+=me}t(X==U),k.C=k.Ma=U}function wt(){this.ub=this.yd=this.td=this.Rb=0}function Ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function jt(){this.Yb=function(){var k=[];return function U(X,ae,ue){for(var he=ue[ae],me=0;me<he&&(X.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));me++)U(X[me],ae+1,ue)}(k,0,[3,11]),k}()}function Lt(){this.jb=s(3),this.Wc=o([4,8],jt),this.Xc=o([4,17],jt)}function wr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Wr(){this.ld=this.La=this.dd=this.tc=0}function Xr(){this.Na=this.la=0}function tn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wr),this.Y=0,this.ya=Array(new rs),this.aa=0,this.l=new Es}function ns(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Qs(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new wt,this.Kc=new Ot,this.ed=new wr,this.Qa=new Vt,this.Ic=this.$c=this.Aa=0,this.D=new oo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ne),this.ia=0,this.pb=i(4,tn),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ns),this.Hd=0,this.rb=Array(new Xr),this.sb=0,this.wa=Array(new Wr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rs),this.L=this.aa=0,this.gd=o([4,2],Wr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ii(){var k=new Qs;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,_s||(_s=Xf)),k}function ha(k,U,X){return k.a==0&&(k.a=U,k.sc=X,k.cb=0),0}function Hs(k,U,X){return 3<=X&&k[U+0]==157&&k[U+1]==1&&k[U+2]==42}function Ad(k,U){if(k==null)return 0;if(k.a=0,k.sc="OK",U==null)return ha(k,2,"null VP8Io passed to VP8GetHeaders()");var X=U.data,ae=U.w,ue=U.ha;if(4>ue)return ha(k,7,"Truncated header.");var he=X[ae+0]|X[ae+1]<<8|X[ae+2]<<16,me=k.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return ha(k,3,"Incorrect keyframe parameters.");if(!me.yd)return ha(k,4,"Frame not displayable.");ae+=3,ue-=3;var ve=k.Kc;if(me.Rb){if(7>ue)return ha(k,7,"cannot parse picture header");if(!Hs(X,ae,ue))return ha(k,3,"Bad code word");ve.c=16383&(X[ae+4]<<8|X[ae+3]),ve.Td=X[ae+4]>>6,ve.i=16383&(X[ae+6]<<8|X[ae+5]),ve.Ud=X[ae+6]>>6,ae+=7,ue-=7,k.za=ve.c+15>>4,k.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,a((he=k.Pa).jb,0,255,he.jb.length),t((he=k.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(me.ub>ue)return ha(k,7,"bad partition length");J(he=k.m,X,ae,me.ub),ae+=me.ub,ue-=me.ub,me.Rb&&(ve.Ld=oe(he),ve.Kd=oe(he)),ve=k.Qa;var ye,Se=k.Pa;if(t(he!=null),t(ve!=null),ve.Cb=oe(he),ve.Cb){if(ve.Bb=oe(he),oe(he)){for(ve.Fb=oe(he),ye=0;4>ye;++ye)ve.Zb[ye]=oe(he)?Z(he,7):0;for(ye=0;4>ye;++ye)ve.Lb[ye]=oe(he)?Z(he,6):0}if(ve.Bb)for(ye=0;3>ye;++ye)Se.jb[ye]=oe(he)?W(he,8):255}else ve.Bb=0;if(he.Ka)return ha(k,3,"cannot parse segment header");if((ve=k.ed).zd=oe(he),ve.Tb=W(he,6),ve.wb=W(he,3),ve.Pc=oe(he),ve.Pc&&oe(he)){for(Se=0;4>Se;++Se)oe(he)&&(ve.vd[Se]=Z(he,6));for(Se=0;4>Se;++Se)oe(he)&&(ve.od[Se]=Z(he,6))}if(k.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return ha(k,3,"cannot parse filter header");var Ue=ue;if(ue=ye=ae,ae=ye+Ue,ve=Ue,k.Xb=(1<<W(k.m,2))-1,Ue<3*(Se=k.Xb))X=7;else{for(ye+=3*Se,ve-=3*Se,Ue=0;Ue<Se;++Ue){var et=X[ue+0]|X[ue+1]<<8|X[ue+2]<<16;et>ve&&(et=ve),J(k.Jc[+Ue],X,ye,et),ye+=et,ve-=et,ue+=3}J(k.Jc[+Se],X,ye,ve),X=ye<ae?0:5}if(X!=0)return ha(k,X,"cannot parse partitions");for(X=W(ye=k.m,7),ue=oe(ye)?Z(ye,4):0,ae=oe(ye)?Z(ye,4):0,ve=oe(ye)?Z(ye,4):0,Se=oe(ye)?Z(ye,4):0,ye=oe(ye)?Z(ye,4):0,Ue=k.Qa,et=0;4>et;++et){if(Ue.Cb){var Ye=Ue.Zb[et];Ue.Fb||(Ye+=X)}else{if(0<et){k.pb[et]=k.pb[0];continue}Ye=X}var Ge=k.pb[et];Ge.Sc[0]=Z0[On(Ye+ue,127)],Ge.Sc[1]=em[On(Ye+0,127)],Ge.Eb[0]=2*Z0[On(Ye+ae,127)],Ge.Eb[1]=101581*em[On(Ye+ve,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=Z0[On(Ye+Se,117)],Ge.Qc[1]=em[On(Ye+ye,127)],Ge.lc=Ye+ye}if(!me.Rb)return ha(k,4,"Not a key frame.");for(oe(he),me=k.Pa,X=0;4>X;++X){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(ve=0;11>ve;++ve)Se=ce(he,QA[X][ue][ae][ve])?W(he,8):Uc[X][ue][ae][ve],me.Wc[X][ue].Yb[ae][ve]=Se;for(ue=0;17>ue;++ue)me.Xc[X][ue]=me.Wc[X][jw[ue]]}return k.kc=oe(he),k.kc&&(k.Bd=W(he,8)),k.cb=1}function Xf(k,U,X,ae,ue,he,me){var ve=U[ue].Yb[X];for(X=0;16>ue;++ue){if(!ce(k,ve[X+0]))return ue;for(;!ce(k,ve[X+1]);)if(ve=U[++ue].Yb[0],X=0,ue==16)return 16;var ye=U[ue+1].Yb;if(ce(k,ve[X+2])){var Se=k,Ue=0;if(ce(Se,(Ye=ve)[(et=X)+3]))if(ce(Se,Ye[et+6])){for(ve=0,et=2*(Ue=ce(Se,Ye[et+8]))+(Ye=ce(Se,Ye[et+9+Ue])),Ue=0,Ye=Ua[et];Ye[ve];++ve)Ue+=Ue+ce(Se,Ye[ve]);Ue+=3+(8<<et)}else ce(Se,Ye[et+7])?(Ue=7+2*ce(Se,165),Ue+=ce(Se,145)):Ue=5+ce(Se,159);else Ue=ce(Se,Ye[et+4])?3+ce(Se,Ye[et+5]):2;ve=ye[2]}else Ue=1,ve=ye[1];ye=me+Tn[ue],0>(Se=k).b&&pe(Se);var et,Ye=Se.b,Ge=(et=Se.Ca>>1)-(Se.I>>Ye)>>31;--Se.b,Se.Ca+=Ge,Se.Ca|=1,Se.I-=(et+1&Ge)<<Ye,he[ye]=((Ue^Ge)-Ge)*ae[(0<ue)+0]}return 16}function Cc(k){var U=k.rb[k.sb-1];U.la=0,U.Na=0,a(k.zc,0,0,k.zc.length),k.ja=0}function _A(k,U){if(k==null)return 0;if(U==null)return ha(k,2,"NULL VP8Io parameter in VP8Decode().");if(!k.cb&&!Ad(k,U))return 0;if(t(k.cb),U.ac==null||U.ac(U)){U.ob&&(k.L=0);var X=Ru[k.L];if(k.L==2?(k.yb=0,k.zb=0):(k.yb=U.v-X>>4,k.zb=U.j-X>>4,0>k.yb&&(k.yb=0),0>k.zb&&(k.zb=0)),k.Va=U.o+15+X>>4,k.Hb=U.va+15+X>>4,k.Hb>k.za&&(k.Hb=k.za),k.Va>k.Ub&&(k.Va=k.Ub),0<k.L){var ae=k.ed;for(X=0;4>X;++X){var ue;if(k.Qa.Cb){var he=k.Qa.Lb[X];k.Qa.Fb||(he+=ae.Tb)}else he=ae.Tb;for(ue=0;1>=ue;++ue){var me=k.gd[X][ue],ve=he;if(ae.Pc&&(ve+=ae.vd[0],ue&&(ve+=ae.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var ye=ve;0<ae.wb&&(ye=4<ae.wb?ye>>2:ye>>1)>9-ae.wb&&(ye=9-ae.wb),1>ye&&(ye=1),me.dd=ye,me.tc=2*ve+ye,me.ld=40<=ve?2:15<=ve?1:0}else me.tc=0;me.La=ue}}}X=0}else ha(k,6,"Frame setup failed"),X=k.a;if(X=X==0){if(X){k.$c=0,0<k.Aa||(k.Ic=Dw);e:{X=k.Ic,ae=4*(ye=k.za);var Se=32*ye,Ue=ye+1,et=0<k.L?ye*(0<k.Aa?2:1):0,Ye=(k.Aa==2?2:1)*ye;if((me=ae+832+(ue=3*(16*X+Ru[k.L])/2*Se)+(he=k.Fa!=null&&0<k.Fa.length?k.Kc.c*k.Kc.i:0))!=me)X=0;else{if(me>k.Vb){if(k.Vb=0,k.Ec=s(me),k.Fc=0,k.Ec==null){X=ha(k,1,"no memory during frame initialization.");break e}k.Vb=me}me=k.Ec,ve=k.Fc,k.Ac=me,k.Bc=ve,ve+=ae,k.Gd=i(Se,ns),k.Hd=0,k.rb=i(Ue+1,Xr),k.sb=1,k.wa=et?i(et,Wr):null,k.Y=0,k.D.Nb=0,k.D.wa=k.wa,k.D.Y=k.Y,0<k.Aa&&(k.D.Y+=ye),t(!0),k.oc=me,k.pc=ve,ve+=832,k.ya=i(Ye,rs),k.aa=0,k.D.ya=k.ya,k.D.aa=k.aa,k.Aa==2&&(k.D.aa+=ye),k.R=16*ye,k.B=8*ye,ye=(Se=Ru[k.L])*k.R,Se=Se/2*k.B,k.sa=me,k.ta=ve+ye,k.qa=k.sa,k.ra=k.ta+16*X*k.R+Se,k.Ha=k.qa,k.Ia=k.ra+8*X*k.B+Se,k.$c=0,ve+=ue,k.mb=he?me:null,k.nb=he?ve:null,t(ve+he<=k.Fc+k.Vb),Cc(k),a(k.Ac,k.Bc,0,ae),X=1}}if(X){if(U.ka=0,U.y=k.sa,U.O=k.ta,U.f=k.qa,U.N=k.ra,U.ea=k.Ha,U.Vd=k.Ia,U.fa=k.R,U.Rc=k.B,U.F=null,U.J=0,!Tu){for(X=-255;255>=X;++X)$a[255+X]=0>X?-X:X;for(X=-1020;1020>=X;++X)gl[1020+X]=-128>X?-128:127<X?127:X;for(X=-112;112>=X;++X)Bd[112+X]=-16>X?-16:15<X?15:X;for(X=-255;510>=X;++X)kd[255+X]=0>X?0:255<X?255:X;Tu=1}Pc=lo,Kl=Sc,Gl=ll,is=Fn,po=Nc,Ra=_c,OA=Ic,Rc=Vl,nh=pd,Cd=TA,_d=md,Sd=Eu,DA=Cu,ah=jc,Nd=$o,ku=Ei,PA=ss,La=Zf,zi[0]=yi,zi[1]=Yf,zi[2]=dl,zi[3]=Jf,zi[4]=co,zi[5]=Al,zi[6]=Hi,zi[7]=uo,zi[8]=Hl,zi[9]=Bc,Du[0]=cl,Du[1]=NA,Du[2]=Ul,Du[3]=hd,Du[4]=ra,Du[5]=Ql,Du[6]=ul,qo[0]=fl,qo[1]=SA,qo[2]=BA,qo[3]=Ao,qo[4]=on,qo[5]=as,qo[6]=kc,X=1}else X=0}X&&(X=function(Ge,bt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var ct,Me=Ge.Jc[Ge.M&Ge.Xb],Ve=Ge.m,ht=Ge;for(ct=0;ct<ht.za;++ct){var yt=Ve,pt=ht,Yt=pt.Ac,Ht=pt.Bc+4*ct,Ar=pt.zc,$t=pt.ya[pt.aa+ct];if(pt.Qa.Bb?$t.$b=ce(yt,pt.Pa.jb[0])?2+ce(yt,pt.Pa.jb[2]):ce(yt,pt.Pa.jb[1]):$t.$b=0,pt.kc&&($t.Ad=ce(yt,pt.Bd)),$t.Za=!ce(yt,145)+0,$t.Za){var _n=$t.Ob,Dn=0;for(pt=0;4>pt;++pt){var rn,Yr=Ar[0+pt];for(rn=0;4>rn;++rn){Yr=Ox[Yt[Ht+rn]][Yr];for(var qn=Id[ce(yt,Yr[0])];0<qn;)qn=Id[2*qn+ce(yt,Yr[qn])];Yr=-qn,Yt[Ht+rn]=Yr}n(_n,Dn,Yt,Ht,4),Dn+=4,Ar[0+pt]=Yr}}else Yr=ce(yt,156)?ce(yt,128)?1:3:ce(yt,163)?2:0,$t.Ob[0]=Yr,a(Yt,Ht,Yr,4),a(Ar,0,Yr,4);$t.Dd=ce(yt,142)?ce(yt,114)?ce(yt,183)?1:3:2:0}if(ht.m.Ka)return ha(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(ht=Me,yt=(Ve=Ge).rb[Ve.sb-1],Yt=Ve.rb[Ve.sb+Ve.ja],ct=Ve.ya[Ve.aa+Ve.ja],Ht=Ve.kc?ct.Ad:0)yt.la=Yt.la=0,ct.Za||(yt.Na=Yt.Na=0),ct.Hc=0,ct.Gc=0,ct.ia=0;else{var Pn,Ur;if(yt=Yt,Yt=ht,Ht=Ve.Pa.Xc,Ar=Ve.ya[Ve.aa+Ve.ja],$t=Ve.pb[Ar.$b],pt=Ar.ad,_n=0,Dn=Ve.rb[Ve.sb-1],Yr=rn=0,a(pt,_n,0,384),Ar.Za)var na=0,Er=Ht[3];else{qn=s(16);var Ir=yt.Na+Dn.Na;if(Ir=_s(Yt,Ht[1],Ir,$t.Eb,0,qn,0),yt.Na=Dn.Na=(0<Ir)+0,1<Ir)Pc(qn,0,pt,_n);else{var Cn=qn[0]+3>>3;for(qn=0;256>qn;qn+=16)pt[_n+qn]=Cn}na=1,Er=Ht[0]}var Sn=15&yt.la,Ks=15&Dn.la;for(qn=0;4>qn;++qn){var Bs=1&Ks;for(Cn=Ur=0;4>Cn;++Cn)Sn=Sn>>1|(Bs=(Ir=_s(Yt,Er,Ir=Bs+(1&Sn),$t.Sc,na,pt,_n))>na)<<7,Ur=Ur<<2|(3<Ir?3:1<Ir?2:pt[_n+0]!=0),_n+=16;Sn>>=4,Ks=Ks>>1|Bs<<7,rn=(rn<<8|Ur)>>>0}for(Er=Sn,na=Ks>>4,Pn=0;4>Pn;Pn+=2){for(Ur=0,Sn=yt.la>>4+Pn,Ks=Dn.la>>4+Pn,qn=0;2>qn;++qn){for(Bs=1&Ks,Cn=0;2>Cn;++Cn)Ir=Bs+(1&Sn),Sn=Sn>>1|(Bs=0<(Ir=_s(Yt,Ht[2],Ir,$t.Qc,0,pt,_n)))<<3,Ur=Ur<<2|(3<Ir?3:1<Ir?2:pt[_n+0]!=0),_n+=16;Sn>>=2,Ks=Ks>>1|Bs<<5}Yr|=Ur<<4*Pn,Er|=Sn<<4<<Pn,na|=(240&Ks)<<Pn}yt.la=Er,Dn.la=na,Ar.Hc=rn,Ar.Gc=Yr,Ar.ia=43690&Yr?0:$t.ia,Ht=!(rn|Yr)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ct.$b][ct.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Ht),ht.Ka)return ha(Ge,7,"Premature end-of-file encountered.")}if(Cc(Ge),Ve=bt,ht=1,ct=(Me=Ge).D,yt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(ct.M=Me.M,ct.uc=yt,fo(Me,ct),ht=1,ct=(Ur=Me.D).Nb,yt=(Yr=Ru[Me.L])*Me.R,Yt=Yr/2*Me.B,qn=16*ct*Me.R,Cn=8*ct*Me.B,Ht=Me.sa,Ar=Me.ta-yt+qn,$t=Me.qa,pt=Me.ra-Yt+Cn,_n=Me.Ha,Dn=Me.Ia-Yt+Cn,Ks=(Sn=Ur.M)==0,rn=Sn>=Me.Va-1,Me.Aa==2&&fo(Me,Ur),Ur.uc)for(Bs=(Ir=Me).D.M,t(Ir.D.uc),Ur=Ir.yb;Ur<Ir.Hb;++Ur){na=Ur,Er=Bs;var Ka=(Ga=(_a=Ir).D).Nb;Pn=_a.R;var Ga=Ga.wa[Ga.Y+na],os=_a.sa,bl=_a.ta+16*Ka*Pn+16*na,Rn=Ga.dd,ls=Ga.tc;if(ls!=0)if(t(3<=ls),_a.L==1)0<na&&ku(os,bl,Pn,ls+4),Ga.La&&La(os,bl,Pn,ls),0<Er&&Nd(os,bl,Pn,ls+4),Ga.La&&PA(os,bl,Pn,ls);else{var ql=_a.B,Od=_a.qa,VA=_a.ra+8*Ka*ql+8*na,Dd=_a.Ha,_a=_a.Ia+8*Ka*ql+8*na;Ka=Ga.ld,0<na&&(Rc(os,bl,Pn,ls+4,Rn,Ka),Cd(Od,VA,Dd,_a,ql,ls+4,Rn,Ka)),Ga.La&&(Sd(os,bl,Pn,ls,Rn,Ka),ah(Od,VA,Dd,_a,ql,ls,Rn,Ka)),0<Er&&(OA(os,bl,Pn,ls+4,Rn,Ka),nh(Od,VA,Dd,_a,ql,ls+4,Rn,Ka)),Ga.La&&(_d(os,bl,Pn,ls,Rn,Ka),DA(Od,VA,Dd,_a,ql,ls,Rn,Ka))}}if(Me.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Ur=16*Sn,Sn=16*(Sn+1),Ks?(Ve.y=Me.sa,Ve.O=Me.ta+qn,Ve.f=Me.qa,Ve.N=Me.ra+Cn,Ve.ea=Me.Ha,Ve.W=Me.Ia+Cn):(Ur-=Yr,Ve.y=Ht,Ve.O=Ar,Ve.f=$t,Ve.N=pt,Ve.ea=_n,Ve.W=Dn),rn||(Sn-=Yr),Sn>Ve.o&&(Sn=Ve.o),Ve.F=null,Ve.J=null,Me.Fa!=null&&0<Me.Fa.length&&Ur<Sn&&(Ve.J=vd(Me,Ve,Ur,Sn-Ur),Ve.F=Me.mb,Ve.F==null&&Ve.F.length==0)){ht=ha(Me,3,"Could not decode alpha data.");break e}Ur<Ve.j&&(Yr=Ve.j-Ur,Ur=Ve.j,t(!(1&Yr)),Ve.O+=Me.R*Yr,Ve.N+=Me.B*(Yr>>1),Ve.W+=Me.B*(Yr>>1),Ve.F!=null&&(Ve.J+=Ve.width*Yr)),Ur<Sn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Ur-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Sn-Ur,ht=Ve.put(Ve))}ct+1!=Me.Ic||rn||(n(Me.sa,Me.ta-yt,Ht,Ar+16*Me.R,yt),n(Me.qa,Me.ra-Yt,$t,pt+8*Me.B,Yt),n(Me.Ha,Me.Ia-Yt,_n,Dn+8*Me.B,Yt))}if(!ht)return ha(Ge,6,"Output aborted.")}return 1}(k,U)),U.bc!=null&&U.bc(U),X&=1}return X?(k.cb=0,X):0}function oi(k,U,X,ae,ue){ue=k[U+X+32*ae]+(ue>>3),k[U+X+32*ae]=-256&ue?0>ue?0:255:ue}function fd(k,U,X,ae,ue,he){oi(k,U,0,X,ae+ue),oi(k,U,1,X,ae+he),oi(k,U,2,X,ae-he),oi(k,U,3,X,ae-ue)}function En(k){return(20091*k>>16)+k}function li(k,U,X,ae){var ue,he=0,me=s(16);for(ue=0;4>ue;++ue){var ve=k[U+0]+k[U+8],ye=k[U+0]-k[U+8],Se=(35468*k[U+4]>>16)-En(k[U+12]),Ue=En(k[U+4])+(35468*k[U+12]>>16);me[he+0]=ve+Ue,me[he+1]=ye+Se,me[he+2]=ye-Se,me[he+3]=ve-Ue,he+=4,U++}for(ue=he=0;4>ue;++ue)ve=(k=me[he+0]+4)+me[he+8],ye=k-me[he+8],Se=(35468*me[he+4]>>16)-En(me[he+12]),oi(X,ae,0,0,ve+(Ue=En(me[he+4])+(35468*me[he+12]>>16))),oi(X,ae,1,0,ye+Se),oi(X,ae,2,0,ye-Se),oi(X,ae,3,0,ve-Ue),he++,ae+=32}function _c(k,U,X,ae){var ue=k[U+0]+4,he=35468*k[U+4]>>16,me=En(k[U+4]),ve=35468*k[U+1]>>16;fd(X,ae,0,ue+me,k=En(k[U+1]),ve),fd(X,ae,1,ue+he,k,ve),fd(X,ae,2,ue-he,k,ve),fd(X,ae,3,ue-me,k,ve)}function Sc(k,U,X,ae,ue){li(k,U,X,ae),ue&&li(k,U+16,X,ae+4)}function ll(k,U,X,ae){Kl(k,U+0,X,ae,1),Kl(k,U+32,X,ae+128,1)}function Fn(k,U,X,ae){var ue;for(k=k[U+0]+4,ue=0;4>ue;++ue)for(U=0;4>U;++U)oi(X,ae,U,ue,k)}function Nc(k,U,X,ae){k[U+0]&&is(k,U+0,X,ae),k[U+16]&&is(k,U+16,X,ae+4),k[U+32]&&is(k,U+32,X,ae+128),k[U+48]&&is(k,U+48,X,ae+128+4)}function lo(k,U,X,ae){var ue,he=s(16);for(ue=0;4>ue;++ue){var me=k[U+0+ue]+k[U+12+ue],ve=k[U+4+ue]+k[U+8+ue],ye=k[U+4+ue]-k[U+8+ue],Se=k[U+0+ue]-k[U+12+ue];he[0+ue]=me+ve,he[8+ue]=me-ve,he[4+ue]=Se+ye,he[12+ue]=Se-ye}for(ue=0;4>ue;++ue)me=(k=he[0+4*ue]+3)+he[3+4*ue],ve=he[1+4*ue]+he[2+4*ue],ye=he[1+4*ue]-he[2+4*ue],Se=k-he[3+4*ue],X[ae+0]=me+ve>>3,X[ae+16]=Se+ye>>3,X[ae+32]=me-ve>>3,X[ae+48]=Se-ye>>3,ae+=64}function Ll(k,U,X){var ae,ue=U-32,he=zs,me=255-k[ue-1];for(ae=0;ae<X;++ae){var ve,ye=he,Se=me+k[U-1];for(ve=0;ve<X;++ve)k[U+ve]=ye[Se+k[ue+ve]];U+=32}}function Yf(k,U){Ll(k,U,4)}function SA(k,U){Ll(k,U,8)}function NA(k,U){Ll(k,U,16)}function Ul(k,U){var X;for(X=0;16>X;++X)n(k,U+32*X,k,U-32,16)}function hd(k,U){var X;for(X=16;0<X;--X)a(k,U,k[U-1],16),U+=32}function Ml(k,U,X){var ae;for(ae=0;16>ae;++ae)a(U,X+32*ae,k,16)}function cl(k,U){var X,ae=16;for(X=0;16>X;++X)ae+=k[U-1+32*X]+k[U+X-32];Ml(ae>>5,k,U)}function ra(k,U){var X,ae=8;for(X=0;16>X;++X)ae+=k[U-1+32*X];Ml(ae>>4,k,U)}function Ql(k,U){var X,ae=8;for(X=0;16>X;++X)ae+=k[U+X-32];Ml(ae>>4,k,U)}function ul(k,U){Ml(128,k,U)}function _r(k,U,X){return k+2*U+X+2>>2}function dl(k,U){var X,ae=U-32;for(ae=new Uint8Array([_r(k[ae-1],k[ae+0],k[ae+1]),_r(k[ae+0],k[ae+1],k[ae+2]),_r(k[ae+1],k[ae+2],k[ae+3]),_r(k[ae+2],k[ae+3],k[ae+4])]),X=0;4>X;++X)n(k,U+32*X,ae,0,ae.length)}function Jf(k,U){var X=k[U-1],ae=k[U-1+32],ue=k[U-1+64],he=k[U-1+96];ge(k,U+0,16843009*_r(k[U-1-32],X,ae)),ge(k,U+32,16843009*_r(X,ae,ue)),ge(k,U+64,16843009*_r(ae,ue,he)),ge(k,U+96,16843009*_r(ue,he,he))}function yi(k,U){var X,ae=4;for(X=0;4>X;++X)ae+=k[U+X-32]+k[U-1+32*X];for(ae>>=3,X=0;4>X;++X)a(k,U+32*X,ae,4)}function co(k,U){var X=k[U-1+0],ae=k[U-1+32],ue=k[U-1+64],he=k[U-1-32],me=k[U+0-32],ve=k[U+1-32],ye=k[U+2-32],Se=k[U+3-32];k[U+0+96]=_r(ae,ue,k[U-1+96]),k[U+1+96]=k[U+0+64]=_r(X,ae,ue),k[U+2+96]=k[U+1+64]=k[U+0+32]=_r(he,X,ae),k[U+3+96]=k[U+2+64]=k[U+1+32]=k[U+0+0]=_r(me,he,X),k[U+3+64]=k[U+2+32]=k[U+1+0]=_r(ve,me,he),k[U+3+32]=k[U+2+0]=_r(ye,ve,me),k[U+3+0]=_r(Se,ye,ve)}function Hi(k,U){var X=k[U+1-32],ae=k[U+2-32],ue=k[U+3-32],he=k[U+4-32],me=k[U+5-32],ve=k[U+6-32],ye=k[U+7-32];k[U+0+0]=_r(k[U+0-32],X,ae),k[U+1+0]=k[U+0+32]=_r(X,ae,ue),k[U+2+0]=k[U+1+32]=k[U+0+64]=_r(ae,ue,he),k[U+3+0]=k[U+2+32]=k[U+1+64]=k[U+0+96]=_r(ue,he,me),k[U+3+32]=k[U+2+64]=k[U+1+96]=_r(he,me,ve),k[U+3+64]=k[U+2+96]=_r(me,ve,ye),k[U+3+96]=_r(ve,ye,ye)}function Al(k,U){var X=k[U-1+0],ae=k[U-1+32],ue=k[U-1+64],he=k[U-1-32],me=k[U+0-32],ve=k[U+1-32],ye=k[U+2-32],Se=k[U+3-32];k[U+0+0]=k[U+1+64]=he+me+1>>1,k[U+1+0]=k[U+2+64]=me+ve+1>>1,k[U+2+0]=k[U+3+64]=ve+ye+1>>1,k[U+3+0]=ye+Se+1>>1,k[U+0+96]=_r(ue,ae,X),k[U+0+64]=_r(ae,X,he),k[U+0+32]=k[U+1+96]=_r(X,he,me),k[U+1+32]=k[U+2+96]=_r(he,me,ve),k[U+2+32]=k[U+3+96]=_r(me,ve,ye),k[U+3+32]=_r(ve,ye,Se)}function uo(k,U){var X=k[U+0-32],ae=k[U+1-32],ue=k[U+2-32],he=k[U+3-32],me=k[U+4-32],ve=k[U+5-32],ye=k[U+6-32],Se=k[U+7-32];k[U+0+0]=X+ae+1>>1,k[U+1+0]=k[U+0+64]=ae+ue+1>>1,k[U+2+0]=k[U+1+64]=ue+he+1>>1,k[U+3+0]=k[U+2+64]=he+me+1>>1,k[U+0+32]=_r(X,ae,ue),k[U+1+32]=k[U+0+96]=_r(ae,ue,he),k[U+2+32]=k[U+1+96]=_r(ue,he,me),k[U+3+32]=k[U+2+96]=_r(he,me,ve),k[U+3+64]=_r(me,ve,ye),k[U+3+96]=_r(ve,ye,Se)}function Bc(k,U){var X=k[U-1+0],ae=k[U-1+32],ue=k[U-1+64],he=k[U-1+96];k[U+0+0]=X+ae+1>>1,k[U+2+0]=k[U+0+32]=ae+ue+1>>1,k[U+2+32]=k[U+0+64]=ue+he+1>>1,k[U+1+0]=_r(X,ae,ue),k[U+3+0]=k[U+1+32]=_r(ae,ue,he),k[U+3+32]=k[U+1+64]=_r(ue,he,he),k[U+3+64]=k[U+2+64]=k[U+0+96]=k[U+1+96]=k[U+2+96]=k[U+3+96]=he}function Hl(k,U){var X=k[U-1+0],ae=k[U-1+32],ue=k[U-1+64],he=k[U-1+96],me=k[U-1-32],ve=k[U+0-32],ye=k[U+1-32],Se=k[U+2-32];k[U+0+0]=k[U+2+32]=X+me+1>>1,k[U+0+32]=k[U+2+64]=ae+X+1>>1,k[U+0+64]=k[U+2+96]=ue+ae+1>>1,k[U+0+96]=he+ue+1>>1,k[U+3+0]=_r(ve,ye,Se),k[U+2+0]=_r(me,ve,ye),k[U+1+0]=k[U+3+32]=_r(X,me,ve),k[U+1+32]=k[U+3+64]=_r(ae,X,me),k[U+1+64]=k[U+3+96]=_r(ue,ae,X),k[U+1+96]=_r(he,ue,ae)}function BA(k,U){var X;for(X=0;8>X;++X)n(k,U+32*X,k,U-32,8)}function Ao(k,U){var X;for(X=0;8>X;++X)a(k,U,k[U-1],8),U+=32}function wi(k,U,X){var ae;for(ae=0;8>ae;++ae)a(U,X+32*ae,k,8)}function fl(k,U){var X,ae=8;for(X=0;8>X;++X)ae+=k[U+X-32]+k[U-1+32*X];wi(ae>>4,k,U)}function as(k,U){var X,ae=4;for(X=0;8>X;++X)ae+=k[U+X-32];wi(ae>>3,k,U)}function on(k,U){var X,ae=4;for(X=0;8>X;++X)ae+=k[U-1+32*X];wi(ae>>3,k,U)}function kc(k,U){wi(128,k,U)}function hl(k,U,X){var ae=k[U-X],ue=k[U+0],he=3*(ue-ae)+Rp[1020+k[U-2*X]-k[U+X]],me=RA[112+(he+4>>3)];k[U-X]=zs[255+ae+RA[112+(he+3>>3)]],k[U+0]=zs[255+ue-me]}function kA(k,U,X,ae){var ue=k[U+0],he=k[U+X];return vl[255+k[U-2*X]-k[U-X]]>ae||vl[255+he-ue]>ae}function yu(k,U,X,ae){return 4*vl[255+k[U-X]-k[U+0]]+vl[255+k[U-2*X]-k[U+X]]<=ae}function wu(k,U,X,ae,ue){var he=k[U-3*X],me=k[U-2*X],ve=k[U-X],ye=k[U+0],Se=k[U+X],Ue=k[U+2*X],et=k[U+3*X];return 4*vl[255+ve-ye]+vl[255+me-Se]>ae?0:vl[255+k[U-4*X]-he]<=ue&&vl[255+he-me]<=ue&&vl[255+me-ve]<=ue&&vl[255+et-Ue]<=ue&&vl[255+Ue-Se]<=ue&&vl[255+Se-ye]<=ue}function $o(k,U,X,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)yu(k,U+ae,X,ue)&&hl(k,U+ae,X)}function Ei(k,U,X,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)yu(k,U+ae*X,1,ue)&&hl(k,U+ae*X,1)}function ss(k,U,X,ae){var ue;for(ue=3;0<ue;--ue)$o(k,U+=4*X,X,ae)}function Zf(k,U,X,ae){var ue;for(ue=3;0<ue;--ue)Ei(k,U+=4,X,ae)}function Tc(k,U,X,ae,ue,he,me,ve){for(he=2*he+1;0<ue--;){if(wu(k,U,X,he,me))if(kA(k,U,X,ve))hl(k,U,X);else{var ye=k,Se=U,Ue=X,et=ye[Se-2*Ue],Ye=ye[Se-Ue],Ge=ye[Se+0],bt=ye[Se+Ue],ct=ye[Se+2*Ue],Me=27*(ht=Rp[1020+3*(Ge-Ye)+Rp[1020+et-bt]])+63>>7,Ve=18*ht+63>>7,ht=9*ht+63>>7;ye[Se-3*Ue]=zs[255+ye[Se-3*Ue]+ht],ye[Se-2*Ue]=zs[255+et+Ve],ye[Se-Ue]=zs[255+Ye+Me],ye[Se+0]=zs[255+Ge-Me],ye[Se+Ue]=zs[255+bt-Ve],ye[Se+2*Ue]=zs[255+ct-ht]}U+=ae}}function ci(k,U,X,ae,ue,he,me,ve){for(he=2*he+1;0<ue--;){if(wu(k,U,X,he,me))if(kA(k,U,X,ve))hl(k,U,X);else{var ye=k,Se=U,Ue=X,et=ye[Se-Ue],Ye=ye[Se+0],Ge=ye[Se+Ue],bt=RA[112+((ct=3*(Ye-et))+4>>3)],ct=RA[112+(ct+3>>3)],Me=bt+1>>1;ye[Se-2*Ue]=zs[255+ye[Se-2*Ue]+Me],ye[Se-Ue]=zs[255+et+ct],ye[Se+0]=zs[255+Ye-bt],ye[Se+Ue]=zs[255+Ge-Me]}U+=ae}}function Ic(k,U,X,ae,ue,he){Tc(k,U,X,1,16,ae,ue,he)}function Vl(k,U,X,ae,ue,he){Tc(k,U,1,X,16,ae,ue,he)}function md(k,U,X,ae,ue,he){var me;for(me=3;0<me;--me)ci(k,U+=4*X,X,1,16,ae,ue,he)}function Eu(k,U,X,ae,ue,he){var me;for(me=3;0<me;--me)ci(k,U+=4,1,X,16,ae,ue,he)}function pd(k,U,X,ae,ue,he,me,ve){Tc(k,U,ue,1,8,he,me,ve),Tc(X,ae,ue,1,8,he,me,ve)}function TA(k,U,X,ae,ue,he,me,ve){Tc(k,U,1,ue,8,he,me,ve),Tc(X,ae,1,ue,8,he,me,ve)}function Cu(k,U,X,ae,ue,he,me,ve){ci(k,U+4*ue,ue,1,8,he,me,ve),ci(X,ae+4*ue,ue,1,8,he,me,ve)}function jc(k,U,X,ae,ue,he,me,ve){ci(k,U+4,1,ue,8,he,me,ve),ci(X,ae+4,1,ue,8,he,me,ve)}function _u(){this.ba=new kn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new or,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Su(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fc(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Q,this.yc=new F}function eh(){this.xb=this.a=0,this.l=new Es,this.ca=new kn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fc,this.ab=0,this.gc=i(4,Su),this.Oc=0}function zl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Oc(k,U,X,ae,ue,he,me){for(k=k==null?0:k[U+0],U=0;U<me;++U)ue[he+U]=k+X[ae+U]&255,k=ue[he+U]}function Nu(k,U,X,ae,ue,he,me){var ve;if(k==null)Oc(null,null,X,ae,ue,he,me);else for(ve=0;ve<me;++ve)ue[he+ve]=k[U+ve]+X[ae+ve]&255}function Ci(k,U,X,ae,ue,he,me){if(k==null)Oc(null,null,X,ae,ue,he,me);else{var ve,ye=k[U+0],Se=ye,Ue=ye;for(ve=0;ve<me;++ve)Se=Ue+(ye=k[U+ve])-Se,Ue=X[ae+ve]+(-256&Se?0>Se?0:255:Se)&255,Se=ye,ue[he+ve]=Ue}}function vd(k,U,X,ae){var ue=U.width,he=U.o;if(t(k!=null&&U!=null),0>X||0>=ae||X+ae>he)return null;if(!k.Cc){if(k.ga==null){var me;if(k.ga=new zl,(me=k.ga==null)||(me=U.width*U.o,t(k.Gb.length==0),k.Gb=s(me),k.Uc=0,k.Gb==null?me=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,me=1),me=!me),!me){me=k.ga;var ve=k.Fa,ye=k.P,Se=k.qc,Ue=k.mb,et=k.nb,Ye=ye+1,Ge=Se-1,bt=me.l;if(t(ve!=null&&Ue!=null&&U!=null),Mc[0]=null,Mc[1]=Oc,Mc[2]=Nu,Mc[3]=Ci,me.ca=Ue,me.tb=et,me.c=U.width,me.i=U.height,t(0<me.c&&0<me.i),1>=Se)U=0;else if(me.$a=ve[ye+0]>>0&3,me.Z=ve[ye+0]>>2&3,me.Lc=ve[ye+0]>>4&3,ye=ve[ye+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||ye)U=0;else if(bt.put=Va,bt.ac=Aa,bt.bc=si,bt.ma=me,bt.width=U.width,bt.height=U.height,bt.Da=U.Da,bt.v=U.v,bt.va=U.va,bt.j=U.j,bt.o=U.o,me.$a)e:{t(me.$a==1),U=st();t:for(;;){if(U==null){U=0;break e}if(t(me!=null),me.mc=U,U.c=me.c,U.i=me.i,U.l=me.l,U.l.ma=me,U.l.width=me.c,U.l.height=me.i,U.a=0,H(U.m,ve,Ye,Ge),!$e(me.c,me.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&we(U.s)?(me.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=s(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(me.ic=0,U=Je(U,me.c)),!U))break t;U=1;break e}me.mc=null,U=0}else U=Ge>=me.c*me.i;me=!U}if(me)return null;k.ga.Lc!=1?k.Ga=0:ae=he-X}t(k.ga!=null),t(X+ae<=he);e:{if(U=(ve=k.ga).c,he=ve.l.o,ve.$a==0){if(Ye=k.rc,Ge=k.Vc,bt=k.Fa,ye=k.P+1+X*U,Se=k.mb,Ue=k.nb+X*U,t(ye<=k.P+k.qc),ve.Z!=0)for(t(Mc[ve.Z]!=null),me=0;me<ae;++me)Mc[ve.Z](Ye,Ge,bt,ye,Se,Ue,U),Ye=Se,Ge=Ue,Ue+=U,ye+=U;else for(me=0;me<ae;++me)n(Se,Ue,bt,ye,U),Ye=Se,Ge=Ue,Ue+=U,ye+=U;k.rc=Ye,k.Vc=Ge}else{if(t(ve.mc!=null),U=X+ae,t((me=ve.mc)!=null),t(U<=me.i),me.C>=U)U=1;else if(ve.ic||Ke(),ve.ic){ve=me.V,Ye=me.Ba,Ge=me.c;var ct=me.i,Me=(bt=1,ye=me.$/Ge,Se=me.$%Ge,Ue=me.m,et=me.s,me.$),Ve=Ge*ct,ht=Ge*U,yt=et.wc,pt=Me<ht?fa(et,Se,ye):null;t(Me<=Ve),t(U<=ct),t(we(et));t:for(;;){for(;!Ue.h&&Me<ht;){if(Se&yt||(pt=fa(et,Se,ye)),t(pt!=null),ie(Ue),256>(ct=Vn(pt.G[0],pt.H[0],Ue)))ve[Ye+Me]=ct,++Me,++Se>=Ge&&(Se=0,++ye<=U&&!(ye%16)&&_e(me,ye));else{if(!(280>ct)){bt=0;break t}ct=wn(ct-256,Ue);var Yt,Ht=Vn(pt.G[4],pt.H[4],Ue);if(ie(Ue),!(Me>=(Ht=fn(Ge,Ht=wn(Ht,Ue)))&&Ve-Me>=ct)){bt=0;break t}for(Yt=0;Yt<ct;++Yt)ve[Ye+Me+Yt]=ve[Ye+Me+Yt-Ht];for(Me+=ct,Se+=ct;Se>=Ge;)Se-=Ge,++ye<=U&&!(ye%16)&&_e(me,ye);Me<ht&&Se&yt&&(pt=fa(et,Se,ye))}t(Ue.h==Y(Ue))}_e(me,ye>U?U:ye);break t}!bt||Ue.h&&Me<Ve?(bt=0,me.a=Ue.h?5:3):me.$=Me,U=bt}else U=ke(me,me.V,me.Ba,me.c,me.i,U,tt);if(!U){ae=0;break e}}X+ae>=he&&(k.Cc=1),ae=1}if(!ae)return null;if(k.Cc&&((ae=k.ga)!=null&&(ae.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+X*ue}function K(k,U,X,ae,ue,he){for(;0<ue--;){var me,ve=k,ye=U+(X?1:0),Se=k,Ue=U+(X?0:3);for(me=0;me<ae;++me){var et=Se[Ue+4*me];et!=255&&(et*=32897,ve[ye+4*me+0]=ve[ye+4*me+0]*et>>23,ve[ye+4*me+1]=ve[ye+4*me+1]*et>>23,ve[ye+4*me+2]=ve[ye+4*me+2]*et>>23)}U+=he}}function de(k,U,X,ae,ue){for(;0<ae--;){var he;for(he=0;he<X;++he){var me=k[U+2*he+0],ve=15&(Se=k[U+2*he+1]),ye=4369*ve,Se=(240&Se|Se>>4)*ye>>16;k[U+2*he+0]=(240&me|me>>4)*ye>>16&240|(15&me|me<<4)*ye>>16>>4&15,k[U+2*he+1]=240&Se|ve}U+=ue}}function je(k,U,X,ae,ue,he,me,ve){var ye,Se,Ue=255;for(Se=0;Se<ue;++Se){for(ye=0;ye<ae;++ye){var et=k[U+ye];he[me+4*ye]=et,Ue&=et}U+=X,me+=ve}return Ue!=255}function Le(k,U,X,ae,ue){var he;for(he=0;he<ue;++he)X[ae+he]=k[U+he]>>8}function Ke(){Ko=K,nn=de,an=je,ma=Le}function ut(k,U,X){C[k]=function(ae,ue,he,me,ve,ye,Se,Ue,et,Ye,Ge,bt,ct,Me,Ve,ht,yt){var pt,Yt=yt-1>>1,Ht=ve[ye+0]|Se[Ue+0]<<16,Ar=et[Ye+0]|Ge[bt+0]<<16;t(ae!=null);var $t=3*Ht+Ar+131074>>2;for(U(ae[ue+0],255&$t,$t>>16,ct,Me),he!=null&&($t=3*Ar+Ht+131074>>2,U(he[me+0],255&$t,$t>>16,Ve,ht)),pt=1;pt<=Yt;++pt){var _n=ve[ye+pt]|Se[Ue+pt]<<16,Dn=et[Ye+pt]|Ge[bt+pt]<<16,rn=Ht+_n+Ar+Dn+524296,Yr=rn+2*(_n+Ar)>>3;$t=Yr+Ht>>1,Ht=(rn=rn+2*(Ht+Dn)>>3)+_n>>1,U(ae[ue+2*pt-1],255&$t,$t>>16,ct,Me+(2*pt-1)*X),U(ae[ue+2*pt-0],255&Ht,Ht>>16,ct,Me+(2*pt-0)*X),he!=null&&($t=rn+Ar>>1,Ht=Yr+Dn>>1,U(he[me+2*pt-1],255&$t,$t>>16,Ve,ht+(2*pt-1)*X),U(he[me+2*pt+0],255&Ht,Ht>>16,Ve,ht+(2*pt+0)*X)),Ht=_n,Ar=Dn}1&yt||($t=3*Ht+Ar+131074>>2,U(ae[ue+yt-1],255&$t,$t>>16,ct,Me+(yt-1)*X),he!=null&&($t=3*Ar+Ht+131074>>2,U(he[me+yt-1],255&$t,$t>>16,Ve,ht+(yt-1)*X)))}}function kt(){$s[_i]=Pu,$s[sh]=Qc,$s[Lc]=jd,$s[Y0]=Mp,$s[LA]=Qp,$s[Iu]=lh,$s[Lp]=Hp,$s[J0]=Qc,$s[Td]=Mp,$s[ju]=Qp,$s[ih]=lh}function zt(k){return k&-16384?0>k?0:255:k>>ZN}function j(k,U){return zt((19077*k>>8)+(26149*U>>8)-14234)}function ee(k,U,X){return zt((19077*k>>8)-(6419*U>>8)-(13320*X>>8)+8708)}function se(k,U){return zt((19077*k>>8)+(33050*U>>8)-17685)}function xe(k,U,X,ae,ue){ae[ue+0]=j(k,X),ae[ue+1]=ee(k,U,X),ae[ue+2]=se(k,U)}function ze(k,U,X,ae,ue){ae[ue+0]=se(k,U),ae[ue+1]=ee(k,U,X),ae[ue+2]=j(k,X)}function rt(k,U,X,ae,ue){var he=ee(k,U,X);U=he<<3&224|se(k,U)>>3,ae[ue+0]=248&j(k,X)|he>>5,ae[ue+1]=U}function It(k,U,X,ae,ue){var he=240&se(k,U)|15;ae[ue+0]=240&j(k,X)|ee(k,U,X)>>4,ae[ue+1]=he}function Sr(k,U,X,ae,ue){ae[ue+0]=255,xe(k,U,X,ae,ue+1)}function ln(k,U,X,ae,ue){ze(k,U,X,ae,ue),ae[ue+3]=255}function Lr(k,U,X,ae,ue){xe(k,U,X,ae,ue),ae[ue+3]=255}function On(k,U){return 0>k?0:k>U?U:k}function Gn(k,U,X){C[k]=function(ae,ue,he,me,ve,ye,Se,Ue,et){for(var Ye=Ue+(-2&et)*X;Ue!=Ye;)U(ae[ue+0],he[me+0],ve[ye+0],Se,Ue),U(ae[ue+1],he[me+0],ve[ye+0],Se,Ue+X),ue+=2,++me,++ye,Ue+=2*X;1&et&&U(ae[ue+0],he[me+0],ve[ye+0],Se,Ue)}}function ml(k,U,X){return X==0?k==0?U==0?6:5:U==0?4:0:X}function za(k,U,X,ae,ue){switch(k>>>30){case 3:Kl(U,X,ae,ue,0);break;case 2:Ra(U,X,ae,ue);break;case 1:is(U,X,ae,ue)}}function fo(k,U){var X,ae,ue=U.M,he=U.Nb,me=k.oc,ve=k.pc+40,ye=k.oc,Se=k.pc+584,Ue=k.oc,et=k.pc+600;for(X=0;16>X;++X)me[ve+32*X-1]=129;for(X=0;8>X;++X)ye[Se+32*X-1]=129,Ue[et+32*X-1]=129;for(0<ue?me[ve-1-32]=ye[Se-1-32]=Ue[et-1-32]=129:(a(me,ve-32-1,127,21),a(ye,Se-32-1,127,9),a(Ue,et-32-1,127,9)),ae=0;ae<k.za;++ae){var Ye=U.ya[U.aa+ae];if(0<ae){for(X=-1;16>X;++X)n(me,ve+32*X-4,me,ve+32*X+12,4);for(X=-1;8>X;++X)n(ye,Se+32*X-4,ye,Se+32*X+4,4),n(Ue,et+32*X-4,Ue,et+32*X+4,4)}var Ge=k.Gd,bt=k.Hd+ae,ct=Ye.ad,Me=Ye.Hc;if(0<ue&&(n(me,ve-32,Ge[bt].y,0,16),n(ye,Se-32,Ge[bt].f,0,8),n(Ue,et-32,Ge[bt].ea,0,8)),Ye.Za){var Ve=me,ht=ve-32+16;for(0<ue&&(ae>=k.za-1?a(Ve,ht,Ge[bt].y[15],4):n(Ve,ht,Ge[bt+1].y,0,4)),X=0;4>X;X++)Ve[ht+128+X]=Ve[ht+256+X]=Ve[ht+384+X]=Ve[ht+0+X];for(X=0;16>X;++X,Me<<=2)Ve=me,ht=ve+HA[X],zi[Ye.Ob[X]](Ve,ht),za(Me,ct,16*+X,Ve,ht)}else if(Ve=ml(ae,ue,Ye.Ob[0]),Du[Ve](me,ve),Me!=0)for(X=0;16>X;++X,Me<<=2)za(Me,ct,16*+X,me,ve+HA[X]);for(X=Ye.Gc,Ve=ml(ae,ue,Ye.Dd),qo[Ve](ye,Se),qo[Ve](Ue,et),Me=ct,Ve=ye,ht=Se,255&(Ye=X>>0)&&(170&Ye?Gl(Me,256,Ve,ht):po(Me,256,Ve,ht)),Ye=Ue,Me=et,255&(X>>=8)&&(170&X?Gl(ct,320,Ye,Me):po(ct,320,Ye,Me)),ue<k.Ub-1&&(n(Ge[bt].y,0,me,ve+480,16),n(Ge[bt].f,0,ye,Se+224,8),n(Ge[bt].ea,0,Ue,et+224,8)),X=8*he*k.B,Ge=k.sa,bt=k.ta+16*ae+16*he*k.R,ct=k.qa,Ye=k.ra+8*ae+X,Me=k.Ha,Ve=k.Ia+8*ae+X,X=0;16>X;++X)n(Ge,bt+X*k.R,me,ve+32*X,16);for(X=0;8>X;++X)n(ct,Ye+X*k.B,ye,Se+32*X,8),n(Me,Ve+X*k.B,Ue,et+32*X,8)}}function Dc(k,U,X,ae,ue,he,me,ve,ye){var Se=[0],Ue=[0],et=0,Ye=ye!=null?ye.kd:0,Ge=ye??new gd;if(k==null||12>X)return 7;Ge.data=k,Ge.w=U,Ge.ha=X,U=[U],X=[X],Ge.gb=[Ge.gb];e:{var bt=U,ct=X,Me=Ge.gb;if(t(k!=null),t(ct!=null),t(Me!=null),Me[0]=0,12<=ct[0]&&!r(k,bt[0],"RIFF")){if(r(k,bt[0]+8,"WEBP")){Me=3;break e}var Ve=Ne(k,bt[0]+4);if(12>Ve||4294967286<Ve){Me=3;break e}if(Ye&&Ve>ct[0]-8){Me=7;break e}Me[0]=Ve,bt[0]+=12,ct[0]-=12}Me=0}if(Me!=0)return Me;for(Ve=0<Ge.gb[0],X=X[0];;){e:{var ht=k;ct=U,Me=X;var yt=Se,pt=Ue,Yt=bt=[0];if(($t=et=[et])[0]=0,8>Me[0])Me=7;else{if(!r(ht,ct[0],"VP8X")){if(Ne(ht,ct[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Ht=Ne(ht,ct[0]+8),Ar=1+re(ht,ct[0]+12);if(2147483648<=Ar*(ht=1+re(ht,ct[0]+15))){Me=3;break e}Yt!=null&&(Yt[0]=Ht),yt!=null&&(yt[0]=Ar),pt!=null&&(pt[0]=ht),ct[0]+=18,Me[0]-=18,$t[0]=1}Me=0}}if(et=et[0],bt=bt[0],Me!=0)return Me;if(ct=!!(2&bt),!Ve&&et)return 3;if(he!=null&&(he[0]=!!(16&bt)),me!=null&&(me[0]=ct),ve!=null&&(ve[0]=0),me=Se[0],bt=Ue[0],et&&ct&&ye==null){Me=0;break}if(4>X){Me=7;break}if(Ve&&et||!Ve&&!et&&!r(k,U[0],"ALPH")){X=[X],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Ht=k,Me=U,Ve=X;var $t=Ge.gb;yt=Ge.na,pt=Ge.P,Yt=Ge.Sa,Ar=22,t(Ht!=null),t(Ve!=null),ht=Me[0];var _n=Ve[0];for(t(yt!=null),t(Yt!=null),yt[0]=null,pt[0]=null,Yt[0]=0;;){if(Me[0]=ht,Ve[0]=_n,8>_n){Me=7;break e}var Dn=Ne(Ht,ht+4);if(4294967286<Dn){Me=3;break e}var rn=8+Dn+1&-2;if(Ar+=rn,0<$t&&Ar>$t){Me=3;break e}if(!r(Ht,ht,"VP8 ")||!r(Ht,ht,"VP8L")){Me=0;break e}if(_n[0]<rn){Me=7;break e}r(Ht,ht,"ALPH")||(yt[0]=Ht,pt[0]=ht+8,Yt[0]=Dn),ht+=rn,_n-=rn}}if(X=X[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Me!=0)break}X=[X],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if($t=k,Me=U,Ve=X,yt=Ge.gb[0],pt=Ge.Ja,Yt=Ge.xa,Ht=Me[0],ht=!r($t,Ht,"VP8 "),Ar=!r($t,Ht,"VP8L"),t($t!=null),t(Ve!=null),t(pt!=null),t(Yt!=null),8>Ve[0])Me=7;else{if(ht||Ar){if($t=Ne($t,Ht+4),12<=yt&&$t>yt-12){Me=3;break e}if(Ye&&$t>Ve[0]-8){Me=7;break e}pt[0]=$t,Me[0]+=8,Ve[0]-=8,Yt[0]=Ar}else Yt[0]=5<=Ve[0]&&$t[Ht+0]==47&&!($t[Ht+4]>>5),pt[0]=Ve[0];Me=0}if(X=X[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],U=U[0],Me!=0)break;if(4294967286<Ge.Ja)return 3;if(ve==null||ct||(ve[0]=Ge.xa?2:1),me=[me],bt=[bt],Ge.xa){if(5>X){Me=7;break}ve=me,Ye=bt,ct=he,k==null||5>X?k=0:5<=X&&k[U+0]==47&&!(k[U+4]>>5)?(Ve=[0],$t=[0],yt=[0],H(pt=new R,k,U,X),qt(pt,Ve,$t,yt)?(ve!=null&&(ve[0]=Ve[0]),Ye!=null&&(Ye[0]=$t[0]),ct!=null&&(ct[0]=yt[0]),k=1):k=0):k=0}else{if(10>X){Me=7;break}ve=bt,k==null||10>X||!Hs(k,U+3,X-3)?k=0:(Ye=k[U+0]|k[U+1]<<8|k[U+2]<<16,ct=16383&(k[U+7]<<8|k[U+6]),k=16383&(k[U+9]<<8|k[U+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=Ge.Ja||!ct||!k?k=0:(me&&(me[0]=ct),ve&&(ve[0]=k),k=1))}if(!k||(me=me[0],bt=bt[0],et&&(Se[0]!=me||Ue[0]!=bt)))return 3;ye!=null&&(ye[0]=Ge,ye.offset=U-ye.w,t(4294967286>U-ye.w),t(ye.offset==ye.ha-X));break}return Me==0||Me==7&&et&&ye==null?(he!=null&&(he[0]|=Ge.na!=null&&0<Ge.na.length),ae!=null&&(ae[0]=me),ue!=null&&(ue[0]=bt),0):Me}function xd(k,U,X){var ae=U.width,ue=U.height,he=0,me=0,ve=ae,ye=ue;if(U.Da=k!=null&&0<k.Da,U.Da&&(ve=k.cd,ye=k.bd,he=k.v,me=k.j,11>X||(he&=-2,me&=-2),0>he||0>me||0>=ve||0>=ye||he+ve>ae||me+ye>ue))return 0;if(U.v=he,U.j=me,U.va=he+ve,U.o=me+ye,U.U=ve,U.T=ye,U.da=k!=null&&0<k.da,U.da){if(!Ie(ve,ye,X=[k.ib],he=[k.hb]))return 0;U.ib=X[0],U.hb=he[0]}return U.ob=k!=null&&k.ob,U.Kb=k==null||!k.Sd,U.da&&(U.ob=U.ib<3*ae/4&&U.hb<3*ue/4,U.Kb=0),1}function th(k){if(k==null)return 2;if(11>k.S){var U=k.f.RGBA;U.fb+=(k.height-1)*U.A,U.A=-U.A}else U=k.f.kb,k=k.height,U.O+=(k-1)*U.fa,U.fa=-U.fa,U.N+=(k-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(k-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(k-1)*U.lb,U.lb=-U.lb);return 0}function IA(k,U,X,ae){if(ae==null||0>=k||0>=U)return 2;if(X!=null){if(X.Da){var ue=X.cd,he=X.bd,me=-2&X.v,ve=-2&X.j;if(0>me||0>ve||0>=ue||0>=he||me+ue>k||ve+he>U)return 2;k=ue,U=he}if(X.da){if(!Ie(k,U,ue=[X.ib],he=[X.hb]))return 2;k=ue[0],U=he[0]}}ae.width=k,ae.height=U;e:{var ye=ae.width,Se=ae.height;if(k=ae.S,0>=ye||0>=Se||!(k>=_i&&13>k))k=2;else{if(0>=ae.Rd&&ae.sd==null){me=he=ue=U=0;var Ue=(ve=ye*Pw[k])*Se;if(11>k||(he=(Se+1)/2*(U=(ye+1)/2),k==12&&(me=(ue=ye)*Se)),(Se=s(Ue+2*he+me))==null){k=1;break e}ae.sd=Se,11>k?((ye=ae.f.RGBA).eb=Se,ye.fb=0,ye.A=ve,ye.size=Ue):((ye=ae.f.kb).y=Se,ye.O=0,ye.fa=ve,ye.Fd=Ue,ye.f=Se,ye.N=0+Ue,ye.Ab=U,ye.Cd=he,ye.ea=Se,ye.W=0+Ue+he,ye.Db=U,ye.Ed=he,k==12&&(ye.F=Se,ye.J=0+Ue+2*he),ye.Tc=me,ye.lb=ue)}if(U=1,ue=ae.S,he=ae.width,me=ae.height,ue>=_i&&13>ue)if(11>ue)k=ae.f.RGBA,U&=(ve=Math.abs(k.A))*(me-1)+he<=k.size,U&=ve>=he*Pw[ue],U&=k.eb!=null;else{k=ae.f.kb,ve=(he+1)/2,Ue=(me+1)/2,ye=Math.abs(k.fa),Se=Math.abs(k.Ab);var et=Math.abs(k.Db),Ye=Math.abs(k.lb),Ge=Ye*(me-1)+he;U&=ye*(me-1)+he<=k.Fd,U&=Se*(Ue-1)+ve<=k.Cd,U=(U&=et*(Ue-1)+ve<=k.Ed)&ye>=he&Se>=ve&et>=ve,U&=k.y!=null,U&=k.f!=null,U&=k.ea!=null,ue==12&&(U&=Ye>=he,U&=Ge<=k.Tc,U&=k.F!=null)}else U=0;k=U?0:2}}return k!=0||X!=null&&X.fd&&(k=th(ae)),k}var Cs=64,bd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jA=24,FA=32,rh=8,ho=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];dt("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(k){return k},C.Predictor2=function(k,U,X){return U[X+0]},C.Predictor3=function(k,U,X){return U[X+1]},C.Predictor4=function(k,U,X){return U[X-1]},C.Predictor5=function(k,U,X){return Tt(Tt(k,U[X+1]),U[X+0])},C.Predictor6=function(k,U,X){return Tt(k,U[X-1])},C.Predictor7=function(k,U,X){return Tt(k,U[X+0])},C.Predictor8=function(k,U,X){return Tt(U[X-1],U[X+0])},C.Predictor9=function(k,U,X){return Tt(U[X+0],U[X+1])},C.Predictor10=function(k,U,X){return Tt(Tt(k,U[X-1]),Tt(U[X+0],U[X+1]))},C.Predictor11=function(k,U,X){var ae=U[X+0];return 0>=Jt(ae>>24&255,k>>24&255,(U=U[X-1])>>24&255)+Jt(ae>>16&255,k>>16&255,U>>16&255)+Jt(ae>>8&255,k>>8&255,U>>8&255)+Jt(255&ae,255&k,255&U)?ae:k},C.Predictor12=function(k,U,X){var ae=U[X+0];return(Ct((k>>24&255)+(ae>>24&255)-((U=U[X-1])>>24&255))<<24|Ct((k>>16&255)+(ae>>16&255)-(U>>16&255))<<16|Ct((k>>8&255)+(ae>>8&255)-(U>>8&255))<<8|Ct((255&k)+(255&ae)-(255&U)))>>>0},C.Predictor13=function(k,U,X){var ae=U[X-1];return(Dt((k=Tt(k,U[X+0]))>>24&255,ae>>24&255)<<24|Dt(k>>16&255,ae>>16&255)<<16|Dt(k>>8&255,ae>>8&255)<<8|Dt(k>>0&255,ae>>0&255))>>>0};var Fx=C.PredictorAdd0;C.PredictorAdd1=Pt,dt("Predictor2","PredictorAdd2"),dt("Predictor3","PredictorAdd3"),dt("Predictor4","PredictorAdd4"),dt("Predictor5","PredictorAdd5"),dt("Predictor6","PredictorAdd6"),dt("Predictor7","PredictorAdd7"),dt("Predictor8","PredictorAdd8"),dt("Predictor9","PredictorAdd9"),dt("Predictor10","PredictorAdd10"),dt("Predictor11","PredictorAdd11"),dt("Predictor12","PredictorAdd12"),dt("Predictor13","PredictorAdd13");var W0=C.PredictorAdd2;Re("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),Re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var Pp,pl=C.ColorIndexInverseTransform,Vs=C.MapARGB,yd=C.VP8LColorIndexInverseTransformAlpha,X0=C.MapAlpha,Bu=C.VP8LPredictorsAdd=[];Bu.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var wd,Vi,ui,Ed,mo,$l,Pc,Kl,Ra,Gl,is,po,OA,Rc,nh,Cd,_d,Sd,DA,ah,Nd,ku,PA,La,Ko,nn,an,ma,$a=s(511),gl=s(2041),Bd=s(225),kd=s(767),Tu=0,Rp=gl,RA=Bd,zs=kd,vl=$a,_i=0,sh=1,Lc=2,Y0=3,LA=4,Iu=5,Lp=6,J0=7,Td=8,ju=9,ih=10,Up=[2,3,7],xl=[3,3,11],Go=[280,256,256,256,40],UA=[0,1,1,1,0],Fu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ou=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],MA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Iw=8,Z0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],em=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_s=null,Ua=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Id=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Uc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ox=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],QA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Du=[],zi=[],qo=[],Fw=1,oh=2,Mc=[],$s=[];ut("UpsampleRgbLinePair",xe,3),ut("UpsampleBgrLinePair",ze,3),ut("UpsampleRgbaLinePair",Lr,4),ut("UpsampleBgraLinePair",ln,4),ut("UpsampleArgbLinePair",Sr,4),ut("UpsampleRgba4444LinePair",It,2),ut("UpsampleRgb565LinePair",rt,2);var Pu=C.UpsampleRgbLinePair,jd=C.UpsampleBgrLinePair,Qc=C.UpsampleRgbaLinePair,Mp=C.UpsampleBgraLinePair,Qp=C.UpsampleArgbLinePair,lh=C.UpsampleRgba4444LinePair,Hp=C.UpsampleRgb565LinePair,Hc=16,Ss=1<<Hc-1,Fd=-227,Vp=482,ZN=6,Ow=0,e4=s(256),Ns=s(256),Dx=s(256),tm=s(256),rm=s(Vp-Fd),Px=s(Vp-Fd);Gn("YuvToRgbRow",xe,3),Gn("YuvToBgrRow",ze,3),Gn("YuvToRgbaRow",Lr,4),Gn("YuvToBgraRow",ln,4),Gn("YuvToArgbRow",Sr,4),Gn("YuvToRgba4444Row",It,2),Gn("YuvToRgb565Row",rt,2);var HA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ru=[0,2,8],t4=[8,7,6,4,4,2,2,2,1,1,1,1],Dw=1;this.WebPDecodeRGBA=function(k,U,X,ae,ue){var he=sh,me=new _u,ve=new kn;me.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var ye=ve.width,Se=ve.height,Ue=new ea;if(Ue==null||k==null)var et=2;else t(Ue!=null),et=Dc(k,U,X,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(et!=0?ye=0:(ye!=null&&(ye[0]=Ue.width[0]),Se!=null&&(Se[0]=Ue.height[0]),ye=1),ye){ve.width=ve.width[0],ve.height=ve.height[0],ae!=null&&(ae[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ae=new Es,(ue=new gd).data=k,ue.w=U,ue.ha=X,ue.kd=1,U=[0],t(ue!=null),((k=Dc(ue.data,ue.w,ue.ha,null,null,null,U,null,ue))==0||k==7)&&U[0]&&(k=4),(U=k)==0){if(t(me!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=Va,ae.ac=Aa,ae.bc=si,ae.ma=me,ue.xa){if((k=st())==null){me=1;break e}if(function(Ye,Ge){var bt=[0],ct=[0],Me=[0];t:for(;;){if(Ye==null)return 0;if(Ge==null)return Ye.a=2,0;if(Ye.l=Ge,Ye.a=0,H(Ye.m,Ge.data,Ge.w,Ge.ha),!qt(Ye.m,bt,ct,Me)){Ye.a=3;break t}if(Ye.xb=oh,Ge.width=bt[0],Ge.height=ct[0],!$e(bt[0],ct[0],1,Ye,null))break t;return 1}return t(Ye.a!=0),0}(k,ae)){if(ae=(U=IA(ae.width,ae.height,me.Oa,me.ba))==0){t:{ae=k;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((X=ae.l)!=null),t((ue=X.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,t(ae.ca!=null),!xd(ue.Oa,X,Y0)){ae.a=2;break r}if(!Je(ae,X.width)||X.da)break r;if((X.da||dr(ae.ca.S))&&Ke(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ke()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Oe(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!ke(ae,ae.V,ae.Ba,ae.c,ae.i,X.o,Be))break r;ue.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(U=k.a)}else U=k.a}else{if((k=new ii)==null){me=1;break e}if(k.Fa=ue.na,k.P=ue.P,k.qc=ue.Sa,Ad(k,ae)){if((U=IA(ae.width,ae.height,me.Oa,me.ba))==0){if(k.Aa=0,X=me.Oa,t((ue=k)!=null),X!=null){if(0<(ye=0>(ye=X.Md)?0:100<ye?255:255*ye/100)){for(Se=Ue=0;4>Se;++Se)12>(et=ue.pb[Se]).lc&&(et.ia=ye*t4[0>et.lc?0:et.lc]>>3),Ue|=et.ia;Ue&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=X.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}_A(k,ae)||(U=k.a)}}else U=k.a}U==0&&me.Oa!=null&&me.Oa.fd&&(U=th(me.ba))}me=U}he=me!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var Pw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,N){for(var P="",O=0;O<4;O++)P+=String.fromCharCode(C[N++]);return P}function d(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16)>>>0}function f(C,N){return(C[N+0]<<0|C[N+1]<<8|C[N+2]<<16|C[N+3]<<24)>>>0}new l;var m=[0],p=[0],x=[],g=new l,b=e,y=function(C,N){var P={},O=0,F=!1,M=0,Q=0;if(P.frames=[],!function(q,Y,te,ie){for(var pe=0;pe<ie;pe++)if(q[Y+pe]!=te.charCodeAt(pe))return!0;return!1}(C,N,"RIFF",4)){var J,W;for(f(C,N+=4),N+=8;N<C.length;){var Z=u(C,N),H=f(C,N+=4);N+=4;var z=H+(1&H);switch(Z){case"VP8 ":case"VP8L":P.frames[O]===void 0&&(P.frames[O]={}),(R=P.frames[O]).src_off=F?Q:N-8,R.src_size=M+H+8,O++,F&&(F=!1,M=0,Q=0);break;case"VP8X":(R=P.header={}).feature_flags=C[N];var G=N+4;R.canvas_width=1+d(C,G),G+=3,R.canvas_height=1+d(C,G),G+=3;break;case"ALPH":F=!0,M=z+8,Q=N-8;break;case"ANIM":(R=P.header).bgcolor=f(C,N),G=N+4,R.loop_count=(J=C)[(W=G)+0]<<0|J[W+1]<<8,G+=2;break;case"ANMF":var ne,R;(R=P.frames[O]={}).offset_x=2*d(C,N),N+=3,R.offset_y=2*d(C,N),N+=3,R.width=1+d(C,N),N+=3,R.height=1+d(C,N),N+=3,R.duration=d(C,N),N+=3,ne=C[N++],R.dispose=1&ne,R.blend=ne>>1&1}Z!="ANMF"&&(N+=z)}return P}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var _=y.header?y.header:null,S=y.frames?y.frames:null;if(_){_.loop_counter=_.loop_count,m=[_.canvas_height],p=[_.canvas_width];for(var B=0;B<S.length&&S[B].blend!=0;B++);}var I=S[0],D=g.WebPDecodeRGBA(b,I.src_off,I.src_size,p,m);I.rgba=D,I.imgwidth=p[0],I.imgheight=m[0];for(var E=0;E<p[0]*m[0]*4;E++)x[E]=D[E];return this.width=p,this.height=m,this.data=x,this}(function(e){var t=function(){return typeof wI=="function"},r=function(m,p,x,g){var b=4,y=i;switch(g){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=l}m=n(m,p,x,y);var _=wI(m,{level:b});return e.__addimage__.arrayBufferToBinaryString(_)},n=function(m,p,x,g){for(var b,y,_,S=m.length/p,B=new Uint8Array(m.length+S),I=d(),D=0;D<S;D+=1){if(_=D*p,b=m.subarray(_,_+p),g)B.set(g(b,x,y),_+D);else{for(var E,C=I.length,N=[];E<C;E+=1)N[E]=I[E](b,x,y);var P=f(N.concat());B.set(N[P],_+D)}y=b}return B},a=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var x,g=[],b=m.length;g[0]=1;for(var y=0;y<b;y+=1)x=m[y-p]||0,g[y+1]=m[y]-x+256&255;return g},i=function(m,p,x){var g,b=[],y=m.length;b[0]=2;for(var _=0;_<y;_+=1)g=x&&x[_]||0,b[_+1]=m[_]-g+256&255;return b},o=function(m,p,x){var g,b,y=[],_=m.length;y[0]=3;for(var S=0;S<_;S+=1)g=m[S-p]||0,b=x&&x[S]||0,y[S+1]=m[S]+256-(g+b>>>1)&255;return y},l=function(m,p,x){var g,b,y,_,S=[],B=m.length;S[0]=4;for(var I=0;I<B;I+=1)g=m[I-p]||0,b=x&&x[I]||0,y=x&&x[I-p]||0,_=u(g,b,y),S[I+1]=m[I]-_+256&255;return S},u=function(m,p,x){if(m===p&&p===x)return m;var g=Math.abs(p-x),b=Math.abs(m-x),y=Math.abs(m+p-x-x);return g<=b&&g<=y?m:b<=y?p:x},d=function(){return[a,s,i,o,l]},f=function(m){var p=m.map(function(x){return x.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,x,g){var b,y,_,S,B,I,D,E,C,N,P,O,F,M,Q,J=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(_=new Zxe(m)).imgData,y=_.bits,b=_.colorSpace,B=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){C=(E=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,P=new Uint8Array(C*_.colors),N=new Uint8Array(C);var Z,H=_.pixelBitlength-_.bits;for(M=0,Q=0;M<C;M++){for(F=E[M],Z=0;Z<H;)P[Q++]=F>>>Z&255,Z+=_.bits;N[M]=F>>>Z&255}}if(_.bits===16){C=(E=new Uint32Array(_.decodePixels().buffer)).length,P=new Uint8Array(C*(32/_.pixelBitlength)*_.colors),N=new Uint8Array(C*(32/_.pixelBitlength)),O=_.colors>1,M=0,Q=0;for(var z=0;M<C;)F=E[M++],P[Q++]=F>>>0&255,O&&(P[Q++]=F>>>16&255,F=E[M++],P[Q++]=F>>>0&255),N[z++]=F>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(m=r(P,_.width*_.colors,_.colors,g),D=r(N,_.width,1,g)):(m=P,D=N,J=void 0)}if(_.colorType===3&&(b=this.color_spaces.INDEXED,I=_.palette,_.transparency.indexed)){var G=_.transparency.indexed,ne=0;for(M=0,C=G.length;M<C;++M)ne+=G[M];if((ne/=255)===C-1&&G.indexOf(0)!==-1)S=[G.indexOf(0)];else if(ne!==C){for(E=_.decodePixels(),N=new Uint8Array(E.length),M=0,C=E.length;M<C;M++)N[M]=G[E[M]];D=r(N,_.width,1)}}var R=function(q){var Y;switch(q){case e.image_compression.FAST:Y=11;break;case e.image_compression.MEDIUM:Y=13;break;case e.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(g);return J===this.decode.FLATE_DECODE&&(W="/Predictor "+R+" "),W+="/Colors "+B+" /BitsPerComponent "+y+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:x,data:m,index:p,filter:J,decodeParameters:W,transparency:S,palette:I,sMask:D,predictor:R,width:_.width,height:_.height,bitsPerComponent:y,colorSpace:b}}}})(fr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new e1e(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new LB(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(fr.API),$u.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$u.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){wa.log("bit decode error:"+r)}},$u.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},$u.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},$u.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},$u.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},$u.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},$u.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},$u.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},$u.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new $u(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new LB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(fr.API),p7.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new p7(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new LB(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}(fr.API),fr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],m=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=m,i[l++]=p}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:x,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},fr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fg=fr.API,H2=fg.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,m=0,p=e.length,x=0,g=o[0]||l,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(m=f&&ca(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,b.push((o[n]||g)/l+m)),x=n;return b},A7=fg.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return fg.processArabic&&(e=fg.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:H2.apply(this,arguments).reduce(function(s,i){return s+i},0)},f7=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},h7=function(e,t,r){r||(r={});var n,a,s,i,o,l,u,d=[],f=[d],m=r.textIndent||0,p=0,x=0,g=e.split(" "),b=H2.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),_=[];g.map(function(B){(B=B.split(/\s*\n/)).length>1?_=_.concat(B.map(function(I,D){return(D&&I.length?`
`:"")+I})):_.push(B[0])}),g=_,l=A7.apply(this,[y,r])}for(s=0,i=g.length;s<i;s++){var S=0;if(n=g[s],l&&n[0]==`
`&&(n=n.substr(1),S=1),m+p+(x=(a=H2.apply(this,[n,r])).reduce(function(B,I){return B+I},0))>t||S){if(x>t){for(o=f7.apply(this,[n,a,t-(m+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);x=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(B,I){return B+I},0)}else d=[n];f.push(d),m=x+l,p=b}else d.push(n),m+=p+x,p=b}return u=l?function(B,I){return(I?y:"")+B.join(" ")}:function(B){return B.join(" ")},f.map(u)},fg.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(h7.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var m,p,x,g,b=["{"];for(var y in f){if(m=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(x=s(m).slice(3),g="-"):(x=s(m).slice(2),g=""),x=g+x.slice(0,-1)+n[x.slice(-1)];else{if(ca(m)!=="object")throw new Error("Don't know what to do with value type "+ca(m)+".");x=i(m)}b.push(p+x)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,x,g,b={},y=1,_=b,S=[],B="",I="",D=f.length-1,E=1;E<D;E+=1)(g=f[E])=="'"?m?(x=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(S.push([_,x]),_={},x=void 0):g=="}"?((p=S.pop())[0][p[1]]=_,x=void 0,_=p[0]):g=="-"?y=-1:x===void 0?r.hasOwnProperty(g)?(B+=r[g],x=parseInt(B,16)*y,y=1,B=""):B+=g:r.hasOwnProperty(g)?(I+=r[g],_[x]=parseInt(I,16)*y,y=1,x=void 0,I=""):I+=g;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var m=f.font,p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var x=u.Unicode[m.postScriptName];x&&(m.metadata.Unicode.encoding=x,m.encoding=x.codePages[0])}])}(fr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(bb(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(fr),function(e){function t(){return(jr.canvg?Promise.resolve(jr.canvg):d_(()=>import("./index.es-0134mIZl.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}fr.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw wa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw wa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(x){return x.fromString(f,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),fr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},fr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,f=0;function m(x,g){var b,y=!1;for(b=0;b<x.length;b+=1)x[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ca(e)==="object"){for(a in e)if(s=e[a],m(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&m(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,g=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?g.push("/"+x+" /"+r[x].value):g.push("/"+x+" "+r[x].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(fr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,m=s.length;f<m;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,f,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,m=(o=Object.keys(s).sort(function(p,x){return p-x})).length;f<m;f++)i=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",x=0;x<m.length;x++)p+=String.fromCharCode(m[x]);var g=u();d({data:p,addLength1:!0,objectId:g}),l("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Mg(o.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Mg(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Mg(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var x=u();d({data:m,addLength1:!0,objectId:x}),l("endobj");var g=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var b=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Mg(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Mg(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},f=s.mutex||{},m=f.pdfEscape,p=f.activeFontKey,x=f.fonts,g=p,b="",y=0,_="",S=x[g].encoding;if(x[g].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(_=o,g=p,Array.isArray(o)&&(_=o[0]),y=0;y<_.length;y+=1)x[g].metadata.hasOwnProperty("cmap")&&(i=x[g].metadata.cmap.unicode.codeMap[_[y].charCodeAt(0)]),i||_[y].charCodeAt(0)<256&&x[g].metadata.hasOwnProperty("Unicode")?b+=_[y]:b+="";var B="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?B=m(b,g).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(B=r(b,x[g])),f.isHex=!0,{text:B,x:l,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(fr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(fr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,f=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var B=function(O){var F=O.charCodeAt(),M=F>>8,Q=g[M];return Q!==void 0?f[256*Q+(255&F)]:M===252||M===253?"AL":y.test(M)?"L":M===8?"R":"N"},I=function(O){for(var F,M=0;M<O.length;M++){if((F=B(O.charAt(M)))==="L")return!1;if(F==="R")return!0}return!1},D=function(O,F,M,Q){var J,W,Z,H,z=F[Q];switch(z){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(z="AN");break;case"AL":_=!0,z="R";break;case"WS":z="N";break;case"CS":Q<1||Q+1>=F.length||(J=M[Q-1])!=="EN"&&J!=="AN"||(W=F[Q+1])!=="EN"&&W!=="AN"?z="N":_&&(W="AN"),z=W===J?W:"N";break;case"ES":z=(J=Q>0?M[Q-1]:"B")==="EN"&&Q+1<F.length&&F[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&M[Q-1]==="EN"){z="EN";break}if(_){z="N";break}for(Z=Q+1,H=F.length;Z<H&&F[Z]==="ET";)Z++;z=Z<H&&F[Z]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(H=F.length,Z=Q+1;Z<H&&F[Z]==="NSM";)Z++;if(Z<H){var G=O[Q],ne=G>=1425&&G<=2303||G===64286;if(J=F[Z],ne&&(J==="R"||J==="AL")){z="R";break}}}z=Q<1||(J=F[Q-1])==="B"?"N":M[Q-1];break;case"B":_=!1,a=!0,z=S;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":z="N"}return z},E=function(O,F,M){var Q=O.split("");return M&&C(Q,M,{hiLevel:S}),Q.reverse(),F&&F.reverse(),Q.join("")},C=function(O,F,M){var Q,J,W,Z,H,z=-1,G=O.length,ne=0,R=[],q=S?p:m,Y=[];for(_=!1,a=!1,s=!1,J=0;J<G;J++)Y[J]=B(O[J]);for(W=0;W<G;W++){if(H=ne,R[W]=D(O,Y,R,W),Q=240&(ne=q[H][x[R[W]]]),ne&=15,F[W]=Z=q[ne][5],Q>0)if(Q===16){for(J=z;J<W;J++)F[J]=1;z=-1}else z=-1;if(q[ne][6])z===-1&&(z=W);else if(z>-1){for(J=z;J<W;J++)F[J]=Z;z=-1}Y[W]==="B"&&(F[W]=0),M.hiLevel|=Z}s&&function(te,ie,pe){for(var oe=0;oe<pe;oe++)if(te[oe]==="S"){ie[oe]=S;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ie[ce]=S}}(Y,F,G)},N=function(O,F,M,Q,J){if(!(J.hiLevel<O)){if(O===1&&S===1&&!a)return F.reverse(),void(M&&M.reverse());for(var W,Z,H,z,G=F.length,ne=0;ne<G;){if(Q[ne]>=O){for(H=ne+1;H<G&&Q[H]>=O;)H++;for(z=ne,Z=H-1;z<Z;z++,Z--)W=F[z],F[z]=F[Z],F[Z]=W,M&&(W=M[z],M[z]=M[Z],M[Z]=W);ne=H}ne++}}},P=function(O,F,M){var Q=O.split(""),J={hiLevel:S};return M||(M=[]),C(Q,M,J),function(W,Z,H){if(H.hiLevel!==0&&d)for(var z,G=0;G<W.length;G++)Z[G]===1&&(z=b.indexOf(W[G]))>=0&&(W[G]=b[z+1])}(Q,M,J),N(2,Q,F,M,J),N(1,Q,F,M,J),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(O,F,M){if(function(J,W){if(W)for(var Z=0;Z<J.length;Z++)W[Z]=Z;o===void 0&&(o=I(J)),u===void 0&&(u=I(J))}(O,F),i||!l||u)if(i&&l&&o^u)S=o?1:0,O=E(O,F,M);else if(!i&&l&&u)S=o?1:0,O=P(O,F,M),O=E(O,F);else if(!i||o||l||u){if(i&&!l&&o^u)O=E(O,F),o?(S=0,O=P(O,F,M)):(S=1,O=P(O,F,M),O=E(O,F));else if(i&&o&&!l&&u)S=1,O=P(O,F,M),O=E(O,F);else if(!i&&!l&&o^u){var Q=d;o?(S=1,O=P(O,F,M),S=0,d=!1,O=P(O,F,M),d=Q):(S=0,O=P(O,F,M),O=E(O,F),S=1,d=!1,O=P(O,F,M),d=Q,O=E(O,F))}}else S=0,O=P(O,F,M);else S=o?1:0,O=P(O,F,M);return O},this.__bidiEngine__.setOptions=function(O){O&&(i=O.isInputVisual,l=O.isOutputVisual,o=O.isInputRtl,u=O.isOutputRtl,d=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(fr),fr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new B0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new m1e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new t1e(this.contents),this.head=new n1e(this),this.name=new l1e(this),this.cmap=new tY(this),this.toUnicode={},this.hhea=new a1e(this),this.maxp=new c1e(this),this.hmtx=new u1e(this),this.post=new i1e(this),this.os2=new s1e(this),this.loca=new h1e(this),this.glyf=new d1e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)t=l[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var ld,B0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),t1e=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,l,u,d,f,m,p,x,g;for(g in p=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),i=Math.floor(f/l),d=16*p-f,(a=new B0).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,x=[],r)for(m=r[g],a.writeString(g),a.writeInt(e(m)),a.writeInt(u),a.writeInt(m.length),x=x.concat(m),g==="head"&&(o=u),u+=m.length;u%4;)x.push(0),u++;return a.write(x),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=rY.call(r);r.length%4;)r.push(0);for(s=new B0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),r1e={}.hasOwnProperty,xA=function(e,t){for(var r in t)r1e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};ld=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var n1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new B0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),g7=function(){function e(t,r){var n,a,s,i,o,l,u,d,f,m,p,x,g,b,y,_,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,s=function(){var B,I;for(I=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)I.push(t.readUInt16());return I}(),t.pos+=2,g=function(){var B,I;for(I=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)I.push(t.readUInt16());return I}(),u=function(){var B,I;for(I=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)I.push(t.readUInt16());return I}(),d=function(){var B,I;for(I=[],l=B=0;0<=m?B<m:B>m;l=0<=m?++B:--B)I.push(t.readUInt16());return I}(),a=(this.length-t.pos+this.offset)/2,o=function(){var B,I;for(I=[],l=B=0;0<=a?B<a:B>a;l=0<=a?++B:--B)I.push(t.readUInt16());return I}(),l=y=0,S=s.length;y<S;l=++y)for(b=s[l],n=_=x=g[l];x<=b?_<=b:_>=b;n=x<=b?++_:--_)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-x)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,l,u,d,f,m,p,x,g,b,y,_,S,B,I,D,E,C,N,P,O,F,M,Q,J,W,Z,H,z,G,ne,R,q,Y,te,ie,pe,oe,ce,ge,Fe,re;switch(Q=new B0,i=Object.keys(t).sort(function(Ne,Oe){return Ne-Oe}),r){case"macroman":for(g=0,b=function(){var Ne=[];for(x=0;x<256;++x)Ne.push(0);return Ne}(),_={0:0},s={},J=0,z=i.length;J<z;J++)_[ce=t[a=i[J]]]==null&&(_[ce]=++g),s[a]={old:t[a],new:_[t[a]]},b[a]=_[t[a]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(b),{charMap:s,subtable:Q.data,maxGlyphID:g+1};case"unicode":for(F=[],f=[],S=0,_={},n={},y=u=null,W=0,G=i.length;W<G;W++)_[I=t[a=i[W]]]==null&&(_[I]=++S),n[a]={old:I,new:_[I]},o=_[I]-a,y!=null&&o===u||(y&&f.push(y),F.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),F.push(65535),P=2*(N=F.length),C=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(C/2)/Math.LN2,E=2*N-C,l=[],D=[],p=[],x=Z=0,ne=F.length;Z<ne;x=++Z){if(O=F[x],d=f[x],O===65535){l.push(0),D.push(0);break}if(O-(M=n[O].new)>=32768)for(l.push(0),D.push(2*(p.length+N-x)),a=H=O;O<=d?H<=d:H>=d;a=O<=d?++H:--H)p.push(n[a].new);else l.push(M-O),D.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*N+2*p.length),Q.writeUInt16(0),Q.writeUInt16(P),Q.writeUInt16(C),Q.writeUInt16(m),Q.writeUInt16(E),pe=0,R=f.length;pe<R;pe++)a=f[pe],Q.writeUInt16(a);for(Q.writeUInt16(0),oe=0,q=F.length;oe<q;oe++)a=F[oe],Q.writeUInt16(a);for(ge=0,Y=l.length;ge<Y;ge++)o=l[ge],Q.writeUInt16(o);for(Fe=0,te=D.length;Fe<te;Fe++)B=D[Fe],Q.writeUInt16(B);for(re=0,ie=p.length;re<ie;re++)g=p[re],Q.writeUInt16(g);return{charMap:n,subtable:Q.data,maxGlyphID:S+1}}},e}(),tY=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new g7(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=g7.encode(r,n),(s=new B0).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),a1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),s1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),i1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),o1e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},l1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,l,u,d,f,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=f=0,m=a.length;f<m;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new o1e(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),c1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),u1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,m,p;for(p=[],d=0,f=(m=this.metrics).length;d<f;d++)i=m[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),rY=[].slice,d1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,f,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new B0(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new f1e(l,d,m,u,f):new A1e(l,o,d,m,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),A1e=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),f1e=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new B0(rY.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),h1e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xA(t,ld),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),m1e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,l;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,l,u,d,f,m,p,x,g,b,y;for(a in n=tY.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(l=y[a]).old]=l.new;for(x in m=n.maxGlyphID,i)x in p||(p[x]=m++);return d=function(_){var S,B;for(S in B={},_)B[_[S]]=S;return B}(p),f=Object.keys(d).sort(function(_,S){return _-S}),g=function(){var _,S,B;for(B=[],_=0,S=f.length;_<S;_++)o=f[_],B.push(d[o]);return B}(),s=this.font.glyf.encode(i,g,p),u=this.font.loca.encode(s.offsets,g),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();fr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function nY(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,f="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,m=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&m>=1){for(var x=0;x<f.length;x++)a.text(f[x],t-a.getStringUnitWidth(f[x])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var v7={},Av=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:v7=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return v7||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),kI=function(e,t){return kI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kI(e,t)};function aY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kI(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var sY=function(e){aY(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function p1e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function g1e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function h_(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function iY(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=oY(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function oY(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function N5(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function lY(e,t){var r=N5(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function v1e(e,t,r,n,a){var s={},i=1.3333333333333333,o=UB(t,function(S){return a.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var l=UB(t,function(S){return a.getComputedStyle(S).color});l!=null&&(s.textColor=l);var u=b1e(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var p=(parseFloat(m)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var x=UB(t,function(S){return a.getComputedStyle(S)[d]});x!=null&&(s.lineColor=x);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=x1e(n);y&&(s.fontStyle=y);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(s.font=_),s}function x1e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function UB(e,t){var r=cY(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function cY(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:cY(e.parentElement,t):r}function b1e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=N5(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function uY(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],m=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:m};for(var p=0;p<o.rows.length;p++){var x=o.rows[p],g=(i=(s=x==null?void 0:x.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=y1e(l,u,r,x,n,a);b&&(g==="thead"?d.push(b):g==="tfoot"?m.push(b):f.push(b))}return{head:d,body:f,foot:m}}function y1e(e,t,r,n,a,s){for(var i=new sY(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=v1e(e,l,t,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:w1e(l)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function w1e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function E1e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function cf(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function dY(e,t){var r=new Av(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();E1e(a,n,t);var s=cf({},a,n,t),i;typeof window<"u"&&(i=window);var o=C1e(a,n,t),l=_1e(a,n,t),u=S1e(r,s),d=B1e(r,s,i);return{id:t.tableId,content:d,hooks:l,styles:o,settings:u}}function C1e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=e[l],d=t[l],f=r[l];n.columnStyles=cf({},u,d,f)}else{var m=[e,t,r],p=m.map(function(x){return x[l]||{}});n[l]=cf({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function _1e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function S1e(e,t){var r,n,a,s,i,o,l,u,d,f,m,p,x=N5(t.margin,40/e.scaleFactor()),g=(r=N1e(e,t.startY))!==null&&r!==void 0?r:x.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var _=(s=t.useCss)!==null&&s!==void 0?s:!1,S=t.theme||(_?"plain":"striped"),B=!!t.horizontalPageBreak,I=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:S,startY:g,margin:x,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(m=t.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:B,horizontalPageBreakRepeat:I,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function N1e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function B1e(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=uY(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||k1e(n,a,s);return{columns:l,head:n,body:a,foot:s}}function k1e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var TI=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),T1e=function(e){aY(t,e);function t(r,n,a,s,i,o){var l=e.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return t}(TI),I1e=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new T1e(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new TI(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new TI(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),AY=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof sY&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},e}(),fY=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=N5(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),j1e=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function F1e(e,t){O1e(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=II(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=II(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),P1e(t),R1e(t,e),D1e(t)}function O1e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=lY(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,l,null);var f=u.padding("horizontal");u.contentWidth=h_(u.text,u.styles,e)+f;var m=h_(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function II(e,t,r){for(var n=t,a=e.reduce(function(p,x){return p+x.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var m=e.filter(function(p){return t<0?p.width>r(p):!0});m.length&&(t=II(m,t,r))}return t}function D1e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=t[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,m=d.rowSpan>f?f:d.rowSpan;t[l.index]={cell:d,left:m,row:s}}}}}function P1e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function R1e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=x7(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=x7(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function x7(e,t,r,n,a){return e.map(function(s){return L1e(s,t,r,n,a)})}function L1e(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=h_(e,r,n))return e;for(;t<h_(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function hY(e,t){var r=new Av(e),n=U1e(t,r.scaleFactor()),a=new I1e(t,n);return F1e(r,a),r.applyStyles(r.userStyles),a}function U1e(e,t){var r=e.content,n=Q1e(r.columns);if(r.head.length===0){var a=b7(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=b7(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:MB("head",r.head,n,i,s,t),body:MB("body",r.body,n,i,s,t),foot:MB("foot",r.foot,n,i,s,t)}}function MB(e,t,r,n,a,s){var i={},o=t.map(function(l,u){for(var d=0,f={},m=0,p=0,x=0,g=r;x<g.length;x++){var b=g[x];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(l)?y=l[b.index-m-d]:y=l[b.dataKey];var _={};typeof y=="object"&&!Array.isArray(y)&&(_=(y==null?void 0:y.styles)||{});var S=H1e(e,b,u,a,n,s,_),B=new fY(y,S,e);f[b.dataKey]=B,f[b.index]=B,p=B.colSpan-1,i[b.index]={left:B.rowSpan-1,times:p}}else p--,m++;else i[b.index].left--,p=i[b.index].times,d++}return new AY(l,u,e,f)});return o}function b7(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=M1e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function M1e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Q1e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new j1e(a,t,r)})}function H1e(e,t,r,n,a,s,i){var o=g1e(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var u=cf({},o.table,o[e],a.styles,l),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},m=e==="body"&&r%2===0?cf({},o.alternateRow,a.alternateRowStyles):{},p=p1e(s),x=cf({},p,u,m,f);return cf(x,i)}function V1e(e,t,r){var n;r===void 0&&(r={});var a=lY(e,t),s=new Map,i=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var p=t.columns.find(function(x){return x.dataKey===m||x.index===m});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function z1e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=V1e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function mY(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=t.body,u=l.reduce(function(m,p){return m+p.height},0);o+=u}var d=new Av(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(gY(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=cf({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?$1e(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(m){return Nf(d,t,m,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(m,p){var x=p===t.body.length-1;m_(d,t,m,x,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(m){return Nf(d,t,m,s,t.columns)})),iY(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function $1e(e,t,r,n){var a=z1e(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?yb(e,t,r,n,u.columns,!0):y7(e,t,n,u.columns),K1e(e,t,r,n,u.columns),QB(e,t,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?yb(e,t,r,n,d,!0):y7(e,t,n,d),u=w7(e,t,i+1,n,d),QB(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(m){e.applyStyles(e.userStyles),yb(e,t,r,n,m.columns,!0),w7(e,t,i+1,n,m.columns,f),QB(e,t,n,m.columns)}),i=u};i<t.body.length-1;)l()}function y7(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Nf(e,t,s,r,n)})}function K1e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;m_(e,t,s,o,r,n,a)})}function w7(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(l,u){var d=r+u===t.body.length-1,f=pY(e,t,d,n);l.canEntireRowFit(f,a)&&(Nf(e,t,l,n,a),o=r+u)}),o}function QB(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Nf(e,t,s,r,n)})}function G1e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function q1e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=e.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new fY(u.raw,u.styles,u.section);d=cf(d,u),d.text=[];var f=G1e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var m=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,p),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var x=new AY(e.raw,-1,e.section,a,!0);x.height=s;for(var g=0,b=r.columns;g<b.length;g++){var l=b[g],d=x.cells[l.index];d&&(d.height=x.height);var u=e.cells[l.index];u&&(u.height=e.height)}return x}function W1e(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function m_(e,t,r,n,a,s,i){var o=pY(e,t,n,s);if(r.canEntireRowFit(o,i))Nf(e,t,r,s,i);else if(W1e(e,r,o,t)){var l=q1e(r,o,t,e);Nf(e,t,r,s,i),yb(e,t,a,s,i),m_(e,t,l,n,a,s,i)}else yb(e,t,a,s,i),m_(e,t,r,n,a,s,i)}function Nf(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}X1e(e,l,n);var d=l.getTextPos();nY(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function X1e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=oY(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Y1e(e,t,r,n.lineWidth))}function Y1e(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,f,m,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,m,p,"S")}}function pY(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function yb(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Nf(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;iY(e,t,r,n),gY(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Nf(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function gY(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function J1e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=dY(this,n),s=hY(this,a);return mY(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){nY(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Av.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Av.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Av(this),s=uY(a,t,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var HB;function nl(e,t){var r=dY(e,t),n=hY(e,r);mY(e,n)}try{if(typeof window<"u"&&window){var E7=window,C7=E7.jsPDF||((HB=E7.jspdf)===null||HB===void 0?void 0:HB.jsPDF);C7&&J1e(C7)}}catch(e){console.error("Could not apply autoTable plugin",e)}const K6="evaluaciones_pruebas",G6="evaluaciones_rubricas_estaticas",q6="evaluaciones_rubricas_interactivas",Z1e="usuarios",B5=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},ebe=e=>{const t=tr(Ft(Nt,K6),qr("fechaCreacion","desc"));return yr(t,n=>{e(n.docs.map(a=>B5(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},tbe=async e=>{try{const{id:t,...r}=e,n=br(Nt,K6,t);await io(n,{...r,fechaCreacion:hr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},rbe=async e=>{try{await ni(br(Nt,K6,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},nbe=e=>{const t=tr(Ft(Nt,G6),qr("fechaCreacion","desc"));return yr(t,n=>{e(n.docs.map(a=>B5(a)))},n=>{console.error("Error al suscribirse a las rbricas estticas:",n),e([])})},abe=async e=>{try{const{id:t,...r}=e,n=br(Nt,G6,t);await io(n,{...r,fechaCreacion:hr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rbrica esttica:",t),new Error("No se pudo guardar la rbrica.")}},sbe=async e=>{try{await ni(br(Nt,G6,e))}catch(t){throw console.error("Error al eliminar la rbrica esttica:",t),new Error("No se pudo eliminar la rbrica.")}},ibe=e=>{const t=tr(Ft(Nt,q6));return yr(t,n=>{e(n.docs.map(a=>B5(a)))},n=>{console.error("Error al suscribirse a las rbricas interactivas:",n),e([])})},obe=async e=>{try{const{id:t,...r}=e,n=br(Nt,q6,t);await io(n,r)}catch(t){throw console.error("Error al guardar la rbrica interactiva:",t),new Error("No se pudo guardar la rbrica interactiva.")}},lbe=async e=>{try{return(await da(Ft(Nt,q6),e)).id}catch(t){throw console.error("Error al crear la rbrica interactiva:",t),new Error("No se pudo crear la rbrica interactiva.")}},cbe=e=>{const t=tr(Ft(Nt,Z1e));return yr(t,n=>{e(n.docs.map(a=>B5(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},ube=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],_7={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},xC=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},dbe=({open:e})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Abe=({item:e,index:t,showAnswers:r})=>{const n=T.useMemo(()=>e.tipo==="Trminos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Seleccin mltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Trminos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto}),"  ",a.definicion]},s))})]})]}),e.tipo==="Comprensin de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Seleccin mltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},fbe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(null),[a,s]=T.useState(!1),[i,o]=T.useState(!1),[l,u]=T.useState(null),[d,f]=T.useState(!1),m={nombre:"",asignatura:Pi[0],nivel:$g[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,x]=T.useState(m);T.useEffect(()=>{const E=ebe(t);return()=>E()},[]);const g=E=>{const{name:C,value:N}=E.target;x(P=>({...P,[C]:N}))},b=E=>{x(C=>{const N={...C.tiposActividad};return N[E]?delete N[E]:N[E]=_7[E][0],{...C,tiposActividad:N}})},y=(E,C)=>{x(N=>({...N,tiposActividad:{...N.tiposActividad,[E]:C}}))},_=E=>{x(C=>{const N=C.selectedNee.includes(E)?C.selectedNee.filter(P=>P!==E):[...C.selectedNee,E];return{...C,selectedNee:N}})},S=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const C=Object.entries(p.tiposActividad).map(([O,F])=>`- ${F} tem(s) de tipo '${O}'`).join(`
`),N=p.isNee&&p.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",P=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${C}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
               - 'instrucciones': Instrucciones para esa actividad especfica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de tem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numrico.
                   - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales segn el tipo:
                       - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensin de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{S0("Evaluacin - Pruebas");const O="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Z=(await(await new xs(O).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);let z=0;H.actividades.forEach(ne=>{ne.items.forEach(R=>{z+=R.puntaje||0,R.tipo==="Comprensin de lectura"&&R.preguntas&&R.preguntas.forEach(q=>{z+=q.puntaje||0})})});const G={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:H.objetivo,instruccionesGenerales:H.instruccionesGenerales,puntajeIdeal:z,actividades:H.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(G),f(!1)}catch(O){console.error(O),u("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},B=async()=>{if(r)try{await tbe(r),alert("Prueba guardada con xito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},I=async E=>{if(window.confirm("Eliminar esta prueba?"))try{await rbe(E),(r==null?void 0:r.id)===E&&n(null)}catch(C){console.error(C),alert("No se pudo eliminar la prueba.")}},D=async E=>{o(!0);const C=new fr("p","mm","a4"),N=20,P=C.internal.pageSize.getHeight(),O=C.internal.pageSize.getWidth(),F=O-N*2;let M=N;const Q=Z=>{Z.setFillColor(230,230,230),Z.rect(0,0,O,25,"F"),Z.setFontSize(9),Z.setTextColor(0,0,0),Z.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),Z.text("SUBDIRECCIN DE GESTIN PEDAGGICA",O-N,15,{align:"right"})};Q(C),M=30,C.setTextColor(0,0,0),C.setFont("helvetica","bold"),C.setFontSize(16),C.text(E.nombre,O/2,M,{align:"center"}),M+=10,nl(C,{startY:M,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:Z=>{Q(C)}}),M=C.lastAutoTable.finalY+10;const J=Z=>{M+Z>P-N&&(C.addPage(),Q(C),M=N+15,C.setTextColor(0,0,0))},W=(Z,H)=>{C.setFont("helvetica",H.isBold?"bold":"normal"),C.setFontSize(H.fontSize);const z=Array.isArray(Z)?Z.join(`
`):Z;return C.getTextDimensions(z,{maxWidth:H.width}).h};for(const Z of E.actividades){let H=W(Z.titulo,{fontSize:12,width:F,isBold:!0})+W(Z.instrucciones,{fontSize:10,width:F})+12;J(H),C.setFont("helvetica","bold"),C.setFontSize(12),C.setTextColor(0,0,0),C.text(Z.titulo,N,M),M+=8,C.setFont("helvetica","normal"),C.setFontSize(10);const z=C.splitTextToSize(Z.instrucciones,F);C.text(z,N,M),M+=z.length*(10*.35*1.15)+4;for(const[G,ne]of Z.items.entries()){let R=0;const q=`${G+1}. ${ne.pregunta} (${ne.puntaje} pts)`;switch(R+=W(q,{fontSize:10,width:F,isBold:!0}),ne.tipo){case"Seleccin mltiple":ne.opciones.forEach(ie=>{R+=W(ie,{fontSize:10,width:F-5})+3}),R+=7;break;case"Verdadero o Falso":R+=10;break;case"Desarrollo":R+=30;break;case"Trminos pareados":R+=ne.pares.length*12+20;break;case"Comprensin de lectura":const te=ne;R+=W(te.texto,{fontSize:10,width:F-10})+10,te.preguntas.forEach(ie=>{const pe=`${ie.pregunta} (${ie.puntaje} pts)`;R+=W(pe,{fontSize:10,width:F-5,isBold:!0}),ie.tipo==="Seleccin mltiple"?(ie.opciones.forEach(oe=>{R+=W(oe,{fontSize:10,width:F-10})+3}),R+=7):ie.tipo==="Desarrollo"&&(R+=30),R+=5}),R+=15;break}J(R),C.setFont("helvetica","bold"),C.setFontSize(10),C.setTextColor(0,0,0);const Y=C.splitTextToSize(q,F);if(C.text(Y,N,M),M+=Y.length*5+4,C.setFont("helvetica","normal"),ne.tipo==="Seleccin mltiple")ne.opciones.forEach((te,ie)=>{C.text(`${String.fromCharCode(65+ie)}) ${te}`,N+5,M),M+=7});else if(ne.tipo==="Verdadero o Falso")C.text("V ______    F ______",N+5,M),M+=10;else if(ne.tipo==="Desarrollo")C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N,M,F,25,"FD"),M+=30;else if(ne.tipo==="Trminos pareados"){const te=[...ne.pares.map(pe=>pe.definicion)].sort(()=>Math.random()-.5),ie=ne.pares.map((pe,oe)=>[`${oe+1}. ${pe.concepto}`,`(   ) ${te[oe]}`]);nl(C,{startY:M,head:[["Columna A: Concepto","Columna B: Definicin"]],body:ie,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:pe=>Q(C)}),M=C.lastAutoTable.finalY+10}else if(ne.tipo==="Comprensin de lectura"){const te=ne;C.setFillColor(240,240,240),C.setDrawColor(200,200,200);const ie=C.splitTextToSize(te.texto,F-10),pe=ie.length*(10*.35*1.15)+8;C.rect(N,M,F,pe,"FD"),M+=4,C.setFont("helvetica","normal"),C.setFontSize(10),C.setTextColor(0,0,0),C.text(ie,N+5,M),M+=pe;for(const[oe,ce]of te.preguntas.entries()){const ge=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;C.setFont("helvetica","bold");const Fe=C.splitTextToSize(ge,F-5);C.text(Fe,N+5,M),M+=Fe.length*5+4,C.setFont("helvetica","normal"),ce.tipo==="Seleccin mltiple"?ce.opciones.forEach((re,Ne)=>{C.text(`${String.fromCharCode(65+Ne)}) ${re}`,N+10,M),M+=7}):ce.tipo==="Desarrollo"&&(C.setDrawColor(200,200,200),C.setFillColor(245,245,245),C.rect(N+5,M,F-5,25,"FD"),M+=30)}}M+=5}}C.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(dbe,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:B,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>D(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(xX,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),c.jsx("div",{className:"space-y-6",children:E.items.map((C,N)=>c.jsx(Abe,{item:C,index:N,showAnswers:d},C.id))})]},E.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:g,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:p.asignatura,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Pi.map(E=>c.jsx("option",{children:E},E))}),c.jsx("select",{name:"nivel",value:p.nivel,onChange:g,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:$g.map(E=>c.jsx("option",{children:E},E))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((E,C)=>c.jsx("button",{type:"button",onClick:()=>x(N=>({...N,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${C===0?"rounded-l-lg":""} ${C===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>x(C=>({...C,isNee:E.target.checked,selectedNee:E.target.checked?C.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:u_.map(E=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>_(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),c.jsx("textarea",{name:"contenido",value:p.contenido,onChange:g,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:ube.map(E=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>b(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),_7[E].map(C=>c.jsx("button",{type:"button",onClick:()=>y(E,C),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===C?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:C},C))]})]},E))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>I(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},hbe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=T.useState(null),[i,o]=T.useState("list"),[l,u]=T.useState(!1),[d,f]=T.useState(""),m=async(I,D)=>{if(!I.trim()||!D.trim()){alert("El ttulo y la descripcin son obligatorios.");return}u(!0);const E=`Crea una rbrica de evaluacin detallada sobre "${I}" con el propsito de "${D}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{S0("Evaluacin - Rbricas");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=(await(await new xs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),J=JSON.parse(Q),W={id:crypto.randomUUID(),titulo:I,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:J.map(Z=>({id:crypto.randomUUID(),nombre:Z.dimension,niveles:{insuficiente:Z.insuficiente,suficiente:Z.suficiente,competente:Z.competente,avanzado:Z.avanzado}}))};s(W)}catch(N){console.error(N),alert("Error al generar la rbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const I=crypto.randomUUID(),D={id:I,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,D]}:null),f("");const E=`Para una rbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,C={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{S0("Evaluacin - Rbricas (Aadir Dimensin)");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Q=(await(await new xs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:C}})).response).text(),J=JSON.parse(Q);s(W=>W?{...W,dimensiones:W.dimensiones.map(Z=>Z.id===I?{...Z,niveles:J,isLoading:!1}:Z)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(P=>P?{...P,dimensiones:P.dimensiones.filter(O=>O.id!==I)}:null)}},x=()=>{if(!a)return;e.some(D=>D.id===a.id)?t(a):n(a),o("list"),s(null)},g=I=>{s(I),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(I,D,E)=>{a&&s(C=>C?{...C,dimensiones:C.dimensiones.map(N=>N.id!==I?N:D==="nombre"?{...N,nombre:E}:{...N,niveles:{...N.niveles,[D]:E}})}:null)},_=(I,D)=>{s(E=>E?{...E,[I]:D}:null)},S=I=>{a&&s(D=>D?{...D,dimensiones:D.dimensiones.filter(E=>E.id!==I)}:null)},B=()=>{if(!a)return null;const I="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${I} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),c.jsx("input",{value:a.titulo,onChange:E=>_("titulo",E.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${I} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:E=>_("descripcion",E.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${I} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":" Generar Rbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:E.nombre,onChange:C=>y(E.id,"nombre",C.target.value),rows:4,className:D})}),Object.keys(E.niveles).map(C=>c.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:E.niveles[C],onChange:N=>y(E.id,C,N.target.value),rows:4,className:D})},C)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>S(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},E.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),c.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${I} mt-1`})]}),c.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(I=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:I.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:I.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>g(I),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(I.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},I.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):B()},mbe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState(null),[i,o]=T.useState(null),[l,u]=T.useState({rubricaEstaticaId:"",curso:""}),[d,f]=T.useState(null);T.useEffect(()=>{const _=ibe(n);return()=>_()},[]);const m=async _=>{_.preventDefault();const S=t.find(I=>I.id===l.rubricaEstaticaId);if(!S||!l.curso){alert("Debe seleccionar una rbrica y un curso.");return}const B={nombre:S.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:S.id,resultados:{}};try{await lbe(B),u({rubricaEstaticaId:"",curso:""})}catch(I){console.error(I),alert("No se pudo crear la evaluacin con rbrica.")}},p=_=>{s(_),o(JSON.parse(JSON.stringify(_)))},x=(_,S,B)=>{i&&o(I=>{if(!I)return null;const D=JSON.parse(JSON.stringify(I));return D.resultados[_]||(D.resultados[_]={puntajes:{},feedback:""}),D.resultados[_].puntajes[S]=B,D})},g=async()=>{if(i)try{await obe(i),s(i),alert("Cambios guardados.")}catch(_){console.error(_),alert("No se pudieron guardar los cambios.")}},b=T.useCallback(_=>{const S=i,B=t.find(P=>P.id===(S==null?void 0:S.rubricaEstaticaId));if(!S||!B)return{score:0,maxScore:0,grade:"N/A"};const I=B.dimensiones.length*4,D=S.resultados[_];if(!D)return{score:0,maxScore:I,grade:"1.0"};const E=Object.values(D.puntajes).reduce((P,O)=>P+O,0),C=1+6*(E/I),N=I>0?C.toFixed(1):"1.0";return{score:E,maxScore:I,grade:N}},[i,t]),y=async _=>{if(!i)return;const S=t.find(E=>E.id===i.rubricaEstaticaId),B=i.resultados[_];if(!S||!B||Object.keys(B.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(_);const D=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${S.dimensiones.map(E=>`${E.nombre}: ${B.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluacin es "${S.titulo}". Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{S0("Evaluacin - Rbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=(await(await new xs(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(D)).response).text();o(M=>{if(!M)return null;const Q=JSON.parse(JSON.stringify(M));return Q.resultados[_].feedback=F.replace(/(\*\*|\*)/g,""),Q})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const _=t.find(B=>B.id===a.rubricaEstaticaId),S=e.filter(B=>B.profile===Kt.ESTUDIANTE&&xC(B.curso||"")===a.curso).map(B=>B.nombreCompleto).sort();return _?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:" Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),_.dimensiones.map(B=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:B.nombre},B.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),c.jsx("tbody",{children:S.map(B=>{var C;const{score:I,maxScore:D,grade:E}=b(B);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:B}),_.dimensiones.map(N=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(P=>{var O;return c.jsx("button",{onClick:()=>x(B,N.id,P),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((O=i.resultados[B])==null?void 0:O.puntajes[N.id])===P?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:P},P)})})},N.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[I,"/",D]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((C=i.resultados[B])==null?void 0:C.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>y(B),disabled:d===B,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===B?"...":"Generar IA"})]})})]},B)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:_=>u({...l,rubricaEstaticaId:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),t.map(_=>c.jsx("option",{value:_.id,children:_.titulo},_.id))]}),c.jsxs("select",{value:l.curso,onChange:_=>u({...l,curso:_.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),Wa.map(_=>c.jsx("option",{value:_,children:_},_))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(_=>c.jsxs("button",{onClick:()=>p(_),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:_.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:_.curso})]},_.id))})]})]})},pbe=({allUsers:e})=>{const[t,r]=T.useState(""),n=T.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Kt.ESTUDIANTE&&s.curso).map(s=>xC(s.curso)))).sort(),[e]),a=T.useMemo(()=>{const s=e.filter(i=>i.profile===Kt.ESTUDIANTE);return t?s.filter(i=>xC(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",c.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:xC(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},gbe=()=>{const[e,t]=T.useState("pruebas"),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState(!0);T.useEffect(()=>{o(!0);const f=cbe(n),m=nbe(p=>{s(p),o(!1)});return()=>{f(),m()}},[]);const l=async f=>{try{await abe(f)}catch(m){console.error(m),alert("No se pudo guardar la rbrica.")}},u=async f=>{try{await sbe(f)}catch(m){console.error(m),alert("No se pudo eliminar la rbrica.")}},d=({tabName:f,label:m})=>c.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando mdulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guas"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestin de Nminas"})]})}),c.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&c.jsx(fbe,{}),e==="rubricas"&&c.jsx(hbe,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),e==="rubricasInteractivas"&&c.jsx(mbe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&c.jsx(pbe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var p_={};p_.version="0.18.5";var vY=1252,vbe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],W6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},X6=function(e){vbe.indexOf(e)!=-1&&(vY=W6[0]=e)};function xbe(){X6(1252)}var Zu=function(e){X6(e)};function Y6(){Zu(1200),xbe()}function S7(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function bbe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function xY(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Y1=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?bbe(e.slice(2)):t==254&&r==255?xY(e.slice(2)):t==65279?e.slice(1):e},V2=function(t){return String.fromCharCode(t)},N7=function(t){return String.fromCharCode(t)},ey,Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ty(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=Zh.charAt(s)+Zh.charAt(i)+Zh.charAt(o)+Zh.charAt(l);return t}function gc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=Zh.indexOf(e.charAt(u++)),i=Zh.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=Zh.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Zh.indexOf(e.charAt(u++)),a=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var sn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Hf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function k0(e){return sn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function B7(e){return sn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var cc=function(t){return sn?Hf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function k5(e){if(typeof ArrayBuffer>"u")return cc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function U0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function ybe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function J6(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return J6(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Di=sn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Hf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function wbe(e){for(var t=[],r=0,n=e.length+250,a=k0(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=k0(65535),n=65530)}return t.push(a.slice(0,r)),Di(t)}var al=/\u0000/g,J1=/[\u0001-\u0006]/g;function fv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ed(e,t){var r=""+e;return r.length>=t?r:fs("0",t-r.length)+r}function Z6(e,t){var r=""+e;return r.length>=t?r:fs(" ",t-r.length)+r}function g_(e,t){var r=""+e;return r.length>=t?r:r+fs(" ",t-r.length)}function Ebe(e,t){var r=""+Math.round(e);return r.length>=t?r:fs("0",t-r.length)+r}function Cbe(e,t){var r=""+e;return r.length>=t?r:fs("0",t-r.length)+r}var k7=Math.pow(2,32);function hg(e,t){if(e>k7||e<-k7)return Ebe(e,t);var r=Math.round(e);return Cbe(r,t)}function v_(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var T7=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],VB=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _be(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},I7={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Sbe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function x_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+l,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function jm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=jbe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var bY=new Date(1899,11,31,0,0,0),Nbe=bY.getTime(),Bbe=new Date(1900,2,1,0,0,0);function yY(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Bbe&&(r+=1440*60*1e3),(r-(Nbe+(e.getTimezoneOffset()-bY.getTimezoneOffset())*6e4))/(1440*60*1e3)}function eO(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kbe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Tbe(e){var t=e<0?12:11,r=eO(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ibe(e){var t=eO(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ry(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Tbe(e):t===10?r=e.toFixed(10).substr(0,12):r=Ibe(e),eO(kbe(r.toUpperCase()))}function lp(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ry(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return mu(14,yY(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function jbe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Fbe(e,t,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return VB[r.m-1][1];case 5:return VB[r.m-1][0];default:return VB[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return T7[r.q][0];default:return T7[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ed(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=ed(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?ed(l,u):"";return d}function e0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var wY=/%/g;function Obe(e,t,r){var n=t.replace(wY,""),a=t.length-n.length;return mf(e,n,r*Math.pow(10,2*a))+fs("%",a)}function Dbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function EY(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+EY(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var CY=/# (\?+)( ?)\/( ?)(\d+)/;function Pbe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?fs(" ",e[1].length+1+e[4].length):Z6(i,e[1].length)+e[2]+"/"+e[3]+ed(o,e[4].length))}function Rbe(e,t,r){return r+(t===0?"":""+t)+fs(" ",e[1].length+2+e[4].length)}var _Y=/^#*0*\.([0#]+)/,SY=/\).*[0#]/,NY=/\(###\) ###\\?-####/;function Yo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function j7(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function F7(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Lbe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Ube(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Yc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SY)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yc("n",n,r):"("+Yc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Dbe(e,t,r);if(t.indexOf("%")!==-1)return Obe(e,t,r);if(t.indexOf("E")!==-1)return EY(t,r);if(t.charCodeAt(0)===36)return"$"+Yc(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+hg(l,t.length);if(t.match(/^[#?]+$/))return a=hg(r,0),a==="0"&&(a=""),a.length>t.length?a:Yo(t.substr(0,t.length-a.length))+a;if(s=t.match(CY))return Pbe(s,l,u);if(t.match(/^#+0+$/))return u+hg(l,t.length-t.indexOf("0"));if(s=t.match(_Y))return a=j7(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Yo(s[1])).replace(/\.$/,"."+Yo(s[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+fs("0",Yo(s[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+j7(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+e0(hg(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yc(e,t,-r):e0(""+(Math.floor(r)+Lbe(r,s[1].length)))+"."+ed(F7(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Yc(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=fv(Yc(e,t.replace(/[\\-]/g,""),r)),i=0,fv(fv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<a.length?a.charAt(i++):x==="0"?"0":""}));if(t.match(NY))return a=Yc(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=x_(l,Math.pow(10,i)-1,!1),a=""+u,d=mf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=g_(o[2],i),d.length<s[4].length&&(d=Yo(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=x_(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Z6(o[1],i)+s[2]+"/"+s[3]+g_(o[2],i):fs(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=hg(r,0),t.length<=a.length?a:Yo(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,m=t.length-a.length-f;return Yo(t.substr(0,f)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=F7(r,s[1].length),r<0?"-"+Yc(e,t,-r):e0(Ube(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ed(0,3-x.length):"")+x})+"."+ed(i,s[1].length);switch(t){case"###,##0.00":return Yc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=e0(hg(l,0));return p!=="0"?u+p:"";case"###,###.00":return Yc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Yc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Mbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Qbe(e,t,r){var n=t.replace(wY,""),a=t.length-n.length;return mf(e,n,r*Math.pow(10,2*a))+fs("%",a)}function BY(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+BY(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Kd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SY)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Kd("n",n,r):"("+Kd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Mbe(e,t,r);if(t.indexOf("%")!==-1)return Qbe(e,t,r);if(t.indexOf("E")!==-1)return BY(t,r);if(t.charCodeAt(0)===36)return"$"+Kd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ed(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Yo(t.substr(0,t.length-a.length))+a;if(s=t.match(CY))return Rbe(s,l,u);if(t.match(/^#+0+$/))return u+ed(l,t.length-t.indexOf("0"));if(s=t.match(_Y))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Yo(s[1])).replace(/\.$/,"."+Yo(s[1])),a=a.replace(/\.(\d*)$/,function(x,g){return"."+g+fs("0",Yo(s[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+e0(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Kd(e,t,-r):e0(""+r)+"."+fs("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Kd(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=fv(Kd(e,t.replace(/[\\-]/g,""),r)),i=0,fv(fv(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<a.length?a.charAt(i++):x==="0"?"0":""}));if(t.match(NY))return a=Kd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=x_(l,Math.pow(10,i)-1,!1),a=""+u,d=mf("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=g_(o[2],i),d.length<s[4].length&&(d=Yo(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=x_(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Z6(o[1],i)+s[2]+"/"+s[3]+g_(o[2],i):fs(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Yo(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,m=t.length-a.length-f;return Yo(t.substr(0,f)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Kd(e,t,-r):e0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ed(0,3-x.length):"")+x})+"."+ed(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=e0(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Kd(e,t.slice(0,t.lastIndexOf(".")),r)+Yo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function mf(e,t,r){return(r|0)===r?Kd(e,t,r):Yc(e,t,r)}function Hbe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var kY=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ux(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":v_(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(kY))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Vbe(e,t,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,f,m="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!v_(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),x=p==="("||p===")"?p:"t";a[a.length]={t:x,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=jm(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=jm(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(u==null&&(u=jm(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",m="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",i+=5,m="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(g.v=u.H>=12?"":""),g.t="T",i+=5,m="h"):(g.t="t",++i),u==null&&g.t==="T")return"";a[a.length]=g,l=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(kY)){if(u==null&&(u=jm(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ux(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,_;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,l="h",b<1&&(b=1);break;case"s":(_=a[i].v.match(/\.0+$/))&&(y=Math.max(y,_[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",B;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=Fbe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(B=i+1;a[B]!=null&&((o=a[B].t)==="?"||o==="D"||(o===" "||o==="t")&&a[B+1]!=null&&(a[B+1].t==="?"||a[B+1].t==="t"&&a[B+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[B].v==="/"||a[B].v===" "&&a[B+1]!=null&&a[B+1].t=="?"));)a[i].v+=a[B].v,a[B]={v:"",t:";"},++B;S+=a[i].v,i=B-1;break;case"G":a[i].t="t",a[i].v=lp(t,r);break}var I="",D,E;if(S.length>0){S.charCodeAt(0)==40?(D=t<0&&S.charCodeAt(0)===45?-t:t,E=mf("n",S,D)):(D=t<0&&n>1?-t:t,E=mf("n",S,D),D<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),B=E.length-1;var C=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){C=i;break}var N=a.length;if(C===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(B>=a[i].v.length-1?(B-=a[i].v.length,a[i].v=E.substr(B+1,a[i].v.length)):B<0?a[i].v="":(a[i].v=E.substr(0,B+1),B=-1),a[i].t="t",N=i);B>=0&&N<a.length&&(a[N].v=E.substr(0,B+1)+a[N].v)}else if(C!==a.length&&E.indexOf("E")===-1){for(B=E.indexOf(".")-1,i=C;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")-1:a[i].v.length-1,I=a[i].v.substr(d+1);d>=0;--d)B>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(I=E.charAt(B--)+I);a[i].v=I,a[i].t="t",N=i}for(B>=0&&N<a.length&&(a[N].v=E.substr(0,B+1)+a[N].v),B=E.indexOf(".")+1,i=C;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==C)){for(d=a[i].v.indexOf(".")>-1&&i===C?a[i].v.indexOf(".")+1:0,I=a[i].v.substr(0,d);d<a[i].v.length;++d)B<E.length&&(I+=E.charAt(B++));a[i].v=I,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(D=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=mf(a[i].t,a[i].v,D),a[i].t="t");var P="";for(i=0;i!==a.length;++i)a[i]!=null&&(P+=a[i].v);return P}var O7=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function D7(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function zbe(e,t){var r=Hbe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(O7),o=r[1].match(O7);return D7(t,i)?[n,r[0]]:D7(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function mu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Tr)[e],n==null&&(n=r.table&&r.table[I7[e]]||Tr[I7[e]]),n==null&&(n=Sbe[e]||"General");break}if(v_(n,0))return lp(t,r);t instanceof Date&&(t=yY(t,r.date1904));var a=zbe(n,t);if(v_(a[1]))return lp(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Vbe(a[1],t,r,a[0])}function pf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Tr[r]==null){t<0&&(t=r);continue}if(Tr[r]==e){t=r;break}}t<0&&(t=391)}return Tr[t]=e,t}function T5(e){for(var t=0;t!=392;++t)e[t]!==void 0&&pf(e[t],t)}function dx(){Tr=_be()}var $be={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},TY=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Kbe(e){var t=typeof e=="number"?Tr[e]:e;return t=t.replace(TY,"(\\d+)"),new RegExp("^"+t+"$")}function Gbe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(TY)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:a=p;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var qbe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,C=new Array(256),N=0;N!=256;++N)E=N,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[N]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(E){var C=0,N=0,P=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)O[P]=E[P];for(P=0;P!=256;++P)for(N=E[P],C=256+P;C<4096;C+=256)N=O[C]=N>>>8^E[N&255];var F=[];for(P=1;P!=16;++P)F[P-1]=typeof Int32Array<"u"?O.subarray(P*256,P*256+256):O.slice(P*256,P*256+256);return F}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],f=a[6],m=a[7],p=a[8],x=a[9],g=a[10],b=a[11],y=a[12],_=a[13],S=a[14];function B(E,C){for(var N=C^-1,P=0,O=E.length;P<O;)N=N>>>8^r[(N^E.charCodeAt(P++))&255];return~N}function I(E,C){for(var N=C^-1,P=E.length-15,O=0;O<P;)N=S[E[O++]^N&255]^_[E[O++]^N>>8&255]^y[E[O++]^N>>16&255]^b[E[O++]^N>>>24]^g[E[O++]]^x[E[O++]]^p[E[O++]]^m[E[O++]]^f[E[O++]]^d[E[O++]]^u[E[O++]]^l[E[O++]]^o[E[O++]]^i[E[O++]]^s[E[O++]]^r[E[O++]];for(P+=15;O<P;)N=N>>>8^r[(N^E[O++])&255];return~N}function D(E,C){for(var N=C^-1,P=0,O=E.length,F=0,M=0;P<O;)F=E.charCodeAt(P++),F<128?N=N>>>8^r[(N^F)&255]:F<2048?(N=N>>>8^r[(N^(192|F>>6&31))&255],N=N>>>8^r[(N^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,M=E.charCodeAt(P++)&1023,N=N>>>8^r[(N^(240|F>>8&7))&255],N=N>>>8^r[(N^(128|F>>2&63))&255],N=N>>>8^r[(N^(128|M>>6&15|(F&3)<<4))&255],N=N>>>8^r[(N^(128|M&63))&255]):(N=N>>>8^r[(N^(224|F>>12&15))&255],N=N>>>8^r[(N^(128|F>>6&63))&255],N=N>>>8^r[(N^(128|F&63))&255]);return~N}return e.table=r,e.bstr=B,e.buf=I,e.str=D,e}(),vr=function(){var t={};t.version="1.2.1";function r(Ae,Be){for(var we=Ae.split("/"),Ee=Be.split("/"),_e=0,ke=0,We=Math.min(we.length,Ee.length);_e<We;++_e){if(ke=we[_e].length-Ee[_e].length)return ke;if(we[_e]!=Ee[_e])return we[_e]<Ee[_e]?-1:1}return we.length-Ee.length}function n(Ae){if(Ae.charAt(Ae.length-1)=="/")return Ae.slice(0,-1).indexOf("/")===-1?Ae:n(Ae.slice(0,-1));var Be=Ae.lastIndexOf("/");return Be===-1?Ae:Ae.slice(0,Be+1)}function a(Ae){if(Ae.charAt(Ae.length-1)=="/")return a(Ae.slice(0,-1));var Be=Ae.lastIndexOf("/");return Be===-1?Ae:Ae.slice(Be+1)}function s(Ae,Be){typeof Be=="string"&&(Be=new Date(Be));var we=Be.getHours();we=we<<6|Be.getMinutes(),we=we<<5|Be.getSeconds()>>>1,Ae.write_shift(2,we);var Ee=Be.getFullYear()-1980;Ee=Ee<<4|Be.getMonth()+1,Ee=Ee<<5|Be.getDate(),Ae.write_shift(2,Ee)}function i(Ae){var Be=Ae.read_shift(2)&65535,we=Ae.read_shift(2)&65535,Ee=new Date,_e=we&31;we>>>=5;var ke=we&15;we>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(we+1980),Ee.setMonth(ke-1),Ee.setDate(_e);var We=Be&31;Be>>>=5;var st=Be&63;return Be>>>=6,Ee.setHours(Be),Ee.setMinutes(st),Ee.setSeconds(We<<1),Ee}function o(Ae){to(Ae,0);for(var Be={},we=0;Ae.l<=Ae.length-4;){var Ee=Ae.read_shift(2),_e=Ae.read_shift(2),ke=Ae.l+_e,We={};switch(Ee){case 21589:we=Ae.read_shift(1),we&1&&(We.mtime=Ae.read_shift(4)),_e>5&&(we&2&&(We.atime=Ae.read_shift(4)),we&4&&(We.ctime=Ae.read_shift(4))),We.mtime&&(We.mt=new Date(We.mtime*1e3));break}Ae.l=ke,Be[Ee]=We}return Be}var l;function u(){return l||(l={})}function d(Ae,Be){if(Ae[0]==80&&Ae[1]==75)return Qr(Ae,Be);if((Ae[0]|32)==109&&(Ae[1]|32)==105)return si(Ae,Be);if(Ae.length<512)throw new Error("CFB file size "+Ae.length+" < 512");var we=3,Ee=512,_e=0,ke=0,We=0,st=0,$e=0,Je=[],tt=Ae.slice(0,512);to(tt,0);var wt=f(tt);switch(we=wt[0],we){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(wt[1]==0)return Qr(Ae,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+we)}Ee!==512&&(tt=Ae.slice(0,Ee),to(tt,28));var Ot=Ae.slice(0,Ee);m(tt,we);var Vt=tt.read_shift(4,"i");if(we===3&&Vt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Vt);tt.l+=4,We=tt.read_shift(4,"i"),tt.l+=4,tt.chk("00100000","Mini Stream Cutoff Size: "),st=tt.read_shift(4,"i"),_e=tt.read_shift(4,"i"),$e=tt.read_shift(4,"i"),ke=tt.read_shift(4,"i");for(var jt=-1,Lt=0;Lt<109&&(jt=tt.read_shift(4,"i"),!(jt<0));++Lt)Je[Lt]=jt;var wr=p(Ae,Ee);b($e,ke,wr,Ee,Je);var Wr=_(wr,We,Je,Ee);Wr[We].name="!Directory",_e>0&&st!==M&&(Wr[st].name="!MiniFAT"),Wr[Je[0]].name="!FAT",Wr.fat_addrs=Je,Wr.ssz=Ee;var Xr={},tn=[],rs=[],oo=[];S(We,Wr,wr,tn,_e,Xr,rs,st),x(rs,oo,tn),tn.shift();var ns={FileIndex:rs,FullPaths:oo};return Be&&Be.raw&&(ns.raw={header:Ot,sectors:wr}),ns}function f(Ae){if(Ae[Ae.l]==80&&Ae[Ae.l+1]==75)return[0,0];Ae.chk(Q,"Header Signature: "),Ae.l+=16;var Be=Ae.read_shift(2,"u");return[Ae.read_shift(2,"u"),Be]}function m(Ae,Be){var we=9;switch(Ae.l+=2,we=Ae.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+we);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+we);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+we)}Ae.chk("0600","Mini Sector Shift: "),Ae.chk("000000000000","Reserved: ")}function p(Ae,Be){for(var we=Math.ceil(Ae.length/Be)-1,Ee=[],_e=1;_e<we;++_e)Ee[_e-1]=Ae.slice(_e*Be,(_e+1)*Be);return Ee[we-1]=Ae.slice(we*Be),Ee}function x(Ae,Be,we){for(var Ee=0,_e=0,ke=0,We=0,st=0,$e=we.length,Je=[],tt=[];Ee<$e;++Ee)Je[Ee]=tt[Ee]=Ee,Be[Ee]=we[Ee];for(;st<tt.length;++st)Ee=tt[st],_e=Ae[Ee].L,ke=Ae[Ee].R,We=Ae[Ee].C,Je[Ee]===Ee&&(_e!==-1&&Je[_e]!==_e&&(Je[Ee]=Je[_e]),ke!==-1&&Je[ke]!==ke&&(Je[Ee]=Je[ke])),We!==-1&&(Je[We]=Ee),_e!==-1&&Ee!=Je[Ee]&&(Je[_e]=Je[Ee],tt.lastIndexOf(_e)<st&&tt.push(_e)),ke!==-1&&Ee!=Je[Ee]&&(Je[ke]=Je[Ee],tt.lastIndexOf(ke)<st&&tt.push(ke));for(Ee=1;Ee<$e;++Ee)Je[Ee]===Ee&&(ke!==-1&&Je[ke]!==ke?Je[Ee]=Je[ke]:_e!==-1&&Je[_e]!==_e&&(Je[Ee]=Je[_e]));for(Ee=1;Ee<$e;++Ee)if(Ae[Ee].type!==0){if(st=Ee,st!=Je[st])do st=Je[st],Be[Ee]=Be[st]+"/"+Be[Ee];while(st!==0&&Je[st]!==-1&&st!=Je[st]);Je[Ee]=-1}for(Be[0]+="/",Ee=1;Ee<$e;++Ee)Ae[Ee].type!==2&&(Be[Ee]+="/")}function g(Ae,Be,we){for(var Ee=Ae.start,_e=Ae.size,ke=[],We=Ee;we&&_e>0&&We>=0;)ke.push(Be.slice(We*F,We*F+F)),_e-=F,We=Bm(we,We*4);return ke.length===0?At(0):Di(ke).slice(0,Ae.size)}function b(Ae,Be,we,Ee,_e){var ke=M;if(Ae===M){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ae!==-1){var We=we[Ae],st=(Ee>>>2)-1;if(!We)return;for(var $e=0;$e<st&&(ke=Bm(We,$e*4))!==M;++$e)_e.push(ke);b(Bm(We,Ee-4),Be-1,we,Ee,_e)}}function y(Ae,Be,we,Ee,_e){var ke=[],We=[];_e||(_e=[]);var st=Ee-1,$e=0,Je=0;for($e=Be;$e>=0;){_e[$e]=!0,ke[ke.length]=$e,We.push(Ae[$e]);var tt=we[Math.floor($e*4/Ee)];if(Je=$e*4&st,Ee<4+Je)throw new Error("FAT boundary crossed: "+$e+" 4 "+Ee);if(!Ae[tt])break;$e=Bm(Ae[tt],Je)}return{nodes:ke,data:G7([We])}}function _(Ae,Be,we,Ee){var _e=Ae.length,ke=[],We=[],st=[],$e=[],Je=Ee-1,tt=0,wt=0,Ot=0,Vt=0;for(tt=0;tt<_e;++tt)if(st=[],Ot=tt+Be,Ot>=_e&&(Ot-=_e),!We[Ot]){$e=[];var jt=[];for(wt=Ot;wt>=0;){jt[wt]=!0,We[wt]=!0,st[st.length]=wt,$e.push(Ae[wt]);var Lt=we[Math.floor(wt*4/Ee)];if(Vt=wt*4&Je,Ee<4+Vt)throw new Error("FAT boundary crossed: "+wt+" 4 "+Ee);if(!Ae[Lt]||(wt=Bm(Ae[Lt],Vt),jt[wt]))break}ke[Ot]={nodes:st,data:G7([$e])}}return ke}function S(Ae,Be,we,Ee,_e,ke,We,st){for(var $e=0,Je=Ee.length?2:0,tt=Be[Ae].data,wt=0,Ot=0,Vt;wt<tt.length;wt+=128){var jt=tt.slice(wt,wt+128);to(jt,64),Ot=jt.read_shift(2),Vt=oO(jt,0,Ot-Je),Ee.push(Vt);var Lt={name:Vt,type:jt.read_shift(1),color:jt.read_shift(1),L:jt.read_shift(4,"i"),R:jt.read_shift(4,"i"),C:jt.read_shift(4,"i"),clsid:jt.read_shift(16),state:jt.read_shift(4,"i"),start:0,size:0},wr=jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2);wr!==0&&(Lt.ct=B(jt,jt.l-8));var Wr=jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2);Wr!==0&&(Lt.mt=B(jt,jt.l-8)),Lt.start=jt.read_shift(4,"i"),Lt.size=jt.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=M,Lt.name=""),Lt.type===5?($e=Lt.start,_e>0&&$e!==M&&(Be[$e].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",Be[Lt.start]===void 0&&(Be[Lt.start]=y(we,Lt.start,Be.fat_addrs,Be.ssz)),Be[Lt.start].name=Lt.name,Lt.content=Be[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:$e!==M&&Lt.start!==M&&Be[$e]&&(Lt.content=g(Lt,Be[$e].data,(Be[st]||{}).data))),Lt.content&&to(Lt.content,0),ke[Vt]=Lt,We.push(Lt)}}function B(Ae,Be){return new Date((oc(Ae,Be+4)/1e7*Math.pow(2,32)+oc(Ae,Be)/1e7-11644473600)*1e3)}function I(Ae,Be){return u(),d(l.readFileSync(Ae),Be)}function D(Ae,Be){var we=Be&&Be.type;switch(we||sn&&Buffer.isBuffer(Ae)&&(we="buffer"),we||"base64"){case"file":return I(Ae,Be);case"base64":return d(cc(gc(Ae)),Be);case"binary":return d(cc(Ae),Be)}return d(Ae,Be)}function E(Ae,Be){var we=Be||{},Ee=we.root||"Root Entry";if(Ae.FullPaths||(Ae.FullPaths=[]),Ae.FileIndex||(Ae.FileIndex=[]),Ae.FullPaths.length!==Ae.FileIndex.length)throw new Error("inconsistent CFB structure");Ae.FullPaths.length===0&&(Ae.FullPaths[0]=Ee+"/",Ae.FileIndex[0]={name:Ee,type:5}),we.CLSID&&(Ae.FileIndex[0].clsid=we.CLSID),C(Ae)}function C(Ae){var Be="Sh33tJ5";if(!vr.find(Ae,"/"+Be)){var we=At(4);we[0]=55,we[1]=we[3]=50,we[2]=54,Ae.FileIndex.push({name:Be,type:2,content:we,size:4,L:69,R:69,C:69}),Ae.FullPaths.push(Ae.FullPaths[0]+Be),N(Ae)}}function N(Ae,Be){E(Ae);for(var we=!1,Ee=!1,_e=Ae.FullPaths.length-1;_e>=0;--_e){var ke=Ae.FileIndex[_e];switch(ke.type){case 0:Ee?we=!0:(Ae.FileIndex.pop(),Ae.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(ke.R*ke.L*ke.C)&&(we=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(we=!0);break;default:we=!0;break}}if(!(!we&&!Be)){var We=new Date(1987,1,19),st=0,$e=Object.create?Object.create(null):{},Je=[];for(_e=0;_e<Ae.FullPaths.length;++_e)$e[Ae.FullPaths[_e]]=!0,Ae.FileIndex[_e].type!==0&&Je.push([Ae.FullPaths[_e],Ae.FileIndex[_e]]);for(_e=0;_e<Je.length;++_e){var tt=n(Je[_e][0]);Ee=$e[tt],Ee||(Je.push([tt,{name:a(tt).replace("/",""),type:1,clsid:W,ct:We,mt:We,content:null}]),$e[tt]=!0)}for(Je.sort(function(Vt,jt){return r(Vt[0],jt[0])}),Ae.FullPaths=[],Ae.FileIndex=[],_e=0;_e<Je.length;++_e)Ae.FullPaths[_e]=Je[_e][0],Ae.FileIndex[_e]=Je[_e][1];for(_e=0;_e<Je.length;++_e){var wt=Ae.FileIndex[_e],Ot=Ae.FullPaths[_e];if(wt.name=a(Ot).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||W,_e===0)wt.C=Je.length>1?1:-1,wt.size=0,wt.type=5;else if(Ot.slice(-1)=="/"){for(st=_e+1;st<Je.length&&n(Ae.FullPaths[st])!=Ot;++st);for(wt.C=st>=Je.length?-1:st,st=_e+1;st<Je.length&&n(Ae.FullPaths[st])!=n(Ot);++st);wt.R=st>=Je.length?-1:st,wt.type=1}else n(Ae.FullPaths[_e+1]||"")==n(Ot)&&(wt.R=_e+1),wt.type=2}}}function P(Ae,Be){var we=Be||{};if(we.fileType=="mad")return qt(Ae,we);switch(N(Ae),we.fileType){case"zip":return ea(Ae,we)}var Ee=function(Vt){for(var jt=0,Lt=0,wr=0;wr<Vt.FileIndex.length;++wr){var Wr=Vt.FileIndex[wr];if(Wr.content){var Xr=Wr.content.length;Xr>0&&(Xr<4096?jt+=Xr+63>>6:Lt+=Xr+511>>9)}}for(var tn=Vt.FullPaths.length+3>>2,rs=jt+7>>3,oo=jt+127>>7,ns=rs+Lt+tn+oo,Qs=ns+127>>7,Es=Qs<=109?0:Math.ceil((Qs-109)/127);ns+Qs+Es+127>>7>Qs;)Es=++Qs<=109?0:Math.ceil((Qs-109)/127);var ii=[1,Es,Qs,oo,tn,Lt,jt,0];return Vt.FileIndex[0].size=jt<<6,ii[7]=(Vt.FileIndex[0].start=ii[0]+ii[1]+ii[2]+ii[3]+ii[4]+ii[5])+(ii[6]+7>>3),ii}(Ae),_e=At(Ee[7]<<9),ke=0,We=0;{for(ke=0;ke<8;++ke)_e.write_shift(1,J[ke]);for(ke=0;ke<8;++ke)_e.write_shift(2,0);for(_e.write_shift(2,62),_e.write_shift(2,3),_e.write_shift(2,65534),_e.write_shift(2,9),_e.write_shift(2,6),ke=0;ke<3;++ke)_e.write_shift(2,0);for(_e.write_shift(4,0),_e.write_shift(4,Ee[2]),_e.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),_e.write_shift(4,0),_e.write_shift(4,4096),_e.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:M),_e.write_shift(4,Ee[3]),_e.write_shift(-4,Ee[1]?Ee[0]-1:M),_e.write_shift(4,Ee[1]),ke=0;ke<109;++ke)_e.write_shift(-4,ke<Ee[2]?Ee[1]+ke:-1)}if(Ee[1])for(We=0;We<Ee[1];++We){for(;ke<236+We*127;++ke)_e.write_shift(-4,ke<Ee[2]?Ee[1]+ke:-1);_e.write_shift(-4,We===Ee[1]-1?M:We+1)}var st=function(Vt){for(We+=Vt;ke<We-1;++ke)_e.write_shift(-4,ke+1);Vt&&(++ke,_e.write_shift(-4,M))};for(We=ke=0,We+=Ee[1];ke<We;++ke)_e.write_shift(-4,Z.DIFSECT);for(We+=Ee[2];ke<We;++ke)_e.write_shift(-4,Z.FATSECT);st(Ee[3]),st(Ee[4]);for(var $e=0,Je=0,tt=Ae.FileIndex[0];$e<Ae.FileIndex.length;++$e)tt=Ae.FileIndex[$e],tt.content&&(Je=tt.content.length,!(Je<4096)&&(tt.start=We,st(Je+511>>9)));for(st(Ee[6]+7>>3);_e.l&511;)_e.write_shift(-4,Z.ENDOFCHAIN);for(We=ke=0,$e=0;$e<Ae.FileIndex.length;++$e)tt=Ae.FileIndex[$e],tt.content&&(Je=tt.content.length,!(!Je||Je>=4096)&&(tt.start=We,st(Je+63>>6)));for(;_e.l&511;)_e.write_shift(-4,Z.ENDOFCHAIN);for(ke=0;ke<Ee[4]<<2;++ke){var wt=Ae.FullPaths[ke];if(!wt||wt.length===0){for($e=0;$e<17;++$e)_e.write_shift(4,0);for($e=0;$e<3;++$e)_e.write_shift(4,-1);for($e=0;$e<12;++$e)_e.write_shift(4,0);continue}tt=Ae.FileIndex[ke],ke===0&&(tt.start=tt.size?tt.start-1:M);var Ot=ke===0&&we.root||tt.name;if(Je=2*(Ot.length+1),_e.write_shift(64,Ot,"utf16le"),_e.write_shift(2,Je),_e.write_shift(1,tt.type),_e.write_shift(1,tt.color),_e.write_shift(-4,tt.L),_e.write_shift(-4,tt.R),_e.write_shift(-4,tt.C),tt.clsid)_e.write_shift(16,tt.clsid,"hex");else for($e=0;$e<4;++$e)_e.write_shift(4,0);_e.write_shift(4,tt.state||0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,tt.start),_e.write_shift(4,tt.size),_e.write_shift(4,0)}for(ke=1;ke<Ae.FileIndex.length;++ke)if(tt=Ae.FileIndex[ke],tt.size>=4096)if(_e.l=tt.start+1<<9,sn&&Buffer.isBuffer(tt.content))tt.content.copy(_e,_e.l,0,tt.size),_e.l+=tt.size+511&-512;else{for($e=0;$e<tt.size;++$e)_e.write_shift(1,tt.content[$e]);for(;$e&511;++$e)_e.write_shift(1,0)}for(ke=1;ke<Ae.FileIndex.length;++ke)if(tt=Ae.FileIndex[ke],tt.size>0&&tt.size<4096)if(sn&&Buffer.isBuffer(tt.content))tt.content.copy(_e,_e.l,0,tt.size),_e.l+=tt.size+63&-64;else{for($e=0;$e<tt.size;++$e)_e.write_shift(1,tt.content[$e]);for(;$e&63;++$e)_e.write_shift(1,0)}if(sn)_e.l=_e.length;else for(;_e.l<_e.length;)_e.write_shift(1,0);return _e}function O(Ae,Be){var we=Ae.FullPaths.map(function($e){return $e.toUpperCase()}),Ee=we.map(function($e){var Je=$e.split("/");return Je[Je.length-($e.slice(-1)=="/"?2:1)]}),_e=!1;Be.charCodeAt(0)===47?(_e=!0,Be=we[0].slice(0,-1)+Be):_e=Be.indexOf("/")!==-1;var ke=Be.toUpperCase(),We=_e===!0?we.indexOf(ke):Ee.indexOf(ke);if(We!==-1)return Ae.FileIndex[We];var st=!ke.match(J1);for(ke=ke.replace(al,""),st&&(ke=ke.replace(J1,"!")),We=0;We<we.length;++We)if((st?we[We].replace(J1,"!"):we[We]).replace(al,"")==ke||(st?Ee[We].replace(J1,"!"):Ee[We]).replace(al,"")==ke)return Ae.FileIndex[We];return null}var F=64,M=-2,Q="d0cf11e0a1b11ae1",J=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(Ae,Be,we){u();var Ee=P(Ae,we);l.writeFileSync(Be,Ee)}function z(Ae){for(var Be=new Array(Ae.length),we=0;we<Ae.length;++we)Be[we]=String.fromCharCode(Ae[we]);return Be.join("")}function G(Ae,Be){var we=P(Ae,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,we),we;case"binary":return typeof we=="string"?we:z(we);case"base64":return ty(typeof we=="string"?we:z(we));case"buffer":if(sn)return Buffer.isBuffer(we)?we:Hf(we);case"array":return typeof we=="string"?cc(we):we}return we}var ne;function R(Ae){try{var Be=Ae.InflateRaw,we=new Be;if(we._processChunk(new Uint8Array([3,0]),we._finishFlushFlag),we.bytesRead)ne=Ae;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function q(Ae,Be){if(!ne)return dr(Ae,Be);var we=ne.InflateRaw,Ee=new we,_e=Ee._processChunk(Ae.slice(Ae.l),Ee._finishFlushFlag);return Ae.l+=Ee.bytesRead,_e}function Y(Ae){return ne?ne.deflateRawSync(Ae):Re(Ae)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(Ae){var Be=(Ae<<1|Ae<<11)&139536|(Ae<<5|Ae<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ce=typeof Uint8Array<"u",ge=ce?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)ge[Fe]=oe(Fe);function re(Ae,Be){var we=ge[Ae&255];return Be<=8?we>>>8-Be:(we=we<<8|ge[Ae>>8&255],Be<=16?we>>>16-Be:(we=we<<8|ge[Ae>>16&255],we>>>24-Be))}function Ne(Ae,Be){var we=Be&7,Ee=Be>>>3;return(Ae[Ee]|(we<=6?0:Ae[Ee+1]<<8))>>>we&3}function Oe(Ae,Be){var we=Be&7,Ee=Be>>>3;return(Ae[Ee]|(we<=5?0:Ae[Ee+1]<<8))>>>we&7}function Ce(Ae,Be){var we=Be&7,Ee=Be>>>3;return(Ae[Ee]|(we<=4?0:Ae[Ee+1]<<8))>>>we&15}function fe(Ae,Be){var we=Be&7,Ee=Be>>>3;return(Ae[Ee]|(we<=3?0:Ae[Ee+1]<<8))>>>we&31}function Ie(Ae,Be){var we=Be&7,Ee=Be>>>3;return(Ae[Ee]|(we<=1?0:Ae[Ee+1]<<8))>>>we&127}function He(Ae,Be,we){var Ee=Be&7,_e=Be>>>3,ke=(1<<we)-1,We=Ae[_e]>>>Ee;return we<8-Ee||(We|=Ae[_e+1]<<8-Ee,we<16-Ee)||(We|=Ae[_e+2]<<16-Ee,we<24-Ee)||(We|=Ae[_e+3]<<24-Ee),We&ke}function Xe(Ae,Be,we){var Ee=Be&7,_e=Be>>>3;return Ee<=5?Ae[_e]|=(we&7)<<Ee:(Ae[_e]|=we<<Ee&255,Ae[_e+1]=(we&7)>>8-Ee),Be+3}function dt(Ae,Be,we){var Ee=Be&7,_e=Be>>>3;return we=(we&1)<<Ee,Ae[_e]|=we,Be+1}function Et(Ae,Be,we){var Ee=Be&7,_e=Be>>>3;return we<<=Ee,Ae[_e]|=we&255,we>>>=8,Ae[_e+1]=we,Be+8}function Tt(Ae,Be,we){var Ee=Be&7,_e=Be>>>3;return we<<=Ee,Ae[_e]|=we&255,we>>>=8,Ae[_e+1]=we&255,Ae[_e+2]=we>>>8,Be+16}function Ct(Ae,Be){var we=Ae.length,Ee=2*we>Be?2*we:Be+5,_e=0;if(we>=Be)return Ae;if(sn){var ke=B7(Ee);if(Ae.copy)Ae.copy(ke);else for(;_e<Ae.length;++_e)ke[_e]=Ae[_e];return ke}else if(ce){var We=new Uint8Array(Ee);if(We.set)We.set(Ae);else for(;_e<we;++_e)We[_e]=Ae[_e];return We}return Ae.length=Ee,Ae}function Dt(Ae){for(var Be=new Array(Ae),we=0;we<Ae;++we)Be[we]=0;return Be}function Jt(Ae,Be,we){var Ee=1,_e=0,ke=0,We=0,st=0,$e=Ae.length,Je=ce?new Uint16Array(32):Dt(32);for(ke=0;ke<32;++ke)Je[ke]=0;for(ke=$e;ke<we;++ke)Ae[ke]=0;$e=Ae.length;var tt=ce?new Uint16Array($e):Dt($e);for(ke=0;ke<$e;++ke)Je[_e=Ae[ke]]++,Ee<_e&&(Ee=_e),tt[ke]=0;for(Je[0]=0,ke=1;ke<=Ee;++ke)Je[ke+16]=st=st+Je[ke-1]<<1;for(ke=0;ke<$e;++ke)st=Ae[ke],st!=0&&(tt[ke]=Je[st+16]++);var wt=0;for(ke=0;ke<$e;++ke)if(wt=Ae[ke],wt!=0)for(st=re(tt[ke],Ee)>>Ee-wt,We=(1<<Ee+4-wt)-1;We>=0;--We)Be[st|We<<wt]=wt&15|ke<<4;return Ee}var Pt=ce?new Uint16Array(512):Dt(512),Mt=ce?new Uint16Array(32):Dt(32);if(!ce){for(var Wt=0;Wt<512;++Wt)Pt[Wt]=0;for(Wt=0;Wt<32;++Wt)Mt[Wt]=0}(function(){for(var Ae=[],Be=0;Be<32;Be++)Ae.push(5);Jt(Ae,Mt,32);var we=[];for(Be=0;Be<=143;Be++)we.push(8);for(;Be<=255;Be++)we.push(9);for(;Be<=279;Be++)we.push(7);for(;Be<=287;Be++)we.push(8);Jt(we,Pt,288)})();var Pe=function(){for(var Be=ce?new Uint8Array(32768):[],we=0,Ee=0;we<pe.length-1;++we)for(;Ee<pe[we+1];++Ee)Be[Ee]=we;for(;Ee<32768;++Ee)Be[Ee]=29;var _e=ce?new Uint8Array(259):[];for(we=0,Ee=0;we<ie.length-1;++we)for(;Ee<ie[we+1];++Ee)_e[Ee]=we;function ke(st,$e){for(var Je=0;Je<st.length;){var tt=Math.min(65535,st.length-Je),wt=Je+tt==st.length;for($e.write_shift(1,+wt),$e.write_shift(2,tt),$e.write_shift(2,~tt&65535);tt-- >0;)$e[$e.l++]=st[Je++]}return $e.l}function We(st,$e){for(var Je=0,tt=0,wt=ce?new Uint16Array(32768):[];tt<st.length;){var Ot=Math.min(65535,st.length-tt);if(Ot<10){for(Je=Xe($e,Je,+(tt+Ot==st.length)),Je&7&&(Je+=8-(Je&7)),$e.l=Je/8|0,$e.write_shift(2,Ot),$e.write_shift(2,~Ot&65535);Ot-- >0;)$e[$e.l++]=st[tt++];Je=$e.l*8;continue}Je=Xe($e,Je,+(tt+Ot==st.length)+2);for(var Vt=0;Ot-- >0;){var jt=st[tt];Vt=(Vt<<5^jt)&32767;var Lt=-1,wr=0;if((Lt=wt[Vt])&&(Lt|=tt&-32768,Lt>tt&&(Lt-=32768),Lt<tt))for(;st[Lt+wr]==st[tt+wr]&&wr<250;)++wr;if(wr>2){jt=_e[wr],jt<=22?Je=Et($e,Je,ge[jt+1]>>1)-1:(Et($e,Je,3),Je+=5,Et($e,Je,ge[jt-23]>>5),Je+=3);var Wr=jt<8?0:jt-4>>2;Wr>0&&(Tt($e,Je,wr-ie[jt]),Je+=Wr),jt=Be[tt-Lt],Je=Et($e,Je,ge[jt]>>3),Je-=3;var Xr=jt<4?0:jt-2>>1;Xr>0&&(Tt($e,Je,tt-Lt-pe[jt]),Je+=Xr);for(var tn=0;tn<wr;++tn)wt[Vt]=tt&32767,Vt=(Vt<<5^st[tt])&32767,++tt;Ot-=wr-1}else jt<=143?jt=jt+48:Je=dt($e,Je,1),Je=Et($e,Je,ge[jt]),wt[Vt]=tt&32767,++tt}Je=Et($e,Je,0)-1}return $e.l=(Je+7)/8|0,$e.l}return function($e,Je){return $e.length<8?ke($e,Je):We($e,Je)}}();function Re(Ae){var Be=At(50+Math.floor(Ae.length*1.1)),we=Pe(Ae,Be);return Be.slice(0,we)}var Te=ce?new Uint16Array(32768):Dt(32768),ot=ce?new Uint16Array(32768):Dt(32768),vt=ce?new Uint16Array(128):Dt(128),ur=1,Gt=1;function Rt(Ae,Be){var we=fe(Ae,Be)+257;Be+=5;var Ee=fe(Ae,Be)+1;Be+=5;var _e=Ce(Ae,Be)+4;Be+=4;for(var ke=0,We=ce?new Uint8Array(19):Dt(19),st=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,Je=ce?new Uint8Array(8):Dt(8),tt=ce?new Uint8Array(8):Dt(8),wt=We.length,Ot=0;Ot<_e;++Ot)We[te[Ot]]=ke=Oe(Ae,Be),$e<ke&&($e=ke),Je[ke]++,Be+=3;var Vt=0;for(Je[0]=0,Ot=1;Ot<=$e;++Ot)tt[Ot]=Vt=Vt+Je[Ot-1]<<1;for(Ot=0;Ot<wt;++Ot)(Vt=We[Ot])!=0&&(st[Ot]=tt[Vt]++);var jt=0;for(Ot=0;Ot<wt;++Ot)if(jt=We[Ot],jt!=0){Vt=ge[st[Ot]]>>8-jt;for(var Lt=(1<<7-jt)-1;Lt>=0;--Lt)vt[Vt|Lt<<jt]=jt&7|Ot<<3}var wr=[];for($e=1;wr.length<we+Ee;)switch(Vt=vt[Ie(Ae,Be)],Be+=Vt&7,Vt>>>=3){case 16:for(ke=3+Ne(Ae,Be),Be+=2,Vt=wr[wr.length-1];ke-- >0;)wr.push(Vt);break;case 17:for(ke=3+Oe(Ae,Be),Be+=3;ke-- >0;)wr.push(0);break;case 18:for(ke=11+Ie(Ae,Be),Be+=7;ke-- >0;)wr.push(0);break;default:wr.push(Vt),$e<Vt&&($e=Vt);break}var Wr=wr.slice(0,we),Xr=wr.slice(we);for(Ot=we;Ot<286;++Ot)Wr[Ot]=0;for(Ot=Ee;Ot<30;++Ot)Xr[Ot]=0;return ur=Jt(Wr,Te,286),Gt=Jt(Xr,ot,30),Be}function Vr(Ae,Be){if(Ae[0]==3&&!(Ae[1]&3))return[k0(Be),2];for(var we=0,Ee=0,_e=B7(Be||1<<18),ke=0,We=_e.length>>>0,st=0,$e=0;(Ee&1)==0;){if(Ee=Oe(Ae,we),we+=3,Ee>>>1)Ee>>1==1?(st=9,$e=5):(we=Rt(Ae,we),st=ur,$e=Gt);else{we&7&&(we+=8-(we&7));var Je=Ae[we>>>3]|Ae[(we>>>3)+1]<<8;if(we+=32,Je>0)for(!Be&&We<ke+Je&&(_e=Ct(_e,ke+Je),We=_e.length);Je-- >0;)_e[ke++]=Ae[we>>>3],we+=8;continue}for(;;){!Be&&We<ke+32767&&(_e=Ct(_e,ke+32767),We=_e.length);var tt=He(Ae,we,st),wt=Ee>>>1==1?Pt[tt]:Te[tt];if(we+=wt&15,wt>>>=4,(wt>>>8&255)===0)_e[ke++]=wt;else{if(wt==256)break;wt-=257;var Ot=wt<8?0:wt-4>>2;Ot>5&&(Ot=0);var Vt=ke+ie[wt];Ot>0&&(Vt+=He(Ae,we,Ot),we+=Ot),tt=He(Ae,we,$e),wt=Ee>>>1==1?Mt[tt]:ot[tt],we+=wt&15,wt>>>=4;var jt=wt<4?0:wt-2>>1,Lt=pe[wt];for(jt>0&&(Lt+=He(Ae,we,jt),we+=jt),!Be&&We<Vt&&(_e=Ct(_e,Vt+100),We=_e.length);ke<Vt;)_e[ke]=_e[ke-Lt],++ke}}}return Be?[_e,we+7>>>3]:[_e.slice(0,ke),we+7>>>3]}function dr(Ae,Be){var we=Ae.slice(Ae.l||0),Ee=Vr(we,Be);return Ae.l+=Ee[1],Ee[0]}function yn(Ae,Be){if(Ae)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function Qr(Ae,Be){var we=Ae;to(we,0);var Ee=[],_e=[],ke={FileIndex:Ee,FullPaths:_e};E(ke,{root:Be.root});for(var We=we.length-4;(we[We]!=80||we[We+1]!=75||we[We+2]!=5||we[We+3]!=6)&&We>=0;)--We;we.l=We+4,we.l+=4;var st=we.read_shift(2);we.l+=6;var $e=we.read_shift(4);for(we.l=$e,We=0;We<st;++We){we.l+=20;var Je=we.read_shift(4),tt=we.read_shift(4),wt=we.read_shift(2),Ot=we.read_shift(2),Vt=we.read_shift(2);we.l+=8;var jt=we.read_shift(4),Lt=o(we.slice(we.l+wt,we.l+wt+Ot));we.l+=wt+Ot+Vt;var wr=we.l;we.l=jt+4,kn(we,Je,tt,ke,Lt),we.l=wr}return ke}function kn(Ae,Be,we,Ee,_e){Ae.l+=2;var ke=Ae.read_shift(2),We=Ae.read_shift(2),st=i(Ae);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var $e=Ae.read_shift(4),Je=Ae.read_shift(4),tt=Ae.read_shift(4),wt=Ae.read_shift(2),Ot=Ae.read_shift(2),Vt="",jt=0;jt<wt;++jt)Vt+=String.fromCharCode(Ae[Ae.l++]);if(Ot){var Lt=o(Ae.slice(Ae.l,Ae.l+Ot));(Lt[21589]||{}).mt&&(st=Lt[21589].mt),((_e||{})[21589]||{}).mt&&(st=_e[21589].mt)}Ae.l+=Ot;var wr=Ae.slice(Ae.l,Ae.l+Je);switch(We){case 8:wr=q(Ae,tt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+We)}var Wr=!1;ke&8&&($e=Ae.read_shift(4),$e==134695760&&($e=Ae.read_shift(4),Wr=!0),Je=Ae.read_shift(4),tt=Ae.read_shift(4)),Je!=Be&&yn(Wr,"Bad compressed size: "+Be+" != "+Je),tt!=we&&yn(Wr,"Bad uncompressed size: "+we+" != "+tt),fn(Ee,Vt,wr,{unsafe:!0,mt:st})}function ea(Ae,Be){var we=Be||{},Ee=[],_e=[],ke=At(1),We=we.compression?8:0,st=0,$e=0,Je=0,tt=0,wt=0,Ot=Ae.FullPaths[0],Vt=Ot,jt=Ae.FileIndex[0],Lt=[],wr=0;for($e=1;$e<Ae.FullPaths.length;++$e)if(Vt=Ae.FullPaths[$e].slice(Ot.length),jt=Ae.FileIndex[$e],!(!jt.size||!jt.content||Vt=="Sh33tJ5")){var Wr=tt,Xr=At(Vt.length);for(Je=0;Je<Vt.length;++Je)Xr.write_shift(1,Vt.charCodeAt(Je)&127);Xr=Xr.slice(0,Xr.l),Lt[wt]=qbe.buf(jt.content,0);var tn=jt.content;We==8&&(tn=Y(tn)),ke=At(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,st),ke.write_shift(2,We),jt.mt?s(ke,jt.mt):ke.write_shift(4,0),ke.write_shift(-4,Lt[wt]),ke.write_shift(4,tn.length),ke.write_shift(4,jt.content.length),ke.write_shift(2,Xr.length),ke.write_shift(2,0),tt+=ke.length,Ee.push(ke),tt+=Xr.length,Ee.push(Xr),tt+=tn.length,Ee.push(tn),ke=At(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,st),ke.write_shift(2,We),ke.write_shift(4,0),ke.write_shift(-4,Lt[wt]),ke.write_shift(4,tn.length),ke.write_shift(4,jt.content.length),ke.write_shift(2,Xr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Wr),wr+=ke.l,_e.push(ke),wr+=Xr.length,_e.push(Xr),++wt}return ke=At(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,wt),ke.write_shift(2,wt),ke.write_shift(4,wr),ke.write_shift(4,tt),ke.write_shift(2,0),Di([Di(Ee),Di(_e),ke])}var or={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Zt(Ae,Be){if(Ae.ctype)return Ae.ctype;var we=Ae.name||"",Ee=we.match(/\.([^\.]+)$/);return Ee&&or[Ee[1]]||Be&&(Ee=(we=Be).match(/[\.\\]([^\.\\])+$/),Ee&&or[Ee[1]])?or[Ee[1]]:"application/octet-stream"}function Kr(Ae){for(var Be=ty(Ae),we=[],Ee=0;Ee<Be.length;Ee+=76)we.push(Be.slice(Ee,Ee+76));return we.join(`\r
`)+`\r
`}function Ms(Ae){var Be=Ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Je){var tt=Je.charCodeAt(0).toString(16).toUpperCase();return"="+(tt.length==1?"0"+tt:tt)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var we=[],Ee=Be.split(`\r
`),_e=0;_e<Ee.length;++_e){var ke=Ee[_e];if(ke.length==0){we.push("");continue}for(var We=0;We<ke.length;){var st=76,$e=ke.slice(We,We+st);$e.charAt(st-1)=="="?st--:$e.charAt(st-2)=="="?st-=2:$e.charAt(st-3)=="="&&(st-=3),$e=ke.slice(We,We+st),We+=st,We<ke.length&&($e+="="),we.push($e)}}return we.join(`\r
`)}function Aa(Ae){for(var Be=[],we=0;we<Ae.length;++we){for(var Ee=Ae[we];we<=Ae.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+Ae[++we];Be.push(Ee)}for(var _e=0;_e<Be.length;++_e)Be[_e]=Be[_e].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return cc(Be.join(`\r
`))}function Va(Ae,Be,we){for(var Ee="",_e="",ke="",We,st=0;st<10;++st){var $e=Be[st];if(!$e||$e.match(/^\s*$/))break;var Je=$e.match(/^(.*?):\s*([^\s].*)$/);if(Je)switch(Je[1].toLowerCase()){case"content-location":Ee=Je[2].trim();break;case"content-type":ke=Je[2].trim();break;case"content-transfer-encoding":_e=Je[2].trim();break}}switch(++st,_e.toLowerCase()){case"base64":We=cc(gc(Be.slice(st).join("")));break;case"quoted-printable":We=Aa(Be.slice(st));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+_e)}var tt=fn(Ae,Ee.slice(we.length),We,{unsafe:!0});ke&&(tt.ctype=ke)}function si(Ae,Be){if(z(Ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var we=Be&&Be.root||"",Ee=(sn&&Buffer.isBuffer(Ae)?Ae.toString("binary"):z(Ae)).split(`\r
`),_e=0,ke="";for(_e=0;_e<Ee.length;++_e)if(ke=Ee[_e],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),we||(we=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,we.length)!=we))for(;we.length>0&&(we=we.slice(0,we.length-1),we=we.slice(0,we.lastIndexOf("/")+1),ke.slice(0,we.length)!=we););var We=(Ee[1]||"").match(/boundary="(.*?)"/);if(!We)throw new Error("MAD cannot find boundary");var st="--"+(We[1]||""),$e=[],Je=[],tt={FileIndex:$e,FullPaths:Je};E(tt);var wt,Ot=0;for(_e=0;_e<Ee.length;++_e){var Vt=Ee[_e];Vt!==st&&Vt!==st+"--"||(Ot++&&Va(tt,Ee.slice(wt,_e),we),wt=_e)}return tt}function qt(Ae,Be){var we=Be||{},Ee=we.boundary||"SheetJS";Ee="------="+Ee;for(var _e=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],ke=Ae.FullPaths[0],We=ke,st=Ae.FileIndex[0],$e=1;$e<Ae.FullPaths.length;++$e)if(We=Ae.FullPaths[$e].slice(ke.length),st=Ae.FileIndex[$e],!(!st.size||!st.content||We=="Sh33tJ5")){We=We.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wr){return"_x"+wr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wr){return"_u"+wr.charCodeAt(0).toString(16)+"_"});for(var Je=st.content,tt=sn&&Buffer.isBuffer(Je)?Je.toString("binary"):z(Je),wt=0,Ot=Math.min(1024,tt.length),Vt=0,jt=0;jt<=Ot;++jt)(Vt=tt.charCodeAt(jt))>=32&&Vt<128&&++wt;var Lt=wt>=Ot*4/5;_e.push(Ee),_e.push("Content-Location: "+(we.root||"file:///C:/SheetJS/")+We),_e.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),_e.push("Content-Type: "+Zt(st,We)),_e.push(""),_e.push(Lt?Ms(tt):Kr(tt))}return _e.push(Ee+`--\r
`),_e.join(`\r
`)}function wn(Ae){var Be={};return E(Be,Ae),Be}function fn(Ae,Be,we,Ee){var _e=Ee&&Ee.unsafe;_e||E(Ae);var ke=!_e&&vr.find(Ae,Be);if(!ke){var We=Ae.FullPaths[0];Be.slice(0,We.length)==We?We=Be:(We.slice(-1)!="/"&&(We+="/"),We=(We+Be).replace("//","/")),ke={name:a(Be),type:2},Ae.FileIndex.push(ke),Ae.FullPaths.push(We),_e||vr.utils.cfb_gc(Ae)}return ke.content=we,ke.size=we?we.length:0,Ee&&(Ee.CLSID&&(ke.clsid=Ee.CLSID),Ee.mt&&(ke.mt=Ee.mt),Ee.ct&&(ke.ct=Ee.ct)),ke}function Vn(Ae,Be){E(Ae);var we=vr.find(Ae,Be);if(we){for(var Ee=0;Ee<Ae.FileIndex.length;++Ee)if(Ae.FileIndex[Ee]==we)return Ae.FileIndex.splice(Ee,1),Ae.FullPaths.splice(Ee,1),!0}return!1}function ta(Ae,Be,we){E(Ae);var Ee=vr.find(Ae,Be);if(Ee){for(var _e=0;_e<Ae.FileIndex.length;++_e)if(Ae.FileIndex[_e]==Ee)return Ae.FileIndex[_e].name=a(we),Ae.FullPaths[_e]=we,!0}return!1}function fa(Ae){N(Ae,!0)}return t.find=O,t.read=D,t.parse=d,t.write=G,t.writeFile=H,t.utils={cfb_new:wn,cfb_add:fn,cfb_del:Vn,cfb_mov:ta,cfb_gc:fa,ReadShift:wb,CheckField:JY,prep_blob:to,bconcat:Di,use_zlib:R,_deflateRaw:Re,_inflateRaw:dr,consts:Z},t}();function Wbe(e){return typeof e=="string"?k5(e):Array.isArray(e)?ybe(e):e}function tw(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=k5(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?rA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Wbe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=U0(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function Xbe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function bs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function P7(e,t){for(var r=[],n=bs(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function I5(e){for(var t=[],r=bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function j5(e){for(var t=[],r=bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Ybe(e){for(var t=[],r=bs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var b_=new Date(1899,11,30,0,0,0);function pi(e,t){var r=e.getTime(),n=b_.getTime()+(e.getTimezoneOffset()-b_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var IY=new Date,Jbe=b_.getTime()+(IY.getTimezoneOffset()-b_.getTimezoneOffset())*6e4,R7=IY.getTimezoneOffset();function F5(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Jbe),t.getTimezoneOffset()!==R7&&t.setTime(t.getTime()+(t.getTimezoneOffset()-R7)*6e4),t}function Zbe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var L7=new Date("2017-02-19T19:06:09.000Z"),jY=isNaN(L7.getFullYear())?new Date("2/19/17"):L7,eye=jY.getFullYear()==2017;function Da(e,t){var r=new Date(e);if(eye)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(jY.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function cp(e,t){if(sn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return rA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return rA(xY(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return rA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return rA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Pa(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Pa(e[r]));return t}function fs(e,t){for(var r="";r.length<t;)r+=e;return r}function td(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var tye=["january","february","march","april","may","june","july","august","september","october","november","december"];function jv(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&tye.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var rye=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function FY(e){return e?e.content&&e.type?cp(e.content,!0):e.data?Y1(e.data):e.asNodeBuffer&&sn?Y1(e.asNodeBuffer().toString("binary")):e.asBinary?Y1(e.asBinary()):e._data&&e._data.getContent?Y1(cp(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function OY(e){if(!e)return null;if(e.data)return S7(e.data);if(e.asNodeBuffer&&sn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?S7(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function nye(e){return e&&e.name.slice(-4)===".bin"?OY(e):FY(e)}function tu(e,t){for(var r=e.FullPaths||bs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function tO(e,t){var r=tu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ws(e,t,r){if(!r)return nye(tO(e,t));if(!t)return null;try{return Ws(e,t)}catch{return null}}function uc(e,t,r){if(!r)return FY(tO(e,t));if(!t)return null;try{return uc(e,t)}catch{return null}}function aye(e,t,r){return OY(tO(e,t))}function U7(e){for(var t=e.FullPaths||bs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Zr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return sn?n=Hf(r):n=wbe(r),vr.utils.cfb_add(e,t,n)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function rO(){return vr.utils.cfb_new()}function DY(e,t){switch(t.type){case"base64":return vr.read(e,{type:"base64"});case"binary":return vr.read(e,{type:"binary"});case"buffer":case"array":return vr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Z1(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ls=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,sye=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,M7=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,iye=/<[^>]*>/g,Vo=Ls.match(M7)?M7:iye,oye=/<\w*:/,lye=/<(\/?)\w+:/;function Rr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(sye),o=0,l="",u=0,d="",f="",m=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(m=(a=f.charCodeAt(s+1))==34||a==39?1:0,l=f.slice(s+1+m,f.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function bA(e){return e.replace(lye,"<$1")}var PY={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},nO=I5(PY),In=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,l){return PY[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),aO=/[&<>'"]/g,cye=/[\u0000-\u0008\u000b-\u001f]/g;function ua(e){var t=e+"";return t.replace(aO,function(r){return nO[r]}).replace(cye,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Q7(e){return ua(e).replace(/ /g,"_x0020_")}var RY=/[\u0000-\u001f]/g;function sO(e){var t=e+"";return t.replace(aO,function(r){return nO[r]}).replace(/\n/g,"<br/>").replace(RY,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function uye(e){var t=e+"";return t.replace(aO,function(r){return nO[r]}).replace(RY,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var H7=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function dye(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Fa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function zB(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function V7(e){var t=k0(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function z7(e){return Hf(e,"binary").toString("utf8")}var z2="foo bar baz",xa=sn&&(z7(z2)==zB(z2)&&z7||V7(z2)==zB(z2)&&V7)||zB,rA=sn?function(e){return Hf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},ny=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),LY=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),Aye=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),fye=/<\/?(?:vt:)?variant>/g,hye=/<(?:vt:)([^>]*)>([\s\S]*)</;function $7(e,t){var r=Rr(e),n=e.match(Aye(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(fye,"").match(hye);i&&a.push({v:xa(i[2]),t:i[1]})}),a}var UY=/(^\s|\s$|\n)/;function no(e,t){return"<"+e+(t.match(UY)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ay(e){return bs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ut(e,t,r){return"<"+e+(r!=null?ay(r):"")+(t!=null?(t.match(UY)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function jI(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function mye(e,t){switch(typeof e){case"string":var r=Ut("vt:lpwstr",ua(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ut((e|0)==e?"vt:i4":"vt:r8",ua(String(e)));case"boolean":return Ut("vt:bool",e?"true":"false")}if(e instanceof Date)return Ut("vt:filetime",jI(e));throw new Error("Unable to serialize "+e)}function iO(e){if(sn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return xa(U0(J6(e)));throw new Error("Bad input format: expected Buffer or string")}var sy=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,hi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Sp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ic={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function pye(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function gye(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var K7=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},G7=sn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Hf(t)})):K7(e)}:K7,q7=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(uf(e,a)));return n.join("").replace(al,"")},oO=sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(al,""):q7(e,t,r)}:q7,W7=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},MY=sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):W7(e,t,r)}:W7,X7=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Qg(e,a)));return n.join("")},rw=sn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):X7(t,r,n)}:X7,QY=function(e,t){var r=oc(e,t);return r>0?rw(e,t+4,t+4+r-1):""},HY=QY,VY=function(e,t){var r=oc(e,t);return r>0?rw(e,t+4,t+4+r-1):""},zY=VY,$Y=function(e,t){var r=2*oc(e,t);return r>0?rw(e,t+4,t+4+r-1):""},KY=$Y,GY=function(t,r){var n=oc(t,r);return n>0?oO(t,r+4,r+4+n):""},qY=GY,WY=function(e,t){var r=oc(e,t);return r>0?rw(e,t+4,t+4+r):""},XY=WY,YY=function(e,t){return pye(e,t)},y_=YY,lO=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};sn&&(HY=function(t,r){if(!Buffer.isBuffer(t))return QY(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zY=function(t,r){if(!Buffer.isBuffer(t))return VY(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},KY=function(t,r){if(!Buffer.isBuffer(t))return $Y(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},qY=function(t,r){if(!Buffer.isBuffer(t))return GY(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},XY=function(t,r){if(!Buffer.isBuffer(t))return WY(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},y_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):YY(t,r)},lO=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Qg=function(e,t){return e[t]},uf=function(e,t){return e[t+1]*256+e[t]},vye=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},oc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Bm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},xye=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function wb(e,t){var r="",n,a,s=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,sn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(uf(this,u)),u+=2;e*=2;break;case"utf8":r=rw(this,this.l,this.l+e);break;case"utf16le":e*=2,r=oO(this,this.l,this.l+e);break;case"wstr":return wb.call(this,e,"dbcs");case"lpstr-ansi":r=HY(this,this.l),e=4+oc(this,this.l);break;case"lpstr-cp":r=zY(this,this.l),e=4+oc(this,this.l);break;case"lpwstr":r=KY(this,this.l),e=4+2*oc(this,this.l);break;case"lpp4":e=4+oc(this,this.l),r=qY(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+oc(this,this.l),r=XY(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Qg(this,this.l+e++))!==0;)s.push(V2(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=uf(this,this.l+e))!==0;)s.push(V2(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Qg(this,u),this.l=u+1,o=wb.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(V2(uf(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Qg(this,u),this.l=u+1,o=wb.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(V2(Qg(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Qg(this,this.l),this.l++,n;case 2:return n=(t==="i"?vye:uf)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Bm:xye)(this,this.l),this.l+=4,n):(a=oc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=y_(this,this.l):a=y_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=MY(this,this.l,e);break}}return this.l+=e,r}var bye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},yye=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},wye=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Eye(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)wye(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,bye(this,t,this.l);break;case 8:if(n=8,r==="f"){gye(this,t,this.l);break}case 16:break;case-4:n=4,yye(this,t,this.l);break}return this.l+=n,this}function JY(e,t){var r=MY(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function to(e,t){e.l=t,e.read_shift=wb,e.chk=JY,e.write_shift=Eye}function Qo(e,t){e.l+=t}function At(e){var t=k0(e);return to(t,0),t}function Vf(e,t,r){if(e){var n,a,s;to(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=dy[o]||dy[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;l=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=l,t(d,u,o))return}}}function jl(){var e=[],t=sn?256:2048,r=function(u){var d=At(u);return to(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Di(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Bt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=dy[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&lO(r)&&e.push(r)}}function Eb(e,t,r){var n=Pa(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Y7(e,t,r){var n=Pa(e);return n.s=Eb(n.s,t.s,r),n.e=Eb(n.e,t.s,r),n}function Cb(e,t){if(e.cRel&&e.c<0)for(e=Pa(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Pa(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Fr(e);return!e.cRel&&e.cRel!=null&&(r=Sye(r)),!e.rRel&&e.rRel!=null&&(r=Cye(r)),r}function $B(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Xa(e.s.c)+":"+(e.e.cRel?"":"$")+Xa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Rs(e.s.r)+":"+(e.e.rRel?"":"$")+Rs(e.e.r):Cb(e.s,t.biff)+":"+Cb(e.e,t.biff)}function cO(e){return parseInt(_ye(e),10)-1}function Rs(e){return""+(e+1)}function Cye(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function _ye(e){return e.replace(/\$(\d+)$/,"$1")}function uO(e){for(var t=Nye(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Xa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Sye(e){return e.replace(/^([A-Z])/,"$$$1")}function Nye(e){return e.replace(/^\$([A-Z])/,"$1")}function Bye(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ya(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Fr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ol(e){var t=e.indexOf(":");return t==-1?{s:Ya(e),e:Ya(e)}:{s:Ya(e.slice(0,t)),e:Ya(e.slice(t+1))}}function Gr(e,t){return typeof t>"u"||typeof t=="number"?Gr(e.s,e.e):(typeof e!="string"&&(e=Fr(e)),typeof t!="string"&&(t=Fr(t)),e==t?e:e+":"+t)}function jn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function J7(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=mu(e.z,r?pi(t):t)}catch{}try{return e.w=mu((e.XF||{}).numFmtId||(r?14:0),r?pi(t):t)}catch{return""+t}}function Bf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?zf[e.v]||e.v:t==null?J7(e,e.v):J7(e,t))}function M0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function ZY(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ya(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=jn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},x=i+f,g=o+m;if(u.s.r>x&&(u.s.r=x),u.s.c>g&&(u.s.c=g),u.e.r<x&&(u.e.r=x),u.e.c<g&&(u.e.c=g),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Tr[14],n.cellDates?(p.t="d",p.w=mu(p.z,pi(p.v))):(p.t="n",p.v=pi(p.v),p.w=mu(p.z,p.v))):p.t="s";if(a)s[x]||(s[x]=[]),s[x][g]&&s[x][g].z&&(p.z=s[x][g].z),s[x][g]=p;else{var b=Fr({c:g,r:x});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=Gr(u)),s}function Ax(e,t){return ZY(null,e,t)}function kye(e){return e.read_shift(4,"i")}function rd(e,t){return t||(t=At(4)),t.write_shift(4,e),t}function Uo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ri(e,t){var r=!1;return t==null&&(r=!0,t=At(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Tye(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Iye(e,t){return t||(t=At(4)),t.write_shift(2,0),t.write_shift(2,0),t}function dO(e,t){var r=e.l,n=e.read_shift(1),a=Uo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(Tye(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function jye(e,t){var r=!1;return t==null&&(r=!0,t=At(15+4*e.t.length)),t.write_shift(1,0),Ri(e.t,t),r?t.slice(0,t.l):t}var Fye=dO;function Oye(e,t){var r=!1;return t==null&&(r=!0,t=At(23+4*e.t.length)),t.write_shift(1,1),Ri(e.t,t),t.write_shift(4,1),Iye({},t),r?t.slice(0,t.l):t}function vu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Np(e,t){return t==null&&(t=At(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Bp(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function kp(e,t){return t==null&&(t=At(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Dye=Uo,eJ=Ri;function AO(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function w_(e,t){var r=!1;return t==null&&(r=!0,t=At(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Pye=Uo,FI=AO,fO=w_;function hO(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?y_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Bm(t,0)>>2;return r?a/100:a}function tJ(e,t){t==null&&(t=At(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function rJ(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Rye(e,t){return t||(t=At(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Tp=rJ,fx=Rye;function Lo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function up(e,t){return(t||At(8)).write_shift(8,e,"f")}function Lye(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=zm[a];u&&(t.rgb=oy(u));break;case 2:t.rgb=oy([i,o,l]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function E_(e,t){if(t||(t=At(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Uye(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Mye(e,t){t||(t=At(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function nJ(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Qye(e){return nJ(e,1)}function Hye(e){return nJ(e,2)}var mO=2,El=3,$2=11,Z7=12,C_=19,K2=64,Vye=65,zye=71,$ye=4108,Kye=4126,ji=80,aJ=81,Gye=[ji,aJ],OI={1:{n:"CodePage",t:mO},2:{n:"Category",t:ji},3:{n:"PresentationFormat",t:ji},4:{n:"ByteCount",t:El},5:{n:"LineCount",t:El},6:{n:"ParagraphCount",t:El},7:{n:"SlideCount",t:El},8:{n:"NoteCount",t:El},9:{n:"HiddenCount",t:El},10:{n:"MultimediaClipCount",t:El},11:{n:"ScaleCrop",t:$2},12:{n:"HeadingPairs",t:$ye},13:{n:"TitlesOfParts",t:Kye},14:{n:"Manager",t:ji},15:{n:"Company",t:ji},16:{n:"LinksUpToDate",t:$2},17:{n:"CharacterCount",t:El},19:{n:"SharedDoc",t:$2},22:{n:"HyperlinksChanged",t:$2},23:{n:"AppVersion",t:El,p:"version"},24:{n:"DigSig",t:Vye},26:{n:"ContentType",t:ji},27:{n:"ContentStatus",t:ji},28:{n:"Language",t:ji},29:{n:"Version",t:ji},255:{},2147483648:{n:"Locale",t:C_},2147483651:{n:"Behavior",t:C_},1919054434:{}},DI={1:{n:"CodePage",t:mO},2:{n:"Title",t:ji},3:{n:"Subject",t:ji},4:{n:"Author",t:ji},5:{n:"Keywords",t:ji},6:{n:"Comments",t:ji},7:{n:"Template",t:ji},8:{n:"LastAuthor",t:ji},9:{n:"RevNumber",t:ji},10:{n:"EditTime",t:K2},11:{n:"LastPrinted",t:K2},12:{n:"CreatedDate",t:K2},13:{n:"ModifiedDate",t:K2},14:{n:"PageCount",t:El},15:{n:"WordCount",t:El},16:{n:"CharCount",t:El},17:{n:"Thumbnail",t:zye},18:{n:"Application",t:ji},19:{n:"DocSecurity",t:El},255:{},2147483648:{n:"Locale",t:C_},2147483651:{n:"Behavior",t:C_},1919054434:{}},e9={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},qye=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Wye(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Xye=Wye([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zm=Pa(Xye),zf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sJ={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},PI={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},G2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pO(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Yye(e){var t=pO();if(!e||!e.match)return t;var r={};if((e.match(Vo)||[]).forEach(function(n){var a=Rr(n);switch(a[0].replace(oye,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[PI[a.ContentType]]!==void 0&&t[PI[a.ContentType]].push(a.PartName);break}}),t.xmlns!==hi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function iJ(e,t){var r=Ybe(PI),n=[],a;n[n.length]=Ls,n[n.length]=Ut("Types",null,{xmlns:hi.CT,"xmlns:xsd":hi.xsd,"xmlns:xsi":hi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ut("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=Ut("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:G2[l][t.bookType]||G2[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:G2[l][t.bookType]||G2[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var dn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function iy(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function _b(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Vo)||[]).forEach(function(a){var s=Rr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Z1(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function hv(e){var t=[Ls,Ut("Relationships",null,{xmlns:hi.RELS})];return bs(e["!id"]).forEach(function(r){t[t.length]=Ut("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function oa(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[dn.HLINK,dn.XPATH,dn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var Jye="application/vnd.oasis.opendocument.spreadsheet";function Zye(e,t){for(var r=iO(e),n,a;n=sy.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Rr(n[0],!1),a.path=="/"&&a.type!==Jye)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function ewe(e){var t=[Ls];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function t9(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function twe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function rwe(e){var t=[Ls];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(t9(e[r][0],e[r][1])),t.push(twe("",e[r][0]));return t.push(t9("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function oJ(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+p_.version+"</meta:generator></office:meta></office:document-meta>"}var hu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],nwe=function(){for(var e=new Array(hu.length),t=0;t<hu.length;++t){var r=hu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function lJ(e){var t={};e=xa(e);for(var r=0;r<hu.length;++r){var n=hu[r],a=e.match(nwe[r]);a!=null&&a.length>0&&(t[n[1]]=In(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Da(t[n[1]]))}return t}function KB(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=ua(t),n[n.length]=r?Ut(e,t,r):no(e,t))}function cJ(e,t){var r=t||{},n=[Ls,Ut("cp:coreProperties",null,{"xmlns:cp":hi.CORE_PROPS,"xmlns:dc":hi.dc,"xmlns:dcterms":hi.dcterms,"xmlns:dcmitype":hi.dcmitype,"xmlns:xsi":hi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&KB("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:jI(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&KB("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:jI(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=hu.length;++s){var i=hu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&KB(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var $m=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],uJ=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function dJ(e,t,r,n){var a=[];if(typeof e=="string")a=$7(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?$7(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function awe(e,t,r){var n={};return t||(t={}),e=xa(e),$m.forEach(function(a){var s=(e.match(ny(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=In(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&dJ(n.HeadingPairs,n.TitlesOfParts,t,r),t}function AJ(e){var t=[],r=Ut;return e||(e={}),e.Application="SheetJS",t[t.length]=Ls,t[t.length]=Ut("Properties",null,{xmlns:hi.EXT_PROPS,"xmlns:vt":hi.vt}),$m.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ua(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ua(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var swe=/<[^>]+>[^<]*/g;function iwe(e,t){var r={},n="",a=e.match(swe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Rr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=In(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=In(d);break;case"bool":r[n]=Fa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Da(d);break;case"cy":case"error":r[n]=In(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function fJ(e){var t=[Ls,Ut("Properties",null,{xmlns:hi.CUST_PROPS,"xmlns:vt":hi.vt})];if(!e)return t.join("");var r=1;return bs(e).forEach(function(a){++r,t[t.length]=Ut("property",mye(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ua(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var RI={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},GB;function owe(e,t,r){GB||(GB=I5(RI)),t=GB[t]||t,e[t]=r}function lwe(e,t){var r=[];return bs(RI).map(function(n){for(var a=0;a<hu.length;++a)if(hu[a][1]==n)return hu[a];for(a=0;a<$m.length;++a)if($m[a][1]==n)return $m[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(no(RI[n[1]]||n[1],a))}}),Ut("DocumentProperties",r.join(""),{xmlns:ic.o})}function cwe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&bs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<hu.length;++i)if(s==hu[i][1])return;for(i=0;i<$m.length;++i)if(s==$m[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Ut(Q7(s),o,{"dt:dt":l}))}}),t&&bs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Ut(Q7(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ic.o+'">'+a.join("")+"</"+n+">"}function gO(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function uwe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=At(8);return i.write_shift(4,n),i.write_shift(4,a),i}function hJ(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function mJ(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function pJ(e,t,r){return t===31?mJ(e):hJ(e,t,r)}function LI(e,t,r){return pJ(e,t,r===!1?0:4)}function dwe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return pJ(e,t,0)}function Awe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(al,""),e.l-a&2&&(e.l+=2)}return r}function fwe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(al,"");return r}function hwe(e){var t=e.l,r=__(e,aJ);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=__(e,El);return[r,n]}function mwe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(hwe(e));return r}function r9(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(al,"").replace(J1,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function gJ(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function pwe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function __(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==Z7&&n!==t&&Gye.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===Z7?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return hJ(e,n,4).replace(al,"");case 31:return mJ(e);case 64:return gO(e);case 65:return gJ(e);case 71:return pwe(e);case 80:return LI(e,n,!s.raw).replace(al,"");case 81:return dwe(e,n).replace(al,"");case 4108:return mwe(e);case 4126:case 4127:return n==4127?Awe(e):fwe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function n9(e,t){var r=At(4),n=At(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=At(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=uwe(t);break;case 31:case 80:for(n=At(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Di([r,n])}function a9(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(_,S){return _[1]-S[1]});var m={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[s[i][0]];if(m[x.n]=__(e,x.t,{raw:!0}),x.p==="version"&&(m[x.n]=String(m[x.n]>>16)+"."+("0000"+String(m[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(m[x.n]){case 0:m[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zu(o=m[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[x.n])}}else if(s[i][0]===1){if(o=m.CodePage=__(e,mO),Zu(o),l!==-1){var g=e.l;e.l=s[l][1],u=r9(e,o),e.l=g}}else if(s[i][0]===0){if(o===0){l=i,e.l=s[i+1][1];continue}u=r9(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=gJ(e);break;case 30:e.l+=4,y=LI(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=LI(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Is(e,4);break;case 64:e.l+=4,y=Da(gO(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=y}}return e.l=r+n,m}var vJ=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function gwe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function s9(e,t,r){var n=At(8),a=[],s=[],i=8,o=0,l=At(8),u=At(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!t){u=At(8),u.write_shift(4,0),a.unshift(u);var d=[At(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=At(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Di(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(vJ.indexOf(e[o][0])>-1||uJ.indexOf(e[o][0])>-1)&&e[o][1]!=null){var m=e[o][1],p=0;if(t){p=+t[e[o][0]];var x=r[p];if(x.p=="version"&&typeof m=="string"){var g=m.split(".");m=(+g[0]<<16)+(+g[1]||0)}l=n9(x.t,m)}else{var b=gwe(m);b==-1&&(b=31,m=String(m)),l=n9(b,m)}s.push(l),u=At(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+l.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Di([n].concat(a).concat(s))}function i9(e,t,r){var n=e.content;if(!n)return{};to(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==vr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=a9(n,t),m={SystemIdentifier:u};for(var p in f)m[p]=f[p];if(m.FMTID=s,a===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=a9(n,null)}catch{}for(p in x)m[p]=x[p];return m.FMTID=[s,i],m}function o9(e,t,r,n,a,s){var i=At(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,vr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=s9(e,r,n);if(o.push(l),a){var u=s9(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Di(o)}function Fh(e,t){return e.read_shift(t),null}function vwe(e,t){t||(t=At(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function xwe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Is(e,t){return e.read_shift(t)===1}function Jo(e,t){return t||(t=At(2)),t.write_shift(2,+!!e),t}function Xs(e){return e.read_shift(2,"u")}function nu(e,t){return t||(t=At(2)),t.write_shift(2,e),t}function xJ(e,t){return xwe(e,t,Xs)}function bwe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function bJ(e,t,r){return r||(r=At(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function nw(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function ywe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function wwe(e){var t=e.t||"",r=At(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=At(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Di(a)}function dp(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function aw(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):dp(e,n,r)}function Ip(e,t,r){if(r.biff>5)return aw(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function yJ(e,t,r){return r||(r=At(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Ewe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Cwe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(al,"");return n&&(e.l+=24),a}function _we(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(al,"");return r+i}function Swe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Cwe(e);case"0303000000000000c000000000000046":return _we(e);default:throw new Error("Unsupported Moniker "+r)}}function q2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(al,""):"";return r}function l9(e,t){t||(t=At(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Nwe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,u="",d,f;a&16&&(s=q2(e,r-e.l)),a&128&&(i=q2(e,r-e.l)),(a&257)===257&&(o=q2(e,r-e.l)),(a&257)===1&&(l=Swe(e,r-e.l)),a&8&&(u=q2(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=gO(e)),e.l=r;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function Bwe(e){var t=At(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),l9(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&l9(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function wJ(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function EJ(e,t){var r=wJ(e);return r[3]=0,r}function yA(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Ap(e,t,r,n){return n||(n=At(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function kwe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Twe(e,t,r){return t===0?"":Ip(e,t,r)}function Iwe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function CJ(e){var t=e.read_shift(2),r=hO(e);return[t,r]}function jwe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=nw(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function O5(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function _J(e,t){return t||(t=At(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function SJ(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var Fwe=SJ;function NJ(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Owe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Dwe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function _o(e){e.l+=2,e.l+=e.read_shift(2)}var Pwe={0:_o,4:_o,5:_o,6:_o,7:Dwe,8:_o,9:_o,10:_o,11:_o,12:_o,13:Owe,14:_o,15:_o,16:_o,17:_o,18:_o,19:_o,20:_o,21:NJ};function Rwe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(Pwe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function W2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function vO(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=At(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Lwe(e,t){return t===0||e.read_shift(2),1200}function Uwe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Ip(e,0,r);return e.read_shift(t+n-e.l),a}function Mwe(e,t){var r=!t||t.biff==8,n=At(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Qwe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Hwe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=nw(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Vwe(e,t){var r=!t||t.biff>=8?2:1,n=At(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function zwe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(ywe(e));return s.Count=n,s.Unique=a,s}function $we(e,t){var r=At(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=wwe(e[a]);var s=Di([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function Kwe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Gwe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function qwe(e){var t=kwe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Wwe(e){return e.read_shift(2),e.read_shift(4)}function c9(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Xwe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Ywe(){var e=At(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Jwe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Zwe(e){var t=At(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function e2e(){}function t2e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=nw(e,0,r),n}function r2e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=At(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function n2e(e){var t=yA(e);return t.isst=e.read_shift(4),t}function a2e(e,t,r,n){var a=At(10);return Ap(e,t,n,a),a.write_shift(4,r),a}function s2e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=yA(e);r.biff==2&&e.l++;var s=aw(e,n-e.l,r);return a.val=s,a}function i2e(e,t,r,n,a){var s=!a||a.biff==8,i=At(8+ +s+(1+s)*r.length);return Ap(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function o2e(e,t,r){var n=e.read_shift(2),a=Ip(e,0,r);return[n,a]}function l2e(e,t,r,n){var a=r&&r.biff==5;n||(n=At(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var c2e=Ip;function u9(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function u2e(e,t){var r=t.biff==8||!t.biff?4:2,n=At(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function d2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=CJ(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function A2e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(CJ(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function f2e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function h2e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=qye[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function m2e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=h2e(e,t,n.fStyle,r),n}function d9(e,t,r,n){var a=r&&r.biff==5;n||(n=At(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function p2e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function g2e(e){var t=At(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function A9(e,t,r){var n=yA(e);(r.biff==2||t==9)&&++e.l;var a=bwe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function v2e(e,t,r,n,a,s){var i=At(8);return Ap(e,t,n,i),bJ(r,s,i),i}function x2e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=yA(e),a=Lo(e);return n.val=a,n}function b2e(e,t,r,n){var a=At(14);return Ap(e,t,n,a),up(r,a),a}var f9=Twe;function y2e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=dp(e,s),o=[];n>e.l;)o.push(aw(e));return[s,a,i,o]}function h9(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=jwe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var w2e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function m9(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=dp(e,i,r);a&32&&(u=w2e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:RSe(e,d,r,o);return{chKey:s,Name:u,itab:l,rgce:f}}function BJ(e,t,r){if(r.biff<8)return E2e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(Iwe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function E2e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=nw(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function C2e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=dp(e,n,r),i=dp(e,a,r);return[s,i]}function _2e(e,t,r){var n=SJ(e);e.l++;var a=e.read_shift(1);return t-=8,[LSe(e,t,r),a,n]}function p9(e,t,r){var n=Fwe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,DSe(e,t,r)]}function S2e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function N2e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=Ip(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function B2e(e,t,r){return N2e(e,t,r)}function k2e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(O5(e));return r}function T2e(e){var t=At(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)_J(e[r],t);return t}function I2e(e,t,r){if(r&&r.biff<8)return F2e(e,t,r);var n=NJ(e),a=Rwe(e,t-22,n[1]);return{cmo:n,ft:a}}var j2e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function F2e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((j2e[n]||Qo)(e,t,r)),{cmo:[a,n,s],ft:i}}function O2e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=Ewe(e,6,r);var o=e.read_shift(2);e.read_shift(2),Xs(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=dp(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function D2e(e,t){var r=O5(e);e.l+=16;var n=Nwe(e,t-24);return[r,n]}function P2e(e){var t=At(24),r=Ya(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Di([t,Bwe(e[1])])}function R2e(e,t){e.read_shift(2);var r=O5(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(al,""),[r,n]}function L2e(e){var t=e[1].Tooltip,r=At(10+2*(t.length+1));r.write_shift(2,2048);var n=Ya(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function U2e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=e9[r]||r,r=e.read_shift(2),t[1]=e9[r]||r,t}function M2e(e){return e||(e=At(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Q2e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(EJ(e));return r}function H2e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(EJ(e));return r}function V2e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function kJ(e,t,r){if(!r.cellStyles)return Qo(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function z2e(e,t){var r=At(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function $2e(e,t){var r={};return t<32||(e.l+=16,r.header=Lo(e),r.footer=Lo(e),e.l+=2),r}function K2e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function G2e(e){for(var t=At(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var q2e=yA,W2e=xJ,X2e=aw;function Y2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function J2e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=yA(e);++e.l;var a=Ip(e,t-7,r);return n.t="str",n.val=a,n}function Z2e(e){var t=yA(e);++e.l;var r=Lo(e);return t.t="n",t.val=r,t}function eEe(e,t,r){var n=At(15);return lw(n,e,t),n.write_shift(8,r,"f"),n}function tEe(e){var t=yA(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function rEe(e,t,r){var n=At(9);return lw(n,e,t),n.write_shift(2,r),n}function nEe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function aEe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function sEe(e,t,r){var n=e.l+t,a=yA(e),s=e.read_shift(2),i=dp(e,s,r);return e.l=n,a.t="str",a.val=i,a}var iEe=[2,3,48,49,131,139,140,245],UI=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=I5({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=k0(1);switch(l.type){case"base64":d=cc(gc(o));break;case"binary":d=cc(o);break;case"buffer":case"array":d=o;break}to(d,0);var f=d.read_shift(1),m=!!(f&136),p=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,b=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var S=[],B={},I=Math.min(d.length,f==2?521:b-10-(p?264:0)),D=x?32:11;d.l<I&&d[d.l]!=13;)switch(B={},B.name=ey.utils.decode(_,d.slice(d.l,d.l+D)).replace(/[\u0000\r\n].*$/g,""),d.l+=D,B.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(B.offset=d.read_shift(4)),B.len=d.read_shift(1),f==2&&(B.offset=d.read_shift(2)),B.dec=d.read_shift(1),B.name.length&&S.push(B),f!=2&&(d.l+=x?13:14),B.type){case"B":(!p||B.len!=8)&&l.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var E=0,C=0;for(u[0]=[],C=0;C!=S.length;++C)u[0][C]=S[C].name;for(;g-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],C=0,C=0;C!=S.length;++C){var N=d.slice(d.l,d.l+S[C].len);d.l+=S[C].len,to(N,0);var P=ey.utils.decode(_,N);switch(S[C].type){case"C":P.trim().length&&(u[E][C]=P.replace(/\s+$/,""));break;case"D":P.length===8?u[E][C]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):u[E][C]=P;break;case"F":u[E][C]=parseFloat(P.trim());break;case"+":case"I":u[E][C]=x?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":u[E][C]=!0;break;case"N":case"F":u[E][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][C]="##MEMO##"+(x?parseInt(P.trim(),10):N.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(u[E][C]=+P||0);break;case"@":u[E][C]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[E][C]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[E][C]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][C]=-N.read_shift(-8,"f");break;case"B":if(p&&S[C].len==8){u[E][C]=N.read_shift(8,"f");break}case"G":case"P":N.l+=S[C].len;break;case"0":if(S[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[C].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=S,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ax(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,l){try{return M0(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Zu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=jl(),f=B_(o,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),x=o["!cols"]||[],g=0,b=0,y=0,_=1;for(g=0;g<m.length;++g){if(((x[g]||{}).DBF||{}).name){m[g]=x[g].DBF.name,++y;continue}if(m[g]!=null){if(++y,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(b=0;b<1024;++b)if(m.indexOf(m[g]+"_"+b)==-1){m[g]+="_"+b;break}}}}var S=jn(o["!ref"]),B=[],I=[],D=[];for(g=0;g<=S.e.c-S.s.c;++g){var E="",C="",N=0,P=[];for(b=0;b<p.length;++b)p[b][g]!=null&&P.push(p[b][g]);if(P.length==0||m[g]==null){B[g]="?";continue}for(b=0;b<P.length;++b){switch(typeof P[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=P[b]instanceof Date?"D":"C";break;default:C="C"}N=Math.max(N,String(P[b]).length),E=E&&E!=C?"C":C}N>250&&(N=250),C=((x[g]||{}).DBF||{}).type,C=="C"&&x[g].DBF.len>N&&(N=x[g].DBF.len),E=="B"&&C=="N"&&(E="N",D[g]=x[g].DBF.dec,N=x[g].DBF.len),I[g]=E=="C"||C=="N"?N:s[E]||0,_+=I[g],B[g]=E}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*y),O.write_shift(2,_),g=0;g<4;++g)O.write_shift(4,0);for(O.write_shift(4,0|(+t[vY]||3)<<8),g=0,b=0;g<m.length;++g)if(m[g]!=null){var F=d.next(32),M=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,M,"sbcs"),F.write_shift(1,B[g]=="?"?"C":B[g],"sbcs"),F.write_shift(4,b),F.write_shift(1,I[g]||s[B[g]]||0),F.write_shift(1,D[g]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),b+=I[g]||s[B[g]]||0}var Q=d.next(264);for(Q.write_shift(4,13),g=0;g<65;++g)Q.write_shift(4,0);for(g=0;g<p.length;++g){var J=d.next(_);for(J.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(B[b]){case"L":J.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":J.write_shift(8,p[g][b]||0,"f");break;case"N":var W="0";for(typeof p[g][b]=="number"&&(W=p[g][b].toFixed(D[b]||0)),y=0;y<I[b]-W.length;++y)J.write_shift(1,32);J.write_shift(1,W,"sbcs");break;case"D":p[g][b]?(J.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),J.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),J.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):J.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(p[g][b]!=null?p[g][b]:"").slice(0,I[b]);for(J.write_shift(1,Z,"sbcs"),y=0;y<I[b]-Z.length;++y)J.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),TJ=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+bs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var x=e[p];return typeof x=="number"?N7(x):x},n=function(m,p,x){var g=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?m:N7(g)};e["|"]=254;function a(m,p){switch(p.type){case"base64":return s(gc(m),p);case"binary":return s(m,p);case"buffer":return s(sn&&Buffer.isBuffer(m)?m.toString("binary"):U0(m),p);case"array":return s(cp(m),p)}throw new Error("Unrecognized type "+p.type)}function s(m,p){var x=m.split(/[\n\r]+/),g=-1,b=-1,y=0,_=0,S=[],B=[],I=null,D={},E=[],C=[],N=[],P=0,O;for(+p.codepage>=0&&Zu(+p.codepage);y!==x.length;++y){P=0;var F=x[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),M=F.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),Q=M[0],J;if(F.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&B.push(F.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,Z=!1,H=!1,z=!1,G=-1,ne=-1;for(_=1;_<M.length;++_)switch(M[_].charAt(0)){case"A":break;case"X":b=parseInt(M[_].slice(1))-1,Z=!0;break;case"Y":for(g=parseInt(M[_].slice(1))-1,Z||(b=0),O=S.length;O<=g;++O)S[O]=[];break;case"K":J=M[_].slice(1),J.charAt(0)==='"'?J=J.slice(1,J.length-1):J==="TRUE"?J=!0:J==="FALSE"?J=!1:isNaN(td(J))?isNaN(jv(J).getDate())||(J=Da(J)):(J=td(J),I!==null&&ux(I)&&(J=F5(J))),W=!0;break;case"E":z=!0;var R=mv(M[_].slice(1),{r:g,c:b});S[g][b]=[S[g][b],R];break;case"S":H=!0,S[g][b]=[S[g][b],"S5S"];break;case"G":break;case"R":G=parseInt(M[_].slice(1))-1;break;case"C":ne=parseInt(M[_].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}if(W&&(S[g][b]&&S[g][b].length==2?S[g][b][0]=J:S[g][b]=J,I=null),H){if(z)throw new Error("SYLK shared formula cannot have own formula");var q=G>-1&&S[G][ne];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");S[g][b][1]=qJ(q[1],{r:g-G,c:b-ne})}break;case"F":var Y=0;for(_=1;_<M.length;++_)switch(M[_].charAt(0)){case"X":b=parseInt(M[_].slice(1))-1,++Y;break;case"Y":for(g=parseInt(M[_].slice(1))-1,O=S.length;O<=g;++O)S[O]=[];break;case"M":P=parseInt(M[_].slice(1))/20;break;case"F":break;case"G":break;case"P":I=B[parseInt(M[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=M[_].slice(1).split(" "),O=parseInt(N[0],10);O<=parseInt(N[1],10);++O)P=parseInt(N[2],10),C[O-1]=P===0?{hidden:!0}:{wch:P},T0(C[O-1]);break;case"C":b=parseInt(M[_].slice(1))-1,C[b]||(C[b]={});break;case"R":g=parseInt(M[_].slice(1))-1,E[g]||(E[g]={}),P>0?(E[g].hpt=P,E[g].hpx=Ov(P)):P===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}Y<1&&(I=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+F)}}return E.length>0&&(D["!rows"]=E),C.length>0&&(D["!cols"]=C),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,D]}function i(m,p){var x=a(m,p),g=x[0],b=x[1],y=Ax(g,p);return bs(b).forEach(function(_){y[_]=b[_]}),y}function o(m,p){return M0(i(m,p),p)}function l(m,p,x,g){var b="C;Y"+(x+1)+";X"+(g+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+CO(m.f,{r:x,c:g}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(m,p){p.forEach(function(x,g){var b="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=ly(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=cy(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function d(m,p){p.forEach(function(x,g){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*uy(x.hpx)+";"),b.length>2&&m.push(b+"R"+(g+1))})}function f(m,p){var x=["ID;PWXL;N;E"],g=[],b=jn(m["!ref"]),y,_=Array.isArray(m),S=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),m["!cols"]&&u(x,m["!cols"]),m["!rows"]&&d(x,m["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var B=b.s.r;B<=b.e.r;++B)for(var I=b.s.c;I<=b.e.c;++I){var D=Fr({r:B,c:I});y=_?(m[B]||[])[I]:m[D],!(!y||y.v==null&&(!y.f||y.F))&&g.push(l(y,m,B,I))}return x.join(S)+S+g.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),IJ=function(){function e(s,i){switch(i.type){case"base64":return t(gc(s),i);case"binary":return t(s,i);case"buffer":return t(sn&&Buffer.isBuffer(s)?s.toString("binary"):U0(s),i);case"array":return t(cp(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),p=m[0],x=m[1];++d;for(var g=o[d]||"";(g.match(/["]/g)||[]).length&1&&d<o.length-1;)g+=`
`+o[++d];switch(g=g.trim(),+p){case-1:if(g==="BOT"){f[++l]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[l][u]=!0:g==="FALSE"?f[l][u]=!1:isNaN(td(x))?isNaN(jv(x).getDate())?f[l][u]=x:f[l][u]=Da(x):f[l][u]=td(x),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[l][u++]=g!==""?g:null;break}if(g==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return Ax(e(s,i),i)}function n(s,i){return M0(r(s,i),i)}var a=function(){var s=function(l,u,d,f,m){l.push(u),l.push(d+","+f),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=jn(l["!ref"]),f,m=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var g=Fr({r:p,c:x});if(f=m?(l[p]||[])[x]:l[g],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=mu(f.z||Tr[14],pi(Da(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,_=u.join(y);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),jJ=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),x=-1,g=-1,b=0,y=[];b!==p.length;++b){var _=p[b].trim().split(":");if(_[0]==="cell"){var S=Ya(_[1]);if(y.length<=S.r)for(x=y.length;x<=S.r;++x)y[x]||(y[x]=[]);switch(x=S.r,g=S.c,_[2]){case"t":y[x][g]=e(_[3]);break;case"v":y[x][g]=+_[3];break;case"vtf":var B=_[_.length-1];case"vtc":switch(_[3]){case"nl":y[x][g]=!!+_[4];break;default:y[x][g]=+_[4];break}_[2]=="vtf"&&(y[x][g]=[y[x][g],B])}}}return m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),y}function n(f,m){return Ax(r(f,m),m)}function a(f,m){return M0(n(f,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],x,g="",b=Ol(f["!ref"]),y=Array.isArray(f),_=b.s.r;_<=b.e.r;++_)for(var S=b.s.c;S<=b.e.c;++S)if(g=Fr({r:_,c:S}),x=y?(f[_]||[])[S]:f[g],!(!x||x.v==null||x.t==="z")){switch(p=["cell",g,"t"],x.t){case"s":case"str":p.push(t(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=t(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var B=pi(Da(x.v));p[2]="vtc",p[3]="nd",p[4]=""+B,p[5]=x.w||mu(x.z||Tr[14],B);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[s,i,o,i,u(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Fv=function(){function e(d,f,m,p,x){x.raw?f[m][p]=d:d===""||(d==="TRUE"?f[m][p]=!0:d==="FALSE"?f[m][p]=!1:isNaN(td(d))?isNaN(jv(d).getDate())?f[m][p]=d:f[m][p]=Da(d):f[m][p]=td(d))}function t(d,f){var m=f||{},p=[];if(!d||d.length===0)return p;for(var x=d.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var b=10,y=0,_=0;_<=g;++_)y=x[_].indexOf(" "),y==-1?y=x[_].length:y++,b=Math.max(b,y);for(_=0;_<=g;++_){p[_]=[];var S=0;for(e(x[_].slice(0,b).trim(),p,_,S,m),S=1;S<=(x[_].length-b)/10+1;++S)e(x[_].slice(b+(S-1)*10,b+S*10).trim(),p,_,S,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},m=!1,p=0,x=0;p<d.length;++p)(x=d.charCodeAt(p))==34?m=!m:!m&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p]);if(!x.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p])}return x.sort(function(g,b){return g[0]-b[0]||n[g[1]]-n[b[1]]}),r[x.pop()[1]]||44}function s(d,f){var m=f||{},p="",x=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):m&&m.FS?p=m.FS:p=a(d.slice(0,1024));var b=0,y=0,_=0,S=0,B=0,I=p.charCodeAt(0),D=!1,E=0,C=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=m.dateNF!=null?Kbe(m.dateNF):null;function P(){var O=d.slice(S,B),F={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)F.t="z";else if(m.raw)F.t="s",F.v=O;else if(O.trim().length===0)F.t="s",F.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(F.t="s",F.v=O.slice(2,-1).replace(/""/g,'"')):y_e(O)?(F.t="n",F.f=O.slice(1)):(F.t="s",F.v=O);else if(O=="TRUE")F.t="b",F.v=!0;else if(O=="FALSE")F.t="b",F.v=!1;else if(!isNaN(_=td(O)))F.t="n",m.cellText!==!1&&(F.w=O),F.v=_;else if(!isNaN(jv(O).getDate())||N&&O.match(N)){F.z=m.dateNF||Tr[14];var M=0;N&&O.match(N)&&(O=Gbe(O,m.dateNF,O.match(N)||[]),M=1),m.cellDates?(F.t="d",F.v=Da(O,M)):(F.t="n",F.v=pi(Da(O,M))),m.cellText!==!1&&(F.w=mu(F.z,F.v instanceof Date?pi(F.v):F.v)),m.cellNF||delete F.z}else F.t="s",F.v=O;if(F.t=="z"||(m.dense?(x[b]||(x[b]=[]),x[b][y]=F):x[Fr({c:y,r:b})]=F),S=B+1,C=d.charCodeAt(S),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==I)++y;else if(y=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;B<d.length;++B)switch(E=d.charCodeAt(B)){case 34:C===34&&(D=!D);break;case I:case 10:case 13:if(!D&&P())break e;break}return B-S>0&&P(),x["!ref"]=Gr(g),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Ax(t(d,f),f)}function o(d,f){var m="",p=f.type=="string"?[0,0,0,0]:jO(d,f);switch(f.type){case"base64":m=gc(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof ey<"u"||(m=sn&&Buffer.isBuffer(d)?d.toString("binary"):U0(d));break;case"array":m=cp(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=xa(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=xa(m):f.type=="binary"&&typeof ey<"u",m.slice(0,19)=="socialcalc:version:"?jJ.to_sheet(f.type=="string"?m:xa(m),f):i(m,f)}function l(d,f){return M0(o(d,f),f)}function u(d){for(var f=[],m=jn(d["!ref"]),p,x=Array.isArray(d),g=m.s.r;g<=m.e.r;++g){for(var b=[],y=m.s.c;y<=m.e.c;++y){var _=Fr({r:g,c:y});if(p=x?(d[g]||[])[y]:d[_],!p||p.v==null){b.push("          ");continue}for(var S=(p.w||(Bf(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";b.push(S+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function oEe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=TJ.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Fv.to_workbook(e,t)}}var Km=function(){function e(R,q,Y){if(R){to(R,R.l||0);for(var te=Y.Enum||G;R.l<R.length;){var ie=R.read_shift(2),pe=te[ie]||te[65535],oe=R.read_shift(2),ce=R.l+oe,ge=pe.f&&pe.f(R,oe,Y);if(R.l=ce,q(ge,pe,ie))return}}}function t(R,q){switch(q.type){case"base64":return r(cc(gc(R)),q);case"binary":return r(cc(R),q);case"buffer":case"array":return r(R,q)}throw"Unsupported type "+q.type}function r(R,q){if(!R)return R;var Y=q||{},te=Y.dense?[]:{},ie="Sheet1",pe="",oe=0,ce={},ge=[],Fe=[],re={s:{r:0,c:0},e:{r:0,c:0}},Ne=Y.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)Y.Enum=G,e(R,function(Ie,He,Xe){switch(Xe){case 0:Y.vers=Ie,Ie>=4096&&(Y.qpro=!0);break;case 6:re=Ie;break;case 204:Ie&&(pe=Ie);break;case 222:pe=Ie;break;case 15:case 51:Y.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=Y.dateNF||Tr[14],Y.cellDates&&(Ie[1].t="d",Ie[1].v=F5(Ie[1].v))),Y.qpro&&Ie[3]>oe&&(te["!ref"]=Gr(re),ce[ie]=te,ge.push(ie),te=Y.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie=pe||"Sheet"+(oe+1),pe="");var dt=Y.dense?(te[Ie[0].r]||[])[Ie[0].c]:te[Fr(Ie[0])];if(dt){dt.t=Ie[1].t,dt.v=Ie[1].v,Ie[1].z!=null&&(dt.z=Ie[1].z),Ie[1].f!=null&&(dt.f=Ie[1].f);break}Y.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Fr(Ie[0])]=Ie[1];break}},Y);else if(R[2]==26||R[2]==14)Y.Enum=ne,R[2]==14&&(Y.qpro=!0,R.l=0),e(R,function(Ie,He,Xe){switch(Xe){case 204:ie=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>oe&&(te["!ref"]=Gr(re),ce[ie]=te,ge.push(ie),te=Y.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},oe=Ie[3],ie="Sheet"+(oe+1)),Ne>0&&Ie[0].r>=Ne)break;Y.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Fr(Ie[0])]=Ie[1],re.e.c<Ie[0].c&&(re.e.c=Ie[0].c),re.e.r<Ie[0].r&&(re.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(Fe[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:Fe[Ie[0]]=Ie[1],Ie[0]==oe&&(ie=Ie[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(te["!ref"]=Gr(re),ce[pe||ie]=te,ge.push(pe||ie),!Fe.length)return{SheetNames:ge,Sheets:ce};for(var Oe={},Ce=[],fe=0;fe<Fe.length;++fe)ce[ge[fe]]?(Ce.push(Fe[fe]||ge[fe]),Oe[Fe[fe]]=ce[Fe[fe]]||ce[ge[fe]]):(Ce.push(Fe[fe]),Oe[Fe[fe]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:Oe}}function n(R,q){var Y=q||{};if(+Y.codepage>=0&&Zu(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var te=jl(),ie=jn(R["!ref"]),pe=Array.isArray(R),oe=[];Qt(te,0,s(1030)),Qt(te,6,l(ie));for(var ce=Math.min(ie.e.r,8191),ge=ie.s.r;ge<=ce;++ge)for(var Fe=Rs(ge),re=ie.s.c;re<=ie.e.c;++re){ge===ie.s.r&&(oe[re]=Xa(re));var Ne=oe[re]+Fe,Oe=pe?(R[ge]||[])[re]:R[Ne];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?Qt(te,13,p(ge,re,Oe.v)):Qt(te,14,g(ge,re,Oe.v));else{var Ce=Bf(Oe);Qt(te,15,f(ge,re,Ce.slice(0,239)))}}return Qt(te,1),te.end()}function a(R,q){var Y=q||{};if(+Y.codepage>=0&&Zu(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var te=jl();Qt(te,0,i(R));for(var ie=0,pe=0;ie<R.SheetNames.length;++ie)(R.Sheets[R.SheetNames[ie]]||{})["!ref"]&&Qt(te,27,z(R.SheetNames[ie],pe++));var oe=0;for(ie=0;ie<R.SheetNames.length;++ie){var ce=R.Sheets[R.SheetNames[ie]];if(!(!ce||!ce["!ref"])){for(var ge=jn(ce["!ref"]),Fe=Array.isArray(ce),re=[],Ne=Math.min(ge.e.r,8191),Oe=ge.s.r;Oe<=Ne;++Oe)for(var Ce=Rs(Oe),fe=ge.s.c;fe<=ge.e.c;++fe){Oe===ge.s.r&&(re[fe]=Xa(fe));var Ie=re[fe]+Ce,He=Fe?(ce[Oe]||[])[fe]:ce[Ie];if(!(!He||He.t=="z"))if(He.t=="n")Qt(te,23,P(Oe,fe,oe,He.v));else{var Xe=Bf(He);Qt(te,22,E(Oe,fe,oe,Xe.slice(0,239)))}}++oe}}return Qt(te,1),te.end()}function s(R){var q=At(2);return q.write_shift(2,R),q}function i(R){var q=At(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var Y=0,te=0,ie=0,pe=0;pe<R.SheetNames.length;++pe){var oe=R.SheetNames[pe],ce=R.Sheets[oe];if(!(!ce||!ce["!ref"])){++ie;var ge=Ol(ce["!ref"]);Y<ge.e.r&&(Y=ge.e.r),te<ge.e.c&&(te=ge.e.c)}}return Y>8191&&(Y=8191),q.write_shift(2,Y),q.write_shift(1,ie),q.write_shift(1,te),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function o(R,q,Y){var te={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&Y.qpro?(te.s.c=R.read_shift(1),R.l++,te.s.r=R.read_shift(2),te.e.c=R.read_shift(1),R.l++,te.e.r=R.read_shift(2),te):(te.s.c=R.read_shift(2),te.s.r=R.read_shift(2),q==12&&Y.qpro&&(R.l+=2),te.e.c=R.read_shift(2),te.e.r=R.read_shift(2),q==12&&Y.qpro&&(R.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(R){var q=At(8);return q.write_shift(2,R.s.c),q.write_shift(2,R.s.r),q.write_shift(2,R.e.c),q.write_shift(2,R.e.r),q}function u(R,q,Y){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(te[0].c=R.read_shift(1),te[3]=R.read_shift(1),te[0].r=R.read_shift(2),R.l+=2):(te[2]=R.read_shift(1),te[0].c=R.read_shift(2),te[0].r=R.read_shift(2)),te}function d(R,q,Y){var te=R.l+q,ie=u(R,q,Y);if(ie[1].t="s",Y.vers==20768){R.l++;var pe=R.read_shift(1);return ie[1].v=R.read_shift(pe,"utf8"),ie}return Y.qpro&&R.l++,ie[1].v=R.read_shift(te-R.l,"cstr"),ie}function f(R,q,Y){var te=At(7+Y.length);te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var pe=Y.charCodeAt(ie);te.write_shift(1,pe>=128?95:pe)}return te.write_shift(1,0),te}function m(R,q,Y){var te=u(R,q,Y);return te[1].v=R.read_shift(2,"i"),te}function p(R,q,Y){var te=At(7);return te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(2,Y,"i"),te}function x(R,q,Y){var te=u(R,q,Y);return te[1].v=R.read_shift(8,"f"),te}function g(R,q,Y){var te=At(13);return te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(8,Y,"f"),te}function b(R,q,Y){var te=R.l+q,ie=u(R,q,Y);if(ie[1].v=R.read_shift(8,"f"),Y.qpro)R.l=te;else{var pe=R.read_shift(2);B(R.slice(R.l,R.l+pe),ie),R.l+=pe}return ie}function y(R,q,Y){var te=q&32768;return q&=-32769,q=(te?R:0)+(q>=8192?q-16384:q),(te?"":"$")+(Y?Xa(q):Rs(q))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(R,q){to(R,0);for(var Y=[],te=0,ie="",pe="",oe="",ce="";R.l<R.length;){var ge=R[R.l++];switch(ge){case 0:Y.push(R.read_shift(8,"f"));break;case 1:pe=y(q[0].c,R.read_shift(2),!0),ie=y(q[0].r,R.read_shift(2),!1),Y.push(pe+ie);break;case 2:{var Fe=y(q[0].c,R.read_shift(2),!0),re=y(q[0].r,R.read_shift(2),!1);pe=y(q[0].c,R.read_shift(2),!0),ie=y(q[0].r,R.read_shift(2),!1),Y.push(Fe+re+":"+pe+ie)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(R.read_shift(2));break;case 6:{for(var Ne="";ge=R[R.l++];)Ne+=String.fromCharCode(ge);Y.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ce=Y.pop(),oe=Y.pop(),Y.push(["AND","OR"][ge-20]+"("+oe+","+ce+")");break;default:if(ge<32&&S[ge])ce=Y.pop(),oe=Y.pop(),Y.push(oe+S[ge]+ce);else if(_[ge]){if(te=_[ge][1],te==69&&(te=R[R.l++]),te>Y.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+Y.join("|")+"|");return}var Oe=Y.slice(-te);Y.length-=te,Y.push(_[ge][0]+"("+Oe.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}Y.length==1?q[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function I(R){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=R.read_shift(2),q[3]=R[R.l++],q[0].c=R[R.l++],q}function D(R,q){var Y=I(R);return Y[1].t="s",Y[1].v=R.read_shift(q-4,"cstr"),Y}function E(R,q,Y,te){var ie=At(6+te.length);ie.write_shift(2,R),ie.write_shift(1,Y),ie.write_shift(1,q),ie.write_shift(1,39);for(var pe=0;pe<te.length;++pe){var oe=te.charCodeAt(pe);ie.write_shift(1,oe>=128?95:oe)}return ie.write_shift(1,0),ie}function C(R,q){var Y=I(R);Y[1].v=R.read_shift(2);var te=Y[1].v>>1;if(Y[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Y[1].v=te,Y}function N(R,q){var Y=I(R),te=R.read_shift(4),ie=R.read_shift(4),pe=R.read_shift(2);if(pe==65535)return te===0&&ie===3221225472?(Y[1].t="e",Y[1].v=15):te===0&&ie===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var oe=pe&32768;return pe=(pe&32767)-16446,Y[1].v=(1-oe*2)*(ie*Math.pow(2,pe+32)+te*Math.pow(2,pe)),Y}function P(R,q,Y,te){var ie=At(14);if(ie.write_shift(2,R),ie.write_shift(1,Y),ie.write_shift(1,q),te==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var pe=0,oe=0,ce=0,ge=0;return te<0&&(pe=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),ge=te>>>0,(ge&2147483648)==0&&(te/=2,++oe,ge=te>>>0),te-=ge,ge|=2147483648,ge>>>=0,te*=Math.pow(2,32),ce=te>>>0,ie.write_shift(4,ce),ie.write_shift(4,ge),oe+=16383+(pe?32768:0),ie.write_shift(2,oe),ie}function O(R,q){var Y=N(R);return R.l+=q-14,Y}function F(R,q){var Y=I(R),te=R.read_shift(4);return Y[1].v=te>>6,Y}function M(R,q){var Y=I(R),te=R.read_shift(8,"f");return Y[1].v=te,Y}function Q(R,q){var Y=M(R);return R.l+=q-10,Y}function J(R,q){return R[R.l+q-1]==0?R.read_shift(q,"cstr"):""}function W(R,q){var Y=R[R.l++];Y>q-1&&(Y=q-1);for(var te="";te.length<Y;)te+=String.fromCharCode(R[R.l++]);return te}function Z(R,q,Y){if(!(!Y.qpro||q<21)){var te=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ie=R.read_shift(q-21,"cstr");return[te,ie]}}function H(R,q){for(var Y={},te=R.l+q;R.l<te;){var ie=R.read_shift(2);if(ie==14e3){for(Y[ie]=[0,""],Y[ie][0]=R.read_shift(2);R[R.l];)Y[ie][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return Y}function z(R,q){var Y=At(5+R.length);Y.write_shift(2,14e3),Y.write_shift(2,q);for(var te=0;te<R.length;++te){var ie=R.charCodeAt(te);Y[Y.l++]=ie>127?95:ie}return Y[Y.l++]=0,Y}var G={0:{n:"BOF",f:Xs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},ne={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function lEe(e){var t={},r=e.match(Vo),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Rr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=W6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var cEe=function(){var e=ny("t"),t=ny("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:In(i[1])},l=s.match(t);return l&&(o.s=lEe(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),uEe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),dEe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,AEe=/<(?:\w+:)?r>/,fEe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function xO(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=In(xa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=xa(e),r&&(n.h=sO(n.t))):e.match(AEe)&&(n.r=xa(e),n.t=In(xa((e.replace(fEe,"").match(dEe)||[]).join("").replace(Vo,""))),r&&(n.h=uEe(cEe(n.r)))),n):{t:""}}var hEe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,mEe=/<(?:\w+:)?(?:si|sstItem)>/g,pEe=/<\/(?:\w+:)?(?:si|sstItem)>/;function gEe(e,t){var r=[],n="";if(!e)return r;var a=e.match(hEe);if(a){n=a[2].replace(mEe,"").split(pEe);for(var s=0;s!=n.length;++s){var i=xO(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Rr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var vEe=/^\s|\s$|[\t\n\r]/;function FJ(e,t){if(!t.bookSST)return"";var r=[Ls];r[r.length]=Ut("sst",null,{xmlns:Sp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(vEe)&&(s+=' xml:space="preserve"'),s+=">"+ua(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function xEe(e){return[e.read_shift(4),e.read_shift(4)]}function bEe(e,t){var r=[],n=!1;return Vf(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function yEe(e,t){return t||(t=At(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var wEe=jye;function EEe(e){var t=jl();Bt(t,159,yEe(e));for(var r=0;r<e.length;++r)Bt(t,19,wEe(e[r]));return Bt(t,160),t.end()}function OJ(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function gf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function CEe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=gf(e,4),t.U=gf(e,4),t.W=gf(e,4),t}function _Ee(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function SEe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(_Ee(e));return t}function NEe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function BEe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=gf(e,4),t.U=gf(e,4),t.W=gf(e,4),t}function kEe(e){var t=BEe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function DJ(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function PJ(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function TEe(e){var t=gf(e);switch(t.Minor){case 2:return[t.Minor,IEe(e)];case 3:return[t.Minor,jEe()];case 4:return[t.Minor,FEe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function IEe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=DJ(e,r),a=PJ(e,e.length-e.l);return{t:"Std",h:n,v:a}}function jEe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function FEe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Vo,function(s){var i=Rr(s);switch(bA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function OEe(e,t){var r={},n=r.EncryptionVersionInfo=gf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=DJ(e,a),t-=a,r.EncryptionVerifier=PJ(e,t),r}function DEe(e){var t={},r=t.EncryptionVersionInfo=gf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function bO(e){var t=0,r,n=OJ(e),a=n.length+1,s,i,o,l,u;for(r=k0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var RJ=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=OJ(i),l=s(o),u=o.length,d=k0(16),f=0;f!=16;++f)d[f]=0;var m,p,x;for((u&1)===1&&(m=l>>8,d[u]=a(e[0],m),--u,m=l&255,p=o[o.length-1],d[u]=a(p,m));u>0;)--u,m=l>>8,d[u]=a(o[u],m),--u,m=l&255,d[u]=a(o[u],m);for(u=15,x=15-o.length;x>0;)m=l>>8,d[u]=a(e[x],m),--u,--x,m=l&255,d[u]=a(o[u],m),--u,--x;return d}}(),PEe=function(e,t,r,n,a){a||(a=t),n||(n=RJ(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},REe=function(e){var t=0,r=RJ(e);return function(n){var a=PEe("",n,t,r);return t=a[1],a[0]}};function LEe(e,t,r,n){var a={key:Xs(e),verificationBytes:Xs(e)};return r.password&&(a.verifier=bO(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=REe(r.password)),a}function UEe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=DEe(e):n.Data=OEe(e,t),n}function MEe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?UEe(e,t-2,n):LEe(e,r.biff>=8?t:t-2,r,n),n}var LJ=function(){function e(a,s){switch(s.type){case"base64":return t(gc(a),s);case"binary":return t(a,s);case"buffer":return t(sn&&Buffer.isBuffer(a)?a.toString("binary"):U0(a),s);case"array":return t(cp(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var m=/\\\w+\b/g,p=0,x,g=-1;x=m.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(p,m.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][g]=y:o[Fr({r:f,c:g})]=y}break}p=m.lastIndex}g>u.e.c&&(u.e.c=g)}),o["!ref"]=Gr(u),o}function r(a,s){return M0(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=jn(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Fr({r:u,c:d});o=l?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Bf(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function QEe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function oy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function HEe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function VEe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function S_(e,t){if(t===0)return e;var r=HEe(QEe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),oy(VEe(r))}var UJ=6,zEe=15,$Ee=1,Fo=UJ;function ly(e){return Math.floor((e+Math.round(128/Fo)/256)*Fo)}function cy(e){return Math.floor((e-5)/Fo*100+.5)/100}function N_(e){return Math.round((e*Fo+5)/Fo*256)/256}function qB(e){return N_(cy(ly(e)))}function yO(e){var t=Math.abs(e-qB(e)),r=Fo;if(t>.005)for(Fo=$Ee;Fo<zEe;++Fo)Math.abs(e-qB(e))<=t&&(t=Math.abs(e-qB(e)),r=Fo);Fo=r}function T0(e){e.width?(e.wpx=ly(e.width),e.wch=cy(e.wpx),e.MDW=Fo):e.wpx?(e.wch=cy(e.wpx),e.width=N_(e.wch),e.MDW=Fo):typeof e.wch=="number"&&(e.width=N_(e.wch),e.wpx=ly(e.width),e.MDW=Fo),e.customWidth&&delete e.customWidth}var KEe=96,MJ=KEe;function uy(e){return e*96/MJ}function Ov(e){return e*MJ/96}var GEe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function qEe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(Vo)||[]).forEach(function(i){var o=Rr(i);switch(bA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Fa(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Fa(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function WEe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(Vo)||[]).forEach(function(i){var o=Rr(i);switch(bA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function XEe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(Vo)||[]).forEach(function(i){var o=Rr(i);switch(bA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=xa(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Fa(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Fa(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Fa(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Fa(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Fa(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Fa(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Fa(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=W6[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Fa(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=zm[a.color.index];a.color.index==81&&(l=zm[1]),l||(l=zm[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=S_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function YEe(e,t,r){t.NumberFmt=[];for(var n=bs(Tr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Tr[n[a]];var s=e[0].match(Vo);if(s)for(a=0;a<s.length;++a){var i=Rr(s[a]);switch(bA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=In(xa(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}pf(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function JEe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Ut("numFmt",null,{numFmtId:n,formatCode:ua(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Ut("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var X2=["numFmtId","fillId","fontId","borderId","xfId"],Y2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ZEe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(Vo)||[]).forEach(function(s){var i=Rr(s),o=0;switch(bA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<X2.length;++o)n[X2[o]]&&(n[X2[o]]=parseInt(n[X2[o]],10));for(o=0;o<Y2.length;++o)n[Y2[o]]&&(n[Y2[o]]=Fa(n[Y2[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Fa(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function eCe(e){var t=[];return t[t.length]=Ut("cellXfs",null),e.forEach(function(r){t[t.length]=Ut("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Ut("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var tCe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&YEe(f,d,u),(f=o.match(a))&&XEe(f,d,l,u),(f=o.match(n))&&WEe(f,d,l,u),(f=o.match(s))&&qEe(f,d,l,u),(f=o.match(r))&&ZEe(f,d,u),d}}();function QJ(e,t){var r=[Ls,Ut("styleSheet",null,{xmlns:Sp[0],"xmlns:vt":hi.vt})],n;return e.SSF&&(n=JEe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=eCe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function rCe(e,t){var r=e.read_shift(2),n=Uo(e);return[r,n]}function nCe(e,t,r){r||(r=At(6+4*t.length)),r.write_shift(2,e),Ri(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function aCe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Uye(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=Lye(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Uo(e),n}function sCe(e,t){t||(t=At(153)),t.write_shift(2,e.sz*20),Mye(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),E_(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ri(e.name,t),t.length>t.l?t.slice(0,t.l):t}var iCe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],WB,oCe=Qo;function g9(e,t){t||(t=At(84)),WB||(WB=I5(iCe));var r=WB[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(E_({auto:1},t),E_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function lCe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function HJ(e,t,r){r||(r=At(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function y1(e,t){return t||(t=At(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var cCe=Qo;function uCe(e,t){return t||(t=At(51)),t.write_shift(1,0),y1(null,t),y1(null,t),y1(null,t),y1(null,t),y1(null,t),t.length>t.l?t.slice(0,t.l):t}function dCe(e,t){return t||(t=At(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),w_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function ACe(e,t,r){var n=At(2052);return n.write_shift(4,e),w_(t,n),w_(r,n),n.length>n.l?n.slice(0,n.l):n}function fCe(e,t,r){var n={};n.NumberFmt=[];for(var a in Tr)n.NumberFmt[a]=Tr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Vf(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],pf(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=S_(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function hCe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Bt(e,615,rd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Bt(e,44,nCe(a,t[a]))}),Bt(e,616))}}function mCe(e){var t=1;Bt(e,611,rd(t)),Bt(e,43,sCe({sz:12,color:{theme:1},name:"Calibri",family:2})),Bt(e,612)}function pCe(e){var t=2;Bt(e,603,rd(t)),Bt(e,45,g9({patternType:"none"})),Bt(e,45,g9({patternType:"gray125"})),Bt(e,604)}function gCe(e){var t=1;Bt(e,613,rd(t)),Bt(e,46,uCe()),Bt(e,614)}function vCe(e){var t=1;Bt(e,626,rd(t)),Bt(e,47,HJ({numFmtId:0},65535)),Bt(e,627)}function xCe(e,t){Bt(e,617,rd(t.length)),t.forEach(function(r){Bt(e,47,HJ(r,0))}),Bt(e,618)}function bCe(e){var t=1;Bt(e,619,rd(t)),Bt(e,48,dCe({xfId:0,name:"Normal"})),Bt(e,620)}function yCe(e){var t=0;Bt(e,505,rd(t)),Bt(e,506)}function wCe(e){var t=0;Bt(e,508,ACe(t,"TableStyleMedium9","PivotStyleMedium4")),Bt(e,509)}function ECe(e,t){var r=jl();return Bt(r,278),hCe(r,e.SSF),mCe(r),pCe(r),gCe(r),vCe(r),xCe(r,t.cellXfs),bCe(r),yCe(r),wCe(r),Bt(r,279),r.end()}var CCe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function _Ce(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Vo)||[]).forEach(function(a){var s=Rr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[CCe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function SCe(){}function NCe(){}var BCe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,kCe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,TCe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function ICe(e,t,r){t.themeElements={};var n;[["clrScheme",BCe,_Ce],["fontScheme",kCe,SCe],["fmtScheme",TCe,NCe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var jCe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function VJ(e,t){(!e||e.length===0)&&(e=wO());var r,n={};if(!(r=e.match(jCe)))throw new Error("themeElements not found in theme");return ICe(r[0],n,t),n.raw=e,n}function wO(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ls];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function FCe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=DY(s,{type:"array"})}catch{return}var o=uc(i,"theme/theme/theme1.xml",!0);if(o)return VJ(o,r)}}function OCe(e){return e.read_shift(4)}function DCe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=PCe(e,4);break;case 2:t.xclrValue=wJ(e);break;case 3:t.xclrValue=OCe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function PCe(e,t){return Qo(e,t)}function RCe(e,t){return Qo(e,t)}function LCe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=DCe(e);break;case 6:n[1]=RCe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function UCe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(LCe(e,r-e.l));return{ixfe:n,ext:s}}function MCe(e,t){t.forEach(function(r){r[0]})}function QCe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Uo(e)}}function HCe(e){var t=At(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ri(e.name,t),t.slice(0,t.l)}function VCe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function zCe(e){var t=At(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function $Ce(e,t){var r=At(8+2*t.length);return r.write_shift(4,e),Ri(t,r),r.slice(0,r.l)}function KCe(e){return e.l+=4,e.read_shift(4)!=0}function GCe(e,t){var r=At(8);return r.write_shift(4,e),r.write_shift(4,1),r}function qCe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Vf(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function WCe(){var e=jl();return Bt(e,332),Bt(e,334,rd(1)),Bt(e,335,HCe({name:"XLDAPR",version:12e4,flags:3496657072})),Bt(e,336),Bt(e,339,$Ce(1,"XLDAPR")),Bt(e,52),Bt(e,35,rd(514)),Bt(e,4096,rd(0)),Bt(e,4097,nu(1)),Bt(e,36),Bt(e,53),Bt(e,340),Bt(e,337,GCe(1)),Bt(e,51,zCe([[1,0]])),Bt(e,338),Bt(e,333),e.end()}function XCe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(Vo,function(o){var l=Rr(o);switch(bA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function zJ(){var e=[Ls];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function YCe(e){var t=[];if(!e)return t;var r=1;return(e.match(Vo)||[]).forEach(function(n){var a=Rr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function JCe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Fr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function ZCe(e,t,r){var n=[];return Vf(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function e_e(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Vf(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function t_e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Gg=1024;function $J(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Ut("xml",null,{"xmlns:v":ic.v,"xmlns:o":ic.o,"xmlns:x":ic.x,"xmlns:mv":ic.mv}).replace(/\/>/,">"),Ut("o:shapelayout",Ut("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ut("v:shapetype",[Ut("v:stroke",null,{joinstyle:"miter"}),Ut("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Gg<e*1e3;)Gg+=1e3;return t.forEach(function(s){var i=Ya(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ut("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ut("v:fill",l,o),d={on:"t",obscured:"t"};++Gg,a=a.concat(["<v:shape"+ay({id:"_x0000_s"+Gg,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ut("v:shadow",null,d),Ut("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",no("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),no("x:AutoFill","False"),no("x:Row",String(i.r)),no("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function v9(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=Ya(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var l=jn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Gr(l);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function r_e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Rr(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Ya(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&xO(f[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function KJ(e){var t=[Ls,Ut("comments",null,{xmlns:Sp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=ua(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(ua(l.a))),s.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(no("t",ua(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(no("t",ua(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function n_e(e,t){var r=[],n=!1,a={},s=0;return e.replace(Vo,function(o,l){var u=Rr(o);switch(bA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function a_e(e,t,r){var n=[Ls,Ut("ThreadedComments",null,{xmlns:hi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Ut("threadedComment",no("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function s_e(e,t){var r=[],n=!1;return e.replace(Vo,function(s){var i=Rr(s);switch(bA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function i_e(e){var t=[Ls,Ut("personList",null,{xmlns:hi.TCMNT,"xmlns:x":Sp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Ut("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function o_e(e){var t={};t.iauthor=e.read_shift(4);var r=Tp(e);return t.rfx=r.s,t.ref=Fr(r.s),e.l+=16,t}function l_e(e,t){return t==null&&(t=At(36)),t.write_shift(4,e[1].iauthor),fx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var c_e=Uo;function u_e(e){return Ri(e.slice(0,54))}function d_e(e,t){var r=[],n=[],a={},s=!1;return Vf(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function A_e(e){var t=jl(),r=[];return Bt(t,628),Bt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Bt(t,632,u_e(a.a)))})}),Bt(t,631),Bt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ya(n[0]),e:Ya(n[0])};Bt(t,635,l_e([s,a])),a.t&&a.t.length>0&&Bt(t,637,Oye(a)),Bt(t,636),delete a.iauthor})}),Bt(t,634),Bt(t,629),t.end()}var f_e="application/vnd.ms-office.vbaProject";function h_e(e){var t=vr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");vr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),vr.write(t)}function m_e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&vr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var GJ=["xlsb","xlsm","xlam","biff8","xla"];function p_e(){return{"!type":"dialog"}}function g_e(){return{"!type":"dialog"}}function v_e(){return{"!type":"macro"}}function x_e(){return{"!type":"macro"}}var mv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,a+(o?"":"$")+Xa(d)+(l?"":"$")+Rs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),EO=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,CO=function(){return function(t,r){return t.replace(EO,function(n,a,s,i,o,l){var u=uO(i)-(s?0:r.c),d=cO(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",m=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+m})}}();function qJ(e,t){return e.replace(EO,function(r,n,a,s,i,o){return n+(a=="$"?a+s:Xa(uO(s)+t.c))+(i=="$"?i+o:Rs(cO(o)+t.r))})}function b_e(e,t,r){var n=Ol(t),a=n.s,s=Ya(r),i={r:s.r-a.r,c:s.c-a.c};return qJ(e,i)}function y_e(e){return e.length!=1}function x9(e){return e.replace(/_xlfn\./g,"")}function Gs(e){e.l+=1}function I0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function WJ(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return XJ(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=I0(e),o=I0(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function XJ(e){var t=I0(e),r=I0(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function w_e(e,t,r){if(r.biff<8)return XJ(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=I0(e),i=I0(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function YJ(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return E_e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=I0(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function E_e(e){var t=I0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function C_e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function __e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return S_e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function S_e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function N_e(e,t,r){var n=(e[e.l++]&96)>>5,a=WJ(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function B_e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=WJ(e,s,r);return[n,a,i]}function k_e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function T_e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function I_e(e,t,r){var n=(e[e.l++]&96)>>5,a=w_e(e,t-1,r);return[n,a]}function j_e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function b9(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function F_e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function O_e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function D_e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function P_e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function R_e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function JJ(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function L_e(e){return e.read_shift(2),JJ(e)}function U_e(e){return e.read_shift(2),JJ(e)}function M_e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=YJ(e,0,r);return[n,a]}function Q_e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=__e(e,0,r);return[n,a]}function H_e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=YJ(e,0,r);return[n,a,s]}function V_e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[KSe[a],tZ[a],n]}function z_e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:$_e(e);return[a,(s[0]===0?tZ:$Se)[s[1]]]}function $_e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function K_e(e,t,r){e.l+=r&&r.biff==2?3:4}function G_e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function q_e(e){return e.l++,zf[e.read_shift(1)]}function W_e(e){return e.l++,e.read_shift(2)}function X_e(e){return e.l++,e.read_shift(1)!==0}function Y_e(e){return e.l++,Lo(e)}function J_e(e,t,r){return e.l++,nw(e,t-1,r)}function Z_e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Is(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=zf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Lo(e);break;case 2:r[1]=Ip(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function eSe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Tp:O5)(e));return a}function tSe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=Z_e(e,r.biff);return i}function rSe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function nSe(e,t,r){if(r.biff==5)return aSe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function aSe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function sSe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function iSe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function oSe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function lSe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var cSe=Qo,uSe=Qo,dSe=Qo;function sw(e,t,r){return e.l+=2,[C_e(e)]}function _O(e){return e.l+=6,[]}var ASe=sw,fSe=_O,hSe=_O,mSe=sw;function ZJ(e){return e.l+=2,[Xs(e),e.read_shift(2)&1]}var pSe=sw,gSe=ZJ,vSe=_O,xSe=sw,bSe=sw,ySe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function wSe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=ySe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function ESe(e){return e.l+=2,[e.read_shift(4)]}function CSe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function _Se(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function SSe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function NSe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function BSe(e){return e.l+=4,[0,0]}var y9={1:{n:"PtgExp",f:G_e},2:{n:"PtgTbl",f:dSe},3:{n:"PtgAdd",f:Gs},4:{n:"PtgSub",f:Gs},5:{n:"PtgMul",f:Gs},6:{n:"PtgDiv",f:Gs},7:{n:"PtgPower",f:Gs},8:{n:"PtgConcat",f:Gs},9:{n:"PtgLt",f:Gs},10:{n:"PtgLe",f:Gs},11:{n:"PtgEq",f:Gs},12:{n:"PtgGe",f:Gs},13:{n:"PtgGt",f:Gs},14:{n:"PtgNe",f:Gs},15:{n:"PtgIsect",f:Gs},16:{n:"PtgUnion",f:Gs},17:{n:"PtgRange",f:Gs},18:{n:"PtgUplus",f:Gs},19:{n:"PtgUminus",f:Gs},20:{n:"PtgPercent",f:Gs},21:{n:"PtgParen",f:Gs},22:{n:"PtgMissArg",f:Gs},23:{n:"PtgStr",f:J_e},26:{n:"PtgSheet",f:CSe},27:{n:"PtgEndSheet",f:_Se},28:{n:"PtgErr",f:q_e},29:{n:"PtgBool",f:X_e},30:{n:"PtgInt",f:W_e},31:{n:"PtgNum",f:Y_e},32:{n:"PtgArray",f:j_e},33:{n:"PtgFunc",f:V_e},34:{n:"PtgFuncVar",f:z_e},35:{n:"PtgName",f:rSe},36:{n:"PtgRef",f:M_e},37:{n:"PtgArea",f:N_e},38:{n:"PtgMemArea",f:sSe},39:{n:"PtgMemErr",f:cSe},40:{n:"PtgMemNoMem",f:uSe},41:{n:"PtgMemFunc",f:iSe},42:{n:"PtgRefErr",f:oSe},43:{n:"PtgAreaErr",f:k_e},44:{n:"PtgRefN",f:Q_e},45:{n:"PtgAreaN",f:I_e},46:{n:"PtgMemAreaN",f:SSe},47:{n:"PtgMemNoMemN",f:NSe},57:{n:"PtgNameX",f:nSe},58:{n:"PtgRef3d",f:H_e},59:{n:"PtgArea3d",f:B_e},60:{n:"PtgRefErr3d",f:lSe},61:{n:"PtgAreaErr3d",f:T_e},255:{}},kSe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},TSe={1:{n:"PtgElfLel",f:ZJ},2:{n:"PtgElfRw",f:xSe},3:{n:"PtgElfCol",f:ASe},6:{n:"PtgElfRwV",f:bSe},7:{n:"PtgElfColV",f:mSe},10:{n:"PtgElfRadical",f:pSe},11:{n:"PtgElfRadicalS",f:vSe},13:{n:"PtgElfColS",f:fSe},15:{n:"PtgElfColSV",f:hSe},16:{n:"PtgElfRadicalLel",f:gSe},25:{n:"PtgList",f:wSe},29:{n:"PtgSxName",f:ESe},255:{}},ISe={0:{n:"PtgAttrNoop",f:BSe},1:{n:"PtgAttrSemi",f:R_e},2:{n:"PtgAttrIf",f:D_e},4:{n:"PtgAttrChoose",f:F_e},8:{n:"PtgAttrGoto",f:O_e},16:{n:"PtgAttrSum",f:K_e},32:{n:"PtgAttrBaxcel",f:b9},33:{n:"PtgAttrBaxcel",f:b9},64:{n:"PtgAttrSpace",f:L_e},65:{n:"PtgAttrSpaceSemi",f:U_e},128:{n:"PtgAttrIfError",f:P_e},255:{}};function iw(e,t,r,n){if(n.biff<8)return Qo(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=tSe(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=eSe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(Qo(e,t)),s}function ow(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=y9[s]||y9[kSe[s]],(s===24||s===25)&&(a=(s===24?TSe:ISe)[e[e.l+1]]),!a||!a.f?Qo(e,t):i.push([a.n,a.f(e,t,r)]);return i}function jSe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var FSe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function OSe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function eZ(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function w9(e,t,r){var n=eZ(e,t,r);return n=="#REF"?n:OSe(n,r)}function To(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,m=0,p,x="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,_=e[0].length;y<_;++y){var S=e[0][y];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=fs(" ",e[0][g][1][1]);break;case 1:b=fs("\r",e[0][g][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}u=u+b,g=-1}o.push(u+FSe[S[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Eb(S[1][1],i,a),o.push(Cb(d,s));break;case"PtgRefN":d=r?Eb(S[1][1],r,a):S[1][1],o.push(Cb(d,s));break;case"PtgRef3d":f=S[1][1],d=Eb(S[1][2],i,a),x=w9(n,f,a),o.push(x+"!"+Cb(d,s));break;case"PtgFunc":case"PtgFuncVar":var B=S[1][0],I=S[1][1];B||(B=0),B&=127;var D=B==0?[]:o.slice(-B);o.length-=B,I==="User"&&(I=D.shift()),o.push(I+"("+D.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=Y7(S[1][1],r?{s:r}:i,a),o.push($B(p,a));break;case"PtgArea":p=Y7(S[1][1],i,a),o.push($B(p,a));break;case"PtgArea3d":f=S[1][1],p=S[1][2],x=w9(n,f,a),o.push(x+"!"+$B(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=S[1][2];var E=(n.names||[])[m-1]||(n[0]||[])[m],C=E?E.Name:"SH33TJSNAME"+String(m);C&&C.slice(0,6)=="_xlfn."&&!a.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var N=S[1][1];m=S[1][2];var P;if(a.biff<=5)N<0&&(N=-N),n[N]&&(P=n[N][m]);else{var O="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][m]&&n[N][m].itab>0&&(O=n.SheetNames[n[N][m].itab-1]+"!"):O=n.SheetNames[m-1]+"!"),n[N]&&n[N][m])O+=n[N][m].Name;else if(n[0]&&n[0][m])O+=n[0][m].Name;else{var F=(eZ(n,N,a)||"").split(";;");F[m-1]?O=F[m-1]:O+="SH33TJSERRX"}o.push(O);break}P||(P={Name:"SH33TJSERRY"}),o.push(P.Name);break;case"PtgParen":var M="(",Q=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:M=fs(" ",e[0][g][1][1])+M;break;case 3:M=fs("\r",e[0][g][1][1])+M;break;case 4:Q=fs(" ",e[0][g][1][1])+Q;break;case 5:Q=fs("\r",e[0][g][1][1])+Q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(M+o.pop()+Q);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var J={c:r.c,r:r.r};if(n.sharedf[Fr(d)]){var W=n.sharedf[Fr(d)];o.push(To(W,i,J,n,a))}else{var Z=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(To(u[1],i,J,n,a)),Z=!0;break}Z||o.push(S[1])}break;case"PtgArray":o.push("{"+jSe(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&H.indexOf(e[0][y][0])==-1){S=e[0][g];var z=!0;switch(S[1][0]){case 4:z=!1;case 0:b=fs(" ",S[1][1]);break;case 5:z=!1;case 1:b=fs("\r",S[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((z?b:"")+o.pop()+(z?"":b)),g=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function DSe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],Qo(e,t-2)];var o=ow(e,i,r);return t!==i+a&&(s=iw(e,t-i-a,o,r)),e.l=n,[o,s]}function PSe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],Qo(e,t-2)];var o=ow(e,i,r);return t!==i+a&&(s=iw(e,t-i-a,o,r)),e.l=n,[o,s]}function RSe(e,t,r,n){var a=e.l+t,s=ow(e,n,r),i;return a!==e.l&&(i=iw(e,a-e.l,s,r)),[s,i]}function LSe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=ow(e,s,r);return s==65535?[[],Qo(e,t-2)]:(t!==s+2&&(a=iw(e,n-s-2,i,r)),[i,a])}function USe(e){var t;if(uf(e,e.l+6)!==65535)return[Lo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function MSe(e){if(e==null){var t=At(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return up(e);return up(0)}function XB(e,t,r){var n=e.l+t,a=yA(e);r.biff==2&&++e.l;var s=USe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=PSe(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function QSe(e,t,r,n,a){var s=Ap(t,r,a),i=MSe(e.v),o=At(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=At(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Di([s,i,o,u]);return f}function D5(e,t,r){var n=e.read_shift(4),a=ow(e,n,r),s=e.read_shift(4),i=s>0?iw(e,s,a,r):null;return[a,i]}var HSe=D5,P5=D5,VSe=D5,zSe=D5,$Se={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},tZ={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},KSe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function E9(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function GSe(e){var t="of:="+e.replace(EO,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function YB(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function qSe(e){return e.replace(/\./,"!")}var Sb={},pv={},Nb=typeof Map<"u";function SO(e,t,r){var n=0,a=e.length;if(r){if(Nb?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=Nb?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Nb?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function R5(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Fo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=cy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=N_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Gm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Q0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){pf(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function rZ(e,t,r,n,a,s){try{n.cellNF&&(e.z=Tr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Da(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Tr[t]==null&&pf($be[t]||"General",t),e.t==="e")e.w=e.w||zf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ry(e.v);else if(e.t==="d"){var i=pi(e.v);(i|0)===i?e.w=i.toString(10):e.w=ry(i)}else{if(e.v===void 0)return"";e.w=lp(e.v,pv)}else e.t==="d"?e.w=mu(t,pi(e.v),pv):e.w=mu(t,e.v,pv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=S_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=S_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function WSe(e,t,r){if(e&&e["!ref"]){var n=jn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function XSe(e,t){var r=jn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Gr(r))}var YSe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,JSe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ZSe=/<(?:\w:)?hyperlink [^>]*>/mg,e5e=/"(\w*:\w*)"/,t5e=/<(?:\w:)?col\b[^>]*[\/]?>/g,r5e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,n5e=/<(?:\w:)?pageMargins[^>]*\/>/g,nZ=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,a5e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,s5e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function i5e(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(JSe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var m=u.match(nZ);m?NO(m[0],o,a,r):(m=u.match(a5e))&&l5e(m[0],m[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var x=u.slice(p,p+50).match(e5e);x&&XSe(o,x[1])}var g=u.match(s5e);g&&g[1]&&y5e(g[1],a);var b=[];if(t.cellStyles){var y=u.match(t5e);y&&p5e(b,y)}f&&C5e(f[1],o,t,l,s,i);var _=d.match(r5e);_&&(o["!autofilter"]=v5e(_[0]));var S=[],B=d.match(YSe);if(B)for(p=0;p!=B.length;++p)S[p]=jn(B[p].slice(B[p].indexOf('"')+1));var I=d.match(ZSe);I&&f5e(o,I,n);var D=d.match(n5e);if(D&&(o["!margins"]=h5e(Rr(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Gr(l)),t.sheetRows>0&&o["!ref"]){var E=jn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Gr(E))}return b.length>0&&(o["!cols"]=b),S.length>0&&(o["!merges"]=S),o}function o5e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Gr(e[r])+'"/>';return t+"</mergeCells>"}function NO(e,t,r,n){var a=Rr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=In(xa(a.codeName)))}function l5e(e,t,r,n,a){NO(e.slice(0,e.indexOf(">")),r,n,a)}function c5e(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=rA(ua(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ut("outlinePr",null,u)}!s&&!o||(a[a.length]=Ut("sheetPr",o,i))}var u5e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],d5e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function A5e(e){var t={sheet:1};return u5e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),d5e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=bO(e.password).toString(16).toUpperCase()),Ut("sheetProtection",null,t)}function f5e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Rr(xa(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+In(s.location))):(s.Target="#"+In(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=jn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Fr({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function h5e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function m5e(e){return Gm(e),Ut("pageMargins",null,e)}function p5e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Rr(t[n],!0);a.hidden&&(a.hidden=Fa(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,yO(a.width)),T0(a);s<=i;)e[s++]=Pa(a)}}function g5e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Ut("col",null,R5(a,n)));return r[r.length]="</cols>",r.join("")}function v5e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function x5e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Gr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Ol(a);i.s.r==i.e.r&&(i.e.r=Ol(t["!ref"]).e.r,a=Gr(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ut("autoFilter",null,{ref:a})}var b5e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function y5e(e,t){t.Views||(t.Views=[{}]),(e.match(b5e)||[]).forEach(function(r,n){var a=Rr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Fa(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function w5e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ut("sheetViews",Ut("sheetView",null,a),{})}function E5e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=zf[e.v];break;case"d":n&&n.cellDates?a=Da(e.v,-1).toISOString():(e=Pa(e),e.t="n",a=""+(e.v=pi(Da(e.v)))),typeof e.z>"u"&&(e.z=Tr[14]);break;default:a=e.v;break}var o=no("v",ua(a)),l={r:t},u=Q0(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=no("v",""+SO(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ut("f",ua(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Ut("c",o,l)}var C5e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=ny("v"),i=ny("f");return function(l,u,d,f,m,p){for(var x=0,g="",b=[],y=[],_=0,S=0,B=0,I="",D,E,C=0,N=0,P,O,F=0,M=0,Q=Array.isArray(p.CellXf),J,W=[],Z=[],H=Array.isArray(u),z=[],G={},ne=!1,R=!!d.sheetStubs,q=l.split(t),Y=0,te=q.length;Y!=te;++Y){g=q[Y].trim();var ie=g.length;if(ie!==0){var pe=0;e:for(x=0;x<ie;++x)switch(g[x]){case">":if(g[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(E=Rr(g.slice(pe,x),!0),C=E.r!=null?parseInt(E.r,10):C+1,N=-1,d.sheetRows&&d.sheetRows<C)continue;G={},ne=!1,E.ht&&(ne=!0,G.hpt=parseFloat(E.ht),G.hpx=Ov(G.hpt)),E.hidden=="1"&&(ne=!0,G.hidden=!0),E.outlineLevel!=null&&(ne=!0,G.level=+E.outlineLevel),ne&&(z[C-1]=G)}break;case"<":pe=x;break}if(pe>=x)break;if(E=Rr(g.slice(pe,x),!0),C=E.r!=null?parseInt(E.r,10):C+1,N=-1,!(d.sheetRows&&d.sheetRows<C)){f.s.r>C-1&&(f.s.r=C-1),f.e.r<C-1&&(f.e.r=C-1),d&&d.cellStyles&&(G={},ne=!1,E.ht&&(ne=!0,G.hpt=parseFloat(E.ht),G.hpx=Ov(G.hpt)),E.hidden=="1"&&(ne=!0,G.hidden=!0),E.outlineLevel!=null&&(ne=!0,G.level=+E.outlineLevel),ne&&(z[C-1]=G)),b=g.slice(x).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),x=0;x!=b.length;++x)if(g=b[x].trim(),g.length!==0){if(y=g.match(r),_=x,S=0,B=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(_=0,I=y[1],S=0;S!=I.length&&!((B=I.charCodeAt(S)-64)<1||B>26);++S)_=26*_+B;--_,N=_}else++N;for(S=0;S!=g.length&&g.charCodeAt(S)!==62;++S);if(++S,E=Rr(g.slice(0,S),!0),E.r||(E.r=Fr({r:C-1,c:N})),I=g.slice(S),D={t:""},(y=I.match(s))!=null&&y[1]!==""&&(D.v=In(y[1])),d.cellFormula){if((y=I.match(i))!=null&&y[1]!==""){if(D.f=In(xa(y[1])).replace(/\r\n/g,`
`),d.xlfn||(D.f=x9(D.f)),y[0].indexOf('t="array"')>-1)D.F=(I.match(a)||[])[1],D.F.indexOf(":")>-1&&W.push([jn(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){O=Rr(y[0]);var ce=In(xa(y[1]));d.xlfn||(ce=x9(ce)),Z[parseInt(O.si,10)]=[O,ce,E.r]}}else(y=I.match(/<f[^>]*\/>/))&&(O=Rr(y[0]),Z[O.si]&&(D.f=b_e(Z[O.si][1],Z[O.si][2],E.r)));var ge=Ya(E.r);for(S=0;S<W.length;++S)ge.r>=W[S][0].s.r&&ge.r<=W[S][0].e.r&&ge.c>=W[S][0].s.c&&ge.c<=W[S][0].e.c&&(D.F=W[S][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(R)D.t="z";else continue;else D.t=E.t||"n";switch(f.s.c>N&&(f.s.c=N),f.e.c<N&&(f.e.c=N),D.t){case"n":if(D.v==""||D.v==null){if(!R)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!R)continue;D.t="z"}else P=Sb[parseInt(D.v,10)],D.v=P.t,D.r=P.r,d.cellHTML&&(D.h=P.h);break;case"str":D.t="s",D.v=D.v!=null?xa(D.v):"",d.cellHTML&&(D.h=sO(D.v));break;case"inlineStr":y=I.match(n),D.t="s",y!=null&&(P=xO(y[1]))?(D.v=P.t,d.cellHTML&&(D.h=P.h)):D.v="";break;case"b":D.v=Fa(D.v);break;case"d":d.cellDates?D.v=Da(D.v,1):(D.v=pi(Da(D.v,1)),D.t="n");break;case"e":(!d||d.cellText!==!1)&&(D.w=D.v),D.v=sJ[D.v];break}if(F=M=0,J=null,Q&&E.s!==void 0&&(J=p.CellXf[E.s],J!=null&&(J.numFmtId!=null&&(F=J.numFmtId),d.cellStyles&&J.fillId!=null&&(M=J.fillId))),rZ(D,F,M,d,m,p),d.cellDates&&Q&&D.t=="n"&&ux(Tr[F])&&(D.t="d",D.v=F5(D.v)),E.cm&&d.xlmeta){var Fe=(d.xlmeta.Cell||[])[+E.cm-1];Fe&&Fe.type=="XLDAPR"&&(D.D=!0)}if(H){var re=Ya(E.r);u[re.r]||(u[re.r]=[]),u[re.r][re.c]=D}else u[E.r]=D}}}}z.length>0&&(u["!rows"]=z)}}();function _5e(e,t,r,n){var a=[],s=[],i=jn(e["!ref"]),o="",l,u="",d=[],f=0,m=0,p=e["!rows"],x=Array.isArray(e),g={r:u},b,y=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Xa(m);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Rs(f),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var _=x?(e[f]||[])[m]:e[l];_!==void 0&&(o=E5e(_,l,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(g={r:u},p&&p[f]&&(b=p[f],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=uy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),a[a.length]=Ut("row",s.join(""),g))}if(p)for(;f<p.length;++f)p&&p[f]&&(g={r:f+1},b=p[f],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=uy(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),a[a.length]=Ut("row","",g));return a.join("")}function aZ(e,t,r,n){var a=[Ls,Ut("worksheet",null,{xmlns:Sp[0],"xmlns:r":hi.r})],s=r.SheetNames[e],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=jn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Gr(d)}n||(n={}),l["!comments"]=[];var f=[];c5e(l,r,e,t,a),a[a.length]=Ut("dimension",null,{ref:u}),a[a.length]=w5e(l,t,e,r),t.sheetFormat&&(a[a.length]=Ut("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=g5e(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=_5e(l,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=A5e(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=x5e(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=o5e(l["!merges"]));var m=-1,p,x=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(x=oa(n,-1,ua(g[1].Target).replace(/#.*$/,""),dn.HLINK),p["r:id"]="rId"+x),(m=g[1].Target.indexOf("#"))>-1&&(p.location=ua(g[1].Target.slice(m+1))),g[1].Tooltip&&(p.tooltip=ua(g[1].Tooltip)),a[a.length]=Ut("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=m5e(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=no("ignoredErrors",Ut("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=oa(n,-1,"../drawings/drawing"+(e+1)+".xml",dn.DRAW),a[a.length]=Ut("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=oa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",dn.VML),a[a.length]=Ut("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function S5e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function N5e(e,t,r){var n=At(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=uy(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Fr(u)];x&&(f<0&&(f=p),m=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,m))}var g=n.l;return n.l=l,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function B5e(e,t,r,n){var a=N5e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Bt(e,0,a)}var k5e=Tp,T5e=fx;function I5e(){}function j5e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Dye(e),r}function F5e(e,t,r){r==null&&(r=At(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return E_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),eJ(e,r),r.slice(0,r.l)}function O5e(e){var t=vu(e);return[t]}function D5e(e,t,r){return r==null&&(r=At(8)),Np(t,r)}function P5e(e){var t=Bp(e);return[t]}function R5e(e,t,r){return r==null&&(r=At(4)),kp(t,r)}function L5e(e){var t=vu(e),r=e.read_shift(1);return[t,r,"b"]}function U5e(e,t,r){return r==null&&(r=At(9)),Np(t,r),r.write_shift(1,e.v?1:0),r}function M5e(e){var t=Bp(e),r=e.read_shift(1);return[t,r,"b"]}function Q5e(e,t,r){return r==null&&(r=At(5)),kp(t,r),r.write_shift(1,e.v?1:0),r}function H5e(e){var t=vu(e),r=e.read_shift(1);return[t,r,"e"]}function V5e(e,t,r){return r==null&&(r=At(9)),Np(t,r),r.write_shift(1,e.v),r}function z5e(e){var t=Bp(e),r=e.read_shift(1);return[t,r,"e"]}function $5e(e,t,r){return r==null&&(r=At(8)),kp(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function K5e(e){var t=vu(e),r=e.read_shift(4);return[t,r,"s"]}function G5e(e,t,r){return r==null&&(r=At(12)),Np(t,r),r.write_shift(4,t.v),r}function q5e(e){var t=Bp(e),r=e.read_shift(4);return[t,r,"s"]}function W5e(e,t,r){return r==null&&(r=At(8)),kp(t,r),r.write_shift(4,t.v),r}function X5e(e){var t=vu(e),r=Lo(e);return[t,r,"n"]}function Y5e(e,t,r){return r==null&&(r=At(16)),Np(t,r),up(e.v,r),r}function sZ(e){var t=Bp(e),r=Lo(e);return[t,r,"n"]}function J5e(e,t,r){return r==null&&(r=At(12)),kp(t,r),up(e.v,r),r}function Z5e(e){var t=vu(e),r=hO(e);return[t,r,"n"]}function eNe(e,t,r){return r==null&&(r=At(12)),Np(t,r),tJ(e.v,r),r}function tNe(e){var t=Bp(e),r=hO(e);return[t,r,"n"]}function rNe(e,t,r){return r==null&&(r=At(8)),kp(t,r),tJ(e.v,r),r}function nNe(e){var t=vu(e),r=dO(e);return[t,r,"is"]}function aNe(e){var t=vu(e),r=Uo(e);return[t,r,"str"]}function sNe(e,t,r){return r==null&&(r=At(12+4*e.v.length)),Np(t,r),Ri(e.v,r),r.length>r.l?r.slice(0,r.l):r}function iNe(e){var t=Bp(e),r=Uo(e);return[t,r,"str"]}function oNe(e,t,r){return r==null&&(r=At(8+4*e.v.length)),kp(t,r),Ri(e.v,r),r.length>r.l?r.slice(0,r.l):r}function lNe(e,t,r){var n=e.l+t,a=vu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=P5(e,n-e.l,r);i[3]=To(o,null,a,r.supbooks,r)}else e.l=n;return i}function cNe(e,t,r){var n=e.l+t,a=vu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=P5(e,n-e.l,r);i[3]=To(o,null,a,r.supbooks,r)}else e.l=n;return i}function uNe(e,t,r){var n=e.l+t,a=vu(e);a.r=r["!row"];var s=Lo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=P5(e,n-e.l,r);i[3]=To(o,null,a,r.supbooks,r)}else e.l=n;return i}function dNe(e,t,r){var n=e.l+t,a=vu(e);a.r=r["!row"];var s=Uo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=P5(e,n-e.l,r);i[3]=To(o,null,a,r.supbooks,r)}else e.l=n;return i}var ANe=Tp,fNe=fx;function hNe(e,t){return t==null&&(t=At(4)),t.write_shift(4,e),t}function mNe(e,t){var r=e.l+t,n=Tp(e),a=AO(e),s=Uo(e),i=Uo(e),o=Uo(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function pNe(e,t){var r=At(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));fx({s:Ya(e[0]),e:Ya(e[0])},r),fO("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Ri(a||"",r),Ri(e[1].Tooltip||"",r),Ri("",r),r.slice(0,r.l)}function gNe(){}function vNe(e,t,r){var n=e.l+t,a=rJ(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=HSe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function xNe(e,t,r){var n=e.l+t,a=Tp(e),s=[a];if(r.cellFormula){var i=zSe(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function bNe(e,t,r){r==null&&(r=At(18));var n=R5(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var iZ=["left","right","top","bottom","header","footer"];function yNe(e){var t={};return iZ.forEach(function(r){t[r]=Lo(e)}),t}function wNe(e,t){return t==null&&(t=At(48)),Gm(e),iZ.forEach(function(r){up(e[r],t)}),t}function ENe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function CNe(e,t,r){r==null&&(r=At(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function _Ne(e){var t=At(24);return t.write_shift(4,4),t.write_shift(4,1),fx(e,t),t}function SNe(e,t){return t==null&&(t=At(66)),t.write_shift(2,e.password?bO(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function NNe(){}function BNe(){}function kNe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,x,g,b,y,_,S,B,I,D=[];o.biff=12,o["!row"]=0;var E=0,C=!1,N=[],P={},O=o.supbooks||a.supbooks||[[]];if(O.sharedf=P,O.arrayf=N,O.SheetNames=a.SheetNames||a.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=O,a.Names))for(var F=0;F<a.Names.length;++F)O[0][F+1]=a.Names[F];var M=[],Q=[],J=!1;dy[16]={n:"BrtShortReal",f:sZ};var W;if(Vf(e,function(z,G,ne){if(!m)switch(ne){case 148:u=z;break;case 0:p=z,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),B=Rs(b=p.r),o["!row"]=p.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=Ov(z.hpt)),Q[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:z[2]},z[2]){case"n":x.v=z[1];break;case"s":S=Sb[z[1]],x.v=S.t,x.r=S.r;break;case"b":x.v=!!z[1];break;case"e":x.v=z[1],o.cellText!==!1&&(x.w=zf[x.v]);break;case"str":x.t="s",x.v=z[1];break;case"is":x.t="s",x.v=z[1].t;break}if((g=i.CellXf[z[0].iStyleRef])&&rZ(x,g.numFmtId,null,o,s,i),y=z[0].c==-1?y+1:z[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=x):l[Xa(y)+B]=x,o.cellFormula){for(C=!1,E=0;E<N.length;++E){var R=N[E];p.r>=R[0].s.r&&p.r<=R[0].e.r&&y>=R[0].s.c&&y<=R[0].e.c&&(x.F=Gr(R[0]),C=!0)}!C&&z.length>3&&(x.f=z[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&g&&x.t=="n"&&ux(Tr[g.numFmtId])){var q=jm(x.v);q&&(x.t="d",x.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}W&&(W.type=="XLDAPR"&&(x.D=!0),W=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},y=z[0].c==-1?y+1:z[0].c,o.dense?(l[b]||(l[b]=[]),l[b][y]=x):l[Xa(y)+B]=x,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),W&&(W.type=="XLDAPR"&&(x.D=!0),W=void 0);break;case 176:D.push(z);break;case 49:W=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var Y=n["!id"][z.relId];for(Y?(z.Target=Y.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=Y):z.relId==""&&(z.Target="#"+z.loc),b=z.rfx.s.r;b<=z.rfx.e.r;++b)for(y=z.rfx.s.c;y<=z.rfx.e.c;++y)o.dense?(l[b]||(l[b]=[]),l[b][y]||(l[b][y]={t:"z",v:void 0}),l[b][y].l=z):(_=Fr({c:y,r:b}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=z);break;case 426:if(!o.cellFormula)break;N.push(z),I=o.dense?l[b][y]:l[Xa(y)+B],I.f=To(z[1],d,{r:p.r,c:y},O,o),I.F=Gr(z[0]);break;case 427:if(!o.cellFormula)break;P[Fr(z[0].s)]=z[1],I=o.dense?l[b][y]:l[Xa(y)+B],I.f=To(z[1],d,{r:p.r,c:y},O,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)M[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},J||(J=!0,yO(z.w/256)),T0(M[z.e+1]);break;case 161:l["!autofilter"]={ref:Gr(z)};break;case 476:l["!margins"]=z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),z.name&&(a.Sheets[r].CodeName=z.name),(z.above||z.left)&&(l["!outline"]={above:z.above,left:z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!G.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ne.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Gr(u||d)),o.sheetRows&&l["!ref"]){var Z=jn(l["!ref"]);o.sheetRows<=+Z.e.r&&(Z.e.r=o.sheetRows-1,Z.e.r>d.e.r&&(Z.e.r=d.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>d.e.c&&(Z.e.c=d.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Gr(Z))}return D.length>0&&(l["!merges"]=D),M.length>0&&(l["!cols"]=M),Q.length>0&&(l["!rows"]=Q),l}function TNe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Pa(t),t.z=t.z||Tr[14],t.v=pi(Da(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=Q0(a.cellXfs,t,a),t.l&&s["!links"].push([Fr(l),t.l]),t.c&&s["!comments"].push([Fr(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=SO(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?Bt(e,18,W5e(t,l)):Bt(e,7,G5e(t,l))):(l.t="str",i?Bt(e,17,oNe(t,l)):Bt(e,6,sNe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Bt(e,13,rNe(t,l)):Bt(e,2,eNe(t,l)):i?Bt(e,16,J5e(t,l)):Bt(e,5,Y5e(t,l)),!0;case"b":return l.t="b",i?Bt(e,15,Q5e(t,l)):Bt(e,4,U5e(t,l)),!0;case"e":return l.t="e",i?Bt(e,14,$5e(t,l)):Bt(e,3,V5e(t,l)),!0}return i?Bt(e,12,R5e(t,l)):Bt(e,1,D5e(t,l)),!0}function INe(e,t,r,n){var a=jn(t["!ref"]||"A1"),s,i="",o=[];Bt(e,145);var l=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Rs(d),B5e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=Xa(m)),s=o[m]+i;var p=l?(t[d]||[])[m]:t[s];if(!p){f=!1;continue}f=TNe(e,p,d,m,n,t,f)}}Bt(e,146)}function jNe(e,t){!t||!t["!merges"]||(Bt(e,177,hNe(t["!merges"].length)),t["!merges"].forEach(function(r){Bt(e,176,fNe(r))}),Bt(e,178))}function FNe(e,t){!t||!t["!cols"]||(Bt(e,390),t["!cols"].forEach(function(r,n){r&&Bt(e,60,bNe(n,r))}),Bt(e,391))}function ONe(e,t){!t||!t["!ref"]||(Bt(e,648),Bt(e,649,_Ne(jn(t["!ref"]))),Bt(e,650))}function DNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=oa(r,-1,n[1].Target.replace(/#.*$/,""),dn.HLINK);Bt(e,494,pNe(n,a))}}),delete t["!links"]}function PNe(e,t,r,n){if(t["!comments"].length>0){var a=oa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",dn.VML);Bt(e,551,fO("rId"+a)),t["!legacy"]=a}}function RNe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:Gr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Ol(s);o.s.r==o.e.r&&(o.e.r=Ol(t["!ref"]).e.r,s=Gr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Bt(e,161,fx(jn(s))),Bt(e,162)}}function LNe(e,t,r){Bt(e,133),Bt(e,137,CNe(t,r)),Bt(e,138),Bt(e,134)}function UNe(e,t){t["!protect"]&&Bt(e,535,SNe(t["!protect"]))}function MNe(e,t,r,n){var a=jl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=jn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Bt(a,129),(r.vbaraw||i["!outline"])&&Bt(a,147,F5e(o,i["!outline"])),Bt(a,148,T5e(l)),LNe(a,i,r.Workbook),FNe(a,i),INe(a,i,e,t),UNe(a,i),RNe(a,i,r,e),jNe(a,i),DNe(a,i,n),i["!margins"]&&Bt(a,476,wNe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&ONe(a,i),PNe(a,i,e,n),Bt(a,130),a.end()}function QNe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=In((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function HNe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=QNe(f);d.s.r=d.s.c=0,d.e.c=o,u=Xa(o),m[0].forEach(function(p,x){i[u+Rs(x)]={t:"n",v:p,z:m[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Gr(d)),i}function VNe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(nZ);return o&&NO(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function zNe(e,t){e.l+=10;var r=Uo(e);return{name:r}}function $Ne(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Vf(e,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var BO=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],KNe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],GNe=[],qNe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function C9(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Fa(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function _9(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Fa(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function oZ(e){_9(e.WBProps,BO),_9(e.CalcPr,qNe),C9(e.WBView,KNe),C9(e.Sheets,GNe),pv.date1904=Fa(e.WBProps.date1904)}function WNe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Fa(e.Workbook.WBProps.date1904)?"true":"false"}var XNe="][*?/\\".split("");function lZ(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return XNe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function YNe(e,t,r){e.forEach(function(n,a){lZ(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function JNe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];YNe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)WSe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var ZNe=/<\w+:workbook/;function e4e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(Vo,function(l,u){var d=Rr(l);switch(bA(d[0])){case"<?xml":break;case"<workbook":l.match(ZNe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":BO.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Fa(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=xa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=In(xa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=xa(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Fa(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=In(xa(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Sp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return oZ(r),r}function cZ(e){var t=[Ls];t[t.length]=Ut("workbook",null,{xmlns:Sp[0],"xmlns:r":hi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(BO.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Ut("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:ua(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Ut("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Ut("definedName",ua(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function t4e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=FI(e),r.name=Uo(e),r}function r4e(e,t){return t||(t=At(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),fO(e.strRelID,t),Ri(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function n4e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Uo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function a4e(e,t){t||(t=At(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),eJ(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function s4e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function i4e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=Pye(e),i=VSe(e,0,r),o=AO(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function o4e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],dy[16]={n:"BrtFRTArchID$",f:s4e},Vf(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=To(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),oZ(r),r.Names=s,r.supbooks=i,r}function l4e(e,t){Bt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Bt(e,156,r4e(a))}Bt(e,144)}function c4e(e,t){t||(t=At(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ri("SheetJS",t),Ri(p_.version,t),Ri(p_.version,t),Ri("7262",t),t.length>t.l?t.slice(0,t.l):t}function u4e(e,t){t||(t=At(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function d4e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Bt(e,135),Bt(e,158,u4e(a)),Bt(e,136))}}function A4e(e,t){var r=jl();return Bt(r,131),Bt(r,128,c4e()),Bt(r,153,a4e(e.Workbook&&e.Workbook.WBProps||null)),d4e(r,e),l4e(r,e),Bt(r,132),r.end()}function f4e(e,t,r){return t.slice(-4)===".bin"?o4e(e,r):e4e(e,r)}function h4e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?kNe(e,n,r,a,s,i,o):i5e(e,n,r,a,s,i,o)}function m4e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?$Ne(e,n,r,a,s):VNe(e,n,r,a,s)}function p4e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?v_e():x_e()}function g4e(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?p_e():g_e()}function v4e(e,t,r,n){return t.slice(-4)===".bin"?fCe(e,r,n):tCe(e,r,n)}function x4e(e,t,r){return VJ(e,r)}function b4e(e,t,r){return t.slice(-4)===".bin"?bEe(e,r):gEe(e,r)}function y4e(e,t,r){return t.slice(-4)===".bin"?d_e(e,r):r_e(e,r)}function w4e(e,t,r){return t.slice(-4)===".bin"?ZCe(e):YCe(e)}function E4e(e,t,r,n){return r.slice(-4)===".bin"?e_e(e,t,r,n):void 0}function C4e(e,t,r){return t.slice(-4)===".bin"?qCe(e,t,r):XCe(e,t,r)}function _4e(e,t,r){return(t.slice(-4)===".bin"?A4e:cZ)(e)}function S4e(e,t,r,n,a){return(t.slice(-4)===".bin"?MNe:aZ)(e,r,n,a)}function N4e(e,t,r){return(t.slice(-4)===".bin"?ECe:QJ)(e,r)}function B4e(e,t,r){return(t.slice(-4)===".bin"?EEe:FJ)(e,r)}function k4e(e,t,r){return(t.slice(-4)===".bin"?A_e:KJ)(e)}function T4e(e){return(e.slice(-4)===".bin"?WCe:zJ)()}var uZ=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,dZ=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ku(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(uZ),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(dZ),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function I4e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(uZ),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(dZ),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Bb;function j4e(e,t){var r=Bb[e]||In(e);return r==="General"?lp(t):mu(r,t)}function F4e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Fa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Da(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[In(t)]=a}function O4e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||zf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ry(e.v):e.w=lp(e.v):e.w=j4e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Bb[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ux(n)){var a=jm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function D4e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=GEe[n.Pattern]||n.Pattern)}e[t.ID]=t}function P4e(e,t,r,n,a,s,i,o,l,u){var d="General",f=n.StyleID,m={};u=u||{};var p=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Fa(e);break;case"String":n.t="s",n.r=H7(In(e)),n.v=e.indexOf("<")>-1?In(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Da(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=In(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=sJ[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=H7(t||e));break}if(O4e(n,d,u),u.cellFormula!==!1)if(n.Formula){var g=In(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=mv(g,a),delete n.Formula,n.ArrayRange=="RC"?n.F=mv("RC:RC",a):n.ArrayRange&&(n.F=mv(n.ArrayRange,a),l.push([jn(n.F),n.F]))}else for(x=0;x<l.length;++x)a.r>=l[x][0].s.r&&a.r<=l[x][0].e.r&&a.c>=l[x][0].s.c&&a.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function R4e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function JB(e,t){var r=t||{};dx();var n=Y1(iO(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=xa(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Pa(r);return i.type="string",Fv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return wBe(n,r);Bb={"General Number":"General","General Date":Tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Tr[15],"Short Date":Tr[14],"Long Time":Tr[19],"Medium Time":Tr[18],"Short Time":Tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Tr[2],Standard:Tr[4],Percent:Tr[10],Scientific:Tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],m=r.dense?[]:{},p="",x={},g={},b=Ku('<Data ss:Type="String">'),y=0,_=0,S=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},I={},D={},E="",C=0,N=[],P={},O={},F=0,M=[],Q=[],J={},W=[],Z,H=!1,z=[],G=[],ne={},R=0,q=0,Y={Sheets:[],WBProps:{date1904:!1}},te={};sy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=sy.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?P4e(n.slice(y,o.index),E,b,l[l.length-1][0]=="comment"?J:x,{c:_,r:S},I,W[_],g,z,r):(E="",b=Ku(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Q.length>0&&(x.c=Q),(!r.sheetRows||r.sheetRows>S)&&x.v!==void 0&&(r.dense?(m[S]||(m[S]=[]),m[S][_]=x):m[Xa(_)+Rs(S)]=x),x.HRef&&(x.l={Target:In(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(R=_+(parseInt(x.MergeAcross,10)|0),q=S+(parseInt(x.MergeDown,10)|0),N.push({s:{c:_,r:S},e:{c:R,r:q}})),!r.sheetStubs)x.MergeAcross?_=R+1:++_;else if(x.MergeAcross||x.MergeDown){for(var pe=_;pe<=R;++pe)for(var oe=S;oe<=q;++oe)(pe>_||oe>S)&&(r.dense?(m[oe]||(m[oe]=[]),m[oe][pe]={t:"z"}):m[Xa(pe)+Rs(oe)]={t:"z"});_=R+1}else++_;else x=I4e(o[0]),x.Index&&(_=+x.Index-1),_<B.s.c&&(B.s.c=_),_>B.e.c&&(B.e.c=_),o[0].slice(-2)==="/>"&&++_,Q=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<B.s.r&&(B.s.r=S),S>B.e.r&&(B.e.r=S),o[0].slice(-2)==="/>"&&(g=Ku(o[0]),g.Index&&(S=+g.Index-1)),_=0,++S):(g=Ku(o[0]),g.Index&&(S=+g.Index-1),ne={},(g.AutoFitHeight=="0"||g.Height)&&(ne.hpx=parseInt(g.Height,10),ne.hpt=uy(ne.hpx),G[S]=ne),g.Hidden=="1"&&(ne.hidden=!0,G[S]=ne));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(m["!ref"]=Gr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(m["!fullref"]=m["!ref"],B.e.r=r.sheetRows-1,m["!ref"]=Gr(B))),N.length&&(m["!merges"]=N),W.length>0&&(m["!cols"]=W),G.length>0&&(m["!rows"]=G),d[p]=m}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=_=0,l.push([o[3],!1]),u=Ku(o[0]),p=In(u.Name),m=r.dense?[]:{},N=[],z=[],G=[],te={name:p,Hidden:0},Y.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),W=[],H=!1}break;case"style":o[1]==="/"?D4e(I,D,r):D=Ku(o[0]);break;case"numberformat":D.nf=In(Ku(o[0]).Format||"General"),Bb[D.nf]&&(D.nf=Bb[D.nf]);for(var ce=0;ce!=392&&Tr[ce]!=D.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Tr[ce]==null){pf(D.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(Z=Ku(o[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!H&&Z.wpx>10){H=!0,Fo=UJ;for(var ge=0;ge<W.length;++ge)W[ge]&&T0(W[ge])}H&&T0(Z),W[Z.Index-1||W.length]=Z;for(var Fe=0;Fe<+Z.Span;++Fe)W[W.length]=Pa(Z);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var re=Rr(o[0]),Ne={Name:re.Name,Ref:mv(re.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Ne.Sheet=Y.Sheets.length-1),Y.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(C,o.index):C=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Ku(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?owe(P,ie,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));R4e(J),Q.push(J)}else l.push([o[3],!1]),u=Ku(o[0]),J={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Oe=Ku(o[0]);m["!autofilter"]={ref:mv(Oe.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return T9(n,r);var Ce=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else F=o.index+o[0].length;break;case"header":m["!margins"]||Gm(m["!margins"]={},"xlml"),isNaN(+Rr(o[0]).Margin)||(m["!margins"].header=+Rr(o[0]).Margin);break;case"footer":m["!margins"]||Gm(m["!margins"]={},"xlml"),isNaN(+Rr(o[0]).Margin)||(m["!margins"].footer=+Rr(o[0]).Margin);break;case"pagemargins":var fe=Rr(o[0]);m["!margins"]||Gm(m["!margins"]={},"xlml"),isNaN(+fe.Top)||(m["!margins"].top=+fe.Top),isNaN(+fe.Left)||(m["!margins"].left=+fe.Left),isNaN(+fe.Right)||(m["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(m["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?F4e(O,ie,M,n.slice(F,o.index)):(M=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=Y,Ie.SSF=Pa(Tr),Ie.Props=P,Ie.Custprops=O,Ie}function MI(e,t){switch(TO(t=t||{}),t.type||"base64"){case"base64":return JB(gc(e),t);case"binary":case"buffer":case"file":return JB(e,t);case"array":return JB(U0(e),t)}}function L4e(e,t){var r=[];return e.Props&&r.push(lwe(e.Props,t)),e.Custprops&&r.push(cwe(e.Props,e.Custprops)),r.join("")}function U4e(){return""}function M4e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Ut("NumberFormat",null,{"ss:Format":ua(Tr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Ut("Style",s.join(""),i))}),Ut("Styles",r.join(""))}function AZ(e){return Ut("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+CO(e.Ref,{r:0,c:0})})}function Q4e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(AZ(a)))}return Ut("Names",r.join(""))}function H4e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(AZ(o)))}return s.join("")}function V4e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Ut("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Ut("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Ut("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Ut("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(no("ProtectContents","True")),e["!protect"].objects&&a.push(no("ProtectObjects","True")),e["!protect"].scenarios&&a.push(no("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(no("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(no("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Ut("WorksheetOptions",a.join(""),{xmlns:ic.x})}function z4e(e){return e.map(function(t){var r=dye(t.t||""),n=Ut("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ut("Comment",n,{"ss:Author":t.a})}).join("")}function $4e(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ua(CO(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=Ya(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ua(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ua(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=zf[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Tr[14]);break;case"s":f="String",m=uye(e.v||"");break}var p=Q0(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var x=e.v!=null?m:"",g=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(g+=z4e(e.c)),Ut("Cell",g,o)}function K4e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Ov(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function G4e(e,t,r,n){if(!e["!ref"])return"";var a=jn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){T0(b);var _=!!b.width,S=R5(y,b),B={"ss:Index":y+1};_&&(B["ss:Width"]=ly(S.width)),b.hidden&&(B["ss:Hidden"]="1"),o.push(Ut("Column",null,B))});for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[K4e(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:f},x=Fr(p),g=l?(e[u]||[])[f]:e[x];d.push($4e(g,x,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function q4e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?H4e(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?G4e(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(V4e(s,t,e,r)),n.join("")}function W4e(e,t){t||(t={}),e.SSF||(e.SSF=Pa(Tr)),e.SSF&&(dx(),T5(e.SSF),t.revssf=j5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Q0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(L4e(e,t)),r.push(U4e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Ut("Worksheet",q4e(n,t,e),{"ss:Name":ua(e.SheetNames[n])}));return r[2]=M4e(e,t),r[3]=Q4e(e),Ls+Ut("Workbook",r.join(""),{xmlns:ic.ss,"xmlns:o":ic.o,"xmlns:x":ic.x,"xmlns:ss":ic.ss,"xmlns:dt":ic.dt,"xmlns:html":ic.html})}function X4e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Qye(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Hye(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Y4e=[60,1084,2066,2165,2175];function J4e(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=uf(r,r.l),u=QI[l],d=0;u!=null&&Y4e.indexOf(l)>-1;)s=uf(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=QI[l=uf(r,r.l)];var f=Di(i);to(f,0);var m=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(m),m+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Vd(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Tr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||zf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ry(e.v):e.w=lp(e.v):e.w=mu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&ux(Tr[n]||String(n))){var a=jm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function J2(e,t,r){return{v:e,ixfe:t,t:r}}function Z4e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,l=[],u="",d={},f,m="",p,x,g,b,y={},_=[],S,B,I=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},N=function(Re){return Re<8?zm[Re]:Re<64&&D[Re-8]||zm[Re]},P=function(Re,Te,ot){var vt=Te.XF.data;if(!(!vt||!vt.patternType||!ot||!ot.cellStyles)){Te.s={},Te.s.patternType=vt.patternType;var ur;(ur=oy(N(vt.icvFore)))&&(Te.s.fgColor={rgb:ur}),(ur=oy(N(vt.icvBack)))&&(Te.s.bgColor={rgb:ur})}},O=function(Re,Te,ot){if(!(ne>1)&&!(ot.sheetRows&&Re.r>=ot.sheetRows)){if(ot.cellStyles&&Te.XF&&Te.XF.data&&P(Re,Te,ot),delete Te.ixfe,delete Te.XF,f=Re,m=Fr(Re),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Re.r<i.s.r&&(i.s.r=Re.r),Re.c<i.s.c&&(i.s.c=Re.c),Re.r+1>i.e.r&&(i.e.r=Re.r+1),Re.c+1>i.e.c&&(i.e.c=Re.c+1),ot.cellFormula&&Te.f){for(var vt=0;vt<_.length;++vt)if(!(_[vt][0].s.c>Re.c||_[vt][0].s.r>Re.r)&&!(_[vt][0].e.c<Re.c||_[vt][0].e.r<Re.r)){Te.F=Gr(_[vt][0]),(_[vt][0].s.c!=Re.c||_[vt][0].s.r!=Re.r)&&delete Te.f,Te.f&&(Te.f=""+To(_[vt][1],i,Re,z,F));break}}ot.dense?(a[Re.r]||(a[Re.r]=[]),a[Re.r][Re.c]=Te):a[m]=Te}},F={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(F.password=t.password);var M,Q=[],J=[],W=[],Z=[],H=!1,z=[];z.SheetNames=F.snames,z.sharedf=F.sharedf,z.arrayf=F.arrayf,z.names=[],z.XTI=[];var G=0,ne=0,R=0,q=[],Y=[],te;F.codepage=1200,Zu(1200);for(var ie=!1;e.l<e.length-1;){var pe=e.l,oe=e.read_shift(2);if(oe===0&&G===10)break;var ce=e.l===e.length?0:e.read_shift(2),ge=QI[oe];if(ge&&ge.f){if(t.bookSheets&&G===133&&oe!==133)break;if(G=oe,ge.r===2||ge.r==12){var Fe=e.read_shift(2);if(ce-=2,!F.enc&&Fe!==oe&&((Fe&255)<<8|Fe>>8)!==oe)throw new Error("rt mismatch: "+Fe+"!="+oe);ge.r==12&&(e.l+=10,ce-=10)}var re={};if(oe===10?re=ge.f(e,ce,F):re=J4e(oe,ge,e,ce,F),ne==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(oe){case 34:r.opts.Date1904=E.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(e.l=0),F.enc=re,!t.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=re;break;case 66:var Ne=Number(re);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}Zu(F.codepage=Ne),ie=!0;break;case 317:F.rrtabid=re;break;case 25:F.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:F.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(a["!type"]="dialog"),re.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),re.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:I.push(re);break;case 430:z.push([re]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(re);break;case 24:case 536:te={Name:re.Name,Ref:To(re.rgce,i,null,z,F)},re.itab>0&&(te.Sheet=re.itab-1),z.names.push(te),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(Y[re.itab-1]={ref:Gr(re.rgce[0][0][1][2])});break;case 22:F.ExternCount=re;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(re),z.XTI=z.XTI.concat(re);break;case 2196:if(F.biff<8)break;te!=null&&(te.Comment=re[1]);break;case 18:a["!protect"]=re;break;case 19:re!==0&&F.WTF&&console.error("Password verifier: "+re);break;case 133:s[re.pos]=re,F.snames.push(re.name);break;case 10:{if(--ne)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Gr(i),t.sheetRows&&t.sheetRows<=i.e.r){var Oe=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Gr(i),i.e.r=Oe}i.e.r++,i.e.c++}Q.length>0&&(a["!merges"]=Q),J.length>0&&(a["!objects"]=J),W.length>0&&(a["!cols"]=W),Z.length>0&&(a["!rows"]=Z),E.Sheets.push(C)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),F.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(F.biff=5,ie=!0,Zu(F.codepage=28591)),F.biff==8&&re.BIFFVer==0&&re.dt==16&&(F.biff=2),ne++)break;if(a=t.dense?[]:{},F.biff<8&&!ie&&(ie=!0,Zu(F.codepage=t.codepage||1252)),F.biff<5||re.BIFFVer==0&&re.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:e.l-ce,name:u};s[Ce.pos]=Ce,F.snames.push(u)}else u=(s[pe]||{name:""}).name;re.dt==32&&(a["!type"]="chart"),re.dt==64&&(a["!type"]="macro"),Q=[],J=[],F.arrayf=_=[],W=[],Z=[],H=!1,C={Hidden:(s[pe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[re.r]||[])[re.c]:a[Fr({c:re.c,r:re.r})])&&++re.c,S={ixfe:re.ixfe,XF:I[re.ixfe]||{},v:re.val,t:"n"},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 5:case 517:S={ixfe:re.ixfe,XF:I[re.ixfe],v:re.val,t:re.t},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 638:S={ixfe:re.ixfe,XF:I[re.ixfe],v:re.rknum,t:"n"},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 189:for(var fe=re.c;fe<=re.C;++fe){var Ie=re.rkrec[fe-re.c][0];S={ixfe:Ie,XF:I[Ie],v:re.rkrec[fe-re.c][1],t:"n"},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:fe,r:re.r},S,t)}break;case 6:case 518:case 1030:{if(re.val=="String"){o=re;break}if(S=J2(re.val,re.cell.ixfe,re.tt),S.XF=I[S.ixfe],t.cellFormula){var He=re.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],dt=He[0][0][1][1],Et=Fr({r:Xe,c:dt});y[Et]?S.f=""+To(re.formula,i,re.cell,z,F):S.F=((t.dense?(a[Xe]||[])[dt]:a[Et])||{}).F}else S.f=""+To(re.formula,i,re.cell,z,F)}R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O(re.cell,S,t),o=re}break;case 7:case 519:if(o)o.val=re,S=J2(re,o.cell.ixfe,"s"),S.XF=I[S.ixfe],t.cellFormula&&(S.f=""+To(o.formula,i,o.cell,z,F)),R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O(o.cell,S,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(re);var Tt=Fr(re[0].s);if(p=t.dense?(a[re[0].s.r]||[])[re[0].s.c]:a[Tt],t.cellFormula&&p){if(!o||!Tt||!p)break;p.f=""+To(re[1],i,re[0],z,F),p.F=Gr(re[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;y[Fr(o.cell)]=re[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Fr(o.cell)],(p||{}).f=""+To(re[0],i,f,z,F)}}break;case 253:S=J2(l[re.isst].t,re.ixfe,"s"),l[re.isst].h&&(S.h=l[re.isst].h),S.XF=I[S.ixfe],R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:re.ixfe,XF:I[re.ixfe],t:"z"},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t));break;case 190:if(t.sheetStubs)for(var Ct=re.c;Ct<=re.C;++Ct){var Dt=re.ixfe[Ct-re.c];S={ixfe:Dt,XF:I[Dt],t:"z"},R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:Ct,r:re.r},S,t)}break;case 214:case 516:case 4:S=J2(re.val,re.ixfe,"s"),S.XF=I[S.ixfe],R>0&&(S.z=q[S.ixfe>>8&63]),Vd(S,t,r.opts.Date1904),O({c:re.c,r:re.r},S,t);break;case 0:case 512:ne===1&&(i=re);break;case 252:l=re;break;case 1054:if(F.biff==4){q[R++]=re[1];for(var Jt=0;Jt<R+163&&Tr[Jt]!=re[1];++Jt);Jt>=163&&pf(re[1],R+163)}else pf(re[1],re[0]);break;case 30:{q[R++]=re;for(var Pt=0;Pt<R+163&&Tr[Pt]!=re;++Pt);Pt>=163&&pf(re,R+163)}break;case 229:Q=Q.concat(re);break;case 93:J[re.cmo[0]]=F.lastobj=re;break;case 438:F.lastobj.TxO=re;break;case 127:F.lastobj.ImData=re;break;case 440:for(b=re[0].s.r;b<=re[0].e.r;++b)for(g=re[0].s.c;g<=re[0].e.c;++g)p=t.dense?(a[b]||[])[g]:a[Fr({c:g,r:b})],p&&(p.l=re[1]);break;case 2048:for(b=re[0].s.r;b<=re[0].e.r;++b)for(g=re[0].s.c;g<=re[0].e.c;++g)p=t.dense?(a[b]||[])[g]:a[Fr({c:g,r:b})],p&&p.l&&(p.l.Tooltip=re[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;p=t.dense?(a[re[0].r]||[])[re[0].c]:a[Fr(re[0])];var Mt=J[re[2]];p||(t.dense?(a[re[0].r]||(a[re[0].r]=[]),p=a[re[0].r][re[0].c]={t:"z"}):p=a[Fr(re[0])]={t:"z"},i.e.r=Math.max(i.e.r,re[0].r),i.s.r=Math.min(i.s.r,re[0].r),i.e.c=Math.max(i.e.c,re[0].c),i.s.c=Math.min(i.s.c,re[0].c)),p.c||(p.c=[]),x={a:re[1],t:Mt.TxO.t},p.c.push(x)}break;case 2173:MCe(I[re.ixfe],re.ext);break;case 125:{if(!F.cellStyles)break;for(;re.e>=re.s;)W[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},H||(H=!0,yO(re.w/256)),T0(W[re.e+1])}break;case 520:{var Wt={};re.level!=null&&(Z[re.r]=Wt,Wt.level=re.level),re.hidden&&(Z[re.r]=Wt,Wt.hidden=!0),re.hpt&&(Z[re.r]=Wt,Wt.hpt=re.hpt,Wt.hpx=Ov(re.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Gm(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=re;break;case 161:a["!margins"]||Gm(a["!margins"]={}),a["!margins"].header=re.header,a["!margins"].footer=re.footer;break;case 574:re.RTL&&(E.Views[0].RTL=!0);break;case 146:D=re;break;case 2198:M=re;break;case 140:B=re;break;case 442:u?C.CodeName=re||C.name:E.WBProps.CodeName=re||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=bs(s).sort(function(Pe,Re){return Number(Pe)-Number(Re)}).map(function(Pe){return s[Pe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(Pe,Re){r.Sheets[r.SheetNames[Re]]["!autofilter"]=Pe}),r.Strings=l,r.SSF=Pa(Tr),F.enc&&(r.Encryption=F.enc),M&&(r.Themes=M),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),z.names.length>0&&(E.Names=z.names),r.Workbook=E,r}var kb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function eBe(e,t,r){var n=vr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=i9(n,OI,kb.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=vr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=i9(i,DI,kb.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(dJ(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function tBe(e,t){var r=[],n=[],a=[],s=0,i,o=P7(OI,"n"),l=P7(DI,"n");if(e.Props)for(i=bs(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=bs(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)vJ.indexOf(a[s][0])>-1||uJ.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&vr.utils.cfb_add(t,"/SummaryInformation",o9(n,kb.SI,l,DI)),(r.length||u.length)&&vr.utils.cfb_add(t,"/DocumentSummaryInformation",o9(r,kb.DSI,o,OI,u.length?u:null,kb.UDI))}function fZ(e,t){t||(t={}),TO(t),Y6(),t.codepage&&X6(t.codepage);var r,n;if(e.FullPaths){if(vr.find(e,"/encryption"))throw new Error("File is password-protected");r=vr.find(e,"!CompObj"),n=vr.find(e,"/Workbook")||vr.find(e,"/Book")}else{switch(t.type){case"base64":e=cc(gc(e));break;case"binary":e=cc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}to(e,0),n={content:e}}var a,s;if(r&&X4e(r),t.bookProps&&!t.bookSheets)a={};else{var i=sn?"buffer":"array";if(n&&n.content)a=Z4e(n.content,t);else if((s=vr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Km.to_workbook(s.content,(t.type=i,t));else if((s=vr.find(e,"NativeContent_MAIN"))&&s.content)a=Km.to_workbook(s.content,(t.type=i,t));else throw(s=vr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&vr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=h_e(e))}var o={};return e.FullPaths&&eBe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function rBe(e,t){var r=t||{},n=vr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vr.utils.cfb_add(n,a,hZ(e,r)),r.biff==8&&(e.Props||e.Custprops)&&tBe(e,n),r.biff==8&&e.vbaraw&&m_e(n,vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var dy={0:{f:S5e},1:{f:O5e},2:{f:Z5e},3:{f:H5e},4:{f:L5e},5:{f:X5e},6:{f:aNe},7:{f:K5e},8:{f:dNe},9:{f:uNe},10:{f:lNe},11:{f:cNe},12:{f:P5e},13:{f:tNe},14:{f:z5e},15:{f:M5e},16:{f:sZ},17:{f:iNe},18:{f:q5e},19:{f:dO},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:i4e},40:{},42:{},43:{f:aCe},44:{f:rCe},45:{f:oCe},46:{f:cCe},47:{f:lCe},48:{},49:{f:kye},50:{},51:{f:VCe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:kJ},62:{f:nNe},63:{f:JCe},64:{f:NNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ENe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:j5e},148:{f:k5e,p:16},151:{f:gNe},152:{},153:{f:n4e},154:{},155:{},156:{f:t4e},157:{},158:{},159:{T:1,f:xEe},160:{T:-1},161:{T:1,f:Tp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ANe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:QCe},336:{T:-1},337:{f:KCe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:FI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:BJ},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:vNe},427:{f:xNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:I5e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mNe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:FI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:c_e},633:{T:1},634:{T:-1},635:{T:1,f:o_e},636:{T:-1},637:{f:Fye},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:zNe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:BNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},QI={6:{f:XB},10:{f:Fh},12:{f:Xs},13:{f:Xs},14:{f:Is},15:{f:Is},16:{f:Lo},17:{f:Is},18:{f:Is},19:{f:Xs},20:{f:f9},21:{f:f9},23:{f:BJ},24:{f:m9},25:{f:Is},26:{},27:{},28:{f:B2e},29:{},34:{f:Is},35:{f:h9},38:{f:Lo},39:{f:Lo},40:{f:Lo},41:{f:Lo},42:{f:Is},43:{f:Is},47:{f:MEe},49:{f:t2e},51:{f:Xs},60:{},61:{f:Xwe},64:{f:Is},65:{f:e2e},66:{f:Xs},77:{},80:{},81:{},82:{},85:{f:Xs},89:{},90:{},91:{},92:{f:Uwe},93:{f:I2e},94:{},95:{f:Is},96:{},97:{},99:{f:Is},125:{f:kJ},128:{f:p2e},129:{f:Qwe},130:{f:Xs},131:{f:Is},132:{f:Is},133:{f:Hwe},134:{},140:{f:U2e},141:{f:Xs},144:{},146:{f:H2e},151:{},152:{},153:{},154:{},155:{},156:{f:Xs},157:{},158:{},160:{f:W2e},161:{f:$2e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:A2e},190:{f:f2e},193:{f:Fh},197:{},198:{},199:{},200:{},201:{},202:{f:Is},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xs},220:{},221:{f:Is},222:{},224:{f:m2e},225:{f:Lwe},226:{f:Fh},227:{},229:{f:k2e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:zwe},253:{f:n2e},255:{f:Kwe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:xJ},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Is},353:{f:Fh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:y2e},431:{f:Is},432:{},433:{},434:{},437:{},438:{f:O2e},439:{f:Is},440:{f:D2e},441:{},442:{f:aw},443:{},444:{f:Xs},445:{},446:{},448:{f:Fh},449:{f:Wwe,r:2},450:{f:Fh},512:{f:u9},513:{f:q2e},515:{f:x2e},516:{f:s2e},517:{f:A9},519:{f:X2e},520:{f:Gwe},523:{},545:{f:p9},549:{f:c9},566:{},574:{f:Jwe},638:{f:d2e},659:{},1048:{},1054:{f:o2e},1084:{},1212:{f:_2e},2048:{f:R2e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:W2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:V2e,r:12},2173:{f:UCe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Is,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:C2e,r:12},2197:{},2198:{f:FCe,r:12},2199:{},2200:{},2201:{},2202:{f:S2e,r:12},2203:{f:Fh},2204:{},2205:{},2206:{},2207:{},2211:{f:qwe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:K2e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Q2e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:u9},1:{},2:{f:tEe},3:{f:Z2e},4:{f:J2e},5:{f:A9},7:{f:nEe},8:{},9:{f:W2},11:{},22:{f:Xs},30:{f:c2e},31:{},32:{},33:{f:p9},36:{},37:{f:c9},50:{f:aEe},62:{},52:{},67:{},68:{f:Xs},69:{},86:{},126:{},127:{f:Y2e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:sEe},223:{},234:{},354:{},421:{},518:{f:XB},521:{f:W2},536:{f:m9},547:{f:h9},561:{},579:{},1030:{f:XB},1033:{f:W2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&lO(r)&&e.push(r)}}function nBe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function lw(e,t,r){return e||(e=At(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function aBe(e,t,r,n){var a=At(9);return lw(a,e,t),bJ(r,n||"b",a),a}function sBe(e,t,r){var n=At(8+2*r.length);return lw(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function iBe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?pi(Da(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Qt(e,2,rEe(r,n,a)):Qt(e,3,eEe(r,n,a));return;case"b":case"e":Qt(e,5,aBe(r,n,t.v,t.t));return;case"s":case"str":Qt(e,4,sBe(r,n,(t.v||"").slice(0,255)));return}Qt(e,1,lw(null,r,n))}function oBe(e,t,r,n){var a=Array.isArray(t),s=jn(t["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Gr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Rs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=Xa(d)),i=l[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&iBe(e,f,u,d)}}}function lBe(e,t){for(var r=t||{},n=jl(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Qt(n,r.biff==4?1033:r.biff==3?521:9,vO(e,16,r)),oBe(n,e.Sheets[e.SheetNames[a]],a,r),Qt(n,10),n.end()}function cBe(e,t,r){Qt(e,49,r2e({sz:12,name:"Arial"},r))}function uBe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Qt(e,1054,l2e(a,t[a],r))})}function dBe(e,t){var r=At(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Qt(e,2151,r),r=At(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),_J(jn(t["!ref"]||"A1"),r),r.write_shift(4,4),Qt(e,2152,r)}function ABe(e,t){for(var r=0;r<16;++r)Qt(e,224,d9({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Qt(e,224,d9(n,0,t))})}function fBe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Qt(e,440,P2e(n)),n[1].Tooltip&&Qt(e,2048,L2e(n))}delete t["!links"]}function hBe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Qt(e,125,z2e(R5(a,n),a))})}}function mBe(e,t,r,n,a){var s=16+Q0(a.cellXfs,t,a);if(t.v==null&&!t.bf){Qt(e,513,Ap(r,n,s));return}if(t.bf)Qt(e,6,QSe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?pi(Da(t.v)):t.v;Qt(e,515,b2e(r,n,i,s));break;case"b":case"e":Qt(e,517,v2e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=SO(a.Strings,t.v,a.revStrings);Qt(e,253,a2e(r,n,o,s))}else Qt(e,516,i2e(r,n,(t.v||"").slice(0,255),s,a));break;default:Qt(e,513,Ap(r,n,s))}}function pBe(e,t,r){var n=jl(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(s),u=t.biff==8,d,f="",m=[],p=jn(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}Qt(n,2057,vO(r,16,t)),Qt(n,13,nu(1)),Qt(n,12,nu(100)),Qt(n,15,Jo(!0)),Qt(n,17,Jo(!1)),Qt(n,16,up(.001)),Qt(n,95,Jo(!0)),Qt(n,42,Jo(!1)),Qt(n,43,Jo(!1)),Qt(n,130,nu(1)),Qt(n,128,g2e()),Qt(n,131,Jo(!1)),Qt(n,132,Jo(!1)),u&&hBe(n,s["!cols"]),Qt(n,512,u2e(p,t)),u&&(s["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){f=Rs(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(m[b]=Xa(b)),d=m[b]+f;var y=l?(s[g]||[])[b]:s[d];y&&(mBe(n,y,g,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var _=o.CodeName||o.name||a;return u&&Qt(n,574,Zwe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Qt(n,229,T2e(s["!merges"])),u&&fBe(n,s),Qt(n,442,yJ(_)),u&&dBe(n,s),Qt(n,10),n.end()}function gBe(e,t,r){var n=jl(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(Qt(n,2057,vO(e,5,r)),r.bookType=="xla"&&Qt(n,135),Qt(n,225,o?nu(1200):null),Qt(n,193,vwe(2)),l&&Qt(n,191),l&&Qt(n,192),Qt(n,226),Qt(n,92,Mwe("SheetJS",r)),Qt(n,66,nu(o?1200:1252)),o&&Qt(n,353,nu(0)),o&&Qt(n,448),Qt(n,317,G2e(e.SheetNames.length)),o&&e.vbaraw&&Qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";Qt(n,442,yJ(u))}Qt(n,156,nu(17)),Qt(n,25,Jo(!1)),Qt(n,18,Jo(!1)),Qt(n,19,nu(0)),o&&Qt(n,431,Jo(!1)),o&&Qt(n,444,nu(0)),Qt(n,61,Ywe()),Qt(n,64,Jo(!1)),Qt(n,141,nu(0)),Qt(n,34,Jo(WNe(e)=="true")),Qt(n,14,Jo(!0)),o&&Qt(n,439,Jo(!1)),Qt(n,218,nu(0)),cBe(n,e,r),uBe(n,e.SSF,r),ABe(n,r),o&&Qt(n,352,Jo(!1));var d=n.end(),f=jl();o&&Qt(f,140,M2e()),o&&r.Strings&&nBe(f,252,$we(r.Strings)),Qt(f,10);var m=f.end(),p=jl(),x=0,g=0;for(g=0;g<e.SheetNames.length;++g)x+=(o?12:11)+(o?2:1)*e.SheetNames[g].length;var b=d.length+x+m.length;for(g=0;g<e.SheetNames.length;++g){var y=s[g]||{};Qt(p,133,Vwe({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var _=p.end();if(x!=_.length)throw new Error("BS8 "+x+" != "+_.length);var S=[];return d.length&&S.push(d),_.length&&S.push(_),m.length&&S.push(m),Di(S)}function vBe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Pa(Tr)),e&&e.SSF&&(dx(),T5(e.SSF),r.revssf=j5(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,IO(r),r.cellXfs=[],Q0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=pBe(a,r,e);return n.unshift(gBe(e,n,r)),Di(n)}function hZ(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Ol(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return vBe(e,t);case 4:case 3:case 2:return lBe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function S9(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=rye(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var g=l[i].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var _=y[o].trim();if(_.match(/<t[dh]/i)){for(var S=_,B=0;S.charAt(0)=="<"&&(B=S.indexOf(">"))>-1;)S=S.slice(B+1);for(var I=0;I<x.length;++I){var D=x[I];D.s.c==d&&D.s.r<u&&u<=D.e.r&&(d=D.e.c+1,I=-1)}var E=Rr(_.slice(0,_.indexOf(">")));m=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||m>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+m-1}});var C=E.t||E["data-t"]||"";if(!S.length){d+=m;continue}if(S=LY(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!S.length){d+=m;continue}var N={t:"s",v:S};r.raw||!S.trim().length||C=="s"||(S==="TRUE"?N={t:"b",v:!0}:S==="FALSE"?N={t:"b",v:!1}:isNaN(td(S))?isNaN(jv(S).getDate())||(N={t:"d",v:Da(S)},r.cellDates||(N={t:"n",v:pi(N.v)}),N.z=r.dateNF||Tr[14]):N={t:"n",v:td(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[Fr({r:u,c:d})]=N,d+=m}}}}return n["!ref"]=Gr(p),x.length&&(n["!merges"]=x),n}function xBe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Fr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],m=f&&f.v!=null&&(f.h||sO(f.w||(Bf(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Ut("td",m,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var bBe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yBe="</body></html>";function wBe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return M0(S9(r[0],t),t);var n=DO();return r.forEach(function(a,s){PO(n,S9(a,t),"Sheet"+(s+1))}),n}function EBe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function mZ(e,t){var r=t||{},n=r.header!=null?r.header:bBe,a=r.footer!=null?r.footer:yBe,s=[n],i=Ol(e["!ref"]);r.dense=Array.isArray(e),s.push(EBe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(xBe(e,i,o,r));return s.push("</table>"+a),s.join("")}function pZ(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Ya(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Ol(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),x=0,g=0,b=0,y=0,_=0,S=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&g<l;++x){var B=o[x];if(N9(B)){if(n.display)continue;p[g]={hidden:!0}}var I=B.children;for(b=y=0;b<I.length;++b){var D=I[b];if(!(n.display&&N9(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):LY(D.innerHTML),C=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<f.length;++m){var N=f[m];N.s.c==y+s&&N.s.r<g+a&&g+a<=N.e.r&&(y=N.e.c+1-s,m=-1)}S=+D.getAttribute("colspan")||1,((_=+D.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:g+a,c:y+s},e:{r:g+a+(_||1)-1,c:y+s+(S||1)-1}});var P={t:"s",v:E},O=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?P.t=O||"z":n.raw||E.trim().length==0||O=="s"||(E==="TRUE"?P={t:"b",v:!0}:E==="FALSE"?P={t:"b",v:!1}:isNaN(td(E))?isNaN(jv(E).getDate())||(P={t:"d",v:Da(E)},n.cellDates||(P={t:"n",v:pi(P.v)}),P.z=n.dateNF||Tr[14]):P={t:"n",v:td(E)})),P.z===void 0&&C!=null&&(P.z=C);var F="",M=D.getElementsByTagName("A");if(M&&M.length)for(var Q=0;Q<M.length&&!(M[Q].hasAttribute("href")&&(F=M[Q].getAttribute("href"),F.charAt(0)!="#"));++Q);F&&F.charAt(0)!="#"&&(P.l={Target:F}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][y+s]=P):e[Fr({c:y+s,r:g+a})]=P,u.e.c<y+s&&(u.e.c=y+s),y+=S}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,g-1+a),e["!ref"]=Gr(u),g>=l&&(e["!fullref"]=Gr((u.e.r=o.length-x+g-1+a,u))),e}function gZ(e,t){var r=t||{},n=r.dense?[]:{};return pZ(n,e,t)}function CBe(e,t){return M0(gZ(e,t),t)}function N9(e){var t="",r=_Be(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function _Be(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function SBe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=In(t.replace(/<[^>]*>/g,""));return[r]}var B9={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function vZ(e,t){var r=t||{},n=iO(e),a=[],s,i,o={name:""},l="",u=0,d,f,m={},p=[],x=r.dense?[]:{},g,b,y={value:""},_="",S=0,B=[],I=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,N={},P=[],O={},F=0,M=0,Q=[],J=1,W=1,Z=[],H={Names:[]},z={},G=["",""],ne=[],R={},q="",Y=0,te=!1,ie=!1,pe=0;for(sy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=sy.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?x["!ref"]=Gr(E):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(x["!fullref"]=x["!ref"],E.e.r=r.sheetRows-1,x["!ref"]=Gr(E)),P.length&&(x["!merges"]=P),Q.length&&(x["!rows"]=Q),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=x,ie=!1):g[0].charAt(g[0].length-2)!=="/"&&(d=Rr(g[0],!1),I=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,x=r.dense?[]:{},P=[],Q=[],ie=!0);break;case"table-row-group":g[1]==="/"?--C:++C;break;case"table-row":case"":if(g[1]==="/"){I+=J,J=1;break}if(f=Rr(g[0],!1),f.?I=f.-1:I==-1&&(I=0),J=+f["number-rows-repeated"]||1,J<10)for(pe=0;pe<J;++pe)C>0&&(Q[I+pe]={level:C});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(x[I]||(x[I]=[]),x[I][D]={t:"z"}):x[Fr({r:I,c:D})]={t:"z"}),_="",B=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++D,y=Rr(g[0],!1),W=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=E9(In(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=In(y["string-value"]||""),r.dense?(x[I]||(x[I]=[]),x[I][D]=b):x[Fr({r:I,c:D})]=b),D+=W-1;else if(g[1]!=="/"){++D,_="",S=0,B=[],W=1;var oe=J?I+J-1:I;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),I<E.s.r&&(E.s.r=I),oe>E.e.r&&(E.e.r=oe),y=Rr(g[0],!1),ne=[],R={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=In(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(F=parseInt(y["number-matrix-rows-spanned"],10)||0,M=parseInt(y["number-matrix-columns-spanned"],10)||0,O={s:{r:I,c:D},e:{r:I+F-1,c:D+M-1}},b.F=Gr(O),Z.push([O,b.F])),y.formula)b.f=E9(y.formula);else for(pe=0;pe<Z.length;++pe)I>=Z[pe][0].s.r&&I<=Z[pe][0].e.r&&D>=Z[pe][0].s.c&&D<=Z[pe][0].e.c&&(b.F=Z[pe][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(F=parseInt(y["number-rows-spanned"],10)||0,M=parseInt(y["number-columns-spanned"],10)||0,O={s:{r:I,c:D},e:{r:I+F-1,c:D+M-1}},P.push(O)),y["number-columns-repeated"]&&(W=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Fa(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Da(y["date-value"]),r.cellDates||(b.t="n",b.v=pi(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=Zbe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=F5(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(_=In(y["string-value"]),B=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=_||"",B.length&&(b.R=B),te=S==0),z.Target&&(b.l=z),ne.length>0&&(b.c=ne,ne=[]),_&&r.cellText!==!1&&(b.w=_),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=I))for(var ce=0;ce<J;++ce){if(W=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(x[I+ce]||(x[I+ce]=[]),x[I+ce][D]=ce==0?b:Pa(b);--W>0;)x[I+ce][D+W]=Pa(b);else for(x[Fr({r:I+ce,c:D})]=b;--W>0;)x[Fr({r:I+ce,c:D+W})]=Pa(b);E.e.c<=D&&(E.e.c=D)}W=parseInt(y["number-columns-repeated"]||"1",10),D+=W-1,W=0,b={},_="",B=[]}z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((s=a.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((s=a.pop())[0]!==g[3])throw"Bad state: "+s;R.t=_,B.length&&(R.R=B),R.a=q,ne.push(R)}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);q="",Y=0,_="",S=0,B=[];break;case"creator":g[1]==="/"?q=n.slice(Y,g.index):Y=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((s=a.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);_="",S=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(N[o.name]=l,(s=a.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=Rr(g[0],!1),a.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Rr(g[0],!1),l+=B9[g[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Rr(g[0],!1),l+=B9[g[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,g.index);break}else u=g.index+g[0].length;break;case"named-range":i=Rr(g[0],!1),G=YB(i["cell-range-address"]);var ge={Name:i.name,Ref:G[0]+"!"+G[1]};ie&&(ge.Sheet=p.length),H.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var Fe=SBe(n.slice(S,g.index));_=(_.length>0?_+`
`:"")+Fe[0]}else Rr(g[0],!1),S=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{G=YB(Rr(g[0])["target-range-address"]),m[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(z=Rr(g[0],!1),!z.href)break;z.Target=In(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(G=YB(z.Target.slice(1)),z.Target="#"+G[0]+"!"+G[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var re={Sheets:m,SheetNames:p,Workbook:H};return r.bookSheets&&delete re.Sheets,re}function k9(e,t){t=t||{},tu(e,"META-INF/manifest.xml")&&Zye(Ws(e,"META-INF/manifest.xml"),t);var r=uc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=vZ(xa(r),t);return tu(e,"meta.xml")&&(n.Props=lJ(Ws(e,"meta.xml"))),n}function T9(e,t){return vZ(e,t)}var NBe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ay({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ls+t}}(),I9=function(){var e=function(s){return ua(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+ua(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ol(s["!ref"]||"A1"),m=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)g=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=f.e.r;++u){for(g=b[u]?' table:style-name="ro'+b[u].ods+'"':"",l.push("        <table:table-row"+g+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var y=!1,_={},S="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(y=!0),_["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,_["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(y){l.push(r);continue}var B=Fr({r:u,c:d}),I=x?(s[u]||[])[d]:s[B];if(I&&I.f&&(_["table:formula"]=ua(GSe(I.f)),I.F&&I.F.slice(0,B.length)==B)){var D=Ol(I.F);_["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,_["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!I){l.push(t);continue}switch(I.t){case"b":S=I.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=I.v?"true":"false";break;case"n":S=I.w||String(I.v||0),_["office:value-type"]="float",_["office:value"]=I.v||0;break;case"s":case"str":S=I.v==null?"":I.v,_["office:value-type"]="string";break;case"d":S=I.w||Da(I.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=Da(I.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var E=e(S);if(I.l&&I.l.Target){var C=I.l.Target;C=C.charAt(0)=="#"?"#"+qSe(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),E=Ut("text:a",E,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+Ut("table:table-cell",Ut("text:p",E,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;T0(f),f.ods=o;var m=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Ls],u=ay({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=ay({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(oJ().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function xZ(e,t){if(t.bookType=="fods")return I9(e,t);var r=rO(),n="",a=[],s=[];return n="mimetype",Zr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Zr(r,n,I9(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Zr(r,n,NBe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Zr(r,n,Ls+oJ()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Zr(r,n,rwe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Zr(r,n,ewe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function fp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HI(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):xa(U0(e))}function BBe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):cc(rA(e))}function kBe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function j0(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function j9(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function TBe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function IBe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function Ay(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ia(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function gs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Un(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Ay(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Ay(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Wi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ia(n*8+a.type)),a.type==2&&t.push(ia(a.data.length)),t.push(a.data))})}),j0(t)}function kO(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Jc(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Ay(e,n),s=Un(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:gs(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Un(o.data),u=gs(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=gs(s[3][0].data)>>>0>0),r.push(i)}return r}function mg(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ia(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ia(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ia(i.data.length)}],n[2].push({data:Wi(i.meta),type:2})});var s=Wi(n);t.push(ia(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),j0(t)}function jBe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Ay(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[j0(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=j0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Zc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(jBe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return j0(t)}function pg(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=ia(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return j0(t)}function FBe(e,t,r,n){var a=fp(e),s=a.getUint32(4,!0),i=(n>1?12:8)+j9(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=j9(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function OBe(e,t,r){var n=fp(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=TBe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function ZB(e,t){var r=new Uint8Array(32),n=fp(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,IBe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function ek(e,t){var r=new Uint8Array(32),n=fp(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function DBe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return FBe(e,t,r,e[0]);case 5:return OBe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ko(e){var t=Un(e);return Ay(t[1][0].data)}function F9(e,t){var r=Un(t.data),n=gs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Un(i.data),l=gs(o[1][0].data)>>>0;switch(n){case 1:s[l]=HI(o[3][0].data);break;case 8:{var u=e[ko(o[9][0].data)][0],d=Un(u.data),f=e[ko(d[1][0].data)][0],m=gs(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Un(f.data);s[l]=p[3].map(function(x){return HI(x.data)}).join("")}break}}),s}function PBe(e,t){var r,n,a,s,i,o,l,u,d,f,m,p,x,g,b=Un(e),y=gs(b[1][0].data)>>>0,_=gs(b[2][0].data)>>>0,S=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&gs(b[8][0].data)>0||!1,B,I;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)B=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,I=(u=(l=b[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)B=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,I=(g=(x=b[3])==null?void 0:x[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=S?4:1,E=fp(B),C=[],N=0;N<B.length/2;++N){var P=E.getUint16(N*2,!0);P<65535&&C.push([N,P])}if(C.length!=_)throw"Expected ".concat(_," cells, found ").concat(C.length);var O=[];for(N=0;N<C.length-1;++N)O[C[N][0]]=I.subarray(C[N][1]*D,C[N+1][1]*D);return C.length>=1&&(O[C[C.length-1][0]]=I.subarray(C[C.length-1][1]*D)),{R:y,cells:O}}function RBe(e,t){var r,n=Un(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?gs(n[7][0].data)>>>0>0?1:0:-1,s=kO(n[5],function(i){return PBe(i,a)});return{nrows:gs(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function LBe(e,t,r){var n,a=Un(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(gs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(gs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Gr(s);var i=Un(a[4][0].data),o=F9(e,e[ko(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?F9(e,e[ko(i[17][0].data)][0]):[],u=Un(i[3][0].data),d=0;u[1].forEach(function(f){var m=Un(f.data),p=e[ko(m[2][0].data)][0],x=gs(p.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var g=RBe(e,p);g.data.forEach(function(b,y){b.forEach(function(_,S){var B=Fr({r:d+y,c:S}),I=DBe(_,o,l);I&&(r[B]=I)})}),d+=g.nrows})}function UBe(e,t){var r=Un(t.data),n={"!ref":"A1"},a=e[ko(r[2][0].data)],s=gs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return LBe(e,a[0],n),n}function MBe(e,t){var r,n=Un(t.data),a={name:(r=n[1])!=null&&r[0]?HI(n[1][0].data):"",sheets:[]},s=kO(n[2],ko);return s.forEach(function(i){e[i].forEach(function(o){var l=gs(o.meta[1][0].data);l==6e3&&a.sheets.push(UBe(e,o))})}),a}function QBe(e,t){var r=DO(),n=Un(t.data),a=kO(n[1],ko);if(a.forEach(function(s){e[s].forEach(function(i){var o=gs(i.meta[1][0].data);if(o==2){var l=MBe(e,i);l.sheets.forEach(function(u,d){PO(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function tk(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Zc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=Jc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&gs(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=gs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return QBe(s,o)}function HBe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&gs(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=fp(e[7][0].data),d=0,f=[],m=fp(e[4][0].data),p=0,x=[],g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),m.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),m.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=ZB({t:"s",v:t[g]},r),y=ek({t:"s",v:t[g]},r);break;case"number":b=ZB({t:"n",v:t[g]},r),y=ek({t:"n",v:t[g]},r);break;case"boolean":b=ZB({t:"b",v:t[g]},r),y=ek({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}f.push(b),d+=b.length,x.push(y),p+=y.length,++l}for(e[2][0].data=ia(l);g<e[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),m.setUint16(g*2,65535,!0);return e[6][0].data=j0(f),e[3][0].data=j0(x),l}function VBe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ol(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Gr(n)));var s=B_(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(q){return q.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},l=[],u=vr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(q,Y){return[q,u.FullPaths[Y]]}).forEach(function(q){var Y=q[0],te=q[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ie=Y.content,pe=Zc(ie),oe=Jc(pe);oe.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:te,type:gs(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(q,Y){return q-Y});var d=l.filter(function(q){return q>1}).map(function(q){return[q,ia(q)]});u.FileIndex.map(function(q,Y){return[q,u.FullPaths[Y]]}).forEach(function(q){var Y=q[0];if(q[1],!!Y.name.match(/\.iwa/)){var te=Jc(Zc(Y.content));te.forEach(function(ie){ie.messages.forEach(function(pe){d.forEach(function(oe){ie.messages.some(function(ce){return gs(ce.meta[1][0].data)!=11006&&kBe(ce.data,oe[1])})&&o[oe[0]].deps.push(ie.id)})})})}});for(var f=vr.find(u,o[1].location),m=Jc(Zc(f.content)),p,x=0;x<m.length;++x){var g=m[x];g.id==1&&(p=g)}var b=ko(Un(p.messages[0].data)[1][0].data);for(f=vr.find(u,o[b].location),m=Jc(Zc(f.content)),x=0;x<m.length;++x)g=m[x],g.id==b&&(p=g);for(b=ko(Un(p.messages[0].data)[2][0].data),f=vr.find(u,o[b].location),m=Jc(Zc(f.content)),x=0;x<m.length;++x)g=m[x],g.id==b&&(p=g);for(b=ko(Un(p.messages[0].data)[2][0].data),f=vr.find(u,o[b].location),m=Jc(Zc(f.content)),x=0;x<m.length;++x)g=m[x],g.id==b&&(p=g);var y=Un(p.messages[0].data);{y[6][0].data=ia(n.e.r+1),y[7][0].data=ia(n.e.c+1);var _=ko(y[46][0].data),S=vr.find(u,o[_].location),B=Jc(Zc(S.content));{for(var I=0;I<B.length&&B[I].id!=_;++I);if(B[I].id!=_)throw"Bad ColumnRowUIDMapArchive";var D=Un(B[I].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=n.e.c;++E){var C=[];C[1]=C[2]=[{type:0,data:ia(E+420690)}],D[1].push({type:2,data:Wi(C)}),D[2].push({type:0,data:ia(E)}),D[3].push({type:0,data:ia(E)})}D[4]=[],D[5]=[],D[6]=[];for(var N=0;N<=n.e.r;++N)C=[],C[1]=C[2]=[{type:0,data:ia(N+726270)}],D[4].push({type:2,data:Wi(C)}),D[5].push({type:0,data:ia(N)}),D[6].push({type:0,data:ia(N)});B[I].messages[0].data=Wi(D)}S.content=pg(mg(B)),S.size=S.content.length,delete y[46];var P=Un(y[4][0].data);{P[7][0].data=ia(n.e.r+1);var O=Un(P[1][0].data),F=ko(O[2][0].data);S=vr.find(u,o[F].location),B=Jc(Zc(S.content));{if(B[0].id!=F)throw"Bad HeaderStorageBucket";var M=Un(B[0].messages[0].data);for(N=0;N<s.length;++N){var Q=Un(M[2][0].data);Q[1][0].data=ia(N),Q[4][0].data=ia(s[N].length),M[2][N]={type:M[2][0].type,data:Wi(Q)}}B[0].messages[0].data=Wi(M)}S.content=pg(mg(B)),S.size=S.content.length;var J=ko(P[2][0].data);S=vr.find(u,o[J].location),B=Jc(Zc(S.content));{if(B[0].id!=J)throw"Bad HeaderStorageBucket";for(M=Un(B[0].messages[0].data),E=0;E<=n.e.c;++E)Q=Un(M[2][0].data),Q[1][0].data=ia(E),Q[4][0].data=ia(n.e.r+1),M[2][E]={type:M[2][0].type,data:Wi(Q)};B[0].messages[0].data=Wi(M)}S.content=pg(mg(B)),S.size=S.content.length;var W=ko(P[4][0].data);(function(){for(var q=vr.find(u,o[W].location),Y=Jc(Zc(q.content)),te,ie=0;ie<Y.length;++ie){var pe=Y[ie];pe.id==W&&(te=pe)}var oe=Un(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(re,Ne){ce[1]=[{type:0,data:ia(Ne)}],ce[2]=[{type:0,data:ia(1)}],ce[3]=[{type:2,data:BBe(re)}],oe[3].push({type:2,data:Wi(ce)})})}te.messages[0].data=Wi(oe);var ge=mg(Y),Fe=pg(ge);q.content=Fe,q.size=q.content.length})();var Z=Un(P[3][0].data);{var H=Z[1][0];delete Z[2];var z=Un(H.data);{var G=ko(z[2][0].data);(function(){for(var q=vr.find(u,o[G].location),Y=Jc(Zc(q.content)),te,ie=0;ie<Y.length;++ie){var pe=Y[ie];pe.id==G&&(te=pe)}var oe=Un(te.messages[0].data);{delete oe[6],delete Z[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var ge=0,Fe=0;Fe<=n.e.r;++Fe){var re=Un(ce);ge+=HBe(re,s[Fe],i),re[1][0].data=ia(Fe),oe[5].push({data:Wi(re),type:2})}oe[1]=[{type:0,data:ia(n.e.c+1)}],oe[2]=[{type:0,data:ia(n.e.r+1)}],oe[3]=[{type:0,data:ia(ge)}],oe[4]=[{type:0,data:ia(n.e.r+1)}]}te.messages[0].data=Wi(oe);var Ne=mg(Y),Oe=pg(Ne);q.content=Oe,q.size=q.content.length})()}H.data=Wi(z)}P[3][0].data=Wi(Z)}y[4][0].data=Wi(P)}p.messages[0].data=Wi(y);var ne=mg(m),R=pg(ne);return f.content=R,f.size=f.content.length,u}function bZ(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function TO(e){bZ([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function IO(e){bZ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function zBe(e){return dn.WS.indexOf(e)>-1?"sheet":e==dn.CS?"chart":e==dn.DS?"dialog":e==dn.MS?"macro":e&&e.length?e:"sheet"}function $Be(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,zBe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function KBe(e,t,r,n,a,s,i,o,l,u,d,f){try{s[n]=_b(uc(e,r,!0),t);var m=Ws(e,t),p;switch(o){case"sheet":p=h4e(m,t,a,l,s[n],u,d,f);break;case"chart":if(p=m4e(m,t,a,l,s[n],u,d,f),!p||!p["!drawel"])break;var x=Z1(p["!drawel"].Target,t),g=iy(x),b=t_e(uc(e,x,!0),_b(uc(e,g,!0),x)),y=Z1(b,x),_=iy(y);p=HNe(uc(e,y,!0),y,l,_b(uc(e,_,!0),y),u,p);break;case"macro":p=p4e(m,t,a,l,s[n],u,d,f);break;case"dialog":p=g4e(m,t,a,l,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var S=[];s&&s[n]&&bs(s[n]).forEach(function(B){var I="";if(s[n][B].Type==dn.CMNT){I=Z1(s[n][B].Target,t);var D=y4e(Ws(e,I,!0),I,l);if(!D||!D.length)return;v9(p,D,!1)}s[n][B].Type==dn.TCMNT&&(I=Z1(s[n][B].Target,t),S=S.concat(n_e(Ws(e,I,!0),l)))}),S&&S.length&&v9(p,S,!0,l.people||[])}catch(B){if(l.WTF)throw B}}function Gc(e){return e.charAt(0)=="/"?e.slice(1):e}function GBe(e,t){if(dx(),t=t||{},TO(t),tu(e,"META-INF/manifest.xml")||tu(e,"objectdata.xml"))return k9(e,t);if(tu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof tk<"u"){if(e.FileIndex)return tk(e);var r=vr.utils.cfb_new();return U7(e).forEach(function(Q){Zr(r,Q,aye(e,Q))}),tk(r)}throw new Error("Unsupported NUMBERS file")}if(!tu(e,"[Content_Types].xml"))throw tu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):tu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=U7(e),a=Yye(uc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Ws(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Ws(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(Sb=[],a.sst)try{Sb=b4e(Ws(e,Gc(a.sst)),a.sst,t)}catch(Q){if(t.WTF)throw Q}t.cellStyles&&a.themes.length&&(l=x4e(uc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=v4e(Ws(e,Gc(a.style)),a.style,l,t))}a.links.map(function(Q){try{var J=_b(uc(e,iy(Gc(Q))),Q);return E4e(Ws(e,Gc(Q)),J,Q,t)}catch{}});var d=f4e(Ws(e,Gc(a.workbooks[0])),a.workbooks[0],t),f={},m="";a.coreprops.length&&(m=Ws(e,Gc(a.coreprops[0]),!0),m&&(f=lJ(m)),a.extprops.length!==0&&(m=Ws(e,Gc(a.extprops[0]),!0),m&&awe(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(m=uc(e,Gc(a.custprops[0]),!0),m&&(p=iwe(m,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(J){return J.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=p),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var g={};t.bookDeps&&a.calcchain&&(g=w4e(Ws(e,Gc(a.calcchain)),a.calcchain));var b=0,y={},_,S;{var B=d.Sheets;f.Worksheets=B.length,f.SheetNames=[];for(var I=0;I!=B.length;++I)f.SheetNames[I]=B[I].name}var D=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),C=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");tu(e,C)||(C="xl/_rels/workbook."+D+".rels");var N=_b(uc(e,C,!0),C.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=C4e(Ws(e,Gc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=s_e(Ws(e,Gc(a.people[0])),t)),N&&(N=$Be(N,d.Sheets));var P=Ws(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var O="sheet";if(N&&N[b]?(_="xl/"+N[b][1].replace(/[\/]?xl\//,""),tu(e,_)||(_=N[b][1]),tu(e,_)||(_=C.replace(/_rels\/.*$/,"")+N[b][1]),O=N[b][2]):(_="xl/worksheets/sheet"+(b+1-P)+"."+D,_=_.replace(/sheet0\./,"sheet.")),S=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var F=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==b&&(F=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==f.SheetNames[b].toLowerCase()&&(F=1);if(!F)continue e}}KBe(e,_,S,f.SheetNames[b],b,y,i,O,t,d,l,u)}return x={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:g,Sheets:i,SheetNames:f.SheetNames,Strings:Sb,Styles:u,Themes:l,SSF:Pa(Tr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(Q,J){Q=Q.replace(/^Root Entry[\/]/,""),x.keys.push(Q),x.files[Q]=e.FileIndex[J]}))),t&&t.bookVBA&&(a.vba.length>0?x.vbaraw=Ws(e,Gc(a.vba[0]),!0):a.defaults&&a.defaults.bin===f_e&&(x.vbaraw=Ws(e,"xl/vbaProject.bin",!0))),x}function qBe(e,t){var r=t||{},n="Workbook",a=vr.find(e,n);try{if(n="/!DataSpaces/Version",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(CEe(a.content),n="/!DataSpaces/DataSpaceMap",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=SEe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=NEe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);kEe(a.content)}catch{}if(n="/EncryptionInfo",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=TEe(a.content);if(n="/EncryptedPackage",a=vr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function WBe(e,t){return t.bookType=="ods"?xZ(e,t):t.bookType=="numbers"?VBe(e,t):t.bookType=="xlsb"?XBe(e,t):YBe(e,t)}function XBe(e,t){Gg=1024,e&&!e.SSF&&(e.SSF=Pa(Tr)),e&&e.SSF&&(dx(),T5(e.SSF),t.revssf=j5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Nb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=GJ.indexOf(t.bookType)>-1,a=pO();IO(t=t||{});var s=rO(),i="",o=0;if(t.cellXfs=[],Q0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Zr(s,i,cJ(e.Props,t)),a.coreprops.push(i),oa(t.rels,2,i,dn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,Zr(s,i,AJ(e.Props)),a.extprops.push(i),oa(t.rels,3,i,dn.EXT_PROPS),e.Custprops!==e.Props&&bs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Zr(s,i,fJ(e.Custprops)),a.custprops.push(i),oa(t.rels,4,i,dn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Zr(s,i,S4e(o-1,i,t,e,d)),a.sheets.push(i),oa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,dn.WS[0])}if(f){var p=f["!comments"],x=!1,g="";p&&p.length>0&&(g="xl/comments"+o+"."+r,Zr(s,g,k4e(p,g)),a.comments.push(g),oa(d,-1,"../comments"+o+"."+r,dn.CMNT),x=!0),f["!legacy"]&&x&&Zr(s,"xl/drawings/vmlDrawing"+o+".vml",$J(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Zr(s,iy(i),hv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Zr(s,i,B4e(t.Strings,i,t)),a.strs.push(i),oa(t.wbrels,-1,"sharedStrings."+r,dn.SST)),i="xl/workbook."+r,Zr(s,i,_4e(e,i)),a.workbooks.push(i),oa(t.rels,1,i,dn.WB),i="xl/theme/theme1.xml",Zr(s,i,wO(e.Themes,t)),a.themes.push(i),oa(t.wbrels,-1,"theme/theme1.xml",dn.THEME),i="xl/styles."+r,Zr(s,i,N4e(e,i,t)),a.styles.push(i),oa(t.wbrels,-1,"styles."+r,dn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Zr(s,i,e.vbaraw),a.vba.push(i),oa(t.wbrels,-1,"vbaProject.bin",dn.VBA)),i="xl/metadata."+r,Zr(s,i,T4e(i)),a.metadata.push(i),oa(t.wbrels,-1,"metadata."+r,dn.XLMETA),Zr(s,"[Content_Types].xml",iJ(a,t)),Zr(s,"_rels/.rels",hv(t.rels)),Zr(s,"xl/_rels/workbook."+r+".rels",hv(t.wbrels)),delete t.revssf,delete t.ssf,s}function YBe(e,t){Gg=1024,e&&!e.SSF&&(e.SSF=Pa(Tr)),e&&e.SSF&&(dx(),T5(e.SSF),t.revssf=j5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Nb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=GJ.indexOf(t.bookType)>-1,a=pO();IO(t=t||{});var s=rO(),i="",o=0;if(t.cellXfs=[],Q0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Zr(s,i,cJ(e.Props,t)),a.coreprops.push(i),oa(t.rels,2,i,dn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,Zr(s,i,AJ(e.Props)),a.extprops.push(i),oa(t.rels,3,i,dn.EXT_PROPS),e.Custprops!==e.Props&&bs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Zr(s,i,fJ(e.Custprops)),a.custprops.push(i),oa(t.rels,4,i,dn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Zr(s,i,aZ(o-1,t,e,f)),a.sheets.push(i),oa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,dn.WS[0])}if(m){var x=m["!comments"],g=!1,b="";if(x&&x.length>0){var y=!1;x.forEach(function(_){_[1].forEach(function(S){S.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,Zr(s,b,a_e(x,d,t)),a.threadedcomments.push(b),oa(f,-1,"../threadedComments/threadedComment"+o+"."+r,dn.TCMNT)),b="xl/comments"+o+"."+r,Zr(s,b,KJ(x)),a.comments.push(b),oa(f,-1,"../comments"+o+"."+r,dn.CMNT),g=!0}m["!legacy"]&&g&&Zr(s,"xl/drawings/vmlDrawing"+o+".vml",$J(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&Zr(s,iy(i),hv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Zr(s,i,FJ(t.Strings,t)),a.strs.push(i),oa(t.wbrels,-1,"sharedStrings."+r,dn.SST)),i="xl/workbook."+r,Zr(s,i,cZ(e)),a.workbooks.push(i),oa(t.rels,1,i,dn.WB),i="xl/theme/theme1.xml",Zr(s,i,wO(e.Themes,t)),a.themes.push(i),oa(t.wbrels,-1,"theme/theme1.xml",dn.THEME),i="xl/styles."+r,Zr(s,i,QJ(e,t)),a.styles.push(i),oa(t.wbrels,-1,"styles."+r,dn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Zr(s,i,e.vbaraw),a.vba.push(i),oa(t.wbrels,-1,"vbaProject.bin",dn.VBA)),i="xl/metadata."+r,Zr(s,i,zJ()),a.metadata.push(i),oa(t.wbrels,-1,"metadata."+r,dn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Zr(s,i,i_e(d)),a.people.push(i),oa(t.wbrels,-1,"persons/person.xml",dn.PEOPLE)),Zr(s,"[Content_Types].xml",iJ(a,t)),Zr(s,"_rels/.rels",hv(t.rels)),Zr(s,"xl/_rels/workbook."+r+".rels",hv(t.wbrels)),delete t.revssf,delete t.ssf,s}function jO(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=gc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function JBe(e,t){return vr.find(e,"EncryptedPackage")?qBe(e,t):fZ(e,t)}function ZBe(e,t){var r,n=e,a=t||{};return a.type||(a.type=sn&&Buffer.isBuffer(e)?"buffer":"base64"),r=DY(n,a),GBe(r,a)}function yZ(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return MI(e.slice(r),t);default:break e}return Fv.to_workbook(e,t)}function eke(e,t){var r="",n=jO(e,t);switch(t.type){case"base64":r=gc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=cp(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=xa(r)),t.type="binary",yZ(r,t)}function tke(e,t){var r=e;return t.type=="base64"&&(r=gc(r)),r=ey.utils.decode(1200,r.slice(2),"str"),t.type="binary",yZ(r,t)}function rke(e){return e.match(/[^\x00-\x7F]/)?rA(e):e}function rk(e,t,r,n){return n?(r.type="string",Fv.to_workbook(e,r)):Fv.to_workbook(t,r)}function fy(e,t){Y6();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return fy(new Uint8Array(e),(r=Pa(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),pv={},r.dateNF&&(pv.dateNF=r.dateNF),r.type||(r.type=sn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=sn?"buffer":"binary",n=Xbe(e),typeof Uint8Array<"u"&&!sn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=rke(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Pa(r),r.type="array",fy(J6(n),r)}switch((a=jO(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return JBe(vr.read(n,r),r);break;case 9:if(a[1]<=8)return fZ(n,r);break;case 60:return MI(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return oEe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return IJ.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?ZBe(n,r):rk(e,n,r,s);case 239:return a[3]===60?MI(n,r):rk(e,n,r,s);case 255:if(a[1]===254)return tke(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Km.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Km.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return UI.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return LJ.to_workbook(n,r);break;case 10:case 13:case 32:return eke(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return iEe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?UI.to_workbook(n,r):rk(e,n,r,s)}function wZ(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return tw(t.file,vr.write(e,{type:sn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vr.write(e,t)}function nke(e,t){var r=Pa(t||{}),n=WBe(e,r);return ake(n,r)}function ake(e,t){var r={},n=sn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(k5(a))}return t.password&&typeof encrypt_agile<"u"?wZ(encrypt_agile(a,t.password),t):t.type==="file"?tw(t.file,a):t.type=="string"?xa(a):a}function ske(e,t){var r=t||{},n=rBe(e,r);return wZ(n,r)}function Gd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return ty(rA(n));case"binary":return rA(n);case"string":return e;case"file":return tw(t.file,n,"utf8");case"buffer":return sn?Hf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Gd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function ike(e,t){switch(t.type){case"base64":return ty(e);case"binary":return e;case"string":return e;case"file":return tw(t.file,e,"binary");case"buffer":return sn?Hf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Z2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?ty(r):t.type=="string"?xa(r):r;case"file":return tw(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function EZ(e,t){Y6(),JNe(e);var r=Pa(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=EZ(e,r);return r.type="array",k5(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Gd(W4e(e,r),r);case"slk":case"sylk":return Gd(TJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Gd(mZ(e.Sheets[e.SheetNames[a]],r),r);case"txt":return ike(CZ(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Gd(OO(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Gd(IJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return Z2(UI.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Gd(Fv.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Gd(LJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Gd(jJ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Gd(xZ(e,r),r);case"wk1":return Z2(Km.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return Z2(Km.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Z2(hZ(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),ske(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return nke(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function oke(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function FO(e,t,r){var n={};return n.type="file",n.file=t,oke(n),EZ(e,n)}function lke(e,t,r,n,a,s,i,o){var l=Rs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var x=i?e[r][p]:e[n[p]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(m[s[p]]=u);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(g==null)if(x.t=="e"&&g===null)m[s[p]]=null;else if(u!==void 0)m[s[p]]=u;else if(d&&g===null)m[s[p]]=null;else continue;else m[s[p]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?g:Bf(x,g,o);g!=null&&(f=!1)}}return{row:m,isempty:f}}function B_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=jn(d);break;case"number":l=jn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var f=Rs(l.s.r),m=[],p=[],x=0,g=0,b=Array.isArray(e),y=l.s.r,_=0,S={};b&&!e[y]&&(e[y]=[]);var B=u.skipHidden&&e["!cols"]||[],I=u.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(B[_]||{}).hidden)switch(m[_]=Xa(_),r=b?e[y][_]:e[m[_]+f],n){case 1:s[_]=_-l.s.c;break;case 2:s[_]=m[_];break;case 3:s[_]=u.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=Bf(r,null,u),g=S[i]||0,!g)S[i]=1;else{do o=i+"_"+g++;while(S[o]);S[i]=g,S[o]=1}s[_]=o}for(y=l.s.r+a;y<=l.e.r;++y)if(!(I[y]||{}).hidden){var D=lke(e,l,y,m,n,s,b,u);(D.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=D.row)}return p.length=x,p}var O9=/"/g;function cke(e,t,r,n,a,s,i,o){for(var l=!0,u=[],d="",f=Rs(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=o.dense?(e[r]||[])[m]:e[n[m]+f];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:Bf(p,null,o));for(var x=0,g=0;x!==d.length;++x)if((g=d.charCodeAt(x))===a||g===s||g===34||o.forceQuotes){d='"'+d.replace(O9,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(O9,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function OO(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=jn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(m[x]||{}).hidden||(f[x]=Xa(x));for(var g=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=cke(e,a,b,f,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?o:"")+d)));return delete n.dense,r.join("")}function CZ(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=OO(e,t);return r}function uke(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=jn(e["!ref"]),s="",i=[],o,l=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=Xa(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=Rs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function _Z(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Ya(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=jn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var m=n.header||[],p=0;t.forEach(function(g,b){bs(g).forEach(function(y){(p=m.indexOf(y))==-1&&(m[p=m.length]=y);var _=g[y],S="z",B="",I=Fr({c:o+p,r:i+b+a});u=hy(s,I),_&&typeof _=="object"&&!(_ instanceof Date)?s[I]=_:(typeof _=="number"?S="n":typeof _=="boolean"?S="b":typeof _=="string"?S="s":_ instanceof Date?(S="d",n.cellDates||(S="n",_=pi(_)),B=n.dateNF||Tr[14]):_===null&&n.nullError&&(S="e",_=0),u?(u.t=S,u.v=_,delete u.w,delete u.R,B&&(u.z=B)):s[I]=u={t:S,v:_},B&&(u.z=B))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var x=Rs(i);if(a)for(p=0;p<m.length;++p)s[Xa(p+o)+x]={t:"s",v:m[p]};return s["!ref"]=Gr(d),s}function dke(e,t){return _Z(null,e,t)}function hy(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ya(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?hy(e,Fr(t)):hy(e,Fr({r:t,c:r||0}))}function Ake(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function DO(){return{SheetNames:[],Sheets:{}}}function PO(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(lZ(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function fke(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Ake(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function hke(e,t){return e.z=t,e}function SZ(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function mke(e,t,r){return SZ(e,"#"+t,r)}function pke(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function gke(e,t,r,n){for(var a=typeof t!="string"?t:jn(t),s=typeof t=="string"?t:Gr(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=hy(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var lu={encode_col:Xa,encode_row:Rs,encode_cell:Fr,encode_range:Gr,decode_col:uO,decode_row:cO,split_cell:Bye,decode_cell:Ya,decode_range:Ol,format_cell:Bf,sheet_add_aoa:ZY,sheet_add_json:_Z,sheet_add_dom:pZ,aoa_to_sheet:Ax,json_to_sheet:dke,table_to_sheet:gZ,table_to_book:CBe,sheet_to_csv:OO,sheet_to_txt:CZ,sheet_to_json:B_,sheet_to_html:mZ,sheet_to_formulae:uke,sheet_to_row_object_array:B_,sheet_get_cell:hy,book_new:DO,book_append_sheet:PO,book_set_sheet_visibility:fke,cell_set_number_format:hke,cell_set_hyperlink:SZ,cell_set_internal_link:mke,cell_add_comment:pke,sheet_set_array_formula:gke,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const vke=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Ft(Mr,l),d=await ti(u),f=d.size;n+=f,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:f});let m=0;d.docs.forEach(p=>{const x=p.data();x.createdAt&&new Date(x.createdAt)>=t&&m++}),a+=m}catch(u){console.warn(`Error accediendo a coleccin ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Ft(Mr,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=tr(l,Mn("timestamp",">=",u.toISOString()),qr("timestamp","desc")),f=await ti(d),m={};f.docs.forEach(p=>{const x=p.data(),g=new Date(x.timestamp).toLocaleDateString("es-CL");m[g]=(m[g]||0)+1}),Object.entries(m).sort(([p],[x])=>new Date(p).getTime()-new Date(x).getTime()).forEach(([p,x])=>{i.push({label:p,value:x})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},D9=500,gg=({title:e,value:t,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),nk=({title:e,data:t,colorClass:r})=>{const n=T.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},xke=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),[a,s]=T.useState(null),[i,o]=T.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});T.useEffect(()=>{n(!0);const f=uxe(x=>{t(x),n(!1)}),m=async()=>{try{const x=await vke();o(x)}catch(x){console.error("Error al cargar estadsticas de Firestore:",x)}};m();const p=setInterval(m,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:l,userStats:u,moduleStats:d}=T.useMemo(()=>{const f=new Date,m=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=m-f.getDay()*24*60*60*1e3,x=new Date(f.getFullYear(),f.getMonth(),1).getTime(),g={today:0,week:0,month:0},b={},y={};e.forEach(B=>{const I=new Date(B.timestamp).getTime();I>=m&&g.today++,I>=p&&g.week++,I>=x&&g.month++;const D=B.userEmail||"Desconocido";b[D]||(b[D]={email:D,today:0,month:0,total:0}),b[D].total++,I>=m&&b[D].today++,I>=x&&b[D].month++,y[B.module]=(y[B.module]||0)+1});const _=Object.values(b).sort((B,I)=>I.total-B.total),S=Object.entries(y).map(([B,I])=>({label:B,value:I})).sort((B,I)=>I.value-B.value);return{stats:g,userStats:_,moduleStats:S}},[e]);return c.jsxs("div",{className:"space-y-8",children:[a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(gg,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Lmite recomendado: ${D9}`,alert:l.today>D9}),c.jsx(gg,{title:"Llamadas esta Semana",value:r?"--":l.week}),c.jsx(gg,{title:"Llamadas este Mes",value:r?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(nk,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(gg,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(gg,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(gg,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(nk,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(nk,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bke="type.googleapis.com/google.protobuf.Int64Value",yke="type.googleapis.com/google.protobuf.UInt64Value";function NZ(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function k_(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>k_(t));if(typeof e=="function"||typeof e=="object")return NZ(e,t=>k_(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Dv(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case bke:case yke:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Dv(t)):typeof e=="function"||typeof e=="object"?NZ(e,t=>Dv(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tl extends id{constructor(t,r,n){super(`${RO}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Tl.prototype)}}function wke(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function T_(e,t){let r=wke(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!P9[i])return new Tl("internal","internal");r=P9[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Dv(a))}}catch{}return r==="ok"?null:new Tl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eke{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,lc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="us-central1",Cke=/^data: (.*?)(?:\n|$)/;function _ke(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Tl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Ske{constructor(t,r,n,a,s=VI,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Eke(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=VI}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Nke(e,t,r){const n=Uf(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(KS(e.emulatorOrigin),GS("Functions",!0))}function Bke(e,t,r){const n=a=>Tke(e,t,a,{});return n.stream=(a,s)=>jke(e,t,a,s),n}async function kke(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function BZ(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Tke(e,t,r,n){const a=e._url(t);return Ike(e,a,r,n)}async function Ike(e,t,r,n){r=k_(r);const a={data:r},s=await BZ(e,n),i=n.timeout||7e4,o=_ke(i),l=await Promise.race([kke(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new Tl("cancelled","Firebase Functions instance was deleted.");const u=T_(l.status,l.json);if(u)throw u;if(!l.json)throw new Tl("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Tl("internal","Response is missing data field.");return{data:Dv(d)}}function jke(e,t,r,n){const a=e._url(t);return Fke(e,a,r,n||{})}async function Fke(e,t,r,n){var m;r=k_(r);const a={data:r},s=await BZ(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const g=new Tl("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const x=T_(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let o,l;const u=new Promise((p,x)=>{o=p,l=x});(m=n==null?void 0:n.signal)==null||m.addEventListener("abort",()=>{const p=new Tl("cancelled","Request was cancelled.");l(p)});const d=i.body.getReader(),f=Oke(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:x,done:g}=await p.read();return{value:x,done:g}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function Oke(e,t,r,n){const a=(i,o)=>{const l=i.match(Cke);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){t(Dv(d.result));return}if("message"in d){o.enqueue(Dv(d.message));return}if("error"in d){const f=T_(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Tl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new Tl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const m=new Tl("cancelled","Request was cancelled");i.error(m),r(m),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const m of f)m.trim()&&a(m.trim(),i);return l()}catch(u){const d=u instanceof Tl?u:T_(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const R9="@firebase/functions",L9="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dke="auth-internal",Pke="app-check-internal",Rke="messaging-internal";function Lke(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(Dke),i=r.getProvider(Rke),o=r.getProvider(Pke);return new Ske(a,s,i,o,n)};x0(new wf(RO,t,"PUBLIC").setMultipleInstances(!0)),fu(R9,L9,e),fu(R9,L9,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(e=qS(),t=VI){const n=Ry(ba(e),RO).getImmediate({identifier:t}),a=LF("functions");return a&&Uke(n,...a),n}function Uke(e,t,r){Nke(ba(e),t,r)}function vg(e,t,r){return Bke(ba(e),t)}Lke();const U9=Ft(Mr,"usuarios");async function kZ(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",U9);const e=await ti(U9);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(r=>{const n=r.data();return console.log(" [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const M9=Object.values(Kt),ak=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",Mke=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!1),[a,s]=T.useState("Usuarios"),[i,o]=T.useState({nombreCompleto:"",email:"",rut:"",profile:Kt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=T.useState(null),[d,f]=T.useState(""),[m,p]=T.useState(""),[x,g]=T.useState(""),[b,y]=T.useState(null),[_,S]=T.useState(null),[B,I]=T.useState(null),D=T.useCallback(async()=>{n(!0);try{const H=await kZ();t(H)}catch(H){console.error("Error al cargar usuarios",H),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);T.useEffect(()=>{D()},[D]);const E=T.useCallback(H=>{const{name:z,value:G}=H.target;o(ne=>({...ne,[z]:G,curso:z==="profile"&&G!==Kt.ESTUDIANTE?"":ne.curso,cursos:z==="profile"&&G!==Kt.PROFESORADO?[]:ne.cursos,asignaturas:z==="profile"&&G!==Kt.PROFESORADO?[]:ne.asignaturas}))},[]),C=T.useCallback((H,z)=>{o(G=>{const ne=G[H]||[],R=ne.includes(z)?ne.filter(q=>q!==z):[...ne,z];return{...G,[H]:R}})},[]),N=T.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Kt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),P=T.useCallback(async H=>{H.preventDefault(),y(null);const{nombreCompleto:z,email:G,profile:ne,curso:R,password:q}=i;if(!z.trim()||!G.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ne===Kt.ESTUDIANTE&&!R){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(q!=null&&q.trim())){y("La contrasea es obligatoria al crear un nuevo usuario.");return}const Y=w1();try{if(l){const te=vg(Y,"updateUser"),ie={...i,password:(q==null?void 0:q.trim())||void 0,curso:ne===Kt.ESTUDIANTE?ak(R||""):void 0};await te(ie)}else{const te=vg(Y,"createUser"),ie={...i,curso:ne===Kt.ESTUDIANTE?ak(R||""):void 0};await te(ie)}await D(),N()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,l,D,N]),O=T.useCallback(H=>{u(H.email),o({nombreCompleto:H.nombreCompleto,email:H.email,rut:H.rut||"",profile:H.profile,password:"",curso:H.curso||"",cursos:H.cursos||[],asignaturas:H.asignaturas||[]}),setTimeout(()=>{const z=document.querySelector("form");z&&z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),F=T.useCallback(async H=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${H}? Esta accin es irreversible.`))try{const z=w1();await vg(z,"deleteUser")({email:H}),await D()}catch(z){console.error("Error al eliminar usuario:",z),y(z.message||"No se pudo borrar el usuario.")}},[D]),M=async H=>{var q;const z=(q=H.target.files)==null?void 0:q[0];if(!z)return;S({message:"Procesando archivo...",isError:!1});const G=w1(),ne=vg(G,"createUser"),R=new FileReader;R.onload=async Y=>{var te;try{const ie=new Uint8Array((te=Y.target)==null?void 0:te.result),pe=fy(ie,{type:"array"}),oe=pe.Sheets[pe.SheetNames[0]],ce=lu.sheet_to_json(oe);if(ce.length===0){S({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(Ce=>{const fe=Ce.Nombre||Ce.nombre,Ie=Ce.Correo||Ce.correo||Ce.Email||Ce.email,He=Ce.Curso||Ce.curso,Xe=Ce.RUT||Ce.rut;return!fe||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Kt.ESTUDIANTE,curso:ak(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(dt=>({email:Ie,error:dt.message}))}),Fe=await Promise.all(ge),re=Fe.filter(Ce=>!Ce.error).length,Ne=Fe.filter(Ce=>Ce.error);let Oe=`Carga completada. ${re} estudiantes agregados.`;Ne.length>0&&(Oe+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),S({message:Oe,isError:Ne.length>0}),await D()}catch(ie){S({message:`Error: ${ie.message}`,isError:!0})}},R.readAsArrayBuffer(z),H.target.value=""},Q=async H=>{var q;const z=(q=H.target.files)==null?void 0:q[0];if(!z)return;I({message:"Procesando archivo...",isError:!1});const G=w1(),ne=vg(G,"createUser"),R=new FileReader;R.onload=async Y=>{var te;try{const ie=new Uint8Array((te=Y.target)==null?void 0:te.result),pe=fy(ie,{type:"array"}),oe=pe.Sheets[pe.SheetNames[0]],ce=lu.sheet_to_json(oe);if(ce.length===0){I({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const ge=ce.map(Ce=>{const fe=Ce.Nombre||Ce.nombre,Ie=Ce.Correo||Ce.correo||Ce.Email||Ce.email,He=Ce.Perfil||Ce.perfil||Ce.Profile||Ce.profile,Xe=Ce.RUT||Ce.rut;return!fe||!Ie||!He?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ne({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(dt=>({email:Ie,error:dt.message}))}),Fe=await Promise.all(ge),re=Fe.filter(Ce=>!Ce.error).length,Ne=Fe.filter(Ce=>Ce.error);let Oe=`Carga completada. ${re} usuarios agregados.`;Ne.length>0&&(Oe+=` ${Ne.length} fallaron.`,console.error("Errores en carga masiva:",Ne)),I({message:Oe,isError:Ne.length>0}),await D()}catch(ie){I({message:`Error: ${ie.message}`,isError:!0})}},R.readAsArrayBuffer(z),H.target.value=""},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",W=T.useMemo(()=>Array.from(new Set(e.filter(H=>H.profile===Kt.ESTUDIANTE&&H.curso).map(H=>H.curso))).sort(),[e]),Z=T.useMemo(()=>e.filter(H=>(d===""||H.nombreCompleto.toLowerCase().includes(d.toLowerCase())||H.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||H.profile===m)&&(x===""||H.curso===x)),[e,d,m,x]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),_&&c.jsx("p",{className:`text-sm mt-2 ${_.isError?"text-red-600":"text-green-600"}`,children:_.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),B&&c.jsx("p",{className:`text-sm mt-2 ${B.isError?"text-red-600":"text-green-600"}`,children:B.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:J,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:l?"Dejar en blanco para no cambiar":"Contrasea temporal",className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:E,className:J,required:!0,children:M9.map(H=>c.jsx("option",{value:H,children:H},H))})]}),i.profile===Kt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:J,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Wa.map(H=>c.jsx("option",{value:H,children:H},H))]})]})]}),i.profile===Kt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Wa.map(H=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.cursos)==null?void 0:z.includes(H))||!1,onChange:()=>C("cursos",H),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),i.profile===Kt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Pi.map(H=>{var z;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((z=i.asignaturas)==null?void 0:z.includes(H))||!1,onChange:()=>C("asignaturas",H),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:H})]},H)})})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const H=w1(),G=await vg(H,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",G),y(" Custom claim agregado exitosamente")}catch(H){console.error(" Error al agregar custom claim:",H),y(`Error: ${H.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var H,z,G,ne,R;try{const{auth:q}=await d_(async()=>{const{auth:ie}=await Promise.resolve().then(()=>Vme);return{auth:ie}},void 0);console.log(" Usuario actual:",(H=q.currentUser)==null?void 0:H.email);const Y=await((z=q.currentUser)==null?void 0:z.getIdToken(!0));console.log(" Token refreshed:",!!Y);const te=await((G=q.currentUser)==null?void 0:G.getIdTokenResult());console.log(" Claims completos:",te==null?void 0:te.claims),console.log(" Profile claim:",(ne=te==null?void 0:te.claims)==null?void 0:ne.profile),((R=te==null?void 0:te.claims)==null?void 0:R.profile)==="SUBDIRECCION"?y(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(` Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(q){console.error(" Error verificando token:",q),y(`Error verificando token: ${q.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:H=>f(H.target.value),className:J})}),c.jsx("div",{children:c.jsxs("select",{value:m,onChange:H=>p(H.target.value),className:J,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),M9.map(H=>c.jsx("option",{value:H,children:H},H))]})}),c.jsx("div",{children:c.jsxs("select",{value:x,onChange:H=>g(H.target.value),className:J,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),W.map(H=>c.jsx("option",{value:H,children:H},H))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:H.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:H.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.profile===Kt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":H.profile===Kt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:H.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[H.profile===Kt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:H.curso||"Sin curso"}),H.profile===Kt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[H.cursos&&H.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.cursos.slice(0,3).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:z},z)),H.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.cursos.length-3]})]})]}),H.asignaturas&&H.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[H.asignaturas.slice(0,2).map(z=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:z},z)),H.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",H.asignaturas.length-2]})]})]}),(!H.cursos||H.cursos.length===0)&&(!H.asignaturas||H.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),H.profile!==Kt.ESTUDIANTE&&H.profile!==Kt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>O(H),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),c.jsx("button",{onClick:()=>F(H.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},H.email))})]}),Z.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&c.jsx(xke,{})]})},Pv="seguimiento_dual_records",Qke=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},Hke=e=>{const t=tr(Ft(Nt,Pv),qr("nombreEstudiante","asc"));return yr(t,n=>{const a=n.docs.map(s=>Qke(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},I_=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=hr.fromDate(new Date(t[n]+"T00:00:00")))}),t},Vke=async e=>{try{const t=I_(e);return(await da(Ft(Nt,Pv),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},Q9=async(e,t)=>{try{const r=br(Nt,Pv,e),n=I_(t);await io(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},zke=async e=>{try{const t=br(Nt,Pv,e);await ni(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},$ke=async e=>{const t=R6(Nt),r=Ft(Nt,Pv);let n=0,a=0;for(const s of e){const i=tr(r,Mn("rutEstudiante","==",s.rutEstudiante)),o=await ti(i);if(o.empty){const l=br(r);t.set(l,I_(s)),a++}else{const l=o.docs[0].id,u=br(Nt,Pv,l);t.set(u,I_(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},Kke={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Gke=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},qke=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},Wke=({record:e,onSave:t,onClose:r})=>{const[n,a]=T.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:f,checked:m}=l.target;a(p=>({...p,[u]:f==="checkbox"?m:d}))},o=()=>{t(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),c.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),c.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),c.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),c.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),c.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Xke=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),a=T.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Hm[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:kB[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=T.useState(a),[o,l]=T.useState(null),[u,d]=T.useState(""),[f,m]=T.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,x]=T.useState(null),[g,b]=T.useState(null),[y,_]=T.useState(!1),[S,B]=T.useState(null);T.useEffect(()=>{n(!0);const H=Hke(z=>{t(z),n(!1)});return()=>H()},[]);const I=T.useCallback(H=>{const{name:z,value:G}=H.target;i(ne=>({...ne,[z]:G}))},[]),D=T.useCallback(H=>{const{name:z,value:G}=H.target;m(ne=>({...ne,[z]:G}))},[]),E=T.useCallback(()=>{i(a),l(null),x(null)},[a]),C=async H=>{H.preventDefault(),x(null);const G=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ne=>{var R;return!((R=s[ne])!=null&&R.trim())});if(G){x(`El campo '${G}' es obligatorio.`);return}try{o?await Q9(o,s):await Vke(s),E()}catch(ne){console.error(ne),x("No se pudo guardar el registro.")}},N=T.useCallback(H=>{window.scrollTo({top:0,behavior:"smooth"}),l(H.id),i(H)},[]),P=async H=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await zke(H)}catch(z){console.error(z),x("No se pudo eliminar el registro.")}},O=H=>{B(H),_(!0)},F=()=>{B(null),_(!1)},M=async H=>{try{await Q9(H.id,H),F()}catch(z){console.error(z),alert("No se pudieron guardar los cambios de supervisin.")}},Q=()=>{const H=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],z=lu.aoa_to_sheet([H]),G=lu.book_new();lu.book_append_sheet(G,z,"Plantilla"),FO(G,"Plantilla_Seguimiento_Dual.xlsx")},J=H=>{var ne;const z=(ne=H.target.files)==null?void 0:ne[0];if(!z)return;b({message:"Procesando archivo...",isError:!1});const G=new FileReader;G.onload=async R=>{var q;try{const Y=new Uint8Array((q=R.target)==null?void 0:q.result),te=fy(Y,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ie=te.SheetNames[0],pe=te.Sheets[ie],oe=lu.sheet_to_json(pe,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo est vaco.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},ge=Object.keys(oe[0]).map(Oe=>Oe.trim().toLowerCase()),re=["nombre","rut","curso 2025","empresa","estado"].find(Oe=>!ge.includes(Oe));if(re)throw new Error(`Falta la columna requerida: '${re}'`);const Ne=oe.map((Oe,Ce)=>{try{const fe={};for(const Ie in Oe){const He=ce[Ie.trim().toLowerCase()];if(He){let Xe=Oe[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=Gke(Xe),Xe&&(fe[He]=Xe)):He.includes("realizada")?fe[He]=qke(Xe):Xe!=null&&Xe!==""&&(fe[He]=String(Xe).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${Ce+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${Ce+2}:`,fe),null}}).filter(Oe=>Oe!==null);if(console.log("Registros procesados:",Ne),Ne.length>0){const{updated:Oe,created:Ce}=await $ke(Ne);b({message:`Carga exitosa. ${Ce} registros creados, ${Oe} actualizados.`,isError:!1})}else b({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Y){console.error("Error completo:",Y),b({message:`Error al procesar el archivo: ${Y.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},G.readAsArrayBuffer(z)},W="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=T.useMemo(()=>e.filter(H=>(u===""||H.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||H.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||H.rutEstudiante.includes(u))&&(f.curso===""||H.curso===f.curso)&&(f.empresa===""||H.nombreEmpresa===f.empresa)&&(f.estado===""||H.estado===f.estado)&&(f.comuna===""||H.comuna===f.comuna)&&(f.profesor===""||H.profesorTutorEmpresa===f.profesor)).sort((H,z)=>H.nombreEstudiante.localeCompare(z.nombreEstudiante)),[e,u,f]);return T.useMemo(()=>{const H=new Set,z=new Set;return e.forEach(G=>{G.nombreEmpresa&&H.add(G.nombreEmpresa),G.comuna&&z.add(G.comuna)}),{empresas:Array.from(H).sort(),comunas:Array.from(z).sort()}},[e]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:I,className:W,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:I,className:W,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:s.curso,onChange:I,className:W,required:!0,children:Hm.map(H=>c.jsx("option",{value:H,children:H},H))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:I,className:W,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),fI.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:I,className:W,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:I,className:W})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:I,className:W})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:I,className:W})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:s.estado,onChange:I,className:W,children:kB.map(H=>c.jsx("option",{value:H,children:H},H))})]})]}),s.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:I,className:`${W} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:I,className:`${W} border-red-300`})]})]}),p&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:Q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:J,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:H=>d(H.target.value),className:`${W} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:f.curso,onChange:D,className:W,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Hm.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"estado",value:f.estado,onChange:D,className:W,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),kB.map(H=>c.jsx("option",{children:H},H))]}),c.jsxs("select",{name:"profesor",value:f.profesor,onChange:D,className:W,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),fI.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(H=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:H.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:H.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Kke[H.estado]}`,children:H.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>O(H),className:"text-blue-600 hover:underline",children:"Supervisin"}),c.jsx("button",{onClick:()=>N(H),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>P(H.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},H.id))})]})})]}),y&&S&&c.jsx(Wke,{record:S,onClose:F,onSave:M})]})},TZ="actividades_remotas",Yke="respuestas_actividades",IZ="pruebas_estandarizadas",Jke="usuarios",LO=e=>{var r,n,a,s,i,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((s=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(i=t.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||t.fechaCompletado}},Zke=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((s=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.plazoEntrega}},eTe=e=>{const t=tr(Ft(Nt,TZ),qr("fechaCreacion","desc"));return yr(t,n=>{const a=n.docs.map(s=>LO(s));e(a)},n=>{console.error("Error al suscribirse a las actividades:",n),e([])})},tTe=async e=>{try{const t={...e,fechaCreacion:hr.fromDate(new Date),plazoEntrega:hr.fromDate(new Date(e.plazoEntrega+"T00:00:00"))};return(await da(Ft(Nt,TZ),t)).id}catch(t){throw console.error("Error al crear la actividad:",t),new Error("No se pudo crear la actividad.")}},rTe=e=>{const t=tr(Ft(Nt,IZ),qr("fechaCreacion","desc"));return yr(t,n=>{const a=n.docs.map(s=>Zke(s));e(a)},n=>{console.error("Error al suscribirse a las pruebas estandarizadas:",n),e([])})},nTe=async e=>{try{const t={...e,fechaCreacion:hr.fromDate(new Date),plazoEntrega:hr.fromDate(new Date(e.plazoEntrega+"T00:00:00"))};return(await da(Ft(Nt,IZ),t)).id}catch(t){throw console.error("Error al crear la prueba estandarizada:",t),new Error("No se pudo crear la prueba estandarizada.")}},aTe=e=>{const t=tr(Ft(Nt,Yke));return yr(t,n=>{const a=n.docs.map(s=>LO(s));e(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),e([])})},sTe=e=>{const t=tr(Ft(Nt,Jke));return yr(t,n=>{const a=n.docs.map(s=>LO(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},sk={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3]},ik=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],iTe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=a=>r(a)}),oTe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState([]),[i,o]=T.useState([]),[l,u]=T.useState(null),[d,f]=T.useState(null),[m,p]=T.useState(!1),[x,g]=T.useState(!1),[b,y]=T.useState(!1),[_,S]=T.useState(!0),[B,I]=T.useState(null),[D,E]=T.useState(""),[C,N]=T.useState(null),[P,O]=T.useState(null),[F,M]=T.useState([]),[Q,J]=T.useState("actividades"),W={asignatura:Pi[0],nivel:$g[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},Z={asignatura:Pi[0],nivel:$g[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[H,z]=T.useState(W),[G,ne]=T.useState(Z);T.useEffect(()=>{S(!0);const Pe=eTe(t),Re=rTe(n),Te=aTe(s),ot=sTe(vt=>{o(vt),S(!1)});return()=>{Pe(),Re(),Te(),ot()}},[]);const R=Pe=>{z(Re=>({...Re,[Pe.target.name]:Pe.target.value}))},q=Pe=>{ne(Re=>({...Re,[Pe.target.name]:Pe.target.value}))},Y=Pe=>{z(Re=>({...Re,recursos:{...Re.recursos,[Pe.target.name]:Pe.target.value}}))},te=Pe=>{Pe.target.files&&M(Array.from(Pe.target.files))},ie=Pe=>{z(Re=>{const Te=Re.tipos.includes(Pe)?Re.tipos.filter(vt=>vt!==Pe):[...Re.tipos,Pe],ot={...Re.cantidadPreguntas};return Te.includes(Pe)?ot[Pe]||(ot[Pe]=sk[Pe][0]):delete ot[Pe],{...Re,tipos:Te,cantidadPreguntas:ot}})},pe=(Pe,Re)=>{z(Te=>({...Te,cantidadPreguntas:{...Te.cantidadPreguntas,[Pe]:Re}}))},oe=(Pe,Re=!1)=>{(Re?ne:z)(ot=>{const vt=ot.cursosDestino||[],ur=vt.includes(Pe)?vt.filter(Gt=>Gt!==Pe):[...vt,Pe];return{...ot,cursosDestino:ur}})},ce=(Pe,Re=!1)=>{(Re?ne:z)(ot=>{const vt=ot.estudiantesDestino||[],ur=vt.includes(Pe)?vt.filter(Gt=>Gt!==Pe):[...vt,Pe];return{...ot,estudiantesDestino:ur}})},ge=()=>{const{tipos:Pe,contenido:Re,asignatura:Te,nivel:ot,cantidadPreguntas:vt}=H;let ur=`Eres un experto diseador de actividades pedaggicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${Re}"
Asignatura: ${Te}
Nivel: ${ot}

Genera los siguientes elementos:
- **introduccion**: Una breve introduccin motivadora para el estudiante sobre el tema: "${Re}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return Pe.forEach(Gt=>{const Rt=vt[Gt]||sk[Gt][0];switch(Gt){case"Quiz":ur+=`- **Quiz**: Un array de ${Rt} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings), "respuestaCorrecta" (string), y "puntaje" (number, usualmente 1).
`;break;case"Comprensin de Lectura":ur+=`- **Comprensin de Lectura**: Un objeto que debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de ${Rt} objetos, cada uno con "pregunta", "opciones", "respuestaCorrecta" y "puntaje").
`;break;case"Trminos Pareados":ur+=`- **Trminos Pareados**: Un array de ${Rt} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":ur+=`- **Desarrollo**: Un array de ${Rt} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rbrica de evaluacin).
`;break}}),ur},Fe=()=>{const{contenido:Pe,objetivosAprendizaje:Re,asignatura:Te,nivel:ot}=G;return`Eres un experto en evaluacin educativa y diseo de pruebas SIMCE. 

IMPORTANTE: Responde NICAMENTE con un objeto JSON vlido, sin comentarios, sin texto adicional, sin explicaciones.

INFORMACIN DE LA PRUEBA:
- Asignatura: ${Te}
- Nivel: ${ot}
- Contenido: ${Pe}
- Objetivos: ${Re}

RESPONDE SOLO CON ESTE JSON (sin comentarios, sin texto extra):
{
  "titulo": "Ttulo descriptivo de la prueba",
  "instrucciones": "Instrucciones claras para el estudiante",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo del texto",
      "contenido": "Texto completo de 200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Texto de la pregunta",
      "opciones": ["Opcin A completa", "Opcin B completa", "Opcin C completa", "Opcin D completa"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar informacin",
      "justificacion": "Explicacin breve de por qu es correcta",
      "textoId": 1
    }
  ]
}

REGLAS OBLIGATORIAS:
- ${Te==="Lenguaje y Comunicacin"||Te==="Lengua y Literatura"?"3-4 textos de lectura de diferentes tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas del 1 al 30
- Cada pregunta con exactamente 4 opciones completas y especficas
- Respuesta correcta: solo "A", "B", "C" o "D"
- Habilidades: ${ik.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios en el JSON
- Texto tipo debe ser: "narrativo", "informativo", "argumentativo" o "poetico"

JSON vlido sin comentarios:`};function re(Pe,Re){if(Pe==="Desarrollo"){if(Array.isArray(Re))return Re.map(Te=>{if(typeof Te=="string"){const ot=Te.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ot?{pregunta:ot[1].trim(),rubrica:ot[2].trim()}:{pregunta:Te.trim(),rubrica:""}}return Te&&typeof Te=="object"?{pregunta:Te.pregunta||Te.Pregunta||Te.texto||"",rubrica:Te.rubrica||Te.Rubrica||Te.rbrica||Te.Rbrica||""}:{pregunta:String(Te),rubrica:""}});if(typeof Re=="string")return Re.split(/\n\n|\n- |\d+\. /).map(Te=>{const ot=Te.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return ot?{pregunta:ot[1].trim(),rubrica:ot[2].trim()}:{pregunta:Te.trim(),rubrica:""}}).filter(Te=>Te.pregunta)}if(Pe==="Trminos Pareados"){if(Array.isArray(Re))return Re.map((Te,ot)=>{if(typeof Te=="string"){const vt=Te.match(/^(.+?)[\s:-]+(.+)$/);return vt?{id:ot,concepto:vt[1].trim(),definicion:vt[2].trim()}:{id:ot,concepto:Te.trim(),definicion:""}}return Te&&typeof Te=="object"?{id:ot,concepto:Te.concepto||Te.termino||"",definicion:Te.definicion||Te.significado||""}:{id:ot,concepto:String(Te),definicion:""}});if(typeof Re=="object"&&Re!==null)return Object.entries(Re).map(([Te,ot],vt)=>({id:vt,concepto:Te,definicion:String(ot)}));if(typeof Re=="string")return Re.split(/\n|;/).map((Te,ot)=>{const vt=Te.match(/^(.+?)[\s:-]+(.+)$/);return vt?{id:ot,concepto:vt[1].trim(),definicion:vt[2].trim()}:{id:ot,concepto:Te.trim(),definicion:""}}).filter(Te=>Te.concepto)}if(Pe==="Comprensin de Lectura"){if(Re&&typeof Re=="object"&&Array.isArray(Re.preguntas))return{texto:Re.texto||"",preguntas:Re.preguntas.map(Te=>({pregunta:Te.pregunta||Te.Pregunta||"",opciones:Te.opciones||Te.Opciones||[],respuestaCorrecta:Te.respuestaCorrecta||Te.respuesta||"",puntaje:Te.puntaje||1}))};if(Array.isArray(Re)){const Te=Re.find(ot=>ot&&typeof ot=="object"&&"texto"in ot&&"preguntas"in ot);return Te?{texto:Te.texto||"",preguntas:(Te.preguntas||[]).map(ot=>({pregunta:ot.pregunta||ot.Pregunta||"",opciones:ot.opciones||ot.Opciones||[],respuestaCorrecta:ot.respuestaCorrecta||ot.respuesta||"",puntaje:ot.puntaje||1}))}:{texto:Re.map(ot=>typeof ot=="string"?ot:JSON.stringify(ot)).join(`
`),preguntas:[]}}if(typeof Re=="string"){const[Te,ot]=Re.split(/Preguntas:|\nPreguntas:/i);let vt=[];return ot&&(vt=ot.split(/\n- |\n\d+\. /).filter(Boolean).map(ur=>{const Gt=ur.split(/Opciones:|\nOpciones:/i),Rt=Gt[0].trim();let Vr=[],dr="";Gt[1]&&(Vr=Gt[1].split(/;|\n|,/).map(Qr=>Qr.trim()).filter(Boolean));const yn=ur.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return yn&&(dr=yn[1].trim()),{pregunta:Rt,opciones:Vr,respuestaCorrecta:dr,puntaje:1}})),{texto:(Te==null?void 0:Te.trim())||Re,preguntas:vt}}}return Pe==="Quiz"&&Array.isArray(Re)?Re.map(Te=>({...Te,puntaje:Te.puntaje||1})):Re}const Ne=async Pe=>{var Re;if(Pe.preventDefault(),!H.contenido.trim()||H.tipos.length===0){I("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),I(null);try{const Te=await Promise.all(F.map(async Zt=>({nombre:Zt.name,url:await iTe(Zt)}))),ot="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ur=new xs(ot).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Gt=ge();let dr=await(await(await ur.generateContent(Gt)).response).text();console.log("Respuesta cruda de la IA (actividad):",dr),dr=dr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const yn=dr.match(/\{[\s\S]*\}/);if(!yn)throw new Error("No se encontr un objeto JSON vlido en la respuesta de la IA");const Qr=yn[0];console.log("JSON extrado (actividad):",Qr);const kn=JSON.parse(Qr),ea={};for(const Zt of H.tipos)ea[Zt]=re(Zt,(Re=kn.actividades)==null?void 0:Re[Zt]);const or={id:"",fechaCreacion:new Date().toISOString(),...H,recursos:{...H.recursos,archivos:Te},introduccion:kn.introduccion||"Actividad generada para reforzar el aprendizaje.",generatedContent:ea};N(or)}catch(Te){console.error("Error al generar actividad con IA",Te);const ot=Te instanceof Error?Te.message:"Error desconocido";I(`Error al generar la actividad: ${ot}. Por favor, intntelo de nuevo.`)}finally{y(!1)}},Oe=async Pe=>{if(Pe.preventDefault(),!G.contenido.trim()||!G.objetivosAprendizaje.trim()){I("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),I(null);try{const Re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ot=new xs(Re).getGenerativeModel({model:"gemini-1.5-flash-latest"}),vt=Fe();let Rt=await(await(await ot.generateContent(vt)).response).text();console.log("Respuesta cruda de la IA:",Rt),Rt=Rt.replace(/```json\s*/gi,"").replace(/```\s*$/g,""),Rt=Rt.replace(/\/\/.*$/gm,""),Rt=Rt.replace(/\/\*[\s\S]*?\*\//g,""),Rt=Rt.trim();const Vr=Rt.match(/\{[\s\S]*\}/);if(!Vr)throw new Error("No se encontr un objeto JSON vlido en la respuesta de la IA");let dr=Vr[0];console.log("JSON extrado:",dr),dr=dr.replace(/,(\s*[}\]])/g,"$1"),console.log("JSON limpio:",dr);const yn=JSON.parse(dr);if(!yn.preguntas||!Array.isArray(yn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");yn.preguntas.length!==30&&console.warn(`Se esperaban 30 preguntas, pero se recibieron ${yn.preguntas.length}`);const Qr=(yn.textos||[]).map((or,Zt)=>{var Kr;return{id:or.id||Zt+1,titulo:or.titulo||`Texto ${Zt+1}`,contenido:or.contenido||"Contenido del texto no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(or.tipo)?or.tipo:"informativo",palabras:or.palabras||((Kr=or.contenido)==null?void 0:Kr.split(" ").length)||0}}),kn=yn.preguntas.slice(0,30).map((or,Zt)=>({numero:or.numero||Zt+1,pregunta:or.pregunta||`Pregunta ${Zt+1}`,opciones:Array.isArray(or.opciones)&&or.opciones.length>=4?or.opciones.slice(0,4):["Opcin A","Opcin B","Opcin C","Opcin D"],respuestaCorrecta:["A","B","C","D"].includes(or.respuestaCorrecta)?or.respuestaCorrecta:"A",habilidad:ik.includes(or.habilidad)?or.habilidad:ik[0],justificacion:or.justificacion||"Justificacin no disponible",...or.textoId&&typeof or.textoId=="number"?{textoId:or.textoId}:{}}));console.log("Textos procesados:",Qr),console.log("Preguntas procesadas:",kn.slice(0,2));const ea={id:"",fechaCreacion:new Date().toISOString(),...G,titulo:yn.titulo||`Prueba ${G.asignatura} - ${G.nivel}`,instrucciones:yn.instrucciones||"Lee cada pregunta cuidadosamente y selecciona la mejor respuesta.",textos:Qr,preguntas:kn};O(ea)}catch(Re){console.error("Error al generar prueba con IA",Re);const Te=Re instanceof Error?Re.message:"Error desconocido";Te.includes("JSON")?I("Error al procesar la respuesta de la IA. El formato de respuesta no es vlido. Intntalo de nuevo."):I(`Error al generar la prueba estandarizada: ${Te}. Por favor, intntelo de nuevo.`)}finally{y(!1)}},Ce=async()=>{if(C)try{await tTe(C),z(W),M([]),p(!1),N(null)}catch(Pe){console.error("Error al guardar la actividad:",Pe),I("No se pudo guardar la actividad en la base de datos.")}},fe=async()=>{if(P)try{const Pe={...P,cursosDestino:P.cursosDestino||[],estudiantesDestino:P.estudiantesDestino||[],textos:P.textos||[],preguntas:P.preguntas.map(Re=>({...Re,textoId:Re.textoId||null}))};await nTe(Pe),ne(Z),g(!1),O(null)}catch(Pe){console.error("Error al guardar la prueba:",Pe),I("No se pudo guardar la prueba en la base de datos.")}},Ie=T.useMemo(()=>{var Te,ot,vt,ur;const Pe=l||d;if(!Pe||!i.length)return[];const Re=new Map;if(!((Te=Pe.cursosDestino)!=null&&Te.length)&&!((ot=Pe.estudiantesDestino)!=null&&ot.length)){const Gt=Pe.nivel.charAt(0);i.filter(Rt=>{var Vr;return Rt.profile===Kt.ESTUDIANTE&&((Vr=Rt.curso)==null?void 0:Vr.startsWith(Gt))}).forEach(Rt=>Re.set(Rt.id,Rt))}else(vt=Pe.cursosDestino)!=null&&vt.length&&i.filter(Rt=>Rt.profile===Kt.ESTUDIANTE&&Pe.cursosDestino.includes(Rt.curso||"")).forEach(Rt=>Re.set(Rt.id,Rt)),(ur=Pe.estudiantesDestino)!=null&&ur.length&&i.filter(Rt=>Rt.profile===Kt.ESTUDIANTE&&Pe.estudiantesDestino.includes(Rt.nombreCompleto)).forEach(Rt=>Re.set(Rt.id,Rt));return Array.from(Re.values()).sort((Gt,Rt)=>Gt.nombreCompleto.localeCompare(Rt.nombreCompleto))},[l,d,i]),He=T.useMemo(()=>{const Pe=(l==null?void 0:l.id)||(d==null?void 0:d.id);return a.filter(Re=>Re.actividadId===Pe)},[a,l,d]),Xe=T.useMemo(()=>i.filter(Pe=>Pe.profile===Kt.ESTUDIANTE).sort((Pe,Re)=>Pe.nombreCompleto.localeCompare(Re.nombreCompleto)),[i]),dt=T.useMemo(()=>D.trim()?Xe.filter(Pe=>Pe.nombreCompleto.toLowerCase().includes(D.toLowerCase())):Xe,[Xe,D]),Et=()=>c.jsxs("div",{className:"flex space-x-1 mb-6",children:[c.jsx("button",{onClick:()=>J("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${Q==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>J("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${Q==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),Tt=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada SIMCE"}),c.jsx("button",{onClick:()=>g(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"La IA generar una prueba de 30 preguntas con estndar SIMCE, indicando qu habilidad se mide en cada pregunta."}),c.jsxs("form",{onSubmit:Oe,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:G.asignatura,onChange:q,className:"w-full border-slate-300 rounded-md shadow-sm",children:Pi.map(Pe=>c.jsx("option",{value:Pe,children:Pe},Pe))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:G.nivel,onChange:q,className:"w-full border-slate-300 rounded-md shadow-sm",children:$g.map(Pe=>c.jsx("option",{value:Pe,children:Pe},Pe))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"duracionMinutos",className:"block text-sm font-medium text-slate-600 mb-1",children:"Duracin (minutos)"}),c.jsx("input",{type:"number",name:"duracionMinutos",value:G.duracionMinutos,onChange:q,min:"30",max:"180",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha lmite"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:G.plazoEntrega,onChange:q,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la prueba ser visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Wa.map(Pe=>{var Re;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Re=G.cursosDestino)==null?void 0:Re.includes(Pe),onChange:()=>oe(Pe,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Pe})]},Pe)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:D,onChange:Pe=>E(Pe.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:dt.map(Pe=>{var Re;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Re=G.estudiantesDestino)==null?void 0:Re.includes(Pe.nombreCompleto),onChange:()=>ce(Pe.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Pe.nombreCompleto,children:Pe.nombreCompleto})]},Pe.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido a evaluar ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:G.contenido,onChange:q,required:!0,rows:4,placeholder:"Describa los contenidos que se evaluarn en la prueba...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"objetivosAprendizaje",className:"block text-sm font-medium text-slate-600 mb-1",children:["Objetivos de Aprendizaje ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"objetivosAprendizaje",value:G.objetivosAprendizaje,onChange:q,required:!0,rows:4,placeholder:"Liste los objetivos de aprendizaje que se evaluarn...",className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),B&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:B}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]}),Ct=()=>{var Pe,Re;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Prueba Estandarizada"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa las preguntas generadas. Si todo est correcto, confirma para asignar la prueba."}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:P==null?void 0:P.titulo}),c.jsxs("p",{className:"text-slate-700 mb-2",children:[c.jsx("strong",{children:"Duracin:"})," ",P==null?void 0:P.duracionMinutos," minutos"]}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:P==null?void 0:P.instrucciones})]}),(P==null?void 0:P.textos)&&P.textos.length>0&&c.jsxs("div",{className:"p-4 bg-emerald-50 border-l-4 border-emerald-400 rounded-r-lg",children:[c.jsxs("h3",{className:"font-bold text-emerald-800 mb-4",children:["Textos de Lectura (",P.textos.length,")"]}),c.jsx("div",{className:"space-y-4",children:P.textos.map(Te=>c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-emerald-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-semibold text-slate-800",children:["Texto ",Te.id,": ",Te.titulo]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full",children:Te.tipo}),c.jsxs("span",{className:"text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded-full",children:[Te.palabras," palabras"]})]})]}),c.jsx("div",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap bg-slate-50 p-3 rounded border",children:Te.contenido})]},Te.id))})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Preguntas (",((Pe=P==null?void 0:P.preguntas)==null?void 0:Pe.length)||0,"/30)"]}),c.jsx("div",{className:"space-y-6",children:(Re=P==null?void 0:P.preguntas)==null?void 0:Re.map((Te,ot)=>{var vt;return c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("p",{className:"font-semibold text-slate-800",children:[Te.numero,". ",Te.pregunta,Te.textoId&&c.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["Basada en Texto ",Te.textoId]})]}),c.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:Te.habilidad})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3 mb-3",children:(vt=Te.opciones)==null?void 0:vt.map((ur,Gt)=>{const Rt=String.fromCharCode(65+Gt),Vr=Te.respuestaCorrecta===Rt;return c.jsxs("div",{className:`p-2 rounded border ${Vr?"bg-green-50 border-green-300 text-green-800":"bg-slate-50 border-slate-200"}`,children:[c.jsxs("strong",{children:[Rt,"."]})," ",ur,Vr&&c.jsx("span",{className:"ml-2 text-xs",children:""})]},Gt)})}),Te.justificacion&&c.jsxs("p",{className:"text-xs text-slate-600 bg-slate-100 p-2 rounded mt-2",children:[c.jsx("strong",{children:"Justificacin:"})," ",Te.justificacion]})]},ot)})})]})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>O(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:fe,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar Prueba"})]})]})},Dt=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),c.jsx("button",{onClick:()=>g(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva Prueba"})]}),c.jsx("div",{className:"space-y-4",children:r.length>0?r.map(Pe=>{var ot,vt,ur;const Re=[];(ot=Pe.cursosDestino)!=null&&ot.length&&Re.push(`Cursos: ${Pe.cursosDestino.join(", ")}`),(vt=Pe.estudiantesDestino)!=null&&vt.length&&Re.push(`Estudiantes: ${Pe.estudiantesDestino.length}`);const Te=Re.length?Re.join(" | "):`Todo ${Pe.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:Pe.titulo||`${Pe.asignatura} - Prueba SIMCE`}),c.jsxs("p",{className:"text-sm text-slate-500",children:[Pe.nivel," | ",Pe.duracionMinutos," min | Destino: ",Te]}),c.jsxs("p",{className:"text-xs text-slate-400",children:["Creado: ",new Date(Pe.fechaCreacion).toLocaleDateString("es-CL")," | Preguntas: ",((ur=Pe.preguntas)==null?void 0:ur.length)||0]})]}),c.jsx("button",{onClick:()=>f(Pe),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Pe.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay pruebas estandarizadas creadas. Haga clic en "Crear Nueva Prueba" para comenzar.'})})]}),Jt=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l?`${l.asignatura} - ${l.tipos.join(", ")}`:`${(d==null?void 0:d.titulo)||"Prueba Estandarizada"}`}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(l==null?void 0:l.nivel)||(d==null?void 0:d.nivel)," | Plazo: ",(l==null?void 0:l.plazoEntrega)||(d==null?void 0:d.plazoEntrega),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),c.jsx("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Ie.map(Pe=>{const Re=He.find(Te=>Te.estudianteId===Pe.id);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:Pe.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Re?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Re?`${Re.puntaje}/${Re.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold text-slate-600",children:Re?c.jsx("span",{className:parseFloat(Re.nota)>=4?"text-green-600":"text-red-600",children:Re.nota}):"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:Re?new Date(Re.fechaCompletado).toLocaleString("es-CL"):"-"})]},Pe.id)})})]})})]})]}),Pt=()=>{var Pe,Re;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:H.asignatura,onChange:R,className:"w-full border-slate-300 rounded-md shadow-sm",children:Pi.map(Te=>c.jsx("option",{value:Te,children:Te},Te))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:H.nivel,onChange:R,className:"w-full border-slate-300 rounded-md shadow-sm",children:$g.map(Te=>c.jsx("option",{value:Te,children:Te},Te))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(Pe=H.recursos)==null?void 0:Pe.instrucciones,onChange:Y,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(Re=H.recursos)==null?void 0:Re.enlaces,onChange:Y,placeholder:"Pega un enlace por lnea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imgenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:te,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad ser visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Wa.map(Te=>{var ot;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(ot=H.cursosDestino)==null?void 0:ot.includes(Te),onChange:()=>oe(Te),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:Te})]},Te)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:D,onChange:Te=>E(Te.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:dt.map(Te=>{var ot;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(ot=H.estudiantesDestino)==null?void 0:ot.includes(Te.nombreCompleto),onChange:()=>ce(Te.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Te.nombreCompleto,children:Te.nombreCompleto})]},Te.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:Ape.map(Te=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:H.tipos.includes(Te),onChange:()=>ie(Te),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Te})]}),H.tipos.includes(Te)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),sk[Te].map(ot=>c.jsx("button",{type:"button",onClick:()=>pe(Te,ot),className:`px-3 py-1 rounded-full font-semibold text-xs ${H.cantidadPreguntas[Te]===ot?"bg-amber-500 text-white":"bg-slate-200"}`,children:ot},ot))]})]},Te))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:H.contenido,onChange:R,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:H.plazoEntrega,onChange:R,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),B&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:B}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},Mt=()=>{var Pe;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:C==null?void 0:C.introduccion})]}),(C==null?void 0:C.recursos)&&(C.recursos.instrucciones||C.recursos.enlaces||((Pe=C.recursos.archivos)==null?void 0:Pe.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[C.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:C.recursos.instrucciones}),C.recursos.enlaces&&c.jsx("div",{children:C.recursos.enlaces.split(`
`).map((Re,Te)=>Re.trim()&&c.jsx("a",{href:Re,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:Re},Te))}),C.recursos.archivos&&C.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:C.recursos.archivos.map(Re=>c.jsx("li",{className:"text-slate-700",children:Re.nombre},Re.nombre))})]})]}),C==null?void 0:C.tipos.map(Re=>{const Te=C.generatedContent[Re];return Te?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:Re}),c.jsxs("div",{className:"space-y-4 text-sm",children:[Re==="Quiz"&&Array.isArray(Te)&&Te.map((ot,vt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[vt+1,". ",ot.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ot.opciones.map((ur,Gt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+Gt),"."]})," ",ur]},Gt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ot.respuestaCorrecta]})]},vt)),Re==="Comprensin de Lectura"&&Te&&typeof Te=="object"&&"preguntas"in Te&&Array.isArray(Te.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:Te.texto}),Te.preguntas.map((ot,vt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[vt+1,". ",ot.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:ot.opciones.map((ur,Gt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+Gt),"."]})," ",ur]},Gt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",ot.respuestaCorrecta]})]},vt))]}),Re==="Trminos Pareados"&&Array.isArray(Te)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),c.jsx("tbody",{children:Te.map(ot=>c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:ot.concepto}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:ot.definicion})]},ot.id))})]})}),Re==="Desarrollo"&&Array.isArray(Te)&&Te.map((ot,vt)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[vt+1,". ",ot.pregunta]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",ot.rubrica]})]},vt)),(Re==="Quiz"||Re==="Trminos Pareados"||Re==="Desarrollo")&&!Array.isArray(Te)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:Re}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no vlido.']}),Re==="Comprensin de Lectura"&&(!Te||typeof Te!="object"||!Array.isArray(Te.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:"Comprensin de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},Re):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>N(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:Ce,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Wt=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(Pe=>{var ot,vt;const Re=[];(ot=Pe.cursosDestino)!=null&&ot.length&&Re.push(`Cursos: ${Pe.cursosDestino.join(", ")}`),(vt=Pe.estudiantesDestino)!=null&&vt.length&&Re.push(`Estudiantes: ${Pe.estudiantesDestino.length}`);const Te=Re.length?Re.join(" | "):`Todo ${Pe.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[Pe.asignatura," - ",Pe.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Te," | Creado: ",new Date(Pe.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>u(Pe),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},Pe.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return _?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"animate-fade-in",children:[Et(),P?Ct():C?Mt():l||d?Jt():Q==="pruebas"?x?Tt():Dt():m?Pt():Wt()]})},lTe="actividades_remotas",cTe="respuestas_actividades",uTe=e=>{var r,n,a,s,i,o;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,plazoEntrega:((s=(a=t.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.plazoEntrega,fechaCompletado:((o=(i=t.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||t.fechaCompletado}},dTe=(e,t)=>{const r=tr(Ft(Nt,lTe),qr("fechaCreacion","desc"));return yr(r,a=>{const i=a.docs.map(o=>uTe(o)).filter(o=>{var l,u,d,f,m;if(!((l=o.cursosDestino)!=null&&l.length)&&!((u=o.estudiantesDestino)!=null&&u.length)){const p=o.nivel.charAt(0);return(d=e.curso)==null?void 0:d.startsWith(p)}return!!((f=o.cursosDestino)!=null&&f.includes(e.curso||"")||(m=o.estudiantesDestino)!=null&&m.includes(e.nombreCompleto))});t(i)},a=>{console.error("Error al suscribirse a las actividades disponibles:",a),t([])})},ATe=async e=>{try{const t={...e,fechaCompletado:hr.fromDate(new Date(e.fechaCompletado))};return(await da(Ft(Nt,cTe),t)).id}catch(t){throw console.error("Error al guardar la respuesta de actividad:",t),new Error("No se pudo guardar la respuesta de la actividad.")}},fTe=(e,t)=>{if(t===0)return"1.0";const n=t*.6;let a=1;return e>=n?a=4+(e-n)*3/(t-n):a=1+e*3/n,a=Math.max(1,Math.min(7,a)),a.toFixed(1)},zI=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hTe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=T.useState({}),[s,i]=T.useState(!1),[o,l]=T.useState(!1),[u,d]=T.useState(!1),f=`progress-${r.id}-${e.id}`;T.useEffect(()=>{const g=localStorage.getItem(f);g&&a(JSON.parse(g))},[f]);const m=(g,b)=>{a(y=>{const _={...y,[g]:b};return localStorage.setItem(f,JSON.stringify(_)),_})},p=()=>{l(!0),localStorage.setItem(f,JSON.stringify(n)),setTimeout(()=>{l(!1),d(!0),setTimeout(()=>d(!1),2e3)},1e3)},x=async()=>{i(!0);let g=0,b=0;const y={items:[]};e.tipos.forEach(S=>{const B=e.generatedContent[S],I=n[S];(S==="Quiz"||S==="Comprensin de Lectura")&&(S==="Quiz"?B:B.preguntas).forEach((E,C)=>{const N=I==null?void 0:I[C],P=N===E.respuestaCorrecta,O=P?E.puntaje||1:0;g+=O,b+=E.puntaje||1,y.items.push({pregunta:E.pregunta,respuestaUsuario:N||"No respondida",respuestaCorrecta:E.respuestaCorrecta,esCorrecta:P,puntajeObtenido:O,tipo:S})})});const _={puntaje:g,puntajeMaximo:b,respuestas:n,nota:fTe(g,b)};localStorage.removeItem(f),t(_,y)};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:e.asignatura}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:e.introduccion})]}),e.tipos.map(g=>{const b=e.generatedContent[g];if(!b)return null;switch(g){case"Quiz":case"Comprensin de Lectura":{const y=g==="Quiz",_=y?b:b.preguntas;return c.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:g}),!y&&c.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap text-slate-800 leading-relaxed",children:b.texto}),c.jsx("div",{className:"space-y-6",children:_.map((S,B)=>c.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[c.jsx("p",{className:"font-semibold text-slate-800",children:`${B+1}. ${S.pregunta}`}),c.jsx("div",{className:"mt-2 space-y-2",children:S.opciones.map((I,D)=>{var E;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[c.jsx("input",{type:"radio",name:`q-${g}-${B}`,value:I,checked:((E=n[g])==null?void 0:E[B])===I,onChange:()=>m(g,{...n[g]||{},[B]:I}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{children:I})]},D)})})]},B))})]},g)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:p,disabled:s||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px] transition-all",children:o?c.jsxs(c.Fragment,{children:[c.jsx(zI,{})," Guardando..."]}):u?" Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:x,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:s?c.jsxs(c.Fragment,{children:[c.jsx(zI,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},mTe=({currentUser:e})=>{const[t,r]=T.useState(!0),[n,a]=T.useState("list"),[s,i]=T.useState([]),[o,l]=T.useState(null),[u,d]=T.useState(null),[f,m]=T.useState(null);T.useEffect(()=>{r(!0);const g=dTe(e,b=>{i(b),r(!1)});return()=>g()},[e]);const p=g=>{l(g),a("activity")},x=T.useCallback(async(g,b)=>{if(!o)return;const y={actividadId:o.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...g,retroalimentacionDetallada:b};try{await ATe(y),d({id:"",...y}),a("result")}catch(_){console.error("Error al guardar la respuesta:",_),m("Hubo un problema al guardar tu actividad. Por favor, intntalo de nuevo.")}},[o,e.id]);if(t)return c.jsxs("div",{className:"flex justify-center items-center h-64",children:[c.jsx(zI,{})," ",c.jsx("span",{className:"ml-2",children:"Cargando actividades..."})]});if(n==="activity"&&o)return c.jsx(hTe,{actividad:o,onComplete:x,currentUser:e});if(n==="result"&&u){const g=u.nota;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),c.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",c.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",c.jsx("span",{className:`font-bold text-2xl ${parseFloat(g)>=4?"text-green-600":"text-red-600"}`,children:g})]})]}),u.retroalimentacionDetallada&&u.retroalimentacionDetallada.items.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-700 mt-6 mb-4",children:"Revisin de Respuestas"}),u.retroalimentacionDetallada.items.map((b,y)=>c.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${b.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[y+1,". ",b.pregunta]}),c.jsx("span",{className:"font-bold text-lg",children:b.esCorrecta?"":""})]}),c.jsxs("div",{className:"mt-2 text-sm pl-4",children:[c.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",c.jsx("span",{className:"font-medium",children:b.respuestaUsuario})]}),!b.esCorrecta&&c.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",c.jsx("span",{className:"font-medium text-green-700",children:b.respuestaCorrecta})]})]})]},y))]}),c.jsx("button",{onClick:()=>{a("list"),l(null),d(null)},className:"mt-8 w-full bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a la Lista de Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),f&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:f}),c.jsx("div",{className:"space-y-4",children:s.length>0?s.map(g=>c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[g.asignatura," - ",g.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",g.plazoEntrega]})]}),c.jsx("button",{onClick:()=>p(g),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto",children:"Comenzar"})]},g.id)):c.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Todo al da!"}),c.jsx("p",{className:"text-slate-500 mt-1",children:"No hay actividades nuevas disponibles en este momento."})]})})]})},L5="estudiantes_inclusion",pTe="usuarios",jZ=e=>{const t=e.data();return{id:e.id,...t}},gTe=e=>{const t=tr(Ft(Nt,L5));return yr(t,n=>{const a=n.docs.map(s=>jZ(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),e([])})},vTe=e=>{const t=tr(Ft(Nt,pTe));return yr(t,n=>{const a=n.docs.map(s=>jZ(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},xTe=async e=>{try{return(await da(Ft(Nt,L5),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},bTe=async(e,t)=>{try{const{id:r,...n}=t,a=br(Nt,L5,e);await io(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},yTe=async e=>{try{const t=br(Nt,L5,e);await ni(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},wTe=({estudiantes:e})=>{const t=T.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.curso]=(l[u.curso]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({curso:l,cantidad:u})).sort((l,u)=>l.curso.localeCompare(u.curso))},[e]),r=T.useMemo(()=>{const o=e.reduce((l,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return l[d]=(l[d]||0)+1,l},{});return Object.entries(o).map(([l,u])=>({nivel:l,cantidad:u})).sort((l,u)=>l.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(l.nivel)-parseInt(u.nivel))},[e]),n=T.useMemo(()=>{const o=e.reduce((l,u)=>(l[u.dificultad]=(l[u.dificultad]||0)+1,l),{});return Object.entries(o).map(([l,u])=>({diagnostico:l,cantidad:u})).sort((l,u)=>u.cantidad-l.cantidad)},[e]),a=T.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),l=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:l}},[e]),s=T.useMemo(()=>e.reduce((o,l)=>o+(l.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),c.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),c.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),c.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),c.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),c.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),c.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,""]}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),c.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:l})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),c.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?l/i*100:0}%`}})}),c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:l})]},o))})]})]})]})},H9=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=T.useState(""),[a,s]=T.useState(""),[i,o]=T.useState(!1),l=T.useMemo(()=>e.filter(f=>{const m=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return m&&p}).sort((f,m)=>f.nombreCompleto.localeCompare(m.nombreCompleto)),[e,r,a]),u=T.useMemo(()=>[...new Set(e.map(m=>m.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),c.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),c.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>c.jsx("option",{value:f,children:f},f))]})]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),c.jsxs("span",{children:["Resultados filtrados: ",l.length]})]}),c.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${l.length} estudiantes disponibles`}),i&&c.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:l.length===0?c.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):c.jsx("div",{className:"divide-y dark:divide-slate-600",children:l.map(f=>c.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),c.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&l.length===1&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),c.jsxs("button",{onClick:()=>d(l[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",l[0].nombreCompleto]})]})]})]})},ETe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=T.useState(u_[0]),s=()=>r(e,n);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:u_.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},CTe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=T.useState("intervenciones"),[o,l]=T.useState(e);T.useEffect(()=>l(e),[e]);const[u,d]=T.useState(null),f={responsable:"",accion:"",observaciones:""},[m,p]=T.useState(f),[x,g]=T.useState({trimestre:"T1",meta:""}),[b,y]=T.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[_,S]=T.useState(null),[B,I]=T.useState(!1),D={motivo:"",acuerdos:"",asistentes:""},[E,C]=T.useState(D),N=()=>{r(o),t()},P=async()=>{var Ce;if(!m.responsable||!m.accion){alert("Responsable y Accin son campos obligatorios.");return}let re,Ne=!1;u?re=(o.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...m}:fe):(Ne=!0,re=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...m},...o.intervenciones||[]]);const Oe=re.sort((fe,Ie)=>new Date(Ie.fecha).getTime()-new Date(fe.fecha).getTime());if(l(fe=>({...fe,intervenciones:Oe})),Ne)try{await wge({docenteNombre:m.responsable,docenteEmail:a?a(m.responsable):void 0,docenteEmailLower:(Ce=a?a(m.responsable):void 0)==null?void 0:Ce.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${o.nombre}. Accin: ${m.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:m.accion}),alert(` Intervencin registrada y notificacin enviada a ${m.responsable}`)}catch(fe){console.error("Error al crear notificacin:",fe),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}p(f),d(null)},O=re=>{d(re),p({responsable:re.responsable,accion:re.accion,observaciones:re.observaciones})},F=re=>{window.confirm("Eliminar esta intervencin?")&&l(Ne=>({...Ne,intervenciones:(Ne.intervenciones||[]).filter(Oe=>Oe.id!==re)}))},M=re=>{const{name:Ne,value:Oe}=re.target;l(Ce=>({...Ce,[Ne]:Oe,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!x.meta.trim())return;const re={...x,id:crypto.randomUUID(),cumplida:!1};l(Ne=>({...Ne,metasProgreso:[...Ne.metasProgreso||[],re]})),g({trimestre:"T1",meta:""})},J=re=>{l(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).map(Oe=>Oe.id===re?{...Oe,cumplida:!Oe.cumplida}:Oe)}))},W=re=>{l(Ne=>({...Ne,metasProgreso:(Ne.metasProgreso||[]).filter(Oe=>Oe.id!==re)}))},Z=T.useMemo(()=>{const re=o.metasProgreso||[];if(re.length===0)return{percent:0,color:"bg-slate-300"};const Ne=re.filter(fe=>fe.cumplida).length,Oe=Math.round(Ne/re.length*100),Ce=Oe<40?"bg-red-500":Oe<75?"bg-yellow-500":"bg-green-500";return{percent:Oe,color:Ce}},[o.metasProgreso]),H=T.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const re=new Date(o.fechaActualizacionApoyos),Ne=new Date;return Ne.setMonth(Ne.getMonth()-3),re<Ne},[o.fechaActualizacionApoyos]),z=()=>{if(!b.titulo.trim()||!b.fecha)return;const re={...b,id:crypto.randomUUID(),resuelta:!1};l(Ne=>({...Ne,alertas:[...Ne.alertas||[],re].sort((Oe,Ce)=>new Date(Oe.fecha).getTime()-new Date(Ce.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},G=re=>{l(Ne=>({...Ne,alertas:(Ne.alertas||[]).map(Oe=>Oe.id===re?{...Oe,resuelta:!Oe.resuelta}:Oe)}))},ne=re=>{l(Ne=>({...Ne,alertas:(Ne.alertas||[]).filter(Oe=>Oe.id!==re)}))},R=re=>{re.target.files&&re.target.files[0]&&S(re.target.files[0])},q=()=>{if(!_)return;I(!0);const re=new FileReader;re.readAsDataURL(_),re.onloadend=()=>{const Ne={id:crypto.randomUUID(),nombre:_.name,url:re.result,fechaSubida:new Date().toISOString()};l(Oe=>({...Oe,archivos:[Ne,...Oe.archivos||[]]})),S(null),I(!1)},re.onerror=()=>{alert("Error al leer el archivo."),I(!1)}},Y=re=>{window.confirm("Eliminar este archivo?")&&l(Ne=>({...Ne,archivos:(Ne.archivos||[]).filter(Oe=>Oe.id!==re)}))},te=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const re={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};l(Ne=>({...Ne,reuniones:[re,...Ne.reuniones||[]].sort((Oe,Ce)=>new Date(Ce.fecha).getTime()-new Date(Oe.fecha).getTime())})),C(D)},ie=re=>{window.confirm("Eliminar este registro de reunin?")&&l(Ne=>({...Ne,reuniones:(Ne.reuniones||[]).filter(Oe=>Oe.id!==re)}))},pe=()=>{var dt,Et,Tt;const re=new fr("p","mm","a4"),Ne=20,Oe=re.internal.pageSize.getWidth(),Ce=re.internal.pageSize.getHeight();let fe=Ne;const Ie=Ct=>{Ct.setFontSize(10),Ct.setTextColor(100),Ct.text("Ficha de Seguimiento - Mdulo Inclusin",Ne,15)};Ie(re),re.setFontSize(18),re.setFont("helvetica","bold"),re.setTextColor(40),re.text(o.nombre,Ne,fe+10),fe+=15,re.setFontSize(11),re.setFont("helvetica","normal"),re.setTextColor(80),re.text(`Curso: ${o.curso}`,Ne,fe),re.text(`Dificultad: ${o.dificultad}`,Ne,fe+6),fe+=15;const He=Ct=>{fe+Ct>Ce-Ne&&(re.addPage(),Ie(re),fe=Ne)},Xe=Ct=>{He(15),re.setFontSize(14),re.setFont("helvetica","bold"),re.text(Ct,Ne,fe),fe+=10};if((dt=o.intervenciones)!=null&&dt.length&&(Xe("Historial de Intervenciones"),nl(re,{startY:fe,head:[["Fecha","Responsable","Accin","Observaciones"]],body:o.intervenciones.map(Ct=>[new Date(Ct.fecha).toLocaleDateString("es-CL"),Ct.responsable,Ct.accion,Ct.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(re)}),fe=re.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){He(30),Xe("Seguimiento y Apoyos"),re.setFontSize(11),re.setFont("helvetica","normal");const Ct=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Dt=re.splitTextToSize(Ct,Oe-Ne*2);re.text(Dt,Ne,fe),fe+=Dt.length*5+10}(Et=o.metasProgreso)!=null&&Et.length&&(He(30),Xe("Metas de Progreso"),nl(re,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(Ct=>[Ct.trimestre,Ct.meta,Ct.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(re)}),fe=re.lastAutoTable.finalY+10),(Tt=o.reuniones)!=null&&Tt.length&&(Xe("Reuniones con Apoderados"),nl(re,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(Ct=>[new Date(Ct.fecha).toLocaleDateString("es-CL"),Ct.motivo,Ct.acuerdos||"",Ct.asistentes]),theme:"grid",didDrawPage:()=>Ie(re)})),re.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),c.jsxs("select",{value:m.responsable,onChange:re=>p(Ne=>({...Ne,responsable:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(re=>c.jsx("option",{value:re,children:re},re))]}),m.responsable&&!u&&c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",m.responsable," cuando se guarde la intervencin"]})]}),c.jsx("textarea",{value:m.accion,onChange:re=>p(Ne=>({...Ne,accion:re.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:m.observaciones,onChange:re=>p(Ne=>({...Ne,observaciones:re.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[u&&c.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),c.jsx("button",{onClick:P,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!m.responsable||!m.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.accion}),re.observaciones&&c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:re.observaciones}),c.jsxs("div",{className:"flex items-center justify-between mt-2",children:[c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(re.fecha).toLocaleString("es-CL")," - ",re.responsable]}),c.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>O(re),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),c.jsx("button",{onClick:()=>F(re.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},re.id)),(!o.intervenciones||o.intervenciones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{children:"No hay intervenciones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ce=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),H&&c.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:M,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:x.trimestre,onChange:re=>g(Ne=>({...Ne,trimestre:re.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:x.meta,onChange:re=>g(Ne=>({...Ne,meta:re.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!x.meta.trim(),children:"Agregar"})]}),c.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:re.cumplida,onChange:()=>J(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[re.trimestre,":"]})," ",re.meta]}),c.jsx("button",{onClick:()=>W(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},re.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay metas definidas"}),c.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:b.titulo,onChange:re=>y(Ne=>({...Ne,titulo:re.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:re=>y(Ne=>({...Ne,fecha:re.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(re=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:re.resuelta,onChange:()=>G(re.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${re.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[re.titulo," (",new Date(re.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),c.jsx("button",{onClick:()=>ne(re.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},re.id)),(!o.alertas||o.alertas.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay alertas programadas"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:R,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),c.jsx("button",{onClick:q,disabled:!_||B,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:B?"Subiendo...":"Subir"}),_&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",_.name]})]}),c.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(re=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsxs("a",{href:re.url,download:re.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:re.nombre,children:[" ",re.nombre]}),c.jsx("button",{onClick:()=>Y(re.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},re.id)),(!o.archivos||o.archivos.length===0)&&c.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Fe=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),c.jsx("input",{value:E.motivo,onChange:re=>C(Ne=>({...Ne,motivo:re.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:E.acuerdos,onChange:re=>C(Ne=>({...Ne,acuerdos:re.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:E.asistentes,onChange:re=>C(Ne=>({...Ne,asistentes:re.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunin"})})]}),c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(re=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:re.motivo}),re.acuerdos&&c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[c.jsx("strong",{children:"Acuerdos:"})," ",re.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(re.fecha).toLocaleString("es-CL")," - Asistentes: ",re.asistentes]})]}),c.jsx("button",{onClick:()=>ie(re.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},re.id)),(!o.reuniones||o.reuniones.length===0)&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("p",{children:"No hay reuniones registradas"}),c.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:re=>re.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:pe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),c.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(re=>c.jsx("button",{onClick:()=>i(re),className:`${s===re?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:re==="alertas"?"Alertas y Archivos":re==="seguimiento"?"Seguimiento y Metas":re},re))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&Fe(),s==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),c.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},V9=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState([]),[s,i]=T.useState(!0),[o,l]=T.useState(null),[u,d]=T.useState(null),[f,m]=T.useState(""),[p,x]=T.useState(""),[g,b]=T.useState(""),[y,_]=T.useState("dashboard");T.useEffect(()=>{i(!0);const P=gTe(F=>{r(F),i(!1)}),O=vTe(F=>a(F));return()=>{P(),O()}},[]);const S=async(P,O)=>{if(t.some(M=>M.nombre===P.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const F={nombre:P.nombreCompleto,curso:P.curso||"",dificultad:O,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await xTe(F),alert(` ${P.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(M){console.error("Error al agregar estudiante:",M),alert("Hubo un error al agregar al estudiante al programa.")}},B=async P=>{try{await bTe(P.id,P)}catch(O){console.error("Error al actualizar la ficha:",O),alert("Hubo un error al guardar los cambios en la ficha.")}},I=async P=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await yTe(P),(o==null?void 0:o.id)===P&&l(null),alert(" Estudiante eliminado del programa PIE")}catch(O){console.error("Error al eliminar estudiante:",O),alert("Hubo un error al eliminar al estudiante.")}},D=P=>{const O=C;if(O.length===0){alert("No hay datos para exportar.");return}const F=O.map(M=>{var Q;return{Nombre:M.nombre,Curso:M.curso,Dificultad:M.dificultad,"N Intervenciones":((Q=M.intervenciones)==null?void 0:Q.length)||0,"Alertas Pendientes":(M.alertas||[]).filter(J=>!J.resuelta).length,"Metas Cumplidas":(M.metasProgreso||[]).filter(J=>J.cumplida).length,"Total Metas":(M.metasProgreso||[]).length,"ltima Actualizacin":M.fechaActualizacionApoyos?new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(P==="xlsx"){const M=lu.json_to_sheet(F),Q=lu.book_new();lu.book_append_sheet(Q,M,"Estudiantes_Inclusion"),FO(Q,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const M=new fr;M.text("Listado de Estudiantes - Programa de Inclusin",14,15),nl(M,{startY:20,head:[Object.keys(F[0])],body:F.map(Object.values)}),M.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},E=T.useMemo(()=>n.filter(P=>{var O;return P.profile===Kt.ESTUDIANTE&&(((O=e.cursos)==null?void 0:O.includes(P.curso||""))||e.profile===Kt.SUBDIRECCION)}).filter(P=>!t.some(O=>O.nombre===P.nombreCompleto)),[n,t,e]),C=T.useMemo(()=>t.filter(P=>P.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||P.curso===p)&&(g===""||P.dificultad===g)).sort((P,O)=>P.nombre.localeCompare(O.nombre)),[t,f,p,g]),N=T.useMemo(()=>n.filter(P=>P.profile===Kt.PROFESORADO).map(P=>P.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>_("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),c.jsx("button",{onClick:()=>_("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?c.jsxs("div",{className:"text-center py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),c.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):c.jsxs(c.Fragment,{children:[y==="dashboard"&&c.jsxs("div",{className:"space-y-8",children:[c.jsx(wTe,{estudiantes:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),c.jsx("button",{onClick:()=>_("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),c.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(P=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:P.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[P.curso," - ",P.dificultad]})]}),c.jsx("button",{onClick:()=>l(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},P.id)),t.length===0&&c.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),c.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),c.jsx(H9,{estudiantesDisponibles:E,onSelect:P=>d(P)})]})]}),y==="lista"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",C.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>D("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),c.jsx("button",{onClick:()=>D("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),c.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:P=>m(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),c.jsxs("select",{value:p,onChange:P=>x(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Wa.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),c.jsxs("select",{value:g,onChange:P=>b(P.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),u_.map(P=>c.jsx("option",{value:P,children:P},P))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-blue-600",children:C.length}),c.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-green-600",children:t.length}),c.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((P,O)=>P+(O.alertas||[]).filter(F=>!F.resuelta).length,0)}),c.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[c.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(P=>P.curso)).size}),c.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),c.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[C.map(P=>{var O;return c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.nombre}),(P.alertas||[]).filter(F=>!F.resuelta).length>0&&c.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(P.alertas||[]).filter(F=>!F.resuelta).length," alertas"]})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[P.curso," - ",P.dificultad]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[c.jsxs("span",{children:[((O=P.intervenciones)==null?void 0:O.length)||0," intervenciones"]}),c.jsxs("span",{children:[(P.metasProgreso||[]).filter(F=>F.cumplida).length," metas cumplidas"]}),P.fechaActualizacionApoyos&&c.jsxs("span",{children:["lt. actualizacin: ",new Date(P.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>l(P),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>I(P.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},P.id)}),C.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||g?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||g)&&c.jsx("button",{onClick:()=>{m(""),x(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),c.jsx(H9,{estudiantesDisponibles:E,onSelect:P=>d(P)})]})]}),u&&c.jsx(ETe,{student:u,onClose:()=>d(null),onConfirm:(P,O)=>{S(P,O),d(null)}}),o&&c.jsx(CTe,{student:o,onClose:()=>l(null),onSave:B,profesores:N})]})},FZ="asistencia_dual",_Te=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},STe=(e,t)=>{const r=tr(Ft(Nt,FZ),Mn("emailEstudiante","==",e),qr("fechaHora","desc"));return yr(r,a=>{const s=a.docs.map(i=>_Te(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},NTe=async e=>{try{const t={...e,fechaHora:hr.fromDate(new Date(e.fechaHora))};await da(Ft(Nt,FZ),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},BTe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),kTe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),TTe=({currentUser:e})=>{const[t,r]=T.useState(e.curso||""),[n,a]=T.useState([]),[s,i]=T.useState(!1),[o,l]=T.useState(!0),[u,d]=T.useState(null);T.useEffect(()=>{if(!e.email){l(!1);return}l(!0);const m=STe(e.email,p=>{a(p),l(!1)});return()=>m()},[e.email]);const f=m=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const x={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await NTe(x),d({text:`Marca de ${m} registrada con xito!`,type:"success"})}catch(g){console.error("Error saving record to Firestore:",g),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let x="No se pudo obtener la ubicacin.";switch(p.code){case p.PERMISSION_DENIED:x="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:x="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case p.TIMEOUT:x="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:x=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${p.code}).`;break}d({text:x,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:t,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),Hm.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicacin..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(BTe,{}):c.jsx(kTe,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},ITe=async()=>{try{console.log(" Debugging users collection...");const e=Ft(Mr,"users"),t=tr(e,c0(10)),r=await ti(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},jTe=async(e,t)=>{var l,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=hr.fromDate(r),s=hr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const m=Ft(Mr,f);try{const p=tr(m,Mn("fechaHora",">=",a),Mn("fechaHora","<=",s)),x=await ti(p);o[f]={exists:!0,hasDateField:!0,count:x.size,sampleDoc:((l=x.docs[0])==null?void 0:l.data())||null}}catch{const x=["fecha","timestamp","createdAt"];let g=!1;for(const b of x)try{const y=tr(m,Mn(b,">=",a),Mn(b,"<=",s)),_=await ti(y);o[f]={exists:!0,hasDateField:b,count:_.size,sampleDoc:((u=_.docs[0])==null?void 0:u.data())||null},g=!0;break}catch{continue}if(!g){const b=tr(m,qr("__name__"),c0(5)),y=await ti(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[f]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},FTe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(` Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=hr.fromDate(a),o=hr.fromDate(s),l=[],u=new Map,d=()=>{const m=Array.from(u.values());console.log(` Total registros encontrados: ${m.length}`),m.length>0&&console.log(" Registros por da:",m.reduce((p,x)=>{let g;x.fechaHora instanceof Date?g=x.fechaHora:typeof x.fechaHora=="string"?g=new Date(x.fechaHora):g=new Date;const b=g.getDate();return p[b]=(p[b]||0)+1,p},{})),r(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(` Configurando suscripcin para: ${m}`);const p=Ft(Mr,m),x=tr(p,Mn("fechaHora",">=",i),Mn("fechaHora","<=",o),qr("fechaHora","desc")),g=yr(x,b=>{console.log(` ${m}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(` Registros encontrados en ${m}:`),Array.from(u.keys()).filter(_=>_.startsWith(`${m}_`)).forEach(_=>u.delete(_)),b.docs.forEach((_,S)=>{var B;if(S<5){const I=_.data();let D;(B=I.fechaHora)!=null&&B.toDate?D=I.fechaHora.toDate():typeof I.fechaHora=="string"?D=new Date(I.fechaHora):D=new Date,console.log(`   ${S+1}. ${I.emailEstudiante} - ${D.toLocaleString()} - ${I.tipo}`),console.log(`       Fecha original: ${I.fechaHora} (tipo: ${typeof I.fechaHora})`)}}),b.forEach(_=>{var E;const S=_.data();let B;(E=S.fechaHora)!=null&&E.toDate?B=S.fechaHora.toDate():typeof S.fechaHora=="string"?B=new Date(S.fechaHora):S.fechaHora instanceof Date?B=S.fechaHora:S.fechaHora?B=new Date(S.fechaHora):B=new Date;const I={id:_.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:B,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},D=`${m}_${_.id}`;u.set(D,I)}),d()):console.log(` ${m}: vaca, manteniendo datos existentes`)},b=>{console.warn(` Error con filtro en ${m}:`,b),console.log(` Intentando estrategia alternativa en ${m}...`);const y=tr(p,c0(200)),_=yr(y,B=>{if(console.log(` ${m} (sin filtro): ${B.size} documentos`),B.size>0){const D=B.docs[0].data();console.log(` Estructura en ${m}:`,Object.keys(D)),console.log(" Primer documento:",D)}const I=B.docs.filter(D=>{var N;const E=D.data();if(!E.fechaHora)return!1;let C;return(N=E.fechaHora)!=null&&N.toDate?C=E.fechaHora.toDate():typeof E.fechaHora=="string"?C=new Date(E.fechaHora):E.fechaHora instanceof Date?C=E.fechaHora:C=new Date(E.fechaHora),C>=a&&C<=s});console.log(` ${m}: ${I.length} registros despus de filtro manual`),I.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${m}_`)).forEach(E=>u.delete(E)),I.forEach(E=>{var F;const C=E.data();let N;(F=C.fechaHora)!=null&&F.toDate?N=C.fechaHora.toDate():typeof C.fechaHora=="string"?N=new Date(C.fechaHora):C.fechaHora instanceof Date?N=C.fechaHora:N=new Date(C.fechaHora);const P={id:E.id,emailEstudiante:C.emailEstudiante||C.email||"",nombreEstudiante:C.nombreEstudiante||C.nombre||"",curso:C.curso||"",fechaHora:N,tipo:C.tipo,ubicacion:C.ubicacion||null,observaciones:C.observaciones||"",...C},O=`${m}_${E.id}`;u.set(O,P)}),d())}),S=l.findIndex(B=>B===g);S>=0?l[S]=_:l.push(_)});l.push(g)}catch(p){console.warn(` Error configurando ${m}:`,p)}}),()=>{l.forEach(m=>{try{m()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripcin: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},OTe=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(` Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",l);const u=o.filter(d=>d.profile===Kt.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const l=Ft(Mr,o),u=tr(l),d=yr(u,f=>{f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var x,g,b,y;try{const _=p.data(),S=_.email||_.userEmail||_.mail||_.correo||"",B=_.nombreCompleto||_.displayName||_.name||_.nombre||_.fullName||"",I=_.curso||_.course||_.class||_.grade||"";let D=_.profile||_.role||_.tipo||_.userType||Kt.ESTUDIANTE;if(typeof D=="string"){const N=D.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?D=Kt.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?D=Kt.COORDINADOR_TP:N.includes("profesor")||N.includes("teacher")||N.includes("docente")?D=Kt.PROFESOR:(N.includes("subdireccion")||N.includes("subdir"))&&(D=Kt.COORDINADOR_TP)}const E={id:p.id,email:S,nombreCompleto:B,curso:I,profile:D,activo:_.activo!==!1,fechaCreacion:((g=(x=_.fechaCreacion)==null?void 0:x.toDate)==null?void 0:g.call(x))||new Date(_.fechaCreacion)||new Date,ultimaActividad:((y=(b=_.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(_.ultimaActividad)||new Date,..._},C=`${o}_${p.id}`;a.set(C,E)}catch(_){console.warn(`Error procesando documento ${p.id} en ${o}:`,_)}}),s()):console.log(` Coleccin ${o}: vaca`)},f=>{console.warn(` Error en coleccin ${o}:`,f)});n.push(d)}catch(l){console.warn(` Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},DTe=(e,t)=>{try{console.log("Setting up users subscription...");const r=Ft(Mr,"users"),n=tr(r);return yr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,m,p,x;try{const g=d.data();console.log(`Processing user doc ${d.id}:`,g);const b=g.email||g.userEmail||g.mail||"",y=g.nombreCompleto||g.displayName||g.name||g.nombre||"",_=g.curso||g.course||g.class||"";let S=g.profile||g.role||g.tipo||Kt.ESTUDIANTE;if(typeof S=="string"){const I=S.toLowerCase();I.includes("estudiante")||I.includes("student")||I.includes("alumno")?S=Kt.ESTUDIANTE:I.includes("coordinador")||I.includes("coordinator")?S=Kt.COORDINADOR_TP:I.includes("profesor")||I.includes("teacher")||I.includes("docente")?S=Kt.PROFESOR:(I.includes("subdireccion")||I.includes("subdir"))&&(S=Kt.COORDINADOR_TP)}const B={id:d.id,email:b,nombreCompleto:y,curso:_,profile:S,activo:g.activo!==!1,fechaCreacion:((m=(f=g.fechaCreacion)==null?void 0:f.toDate)==null?void 0:m.call(f))||new Date(g.fechaCreacion)||new Date,ultimaActividad:((x=(p=g.ultimaActividad)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date(g.ultimaActividad)||new Date,...g};i.push(B)}catch(g){console.warn(`Error processing user document ${d.id}:`,g)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===Kt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},eE=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},PTe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),RTe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),LTe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(new Date),[d,f]=T.useState("todos"),[m,p]=T.useState("");T.useEffect(()=>{s(!0),o(null);const D=l.getFullYear(),E=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",D,"Mes:",E);let C=!1,N=!1;const P=()=>{C&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const F=Ft(Mr,"asistencia_dual"),M=tr(F,c0(5)),Q=await ti(M);if(console.log(` asistencia_dual - Documentos encontrados: ${Q.size}`),Q.size>0)Q.docs.forEach((J,W)=>{const Z=J.data();console.log(`   ${W+1}. ${J.id.slice(0,8)} - ${Z.emailEstudiante} - ${Z.tipo}`),console.log("      Fecha original:",Z.fechaHora),console.log("      Todos los campos:",Object.keys(Z))});else{console.log(" No se encontraron documentos en asistencia_dual");const J=["asistenciaEmpresa","asistencia_empresa"];for(const W of J)try{const Z=Ft(Mr,W),H=tr(Z,c0(3)),z=await ti(H);if(console.log(` ${W}: ${z.size} documentos`),z.size>0){const G=z.docs[0].data();console.log("   Estructura:",Object.keys(G)),console.log("   Email:",G.emailEstudiante||G.email),console.log("   Fecha:",G.fechaHora||G.fecha)}}catch(Z){console.log(` ${W}: ${Z instanceof Error?Z.message:"Error"}`)}}}catch(F){console.error(" Error en prueba directa:",F),F.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):F.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),jTe(D,E).then(F=>{console.log(" Debug info for collections:",F),Object.entries(F).forEach(([M,Q])=>{if(Q.exists&&Q.totalDocs>0){if(console.log(`
 COLECCIN ${M.toUpperCase()}:`),console.log(`    Total documentos: ${Q.totalDocs}`),console.log(`    Documentos del perodo: ${Q.count}`),console.log(`    Campo de fecha: ${Q.hasDateField}`),Q.sampleDoc){console.log("    Documento ejemplo:",Q.sampleDoc);const J=Q.sampleDoc,W=J.emailEstudiante||J.email||J.userEmail||J.correo||"NO ENCONTRADO",Z=J.tipo||J.type||J.action||J.tipoRegistro||"NO ENCONTRADO",H=J.fechaHora||J.fecha||J.timestamp||J.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${W}`),console.log(`    Tipo registro: ${Z}`),console.log(`    Fecha: ${H}`),console.log("    Todos los campos:",Object.keys(J))}Q.filteredDocs&&Q.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",Q.filteredDocs.length),Q.filteredDocs.forEach((J,W)=>{W<3&&console.log(`      ${W+1}. ID: ${J.id}`,J.data)}))}else Q.exists?console.log(` Coleccin ${M}: vaca`):console.log(` Coleccin ${M}: no existe`)})}).catch(F=>{console.error("Debug error:",F)}),ITe().then(F=>{console.log(" Debug info for users:",F),(!F.exists||F.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async Q=>{var J;try{const W=Ft(Mr,Q),Z=tr(W,c0(5)),H=await ti(Z);H.size>0?(console.log(` Encontrada coleccin alternativa: ${Q} con ${H.size} documentos`),console.log("Documento muestra:",(J=H.docs[0])==null?void 0:J.data())):console.log(` Coleccin ${Q}: vaca`)}catch{console.log(` Coleccin ${Q}: no existe`)}}))}).catch(F=>{console.error("Users debug error:",F)});try{console.log("Configurando suscripcin a asistencia...");const F=FTe(D,E,Q=>{if(console.log(" Received registros:",Q.length),Q.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",Q[0]);const J=[...new Set(Q.map(ne=>ne.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",J);const W=[...new Set(Q.map(ne=>ne.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",W);const Z=Q.reduce((ne,R)=>{const q=new Date(R.fechaHora).getDate();return ne[q]||(ne[q]=[]),ne[q].push(R),ne},{});console.log(" Registros por da del mes:",Object.keys(Z).map(ne=>({dia:parseInt(ne),cantidad:Z[parseInt(ne)].length})));const H=r.map(ne=>ne.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",H);const z=J.filter(ne=>H.includes(ne)),G=J.filter(ne=>!H.includes(ne));console.log(" Emails que coinciden:",z),console.log(" Emails que NO coinciden:",G)}else console.log(" No se encontraron registros de asistencia para el perodo");t(Q),C=!0,P()},Q=>{console.error(" Error fetching asistencia:",Q),o("Error al cargar datos de asistencia: "+Q.message),C=!0,P()});console.log("Configurando suscripcin a usuarios...");const M=OTe(Q=>{if(console.log(" Received users (multi-collection):",Q.length),Q.length>0){console.log("Sample user:",Q[0]);const J=Q.filter(W=>W.profile===Kt.ESTUDIANTE&&W.curso);console.log("Dual students found:",J.length),J.forEach(W=>{console.log(`- ${W.nombreCompleto} (${W.curso}) - ${W.email}`)})}n(Q),N=!0,P()},Q=>{console.error(" Error fetching users (multi-collection):",Q),console.log(" Intentando con funcin original de usuarios...");const J=DTe(W=>{console.log(" Received users (fallback):",W.length),n(W),N=!0,P()},W=>{console.error(" Error en fallback tambin:",W),o("Error al cargar estudiantes: "+Q.message),N=!0,P()})});return()=>{console.log("Limpiando suscripciones..."),F&&F(),M&&M()}}catch(F){console.error(" Error setting up subscriptions:",F),o("Error al inicializar conexiones: "+(F instanceof Error?F.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:x,monthName:g,year:b}=T.useMemo(()=>{const D=l.getFullYear(),E=l.getMonth();return{monthDays:new Date(D,E+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:D}},[l]),y=T.useMemo(()=>{let D=r.filter(E=>E.profile===Kt.ESTUDIANTE&&E.curso&&Hm.includes(eE(E.curso)));if(d!=="todos"&&(D=D.filter(E=>eE(E.curso||"")===d)),m&&(D=D.filter(E=>E.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),e.length>0){const E=[...new Set(e.map(P=>P.emailEstudiante).filter(Boolean))],C=D.map(P=>P.email),N=E.filter(P=>!C.includes(P));if(N.length>0){console.log(" Agregando estudiantes faltantes con registros:",N);const O=N.map(F=>{const M=e.find(Q=>Q.emailEstudiante===F);return{id:F,email:F,nombreCompleto:(M==null?void 0:M.nombreEstudiante)||F.split("@")[0],curso:(M==null?void 0:M.curso)||"3C",profile:Kt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(F=>{const M=d==="todos"||eE(F.curso)===d,Q=!m||F.nombreCompleto.toLowerCase().includes(m.toLowerCase());return M&&Q&&Hm.includes(eE(F.curso))});D=[...D,...O]}}return console.log(` Estudiantes filtrados para mostrar: ${D.length}`),D.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),D.sort((E,C)=>E.nombreCompleto.localeCompare(C.nombreCompleto))},[r,d,m,e]),_=T.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${y.length}`);const D=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),D):(e.forEach((E,C)=>{const N=E.emailEstudiante;if(!N)return;let P;if(E.fechaHora instanceof Date)P=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)P=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")P=new Date(E.fechaHora);else{console.warn("Fecha no vlida en registro:",E);return}const O=P.getDate(),F=P.getMonth(),M=P.getFullYear();C<3&&console.log(` Registro ${C+1}:`,{email:N,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:P.toLocaleString(),ao:M,mes:F,da:O}),D.has(N)||D.set(N,new Map);const Q=D.get(N);Q.has(O)||Q.set(O,{});const J=Q.get(O);E.tipo==="Entrada"?(!J.entrada||P<new Date(J.entrada.fechaHora))&&(J.entrada=E):E.tipo==="Salida"&&(!J.salida||P>new Date(J.salida.fechaHora))&&(J.salida=E)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:D.size,estudiantes:Array.from(D.keys()),registrosPorEstudiante:Array.from(D.entries()).map(([E,C])=>({email:E,dias:Array.from(C.keys()),totalRegistros:Array.from(C.values()).reduce((N,P)=>N+(P.entrada?1:0)+(P.salida?1:0),0)}))}),D)},[e]),S=D=>{u(E=>{const C=new Date(E);return C.setMonth(C.getMonth()+D),C})},B=D=>{D!=null&&D.latitud&&(D!=null&&D.longitud)&&window.open(`https://www.google.com/maps?q=${D.latitud},${D.longitud}`,"_blank")},I=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>S(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${g} ${b}`}),c.jsx("button",{onClick:()=>S(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),c.jsxs("select",{value:d,onChange:D=>f(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),Hm.map(D=>c.jsx("option",{value:D,children:D},D))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:D=>p(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:x},(D,E)=>{const N=new Date(b,l.getMonth(),E+1).getDay(),P=N===0||N===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${P?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:I[N]}),c.jsx("div",{children:E+1})]},E)})]})}),c.jsx("tbody",{children:y.length>0?y.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:D.nombreCompleto}),Array.from({length:x},(E,C)=>{var M;const N=C+1,P=(M=_.get(D.email))==null?void 0:M.get(N),O=new Date(b,l.getMonth(),C+1),F=O.getDay()===0||O.getDay()===6;return D.email==="alexis.robles@industrialderecoleta.cl"&&N===2&&console.log(" Verificando da 2 para Alexis:",{email:D.email,day:N,hasDataForStudent:_.has(D.email),studentDayRecords:P,allAttendanceKeys:Array.from(_.keys()),daysForStudent:_.get(D.email)?Array.from(_.get(D.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${F?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(P==null?void 0:P.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return B((Q=P.entrada)==null?void 0:Q.ubicacion)},children:[c.jsx(PTe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(P==null?void 0:P.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var Q;return B((Q=P.salida)==null?void 0:Q.ubicacion)},children:[c.jsx(RTe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(P.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:x+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},U5="evaluaciones_formativas",M5="calificaciones_formativas",UO="trabajos_grupales_formativos",UTe="usuarios",MO=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},MTe=(e,t,r)=>{const n=tr(Ft(Nt,U5),Mn("curso","==",e),Mn("asignatura","==",t),qr("fecha","asc"));return yr(n,a=>{r(a.docs.map(s=>MO(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},QTe=async(e,t)=>{const r=R6(Nt),n=br(Ft(Nt,U5));r.set(n,{...e,fecha:hr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=br(Nt,M5,n.id);return r.set(a,t),await r.commit(),n.id},HTe=async(e,t)=>{const r=br(Nt,U5,e);await io(r,t,{merge:!0})},VTe=async e=>{const t=R6(Nt);t.delete(br(Nt,U5,e)),t.delete(br(Nt,M5,e)),await t.commit()},zTe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=br(Nt,M5,n);return yr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},$Te=async(e,t)=>{const r=br(Nt,M5,e);await io(r,t,{merge:!0})},KTe=(e,t,r)=>{const n=tr(Ft(Nt,UO),Mn("curso","==",e),Mn("asignatura","==",t),qr("fechaPresentacion","desc"));return yr(n,a=>{r(a.docs.map(s=>MO(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},GTe=async e=>{const t={...e,fechaPresentacion:hr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await da(Ft(Nt,UO),t)},qTe=async(e,t)=>{const r=br(Nt,UO,e);await io(r,t,{merge:!0})},WTe=e=>{const t=tr(Ft(Nt,UTe));return yr(t,r=>{e(r.docs.map(n=>MO(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},OZ=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},qg={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},DZ=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},XTe=({cursos:e,onSelect:t})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=DZ(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),YTe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=DZ(e);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:qg[s]||qg.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},JTe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=T.useState([]),[i,o]=T.useState({}),[l,u]=T.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=T.useState(null),[m,p]=T.useState(null),[x,g]=T.useState(!0),b=T.useMemo(()=>r.filter(C=>C.profile===Kt.ESTUDIANTE&&OZ(C.curso||"")===e).map(C=>C.nombreCompleto).sort((C,N)=>C.localeCompare(N)),[r,e]);T.useEffect(()=>{g(!0);const C=MTe(e,t,N=>{s(N);const P=N.map(F=>F.id),O=zTe(P,F=>{o(M=>({...M,...F}))});return g(!1),()=>O()});return()=>C()},[e,t]);const y=C=>{const{name:N,value:P}=C.target;d?f(O=>O?{...O,[N]:P}:null):u(O=>({...O,[N]:P}))},_=async C=>{if(C.preventDefault(),p(null),!l.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const N={asignatura:t,curso:e,...l},P=b.reduce((O,F)=>(O[F]="trabajado",O),{});try{await QTe(N,P),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(O){console.error(O),p("No se pudo crear la evaluacin.")}},S=(C,N)=>{var M;const P=((M=i[C])==null?void 0:M[N])||"trabajado";let O;P==="trabajado"?O="no trabajado":P==="no trabajado"?O="ausente":O="trabajado";const F={...i,[C]:{...i[C]||{},[N]:O}};o(F),$Te(C,{[N]:O}).catch(Q=>{console.error("Error updating grade:",Q)})},B=C=>f(C),I=async()=>{if(d)try{await HTe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(C){console.error(C),p("No se pudo guardar la edicin.")}},D=async C=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await VTe(C)}catch(N){console.error(N),p("No se pudo eliminar la evaluacin.")}},E=T.useCallback(C=>{if(a.length===0)return"-";let N=0,P=0;return a.forEach(O=>{var M;const F=(M=i[O.id])==null?void 0:M[C];F==="trabajado"?(N+=7,P++):F==="no trabajado"&&(N+=2,P++)}),P===0?"-":(N/P).toFixed(1)},[i,a]);return x?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(C=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===C.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:I,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:C.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:C.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>B(C),className:"text-blue-500 hover:text-blue-700",children:""}),c.jsx("button",{onClick:()=>D(C.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},C.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:C}),a.map(N=>{var F;const P=(F=i[N.id])==null?void 0:F[C];let O;return P==="trabajado"?O=qg[t]||qg.Default:P==="no trabajado"?O="":P==="ausente"?O="A":O=qg[t]||qg.Default,c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>S(N.id,C),className:`text-3xl transition-opacity duration-200 ${P==="trabajado"?"opacity-100":P==="no trabajado"?"opacity-40":P==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:O})},N.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(C)})]},C))})]})})]})},ZTe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=T.useState({}),[m,p]=T.useState(2),x=T.useMemo(()=>r.filter(B=>B.profile===Kt.ESTUDIANTE&&OZ(B.curso||"")===e).sort((B,I)=>B.nombreCompleto.localeCompare(I.nombreCompleto)),[r,e]);T.useEffect(()=>{const B=KTe(e,t,s);return()=>B()},[e,t]),T.useEffect(()=>{if(i){const B={};i.grupos.forEach(I=>{I.integrantes.forEach(D=>{B[D.nombre]={groupNumber:String(I.numero),role:D.rol||""}})}),f(B)}else f({})},[i]);const g=async B=>{if(B.preventDefault(),!l.nombre.trim())return;const I={curso:e,asignatura:t,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await GTe(I),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(D){console.error(D),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const B=new Map;for(const D of x){const E=d[D.nombreCompleto];if(E&&E.groupNumber){const C=parseInt(E.groupNumber,10);isNaN(C)||(B.has(C)||B.set(C,[]),B.get(C).push({nombre:D.nombreCompleto,rol:E.role||""}))}}const I=Array.from(B.entries()).map(([D,E])=>({numero:D,integrantes:E})).sort((D,E)=>D.numero-E.numero);try{await qTe(i.id,{grupos:I}),alert("Grupos guardados con xito.")}catch(D){console.error(D),alert("No se pudieron guardar los grupos.")}},y=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const B=[...x].sort(()=>Math.random()-.5),I={};B.forEach((D,E)=>{var C;I[D.nombreCompleto]={groupNumber:String(E%m+1),role:((C=d[D.nombreCompleto])==null?void 0:C.role)||""}}),f(I)},_=(B,I,D)=>{f(E=>({...E,[B]:{...E[B]||{groupNumber:"",role:""},[I]:D}}))},S=T.useMemo(()=>{const B=new Map;return Object.entries(d).forEach(([I,D])=>{D.groupNumber&&(B.has(D.groupNumber)||B.set(D.groupNumber,[]),B.get(D.groupNumber).push({nombre:I,rol:D.role}))}),Array.from(B.entries()).sort((I,D)=>parseInt(I[0])-parseInt(D[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:B=>p(parseInt(B.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:x.map(B=>{var I;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:B.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((I=d[B.nombreCompleto])==null?void 0:I.groupNumber)||"",onChange:D=>_(B.nombreCompleto,"groupNumber",D.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},B.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.map(([B,I])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",B]}),c.jsx("ul",{className:"space-y-2",children:I.map(D=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:D.nombre}),c.jsxs("select",{value:D.rol||"",onChange:E=>_(D.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),bX.map(E=>c.jsx("option",{value:E,children:E},E))]})]},D.nombre))})]},B))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:B=>u({...l,nombre:B.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:B=>u({...l,fecha:B.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(B=>c.jsxs("button",{onClick:()=>o(B),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:B.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",B.fechaPresentacion]})]},B.id))]})]})},e3e=({currentUser:e})=>{const[t,r]=T.useState("calificaciones"),[n,a]=T.useState(null),[s,i]=T.useState(null),[o,l]=T.useState([]),[u,d]=T.useState(!0);T.useEffect(()=>{d(!0);const g=WTe(b=>{l(b),d(!1)});return()=>g()},[]);const f=T.useMemo(()=>e.cursos||[],[e.cursos]),m=T.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:g,label:b})=>c.jsx("button",{onClick:()=>r(g),className:`${t===g?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),x=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(XTe,{cursos:f,onSelect:a});if(!s)return c.jsx(YTe,{curso:n,asignaturas:m,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return c.jsx(JTe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return c.jsx(ZTe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:x()})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PZ="firebasestorage.googleapis.com",RZ="storageBucket",t3e=120*1e3,r3e=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends id{constructor(t,r,n=0){super(ok(t),`Firebase Storage: ${r} (${ok(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ws.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ok(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ys;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ys||(ys={}));function ok(e){return"storage/"+e}function QO(){const e="An unknown error occurred, please check the error payload for server response.";return new ws(ys.UNKNOWN,e)}function n3e(e){return new ws(ys.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a3e(e){return new ws(ys.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s3e(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ws(ys.UNAUTHENTICATED,e)}function i3e(){return new ws(ys.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function o3e(e){return new ws(ys.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function l3e(){return new ws(ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c3e(){return new ws(ys.CANCELED,"User canceled the upload/download.")}function u3e(e){return new ws(ys.INVALID_URL,"Invalid URL '"+e+"'.")}function d3e(e){return new ws(ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function A3e(){return new ws(ys.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RZ+"' property when initializing the app?")}function f3e(){return new ws(ys.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function h3e(){return new ws(ys.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function m3e(e){return new ws(ys.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $I(e){return new ws(ys.INVALID_ARGUMENT,e)}function LZ(){return new ws(ys.APP_DELETED,"The Firebase app was deleted.")}function p3e(e){return new ws(ys.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tb(e,t){return new ws(ys.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function E1(e){throw new ws(ys.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=hc.makeFromUrl(t,r)}catch{return new hc(t,"")}if(n.path==="")return n;throw d3e(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),l={bucket:1,path:3};function u(B){B.path_=decodeURIComponent(B.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${m}`,"i"),x={bucket:1,path:3},g=r===PZ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${g}/${a}/${b}`,"i"),S=[{regex:o,indices:l,postModify:s},{regex:p,indices:x,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let B=0;B<S.length;B++){const I=S[B],D=I.regex.exec(t);if(D){const E=D[I.indices.bucket];let C=D[I.indices.path];C||(C=""),n=new hc(E,C),I.postModify(n);break}}if(n==null)throw u3e(t);return n}}class g3e{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3e(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function l(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,l())},b)}function m(){s&&clearTimeout(s)}function p(b,...y){if(u){m();return}if(b){m(),d.call(null,b,...y);return}if(l()||i){m(),d.call(null,b,...y);return}n<64&&(n*=2);let S;o===1?(o=2,S=0):S=(n+Math.random())*1e3,f(S)}let x=!1;function g(b){x||(x=!0,m(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,g(!0)},r),g}function x3e(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3e(e){return e!==void 0}function y3e(e){return typeof e=="object"&&!Array.isArray(e)}function HO(e){return typeof e=="string"||e instanceof String}function z9(e){return VO()&&e instanceof Blob}function VO(){return typeof Blob<"u"}function $9(e,t,r,n){if(n<t)throw $I(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw $I(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function UZ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var qm;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(qm||(qm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3e(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3e{constructor(t,r,n,a,s,i,o,l,u,d,f,m=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,g)=>{this.resolve_=x,this.reject_=g,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new tE(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===qm.NO_ERROR,l=s.getStatus();if(!o||w3e(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===qm.ABORT;n(!1,new tE(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new tE(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());b3e(l)?s(l):s()}catch(l){i(l)}else if(o!==null){const l=QO();l.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,l)):i(l)}else if(a.canceled){const l=this.appDelete_?LZ():c3e();i(l)}else{const l=l3e();i(l)}};this.canceled_?r(!1,new tE(!1,null,!0)):this.backoffId_=v3e(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&x3e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tE{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function C3e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function _3e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function S3e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function N3e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function B3e(e,t,r,n,a,s,i=!0,o=!1){const l=UZ(e.urlParams),u=e.url+l,d=Object.assign({},e.headers);return S3e(d,t),C3e(d,r),_3e(d,s),N3e(d,n),new E3e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function T3e(...e){const t=k3e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(VO())return new Blob(e);throw new ws(ys.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function I3e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3e(e){if(typeof atob>"u")throw m3e("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lk{constructor(t,r){this.data=t,this.contentType=r||null}}function F3e(e,t){switch(e){case nA.RAW:return new lk(MZ(t));case nA.BASE64:case nA.BASE64URL:return new lk(QZ(e,t));case nA.DATA_URL:return new lk(D3e(t),P3e(t))}throw QO()}function MZ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function O3e(e){let t;try{t=decodeURIComponent(e)}catch{throw Tb(nA.DATA_URL,"Malformed data URL.")}return MZ(t)}function QZ(e,t){switch(e){case nA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Tb(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case nA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Tb(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=j3e(t)}catch(a){throw a.message.includes("polyfill")?a:Tb(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class HZ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Tb(nA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=R3e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function D3e(e){const t=new HZ(e);return t.base64?QZ(nA.BASE64,t.rest):O3e(t.rest)}function P3e(e){return new HZ(e).contentType}function R3e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,r){let n=0,a="";z9(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(z9(this.data_)){const n=this.data_,a=I3e(n,t,r);return a===null?null:new qh(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new qh(n,!0)}}static getBlob(...t){if(VO()){const r=t.map(n=>n instanceof qh?n.data_:n);return new qh(T3e.apply(null,r))}else{const r=t.map(i=>HO(i)?F3e(nA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new qh(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(e){let t;try{t=JSON.parse(e)}catch{return null}return y3e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function U3e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function zZ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3e(e,t){return t}class Wo{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||M3e}}let rE=null;function Q3e(e){return!HO(e)||e.length<2?e:zZ(e)}function $Z(){if(rE)return rE;const e=[];e.push(new Wo("bucket")),e.push(new Wo("generation")),e.push(new Wo("metageneration")),e.push(new Wo("name","fullPath",!0));function t(s,i){return Q3e(i)}const r=new Wo("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new Wo("size");return a.xform=n,e.push(a),e.push(new Wo("timeCreated")),e.push(new Wo("updated")),e.push(new Wo("md5Hash",null,!0)),e.push(new Wo("cacheControl",null,!0)),e.push(new Wo("contentDisposition",null,!0)),e.push(new Wo("contentEncoding",null,!0)),e.push(new Wo("contentLanguage",null,!0)),e.push(new Wo("contentType",null,!0)),e.push(new Wo("metadata","customMetadata",!0)),rE=e,rE}function H3e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new hc(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function V3e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return H3e(n,e),n}function KZ(e,t,r){const n=VZ(t);return n===null?null:V3e(e,n,r)}function z3e(e,t,r,n){const a=VZ(t);if(a===null||!HO(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,m="/b/"+i(d)+"/o/"+i(f),p=zO(m,r,n),x=UZ({alt:"media",token:u});return p+x})[0]}function $3e(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}class GZ{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(e){if(!e)throw QO()}function K3e(e,t){function r(n,a){const s=KZ(e,a,t);return qZ(s!==null),s}return r}function G3e(e,t){function r(n,a){const s=KZ(e,a,t);return qZ(s!==null),z3e(s,a,e.host,e._protocol)}return r}function WZ(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=i3e():a=s3e():r.getStatus()===402?a=a3e(e.bucket):r.getStatus()===403?a=o3e(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function q3e(e){const t=WZ(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=n3e(e.path)),s.serverResponse=a.serverResponse,s}return r}function W3e(e,t,r){const n=t.fullServerUrl(),a=zO(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new GZ(a,s,G3e(e,r),i);return o.errorHandler=q3e(t),o}function X3e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Y3e(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=X3e(null,t)),n}function J3e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let S="";for(let B=0;B<2;B++)S=S+Math.random().toString().slice(2);return S}const l=o();i["Content-Type"]="multipart/related; boundary="+l;const u=Y3e(t,n,a),d=$3e(u,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=qh.getBlob(f,n,m);if(p===null)throw f3e();const x={name:u.fullPath},g=zO(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,_=new GZ(g,b,K3e(e,r),y);return _.urlParams=x,_.headers=i,_.body=p.uploadData(),_.errorHandler=WZ(t),_}class Z3e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qm.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qm.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qm.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw E1("cannot .send() more than once");if(Uf(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw E1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw E1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw E1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw E1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class eIe extends Z3e{initXhr(){this.xhr_.responseType="text"}}function XZ(){return new eIe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,r){this._service=t,r instanceof hc?this._location=r:this._location=hc.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new hp(t,r)}get root(){const t=new hc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zZ(this._location.path)}get storage(){return this._service}get parent(){const t=L3e(this._location.path);if(t===null)return null;const r=new hc(this._location.bucket,t);return new hp(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw p3e(t)}}function tIe(e,t,r){e._throwIfRoot("uploadBytes");const n=J3e(e.storage,e._location,$Z(),new qh(t,!0),r);return e.storage.makeRequestWithTokens(n,XZ).then(a=>({metadata:a,ref:e}))}function rIe(e){e._throwIfRoot("getDownloadURL");const t=W3e(e.storage,e._location,$Z());return e.storage.makeRequestWithTokens(t,XZ).then(r=>{if(r===null)throw h3e();return r})}function nIe(e,t){const r=U3e(e._location.path,t),n=new hc(e._location.bucket,r);return new hp(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aIe(e){return/^[A-Za-z]+:\/\//.test(e)}function sIe(e,t){return new hp(e,t)}function YZ(e,t){if(e instanceof $O){const r=e;if(r._bucket==null)throw A3e();const n=new hp(r,r._bucket);return t!=null?YZ(n,t):n}else return t!==void 0?nIe(e,t):e}function iIe(e,t){if(t&&aIe(t)){if(e instanceof $O)return sIe(e,t);throw $I("To use ref(service, url), the first argument must be a Storage instance.")}else return YZ(e,t)}function K9(e,t){const r=t==null?void 0:t[RZ];return r==null?null:hc.makeFromBucketSpec(r,e)}function oIe(e,t,r,n={}){e.host=`${t}:${r}`;const a=Uf(t);a&&(KS(`https://${e.host}/b`),GS("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:eq(s,e.app.options.projectId))}class $O{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=PZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t3e,this._maxUploadRetryTime=r3e,this._requests=new Set,a!=null?this._bucket=hc.makeFromBucketSpec(a,this._host):this._bucket=K9(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=hc.makeFromBucketSpec(this._url,t):this._bucket=K9(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){$9("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){$9("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(lc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new hp(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new g3e(LZ());{const i=B3e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const G9="@firebase/storage",q9="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ="storage";function lIe(e,t,r){return e=ba(e),tIe(e,t,r)}function cIe(e){return e=ba(e),rIe(e)}function uIe(e,t){return e=ba(e),iIe(e,t)}function dIe(e=qS(),t){e=ba(e);const n=Ry(e,JZ).getImmediate({identifier:t}),a=LF("storage");return a&&AIe(n,...a),n}function AIe(e,t,r,n={}){oIe(e,t,r,n)}function fIe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new $O(r,n,a,t,yp)}function hIe(){x0(new wf(JZ,fIe,"PUBLIC").setMultipleInstances(!0)),fu(G9,q9,""),fu(G9,q9,"esm2020")}hIe();const hx="acompanamientos",mIe="ciclosOPR",pIe="configuracion",gIe=async()=>{try{const e=tr(Ft(Mr,hx),qr("fecha","desc"));return(await ti(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompaamientos:",e),new Error("No se pudieron cargar los registros de acompaamiento")}},vIe=async e=>{try{return{id:(await da(Ft(Mr,hx),{...e,fecha:e.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acompaamiento:",t),new Error("No se pudo crear el registro de acompaamiento")}},xIe=async(e,t)=>{try{const r=br(Mr,hx,e);await cx(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompaamiento:",r,"ID:",e),new Error("No se pudo actualizar el registro de acompaamiento")}},bIe=async e=>{try{const t=br(Mr,hx,e);await ni(t)}catch(t){throw console.error("Error al eliminar acompaamiento:",t,"ID:",e),new Error("No se pudo eliminar el registro de acompaamiento")}},yIe=async(e,t)=>{try{const r=Ft(Mr,hx,e,mIe);return{id:(await da(r,{...t,createdAt:new Date().toISOString()})).id,...t}}catch(r){throw console.error(`Error al crear ciclo OPR para ${e}:`,r),new Error("No se pudo crear el ciclo OPR")}},wIe=async(e,t)=>{try{const r=dIe(),n=uIe(r,t),a=await lIe(n,e);return await cIe(a.ref)}catch(r){throw console.error(`Error al subir archivo a ${t}:`,r),new Error("No se pudo subir el archivo")}},EIe=async e=>{try{const t=tr(Ft(Mr,hx),Mn("docente","==",e),qr("fecha","desc"));return(await ti(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompaamientos por docente:",t),new Error("No se pudieron cargar los acompaamientos del docente")}},CIe=async()=>{try{const e=br(Mr,pIe,"rubricaAcompanamiento"),t=await Xy(e);return t.exists()?t.data().rubrica:null}catch(e){return console.error("Error al obtener rbrica personalizada:",e),null}},_Ie=async()=>await kZ(),SIe=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime"})=>{const i=`file-upload-${e.replace(/\s+/g,"-")}`;return c.jsxs("div",{className:"w-full",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),r?c.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[c.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline truncate",children:"Ver video cargado"}),c.jsx("button",{type:"button",onClick:n,className:"text-red-500 hover:text-red-700 ml-auto",children:c.jsx(x5,{className:"w-4 h-4"})})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:i,type:"file",onChange:o=>o.target.files&&t(o.target.files[0]),className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100",disabled:a,accept:s}),a&&c.jsx("div",{className:"text-sm text-amber-600",children:"Cargando..."})]})]})},NIe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=T.useState(!1),[o,l]=T.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),u=T.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:o.curso||"",profesor:o.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,o]),[d,f]=T.useState(t||u),[m,p]=T.useState({}),x=C=>{const{name:N,value:P}=C.target,O=N.split(".");O.length>1?f(F=>{const M=JSON.parse(JSON.stringify(F));let Q=M;for(let J=0;J<O.length-1;J++)Q=Q[O[J]];return Q[O[O.length-1]]=P,M}):f(F=>({...F,[N]:P}))},g=(C,N,P)=>{f(O=>({...O,detallesObservacion:O.detallesObservacion.map(F=>F.id===C?{...F,[N]:P}:F)}))},b=()=>{const C=d.detallesObservacion[d.detallesObservacion.length-1],N=C&&parseInt(C.minuto.split("-")[1],10)||0,P=`${N+1}-${N+5}`;f(O=>({...O,detallesObservacion:[...O.detallesObservacion,{id:`row_${Date.now()}`,minuto:P,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},y=C=>{f(N=>({...N,detallesObservacion:N.detallesObservacion.filter(P=>P.id!==C)}))},_=async(C,N)=>{p(P=>({...P,[C]:!0}));try{const P=`${Date.now()}-${N.name}`,O=e.id||"independent",F=d.id||"temp",M=`videos_opr/${O}/${F}/${P}`,Q=await wIe(N,M),J=C.split(".");J.length>1?f(W=>{const Z=JSON.parse(JSON.stringify(W));let H=Z;for(let z=0;z<J.length-1;z++)H=H[J[z]];return H[J[J.length-1]]=Q,Z}):f(W=>({...W,[C]:Q}))}catch(P){console.error("Error al subir archivo:",P),alert("No se pudo subir el archivo. Revise los permisos de Storage.")}finally{p(P=>({...P,[C]:!1}))}},S=C=>{const N=C.split(".");N.length>1?f(P=>{const O=JSON.parse(JSON.stringify(P));let F=O;for(let M=0;M<N.length-1;M++)F=F[N[M]];return F[N[N.length-1]]="",O}):f(P=>({...P,[C]:""}))},B=async(C,N,P)=>{if(!P||!P.trim())return P;const O=`Mejora la redaccin del siguiente texto con un tono tcnico-pedaggico propio de informes educativos. Mantn el sentido original y NO agregues informacin nueva ni ejemplos inventados. Devulvelo como un texto breve, claro y directo. Texto (${N}):

"""${P}"""`;try{return(await C.generateContent(O)).response.text()}catch(F){return console.error(`Error improving text for ${N}:`,F),P}},I=async()=>{var C,N;i(!0);try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await S0("Acompaamiento - Mejorar Ciclo OPR");const F=new xs(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),M=d.retroalimentacion,Q=d.planificacion,J=await Promise.all([B(F,"xito",M.exito),B(F,"Modelo",M.modelo),B(F,"Foco",M.foco),B(F,"Elementos a identificar",M.elementosIdentificar),B(F,"Brecha - Preguntas",((C=M.brecha)==null?void 0:C.preguntas)||""),B(F,"Brecha - Indicadores",((N=M.brecha)==null?void 0:N.indicadores)||""),B(F,"Planificacin - Preparacin",Q.preparacion),B(F,"Planificacin - Objetivo",Q.objetivo),B(F,"Planificacin - Actividad",Q.actividad),B(F,"Planificacin - Tiempo",Q.tiempo)]);f(W=>({...W,retroalimentacion:{...W.retroalimentacion,exito:J[0],modelo:J[1],foco:J[2],elementosIdentificar:J[3],brecha:{...W.retroalimentacion.brecha,preguntas:J[4],indicadores:J[5]}},planificacion:{...W.planificacion,preparacion:J[6],objetivo:J[7],actividad:J[8],tiempo:J[9]}}))}catch(P){console.error(P),alert("No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{i(!1)}},D=()=>{const C=new fr,N=C.internal.pageSize.getWidth(),P=15,O=N-P*2;let F=20;const M=Z=>{F>260&&(C.addPage(),F=20),C.setFontSize(14),C.setFont("helvetica","bold"),C.text(Z,P,F),F+=10},Q=(Z,H="")=>{if(!Z)return;F>270&&(C.addPage(),F=20),C.setFontSize(10),C.setFont("helvetica","bold"),C.text(H,P,F),C.setFont("helvetica","normal");const z=C.splitTextToSize(Z,O-(H?15:0));C.text(z,P+(H?15:0),F),F+=z.length*5+4};C.setFontSize(18),C.setFont("helvetica","bold"),C.text("Informe de Ciclo OPR",N/2,F,{align:"center"}),F+=15,M("1. Datos Generales");const J=[["Docente:",o.docente],["Curso:",o.curso],["Asignatura:",o.asignatura],["Fecha:",new Date(d.fecha).toLocaleDateString("es-CL")],["Hora:",`${d.horaInicio} - ${d.horaTermino}`],["Ciclo:",d.nombreCiclo]];nl(C,{body:J,startY:F,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),F=C.lastAutoTable.finalY+10,M("2. Registro Detallado de Observacin");const W=d.detallesObservacion.map(Z=>[Z.minuto,Z.accionesDocente,Z.accionesEstudiantes,Z.actividades]);nl(C,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:W,startY:F,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:Z=>{var H;F=((H=Z.cursor)==null?void 0:H.y)||20}}),F=C.lastAutoTable.finalY+10,M("3. Retroalimentacin Docente"),Q(d.retroalimentacion.exito,"xito:"),Q(d.retroalimentacion.modelo,"Modelo:"),Q(d.retroalimentacion.foco,"Foco:"),Q(d.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),F+=5,C.setFontSize(11),C.setFont("helvetica","bold"),C.text("Anlisis de Brecha",P,F),F+=7,Q(`${d.retroalimentacion.brecha.minutoInicial} a ${d.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),Q(d.retroalimentacion.brecha.preguntas,"Preguntas:"),Q(d.retroalimentacion.brecha.indicadores,"Indicadores:"),M("4. Planificacin de Prctica"),Q(d.planificacion.preparacion,"Preparacin:"),Q(d.planificacion.objetivo,"Objetivo:"),Q(d.planificacion.actividad,"Actividad:"),Q(d.planificacion.tiempo,"Tiempo:"),M("5. Seguimiento"),Q(new Date(d.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),Q(d.seguimiento.firma,"Firma (Registrado por):"),C.save(`Informe_OPR_${o.docente}_${d.fecha}.pdf`)},E=async C=>{C.preventDefault();const N={...d,docenteInfo:o.docente,cursoInfo:o.curso,asignaturaInfo:o.asignatura,seguimiento:{...d.seguimiento,profesor:o.docente,curso:o.curso}};await r(N)};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{value:o.docente,onChange:C=>l(N=>({...N,docente:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{value:o.curso,onChange:C=>l(N=>({...N,curso:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Wa.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:o.asignatura,onChange:C=>l(N=>({...N,asignatura:C.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),Pi.map(C=>c.jsx("option",{value:C,children:C},C))]})]})]})]}),c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:I,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:s,children:[c.jsx(EX,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),c.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(wX,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),c.jsxs("form",{onSubmit:E,className:"space-y-8",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(bge,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("input",{type:"text",name:"nombreCiclo",value:d.nombreCiclo,onChange:x,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"number",name:"registroN",value:d.registroN,onChange:x,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaInicio",value:d.horaInicio,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"time",name:"horaTermino",value:d.horaTermino,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx(SIe,{label:"Subir video de observacin de clase",onFileChange:C=>_("videoObservacionUrl",C),uploadedUrl:d.videoObservacionUrl,onRemove:()=>S("videoObservacionUrl"),isUploading:!!m.videoObservacionUrl})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(Ppe,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b dark:border-slate-600",children:[c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),c.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),c.jsx("th",{className:"p-2"})]})}),c.jsx("tbody",{children:d.detallesObservacion.map(C=>c.jsxs("tr",{className:"border-b dark:border-slate-700",children:[c.jsx("td",{children:c.jsx("input",{type:"text",value:C.minuto,onChange:N=>g(C.id,"minuto",N.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesDocente,onChange:N=>g(C.id,"accionesDocente",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.accionesEstudiantes,onChange:N=>g(C.id,"accionesEstudiantes",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:c.jsx("textarea",{value:C.actividades,onChange:N=>g(C.id,"actividades",N.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})}),c.jsx("td",{children:d.detallesObservacion.length>1&&c.jsx("button",{type:"button",onClick:()=>y(C.id),className:"text-red-500 p-1",children:c.jsx(x5,{className:"w-4 h-4"})})})]},C.id))})]})}),c.jsxs("button",{type:"button",onClick:b,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1",children:[c.jsx(pI,{className:"w-4 h-4"})," Agregar Fila"]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(ege,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),c.jsx("textarea",{name:"retroalimentacion.exito",value:d.retroalimentacion.exito,onChange:x,placeholder:"xito",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.modelo",value:d.retroalimentacion.modelo,onChange:x,placeholder:"Modelo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.foco",value:d.retroalimentacion.foco,onChange:x,placeholder:"Foco",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:d.retroalimentacion.elementosIdentificar,onChange:x,placeholder:"Elementos a Identificar",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Brecha"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:d.retroalimentacion.brecha.minutoInicial,onChange:x,placeholder:"Minuto inicial",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:d.retroalimentacion.brecha.minutoFinal,onChange:x,placeholder:"Minuto final",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:d.retroalimentacion.brecha.preguntas,onChange:x,placeholder:"Preguntas",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:d.retroalimentacion.brecha.indicadores,onChange:x,placeholder:"Indicadores",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[c.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[c.jsx(Bpe,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),c.jsx("textarea",{name:"planificacion.preparacion",value:d.planificacion.preparacion,onChange:x,placeholder:"Preparacin",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.objetivo",value:d.planificacion.objetivo,onChange:x,placeholder:"Objetivo",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{name:"planificacion.actividad",value:d.planificacion.actividad,onChange:x,placeholder:"Actividad",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"planificacion.tiempo",value:d.planificacion.tiempo,onChange:x,placeholder:"Tiempo",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"p-3 border rounded-md dark:border-slate-600 space-y-3",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{type:"date",name:"seguimiento.fecha",value:d.seguimiento.fecha,onChange:x,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"text",name:"seguimiento.firma",value:d.seguimiento.firma,onChange:x,placeholder:"Firma (Nombre de quien registra)",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Ciclo OPR"})]})]})]})},BIe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState(!0),[i,o]=T.useState(!0),[l,u]=T.useState(null),[d,f]=T.useState("list"),[m,p]=T.useState(null),[x,g]=T.useState("general"),[b,y]=T.useState(!1),_=vb,S=T.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[B,I]=T.useState(S),D=T.useCallback(async()=>{s(!0);try{const H=await gIe();t(H)}catch(H){u("No se pudieron cargar los registros."),console.error(H)}finally{s(!1)}},[]),E=T.useCallback(async()=>{o(!0);try{const z=(await _Ie()).filter(G=>G.profile==="PROFESORADO").map(G=>G.nombreCompleto).sort();n(z)}catch(H){u("No se pudo cargar la lista de profesores."),console.error(H)}finally{o(!1)}},[]);T.useEffect(()=>{D(),E()},[D,E]);const C=async()=>{if(!("docente"in B)||!B.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}y(!0),u(null);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await S0("Acompaamiento - Feedback General");const G=new xs(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=Object.entries(B.rubricaResultados||{}).map(([te,ie])=>`- ${te}: Nivel ${ie}`).join(`
`),R=`
            Eres un asesor pedaggico experto. Redacta una retroalimentacin consolidada y constructiva para un docente.
            Contexto de la observacin:
            - Docente: ${B.docente}
            - Asignatura: ${B.asignatura}
            - Curso: ${B.curso}
            - Resultados de la pauta de observacin (rbrica):
            ${ne||"No se complet la pauta."}
            - Observaciones adicionales del evaluador:
            ${B.observacionesGenerales||"Sin observaciones adicionales."}

            Basado en esta informacin, tu texto debe:
            1. Iniciar con un reconocimiento positivo.
            2. Mencionar 1 o 2 fortalezas clave observadas.
            3. Identificar 1 o 2 reas de mejora concretas, con un tono de sugerencia.
            4. Concluir con una frase motivadora.
            La respuesta debe ser solo el texto de la retroalimentacin.
        `,Y=(await G.generateContent(R)).response.text();I(te=>({...te,retroalimentacionConsolidada:Y})),alert("Retroalimentacin generada con xito.")}catch(H){console.error("Error al generar retroalimentacin:",H),u("No se pudo generar la retroalimentacin. Revisa la consola para ms detalles.")}finally{y(!1)}},N=async H=>{if(H.preventDefault(),!("docente"in B)||!B.docente||!B.curso||!B.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{if(m)await xIe(m,B),alert("Actualizado correctamente!");else{const z=await vIe(B);p(z.id),I(z),alert("Guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await D()}catch(z){u("Error al guardar el registro."),console.error(z)}},P=()=>{I(S),p(null),f("form"),g("general"),u(null)},O=H=>{I(H),p(H.id),f("form"),g("general"),u(null)},F=async H=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await bIe(H),await D()}catch(z){u("No se pudo eliminar el registro."),console.error(z)}},M=(H,z)=>{I(G=>({...G,rubricaResultados:{...G.rubricaResultados,[H]:z}}))},Q=()=>{if(!("docente"in B)||!B.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}const H=new fr,z=H.internal.pageSize.getWidth(),G=15,ne=z-G*2;let R=20;H.setFontSize(18),H.setFont("helvetica","bold"),H.text("INFORME DE ACOMPAAMIENTO DOCENTE",z/2,R,{align:"center"}),R+=5,H.setLineWidth(.5),H.line(G,R,z-G,R),R+=10;const q=[["Docente:",B.docente],["Curso:",B.curso],["Asignatura:",B.asignatura],["Fecha:",new Date(B.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",B.bloques||"No especificado"]];if(nl(H,{body:q,startY:R,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),R=H.lastAutoTable.finalY+10,Object.keys(B.rubricaResultados||{}).length>0){H.setFontSize(12),H.setFont("helvetica","bold"),H.text("RESULTADOS DE EVALUACIN",G,R),R+=8;const ie=Object.entries(B.rubricaResultados).map(([pe,oe])=>[pe,`Nivel ${oe}`,oe===1?"Dbil":oe===2?"Incipiente":oe===3?"Satisfactorio":"Avanzado"]);nl(H,{startY:R,head:[["Criterio","Nivel","Descripcin"]],body:ie,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:G,right:G},styles:{fontSize:9}}),R=H.lastAutoTable.finalY+10}const Y=(ie,pe)=>{if(!pe||pe.trim()==="")return;R>250&&(H.addPage(),R=20),H.setFontSize(12),H.setFont("helvetica","bold"),H.text(ie,G,R),R+=8,H.setFontSize(10),H.setFont("helvetica","normal");const oe=H.splitTextToSize(pe,ne);H.text(oe,G,R),R+=oe.length*5+10};Y("OBSERVACIONES GENERALES",B.observacionesGenerales),Y("RETROALIMENTACIN PEDAGGICA",B.retroalimentacionConsolidada);const te=H.getNumberOfPages();for(let ie=1;ie<=te;ie++)H.setPage(ie),H.setFontSize(8),H.setFont("helvetica","italic"),H.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Pgina ${ie} de ${te}`,z/2,H.internal.pageSize.getHeight()-10,{align:"center"});H.save(`Informe_Acompaamiento_${B.docente}_${B.curso}_${new Date().toISOString().split("T")[0]}.pdf`)},J=H=>{I(z=>({...z,[H.target.name]:H.target.value}))},W=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>{P(),g("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2",children:[c.jsx(pI,{className:"w-5 h-5"})," Acompaamiento"]}),c.jsxs("button",{onClick:()=>{I(S),p(null),f("form"),g("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2",children:[c.jsx(pI,{className:"w-5 h-5"})," Ciclo OPR"]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-3",children:[c.jsx(Tpe,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Generales"]}),c.jsxs("div",{className:"space-y-3",children:[a&&c.jsx("p",{children:"Cargando..."}),!a&&e.filter(H=>H.id).length>0?e.filter(H=>H.id).map(H=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:H.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[H.curso," - ",H.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(H.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>{O(H),g("general")},className:"text-green-600 hover:text-green-800 font-semibold text-sm",children:"Ver/Editar"}),c.jsx("button",{onClick:()=>{O(H),g("opr")},className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Agregar OPR"}),c.jsx("button",{onClick:()=>F(H.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1",children:c.jsx(x5,{className:"w-4 h-4"})})]})]},H.id)):!a&&c.jsx("p",{className:"text-slate-500 italic p-4 bg-slate-100 dark:bg-slate-800 rounded-md",children:"No hay acompaamientos registrados."})]})]})]}),Z=()=>{const H=m?e.find(G=>G.id===m):null,z={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in B&&B.docente||"",curso:"curso"in B&&B.curso||"",asignatura:"asignatura"in B&&B.asignatura||"",bloques:"bloques"in B&&B.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:x==="general"?m?"Editando Acompaamiento":"Nuevo Acompaamiento":"Gestin de Ciclo OPR"}),c.jsx("button",{type:"button",onClick:()=>f("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:" Volver al listado"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>g("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${x==="general"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Acompaamiento General"}),c.jsx("button",{onClick:()=>g("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${x==="opr"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Ciclo OPR"})]})}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),x==="general"&&c.jsxs("form",{onSubmit:N,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30",children:[c.jsx("h4",{className:"text-lg font-semibold mb-2 text-green-700 dark:text-green-300",children:"Asistente IA - Informe General"}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[c.jsxs("button",{type:"button",onClick:C,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md flex items-center gap-2",disabled:b,children:[c.jsx(EX,{className:"w-4 h-4"}),b?"Generando...":"Generar Retroalimentacin con IA"]}),c.jsxs("button",{type:"button",onClick:()=>Q(),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[c.jsx(wX,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Genera automticamente la retroalimentacin. Luego, crea el informe en PDF."}),"retroalimentacionConsolidada"in B&&B.retroalimentacionConsolidada&&c.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-slate-800 rounded-md shadow",children:[c.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Retroalimentacin Consolidada (guardada):"}),c.jsx("textarea",{readOnly:!0,rows:8,value:B.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap bg-transparent border-none p-0 focus:ring-0"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:"docente"in B?B.docente:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:"curso"in B?B.curso:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Wa.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:"asignatura"in B?B.asignatura:"",onChange:J,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Pi.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:"bloques"in B?B.bloques:"",onChange:J,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in B?B.observacionesGenerales:"",onChange:J,rows:4,placeholder:"Ingrese sus observaciones sobre la clase...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(G=>c.jsx(ft.Fragment,{children:G.criteria.map((ne,R)=>c.jsxs("tr",{children:[R===0&&c.jsx("td",{rowSpan:G.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:G.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ne.name}),ne.levels.map((q,Y)=>{const te=Y+1,ie="rubricaResultados"in B&&B.rubricaResultados[ne.name]===te;return c.jsx("td",{onClick:()=>M(ne.name,te),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ie?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:q},te)})]},ne.name))},G.domain))})]})}),c.jsx("div",{className:"flex justify-end gap-4",children:c.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-md",children:[m?"Actualizar":"Guardar"," Acompaamiento"]})})]}),x==="opr"&&c.jsx(NIe,{acompanamiento:H||z,cicloToEdit:null,profesores:r,onSave:async G=>{try{const ne={...G,acompanamientoId:(H==null?void 0:H.id)||null};await yIe(ne),alert("Ciclo OPR guardado exitosamente"),f("list")}catch(ne){console.error("Error al guardar ciclo OPR:",ne),alert("Error al guardar el ciclo OPR")}},onCancel:()=>f("list")})]})};return a||i?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?W():Z()})})},KO="mensajes_internos",kIe="usuarios",ZZ="mensajes_read_status",eee=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},TIe=(e,t)=>{const r=tr(Ft(Nt,KO),Mn("participants","array-contains",e),qr("fecha","desc"));return yr(r,a=>{const s=a.docs.map(i=>eee(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},IIe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:hr.fromDate(new Date)};await da(Ft(Nt,KO),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},jIe=async e=>{try{const t=br(Nt,KO,e);await ni(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},FIe=(e,t)=>{const r=br(Nt,ZZ,e);return yr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},OIe=async(e,t)=>{try{const r=br(Nt,ZZ,e);await io(r,{messages:Qme(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como ledo:",r),new Error("No se pudo actualizar el estado de lectura.")}},DIe=e=>{const t=tr(Ft(Nt,kIe),qr("nombreCompleto","asc"));return yr(t,n=>{const a=n.docs.map(s=>eee(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},PIe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=T.useState("inbox"),[a,s]=T.useState([]),[i,o]=T.useState([]),[l,u]=T.useState(null),[d,f]=T.useState({announcements:[],messages:[]}),[m,p]=T.useState(!0),x={para:"",asunto:"",cuerpo:""},[g,b]=T.useState(x);T.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const E=TIe(e.email,P=>{s(P),p(!1)}),C=DIe(o),N=FIe(e.id,P=>{f(P),t()});return()=>{E(),C(),N()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&OIe(e.id,E.id).catch(C=>{console.error("Failed to mark message as read:",C)})},_=async E=>{if(E.preventDefault(),!g.para||!g.asunto.trim()||!g.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const C={de:e.email,para:g.para,asunto:g.asunto,cuerpo:g.cuerpo};try{await IIe(C),b(x),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},S=async E=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await jIe(E),u(null)}catch(C){console.error("Error deleting message:",C),alert("No se pudo eliminar el mensaje.")}},B=E=>{b({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},I=T.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),D=T.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),b(x)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?I:D).map(E=>{const C=r==="inbox"&&!d.messages.includes(E.id);return c.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${C?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),C&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${C?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:g.para,onChange:E=>b({...g,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>c.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:g.asunto,onChange:E=>b({...g,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:g.cuerpo,onChange:E=>b({...g,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>B(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>S(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var KI=function(e,t){return KI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},KI(e,t)};function cd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");KI(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GI=function(){return GI=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},GI.apply(this,arguments)};function Xo(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function l(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(e,[])).next())})}function So(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function nE(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var kf=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Q5=function(e,t){return kf.fromClientRect(e,t.getBoundingClientRect())},RIe=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new kf(0,0,n,a)},H5=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},js=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},W9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LIe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var aE=0;aE<W9.length;aE++)LIe[W9.charCodeAt(aE)]=aE;var X9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sE=0;sE<X9.length;sE++)eb[X9.charCodeAt(sE)]=sE;var UIe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=eb[e.charCodeAt(n)],i=eb[e.charCodeAt(n+1)],o=eb[e.charCodeAt(n+2)],l=eb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},MIe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},QIe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Wm=5,GO=11,ck=2,HIe=GO-Wm,tee=65536>>Wm,VIe=1<<Wm,uk=VIe-1,zIe=1024>>Wm,$Ie=tee+zIe,KIe=$Ie,GIe=32,qIe=KIe+GIe,WIe=65536>>GO,XIe=1<<HIe,YIe=XIe-1,Y9=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},JIe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},ZIe=function(e,t){var r=UIe(e),n=Array.isArray(r)?QIe(r):new Uint32Array(r),a=Array.isArray(r)?MIe(r):new Uint16Array(r),s=24,i=Y9(a,s/2,n[4]/2),o=n[5]===2?Y9(a,(s+n[4])/2):JIe(n,Math.ceil((s+n[4])/4));return new eje(n[0],n[1],n[2],n[3],i,o)},eje=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Wm],r=(r<<ck)+(t&uk),this.data[r];if(t<=65535)return r=this.index[tee+(t-55296>>Wm)],r=(r<<ck)+(t&uk),this.data[r];if(t<this.highStart)return r=qIe-WIe+(t>>GO),r=this.index[r],r+=t>>Wm&YIe,r=this.index[r],r=(r<<ck)+(t&uk),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),J9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tje=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var iE=0;iE<J9.length;iE++)tje[J9.charCodeAt(iE)]=iE;var rje="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Z9=50,nje=1,ree=2,nee=3,aje=4,sje=5,eQ=7,aee=8,tQ=9,t0=10,qI=11,rQ=12,WI=13,ije=14,tb=15,XI=16,oE=17,C1=18,oje=19,nQ=20,YI=21,_1=22,dk=23,xg=24,rc=25,rb=26,nb=27,bg=28,lje=29,km=30,cje=31,lE=32,cE=33,JI=34,ZI=35,ej=36,my=37,tj=38,bC=39,yC=40,Ak=41,see=42,uje=43,dje=[9001,65288],iee="!",pn="",uE="",rj=ZIe(rje),tf=[km,ej],nj=[nje,ree,nee,sje],oee=[t0,aee],aQ=[nb,rb],Aje=nj.concat(oee),sQ=[tj,bC,yC,JI,ZI],fje=[tb,WI],hje=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=rj.get(s);if(o>Z9?(a.push(!0),o-=Z9):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(XI);if(o===aje||o===qI){if(i===0)return n.push(i),r.push(km);var l=r[i-1];return Aje.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(km))}if(n.push(i),o===cje)return r.push(t==="strict"?YI:my);if(o===see||o===lje)return r.push(km);if(o===uje)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(my):r.push(km);r.push(o)}),[n,r,a]},fk=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==t0)break}if(a===t0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===t)return!0;if(i!==t0)break}if(o!==t0)break}return!1},iQ=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===t0)r--;else return n}return 0},mje=function(e,t,r,n,a){if(r[n]===0)return pn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return pn;var i=s-1,o=s+1,l=t[s],u=i>=0?t[i]:0,d=t[o];if(l===ree&&d===nee)return pn;if(nj.indexOf(l)!==-1)return iee;if(nj.indexOf(d)!==-1||oee.indexOf(d)!==-1)return pn;if(iQ(s,t)===aee)return uE;if(rj.get(e[s])===qI||(l===lE||l===cE)&&rj.get(e[o])===qI||l===eQ||d===eQ||l===tQ||[t0,WI,tb].indexOf(l)===-1&&d===tQ||[oE,C1,oje,xg,bg].indexOf(d)!==-1||iQ(s,t)===_1||fk(dk,_1,s,t)||fk([oE,C1],YI,s,t)||fk(rQ,rQ,s,t))return pn;if(l===t0)return uE;if(l===dk||d===dk)return pn;if(d===XI||l===XI)return uE;if([WI,tb,YI].indexOf(d)!==-1||l===ije||u===ej&&fje.indexOf(l)!==-1||l===bg&&d===ej||d===nQ||tf.indexOf(d)!==-1&&l===rc||tf.indexOf(l)!==-1&&d===rc||l===nb&&[my,lE,cE].indexOf(d)!==-1||[my,lE,cE].indexOf(l)!==-1&&d===rb||tf.indexOf(l)!==-1&&aQ.indexOf(d)!==-1||aQ.indexOf(l)!==-1&&tf.indexOf(d)!==-1||[nb,rb].indexOf(l)!==-1&&(d===rc||[_1,tb].indexOf(d)!==-1&&t[o+1]===rc)||[_1,tb].indexOf(l)!==-1&&d===rc||l===rc&&[rc,bg,xg].indexOf(d)!==-1)return pn;if([rc,bg,xg,oE,C1].indexOf(d)!==-1)for(var f=s;f>=0;){var m=t[f];if(m===rc)return pn;if([bg,xg].indexOf(m)!==-1)f--;else break}if([nb,rb].indexOf(d)!==-1)for(var f=[oE,C1].indexOf(l)!==-1?i:s;f>=0;){var m=t[f];if(m===rc)return pn;if([bg,xg].indexOf(m)!==-1)f--;else break}if(tj===l&&[tj,bC,JI,ZI].indexOf(d)!==-1||[bC,JI].indexOf(l)!==-1&&[bC,yC].indexOf(d)!==-1||[yC,ZI].indexOf(l)!==-1&&d===yC||sQ.indexOf(l)!==-1&&[nQ,rb].indexOf(d)!==-1||sQ.indexOf(d)!==-1&&l===nb||tf.indexOf(l)!==-1&&tf.indexOf(d)!==-1||l===xg&&tf.indexOf(d)!==-1||tf.concat(rc).indexOf(l)!==-1&&d===_1&&dje.indexOf(e[o])===-1||tf.concat(rc).indexOf(d)!==-1&&l===C1)return pn;if(l===Ak&&d===Ak){for(var p=r[s],x=1;p>0&&(p--,t[p]===Ak);)x++;if(x%2!==0)return pn}return l===lE&&d===cE?pn:uE},pje=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=hje(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[rc,km,see].indexOf(o)!==-1?my:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,l){return o&&e[l]>=19968&&e[l]<=40959}):void 0;return[n,a,i]},gje=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===iee,this.start=n,this.end=a}return e.prototype.slice=function(){return js.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),vje=function(e,t){var r=H5(e),n=pje(r,t),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=pn;u<o&&(d=mje(r,s,a,++u,i))===pn;);if(d!==pn||u===o){var f=new gje(r,d,l,u);return l=u,{value:f,done:!1}}return{done:!0,value:null}}}},xje=1,bje=2,cw=4,oQ=8,j_=10,lQ=47,Ib=92,yje=9,wje=32,dE=34,S1=61,Eje=35,Cje=36,_je=37,AE=39,fE=40,N1=41,Sje=95,Sl=45,Nje=33,Bje=60,kje=62,Tje=64,Ije=91,jje=93,Fje=61,Oje=123,hE=63,Dje=125,cQ=124,Pje=126,Rje=128,uQ=65533,hk=42,Fm=43,Lje=44,Uje=58,Mje=59,py=46,Qje=0,Hje=8,Vje=11,zje=14,$je=31,Kje=127,zd=-1,lee=48,cee=97,uee=101,Gje=102,qje=117,Wje=122,dee=65,Aee=69,fee=70,Xje=85,Yje=90,Io=function(e){return e>=lee&&e<=57},Jje=function(e){return e>=55296&&e<=57343},yg=function(e){return Io(e)||e>=dee&&e<=fee||e>=cee&&e<=Gje},Zje=function(e){return e>=cee&&e<=Wje},eFe=function(e){return e>=dee&&e<=Yje},tFe=function(e){return Zje(e)||eFe(e)},rFe=function(e){return e>=Rje},mE=function(e){return e===j_||e===yje||e===wje},F_=function(e){return tFe(e)||rFe(e)||e===Sje},dQ=function(e){return F_(e)||Io(e)||e===Sl},nFe=function(e){return e>=Qje&&e<=Hje||e===Vje||e>=zje&&e<=$je||e===Kje},Qh=function(e,t){return e!==Ib?!1:t!==j_},pE=function(e,t,r){return e===Sl?F_(t)||Qh(t,r):F_(e)?!0:!!(e===Ib&&Qh(e,t))},mk=function(e,t,r){return e===Fm||e===Sl?Io(t)?!0:t===py&&Io(r):Io(e===py?t:e)},aFe=function(e){var t=0,r=1;(e[t]===Fm||e[t]===Sl)&&(e[t]===Sl&&(r=-1),t++);for(var n=[];Io(e[t]);)n.push(e[t++]);var a=n.length?parseInt(js.apply(void 0,n),10):0;e[t]===py&&t++;for(var s=[];Io(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(js.apply(void 0,s),10):0;(e[t]===Aee||e[t]===uee)&&t++;var l=1;(e[t]===Fm||e[t]===Sl)&&(e[t]===Sl&&(l=-1),t++);for(var u=[];Io(e[t]);)u.push(e[t++]);var d=u.length?parseInt(js.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},sFe={type:2},iFe={type:3},oFe={type:4},lFe={type:13},cFe={type:8},uFe={type:21},dFe={type:9},AFe={type:10},fFe={type:11},hFe={type:12},mFe={type:14},gE={type:23},pFe={type:1},gFe={type:25},vFe={type:24},xFe={type:26},bFe={type:27},yFe={type:28},wFe={type:29},EFe={type:31},aj={type:32},hee=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(H5(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==aj;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case dE:return this.consumeStringToken(dE);case Eje:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(dQ(r)||Qh(n,a)){var s=pE(r,n,a)?bje:xje,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Cje:if(this.peekCodePoint(0)===S1)return this.consumeCodePoint(),lFe;break;case AE:return this.consumeStringToken(AE);case fE:return sFe;case N1:return iFe;case hk:if(this.peekCodePoint(0)===S1)return this.consumeCodePoint(),mFe;break;case Fm:if(mk(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Lje:return oFe;case Sl:var o=t,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(mk(o,l,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(pE(o,l,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(l===Sl&&u===kje)return this.consumeCodePoint(),this.consumeCodePoint(),vFe;break;case py:if(mk(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case lQ:if(this.peekCodePoint(0)===hk)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===hk&&(d=this.consumeCodePoint(),d===lQ))return this.consumeToken();if(d===zd)return this.consumeToken()}break;case Uje:return xFe;case Mje:return bFe;case Bje:if(this.peekCodePoint(0)===Nje&&this.peekCodePoint(1)===Sl&&this.peekCodePoint(2)===Sl)return this.consumeCodePoint(),this.consumeCodePoint(),gFe;break;case Tje:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(pE(f,m,p)){var i=this.consumeName();return{type:7,value:i}}break;case Ije:return yFe;case Ib:if(Qh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case jje:return wFe;case Fje:if(this.peekCodePoint(0)===S1)return this.consumeCodePoint(),cFe;break;case Oje:return fFe;case Dje:return hFe;case qje:case Xje:var x=this.peekCodePoint(0),g=this.peekCodePoint(1);return x===Fm&&(yg(g)||g===hE)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case cQ:if(this.peekCodePoint(0)===S1)return this.consumeCodePoint(),dFe;if(this.peekCodePoint(0)===cQ)return this.consumeCodePoint(),uFe;break;case Pje:if(this.peekCodePoint(0)===S1)return this.consumeCodePoint(),AFe;break;case zd:return aj}return mE(t)?(this.consumeWhiteSpace(),EFe):Io(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):F_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:js(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();yg(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===hE&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(js.apply(void 0,t.map(function(l){return l===hE?lee:l})),16),s=parseInt(js.apply(void 0,t.map(function(l){return l===hE?fee:l})),16);return{type:30,start:a,end:s}}var i=parseInt(js.apply(void 0,t),16);if(this.peekCodePoint(0)===Sl&&yg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];yg(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(js.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===fE?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===fE?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===zd)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===AE||r===dE){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===zd||this.peekCodePoint(0)===N1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),gE)}for(;;){var a=this.consumeCodePoint();if(a===zd||a===N1)return{type:22,value:js.apply(void 0,t)};if(mE(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===zd||this.peekCodePoint(0)===N1?(this.consumeCodePoint(),{type:22,value:js.apply(void 0,t)}):(this.consumeBadUrlRemnants(),gE);if(a===dE||a===AE||a===fE||nFe(a))return this.consumeBadUrlRemnants(),gE;if(a===Ib)if(Qh(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),gE;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;mE(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===N1||t===zd)return;Qh(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=js.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===zd||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===j_)return this._value.splice(0,n),pFe;if(a===Ib){var s=this._value[n+1];s!==zd&&s!==void 0&&(s===j_?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Qh(a,s)&&(r+=this.consumeStringSlice(n),r+=js(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=cw,n=this.peekCodePoint(0);for((n===Fm||n===Sl)&&t.push(this.consumeCodePoint());Io(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===py&&Io(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=oQ;Io(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Aee||n===uee)&&((a===Fm||a===Sl)&&Io(s)||Io(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=oQ;Io(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[aFe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(pE(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===_je?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(yg(t)){for(var r=js(t);yg(this.peekCodePoint(0))&&r.length<6;)r+=js(this.consumeCodePoint());mE(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Jje(n)||n>1114111?uQ:n}return t===zd?uQ:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(dQ(r))t+=js(r);else if(Qh(r,this.peekCodePoint(0)))t+=js(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),mee=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new hee;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||_Fe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?aj:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),uw=function(e){return e.type===15},mx=function(e){return e.type===17},va=function(e){return e.type===20},CFe=function(e){return e.type===0},sj=function(e,t){return va(e)&&e.value===t},pee=function(e){return e.type!==31},Rv=function(e){return e.type!==31&&e.type!==4},wA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},_Fe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},F0=function(e){return e.type===17||e.type===15},Ys=function(e){return e.type===16||F0(e)},gee=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},ao={type:17,number:0,flags:cw},qO={type:16,number:50,flags:cw},r0={type:16,number:100,flags:cw},ab=function(e,t,r){var n=e[0],a=e[1];return[ka(n,t),ka(typeof a<"u"?a:n,r)]},ka=function(e,t){if(e.type===16)return e.number/100*t;if(uw(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},vee="deg",xee="grad",bee="rad",yee="turn",V5={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case vee:return Math.PI*t.number/180;case xee:return Math.PI/200*t.number;case bee:return t.number;case yee:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},wee=function(e){return e.type===15&&(e.unit===vee||e.unit===xee||e.unit===bee||e.unit===yee)},Eee=function(e){var t=e.filter(va).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ao,ao];case"to top":case"bottom":return cu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ao,r0];case"to right":case"left":return cu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[r0,r0];case"to bottom":case"top":return cu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[r0,ao];case"to left":case"right":return cu(270)}return 0},cu=function(e){return Math.PI*e/180},d0={name:"color",parse:function(e,t){if(t.type===18){var r=SFe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return n0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return n0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return n0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return n0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=vf[t.value.toUpperCase()];if(typeof o<"u")return o}return vf.TRANSPARENT}},A0=function(e){return(255&e)===0},ki=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},n0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},AQ=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},fQ=function(e,t){var r=t.filter(Rv);if(r.length===3){var n=r.map(AQ),a=n[0],s=n[1],i=n[2];return n0(a,s,i,1)}if(r.length===4){var o=r.map(AQ),a=o[0],s=o[1],i=o[2],l=o[3];return n0(a,s,i,l)}return 0};function pk(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var hQ=function(e,t){var r=t.filter(Rv),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?cu(n.number):V5.parse(e,n))/(Math.PI*2),l=Ys(a)?a.number/100:0,u=Ys(s)?s.number/100:0,d=typeof i<"u"&&Ys(i)?ka(i,1):1;if(l===0)return n0(u*255,u*255,u*255,1);var f=u<=.5?u*(l+1):u+l-u*l,m=u*2-f,p=pk(m,f,o+1/3),x=pk(m,f,o),g=pk(m,f,o-1/3);return n0(p*255,x*255,g*255,d)},SFe={hsl:hQ,hsla:hQ,rgb:fQ,rgba:fQ},jb=function(e,t){return d0.parse(e,mee.create(t).parseComponentValue())},vf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},NFe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(va(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},BFe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},z5=function(e,t){var r=d0.parse(e,t[0]),n=t[1];return n&&Ys(n)?{color:r,stop:n}:{color:r,stop:null}},mQ=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=ao),n.stop===null&&(n.stop=r0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var l=ka(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,m=a[u-1],p=(d-m)/(f+1),x=1;x<=f;x++)a[u+x-1]=p*x;u=null}}return e.map(function(g,b){var y=g.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},kFe=function(e,t,r){var n=t/2,a=r/2,s=ka(e[0],t)-n,i=a-ka(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},TFe=function(e,t,r){var n=typeof e=="number"?e:kFe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},Gu=function(e,t){return Math.sqrt(e*e+t*t)},pQ=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=Gu(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},IFe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(Gu(t,r),Gu(t,r-a),Gu(t-n,r),Gu(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=pQ(n,a,t,r,!0),u=l[0],d=l[1];s=Gu(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(Gu(t,r),Gu(t,r-a),Gu(t-n,r),Gu(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=pQ(n,a,t,r,!1),u=f[0],d=f[1];s=Gu(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=ka(e.size[0],n),i=e.size.length===2?ka(e.size[1],a):s),[s,i]},jFe=function(e,t){var r=cu(180),n=[];return wA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=Eee(a);return}else if(wee(i)){r=V5.parse(e,i);return}}var o=z5(e,a);n.push(o)}),{angle:r,stops:n,type:1}},vE=function(e,t){var r=cu(180),n=[];return wA(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=Eee(a);return}else if(wee(i)){r=(V5.parse(e,i)+cu(270))%cu(360);return}}var o=z5(e,a);n.push(o)}),{angle:r,stops:n,type:1}},FFe=function(e,t){var r=cu(180),n=[],a=1,s=0,i=3,o=[];return wA(t).forEach(function(l,u){var d=l[0];if(u===0){if(va(d)&&d.value==="linear"){a=1;return}else if(va(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=d0.parse(e,d.values[0]);n.push({stop:ao,color:f})}else if(d.name==="to"){var f=d0.parse(e,d.values[0]);n.push({stop:r0,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(Rv);if(m.length===2){var f=d0.parse(e,m[1]),p=m[0];mx(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+cu(180))%cu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},Cee="closest-side",_ee="farthest-side",See="closest-corner",Nee="farthest-corner",Bee="circle",kee="ellipse",Tee="cover",Iee="contain",OFe=function(e,t){var r=0,n=3,a=[],s=[];return wA(t).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(f,m){if(u)if(va(m))switch(m.value){case"center":return s.push(qO),f;case"top":case"left":return s.push(ao),f;case"right":case"bottom":return s.push(r0),f}else(Ys(m)||F0(m))&&s.push(m);else if(va(m))switch(m.value){case Bee:return r=0,!1;case kee:return r=1,!1;case"at":return u=!0,!1;case Cee:return n=0,!1;case Tee:case _ee:return n=1,!1;case Iee:case See:return n=2,!1;case Nee:return n=3,!1}else if(F0(m)||Ys(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return f},l)}if(l){var d=z5(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},xE=function(e,t){var r=0,n=3,a=[],s=[];return wA(t).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,f){if(va(f))switch(f.value){case"center":return s.push(qO),!1;case"top":case"left":return s.push(ao),!1;case"right":case"bottom":return s.push(r0),!1}else if(Ys(f)||F0(f))return s.push(f),!1;return d},l):o===1&&(l=i.reduce(function(d,f){if(va(f))switch(f.value){case Bee:return r=0,!1;case kee:return r=1,!1;case Iee:case Cee:return n=0,!1;case _ee:return n=1,!1;case See:return n=2,!1;case Tee:case Nee:return n=3,!1}else if(F0(f)||Ys(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},l)),l){var u=z5(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},DFe=function(e){return e.type===1},PFe=function(e){return e.type===2},WO={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=jee[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function RFe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!jee[e.name])}var jee={"linear-gradient":jFe,"-moz-linear-gradient":vE,"-ms-linear-gradient":vE,"-o-linear-gradient":vE,"-webkit-linear-gradient":vE,"radial-gradient":OFe,"-moz-radial-gradient":xE,"-ms-radial-gradient":xE,"-o-radial-gradient":xE,"-webkit-radial-gradient":xE,"-webkit-gradient":FFe},LFe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Rv(n)&&RFe(n)}).map(function(n){return WO.parse(e,n)})}},UFe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(va(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},MFe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return wA(t).map(function(r){return r.filter(Ys)}).map(gee)}},QFe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return wA(t).map(function(r){return r.filter(va).map(function(n){return n.value}).join(" ")}).map(HFe)}},HFe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},gv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(gv||(gv={}));var VFe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return wA(t).map(function(r){return r.filter(zFe)})}},zFe=function(e){return va(e)||Ys(e)},$5=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$Fe=$5("top"),KFe=$5("right"),GFe=$5("bottom"),qFe=$5("left"),K5=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return gee(r.filter(Ys))}}},WFe=K5("top-left"),XFe=K5("top-right"),YFe=K5("bottom-right"),JFe=K5("bottom-left"),G5=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ZFe=G5("top"),e6e=G5("right"),t6e=G5("bottom"),r6e=G5("left"),q5=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return uw(r)?r.number:0}}},n6e=q5("top"),a6e=q5("right"),s6e=q5("bottom"),i6e=q5("left"),o6e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},l6e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},c6e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(va).reduce(function(r,n){return r|u6e(n.value)},0)}},u6e=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},d6e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},A6e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},O_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(O_||(O_={}));var f6e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return O_.STRICT;case"normal":default:return O_.NORMAL}}},h6e={name:"line-height",initialValue:"normal",prefix:!1,type:4},gQ=function(e,t){return va(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ys(e)?ka(e,t):t},m6e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:WO.parse(e,t)}},p6e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},ij={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},W5=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},g6e=W5("top"),v6e=W5("right"),x6e=W5("bottom"),b6e=W5("left"),y6e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(va).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},w6e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},X5=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},E6e=X5("top"),C6e=X5("right"),_6e=X5("bottom"),S6e=X5("left"),N6e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},B6e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},k6e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&sj(t[0],"none")?[]:wA(t).map(function(r){for(var n={color:vf.TRANSPARENT,offsetX:ao,offsetY:ao,blur:ao},a=0,s=0;s<r.length;s++){var i=r[s];F0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=d0.parse(e,i)}return n})}},T6e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},I6e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=O6e[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},j6e=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},F6e=function(e){var t=e.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},O6e={matrix:j6e,matrix3d:F6e},vQ={type:16,number:50,flags:cw},D6e=[vQ,vQ],P6e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ys);return r.length!==2?D6e:[r[0],r[1]]}},R6e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Fb;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Fb||(Fb={}));var L6e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Fb.BREAK_ALL;case"keep-all":return Fb.KEEP_ALL;case"normal":default:return Fb.NORMAL}}},U6e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(mx(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Fee={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},M6e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return mx(t)?t.number:1}},Q6e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},H6e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(va).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},V6e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},z6e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$6e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(mx(t))return t.number;if(va(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},K6e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(va).map(function(r){return r.value})}},G6e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},fi=function(e,t){return(e&t)!==0},q6e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},W6e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(pee),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&mx(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},X6e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(pee),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(va(s)&&s.value!=="none"){var o=i&&mx(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},Y6e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(uw).map(function(r){return Fee.parse(e,r)})}},J6e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(CFe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},xQ=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},Z6e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&sj(t[0],"none")?[]:wA(t).map(function(r){for(var n={color:255,offsetX:ao,offsetY:ao,blur:ao,spread:ao,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];sj(i,"inset")?n.inset=!0:F0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=d0.parse(e,i)}return n})}},eOe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(va).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},tOe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},rOe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return uw(t)?t.number:0}},nOe=function(){function e(t,r){var n,a;this.animationDuration=rr(t,Y6e,r.animationDuration),this.backgroundClip=rr(t,NFe,r.backgroundClip),this.backgroundColor=rr(t,BFe,r.backgroundColor),this.backgroundImage=rr(t,LFe,r.backgroundImage),this.backgroundOrigin=rr(t,UFe,r.backgroundOrigin),this.backgroundPosition=rr(t,MFe,r.backgroundPosition),this.backgroundRepeat=rr(t,QFe,r.backgroundRepeat),this.backgroundSize=rr(t,VFe,r.backgroundSize),this.borderTopColor=rr(t,$Fe,r.borderTopColor),this.borderRightColor=rr(t,KFe,r.borderRightColor),this.borderBottomColor=rr(t,GFe,r.borderBottomColor),this.borderLeftColor=rr(t,qFe,r.borderLeftColor),this.borderTopLeftRadius=rr(t,WFe,r.borderTopLeftRadius),this.borderTopRightRadius=rr(t,XFe,r.borderTopRightRadius),this.borderBottomRightRadius=rr(t,YFe,r.borderBottomRightRadius),this.borderBottomLeftRadius=rr(t,JFe,r.borderBottomLeftRadius),this.borderTopStyle=rr(t,ZFe,r.borderTopStyle),this.borderRightStyle=rr(t,e6e,r.borderRightStyle),this.borderBottomStyle=rr(t,t6e,r.borderBottomStyle),this.borderLeftStyle=rr(t,r6e,r.borderLeftStyle),this.borderTopWidth=rr(t,n6e,r.borderTopWidth),this.borderRightWidth=rr(t,a6e,r.borderRightWidth),this.borderBottomWidth=rr(t,s6e,r.borderBottomWidth),this.borderLeftWidth=rr(t,i6e,r.borderLeftWidth),this.boxShadow=rr(t,Z6e,r.boxShadow),this.color=rr(t,o6e,r.color),this.direction=rr(t,l6e,r.direction),this.display=rr(t,c6e,r.display),this.float=rr(t,d6e,r.cssFloat),this.fontFamily=rr(t,V6e,r.fontFamily),this.fontSize=rr(t,z6e,r.fontSize),this.fontStyle=rr(t,G6e,r.fontStyle),this.fontVariant=rr(t,K6e,r.fontVariant),this.fontWeight=rr(t,$6e,r.fontWeight),this.letterSpacing=rr(t,A6e,r.letterSpacing),this.lineBreak=rr(t,f6e,r.lineBreak),this.lineHeight=rr(t,h6e,r.lineHeight),this.listStyleImage=rr(t,m6e,r.listStyleImage),this.listStylePosition=rr(t,p6e,r.listStylePosition),this.listStyleType=rr(t,ij,r.listStyleType),this.marginTop=rr(t,g6e,r.marginTop),this.marginRight=rr(t,v6e,r.marginRight),this.marginBottom=rr(t,x6e,r.marginBottom),this.marginLeft=rr(t,b6e,r.marginLeft),this.opacity=rr(t,M6e,r.opacity);var s=rr(t,y6e,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=rr(t,w6e,r.overflowWrap),this.paddingTop=rr(t,E6e,r.paddingTop),this.paddingRight=rr(t,C6e,r.paddingRight),this.paddingBottom=rr(t,_6e,r.paddingBottom),this.paddingLeft=rr(t,S6e,r.paddingLeft),this.paintOrder=rr(t,eOe,r.paintOrder),this.position=rr(t,B6e,r.position),this.textAlign=rr(t,N6e,r.textAlign),this.textDecorationColor=rr(t,Q6e,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=rr(t,H6e,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=rr(t,k6e,r.textShadow),this.textTransform=rr(t,T6e,r.textTransform),this.transform=rr(t,I6e,r.transform),this.transformOrigin=rr(t,P6e,r.transformOrigin),this.visibility=rr(t,R6e,r.visibility),this.webkitTextStrokeColor=rr(t,tOe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=rr(t,rOe,r.webkitTextStrokeWidth),this.wordBreak=rr(t,L6e,r.wordBreak),this.zIndex=rr(t,U6e,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return A0(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return fi(this.display,4)||fi(this.display,33554432)||fi(this.display,268435456)||fi(this.display,536870912)||fi(this.display,67108864)||fi(this.display,134217728)},e}(),aOe=function(){function e(t,r){this.content=rr(t,q6e,r.content),this.quotes=rr(t,J6e,r.quotes)}return e}(),bQ=function(){function e(t,r){this.counterIncrement=rr(t,W6e,r.counterIncrement),this.counterReset=rr(t,X6e,r.counterReset)}return e}(),rr=function(e,t,r){var n=new hee,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new mee(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,va(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return V5.parse(e,s.parseComponentValue());case"color":return d0.parse(e,s.parseComponentValue());case"image":return WO.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return F0(o)?o:ao;case"length-percentage":var l=s.parseComponentValue();return Ys(l)?l:ao;case"time":return Fee.parse(e,s.parseComponentValue())}break}},sOe="data-html2canvas-debug",iOe=function(e){var t=e.getAttribute(sOe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},oj=function(e,t){var r=iOe(e);return r===1||t===r},EA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,oj(r,3))debugger;this.styles=new nOe(t,window.getComputedStyle(r,null)),uj(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Q5(this.context,r),oj(r,4)&&(this.flags|=16)}return e}(),oOe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",yQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bE=0;bE<yQ.length;bE++)sb[yQ.charCodeAt(bE)]=bE;var lOe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=sb[e.charCodeAt(n)],i=sb[e.charCodeAt(n+1)],o=sb[e.charCodeAt(n+2)],l=sb[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},cOe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},uOe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Xm=5,XO=11,gk=2,dOe=XO-Xm,Oee=65536>>Xm,AOe=1<<Xm,vk=AOe-1,fOe=1024>>Xm,hOe=Oee+fOe,mOe=hOe,pOe=32,gOe=mOe+pOe,vOe=65536>>XO,xOe=1<<dOe,bOe=xOe-1,wQ=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},yOe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},wOe=function(e,t){var r=lOe(e),n=Array.isArray(r)?uOe(r):new Uint32Array(r),a=Array.isArray(r)?cOe(r):new Uint16Array(r),s=24,i=wQ(a,s/2,n[4]/2),o=n[5]===2?wQ(a,(s+n[4])/2):yOe(n,Math.ceil((s+n[4])/4));return new EOe(n[0],n[1],n[2],n[3],i,o)},EOe=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Xm],r=(r<<gk)+(t&vk),this.data[r];if(t<=65535)return r=this.index[Oee+(t-55296>>Xm)],r=(r<<gk)+(t&vk),this.data[r];if(t<this.highStart)return r=gOe-vOe+(t>>XO),r=this.index[r],r+=t>>Xm&bOe,r=this.index[r],r=(r<<gk)+(t&vk),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),EQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",COe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yE=0;yE<EQ.length;yE++)COe[EQ.charCodeAt(yE)]=yE;var _Oe=1,xk=2,bk=3,CQ=4,_Q=5,SOe=7,SQ=8,yk=9,wk=10,NQ=11,BQ=12,kQ=13,TQ=14,Ek=15,NOe=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},BOe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},kOe=wOe(oOe),ru="",Ck="",TOe=function(e){return kOe.get(e)},IOe=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===xk&&i===bk)return ru;if(s===xk||s===bk||s===CQ||i===xk||i===bk||i===CQ)return Ck;if(s===SQ&&[SQ,yk,NQ,BQ].indexOf(i)!==-1||(s===NQ||s===yk)&&(i===yk||i===wk)||(s===BQ||s===wk)&&i===wk||i===kQ||i===_Q||i===SOe||s===_Oe)return ru;if(s===kQ&&i===TQ){for(;a===_Q;)a=t[--n];if(a===TQ)return ru}if(s===Ek&&i===Ek){for(var o=0;a===Ek;)o++,a=t[--n];if(o%2===0)return ru}return Ck},jOe=function(e){var t=NOe(e),r=t.length,n=0,a=0,s=t.map(TOe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=ru;n<r&&(i=IOe(t,s,++n))===ru;);if(i!==ru||n===r){var o=BOe.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},FOe=function(e){for(var t=jOe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},OOe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},DOe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=H5(n.data).map(function(l){return js(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},POe=function(){return typeof new Image().crossOrigin<"u"},ROe=function(){return typeof new XMLHttpRequest().responseType=="string"},LOe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},IQ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},UOe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=lj(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),jQ(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",IQ(l)?jQ(lj(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),IQ(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},lj=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},jQ=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ji={get SUPPORT_RANGE_BOUNDS(){var e=OOe(document);return Object.defineProperty(Ji,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ji.SUPPORT_RANGE_BOUNDS&&DOe(document);return Object.defineProperty(Ji,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=LOe(document);return Object.defineProperty(Ji,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?UOe(document):Promise.resolve(!1);return Object.defineProperty(Ji,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=POe();return Object.defineProperty(Ji,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=ROe();return Object.defineProperty(Ji,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ji,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ji,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ob=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),MOe=function(e,t,r,n){var a=VOe(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Ji.SUPPORT_RANGE_BOUNDS){var l=FQ(n,i,o.length).getClientRects();if(l.length>1){var u=YO(o),d=0;u.forEach(function(m){s.push(new Ob(m,kf.fromDOMRectList(e,FQ(n,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new Ob(o,kf.fromDOMRectList(e,l)))}else{var f=n.splitText(o.length);s.push(new Ob(o,QOe(e,n))),n=f}else Ji.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},QOe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=Q5(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return kf.EMPTY},FQ=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},YO=function(e){if(Ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return FOe(e)},HOe=function(e,t){if(Ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return $Oe(e,t)},VOe=function(e,t){return t.letterSpacing!==0?YO(e):HOe(e,t)},zOe=[32,160,4961,65792,65793,4153,4241],$Oe=function(e,t){for(var r=vje(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=H5(i),l="";o.forEach(function(u){zOe.indexOf(u)===-1?l+=js(u):(l.length&&n.push(l),n.push(js(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},KOe=function(){function e(t,r,n){this.text=GOe(r.data,n.textTransform),this.textBounds=MOe(t,this.text,n,r)}return e}(),GOe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(qOe,WOe);case 2:return e.toUpperCase();default:return e}},qOe=/(^|\s|:|-|\(|\))([a-z])/g,WOe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},Dee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(EA),Pee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(EA),Ree=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=Q5(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(EA),Lee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(EA),cj=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(EA),XOe=[{type:15,flags:0,unit:"px",number:3}],YOe=[{type:16,flags:0,number:50}],JOe=function(e){return e.width>e.height?new kf(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new kf(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},ZOe=function(e){var t=e.type===eDe?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},D_="checkbox",P_="radio",eDe="password",OQ=707406591,JO=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=ZOe(n),(a.type===D_||a.type===P_)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=JOe(a.bounds)),a.type){case D_:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=XOe;break;case P_:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=YOe;break}return a}return t}(EA),Uee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(EA),Mee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(EA),Qee=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Vee(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?jb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):vf.TRANSPARENT,i=n.contentWindow.document.body?jb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):vf.TRANSPARENT;a.backgroundColor=A0(s)?A0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(EA),tDe=["OL","UL","MENU"],wC=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,zee(a)&&a.data.trim().length>0)r.textNodes.push(new KOe(e,a,r.styles));else if(Wg(a))if(qee(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return wC(e,o,r,n)});else{var i=Hee(e,a);i.styles.isVisible()&&(rDe(a,i,n)?i.flags|=4:nDe(i.styles)&&(i.flags|=2),tDe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?wC(e,a.shadowRoot,i,n):!R_(a)&&!$ee(a)&&!L_(a)&&wC(e,a,i,n))}},Hee=function(e,t){return dj(t)?new Dee(e,t):Kee(t)?new Pee(e,t):$ee(t)?new Ree(e,t):aDe(t)?new Lee(e,t):sDe(t)?new cj(e,t):iDe(t)?new JO(e,t):L_(t)?new Uee(e,t):R_(t)?new Mee(e,t):Gee(t)?new Qee(e,t):new EA(e,t)},Vee=function(e,t){var r=Hee(e,t);return r.flags|=4,wC(e,t,r,r),r},rDe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ZO(e)&&r.styles.isTransparent()},nDe=function(e){return e.isPositioned()||e.isFloating()},zee=function(e){return e.nodeType===Node.TEXT_NODE},Wg=function(e){return e.nodeType===Node.ELEMENT_NODE},uj=function(e){return Wg(e)&&typeof e.style<"u"&&!EC(e)},EC=function(e){return typeof e.className=="object"},aDe=function(e){return e.tagName==="LI"},sDe=function(e){return e.tagName==="OL"},iDe=function(e){return e.tagName==="INPUT"},oDe=function(e){return e.tagName==="HTML"},$ee=function(e){return e.tagName==="svg"},ZO=function(e){return e.tagName==="BODY"},Kee=function(e){return e.tagName==="CANVAS"},DQ=function(e){return e.tagName==="VIDEO"},dj=function(e){return e.tagName==="IMG"},Gee=function(e){return e.tagName==="IFRAME"},PQ=function(e){return e.tagName==="STYLE"},lDe=function(e){return e.tagName==="SCRIPT"},R_=function(e){return e.tagName==="TEXTAREA"},L_=function(e){return e.tagName==="SELECT"},qee=function(e){return e.tagName==="SLOT"},RQ=function(e){return e.tagName.indexOf("-")>0},cDe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},e}(),LQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},UQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uDe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dDe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},wg=function(e,t,r,n,a,s){return e<t||e>r?gy(e,a,s.length>0):n.integers.reduce(function(i,o,l){for(;e>=o;)e-=o,i+=n.values[l];return i},"")+s},Wee=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ts=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(Wee(Math.abs(e),s,n,function(i){return js(Math.floor(i%s)+t)})+a)},xm=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return Wee(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Hg=1,Lh=2,Uh=4,ib=8,rf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return gy(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&fi(s,Hg)&&o!==""?o=t[u]+o:u>1||u===1&&l===0||u===1&&l===1&&fi(s,Lh)||u===1&&l===1&&fi(s,Uh)&&e>100||u===1&&l>1&&fi(s,ib)?o=t[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},MQ="",QQ="",HQ="",_k="",gy=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Ts(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return xm(e,"",a);case 6:return wg(e,1,3999,LQ,3,n).toLowerCase();case 7:return wg(e,1,3999,LQ,3,n);case 8:return Ts(e,945,969,!1,n);case 9:return Ts(e,97,122,!1,n);case 10:return Ts(e,65,90,!1,n);case 11:return Ts(e,1632,1641,!0,n);case 12:case 49:return wg(e,1,9999,UQ,3,n);case 35:return wg(e,1,9999,UQ,3,n).toLowerCase();case 13:return Ts(e,2534,2543,!0,n);case 14:case 30:return Ts(e,6112,6121,!0,n);case 15:return xm(e,"",a);case 16:return xm(e,"",a);case 17:case 48:return rf(e,"",MQ,"",a,Lh|Uh|ib);case 47:return rf(e,"",QQ,"",a,Hg|Lh|Uh|ib);case 42:return rf(e,"",MQ,"",a,Lh|Uh|ib);case 41:return rf(e,"",QQ,"",a,Hg|Lh|Uh|ib);case 26:return rf(e,"","",HQ,a,0);case 25:return rf(e,"","",HQ,a,Hg|Lh|Uh);case 31:return rf(e,"","",_k,s,Hg|Lh|Uh);case 33:return rf(e,"","",_k,s,0);case 32:return rf(e,"","",_k,s,Hg|Lh|Uh);case 18:return Ts(e,2406,2415,!0,n);case 20:return wg(e,1,19999,dDe,3,n);case 21:return Ts(e,2790,2799,!0,n);case 22:return Ts(e,2662,2671,!0,n);case 22:return wg(e,1,10999,uDe,3,n);case 23:return xm(e,"");case 24:return xm(e,"");case 27:return Ts(e,3302,3311,!0,n);case 28:return xm(e,"",a);case 29:return xm(e,"",a);case 34:return Ts(e,3792,3801,!0,n);case 37:return Ts(e,6160,6169,!0,n);case 38:return Ts(e,4160,4169,!0,n);case 39:return Ts(e,2918,2927,!0,n);case 40:return Ts(e,1776,1785,!0,n);case 43:return Ts(e,3046,3055,!0,n);case 44:return Ts(e,3174,3183,!0,n);case 45:return Ts(e,3664,3673,!0,n);case 46:return Ts(e,3872,3881,!0,n);case 3:default:return Ts(e,48,57,!0,n)}},Xee="data-html2canvas-ignore",VQ=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new cDe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=ADe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=mDe(a).then(function(){return Xo(n,void 0,void 0,function(){var d,f;return So(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(xDe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,hDe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,f)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(gDe(document.doctype)+"<html></html>"),vDe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(t){if(oj(t,2))debugger;if(Kee(t))return this.createCanvasClone(t);if(DQ(t))return this.createVideoClone(t);if(PQ(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return dj(r)&&(dj(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),RQ(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Sk(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Wg(r)||!lDe(r)&&!r.hasAttribute(Xee)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Wg(r)||!PQ(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Wg(s)&&qee(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(zee(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Wg(t)&&(uj(t)||EC(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&uj(a)&&(this.clonedReferenceElement=a),ZO(a)&&wDe(a);var l=this.counters.parse(new bQ(this.context,s)),u=this.resolvePseudoContent(t,a,i,Db.BEFORE);RQ(t)&&(r=!0),DQ(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,Db.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||EC(t))&&!Gee(t)||r)&&Sk(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(R_(t)||L_(t))&&(R_(a)||L_(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new bQ(this.context,n));var l=new aOe(this.context,n),u=o.createElement("html2canvaspseudoelement");Sk(n,u),l.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var m=o.createElement("img");m.src=f.value,m.style.opacity="1",u.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(va);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var x=f.values.filter(Rv),g=x[0],b=x[1];if(g&&va(g)){var y=s.counters.getCounterValue(g.value),_=b&&va(b)?ij.parse(s.context,b.value):3;u.appendChild(o.createTextNode(gy(y,_,!1)))}}else if(f.name==="counters"){var S=f.values.filter(Rv),g=S[0],B=S[1],b=S[2];if(g&&va(g)){var I=s.counters.getCounterValues(g.value),D=b&&va(b)?ij.parse(s.context,b.value):3,E=B&&B.type===0?B.value:"",C=I.map(function(O){return gy(O,D,!1)}).join(E);u.appendChild(o.createTextNode(C))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(xQ(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(xQ(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=Aj+" "+fj;var d=a===Db.BEFORE?" "+Aj:" "+fj;return EC(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Db;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Db||(Db={}));var ADe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Xee,"true"),e.body.appendChild(r),r},fDe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},hDe=function(e){return Promise.all([].slice.call(e.images,0).map(fDe))},mDe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},pDe=["all","d","content"],Sk=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);pDe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},gDe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},vDe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},xDe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},bDe=":before",yDe=":after",Aj="___html2canvas___pseudoelement_before",fj="___html2canvas___pseudoelement_after",zQ=`{
    content: "" !important;
    display: none !important;
}`,wDe=function(e){EDe(e,"."+Aj+bDe+zQ+`
         .`+fj+yDe+zQ)},EDe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Yee=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),CDe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(Bk(t)||BDe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Xo(this,void 0,void 0,function(){var r,n,a,s,i=this;return So(this,function(o){switch(o.label){case 0:return r=Yee.isSameOrigin(t),n=!Nk(t)&&this._options.useCORS===!0&&Ji.SUPPORT_CORS_IMAGES&&!r,a=!Nk(t)&&!r&&!Bk(t)&&typeof this._options.proxy=="string"&&Ji.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Nk(t)&&!Bk(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(kDe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=Ji.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(m){return i(m)},!1),f.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},e}(),_De=/^data:image\/svg\+xml/i,SDe=/^data:image\/.*;base64,/i,NDe=/^data:image\/.*/i,BDe=function(e){return Ji.SUPPORT_SVG_DRAWING||!TDe(e)},Nk=function(e){return NDe.test(e)},kDe=function(e){return SDe.test(e)},Bk=function(e){return e.substr(0,4)==="blob"},TDe=function(e){return e.substr(-3).toLowerCase()==="svg"||_De.test(e)},er=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Eg=function(e,t,r){return new er(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},wE=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Eg(this.start,this.startControl,t),a=Eg(this.startControl,this.endControl,t),s=Eg(this.endControl,this.end,t),i=Eg(n,a,t),o=Eg(a,s,t),l=Eg(i,o,t);return r?new e(this.start,n,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),au=function(e){return e.type===1},IDe=function(){function e(t){var r=t.styles,n=t.bounds,a=ab(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=ab(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=ab(r.borderBottomRightRadius,n.width,n.height),f=d[0],m=d[1],p=ab(r.borderBottomLeftRadius,n.width,n.height),x=p[0],g=p[1],b=[];b.push((s+l)/n.width),b.push((x+f)/n.width),b.push((i+g)/n.height),b.push((u+m)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,l/=y,u/=y,f/=y,m/=y,x/=y,g/=y);var _=n.width-l,S=n.height-m,B=n.width-f,I=n.height-g,D=r.borderTopWidth,E=r.borderRightWidth,C=r.borderBottomWidth,N=r.borderLeftWidth,P=ka(r.paddingTop,t.bounds.width),O=ka(r.paddingRight,t.bounds.width),F=ka(r.paddingBottom,t.bounds.width),M=ka(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Qa(n.left+N/3,n.top+D/3,s-N/3,i-D/3,Xn.TOP_LEFT):new er(n.left+N/3,n.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Qa(n.left+_,n.top+D/3,l-E/3,u-D/3,Xn.TOP_RIGHT):new er(n.left+n.width-E/3,n.top+D/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?Qa(n.left+B,n.top+S,f-E/3,m-C/3,Xn.BOTTOM_RIGHT):new er(n.left+n.width-E/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=x>0||g>0?Qa(n.left+N/3,n.top+I,x-N/3,g-C/3,Xn.BOTTOM_LEFT):new er(n.left+N/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Qa(n.left+N*2/3,n.top+D*2/3,s-N*2/3,i-D*2/3,Xn.TOP_LEFT):new er(n.left+N*2/3,n.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Qa(n.left+_,n.top+D*2/3,l-E*2/3,u-D*2/3,Xn.TOP_RIGHT):new er(n.left+n.width-E*2/3,n.top+D*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?Qa(n.left+B,n.top+S,f-E*2/3,m-C*2/3,Xn.BOTTOM_RIGHT):new er(n.left+n.width-E*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=x>0||g>0?Qa(n.left+N*2/3,n.top+I,x-N*2/3,g-C*2/3,Xn.BOTTOM_LEFT):new er(n.left+N*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Qa(n.left+N/2,n.top+D/2,s-N/2,i-D/2,Xn.TOP_LEFT):new er(n.left+N/2,n.top+D/2),this.topRightBorderStroke=s>0||i>0?Qa(n.left+_,n.top+D/2,l-E/2,u-D/2,Xn.TOP_RIGHT):new er(n.left+n.width-E/2,n.top+D/2),this.bottomRightBorderStroke=f>0||m>0?Qa(n.left+B,n.top+S,f-E/2,m-C/2,Xn.BOTTOM_RIGHT):new er(n.left+n.width-E/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=x>0||g>0?Qa(n.left+N/2,n.top+I,x-N/2,g-C/2,Xn.BOTTOM_LEFT):new er(n.left+N/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?Qa(n.left,n.top,s,i,Xn.TOP_LEFT):new er(n.left,n.top),this.topRightBorderBox=l>0||u>0?Qa(n.left+_,n.top,l,u,Xn.TOP_RIGHT):new er(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||m>0?Qa(n.left+B,n.top+S,f,m,Xn.BOTTOM_RIGHT):new er(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=x>0||g>0?Qa(n.left,n.top+I,x,g,Xn.BOTTOM_LEFT):new er(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Qa(n.left+N,n.top+D,Math.max(0,s-N),Math.max(0,i-D),Xn.TOP_LEFT):new er(n.left+N,n.top+D),this.topRightPaddingBox=l>0||u>0?Qa(n.left+Math.min(_,n.width-E),n.top+D,_>n.width+E?0:Math.max(0,l-E),Math.max(0,u-D),Xn.TOP_RIGHT):new er(n.left+n.width-E,n.top+D),this.bottomRightPaddingBox=f>0||m>0?Qa(n.left+Math.min(B,n.width-N),n.top+Math.min(S,n.height-C),Math.max(0,f-E),Math.max(0,m-C),Xn.BOTTOM_RIGHT):new er(n.left+n.width-E,n.top+n.height-C),this.bottomLeftPaddingBox=x>0||g>0?Qa(n.left+N,n.top+Math.min(I,n.height-C),Math.max(0,x-N),Math.max(0,g-C),Xn.BOTTOM_LEFT):new er(n.left+N,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?Qa(n.left+N+M,n.top+D+P,Math.max(0,s-(N+M)),Math.max(0,i-(D+P)),Xn.TOP_LEFT):new er(n.left+N+M,n.top+D+P),this.topRightContentBox=l>0||u>0?Qa(n.left+Math.min(_,n.width+N+M),n.top+D+P,_>n.width+N+M?0:l-N+M,u-(D+P),Xn.TOP_RIGHT):new er(n.left+n.width-(E+O),n.top+D+P),this.bottomRightContentBox=f>0||m>0?Qa(n.left+Math.min(B,n.width-(N+M)),n.top+Math.min(S,n.height+D+P),Math.max(0,f-(E+O)),m-(C+F),Xn.BOTTOM_RIGHT):new er(n.left+n.width-(E+O),n.top+n.height-(C+F)),this.bottomLeftContentBox=x>0||g>0?Qa(n.left+N+M,n.top+I,Math.max(0,x-(N+M)),g-(C+F),Xn.BOTTOM_LEFT):new er(n.left+N+M,n.top+n.height-(C+F))}return e}(),Xn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Xn||(Xn={}));var Qa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=e+r,u=t+n;switch(a){case Xn.TOP_LEFT:return new wE(new er(e,u),new er(e,u-o),new er(l-i,t),new er(l,t));case Xn.TOP_RIGHT:return new wE(new er(e,t),new er(e+i,t),new er(l,u-o),new er(l,u));case Xn.BOTTOM_RIGHT:return new wE(new er(l,t),new er(l,t+o),new er(e+i,u),new er(e,u));case Xn.BOTTOM_LEFT:default:return new wE(new er(l,u),new er(l-i,u),new er(e,t+o),new er(e,t))}},U_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},jDe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},M_=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},FDe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),EE=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),ODe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),DDe=function(e){return e.type===0},Jee=function(e){return e.type===1},PDe=function(e){return e.type===2},$Q=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},RDe=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Zee=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),ete=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new IDe(this.container),this.container.styles.opacity<1&&this.effects.push(new ODe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new FDe(n,a,s))}if(this.container.styles.overflowX!==0){var i=U_(this.curves),o=M_(this.curves);$Q(i,o)?this.effects.push(new EE(i,6)):(this.effects.push(new EE(i,2)),this.effects.push(new EE(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!Jee(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=U_(n.curves),o=M_(n.curves);$Q(i,o)||a.unshift(new EE(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return fi(l.target,t)})},e}(),hj=function(e,t,r,n){e.container.elements.forEach(function(a){var s=fi(a.flags,4),i=fi(a.flags,2),o=new ete(a,e);fi(a.styles.display,2048)&&n.push(o);var l=fi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new Zee(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var m=0;u.negativeZIndex.some(function(x,g){return f>x.element.container.styles.zIndex.order?(m=g,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(x,g){return f>=x.element.container.styles.zIndex.order?(p=g+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);hj(o,d,s?d:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),hj(o,t,r,l);fi(a.flags,8)&&tte(a,l)})},tte=function(e,t){for(var r=e instanceof cj?e.start:1,n=e instanceof cj?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Lee&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=gy(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},LDe=function(e){var t=new ete(e,null),r=new Zee(t),n=[];return hj(t,r,r,n),tte(t.container,n),r},KQ=function(e,t){switch(t){case 0:return uu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return uu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return uu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return uu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},UDe=function(e,t){switch(t){case 0:return uu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return uu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return uu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return uu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},MDe=function(e,t){switch(t){case 0:return uu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return uu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return uu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return uu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},QDe=function(e,t){switch(t){case 0:return CE(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return CE(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return CE(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return CE(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},CE=function(e,t){var r=[];return au(e)?r.push(e.subdivide(.5,!1)):r.push(e),au(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},uu=function(e,t,r,n){var a=[];return au(e)?a.push(e.subdivide(.5,!1)):a.push(e),au(r)?a.push(r.subdivide(.5,!0)):a.push(r),au(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),au(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},rte=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Q_=function(e){var t=e.styles,r=e.bounds,n=ka(t.paddingLeft,r.width),a=ka(t.paddingRight,r.width),s=ka(t.paddingTop,r.width),i=ka(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},HDe=function(e,t){return e===0?t.bounds:e===2?Q_(t):rte(t)},VDe=function(e,t){return e===0?t.bounds:e===2?Q_(t):rte(t)},kk=function(e,t,r){var n=HDe(Vg(e.styles.backgroundOrigin,t),e),a=VDe(Vg(e.styles.backgroundClip,t),e),s=zDe(Vg(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],l=ab(Vg(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=$De(Vg(e.styles.backgroundRepeat,t),l,s,n,a),d=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[u,d,f,i,o]},Cg=function(e){return va(e)&&e.value===gv.AUTO},_E=function(e){return typeof e=="number"},zDe=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ys(i)&&o&&Ys(o))return[ka(i,r.width),ka(o,r.height)];var l=_E(s);if(va(i)&&(i.value===gv.CONTAIN||i.value===gv.COVER)){if(_E(s)){var u=r.width/r.height;return u<s!=(i.value===gv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=_E(n),f=_E(a),m=d||f;if(Cg(i)&&(!o||Cg(o))){if(d&&f)return[n,a];if(!l&&!m)return[r.width,r.height];if(m&&l){var p=d?n:a*s,x=f?a:n/s;return[p,x]}var g=d?n:r.width,b=f?a:r.height;return[g,b]}if(l){var y=0,_=0;return Ys(i)?y=ka(i,r.width):Ys(o)&&(_=ka(o,r.height)),Cg(i)?y=_*s:(!o||Cg(o))&&(_=y/s),[y,_]}var S=null,B=null;if(Ys(i)?S=ka(i,r.width):o&&Ys(o)&&(B=ka(o,r.height)),S!==null&&(!o||Cg(o))&&(B=d&&f?S/n*a:r.height),B!==null&&Cg(i)&&(S=d&&f?B/a*n:r.width),S!==null&&B!==null)return[S,B];throw new Error("Unable to calculate background-size for element")},Vg=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},$De=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],l=r[1];switch(e){case 2:return[new er(Math.round(n.left),Math.round(n.top+i)),new er(Math.round(n.left+n.width),Math.round(n.top+i)),new er(Math.round(n.left+n.width),Math.round(l+n.top+i)),new er(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new er(Math.round(n.left+s),Math.round(n.top)),new er(Math.round(n.left+s+o),Math.round(n.top)),new er(Math.round(n.left+s+o),Math.round(n.height+n.top)),new er(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new er(Math.round(n.left+s),Math.round(n.top+i)),new er(Math.round(n.left+s+o),Math.round(n.top+i)),new er(Math.round(n.left+s+o),Math.round(n.top+i+l)),new er(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new er(Math.round(a.left),Math.round(a.top)),new er(Math.round(a.left+a.width),Math.round(a.top)),new er(Math.round(a.left+a.width),Math.round(a.height+a.top)),new er(Math.round(a.left),Math.round(a.height+a.top))]}},KDe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",GQ="Hidden Text",GDe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=KDe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(GQ)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(GQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),nte=function(){function e(t,r){this.context=t,this.options=r}return e}(),qDe=1e4,WDe=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new GDe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),PDe(r)&&(this.ctx.globalAlpha=r.opacity),DDe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Jee(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return Xo(this,void 0,void 0,function(){var n;return So(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return Xo(this,void 0,void 0,function(){return So(this,function(n){switch(n.label){case 0:if(fi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=YO(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=ePe(r.fontFamily).join(", "),s=uw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return Xo(this,void 0,void 0,function(){var a,s,i,o,l,u,d,f,m=this;return So(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,f=n.paintOrder,r.textBounds.forEach(function(x){f.forEach(function(g){switch(g){case 0:m.ctx.fillStyle=ki(n.color),m.renderTextWithLetterSpacing(x,n.letterSpacing,u);var b=n.textShadow;b.length&&x.text.trim().length&&(b.slice(0).reverse().forEach(function(y){m.ctx.shadowColor=ki(y.color),m.ctx.shadowOffsetX=y.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=y.offsetY.number*m.options.scale,m.ctx.shadowBlur=y.blur.number,m.renderTextWithLetterSpacing(x,n.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=ki(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:m.ctx.fillRect(x.bounds.left,Math.round(x.bounds.top+u),x.bounds.width,1);break;case 2:m.ctx.fillRect(x.bounds.left,Math.round(x.bounds.top),x.bounds.width,1);break;case 3:m.ctx.fillRect(x.bounds.left,Math.ceil(x.bounds.top+d),x.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&x.text.trim().length&&(m.ctx.strokeStyle=ki(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(x.text,x.bounds.left,x.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Q_(r),i=M_(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return Xo(this,void 0,void 0,function(){var n,a,s,i,o,l,_,_,u,d,f,m,B,p,x,I,g,b,y,_,S,B,I;return So(this,function(D){switch(D.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,D.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Dee))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return _=D.sent(),this.renderReplacedElement(n,a,_),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Pee&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Ree))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return _=D.sent(),this.renderReplacedElement(n,a,_),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Qee&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=D.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),D.label=14;case 14:if(n instanceof JO&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===D_?n.checked&&(this.ctx.save(),this.path([new er(n.bounds.left+f*.39363,n.bounds.top+f*.79),new er(n.bounds.left+f*.16,n.bounds.top+f*.5549),new er(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new er(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new er(n.bounds.left+f*.72983,n.bounds.top+f*.23),new er(n.bounds.left+f*.84,n.bounds.top+f*.34085),new er(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=ki(OQ),this.ctx.fill(),this.ctx.restore()):n.type===P_&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ki(OQ),this.ctx.fill(),this.ctx.restore())),XDe(n)&&n.value.length){switch(m=this.createFontStyle(s),B=m[0],p=m[1],x=this.fontMetrics.getMetrics(B,p).baseline,this.ctx.font=B,this.ctx.fillStyle=ki(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=JDe(n.styles.textAlign),I=Q_(n),g=0,n.styles.textAlign){case 1:g+=I.width/2;break;case 2:g+=I.width;break}b=I.add(g,0,0,-I.height/2+1),this.ctx.save(),this.path([new er(I.left,I.top),new er(I.left+I.width,I.top),new er(I.left+I.width,I.top+I.height),new er(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ob(n.value,b),s.letterSpacing,x),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!fi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];_=void 0,S=y.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return _=D.sent(),this.ctx.drawImage(_,n.bounds.left-(_.width+10),n.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=ki(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new kf(n.bounds.left,n.bounds.top+ka(n.styles.paddingTop,n.bounds.width),n.bounds.width,gQ(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ob(r.listValue,I),s.letterSpacing,gQ(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return Xo(this,void 0,void 0,function(){var n,a,y,s,i,y,o,l,y,u,d,y,f,m,y,p,x,y,g,b,y;return So(this,function(_){switch(_.label){case 0:if(fi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:_.sent(),n=0,a=r.negativeZIndex,_.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:_.sent(),_.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:_.sent(),s=0,i=r.nonInlineLevel,_.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:_.sent(),_.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,_.label=11;case 11:return o<l.length?(y=l[o],[4,this.renderStack(y)]):[3,14];case 12:_.sent(),_.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,_.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:_.sent(),_.label=17;case 17:return u++,[3,15];case 18:f=0,m=r.inlineLevel,_.label=19;case 19:return f<m.length?(y=m[f],[4,this.renderNode(y)]):[3,22];case 20:_.sent(),_.label=21;case 21:return f++,[3,19];case 22:p=0,x=r.zeroOrAutoZIndexOrTransformedOrOpacity,_.label=23;case 23:return p<x.length?(y=x[p],[4,this.renderStack(y)]):[3,26];case 24:_.sent(),_.label=25;case 25:return p++,[3,23];case 26:g=0,b=r.positiveZIndex,_.label=27;case 27:return g<b.length?(y=b[g],[4,this.renderStack(y)]):[3,30];case 28:_.sent(),_.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=au(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),au(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return Xo(this,void 0,void 0,function(){var n,a,s,i,o,l;return So(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,m,p,P,W,Z,M,Q,C,x,P,W,Z,M,Q,g,b,y,_,S,B,I,D,E,C,N,P,O,F,M,Q,J,W,Z,H,z,G,ne,R,q,Y,te;return So(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return f=ie.sent(),[3,4];case 3:return ie.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(p=kk(r,n,[f.width,f.height,f.width/f.height]),P=p[0],W=p[1],Z=p[2],M=p[3],Q=p[4],C=s.ctx.createPattern(s.resizeImage(f,M,Q),"repeat"),s.renderRepeat(P,C,W,Z)),[3,6];case 5:DFe(d)?(x=kk(r,n,[null,null,null]),P=x[0],W=x[1],Z=x[2],M=x[3],Q=x[4],g=TFe(d.angle,M,Q),b=g[0],y=g[1],_=g[2],S=g[3],B=g[4],I=document.createElement("canvas"),I.width=M,I.height=Q,D=I.getContext("2d"),E=D.createLinearGradient(y,S,_,B),mQ(d.stops,b).forEach(function(pe){return E.addColorStop(pe.stop,ki(pe.color))}),D.fillStyle=E,D.fillRect(0,0,M,Q),M>0&&Q>0&&(C=s.ctx.createPattern(I,"repeat"),s.renderRepeat(P,C,W,Z))):PFe(d)&&(N=kk(r,n,[null,null,null]),P=N[0],O=N[1],F=N[2],M=N[3],Q=N[4],J=d.position.length===0?[qO]:d.position,W=ka(J[0],M),Z=ka(J[J.length-1],Q),H=IFe(d,W,Z,M,Q),z=H[0],G=H[1],z>0&&G>0&&(ne=s.ctx.createRadialGradient(O+W,F+Z,0,O+W,F+Z,z),mQ(d.stops,z*2).forEach(function(pe){return ne.addColorStop(pe.stop,ki(pe.color))}),s.path(P),s.ctx.fillStyle=ne,z!==G?(R=r.bounds.left+.5*r.bounds.width,q=r.bounds.top+.5*r.bounds.height,Y=G/z,te=1/Y,s.ctx.save(),s.ctx.translate(R,q),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-R,-q),s.ctx.fillRect(O,te*(F-q)+q,M,Q*te),s.ctx.restore()):s.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return Xo(this,void 0,void 0,function(){return So(this,function(s){return this.path(KQ(a,n)),this.ctx.fillStyle=ki(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return Xo(this,void 0,void 0,function(){var i,o;return So(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=UDe(s,a),this.path(i),this.ctx.fillStyle=ki(r),this.ctx.fill(),o=MDe(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return Xo(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,f=this;return So(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!A0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=YDe(Vg(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),A0(n.backgroundColor)||(this.ctx.fillStyle=ki(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var x=U_(r.curves),g=p.inset?0:qDe,b=RDe(x,-g+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(x),f.ctx.clip(),f.mask(b)):(f.mask(x),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+g,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=ki(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?ki(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=s,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!A0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Xo(this,void 0,void 0,function(){var o,l,u,d,f,m,p,x,g,b,y,_,S,B,I,D,I,D;return So(this,function(E){return this.ctx.save(),o=QDe(s,a),l=KQ(s,a),i===2&&(this.path(l),this.ctx.clip()),au(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),au(l[1])?(f=l[1].end.x,m=l[1].end.y):(f=l[1].x,m=l[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),x=n<3?n*3:n*2,g=n<3?n*2:n,i===3&&(x=n,g=n),b=!0,p<=x*2?b=!1:p<=x*2+g?(y=p/(2*x+g),x*=y,g*=y):(_=Math.floor((p+g)/(x+g)),S=(p-_*x)/(_-1),B=(p-(_+1)*x)/_,g=B<=0||Math.abs(g-S)<Math.abs(g-B)?S:B),b&&(i===3?this.ctx.setLineDash([0,x+g]):this.ctx.setLineDash([x,g])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ki(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(au(l[0])&&(I=l[3],D=l[0],this.ctx.beginPath(),this.formatPath([new er(I.end.x,I.end.y),new er(D.start.x,D.start.y)]),this.ctx.stroke()),au(l[1])&&(I=l[1],D=l[2],this.ctx.beginPath(),this.formatPath([new er(I.end.x,I.end.y),new er(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return Xo(this,void 0,void 0,function(){var n;return So(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ki(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=LDe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(nte),XDe=function(e){return e instanceof Mee||e instanceof Uee?!0:e instanceof JO&&e.type!==P_&&e.type!==D_},YDe=function(e,t){switch(e){case 0:return U_(t);case 2:return jDe(t);case 1:default:return M_(t)}},JDe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ZDe=["-apple-system","system-ui"],ePe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return ZDe.indexOf(t)===-1}):e},tPe=function(e){cd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return Xo(this,void 0,void 0,function(){var n,a;return So(this,function(s){switch(s.label){case 0:return n=lj(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,rPe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ki(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(nte),rPe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},nPe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,nE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,nE([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,nE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,nE([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),aPe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new nPe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new CDe(this,t)}return e.instanceCount=1,e}(),H_=function(e,t){return t===void 0&&(t={}),sPe(e,t)};typeof window<"u"&&Yee.setContext(window);var sPe=function(e,t){return Xo(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,f,m,p,x,g,b,y,_,S,B,I,E,D,E,C,N,P,O,F,M,Q,J,W,Z,H,z,G,ne,R,q,Y;return So(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(C=t.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(N=t.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:t.proxy,useCORS:(P=t.useCORS)!==null&&P!==void 0?P:!1},s=GI({logging:(O=t.logging)!==null&&O!==void 0?O:!0,cache:t.cache},a),i={windowWidth:(F=t.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(M=t.windowHeight)!==null&&M!==void 0?M:n.innerHeight,scrollX:(Q=t.scrollX)!==null&&Q!==void 0?Q:n.pageXOffset,scrollY:(J=t.scrollY)!==null&&J!==void 0?J:n.pageYOffset},o=new kf(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new aPe(s,o),u=(W=t.foreignObjectRendering)!==null&&W!==void 0?W:!1,d={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new VQ(l,e,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),x=ZO(m)||oDe(m)?RIe(m.ownerDocument):Q5(l,m),g=x.width,b=x.height,y=x.left,_=x.top,S=iPe(l,m,t.backgroundColor),B={canvas:t.canvas,backgroundColor:S,scale:(z=(H=t.scale)!==null&&H!==void 0?H:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((G=t.x)!==null&&G!==void 0?G:0)+y,y:((ne=t.y)!==null&&ne!==void 0?ne:0)+_,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(g),height:(q=t.height)!==null&&q!==void 0?q:Math.ceil(b)},u?(l.logger.debug("Document cloned, using foreign object rendering"),E=new tPe(l,B),[4,E.render(m)]):[3,3];case 2:return I=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+_+" with size "+g+"x"+b+" using computed rendering"),l.logger.debug("Starting DOM parsing"),D=Vee(l,m),S===D.styles.backgroundColor&&(D.styles.backgroundColor=vf.TRANSPARENT),l.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),E=new WDe(l,B),[4,E.render(D)];case 4:I=te.sent(),te.label=5;case 5:return(!((Y=t.removeContainer)!==null&&Y!==void 0)||Y)&&(VQ.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,I]}})})},iPe=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?jb(e,getComputedStyle(n.documentElement).backgroundColor):vf.TRANSPARENT,s=n.body?jb(e,getComputedStyle(n.body).backgroundColor):vf.TRANSPARENT,i=typeof r=="string"?jb(e,r):r===null?vf.TRANSPARENT:4294967295;return t===n.documentElement?A0(a)?A0(s)?i:s:a:i};const oPe=Object.freeze(Object.defineProperty({__proto__:null,default:H_},Symbol.toStringTag,{value:"Module"})),Y5="proyectos_interdisciplinarios",ate="entregas_interdisciplinarias",lPe="usuarios",eD=e=>{const t=e.data();return{id:e.id,...t}},cPe=e=>{const t=tr(Ft(Nt,Y5),qr("nombreProyecto","asc"));return yr(t,n=>{const a=n.docs.map(s=>eD(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},uPe=async e=>{try{return(await da(Ft(Nt,Y5),e)).id}catch(t){throw console.error("Error al crear la planificacin:",t),new Error("No se pudo crear la planificacin.")}},qQ=async(e,t)=>{try{const{id:r,...n}=t,a=br(Nt,Y5,e);await io(a,n)}catch(r){throw console.error("Error al actualizar la planificacin:",r),new Error("No se pudo actualizar la planificacin.")}},dPe=async e=>{try{const t=br(Nt,Y5,e);await ni(t)}catch(t){throw console.error("Error al eliminar la planificacin:",t),new Error("No se pudo eliminar la planificacin.")}},APe=(e,t)=>{const r=tr(Ft(Nt,ate),Mn("planificacionId","==",e));return yr(r,a=>{const s=a.docs.map(i=>eD(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},WQ=async(e,t)=>{try{const r=br(Nt,ate,e);await io(r,{feedbackProfesor:t,fechaFeedback:hr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentacin:",r),new Error("No se pudo guardar la retroalimentacin.")}},fPe=e=>{const t=tr(Ft(Nt,lPe));return yr(t,n=>{const a=n.docs.map(s=>eD(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},hPe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=T.useState(null),a=T.useMemo(()=>{const l=[];return e.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=T.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),f=new Date(`${l.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let x=0;for(let g=0;g<p.length;g++)x=p.charCodeAt(g)+((x<<5)-x);return x},f=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%f.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${f[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[f,m]=T.useState(l.activity),p=g=>{m({...f,[g.target.name]:g.target.value})},x=()=>{d(l.planId,f),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:x,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificacin primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},mPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),pPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),gPe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),vPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),xPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),bPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),yPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),wPe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),mj=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Oh=({icon:e,label:t,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[e,c.jsx("span",{children:t})]}),n]}),r]}),EPe=({initialPlan:e,onSave:t,onCancel:r})=>{const[n,a]=T.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=T.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=T.useState({nombre:"",fecha:""}),[u,d]=T.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[f,m]=T.useState(!1),[p,x]=T.useState(!1),[g,b]=T.useState(!1);T.useEffect(()=>{a(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const y=async C=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}C==="objetivos"?m(!0):x(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let P="";C==="objetivos"?P=`Basado en la siguiente descripcin de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripcin del Proyecto: "${n.descripcionProyecto}"`:P=`Basado en la siguiente descripcin y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripcin del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"An no definidos, genralos a partir de la descripcin."}"`;try{const J=(await(await new xs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(P)).response).text();a(W=>({...W,[C]:J.replace(/(\*\*|\*)/g,"")}))}catch(O){console.error(`Error al generar ${C}`,O),alert(`Hubo un error al generar los ${C}. Intntelo de nuevo.`)}finally{C==="objetivos"?m(!1):x(!1)}},_=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripcin del proyecto para usar la IA.");return}b(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en la descripcin de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            Descripcin del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lgicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const J=(await(await new xs(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(J);a(Z=>{var H,z,G;return{...Z,actividades:((H=W.actividades)==null?void 0:H.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.actividades,fechasClave:((z=W.fechasClave)==null?void 0:z.map(ne=>({...ne,id:crypto.randomUUID()})))||Z.fechasClave,tareas:((G=W.tareas)==null?void 0:G.map((ne,R)=>({...ne,id:crypto.randomUUID(),numero:R+1})))||Z.tareas}})}catch(P){console.error("Error al generar la estructura del proyecto:",P),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{b(!1)}},S=C=>{a(N=>({...N,[C.target.name]:C.target.value}))},B=(C,N)=>{a(P=>{const O=P[C],F=O.includes(N)?O.filter(M=>M!==N):[...O,N];return{...P,[C]:F}})},I=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(C=>({...C,actividades:[...C.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},D=()=>{!o.nombre||!o.fecha||(a(C=>({...C,fechasClave:[...C.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},E=()=>{var N;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const C={id:crypto.randomUUID(),numero:(((N=n.tareas)==null?void 0:N.length)||0)+1,...u};a(P=>({...P,tareas:[...P.tareas||[],C]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Oh,{icon:c.jsx(mPe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:S,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Oh,{icon:c.jsx(pPe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:S,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Oh,{icon:c.jsx(gPe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Wa.map(C=>c.jsx("button",{type:"button",onClick:()=>B("cursos",C),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(Oh,{icon:c.jsx(vPe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Pi.map(C=>c.jsx("button",{type:"button",onClick:()=>B("asignaturas",C),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(C)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:C},C))})}),c.jsx(Oh,{icon:c.jsx(xPe,{}),label:"Descripcin del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:S,placeholder:"Detalle aqu la metodologa, el producto final esperado y el propsito del proyecto. Esta informacin es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Oh,{icon:c.jsx(bPe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>y("objetivos"),disabled:!n.descripcionProyecto.trim()||f,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(mj,{})}),children:f?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:S,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Oh,{icon:c.jsx(yPe,{}),label:"Indicadores de xito",aiButton:c.jsx("button",{type:"button",onClick:()=>y("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||p,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(mj,{})}),children:p?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:S,placeholder:"Liste los indicadores de logro o evaluacin...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Oh,{icon:c.jsx(wPe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:_,disabled:g||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:g?"Generando...":" Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:C=>i({...s,nombre:C.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:C=>i({...s,fechaInicio:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:C=>i({...s,fechaFin:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:I,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(C=>c.jsx("li",{children:C.nombre},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:C=>l({...o,nombre:C.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:C=>l({...o,fecha:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:D,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(C=>c.jsxs("li",{children:[C.nombre," (",C.fecha,")"]},C.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:C=>d({...u,instrucciones:C.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:C=>d({...u,fechaEntrega:C.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(C=>c.jsxs("li",{children:[C.numero,". ",C.instrucciones]},C.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>t(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:e?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},XQ=()=>{const[e,t]=T.useState([]),[r,n]=T.useState(!0),[a,s]=T.useState("list"),[i,o]=T.useState(null),[l,u]=T.useState(null),[d,f]=T.useState(null);T.useEffect(()=>{n(!0);const S=cPe(B=>{t(B),n(!1)});return()=>S()},[]);const m=T.useCallback(async(S,B)=>{const I=e.find(D=>D.id===S);if(I){const D={...I,actividades:(I.actividades||[]).map(E=>E.id===B.id?B:E)};await qQ(S,D)}},[e]),p=async S=>{try{"id"in S&&S.id?await qQ(S.id,S):await uPe(S),s("list"),o(null)}catch(B){console.error("Error al guardar la planificacin:",B),alert("No se pudo guardar la planificacin.")}},x=S=>{o(S),s("form")},g=async S=>{if(console.log("ID recibido por handleDelete:",S),!S){console.error("handleDelete fue llamado con un ID invlido:",S),alert("Error: No se puede eliminar un proyecto sin un ID vlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await dPe(S)}catch(B){console.error("Error al eliminar la planificacin:",B),alert("No se pudo eliminar la planificacin.")}},b=()=>{o(null),s("form")},y=async S=>{u(S.id);const B=new fr("p","mm","a4"),I=15,D=B.internal.pageSize.getWidth(),E=B.internal.pageSize.getHeight(),C=D-I*2;let N=I;const P=22,O=14,F=11,M=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text("Proyecto Interdisciplinario",I,12),B.text("Liceo Industrial de Recoleta",D-I,12,{align:"right"}),B.setDrawColor(220),B.line(I,15,D-I,15)},Q=z=>{N+z>E-I&&(B.addPage(),M(),N=I+15)},J=(z,G)=>{if(!G||Array.isArray(G)&&G.length===0||typeof G=="string"&&!G.trim())return;const ne=10;B.setFontSize(F);const R=Array.isArray(G)?G.join(", "):String(G),q=B.splitTextToSize(R,C),Y=q.length*(F*.35*1.15);Q(ne+Y+12),B.setFont("helvetica","bold"),B.setFontSize(O),B.setTextColor(40),B.text(z,I,N),N+=6,B.setDrawColor(200),B.line(I,N,I+30,N),N+=8,B.setFont("helvetica","normal"),B.setFontSize(F),B.setTextColor(80),B.text(q,I,N),N+=Y+12};M(),N=I+20,B.setFont("helvetica","bold"),B.setFontSize(P),B.setTextColor(0);const W=B.splitTextToSize(S.nombreProyecto,C);if(B.text(W,I,N),N+=W.length*(P*.4)+10,nl(B,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},S.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:F,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=B.lastAutoTable.finalY+15,J("Descripcin del Proyecto",S.descripcionProyecto),J("Objetivos de Aprendizaje",S.objetivos),J("Indicadores de Logro",S.indicadoresLogro),S.tareas&&S.tareas.length>0){const z=S.tareas.map(ne=>[ne.numero.toString(),ne.instrucciones,ne.fechaEntrega]),G=(z.length+1)*10+15;Q(G+15),B.setFont("helvetica","bold"),B.setFontSize(O),B.setTextColor(40),B.text("Tareas para Estudiantes",I,N),N+=10,nl(B,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:z,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=B.lastAutoTable.finalY+15}const Z=document.getElementById("gantt-container-vertical");if(Z)try{const G=(await H_(Z,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");B.addPage(),M(),N=I+15,B.setFont("helvetica","bold"),B.setFontSize(O),B.setTextColor(40),B.text("Cronograma del Proyecto",I,N),N+=10;const ne=B.getImageProperties(G),R=C,q=ne.height*R/ne.width;B.addImage(G,"PNG",I,N,R,q)}catch(z){console.error("Error generating timeline image:",z)}const H=B.internal.pages.length-1;for(let z=1;z<=H;z++)B.setPage(z),B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text(`Pgina ${z} de ${H}`,D-I,B.internal.pageSize.getHeight()-10,{align:"right"});B.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},_=({plan:S,onBack:B})=>{var J,W;const[I,D]=T.useState([]),[E,C]=T.useState([]),[N,P]=T.useState(((J=S.tareas)==null?void 0:J[0])||null),[O,F]=T.useState(null);T.useEffect(()=>{const Z=fPe(D),H=APe(S.id,C);return()=>{Z(),H()}},[S.id]);const M=T.useMemo(()=>I.filter(Z=>Z.profile===Kt.ESTUDIANTE&&S.cursos.includes(Z.curso||"")).sort((Z,H)=>Z.nombreCompleto.localeCompare(H.nombreCompleto)),[I,S.cursos]),Q=async Z=>{var G;F(Z.id);const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=`
                Eres un profesor asistente. Genera una retroalimentacin constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${N==null?void 0:N.instrucciones}"
                - Comentario del estudiante: "${Z.observacionesEstudiante||"No dej comentarios."}"
                - Enlace entregado: "${Z.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((G=Z.archivoAdjunto)==null?void 0:G.nombre)||"No aplica"}"
                
                La retroalimentacin debe ser breve (2-3 frases), motivadora, y enfocada en cmo podra mejorar.
            `;try{const te=(await(await new xs(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text().replace(/(\*\*|\*)/g,"");await WQ(Z.id,te)}catch(ne){console.error("Error al generar feedback con IA:",ne),alert("No se pudo generar la retroalimentacin.")}finally{F(null)}};return N?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",S.nombreProyecto]}),c.jsx("button",{onClick:B,className:"font-semibold",children:" Volver a Proyectos"})]}),c.jsx("select",{value:N.id,onChange:Z=>{var H;return P(((H=S.tareas)==null?void 0:H.find(z=>z.id===Z.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(W=S.tareas)==null?void 0:W.map(Z=>c.jsxs("option",{value:Z.id,children:["Tarea ",Z.numero,": ",Z.instrucciones]},Z.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:M.map(Z=>{const H=E.find(z=>z.tareaId===N.id&&z.estudianteId===Z.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[Z.nombreCompleto," - ",H!=null&&H.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),H?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[H.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",H.observacionesEstudiante]}),H.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:H.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:H.enlaceUrl})]}),H.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:H.archivoAdjunto.url,download:H.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:H.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:H.feedbackProfesor||"",onBlur:z=>WQ(H.id,z.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},H.id),c.jsx("button",{onClick:()=>Q(H),disabled:O===H.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:O===H.id?"...":c.jsx(mj,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante an no ha realizado la entrega."})]},Z.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(_,{plan:d,onBack:()=>f(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:e.map(S=>(console.log("Inspeccionando objeto plan:",S),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:S.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(S.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>f(S),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>y(S),disabled:l===S.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===S.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>x(S),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>g(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]})},S.id)))})]}):c.jsx(EPe,{initialPlan:i,onSave:p,onCancel:()=>{s("list"),o(null)}}),e.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(hPe,{planificaciones:e,onActivityUpdate:m})})]})},Tk="paolMaquinas",YQ="paolRegistros",CPe=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=T.useState(a),[o,l]=T.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=T.useState(u),[m,p]=T.useState(null),[x,g]=T.useState({maquinaId:"",curso:"",profesor:"",fecha:""});T.useEffect(()=>{try{const F=localStorage.getItem(Tk);if(F&&JSON.parse(F).length>0)t(JSON.parse(F));else{const Q=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidrulica",especialidad:"Automotriz"}];t(Q),localStorage.setItem(Tk,JSON.stringify(Q))}const M=localStorage.getItem(YQ);M&&n(JSON.parse(M))}catch(F){console.error("Error al cargar datos de Paol desde localStorage",F)}},[]);const b=T.useCallback(F=>{t(F),localStorage.setItem(Tk,JSON.stringify(F))},[]),y=T.useCallback(F=>{n(F),localStorage.setItem(YQ,JSON.stringify(F))},[]),_=F=>{F.preventDefault(),d.nombre.trim()&&(b(m?e.map(M=>M.id===m.id?{...m,...d}:M):[{...d,id:crypto.randomUUID()},...e]),f(u),p(null))},S=T.useCallback(F=>{if(r.some(M=>M.maquinaId===F)){alert("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");return}window.confirm("Eliminar esta mquina?")&&b(e.filter(M=>M.id!==F))},[e,r,b]),B=F=>{F.preventDefault();const M=o||s;if(!M.curso||!M.profesorResponsable.trim()||!M.maquinaId||M.totalHoras<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}y(o?r.map(Q=>Q.id===o.id?o:Q):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},I=T.useCallback(F=>{window.confirm("Eliminar este registro de uso?")&&y(r.filter(M=>M.id!==F))},[r,y]),D=T.useMemo(()=>r.filter(F=>(x.maquinaId===""||F.maquinaId===x.maquinaId)&&(x.curso===""||F.curso===x.curso)&&(x.profesor===""||F.profesorResponsable.toLowerCase().includes(x.profesor.toLowerCase()))&&(x.fecha===""||F.fecha===x.fecha)).sort((F,M)=>new Date(M.fecha).getTime()-new Date(F.fecha).getTime()),[r,x]),E=T.useMemo(()=>new Map(e.map(F=>[F.id,F])),[e]),C=()=>{const F=D.map(J=>{var W,Z;return{Fecha:J.fecha,Curso:J.curso,Profesor:J.profesorResponsable,Mquina:((W=E.get(J.maquinaId))==null?void 0:W.nombre)||"N/A",Especialidad:((Z=E.get(J.maquinaId))==null?void 0:Z.especialidad)||"N/A","Total Horas":J.totalHoras,Observaciones:J.observaciones}}),M=lu.json_to_sheet(F),Q=lu.book_new();lu.book_append_sheet(Q,M,"RegistrosPaol"),FO(Q,"Registros_Paol.xlsx")},N=()=>{const F=new fr;nl(F,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:D.map(M=>{var Q,J;return[M.fecha,M.curso,M.profesorResponsable,((Q=E.get(M.maquinaId))==null?void 0:Q.nombre)||"N/A",((J=E.get(M.maquinaId))==null?void 0:J.especialidad)||"N/A",M.totalHoras,M.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:M=>{F.setFontSize(10),F.setFont("helvetica","bold"),F.text("LICEO INDUSTRIAL DE RECOLETA",M.settings.margin.left,15)}}),F.save("Registros_Paol.pdf")},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",O=()=>{const F=o||s,M=o?l:i;return c.jsxs("form",{onSubmit:B,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:F.fecha,onChange:Q=>M({...F,fecha:Q.target.value}),className:P,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:F.curso,onChange:Q=>M({...F,curso:Q.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),Wa.map(Q=>c.jsx("option",{children:Q},Q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:F.profesorResponsable,onChange:Q=>M({...F,profesorResponsable:Q.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),fI.map(Q=>c.jsx("option",{value:Q,children:Q},Q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Mquina"}),c.jsxs("select",{name:"maquinaId",value:F.maquinaId,onChange:Q=>M({...F,maquinaId:Q.target.value}),className:P,required:!0,children:[c.jsx("option",{value:"",children:"Mquina"}),e.map(Q=>c.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:F.totalHoras,onChange:Q=>M({...F,totalHoras:Number(Q.target.value)}),className:P,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:F.observaciones,onChange:Q=>M({...F,observaciones:Q.target.value}),placeholder:"Observaciones...",className:`${P}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Paol: Registro de Uso de Mquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),O()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Mquinas"}),c.jsxs("form",{onSubmit:_,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:F=>f({...d,nombre:F.target.value}),placeholder:"Nombre mquina",className:P}),c.jsxs("select",{value:d.especialidad,onChange:F=>f({...d,especialidad:F.target.value}),className:P,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.map(F=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[F.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",F.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{p(F),f(F)},className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>S(F.id),className:"text-red-500",children:""})]})]},F.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:C,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:x.fecha,onChange:F=>g({...x,fecha:F.target.value}),className:P}),c.jsxs("select",{value:x.curso,onChange:F=>g({...x,curso:F.target.value}),className:P,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Wa.map(F=>c.jsx("option",{children:F},F))]}),c.jsxs("select",{value:x.maquinaId,onChange:F=>g({...x,maquinaId:F.target.value}),className:P,children:[c.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(F=>c.jsx("option",{value:F.id,children:F.nombre},F.id))]}),c.jsx("input",{value:x.profesor,onChange:F=>g({...x,profesor:F.target.value}),placeholder:"Buscar profesor...",className:P})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Mquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(F=>{var M;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((M=E.get(F.maquinaId))==null?void 0:M.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[F.profesorResponsable," (",F.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(F),className:"text-blue-500",children:""}),c.jsx("button",{onClick:()=>I(F.id),className:"text-red-500 ml-2",children:""})]})]},F.id)})})]})})]})]})]})};function ol(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=ol(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var Ik={exports:{}},jk={},Fk={exports:{}},Ok={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JQ;function _Pe(){if(JQ)return Ok;JQ=1;var e=tx();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,m){var p=m(),x=n({inst:{value:p,getSnapshot:m}}),g=x[0].inst,b=x[1];return s(function(){g.value=p,g.getSnapshot=m,l(g)&&b({inst:g})},[f,p,m]),a(function(){return l(g)&&b({inst:g}),f(function(){l(g)&&b({inst:g})})},[f]),i(p),p}function l(f){var m=f.getSnapshot;f=f.value;try{var p=m();return!r(f,p)}catch{return!0}}function u(f,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Ok.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,Ok}var ZQ;function SPe(){return ZQ||(ZQ=1,Fk.exports=_Pe()),Fk.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eH;function NPe(){if(eH)return jk;eH=1;var e=tx(),t=SPe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return jk.useSyncExternalStoreWithSelector=function(u,d,f,m,p){var x=s(null);if(x.current===null){var g={hasValue:!1,value:null};x.current=g}else g=x.current;x=o(function(){function y(D){if(!_){if(_=!0,S=D,D=m(D),p!==void 0&&g.hasValue){var E=g.value;if(p(E,D))return B=E}return B=D}if(E=B,n(S,D))return E;var C=m(D);return p!==void 0&&p(E,C)?(S=D,E):(S=D,B=C)}var _=!1,S,B,I=f===void 0?null:f;return[function(){return y(d())},I===null?void 0:function(){return y(I())}]},[d,f,m,p]);var b=a(u,x[0],x[1]);return i(function(){g.hasValue=!0,g.value=b},[b]),l(b),b},jk}var tH;function BPe(){return tH||(tH=1,Ik.exports=NPe()),Ik.exports}var ste=BPe();const kPe=il(ste),TPe={},rH=e=>{let t;const r=new Set,n=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const p=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(x=>x(t,p))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(TPe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},IPe=e=>e?rH(e):rH,{useDebugValue:jPe}=ft,{useSyncExternalStoreWithSelector:FPe}=kPe,OPe=e=>e;function ite(e,t=OPe,r){const n=FPe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return jPe(n),n}const nH=(e,t)=>{const r=IPe(e),n=(a,s=t)=>ite(r,a,s);return Object.assign(n,r),n},DPe=(e,t)=>e?nH(e,t):nH;function Ho(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var PPe={value:()=>{}};function J5(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new CC(r)}function CC(e){this._=e}function RPe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}CC.prototype=J5.prototype={constructor:CC,on:function(e,t){var r=this._,n=RPe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=LPe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=aH(r[a],e.name,t);else if(t==null)for(a in r)r[a]=aH(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new CC(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function LPe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function aH(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=PPe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var pj="http://www.w3.org/1999/xhtml";const sH={svg:"http://www.w3.org/2000/svg",xhtml:pj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z5(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),sH.hasOwnProperty(t)?{space:sH[t],local:e}:e}function UPe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===pj&&t.documentElement.namespaceURI===pj?t.createElement(e):t.createElementNS(r,e)}}function MPe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ote(e){var t=Z5(e);return(t.local?MPe:UPe)(t)}function QPe(){}function tD(e){return e==null?QPe:function(){return this.querySelector(e)}}function HPe(e){typeof e!="function"&&(e=tD(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=e.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new vc(n,this._parents)}function VPe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zPe(){return[]}function lte(e){return e==null?zPe:function(){return this.querySelectorAll(e)}}function $Pe(e){return function(){return VPe(e.apply(this,arguments))}}function KPe(e){typeof e=="function"?e=$Pe(e):e=lte(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(e.call(l,l.__data__,u,i)),a.push(l));return new vc(n,a)}function cte(e){return function(){return this.matches(e)}}function ute(e){return function(t){return t.matches(e)}}var GPe=Array.prototype.find;function qPe(e){return function(){return GPe.call(this.children,e)}}function WPe(){return this.firstElementChild}function XPe(e){return this.select(e==null?WPe:qPe(typeof e=="function"?e:ute(e)))}var YPe=Array.prototype.filter;function JPe(){return Array.from(this.children)}function ZPe(e){return function(){return YPe.call(this.children,e)}}function eRe(e){return this.selectAll(e==null?JPe:ZPe(typeof e=="function"?e:ute(e)))}function tRe(e){typeof e!="function"&&(e=cte(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new vc(n,this._parents)}function dte(e){return new Array(e.length)}function rRe(){return new vc(this._enter||this._groups.map(dte),this._parents)}function V_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}V_.prototype={constructor:V_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nRe(e){return function(){return e}}function aRe(e,t,r,n,a,s){for(var i=0,o,l=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new V_(e,s[i]);for(;i<l;++i)(o=t[i])&&(a[i]=o)}function sRe(e,t,r,n,a,s,i){var o,l,u=new Map,d=t.length,f=s.length,m=new Array(d),p;for(o=0;o<d;++o)(l=t[o])&&(m[o]=p=i.call(l,l.__data__,o,t)+"",u.has(p)?a[o]=l:u.set(p,l));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(l=u.get(p))?(n[o]=l,l.__data__=s[o],u.delete(p)):r[o]=new V_(e,s[o]);for(o=0;o<d;++o)(l=t[o])&&u.get(m[o])===l&&(a[o]=l)}function iRe(e){return e.__data__}function oRe(e,t){if(!arguments.length)return Array.from(this,iRe);var r=t?sRe:aRe,n=this._parents,a=this._groups;typeof e!="function"&&(e=nRe(e));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],m=f.length,p=lRe(e.call(d,d&&d.__data__,u,n)),x=p.length,g=o[u]=new Array(x),b=i[u]=new Array(x),y=l[u]=new Array(m);r(d,f,g,b,y,p,t);for(var _=0,S=0,B,I;_<x;++_)if(B=g[_]){for(_>=S&&(S=_+1);!(I=b[S])&&++S<x;);B._next=I||null}}return i=new vc(i,n),i._enter=o,i._exit=l,i}function lRe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cRe(){return new vc(this._exit||this._groups.map(dte),this._parents)}function uRe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function dRe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],f=u.length,m=o[l]=new Array(f),p,x=0;x<f;++x)(p=u[x]||d[x])&&(m[x]=p);for(;l<a;++l)o[l]=r[l];return new vc(o,this._parents)}function ARe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function fRe(e){e||(e=hRe);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(t)}return new vc(a,this._parents).order()}function hRe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mRe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pRe(){return Array.from(this)}function gRe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function vRe(){let e=0;for(const t of this)++e;return e}function xRe(){return!this.node()}function bRe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function yRe(e){return function(){this.removeAttribute(e)}}function wRe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ERe(e,t){return function(){this.setAttribute(e,t)}}function CRe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _Re(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function SRe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function NRe(e,t){var r=Z5(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?wRe:yRe:typeof t=="function"?r.local?SRe:_Re:r.local?CRe:ERe)(r,t))}function Ate(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function BRe(e){return function(){this.style.removeProperty(e)}}function kRe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function TRe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function IRe(e,t,r){return arguments.length>1?this.each((t==null?BRe:typeof t=="function"?TRe:kRe)(e,t,r??"")):Lv(this.node(),e)}function Lv(e,t){return e.style.getPropertyValue(t)||Ate(e).getComputedStyle(e,null).getPropertyValue(t)}function jRe(e){return function(){delete this[e]}}function FRe(e,t){return function(){this[e]=t}}function ORe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function DRe(e,t){return arguments.length>1?this.each((t==null?jRe:typeof t=="function"?ORe:FRe)(e,t)):this.node()[e]}function fte(e){return e.trim().split(/^|\s+/)}function rD(e){return e.classList||new hte(e)}function hte(e){this._node=e,this._names=fte(e.getAttribute("class")||"")}hte.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mte(e,t){for(var r=rD(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function pte(e,t){for(var r=rD(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function PRe(e){return function(){mte(this,e)}}function RRe(e){return function(){pte(this,e)}}function LRe(e,t){return function(){(t.apply(this,arguments)?mte:pte)(this,e)}}function URe(e,t){var r=fte(e+"");if(arguments.length<2){for(var n=rD(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?LRe:t?PRe:RRe)(r,t))}function MRe(){this.textContent=""}function QRe(e){return function(){this.textContent=e}}function HRe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function VRe(e){return arguments.length?this.each(e==null?MRe:(typeof e=="function"?HRe:QRe)(e)):this.node().textContent}function zRe(){this.innerHTML=""}function $Re(e){return function(){this.innerHTML=e}}function KRe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function GRe(e){return arguments.length?this.each(e==null?zRe:(typeof e=="function"?KRe:$Re)(e)):this.node().innerHTML}function qRe(){this.nextSibling&&this.parentNode.appendChild(this)}function WRe(){return this.each(qRe)}function XRe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YRe(){return this.each(XRe)}function JRe(e){var t=typeof e=="function"?e:ote(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ZRe(){return null}function eLe(e,t){var r=typeof e=="function"?e:ote(e),n=t==null?ZRe:typeof t=="function"?t:tD(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function tLe(){var e=this.parentNode;e&&e.removeChild(this)}function rLe(){return this.each(tLe)}function nLe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function aLe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sLe(e){return this.select(e?aLe:nLe)}function iLe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oLe(e){return function(t){e.call(this,t,this.__data__)}}function lLe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function cLe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function uLe(e,t,r){return function(){var n=this.__on,a,s=oLe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function dLe(e,t,r){var n=lLe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?uLe:cLe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function gte(e,t,r){var n=Ate(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function ALe(e,t){return function(){return gte(this,e,t)}}function fLe(e,t){return function(){return gte(this,e,t.apply(this,arguments))}}function hLe(e,t){return this.each((typeof t=="function"?fLe:ALe)(e,t))}function*mLe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var vte=[null];function vc(e,t){this._groups=e,this._parents=t}function dw(){return new vc([[document.documentElement]],vte)}function pLe(){return this}vc.prototype=dw.prototype={constructor:vc,select:HPe,selectAll:KPe,selectChild:XPe,selectChildren:eRe,filter:tRe,data:oRe,enter:rRe,exit:cRe,join:uRe,merge:dRe,selection:pLe,order:ARe,sort:fRe,call:mRe,nodes:pRe,node:gRe,size:vRe,empty:xRe,each:bRe,attr:NRe,style:IRe,property:DRe,classed:URe,text:VRe,html:GRe,raise:WRe,lower:YRe,append:JRe,insert:eLe,remove:rLe,clone:sLe,datum:iLe,on:dLe,dispatch:hLe,[Symbol.iterator]:mLe};function ou(e){return typeof e=="string"?new vc([[document.querySelector(e)]],[document.documentElement]):new vc([[e]],vte)}function gLe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Wd(e,t){if(e=gLe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const vLe={passive:!1},vy={capture:!0,passive:!1};function Dk(e){e.stopImmediatePropagation()}function vv(e){e.preventDefault(),e.stopImmediatePropagation()}function xte(e){var t=e.document.documentElement,r=ou(e).on("dragstart.drag",vv,vy);"onselectstart"in t?r.on("selectstart.drag",vv,vy):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bte(e,t){var r=e.document.documentElement,n=ou(e).on("dragstart.drag",null);t&&(n.on("click.drag",vv,vy),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const SE=e=>()=>e;function gj(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}gj.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xLe(e){return!e.ctrlKey&&!e.button}function bLe(){return this.parentNode}function yLe(e,t){return t??{x:e.x,y:e.y}}function wLe(){return navigator.maxTouchPoints||"ontouchstart"in this}function ELe(){var e=xLe,t=bLe,r=yLe,n=wLe,a={},s=J5("start","drag","end"),i=0,o,l,u,d,f=0;function m(B){B.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,vLe).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(B,I){if(!(d||!e.call(this,B,I))){var D=S(this,t.call(this,B,I),B,I,"mouse");D&&(ou(B.view).on("mousemove.drag",x,vy).on("mouseup.drag",g,vy),xte(B.view),Dk(B),u=!1,o=B.clientX,l=B.clientY,D("start",B))}}function x(B){if(vv(B),!u){var I=B.clientX-o,D=B.clientY-l;u=I*I+D*D>f}a.mouse("drag",B)}function g(B){ou(B.view).on("mousemove.drag mouseup.drag",null),bte(B.view,u),vv(B),a.mouse("end",B)}function b(B,I){if(e.call(this,B,I)){var D=B.changedTouches,E=t.call(this,B,I),C=D.length,N,P;for(N=0;N<C;++N)(P=S(this,E,B,I,D[N].identifier,D[N]))&&(Dk(B),P("start",B,D[N]))}}function y(B){var I=B.changedTouches,D=I.length,E,C;for(E=0;E<D;++E)(C=a[I[E].identifier])&&(vv(B),C("drag",B,I[E]))}function _(B){var I=B.changedTouches,D=I.length,E,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<D;++E)(C=a[I[E].identifier])&&(Dk(B),C("end",B,I[E]))}function S(B,I,D,E,C,N){var P=s.copy(),O=Wd(N||D,I),F,M,Q;if((Q=r.call(B,new gj("beforestart",{sourceEvent:D,target:m,identifier:C,active:i,x:O[0],y:O[1],dx:0,dy:0,dispatch:P}),E))!=null)return F=Q.x-O[0]||0,M=Q.y-O[1]||0,function J(W,Z,H){var z=O,G;switch(W){case"start":a[C]=J,G=i++;break;case"end":delete a[C],--i;case"drag":O=Wd(H||Z,I),G=i;break}P.call(W,B,new gj(W,{sourceEvent:Z,subject:Q,target:m,identifier:C,active:G,x:O[0]+F,y:O[1]+M,dx:O[0]-z[0],dy:O[1]-z[1],dispatch:P}),E)}}return m.filter=function(B){return arguments.length?(e=typeof B=="function"?B:SE(!!B),m):e},m.container=function(B){return arguments.length?(t=typeof B=="function"?B:SE(B),m):t},m.subject=function(B){return arguments.length?(r=typeof B=="function"?B:SE(B),m):r},m.touchable=function(B){return arguments.length?(n=typeof B=="function"?B:SE(!!B),m):n},m.on=function(){var B=s.on.apply(s,arguments);return B===s?m:B},m.clickDistance=function(B){return arguments.length?(f=(B=+B)*B,m):Math.sqrt(f)},m}function nD(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yte(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Aw(){}var xy=.7,z_=1/xy,xv="\\s*([+-]?\\d+)\\s*",by="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CLe=/^#([0-9a-f]{3,8})$/,_Le=new RegExp(`^rgb\\(${xv},${xv},${xv}\\)$`),SLe=new RegExp(`^rgb\\(${fA},${fA},${fA}\\)$`),NLe=new RegExp(`^rgba\\(${xv},${xv},${xv},${by}\\)$`),BLe=new RegExp(`^rgba\\(${fA},${fA},${fA},${by}\\)$`),kLe=new RegExp(`^hsl\\(${by},${fA},${fA}\\)$`),TLe=new RegExp(`^hsla\\(${by},${fA},${fA},${by}\\)$`),iH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nD(Aw,mp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oH,formatHex:oH,formatHex8:ILe,formatHsl:jLe,formatRgb:lH,toString:lH});function oH(){return this.rgb().formatHex()}function ILe(){return this.rgb().formatHex8()}function jLe(){return wte(this).formatHsl()}function lH(){return this.rgb().formatRgb()}function mp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=CLe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cH(t):r===3?new Il(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?NE(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?NE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_Le.exec(e))?new Il(t[1],t[2],t[3],1):(t=SLe.exec(e))?new Il(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NLe.exec(e))?NE(t[1],t[2],t[3],t[4]):(t=BLe.exec(e))?NE(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kLe.exec(e))?AH(t[1],t[2]/100,t[3]/100,1):(t=TLe.exec(e))?AH(t[1],t[2]/100,t[3]/100,t[4]):iH.hasOwnProperty(e)?cH(iH[e]):e==="transparent"?new Il(NaN,NaN,NaN,0):null}function cH(e){return new Il(e>>16&255,e>>8&255,e&255,1)}function NE(e,t,r,n){return n<=0&&(e=t=r=NaN),new Il(e,t,r,n)}function FLe(e){return e instanceof Aw||(e=mp(e)),e?(e=e.rgb(),new Il(e.r,e.g,e.b,e.opacity)):new Il}function vj(e,t,r,n){return arguments.length===1?FLe(e):new Il(e,t,r,n??1)}function Il(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}nD(Il,vj,yte(Aw,{brighter(e){return e=e==null?z_:Math.pow(z_,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xy:Math.pow(xy,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Il(Ym(this.r),Ym(this.g),Ym(this.b),$_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uH,formatHex:uH,formatHex8:OLe,formatRgb:dH,toString:dH}));function uH(){return`#${Om(this.r)}${Om(this.g)}${Om(this.b)}`}function OLe(){return`#${Om(this.r)}${Om(this.g)}${Om(this.b)}${Om((isNaN(this.opacity)?1:this.opacity)*255)}`}function dH(){const e=$_(this.opacity);return`${e===1?"rgb(":"rgba("}${Ym(this.r)}, ${Ym(this.g)}, ${Ym(this.b)}${e===1?")":`, ${e})`}`}function $_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ym(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Om(e){return e=Ym(e),(e<16?"0":"")+e.toString(16)}function AH(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Xu(e,t,r,n)}function wte(e){if(e instanceof Xu)return new Xu(e.h,e.s,e.l,e.opacity);if(e instanceof Aw||(e=mp(e)),!e)return new Xu;if(e instanceof Xu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Xu(i,o,l,e.opacity)}function DLe(e,t,r,n){return arguments.length===1?wte(e):new Xu(e,t,r,n??1)}function Xu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}nD(Xu,DLe,yte(Aw,{brighter(e){return e=e==null?z_:Math.pow(z_,e),new Xu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xy:Math.pow(xy,e),new Xu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Il(Pk(e>=240?e-240:e+120,a,n),Pk(e,a,n),Pk(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Xu(fH(this.h),BE(this.s),BE(this.l),$_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$_(this.opacity);return`${e===1?"hsl(":"hsla("}${fH(this.h)}, ${BE(this.s)*100}%, ${BE(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fH(e){return e=(e||0)%360,e<0?e+360:e}function BE(e){return Math.max(0,Math.min(1,e||0))}function Pk(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const aD=e=>()=>e;function PLe(e,t){return function(r){return e+r*t}}function RLe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function LLe(e){return(e=+e)==1?Ete:function(t,r){return r-t?RLe(t,r,e):aD(isNaN(t)?r:t)}}function Ete(e,t){var r=t-e;return r?PLe(e,r):aD(isNaN(e)?t:e)}const K_=function e(t){var r=LLe(t);function n(a,s){var i=r((a=vj(a)).r,(s=vj(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=Ete(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function ULe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function MLe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QLe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=px(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function HLe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Wu(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function VLe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=px(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var xj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rk=new RegExp(xj.source,"g");function zLe(e){return function(){return e}}function $Le(e){return function(t){return e(t)+""}}function Cte(e,t){var r=xj.lastIndex=Rk.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=xj.exec(e))&&(a=Rk.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Wu(n,a)})),r=Rk.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?$Le(l[0].x):zLe(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function px(e,t){var r=typeof t,n;return t==null||r==="boolean"?aD(t):(r==="number"?Wu:r==="string"?(n=mp(t))?(t=n,K_):Cte:t instanceof mp?K_:t instanceof Date?HLe:MLe(t)?ULe:Array.isArray(t)?QLe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VLe:Wu)(e,t)}function sD(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var hH=180/Math.PI,bj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _te(e,t,r,n,a,s){var i,o,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),e*n<t*r&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*hH,skewX:Math.atan(l)*hH,scaleX:i,scaleY:o}}var kE;function KLe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bj:_te(t.a,t.b,t.c,t.d,t.e,t.f)}function GLe(e){return e==null||(kE||(kE=document.createElementNS("http://www.w3.org/2000/svg","g")),kE.setAttribute("transform",e),!(e=kE.transform.baseVal.consolidate()))?bj:(e=e.matrix,_te(e.a,e.b,e.c,e.d,e.e,e.f))}function Ste(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,m,p,x){if(u!==f||d!==m){var g=p.push("translate(",null,t,null,r);x.push({i:g-4,x:Wu(u,f)},{i:g-2,x:Wu(d,m)})}else(f||m)&&p.push("translate("+f+t+m+r)}function i(u,d,f,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:f.push(a(f)+"rotate(",null,n)-2,x:Wu(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,m){u!==d?m.push({i:f.push(a(f)+"skewX(",null,n)-2,x:Wu(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function l(u,d,f,m,p,x){if(u!==f||d!==m){var g=p.push(a(p)+"scale(",null,",",null,")");x.push({i:g-4,x:Wu(u,f)},{i:g-2,x:Wu(d,m)})}else(f!==1||m!==1)&&p.push(a(p)+"scale("+f+","+m+")")}return function(u,d){var f=[],m=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,m),i(u.rotate,d.rotate,f,m),o(u.skewX,d.skewX,f,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,m),u=d=null,function(p){for(var x=-1,g=m.length,b;++x<g;)f[(b=m[x]).i]=b.x(p);return f.join("")}}}var qLe=Ste(KLe,"px, ","px)","deg)"),WLe=Ste(GLe,", ",")",")"),XLe=1e-12;function mH(e){return((e=Math.exp(e))+1/e)/2}function YLe(e){return((e=Math.exp(e))-1/e)/2}function JLe(e){return((e=Math.exp(2*e))-1)/(e+1)}const ZLe=function e(t,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],f=i[1],m=i[2],p=d-o,x=f-l,g=p*p+x*x,b,y;if(g<XLe)y=Math.log(m/u)/t,b=function(E){return[o+E*p,l+E*x,u*Math.exp(t*E*y)]};else{var _=Math.sqrt(g),S=(m*m-u*u+n*g)/(2*u*r*_),B=(m*m-u*u-n*g)/(2*m*r*_),I=Math.log(Math.sqrt(S*S+1)-S),D=Math.log(Math.sqrt(B*B+1)-B);y=(D-I)/t,b=function(E){var C=E*y,N=mH(I),P=u/(r*_)*(N*JLe(t*C+I)-YLe(I));return[o+P*p,l+P*x,u*N/mH(t*C+I)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return e(i,o,l)},a}(Math.SQRT2,2,4);function e8e(e,t){t===void 0&&(t=e,e=px);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}var Uv=0,ob=0,B1=0,Nte=1e3,G_,lb,q_=0,pp=0,eN=0,yy=typeof performance=="object"&&performance.now?performance:Date,Bte=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function iD(){return pp||(Bte(t8e),pp=yy.now()+eN)}function t8e(){pp=0}function W_(){this._call=this._time=this._next=null}W_.prototype=kte.prototype={constructor:W_,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?iD():+r)+(t==null?0:+t),!this._next&&lb!==this&&(lb?lb._next=this:G_=this,lb=this),this._call=e,this._time=r,yj()},stop:function(){this._call&&(this._call=null,this._time=1/0,yj())}};function kte(e,t,r){var n=new W_;return n.restart(e,t,r),n}function r8e(){iD(),++Uv;for(var e=G_,t;e;)(t=pp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uv}function pH(){pp=(q_=yy.now())+eN,Uv=ob=0;try{r8e()}finally{Uv=0,a8e(),pp=0}}function n8e(){var e=yy.now(),t=e-q_;t>Nte&&(eN-=t,q_=e)}function a8e(){for(var e,t=G_,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:G_=r);lb=e,yj(n)}function yj(e){if(!Uv){ob&&(ob=clearTimeout(ob));var t=e-pp;t>24?(e<1/0&&(ob=setTimeout(pH,e-yy.now()-eN)),B1&&(B1=clearInterval(B1))):(B1||(q_=yy.now(),B1=setInterval(n8e,Nte)),Uv=1,Bte(pH))}}function gH(e,t,r){var n=new W_;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var s8e=J5("start","end","cancel","interrupt"),i8e=[],Tte=0,vH=1,wj=2,_C=3,xH=4,Ej=5,SC=6;function tN(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;o8e(e,r,{name:t,index:n,group:a,on:s8e,tween:i8e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Tte})}function oD(e,t){var r=ud(e,t);if(r.state>Tte)throw new Error("too late; already scheduled");return r}function CA(e,t){var r=ud(e,t);if(r.state>_C)throw new Error("too late; already running");return r}function ud(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function o8e(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=kte(s,0,r.time);function s(u){r.state=vH,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,m,p;if(r.state!==vH)return l();for(d in n)if(p=n[d],p.name===r.name){if(p.state===_C)return gH(i);p.state===xH?(p.state=SC,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=SC,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(gH(function(){r.state===_C&&(r.state=xH,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=wj,r.on.call("start",e,e.__data__,r.index,r.group),r.state===wj){for(r.state=_C,a=new Array(m=r.tween.length),d=0,f=-1;d<m;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=Ej,1),f=-1,m=a.length;++f<m;)a[f].call(e,d);r.state===Ej&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=SC,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function NC(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>wj&&n.state<Ej,n.state=SC,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function l8e(e){return this.each(function(){NC(this,e)})}function c8e(e,t){var r,n;return function(){var a=CA(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function u8e(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=CA(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===t){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function d8e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ud(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?c8e:u8e)(r,e,t))}function lD(e,t,r){var n=e._id;return e.each(function(){var a=CA(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return ud(a,n).value[t]}}function Ite(e,t){var r;return(typeof t=="number"?Wu:t instanceof mp?K_:(r=mp(t))?(t=r,K_):Cte)(e,t)}function A8e(e){return function(){this.removeAttribute(e)}}function f8e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h8e(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function m8e(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function p8e(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function g8e(e,t,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o)))}}function v8e(e,t){var r=Z5(e),n=r==="transform"?WLe:Ite;return this.attrTween(e,typeof t=="function"?(r.local?g8e:p8e)(r,n,lD(this,"attr."+e,t)):t==null?(r.local?f8e:A8e)(r):(r.local?m8e:h8e)(r,n,t))}function x8e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function b8e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function y8e(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&b8e(e,s)),r}return a._value=t,a}function w8e(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&x8e(e,s)),r}return a._value=t,a}function E8e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Z5(e);return this.tween(r,(n.local?y8e:w8e)(n,t))}function C8e(e,t){return function(){oD(this,e).delay=+t.apply(this,arguments)}}function _8e(e,t){return t=+t,function(){oD(this,e).delay=t}}function S8e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?C8e:_8e)(t,e)):ud(this.node(),t).delay}function N8e(e,t){return function(){CA(this,e).duration=+t.apply(this,arguments)}}function B8e(e,t){return t=+t,function(){CA(this,e).duration=t}}function k8e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?N8e:B8e)(t,e)):ud(this.node(),t).duration}function T8e(e,t){if(typeof t!="function")throw new Error;return function(){CA(this,e).ease=t}}function I8e(e){var t=this._id;return arguments.length?this.each(T8e(t,e)):ud(this.node(),t).ease}function j8e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;CA(this,e).ease=r}}function F8e(e){if(typeof e!="function")throw new Error;return this.each(j8e(this._id,e))}function O8e(e){typeof e!="function"&&(e=cte(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Tf(n,this._parents,this._name,this._id)}function D8e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=t[o],u=r[o],d=l.length,f=i[o]=new Array(d),m,p=0;p<d;++p)(m=l[p]||u[p])&&(f[p]=m);for(;o<n;++o)i[o]=t[o];return new Tf(i,this._parents,this._name,this._id)}function P8e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function R8e(e,t,r){var n,a,s=P8e(t)?oD:CA;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function L8e(e,t){var r=this._id;return arguments.length<2?ud(this.node(),r).on.on(e):this.each(R8e(r,e,t))}function U8e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function M8e(){return this.on("end.remove",U8e(this._id))}function Q8e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=tD(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,f,m=0;m<l;++m)(d=o[m])&&(f=e.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),u[m]=f,tN(u[m],t,r,m,u,ud(d,r)));return new Tf(s,this._parents,t,r)}function H8e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=lte(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var m=e.call(d,d.__data__,f,l),p,x=ud(d,r),g=0,b=m.length;g<b;++g)(p=m[g])&&tN(p,t,r,g,m,x);s.push(m),i.push(d)}return new Tf(s,i,t,r)}var V8e=dw.prototype.constructor;function z8e(){return new V8e(this._groups,this._parents)}function $8e(e,t){var r,n,a;return function(){var s=Lv(this,e),i=(this.style.removeProperty(e),Lv(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function jte(e){return function(){this.style.removeProperty(e)}}function K8e(e,t,r){var n,a=r+"",s;return function(){var i=Lv(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function G8e(e,t,r){var n,a,s;return function(){var i=Lv(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Lv(this,e))),i===l?null:i===n&&l===a?s:(a=l,s=t(n=i,o))}}function q8e(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var l=CA(this,e),u=l.on,d=l.value[s]==null?o||(o=jte(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function W8e(e,t,r){var n=(e+="")=="transform"?qLe:Ite;return t==null?this.styleTween(e,$8e(e,n)).on("end.style."+e,jte(e)):typeof t=="function"?this.styleTween(e,G8e(e,n,lD(this,"style."+e,t))).each(q8e(this._id,e)):this.styleTween(e,K8e(e,n,t),r).on("end.style."+e,null)}function X8e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Y8e(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&X8e(e,i,r)),n}return s._value=t,s}function J8e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Y8e(e,t,r??""))}function Z8e(e){return function(){this.textContent=e}}function eUe(e){return function(){var t=e(this);this.textContent=t??""}}function tUe(e){return this.tween("text",typeof e=="function"?eUe(lD(this,"text",e)):Z8e(e==null?"":e+""))}function rUe(e){return function(t){this.textContent=e.call(this,t)}}function nUe(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&rUe(a)),t}return n._value=e,n}function aUe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nUe(e))}function sUe(){for(var e=this._name,t=this._id,r=Fte(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=ud(l,t);tN(l,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Tf(n,this._parents,e,r)}function iUe(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=CA(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),a===0&&s()})}var oUe=0;function Tf(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Fte(){return++oUe}var nf=dw.prototype;Tf.prototype={constructor:Tf,select:Q8e,selectAll:H8e,selectChild:nf.selectChild,selectChildren:nf.selectChildren,filter:O8e,merge:D8e,selection:z8e,transition:sUe,call:nf.call,nodes:nf.nodes,node:nf.node,size:nf.size,empty:nf.empty,each:nf.each,on:L8e,attr:v8e,attrTween:E8e,style:W8e,styleTween:J8e,text:tUe,textTween:aUe,remove:M8e,tween:d8e,delay:S8e,duration:k8e,ease:I8e,easeVarying:F8e,end:iUe,[Symbol.iterator]:nf[Symbol.iterator]};function lUe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cUe={time:null,delay:0,duration:250,ease:lUe};function uUe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function dUe(e){var t,r;e instanceof Tf?(t=e._id,e=e._name):(t=Fte(),(r=cUe).time=iD(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&tN(l,e,t,u,i,r||uUe(l,t));return new Tf(n,this._parents,e,t)}dw.prototype.interrupt=l8e;dw.prototype.transition=dUe;const TE=e=>()=>e;function AUe(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function df(e,t,r){this.k=e,this.x=t,this.y=r}df.prototype={constructor:df,scale:function(e){return e===1?this:new df(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new df(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var f0=new df(1,0,0);df.prototype;function Lk(e){e.stopImmediatePropagation()}function k1(e){e.preventDefault(),e.stopImmediatePropagation()}function fUe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hUe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function bH(){return this.__zoom||f0}function mUe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function pUe(){return navigator.maxTouchPoints||"ontouchstart"in this}function gUe(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function vUe(){var e=fUe,t=hUe,r=gUe,n=mUe,a=pUe,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=ZLe,u=J5("start","zoom","end"),d,f,m,p=500,x=150,g=0,b=10;function y(Q){Q.property("__zoom",bH).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",P).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(Q,J,W,Z){var H=Q.selection?Q.selection():Q;H.property("__zoom",bH),Q!==H?I(Q,J,W,Z):H.interrupt().each(function(){D(this,arguments).event(Z).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},y.scaleBy=function(Q,J,W,Z){y.scaleTo(Q,function(){var H=this.__zoom.k,z=typeof J=="function"?J.apply(this,arguments):J;return H*z},W,Z)},y.scaleTo=function(Q,J,W,Z){y.transform(Q,function(){var H=t.apply(this,arguments),z=this.__zoom,G=W==null?B(H):typeof W=="function"?W.apply(this,arguments):W,ne=z.invert(G),R=typeof J=="function"?J.apply(this,arguments):J;return r(S(_(z,R),G,ne),H,i)},W,Z)},y.translateBy=function(Q,J,W,Z){y.transform(Q,function(){return r(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),i)},null,Z)},y.translateTo=function(Q,J,W,Z,H){y.transform(Q,function(){var z=t.apply(this,arguments),G=this.__zoom,ne=Z==null?B(z):typeof Z=="function"?Z.apply(this,arguments):Z;return r(f0.translate(ne[0],ne[1]).scale(G.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof W=="function"?-W.apply(this,arguments):-W),z,i)},Z,H)};function _(Q,J){return J=Math.max(s[0],Math.min(s[1],J)),J===Q.k?Q:new df(J,Q.x,Q.y)}function S(Q,J,W){var Z=J[0]-W[0]*Q.k,H=J[1]-W[1]*Q.k;return Z===Q.x&&H===Q.y?Q:new df(Q.k,Z,H)}function B(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function I(Q,J,W,Z){Q.on("start.zoom",function(){D(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(Z).end()}).tween("zoom",function(){var H=this,z=arguments,G=D(H,z).event(Z),ne=t.apply(H,z),R=W==null?B(ne):typeof W=="function"?W.apply(H,z):W,q=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),Y=H.__zoom,te=typeof J=="function"?J.apply(H,z):J,ie=l(Y.invert(R).concat(q/Y.k),te.invert(R).concat(q/te.k));return function(pe){if(pe===1)pe=te;else{var oe=ie(pe),ce=q/oe[2];pe=new df(ce,R[0]-oe[0]*ce,R[1]-oe[1]*ce)}G.zoom(null,pe)}})}function D(Q,J,W){return!W&&Q.__zooming||new E(Q,J)}function E(Q,J){this.that=Q,this.args=J,this.active=0,this.sourceEvent=null,this.extent=t.apply(Q,J),this.taps=0}E.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,J){return this.mouse&&Q!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&Q!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&Q!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var J=ou(this.that).datum();u.call(Q,this.that,new AUe(Q,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),J)}};function C(Q,...J){if(!e.apply(this,arguments))return;var W=D(this,J).event(Q),Z=this.__zoom,H=Math.max(s[0],Math.min(s[1],Z.k*Math.pow(2,n.apply(this,arguments)))),z=Wd(Q);if(W.wheel)(W.mouse[0][0]!==z[0]||W.mouse[0][1]!==z[1])&&(W.mouse[1]=Z.invert(W.mouse[0]=z)),clearTimeout(W.wheel);else{if(Z.k===H)return;W.mouse=[z,Z.invert(z)],NC(this),W.start()}k1(Q),W.wheel=setTimeout(G,x),W.zoom("mouse",r(S(_(Z,H),W.mouse[0],W.mouse[1]),W.extent,i));function G(){W.wheel=null,W.end()}}function N(Q,...J){if(m||!e.apply(this,arguments))return;var W=Q.currentTarget,Z=D(this,J,!0).event(Q),H=ou(Q.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",q,!0),z=Wd(Q,W),G=Q.clientX,ne=Q.clientY;xte(Q.view),Lk(Q),Z.mouse=[z,this.__zoom.invert(z)],NC(this),Z.start();function R(Y){if(k1(Y),!Z.moved){var te=Y.clientX-G,ie=Y.clientY-ne;Z.moved=te*te+ie*ie>g}Z.event(Y).zoom("mouse",r(S(Z.that.__zoom,Z.mouse[0]=Wd(Y,W),Z.mouse[1]),Z.extent,i))}function q(Y){H.on("mousemove.zoom mouseup.zoom",null),bte(Y.view,Z.moved),k1(Y),Z.event(Y).end()}}function P(Q,...J){if(e.apply(this,arguments)){var W=this.__zoom,Z=Wd(Q.changedTouches?Q.changedTouches[0]:Q,this),H=W.invert(Z),z=W.k*(Q.shiftKey?.5:2),G=r(S(_(W,z),Z,H),t.apply(this,J),i);k1(Q),o>0?ou(this).transition().duration(o).call(I,G,Z,Q):ou(this).call(y.transform,G,Z,Q)}}function O(Q,...J){if(e.apply(this,arguments)){var W=Q.touches,Z=W.length,H=D(this,J,Q.changedTouches.length===Z).event(Q),z,G,ne,R;for(Lk(Q),G=0;G<Z;++G)ne=W[G],R=Wd(ne,this),R=[R,this.__zoom.invert(R),ne.identifier],H.touch0?!H.touch1&&H.touch0[2]!==R[2]&&(H.touch1=R,H.taps=0):(H.touch0=R,z=!0,H.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(H.taps<2&&(f=R[0],d=setTimeout(function(){d=null},p)),NC(this),H.start())}}function F(Q,...J){if(this.__zooming){var W=D(this,J).event(Q),Z=Q.changedTouches,H=Z.length,z,G,ne,R;for(k1(Q),z=0;z<H;++z)G=Z[z],ne=Wd(G,this),W.touch0&&W.touch0[2]===G.identifier?W.touch0[0]=ne:W.touch1&&W.touch1[2]===G.identifier&&(W.touch1[0]=ne);if(G=W.that.__zoom,W.touch1){var q=W.touch0[0],Y=W.touch0[1],te=W.touch1[0],ie=W.touch1[1],pe=(pe=te[0]-q[0])*pe+(pe=te[1]-q[1])*pe,oe=(oe=ie[0]-Y[0])*oe+(oe=ie[1]-Y[1])*oe;G=_(G,Math.sqrt(pe/oe)),ne=[(q[0]+te[0])/2,(q[1]+te[1])/2],R=[(Y[0]+ie[0])/2,(Y[1]+ie[1])/2]}else if(W.touch0)ne=W.touch0[0],R=W.touch0[1];else return;W.zoom("touch",r(S(G,ne,R),W.extent,i))}}function M(Q,...J){if(this.__zooming){var W=D(this,J).event(Q),Z=Q.changedTouches,H=Z.length,z,G;for(Lk(Q),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),z=0;z<H;++z)G=Z[z],W.touch0&&W.touch0[2]===G.identifier?delete W.touch0:W.touch1&&W.touch1[2]===G.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(G=Wd(G,this),Math.hypot(f[0]-G[0],f[1]-G[1])<b)){var ne=ou(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return y.wheelDelta=function(Q){return arguments.length?(n=typeof Q=="function"?Q:TE(+Q),y):n},y.filter=function(Q){return arguments.length?(e=typeof Q=="function"?Q:TE(!!Q),y):e},y.touchable=function(Q){return arguments.length?(a=typeof Q=="function"?Q:TE(!!Q),y):a},y.extent=function(Q){return arguments.length?(t=typeof Q=="function"?Q:TE([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),y):t},y.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],y):[s[0],s[1]]},y.translateExtent=function(Q){return arguments.length?(i[0][0]=+Q[0][0],i[1][0]=+Q[1][0],i[0][1]=+Q[0][1],i[1][1]=+Q[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(Q){return arguments.length?(r=Q,y):r},y.duration=function(Q){return arguments.length?(o=+Q,y):o},y.interpolate=function(Q){return arguments.length?(l=Q,y):l},y.on=function(){var Q=u.on.apply(u,arguments);return Q===u?y:Q},y.clickDistance=function(Q){return arguments.length?(g=(Q=+Q)*Q,y):Math.sqrt(g)},y.tapDistance=function(Q){return arguments.length?(b=+Q,y):b},y}var Ote=GG();const rN=T.createContext(null),xUe=rN.Provider,If={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Dte=If.error001();function Za(e,t){const r=T.useContext(rN);if(r===null)throw new Error(Dte);return ite(r,e,t)}const Ui=()=>{const e=T.useContext(rN);if(e===null)throw new Error(Dte);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},bUe=e=>e.userSelectionActive?"none":"all";function Pte({position:e,children:t,className:r,style:n,...a}){const s=Za(bUe),i=`${e}`.split("-");return ft.createElement("div",{className:ol(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function yUe({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ft.createElement(Pte,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ft.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const wUe=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const f=T.useRef(null),[m,p]=T.useState({x:0,y:0,width:0,height:0}),x=ol(["react-flow__edge-textwrapper",u]);return T.useEffect(()=>{if(f.current){const g=f.current.getBBox();p({x:g.x,y:g.y,width:g.width,height:g.height})}},[r]),typeof r>"u"||!r?null:ft.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...d},a&&ft.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),ft.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:n},r),l)};var EUe=T.memo(wUe);const cD=e=>({width:e.offsetWidth,height:e.offsetHeight}),Mv=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),uD=(e={x:0,y:0},t)=>({x:Mv(e.x,t[0][0],t[1][0]),y:Mv(e.y,t[0][1],t[1][1])}),yH=(e,t,r)=>e<t?Mv(Math.abs(e-t),1,50)/50:e>r?-Mv(Math.abs(e-r),1,50)/50:0,Rte=(e,t)=>{const r=yH(e.x,35,t.width-35)*20,n=yH(e.y,35,t.height-35)*20;return[r,n]},Lte=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},CUe=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),dD=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),_Ue=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),wH=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Cj=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},SUe=e=>du(e.width)&&du(e.height)&&du(e.x)&&du(e.y),du=e=>!isNaN(e)&&isFinite(e),ps=Symbol.for("internals"),Ute=["Enter"," ","Escape"],NUe=(e,t)=>{},BUe=e=>"nativeEvent"in e;function _j(e){var a,s;const t=BUe(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Mte=e=>"clientX"in e,h0=(e,t)=>{var s,i;const r=Mte(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},X_=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},fw=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:p=20})=>ft.createElement(ft.Fragment,null,ft.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),p&&ft.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&du(r)&&du(n)?ft.createElement(EUe,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);fw.displayName="BaseEdge";function T1(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Qte({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function Hte({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(l-e),f=Math.abs(u-t);return[l,u,d,f]}var gp;(function(e){e.Strict="strict",e.Loose="loose"})(gp||(gp={}));var Dm;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Dm||(Dm={}));var wy;(function(e){e.Partial="partial",e.Full="full"})(wy||(wy={}));var Wh;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wh||(Wh={}));var Y_;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Y_||(Y_={}));var gr;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(gr||(gr={}));function EH({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===gr.Left||e===gr.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function Vte({sourceX:e,sourceY:t,sourcePosition:r=gr.Bottom,targetX:n,targetY:a,targetPosition:s=gr.Top}){const[i,o]=EH({pos:r,x1:e,y1:t,x2:n,y2:a}),[l,u]=EH({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,m,p]=Hte({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${o} ${l},${u} ${n},${a}`,d,f,m,p]}const AD=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=gr.Bottom,targetPosition:s=gr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:x,interactionWidth:g})=>{const[b,y,_]=Vte({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return ft.createElement(fw,{path:b,labelX:y,labelY:_,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:x,interactionWidth:g})});AD.displayName="SimpleBezierEdge";const CH={[gr.Left]:{x:-1,y:0},[gr.Right]:{x:1,y:0},[gr.Top]:{x:0,y:-1},[gr.Bottom]:{x:0,y:1}},kUe=({source:e,sourcePosition:t=gr.Bottom,target:r})=>t===gr.Left||t===gr.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},_H=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function TUe({source:e,sourcePosition:t=gr.Bottom,target:r,targetPosition:n=gr.Top,center:a,offset:s}){const i=CH[t],o=CH[n],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=kUe({source:l,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",m=d[f];let p=[],x,g;const b={x:0,y:0},y={x:0,y:0},[_,S,B,I]=Qte({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){x=a.x??_,g=a.y??S;const E=[{x,y:l.y},{x,y:u.y}],C=[{x:l.x,y:g},{x:u.x,y:g}];i[f]===m?p=f==="x"?E:C:p=f==="x"?C:E}else{const E=[{x:l.x,y:u.y}],C=[{x:u.x,y:l.y}];if(f==="x"?p=i.x===m?C:E:p=i.y===m?E:C,t===n){const M=Math.abs(e[f]-r[f]);if(M<=s){const Q=Math.min(s-1,s-M);i[f]===m?b[f]=(l[f]>e[f]?-1:1)*Q:y[f]=(u[f]>r[f]?-1:1)*Q}}if(t!==n){const M=f==="x"?"y":"x",Q=i[f]===o[M],J=l[M]>u[M],W=l[M]<u[M];(i[f]===1&&(!Q&&J||Q&&W)||i[f]!==1&&(!Q&&W||Q&&J))&&(p=f==="x"?E:C)}const N={x:l.x+b.x,y:l.y+b.y},P={x:u.x+y.x,y:u.y+y.y},O=Math.max(Math.abs(N.x-p[0].x),Math.abs(P.x-p[0].x)),F=Math.max(Math.abs(N.y-p[0].y),Math.abs(P.y-p[0].y));O>=F?(x=(N.x+P.x)/2,g=p[0].y):(x=p[0].x,g=(N.y+P.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],x,g,B,I]}function IUe(e,t,r,n){const a=Math.min(_H(e,t)/2,_H(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function Sj({sourceX:e,sourceY:t,sourcePosition:r=gr.Bottom,targetX:n,targetY:a,targetPosition:s=gr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,f,m,p,x]=TUe({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((b,y,_)=>{let S="";return _>0&&_<d.length-1?S=IUe(d[_-1],y,d[_+1],i):S=`${_===0?"M":"L"}${y.x} ${y.y}`,b+=S,b},""),f,m,p,x]}const nN=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:f=gr.Bottom,targetPosition:m=gr.Top,markerEnd:p,markerStart:x,pathOptions:g,interactionWidth:b})=>{const[y,_,S]=Sj({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:m,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return ft.createElement(fw,{path:y,labelX:_,labelY:S,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:x,interactionWidth:b})});nN.displayName="SmoothStepEdge";const fD=T.memo(e=>{var t;return ft.createElement(nN,{...e,pathOptions:T.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});fD.displayName="StepEdge";function jUe({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=Qte({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const hD=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:p})=>{const[x,g,b]=jUe({sourceX:e,sourceY:t,targetX:r,targetY:n});return ft.createElement(fw,{path:x,labelX:g,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:m,interactionWidth:p})});hD.displayName="StraightEdge";function IE(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function SH({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case gr.Left:return[t-IE(t-n,s),r];case gr.Right:return[t+IE(n-t,s),r];case gr.Top:return[t,r-IE(r-a,s)];case gr.Bottom:return[t,r+IE(a-r,s)]}}function zte({sourceX:e,sourceY:t,sourcePosition:r=gr.Bottom,targetX:n,targetY:a,targetPosition:s=gr.Top,curvature:i=.25}){const[o,l]=SH({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=SH({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,m,p,x]=Hte({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${n},${a}`,f,m,p,x]}const J_=T.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=gr.Bottom,targetPosition:s=gr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:x,pathOptions:g,interactionWidth:b})=>{const[y,_,S]=zte({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:g==null?void 0:g.curvature});return ft.createElement(fw,{path:y,labelX:_,labelY:S,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:x,interactionWidth:b})});J_.displayName="BezierEdge";const mD=T.createContext(null),FUe=mD.Provider;mD.Consumer;const OUe=()=>T.useContext(mD),DUe=e=>"id"in e&&"source"in e&&"target"in e,PUe=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,Nj=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,RUe=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),LUe=(e,t)=>{if(!e.source||!e.target)return t;let r;return DUe(e)?r={...e}:r={...e,id:PUe(e)},RUe(r,t)?t:t.concat(r)},Bj=({x:e,y:t},[r,n,a],s,[i,o])=>{const l={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},$te=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),bv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},pD=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=bv(a,t).positionAbsolute;return CUe(n,dD({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _Ue(r)},Kte=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:m,selectable:p=!0,hidden:x=!1}=d;if(i&&!p||x)return!1;const{positionAbsolute:g}=bv(d,o),b={x:g.x,y:g.y,width:f||0,height:m||0},y=Cj(l,b),_=typeof f>"u"||typeof m>"u"||f===null||m===null,S=s&&y>0,B=(f||0)*(m||0);(_||S||y>=B||d.dragging)&&u.push(d)}),u},Gte=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},qte=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),l=Math.min(i,o),u=Mv(l,n,a),d=e.x+e.width/2,f=e.y+e.height/2,m=t/2-d*u,p=r/2-f*u;return{x:m,y:p,zoom:u}},wm=(e,t=0)=>e.transition().duration(t);function NH(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function UUe(e,t,r,n,a,s){const{x:i,y:o}=h0(e),u=t.elementsFromPoint(i,o).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const g=gD(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:x,id:b,type:g});if(y){const _=a.find(S=>S.nodeId===x&&S.type===g&&S.id===b);return{handle:{id:b,type:g,nodeId:x,x:(_==null?void 0:_.x)||r.x,y:(_==null?void 0:_.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(x=>{const g=Math.sqrt((x.x-r.x)**2+(x.y-r.y)**2);if(g<=n){const b=s(x);g<=f&&(g<f?d=[{handle:x,validHandleResult:b}]:g===f&&d.push({handle:x,validHandleResult:b}),f=g)}}),!d.length)return{handle:null,validHandleResult:Wte()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:x})=>x.isValid),p=d.some(({handle:x})=>x.type==="target");return d.find(({handle:x,validHandleResult:g})=>p?x.type==="target":m?g.isValid:!0)||d[0]}const MUe={source:null,target:null,sourceHandle:null,targetHandle:null},Wte=()=>({handleDomNode:null,isValid:!1,connection:MUe,endHandle:null});function Xte(e,t,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Wte(),handleDomNode:l};if(l){const d=gD(void 0,l),f=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),x=l.classList.contains("connectableend"),g={source:o?f:r,sourceHandle:o?m:n,target:o?r:f,targetHandle:o?n:m};u.connection=g,p&&x&&(t===gp.Strict?o&&d==="source"||!o&&d==="target":f!==r||m!==n)&&(u.endHandle={nodeId:f,handleId:m,type:d},u.isValid=s(g))}return u}function QUe({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[ps]){const{handleBounds:i}=s[ps];let o=[],l=[];i&&(o=NH(s,i,"source",`${t}-${r}-${n}`),l=NH(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function gD(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Uk(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function HUe(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Yte({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=Lte(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:p,connectionRadius:x,onConnectStart:g,panBy:b,getNodes:y,cancelConnection:_}=s();let S=0,B;const{x:I,y:D}=h0(e),E=d==null?void 0:d.elementFromPoint(I,D),C=gD(l,E),N=m==null?void 0:m.getBoundingClientRect();if(!N||!C)return;let P,O=h0(e,N),F=!1,M=null,Q=!1,J=null;const W=QUe({nodes:y(),nodeId:r,handleId:t,handleType:C}),Z=()=>{if(!p)return;const[G,ne]=Rte(O,N);b({x:G,y:ne}),S=requestAnimationFrame(Z)};i({connectionPosition:O,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:r,handleId:t,type:C},connectionEndHandle:null}),g==null||g(e,{nodeId:r,handleId:t,handleType:C});function H(G){const{transform:ne}=s();O=h0(G,N);const{handle:R,validHandleResult:q}=UUe(G,d,Bj(O,ne,!1,[1,1]),x,W,Y=>Xte(Y,f,r,t,a?"target":"source",o,d));if(B=R,F||(Z(),F=!0),J=q.handleDomNode,M=q.connection,Q=q.isValid,i({connectionPosition:B&&Q?$te({x:B.x,y:B.y},ne):O,connectionStatus:HUe(!!B,Q),connectionEndHandle:q.endHandle}),!B&&!Q&&!J)return Uk(P);M.source!==M.target&&J&&(Uk(P),P=J,J.classList.add("connecting","react-flow__handle-connecting"),J.classList.toggle("valid",Q),J.classList.toggle("react-flow__handle-valid",Q))}function z(G){var ne,R;(B||J)&&M&&Q&&(n==null||n(M)),(R=(ne=s()).onConnectEnd)==null||R.call(ne,G),l&&(u==null||u(G)),Uk(P),_(),cancelAnimationFrame(S),F=!1,Q=!1,M=null,J=null,d.removeEventListener("mousemove",H),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",H),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",H),d.addEventListener("mouseup",z),d.addEventListener("touchmove",H),d.addEventListener("touchend",z)}const BH=()=>!0,VUe=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),zUe=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},Jte=T.forwardRef(({type:e="source",position:t=gr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:f,...m},p)=>{var N,P;const x=i||null,g=e==="target",b=Ui(),y=OUe(),{connectOnClick:_,noPanClassName:S}=Za(VUe,Ho),{connecting:B,clickConnecting:I}=Za(zUe(y,x,e),Ho);y||(P=(N=b.getState()).onError)==null||P.call(N,"010",If.error010());const D=O=>{const{defaultEdgeOptions:F,onConnect:M,hasDefaultEdges:Q}=b.getState(),J={...F,...O};if(Q){const{edges:W,setEdges:Z}=b.getState();Z(LUe(J,W))}M==null||M(J),o==null||o(J)},E=O=>{if(!y)return;const F=Mte(O);a&&(F&&O.button===0||!F)&&Yte({event:O,handleId:x,nodeId:y,onConnect:D,isTarget:g,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||BH}),F?d==null||d(O):f==null||f(O)},C=O=>{const{onClickConnectStart:F,onClickConnectEnd:M,connectionClickStartHandle:Q,connectionMode:J,isValidConnection:W}=b.getState();if(!y||!Q&&!a)return;if(!Q){F==null||F(O,{nodeId:y,handleId:x,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:x}});return}const Z=Lte(O.target),H=r||W||BH,{connection:z,isValid:G}=Xte({nodeId:y,id:x,type:e},J,Q.nodeId,Q.handleId||null,Q.type,H,Z);G&&D(z),M==null||M(O),b.setState({connectionClickStartHandle:null})};return ft.createElement("div",{"data-handleid":x,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${x}-${e}`,className:ol(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,u,{source:!g,target:g,connectable:n,connectablestart:a,connectableend:s,connecting:I,connectionindicator:n&&(a&&!B||s&&B)}]),onMouseDown:E,onTouchStart:E,onClick:_?C:void 0,ref:p,...m},l)});Jte.displayName="Handle";var Qv=T.memo(Jte);const Zte=({data:e,isConnectable:t,targetPosition:r=gr.Top,sourcePosition:n=gr.Bottom})=>ft.createElement(ft.Fragment,null,ft.createElement(Qv,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,ft.createElement(Qv,{type:"source",position:n,isConnectable:t}));Zte.displayName="DefaultNode";var kj=T.memo(Zte);const ere=({data:e,isConnectable:t,sourcePosition:r=gr.Bottom})=>ft.createElement(ft.Fragment,null,e==null?void 0:e.label,ft.createElement(Qv,{type:"source",position:r,isConnectable:t}));ere.displayName="InputNode";var tre=T.memo(ere);const rre=({data:e,isConnectable:t,targetPosition:r=gr.Top})=>ft.createElement(ft.Fragment,null,ft.createElement(Qv,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);rre.displayName="OutputNode";var nre=T.memo(rre);const vD=()=>null;vD.displayName="GroupNode";const $Ue=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),jE=e=>e.id;function KUe(e,t){return Ho(e.selectedNodes.map(jE),t.selectedNodes.map(jE))&&Ho(e.selectedEdges.map(jE),t.selectedEdges.map(jE))}const are=T.memo(({onSelectionChange:e})=>{const t=Ui(),{selectedNodes:r,selectedEdges:n}=Za($Ue,KUe);return T.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});are.displayName="SelectionListener";const GUe=e=>!!e.onSelectionChange;function qUe({onSelectionChange:e}){const t=Za(GUe);return e||t?ft.createElement(are,{onSelectionChange:e}):null}const WUe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function _g(e,t){T.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function un(e,t,r){T.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const XUe=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:g,maxZoom:b,nodeExtent:y,onNodesChange:_,onEdgesChange:S,elementsSelectable:B,connectionMode:I,snapGrid:D,snapToGrid:E,translateExtent:C,connectOnClick:N,defaultEdgeOptions:P,fitView:O,fitViewOptions:F,onNodesDelete:M,onEdgesDelete:Q,onNodeDrag:J,onNodeDragStart:W,onNodeDragStop:Z,onSelectionDrag:H,onSelectionDragStart:z,onSelectionDragStop:G,noPanClassName:ne,nodeOrigin:R,rfId:q,autoPanOnConnect:Y,autoPanOnNodeDrag:te,onError:ie,connectionRadius:pe,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:ge,setEdges:Fe,setDefaultNodesAndEdges:re,setMinZoom:Ne,setMaxZoom:Oe,setTranslateExtent:Ce,setNodeExtent:fe,reset:Ie}=Za(WUe,Ho),He=Ui();return T.useEffect(()=>{const Xe=n==null?void 0:n.map(dt=>({...dt,...P}));return re(r,Xe),()=>{Ie()}},[]),un("defaultEdgeOptions",P,He.setState),un("connectionMode",I,He.setState),un("onConnect",a,He.setState),un("onConnectStart",s,He.setState),un("onConnectEnd",i,He.setState),un("onClickConnectStart",o,He.setState),un("onClickConnectEnd",l,He.setState),un("nodesDraggable",u,He.setState),un("nodesConnectable",d,He.setState),un("nodesFocusable",f,He.setState),un("edgesFocusable",m,He.setState),un("edgesUpdatable",p,He.setState),un("elementsSelectable",B,He.setState),un("elevateNodesOnSelect",x,He.setState),un("snapToGrid",E,He.setState),un("snapGrid",D,He.setState),un("onNodesChange",_,He.setState),un("onEdgesChange",S,He.setState),un("connectOnClick",N,He.setState),un("fitViewOnInit",O,He.setState),un("fitViewOnInitOptions",F,He.setState),un("onNodesDelete",M,He.setState),un("onEdgesDelete",Q,He.setState),un("onNodeDrag",J,He.setState),un("onNodeDragStart",W,He.setState),un("onNodeDragStop",Z,He.setState),un("onSelectionDrag",H,He.setState),un("onSelectionDragStart",z,He.setState),un("onSelectionDragStop",G,He.setState),un("noPanClassName",ne,He.setState),un("nodeOrigin",R,He.setState),un("rfId",q,He.setState),un("autoPanOnConnect",Y,He.setState),un("autoPanOnNodeDrag",te,He.setState),un("onError",ie,He.setState),un("connectionRadius",pe,He.setState),un("isValidConnection",oe,He.setState),un("nodeDragThreshold",ce,He.setState),_g(e,ge),_g(t,Fe),_g(g,Ne),_g(b,Oe),_g(C,Ce),_g(y,fe),null},kH={display:"none"},YUe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},sre="react-flow__node-desc",ire="react-flow__edge-desc",JUe="react-flow__aria-live",ZUe=e=>e.ariaLiveMessage;function eMe({rfId:e}){const t=Za(ZUe);return ft.createElement("div",{id:`${JUe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:YUe},t)}function tMe({rfId:e,disableKeyboardA11y:t}){return ft.createElement(ft.Fragment,null,ft.createElement("div",{id:`${sre}-${e}`,style:kH},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ft.createElement("div",{id:`${ire}-${e}`,style:kH},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ft.createElement(eMe,{rfId:e}))}var Ey=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=T.useState(!1),a=T.useRef(!1),s=T.useRef(new Set([])),[i,o]=T.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,m)=>f.concat(...m),[]);return[u,d]}return[[],[]]},[e]);return T.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&_j(p))return!1;const g=IH(p.code,o);s.current.add(p[g]),TH(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&_j(p))return!1;const g=IH(p.code,o);TH(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[g]),p.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,n]),r};function TH(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function IH(e,t){return t.includes(e)?"code":"key"}function ore(e,t,r,n){var o,l;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=bv(s,n);return ore(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[ps])==null?void 0:o.z)??0)>(r.z??0)?((l=s[ps])==null?void 0:l.z)??0:r.z??0},n)}function lre(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=ore(n,e,{...n.position,z:((s=n[ps])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[ps].z=l,r!=null&&r[n.id]&&(n[ps].isParent=!0)}})}function Mk(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const l=(du(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,ps,{enumerable:!1,value:{handleBounds:m||(p=u==null?void 0:u[ps])==null?void 0:p.handleBounds,z:l}}),a.set(o.id,d)}),lre(a,r,s),a}function cre(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),m=t.initial&&!u&&d;if(o&&l&&(m||!t.initial)){const x=r().filter(b=>{var _;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(_=t.nodes)!=null&&_.length?y&&t.nodes.some(S=>S.id===b.id):y}),g=x.every(b=>b.width&&b.height);if(x.length>0&&g){const b=pD(x,f),{x:y,y:_,zoom:S}=qte(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),B=f0.translate(y,_).scale(S);return typeof t.duration=="number"&&t.duration>0?o.transform(wm(l,t.duration),B):o.transform(l,B),!0}}return!1}function rMe(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[ps]:n[ps],selected:r.selected})}),new Map(t)}function nMe(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function FE({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();e!=null&&e.length&&(l&&n({nodeInternals:rMe(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:nMe(t,s)}),o==null||o(t))}const Sg=()=>{},aMe={zoomIn:Sg,zoomOut:Sg,zoomTo:Sg,getZoom:()=>1,setViewport:Sg,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Sg,fitBounds:Sg,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},sMe=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),iMe=()=>{const e=Ui(),{d3Zoom:t,d3Selection:r}=Za(sMe,Ho);return T.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(wm(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(wm(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(wm(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=e.getState().transform,u=f0.translate(a.x??i,a.y??o).scale(a.zoom??l);t.transform(wm(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>cre(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,m=l/2-s*d,p=f0.translate(f,m).scale(d);t.transform(wm(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:d,y:f,zoom:m}=qte(a,i,o,l,u,(s==null?void 0:s.padding)??.1),p=f0.translate(d,f).scale(m);t.transform(wm(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Bj(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=e.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return Bj(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=$te(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:aMe,[t,r])};function aN(){const e=iMe(),t=Ui(),r=T.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),n=T.useCallback(g=>t.getState().nodeInternals.get(g),[]),a=T.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(b=>({...b}))},[]),s=T.useCallback(g=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===g)},[]),i=T.useCallback(g=>{const{getNodes:b,setNodes:y,hasDefaultNodes:_,onNodesChange:S}=t.getState(),B=b(),I=typeof g=="function"?g(B):g;if(_)y(I);else if(S){const D=I.length===0?B.map(E=>({type:"remove",id:E.id})):I.map(E=>({item:E,type:"reset"}));S(D)}},[]),o=T.useCallback(g=>{const{edges:b=[],setEdges:y,hasDefaultEdges:_,onEdgesChange:S}=t.getState(),B=typeof g=="function"?g(b):g;if(_)y(B);else if(S){const I=B.length===0?b.map(D=>({type:"remove",id:D.id})):B.map(D=>({item:D,type:"reset"}));S(I)}},[]),l=T.useCallback(g=>{const b=Array.isArray(g)?g:[g],{getNodes:y,setNodes:_,hasDefaultNodes:S,onNodesChange:B}=t.getState();if(S){const D=[...y(),...b];_(D)}else if(B){const I=b.map(D=>({item:D,type:"add"}));B(I)}},[]),u=T.useCallback(g=>{const b=Array.isArray(g)?g:[g],{edges:y=[],setEdges:_,hasDefaultEdges:S,onEdgesChange:B}=t.getState();if(S)_([...y,...b]);else if(B){const I=b.map(D=>({item:D,type:"add"}));B(I)}},[]),d=T.useCallback(()=>{const{getNodes:g,edges:b=[],transform:y}=t.getState(),[_,S,B]=y;return{nodes:g().map(I=>({...I})),edges:b.map(I=>({...I})),viewport:{x:_,y:S,zoom:B}}},[]),f=T.useCallback(({nodes:g,edges:b})=>{const{nodeInternals:y,getNodes:_,edges:S,hasDefaultNodes:B,hasDefaultEdges:I,onNodesDelete:D,onEdgesDelete:E,onNodesChange:C,onEdgesChange:N}=t.getState(),P=(g||[]).map(J=>J.id),O=(b||[]).map(J=>J.id),F=_().reduce((J,W)=>{const Z=W.parentNode||W.parentId,H=!P.includes(W.id)&&Z&&J.find(G=>G.id===Z);return(typeof W.deletable=="boolean"?W.deletable:!0)&&(P.includes(W.id)||H)&&J.push(W),J},[]),M=S.filter(J=>typeof J.deletable=="boolean"?J.deletable:!0),Q=M.filter(J=>O.includes(J.id));if(F||Q){const J=Gte(F,M),W=[...Q,...J],Z=W.reduce((H,z)=>(H.includes(z.id)||H.push(z.id),H),[]);if((I||B)&&(I&&t.setState({edges:S.filter(H=>!Z.includes(H.id))}),B&&(F.forEach(H=>{y.delete(H.id)}),t.setState({nodeInternals:new Map(y)}))),Z.length>0&&(E==null||E(W),N&&N(Z.map(H=>({id:H,type:"remove"})))),F.length>0&&(D==null||D(F),C)){const H=F.map(z=>({id:z.id,type:"remove"}));C(H)}}},[]),m=T.useCallback(g=>{const b=SUe(g),y=b?null:t.getState().nodeInternals.get(g.id);return!b&&!y?[null,null,b]:[b?g:wH(y),y,b]},[]),p=T.useCallback((g,b=!0,y)=>{const[_,S,B]=m(g);return _?(y||t.getState().getNodes()).filter(I=>{if(!B&&(I.id===S.id||!I.positionAbsolute))return!1;const D=wH(I),E=Cj(D,_);return b&&E>0||E>=_.width*_.height}):[]},[]),x=T.useCallback((g,b,y=!0)=>{const[_]=m(g);if(!_)return!1;const S=Cj(_,b);return y&&S>0||S>=_.width*_.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:x}),[e,r,n,a,s,i,o,l,u,d,f,p,x])}const oMe={actInsideInputWithModifier:!1};var lMe=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=Ui(),{deleteElements:n}=aN(),a=Ey(e,oMe),s=Ey(t);T.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),T.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function cMe(e){const t=Ui();T.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=cD(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",If.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const xD={position:"absolute",width:"100%",height:"100%",top:0,left:0},uMe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,OE=e=>({x:e.x,y:e.y,zoom:e.k}),Ng=(e,t)=>e.target.closest(`.${t}`),jH=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),FH=e=>{const t=e.ctrlKey&&X_()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},dMe=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),AMe=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Dm.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:m,translateExtent:p,minZoom:x,maxZoom:g,zoomActivationKeyCode:b,preventScrolling:y=!0,children:_,noWheelClassName:S,noPanClassName:B})=>{const I=T.useRef(),D=Ui(),E=T.useRef(!1),C=T.useRef(!1),N=T.useRef(null),P=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:F,d3ZoomHandler:M,userSelectionActive:Q}=Za(dMe,Ho),J=Ey(b),W=T.useRef(0),Z=T.useRef(!1),H=T.useRef();return cMe(N),T.useEffect(()=>{if(N.current){const z=N.current.getBoundingClientRect(),G=vUe().scaleExtent([x,g]).translateExtent(p),ne=ou(N.current).call(G),R=f0.translate(m.x,m.y).scale(Mv(m.zoom,x,g)),q=[[0,0],[z.width,z.height]],Y=G.constrain()(R,q,p);G.transform(ne,Y),G.wheelDelta(FH),D.setState({d3Zoom:G,d3Selection:ne,d3ZoomHandler:ne.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:N.current.closest(".react-flow")})}},[]),T.useEffect(()=>{F&&O&&(i&&!J&&!Q?F.on("wheel.zoom",z=>{if(Ng(z,S))return!1;z.preventDefault(),z.stopImmediatePropagation();const G=F.property("__zoom").k||1;if(z.ctrlKey&&s){const oe=Wd(z),ce=FH(z),ge=G*Math.pow(2,ce);O.scaleTo(F,ge,oe,z);return}const ne=z.deltaMode===1?20:1;let R=l===Dm.Vertical?0:z.deltaX*ne,q=l===Dm.Horizontal?0:z.deltaY*ne;!X_()&&z.shiftKey&&l!==Dm.Vertical&&(R=z.deltaY*ne,q=0),O.translateBy(F,-(R/G)*o,-(q/G)*o,{internal:!0});const Y=OE(F.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ie,onViewportChangeEnd:pe}=D.getState();clearTimeout(H.current),Z.current||(Z.current=!0,t==null||t(z,Y),te==null||te(Y)),Z.current&&(e==null||e(z,Y),ie==null||ie(Y),H.current=setTimeout(()=>{r==null||r(z,Y),pe==null||pe(Y),Z.current=!1},150))},{passive:!1}):typeof M<"u"&&F.on("wheel.zoom",function(z,G){if(!y&&z.type==="wheel"&&!z.ctrlKey||Ng(z,S))return null;z.preventDefault(),M.call(this,z,G)},{passive:!1}))},[Q,i,l,F,O,M,J,s,y,S,t,e,r]),T.useEffect(()=>{O&&O.on("start",z=>{var R,q;if(!z.sourceEvent||z.sourceEvent.internal)return null;W.current=(R=z.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:G}=D.getState(),ne=OE(z.transform);E.current=!0,P.current=ne,((q=z.sourceEvent)==null?void 0:q.type)==="mousedown"&&D.setState({paneDragging:!0}),G==null||G(ne),t==null||t(z.sourceEvent,ne)})},[O,t]),T.useEffect(()=>{O&&(Q&&!E.current?O.on("zoom",null):Q||O.on("zoom",z=>{var ne;const{onViewportChange:G}=D.getState();if(D.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),C.current=!!(n&&jH(f,W.current??0)),(e||G)&&!((ne=z.sourceEvent)!=null&&ne.internal)){const R=OE(z.transform);G==null||G(R),e==null||e(z.sourceEvent,R)}}))},[Q,O,e,f,n]),T.useEffect(()=>{O&&O.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=D.getState();if(E.current=!1,D.setState({paneDragging:!1}),n&&jH(f,W.current??0)&&!C.current&&n(z.sourceEvent),C.current=!1,(r||G)&&uMe(P.current,z.transform)){const ne=OE(z.transform);P.current=ne,clearTimeout(I.current),I.current=setTimeout(()=>{G==null||G(ne),r==null||r(z.sourceEvent,ne)},i?150:0)}})},[O,i,f,r,n]),T.useEffect(()=>{O&&O.filter(z=>{const G=J||a,ne=s&&z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&z.button===1&&z.type==="mousedown"&&(Ng(z,"react-flow__node")||Ng(z,"react-flow__edge")))return!0;if(!f&&!G&&!i&&!u&&!s||Q||!u&&z.type==="dblclick"||Ng(z,S)&&z.type==="wheel"||Ng(z,B)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!J)||!s&&z.ctrlKey&&z.type==="wheel"||!G&&!i&&!ne&&z.type==="wheel"||!f&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(f)&&!f.includes(z.button)&&z.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&R})},[Q,O,a,s,i,u,f,d,J]),ft.createElement("div",{className:"react-flow__renderer",ref:N,style:xD},_)},fMe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function hMe(){const{userSelectionActive:e,userSelectionRect:t}=Za(fMe,Ho);return e&&t?ft.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function OH(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function ure(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&OH(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&OH(n,i);break}case"remove":return n}return n.push(i),n},r)}function dre(e,t){return ure(e,t)}function mMe(e,t){return ure(e,t)}const Hh=(e,t)=>({id:e,type:"select",selected:t});function Xg(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Hh(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Hh(n.id,!1))),r},[])}const Qk=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},pMe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Are=T.memo(({isSelecting:e,selectionMode:t=wy.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const m=T.useRef(null),p=Ui(),x=T.useRef(0),g=T.useRef(0),b=T.useRef(),{userSelectionActive:y,elementsSelectable:_,dragging:S}=Za(pMe,Ho),B=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,g.current=0},I=M=>{s==null||s(M),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},D=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}i==null||i(M)},E=o?M=>o(M):void 0,C=M=>{const{resetSelectedElements:Q,domNode:J}=p.getState();if(b.current=J==null?void 0:J.getBoundingClientRect(),!_||!e||M.button!==0||M.target!==m.current||!b.current)return;const{x:W,y:Z}=h0(M,b.current);Q(),p.setState({userSelectionRect:{width:0,height:0,startX:W,startY:Z,x:W,y:Z}}),n==null||n(M)},N=M=>{const{userSelectionRect:Q,nodeInternals:J,edges:W,transform:Z,onNodesChange:H,onEdgesChange:z,nodeOrigin:G,getNodes:ne}=p.getState();if(!e||!b.current||!Q)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=h0(M,b.current),q=Q.startX??0,Y=Q.startY??0,te={...Q,x:R.x<q?R.x:q,y:R.y<Y?R.y:Y,width:Math.abs(R.x-q),height:Math.abs(R.y-Y)},ie=ne(),pe=Kte(J,te,Z,t===wy.Partial,!0,G),oe=Gte(pe,W).map(ge=>ge.id),ce=pe.map(ge=>ge.id);if(x.current!==ce.length){x.current=ce.length;const ge=Xg(ie,ce);ge.length&&(H==null||H(ge))}if(g.current!==oe.length){g.current=oe.length;const ge=Xg(W,oe);ge.length&&(z==null||z(ge))}p.setState({userSelectionRect:te})},P=M=>{if(M.button!==0)return;const{userSelectionRect:Q}=p.getState();!y&&Q&&M.target===m.current&&(I==null||I(M)),p.setState({nodesSelectionActive:x.current>0}),B(),a==null||a(M)},O=M=>{y&&(p.setState({nodesSelectionActive:x.current>0}),a==null||a(M)),B()},F=_&&(e||y);return ft.createElement("div",{className:ol(["react-flow__pane",{dragging:S,selection:e}]),onClick:F?void 0:Qk(I,m),onContextMenu:Qk(D,m),onWheel:Qk(E,m),onMouseEnter:F?void 0:l,onMouseDown:F?C:void 0,onMouseMove:F?N:u,onMouseUp:F?P:void 0,onMouseLeave:F?O:d,ref:m,style:xD},f,ft.createElement(hMe,null))});Are.displayName="Pane";function fre(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:fre(n,t):!1}function DH(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function gMe(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!fre(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function vMe(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function hre(e,t,r,n,a=[0,0],s){const i=vMe(e,e.extent||n);let o=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const f=r.get(l),{x:m,y:p}=bv(f,a).positionAbsolute;o=f&&du(m)&&du(p)&&du(f.width)&&du(f.height)?[[m+e.width*a[0],p+e.height*a[1]],[m+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",If.error005()),o=i;else if(e.extent&&l&&e.extent!=="parent"){const f=r.get(l),{x:m,y:p}=bv(f,a).positionAbsolute;o=[[e.extent[0][0]+m,e.extent[0][1]+p],[e.extent[1][0]+m,e.extent[1][1]+p]]}let u={x:0,y:0};if(l){const f=r.get(l);u=bv(f,a).positionAbsolute}const d=o&&o!=="parent"?uD(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function Hk({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const PH=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...cD(l)}})};function I1(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function Tj({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",If.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function xMe(){const e=Ui();return T.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function Vk(e){return(t,r,n)=>e==null?void 0:e(t,n)}function mre({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Ui(),[l,u]=T.useState(!1),d=T.useRef([]),f=T.useRef({x:null,y:null}),m=T.useRef(0),p=T.useRef(null),x=T.useRef({x:0,y:0}),g=T.useRef(null),b=T.useRef(!1),y=T.useRef(!1),_=T.useRef(!1),S=xMe();return T.useEffect(()=>{if(e!=null&&e.current){const B=ou(e.current),I=({x:C,y:N})=>{const{nodeInternals:P,onNodeDrag:O,onSelectionDrag:F,updateNodePositions:M,nodeExtent:Q,snapGrid:J,snapToGrid:W,nodeOrigin:Z,onError:H}=o.getState();f.current={x:C,y:N};let z=!1,G={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&Q){const R=pD(d.current,Z);G=dD(R)}if(d.current=d.current.map(R=>{const q={x:C-R.distance.x,y:N-R.distance.y};W&&(q.x=J[0]*Math.round(q.x/J[0]),q.y=J[1]*Math.round(q.y/J[1]));const Y=[[Q[0][0],Q[0][1]],[Q[1][0],Q[1][1]]];d.current.length>1&&Q&&!R.extent&&(Y[0][0]=R.positionAbsolute.x-G.x+Q[0][0],Y[1][0]=R.positionAbsolute.x+(R.width??0)-G.x2+Q[1][0],Y[0][1]=R.positionAbsolute.y-G.y+Q[0][1],Y[1][1]=R.positionAbsolute.y+(R.height??0)-G.y2+Q[1][1]);const te=hre(R,q,P,Y,Z,H);return z=z||R.position.x!==te.position.x||R.position.y!==te.position.y,R.position=te.position,R.positionAbsolute=te.positionAbsolute,R}),!z)return;M(d.current,!0,!0),u(!0);const ne=a?O:Vk(F);if(ne&&g.current){const[R,q]=Hk({nodeId:a,dragItems:d.current,nodeInternals:P});ne(g.current,R,q)}},D=()=>{if(!p.current)return;const[C,N]=Rte(x.current,p.current);if(C!==0||N!==0){const{transform:P,panBy:O}=o.getState();f.current.x=(f.current.x??0)-C/P[2],f.current.y=(f.current.y??0)-N/P[2],O({x:C,y:N})&&I(f.current)}m.current=requestAnimationFrame(D)},E=C=>{var Z;const{nodeInternals:N,multiSelectionActive:P,nodesDraggable:O,unselectNodesAndEdges:F,onNodeDragStart:M,onSelectionDragStart:Q}=o.getState();y.current=!0;const J=a?M:Vk(Q);(!i||!s)&&!P&&a&&((Z=N.get(a))!=null&&Z.selected||F()),a&&s&&i&&Tj({id:a,store:o,nodeRef:e});const W=S(C);if(f.current=W,d.current=gMe(N,O,W,a),J&&d.current){const[H,z]=Hk({nodeId:a,dragItems:d.current,nodeInternals:N});J(C.sourceEvent,H,z)}};if(t)B.on(".drag",null);else{const C=ELe().on("start",N=>{const{domNode:P,nodeDragThreshold:O}=o.getState();O===0&&E(N),_.current=!1;const F=S(N);f.current=F,p.current=(P==null?void 0:P.getBoundingClientRect())||null,x.current=h0(N.sourceEvent,p.current)}).on("drag",N=>{var M,Q;const P=S(N),{autoPanOnNodeDrag:O,nodeDragThreshold:F}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(_.current=!0),!_.current){if(!b.current&&y.current&&O&&(b.current=!0,D()),!y.current){const J=P.xSnapped-(((M=f==null?void 0:f.current)==null?void 0:M.x)??0),W=P.ySnapped-(((Q=f==null?void 0:f.current)==null?void 0:Q.y)??0);Math.sqrt(J*J+W*W)>F&&E(N)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&d.current&&y.current&&(g.current=N.sourceEvent,x.current=h0(N.sourceEvent,p.current),I(P))}}).on("end",N=>{if(!(!y.current||_.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:P,nodeInternals:O,onNodeDragStop:F,onSelectionDragStop:M}=o.getState(),Q=a?F:Vk(M);if(P(d.current,!1,!1),Q){const[J,W]=Hk({nodeId:a,dragItems:d.current,nodeInternals:O});Q(N.sourceEvent,J,W)}}}).filter(N=>{const P=N.target;return!N.button&&(!r||!DH(P,`.${r}`,e))&&(!n||DH(P,n,e))});return B.call(C),()=>{B.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,S]),l}function pre(){const e=Ui();return T.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(_=>_.selected&&(_.draggable||d&&typeof _.draggable>"u")),m=o?l[0]:5,p=o?l[1]:5,x=r.isShiftPressed?4:1,g=r.x*m*x,b=r.y*p*x,y=f.map(_=>{if(_.positionAbsolute){const S={x:_.positionAbsolute.x+g,y:_.positionAbsolute.y+b};o&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:B,position:I}=hre(_,S,n,a,void 0,u);_.position=I,_.positionAbsolute=B}return _});s(y,!0,!1)},[])}const yv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var j1=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,onContextMenu:x,onDoubleClick:g,style:b,className:y,isDraggable:_,isSelectable:S,isConnectable:B,isFocusable:I,selectNodesOnDrag:D,sourcePosition:E,targetPosition:C,hidden:N,resizeObserver:P,dragHandle:O,zIndex:F,isParent:M,noDragClassName:Q,noPanClassName:J,initialized:W,disableKeyboardA11y:Z,ariaLabel:H,rfId:z,hasHandleBounds:G})=>{const ne=Ui(),R=T.useRef(null),q=T.useRef(null),Y=T.useRef(E),te=T.useRef(C),ie=T.useRef(n),pe=S||_||d||f||m||p,oe=pre(),ce=I1(r,ne.getState,f),ge=I1(r,ne.getState,m),Fe=I1(r,ne.getState,p),re=I1(r,ne.getState,x),Ne=I1(r,ne.getState,g),Oe=Ie=>{const{nodeDragThreshold:He}=ne.getState();if(S&&(!D||!_||He>0)&&Tj({id:r,store:ne,nodeRef:R}),d){const Xe=ne.getState().nodeInternals.get(r);Xe&&d(Ie,{...Xe})}},Ce=Ie=>{if(!_j(Ie)&&!Z)if(Ute.includes(Ie.key)&&S){const He=Ie.key==="Escape";Tj({id:r,store:ne,unselect:He,nodeRef:R})}else _&&u&&Object.prototype.hasOwnProperty.call(yv,Ie.key)&&(ne.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:yv[Ie.key].x,y:yv[Ie.key].y,isShiftPressed:Ie.shiftKey}))};T.useEffect(()=>()=>{q.current&&(P==null||P.unobserve(q.current),q.current=null)},[]),T.useEffect(()=>{if(R.current&&!N){const Ie=R.current;(!W||!G||q.current!==Ie)&&(q.current&&(P==null||P.unobserve(q.current)),P==null||P.observe(Ie),q.current=Ie)}},[N,W,G]),T.useEffect(()=>{const Ie=ie.current!==n,He=Y.current!==E,Xe=te.current!==C;R.current&&(Ie||He||Xe)&&(Ie&&(ie.current=n),He&&(Y.current=E),Xe&&(te.current=C),ne.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,n,E,C]);const fe=mre({nodeRef:R,disabled:N||!_,noDragClassName:Q,handleSelector:O,nodeId:r,isSelectable:S,selectNodesOnDrag:D});return N?null:ft.createElement("div",{className:ol(["react-flow__node",`react-flow__node-${n}`,{[J]:_},y,{selected:u,selectable:S,parent:M,dragging:fe}]),ref:R,style:{zIndex:F,transform:`translate(${o}px,${l}px)`,pointerEvents:pe?"all":"none",visibility:W?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:ge,onMouseLeave:Fe,onContextMenu:re,onClick:Oe,onDoubleClick:Ne,onKeyDown:I?Ce:void 0,tabIndex:I?0:void 0,role:I?"button":void 0,"aria-describedby":Z?void 0:`${sre}-${z}`,"aria-label":H},ft.createElement(FUe,{value:r},ft.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:B,sourcePosition:E,targetPosition:C,dragging:fe,dragHandle:O,zIndex:F})))};return t.displayName="NodeWrapper",T.memo(t)};const bMe=e=>{const t=e.getNodes().filter(r=>r.selected);return{...pD(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function yMe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Ui(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=Za(bMe,Ho),d=pre(),f=T.useRef(null);if(T.useEffect(()=>{var x;r||(x=f.current)==null||x.focus({preventScroll:!0})},[r]),mre({nodeRef:f}),u||!a||!s)return null;const m=e?x=>{const g=n.getState().getNodes().filter(b=>b.selected);e(x,g)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(yv,x.key)&&d({x:yv[x.key].x,y:yv[x.key].y,isShiftPressed:x.shiftKey})};return ft.createElement("div",{className:ol(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},ft.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var wMe=T.memo(yMe);const EMe=e=>e.nodesSelectionActive,gre=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:p,onSelectionStart:x,onSelectionEnd:g,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:S,zoomOnScroll:B,zoomOnPinch:I,panOnScroll:D,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:P,defaultViewport:O,translateExtent:F,minZoom:M,maxZoom:Q,preventScrolling:J,onSelectionContextMenu:W,noWheelClassName:Z,noPanClassName:H,disableKeyboardA11y:z})=>{const G=Za(EMe),ne=Ey(f),R=Ey(y),q=R||P,Y=R||D,te=ne||m&&q!==!0;return lMe({deleteKeyCode:o,multiSelectionKeyCode:b}),ft.createElement(AMe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:B,zoomOnPinch:I,panOnScroll:Y,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!ne&&q,defaultViewport:O,translateExtent:F,minZoom:M,maxZoom:Q,zoomActivationKeyCode:_,preventScrolling:J,noWheelClassName:Z,noPanClassName:H},ft.createElement(Are,{onSelectionStart:x,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:q,isSelecting:!!te,selectionMode:p},e,G&&ft.createElement(wMe,{onSelectionContextMenu:W,noPanClassName:H,disableKeyboardA11y:z})))};gre.displayName="FlowRenderer";var CMe=T.memo(gre);function _Me(e){return Za(T.useCallback(r=>e?Kte(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function SMe(e){const t={input:j1(e.input||tre),default:j1(e.default||kj),output:j1(e.output||nre),group:j1(e.group||vD)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=j1(e[s]||kj),a),r);return{...t,...n}}const NMe=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},BMe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),vre=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=Za(BMe,Ho),o=_Me(e.onlyRenderVisibleElements),l=T.useRef(),u=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const m=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(m)});return l.current=d,d},[]);return T.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),ft.createElement("div",{className:"react-flow__nodes",style:xD},o.map(d=>{var I,D,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",If.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),x=!!(d.selectable||a&&typeof d.selectable>"u"),g=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?uD(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,_=(y==null?void 0:y.x)??0,S=(y==null?void 0:y.y)??0,B=NMe({x:_,y:S,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ft.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||gr.Bottom,targetPosition:d.targetPosition||gr.Top,hidden:d.hidden,xPos:_,yPos:S,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:x,isConnectable:g,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((I=d[ps])==null?void 0:I.z)??0,isParent:!!((D=d[ps])!=null&&D.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[ps])!=null&&E.handleBounds)})}))};vre.displayName="NodeRenderer";var kMe=T.memo(vre);const TMe=(e,t,r)=>r===gr.Left?e-t:r===gr.Right?e+t:e,IMe=(e,t,r)=>r===gr.Top?e-t:r===gr.Bottom?e+t:e,RH="react-flow__edgeupdater",LH=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>ft.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:ol([RH,`${RH}-${o}`]),cx:TMe(t,n,e),cy:IMe(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),jMe=()=>!0;var Bg=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,style:b,source:y,target:_,sourceX:S,sourceY:B,targetX:I,targetY:D,sourcePosition:E,targetPosition:C,elementsSelectable:N,hidden:P,sourceHandleId:O,targetHandleId:F,onContextMenu:M,onMouseEnter:Q,onMouseMove:J,onMouseLeave:W,reconnectRadius:Z,onReconnect:H,onReconnectStart:z,onReconnectEnd:G,markerEnd:ne,markerStart:R,rfId:q,ariaLabel:Y,isFocusable:te,isReconnectable:ie,pathOptions:pe,interactionWidth:oe,disableKeyboardA11y:ce})=>{const ge=T.useRef(null),[Fe,re]=T.useState(!1),[Ne,Oe]=T.useState(!1),Ce=Ui(),fe=T.useMemo(()=>`url('#${Nj(R,q)}')`,[R,q]),Ie=T.useMemo(()=>`url('#${Nj(ne,q)}')`,[ne,q]);if(P)return null;const He=Te=>{var Vr;const{edges:ot,addSelectedEdges:vt,unselectNodesAndEdges:ur,multiSelectionActive:Gt}=Ce.getState(),Rt=ot.find(dr=>dr.id===r);Rt&&(N&&(Ce.setState({nodesSelectionActive:!1}),Rt.selected&&Gt?(ur({nodes:[],edges:[Rt]}),(Vr=ge.current)==null||Vr.blur()):vt([r])),i&&i(Te,Rt))},Xe=T1(r,Ce.getState,o),dt=T1(r,Ce.getState,M),Et=T1(r,Ce.getState,Q),Tt=T1(r,Ce.getState,J),Ct=T1(r,Ce.getState,W),Dt=(Te,ot)=>{if(Te.button!==0)return;const{edges:vt,isValidConnection:ur}=Ce.getState(),Gt=ot?_:y,Rt=(ot?F:O)||null,Vr=ot?"target":"source",dr=ur||jMe,yn=ot,Qr=vt.find(or=>or.id===r);Oe(!0),z==null||z(Te,Qr,Vr);const kn=or=>{Oe(!1),G==null||G(or,Qr,Vr)};Yte({event:Te,handleId:Rt,nodeId:Gt,onConnect:or=>H==null?void 0:H(Qr,or),isTarget:yn,getState:Ce.getState,setState:Ce.setState,isValidConnection:dr,edgeUpdaterType:Vr,onReconnectEnd:kn})},Jt=Te=>Dt(Te,!0),Pt=Te=>Dt(Te,!1),Mt=()=>re(!0),Wt=()=>re(!1),Pe=!N&&!i,Re=Te=>{var ot;if(!ce&&Ute.includes(Te.key)&&N){const{unselectNodesAndEdges:vt,addSelectedEdges:ur,edges:Gt}=Ce.getState();Te.key==="Escape"?((ot=ge.current)==null||ot.blur(),vt({edges:[Gt.find(Vr=>Vr.id===r)]})):ur([r])}};return ft.createElement("g",{className:ol(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Pe,updating:Fe}]),onClick:He,onDoubleClick:Xe,onContextMenu:dt,onMouseEnter:Et,onMouseMove:Tt,onMouseLeave:Ct,onKeyDown:te?Re:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Y===null?void 0:Y||`Edge from ${y} to ${_}`,"aria-describedby":te?`${ire}-${q}`:void 0,ref:ge},!Ne&&ft.createElement(e,{id:r,source:y,target:_,selected:l,animated:u,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,data:s,style:b,sourceX:S,sourceY:B,targetX:I,targetY:D,sourcePosition:E,targetPosition:C,sourceHandleId:O,targetHandleId:F,markerStart:fe,markerEnd:Ie,pathOptions:pe,interactionWidth:oe}),ie&&ft.createElement(ft.Fragment,null,(ie==="source"||ie===!0)&&ft.createElement(LH,{position:E,centerX:S,centerY:B,radius:Z,onMouseDown:Jt,onMouseEnter:Mt,onMouseOut:Wt,type:"source"}),(ie==="target"||ie===!0)&&ft.createElement(LH,{position:C,centerX:I,centerY:D,radius:Z,onMouseDown:Pt,onMouseEnter:Mt,onMouseOut:Wt,type:"target"})))};return t.displayName="EdgeWrapper",T.memo(t)};function FMe(e){const t={default:Bg(e.default||J_),straight:Bg(e.bezier||hD),step:Bg(e.step||fD),smoothstep:Bg(e.step||nN),simplebezier:Bg(e.simplebezier||AD)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Bg(e[s]||J_),a),r);return{...t,...n}}function UH(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case gr.Top:return{x:n+s/2,y:a};case gr.Right:return{x:n+s,y:a+i/2};case gr.Bottom:return{x:n+s/2,y:a+i};case gr.Left:return{x:n,y:a+i/2}}}function MH(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const OMe=(e,t,r,n,a,s)=>{const i=UH(r,e,t),o=UH(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function DMe({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=dD({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*m)>0}function QH(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[ps])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const PMe=[{level:0,isMaxLevel:!0,edges:[]}];function RMe(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const l=du(o.zIndex);let u=l?o.zIndex:0;if(r){const m=t.get(o.target),p=t.get(o.source),x=o.selected||(m==null?void 0:m.selected)||(p==null?void 0:p.selected),g=Math.max(((d=p==null?void 0:p[ps])==null?void 0:d.z)||0,((f=m==null?void 0:m[ps])==null?void 0:f.z)||0,1e3);u=(l?o.zIndex:0)+(x?g:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?PMe:s}function LMe(e,t,r){const n=Za(T.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&DMe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return RMe(n,t,r)}const UMe=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),MMe=({color:e="none",strokeWidth:t=1})=>ft.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),HH={[Y_.Arrow]:UMe,[Y_.ArrowClosed]:MMe};function QMe(e){const t=Ui();return T.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(HH,e)?HH[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",If.error009(e)),null)},[e])}const HMe=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=QMe(t);return l?ft.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},ft.createElement(l,{color:r,strokeWidth:i})):null},VMe=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=Nj(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},xre=({defaultColor:e,rfId:t})=>{const r=Za(T.useCallback(VMe({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return ft.createElement("defs",null,r.map(n=>ft.createElement(HMe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};xre.displayName="MarkerDefinitions";var zMe=T.memo(xre);const $Me=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),bre=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:g,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:_,edgesUpdatable:S,elementsSelectable:B,width:I,height:D,connectionMode:E,nodeInternals:C,onError:N}=Za($Me,Ho),P=LMe(t,C,r);return I?ft.createElement(ft.Fragment,null,P.map(({level:O,edges:F,isMaxLevel:M})=>ft.createElement("svg",{key:O,style:{zIndex:O},width:I,height:D,className:"react-flow__edges react-flow__container"},M&&ft.createElement(zMe,{defaultColor:e,rfId:n}),ft.createElement("g",null,F.map(Q=>{const[J,W,Z]=QH(C.get(Q.source)),[H,z,G]=QH(C.get(Q.target));if(!Z||!G)return null;let ne=Q.type||"default";a[ne]||(N==null||N("011",If.error011(ne)),ne="default");const R=a[ne]||a.default,q=E===gp.Strict?z.target:(z.target??[]).concat(z.source??[]),Y=MH(W.source,Q.sourceHandle),te=MH(q,Q.targetHandle),ie=(Y==null?void 0:Y.position)||gr.Bottom,pe=(te==null?void 0:te.position)||gr.Top,oe=!!(Q.focusable||_&&typeof Q.focusable>"u"),ce=Q.reconnectable||Q.updatable,ge=typeof m<"u"&&(ce||S&&typeof ce>"u");if(!Y||!te)return N==null||N("008",If.error008(Y,Q)),null;const{sourceX:Fe,sourceY:re,targetX:Ne,targetY:Oe}=OMe(J,Y,ie,H,te,pe);return ft.createElement(R,{key:Q.id,id:Q.id,className:ol([Q.className,s]),type:ne,data:Q.data,selected:!!Q.selected,animated:!!Q.animated,hidden:!!Q.hidden,label:Q.label,labelStyle:Q.labelStyle,labelShowBg:Q.labelShowBg,labelBgStyle:Q.labelBgStyle,labelBgPadding:Q.labelBgPadding,labelBgBorderRadius:Q.labelBgBorderRadius,style:Q.style,source:Q.source,target:Q.target,sourceHandleId:Q.sourceHandle,targetHandleId:Q.targetHandle,markerEnd:Q.markerEnd,markerStart:Q.markerStart,sourceX:Fe,sourceY:re,targetX:Ne,targetY:Oe,sourcePosition:ie,targetPosition:pe,elementsSelectable:B,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:g,rfId:n,ariaLabel:Q.ariaLabel,isFocusable:oe,isReconnectable:ge,pathOptions:"pathOptions"in Q?Q.pathOptions:void 0,interactionWidth:Q.interactionWidth,disableKeyboardA11y:y})})))),b):null};bre.displayName="EdgeRenderer";var KMe=T.memo(bre);const GMe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qMe({children:e}){const t=Za(GMe);return ft.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function WMe(e){const t=aN(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const XMe={[gr.Left]:gr.Right,[gr.Right]:gr.Left,[gr.Top]:gr.Bottom,[gr.Bottom]:gr.Top},yre=({nodeId:e,handleType:t,style:r,type:n=Wh.Bezier,CustomComponent:a,connectionStatus:s})=>{var D,E,C;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Za(T.useCallback(N=>({fromNode:N.nodeInternals.get(e),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[e]),Ho),f=(D=i==null?void 0:i[ps])==null?void 0:D.handleBounds;let m=f==null?void 0:f[t];if(d===gp.Loose&&(m=m||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!m)return null;const p=o?m.find(N=>N.id===o):m[0],x=p?p.x+p.width/2:(i.width??0)/2,g=p?p.y+p.height/2:i.height??0,b=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+x,y=(((C=i.positionAbsolute)==null?void 0:C.y)??0)+g,_=p==null?void 0:p.position,S=_?XMe[_]:null;if(!_||!S)return null;if(a)return ft.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:l,toY:u,fromPosition:_,toPosition:S,connectionStatus:s});let B="";const I={sourceX:b,sourceY:y,sourcePosition:_,targetX:l,targetY:u,targetPosition:S};return n===Wh.Bezier?[B]=zte(I):n===Wh.Step?[B]=Sj({...I,borderRadius:0}):n===Wh.SmoothStep?[B]=Sj(I):n===Wh.SimpleBezier?[B]=Vte(I):B=`M${b},${y} ${l},${u}`,ft.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:r})};yre.displayName="ConnectionLine";const YMe=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function JMe({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Za(YMe,Ho);return!(a&&s&&o&&i)?null:ft.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ft.createElement("g",{className:ol(["react-flow__connection",u])},ft.createElement(yre,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function VH(e,t){return T.useRef(null),Ui(),T.useMemo(()=>t(e),[e])}const wre=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:g,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:_,connectionLineComponent:S,connectionLineContainerStyle:B,selectionKeyCode:I,selectionOnDrag:D,selectionMode:E,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:P,deleteKeyCode:O,onlyRenderVisibleElements:F,elementsSelectable:M,selectNodesOnDrag:Q,defaultViewport:J,translateExtent:W,minZoom:Z,maxZoom:H,preventScrolling:z,defaultMarkerColor:G,zoomOnScroll:ne,zoomOnPinch:R,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:te,zoomOnDoubleClick:ie,panOnDrag:pe,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:Fe,onPaneScroll:re,onPaneContextMenu:Ne,onEdgeContextMenu:Oe,onEdgeMouseEnter:Ce,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:dt,reconnectRadius:Et,noDragClassName:Tt,noWheelClassName:Ct,noPanClassName:Dt,elevateEdgesOnSelect:Jt,disableKeyboardA11y:Pt,nodeOrigin:Mt,nodeExtent:Wt,rfId:Pe})=>{const Re=VH(e,SMe),Te=VH(t,FMe);return WMe(s),ft.createElement(CMe,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:ge,onPaneMouseLeave:Fe,onPaneContextMenu:Ne,onPaneScroll:re,deleteKeyCode:O,selectionKeyCode:I,selectionOnDrag:D,selectionMode:E,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:P,elementsSelectable:M,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ne,zoomOnPinch:R,zoomOnDoubleClick:ie,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:te,panOnDrag:pe,defaultViewport:J,translateExtent:W,minZoom:Z,maxZoom:H,onSelectionContextMenu:x,preventScrolling:z,noDragClassName:Tt,noWheelClassName:Ct,noPanClassName:Dt,disableKeyboardA11y:Pt},ft.createElement(qMe,null,ft.createElement(KMe,{edgeTypes:Te,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:Oe,onEdgeMouseEnter:Ce,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:dt,reconnectRadius:Et,defaultMarkerColor:G,noPanClassName:Dt,elevateEdgesOnSelect:!!Jt,disableKeyboardA11y:Pt,rfId:Pe},ft.createElement(JMe,{style:_,type:y,component:S,containerStyle:B})),ft.createElement("div",{className:"react-flow__edgelabel-renderer"}),ft.createElement(kMe,{nodeTypes:Re,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:p,selectNodesOnDrag:Q,onlyRenderVisibleElements:F,noPanClassName:Dt,noDragClassName:Tt,disableKeyboardA11y:Pt,nodeOrigin:Mt,nodeExtent:Wt,rfId:Pe})))};wre.displayName="GraphView";var ZMe=T.memo(wre);const Ij=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Dh={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ij,nodeExtent:Ij,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:gp.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:NUe,isValidConnection:void 0},e7e=()=>DPe((e,t)=>({...Dh,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:Mk(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?Mk(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((g,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[ps]:{...y[ps],handleBounds:void 0}});else if(y){const _=cD(b.nodeElement);!!(_.width&&_.height&&(y.width!==_.width||y.height!==_.height||b.forceUpdate))&&(a.set(y.id,{...y,[ps]:{...y[ps],handleBounds:{source:PH(".source",b.nodeElement,m,u),target:PH(".target",b.nodeElement,m,u)}},..._}),g.push({id:y.id,type:"dimensions",dimensions:_}))}return g},[]);lre(a,u);const x=i||s&&!i&&cre(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=t();if(r!=null&&r.length){if(s){const u=dre(r,o()),d=Mk(u,a,i,l);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>Hh(l,!0)):(i=Xg(s(),r),o=Xg(a,[])),FE({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(l=>Hh(l,!0)):(i=Xg(a,r),o=Xg(s(),[])),FE({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,Hh(d.id,!1))),u=o.map(d=>Hh(d.id,!1));FE({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>Hh(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Hh(o.id,!1));FE({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=uD(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=f0.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Dh.connectionNodeId,connectionHandleId:Dh.connectionHandleId,connectionHandleType:Dh.connectionHandleType,connectionStatus:Dh.connectionStatus,connectionStartHandle:Dh.connectionStartHandle,connectionEndHandle:Dh.connectionEndHandle}),reset:()=>e({...Dh})}),Object.is),bD=({children:e})=>{const t=T.useRef(null);return t.current||(t.current=e7e()),ft.createElement(xUe,{value:t.current},e)};bD.displayName="ReactFlowProvider";const Ere=({children:e})=>T.useContext(rN)?ft.createElement(ft.Fragment,null,e):ft.createElement(bD,null,e);Ere.displayName="ReactFlowWrapper";const t7e={input:tre,default:kj,output:nre,group:vD},r7e={default:J_,straight:hD,step:fD,smoothstep:nN,simplebezier:AD},n7e=[0,0],a7e=[15,15],s7e={x:0,y:0,zoom:1},i7e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Cre=T.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=t7e,edgeTypes:i=r7e,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onConnect:p,onConnectStart:x,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:B,onNodeContextMenu:I,onNodeDoubleClick:D,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:N,onNodesDelete:P,onEdgesDelete:O,onSelectionChange:F,onSelectionDragStart:M,onSelectionDrag:Q,onSelectionDragStop:J,onSelectionContextMenu:W,onSelectionStart:Z,onSelectionEnd:H,connectionMode:z=gp.Strict,connectionLineType:G=Wh.Bezier,connectionLineStyle:ne,connectionLineComponent:R,connectionLineContainerStyle:q,deleteKeyCode:Y="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ie=!1,selectionMode:pe=wy.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=X_()?"Meta":"Control",zoomActivationKeyCode:ge=X_()?"Meta":"Control",snapToGrid:Fe=!1,snapGrid:re=a7e,onlyRenderVisibleElements:Ne=!1,selectNodesOnDrag:Oe=!0,nodesDraggable:Ce,nodesConnectable:fe,nodesFocusable:Ie,nodeOrigin:He=n7e,edgesFocusable:Xe,edgesUpdatable:dt,elementsSelectable:Et,defaultViewport:Tt=s7e,minZoom:Ct=.5,maxZoom:Dt=2,translateExtent:Jt=Ij,preventScrolling:Pt=!0,nodeExtent:Mt,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Pe=!0,zoomOnPinch:Re=!0,panOnScroll:Te=!1,panOnScrollSpeed:ot=.5,panOnScrollMode:vt=Dm.Free,zoomOnDoubleClick:ur=!0,panOnDrag:Gt=!0,onPaneClick:Rt,onPaneMouseEnter:Vr,onPaneMouseMove:dr,onPaneMouseLeave:yn,onPaneScroll:Qr,onPaneContextMenu:kn,children:ea,onEdgeContextMenu:or,onEdgeDoubleClick:Zt,onEdgeMouseEnter:Kr,onEdgeMouseMove:Ms,onEdgeMouseLeave:Aa,onEdgeUpdate:Va,onEdgeUpdateStart:si,onEdgeUpdateEnd:qt,onReconnect:wn,onReconnectStart:fn,onReconnectEnd:Vn,reconnectRadius:ta=10,edgeUpdaterRadius:fa=10,onNodesChange:Ae,onEdgesChange:Be,noDragClassName:we="nodrag",noWheelClassName:Ee="nowheel",noPanClassName:_e="nopan",fitView:ke=!1,fitViewOptions:We,connectOnClick:st=!0,attributionPosition:$e,proOptions:Je,defaultEdgeOptions:tt,elevateNodesOnSelect:wt=!0,elevateEdgesOnSelect:Ot=!1,disableKeyboardA11y:Vt=!1,autoPanOnConnect:jt=!0,autoPanOnNodeDrag:Lt=!0,connectionRadius:wr=20,isValidConnection:Wr,onError:Xr,style:tn,id:rs,nodeDragThreshold:oo,...ns},Qs)=>{const Es=rs||"1";return ft.createElement("div",{...ns,style:{...tn,...i7e},ref:Qs,className:ol(["react-flow",a]),"data-testid":"rf__wrapper",id:rs},ft.createElement(Ere,null,ft.createElement(ZMe,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:B,onNodeContextMenu:I,onNodeDoubleClick:D,nodeTypes:s,edgeTypes:i,connectionLineType:G,connectionLineStyle:ne,connectionLineComponent:R,connectionLineContainerStyle:q,selectionKeyCode:te,selectionOnDrag:ie,selectionMode:pe,deleteKeyCode:Y,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:ge,onlyRenderVisibleElements:Ne,selectNodesOnDrag:Oe,defaultViewport:Tt,translateExtent:Jt,minZoom:Ct,maxZoom:Dt,preventScrolling:Pt,zoomOnScroll:Pe,zoomOnPinch:Re,zoomOnDoubleClick:ur,panOnScroll:Te,panOnScrollSpeed:ot,panOnScrollMode:vt,panOnDrag:Gt,onPaneClick:Rt,onPaneMouseEnter:Vr,onPaneMouseMove:dr,onPaneMouseLeave:yn,onPaneScroll:Qr,onPaneContextMenu:kn,onSelectionContextMenu:W,onSelectionStart:Z,onSelectionEnd:H,onEdgeContextMenu:or,onEdgeDoubleClick:Zt,onEdgeMouseEnter:Kr,onEdgeMouseMove:Ms,onEdgeMouseLeave:Aa,onReconnect:wn??Va,onReconnectStart:fn??si,onReconnectEnd:Vn??qt,reconnectRadius:ta??fa,defaultMarkerColor:Wt,noDragClassName:we,noWheelClassName:Ee,noPanClassName:_e,elevateEdgesOnSelect:Ot,rfId:Es,disableKeyboardA11y:Vt,nodeOrigin:He,nodeExtent:Mt}),ft.createElement(XUe,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:x,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Ce,nodesConnectable:fe,nodesFocusable:Ie,edgesFocusable:Xe,edgesUpdatable:dt,elementsSelectable:Et,elevateNodesOnSelect:wt,minZoom:Ct,maxZoom:Dt,nodeExtent:Mt,onNodesChange:Ae,onEdgesChange:Be,snapToGrid:Fe,snapGrid:re,connectionMode:z,translateExtent:Jt,connectOnClick:st,defaultEdgeOptions:tt,fitView:ke,fitViewOptions:We,onNodesDelete:P,onEdgesDelete:O,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:N,onSelectionDrag:Q,onSelectionDragStart:M,onSelectionDragStop:J,noPanClassName:_e,nodeOrigin:He,rfId:Es,autoPanOnConnect:jt,autoPanOnNodeDrag:Lt,onError:Xr,connectionRadius:wr,isValidConnection:Wr,nodeDragThreshold:oo}),ft.createElement(qUe,{onSelectionChange:F}),ea,ft.createElement(yUe,{proOptions:Je,position:$e}),ft.createElement(tMe,{rfId:Es,disableKeyboardA11y:Vt})))});Cre.displayName="ReactFlow";function _re(e){return t=>{const[r,n]=T.useState(t),a=T.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const o7e=_re(dre),l7e=_re(mMe);function c7e(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ft.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function u7e(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ft.createElement("path",{d:"M0 0h32v4.2H0z"}))}function d7e(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ft.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function A7e(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function f7e(){return ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ft.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const cb=({children:e,className:t,...r})=>ft.createElement("button",{type:"button",className:ol(["react-flow__controls-button",t]),...r},e);cb.displayName="ControlButton";const h7e=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Sre=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:f="bottom-left"})=>{const m=Ui(),[p,x]=T.useState(!1),{isInteractive:g,minZoomReached:b,maxZoomReached:y}=Za(h7e,Ho),{zoomIn:_,zoomOut:S,fitView:B}=aN();if(T.useEffect(()=>{x(!0)},[]),!p)return null;const I=()=>{_(),s==null||s()},D=()=>{S(),i==null||i()},E=()=>{B(a),o==null||o()},C=()=>{m.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)};return ft.createElement(Pte,{className:ol(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ft.createElement(ft.Fragment,null,ft.createElement(cb,{onClick:I,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},ft.createElement(c7e,null)),ft.createElement(cb,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},ft.createElement(u7e,null))),r&&ft.createElement(cb,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},ft.createElement(d7e,null)),n&&ft.createElement(cb,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},g?ft.createElement(f7e,null):ft.createElement(A7e,null)),d)};Sre.displayName="Controls";var m7e=T.memo(Sre),nd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(nd||(nd={}));function p7e({color:e,dimensions:t,lineWidth:r}){return ft.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function g7e({color:e,radius:t}){return ft.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const v7e={[nd.Dots]:"#91919a",[nd.Lines]:"#eee",[nd.Cross]:"#e2e2e2"},x7e={[nd.Dots]:1,[nd.Lines]:1,[nd.Cross]:6},b7e=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Nre({id:e,variant:t=nd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=T.useRef(null),{transform:d,patternId:f}=Za(b7e,Ho),m=i||v7e[t],p=n||x7e[t],x=t===nd.Dots,g=t===nd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],_=p*d[2],S=g?[_,_]:y,B=x?[_/s,_/s]:[S[0]/s,S[1]/s];return ft.createElement("svg",{className:ol(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ft.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},x?ft.createElement(g7e,{color:m,radius:_/s}):ft.createElement(p7e,{dimensions:S,color:m,lineWidth:a})),ft.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Nre.displayName="Background";var y7e=T.memo(Nre);function w7e(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const E7e=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function m0(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let kg=null;function Bre(e={}){return kg||(e.includeStyleProperties?(kg=e.includeStyleProperties,kg):(kg=m0(window.getComputedStyle(document.documentElement)),kg))}function Z_(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function C7e(e){const t=Z_(e,"border-left-width"),r=Z_(e,"border-right-width");return e.clientWidth+t+r}function _7e(e){const t=Z_(e,"border-top-width"),r=Z_(e,"border-bottom-width");return e.clientHeight+t+r}function kre(e,t={}){const r=t.width||C7e(e),n=t.height||_7e(e);return{width:r,height:n}}function S7e(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const tc=16384;function N7e(e){(e.width>tc||e.height>tc)&&(e.width>tc&&e.height>tc?e.width>e.height?(e.height*=tc/e.width,e.width=tc):(e.width*=tc/e.height,e.height=tc):e.width>tc?(e.height*=tc/e.width,e.width=tc):(e.width*=tc/e.height,e.height=tc))}function eS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function B7e(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function k7e(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),B7e(a)}const Fl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Fl(r,t)};function T7e(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function I7e(e,t){return Bre(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function j7e(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?T7e(r):I7e(r,n);return document.createTextNode(`${a}{${s}}`)}function zH(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=E7e();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(j7e(i,r,a,n)),t.appendChild(o)}function F7e(e,t,r){zH(e,t,":before",r),zH(e,t,":after",r)}const $H="application/font-woff",KH="image/jpeg",O7e={woff:$H,woff2:$H,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:KH,jpeg:KH,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function D7e(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function yD(e){const t=D7e(e).toLowerCase();return O7e[t]||""}function P7e(e){return e.split(/,/)[1]}function jj(e){return e.search(/^(data:)/)!==-1}function R7e(e,t){return`data:${t};base64,${e}`}async function Tre(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const zk={};function L7e(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function wD(e,t,r){const n=L7e(e,t,r.includeQueryParams);if(zk[n]!=null)return zk[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Tre(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),P7e(o)));a=R7e(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return zk[n]=a,a}async function U7e(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):eS(t)}async function M7e(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return eS(o)}const r=e.poster,n=yD(r),a=await wD(r,n,t);return eS(a)}async function Q7e(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await sN(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function H7e(e,t){return Fl(e,HTMLCanvasElement)?U7e(e):Fl(e,HTMLVideoElement)?M7e(e,t):Fl(e,HTMLIFrameElement)?Q7e(e,t):e.cloneNode(Ire(e))}const V7e=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Ire=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function z7e(e,t,r){var n,a;if(Ire(t))return t;let s=[];return V7e(e)&&e.assignedNodes?s=m0(e.assignedNodes()):Fl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=m0(e.contentDocument.body.childNodes):s=m0(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Fl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>sN(o,r)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function $7e(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Bre(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Fl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function K7e(e,t){Fl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Fl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function G7e(e,t){if(Fl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function q7e(e,t,r){return Fl(t,Element)&&($7e(e,t,r),F7e(e,t,r),K7e(e,t),G7e(e,t)),t}async function W7e(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=e.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await sN(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);e.appendChild(i)}return e}async function sN(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>H7e(n,t)).then(n=>z7e(e,n,t)).then(n=>q7e(e,n,t)).then(n=>W7e(n,t))}const jre=/url\((['"]?)([^'"]+?)\1\)/g,X7e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Y7e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function J7e(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Z7e(e){const t=[];return e.replace(jre,(r,n,a)=>(t.push(a),r)),t.filter(r=>!jj(r))}async function e9e(e,t,r,n,a){try{const s=r?w7e(t,r):t,i=yD(t);let o;return a||(o=await wD(s,i,n)),e.replace(J7e(t),`$1${o}$3`)}catch{}return e}function t9e(e,{preferredFontFormat:t}){return t?e.replace(Y7e,r=>{for(;;){const[n,,a]=X7e.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Fre(e){return e.search(jre)!==-1}async function Ore(e,t,r){if(!Fre(e))return e;const n=t9e(e,r);return Z7e(n).reduce((s,i)=>s.then(o=>e9e(o,i,t,r)),Promise.resolve(n))}async function Tg(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Ore(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function r9e(e,t){await Tg("background",e,t)||await Tg("background-image",e,t),await Tg("mask",e,t)||await Tg("-webkit-mask",e,t)||await Tg("mask-image",e,t)||await Tg("-webkit-mask-image",e,t)}async function n9e(e,t){const r=Fl(e,HTMLImageElement);if(!(r&&!jj(e.src))&&!(Fl(e,SVGImageElement)&&!jj(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await wD(n,yD(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...l)=>{try{s(t.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function a9e(e,t){const n=m0(e.childNodes).map(a=>Dre(a,t));await Promise.all(n).then(()=>e)}async function Dre(e,t){Fl(e,Element)&&(await r9e(e,t),await n9e(e,t),await a9e(e,t))}function s9e(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const GH={};async function qH(e){let t=GH[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},GH[e]=t,t}async function WH(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Tre(o,t.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function XH(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(l[0])}return t}async function i9e(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{m0(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=qH(l).then(d=>WH(d,t)).then(d=>XH(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:f,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(qH(a.href).then(o=>WH(o,t)).then(o=>XH(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{m0(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function o9e(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Fre(t.style.getPropertyValue("src")))}async function l9e(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=m0(e.ownerDocument.styleSheets),n=await i9e(r,t);return o9e(n)}function Pre(e){return e.trim().replace(/["']/g,"")}function c9e(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Pre(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function u9e(e,t){const r=await l9e(e,t),n=c9e(e);return(await Promise.all(r.filter(s=>n.has(Pre(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Ore(s.cssText,i,t)}))).join(`
`)}async function d9e(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await u9e(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function A9e(e,t={}){const{width:r,height:n}=kre(e,t),a=await sN(e,t,!0);return await d9e(a,t),await Dre(a,t),s9e(a,t),await k7e(a,r,n)}async function f9e(e,t={}){const{width:r,height:n}=kre(e,t),a=await A9e(e,t),s=await eS(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=t.pixelRatio||S7e(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*l,i.height=d*l,t.skipAutoScale||N7e(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function iN(e,t={}){return(await f9e(e,t)).toDataURL()}const Rre="recursos_crucigramas",oN="recursos_lineas_de_tiempo",lN="recursos_mapas_mentales",Lre="recursos_sopas_de_letras",cN=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},h9e=e=>{const t=tr(Ft(Nt,Rre),qr("fechaCreacion","desc"));return yr(t,r=>{const n=r.docs.map(a=>cN(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},m9e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:hr.fromDate(new Date)};return(await da(Ft(Nt,Rre),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},p9e=e=>{const t=tr(Ft(Nt,oN),qr("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>cN(a));e(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},g9e=async(e,t)=>{try{const{id:r,...n}=e,a=br(Nt,oN,r);await io(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},v9e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await da(Ft(Nt,oN),r)).id}catch(r){throw console.error("Error al crear la lnea de tiempo:",r),new Error("No se pudo crear la lnea de tiempo.")}},x9e=async e=>{try{const t=br(Nt,oN,e);await ni(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},b9e=e=>{const t=tr(Ft(Nt,lN),qr("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>cN(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},y9e=async(e,t)=>{try{const{id:r,...n}=e,a=br(Nt,lN,r);await io(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},w9e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await da(Ft(Nt,lN),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},E9e=async e=>{try{const t=br(Nt,lN,e);await ni(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},C9e=e=>{const t=tr(Ft(Nt,Lre),qr("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>cN(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},_9e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:hr.fromDate(new Date)};return(await da(Ft(Nt,Lre),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},S9e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),N9e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),B9e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),k9e=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(Qv,{type:"target",position:gr.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:e.icon||""}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),c.jsx(Qv,{type:"source",position:gr.Right,className:"w-2 h-2 !bg-slate-400"})]})},Fj=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+Fj(n,t),0),Oj=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=Fj(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(m=>{const p=Fj(m,100),x=f+p/2-100/2;n.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,l+1,x),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((l,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${e.id}-${l.id}`,source:e.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((f,m)=>{const p=d+(m-(l.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${l.id}-${f.id}`,source:l.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Ure=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&c.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(o=>c.jsx(Ure,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},T9e={custom:k9e},I9e=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=T.useState(e.treeData),[s,i]=T.useState("tree"),[o,l]=T.useState(!1),[u,d,f]=o7e([]),[m,p,x]=l7e([]),{fitView:g}=aN();T.useEffect(()=>{const{nodes:I,edges:D}=Oj(n,s);d(I),p(D),setTimeout(()=>g({duration:300}),50)},[n,s,d,p,g]);const b=(I,D)=>{const E=JSON.parse(JSON.stringify(n)),C=N=>N.id===I?(N.label=D,!0):(N.children||[]).some(C);C(E),a(E)},y=I=>{const D=JSON.parse(JSON.stringify(n)),E=C=>C.id===I?(C.children||(C.children=[]),C.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(C.children||[]).some(E);E(D),a(D)},_=I=>{const D=JSON.parse(JSON.stringify(n)),E=C=>{const N=(C.children||[]).findIndex(P=>P.id===I);return N!==-1?(C.children.splice(N,1),!0):(C.children||[]).some(E)};E(D),a(D)},S=()=>{l(!0);const{nodes:I,edges:D}=Oj(n,s);r({...e,treeData:n,nodes:I,edges:D}),setTimeout(()=>l(!1),1e3)},B=async I=>{const D=document.querySelector(".react-flow");D&&iN(D,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const C=document.createElement("a");C.download=`${e.tema}.png`,C.href=E,C.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),c.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(Cre,{nodes:u,edges:m,onNodesChange:f,onEdgesChange:x,fitView:!0,nodeTypes:T9e,children:[c.jsx(m7e,{}),c.jsx(y7e,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(N9e,{})," Vista en rbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(B9e,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(Ure,{node:n,onUpdate:b,onAddChild:y,onDelete:_})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>B(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},j9e=({onBack:e,currentUser:t})=>{const[r,n]=T.useState("list"),[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(!0),[m,p]=T.useState(""),[x,g]=T.useState(""),[b,y]=T.useState("");T.useEffect(()=>{f(!0);const E=b9e(C=>{s(C),f(!1)});return()=>E()},[]);const _=async E=>{if(E.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",N=`
            Basado en el tema central "${m}", y considerando el contenido adicional "${b}", genera una estructura jerrquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raz con las siguientes claves:
            - "label": El tema central ("${m}").
            - "icon": Un emoji que represente el tema.
            - "type": La categora, que para el nodo raz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categora descriptiva (ej: "Concepto Clave", "Ejemplo Prctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vaco si es un nodo final.
        `;try{const J=(await(await new xs(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),W=JSON.parse(J),Z=q=>({id:crypto.randomUUID(),label:q.label||"Sin etiqueta",icon:q.icon||"",type:q.type||"default",children:(q.children||[]).map(Z)}),H=Z(W),{nodes:z,edges:G}=Oj(H),ne={tema:m,nivel:x,treeData:H,nodes:z,edges:G},R=await w9e(ne,t);o({...ne,id:R,createdAt:new Date().toISOString()}),n("editor")}catch(P){console.error("AI Generation Error:",P),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{u(!1)}},S=async E=>{try{await y9e(E,t)}catch(C){console.error("Error saving mind map:",C),alert("No se pudo guardar el mapa mental.")}},B=E=>{o(E),n("editor")},I=async E=>{if(window.confirm("Eliminar este mapa mental?"))try{await E9e(E)}catch(C){console.error("Error deleting mind map:",C),alert("No se pudo eliminar el mapa mental.")}},D=()=>{switch(r){case"editor":return i?c.jsx(bD,{children:c.jsx(I9e,{mapData:i,onBack:()=>n("list"),onSave:S})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:b,onChange:E=>y(E.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(S9e,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>B(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>I(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),D()]})},F9e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),O9e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),D9e=({onBack:e,currentUser:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState("Media"),[i,o]=T.useState(10),[l,u]=T.useState(!1),[d,f]=T.useState(Array(10).fill("")),[m,p]=T.useState(""),[x,g]=T.useState(null),[b,y]=T.useState({ai:!1,puzzle:!1,data:!0}),_=T.useRef(null);T.useEffect(()=>{y(O=>({...O,data:!0}));const P=C9e(O=>{n(O),y(F=>({...F,data:!1}))});return()=>P()},[]),T.useEffect(()=>{f(P=>{const O=Array(i).fill("");for(let F=0;F<Math.min(P.length,i);F++)O[F]=P[F];return O})},[i]);const S=(P,O)=>{const F=[...d];F[P]=O,f(F)},B=async()=>{if(m.trim()){y(P=>({...P,ai:!0}));try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=new xs(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),M=`
                Genera una lista de ${i} palabras clave en espaol, estrictamente relacionadas con el tema "${m}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,Z=(await(await F.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(Z);if(!H.palabras||!Array.isArray(H.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const G=[...H.palabras.map(ne=>ne.toUpperCase().replace(/[^A-Z]/g,"")).slice(0,i)];for(;G.length<i;)G.push("");f(G)}catch(P){console.error("Error generating words with AI:",P),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(P=>({...P,ai:!1}))}}},I=(P,O,F,M,Q,J)=>{for(let W=0;W<P.length;W++){const Z=F+W*Q.y,H=M+W*Q.x;if(Z<0||Z>=J||H<0||H>=J||O[Z][H]&&O[Z][H]!==P[W])return!1}return!0},D=(P,O,F,M,Q)=>{for(let J=0;J<P.length;J++)O[F+J*Q.y][M+J*Q.x]=P[J]},E=async()=>{y(Z=>({...Z,puzzle:!0})),g(null),await new Promise(Z=>setTimeout(Z,100));const P=d.map(Z=>Z.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(P.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(Z=>({...Z,puzzle:!1}));return}const O=Math.max(...P.map(Z=>Z.length));let F=Math.max(O,P.length)+2;a==="Media"&&(F+=3),a==="Difcil"&&(F+=5),F=Math.min(Math.max(F,10),25);const M=Array(F).fill(null).map(()=>Array(F).fill(null)),Q=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&Q.push({x:1,y:-1}),a==="Difcil"&&Q.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const Z of P.sort((H,z)=>z.length-H.length)){let H=!1;for(let z=0;z<100;z++){const G=Q[Math.floor(Math.random()*Q.length)],ne=Math.floor(Math.random()*F),R=Math.floor(Math.random()*F);if(I(Z,M,ne,R,G,F)){D(Z,M,ne,R,G),H=!0;break}}H||console.warn(`No se pudo colocar la palabra: ${Z}`)}const J=M.map(Z=>Z.map(H=>H||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),W={tema:m||"Personalizado",grid:J.map(Z=>Z.join("")),words:P.sort()};try{const Z=await _9e(W,t);g({...W,id:Z,createdAt:new Date().toISOString()})}catch(Z){console.error("Error saving puzzle:",Z),alert("No se pudo guardar la sopa de letras.")}finally{y(Z=>({...Z,puzzle:!1}))}},C=()=>{_.current&&iN(_.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(P=>{const O=document.createElement("a");O.download="sopa-de-letras.png",O.href=P,O.click()}).catch(P=>{console.error("oops, something went wrong!",P),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},N=()=>{var F;if(!x)return null;const P=((F=x.grid[0])==null?void 0:F.length)||1,O=x.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:_,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${P}, minmax(0, 1fr))`},children:O.map((M,Q)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:M},Q))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:x.words.map(M=>c.jsx("li",{children:M},M))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>g(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!x&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:a,onChange:P=>s(P.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fcil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difcil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>c.jsx("button",{onClick:()=>{o(P),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:P=>o(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:P=>p(P.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?c.jsx(F9e,{}):c.jsxs(c.Fragment,{children:[c.jsx(O9e,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((P,O)=>c.jsx("input",{type:"text",value:P,onChange:F=>S(O,F.target.value),placeholder:`Palabra ${O+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},O))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:E,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),x&&N()]})},P9e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),R9e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),L9e=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=T.useState(e),[s,i]=T.useState(null),o=T.useRef(null),l=(p,x,g)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[x]:g}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},x=[...n.events,p].sort((g,b)=>parseInt(g.date)-parseInt(b.date));a(g=>({...g,events:x}))},d=p=>{a(x=>({...x,events:x.events.filter(g=>g.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}i(p.id);const x="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",g=`
            Para una lnea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejrala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional, con tres claves:
            1. "date": El ao o fecha ms precisa y relevante para esta idea.
            2. "description": Una descripcin concisa (mximo 15 palabras) para la lnea de tiempo.
            3. "icon": Un nico emoji que represente el hito.
        `;try{const I=(await(await new xs(x).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(g)).response).text().replace(/^```json\s*|```\s*$/g,""),D=JSON.parse(I);a(E=>({...E,events:E.events.map(C=>C.id===p.id?{...C,date:D.date,description:D.description,icon:D.icon}:C).sort((C,N)=>parseInt(C.date)-parseInt(N.date))}))}catch(b){console.error("Error al generar descripcin del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},m=()=>{o.current&&iN(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const x=document.createElement("a");x.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,x.href=p,x.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((p,x)=>parseInt(p.date)-parseInt(x.date)).map((p,x)=>{const g=x%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:g&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!g&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:p.date,onChange:x=>l(p.id,"date",x.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:p.description,onChange:x=>l(p.id,"description",x.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(R9e,{})})]}),c.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:m,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},U9e=({onBack:e,currentUser:t})=>{const[r,n]=T.useState("list"),[a,s]=T.useState([]),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(!0),[m,p]=T.useState(""),[x,g]=T.useState(""),[b,y]=T.useState("");T.useEffect(()=>{f(!0);const I=p9e(D=>{s(D),f(!1)});return()=>I()},[]);const _=async I=>{if(I.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=x&&b?`entre ${x} y ${b}`:x?`a partir de ${x}`:b?`hasta ${b}`:"",C=`
            Genera una lnea de tiempo sobre el tema "${m}" ${E}.
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el ao del hito.
            2. "description": Un string con la descripcin breve del hito (mximo 15 palabras).
            3. "icon": Un string con un nico emoji que represente el hito.
            Ordena los eventos cronolgicamente.
        `;try{const Q=(await(await new xs(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(Q);if(!J.events||!Array.isArray(J.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const W={tema:m,fechaInicio:x,fechaFin:b,events:J.events.map(H=>({id:crypto.randomUUID(),date:H.date||"Sin fecha",description:H.description||"Sin descripcin",icon:H.icon||""}))},Z=await v9e(W,t);o({...W,id:Z,createdAt:new Date().toISOString()}),n("editor")}catch(N){console.error("AI Generation Error:",N),alert("Hubo un error al generar la lnea de tiempo. Por favor, revisa el formato del tema o intntalo de nuevo.")}finally{u(!1)}},S=async I=>{try{await g9e(I,t),n("list"),o(null)}catch(D){console.error("Error saving timeline:",D),alert("No se pudo guardar la lnea de tiempo.")}},B=async I=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await x9e(I)}catch(D){console.error("Error deleting timeline:",D),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&i?c.jsx(L9e,{timeline:i,onSave:S,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:I=>p(I.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:x,onChange:I=>g(I.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:I=>y(I.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(P9e,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(I=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(I.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(I),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>B(I.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},I.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},M9e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),YH=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Q9e=({onBack:e,currentUser:t})=>{const[r,n]=T.useState([]),[a,s]=T.useState(10),[i,o]=T.useState(!1),[l,u]=T.useState(Array(10).fill("")),[d,f]=T.useState(Array(10).fill("")),[m,p]=T.useState(""),[x,g]=T.useState(null),[b,y]=T.useState(!1),[_,S]=T.useState({ai:!1,puzzle:!1,data:!0}),[B,I]=T.useState(null),D=T.useRef(null);T.useEffect(()=>{S(J=>({...J,data:!0}));const Q=h9e(J=>{const W=J.map(Z=>{const{grid_flat:H,grid_width:z,...G}=Z,ne=[];if(H&&z>0)for(let R=0;R<H.length;R+=z)ne.push(H.slice(R,R+z));return{...G,grid:ne}});n(W),S(Z=>({...Z,data:!1}))});return()=>Q()},[]),T.useEffect(()=>{const Q=a;u(J=>Array.from({length:Q},(W,Z)=>J[Z]||"")),f(J=>Array.from({length:Q},(W,Z)=>J[Z]||""))},[a]);const E=(Q,J)=>{const W=[...l];W[Q]=J,u(W)},C=(Q,J)=>{const W=[...d];W[Q]=J,f(W)},N=async()=>{if(m.trim()){S(Q=>({...Q,ai:!0}));try{const Q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",W=new xs(Q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Z=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en maysculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ne=(await(await W.generateContent(Z)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const R=ne.indexOf("{"),q=ne.lastIndexOf("}");R!==-1&&q!==-1&&(ne=ne.substring(R,q+1)),ne=ne.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ne.includes("__SPLIT__")&&(ne=ne.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(pe,oe,ce,ge)=>{const Fe=ce.split("__SPLIT__").map(re=>re.trim().replace(/,$/,""));return oe+Fe.join(",")+ge})),ne=ne.replace(/,\s*]/g,"]");let Y;try{Y=JSON.parse(ne)}catch{console.error("Respuesta IA no es JSON vlido:",ne),alert("La respuesta de la IA no es un JSON vlido. Intenta de nuevo o ajusta el tema."),S(oe=>({...oe,ai:!1}));return}if(!Y.items||!Array.isArray(Y.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=Y.items.map(pe=>(pe.word||"").toUpperCase().replace(/\s/g,"")),ie=Y.items.map(pe=>pe.clue||"");u(Array.from({length:a},(pe,oe)=>te[oe]||"")),f(Array.from({length:a},(pe,oe)=>ie[oe]||""))}catch(Q){console.error("Error generating words/clues with AI:",Q),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{S(Q=>({...Q,ai:!1}))}}},P=async Q=>{const J=l[Q];if(!J||!J.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}I(Q);try{const W="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new xs(W).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=`Para un crucigrama con el tema "${m||"general"}", genera una pista concisa y creativa para la palabra "${J}". La respuesta debe ser un nico objeto JSON vlido sin texto adicional, con una sola clave: "clue".`,q=(await(await H.generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(q);Y.clue&&C(Q,Y.clue)}catch(W){console.error("Error generating clue with AI:",W),alert("No se pudo generar la pista.")}finally{I(null)}},O=T.useCallback(()=>{try{const Q=l.map((Ie,He)=>({word:Ie.toUpperCase().replace(/[^A-Z]/g,""),clue:d[He]})).filter(Ie=>Ie.word.length>0);if(Q.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;Q.sort((Ie,He)=>He.word.length-Ie.word.length);const J=Q[0].word.length,W=Math.max(J,Q.length)*2;let Z=Array.from({length:W},()=>Array(W).fill(null));const H=[],z=Q.shift(),G=Math.floor(W/2),ne=Math.floor((W-z.word.length)/2);for(let Ie=0;Ie<z.word.length;Ie++)Z[G][ne+Ie]=z.word[Ie];H.push({word:z.word,clue:z.clue,direction:"across",row:G,col:ne});for(const Ie of Q){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of H)for(let dt=0;dt<Xe.word.length;dt++)for(let Et=0;Et<Ie.word.length;Et++)if(Xe.word[dt]===Ie.word[Et]){let Tt=0,Ct,Dt,Jt;Xe.direction==="across"?(Jt="down",Ct=Xe.row-Et,Dt=Xe.col+dt):(Jt="across",Ct=Xe.row+dt,Dt=Xe.col-Et);let Pt=!0;for(let Mt=0;Mt<Ie.word.length;Mt++){const Wt=Ct+(Jt==="down"?Mt:0),Pe=Dt+(Jt==="across"?Mt:0);if(Wt<0||Wt>=W||Pe<0||Pe>=W){Pt=!1;break}const Re=Z[Wt][Pe],Te=Wt===Xe.row+(Xe.direction==="down"?dt:0)&&Pe===Xe.col+(Xe.direction==="across"?dt:0);if(Re&&!Te){Pt=!1;break}if(Re&&Te&&Re!==Ie.word[Et]){Pt=!1;break}if(!Te){if(Jt==="across"&&(Wt>0&&Z[Wt-1][Pe]||Wt<W-1&&Z[Wt+1][Pe])){Pt=!1;break}if(Jt==="down"&&(Pe>0&&Z[Wt][Pe-1]||Pe<W-1&&Z[Wt][Pe+1])){Pt=!1;break}}Re&&Tt++}Pt&&Tt>He.score&&(He={score:Tt,row:Ct,col:Dt,direction:Jt})}if(He.score>-1){for(let Xe=0;Xe<Ie.word.length;Xe++){const dt=He.row+(He.direction==="down"?Xe:0),Et=He.col+(He.direction==="across"?Xe:0);Z[dt][Et]=Ie.word[Xe]}H.push({word:Ie.word,clue:Ie.clue,direction:He.direction,row:He.row,col:He.col})}}let R=W,q=-1,Y=W,te=-1;H.forEach(Ie=>{R=Math.min(R,Ie.row),q=Math.max(q,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),Y=Math.min(Y,Ie.col),te=Math.max(te,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),q===-1&&(R=H[0].row,q=H[0].row,Y=H[0].col,te=H[0].col+H[0].word.length-1);const ie=1,pe=Math.max(0,R-ie),oe=Math.min(W,q+1+ie),ce=Math.max(0,Y-ie),ge=Math.min(W,te+1+ie),Fe=Z.slice(pe,oe).map(Ie=>Ie.slice(ce,ge)),re=H.map(Ie=>({...Ie,row:Ie.row-pe,col:Ie.col-ce})).sort((Ie,He)=>Ie.row-He.row||Ie.col-He.col);let Ne=1;const Oe=[],Ce=new Map;re.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;Ce.has(He)||Ce.set(He,Ne++),Oe.push({...Ie,number:Ce.get(He)})});const fe=Fe.map(Ie=>Ie.map(He=>({char:He,number:null})));return Oe.forEach(Ie=>{const He=`${Ie.row},${Ie.col}`;fe[Ie.row]&&fe[Ie.row][Ie.col]!==void 0&&(fe[Ie.row][Ie.col].number=Ce.get(He))}),{grid:fe,clues:{across:Oe.filter(Ie=>Ie.direction==="across").sort((Ie,He)=>Ie.number-He.number),down:Oe.filter(Ie=>Ie.direction==="down").sort((Ie,He)=>Ie.number-He.number)}}}catch(Q){return console.error("Error generating crossword grid:",Q),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),F=async()=>{var J;S(W=>({...W,puzzle:!0})),g(null),await new Promise(W=>setTimeout(W,100));const Q=O();if(Q){const W={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:m||"Personalizado",grid:Q.grid,clues:Q.clues},{grid:Z,...H}=W,z={...H,grid_flat:Z.flat().map(G=>G.char||""),grid_width:((J=Z[0])==null?void 0:J.length)||0};try{const G=await m9e(z,t);g({...W,id:G,fechaCreacion:new Date().toISOString()})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar el crucigrama en la base de datos.")}}S(W=>({...W,puzzle:!1}))},M=()=>{D.current&&(y(!1),setTimeout(()=>{iN(D.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(Q=>{const J=document.createElement("a");J.download="crucigrama.png",J.href=Q,J.click()}).catch(Q=>console.error("Error generating image",Q))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:""}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),x?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:D,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${x.grid[0].length}, 2rem)`},children:x.grid.flat().map((Q,J)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:Q.char?"white":"black"},children:[Q.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:Q.number}),b&&Q.char&&c.jsx("span",{children:Q.char})]},J))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:x.clues.across.map(Q=>c.jsxs("li",{children:[c.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:x.clues.down.map(Q=>c.jsxs("li",{children:[c.jsxs("strong",{children:[Q.number,"."]})," ",Q.clue]},`${Q.word}-${Q.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solucin"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>g(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:M,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(Q=>c.jsx("button",{onClick:()=>{s(Q),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===Q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:Q},Q)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:Q=>s(parseInt(Q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:Q=>p(Q.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:N,disabled:_.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:_.ai?c.jsx(M9e,{}):c.jsxs(c.Fragment,{children:[c.jsx(YH,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((Q,J)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[J],onChange:W=>E(J,W.target.value),placeholder:`Palabra ${J+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[J],onChange:W=>C(J,W.target.value),placeholder:`Pista ${J+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>P(J),disabled:B===J,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:B===J?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(YH,{})})]})]},J))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:F,disabled:_.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:_.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},H9e=()=>{const[e,t]=T.useState(null),[r,n]=T.useState(!0);return T.useEffect(()=>{const a=Bq(kge,async s=>{if(s&&s.email)try{const i=await vX(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},V9e=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],z9e=({recurso:e,onClick:t})=>c.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:e.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),$9e=()=>{const[e,t]=T.useState("menu"),{currentUser:r}=H9e(),n=()=>e!=="menu"&&!r?c.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?c.jsx(j9e,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?c.jsx(D9e,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?c.jsx(U9e,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?c.jsx(Q9e,{onBack:()=>t("menu"),currentUser:r}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:V9e.map(a=>c.jsx(z9e,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},K9e="evaluaciones_formativas",G9e="calificaciones_formativas",Mre="trabajos_grupales_formativos",Qre=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},q9e=(e,t)=>{const r=tr(Ft(Nt,K9e),Mn("curso","==",e));return yr(r,n=>{t(n.docs.map(a=>Qre(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},W9e=e=>{const t=tr(Ft(Nt,G9e));return yr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},X9e=(e,t)=>{const r=tr(Ft(Nt,Mre),Mn("curso","==",e));return yr(r,n=>{t(n.docs.map(a=>Qre(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Y9e=async e=>{try{const{id:t,...r}=e,n=br(Nt,Mre,t);await io(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},J9e=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState({}),[s,i]=T.useState([]),[o,l]=T.useState(!0),[u,d]=T.useState(null),[f,m]=T.useState(!1),[p,x]=T.useState(null),g=T.useRef(null);T.useEffect(()=>{if(!e.curso){l(!1);return}l(!0);const B=q9e(e.curso,r),I=W9e(a),D=X9e(e.curso,E=>{i(E),l(!1)});return()=>{B(),I(),D()}},[e.curso]);const b=T.useMemo(()=>{if(!e.curso)return[];const I=t.filter(D=>D.curso===e.curso).reduce((D,E)=>((D[E.asignatura]=D[E.asignatura]||[]).push(E),D),{});return Object.entries(I).map(([D,E])=>{let C=0,N=0;const P=E.map(F=>{var J;const M=(J=n[F.id])==null?void 0:J[e.nombreCompleto];let Q="No Trabajado";return M==="trabajado"?(C+=7,N++,Q="Trabajado"):M==="no trabajado"&&(C+=2,N++,Q="No Trabajado"),{id:F.id,nombreActividad:F.nombreActividad,fecha:F.fecha,estado:Q}}).filter(F=>{var M;return(M=n[F.id])==null?void 0:M[e.nombreCompleto]}),O=N>0?(C/N).toFixed(1):"N/A";return{asignatura:D,promedio:O,actividades:P.sort((F,M)=>new Date(M.fecha).getTime()-new Date(F.fecha).getTime())}}).filter(D=>D.actividades.length>0).sort((D,E)=>D.asignatura.localeCompare(E.asignatura))},[t,n,e]);T.useEffect(()=>{if(b.reduce((N,P)=>N+P.actividades.length,0)===0){d(null);return}const I=b.reduce((N,P)=>{const O=parseFloat(P.promedio);return isNaN(O)?N:N+O},0),D=b.length>0?I/b.length:0,E=R2.find(N=>D>=N.promedioMin&&D<=N.promedioMax)||null,C=R2.filter(N=>D>=N.promedioMin);if(d({puntajeTotal:0,promedio:D,rangoActual:E,insigniasGanadas:C}),g.current!==null){const N=R2.find(P=>g.current>=P.promedioMin&&g.current<=P.promedioMax)||null;E&&(!N||E.nombre!==N.nombre)&&x(E)}g.current=D},[b]);const y=T.useMemo(()=>e.curso?s.filter(B=>B.curso===e.curso).map(B=>{const I=B.grupos.find(D=>D.integrantes.some(E=>E.nombre===e.nombreCompleto));return I?{...B,miGrupo:I}:null}).filter(B=>B!==null).sort((B,I)=>new Date(I.fechaPresentacion).getTime()-new Date(B.fechaPresentacion).getTime()):[],[s,e]),_=async(B,I)=>{const D=s.find(C=>C.id===B);if(!D)return;const E={...D,grupos:D.grupos.map(C=>C.integrantes.some(P=>P.nombre===e.nombreCompleto)?{...C,integrantes:C.integrantes.map(P=>P.nombre===e.nombreCompleto?{...P,rol:I||void 0}:P)}:C)};try{await Y9e(E)}catch(C){console.error("Error updating role:",C),alert("No se pudo actualizar el rol.")}},S=B=>{const I=parseFloat(B);return isNaN(I)?"bg-slate-400":I<4?"bg-red-500":I<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>x(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:B=>B.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),c.jsx("button",{onClick:()=>x(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:B=>B.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:R2.map(B=>{const I=u==null?void 0:u.insigniasGanadas.some(D=>D.nombre===B.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${I?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:B.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${I?"text-amber-700":"text-slate-600"}`,children:B.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",B.promedioMin," y ",B.promedioMax]})]})]},B.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(B=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:B.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${S(B.promedio)}`,children:B.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),B.actividades.map(I=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:I.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${I.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:I.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},I.id))]})]},B.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:y.map(B=>{const I=B.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),D=bX.filter(E=>!I.includes(E));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:B.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[B.asignatura," - Presentacin: ",new Date(B.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",B.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:B.miGrupo.integrantes.map(E=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?c.jsxs("select",{value:E.rol||"",onChange:C=>_(B.id,C.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!D.includes(E.rol)&&c.jsx("option",{value:E.rol,children:E.rol}),D.map(C=>c.jsx("option",{value:C,children:C},C))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},B.id)})})]})]})},Z9e="proyectos_interdisciplinarios",Hre="entregas_interdisciplinarias",Vre=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},eQe=(e,t)=>{const r=tr(Ft(Nt,Z9e),Mn("cursos","array-contains",e));return yr(r,n=>{const a=n.docs.map(s=>Vre(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},tQe=(e,t)=>{const r=tr(Ft(Nt,Hre),Mn("estudianteId","==",e));return yr(r,n=>{const a=n.docs.map(s=>Vre(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},rQe=async e=>{try{const{id:t,...r}=e,n=br(Nt,Hre,t),a={...r,fechaCompletado:hr.fromDate(new Date(r.fechaCompletado||Date.now()))};await io(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},nQe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState([]),[s,i]=T.useState(null),[o,l]=T.useState(!0);T.useEffect(()=>{if(!e.curso||!e.id){l(!1);return}l(!0);const f=eQe(e.curso,r),m=tQe(e.id,p=>{a(p),l(!1)});return()=>{f(),m()}},[e.curso,e.id]);const u=async f=>{try{await rQe(f)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:m})=>{const p=T.useMemo(()=>{const I=n.find(D=>D.planificacionId===f.id&&D.tareaId===m.id);return I||{id:`${f.id}_${m.id}_${e.id}`,planificacionId:f.id,tareaId:m.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,m.id,n]),[x,g]=T.useState(!1),[b,y]=T.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),_=I=>{var E;const D=(E=I.target.files)==null?void 0:E[0];D&&(alert(`Simulacin: Archivo "${D.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:D.name,url:`simulated/path/${D.name}`},fechaCompletado:new Date().toISOString()}))},S=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},B=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:p.completada,onChange:B,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&c.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>g(!x),className:"text-sm font-semibold",children:x?"Ocultar":"Entregar"})]}),x&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:b.observaciones,onChange:I=>y({...b,observaciones:I.target.value}),onBlur:S,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:b.enlace,onChange:I=>y({...b,enlace:I.target.value}),onBlur:S,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:_,className:"text-sm"}),p.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const m=f.tareas||[],x=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,g=m.length>0?x/m.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(g),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${g}%`}})})]})]}),s===f.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(b=>c.jsx(d,{plan:f,tarea:b},b.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},aQe=({data:e})=>c.jsx("div",{className:"space-y-4",children:e.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),sQe=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState(null),[u,d]=T.useState(vb),f=T.useCallback(async()=>{a(!0);try{const b=(await EIe(e.nombreCompleto)).sort((y,_)=>new Date(_.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(g){console.error("Error al cargar acompaamientos desde Firestore",g),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),m=T.useCallback(async()=>{try{const g=await CIe();g&&d(g)}catch(g){console.error("Error al cargar rbrica personalizada",g)}},[]);T.useEffect(()=>{f(),m()},[f,m]);const p=T.useMemo(()=>{if(!o)return[];const g={};return u.forEach(b=>{g[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const _=o.rubricaResultados[y.name];_&&(g[b.domain].total+=_,g[b.domain].count++)})}),Object.entries(g).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),x=g=>{const b=new fr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompaamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),nl(b,{startY:35,body:[["Docente:",g.docente],["Fecha:",new Date(g.fecha).toLocaleDateString("es-CL")],["Asignatura:",g.asignatura],["Curso:",g.curso],["Bloques:",g.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(g.rubricaResultados).length>0){const B=[],I=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(D=>{B.push([{content:D.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),D.criteria.forEach(E=>{const C=g.rubricaResultados[E.name],N=C?I[C-1]:"No evaluado";B.push([E.name,N])})}),nl(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:B,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const _=(B,I)=>{if(!I)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(B,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const D=b.splitTextToSize(I.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(D,14,y),y+=D.length*5+10};_("Observaciones Generales",g.observacionesGenerales),_("Retroalimentacin Consolidada",g.retroalimentacionConsolidada);const S=b.getNumberOfPages();for(let B=1;B<=S;B++)b.setPage(B),b.setFontSize(8),b.setTextColor(128),b.text(`Pgina ${B} de ${S}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(g.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>x(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(xX,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(aQe,{data:p})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(g=>c.jsx("button",{onClick:()=>l(g),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[g.curso," - ",g.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(g.fecha).toLocaleDateString("es-CL"),g.bloques&&` | Bloques: ${g.bloques}`]}),Object.keys(g.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(g.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},g.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:""}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},iQe=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=Ft(Mr,"planificaciones"),r=tr(t,qr("fechaCreacion","desc"));return yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},oQe=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=Ft(Mr,"planificaciones"),n=tr(r,Mn("userId","==",e),qr("fechaCreacion","desc"));return yr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log(" Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function p0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lQe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ED(e){let t,r,n;e.length!==2?(t=p0,r=(o,l)=>p0(e(o),l),n=(o,l)=>e(o)-l):(t=e===p0||e===lQe?e:cQe,r=e,n=e);function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=a(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:a,center:i,right:s}}function cQe(){return 0}function zre(e){return e===null?NaN:+e}function*uQe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const dQe=ED(p0),hw=dQe.right;ED(zre).center;class JH extends Map{constructor(t,r=hQe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(ZH(this,t))}has(t){return super.has(ZH(this,t))}set(t,r){return super.set(AQe(this,t),r)}delete(t){return super.delete(fQe(this,t))}}function ZH({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function AQe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function fQe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function hQe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mQe(e=p0){if(e===p0)return $re;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function $re(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pQe=Math.sqrt(50),gQe=Math.sqrt(10),vQe=Math.sqrt(2);function tS(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=pQe?10:s>=gQe?5:s>=vQe?2:1;let o,l,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?tS(e,t,r*2):[o,l,u]}function Dj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?tS(t,e,r):tS(e,t,r);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(s-u)/-i;else for(let u=0;u<o;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(a+u)/-i;else for(let u=0;u<o;++u)l[u]=(a+u)*i;return l}function Pj(e,t,r){return t=+t,e=+e,r=+r,tS(e,t,r)[2]}function Rj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Pj(t,e,r):Pj(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function eV(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function tV(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Kre(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?$re:mQe(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+m)),x=Math.min(n,Math.floor(t+(l-u)*f/l+m));Kre(e,t,p,x,a)}const s=e[t];let i=r,o=n;for(F1(e,r,t),a(e[n],s)>0&&F1(e,r,n);i<o;){for(F1(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?F1(e,r,o):(++o,F1(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function F1(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xQe(e,t,r){if(e=Float64Array.from(uQe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return tV(e);if(t>=1)return eV(e);var n,a=(n-1)*t,s=Math.floor(a),i=eV(Kre(e,s).subarray(0,s+1)),o=tV(e.subarray(s+1));return i+(o-i)*(a-s)}}function bQe(e,t,r=zre){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function yQe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}const Lj=Math.PI,Uj=2*Lj,Em=1e-6,wQe=Uj-Em;function Gre(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function EQe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Gre;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class CQe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Gre:EQe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,l=n-t,u=a-r,d=i-t,f=o-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Em)if(!(Math.abs(f*l-u*d)>Em)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,x=a-o,g=l*l+u*u,b=p*p+x*x,y=Math.sqrt(g),_=Math.sqrt(m),S=s*Math.tan((Lj-Math.acos((g+m-b)/(2*y*_)))/2),B=S/_,I=S/y;Math.abs(B-1)>Em&&this._append`L${t+B*d},${r+B*f}`,this._append`A${s},${s},0,0,${+(f*p>d*x)},${this._x1=t+I*l},${this._y1=r+I*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),l=n*Math.sin(a),u=t+o,d=r+l,f=1^i,m=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Em||Math.abs(this._y1-d)>Em)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%Uj+Uj),m>wQe?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>Em&&this._append`A${n},${n},0,${+(m>=Lj)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function _Qe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rS(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Hv(e){return e=rS(Math.abs(e)),e?e[1]:NaN}function SQe(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(a-=o,a+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function NQe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var BQe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cy(e){if(!(t=BQe.exec(e)))throw new Error("invalid format: "+e);var t;return new CD({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Cy.prototype=CD.prototype;function CD(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kQe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var qre;function TQe(e,t){var r=rS(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(qre=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+rS(e,Math.max(0,t+s-1))[0]}function rV(e,t){var r=rS(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const nV={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_Qe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rV(e*100,t),r:rV,s:TQe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function aV(e){return e}var sV=Array.prototype.map,iV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function IQe(e){var t=e.grouping===void 0||e.thousands===void 0?aV:SQe(sV.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?aV:NQe(sV.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Cy(f);var m=f.fill,p=f.align,x=f.sign,g=f.symbol,b=f.zero,y=f.width,_=f.comma,S=f.precision,B=f.trim,I=f.type;I==="n"?(_=!0,I="g"):nV[I]||(S===void 0&&(S=12),B=!0,I="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",E=g==="$"?n:/[%p]/.test(I)?i:"",C=nV[I],N=/[defgprs%]/.test(I);S=S===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(O){var F=D,M=E,Q,J,W;if(I==="c")M=C(O)+M,O="";else{O=+O;var Z=O<0||1/O<0;if(O=isNaN(O)?l:C(Math.abs(O),S),B&&(O=kQe(O)),Z&&+O==0&&x!=="+"&&(Z=!1),F=(Z?x==="("?x:o:x==="-"||x==="("?"":x)+F,M=(I==="s"?iV[8+qre/3]:"")+M+(Z&&x==="("?")":""),N){for(Q=-1,J=O.length;++Q<J;)if(W=O.charCodeAt(Q),48>W||W>57){M=(W===46?a+O.slice(Q+1):O.slice(Q))+M,O=O.slice(0,Q);break}}}_&&!b&&(O=t(O,1/0));var H=F.length+O.length+M.length,z=H<y?new Array(y-H+1).join(m):"";switch(_&&b&&(O=t(z+O,z.length?y-M.length:1/0),z=""),p){case"<":O=F+O+M+z;break;case"=":O=F+z+O+M;break;case"^":O=z.slice(0,H=z.length>>1)+F+O+M+z.slice(H);break;default:O=z+F+O+M;break}return s(O)}return P.toString=function(){return f+""},P}function d(f,m){var p=u((f=Cy(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Hv(m)/3)))*3,g=Math.pow(10,-x),b=iV[8+x/3];return function(y){return p(g*y)+b}}return{format:u,formatPrefix:d}}var DE,_D,Wre;jQe({thousands:",",grouping:[3],currency:["$",""]});function jQe(e){return DE=IQe(e),_D=DE.format,Wre=DE.formatPrefix,DE}function FQe(e){return Math.max(0,-Hv(Math.abs(e)))}function OQe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hv(t)/3)))*3-Hv(Math.abs(e)))}function DQe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hv(t)-Hv(e))+1}function xu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $f(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Mj=Symbol("implicit");function uN(){var e=new JH,t=[],r=[],n=Mj;function a(s){let i=e.get(s);if(i===void 0){if(n!==Mj)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new JH;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return uN(t,r).unknown(n)},xu.apply(a,arguments),a}function SD(){var e=uN().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=a<n,x=p?a:n,g=p?n:a;s=(g-x)/Math.max(1,m-l+u*2),o&&(s=Math.floor(s)),x+=(g-x-s*(m-l))*d,i=s*(1-l),o&&(x=Math.round(x),i=Math.round(i));var b=yQe(m).map(function(y){return x+s*y});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(m){return arguments.length?(o=!!m,f()):o},e.padding=function(m){return arguments.length?(l=Math.min(1,u=+m),f()):l},e.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),f()):l},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return SD(t(),[n,a]).round(o).paddingInner(l).paddingOuter(u).align(d)},xu.apply(f(),arguments)}function Xre(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Xre(t())},e}function PQe(){return Xre(SD.apply(null,arguments).paddingInner(1))}function RQe(e){return function(){return e}}function nS(e){return+e}var oV=[0,1];function Zo(e){return e}function Qj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:RQe(isNaN(t)?NaN:.5)}function LQe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function UQe(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=Qj(a,n),s=r(i,s)):(n=Qj(n,a),s=r(s,i)),function(o){return s(n(o))}}function MQe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=Qj(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var l=hw(e,o,1,n)-1;return s[l](a[l](o))}}function mw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dN(){var e=oV,t=oV,r=px,n,a,s,i=Zo,o,l,u;function d(){var m=Math.min(e.length,t.length);return i!==Zo&&(i=LQe(e[0],e[m-1])),o=m>2?MQe:UQe,l=u=null,f}function f(m){return m==null||isNaN(m=+m)?s:(l||(l=o(e.map(n),t,r)))(n(i(m)))}return f.invert=function(m){return i(a((u||(u=o(t,e.map(n),Wu)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,nS),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=sD,d()},f.clamp=function(m){return arguments.length?(i=m?!0:Zo,d()):i!==Zo},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,p){return n=m,a=p,d()}}function ND(){return dN()(Zo,Zo)}function Yre(e,t,r,n){var a=Rj(e,t,r),s;switch(n=Cy(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=OQe(a,i))&&(n.precision=s),Wre(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=DQe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=FQe(a))&&(n.precision=s-(n.type==="%")*2);break}}return _D(n)}function H0(e){var t=e.domain;return e.ticks=function(r){var n=t();return Dj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Yre(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=Pj(i,o,r),u===l)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Jre(){var e=ND();return e.copy=function(){return mw(e,Jre())},xu.apply(e,arguments),H0(e)}function Zre(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,nS),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Zre(e).unknown(t)},e=arguments.length?Array.from(e,nS):[0,1],H0(r)}function ene(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function lV(e){return Math.log(e)}function cV(e){return Math.exp(e)}function QQe(e){return-Math.log(-e)}function HQe(e){return-Math.exp(-e)}function VQe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zQe(e){return e===10?VQe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $Qe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uV(e){return(t,r)=>-e(-t,r)}function BD(e){const t=e(lV,cV),r=t.domain;let n=10,a,s;function i(){return a=$Qe(n),s=zQe(n),r()[0]<0?(a=uV(a),s=uV(s),e(QQe,HQe)):e(lV,cV),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=a(u),p=a(d),x,g;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(x=1;x<n;++x)if(g=m<0?x/s(-m):x*s(m),!(g<u)){if(g>d)break;y.push(g)}}else for(;m<=p;++m)for(x=n-1;x>=1;--x)if(g=m>0?x/s(-m):x*s(m),!(g<u)){if(g>d)break;y.push(g)}y.length*2<b&&(y=Dj(u,d,b))}else y=Dj(m,p,Math.min(p-m,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Cy(l)).precision==null&&(l.trim=!0),l=_D(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(ene(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function tne(){const e=BD(dN()).domain([1,10]);return e.copy=()=>mw(e,tne()).base(e.base()),xu.apply(e,arguments),e}function dV(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function AV(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kD(e){var t=1,r=e(dV(t),AV(t));return r.constant=function(n){return arguments.length?e(dV(t=+n),AV(t)):t},H0(r)}function rne(){var e=kD(dN());return e.copy=function(){return mw(e,rne()).constant(e.constant())},xu.apply(e,arguments)}function fV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function KQe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GQe(e){return e<0?-e*e:e*e}function TD(e){var t=e(Zo,Zo),r=1;function n(){return r===1?e(Zo,Zo):r===.5?e(KQe,GQe):e(fV(r),fV(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},H0(t)}function ID(){var e=TD(dN());return e.copy=function(){return mw(e,ID()).exponent(e.exponent())},xu.apply(e,arguments),e}function qQe(){return ID.apply(null,arguments).exponent(.5)}function hV(e){return Math.sign(e)*e*e}function WQe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function nne(){var e=ND(),t=[0,1],r=!1,n;function a(s){var i=WQe(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(hV(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,nS)).map(hV)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return nne(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},xu.apply(a,arguments),H0(a)}function ane(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=bQe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[hw(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(p0),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return ane().domain(e).range(t).unknown(n)},xu.apply(s,arguments)}function sne(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(l){return l!=null&&l<=l?a[hw(n,l,0,r)]:s}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,o()):a.slice()},i.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return sne().domain([e,t]).range(a).unknown(s)},xu.apply(H0(i),arguments)}function ine(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[hw(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return ine().domain(e).range(t).unknown(r)},xu.apply(a,arguments)}const $k=new Date,Kk=new Date;function gi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const l=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return l},a.filter=s=>gi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>($k.setTime(+s),Kk.setTime(+i),e($k),e(Kk),Math.floor(r($k,Kk))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const aS=gi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);aS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):aS);aS.range;const Af=1e3,Au=Af*60,ff=Au*60,jf=ff*24,jD=jf*7,mV=jf*30,Gk=jf*365,Pm=gi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Af)},(e,t)=>(t-e)/Af,e=>e.getUTCSeconds());Pm.range;const FD=gi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Af)},(e,t)=>{e.setTime(+e+t*Au)},(e,t)=>(t-e)/Au,e=>e.getMinutes());FD.range;const OD=gi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Au)},(e,t)=>(t-e)/Au,e=>e.getUTCMinutes());OD.range;const DD=gi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Af-e.getMinutes()*Au)},(e,t)=>{e.setTime(+e+t*ff)},(e,t)=>(t-e)/ff,e=>e.getHours());DD.range;const PD=gi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ff)},(e,t)=>(t-e)/ff,e=>e.getUTCHours());PD.range;const pw=gi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Au)/jf,e=>e.getDate()-1);pw.range;const AN=gi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jf,e=>e.getUTCDate()-1);AN.range;const one=gi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jf,e=>Math.floor(e/jf));one.range;function jp(e){return gi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Au)/jD)}const fN=jp(0),sS=jp(1),XQe=jp(2),YQe=jp(3),Vv=jp(4),JQe=jp(5),ZQe=jp(6);fN.range;sS.range;XQe.range;YQe.range;Vv.range;JQe.range;ZQe.range;function Fp(e){return gi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jD)}const hN=Fp(0),iS=Fp(1),eHe=Fp(2),tHe=Fp(3),zv=Fp(4),rHe=Fp(5),nHe=Fp(6);hN.range;iS.range;eHe.range;tHe.range;zv.range;rHe.range;nHe.range;const RD=gi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());RD.range;const LD=gi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LD.range;const Ff=gi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ff.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ff.range;const Of=gi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Of.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Of.range;function lne(e,t,r,n,a,s){const i=[[Pm,1,Af],[Pm,5,5*Af],[Pm,15,15*Af],[Pm,30,30*Af],[s,1,Au],[s,5,5*Au],[s,15,15*Au],[s,30,30*Au],[a,1,ff],[a,3,3*ff],[a,6,6*ff],[a,12,12*ff],[n,1,jf],[n,2,2*jf],[r,1,jD],[t,1,mV],[t,3,3*mV],[e,1,Gk]];function o(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),x=p?p.range(u,+d+1):[];return m?x.reverse():x}function l(u,d,f){const m=Math.abs(d-u)/f,p=ED(([,,b])=>b).right(i,m);if(p===i.length)return e.every(Rj(u/Gk,d/Gk,f));if(p===0)return aS.every(Math.max(Rj(u,d,f),1));const[x,g]=i[m/i[p-1][2]<i[p][2]/m?p-1:p];return x.every(g)}return[o,l]}const[aHe,sHe]=lne(Of,LD,hN,one,PD,OD),[iHe,oHe]=lne(Ff,RD,fN,pw,DD,FD);function qk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function O1(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lHe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=D1(a),d=P1(a),f=D1(s),m=P1(s),p=D1(i),x=P1(i),g=D1(o),b=P1(o),y=D1(l),_=P1(l),S={a:Z,A:H,b:z,B:G,c:null,d:yV,e:yV,f:IHe,g:QHe,G:VHe,H:BHe,I:kHe,j:THe,L:cne,m:jHe,M:FHe,p:ne,q:R,Q:CV,s:_V,S:OHe,u:DHe,U:PHe,V:RHe,w:LHe,W:UHe,x:null,X:null,y:MHe,Y:HHe,Z:zHe,"%":EV},B={a:q,A:Y,b:te,B:ie,c:null,d:wV,e:wV,f:qHe,g:aVe,G:iVe,H:$He,I:KHe,j:GHe,L:dne,m:WHe,M:XHe,p:pe,q:oe,Q:CV,s:_V,S:YHe,u:JHe,U:ZHe,V:eVe,w:tVe,W:rVe,x:null,X:null,y:nVe,Y:sVe,Z:oVe,"%":EV},I={a:P,A:O,b:F,B:M,c:Q,d:xV,e:xV,f:CHe,g:vV,G:gV,H:bV,I:bV,j:bHe,L:EHe,m:xHe,M:yHe,p:N,q:vHe,Q:SHe,s:NHe,S:wHe,u:fHe,U:hHe,V:mHe,w:AHe,W:pHe,x:J,X:W,y:vV,Y:gV,Z:gHe,"%":_He};S.x=D(r,S),S.X=D(n,S),S.c=D(t,S),B.x=D(r,B),B.X=D(n,B),B.c=D(t,B);function D(ce,ge){return function(Fe){var re=[],Ne=-1,Oe=0,Ce=ce.length,fe,Ie,He;for(Fe instanceof Date||(Fe=new Date(+Fe));++Ne<Ce;)ce.charCodeAt(Ne)===37&&(re.push(ce.slice(Oe,Ne)),(Ie=pV[fe=ce.charAt(++Ne)])!=null?fe=ce.charAt(++Ne):Ie=fe==="e"?" ":"0",(He=ge[fe])&&(fe=He(Fe,Ie)),re.push(fe),Oe=Ne+1);return re.push(ce.slice(Oe,Ne)),re.join("")}}function E(ce,ge){return function(Fe){var re=O1(1900,void 0,1),Ne=C(re,ce,Fe+="",0),Oe,Ce;if(Ne!=Fe.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ge&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Oe=Wk(O1(re.y,0,1)),Ce=Oe.getUTCDay(),Oe=Ce>4||Ce===0?iS.ceil(Oe):iS(Oe),Oe=AN.offset(Oe,(re.V-1)*7),re.y=Oe.getUTCFullYear(),re.m=Oe.getUTCMonth(),re.d=Oe.getUTCDate()+(re.w+6)%7):(Oe=qk(O1(re.y,0,1)),Ce=Oe.getDay(),Oe=Ce>4||Ce===0?sS.ceil(Oe):sS(Oe),Oe=pw.offset(Oe,(re.V-1)*7),re.y=Oe.getFullYear(),re.m=Oe.getMonth(),re.d=Oe.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ce="Z"in re?Wk(O1(re.y,0,1)).getUTCDay():qk(O1(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ce+5)%7:re.w+re.U*7-(Ce+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,Wk(re)):qk(re)}}function C(ce,ge,Fe,re){for(var Ne=0,Oe=ge.length,Ce=Fe.length,fe,Ie;Ne<Oe;){if(re>=Ce)return-1;if(fe=ge.charCodeAt(Ne++),fe===37){if(fe=ge.charAt(Ne++),Ie=I[fe in pV?ge.charAt(Ne++):fe],!Ie||(re=Ie(ce,Fe,re))<0)return-1}else if(fe!=Fe.charCodeAt(re++))return-1}return re}function N(ce,ge,Fe){var re=u.exec(ge.slice(Fe));return re?(ce.p=d.get(re[0].toLowerCase()),Fe+re[0].length):-1}function P(ce,ge,Fe){var re=p.exec(ge.slice(Fe));return re?(ce.w=x.get(re[0].toLowerCase()),Fe+re[0].length):-1}function O(ce,ge,Fe){var re=f.exec(ge.slice(Fe));return re?(ce.w=m.get(re[0].toLowerCase()),Fe+re[0].length):-1}function F(ce,ge,Fe){var re=y.exec(ge.slice(Fe));return re?(ce.m=_.get(re[0].toLowerCase()),Fe+re[0].length):-1}function M(ce,ge,Fe){var re=g.exec(ge.slice(Fe));return re?(ce.m=b.get(re[0].toLowerCase()),Fe+re[0].length):-1}function Q(ce,ge,Fe){return C(ce,t,ge,Fe)}function J(ce,ge,Fe){return C(ce,r,ge,Fe)}function W(ce,ge,Fe){return C(ce,n,ge,Fe)}function Z(ce){return i[ce.getDay()]}function H(ce){return s[ce.getDay()]}function z(ce){return l[ce.getMonth()]}function G(ce){return o[ce.getMonth()]}function ne(ce){return a[+(ce.getHours()>=12)]}function R(ce){return 1+~~(ce.getMonth()/3)}function q(ce){return i[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function te(ce){return l[ce.getUTCMonth()]}function ie(ce){return o[ce.getUTCMonth()]}function pe(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var ge=D(ce+="",S);return ge.toString=function(){return ce},ge},parse:function(ce){var ge=E(ce+="",!1);return ge.toString=function(){return ce},ge},utcFormat:function(ce){var ge=D(ce+="",B);return ge.toString=function(){return ce},ge},utcParse:function(ce){var ge=E(ce+="",!0);return ge.toString=function(){return ce},ge}}}var pV={"-":"",_:" ",0:"0"},Mi=/^\s*\d+/,cHe=/^%/,uHe=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function dHe(e){return e.replace(uHe,"\\$&")}function D1(e){return new RegExp("^(?:"+e.map(dHe).join("|")+")","i")}function P1(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function AHe(e,t,r){var n=Mi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function fHe(e,t,r){var n=Mi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function hHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function mHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function pHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function gV(e,t,r){var n=Mi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function vV(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function gHe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function vHe(e,t,r){var n=Mi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function xHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function xV(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function bHe(e,t,r){var n=Mi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bV(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function yHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function wHe(e,t,r){var n=Mi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function EHe(e,t,r){var n=Mi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function CHe(e,t,r){var n=Mi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _He(e,t,r){var n=cHe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function SHe(e,t,r){var n=Mi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function NHe(e,t,r){var n=Mi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yV(e,t){return Hn(e.getDate(),t,2)}function BHe(e,t){return Hn(e.getHours(),t,2)}function kHe(e,t){return Hn(e.getHours()%12||12,t,2)}function THe(e,t){return Hn(1+pw.count(Ff(e),e),t,3)}function cne(e,t){return Hn(e.getMilliseconds(),t,3)}function IHe(e,t){return cne(e,t)+"000"}function jHe(e,t){return Hn(e.getMonth()+1,t,2)}function FHe(e,t){return Hn(e.getMinutes(),t,2)}function OHe(e,t){return Hn(e.getSeconds(),t,2)}function DHe(e){var t=e.getDay();return t===0?7:t}function PHe(e,t){return Hn(fN.count(Ff(e)-1,e),t,2)}function une(e){var t=e.getDay();return t>=4||t===0?Vv(e):Vv.ceil(e)}function RHe(e,t){return e=une(e),Hn(Vv.count(Ff(e),e)+(Ff(e).getDay()===4),t,2)}function LHe(e){return e.getDay()}function UHe(e,t){return Hn(sS.count(Ff(e)-1,e),t,2)}function MHe(e,t){return Hn(e.getFullYear()%100,t,2)}function QHe(e,t){return e=une(e),Hn(e.getFullYear()%100,t,2)}function HHe(e,t){return Hn(e.getFullYear()%1e4,t,4)}function VHe(e,t){var r=e.getDay();return e=r>=4||r===0?Vv(e):Vv.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function zHe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function wV(e,t){return Hn(e.getUTCDate(),t,2)}function $He(e,t){return Hn(e.getUTCHours(),t,2)}function KHe(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function GHe(e,t){return Hn(1+AN.count(Of(e),e),t,3)}function dne(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function qHe(e,t){return dne(e,t)+"000"}function WHe(e,t){return Hn(e.getUTCMonth()+1,t,2)}function XHe(e,t){return Hn(e.getUTCMinutes(),t,2)}function YHe(e,t){return Hn(e.getUTCSeconds(),t,2)}function JHe(e){var t=e.getUTCDay();return t===0?7:t}function ZHe(e,t){return Hn(hN.count(Of(e)-1,e),t,2)}function Ane(e){var t=e.getUTCDay();return t>=4||t===0?zv(e):zv.ceil(e)}function eVe(e,t){return e=Ane(e),Hn(zv.count(Of(e),e)+(Of(e).getUTCDay()===4),t,2)}function tVe(e){return e.getUTCDay()}function rVe(e,t){return Hn(iS.count(Of(e)-1,e),t,2)}function nVe(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function aVe(e,t){return e=Ane(e),Hn(e.getUTCFullYear()%100,t,2)}function sVe(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function iVe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zv(e):zv.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function oVe(){return"+0000"}function EV(){return"%"}function CV(e){return+e}function _V(e){return Math.floor(+e/1e3)}var Ig,fne,hne;lVe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lVe(e){return Ig=lHe(e),fne=Ig.format,Ig.parse,hne=Ig.utcFormat,Ig.utcParse,Ig}function cVe(e){return new Date(e)}function uVe(e){return e instanceof Date?+e:+new Date(+e)}function UD(e,t,r,n,a,s,i,o,l,u){var d=ND(),f=d.invert,m=d.domain,p=u(".%L"),x=u(":%S"),g=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),S=u("%B"),B=u("%Y");function I(D){return(l(D)<D?p:o(D)<D?x:i(D)<D?g:s(D)<D?b:n(D)<D?a(D)<D?y:_:r(D)<D?S:B)(D)}return d.invert=function(D){return new Date(f(D))},d.domain=function(D){return arguments.length?m(Array.from(D,uVe)):m().map(cVe)},d.ticks=function(D){var E=m();return e(E[0],E[E.length-1],D??10)},d.tickFormat=function(D,E){return E==null?I:u(E)},d.nice=function(D){var E=m();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?m(ene(E,D)):d},d.copy=function(){return mw(d,UD(e,t,r,n,a,s,i,o,l,u))},d}function dVe(){return xu.apply(UD(iHe,oHe,Ff,RD,fN,pw,DD,FD,Pm,fne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AVe(){return xu.apply(UD(aHe,sHe,Of,LD,hN,AN,PD,OD,Pm,hne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mN(){var e=0,t=1,r,n,a,s,i=Zo,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(m){var p,x;return arguments.length?([p,x]=m,i=f(p,x),u):[i(0),i(1)]}}return u.range=d(px),u.rangeRound=d(sD),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function V0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mne(){var e=H0(mN()(Zo));return e.copy=function(){return V0(e,mne())},$f.apply(e,arguments)}function pne(){var e=BD(mN()).domain([1,10]);return e.copy=function(){return V0(e,pne()).base(e.base())},$f.apply(e,arguments)}function gne(){var e=kD(mN());return e.copy=function(){return V0(e,gne()).constant(e.constant())},$f.apply(e,arguments)}function MD(){var e=TD(mN());return e.copy=function(){return V0(e,MD()).exponent(e.exponent())},$f.apply(e,arguments)}function fVe(){return MD.apply(null,arguments).exponent(.5)}function vne(){var e=[],t=Zo;function r(n){if(n!=null&&!isNaN(n=+n))return t((hw(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(p0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>xQe(e,s/n))},r.copy=function(){return vne(t).domain(e)},$f.apply(r,arguments)}function pN(){var e=0,t=.5,r=1,n=1,a,s,i,o,l,u=Zo,d,f=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+d(g))-s)*(n*g<n*s?o:l),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function x(g){return function(b){var y,_,S;return arguments.length?([y,_,S]=b,u=e8e(g,[y,_,S]),p):[u(0),u(.5),u(1)]}}return p.range=x(px),p.rangeRound=x(sD),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return d=g,a=g(e),s=g(t),i=g(r),o=a===s?0:.5/(s-a),l=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function xne(){var e=H0(pN()(Zo));return e.copy=function(){return V0(e,xne())},$f.apply(e,arguments)}function bne(){var e=BD(pN()).domain([.1,1,10]);return e.copy=function(){return V0(e,bne()).base(e.base())},$f.apply(e,arguments)}function yne(){var e=kD(pN());return e.copy=function(){return V0(e,yne()).constant(e.constant())},$f.apply(e,arguments)}function QD(){var e=TD(pN());return e.copy=function(){return V0(e,QD()).exponent(e.exponent())},$f.apply(e,arguments)}function hVe(){return QD.apply(null,arguments).exponent(.5)}function mVe(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const pVe=mVe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Na(e){return function(){return e}}const wne=Math.cos,oS=Math.sin,dd=Math.sqrt,lS=Math.PI,gN=2*lS;function HD(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new CQe(t)}function VD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ene(e){this._context=e}Ene.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vN(e){return new Ene(e)}function Cne(e){return e[0]}function _ne(e){return e[1]}function Sne(e,t){var r=Na(!0),n=null,a=vN,s=null,i=HD(o);e=typeof e=="function"?e:e===void 0?Cne:Na(e),t=typeof t=="function"?t:t===void 0?_ne:Na(t);function o(l){var u,d=(l=VD(l)).length,f,m=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(f,u,l),+t(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Na(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Na(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Na(!!l),o):r},o.curve=function(l){return arguments.length?(a=l,n!=null&&(s=a(n)),o):a},o.context=function(l){return arguments.length?(l==null?n=s=null:s=a(n=l),o):n},o}function PE(e,t,r){var n=null,a=Na(!0),s=null,i=vN,o=null,l=HD(u);e=typeof e=="function"?e:e===void 0?Cne:Na(+e),t=typeof t=="function"?t:Na(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?_ne:Na(+r);function u(f){var m,p,x,g=(f=VD(f)).length,b,y=!1,_,S=new Array(g),B=new Array(g);for(s==null&&(o=i(_=l())),m=0;m<=g;++m){if(!(m<g&&a(b=f[m],m,f))===y)if(y=!y)p=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=m-1;x>=p;--x)o.point(S[x],B[x]);o.lineEnd(),o.areaEnd()}y&&(S[m]=+e(b,m,f),B[m]=+t(b,m,f),o.point(n?+n(b,m,f):S[m],r?+r(b,m,f):B[m]))}if(_)return o=null,_+""||null}function d(){return Sne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Na(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Na(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Na(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Na(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Na(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Na(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Na(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Nne{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function gVe(e){return new Nne(e,!0)}function vVe(e){return new Nne(e,!1)}const zD={draw(e,t){const r=dd(t/lS);e.moveTo(r,0),e.arc(0,0,r,0,gN)}},xVe={draw(e,t){const r=dd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Bne=dd(1/3),bVe=Bne*2,yVe={draw(e,t){const r=dd(t/bVe),n=r*Bne;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},wVe={draw(e,t){const r=dd(t),n=-r/2;e.rect(n,n,r,r)}},EVe=.8908130915292852,kne=oS(lS/10)/oS(7*lS/10),CVe=oS(gN/10)*kne,_Ve=-wne(gN/10)*kne,SVe={draw(e,t){const r=dd(t*EVe),n=CVe*r,a=_Ve*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=gN*s/5,o=wne(i),l=oS(i);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*a,l*n+o*a)}e.closePath()}},Xk=dd(3),NVe={draw(e,t){const r=-dd(t/(Xk*3));e.moveTo(0,r*2),e.lineTo(-Xk*r,-r),e.lineTo(Xk*r,-r),e.closePath()}},qc=-.5,Wc=dd(3)/2,Hj=1/dd(12),BVe=(Hj/2+1)*3,kVe={draw(e,t){const r=dd(t/BVe),n=r/2,a=r*Hj,s=n,i=r*Hj+r,o=-s,l=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(qc*n-Wc*a,Wc*n+qc*a),e.lineTo(qc*s-Wc*i,Wc*s+qc*i),e.lineTo(qc*o-Wc*l,Wc*o+qc*l),e.lineTo(qc*n+Wc*a,qc*a-Wc*n),e.lineTo(qc*s+Wc*i,qc*i-Wc*s),e.lineTo(qc*o+Wc*l,qc*l-Wc*o),e.closePath()}};function TVe(e,t){let r=null,n=HD(a);e=typeof e=="function"?e:Na(e||zD),t=typeof t=="function"?t:Na(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Na(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Na(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function cS(){}function uS(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Tne(e){this._context=e}Tne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IVe(e){return new Tne(e)}function Ine(e){this._context=e}Ine.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jVe(e){return new Ine(e)}function jne(e){this._context=e}jne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:uS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FVe(e){return new jne(e)}function Fne(e){this._context=e}Fne.prototype={areaStart:cS,areaEnd:cS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function OVe(e){return new Fne(e)}function SV(e){return e<0?-1:1}function NV(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(SV(s)+SV(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function BV(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Yk(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function dS(e){this._context=e}dS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yk(this,this._t0,BV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yk(this,BV(this,r=NV(this,e,t)),r);break;default:Yk(this,this._t0,r=NV(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function One(e){this._context=new Dne(e)}(One.prototype=Object.create(dS.prototype)).point=function(e,t){dS.prototype.point.call(this,t,e)};function Dne(e){this._context=e}Dne.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function DVe(e){return new dS(e)}function PVe(e){return new One(e)}function Pne(e){this._context=e}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=kV(e),a=kV(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kV(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function RVe(e){return new Pne(e)}function xN(e,t){this._context=e,this._t=t}xN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function LVe(e){return new xN(e,.5)}function UVe(e){return new xN(e,0)}function MVe(e){return new xN(e,1)}function $v(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Vj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function QVe(e,t){return e[t]}function HVe(e){const t=[];return t.key=e,t}function VVe(){var e=Na([]),t=Vj,r=$v,n=QVe;function a(s){var i=Array.from(e.apply(this,arguments),HVe),o,l=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=VD(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Na(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Na(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?Vj:typeof s=="function"?s:Na(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??$v,a):r},a}function zVe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}$v(e,t)}}function $Ve(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}$v(e,t)}}function KVe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,m=d[n-1][1]||0,p=(f-m)/2,x=0;x<o;++x){var g=e[t[x]],b=g[n][1]||0,y=g[n-1][1]||0;p+=b-y}l+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,$v(e,t)}}var GVe={value:function(){}};function Rne(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new BC(r)}function BC(e){this._=e}function qVe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}BC.prototype=Rne.prototype={constructor:BC,on:function(e,t){var r=this._,n=qVe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=WVe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=TV(r[a],e.name,t);else if(t==null)for(a in r)r[a]=TV(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new BC(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function WVe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function TV(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=GVe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const XVe=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Rne},Symbol.toStringTag,{value:"Module"})),YVe=Ece(XVe);var Jk,IV;function JVe(){if(IV)return Jk;IV=1;const e=YVe.dispatch,t=Math.PI/180,r={archimedean:g,rectangular:b},n=64,a=2048;Jk=function(){var B=[256,256],I=s,D=i,E=l,C=o,N=o,P=u,O=d,F=g,M=[],Q=1/0,J=e("word","end"),W=null,Z=Math.random,H={},z=_;H.canvas=function(R){return arguments.length?(z=S(R),H):z},H.start=function(){var R=G(z()),q=y((B[0]>>5)*B[1]),Y=null,te=M.length,ie=-1,pe=[],oe=M.map(function(ge,Fe){return ge.text=I.call(this,ge,Fe),ge.font=D.call(this,ge,Fe),ge.style=C.call(this,ge,Fe),ge.weight=N.call(this,ge,Fe),ge.rotate=P.call(this,ge,Fe),ge.size=~~E.call(this,ge,Fe),ge.padding=O.call(this,ge,Fe),ge}).sort(function(ge,Fe){return Fe.size-ge.size});return W&&clearInterval(W),W=setInterval(ce,0),ce(),H;function ce(){for(var ge=Date.now();Date.now()-ge<Q&&++ie<te&&W;){var Fe=oe[ie];Fe.x=B[0]*(Z()+.5)>>1,Fe.y=B[1]*(Z()+.5)>>1,f(R,Fe,oe,ie),Fe.hasText&&ne(q,Fe,Y)&&(pe.push(Fe),J.call("word",H,Fe),Y?p(Y,Fe):Y=[{x:Fe.x+Fe.x0,y:Fe.y+Fe.y0},{x:Fe.x+Fe.x1,y:Fe.y+Fe.y1}],Fe.x-=B[0]>>1,Fe.y-=B[1]>>1)}ie>=te&&(H.stop(),J.call("end",H,pe,Y))}},H.stop=function(){W&&(clearInterval(W),W=null);for(const R of M)delete R.sprite;return H};function G(R){const q=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const Y=Math.sqrt(q.getImageData(0,0,1,1).data.length>>2);return R.width=(n<<5)/Y,R.height=a/Y,q.fillStyle=q.strokeStyle="red",{context:q,ratio:Y}}function ne(R,q,Y){B[0],B[1];for(var te=q.x,ie=q.y,pe=Math.sqrt(B[0]*B[0]+B[1]*B[1]),oe=F(B),ce=Z()<.5?1:-1,ge=-ce,Fe,re,Ne;(Fe=oe(ge+=ce))&&(re=~~Fe[0],Ne=~~Fe[1],!(Math.min(Math.abs(re),Math.abs(Ne))>=pe));)if(q.x=te+re,q.y=ie+Ne,!(q.x+q.x0<0||q.y+q.y0<0||q.x+q.x1>B[0]||q.y+q.y1>B[1])&&(!Y||x(q,Y))&&!m(q,R,B[0])){for(var Oe=q.sprite,Ce=q.width>>5,fe=B[0]>>5,Ie=q.x-(Ce<<4),He=Ie&127,Xe=32-He,dt=q.y1-q.y0,Et=(q.y+q.y0)*fe+(Ie>>5),Tt,Ct=0;Ct<dt;Ct++){Tt=0;for(var Dt=0;Dt<=Ce;Dt++)R[Et+Dt]|=Tt<<Xe|(Dt<Ce?(Tt=Oe[Ct*Ce+Dt])>>>He:0);Et+=fe}return!0}return!1}return H.timeInterval=function(R){return arguments.length?(Q=R??1/0,H):Q},H.words=function(R){return arguments.length?(M=R,H):M},H.size=function(R){return arguments.length?(B=[+R[0],+R[1]],H):B},H.font=function(R){return arguments.length?(D=S(R),H):D},H.fontStyle=function(R){return arguments.length?(C=S(R),H):C},H.fontWeight=function(R){return arguments.length?(N=S(R),H):N},H.rotate=function(R){return arguments.length?(P=S(R),H):P},H.text=function(R){return arguments.length?(I=S(R),H):I},H.spiral=function(R){return arguments.length?(F=r[R]||R,H):F},H.fontSize=function(R){return arguments.length?(E=S(R),H):E},H.padding=function(R){return arguments.length?(O=S(R),H):O},H.random=function(R){return arguments.length?(Z=R,H):Z},H.on=function(){var R=J.on.apply(J,arguments);return R===J?H:R},H};function s(B){return B.text}function i(){return"serif"}function o(){return"normal"}function l(B){return Math.sqrt(B.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(B,I,D,E){if(!I.sprite){var C=B.context,N=B.ratio;C.clearRect(0,0,(n<<5)/N,a/N);var P=0,O=0,F=0,M=D.length;for(--E;++E<M;){I=D[E],C.save(),C.font=I.style+" "+I.weight+" "+~~((I.size+1)/N)+"px "+I.font;const Fe=C.measureText(I.text),re=-Math.floor(Fe.width/2);let Ne=(Fe.width+1)*N,Oe=I.size<<1;if(I.rotate){var Q=Math.sin(I.rotate*t),J=Math.cos(I.rotate*t),W=Ne*J,Z=Ne*Q,H=Oe*J,z=Oe*Q;Ne=Math.max(Math.abs(W+z),Math.abs(W-z))+31>>5<<5,Oe=~~Math.max(Math.abs(Z+H),Math.abs(Z-H))}else Ne=Ne+31>>5<<5;if(Oe>F&&(F=Oe),P+Ne>=n<<5&&(P=0,O+=F,F=0),O+Oe>=a)break;C.translate((P+(Ne>>1))/N,(O+(Oe>>1))/N),I.rotate&&C.rotate(I.rotate*t),C.fillText(I.text,re,0),I.padding&&(C.lineWidth=2*I.padding,C.strokeText(I.text,re,0)),C.restore(),I.width=Ne,I.height=Oe,I.xoff=P,I.yoff=O,I.x1=Ne>>1,I.y1=Oe>>1,I.x0=-I.x1,I.y0=-I.y1,I.hasText=!0,P+=Ne}for(var G=C.getImageData(0,0,(n<<5)/N,a/N).data,ne=[];--E>=0;)if(I=D[E],!!I.hasText){for(var R=I.width,q=R>>5,Y=I.y1-I.y0,te=0;te<Y*q;te++)ne[te]=0;if(P=I.xoff,P==null)return;O=I.yoff;for(var ie=0,pe=-1,oe=0;oe<Y;oe++){for(var te=0;te<R;te++){var ce=q*oe+(te>>5),ge=G[(O+oe)*(n<<5)+(P+te)<<2]?1<<31-te%32:0;ne[ce]|=ge,ie|=ge}ie?pe=oe:(I.y0++,Y--,oe--,O++)}I.y1=I.y0+pe,I.sprite=ne.slice(0,(I.y1-I.y0)*q)}}}function m(B,I,D){D>>=5;for(var E=B.sprite,C=B.width>>5,N=B.x-(C<<4),P=N&127,O=32-P,F=B.y1-B.y0,M=(B.y+B.y0)*D+(N>>5),Q,J=0;J<F;J++){Q=0;for(var W=0;W<=C;W++)if((Q<<O|(W<C?(Q=E[J*C+W])>>>P:0))&I[M+W])return!0;M+=D}return!1}function p(B,I){var D=B[0],E=B[1];I.x+I.x0<D.x&&(D.x=I.x+I.x0),I.y+I.y0<D.y&&(D.y=I.y+I.y0),I.x+I.x1>E.x&&(E.x=I.x+I.x1),I.y+I.y1>E.y&&(E.y=I.y+I.y1)}function x(B,I){return B.x+B.x1>I[0].x&&B.x+B.x0<I[1].x&&B.y+B.y1>I[0].y&&B.y+B.y0<I[1].y}function g(B){var I=B[0]/B[1];return function(D){return[I*(D*=.1)*Math.cos(D),D*Math.sin(D)]}}function b(B){var I=4,D=I*B[0]/B[1],E=0,C=0;return function(N){var P=N<0?-1:1;switch(Math.sqrt(1+4*P*N)-P&3){case 0:E+=D;break;case 1:C+=I;break;case 2:E-=D;break;default:C-=I;break}return[E,C]}}function y(B){for(var I=[],D=-1;++D<B;)I[D]=0;return I}function _(){return document.createElement("canvas")}function S(B){return typeof B=="function"?B:function(){return B}}return Jk}var ZVe=JVe();const eze=il(ZVe),tze=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),rze=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),nze=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aze=e=>{const[t,r]=T.useState([]),[n,a]=T.useState(!0),[s,i]=T.useState(null),o=T.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return T.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let l;const u=d=>{r(d),a(!1),i(null)};if(o)l=iQe(u);else{const d=e.email||e.id||"";l=oQe(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},sze=({plan:e,onClose:t})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(rze,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),jV=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],ize=["1 Medio","2 Medio","3 Medio","4 Medio"],oze=({words:e})=>{const t=T.useRef(null);return T.useEffect(()=>{if(!e.length||!t.current)return;const r=ou(t.current);r.selectAll("*").remove();const n=eze().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>uN(pVe)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),c.jsx("svg",{ref:t})},lze=({planificaciones:e})=>{const[t,r]=T.useState("todos"),[n,a]=T.useState("todos"),s=T.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=T.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=T.useMemo(()=>{const d=jV.reduce((f,m)=>({...f,[m]:0}),{});return i.forEach(f=>{var m,p;return(p=(m=f.reflexionUnidad)==null?void 0:m.ordenHabilidades)==null?void 0:p.forEach((x,g)=>{d[x]!==void 0&&(d[x]+=jV.length-g)})}),Object.entries(d).map(([f,m])=>({text:f,value:m})).sort((f,m)=>m.value-f.value)},[i]),l=T.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),m=(i.map(p=>{var x,g;return`${((x=p.reflexionUnidad)==null?void 0:x.fortalezas)||""} ${((g=p.reflexionUnidad)==null?void 0:g.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,x)=>(d.has(x)||(p[x]=(p[x]||0)+1),p),{});return Object.entries(m).map(([p,x])=>({text:p,value:x})).sort((p,x)=>x.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),ize.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(oze,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},cze=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=aze(e),[s,i]=T.useState("seguimiento"),[o,l]=T.useState("1"),[u,d]=T.useState(null),[f,m]=T.useState(null),p=T.useMemo(()=>{const b={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),x=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(r)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(nze,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const g=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:x.map(b=>c.jsx("button",{onClick:()=>l(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:Pi.map(b=>{const y=p.filter(S=>S.asignatura===b);if(y.length===0)return null;const _=u===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(_?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${_?"rotate-180":""}`,children:c.jsx(tze,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:y.map(S=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>m(S),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:S.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",S.autor||"N/A"]})]})},S.id))})})]},b)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&g(),s==="analisis"&&c.jsx(lze,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&c.jsx(sze,{plan:f,onClose:()=>m(null)})]})},bN="analisisTaxonomicos",uze=async()=>{try{const e=tr(Ft(Mr,bN),qr("uploadDate","desc"));return(await ti(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},dze=async e=>{if(!e)return[];try{const t=tr(Ft(Mr,bN),Mn("userId","==",e),qr("uploadDate","desc"));return(await ti(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},Aze=async e=>{try{return{id:(await da(Ft(Mr,bN),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},fze=async e=>{try{const t=br(Mr,bN,e);await ni(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},FV=["1 Medio","2 Medio","3 Medio","4 Medio"],af=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],jg={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},hze=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),OV=({currentUser:e})=>{const[t,r]=T.useState([]),[n,a]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState(null),[u,d]=T.useState(""),[f,m]=T.useState(!1),[p,x]=T.useState(null),[g,b]=T.useState(null),[y,_]=T.useState(""),[S,B]=T.useState(""),[I,D]=T.useState(""),[E,C]=T.useState(""),[N,P]=T.useState("resumen"),O=T.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const z=e.profile==="SUBDIRECCION"?await uze():await dze(e.id);r(z),i(null)}catch(z){console.error("Error al cargar anlisis:",z),i("No se pudieron cargar los anlisis.")}finally{a(!1)}}},[e]);T.useEffect(()=>{O()},[O]);const F=async z=>{var ne;const G=(ne=z.target.files)==null?void 0:ne[0];if(G){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(G.type)){i("Por favor, suba un archivo PDF o DOCX vlido.");return}x(G),d(G.name),i(null);const q=new FileReader;q.onloadend=()=>{var te;const Y=(te=q.result)==null?void 0:te.split(",")[1];if(!Y){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),b(null);return}b({mimeType:G.type,data:Y})},q.onerror=()=>i("Error al leer el archivo."),q.readAsDataURL(G)}},M=async()=>{if(!u.trim()||!g){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!S){i("Seleccione Nivel y Asignatura antes de analizar.");return}m(!0),i(null);const z=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido.
        `,G={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:af}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:af.reduce((ne,R)=>({...ne,[R]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{S0("Anlisis Taxonmico",e);const ne="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new xs(ne).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:G}}),Y={inlineData:{mimeType:g.mimeType,data:g.data}},ie=(await q.generateContent([z,Y])).response.text();let pe;try{pe=JSON.parse(ie)}catch(ge){throw console.error("Error al parsear JSON:",ge),console.error("Respuesta recibida (no es JSON vlido):",ie),new Error("La respuesta de la IA no tuvo un formato vlido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:pe.analysisResults,summary:pe.summary,nivel:y,asignatura:S},ce=await Aze(oe);await O(),l(ce),d(""),x(null),b(null),_(""),B("")}catch(ne){console.error(ne);const R=ne instanceof Error?ne.message:"Hubo un error al analizar el documento.";i(R)}finally{m(!1)}},Q=async z=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await fze(z),await O(),(o==null?void 0:o.id)===z&&l(null)}catch{i("No se pudo eliminar el anlisis.")}},J=T.useMemo(()=>t.filter(z=>{const G=I?z.nivel===I:!0,ne=E?z.asignatura===E:!0;return G&&ne}),[t,I,E]),W=T.useMemo(()=>{const z={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};J.forEach(ne=>{af.forEach(R=>{var Y;const q=((Y=ne.summary)==null?void 0:Y[R])||0;z[R]+=q})});const G=Object.values(z).reduce((ne,R)=>ne+R,0);return{acc:z,total:G}},[J]),Z=T.useMemo(()=>{const z=new Map;J.forEach(ne=>{const R=ne.asignatura||"Sin asignatura";z.has(R)||z.set(R,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const q=z.get(R);af.forEach(Y=>{var te;q[Y]+=((te=ne.summary)==null?void 0:te[Y])||0})});const G=Array.from(z.entries()).map(([ne,R])=>({asignatura:ne,counts:R,total:Object.values(R).reduce((q,Y)=>q+Y,0)}));return G.sort((ne,R)=>R.total-ne.total),G},[J]),H=T.useMemo(()=>o?Object.values(o.summary).reduce((z,G)=>z+(G||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:F,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:y,onChange:z=>_(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),FV.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{value:S,onChange:z=>B(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Pi.map(z=>c.jsx("option",{value:z,children:z},z))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:z=>d(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:M,disabled:f||!g,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?c.jsx(hze,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),n?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(z=>c.jsxs("button",{onClick:()=>l(z),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===z.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:z.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(z.uploadDate).toLocaleString("es-CL")}),(z.nivel||z.asignatura)&&c.jsxs("p",{className:"text-xs text-slate-500",children:[z.nivel||"Nivel s/i","  ",z.asignatura||"Asignatura s/i"]})]},z.id))})]})]}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),c.jsxs("select",{value:I,onChange:z=>D(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos"}),FV.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),c.jsxs("select",{value:E,onChange:z=>C(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas"}),Pi.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsx("button",{type:"button",onClick:()=>{D(""),C("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>P("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),c.jsx("button",{onClick:()=>P("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${N==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),N==="resumen"?c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," anlisis considerados"]})]}),c.jsx("div",{className:"space-y-3",children:af.map(z=>{const G=W.acc[z],ne=W.total>0?G/W.total*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[G," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${jg[z]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},z)})}),c.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:af.map(z=>c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[c.jsx("span",{className:"text-sm",children:z}),c.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${jg[z]}`,children:W.acc[z]})]},z))})]}):c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),c.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Z.length," asignaturas comparadas"]})]}),Z.length===0?c.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):c.jsx("div",{className:"space-y-5",children:Z.map(z=>{const G=z.total||1;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:z.asignatura}),c.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[z.total," tems"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:af.map(ne=>{const R=z.counts[ne]||0,q=R/G*100;return c.jsx("div",{className:`${jg[ne]} h-5`,style:{width:`${q}%`},title:`${ne}: ${R} (${q.toFixed(0)}%)`},ne)})}),c.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:af.map(ne=>c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:`inline-block w-3 h-3 rounded ${jg[ne]}`}),c.jsx("span",{children:ne})]},ne))})]},z.asignatura)})})]})]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&c.jsxs(c.Fragment,{children:[" "," ",o.nivel||"Nivel s/i","  ",o.asignatura||"Asignatura s/i"]})]})]}),c.jsx("button",{onClick:()=>Q(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",H," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:af.map(z=>{const G=o.summary[z]||0,ne=H>0?G/H*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[G," (",ne.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${jg[z]} h-4 rounded-full`,style:{width:`${ne}%`}})})]},z)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((z,G)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:z.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${jg[z.habilidadBloom]}`,children:z.habilidadBloom})})]},G))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},AS="empresas_practicas",mze="usuarios",$D="rutas_supervision",KD=e=>{const t=e.data();return{id:e.id,...t}};async function pze(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificacin:",n),null}}const gze=e=>{const t=tr(Ft(Nt,AS),qr("nombre","asc"));return yr(t,r=>{const n=r.docs.map(a=>KD(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},vze=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await pze(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=br(Nt,AS,n);return await io(s,a,{merge:!0}),n}else return(await da(Ft(Nt,AS),{...r,createdAt:P6()})).id},xze=async e=>{const t=br(Nt,AS,e);await ni(t)},bze=e=>{const t=tr(Ft(Nt,mze),Mn("profile","==","PROFESORADO"),qr("nombreCompleto","asc"));return yr(t,r=>{const n=r.docs.map(a=>KD(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},yze=async e=>(await da(Ft(Nt,$D),{...e,createdAt:P6()})).id,wze=e=>{const t=tr(Ft(Nt,$D),qr("createdAt","desc"));return yr(t,r=>{const n=r.docs.map(a=>KD(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Eze=async e=>{const t=br(Nt,$D,e);await ni(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jm=function(){return Jm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Jm.apply(this,arguments)};function Cze(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{l(n.next(u))}catch(d){s(d)}}function o(u){try{l(n.throw(u))}catch(d){s(d)}}function l(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}l((n=n.apply(e,[])).next())})}function _ze(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([l,u])}}}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(this,arguments)}function Zm(e){return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function Lne(e){var t=function(r,n){if(Zm(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Zm(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Zm(t)==="symbol"?t:String(t)}function Yg(e,t,r){return(t=Lne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DV(Object(r),!0).forEach(function(n){Yg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lne(n.key),n)}}function zj(e,t){return zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},zj(e,t)}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fS(e)}function Sze(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Nze(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=fS(e);if(t){var a=fS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Sze(this,r)}}function $j(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Une(e,t){if(e){if(typeof e=="string")return $j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$j(e,t):void 0}}function GD(e){return function(t){if(Array.isArray(t))return $j(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Une(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Bze=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Xc="-ms-",RV="-moz-",zn="-webkit-",qD="decl",Mne="@keyframes",kze=Math.abs,yN=String.fromCharCode,Tze=Object.assign;function Qne(e){return e.trim()}function Yn(e,t,r){return e.replace(t,r)}function Kj(e,t){return e.indexOf(t)}function Yi(e,t){return 0|e.charCodeAt(t)}function _y(e,t,r){return e.slice(t,r)}function Xd(e){return e.length}function WD(e){return e.length}function RE(e,t){return t.push(e),e}var wN=1,Kv=1,Hne=0,Dl=0,Js=0,gx="";function EN(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:wN,column:Kv,length:i,return:""}}function R1(e,t){return Tze(EN("",null,null,"",null,null,0),e,{length:-e.length},t)}function mc(){return Js=Dl<Hne?Yi(gx,Dl++):0,Kv++,Js===10&&(Kv=1,wN++),Js}function hA(){return Yi(gx,Dl)}function kC(){return Dl}function gw(e,t){return _y(gx,e,t)}function Sy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vne(e){return wN=Kv=1,Hne=Xd(gx=e),Dl=0,[]}function zne(e){return gx="",e}function TC(e){return Qne(gw(Dl-1,Gj(e===91?e+2:e===40?e+1:e)))}function Ize(e){for(;(Js=hA())&&Js<33;)mc();return Sy(e)>2||Sy(Js)>3?"":" "}function jze(e,t){for(;--t&&mc()&&!(Js<48||Js>102||Js>57&&Js<65||Js>70&&Js<97););return gw(e,kC()+(t<6&&hA()==32&&mc()==32))}function Gj(e){for(;mc();)switch(Js){case e:return Dl;case 34:case 39:e!==34&&e!==39&&Gj(Js);break;case 40:e===41&&Gj(e);break;case 92:mc()}return Dl}function Fze(e,t){for(;mc()&&e+Js!==57&&(e+Js!==84||hA()!==47););return"/*"+gw(t,Dl-1)+"*"+yN(e===47?e:mc())}function Oze(e){for(;!Sy(hA());)mc();return gw(e,Dl)}function LV(e){return zne(IC("",null,null,null,[""],e=Vne(e),0,[0],e))}function IC(e,t,r,n,a,s,i,o,l){for(var u=0,d=0,f=i,m=0,p=0,x=0,g=1,b=1,y=1,_=0,S="",B=a,I=s,D=n,E=S;b;)switch(x=_,_=mc()){case 40:if(x!=108&&Yi(E,f-1)==58){Kj(E+=Yn(TC(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=TC(_);break;case 9:case 10:case 13:case 32:E+=Ize(x);break;case 92:E+=jze(kC()-1,7);continue;case 47:switch(hA()){case 42:case 47:RE(Dze(Fze(mc(),kC()),t,r),l);break;default:E+="/"}break;case 123*g:o[u++]=Xd(E)*y;case 125*g:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+d:p>0&&Xd(E)-f&&RE(p>32?MV(E+";",n,r,f-1):MV(Yn(E," ","")+";",n,r,f-2),l);break;case 59:E+=";";default:if(RE(D=UV(E,t,r,u,d,a,o,S,B=[],I=[],f),s),_===123)if(d===0)IC(E,t,D,D,B,s,f,o,I);else switch(m===99&&Yi(E,3)===110?100:m){case 100:case 109:case 115:IC(e,D,D,n&&RE(UV(e,D,D,0,0,a,o,S,a,B=[],f),I),a,I,f,o,n?B:I);break;default:IC(E,D,D,D,[""],I,0,o,I)}}u=d=p=0,g=y=1,S=E="",f=i;break;case 58:f=1+Xd(E),p=x;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&(Js=Dl>0?Yi(gx,--Dl):0,Kv--,Js===10&&(Kv=1,wN--),Js==125))continue}switch(E+=yN(_),_*g){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(Xd(E)-1)*y,y=1;break;case 64:hA()===45&&(E+=TC(mc())),m=hA(),d=f=Xd(S=E+=Oze(kC())),_++;break;case 45:x===45&&Xd(E)==2&&(g=0)}}return s}function UV(e,t,r,n,a,s,i,o,l,u,d){for(var f=a-1,m=a===0?s:[""],p=WD(m),x=0,g=0,b=0;x<n;++x)for(var y=0,_=_y(e,f+1,f=kze(g=i[x])),S=e;y<p;++y)(S=Qne(g>0?m[y]+" "+_:Yn(_,/&\f/g,m[y])))&&(l[b++]=S);return EN(e,t,r,a===0?"rule":o,l,u,d)}function Dze(e,t,r){return EN(e,t,r,"comm",yN(Js),_y(e,2,-2),0)}function MV(e,t,r,n){return EN(e,t,r,qD,_y(e,0,n),_y(e,n+1,-1),n)}function ep(e,t){for(var r="",n=WD(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function QV(e,t,r,n){switch(e.type){case"@import":case qD:return e.return=e.return||e.value;case"comm":return"";case Mne:return e.return=e.value+"{"+ep(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return Xd(r=ep(e.children,n))?e.return=e.value+"{"+r+"}":""}function HV(e){var t=WD(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function Pze(e){return function(t){t.root||(t=t.return)&&e(t)}}function $ne(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Rze=function(e,t,r){for(var n=0,a=0;n=a,a=hA(),n===38&&a===12&&(t[r]=1),!Sy(a);)mc();return gw(e,Dl)},Lze=function(e,t){return zne(function(r,n){var a=-1,s=44;do switch(Sy(s)){case 0:s===38&&hA()===12&&(n[a]=1),r[a]+=Rze(Dl-1,n,a);break;case 2:r[a]+=TC(s);break;case 4:if(s===44){r[++a]=hA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=yN(s)}while(s=mc());return r}(Vne(e),t))},VV=new WeakMap,Uze=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||VV.get(r))&&!n){VV.set(e,!0);for(var a=[],s=Lze(t,a),i=r.props,o=0,l=0;o<s.length;o++)for(var u=0;u<i.length;u++,l++)e.props[l]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},Mze=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Kne(e,t){switch(function(r,n){return 45^Yi(r,0)?(((n<<2^Yi(r,0))<<2^Yi(r,1))<<2^Yi(r,2))<<2^Yi(r,3):0}(e,t)){case 5103:return zn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return zn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return zn+e+RV+e+Xc+e+e;case 6828:case 4268:return zn+e+Xc+e+e;case 6165:return zn+e+Xc+"flex-"+e+e;case 5187:return zn+e+Yn(e,/(\w+).+(:[^]+)/,zn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return zn+e+Xc+"flex-item-"+Yn(e,/flex-|-self/,"")+e;case 4675:return zn+e+Xc+"flex-line-pack"+Yn(e,/align-content|flex-|-self/,"")+e;case 5548:return zn+e+Xc+Yn(e,"shrink","negative")+e;case 5292:return zn+e+Xc+Yn(e,"basis","preferred-size")+e;case 6060:return zn+"box-"+Yn(e,"-grow","")+zn+e+Xc+Yn(e,"grow","positive")+e;case 4554:return zn+Yn(e,/([^-])(transform)/g,"$1"+zn+"$2")+e;case 6187:return Yn(Yn(Yn(e,/(zoom-|grab)/,zn+"$1"),/(image-set)/,zn+"$1"),e,"")+e;case 5495:case 3959:return Yn(e,/(image-set\([^]*)/,zn+"$1$`$1");case 4968:return Yn(Yn(e,/(.+:)(flex-)?(.*)/,zn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+zn+e+e;case 4095:case 3583:case 4068:case 2532:return Yn(e,/(.+)-inline(.+)/,zn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xd(e)-1-t>6)switch(Yi(e,t+1)){case 109:if(Yi(e,t+4)!==45)break;case 102:return Yn(e,/(.+:)(.+)-([^]+)/,"$1"+zn+"$2-$3$1"+RV+(Yi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Kj(e,"stretch")?Kne(Yn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Yi(e,t+1)!==115)break;case 6444:switch(Yi(e,Xd(e)-3-(~Kj(e,"!important")&&10))){case 107:return Yn(e,":",":"+zn)+e;case 101:return Yn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+zn+(Yi(e,14)===45?"inline-":"")+"box$3$1"+zn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Yi(e,t+11)){case 114:return zn+e+Xc+Yn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return zn+e+Xc+Yn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return zn+e+Xc+Yn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return zn+e+Xc+e+e}return e}var zV,LE,jC=typeof document<"u",Qze=jC?void 0:(zV=function(){return $ne(function(){var e={};return function(t){return e[t]}})},LE=new WeakMap,function(e){if(LE.has(e))return LE.get(e);var t=zV(e);return LE.set(e,t),t}),Hze=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case qD:e.return=Kne(e.value,e.length);break;case Mne:return ep([R1(e,{value:Yn(e.value,"@","@"+zn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ep([R1(e,{props:[Yn(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return ep([R1(e,{props:[Yn(a,/:(plac\w+)/,":"+zn+"input-$1")]}),R1(e,{props:[Yn(a,/:(plac\w+)/,":-moz-$1")]}),R1(e,{props:[Yn(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],Gne=function(e){var t=e.key;if(jC&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Hze,a,s,i={},o=[];jC&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var _=y.getAttribute("data-emotion").split(" "),S=1;S<_.length;S++)i[_[S]]=!0;o.push(y)}));var l=[Uze,Mze];if(jC){var u,d=[QV,Pze(function(y){u.insert(y)})],f=HV(l.concat(n,d));s=function(y,_,S,B){u=S,ep(LV(y?y+"{"+_.styles+"}":_.styles),f),B&&(b.inserted[_.name]=!0)}}else{var m=[QV],p=HV(l.concat(n,m)),x=Qze(n)(t),g=function(y,_){var S=_.name;return x[S]===void 0&&(x[S]=ep(LV(y?y+"{"+_.styles+"}":_.styles),p)),x[S]};s=function(y,_,S,B){var I=_.name,D=g(y,_);return b.compat===void 0?(B&&(b.inserted[I]=!0),D):B?void(b.inserted[I]=D):D}}var b={key:t,sheet:new Bze({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function Zn(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var Qi=typeof Symbol=="function"&&Symbol.for,qj=Qi?Symbol.for("react.element"):60103,Wj=Qi?Symbol.for("react.portal"):60106,FC=Qi?Symbol.for("react.fragment"):60107,OC=Qi?Symbol.for("react.strict_mode"):60108,DC=Qi?Symbol.for("react.profiler"):60114,PC=Qi?Symbol.for("react.provider"):60109,RC=Qi?Symbol.for("react.context"):60110,Xj=Qi?Symbol.for("react.async_mode"):60111,hS=Qi?Symbol.for("react.concurrent_mode"):60111,LC=Qi?Symbol.for("react.forward_ref"):60112,UC=Qi?Symbol.for("react.suspense"):60113,Vze=Qi?Symbol.for("react.suspense_list"):60120,MC=Qi?Symbol.for("react.memo"):60115,QC=Qi?Symbol.for("react.lazy"):60116,zze=Qi?Symbol.for("react.block"):60121,$ze=Qi?Symbol.for("react.fundamental"):60117,Kze=Qi?Symbol.for("react.responder"):60118,Gze=Qi?Symbol.for("react.scope"):60119;function nc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case qj:switch(e=e.type){case Xj:case hS:case FC:case DC:case OC:case UC:return e;default:switch(e=e&&e.$$typeof){case RC:case LC:case QC:case MC:case PC:return e;default:return t}}case Wj:return t}}}function $V(e){return nc(e)===hS}var qze={AsyncMode:Xj,ConcurrentMode:hS,ContextConsumer:RC,ContextProvider:PC,Element:qj,ForwardRef:LC,Fragment:FC,Lazy:QC,Memo:MC,Portal:Wj,Profiler:DC,StrictMode:OC,Suspense:UC,isAsyncMode:function(e){return $V(e)||nc(e)===Xj},isConcurrentMode:$V,isContextConsumer:function(e){return nc(e)===RC},isContextProvider:function(e){return nc(e)===PC},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===qj},isForwardRef:function(e){return nc(e)===LC},isFragment:function(e){return nc(e)===FC},isLazy:function(e){return nc(e)===QC},isMemo:function(e){return nc(e)===MC},isPortal:function(e){return nc(e)===Wj},isProfiler:function(e){return nc(e)===DC},isStrictMode:function(e){return nc(e)===OC},isSuspense:function(e){return nc(e)===UC},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===FC||e===hS||e===DC||e===OC||e===UC||e===Vze||typeof e=="object"&&e!==null&&(e.$$typeof===QC||e.$$typeof===MC||e.$$typeof===PC||e.$$typeof===RC||e.$$typeof===LC||e.$$typeof===$ze||e.$$typeof===Kze||e.$$typeof===Gze||e.$$typeof===zze)},typeOf:nc};Zn(function(e,t){});var KV=Zn(function(e){e.exports=qze}),GV={};GV[KV.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},GV[KV.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Yj=typeof document<"u";function qne(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var XD=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||Yj===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},YD=function(e,t,r){XD(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);Yj||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!Yj&&a.length!==0)return a}},Wze={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xze=/[A-Z]|^ms/g,Yze=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wne=function(e){return e.charCodeAt(1)===45},qV=function(e){return e!=null&&typeof e!="boolean"},Zk=$ne(function(e){return Wne(e)?e:e.replace(Xze,"-$&").toLowerCase()}),WV=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Yze,function(r,n,a){return Yd={name:n,styles:a,next:Yd},n})}return Wze[e]===1||Wne(e)||typeof t!="number"||t===0?t:t+"px"};function Pb(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return Yd={name:r.name,styles:r.styles,next:Yd},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Yd={name:n.name,styles:n.styles,next:Yd},n=n.next;var a=r.styles+";";return a}return function(l,u,d){var f="";if(Array.isArray(d))for(var m=0;m<d.length;m++)f+=Pb(l,u,d[m])+";";else for(var p in d){var x=d[p];if(typeof x!="object")u!=null&&u[x]!==void 0?f+=p+"{"+u[x]+"}":qV(x)&&(f+=Zk(p)+":"+WV(p,x)+";");else if(!Array.isArray(x)||typeof x[0]!="string"||u!=null&&u[x[0]]!==void 0){var g=Pb(l,u,x);switch(p){case"animation":case"animationName":f+=Zk(p)+":"+g+";";break;default:f+=p+"{"+g+"}"}}else for(var b=0;b<x.length;b++)qV(x[b])&&(f+=Zk(p)+":"+WV(p,x[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=Yd,i=r(e);return Yd=s,Pb(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var Yd,XV=/label:\s*([^\s;\n{]+)\s*(;|$)/g,CN=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";Yd=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=Pb(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=Pb(r,t,e[i]),n&&(a+=s[i]);XV.lastIndex=0;for(var o,l="";(o=XV.exec(a))!==null;)l+="-"+o[1];var u=function(d){for(var f,m=0,p=0,x=d.length;x>=4;++p,x-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),m=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&m)+(59797*(m>>>16)<<16);switch(x){case 3:m^=(255&d.charCodeAt(p+2))<<16;case 2:m^=(255&d.charCodeAt(p+1))<<8;case 1:m=1540483477*(65535&(m^=255&d.charCodeAt(p)))+(59797*(m>>>16)<<16)}return(((m=1540483477*(65535&(m^=m>>>13))+(59797*(m>>>16)<<16))^m>>>15)>>>0).toString(36)}(a)+l;return{name:u,styles:a,next:Yd}},Jze=typeof document<"u",Zze=function(e){return e()},Xne=!!T.useInsertionEffect&&T.useInsertionEffect,Yne=Jze&&Xne||Zze,YV=Xne||T.useLayoutEffect,wv=typeof document<"u",JD={}.hasOwnProperty,mS=T.createContext(typeof HTMLElement<"u"?Gne({key:"css"}):null);mS.Provider;var _N=function(e){return T.forwardRef(function(t,r){var n=T.useContext(mS);return e(t,n,r)})};wv||(_N=function(e){return function(t){var r=T.useContext(mS);return r===null?(r=Gne({key:"css"}),T.createElement(mS.Provider,{value:r},e(t,r))):e(t,r)}});var ZD=T.createContext({}),Jj="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",e$e=function(e,t){var r={};for(var n in t)JD.call(t,n)&&(r[n]=t[n]);return r[Jj]=e,r},t$e=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;XD(t,r,n);var a=Yne(function(){return YD(t,r,n)});if(!wv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return T.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},r$e=_N(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[Jj],s=[n],i="";typeof e.className=="string"?i=qne(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=CN(s,void 0,T.useContext(ZD));i+=t.key+"-"+o.name;var l={};for(var u in e)!JD.call(e,u)||u==="css"||u===Jj||(l[u]=e[u]);return l.ref=r,l.className=i,T.createElement(T.Fragment,null,T.createElement(t$e,{cache:t,serialized:o,isStringTag:typeof a=="string"}),T.createElement(a,l))});Zn(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Cr=function(e,t){var r=arguments;if(t==null||!JD.call(t,"css"))return T.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=r$e,a[1]=e$e(e,t);for(var s=2;s<n;s++)a[s]=r[s];return T.createElement.apply(null,a)};_N(function(e,t){var r=e.styles,n=CN([r],void 0,T.useContext(ZD));if(!wv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var l=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,l);return l?null:T.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=T.useRef();return YV(function(){var f=t.key+"-global",m=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,x=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),x!==null&&(p=!0,x.setAttribute("data-emotion",f),m.hydrate([x])),d.current=[m,p],function(){m.flush()}},[t]),YV(function(){var f=d.current,m=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&YD(t,n.next,!0),m.tags.length){var p=m.tags[m.tags.length-1].nextElementSibling;m.before=p,m.flush()}t.insert("",n,m,!1)}},[t,n.name]),null});function eP(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return CN(t)}var n$e=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function a$e(e,t,r){var n=[],a=qne(e,n,r);return n.length<2?r:a+t(n)}var s$e=function(e){var t,r=e.cache,n=e.serializedArr,a=Yne(function(){for(var s="",i=0;i<n.length;i++){var o=YD(r,n[i],!1);wv||o===void 0||(s+=o)}if(!wv)return s});return wv||a.length===0?null:T.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};_N(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=CN(o,t.registered);return r.push(u),XD(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a$e(t.registered,n,n$e(o))},theme:T.useContext(ZD)},s=e.children(a);return T.createElement(T.Fragment,null,T.createElement(s$e,{cache:t,serializedArr:r}),s)});function Ti(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,l,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(f)throw i}}return u}}(e,t)||Une(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jd(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var l,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)l=f[u],o.indexOf(l)>=0||(d[l]=i[l]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xf(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Jne(e){return xf(e).getComputedStyle(e)}const UE=Math.round;function Zne(e){return tae(e)?(e.nodeName||"").toLowerCase():""}let ME;function eae(e){return e instanceof xf(e).HTMLElement}function HC(e){return e instanceof xf(e).Element}function tae(e){return e instanceof xf(e).Node}function JV(e){return typeof ShadowRoot>"u"?!1:e instanceof xf(e).ShadowRoot||e instanceof ShadowRoot}function rae(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Jne(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function i$e(){return/^((?!chrome|android).)*safari/i.test(function(){if(ME)return ME;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(ME=e.brands.map(t=>t.brand+"/"+t.version).join(" "),ME):navigator.userAgent}())}function nae(e){return HC(e)?e:e.contextElement}const aae={x:1,y:1};function ZV(e){const t=nae(e);if(!eae(t))return aae;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(l){const u=Jne(l);let d=parseFloat(u.width),f=parseFloat(u.height);const m=l.offsetWidth,p=l.offsetHeight,x=UE(d)!==m||UE(f)!==p;return x&&(d=m,f=p),{width:d,height:f,fallback:x}}(t);let i=(s?UE(r.width):r.width)/n,o=(s?UE(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function ez(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=nae(e);let l=aae;t&&(l=ZV(e));const u=o?xf(o):window,d=i$e()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/l.x,m=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,p=i.width/l.x,x=i.height/l.y;if(o){const g=xf(o),b=n;let y=g.frameElement;for(;y&&n&&b!==g;){const _=ZV(y),S=y.getBoundingClientRect(),B=getComputedStyle(y);S.x+=(y.clientLeft+parseFloat(B.paddingLeft))*_.x,S.y+=(y.clientTop+parseFloat(B.paddingTop))*_.y,f*=_.x,m*=_.y,p*=_.x,x*=_.y,f+=S.x,m+=S.y,y=xf(y).frameElement}}return{width:p,height:x,top:m,right:f+p,bottom:m+x,left:f,x:f,y:m}}function o$e(e){if(Zne(e)==="html")return e;const t=e.assignedSlot||e.parentNode||JV(e)&&e.host||function(r){return((tae(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return JV(t)?t.host:t}function sae(e){const t=o$e(e);return function(r){return["html","body","#document"].includes(Zne(r))}(t)?t.ownerDocument.body:eae(t)&&rae(t)?t:sae(t)}function VC(e,t){var r;t===void 0&&(t=[]);const n=sae(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=xf(n);return a?t.concat(s,s.visualViewport||[],rae(n)?n:[]):t.concat(n,VC(n))}var Zj=typeof document<"u"?T.useLayoutEffect:T.useEffect,l$e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],pS=function(){};function c$e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function u$e(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(c$e(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var tz=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Zm(e)==="object"&&e!==null?[e]:[];var t},rz=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,pr({},Jd(e,l$e))},ds=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function SN(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function iae(e){return SN(e)?window.pageYOffset:e.scrollTop}function gS(e,t){SN(e)?window.scrollTo(0,t):e.scrollTop=t}function d$e(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function QE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:pS,a=iae(e),s=t-a,i=10,o=0;function l(){var u=d$e(o+=i,a,s,r);gS(e,u),o<r?window.requestAnimationFrame(l):n(e)}l()}function nz(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?gS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&gS(e,Math.max(t.offsetTop-a,0))}function az(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var oae=!1,A$e={get passive(){return oae=!0}},HE=typeof window<"u"?window:{};HE.addEventListener&&HE.removeEventListener&&(HE.addEventListener("p",pS,A$e),HE.removeEventListener("p",pS,!1));var f$e=oae;function h$e(e){return e!=null}function VE(e,t,r){return e?t:r}var m$e=["children","innerProps"],p$e=["children","innerProps"];function g$e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,l=function(J){var W=getComputedStyle(J),Z=W.position==="absolute",H=/(auto|scroll)/;if(W.position==="fixed")return document.documentElement;for(var z=J;z=z.parentElement;)if(W=getComputedStyle(z),(!Z||W.position!=="static")&&H.test(W.overflow+W.overflowY+W.overflowX))return z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=l.getBoundingClientRect().height,m=r.getBoundingClientRect(),p=m.bottom,x=m.height,g=m.top,b=r.offsetParent.getBoundingClientRect().top,y=i||SN(d=l)?window.innerHeight:d.clientHeight,_=iae(l),S=parseInt(getComputedStyle(r).marginBottom,10),B=parseInt(getComputedStyle(r).marginTop,10),I=b-B,D=y-g,E=I+_,C=f-_-g,N=p-y+_+S,P=_+g-B,O=160;switch(a){case"auto":case"bottom":if(D>=x)return{placement:"bottom",maxHeight:t};if(C>=x&&!i)return s&&QE(l,N,O),{placement:"bottom",maxHeight:t};if(!i&&C>=n||i&&D>=n)return s&&QE(l,N,O),{placement:"bottom",maxHeight:i?D-S:C-S};if(a==="auto"||i){var F=t,M=i?I:E;return M>=n&&(F=Math.min(M-S-o,t)),{placement:"top",maxHeight:F}}if(a==="bottom")return s&&gS(l,N),{placement:"bottom",maxHeight:t};break;case"top":if(I>=x)return{placement:"top",maxHeight:t};if(E>=x&&!i)return s&&QE(l,P,O),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&I>=n){var Q=t;return(!i&&E>=n||i&&I>=n)&&(Q=i?I-B:E-B),s&&QE(l,P,O),{placement:"top",maxHeight:Q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var sz,lae=function(e){return e==="auto"?"bottom":e},cae=T.createContext(null),v$e=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,l=(T.useContext(cae)||{}).setPortalPlacement,u=T.useRef(null),d=Ti(T.useState(n),2),f=d[0],m=d[1],p=Ti(T.useState(null),2),x=p[0],g=p[1],b=o.spacing.controlHeight;return Zj(function(){var y=u.current;if(y){var _=s==="fixed",S=g$e({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!_,isFixedPosition:_,controlHeight:b});m(S.maxHeight),g(S.placement),l==null||l(S.placement)}},[n,a,s,i,r,l,b]),t({ref:u,placerProps:pr(pr({},e),{},{placement:x||lae(a),maxHeight:f})})},x$e=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Cr("div",kr({},ds(e,"menu",{menu:!0}),{ref:r},n),t)},uae=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return pr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},b$e=uae,y$e=uae,w$e=["size"],E$e=["innerProps","isRtl","size"],eT,tT,C$e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},dae=function(e){var t=e.size,r=Jd(e,w$e);return Cr("svg",kr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:C$e},r))},rT=function(e){return Cr(dae,kr({size:20},e),Cr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},iz=function(e){return Cr(dae,kr({size:20},e),Cr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Aae=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return pr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},_$e=Aae,S$e=Aae,N$e=function(){var e=eP.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(sz||(eT=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],tT||(tT=eT.slice(0)),sz=Object.freeze(Object.defineProperties(eT,{raw:{value:Object.freeze(tT)}})))),nT=function(e){var t=e.delay,r=e.offset;return Cr("span",{css:eP({animation:"".concat(N$e," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},B$e=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Cr("div",kr({ref:a},ds(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},k$e=["data"],T$e=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,l=e.label,u=e.theme,d=e.selectProps;return Cr("div",kr({},ds(e,"group",{group:!0}),o),Cr(s,kr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),l),Cr("div",null,t))},I$e=["innerRef","isDisabled","isHidden","inputClassName"],fae={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},j$e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":pr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},fae)},F$e=function(e){return pr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},fae)},oz=function(e){var t=e.children,r=e.innerProps;return Cr("div",r,t)},O$e=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,l=r.Container,u=r.Label,d=r.Remove;return Cr(l,{data:n,innerProps:pr(pr({},ds(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Cr(u,{data:n,innerProps:pr({},ds(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Cr(d,{data:n,innerProps:pr(pr({},ds(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},D$e={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Cr("div",kr({},ds(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Cr(rT,null))},Control:B$e,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Cr("div",kr({},ds(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Cr(iz,null))},DownChevron:iz,CrossIcon:rT,Group:T$e,GroupHeading:function(e){var t=rz(e);t.data;var r=Jd(t,k$e);return Cr("div",kr({},ds(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Cr("div",kr({},ds(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Cr("span",kr({},t,ds(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=rz(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,l=Jd(n,I$e);return Cr("div",kr({},ds(e,"input",{"input-container":!0}),{"data-value":r||""}),Cr("input",kr({className:t({input:!0},o),ref:a,style:F$e(i),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=Jd(e,E$e);return Cr("div",kr({},ds(pr(pr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Cr(nT,{delay:0,offset:r}),Cr(nT,{delay:160,offset:!0}),Cr(nT,{delay:320,offset:!r}))},Menu:x$e,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Cr("div",kr({},ds(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=T.useRef(null),l=T.useRef(null),u=Ti(T.useState(lae(s)),2),d=u[0],f=u[1],m=T.useMemo(function(){return{setPortalPlacement:f}},[]),p=Ti(T.useState(null),2),x=p[0],g=p[1],b=T.useCallback(function(){if(n){var B=function(E){var C=E.getBoundingClientRect();return{bottom:C.bottom,height:C.height,left:C.left,right:C.right,top:C.top,width:C.width}}(n),I=i==="fixed"?0:window.pageYOffset,D=B[d]+I;D===(x==null?void 0:x.offset)&&B.left===(x==null?void 0:x.rect.left)&&B.width===(x==null?void 0:x.rect.width)||g({offset:D,rect:B})}},[n,i,d,x==null?void 0:x.offset,x==null?void 0:x.rect.left,x==null?void 0:x.rect.width]);Zj(function(){b()},[b]);var y=T.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),n&&o.current&&(l.current=function(B,I,D,E){E===void 0&&(E={});const{ancestorScroll:C=!0,ancestorResize:N=!0,elementResize:P=!0,animationFrame:O=!1}=E,F=C&&!O,M=F||N?[...HC(B)?VC(B):B.contextElement?VC(B.contextElement):[],...VC(I)]:[];M.forEach(Z=>{F&&Z.addEventListener("scroll",D,{passive:!0}),N&&Z.addEventListener("resize",D)});let Q,J=null;if(P){let Z=!0;J=new ResizeObserver(()=>{Z||D(),Z=!1}),HC(B)&&!O&&J.observe(B),HC(B)||!B.contextElement||O||J.observe(B.contextElement),J.observe(I)}let W=O?ez(B):null;return O&&function Z(){const H=ez(B);!W||H.x===W.x&&H.y===W.y&&H.width===W.width&&H.height===W.height||D(),W=H,Q=requestAnimationFrame(Z)}(),D(),()=>{var Z;M.forEach(H=>{F&&H.removeEventListener("scroll",D),N&&H.removeEventListener("resize",D)}),(Z=J)==null||Z.disconnect(),J=null,O&&cancelAnimationFrame(Q)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);Zj(function(){y()},[y]);var _=T.useCallback(function(B){o.current=B,y()},[y]);if(!t&&i!=="fixed"||!x)return null;var S=Cr("div",kr({ref:_},ds(pr(pr({},e),{},{offset:x.offset,position:i,rect:x.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Cr(cae.Provider,{value:m},t?Ote.createPortal(S,t):S)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=Jd(e,p$e);return Cr("div",kr({},ds(pr(pr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=Jd(e,m$e);return Cr("div",kr({},ds(pr(pr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:O$e,MultiValueContainer:oz,MultiValueLabel:oz,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Cr("div",kr({role:"button"},r),t||Cr(rT,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Cr("div",kr({},ds(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Cr("div",kr({},ds(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Cr("div",kr({},ds(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Cr("div",kr({},ds(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Cr("div",kr({},ds(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},lz=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function P$e(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||lz(n)&&lz(a)))return!1;var n,a;return!0}for(var R$e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},cz=function(e){return Cr("span",kr({css:R$e},e))},L$e={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,d=function(p,x){return p&&p.length?"".concat(p.indexOf(x)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",m="".concat(l?" selected":"").concat(f);return"".concat(s).concat(m,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},U$e=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,l=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,m=o.inputValue,p=o.isMulti,x=o.isOptionDisabled,g=o.isSearchable,b=o.menuIsOpen,y=o.options,_=o.screenReaderStatus,S=o.tabSelectsValue,B=o.isLoading,I=o["aria-label"],D=o["aria-live"],E=T.useMemo(function(){return pr(pr({},L$e),d||{})},[d]),C=T.useMemo(function(){var Q,J="";if(t&&E.onChange){var W=t.option,Z=t.options,H=t.removedValue,z=t.removedValues,G=t.value,ne=H||W||(Q=G,Array.isArray(Q)?null:Q),R=ne?f(ne):"",q=Z||z||void 0,Y=q?q.map(f):[],te=pr({isDisabled:ne&&x(ne,i),label:R,labels:Y},t);J=E.onChange(te)}return J},[t,E,x,i,f]),N=T.useMemo(function(){var Q="",J=r||n,W=!!(r&&i&&i.includes(r));if(J&&E.onFocus){var Z={focused:J,label:f(J),isDisabled:x(J,i),isSelected:W,options:a,context:J===r?"menu":"value",selectValue:i,isAppleDevice:u};Q=E.onFocus(Z)}return Q},[r,n,f,x,E,a,i,u]),P=T.useMemo(function(){var Q="";if(b&&y.length&&!B&&E.onFilter){var J=_({count:a.length});Q=E.onFilter({inputValue:m,resultsMessage:J})}return Q},[a,m,b,E,y,_,B]),O=(t==null?void 0:t.action)==="initial-input-focus",F=T.useMemo(function(){var Q="";if(E.guidance){var J=n?"value":b?"menu":"input";Q=E.guidance({"aria-label":I,context:J,isDisabled:r&&x(r,i),isMulti:p,isSearchable:g,tabSelectsValue:S,isInitialFocus:O})}return Q},[I,r,n,p,x,g,b,E,i,S,O]),M=Cr(T.Fragment,null,Cr("span",{id:"aria-selection"},C),Cr("span",{id:"aria-focused"},N),Cr("span",{id:"aria-results"},P),Cr("span",{id:"aria-guidance"},F));return Cr(T.Fragment,null,Cr(cz,{id:l},O&&M),Cr(cz,{"aria-live":D,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!O&&M))},aT=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],M$e=new RegExp("["+aT.map(function(e){return e.letters}).join("")+"]","g"),hae={},sT=0;sT<aT.length;sT++)for(var iT=aT[sT],oT=0;oT<iT.letters.length;oT++)hae[iT.letters[oT]]=iT.base;var mae=function(e){return e.replace(M$e,function(t){return hae[t]})},Q$e=function(e,t){t===void 0&&(t=P$e);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(mae),uz=function(e){return e.replace(/^\s+|\s+$/g,"")},H$e=function(e){return"".concat(e.label," ").concat(e.value)},V$e=["innerRef"];function z$e(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(l){var u=Ti(l,1)[0];return!s.includes(u)});return o.reduce(function(l,u){var d=Ti(u,2),f=d[0],m=d[1];return l[f]=m,l},{})}(Jd(e,V$e),"onExited","in","enter","exit","appear");return Cr("input",kr({ref:t},r,{css:eP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var dz=["boxSizing","height","overflow","paddingRight","position"],Az={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function fz(e){e.preventDefault()}function hz(e){e.stopPropagation()}function mz(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function pz(){return"ontouchstart"in window||navigator.maxTouchPoints}var gz=!(typeof window>"u"||!window.document||!window.document.createElement),L1=0,Fg={capture:!1,passive:!1},$$e=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},K$e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function G$e(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,l=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,m=T.useRef(!1),p=T.useRef(!1),x=T.useRef(0),g=T.useRef(null),b=T.useCallback(function(D,E){if(g.current!==null){var C=g.current,N=C.scrollTop,P=C.scrollHeight,O=C.clientHeight,F=g.current,M=E>0,Q=P-O-N,J=!1;Q>E&&m.current&&(u&&u(D),m.current=!1),M&&p.current&&(f&&f(D),p.current=!1),M&&E>Q?(l&&!m.current&&l(D),F.scrollTop=P,J=!0,m.current=!0):!M&&-E>N&&(d&&!p.current&&d(D),F.scrollTop=0,J=!0,p.current=!0),J&&function(W){W.cancelable&&W.preventDefault(),W.stopPropagation()}(D)}},[l,u,d,f]),y=T.useCallback(function(D){b(D,D.deltaY)},[b]),_=T.useCallback(function(D){x.current=D.changedTouches[0].clientY},[]),S=T.useCallback(function(D){var E=x.current-D.changedTouches[0].clientY;b(D,E)},[b]),B=T.useCallback(function(D){if(D){var E=!!f$e&&{passive:!1};D.addEventListener("wheel",y,E),D.addEventListener("touchstart",_,E),D.addEventListener("touchmove",S,E)}},[S,_,y]),I=T.useCallback(function(D){D&&(D.removeEventListener("wheel",y,!1),D.removeEventListener("touchstart",_,!1),D.removeEventListener("touchmove",S,!1))},[S,_,y]);return T.useEffect(function(){if(o){var D=g.current;return B(D),function(){I(D)}}},[o,B,I]),function(D){g.current=D}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,l=i.accountForScrollbars,u=l===void 0||l,d=T.useRef({}),f=T.useRef(null),m=T.useCallback(function(x){if(gz){var g=document.body,b=g&&g.style;if(u&&dz.forEach(function(B){var I=b&&b[B];d.current[B]=I}),u&&L1<1){var y=parseInt(d.current.paddingRight,10)||0,_=document.body?document.body.clientWidth:0,S=window.innerWidth-_+y||0;Object.keys(Az).forEach(function(B){var I=Az[B];b&&(b[B]=I)}),b&&(b.paddingRight="".concat(S,"px"))}g&&pz()&&(g.addEventListener("touchmove",fz,Fg),x&&(x.addEventListener("touchstart",mz,Fg),x.addEventListener("touchmove",hz,Fg))),L1+=1}},[u]),p=T.useCallback(function(x){if(gz){var g=document.body,b=g&&g.style;L1=Math.max(L1-1,0),u&&L1<1&&dz.forEach(function(y){var _=d.current[y];b&&(b[y]=_)}),g&&pz()&&(g.removeEventListener("touchmove",fz,Fg),x&&(x.removeEventListener("touchstart",mz,Fg),x.removeEventListener("touchmove",hz,Fg)))}},[u]);return T.useEffect(function(){if(o){var x=f.current;return m(x),function(){p(x)}}},[o,m,p]),function(x){f.current=x}}({isEnabled:r});return Cr(T.Fragment,null,r&&Cr("div",{onClick:$$e,css:K$e}),t(function(i){a(i),s(i)}))}var q$e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},W$e=function(e){var t=e.name,r=e.onFocus;return Cr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:q$e,value:"",onChange:function(){}})};function eF(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function pae(){return eF(/^Mac/i)}function X$e(){return eF(/^iPhone/i)||eF(/^iPad/i)||pae()&&navigator.maxTouchPoints>1}var Y$e,J$e={clearIndicator:S$e,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return pr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:_$e,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return pr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return pr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return pr(pr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},j$e),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return pr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:y$e,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return pr((Yg(r={label:"menu"},function(l){return l?{bottom:"top",top:"bottom"}[l]:"bottom"}(n),"100%"),Yg(r,"position","absolute"),Yg(r,"width","100%"),Yg(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return pr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return pr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return pr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return pr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:b$e,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return pr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return pr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return pr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return pr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},lT={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Z$e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:az(),captureMenuScroll:!az(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=pr({ignoreCase:!0,ignoreAccents:!0,stringify:H$e,trim:!0,matchFrom:"any"},Y$e),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,l=i?uz(t):t,u=i?uz(s(e)):s(e);return n&&(l=l.toLowerCase(),u=u.toLowerCase()),a&&(l=Q$e(l),u=mae(u)),o==="start"?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function vz(e,t,r,n){return{type:"option",data:t,isDisabled:vae(e,t,r),isSelected:xae(e,t,r),label:gae(e,t),value:vS(e,t),index:n}}function zE(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return vz(e,i,t,o)}).filter(function(i){return yz(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=vz(e,r,t,n);return yz(e,s)?s:void 0}).filter(h$e)}function xz(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,GD(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function bz(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,GD(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function yz(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!yae(e)||!s)&&bae(e,{label:i,value:o,data:a},n)}var cT=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},gae=function(e,t){return e.getOptionLabel(t)},vS=function(e,t){return e.getOptionValue(t)};function vae(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function xae(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=vS(e,t);return r.some(function(a){return vS(e,a)===n})}function bae(e,t,r){return!e.filterOption||e.filterOption(t,r)}var yae=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},eKe=1,wae=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&zj(i,o)})(s,T.Component);var t,r,n,a=Nze(s);function s(i){var o;if(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=pae()||X$e(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,m){var p=o.props,x=p.onChange,g=p.name;m.name=g,o.ariaOnChange(f,m),x(f,m)},o.setValue=function(f,m,p){var x=o.props,g=x.closeMenuOnSelect,b=x.isMulti,y=x.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),g&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:m,option:p})},o.selectOption=function(f){var m=o.props,p=m.blurInputOnSelect,x=m.isMulti,g=m.name,b=o.state.selectValue,y=x&&o.isOptionSelected(f,b),_=o.isOptionDisabled(f,b);if(y){var S=o.getOptionValue(f);o.setValue(b.filter(function(B){return o.getOptionValue(B)!==S}),"deselect-option",f)}else{if(_)return void o.ariaOnChange(f,{action:"select-option",option:f,name:g});x?o.setValue([].concat(GD(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var m=o.props.isMulti,p=o.state.selectValue,x=o.getOptionValue(f),g=p.filter(function(y){return o.getOptionValue(y)!==x}),b=VE(m,g,g[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(VE(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,m=o.state.selectValue,p=m[m.length-1],x=m.slice(0,m.length-1),g=VE(f,x,x[0]||null);o.onChange(g,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return cT(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return bz(zE(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,m=new Array(f),p=0;p<f;p++)m[p]=arguments[p];return u$e.apply(void 0,[o.props.classNamePrefix].concat(m))},o.getOptionLabel=function(f){return gae(o.props,f)},o.getOptionValue=function(f){return vS(o.props,f)},o.getStyles=function(f,m){var p=o.props.unstyled,x=J$e[f](m,p);x.boxSizing="border-box";var g=o.props.styles[f];return g?g(x,m):x},o.getClassNames=function(f,m){var p,x;return(p=(x=o.props.classNames)[f])===null||p===void 0?void 0:p.call(x,m)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,pr(pr({},D$e),f.components);var f},o.buildCategorizedOptions=function(){return zE(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return xz(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,m){o.setState({ariaSelection:pr({value:f},m)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():m&&o.openMenu("first"):(m&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var m=o.props,p=m.isMulti,x=m.menuIsOpen;o.focusInput(),x?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&SN(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var m=f.touches,p=m&&m.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var m=f.touches,p=m&&m.item(0);if(p){var x=Math.abs(p.clientX-o.initialTouchX),g=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=x>5||g>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var m=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:m}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var m=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:m}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var m=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:m>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return yae(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var m=o.props,p=m.isMulti,x=m.backspaceRemovesValue,g=m.escapeClearsValue,b=m.inputValue,y=m.isClearable,_=m.isDisabled,S=m.menuIsOpen,B=m.onKeyDown,I=m.tabSelectsValue,D=m.openMenuOnFocus,E=o.state,C=E.focusedOption,N=E.focusedValue,P=E.selectValue;if(!(_||typeof B=="function"&&(B(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(N)o.removeValue(N);else{if(!x)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!S||!I||!C||D&&o.isOptionSelected(C,P))return;o.selectOption(C);break;case"Enter":if(f.keyCode===229)break;if(S){if(!C||o.isComposing)return;o.selectOption(C);break}return;case"Escape":S?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&g&&o.clearValue();break;case" ":if(b)return;if(!S){o.openMenu("first");break}if(!C)return;o.selectOption(C);break;case"ArrowUp":S?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":S?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!S)return;o.focusOption("pageup");break;case"PageDown":if(!S)return;o.focusOption("pagedown");break;case"Home":if(!S)return;o.focusOption("first");break;case"End":if(!S)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++eKe),o.state.selectValue=tz(i.value),i.menuIsOpen&&o.state.selectValue.length){var l=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=l,o.state.focusedOption=u[d],o.state.focusedOptionId=cT(l,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&nz(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&l&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||l||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(nz(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,l=this.state,u=l.selectValue,d=l.isFocused,f=this.buildFocusableOptions(),m=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(m=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[m],focusedOptionId:this.getFocusedOptionId(f[m])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,l=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(u);u||(d=-1);var f=l.length-1,m=-1;if(l.length){switch(i){case"previous":m=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(m=d+1)}this.setState({inputIsHidden:m!==-1,focusedValue:l[m]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(l);l||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(lT):pr(pr({},lT),this.props.theme):lT}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,l=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,m=this.setValue,p=this.props,x=p.isMulti,g=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:l,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:x,isRtl:g,options:b,selectOption:f,selectProps:p,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,l=i.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(i,o){return vae(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return xae(this.props,i,o)}},{key:"filterOption",value:function(i,o){return bae(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:l,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,l=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,m=i.form,p=i.menuIsOpen,x=i.required,g=this.getComponents().Input,b=this.state,y=b.inputIsHidden,_=b.ariaSelection,S=this.commonProps,B=u||this.getElementId("input"),I=pr(pr(pr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":x,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?T.createElement(g,kr({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:B,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:m,type:"text",value:d},I)):T.createElement(z$e,kr({id:B,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:pS,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:m,value:""},I))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),l=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,m=o.SingleValue,p=o.Placeholder,x=this.commonProps,g=this.props,b=g.controlShouldRenderValue,y=g.isDisabled,_=g.isMulti,S=g.inputValue,B=g.placeholder,I=this.state,D=I.selectValue,E=I.focusedValue,C=I.isFocused;if(!this.hasValue()||!b)return S?null:T.createElement(p,kr({},x,{key:"placeholder",isDisabled:y,isFocused:C,innerProps:{id:this.getElementId("placeholder")}}),B);if(_)return D.map(function(P,O){var F=P===E,M="".concat(i.getOptionLabel(P),"-").concat(i.getOptionValue(P));return T.createElement(l,kr({},x,{components:{Container:u,Label:d,Remove:f},isFocused:F,isDisabled:y,key:M,index:O,removeProps:{onClick:function(){return i.removeValue(P)},onTouchEnd:function(){return i.removeValue(P)},onMouseDown:function(Q){Q.preventDefault()}},data:P}),i.formatOptionLabel(P,"value"))});if(S)return null;var N=D[0];return T.createElement(m,kr({},x,{data:N,isDisabled:y}),this.formatOptionLabel(N,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var m={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(i,kr({},o,{innerProps:m,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,l=this.props,u=l.isDisabled,d=l.isLoading,f=this.state.isFocused;return i&&d?T.createElement(i,kr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,l=i.IndicatorSeparator;if(!o||!l)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return T.createElement(l,kr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(i,kr({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),l=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,m=o.MenuPortal,p=o.LoadingMessage,x=o.NoOptionsMessage,g=o.Option,b=this.commonProps,y=this.state.focusedOption,_=this.props,S=_.captureMenuScroll,B=_.inputValue,I=_.isLoading,D=_.loadingMessage,E=_.minMenuHeight,C=_.maxMenuHeight,N=_.menuIsOpen,P=_.menuPlacement,O=_.menuPosition,F=_.menuPortalTarget,M=_.menuShouldBlockScroll,Q=_.menuShouldScrollIntoView,J=_.noOptionsMessage,W=_.onMenuScrollToTop,Z=_.onMenuScrollToBottom;if(!N)return null;var H,z=function(Y,te){var ie=Y.type,pe=Y.data,oe=Y.isDisabled,ce=Y.isSelected,ge=Y.label,Fe=Y.value,re=y===pe,Ne=oe?void 0:function(){return i.onOptionHover(pe)},Oe=oe?void 0:function(){return i.selectOption(pe)},Ce="".concat(i.getElementId("option"),"-").concat(te),fe={id:Ce,onClick:Oe,onMouseMove:Ne,onMouseOver:Ne,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return T.createElement(g,kr({},b,{innerProps:fe,data:pe,isDisabled:oe,isSelected:ce,key:Ce,label:ge,type:ie,value:Fe,isFocused:re,innerRef:re?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))};if(this.hasOptions())H=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var te=Y.data,ie=Y.options,pe=Y.index,oe="".concat(i.getElementId("group"),"-").concat(pe),ce="".concat(oe,"-heading");return T.createElement(l,kr({},b,{key:oe,data:te,options:ie,Heading:u,headingProps:{id:ce,data:Y.data},label:i.formatGroupLabel(Y.data)}),Y.options.map(function(ge){return z(ge,"".concat(pe,"-").concat(ge.index))}))}if(Y.type==="option")return z(Y,"".concat(Y.index))});else if(I){var G=D({inputValue:B});if(G===null)return null;H=T.createElement(p,b,G)}else{var ne=J({inputValue:B});if(ne===null)return null;H=T.createElement(x,b,ne)}var R={minMenuHeight:E,maxMenuHeight:C,menuPlacement:P,menuPosition:O,menuShouldScrollIntoView:Q},q=T.createElement(v$e,kr({},b,R),function(Y){var te=Y.ref,ie=Y.placerProps,pe=ie.placement,oe=ie.maxHeight;return T.createElement(d,kr({},b,R,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:I,placement:pe}),T.createElement(G$e,{captureEnabled:S,onTopArrive:W,onBottomArrive:Z,lockEnabled:M},function(ce){return T.createElement(f,kr({},b,{innerRef:function(ge){i.getMenuListRef(ge),ce(ge)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:I,maxHeight:oe,focusedOption:y}),H)}))});return F||O==="fixed"?T.createElement(m,kr({},b,{appendTo:F,controlElement:this.controlRef,menuPlacement:P,menuPosition:O}),q):q}},{key:"renderFormField",value:function(){var i=this,o=this.props,l=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,m=o.required,p=this.state.selectValue;if(m&&!this.hasValue()&&!u)return T.createElement(W$e,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(l){var x=p.map(function(y){return i.getOptionValue(y)}).join(l);return T.createElement("input",{name:f,type:"hidden",value:x})}var g=p.length>0?p.map(function(y,_){return T.createElement("input",{key:"i-".concat(_),name:f,type:"hidden",value:i.getOptionValue(y)})}):T.createElement("input",{name:f,type:"hidden",value:""});return T.createElement("div",null,g)}var b=p[0]?this.getOptionValue(p[0]):"";return T.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,l=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,m=o.selectValue,p=this.getFocusableOptions();return T.createElement(U$e,kr({},i,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:u,focusedValue:d,isFocused:f,selectValue:m,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,l=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,m=f.className,p=f.id,x=f.isDisabled,g=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return T.createElement(u,kr({},y,{className:m,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:x,isFocused:b}),this.renderLiveRegion(),T.createElement(o,kr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:x,isFocused:b,menuIsOpen:g}),T.createElement(d,kr({},y,{isDisabled:x}),this.renderPlaceholderOrValue(),this.renderInput()),T.createElement(l,kr({},y,{isDisabled:x}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var l=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,m=o.isFocused,p=o.prevWasFocused,x=o.instancePrefix,g=i.options,b=i.value,y=i.menuIsOpen,_=i.inputValue,S=i.isMulti,B=tz(b),I={};if(l&&(b!==l.value||g!==l.options||y!==l.menuIsOpen||_!==l.inputValue)){var D=y?function(M,Q){return xz(zE(M,Q))}(i,B):[],E=y?bz(zE(i,B),"".concat(x,"-option")):[],C=u?function(M,Q){var J=M.focusedValue,W=M.selectValue.indexOf(J);if(W>-1){if(Q.indexOf(J)>-1)return J;if(W<Q.length)return Q[W]}return null}(o,B):null,N=function(M,Q){var J=M.focusedOption;return J&&Q.indexOf(J)>-1?J:Q[0]}(o,D);I={selectValue:B,focusedOption:N,focusedOptionId:cT(E,N),focusableOptionsWithIds:E,focusedValue:C,clearFocusValueOnUpdate:!1}}var P=d!=null&&i!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},O=f,F=m&&p;return m&&!F&&(O={value:VE(S,B,B[0]||null),options:B,action:"initial-input-focus"},F=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(O=null),pr(pr(pr({},I),P),{},{prevProps:i,ariaSelection:O,prevWasFocused:F})}}],r&&PV(t.prototype,r),n&&PV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();wae.defaultProps=Z$e;var tKe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],rKe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],tP=Zn(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),nKe=Zn(function(e){var t=tP.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Eae=Zn(function(e){var t=tP.default;e.exports=function(r){var n=nKe(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),aKe=Zn(function(e){e.exports=function(t,r,n){return(r=Eae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){aKe(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),Zn(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),Zn(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Eae(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var sKe=Zn(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&sKe(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var wz=Zn(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),iKe=Zn(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),oKe=Zn(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),lKe=Zn(function(e){var t=tP.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oKe(r)},e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){e.exports=function(t){var r=iKe();return function(){var n,a=wz(t);if(r){var s=wz(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return lKe(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var tF=Zn(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),cKe=Zn(function(e){e.exports=function(t){if(Array.isArray(t))return tF(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),uKe=Zn(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Cae=Zn(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return tF(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tF(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),dKe=Zn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){e.exports=function(t){return cKe(t)||uKe(t)||Cae(t)||dKe()},e.exports.__esModule=!0,e.exports.default=e.exports});var AKe=Zn(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),fKe=Zn(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,l=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(l.push(a.value),l.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),hKe=Zn(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){e.exports=function(t,r){return AKe(t)||fKe(t,r)||Cae(t,r)||hKe()},e.exports.__esModule=!0,e.exports.default=e.exports});var mKe=Zn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});Zn(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=mKe(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),Zn(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var pKe=T.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,l=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,m=a.onInputChange,p=a.filterOption,x=p===void 0?null:p,g=Jd(a,rKe),b=g.inputValue,y=T.useRef(void 0),_=T.useRef(!1),S=Ti(T.useState(Array.isArray(i)?i:void 0),2),B=S[0],I=S[1],D=Ti(T.useState(b!==void 0?b:""),2),E=D[0],C=D[1],N=Ti(T.useState(i===!0),2),P=N[0],O=N[1],F=Ti(T.useState(void 0),2),M=F[0],Q=F[1],J=Ti(T.useState([]),2),W=J[0],Z=J[1],H=Ti(T.useState(!1),2),z=H[0],G=H[1],ne=Ti(T.useState({}),2),R=ne[0],q=ne[1],Y=Ti(T.useState(void 0),2),te=Y[0],ie=Y[1],pe=Ti(T.useState(void 0),2),oe=pe[0],ce=pe[1];l!==oe&&(q({}),ce(l)),i!==te&&(I(Array.isArray(i)?i:void 0),ie(i)),T.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var ge=T.useCallback(function(Ne,Oe){if(!u)return Oe();var Ce=u(Ne,Oe);Ce&&typeof Ce.then=="function"&&Ce.then(Oe,function(){return Oe()})},[u]);T.useEffect(function(){i===!0&&ge(E,function(Ne){_.current&&(I(Ne||[]),O(!!y.current))})},[]);var Fe=T.useCallback(function(Ne,Oe){var Ce=function(Ie,He,Xe){if(Xe){var dt=Xe(Ie,He);if(typeof dt=="string")return dt}return Ie}(Ne,Oe,m);if(!Ce)return y.current=void 0,C(""),Q(""),Z([]),O(!1),void G(!1);if(l&&R[Ce])C(Ce),Q(Ce),Z(R[Ce]),O(!1),G(!1);else{var fe=y.current={};C(Ce),O(!0),G(!M),ge(Ce,function(Ie){_&&fe===y.current&&(y.current=void 0,O(!1),Q(Ce),Z(Ie||[]),G(!1),q(Ie?pr(pr({},R),{},Yg({},Ce,Ie)):R))})}},[l,ge,M,R,m]),re=z?[]:E&&M?W:B||[];return pr(pr({},g),{},{options:re,isLoading:P||f,onInputChange:Fe,filterOption:x})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,l=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,m=a.menuIsOpen,p=a.onChange,x=a.onInputChange,g=a.onMenuClose,b=a.onMenuOpen,y=a.value,_=Jd(a,tKe),S=Ti(T.useState(f!==void 0?f:i),2),B=S[0],I=S[1],D=Ti(T.useState(m!==void 0?m:l),2),E=D[0],C=D[1],N=Ti(T.useState(y!==void 0?y:d),2),P=N[0],O=N[1],F=T.useCallback(function(z,G){typeof p=="function"&&p(z,G),O(z)},[p]),M=T.useCallback(function(z,G){var ne;typeof x=="function"&&(ne=x(z,G)),I(ne!==void 0?ne:z)},[x]),Q=T.useCallback(function(){typeof b=="function"&&b(),C(!0)},[b]),J=T.useCallback(function(){typeof g=="function"&&g(),C(!1)},[g]),W=f!==void 0?f:B,Z=m!==void 0?m:E,H=y!==void 0?y:P;return pr(pr({},_),{},{inputValue:W,menuIsOpen:Z,onChange:F,onInputChange:M,onMenuClose:J,onMenuOpen:Q,value:H})}(r);return T.createElement(wae,kr({ref:t},n))}),gKe=pKe,vKe=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},Jg;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Jg||(Jg={}));class Tm{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:l,nonce:u,region:d,retries:f=3,url:m="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=l,this.nonce=u,this.region=d,this.retries=f,this.url=m,this.version=p,Tm.instance){if(!vKe(this.options,Tm.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Tm.instance.options)}`);return Tm.instance}Tm.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Jg.FAILURE:this.done?Jg.SUCCESS:this.loading?Jg.LOADING:Jg.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var xKe=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(l,u){var d={};for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&u.indexOf(f)<0&&(d[f]=l[f]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(f=Object.getOwnPropertySymbols(l);m<f.length;m++)u.indexOf(f[m])<0&&Object.prototype.propertyIsEnumerable.call(l,f[m])&&(d[f[m]]=l[f[m]])}return d}(e,["bounds","location"]),o=Jm({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var l=0,u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var f=Array(l),m=0;for(u=0;u<d;u++)for(var p=arguments[u],x=0,g=p.length;x<g;x++,m++)f[m]=p[x];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},bKe=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(l,u,d){d===void 0&&(d={});var f=d.maxWait,m=T.useRef(null),p=T.useRef([]),x=d.leading,g=d.trailing===void 0||d.trailing,b=T.useRef(!1),y=T.useRef(null),_=T.useRef(!1),S=T.useRef(l);S.current=l;var B=T.useCallback(function(){clearTimeout(y.current),clearTimeout(m.current),m.current=null,p.current=[],y.current=null,b.current=!1},[]);T.useEffect(function(){return _.current=!1,function(){_.current=!0}},[]);var I=T.useCallback(function(){for(var E=[],C=0;C<arguments.length;C++)E[C]=arguments[C];p.current=E,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!x||b.current||(S.current.apply(S,E),b.current=!0),y.current=setTimeout(function(){var N=!0;x&&b.current&&(N=!1),B(),!_.current&&g&&N&&S.current.apply(S,E)},u),f&&!m.current&&g&&(m.current=setTimeout(function(){var N=p.current;B(),_.current||S.current.apply(null,N)},f))},[f,u,B,x,g]),D=T.useCallback(function(){y.current&&(S.current.apply(null,p.current),B())},[B]);return[I,B,D]}(function(l,u){if(!a)return u([]);if(l.length<n)return u([]);var d=Jm({},t);a.getPlacePredictions(xKe(d,l,i&&s),function(f){u((f||[]).map(function(m){return{label:m.description,value:m}}))})},r)[0];return o},Ez=T.forwardRef(function(e,t){var r,n,a,s,i,o,l,u,d=function(g){var b=g.apiKey,y=g.apiOptions,_=g.onLoadFailed,S=T.useState(void 0),B=S[0],I=S[1],D=T.useState(void 0),E=D[0],C=D[1],N=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");I(new window.google.maps.places.AutocompleteService),C(new google.maps.places.AutocompleteSessionToken)};return T.useEffect(function(){b?Cze(void 0,void 0,void 0,function(){var P;return _ze(this,function(O){switch(O.label){case 0:if(!b)return[2];O.label=1;case 1:return O.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new Tm(Jm({apiKey:b},Jm({libraries:["places"]},y))).load()];case 2:O.sent(),O.label=3;case 3:return N(),[3,5];case 4:return P=O.sent(),typeof _=="function"&&_(P),[3,5];case 5:return[2]}})}):N()},[]),{placesService:B,sessionToken:E,setSessionToken:C}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,m=d.sessionToken,p=d.setSessionToken,x=bKe({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:m,withSessionToken:(l=e.withSessionToken)!==null&&l!==void 0&&l});return T.useImperativeHandle(t,function(){return{getSessionToken:function(){return m},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[m]),ft.createElement(gKe,Jm({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:x,getOptionValue:function(g){return g.value.place_id}}))});function _ae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_ae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function An(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_ae(e))&&(n&&(n+=" "),n+=t);return n}var uT={},dT={},Cz;function yKe(){return Cz||(Cz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(dT)),dT}var AT={},_z;function Sae(){return _z||(_z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(AT)),AT}var fT={},Sz;function Nae(){return Sz||(Sz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(fT)),fT}var hT={},Nz;function rP(){return Nz||(Nz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(hT)),hT}var Bz;function nP(){return Bz||(Bz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yKe(),r=Sae(),n=Nae(),a=rP();function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?s(o,a.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=s}(uT)),uT}var mT,kz;function wKe(){return kz||(kz=1,mT=nP().get),mT}var EKe=wKe();const O0=il(EKe);var pT={exports:{}},Wn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tz;function CKe(){if(Tz)return Wn;Tz=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,_=e?Symbol.for("react.scope"):60119;function S(I){if(typeof I=="object"&&I!==null){var D=I.$$typeof;switch(D){case t:switch(I=I.type,I){case l:case u:case n:case s:case a:case f:return I;default:switch(I=I&&I.$$typeof,I){case o:case d:case x:case p:case i:return I;default:return D}}case r:return D}}}function B(I){return S(I)===u}return Wn.AsyncMode=l,Wn.ConcurrentMode=u,Wn.ContextConsumer=o,Wn.ContextProvider=i,Wn.Element=t,Wn.ForwardRef=d,Wn.Fragment=n,Wn.Lazy=x,Wn.Memo=p,Wn.Portal=r,Wn.Profiler=s,Wn.StrictMode=a,Wn.Suspense=f,Wn.isAsyncMode=function(I){return B(I)||S(I)===l},Wn.isConcurrentMode=B,Wn.isContextConsumer=function(I){return S(I)===o},Wn.isContextProvider=function(I){return S(I)===i},Wn.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===t},Wn.isForwardRef=function(I){return S(I)===d},Wn.isFragment=function(I){return S(I)===n},Wn.isLazy=function(I){return S(I)===x},Wn.isMemo=function(I){return S(I)===p},Wn.isPortal=function(I){return S(I)===r},Wn.isProfiler=function(I){return S(I)===s},Wn.isStrictMode=function(I){return S(I)===a},Wn.isSuspense=function(I){return S(I)===f},Wn.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===n||I===u||I===s||I===a||I===f||I===m||typeof I=="object"&&I!==null&&(I.$$typeof===x||I.$$typeof===p||I.$$typeof===i||I.$$typeof===o||I.$$typeof===d||I.$$typeof===b||I.$$typeof===y||I.$$typeof===_||I.$$typeof===g)},Wn.typeOf=S,Wn}var Iz;function _Ke(){return Iz||(Iz=1,pT.exports=CKe()),pT.exports}var SKe=_Ke(),Li=e=>e===0?0:e>0?1:-1,xc=e=>typeof e=="number"&&e!=+e,Rm=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,sr=e=>(typeof e=="number"||e instanceof Number)&&!xc(e),gA=e=>sr(e)||typeof e=="string",NKe=0,Ny=e=>{var t=++NKe;return"".concat(e||"").concat(t)},sl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!sr(t)&&typeof t!="string")return n;var s;if(Rm(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return xc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Bae=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Zg=(e,t)=>sr(e)&&sr(t)?r=>e+r*(t-e):()=>t;function Og(e,t,r){return sr(e)&&sr(t)?e+r*(t-e):t}function BKe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):O0(n,t))===r)}var vs=e=>e===null||typeof e>"u",vw=e=>vs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),kKe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function aP(e){if(typeof e!="string")return!1;var t=kKe;return t.includes(e)}var TKe=["viewBox","children"],jz=["points","pathLength"],gT={svg:TKe,polygon:jz,polyline:jz},sP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(T.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{aP(a)&&(n[a]=s=>r[a](r,s))}),n},IKe=(e,t,r)=>n=>(e(t,r,n),null),vx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];aP(a)&&typeof s=="function"&&(n||(n={}),n[a]=IKe(s,t,r))}),n},jKe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function kae(e){if(typeof e!="string")return!1;var t=jKe;return t.includes(e)}function zo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return kae(n)});return Object.fromEntries(t)}var Fz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Oz=null,vT=null,Tae=e=>{if(e===Oz&&Array.isArray(vT))return vT;var t=[];return T.Children.forEach(e,r=>{vs(r)||(SKe.isFragment(r)?t=t.concat(Tae(r.props.children)):t.push(r))}),vT=t,Oz=e,t};function xw(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Fz(a)):n=[Fz(t)],Tae(e).forEach(a=>{var s=O0(a,"type.displayName")||O0(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var FKe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(gT==null?void 0:gT[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||kae(t)),l=!!r&&aP(t);return i||o||l},Qn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;FKe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},OKe=["children","width","height","viewBox","className","style","title","desc"];function rF(){return rF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rF.apply(null,arguments)}function DKe(e,t){if(e==null)return{};var r,n,a=PKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Iae=T.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:l,desc:u}=e,d=DKe(e,OKe),f=s||{width:n,height:a,x:0,y:0},m=An("recharts-surface",i);return T.createElement("svg",rF({},Qn(d,!0,"svg"),{className:m,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),T.createElement("title",null,l),T.createElement("desc",null,u),r)}),RKe=["children","className"];function nF(){return nF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nF.apply(null,arguments)}function LKe(e,t){if(e==null)return{};var r,n,a=UKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var es=T.forwardRef((e,t)=>{var{children:r,className:n}=e,a=LKe(e,RKe),s=An("recharts-layer",n);return T.createElement("g",nF({className:s},Qn(a,!0),{ref:t}),r)}),MKe=T.createContext(null),QKe=["type","size","sizeType"];function aF(){return aF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aF.apply(null,arguments)}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(r),!0).forEach(function(n){HKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HKe(e,t,r){return(t=VKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VKe(e){var t=zKe(e,"string");return typeof t=="symbol"?t:t+""}function zKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Ke(e,t){if(e==null)return{};var r,n,a=KKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jae={symbolCircle:zD,symbolCross:xVe,symbolDiamond:yVe,symbolSquare:wVe,symbolStar:SVe,symbolTriangle:NVe,symbolWye:kVe},GKe=Math.PI/180,qKe=e=>{var t="symbol".concat(vw(e));return jae[t]||zD},WKe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*GKe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},XKe=(e,t)=>{jae["symbol".concat(vw(e))]=t},Fae=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=$Ke(e,QKe),s=Pz(Pz({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=qKe(t),m=TVe().type(f).size(WKe(r,n,t));return m()},{className:o,cx:l,cy:u}=s,d=Qn(s,!0);return l===+l&&u===+u&&r===+r?T.createElement("path",aF({},d,{className:An("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(u,")"),d:i()})):null};Fae.registerSymbol=XKe;var xT={},bT={},Rz;function YKe(){return Rz||(Rz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(bT)),bT}var yT={},Lz;function NN(){return Lz||(Lz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(yT)),yT}var wT={},ET={},CT={},Uz;function JKe(){return Uz||(Uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(CT)),CT}var Mz;function iP(){return Mz||(Mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JKe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(ET)),ET}var _T={},Qz;function ZKe(){return Qz||(Qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(_T)),_T}var Hz;function eGe(){return Hz||(Hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iP(),r=ZKe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(wT)),wT}var ST={},NT={},Vz;function tGe(){return Vz||(Vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(NT)),NT}var BT={},kT={},TT={},IT={},zz;function Oae(){return zz||(zz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(IT)),IT}var jT={},$z;function Dae(){return $z||($z=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(jT)),jT}var FT={},Kz;function oP(){return Kz||(Kz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(FT)),FT}var Gz;function rGe(){return Gz||(Gz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lP(),r=Oae(),n=Dae(),a=oP();function s(f,m,p){return typeof p!="function"?t.isMatch(f,m):i(f,m,function x(g,b,y,_,S,B){const I=p(g,b,y,_,S,B);return I!==void 0?!!I:i(g,b,x,B)},new Map)}function i(f,m,p,x){if(m===f)return!0;switch(typeof m){case"object":return o(f,m,p,x);case"function":return Object.keys(m).length>0?i(f,{...m},p,x):a.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:a.eq(f,m)}}function o(f,m,p,x){if(m==null)return!0;if(Array.isArray(m))return u(f,m,p,x);if(m instanceof Map)return l(f,m,p,x);if(m instanceof Set)return d(f,m,p,x);const g=Object.keys(m);if(f==null)return g.length===0;if(g.length===0)return!0;if(x&&x.has(m))return x.get(m)===f;x&&x.set(m,f);try{for(let b=0;b<g.length;b++){const y=g[b];if(!n.isPrimitive(f)&&!(y in f)||m[y]===void 0&&f[y]!==void 0||m[y]===null&&f[y]!==null||!p(f[y],m[y],y,f,m,x))return!1}return!0}finally{x&&x.delete(m)}}function l(f,m,p,x){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,b]of m.entries()){const y=f.get(g);if(p(y,b,g,f,m,x)===!1)return!1}return!0}function u(f,m,p,x){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let b=0;b<m.length;b++){const y=m[b];let _=!1;for(let S=0;S<f.length;S++){if(g.has(S))continue;const B=f[S];let I=!1;if(p(B,y,b,f,m,x)&&(I=!0),I){g.add(S),_=!0;break}}if(!_)return!1}return!0}function d(f,m,p,x){return m.size===0?!0:f instanceof Set?u([...f],[...m],p,x):!1}e.isMatchWith=s,e.isSetMatch=d}(TT)),TT}var qz;function lP(){return qz||(qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rGe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(kT)),kT}var OT={},DT={},PT={},Wz;function Pae(){return Wz||(Wz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(PT)),PT}var RT={},Xz;function cP(){return Xz||(Xz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(RT)),RT}var LT={},Yz;function uP(){return Yz||(Yz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",p="[object Object]",x="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",B="[object BigUint64Array]",I="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",C="[object BigInt64Array]",N="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=B,e.booleanTag=a,e.dataViewTag=g,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=N,e.float64ArrayTag=P,e.functionTag=f,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=I,e.mapTag=l,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(LT)),LT}var UT={},Jz;function nGe(){return Jz||(Jz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(UT)),UT}var Zz;function Rae(){return Zz||(Zz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pae(),r=cP(),n=uP(),a=Dae(),s=nGe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,m,p=new Map,x=void 0){const g=x==null?void 0:x(d,f,m,p);if(g!=null)return g;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,m,p,x);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,_]of d)b.set(y,o(_,y,m,p,x));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,m,p,x));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,m,p,x);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),l(b,d,m,p,x),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),l(b,d,m,p,x),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),l(b,d,m,p,x),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,m,p,x),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),l(b,d,m,p,x),b}return d}function l(d,f,m=d,p,x){const g=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<g.length;b++){const y=g[b],_=Object.getOwnPropertyDescriptor(d,y);(_==null||_.writable)&&(d[y]=o(f[y],y,m,p,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l}(DT)),DT}var e$;function aGe(){return e$||(e$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(OT)),OT}var t$;function sGe(){return t$||(t$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lP(),r=aGe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(BT)),BT}var MT={},QT={},HT={},r$;function iGe(){return r$||(r$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rae(),r=uP();function n(a,s){return t.cloneDeepWith(a,(i,o,l,u)=>{const d=s==null?void 0:s(i,o,l,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(HT)),HT}var n$;function oGe(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iGe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(QT)),QT}var VT={},zT={},a$;function Lae(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(zT)),zT}var $T={},s$;function lGe(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}($T)),$T}var i$;function cGe(){return i$||(i$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sae(),r=Lae(),n=lGe(),a=rP();function s(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?l=a.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(VT)),VT}var o$;function uGe(){return o$||(o$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lP(),r=Nae(),n=oGe(),a=nP(),s=cGe();function i(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i}(MT)),MT}var l$;function dP(){return l$||(l$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NN(),r=tGe(),n=sGe(),a=uGe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(ST)),ST}var c$;function dGe(){return c$||(c$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YKe(),r=NN(),n=eGe(),a=dP();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(xT)),xT}var KT,u$;function AGe(){return u$||(u$=1,KT=dGe().uniqBy),KT}var fGe=AGe();const d$=il(fGe);function hGe(e,t,r){return t===!0?d$(e,r):typeof t=="function"?d$(e,t):e}var AP=T.createContext(null),mGe=e=>e,ts=()=>{var e=T.useContext(AP);return e?e.store.dispatch:mGe},zC=()=>{},pGe=()=>zC,gGe=(e,t)=>e===t;function nr(e){var t=T.useContext(AP);return ste.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:pGe,t?t.store.getState:zC,t?t.store.getState:zC,t?e:zC,gGe)}function vGe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function xGe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function bGe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var A$=e=>Array.isArray(e)?e:[e];function yGe(e){const t=Array.isArray(e[0])?e[0]:e;return bGe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function wGe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var EGe=class{constructor(e){this.value=e}deref(){return this.value}},CGe=typeof WeakRef<"u"?WeakRef:EGe,_Ge=0,f$=1;function $E(){return{s:_Ge,v:void 0,o:null,p:null}}function Uae(e,t={}){let r=$E();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:l}=arguments;for(let m=0,p=l;m<p;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const b=g.get(x);b===void 0?(o=$E(),g.set(x,o)):o=b}else{let g=o.p;g===null&&(o.p=g=new Map);const b=g.get(x);b===void 0?(o=$E(),g.set(x,o)):o=b}}const u=o;let d;if(o.s===f$)d=o.v;else if(d=e.apply(null,arguments),s++,n){const m=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;m!=null&&n(m,d)&&(d=m,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new CGe(d):d}return u.s=f$,u.v=d,d}return i.clearCache=()=>{r=$E(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function SGe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),vGe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:m=[],argsMemoize:p=Uae,argsMemoizeOptions:x=[]}=d,g=A$(m),b=A$(x),y=yGe(a),_=f(function(){return s++,u.apply(null,arguments)},...g),S=p(function(){i++;const I=wGe(y,arguments);return o=_.apply(null,I),o},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:_,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var at=SGe(Uae),NGe=Object.assign((e,t=at)=>{xGe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>NGe}),GT={},qT={},WT={},h$;function BGe(){return h$||(h$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(WT)),WT}var XT={},YT={},m$;function Mae(){return m$||(m$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(YT)),YT}var p$;function kGe(){return p$||(p$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mae(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(XT)),XT}var g$;function TGe(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BGe(),r=kGe(),n=rP();function a(s,i,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,x)=>{let g=p;for(let b=0;b<x.length&&g!=null;++b)g=g[x[b]];return g},d=(p,x)=>x==null||p==null?x:typeof p=="object"&&"key"in p?Object.hasOwn(x,p.key)?x[p.key]:u(x,p.path):typeof p=="function"?p(x):Array.isArray(p)?u(x,p):typeof x=="object"?x[p]:x,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(x=>d(x,p))})).slice().sort((p,x)=>{for(let g=0;g<f.length;g++){const b=t.compareValues(p.criteria[g],x.criteria[g],o[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(qT)),qT}var JT={},v$;function IGe(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<s?i(d,l+1):a.push(d)}};return i(r,0),a}e.flatten=t}(JT)),JT}var ZT={},x$;function Qae(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lae(),r=iP(),n=Oae(),a=oP();function s(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?a.eq(l[o],i):!1}e.isIterateeCall=s}(ZT)),ZT}var b$;function jGe(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TGe(),r=IGe(),n=Qae();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(GT)),GT}var e3,y$;function FGe(){return y$||(y$=1,e3=jGe().sortBy),e3}var OGe=FGe();const BN=il(OGe);var Hae=e=>e.legend.settings,DGe=e=>e.legend.size,PGe=e=>e.legend.payload;at([PGe,Hae],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?BN(n,r):n});var KE=1;function RGe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>KE||Math.abs(i.left-t.left)>KE||Math.abs(i.top-t.top)>KE||Math.abs(i.width-t.width)>KE)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Xi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LGe=typeof Symbol=="function"&&Symbol.observable||"@@observable",w$=LGe,t3=()=>Math.random().toString(36).substring(7).split("").join("."),UGe={INIT:`@@redux/INIT${t3()}`,REPLACE:`@@redux/REPLACE${t3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${t3()}`},xS=UGe;function fP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vae(e,t,r){if(typeof e!="function")throw new Error(Xi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xi(1));return r(Vae)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(l)throw new Error(Xi(3));return a}function f(b){if(typeof b!="function")throw new Error(Xi(4));if(l)throw new Error(Xi(5));let y=!0;u();const _=o++;return i.set(_,b),function(){if(y){if(l)throw new Error(Xi(6));y=!1,u(),i.delete(_),s=null}}}function m(b){if(!fP(b))throw new Error(Xi(7));if(typeof b.type>"u")throw new Error(Xi(8));if(typeof b.type!="string")throw new Error(Xi(17));if(l)throw new Error(Xi(9));try{l=!0,a=n(a,b)}finally{l=!1}return(s=i).forEach(_=>{_()}),b}function p(b){if(typeof b!="function")throw new Error(Xi(10));n=b,m({type:xS.REPLACE})}function x(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Xi(11));function _(){const B=y;B.next&&B.next(d())}return _(),{unsubscribe:b(_)}},[w$](){return this}}}return m({type:xS.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[w$]:x}}function MGe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:xS.INIT})>"u")throw new Error(Xi(12));if(typeof r(void 0,{type:xS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xi(13))})}function zae(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{MGe(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],p=i[f],x=m(p,o);if(typeof x>"u")throw o&&o.type,new Error(Xi(14));u[f]=x,l=l||x!==p}return l=l||n.length!==Object.keys(i).length,l?u:i}}function bS(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function QGe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Xi(15))};const i={getState:a.getState,dispatch:(l,...u)=>s(l,...u)},o=e.map(l=>l(i));return s=bS(...o)(a.dispatch),{...a,dispatch:s}}}function $ae(e){return fP(e)&&"type"in e&&typeof e.type=="string"}var Kae=Symbol.for("immer-nothing"),E$=Symbol.for("immer-draftable"),bc=Symbol.for("immer-state");function Yu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gv=Object.getPrototypeOf;function vp(e){return!!e&&!!e[bc]}function Df(e){var t;return e?Gae(e)||Array.isArray(e)||!!e[E$]||!!((t=e.constructor)!=null&&t[E$])||TN(e)||IN(e):!1}var HGe=Object.prototype.constructor.toString();function Gae(e){if(!e||typeof e!="object")return!1;const t=Gv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===HGe}function yS(e,t){kN(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function kN(e){const t=e[bc];return t?t.type_:Array.isArray(e)?1:TN(e)?2:IN(e)?3:0}function sF(e,t){return kN(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qae(e,t,r){const n=kN(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function VGe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function TN(e){return e instanceof Map}function IN(e){return e instanceof Set}function Cm(e){return e.copy_||e.base_}function iF(e,t){if(TN(e))return new Map(e);if(IN(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Gae(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[bc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Gv(e),n)}else{const n=Gv(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function hP(e,t=!1){return jN(e)||vp(e)||!Df(e)||(kN(e)>1&&(e.set=e.add=e.clear=e.delete=zGe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>hP(n,!0))),e}function zGe(){Yu(2)}function jN(e){return Object.isFrozen(e)}var $Ge={};function xp(e){const t=$Ge[e];return t||Yu(0,e),t}var By;function Wae(){return By}function KGe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function C$(e,t){t&&(xp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oF(e){lF(e),e.drafts_.forEach(GGe),e.drafts_=null}function lF(e){e===By&&(By=e.parent_)}function _$(e){return By=KGe(By,e)}function GGe(e){const t=e[bc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function S$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[bc].modified_&&(oF(t),Yu(4)),Df(e)&&(e=wS(t,e),t.parent_||ES(t,e)),t.patches_&&xp("Patches").generateReplacementPatches_(r[bc].base_,e,t.patches_,t.inversePatches_)):e=wS(t,r,[]),oF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Kae?e:void 0}function wS(e,t,r){if(jN(t))return t;const n=t[bc];if(!n)return yS(t,(a,s)=>N$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return ES(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),yS(s,(o,l)=>N$(e,n,a,o,l,r,i)),ES(e,a,!1),r&&e.patches_&&xp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function N$(e,t,r,n,a,s,i){if(vp(a)){const o=s&&t&&t.type_!==3&&!sF(t.assigned_,n)?s.concat(n):void 0,l=wS(e,a,o);if(qae(r,n,l),vp(l))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Df(a)&&!jN(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;wS(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&ES(e,a)}}function ES(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&hP(t,r)}function qGe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Wae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=mP;r&&(a=[n],s=ky);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var mP={get(e,t){if(t===bc)return e;const r=Cm(e);if(!sF(r,t))return WGe(e,r,t);const n=r[t];return e.finalized_||!Df(n)?n:n===r3(e.base_,t)?(n3(e),e.copy_[t]=uF(n,e)):n},has(e,t){return t in Cm(e)},ownKeys(e){return Reflect.ownKeys(Cm(e))},set(e,t,r){const n=Xae(Cm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=r3(Cm(e),t),s=a==null?void 0:a[bc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(VGe(r,a)&&(r!==void 0||sF(e.base_,t)))return!0;n3(e),cF(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return r3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,n3(e),cF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Cm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Yu(11)},getPrototypeOf(e){return Gv(e.base_)},setPrototypeOf(){Yu(12)}},ky={};yS(mP,(e,t)=>{ky[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ky.deleteProperty=function(e,t){return ky.set.call(this,e,t,void 0)};ky.set=function(e,t,r){return mP.set.call(this,e[0],t,r,e[0])};function r3(e,t){const r=e[bc];return(r?Cm(r):e)[t]}function WGe(e,t,r){var a;const n=Xae(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Xae(e,t){if(!(t in e))return;let r=Gv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Gv(r)}}function cF(e){e.modified_||(e.modified_=!0,e.parent_&&cF(e.parent_))}function n3(e){e.copy_||(e.copy_=iF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var XGe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(l=s,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&Yu(6),n!==void 0&&typeof n!="function"&&Yu(7);let a;if(Df(t)){const s=_$(this),i=uF(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?oF(s):lF(s)}return C$(s,n),S$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Kae&&(a=void 0),this.autoFreeze_&&hP(a,!0),n){const s=[],i=[];xp("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else Yu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Df(e)||Yu(8),vp(e)&&(e=bf(e));const t=_$(this),r=uF(e,void 0);return r[bc].isManual_=!0,lF(t),r}finishDraft(e,t){const r=e&&e[bc];(!r||!r.isManual_)&&Yu(9);const{scope_:n}=r;return C$(n,t),S$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=xp("Patches").applyPatches_;return vp(e)?n(e,t):this.produce(e,a=>n(a,t))}};function uF(e,t){const r=TN(e)?xp("MapSet").proxyMap_(e,t):IN(e)?xp("MapSet").proxySet_(e,t):qGe(e,t);return(t?t.scope_:Wae()).drafts_.push(r),r}function bf(e){return vp(e)||Yu(10,e),Yae(e)}function Yae(e){if(!Df(e)||jN(e))return e;const t=e[bc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=iF(e,t.scope_.immer_.useStrictShallowCopy_)}else r=iF(e,!0);return yS(r,(n,a)=>{qae(r,n,Yae(a))}),t&&(t.finalized_=!1),r}var yc=new XGe,Jae=yc.produce;yc.produceWithPatches.bind(yc);yc.setAutoFreeze.bind(yc);yc.setUseStrictShallowCopy.bind(yc);yc.applyPatches.bind(yc);yc.createDraft.bind(yc);yc.finishDraft.bind(yc);function Zae(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var YGe=Zae(),JGe=Zae,ZGe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bS:bS.apply(null,arguments)};function pu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(pc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>$ae(n)&&n.type===e,r}var ese=class ub extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ub.prototype)}static get[Symbol.species](){return ub}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ub(...t[0].concat(this)):new ub(...t.concat(this))}};function B$(e){return Df(e)?Jae(e,()=>{}):e}function GE(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function eqe(e){return typeof e=="boolean"}var tqe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new ese;return r&&(eqe(r)?i.push(YGe):i.push(JGe(r.extraArgument))),i},rqe="RTK_autoBatch",k$=e=>t=>{setTimeout(t,e)},nqe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:k$(10):e.type==="callback"?e.queueNotification:k$(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),m=n.subscribe(f);return o.add(d),()=>{m(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[rqe]),s=!a,s&&(i||(i=!0,l(u))),n.dispatch(d)}finally{a=!0}}})},aqe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new ese(e);return n&&a.push(nqe(typeof n=="object"?n:void 0)),a};function sqe(e){const t=tqe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(fP(r))o=zae(r);else throw new Error(pc(1));let l;typeof n=="function"?l=n(t):l=t();let u=bS;a&&(u=ZGe({trace:!1,...typeof a=="object"&&a}));const d=QGe(...l),f=aqe(d);let m=typeof i=="function"?i(f):f();const p=u(...m);return Vae(o,s,p)}function tse(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(pc(28));if(o in t)throw new Error(pc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function iqe(e){return typeof e=="function"}function oqe(e,t){let[r,n,a]=tse(t),s;if(iqe(e))s=()=>B$(e());else{const o=B$(e);s=()=>o}function i(o=s(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(vp(d)){const p=f(d,l);return p===void 0?d:p}else{if(Df(d))return Jae(d,m=>f(m,l));{const m=f(d,l);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},o)}return i.getInitialState=s,i}var lqe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cqe=(e=21)=>{let t="",r=e;for(;r--;)t+=lqe[Math.random()*64|0];return t},uqe=Symbol.for("rtk-slice-createasyncthunk");function dqe(e,t){return`${e}/${t}`}function Aqe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[uqe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(pc(11));const o=(typeof a.reducers=="function"?a.reducers(hqe()):a.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(B,I){const D=typeof B=="string"?B:B.type;if(!D)throw new Error(pc(12));if(D in u.sliceCaseReducersByType)throw new Error(pc(13));return u.sliceCaseReducersByType[D]=I,d},addMatcher(B,I){return u.sliceMatchers.push({matcher:B,reducer:I}),d},exposeAction(B,I){return u.actionCreators[B]=I,d},exposeCaseReducer(B,I){return u.sliceCaseReducersByName[B]=I,d}};l.forEach(B=>{const I=o[B],D={reducerName:B,type:dqe(s,B),createNotation:typeof a.reducers=="function"};pqe(I)?vqe(D,I,d,t):mqe(D,I,d)});function f(){const[B={},I=[],D=void 0]=typeof a.extraReducers=="function"?tse(a.extraReducers):[a.extraReducers],E={...B,...u.sliceCaseReducersByType};return oqe(a.initialState,C=>{for(let N in E)C.addCase(N,E[N]);for(let N of u.sliceMatchers)C.addMatcher(N.matcher,N.reducer);for(let N of I)C.addMatcher(N.matcher,N.reducer);D&&C.addDefaultCase(D)})}const m=B=>B,p=new Map,x=new WeakMap;let g;function b(B,I){return g||(g=f()),g(B,I)}function y(){return g||(g=f()),g.getInitialState()}function _(B,I=!1){function D(C){let N=C[B];return typeof N>"u"&&I&&(N=GE(x,D,y)),N}function E(C=m){const N=GE(p,I,()=>new WeakMap);return GE(N,C,()=>{const P={};for(const[O,F]of Object.entries(a.selectors??{}))P[O]=fqe(F,C,()=>GE(x,C,y),I);return P})}return{reducerPath:B,getSelectors:E,get selectors(){return E(D)},selectSlice:D}}const S={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,..._(i),injectInto(B,{reducerPath:I,...D}={}){const E=I??i;return B.inject({reducerPath:E,reducer:b},D),{...S,..._(E,!0)}}};return S}}function fqe(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Ec=Aqe();function hqe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function mqe({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!gqe(n))throw new Error(pc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?pu(e,i):pu(e))}function pqe(e){return e._reducerDefinitionType==="asyncThunk"}function gqe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function vqe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(pc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||qE,pending:o||qE,rejected:l||qE,settled:u||qE})}function qE(){}var xqe="task",rse="listener",nse="completed",pP="cancelled",bqe=`task-${pP}`,yqe=`task-${nse}`,dF=`${rse}-${pP}`,wqe=`${rse}-${nse}`,FN=class{constructor(e){aB(this,"name","TaskAbortError");aB(this,"message");this.code=e,this.message=`${xqe} ${pP} (reason: ${e})`}},gP=(e,t)=>{if(typeof e!="function")throw new TypeError(pc(32))},CS=()=>{},ase=(e,t=CS)=>(e.catch(t),e),sse=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),tp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},rp=e=>{if(e.aborted){const{reason:t}=e;throw new FN(t)}};function ise(e,t){let r=CS;return new Promise((n,a)=>{const s=()=>a(new FN(e.reason));if(e.aborted){s();return}r=sse(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=CS})}var Eqe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof FN?"cancelled":"rejected",error:r}}finally{t==null||t()}},_S=e=>t=>ase(ise(e,t).then(r=>(rp(e),r))),ose=e=>{const t=_S(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ev}=Object,T$={},ON="listenerMiddleware",Cqe=(e,t)=>{const r=n=>sse(e,()=>tp(n,e.reason));return(n,a)=>{gP(n);const s=new AbortController;r(s);const i=Eqe(async()=>{rp(e),rp(s.signal);const o=await n({pause:_S(s.signal),delay:ose(s.signal),signal:s.signal});return rp(s.signal),o},()=>tp(s,yqe));return a!=null&&a.autoJoin&&t.push(i.catch(CS)),{result:_S(e)(i),cancel(){tp(s,bqe)}}}},_qe=(e,t)=>{const r=async(n,a)=>{rp(t);let s=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),l([f,m.getState(),m.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await ise(t,Promise.race(o));return rp(t),l}finally{s()}};return(n,a)=>ase(r(n,a))},lse=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=pu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(pc(21));return gP(s),{predicate:a,type:t,effect:s}},cse=Ev(e=>{const{type:t,predicate:r,effect:n}=lse(e);return{id:cqe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(pc(22))}}},{withTypes:()=>cse}),I$=(e,t)=>{const{type:r,effect:n,predicate:a}=lse(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},AF=e=>{e.pending.forEach(t=>{tp(t,dF)})},Sqe=e=>()=>{e.forEach(AF),e.clear()},j$=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},use=Ev(pu(`${ON}/add`),{withTypes:()=>use}),Nqe=pu(`${ON}/removeAll`),dse=Ev(pu(`${ON}/remove`),{withTypes:()=>dse}),Bqe=(...e)=>{console.error(`${ON}/error`,...e)},bw=(e={})=>{const t=new Map,{extra:r,onError:n=Bqe}=e;gP(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&AF(d)}),s=d=>{const f=I$(t,d)??cse(d);return a(f)};Ev(s,{withTypes:()=>s});const i=d=>{const f=I$(t,d);return f&&(f.unsubscribe(),d.cancelActive&&AF(f)),!!f};Ev(i,{withTypes:()=>i});const o=async(d,f,m,p)=>{const x=new AbortController,g=_qe(s,x.signal),b=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,Ev({},m,{getOriginalState:p,condition:(y,_)=>g(y,_).then(Boolean),take:g,delay:ose(x.signal),pause:_S(x.signal),extra:r,signal:x.signal,fork:Cqe(x.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,_,S)=>{y!==x&&(tp(y,dF),S.delete(y))})},cancel:()=>{tp(x,dF),d.pending.delete(x)},throwIfCancelled:()=>{rp(x.signal)}})))}catch(y){y instanceof FN||j$(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),tp(x,wqe),d.pending.delete(x)}},l=Sqe(t);return{middleware:d=>f=>m=>{if(!$ae(m))return f(m);if(use.match(m))return s(m.payload);if(Nqe.match(m)){l();return}if(dse.match(m))return i(m.payload);let p=d.getState();const x=()=>{if(p===T$)throw new Error(pc(23));return p};let g;try{if(g=f(m),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const _ of y){let S=!1;try{S=_.predicate(m,b,p)}catch(B){S=!1,j$(n,B,{raisedBy:"predicate"})}S&&o(_,m,d,x)}}}finally{p=T$}return g},startListening:s,stopListening:i,clearListeners:l}};function pc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kqe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ase=Ec({name:"chartLayout",initialState:kqe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Tqe,setLayout:Iqe,setChartSize:jqe,setScale:Fqe}=Ase.actions,Oqe=Ase.reducer;function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F$(Object(r),!0).forEach(function(n){Dqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dqe(e,t,r){return(t=Pqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pqe(e){var t=Rqe(e,"string");return typeof t=="symbol"?t:t+""}function Rqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SS=Math.PI/180,Lqe=e=>e*180/Math.PI,$n=(e,t,r,n)=>({x:e+Math.cos(-SS*n)*r,y:t+Math.sin(-SS*n)*r}),fse=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Uqe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},Mqe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=Uqe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,l=Math.acos(o);return n>s&&(l=2*Math.PI-l),{radius:i,angle:Lqe(l),angleInRadian:l}},Qqe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},Hqe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},Vqe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=Mqe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:l,endAngle:u}=Qqe(t),d=s,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?O$(O$({},t),{},{radius:a,angle:Hqe(d,t)}):null},hse=e=>!T.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function mse(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function D$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function su(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(r),!0).forEach(function(n){zqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zqe(e,t,r){return(t=$qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $qe(e){var t=Kqe(e,"string");return typeof t=="symbol"?t:t+""}function Kqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ta(e,t,r){return vs(e)||vs(t)?r:gA(t)?O0(e,t,r):typeof t=="function"?t(e):r}var Gqe=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,m=void 0;if(Li(d-u)!==Li(f-d)){var p=[];if(Li(f-d)===Li(a[1]-a[0])){m=f;var x=d+a[1]-a[0];p[0]=Math.min(x,(x+u)/2),p[1]=Math.max(x,(x+u)/2)}else{m=u;var g=f+a[1]-a[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[l]);break}}else{var y=Math.min(u,f),_=Math.max(u,f);if(e>(y+d)/2&&e<=(_+d)/2){({index:i}=r[l]);break}}}else if(t){for(var S=0;S<o;S++)if(S===0&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S>0&&S<o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2&&e<=(t[S].coordinate+t[S+1].coordinate)/2||S===o-1&&e>(t[S].coordinate+t[S-1].coordinate)/2){({index:i}=t[S]);break}}return i},qqe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&sr(e[s]))return su(su({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&sr(e[i]))return su(su({},e),{},{[i]:e[i]+(a||0)})}return e},z0=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",pse=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},gse=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:p}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=a==="category"&&i.bandwidth?i.bandwidth()/x:0;if(g=p==="angleAxis"&&s&&s.length>=2?Li(s[0]-s[1])*2*g:g,f||m){var b=(f||m||[]).map((y,_)=>{var S=n?n.indexOf(y):y;return{coordinate:i(S)+g,value:y,offset:g,index:_}});return b.filter(y=>!xc(y.coordinate))}return l&&u?u.map((y,_)=>({coordinate:i(y)+g,value:y,index:_,offset:g})):i.ticks&&d!=null?i.ticks(d).map((y,_)=>({coordinate:i(y)+g,value:y,offset:g,index:_})):i.domain().map((y,_)=>({coordinate:i(y)+g,value:n?n[y]:y,index:_,offset:g}))},P$=1e-4,Wqe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-P$,s=Math.max(n[0],n[1])+P$,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},Xqe=(e,t)=>{if(!t||t.length!==2||!sr(t[0])||!sr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!sr(e[0])||e[0]<r)&&(a[0]=r),(!sr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},Yqe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=xc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},Jqe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=xc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Zqe={sign:Yqe,expand:zVe,none:$v,silhouette:$Ve,wiggle:KVe,positive:Jqe},eWe=(e,t,r)=>{var n=Zqe[r],a=VVe().keys(t).value((s,i)=>+Ta(s,i,0)).order(Vj).offset(n);return a(e)};function tWe(e){return e==null?void 0:String(e)}var R$=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Ta(s,t.dataKey,t.scale.domain()[i]);return vs(o)?null:t.scale(o)-a/2+n},rWe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},nWe=e=>{var t=e.flat(2).filter(sr);return[Math.min(...t),Math.max(...t)]},aWe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],sWe=(e,t,r)=>{if(e!=null)return aWe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((l,u)=>{var d=mse(u,t,r),f=nWe(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},L$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ty=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=BN(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],u=a[i-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function M$(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return su(su({},t),{},{dataKey:r,payload:n,value:a,name:s})}function xx(e,t){if(e)return String(e);if(typeof t=="string")return t}function iWe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?Vqe({x:e,y:t},n):null}var oWe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return su(su(su({},n),$n(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:l}=n;return su(su(su({},n),$n(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},lWe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Kf=e=>e.layout.width,Gf=e=>e.layout.height,cWe=e=>e.layout.scale,vse=e=>e.layout.margin,vP=at(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),xP=at(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),xse="data-recharts-item-index",bse="data-recharts-item-data-key",DN=60;function Q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q$(Object(r),!0).forEach(function(n){uWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uWe(e,t,r){return(t=dWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dWe(e){var t=AWe(e,"string");return typeof t=="symbol"?t:t+""}function AWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fWe=e=>e.brush.height,vi=at([Kf,Gf,vse,fWe,vP,xP,Hae,DGe],(e,t,r,n,a,s,i,o)=>{var l=s.reduce((x,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:DN;return Ph(Ph({},x),{},{[b]:x[b]+y})}return x},{left:r.left||0,right:r.right||0}),u=a.reduce((x,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?Ph(Ph({},x),{},{[b]:O0(x,"".concat(b))+g.height}):x},{top:r.top||0,bottom:r.bottom||0}),d=Ph(Ph({},u),l),f=d.bottom;d.bottom+=n,d=qqe(d,i,o);var m=e-d.left-d.right,p=t-d.top-d.bottom;return Ph(Ph({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(p,0)})}),hWe=at(vi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),yse=at(Kf,Gf,(e,t)=>({x:0,y:0,width:e,height:t})),mWe=T.createContext(null),Rl=()=>T.useContext(mWe)!=null,PN=e=>e.brush,RN=at([PN,vi,vse],(e,t,r)=>({height:e.height,x:sr(e.x)?e.x:t.left,y:sr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:sr(e.width)?e.width:t.width})),bP=()=>{var e,t=Rl(),r=nr(hWe),n=nr(RN),a=(e=nr(PN))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},pWe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},wse=()=>{var e;return(e=nr(vi))!==null&&e!==void 0?e:pWe},Ese=()=>nr(Kf),Cse=()=>nr(Gf),bn=e=>e.layout.layoutType,yP=()=>nr(bn),gWe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},_se=Ec({name:"legend",initialState:gWe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=bf(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Cot,setLegendSettings:_ot,addLegendPayload:Sse,removeLegendPayload:Nse}=_se.actions,vWe=_se.reducer;function fF(){return fF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fF.apply(null,arguments)}function H$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(r),!0).forEach(function(n){xWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xWe(e,t,r){return(t=bWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bWe(e){var t=yWe(e,"string");return typeof t=="symbol"?t:t+""}function yWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wWe(e){return Array.isArray(e)&&gA(e[0])&&gA(e[1])?e.join(" ~ "):e}var EWe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,p=()=>{if(s&&s.length){var I={padding:0,margin:0},D=(o?BN(s,o):s).map((E,C)=>{if(E.type==="none")return null;var N=E.formatter||i||wWe,{value:P,name:O}=E,F=P,M=O;if(N){var Q=N(P,O,E,C,s);if(Array.isArray(Q))[F,M]=Q;else if(Q!=null)F=Q;else return null}var J=a3({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:J},gA(M)?T.createElement("span",{className:"recharts-tooltip-item-name"},M):null,gA(M)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},F),T.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:I},D)}return null},x=a3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=a3({margin:0},a),b=!vs(d),y=b?d:"",_=An("recharts-default-tooltip",l),S=An("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var B=m?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",fF({className:_,style:x},B),T.createElement("p",{className:S,style:g},T.isValidElement(y)?y:"".concat(y)),p())},U1="recharts-tooltip-wrapper",CWe={visibility:"hidden"};function _We(e){var{coordinate:t,translateX:r,translateY:n}=e;return An(U1,{["".concat(U1,"-right")]:sr(r)&&t&&sr(t.x)&&r>=t.x,["".concat(U1,"-left")]:sr(r)&&t&&sr(t.x)&&r<t.x,["".concat(U1,"-bottom")]:sr(n)&&t&&sr(t.y)&&n>=t.y,["".concat(U1,"-top")]:sr(n)&&t&&sr(t.y)&&n<t.y})}function V$(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(s&&sr(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var m=l[n];if(m==null)return 0;if(i[n]){var p=d,x=m;return p<x?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var g=f+o,b=m+u;return g>b?Math.max(d,m):Math.max(f,m)}function SWe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function NWe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=V$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=V$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=SWe({translateX:d,translateY:f,useTranslate3d:o})):u=CWe,{cssProperties:u,cssClasses:_We({translateX:d,translateY:f,coordinate:r})}}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){hF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hF(e,t,r){return(t=BWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BWe(e){var t=kWe(e,"string");return typeof t=="symbol"?t:t+""}function kWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TWe extends T.PureComponent{constructor(){super(...arguments),hF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),hF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:p,wrapperStyle:x,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:_,cssProperties:S}=NWe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:m,viewBox:p}),B=y?{}:WE(WE({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=WE(WE({},B),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:I,ref:b},s)}}var IWe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Op={isSsr:IWe()},Bse=()=>nr(e=>e.rootProps.accessibilityLayer);function wc(e){return Number.isFinite(e)}function qv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function mF(){return mF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mF.apply(null,arguments)}function $$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(r),!0).forEach(function(n){jWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jWe(e,t,r){return(t=FWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FWe(e){var t=OWe(e,"string");return typeof t=="symbol"?t:t+""}function OWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G$={curveBasisClosed:jVe,curveBasisOpen:FVe,curveBasis:IVe,curveBumpX:gVe,curveBumpY:vVe,curveLinearClosed:OVe,curveLinear:vN,curveMonotoneX:DVe,curveMonotoneY:PVe,curveNatural:RVe,curveStep:LVe,curveStepAfter:MVe,curveStepBefore:UVe},XE=e=>wc(e.x)&&wc(e.y),M1=e=>e.x,Q1=e=>e.y,DWe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(vw(e));return(r==="curveMonotone"||r==="curveBump")&&t?G$["".concat(r).concat(t==="vertical"?"Y":"X")]:G$[r]||vN},PWe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=DWe(t,a),o=s?r.filter(XE):r,l;if(Array.isArray(n)){var u=s?n.filter(f=>XE(f)):n,d=o.map((f,m)=>K$(K$({},f),{},{base:u[m]}));return a==="vertical"?l=PE().y(Q1).x1(M1).x0(f=>f.base.x):l=PE().x(M1).y1(Q1).y0(f=>f.base.y),l.defined(XE).curve(i),l(d)}return a==="vertical"&&sr(n)?l=PE().y(Q1).x1(M1).x0(n):sr(n)?l=PE().x(M1).y1(Q1).y0(n):l=Sne().x(M1).y(Q1),l.defined(XE).curve(i),l(o)},kse=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?PWe(e):n;return T.createElement("path",mF({},zo(e),sP(e),{className:An("recharts-curve",t),d:s===null?void 0:s,ref:a}))},RWe=["x","y","top","left","width","height","className"];function pF(){return pF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pF.apply(null,arguments)}function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){UWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UWe(e,t,r){return(t=MWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MWe(e){var t=QWe(e,"string");return typeof t=="symbol"?t:t+""}function QWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HWe(e,t){if(e==null)return{};var r,n,a=VWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zWe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),$We=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,l=HWe(e,RWe),u=LWe({x:t,y:r,top:n,left:a,width:s,height:i},l);return!sr(t)||!sr(r)||!sr(s)||!sr(i)||!sr(n)||!sr(a)?null:T.createElement("path",pF({},Qn(u,!0),{className:An("recharts-cross",o),d:zWe(t,r,s,i,n,a)}))};function KWe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){qWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qWe(e,t,r){return(t=WWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WWe(e){var t=XWe(e,"string");return typeof t=="symbol"?t:t+""}function XWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bu(e,t){var r=GWe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var s3={},i3={},o3={},X$;function YWe(){return X$||(X$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(o3)),o3}var Y$;function JWe(){return Y$||(Y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YWe(),r=Pae(),n=cP(),a=uP(),s=oP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,m,p,x,g){const b=g(u,d,f,m,p,x);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,x,g)}return l(u,d,x,g)}function l(u,d,f,m){if(Object.is(u,d))return!0;let p=n.getTag(u),x=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),x===a.argumentsTag&&(x=a.objectTag),p!==x)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),_=d.valueOf();return s.eq(y,_)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const g=f.get(u),b=f.get(d);if(g!=null&&b!=null)return g===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,_]of u.entries())if(!d.has(y)||!o(_,d.get(y),y,u,d,f,m))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),_=Array.from(d.values());for(let S=0;S<y.length;S++){const B=y[S],I=_.findIndex(D=>o(B,D,void 0,u,d,f,m));if(I===-1)return!1;_.splice(I,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,m))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,m);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,m);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(l(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const _=[...Object.keys(u),...r.getSymbols(u)],S=[...Object.keys(d),...r.getSymbols(d)];if(_.length!==S.length)return!1;for(let B=0;B<_.length;B++){const I=_[B],D=u[I];if(!Object.hasOwn(d,I))return!1;const E=d[I];if(!o(D,E,I,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(i3)),i3}var l3={},J$;function ZWe(){return J$||(J$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(l3)),l3}var Z$;function eXe(){return Z$||(Z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JWe(),r=ZWe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(s3)),s3}var c3,eK;function tXe(){return eK||(eK=1,c3=eXe().isEqual),c3}var rXe=tXe();const nXe=il(rXe);var NS=1e-4,Tse=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Ise=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),tK=(e,t)=>r=>{var n=Tse(e,t);return Ise(n,r)},aXe=(e,t)=>r=>{var n=Tse(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Ise(a,r)},rK=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,a]=i);var u=tK(t,r),d=tK(n,a),f=aXe(t,r),m=x=>x>1?1:x<0?0:x,p=x=>{for(var g=x>1?1:x,b=g,y=0;y<8;++y){var _=u(b)-g,S=f(b);if(Math.abs(_-g)<NS||S<NS)return d(b);b=m(b-_/S)}return d(b)};return p.isStepper=!1,p},sXe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*a/1e3,m=l*a/1e3+i;return Math.abs(m-o)<NS&&Math.abs(f)<NS?[o,0]:[m,f]};return s.isStepper=!0,s.dt=a,s},jse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rK(e);case"spring":return sXe();default:if(e.split("(")[0]==="cubic-bezier")return rK(e)}return typeof e=="function"?e:null};function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(n){iXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iXe(e,t,r){return(t=oXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oXe(e){var t=lXe(e,"string");return typeof t=="symbol"?t:t+""}function lXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cXe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),uXe=(e,t,r)=>e.map(n=>"".concat(cXe(n)," ").concat(t,"ms ").concat(r)).join(","),dXe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Iy=(e,t)=>Object.keys(t).reduce((r,n)=>aK(aK({},r),{},{[n]:e(n,t[n])}),{});function sK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sK(Object(r),!0).forEach(function(n){AXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AXe(e,t,r){return(t=fXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fXe(e){var t=hXe(e,"string");return typeof t=="symbol"?t:t+""}function hXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BS=(e,t,r)=>e+(t-e)*r,gF=e=>{var{from:t,to:r}=e;return t!==r},Fse=(e,t,r)=>{var n=Iy((a,s)=>{if(gF(s)){var[i,o]=e(s.from,s.to,s.velocity);return eo(eo({},s),{},{from:i,velocity:o})}return s},t);return r<1?Iy((a,s)=>gF(s)?eo(eo({},s),{},{velocity:BS(s.velocity,n[a].velocity,r),from:BS(s.from,n[a].from,r)}):s,t):Fse(e,n,r-1)};function mXe(e,t,r,n,a,s){var i,o=n.reduce((m,p)=>eo(eo({},m),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Iy((m,p)=>p.from,o),u=()=>!Object.values(o).filter(gF).length,d=null,f=m=>{i||(i=m);var p=m-i,x=p/r.dt;o=Fse(r,o,x),a(eo(eo(eo({},e),t),l())),i=m,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function pXe(e,t,r,n,a,s,i){var o=null,l=a.reduce((f,m)=>eo(eo({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,p=Iy((g,b)=>BS(...b,r(m)),l);if(s(eo(eo(eo({},e),t),p)),m<1)o=i.setTimeout(d);else{var x=Iy((g,b)=>BS(...b,r(1)),l);s(eo(eo(eo({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Ose=(e,t,r,n,a,s)=>{var i=dXe(e,t);return r.isStepper===!0?mXe(e,t,r,i,a,s):pXe(e,t,r,n,i,a,s)};function gXe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){a=e.setTimeout(s.bind(null,u),l);return}s(l),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class vXe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function xXe(){return gXe(new vXe)}var bXe=T.createContext(xXe);function Dse(e,t){var r=T.useContext(bXe);return T.useMemo(()=>t??r(e),[e,t,r])}var yXe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function vF(){return vF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vF.apply(null,arguments)}function wXe(e,t){if(e==null)return{};var r,n,a=EXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iK(Object(r),!0).forEach(function(n){Lm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lm(e,t,r){return(t=CXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CXe(e){var t=_Xe(e,"string");return typeof t=="symbol"?t:t+""}function _Xe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wP extends T.PureComponent{constructor(t,r){super(t,r),Lm(this,"mounted",!1),Lm(this,"manager",void 0),Lm(this,"stopJSAnimation",null),Lm(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:l}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(u);return}if(!(nXe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&l){var m={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(m)}this.runAnimation(Rh(Rh({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l}=t,u=Ose(r,n,jse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=uXe(Object.keys(d),n,i);this.manager.start([o,r,Rh(Rh({},d),{},{transition:f}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:p,animationManager:x}=t,g=wXe(t,yXe),b=T.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var _=S=>{var{style:B={},className:I}=S.props,D=T.cloneElement(S,Rh(Rh({},g),{},{style:Rh(Rh({},B),y),className:I}));return D};return b===1?_(T.Children.only(r)):T.createElement("div",null,T.Children.map(r,S=>_(S)))}}Lm(wP,"displayName","Animate");Lm(wP,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function kS(e){var t,r=Dse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return T.createElement(wP,vF({},e,{animationManager:r}))}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TS.apply(null,arguments)}var oK=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},SXe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pse=e=>{var t=bu(e,SXe),r=T.useRef(null),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:p,isAnimationActive:x,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var b=An("recharts-rectangle",d);return g?T.createElement(kS,{canBegin:n>0,from:{width:o,height:l,x:s,y:i},to:{width:o,height:l,x:s,y:i},duration:m,animationEasing:f,isActive:g},y=>{var{width:_,height:S,x:B,y:I}=y;return T.createElement(kS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:x,easing:f},T.createElement("path",TS({},Qn(t,!0),{className:b,d:oK(B,I,_,S,u),ref:r})))}):T.createElement("path",TS({},Qn(t,!0),{className:b,d:oK(s,i,o,l,u)}))};function Rse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=$n(t,r,n,a),o=$n(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function xF(){return xF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xF.apply(null,arguments)}var NXe=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},YE=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/SS,f=l?a:a+s*d,m=$n(t,r,u,f),p=$n(t,r,n,f),x=l?a-s*d:a,g=$n(t,r,u*Math.cos(d*SS),x);return{center:m,circleTangency:p,lineTangency:g,theta:d}},Lse=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=NXe(s,i),l=s+o,u=$n(t,r,a,s),d=$n(t,r,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=$n(t,r,n,s),p=$n(t,r,n,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},BXe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=Li(u-l),{circleTangency:f,lineTangency:m,theta:p}=YE({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:x,lineTangency:g,theta:b}=YE({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-p-b;if(y<0)return i?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Lse({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:S,lineTangency:B,theta:I}=YE({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:D,lineTangency:E,theta:C}=YE({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),N=o?Math.abs(l-u):Math.abs(l-u)-I-C;if(N<0&&s===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,"Z")}else _+="L".concat(t,",").concat(r,"Z");return _},kXe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Use=e=>{var t=bu(e,kXe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var m=An("recharts-sector",f),p=s-a,x=sl(i,p,0,!0),g;return x>0&&Math.abs(u-d)<360?g=BXe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(x,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):g=Lse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),T.createElement("path",xF({},Qn(t,!0),{className:m,d:g}))};function TXe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,m=$n(o,l,u,f),p=$n(o,l,d,f);n=m.x,a=m.y,s=p.x,i=p.y}else return Rse(t);return[{x:n,y:a},{x:s,y:i}]}var u3={},d3={},A3={},lK;function IXe(){return lK||(lK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mae();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(A3)),A3}var cK;function jXe(){return cK||(cK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IXe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(d3)),d3}var uK;function FXe(){return uK||(uK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qae(),r=jXe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=a,a+=i;return l}e.range=n}(u3)),u3}var f3,dK;function OXe(){return dK||(dK=1,f3=FXe().range),f3}var DXe=OXe();const Mse=il(DXe),db=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:SD,scaleDiverging:xne,scaleDivergingLog:bne,scaleDivergingPow:QD,scaleDivergingSqrt:hVe,scaleDivergingSymlog:yne,scaleIdentity:Zre,scaleImplicit:Mj,scaleLinear:Jre,scaleLog:tne,scaleOrdinal:uN,scalePoint:PQe,scalePow:ID,scaleQuantile:ane,scaleQuantize:sne,scaleRadial:nne,scaleSequential:mne,scaleSequentialLog:pne,scaleSequentialPow:MD,scaleSequentialQuantile:vne,scaleSequentialSqrt:fVe,scaleSequentialSymlog:gne,scaleSqrt:qQe,scaleSymlog:rne,scaleThreshold:ine,scaleTime:dVe,scaleUtc:AVe,tickFormat:Yre},Symbol.toStringTag,{value:"Module"}));var $0=e=>e.chartData,LN=at([$0],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),EP=(e,t,r,n)=>n?LN(e):$0(e);function Wv(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(wc(t)&&wc(r))return!0}return!1}function AK(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function PXe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(wc(r))a=r;else if(typeof r=="function")return;if(wc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(Wv(i))return i}}function RXe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Wv(n))return AK(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(sr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&L$.test(a)){var l=L$.exec(a);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(sr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&U$.test(s)){var d=U$.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var m=[i,o];if(Wv(m))return t==null?m:AK(m,t,r)}}}var bx=1e9,LXe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_P,Ha=!0,gu="[DecimalError] ",np=gu+"Invalid argument: ",CP=gu+"Exponent out of range: ",yx=Math.floor,_m=Math.pow,UXe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,dc,Fi=1e7,ja=7,Qse=9007199254740991,IS=yx(Qse/ja),ir={};ir.absoluteValue=ir.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ir.comparedTo=ir.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};ir.decimalPlaces=ir.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ja;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ir.dividedBy=ir.div=function(e){return yf(this,new this.constructor(e))};ir.dividedToIntegerBy=ir.idiv=function(e){var t=this,r=t.constructor;return Ea(yf(t,new r(e),0,1),r.precision)};ir.equals=ir.eq=function(e){return!this.cmp(e)};ir.exponent=function(){return ri(this)};ir.greaterThan=ir.gt=function(e){return this.cmp(e)>0};ir.greaterThanOrEqualTo=ir.gte=function(e){return this.cmp(e)>=0};ir.isInteger=ir.isint=function(){return this.e>this.d.length-2};ir.isNegative=ir.isneg=function(){return this.s<0};ir.isPositive=ir.ispos=function(){return this.s>0};ir.isZero=function(){return this.s===0};ir.lessThan=ir.lt=function(e){return this.cmp(e)<0};ir.lessThanOrEqualTo=ir.lte=function(e){return this.cmp(e)<1};ir.logarithm=ir.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(dc))throw Error(gu+"NaN");if(r.s<1)throw Error(gu+(r.s?"NaN":"-Infinity"));return r.eq(dc)?new n(0):(Ha=!1,t=yf(jy(r,s),jy(e,s),s),Ha=!0,Ea(t,a))};ir.minus=ir.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zse(t,e):Hse(t,(e.s=-e.s,e))};ir.modulo=ir.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(gu+"NaN");return r.s?(Ha=!1,t=yf(r,e,0,1).times(e),Ha=!0,r.minus(t)):Ea(new n(r),a)};ir.naturalExponential=ir.exp=function(){return Vse(this)};ir.naturalLogarithm=ir.ln=function(){return jy(this)};ir.negated=ir.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ir.plus=ir.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Hse(t,e):zse(t,(e.s=-e.s,e))};ir.precision=ir.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(np+e);if(t=ri(a)+1,n=a.d.length-1,r=n*ja+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ir.squareRoot=ir.sqrt=function(){var e,t,r,n,a,s,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(gu+"NaN")}for(e=ri(o),Ha=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=aA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=yx((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=i=r+3;;)if(s=n,n=s.plus(yf(o,s,i+2)).times(.5),aA(s.d).slice(0,i)===(t=aA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Ea(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Ha=!0,Ea(n,r)};ir.times=ir.mul=function(e){var t,r,n,a,s,i,o,l,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=m.length,u=p.length,l<u&&(s=m,m=p,p=s,i=l,l=u,u=i),s=[],i=l+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)o=s[a]+p[n]*m[a-n-1]+t,s[a--]=o%Fi|0,t=o/Fi|0;s[a]=(s[a]+t)%Fi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Ha?Ea(e,f.precision):e};ir.toDecimalPlaces=ir.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(vA(e,0,bx),t===void 0?t=n.rounding:vA(t,0,8),Ea(r,e+ri(r)+1,t))};ir.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=bp(n,!0):(vA(e,0,bx),t===void 0?t=a.rounding:vA(t,0,8),n=Ea(new a(n),e+1,t),r=bp(n,!0,e+1)),r};ir.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?bp(a):(vA(e,0,bx),t===void 0?t=s.rounding:vA(t,0,8),n=Ea(new s(a),e+ri(a)+1,t),r=bp(n.abs(),!1,e+ri(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ir.toInteger=ir.toint=function(){var e=this,t=e.constructor;return Ea(new t(e),ri(e)+1,t.rounding)};ir.toNumber=function(){return+this};ir.toPower=ir.pow=function(e){var t,r,n,a,s,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(dc);if(o=new l(o),!o.s){if(e.s<1)throw Error(gu+"Infinity");return o}if(o.eq(dc))return o;if(n=l.precision,e.eq(dc))return Ea(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Qse){for(a=new l(dc),t=Math.ceil(n/ja+4),Ha=!1;r%2&&(a=a.times(o),hK(a.d,t)),r=yx(r/2),r!==0;)o=o.times(o),hK(o.d,t);return Ha=!0,e.s<0?new l(dc).div(a):Ea(a,n)}}else if(s<0)throw Error(gu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Ha=!1,a=e.times(jy(o,n+u)),Ha=!0,a=Vse(a),a.s=s,a};ir.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=ri(a),n=bp(a,r<=s.toExpNeg||r>=s.toExpPos)):(vA(e,1,bx),t===void 0?t=s.rounding:vA(t,0,8),a=Ea(new s(a),e,t),r=ri(a),n=bp(a,e<=r||r<=s.toExpNeg,e)),n};ir.toSignificantDigits=ir.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(vA(e,1,bx),t===void 0?t=n.rounding:vA(t,0,8)),Ea(new n(r),e,t)};ir.toString=ir.valueOf=ir.val=ir.toJSON=ir[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ri(e),r=e.constructor;return bp(e,t<=r.toExpNeg||t>=r.toExpPos)};function Hse(e,t){var r,n,a,s,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ha?Ea(t,f):t;if(l=e.d,u=t.d,i=e.e,a=t.e,l=l.slice(),s=i-a,s){for(s<0?(n=l,s=-s,o=u.length):(n=u,a=i,o=l.length),i=Math.ceil(f/ja),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/Fi|0,l[s]%=Fi;for(r&&(l.unshift(r),++a),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=a,Ha?Ea(t,f):t}function vA(e,t,r){if(e!==~~e||e<t||e>r)throw Error(np+e)}function aA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=ja-n.length,r&&(s+=Vh(r)),s+=n;i=e[t],n=i+"",r=ja-n.length,r&&(s+=Vh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var yf=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%Fi|0,i=s/Fi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,l;if(s!=i)l=s>i?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=a[o]){l=n[o]>a[o]?1:-1;break}return l}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Fi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,l,u,d,f,m,p,x,g,b,y,_,S,B,I,D,E,C,N=n.constructor,P=n.s==a.s?1:-1,O=n.d,F=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(gu+"Division by zero");for(l=n.e-a.e,E=F.length,I=O.length,p=new N(P),x=p.d=[],u=0;F[u]==(O[u]||0);)++u;if(F[u]>(O[u]||0)&&--l,s==null?_=s=N.precision:i?_=s+(ri(n)-ri(a))+1:_=s,_<0)return new N(0);if(_=_/ja+2|0,u=0,E==1)for(d=0,F=F[0],_++;(u<I||d)&&_--;u++)S=d*Fi+(O[u]||0),x[u]=S/F|0,d=S%F|0;else{for(d=Fi/(F[0]+1)|0,d>1&&(F=e(F,d),O=e(O,d),E=F.length,I=O.length),B=E,g=O.slice(0,E),b=g.length;b<E;)g[b++]=0;C=F.slice(),C.unshift(0),D=F[0],F[1]>=Fi/2&&++D;do d=0,o=t(F,g,E,b),o<0?(y=g[0],E!=b&&(y=y*Fi+(g[1]||0)),d=y/D|0,d>1?(d>=Fi&&(d=Fi-1),f=e(F,d),m=f.length,b=g.length,o=t(f,g,m,b),o==1&&(d--,r(f,E<m?C:F,m))):(d==0&&(o=d=1),f=F.slice()),m=f.length,m<b&&f.unshift(0),r(g,f,b),o==-1&&(b=g.length,o=t(F,g,E,b),o<1&&(d++,r(g,E<b?C:F,b))),b=g.length):o===0&&(d++,g=[0]),x[u++]=d,o&&g[0]?g[b++]=O[B]||0:(g=[O[B]],b=1);while((B++<I||g[0]!==void 0)&&_--)}return x[0]||x.shift(),p.e=l,Ea(p,i?s+ri(p)+1:s)}}();function Vse(e,t){var r,n,a,s,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(ri(e)>16)throw Error(CP+ri(e));if(!e.s)return new d(dc);for(Ha=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(_m(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(dc),d.precision=o;;){if(a=Ea(a.times(e),o),r=r.times(++l),i=s.plus(yf(a,r,o)),aA(i.d).slice(0,o)===aA(s.d).slice(0,o)){for(;u--;)s=Ea(s.times(s),o);return d.precision=f,t==null?(Ha=!0,Ea(s,f)):s}s=i}}function ri(e){for(var t=e.e*ja,r=e.d[0];r>=10;r/=10)t++;return t}function h3(e,t,r){if(t>e.LN10.sd())throw Ha=!0,r&&(e.precision=r),Error(gu+"LN10 precision limit exceeded");return Ea(new e(e.LN10),t)}function Vh(e){for(var t="";e--;)t+="0";return t}function jy(e,t){var r,n,a,s,i,o,l,u,d,f=1,m=10,p=e,x=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(gu+(p.s?"NaN":"-Infinity"));if(p.eq(dc))return new g(0);if(t==null?(Ha=!1,u=b):u=t,p.eq(10))return t==null&&(Ha=!0),h3(g,u);if(u+=m,g.precision=u,r=aA(x),n=r.charAt(0),s=ri(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=aA(p.d),n=r.charAt(0),f++;s=ri(p),n>1?(p=new g("0."+r),s++):p=new g(n+"."+r.slice(1))}else return l=h3(g,u+2,b).times(s+""),p=jy(new g(n+"."+r.slice(1)),u-m).plus(l),g.precision=b,t==null?(Ha=!0,Ea(p,b)):p;for(o=i=p=yf(p.minus(dc),p.plus(dc),u),d=Ea(p.times(p),u),a=3;;){if(i=Ea(i.times(d),u),l=o.plus(yf(i,new g(a),u)),aA(l.d).slice(0,u)===aA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(h3(g,u+2,b).times(s+""))),o=yf(o,new g(f),u),g.precision=b,t==null?(Ha=!0,Ea(o,b)):o;o=l,a+=2}}function fK(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=yx(r/ja),e.d=[],n=(r+1)%ja,r<0&&(n+=ja),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=ja;n<a;)e.d.push(+t.slice(n,n+=ja));t=t.slice(n),n=ja-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ha&&(e.e>IS||e.e<-IS))throw Error(CP+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ea(e,t,r){var n,a,s,i,o,l,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=ja,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ja),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=ja,a=n-ja+i}if(r!==void 0&&(s=_m(10,i-a-1),o=u/s%10|0,l=t<0||f[d+1]!==void 0||u%s,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?a>0?u/_m(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(s=ri(e),f.length=1,t=t-s-1,f[0]=_m(10,(ja-t%ja)%ja),e.e=yx(-t/ja)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=_m(10,ja-n),f[d]=a>0?(u/_m(10,i-a)%_m(10,a)|0)*s:0),l)for(;;)if(d==0){(f[0]+=s)==Fi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Fi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ha&&(e.e>IS||e.e<-IS))throw Error(CP+ri(e));return e}function zse(e,t){var r,n,a,s,i,o,l,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ha?Ea(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),a=Math.max(Math.ceil(p/ja),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=l.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,a=f.length-o;a>0;--a)l[o++]=0;for(a=f.length;a>i;){if(l[--a]<f[a]){for(s=a;s&&l[--s]===0;)l[s]=Fi-1;--l[s],l[a]+=Fi}l[a]-=f[a]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Ha?Ea(t,p):t):new m(0)}function bp(e,t,r){var n,a=ri(e),s=aA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+Vh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Vh(-a-1)+s,r&&(n=r-i)>0&&(s+=Vh(n))):a>=i?(s+=Vh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+Vh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=Vh(n))),e.s<0?"-"+s:s}function hK(e,t){if(e.length>t)return e.length=t,!0}function $se(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(np+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return fK(i,s.toString())}else if(typeof s!="string")throw Error(np+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,UXe.test(s))fK(i,s);else throw Error(np+s)}if(a.prototype=ir,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=$se,a.config=a.set=MXe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function MXe(e){if(!e||typeof e!="object")throw Error(gu+"Object expected");var t,r,n,a=["precision",1,bx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(yx(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(np+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(np+r+": "+n);return this}var _P=$se(LXe);dc=new _P(1);const la=_P;var QXe=e=>e,Kse={},Gse=e=>e===Kse,mK=e=>function t(){return arguments.length===0||arguments.length===1&&Gse(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},qse=(e,t)=>e===1?t:mK(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Kse).length;return s>=e?t(...n):qse(e-s,mK(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>Gse(d)?o.shift():d);return t(...u,...o)}))}),UN=e=>qse(e.length,e),bF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},HXe=UN((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),VXe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return QXe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,l)=>l(o),s(...arguments))}},yF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Wse=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=a,r=e(...a)),r}};function Xse(e){var t;return e===0?t=1:t=Math.floor(new la(e).abs().log(10).toNumber())+1,t}function Yse(e,t,r){for(var n=new la(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}UN((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});UN((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});UN((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Jse=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Zse=(e,t,r)=>{if(e.lte(0))return new la(0);var n=Xse(e.toNumber()),a=new la(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new la(Math.ceil(s.div(i).toNumber())).add(r).mul(i),l=o.mul(a);return t?new la(l.toNumber()):new la(Math.ceil(l.toNumber()))},zXe=(e,t,r)=>{var n=new la(1),a=new la(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new la(10).pow(Xse(e)-1),a=new la(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new la(Math.floor(e)))}else e===0?a=new la(Math.floor((t-1)/2)):r||(a=new la(Math.floor(e)));var i=Math.floor((t-1)/2),o=VXe(HXe(l=>a.add(new la(l-i).mul(n)).toNumber()),bF);return o(0,t)},eie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new la(0),tickMin:new la(0),tickMax:new la(0)};var i=Zse(new la(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new la(0):(o=new la(t).add(r).div(2),o=o.sub(new la(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new la(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?eie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new la(l).mul(i)),tickMax:o.add(new la(u).mul(i))})};function $Xe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Jse([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...bF(0,n-1).map(()=>1/0)]:[...bF(0,n-1).map(()=>-1/0),o];return t>r?yF(l):l}if(i===o)return zXe(i,n,a);var{step:u,tickMin:d,tickMax:f}=eie(i,o,s,a,0),m=Yse(d,f.add(new la(.1).mul(u)),u);return t>r?yF(m):m}function KXe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Jse([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),l=Zse(new la(i).sub(s).div(o-1),a,0),u=[...Yse(new la(s),new la(i),l),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?yF(u):u}var GXe=Wse($Xe),qXe=Wse(KXe),tie=e=>e.rootProps.maxBarSize,WXe=e=>e.rootProps.barGap,rie=e=>e.rootProps.barCategoryGap,XXe=e=>e.rootProps.barSize,yw=e=>e.rootProps.stackOffset,SP=e=>e.options.chartName,NP=e=>e.rootProps.syncId,nie=e=>e.rootProps.syncMethod,BP=e=>e.options.eventEmitter,Zd={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Nl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},MN=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},YXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zd.angleAxisId,includeHidden:!1,name:void 0,reversed:Zd.reversed,scale:Zd.scale,tick:Zd.tick,tickCount:void 0,ticks:void 0,type:Zd.type,unit:void 0},JXe={allowDataOverflow:Nl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nl.scale,tick:Nl.tick,tickCount:Nl.tickCount,ticks:void 0,type:Nl.type,unit:void 0},ZXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zd.scale,tick:Zd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},eYe={allowDataOverflow:Nl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nl.scale,tick:Nl.tick,tickCount:Nl.tickCount,ticks:void 0,type:"category",unit:void 0},wx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?ZXe:YXe,ww=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?eYe:JXe,QN=e=>e.polarOptions,kP=at([Kf,Gf,vi],fse),aie=at([QN,kP],(e,t)=>{if(e!=null)return sl(e.innerRadius,t,0)}),sie=at([QN,kP],(e,t)=>{if(e!=null)return sl(e.outerRadius,t,t*.8)}),tYe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},iie=at([QN],tYe),rYe=at([wx,iie],MN),oie=at([kP,aie,sie],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),nYe=at([ww,oie],MN),Ex=at([bn,QN,aie,sie,Kf,Gf],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:sl(i,a,a/2),cy:sl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Ca=(e,t)=>t,Ew=(e,t,r)=>r;function TP(e){return e==null?void 0:e.id}var xi=e=>{var t=bn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Cx=e=>e.tooltip.settings.axisId,bi=e=>{var t=xi(e),r=Cx(e);return _x(e,t,r)};function lie(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,l=(o=i.data)!==null&&o!==void 0?o:n;if(!(l==null||l.length===0)){var u=TP(i);l.forEach((d,f)=>{var m=a==null?f:String(Ta(d,a,null)),p=Ta(d,i.dataKey,0),x;s.has(m)?x=s.get(m):x={},Object.assign(x,{[u]:p}),s.set(m,x)})}}),Array.from(s.values())}function HN(e){return e.stackId!=null&&e.dataKey!=null}function pK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pK(Object(r),!0).forEach(function(n){aYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aYe(e,t,r){return(t=sYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sYe(e){var t=iYe(e,"string");return typeof t=="symbol"?t:t+""}function iYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wF=[0,"auto"],ac={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},qf=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??ac},sc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:wF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DN},K0=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??sc},oYe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},IP=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??oYe},Us=(e,t,r)=>{switch(t){case"xAxis":return qf(e,r);case"yAxis":return K0(e,r);case"zAxis":return IP(e,r);case"angleAxis":return wx(e,r);case"radiusAxis":return ww(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lYe=(e,t,r)=>{switch(t){case"xAxis":return qf(e,r);case"yAxis":return K0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_x=(e,t,r)=>{switch(t){case"xAxis":return qf(e,r);case"yAxis":return K0(e,r);case"angleAxis":return wx(e,r);case"radiusAxis":return ww(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},cie=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function jP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var FP=e=>e.graphicalItems.cartesianItems,cYe=at([Ca,Ew],jP),OP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Cw=at([FP,Us,cYe],OP),uie=at([Cw],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(HN)),die=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Aie=at([Cw],die),DP=e=>e.map(t=>t.data).filter(Boolean).flat(1),uYe=at([Cw],DP),PP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},RP=at([uYe,EP],PP),LP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ta(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Ta(a,n)}))):e.map(n=>({value:n})),VN=at([RP,Us,Cw],LP);function fie(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Dp(e){return e.filter(t=>gA(t)||t instanceof Date).map(Number).filter(t=>xc(t)===!1)}function dYe(e,t,r){return!r||typeof t!="number"||xc(t)?[]:r.length?Dp(r.flatMap(n=>{var a=Ta(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!wc(s)||!wc(i)))return[t-s,t+i]})):[]}var AYe=at([uie,EP,bi],lie),hie=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,l=o.map(TP);return[i,{stackedData:eWe(e,l,r),graphicalItems:o}]}))},EF=at([AYe,uie,yw],hie),mie=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=sWe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},fYe=at([EF,$0,Ca],mie),pie=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>fie(a,f)),d=Ta(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:dYe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ta(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),zN=e=>e.errorBars,gie=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>fie(r,n));at([Aie,zN,Ca],gie);var hYe=at([RP,Us,Aie,zN,Ca],pie);function mYe(e){var{value:t}=e;if(gA(t)||t instanceof Date)return t}var gK=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Dp(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pYe=(e,t,r)=>{var n=e.map(mYe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Bae(n))?Mse(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UP=e=>{var t;if(e==null||!("domain"in e))return wF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Dp(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:wF},FS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},vie=e=>e.referenceElements.dots,Sx=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),gYe=at([vie,Ca,Ew],Sx),xie=e=>e.referenceElements.areas,vYe=at([xie,Ca,Ew],Sx),bie=e=>e.referenceElements.lines,xYe=at([bie,Ca,Ew],Sx),yie=(e,t)=>{var r=Dp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bYe=at(gYe,Ca,yie),wie=(e,t)=>{var r=Dp(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yYe=at([vYe,Ca],wie),Eie=(e,t)=>{var r=Dp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wYe=at(xYe,Ca,Eie),EYe=at(bYe,wYe,yYe,(e,t,r)=>FS(e,r,t)),Cie=at([Us],UP),MP=(e,t,r,n,a,s,i)=>{var o=PXe(t,e.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=l?FS(r,a,gK(n)):FS(a,gK(n));return RXe(t,u,e.allowDataOverflow)},CYe=at([Us,Cie,fYe,hYe,EYe,bn,Ca],MP),_Ye=[0,1],QP=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=z0(t,s);return u&&o==null?Mse(0,r.length):l==="category"?pYe(n,e,u):a==="expand"?_Ye:i}},HP=at([Us,bn,RP,VN,yw,Ca,CYe],QP),_ie=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(vw(s));return o in db?o:"point"}}},G0=at([Us,bn,cie,SP,Ca],_ie);function SYe(e){if(e!=null){if(e in db)return db[e]();var t="scale".concat(vw(e));if(t in db)return db[t]()}}function $N(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=SYe(t);if(a!=null){var s=a.domain(r).range(n);return Wqe(s),s}}}var VP=(e,t,r)=>{var n=UP(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wv(e))return GXe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Wv(e))return qXe(e,t.tickCount,t.allowDecimals)}},zP=at([HP,_x,G0],VP),$P=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Wv(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},NYe=at([Us,HP,zP,Ca],$P),BYe=at(VN,Us,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Dp(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Sie=at(BYe,bn,rie,vi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!wc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=sl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),kYe=(e,t)=>{var r=qf(e,t);return r==null||typeof r.padding!="string"?0:Sie(e,"xAxis",t,r.padding)},TYe=(e,t)=>{var r=K0(e,t);return r==null||typeof r.padding!="string"?0:Sie(e,"yAxis",t,r.padding)},IYe=at(qf,kYe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),jYe=at(K0,TYe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),FYe=at([vi,IYe,RN,PN,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),OYe=at([vi,bn,jYe,RN,PN,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),_w=(e,t,r,n)=>{var a;switch(t){case"xAxis":return FYe(e,r,n);case"yAxis":return OYe(e,r,n);case"zAxis":return(a=IP(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return iie(e);case"radiusAxis":return oie(e,r);default:return}},Nie=at([Us,_w],MN),Nx=at([Us,G0,NYe,Nie],$N);at([Cw,zN,Ca],gie);function Bie(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var KN=(e,t)=>t,GN=(e,t,r)=>r,DYe=at(vP,KN,GN,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bie)),PYe=at(xP,KN,GN,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bie)),kie=(e,t)=>({width:e.width,height:t.height}),RYe=(e,t)=>{var r=typeof t.width=="number"?t.width:DN;return{width:r,height:e.height}},Tie=at(vi,qf,kie),LYe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},UYe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},MYe=at(Gf,vi,DYe,KN,GN,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=kie(t,o);i==null&&(i=LYe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),s}),QYe=at(Kf,vi,PYe,KN,GN,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var l=RYe(t,o);i==null&&(i=UYe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),s}),HYe=(e,t)=>{var r=vi(e),n=qf(e,t);if(n!=null){var a=MYe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},VYe=(e,t)=>{var r=vi(e),n=K0(e,t);if(n!=null){var a=QYe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Iie=at(vi,K0,(e,t)=>{var r=typeof t.width=="number"?t.width:DN;return{width:r,height:e.height}}),vK=(e,t,r)=>{switch(t){case"xAxis":return Tie(e,r).width;case"yAxis":return Iie(e,r).height;default:return}},jie=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=z0(e,n),l=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Bae(l))return l}},Sw=at([bn,VN,Us,Ca],jie),KP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=z0(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},GP=at([bn,VN,_x,Ca],KP),xK=at([bn,lYe,G0,Nx,Sw,GP,_w,zP,Ca],(e,t,r,n,a,s,i,o,l)=>{if(t==null)return null;var u=z0(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),Fie=(e,t,r,n,a,s,i,o,l)=>{if(!(t==null||n==null)){var u=z0(e,l),{type:d,ticks:f,tickCount:m}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/p:0;x=l==="angleAxis"&&s!=null&&s.length>=2?Li(s[0]-s[1])*2*x:x;var g=f||a;if(g){var b=g.map((y,_)=>{var S=i?i.indexOf(y):y;return{index:_,coordinate:n(S)+x,value:y,offset:x}});return b.filter(y=>!xc(y.coordinate))}return u&&o?o.map((y,_)=>({coordinate:n(y)+x,value:y,index:_,offset:x})):n.ticks?n.ticks(m).map(y=>({coordinate:n(y)+x,value:y,offset:x})):n.domain().map((y,_)=>({coordinate:n(y)+x,value:i?i[y]:y,index:_,offset:x}))}},Oie=at([bn,_x,G0,Nx,zP,_w,Sw,GP,Ca],Fie),Die=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=z0(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Li(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Xv=at([bn,_x,Nx,_w,Sw,GP,Ca],Die),Yv=at(Us,Nx,(e,t)=>{if(!(e==null||t==null))return jS(jS({},e),{},{scale:t})}),zYe=at([Us,G0,HP,Nie],$N);at((e,t,r)=>IP(e,r),zYe,(e,t)=>{if(!(e==null||t==null))return jS(jS({},e),{},{scale:t})});var $Ye=at([bn,vP,xP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Pie=e=>e.options.defaultTooltipEventType,Rie=e=>e.options.validateTooltipEventTypes;function Lie(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function qP(e,t){var r=Pie(e),n=Rie(e);return Lie(t,r,n)}function KYe(e){return nr(t=>qP(t,e))}var Uie=(e,t)=>{var r,n=Number(t);if(!(xc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},GYe=e=>e.tooltip.settings,Xh={active:!1,index:null,dataKey:void 0,coordinate:void 0},qYe={itemInteraction:{click:Xh,hover:Xh},axisInteraction:{click:Xh,hover:Xh},keyboardInteraction:Xh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Mie=Ec({name:"tooltip",initialState:qYe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=bf(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:WYe,removeTooltipEntrySettings:XYe,setTooltipSettingsState:YYe,setActiveMouseOverItemIndex:Qie,mouseLeaveItem:JYe,mouseLeaveChart:Hie,setActiveClickItemIndex:ZYe,setMouseOverAxisIndex:Vie,setMouseClickAxisIndex:eJe,setSyncInteraction:CF,setKeyboardInteraction:_F}=Mie.actions,tJe=Mie.reducer;function bK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bK(Object(r),!0).forEach(function(n){rJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJe(e,t,r){return(t=nJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJe(e){var t=aJe(e,"string");return typeof t=="symbol"?t:t+""}function aJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sJe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function iJe(e){return e.index!=null}var zie=(e,t,r,n)=>{if(t==null)return Xh;var a=sJe(e,t,r);if(a==null)return Xh;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(iJe(a)){if(s)return JE(JE({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return JE(JE({},Xh),{},{coordinate:a.coordinate})},WP=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!wc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},$ie=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Kie=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},Nw=e=>e.options.tooltipPayloadSearcher,Bx=e=>e.tooltip;function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(n){oJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oJe(e,t,r){return(t=lJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lJe(e){var t=cJe(e,"string");return typeof t=="symbol"?t:t+""}function cJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uJe(e,t){return e??t}var Gie=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,p)=>{var x,{dataDefinedOnItem:g,settings:b}=p,y=uJe(g,o),_=Array.isArray(y)?mse(y,u,d):y,S=(x=b==null?void 0:b.dataKey)!==null&&x!==void 0?x:n==null?void 0:n.dataKey,B=b==null?void 0:b.nameKey,I;if(n!=null&&n.dataKey&&Array.isArray(_)&&!Array.isArray(_[0])&&i==="axis"?I=BKe(_,n.dataKey,a):I=s(_,t,l,B),Array.isArray(I))I.forEach(E=>{var C=wK(wK({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});m.push(M$({tooltipEntrySettings:C,dataKey:E.dataKey,payload:E.payload,value:Ta(E.payload,E.dataKey),name:E.name}))});else{var D;m.push(M$({tooltipEntrySettings:b,dataKey:S,payload:I,value:Ta(I,S),name:(D=Ta(I,B))!==null&&D!==void 0?D:b==null?void 0:b.name}))}return m},f)}},XP=at([bi,bn,cie,SP,xi],_ie),dJe=at([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),AJe=at([xi,Cx],jP),Bw=at([dJe,bi,AJe],OP),fJe=at([Bw],e=>e.filter(HN)),hJe=at([Bw],DP),kx=at([hJe,$0],PP),mJe=at([fJe,$0,bi],lie),YP=at([kx,bi,Bw],LP),pJe=at([bi],UP),gJe=at([Bw],e=>e.filter(HN)),vJe=at([mJe,gJe,yw],hie),xJe=at([vJe,$0,xi],mie),bJe=at([Bw],die),yJe=at([kx,bi,bJe,zN,xi],pie),wJe=at([vie,xi,Cx],Sx),EJe=at([wJe,xi],yie),CJe=at([xie,xi,Cx],Sx),_Je=at([CJe,xi],wie),SJe=at([bie,xi,Cx],Sx),NJe=at([SJe,xi],Eie),BJe=at([EJe,NJe,_Je],FS),kJe=at([bi,pJe,xJe,yJe,BJe,bn,xi],MP),qie=at([bi,bn,kx,YP,yw,xi,kJe],QP),TJe=at([qie,bi,XP],VP),IJe=at([bi,qie,TJe,xi],$P),Wie=e=>{var t=xi(e),r=Cx(e),n=!1;return _w(e,t,r,n)},Xie=at([bi,Wie],MN),Yie=at([bi,XP,IJe,Xie],$N),jJe=at([bn,YP,bi,xi],jie),FJe=at([bn,YP,bi,xi],KP),OJe=(e,t,r,n,a,s,i,o)=>{if(t){var{type:l}=t,u=z0(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Li(a[0]-a[1])*2*f:f,u&&i?i.map((m,p)=>({coordinate:n(m)+f,value:m,index:p,offset:f})):n.domain().map((m,p)=>({coordinate:n(m)+f,value:s?s[m]:m,index:p,offset:f}))}}},Wf=at([bn,bi,XP,Yie,Wie,jJe,FJe,xi],OJe),JP=at([Pie,Rie,GYe],(e,t,r)=>Lie(r.shared,e,t)),Jie=e=>e.tooltip.settings.trigger,ZP=e=>e.tooltip.settings.defaultIndex,qN=at([Bx,JP,Jie,ZP],zie),D0=at([qN,kx],WP),Zie=at([Wf,D0],Uie),eoe=at([qN],e=>{if(e)return e.dataKey}),toe=at([Bx,JP,Jie,ZP],Kie),DJe=at([Kf,Gf,bn,vi,Wf,ZP,toe,Nw],$ie),PJe=at([qN,DJe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),RJe=at([qN],e=>e.active),LJe=at([toe,D0,$0,bi,Zie,Nw,JP],Gie),UJe=at([LJe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function EK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EK(Object(r),!0).forEach(function(n){MJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MJe(e,t,r){return(t=QJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QJe(e){var t=HJe(e,"string");return typeof t=="symbol"?t:t+""}function HJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VJe=()=>nr(bi),zJe=()=>{var e=VJe(),t=nr(Wf),r=nr(Yie);return Ty(CK(CK({},e),{},{scale:r}),t)},$Je=()=>nr(SP),eR=(e,t)=>t,roe=(e,t,r)=>r,tR=(e,t,r,n)=>n,KJe=at(Wf,e=>BN(e,t=>t.coordinate)),rR=at([Bx,eR,roe,tR],zie),noe=at([rR,kx],WP),GJe=(e,t,r)=>{if(t!=null){var n=Bx(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},aoe=at([Bx,eR,roe,tR],Kie),OS=at([Kf,Gf,bn,vi,Wf,tR,aoe,Nw],$ie),qJe=at([rR,OS],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),soe=at(Wf,noe,Uie),WJe=at([aoe,noe,$0,bi,soe,Nw,eR],Gie),XJe=at([rR],e=>({isActive:e.active,activeIndex:e.index})),YJe=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var l=iWe(e.chartX,e.chartY,t,r,o);if(l){var u=lWe(l,t),d=Gqe(u,i,s,n,a),f=oWe(t,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SF.apply(null,arguments)}function _K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_K(Object(r),!0).forEach(function(n){JJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_K(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JJe(e,t,r){return(t=ZJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZJe(e){var t=eZe(e,"string");return typeof t=="symbol"?t:t+""}function eZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tZe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,m=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var p,x;if(u==="ScatterChart")p=d,x=$We;else if(u==="BarChart")p=KWe(i,d,a,s),x=Pse;else if(i==="radial"){var{cx:g,cy:b,radius:y,startAngle:_,endAngle:S}=Rse(d);p={cx:g,cy:b,startAngle:_,endAngle:S,innerRadius:y,outerRadius:y},x=Use}else p={points:TXe(i,d,a)},x=kse;var B=typeof o=="object"&&"className"in o?o.className:void 0,I=ZE(ZE(ZE(ZE({stroke:"#ccc",pointerEvents:"none"},a),p),Qn(o,!1)),{},{payload:f,payloadIndex:m,className:An("recharts-tooltip-cursor",B)});return T.isValidElement(o)?T.cloneElement(o,I):T.createElement(x,I)}function rZe(e){var t=zJe(),r=wse(),n=yP(),a=$Je();return T.createElement(tZe,SF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ioe=T.createContext(null),nZe=()=>T.useContext(ioe),m3={exports:{}},SK;function aZe(){return SK||(SK=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||l,m),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],p]:l._events[x].push(p):(l._events[x]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,x=new Array(p);m<p;m++)x[m]=f[m].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,m,p,x){var g=r?r+u:u;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,_,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,m),!0;case 5:return b.fn.call(b.context,d,f,m,p),!0;case 6:return b.fn.call(b.context,d,f,m,p,x),!0}for(S=1,_=new Array(y-1);S<y;S++)_[S-1]=arguments[S];b.fn.apply(b.context,_)}else{var B=b.length,I;for(S=0;S<B;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),y){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,m);break;default:if(!_)for(I=1,_=new Array(y-1);I<y;I++)_[I-1]=arguments[I];b[S].fn.apply(b[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var x=this._events[p];if(x.fn)x.fn===d&&(!m||x.once)&&(!f||x.context===f)&&i(this,p);else{for(var g=0,b=[],y=x.length;g<y;g++)(x[g].fn!==d||m&&!x[g].once||f&&x[g].context!==f)&&b.push(x[g]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(m3)),m3.exports}var sZe=aZe();const iZe=il(sZe);var Fy=new iZe,NF="recharts.syncEvent.tooltip",NK="recharts.syncEvent.brush";function nR(e,t){if(t){var r=Number.parseInt(t,10);if(!xc(r))return e==null?void 0:e[r]}}var oZe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ooe=Ec({name:"options",initialState:oZe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lZe=ooe.reducer,{createEventEmitter:cZe}=ooe.actions;function uZe(e){return e.tooltip.syncInteraction}var dZe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},loe=Ec({name:"chartData",initialState:dZe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:BK,setDataStartEndIndexes:AZe,setComputedData:Sot}=loe.actions,fZe=loe.reducer,coe=()=>{};function hZe(){var e=nr(NP),t=nr(BP),r=ts(),n=nr(nie),a=nr(Wf),s=yP(),i=bP(),o=nr(l=>l.rootProps.className);T.useEffect(()=>{if(e==null)return coe;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var m;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},x=n(a,p);m=a[x]}else n==="value"&&(m=a.find(D=>String(D.value)===d.payload.label));var{coordinate:g}=d.payload;if(m==null||d.payload.active===!1||g==null||i==null){r(CF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,_=Math.min(b,i.x+i.width),S=Math.min(y,i.y+i.height),B={x:s==="horizontal"?m.coordinate:_,y:s==="horizontal"?S:m.coordinate},I=CF({active:d.payload.active,coordinate:B,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(I)}}};return Fy.on(NF,l),()=>{Fy.off(NF,l)}},[o,r,t,e,n,a,s,i])}function mZe(){var e=nr(NP),t=nr(BP),r=ts();T.useEffect(()=>{if(e==null)return coe;var n=(a,s,i)=>{t!==i&&e===a&&r(AZe(s))};return Fy.on(NK,n),()=>{Fy.off(NK,n)}},[r,t,e])}function pZe(){var e=ts();T.useEffect(()=>{e(cZe())},[e]),hZe(),mZe()}function gZe(e,t,r,n,a,s){var i=nr(m=>GJe(m,e,t)),o=nr(BP),l=nr(NP),u=nr(nie),d=nr(uZe),f=d==null?void 0:d.active;T.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=CF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Fy.emit(NF,l,m,o)}},[f,r,i,a,n,o,l,u,s])}function kK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kK(Object(r),!0).forEach(function(n){vZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vZe(e,t,r){return(t=xZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZe(e){var t=bZe(e,"string");return typeof t=="symbol"?t:t+""}function bZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yZe(e){return e.dataKey}function wZe(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(EWe,t)}var IK=[],EZe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Op.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function eC(e){var t=bu(e,EZe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:p,wrapperStyle:x,cursor:g,shared:b,trigger:y,defaultIndex:_,portal:S,axisId:B}=t,I=ts(),D=typeof _=="number"?String(_):_;T.useEffect(()=>{I(YYe({shared:b,trigger:y,axisId:B,active:r,defaultIndex:D}))},[I,b,y,B,r,D]);var E=bP(),C=Bse(),N=KYe(b),{activeIndex:P,isActive:O}=nr(te=>XJe(te,N,y,D)),F=nr(te=>WJe(te,N,y,D)),M=nr(te=>soe(te,N,y,D)),Q=nr(te=>qJe(te,N,y,D)),J=F,W=nZe(),Z=r??O,[H,z]=RGe([J,Z]),G=N==="axis"?M:void 0;gZe(N,y,Q,G,P,Z);var ne=S??W;if(ne==null)return null;var R=J??IK;Z||(R=IK),o&&R.length&&(R=hGe(J.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,yZe));var q=R.length>0,Y=T.createElement(TWe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:l,active:Z,coordinate:Q,hasPayload:q,offset:u,position:f,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:x,lastBoundingBox:H,innerRef:z,hasPortalFromProps:!!S},wZe(i,TK(TK({},t),{},{payload:R,label:G,active:Z,coordinate:Q,accessibilityLayer:C})));return T.createElement(T.Fragment,null,Ote.createPortal(Y,ne),Z&&T.createElement(rZe,{cursor:g,tooltipEventType:N,coordinate:Q,payload:J,index:P}))}var p3={},g3={},v3={},jK;function CZe(){return jK||(jK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),g()};let m=null;const p=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},x=()=>{m!==null&&(clearTimeout(m),m=null)},g=()=>{x(),i=void 0,o=null},b=()=>{d()},y=function(..._){if(a!=null&&a.aborted)return;i=this,o=_;const S=m==null;p(),l&&S&&d()};return y.schedule=p,y.cancel=g,y.flush=b,a==null||a.addEventListener("abort",g,{once:!0}),y}e.debounce=t}(v3)),v3}var FK;function _Ze(){return FK||(FK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CZe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const m=t.debounce(function(...g){d=n.apply(this,g),f=null},a,{edges:u}),p=function(...g){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,g),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,g),d)},x=()=>(m.flush(),d);return p.cancel=m.cancel,p.flush=x,p}e.debounce=r}(g3)),g3}var OK;function SZe(){return OK||(OK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Ze();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(p3)),p3}var x3,DK;function NZe(){return DK||(DK=1,x3=SZe().throttle),x3}var BZe=NZe();const kZe=il(BZe);var Rb=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(n){TZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TZe(e,t,r){return(t=IZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZe(e){var t=jZe(e,"string");return typeof t=="symbol"?t:t+""}function jZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tC=T.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:m,onResize:p,style:x={}}=e,g=T.useRef(null),b=T.useRef();b.current=p,T.useImperativeHandle(t,()=>g.current);var[y,_]=T.useState({containerWidth:n.width,containerHeight:n.height}),S=T.useCallback((I,D)=>{_(E=>{var C=Math.round(I),N=Math.round(D);return E.containerWidth===C&&E.containerHeight===N?E:{containerWidth:C,containerHeight:N}})},[]);T.useEffect(()=>{var I=N=>{var P,{width:O,height:F}=N[0].contentRect;S(O,F),(P=b.current)===null||P===void 0||P.call(b,O,F)};d>0&&(I=kZe(I,d,{trailing:!0,leading:!1}));var D=new ResizeObserver(I),{width:E,height:C}=g.current.getBoundingClientRect();return S(E,C),D.observe(g.current),()=>{D.disconnect()}},[S,d]);var B=T.useMemo(()=>{var{containerWidth:I,containerHeight:D}=y;if(I<0||D<0)return null;Rb(Rm(a)||Rm(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),Rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Rm(a)?I:a,C=Rm(s)?D:s;return r&&r>0&&(E?C=E/r:C&&(E=C*r),l&&C>l&&(C=l)),Rb(E>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,C,a,s,i,o,r),T.Children.map(u,N=>T.cloneElement(N,{width:E,height:C,style:b3({width:E,height:C},N.props.style)}))},[r,u,s,l,o,i,y,a]);return T.createElement("div",{id:f?"".concat(f):void 0,className:An("recharts-responsive-container",m),style:b3(b3({},x),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:l}),ref:g},T.createElement("div",{style:{width:0,height:0,overflow:"visible"}},B))}),kw=e=>null;kw.displayName="Cell";function FZe(e,t,r){return(t=OZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OZe(e){var t=DZe(e,"string");return typeof t=="symbol"?t:t+""}function DZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PZe{constructor(t){FZe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function RK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RZe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RK(Object(r),!0).forEach(function(n){LZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LZe(e,t,r){return(t=UZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UZe(e){var t=MZe(e,"string");return typeof t=="symbol"?t:t+""}function MZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QZe={cacheSize:2e3,enableCache:!0},uoe=RZe({},QZe),LK=new PZe(uoe.cacheSize),HZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UK="recharts_measurement_span";function VZe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var MK=(e,t)=>{try{var r=document.getElementById(UK);r||(r=document.createElement("span"),r.setAttribute("id",UK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,HZe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Lb=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Op.isSsr)return{width:0,height:0};if(!uoe.enableCache)return MK(t,r);var n=VZe(t,r),a=LK.get(n);if(a)return a;var s=MK(t,r);return LK.set(n,s),s},QK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$Ze=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,doe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KZe=Object.keys(doe),ev="NaN";function GZe(e,t){return e*doe[t]}class Cl{static parse(t){var r,[,n,a]=(r=$Ze.exec(t))!==null&&r!==void 0?r:[];return new Cl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,xc(t)&&(this.unit=""),r!==""&&!zZe.test(r)&&(this.num=NaN,this.unit=""),KZe.includes(r)&&(this.num=GZe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Cl(NaN,""):new Cl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Cl(NaN,""):new Cl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Cl(NaN,""):new Cl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Cl(NaN,""):new Cl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return xc(this.num)}}function Aoe(e){if(e.includes(ev))return ev;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=QK.exec(t))!==null&&r!==void 0?r:[],i=Cl.parse(n??""),o=Cl.parse(s??""),l=a==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return ev;t=t.replace(QK,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=HK.exec(t))!==null&&u!==void 0?u:[],p=Cl.parse(d??""),x=Cl.parse(m??""),g=f==="+"?p.add(x):p.subtract(x);if(g.isNaN())return ev;t=t.replace(HK,g.toString())}return t}var VK=/\(([^()]*)\)/;function qZe(e){for(var t=e,r;(r=VK.exec(t))!=null;){var[,n]=r;t=t.replace(VK,Aoe(n))}return t}function WZe(e){var t=e.replace(/\s+/g,"");return t=qZe(t),t=Aoe(t),t}function XZe(e){try{return WZe(e)}catch{return ev}}function y3(e){var t=XZe(e.slice(5,-1));return t===ev?"":t}var YZe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JZe=["dx","dy","angle","className","breakAll"];function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BF.apply(null,arguments)}function zK(e,t){if(e==null)return{};var r,n,a=ZZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var foe=/[ \f\n\r\t\v\u2028\u2029]+/,hoe=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];vs(t)||(r?a=t.toString().split(""):a=t.toString().split(foe));var s=a.map(o=>({word:o,width:Lb(o,n).width})),i=r?0:Lb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},eet=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:l}=e,u=sr(s),d=i,f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((F,M)=>{var{word:Q,width:J}=M,W=F[F.length-1];if(W&&(n==null||a||W.width+J+r<Number(n)))W.words.push(Q),W.width+=J+r;else{var Z={words:[Q],width:J};F.push(Z)}return F},[])},m=f(t),p=P=>P.reduce((O,F)=>O.width>F.width?O:F);if(!u||a)return m;var x=m.length>s||p(m).width>Number(n);if(!x)return m;for(var g="",b=P=>{var O=d.slice(0,P),F=hoe({breakAll:l,style:o,children:O+g}).wordsWithComputedWidth,M=f(F),Q=M.length>s||p(M).width>Number(n);return[Q,M]},y=0,_=d.length-1,S=0,B;y<=_&&S<=d.length-1;){var I=Math.floor((y+_)/2),D=I-1,[E,C]=b(D),[N]=b(I);if(!E&&!N&&(y=I+1),E&&N&&(_=I-1),!E&&N){B=C;break}S++}return B||m},$K=e=>{var t=vs(e)?[]:e.toString().split(foe);return[{words:t}]},tet=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Op.isSsr){var o,l,u=hoe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return $K(n);return eet({breakAll:s,children:n,maxLines:i,style:a},o,l,t,r)}return $K(n)},KK="#808080",Tx=T.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=KK}=e,d=zK(e,YZe),f=T.useMemo(()=>tet({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:m,dy:p,angle:x,className:g,breakAll:b}=d,y=zK(d,JZe);if(!gA(r)||!gA(n))return null;var _=r+(sr(m)?m:0),S=n+(sr(p)?p:0),B;switch(l){case"start":B=y3("calc(".concat(s,")"));break;case"middle":B=y3("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:B=y3("calc(".concat(f.length-1," * -").concat(a,")"));break}var I=[];if(i){var D=f[0].width,{width:E}=d;I.push("scale(".concat(sr(E)?E/D:1,")"))}return x&&I.push("rotate(".concat(x,", ").concat(_,", ").concat(S,")")),I.length&&(y.transform=I.join(" ")),T.createElement("text",BF({},Qn(y,!0),{ref:t,x:_,y:S,className:An("recharts-text",g),textAnchor:o,fill:u.includes("url")?KK:u}),f.map((C,N)=>{var P=C.words.join(b?"":" ");return T.createElement("tspan",{x:_,dy:N===0?B:a,key:"".concat(P,"-").concat(N)},P)}))});Tx.displayName="Text";var ret=["offset"],net=["labelRef"];function GK(e,t){if(e==null)return{};var r,n,a=aet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qK(Object(r),!0).forEach(function(n){set(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function set(e,t,r){return(t=iet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iet(e){var t=oet(e,"string");return typeof t=="symbol"?t:t+""}function oet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sf.apply(null,arguments)}var cet=e=>{var{value:t,formatter:r}=e,n=vs(e.children)?t:e.children;return typeof r=="function"?r(n):n},aR=e=>e!=null&&typeof e=="function",uet=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n},det=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:p}=n,x=(u+d)/2,g=uet(f,m),b=g>=0?1:-1,y,_;a==="insideStart"?(y=f+b*s,_=p):a==="insideEnd"?(y=m-b*s,_=!p):a==="end"&&(y=m+b*s,_=p),_=g<=0?_:!_;var S=$n(o,l,x,y),B=$n(o,l,x,y+(_?1:-1)*359),I="M".concat(S.x,",").concat(S.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(B.x,",").concat(B.y),D=vs(e.id)?Ny("recharts-radial-line-"):e.id;return T.createElement("text",sf({},r,{dominantBaseline:"central",className:An("recharts-radial-bar-label",i)}),T.createElement("defs",null,T.createElement("path",{id:D,d:I})),T.createElement("textPath",{xlinkHref:"#".concat(D)},t))},Aet=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=$n(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(s+i)/2,{x:p,y:x}=$n(n,a,m,u);return{x:p,y:x,textAnchor:"middle",verticalAnchor:"middle"}},fet=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:l}=t,u=l>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",p=o>=0?1:-1,x=p*n,g=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return us(us({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var _={x:s+o/2,y:i+l+d,textAnchor:"middle",verticalAnchor:m};return us(us({},_),r?{height:Math.max(r.y+r.height-(i+l),0),width:o}:{})}if(a==="left"){var S={x:s-x,y:i+l/2,textAnchor:g,verticalAnchor:"middle"};return us(us({},S),r?{width:Math.max(S.x-r.x,0),height:l}:{})}if(a==="right"){var B={x:s+o+x,y:i+l/2,textAnchor:b,verticalAnchor:"middle"};return us(us({},B),r?{width:Math.max(r.x+r.width-B.x,0),height:l}:{})}var I=r?{width:o,height:l}:{};return a==="insideLeft"?us({x:s+x,y:i+l/2,textAnchor:b,verticalAnchor:"middle"},I):a==="insideRight"?us({x:s+o-x,y:i+l/2,textAnchor:g,verticalAnchor:"middle"},I):a==="insideTop"?us({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:m},I):a==="insideBottom"?us({x:s+o/2,y:i+l-d,textAnchor:"middle",verticalAnchor:f},I):a==="insideTopLeft"?us({x:s+x,y:i+d,textAnchor:b,verticalAnchor:m},I):a==="insideTopRight"?us({x:s+o-x,y:i+d,textAnchor:g,verticalAnchor:m},I):a==="insideBottomLeft"?us({x:s+x,y:i+l-d,textAnchor:b,verticalAnchor:f},I):a==="insideBottomRight"?us({x:s+o-x,y:i+l-d,textAnchor:g,verticalAnchor:f},I):a&&typeof a=="object"&&(sr(a.x)||Rm(a.x))&&(sr(a.y)||Rm(a.y))?us({x:s+sl(a.x,o),y:i+sl(a.y,l),textAnchor:"end",verticalAnchor:"end"},I):us({x:s+o/2,y:i+l/2,textAnchor:"middle",verticalAnchor:"middle"},I)},het=e=>"cx"in e&&sr(e.cx);function Bl(e){var{offset:t=5}=e,r=GK(e,ret),n=us({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:l,className:u="",textBreakAll:d,labelRef:f}=n,m=nr(Ex),p=bP(),x=s==="center"?p:m??p,g=a||x;if(!g||vs(i)&&vs(o)&&!T.isValidElement(l)&&typeof l!="function")return null;var b=us(us({},n),{},{viewBox:g});if(T.isValidElement(l)){var{labelRef:y}=b,_=GK(b,net);return T.cloneElement(l,_)}var S;if(typeof l=="function"){if(S=T.createElement(l,b),T.isValidElement(S))return S}else S=cet(n);var B=het(g),I=Qn(n,!0);if(B&&(s==="insideStart"||s==="insideEnd"||s==="end"))return det(n,S,I,g);var D=B?Aet(g,n.offset,n.position):fet(n,g);return T.createElement(Tx,sf({ref:f,className:An("recharts-label",u)},I,D,{breakAll:d}),S)}Bl.displayName="Label";var moe=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:l,outerRadius:u,x:d,y:f,top:m,left:p,width:x,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(sr(x)&&sr(g)){if(sr(d)&&sr(f))return{x:d,y:f,width:x,height:g};if(sr(m)&&sr(p))return{x:m,y:p,width:x,height:g}}if(sr(d)&&sr(f))return{x:d,y:f,width:0,height:0};if(sr(t)&&sr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},met=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?T.createElement(Bl,sf({key:"label-implicit"},n)):gA(e)?T.createElement(Bl,sf({key:"label-implicit",value:e},n)):T.isValidElement(e)?e.type===Bl?T.cloneElement(e,us({key:"label-implicit"},n)):T.createElement(Bl,sf({key:"label-implicit",content:e},n)):aR(e)?T.createElement(Bl,sf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?T.createElement(Bl,sf({},e,{key:"label-implicit"},n)):null},pet=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=moe(t),o=xw(a,Bl).map((u,d)=>T.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var l=met(t.label,r||i,s);return[l,...o]};Bl.parseViewBox=moe;Bl.renderCallByParent=pet;var w3={},E3={},WK;function get(){return WK||(WK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(E3)),E3}var C3={},XK;function vet(){return XK||(XK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(C3)),C3}var YK;function xet(){return YK||(YK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=get(),r=vet(),n=iP();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(w3)),w3}var _3,JK;function bet(){return JK||(JK=1,_3=xet().last),_3}var yet=bet();const poe=il(yet);var wet=["valueAccessor"],Eet=["data","dataKey","clockWise","id","textBreakAll"];function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DS.apply(null,arguments)}function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(n){Cet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cet(e,t,r){return(t=_et(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _et(e){var t=Net(e,"string");return typeof t=="symbol"?t:t+""}function Net(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tG(e,t){if(e==null)return{};var r,n,a=Bet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ket=e=>Array.isArray(e.value)?poe(e.value):e.value;function g0(e){var{valueAccessor:t=ket}=e,r=tG(e,wet),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,l=tG(r,Eet);return!n||!n.length?null:T.createElement(es,{className:"recharts-label-list"},n.map((u,d)=>{var f=vs(a)?t(u,d):Ta(u&&u.payload,a),m=vs(i)?{}:{id:"".concat(i,"-").concat(d)};return T.createElement(Bl,DS({},Qn(u,!0),l,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Bl.parseViewBox(vs(s)?u:eG(eG({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}g0.displayName="LabelList";function Tet(e,t){return e?e===!0?T.createElement(g0,{key:"labelList-implicit",data:t}):T.isValidElement(e)||aR(e)?T.createElement(g0,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?T.createElement(g0,DS({data:t},e,{key:"labelList-implicit"})):null:null}function Iet(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=xw(n,g0).map((i,o)=>T.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=Tet(e.label,t);return[s,...a]}g0.renderCallByParent=Iet;var jet=["points","className","baseLinePoints","connectNulls"];function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tv.apply(null,arguments)}function Fet(e,t){if(e==null)return{};var r,n,a=Oet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Oet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rG=e=>e&&e.x===+e.x&&e.y===+e.y,Det=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{rG(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),rG(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Ub=(e,t)=>{var r=Det(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},Pet=(e,t,r)=>{var n=Ub(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Ub(t.reverse(),r).slice(1))},goe=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=Fet(e,jet);if(!t||!t.length)return null;var i=An("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",l=Pet(t,n,a);return T.createElement("g",{className:i},T.createElement("path",tv({},Qn(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:l})),o?T.createElement("path",tv({},Qn(s,!0),{fill:"none",d:Ub(t,a)})):null,o?T.createElement("path",tv({},Qn(s,!0),{fill:"none",d:Ub(n,a)})):null)}var u=Ub(t,a);return T.createElement("path",tv({},Qn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kF.apply(null,arguments)}var sR=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=An("recharts-dot",a);return t===+t&&r===+r&&n===+n?T.createElement("circle",kF({},zo(e),sP(e),{className:s,cx:t,cy:r,r:n})):null},iR=e=>e.graphicalItems.polarItems,Ret=at([Ca,Ew],jP),oR=at([iR,Us,Ret],OP),Let=at([oR],DP),lR=at([Let,LN],PP),voe=at([lR,Us,oR],LP),Uet=at([lR,Us,oR],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Ta(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ta(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),nG=()=>{},Met=at([Us,Cie,nG,Uet,nG,bn,Ca],MP),xoe=at([Us,bn,lR,voe,yw,Ca,Met],QP),boe=at([xoe,Us,G0],VP),Qet=at([Us,xoe,boe,Ca],$P),cR=(e,t,r)=>{switch(t){case"angleAxis":return wx(e,r);case"radiusAxis":return ww(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uR=(e,t,r)=>{switch(t){case"angleAxis":return rYe(e,r);case"radiusAxis":return nYe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ix=at([cR,G0,Qet,uR],$N),yoe=at([bn,voe,_x,Ca],KP),jx=at([bn,cR,G0,Ix,boe,uR,Sw,yoe,Ca],Fie);at([bn,cR,Ix,uR,Sw,yoe,Ca],Die);var Het=(e,t)=>jx(e,"angleAxis",t,!1),Vet=at([Het],e=>{if(e)return e.map(t=>t.coordinate)}),zet=(e,t)=>jx(e,"radiusAxis",t,!1),$et=at([zet],e=>{if(e)return e.map(t=>t.coordinate)}),Ket=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function Get(e,t){if(e==null)return{};var r,n,a=qet(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qet(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pf(){return Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pf.apply(null,arguments)}function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){Wet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wet(e,t,r){return(t=Xet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xet(e){var t=Yet(e,"string");return typeof t=="symbol"?t:t+""}function Yet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jet=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=$n(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},Zet=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=Jv({stroke:"#ccc"},zo(e));return T.createElement("g",{className:"recharts-polar-grid-angle"},s.map(l=>{var u=$n(t,r,n,l),d=$n(t,r,a,l);return T.createElement("line",Pf({},o,{key:"line-".concat(l),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},ett=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=Jv(Jv({stroke:"#ccc"},zo(e)),{},{fill:"none"});return T.createElement("circle",Pf({},s,{className:An("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},ttt=e=>{var{radius:t,index:r}=e,n=Jv(Jv({stroke:"#ccc"},zo(e)),{},{fill:"none"});return T.createElement("path",Pf({},n,{className:An("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:Jet(t,e.cx,e.cy,e.polarAngles)}))},rtt=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:T.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?T.createElement(ett,Pf({key:s},e,{radius:n,index:a})):T.createElement(ttt,Pf({key:s},e,{radius:n,index:a}))}))},woe=e=>{var t,r,n,a,s,i,o,l,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:m=0,cx:p,cy:x,innerRadius:g,outerRadius:b}=e,y=Get(e,Ket),_=nr(Ex),S=Jv({cx:(t=(r=_==null?void 0:_.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=_==null?void 0:_.cy)!==null&&a!==void 0?a:x)!==null&&n!==void 0?n:0,innerRadius:(s=(i=_==null?void 0:_.innerRadius)!==null&&i!==void 0?i:g)!==null&&s!==void 0?s:0,outerRadius:(o=(l=_==null?void 0:_.outerRadius)!==null&&l!==void 0?l:b)!==null&&o!==void 0?o:0},y),{polarAngles:B,polarRadius:I,cx:D,cy:E,innerRadius:C,outerRadius:N}=S,P=nr(Q=>Vet(Q,f)),O=nr(Q=>$et(Q,m)),F=Array.isArray(B)?B:P,M=Array.isArray(I)?I:O;return N<=0||F==null||M==null?null:T.createElement("g",{className:"recharts-polar-grid"},T.createElement(Zet,Pf({cx:D,cy:E,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:F,polarRadius:M})),T.createElement(rtt,Pf({cx:D,cy:E,innerRadius:C,outerRadius:N,gridType:u,radialLines:d},S,{polarAngles:F,polarRadius:M})))};woe.displayName="PolarGrid";var S3={},N3={},sG;function ntt(){return sG||(sG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l>s&&(s=l,a=o)}return a}e.maxBy=t}(N3)),N3}var iG;function att(){return iG||(iG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ntt(),r=NN(),n=dP();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(S3)),S3}var B3,oG;function stt(){return oG||(oG=1,B3=att().maxBy),B3}var itt=stt();const ott=il(itt);var k3={},T3={},lG;function ltt(){return lG||(lG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],l=n(o);l<s&&(s=l,a=o)}return a}e.minBy=t}(T3)),T3}var cG;function ctt(){return cG||(cG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ltt(),r=NN(),n=dP();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(k3)),k3}var I3,uG;function utt(){return uG||(uG=1,I3=ctt().minBy),I3}var dtt=utt();const Att=il(dtt);var ftt={radiusAxis:{},angleAxis:{}},Eoe=Ec({name:"polarAxis",initialState:ftt,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:htt,removeRadiusAxis:mtt,addAngleAxis:ptt,removeAngleAxis:gtt}=Eoe.actions,vtt=Eoe.reducer,xtt=["cx","cy","angle","axisLine"],btt=["angle","tickFormatter","stroke","tick"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(null,arguments)}function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(n){WN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WN(e,t,r){return(t=ytt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ytt(e){var t=wtt(e,"string");return typeof t=="symbol"?t:t+""}function wtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Coe(e,t){if(e==null)return{};var r,n,a=Ett(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ett(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _oe="radiusAxis";function Ctt(e){var t=ts();return T.useEffect(()=>(t(htt(e)),()=>{t(mtt(e))})),null}var _tt=(e,t,r,n)=>{var{coordinate:a}=e;return $n(r,n,a,t)},Stt=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},Ntt=(e,t,r,n)=>{var a=ott(n,i=>i.coordinate||0),s=Att(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},Btt=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=Coe(e,xtt),o=t.reduce((f,m)=>[Math.min(f[0],m.coordinate),Math.max(f[1],m.coordinate)],[1/0,-1/0]),l=$n(r,n,o[0],a),u=$n(r,n,o[1],a),d=sA(sA(sA({},zo(i)),{},{fill:"none"},Qn(s,!1)),{},{x1:l.x,y1:l.y,x2:u.x,y2:u.y});return T.createElement("line",Oy({className:"recharts-polar-radius-axis-line"},d))},ktt=(e,t,r)=>{var n;return T.isValidElement(e)?n=T.cloneElement(e,t):typeof e=="function"?n=e(t):n=T.createElement(Tx,Oy({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},Ttt=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=Coe(e,btt),o=Stt(e.orientation),l=zo(i),u=Qn(s,!1),d=t.map((f,m)=>{var p=_tt(f,e.angle,e.cx,e.cy),x=sA(sA(sA(sA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},l),{},{stroke:"none",fill:a},u),{},{index:m},p),{},{payload:f});return T.createElement(es,Oy({className:An("recharts-polar-radius-axis-tick",hse(s)),key:"tick-".concat(f.coordinate)},vx(e,f,m)),ktt(s,x,n?n(f.value,m):f.value))});return T.createElement(es,{className:"recharts-polar-radius-axis-ticks"},d)},Itt=e=>{var{radiusAxisId:t}=e,r=nr(Ex),n=nr(l=>Ix(l,"radiusAxis",t)),a=nr(l=>jx(l,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=sA(sA(sA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return T.createElement(es,{className:An("recharts-polar-radius-axis",_oe,s.className)},o&&Btt(s,a),i&&Ttt(s,a),Bl.renderCallByParent(s,Ntt(s.angle,s.cx,s.cy,a)))};class XN extends T.PureComponent{render(){return T.createElement(T.Fragment,null,T.createElement(Ctt,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),T.createElement(Itt,this.props))}}WN(XN,"displayName","PolarRadiusAxis");WN(XN,"axisType",_oe);WN(XN,"defaultProps",Nl);var jtt=["children"];function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rf.apply(null,arguments)}function AG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AG(Object(r),!0).forEach(function(n){YN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YN(e,t,r){return(t=Ftt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ftt(e){var t=Ott(e,"string");return typeof t=="symbol"?t:t+""}function Ott(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dtt(e,t){if(e==null)return{};var r,n,a=Ptt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ptt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Rtt=Math.PI/180,fG=1e-5,Soe="angleAxis";function Ltt(e){var t=ts(),r=T.useMemo(()=>{var{children:s}=e,i=Dtt(e,jtt);return i},[e]),n=nr(s=>wx(s,r.id)),a=r===n;return T.useEffect(()=>(t(ptt(r)),()=>{t(gtt(r))}),[t,r]),a?e.children:null}var Utt=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,l=$n(r,n,a,e.coordinate),u=$n(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:l.x,y1:l.y,x2:u.x,y2:u.y}},Mtt=(e,t)=>{var r=Math.cos(-e.coordinate*Rtt);return r>fG?t==="outer"?"start":"end":r<-fG?t==="outer"?"end":"start":"middle"},Qtt=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=eA(eA({},zo(e)),{},{fill:"none"},Qn(s,!1));if(a==="circle")return T.createElement(sR,Rf({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var l=i.map(u=>$n(t,r,n,u.coordinate));return T.createElement(goe,Rf({className:"recharts-polar-angle-axis-line"},o,{points:l}))},Htt=e=>{var{tick:t,tickProps:r,value:n}=e;return t?T.isValidElement(t)?T.cloneElement(t,r):typeof t=="function"?t(r):T.createElement(Tx,Rf({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},Vtt=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=zo(e),o=Qn(t,!1),l=eA(eA({},i),{},{fill:"none"},Qn(r,!1)),u=s.map((d,f)=>{var m=Utt(d,e),p=Mtt(d,e.orientation),x=eA(eA(eA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:m.x2,y:m.y2});return T.createElement(es,Rf({className:An("recharts-polar-angle-axis-tick",hse(t)),key:"tick-".concat(d.coordinate)},vx(e,d,f)),r&&T.createElement("line",Rf({className:"recharts-polar-angle-axis-tick-line"},l,m)),T.createElement(Htt,{tick:t,tickProps:x,value:n?n(d.value,f):d.value}))});return T.createElement(es,{className:"recharts-polar-angle-axis-ticks"},u)},ztt=e=>{var{angleAxisId:t}=e,r=nr(Ex),n=nr(o=>Ix(o,"angleAxis",t)),a=Rl(),s=nr(o=>jx(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=eA(eA(eA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return T.createElement(es,{className:An("recharts-polar-angle-axis",Soe,i.className)},T.createElement(Qtt,Rf({},i,{ticks:s})),T.createElement(Vtt,Rf({},i,{ticks:s})))};class JN extends T.PureComponent{render(){return this.props.radius<=0?null:T.createElement(Ltt,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},T.createElement(ztt,this.props))}}YN(JN,"displayName","PolarAngleAxis");YN(JN,"axisType",Soe);YN(JN,"defaultProps",Zd);function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){$tt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $tt(e,t,r){return(t=Ktt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ktt(e){var t=Gtt(e,"string");return typeof t=="symbol"?t:t+""}function Gtt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qtt=(e,t)=>t,dR=at([iR,qtt],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Wtt=[],AR=(e,t,r)=>(r==null?void 0:r.length)===0?Wtt:r,Noe=at([LN,dR,AR],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>mG(mG({},t.presentationProps),s.props))),a!=null)return a}}),Xtt=at([Noe,dR,AR],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Ta(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:xx(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),Ytt=at([Noe,dR,AR,vi],(e,t,r,n)=>{if(!(t==null||e==null))return zrt({offset:n,pieSettings:t,displayedData:e,cells:r})}),j3={},pG;function Jtt(){return pG||(pG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(j3)),j3}var F3,gG;function Ztt(){return gG||(gG=1,F3=Jtt().isPlainObject),F3}var ert=Ztt();const trt=il(ert);function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PS.apply(null,arguments)}var vG=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},rrt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nrt=e=>{var t=bu(e,rrt),r=T.useRef(),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:l,height:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:p,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||l!==+l||u!==+u||o===0&&l===0||u===0)return null;var g=An("recharts-trapezoid",d);return x?T.createElement(kS,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:l,height:u,x:s,y:i},duration:m,animationEasing:f,isActive:x},b=>{var{upperWidth:y,lowerWidth:_,height:S,x:B,y:I}=b;return T.createElement(kS,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:f},T.createElement("path",PS({},Qn(t,!0),{className:g,d:vG(B,I,y,_,S),ref:r})))}):T.createElement("g",null,T.createElement("path",PS({},Qn(t,!0),{className:g,d:vG(s,i,o,l,u)})))},art=["option","shapeType","propTransformer","activeClassName","isActive"];function srt(e,t){if(e==null)return{};var r,n,a=irt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function irt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xG(Object(r),!0).forEach(function(n){ort(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ort(e,t,r){return(t=lrt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lrt(e){var t=crt(e,"string");return typeof t=="symbol"?t:t+""}function crt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function urt(e,t){return RS(RS({},t),e)}function drt(e,t){return e==="symbols"}function bG(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return T.createElement(Pse,r);case"trapezoid":return T.createElement(nrt,r);case"sector":return T.createElement(Use,r);case"symbols":if(drt(t))return T.createElement(Fae,r);break;default:return null}}function Art(e){return T.isValidElement(e)?e.props:e}function Boe(e){var{option:t,shapeType:r,propTransformer:n=urt,activeClassName:a="recharts-active-shape",isActive:s}=e,i=srt(e,art),o;if(T.isValidElement(t))o=T.cloneElement(t,RS(RS({},i),Art(t)));else if(typeof t=="function")o=t(i);else if(trt(t)&&typeof t!="boolean"){var l=n(t,i);o=T.createElement(bG,{shapeType:r,elementProps:l})}else{var u=i;o=T.createElement(bG,{shapeType:r,elementProps:u})}return s?T.createElement(es,{className:a},o):o}var fR=(e,t)=>{var r=ts();return(n,a)=>s=>{e==null||e(n,a,s),r(Qie({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},hR=e=>{var t=ts();return(r,n)=>a=>{e==null||e(r,n,a),t(JYe())}},mR=(e,t)=>{var r=ts();return(n,a)=>s=>{e==null||e(n,a,s),r(ZYe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function pR(e){var{fn:t,args:r}=e,n=ts(),a=Rl();return T.useEffect(()=>{if(!a){var s=t(r);return n(WYe(s)),()=>{n(XYe(s))}}},[t,r,n,a]),null}var koe=()=>{};function frt(e){var{legendPayload:t}=e,r=ts(),n=Rl();return T.useEffect(()=>n?koe:(r(Sse(t)),()=>{r(Nse(t))}),[r,n,t]),null}function Toe(e){var{legendPayload:t}=e,r=ts(),n=nr(bn);return T.useEffect(()=>n!=="centric"&&n!=="radial"?koe:(r(Sse(t)),()=>{r(Nse(t))}),[r,n,t]),null}function gR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(Ny(t)),n=T.useRef(e);return n.current!==e&&(r.current=Ny(t),n.current=e),r.current}var O3,hrt=()=>{var[e]=T.useState(()=>Ny("uid-"));return e},mrt=(O3=Nce.useId)!==null&&O3!==void 0?O3:hrt;function prt(e,t){var r=mrt();return t||(e?"".concat(e,"-").concat(r):r)}var grt=T.createContext(void 0),vR=e=>{var{id:t,type:r,children:n}=e,a=prt("recharts-".concat(r),t);return T.createElement(grt.Provider,{value:a},n(a))},vrt={cartesianItems:[],polarItems:[]},Ioe=Ec({name:"graphicalItems",initialState:vrt,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=bf(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=bf(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=bf(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:xrt,replaceCartesianGraphicalItem:brt,removeCartesianGraphicalItem:yrt,addPolarGraphicalItem:wrt,removePolarGraphicalItem:Ert}=Ioe.actions,Crt=Ioe.reducer;function _rt(e){var t=ts(),r=T.useRef(null);return T.useEffect(()=>{r.current===null?t(xrt(e)):r.current!==e&&t(brt({prev:r.current,next:e})),r.current=e},[t,e]),T.useEffect(()=>()=>{r.current&&(t(yrt(r.current)),r.current=null)},[t]),null}function joe(e){var t=ts();return T.useEffect(()=>(t(wrt(e)),()=>{t(Ert(e))}),[t,e]),null}function Srt(){}var Nrt={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},yG={t:0},D3={t:1};function xR(e){var t=bu(e,Nrt),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=Dse("JavascriptAnimate",t.animationManager),[f,m]=T.useState(r?yG:D3),p=T.useRef(null);return T.useEffect(()=>{r||m(D3)},[r]),T.useEffect(()=>{if(!r||!n)return Srt;var x=Ose(yG,D3,jse(s),a,m,d.getTimeoutController()),g=()=>{p.current=x()};return d.start([l,i,g,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,l,o,d]),u(f.t)}var Brt=["onMouseEnter","onClick","onMouseLeave"],krt=["id"],Trt=["id"];function bR(e,t){if(e==null)return{};var r,n,a=Irt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Irt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wG(Object(r),!0).forEach(function(n){jrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jrt(e,t,r){return(t=Frt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Frt(e){var t=Ort(e,"string");return typeof t=="symbol"?t:t+""}function Ort(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lf.apply(null,arguments)}function Drt(e){var t=T.useMemo(()=>xw(e.children,kw),[e.children]),r=nr(n=>Xtt(n,e.id,t));return r==null?null:T.createElement(Toe,{legendPayload:r})}function Prt(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:xx(o,t),hide:l,type:u,color:i,unit:""}}}var Rrt=(e,t)=>e>t?"start":e<t?"end":"middle",Lrt=(e,t,r)=>typeof t=="function"?t(e):sl(t,r,r*.8),Urt=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=fse(s,i),l=a+sl(e.cx,s,s/2),u=n+sl(e.cy,i,i/2),d=sl(e.innerRadius,o,0),f=Lrt(r,e.outerRadius,o),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:m}},Mrt=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Qrt=(e,t)=>{if(T.isValidElement(e))return T.cloneElement(e,t);if(typeof e=="function")return e(t);var r=An("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return T.createElement(kse,Lf({},t,{type:"linear",className:r}))},Hrt=(e,t,r)=>{if(T.isValidElement(e))return T.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),T.isValidElement(n)))return n;var a=An("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return T.createElement(Tx,Lf({},t,{alignmentBaseline:"middle",className:a}),n)};function Vrt(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=zo(r),l=Qn(a,!1),u=Qn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((m,p)=>{var x=(m.startAngle+m.endAngle)/2,g=$n(m.cx,m.cy,m.outerRadius+d,x),b=hs(hs(hs(hs({},o),m),{},{stroke:"none"},l),{},{index:p,textAnchor:Rrt(g.x,m.cx)},g),y=hs(hs(hs(hs({},o),m),{},{fill:"none",stroke:m.fill},u),{},{index:p,points:[$n(m.cx,m.cy,m.outerRadius,x),g],key:"line"});return T.createElement(es,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(p)},s&&Qrt(s,y),Hrt(a,b,Ta(m,i)))});return T.createElement(es,{className:"recharts-pie-labels"},f)}function Foe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=nr(D0),{onMouseEnter:o,onClick:l,onMouseLeave:u}=a,d=bR(a,Brt),f=fR(o,a.dataKey),m=hR(u),p=mR(l,a.dataKey);return t==null?null:T.createElement(T.Fragment,null,t.map((x,g)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var b=r&&String(g)===i,y=i?n:null,_=b?r:y,S=hs(hs({},x),{},{stroke:x.stroke,tabIndex:-1,[xse]:g,[bse]:a.dataKey});return T.createElement(es,Lf({tabIndex:-1,className:"recharts-pie-sector"},vx(d,x,g),{onMouseEnter:f(x,g),onMouseLeave:m(x,g),onClick:p(x,g),key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(g)}),T.createElement(Boe,Lf({option:_,isActive:b,shapeType:"sector"},S)))}),T.createElement(Vrt,{sectors:t,props:a,showLabels:s}))}function zrt(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=r,m=Math.abs(r.minAngle),p=Mrt(o,l),x=Math.abs(p),g=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(D=>Ta(D,u,0)!==0).length,y=(x>=360?b:b-1)*g,_=x-b*m-y,S=n.reduce((D,E)=>{var C=Ta(E,u,0);return D+(sr(C)?C:0)},0),B;if(S>0){var I;B=n.map((D,E)=>{var C=Ta(D,u,0),N=Ta(D,d,E),P=Urt(r,s,D),O=(sr(C)?C:0)/S,F,M=hs(hs({},D),a&&a[E]&&a[E].props);E?F=I.endAngle+Li(p)*g*(C!==0?1:0):F=o;var Q=F+Li(p)*((C!==0?m:0)+O*_),J=(F+Q)/2,W=(P.innerRadius+P.outerRadius)/2,Z=[{name:N,value:C,payload:M,dataKey:u,type:f}],H=$n(P.cx,P.cy,W,J);return I=hs(hs(hs(hs({},r.presentationProps),{},{percent:O,cornerRadius:i,name:N,tooltipPayload:Z,midAngle:J,middleRadius:W,tooltipPosition:H},M),P),{},{value:Ta(D,u),startAngle:F,endAngle:Q,payload:M,paddingAngle:Li(p)*g}),I})}return B}function $rt(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,m=gR(t,"recharts-pie-"),p=r.current,[x,g]=T.useState(!0),b=T.useCallback(()=>{typeof f=="function"&&f(),g(!1)},[f]),y=T.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return T.createElement(xR,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:m},_=>{var S=[],B=n&&n[0],I=B.startAngle;return n.forEach((D,E)=>{var C=p&&p[E],N=E>0?O0(D,"paddingAngle",0):0;if(C){var P=Zg(C.endAngle-C.startAngle,D.endAngle-D.startAngle),O=hs(hs({},D),{},{startAngle:I+N,endAngle:I+P(_)+N});S.push(O),I=O.endAngle}else{var{endAngle:F,startAngle:M}=D,Q=Zg(0,F-M),J=Q(_),W=hs(hs({},D),{},{startAngle:I+N,endAngle:I+J+N});S.push(W),I=W.endAngle}}),r.current=S,T.createElement(es,null,T.createElement(Foe,{sectors:S,activeShape:l,inactiveShape:u,allOtherPieProps:t,showLabels:!x}))})}function Krt(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=T.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?T.createElement($rt,{props:e,previousSectorsRef:s}):T.createElement(Foe,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function Grt(e){var{hide:t,className:r,rootTabIndex:n}=e,a=An("recharts-pie",r);return t?null:T.createElement(es,{tabIndex:n,className:a},T.createElement(Krt,e))}var qrt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Op.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Wrt(e){var{id:t}=e,r=bR(e,krt),n=T.useMemo(()=>xw(e.children,kw),[e.children]),a=nr(s=>Ytt(s,t,n));return T.createElement(T.Fragment,null,T.createElement(pR,{fn:Prt,args:hs(hs({},e),{},{sectors:a})}),T.createElement(Grt,Lf({},r,{sectors:a})))}function Ooe(e){var t=bu(e,qrt),{id:r}=t,n=bR(t,Trt),a=zo(n);return T.createElement(vR,{id:r,type:"pie"},s=>T.createElement(T.Fragment,null,T.createElement(joe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),T.createElement(Drt,Lf({},n,{id:s})),T.createElement(Wrt,Lf({},n,{id:s})),n.children))}Ooe.displayName="Pie";var Xrt=at([vi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Yrt=at([Xrt,Kf,Gf],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Doe=()=>nr(Yrt),Jrt=()=>nr(UJe);function EG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EG(Object(r),!0).forEach(function(n){Zrt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zrt(e,t,r){return(t=ent(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ent(e){var t=tnt(e,"string");return typeof t=="symbol"?t:t+""}function tnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rnt=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=CG(CG({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Qn(a,!1)),sP(a)),o;return T.isValidElement(a)?o=T.cloneElement(a,i):typeof a=="function"?o=a(i):o=T.createElement(sR,i),T.createElement(es,{className:"recharts-active-dot"},o)};function nnt(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=nr(D0),i=Jrt();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return vs(o)?null:rnt({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function _G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_G(Object(r),!0).forEach(function(n){ant(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ant(e,t,r){return(t=snt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function snt(e){var t=int(e,"string");return typeof t=="symbol"?t:t+""}function int(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Poe=(e,t)=>Ix(e,"radiusAxis",t),ont=at([Poe],e=>{if(e!=null)return{scale:e}}),lnt=at([ww,Poe],(e,t)=>{if(!(e==null||t==null))return LS(LS({},e),{},{scale:t})}),cnt=(e,t,r,n)=>jx(e,"radiusAxis",t,n),Roe=(e,t,r)=>wx(e,r),Loe=(e,t,r)=>Ix(e,"angleAxis",r),unt=at([Roe,Loe],(e,t)=>{if(!(e==null||t==null))return LS(LS({},e),{},{scale:t})}),dnt=(e,t,r,n)=>jx(e,"angleAxis",r,n),Ant=at([Roe,Loe,Ex],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),fnt=(e,t,r,n,a)=>a,hnt=at([bn,lnt,cnt,unt,dnt],(e,t,r,n,a)=>z0(e,"radiusAxis")?Ty(t,r,!1):Ty(n,a,!1)),mnt=at([iR,fnt],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),pnt=at([ont,Ant,LN,mnt,hnt],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var l=s.slice(i,o+1);return _nt({radiusAxis:e,angleAxis:t,displayedData:l,dataKey:n,bandSize:a})}}),gnt=["id"];function vnt(e,t){if(e==null)return{};var r,n,a=xnt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xnt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SG(Object(r),!0).forEach(function(n){yR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yR(e,t,r){return(t=bnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bnt(e){var t=ynt(e,"string");return typeof t=="symbol"?t:t+""}function ynt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(null,arguments)}function wR(e,t){return e&&e!=="none"?e:t}var wnt=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:wR(n,a),value:xx(r,t),payload:e}]};function Ent(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:xx(s,t),hide:i,type:o,color:wR(r,a),unit:""}}}function Cnt(e,t){var r;return T.isValidElement(e)?r=T.cloneElement(e,t):typeof e=="function"?r=e(t):r=T.createElement(sR,Zv({},t,{className:An("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function _nt(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,l=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((m,p)=>{var x=Ta(m,r.dataKey,p),g=Ta(m,a),b=r.scale(x)+d,y=Array.isArray(g)?poe(g):g,_=vs(y)?void 0:t.scale(y);Array.isArray(g)&&g.length>=2&&(l=!0),u.push(el(el({},$n(i,o,_,b)),{},{name:x,value:g,cx:i,cy:o,radius:_,angle:b,payload:m}))});var f=[];return l&&u.forEach(m=>{if(Array.isArray(m.value)){var p=m.value[0],x=vs(p)?void 0:t.scale(p);f.push(el(el({},m),{},{radius:x},$n(i,o,x,m.angle)))}else f.push(m)}),{points:u,isRange:l,baseLinePoints:f}}function Snt(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=vnt(r,gnt),o=zo(i),l=Qn(n,!0),u=t.map((d,f)=>{var m=el(el(el({key:"dot-".concat(f),r:3},o),l),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return Cnt(n,m)});return T.createElement(es,{className:"recharts-radar-dots"},u)}function Uoe(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,l=f=>{var{onMouseEnter:m}=r;m&&m(r,f)},u=f=>{var{onMouseLeave:m}=r;m&&m(r,f)},d;return T.isValidElement(a)?d=T.cloneElement(a,el(el({},r),{},{points:t})):typeof a=="function"?d=a(el(el({},r),{},{points:t})):d=T.createElement(goe,Zv({},Qn(r,!0),{onMouseEnter:l,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),T.createElement(es,{className:"recharts-radar-polygon"},d,T.createElement(Snt,{props:r,points:t}),n&&g0.renderCallByParent(r,t))}function Nnt(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:l,onAnimationStart:u}=t,d=r.current,f=gR(t,"recharts-radar-"),[m,p]=T.useState(!0),x=T.useCallback(()=>{typeof l=="function"&&l(),p(!1)},[l]),g=T.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return T.createElement(xR,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:x,onAnimationStart:g},b=>{var y=d&&d.length/n.length,_=b===1?n:n.map((S,B)=>{var I=d&&d[Math.floor(B*y)];if(I){var D=Zg(I.x,S.x),E=Zg(I.y,S.y);return el(el({},S),{},{x:D(b),y:E(b)})}var C=Zg(S.cx,S.x),N=Zg(S.cy,S.y);return el(el({},S),{},{x:C(b),y:N(b)})});return b>0&&(r.current=_),T.createElement(Uoe,{points:_,props:t,showLabels:!m})})}function Bnt(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=T.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?T.createElement(Nnt,{props:e,previousPointsRef:a}):T.createElement(Uoe,{points:t,props:e,showLabels:!0})}var knt={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Op.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class Tnt extends T.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=An("recharts-radar",r);return T.createElement(T.Fragment,null,T.createElement(es,{className:a},T.createElement(Bnt,this.props)),T.createElement(nnt,{points:n,mainColor:wR(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function Int(e){var t=Rl(),r=nr(n=>pnt(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return T.createElement(Tnt,Zv({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class ER extends T.PureComponent{render(){return T.createElement(vR,{id:this.props.id,type:"radar"},t=>T.createElement(T.Fragment,null,T.createElement(joe,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),T.createElement(Toe,{legendPayload:wnt(this.props)}),T.createElement(pR,{fn:Ent,args:this.props}),T.createElement(Int,Zv({},this.props,{id:t}))))}}yR(ER,"displayName","Radar");yR(ER,"defaultProps",knt);var jnt="Invariant failed";function Fnt(e,t){throw new Error(jnt)}var Ont=["x","y"];function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TF.apply(null,arguments)}function NG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NG(Object(r),!0).forEach(function(n){Dnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dnt(e,t,r){return(t=Pnt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pnt(e){var t=Rnt(e,"string");return typeof t=="symbol"?t:t+""}function Rnt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lnt(e,t){if(e==null)return{};var r,n,a=Unt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Unt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Mnt(e,t){var{x:r,y:n}=e,a=Lnt(e,Ont),s="".concat(r),i=parseInt(s,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),m=parseInt(f,10);return H1(H1(H1(H1(H1({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function Moe(e){return T.createElement(Boe,TF({shapeType:"rectangle",propTransformer:Mnt,activeClassName:"recharts-active-bar"},e))}var Qnt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(sr(t))return t;var s=sr(n)||vs(n);return s?t(n,a):(s||Fnt(),r)}},Hnt={},Qoe=Ec({name:"errorBars",initialState:Hnt,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Not,removeErrorBar:Bot}=Qoe.actions,Vnt=Qoe.reducer,znt=["children"];function $nt(e,t){if(e==null)return{};var r,n,a=Knt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Knt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gnt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},qnt=T.createContext(Gnt);function Wnt(e){var{children:t}=e,r=$nt(e,znt);return T.createElement(qnt.Provider,{value:r},t)}function Hoe(e,t){var r,n,a=nr(u=>qf(u,e)),s=nr(u=>K0(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:ac.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:sc.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function Xnt(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Doe(),{needClipX:s,needClipY:i,needClip:o}=Hoe(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=a;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:s?l:l-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var Ynt=["onMouseEnter","onMouseLeave","onClick"],Jnt=["value","background","tooltipPosition"],Znt=["id"],eat=["onMouseEnter","onClick","onMouseLeave"];function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}function BG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BG(Object(r),!0).forEach(function(n){tat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tat(e,t,r){return(t=rat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rat(e){var t=nat(e,"string");return typeof t=="symbol"?t:t+""}function nat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function US(e,t){if(e==null)return{};var r,n,a=aat(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aat(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sat=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:xx(r,t),payload:e}]};function iat(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:xx(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function oat(e){var t=nr(D0),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:l}=s,u=US(s,Ynt),d=fR(i,n),f=hR(o),m=mR(l,n);if(!a||r==null)return null;var p=Qn(a,!1);return T.createElement(T.Fragment,null,r.map((x,g)=>{var{value:b,background:y,tooltipPosition:_}=x,S=US(x,Jnt);if(!y)return null;var B=d(x,g),I=f(x,g),D=m(x,g),E=Oo(Oo(Oo(Oo(Oo({option:a,isActive:String(g)===t},S),{},{fill:"#eee"},y),p),vx(u,x,g)),{},{onMouseEnter:B,onMouseLeave:I,onClick:D,dataKey:n,index:g,className:"recharts-bar-background-rectangle"});return T.createElement(Moe,ex({key:"background-bar-".concat(g)},E))}))}function Voe(e){var{data:t,props:r,showLabels:n}=e,a=zo(r),{id:s}=a,i=US(a,Znt),{shape:o,dataKey:l,activeBar:u}=r,d=nr(D0),f=nr(eoe),{onMouseEnter:m,onClick:p,onMouseLeave:x}=r,g=US(r,eat),b=fR(m,l),y=hR(x),_=mR(p,l);return t?T.createElement(T.Fragment,null,t.map((S,B)=>{var I=u&&String(B)===d&&(f==null||l===f),D=I?u:o,E=Oo(Oo(Oo({},i),S),{},{isActive:I,option:D,index:B,dataKey:l});return T.createElement(es,ex({className:"recharts-bar-rectangle"},vx(g,S,B),{onMouseEnter:b(S,B),onMouseLeave:y(S,B),onClick:_(S,B),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(B)}),T.createElement(Moe,E))}),n&&g0.renderCallByParent(r,t)):null}function lat(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,m=gR(t,"recharts-bar-"),[p,x]=T.useState(!1),g=T.useCallback(()=>{typeof u=="function"&&u(),x(!1)},[u]),b=T.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return T.createElement(xR,{begin:i,duration:o,isActive:s,easing:l,onAnimationEnd:g,onAnimationStart:b,key:m},y=>{var _=y===1?n:n==null?void 0:n.map((S,B)=>{var I=f&&f[B];if(I)return Oo(Oo({},S),{},{x:Og(I.x,S.x,y),y:Og(I.y,S.y,y),width:Og(I.width,S.width,y),height:Og(I.height,S.height,y)});if(a==="horizontal"){var D=Og(0,S.height,y);return Oo(Oo({},S),{},{y:S.y+S.height-D,height:D})}var E=Og(0,S.width,y);return Oo(Oo({},S),{},{width:E})});return y>0&&(r.current=_??null),_==null?null:T.createElement(es,null,T.createElement(Voe,{props:t,data:_,showLabels:!p}))})}function cat(e){var{data:t,isAnimationActive:r}=e,n=T.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?T.createElement(lat,{previousRectanglesRef:n,props:e}):T.createElement(Voe,{props:e,data:t,showLabels:!0})}var zoe=0,uat=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ta(e,t)}};class dat extends T.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:l,id:u}=this.props;if(t)return null;var d=An("recharts-bar",a),f=u;return T.createElement(es,{className:d,id:u},o&&T.createElement("defs",null,T.createElement(Xnt,{clipPathId:f,xAxisId:s,yAxisId:i})),T.createElement(es,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},T.createElement(oat,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),T.createElement(cat,this.props)),this.props.children)}}var Aat={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Op.isSsr,legendType:"rect",minPointSize:zoe,xAxisId:0,yAxisId:0};function fat(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Hoe(t,r),m=yP(),p=Rl(),x=xw(e.children,kw),g=nr(_=>Mat(_,t,r,p,e.id,x));if(m!=="vertical"&&m!=="horizontal")return null;var b,y=g==null?void 0:g[0];return y==null||y.height==null||y.width==null?b=0:b=m==="vertical"?y.height/2:y.width/2,T.createElement(Wnt,{xAxisId:t,yAxisId:r,data:g,dataPointFormatter:uat,errorBarOffset:b},T.createElement(dat,ex({},e,{layout:m,needClip:f,data:g,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function hat(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:m,cells:p}=e,x=t==="horizontal"?o:i,g=d?x.scale.domain():null,b=rWe({numericAxis:x});return f.map((y,_)=>{var S,B,I,D,E,C;d?S=Xqe(d[_],g):(S=Ta(y,r),Array.isArray(S)||(S=[b,S]));var N=Qnt(n,zoe)(S[1],_);if(t==="horizontal"){var P,[O,F]=[o.scale(S[0]),o.scale(S[1])];B=R$({axis:i,ticks:l,bandSize:s,offset:a.offset,entry:y,index:_}),I=(P=F??O)!==null&&P!==void 0?P:void 0,D=a.size;var M=O-F;if(E=xc(M)?0:M,C={x:B,y:m.top,width:D,height:m.height},Math.abs(N)>0&&Math.abs(E)<Math.abs(N)){var Q=Li(E||N)*(Math.abs(N)-Math.abs(E));I-=Q,E+=Q}}else{var[J,W]=[i.scale(S[0]),i.scale(S[1])];if(B=J,I=R$({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:_}),D=W-J,E=a.size,C={x:m.left,y:I,width:m.width,height:E},Math.abs(N)>0&&Math.abs(D)<Math.abs(N)){var Z=Li(D||N)*(Math.abs(N)-Math.abs(D));D+=Z}}if(B==null||I==null||D==null||E==null)return null;var H=Oo(Oo({},y),{},{x:B,y:I,width:D,height:E,value:d?S:S[1],payload:y,background:C,tooltipPosition:{x:B+D/2,y:I+E/2}},p&&p[_]&&p[_].props);return H}).filter(Boolean)}function IF(e){var t=bu(e,Aat),r=Rl();return T.createElement(vR,{id:t.id,type:"bar"},n=>T.createElement(T.Fragment,null,T.createElement(frt,{legendPayload:sat(t)}),T.createElement(pR,{fn:iat,args:t}),T.createElement(_rt,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:tWe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(fat,ex({},t,{id:n}))))}IF.displayName="Bar";function kG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kG(Object(r),!0).forEach(function(n){mat(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mat(e,t,r){return(t=pat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pat(e){var t=gat(e,"string");return typeof t=="symbol"?t:t+""}function gat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vat=(e,t)=>t,xat=(e,t,r)=>r,bat=(e,t,r,n)=>n,yat=(e,t,r,n,a)=>a,Tw=at([FP,yat],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),wat=at([Tw],e=>e==null?void 0:e.maxBarSize),Eat=(e,t,r,n,a,s)=>s,TG=(e,t,r)=>{var n=r??e;if(!vs(n))return sl(n,t,0)},Cat=at([bn,FP,vat,xat,bat],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),_at=(e,t,r,n)=>{var a=bn(e);return a==="horizontal"?EF(e,"yAxis",r,n):EF(e,"xAxis",t,n)},Sat=(e,t,r)=>{var n=bn(e);return n==="horizontal"?vK(e,"xAxis",t):vK(e,"yAxis",r)},Nat=(e,t,r)=>{var n={},a=e.filter(HN),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,m=f.map(x=>x.dataKey),p=TG(t,r,f[0].barSize);return{stackId:d,dataKeys:m,barSize:p}}),l=s.map(u=>{var d=[u.dataKey].filter(m=>m!=null),f=TG(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},Bat=at([Cat,XXe,Sat],Nat),kat=(e,t,r,n,a)=>{var s,i,o=Tw(e,t,r,n,a);if(o!=null){var l=bn(e),u=tie(e),{maxBarSize:d}=o,f=vs(d)?u:d,m,p;return l==="horizontal"?(m=Yv(e,"xAxis",t,n),p=Xv(e,"xAxis",t,n)):(m=Yv(e,"yAxis",r,n),p=Xv(e,"yAxis",r,n)),(s=(i=Ty(m,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},$oe=(e,t,r,n)=>{var a=bn(e),s,i;return a==="horizontal"?(s=Yv(e,"xAxis",t,n),i=Xv(e,"xAxis",t,n)):(s=Yv(e,"yAxis",r,n),i=Xv(e,"yAxis",r,n)),Ty(s,i)};function Tat(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=sl(e,r,0,!0),o,l=[];if(wc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,_)=>y+(_.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var m=(r-f)/2>>0,p={offset:m-i,size:0};o=n.reduce((y,_)=>{var S,B={stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(S=_.barSize)!==null&&S!==void 0?S:0}},I=[...y,B];return p=I[I.length-1].position,I},l)}else{var x=sl(t,r,0,!0);r-2*x-(s-1)*i<=0&&(i=0);var g=(r-2*x-(s-1)*i)/s;g>1&&(g>>=0);var b=wc(a)?Math.min(g,a):g;o=n.reduce((y,_,S)=>[...y,{stackId:_.stackId,dataKeys:_.dataKeys,position:{offset:x+(g+i)*S+(g-b)/2,size:b}}],l)}return o}}var Iat=(e,t,r,n,a,s,i)=>{var o=vs(i)?t:i,l=Tat(r,n,a!==s?a:s,e,o);return a!==s&&l!=null&&(l=l.map(u=>rC(rC({},u),{},{position:rC(rC({},u.position),{},{offset:u.position.offset-a/2})}))),l},jat=at([Bat,tie,WXe,rie,kat,$oe,wat],Iat),Fat=(e,t,r,n)=>Yv(e,"xAxis",t,n),Oat=(e,t,r,n)=>Yv(e,"yAxis",r,n),Dat=(e,t,r,n)=>Xv(e,"xAxis",t,n),Pat=(e,t,r,n)=>Xv(e,"yAxis",r,n),Rat=at([jat,Tw],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Lat=(e,t)=>{var r=TP(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},Uat=at([_at,Tw],Lat),Mat=at([vi,Fat,Oat,Dat,Pat,Rat,bn,EP,$oe,Uat,Tw,Eat],(e,t,r,n,a,s,i,o,l,u,d,f)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:x}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||l==null)){var{data:g}=d,b;if(g!=null&&g.length>0?b=g:b=m==null?void 0:m.slice(p,x+1),b!=null)return hat({layout:i,barSettings:d,pos:s,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Koe=e=>{var{chartData:t}=e,r=ts(),n=Rl();return T.useEffect(()=>n?()=>{}:(r(BK(t)),()=>{r(BK(void 0))}),[t,r,n]),null},IG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Goe=Ec({name:"brush",initialState:IG,reducers:{setBrushSettings(e,t){return t.payload==null?IG:t.payload}}}),{setBrushSettings:kot}=Goe.actions,Qat=Goe.reducer;function Hat(e,t,r){return(t=Vat(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vat(e){var t=zat(e,"string");return typeof t=="symbol"?t:t+""}function zat(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class CR{static create(t){return new CR(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Hat(CR,"EPS",1e-4);function $at(e){return(e%180+180)%180}var Kat=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=$at(a),i=s*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},Gat={dots:[],areas:[],lines:[]},qoe=Ec({name:"referenceElements",initialState:Gat,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=bf(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=bf(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=bf(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Tot,removeDot:Iot,addArea:jot,removeArea:Fot,addLine:Oot,removeLine:Dot}=qoe.actions,qat=qoe.reducer,Wat=T.createContext(void 0),Xat=e=>{var{children:t}=e,[r]=T.useState("".concat(Ny("recharts"),"-clip")),n=Doe();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return T.createElement(Wat.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function P3(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Woe(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Yat(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Kat(n,r)}function Jat(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function MS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function Zat(e,t){return Woe(e,t+1)}function est(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var x=n==null?void 0:n[l];if(x===void 0)return{v:Woe(n,u)};var g=l,b,y=()=>(b===void 0&&(b=r(x,g)),b),_=x.coordinate,S=l===0||MS(e,_,y,d,o);S||(l=0,d=i,u+=1),S&&(d=_+e*(y()/2+a),l+=u)},m;u<=s.length;)if(m=f(),m)return m.v;return[]}function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){tst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tst(e,t,r){return(t=rst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rst(e){var t=nst(e,"string");return typeof t=="symbol"?t:t+""}function nst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ast(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:l}=t,u=function(m){var p=s[m],x,g=()=>(x===void 0&&(x=r(p,m)),x);if(m===i-1){var b=e*(p.coordinate+e*g()/2-l);s[m]=p=No(No({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[m]=p=No(No({},p),{},{tickCoord:p.coordinate});var y=MS(e,p.tickCoord,g,o,l);y&&(l=p.tickCoord-e*(g()/2+a),s[m]=No(No({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function sst(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),m=e*(d.coordinate+e*f/2-u);i[o-1]=d=No(No({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=MS(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=No(No({},d),{},{isShow:!0}))}for(var x=s?o-1:o,g=function(_){var S=i[_],B,I=()=>(B===void 0&&(B=r(S,_)),B);if(_===0){var D=e*(S.coordinate-e*I()/2-l);i[_]=S=No(No({},S),{},{tickCoord:D<0?S.coordinate-D*e:S.coordinate})}else i[_]=S=No(No({},S),{},{tickCoord:S.coordinate});var E=MS(e,S.tickCoord,I,l,u);E&&(l=S.tickCoord+e*(I()/2+a),i[_]=No(No({},S),{},{isShow:!0}))},b=0;b<x;b++)g(b);return i}function _R(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(sr(l)||Op.isSsr){var m;return(m=Zat(a,sr(l)?l:0))!==null&&m!==void 0?m:[]}var p=[],x=o==="top"||o==="bottom"?"width":"height",g=d&&x==="width"?Lb(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(S,B)=>{var I=typeof u=="function"?u(S.value,B):S.value;return x==="width"?Yat(Lb(I,{fontSize:t,letterSpacing:r}),g,f):Lb(I,{fontSize:t,letterSpacing:r})[x]},y=a.length>=2?Li(a[1].coordinate-a[0].coordinate):1,_=Jat(s,y,x);return l==="equidistantPreserveStart"?est(y,_,b,a,i):(l==="preserveStart"||l==="preserveStartEnd"?p=sst(y,_,b,a,i,l==="preserveStartEnd"):p=ast(y,_,b,a,i),p.filter(S=>S.isShow))}var ist=["viewBox"],ost=["viewBox"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function FG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FG(Object(r),!0).forEach(function(n){SR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OG(e,t){if(e==null)return{};var r,n,a=lst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SR(e,t,r){return(t=cst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cst(e){var t=ust(e,"string");return typeof t=="symbol"?t:t+""}function ust(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class q0 extends T.Component{constructor(t){super(t),this.tickRefs=T.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=OG(t,ist),s=this.props,{viewBox:i}=s,o=OG(s,ost);return!P3(n,i)||!P3(a,o)||!P3(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:l,tickMargin:u}=this.props,d,f,m,p,x,g,b=l?-1:1,y=t.tickSize||o,_=sr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!l*s,m=p-b*y,g=m-b*u,x=_;break;case"left":m=p=t.coordinate,f=r+ +!l*a,d=f-b*y,x=d-b*u,g=_;break;case"right":m=p=t.coordinate,f=r+ +l*a,d=f+b*y,x=d+b*u,g=_;break;default:d=f=t.coordinate,p=n+ +l*s,m=p+b*y,g=m+b*u,x=_;break}return{line:{x1:d,y1:m,x2:f,y2:p},tick:{x,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,l=Ai(Ai(Ai({},Qn(this.props,!1)),Qn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);l=Ai(Ai({},l),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);l=Ai(Ai({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return T.createElement("line",rv({},l,{className:An("recharts-cartesian-axis-line",O0(o,"className"))}))}static renderTickItem(t,r,n){var a,s=An(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,Ai(Ai({},r),{},{className:s}));else if(typeof t=="function")a=t(Ai(Ai({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=An(i,t.className)),a=T.createElement(Tx,rv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:l,padding:u}=this.props,d=_R(Ai(Ai({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),p=zo(this.props),x=Qn(i,!1),g=Ai(Ai({},p),{},{fill:"none"},Qn(a,!1)),b=d.map((y,_)=>{var{line:S,tick:B}=this.getTickLineCoord(y),I=Ai(Ai(Ai(Ai({textAnchor:f,verticalAnchor:m},p),{},{stroke:"none",fill:s},x),B),{},{index:_,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return T.createElement(es,rv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},vx(this.props,y,_)),a&&T.createElement("line",rv({},g,S,{className:An("recharts-cartesian-axis-tick-line",O0(a,"className"))})),i&&q0.renderTickItem(i,I,"".concat(typeof o=="function"?o(y.value,_):y.value).concat(l||"")))});return b.length>0?T.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:T.createElement(es,{className:An("recharts-cartesian-axis",a),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Bl.renderCallByParent(this.props))}}SR(q0,"displayName","CartesianAxis");SR(q0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dst=["x1","y1","x2","y2","key"],Ast=["offset"],fst=["xAxisId","yAxisId"],hst=["xAxisId","yAxisId"];function DG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Do(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DG(Object(r),!0).forEach(function(n){mst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mst(e,t,r){return(t=pst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pst(e){var t=gst(e,"string");return typeof t=="symbol"?t:t+""}function gst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(null,arguments)}function QS(e,t){if(e==null)return{};var r,n,a=vst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xst=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return T.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xoe(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,l=QS(t,dst),u=zo(l),{offset:d}=u,f=QS(u,Ast);r=T.createElement("line",Um({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function bst(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=QS(e,fst),l=a.map((u,d)=>{var f=Do(Do({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xoe(n,f)});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function yst(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=QS(e,hst),l=a.map((u,d)=>{var f=Do(Do({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xoe(n,f)});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function wst(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var p=!u[m+1],x=p?a+i-f:u[m+1]-f;if(x<=0)return null;var g=m%t.length;return T.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:x,width:s,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Est(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var p=!u[m+1],x=p?a+i-f:u[m+1]-f;if(x<=0)return null;var g=m%r.length;return T.createElement("rect",{key:"react-".concat(m),x:f,y:s,width:x,height:o,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Cst=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return pse(_R(Do(Do(Do({},q0.defaultProps),r),{},{ticks:gse(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},_st=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return pse(_R(Do(Do(Do({},q0.defaultProps),r),{},{ticks:gse(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Sst={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function jF(e){var t=Ese(),r=Cse(),n=wse(),a=Do(Do({},bu(e,Sst)),{},{x:sr(e.x)?e.x:n.left,y:sr(e.y)?e.y:n.top,width:sr(e.width)?e.width:n.width,height:sr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:p}=a,x=Rl(),g=nr(N=>xK(N,"xAxis",s,x)),b=nr(N=>xK(N,"yAxis",i,x));if(!sr(u)||u<=0||!sr(d)||d<=0||!sr(o)||o!==+o||!sr(l)||l!==+l)return null;var y=a.verticalCoordinatesGenerator||Cst,_=a.horizontalCoordinatesGenerator||_st,{horizontalPoints:S,verticalPoints:B}=a;if((!S||!S.length)&&typeof _=="function"){var I=m&&m.length,D=_({yAxis:b?Do(Do({},b),{},{ticks:I?m:b.ticks}):void 0,width:t,height:r,offset:n},I?!0:f);Rb(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(S=D)}if((!B||!B.length)&&typeof y=="function"){var E=p&&p.length,C=y({xAxis:g?Do(Do({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);Rb(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(B=C)}return T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(xst,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),T.createElement(wst,Um({},a,{horizontalPoints:S})),T.createElement(Est,Um({},a,{verticalPoints:B})),T.createElement(bst,Um({},a,{offset:n,horizontalPoints:S,xAxis:g,yAxis:b})),T.createElement(yst,Um({},a,{offset:n,verticalPoints:B,xAxis:g,yAxis:b})))}jF.displayName="CartesianGrid";function PG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PG(Object(r),!0).forEach(function(n){Nst(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nst(e,t,r){return(t=Bst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bst(e){var t=kst(e,"string");return typeof t=="symbol"?t:t+""}function kst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tst={xAxis:{},yAxis:{},zAxis:{}},Yoe=Ec({name:"cartesianAxis",initialState:Tst,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=RG(RG({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Ist,removeXAxis:jst,addYAxis:Fst,removeYAxis:Ost,addZAxis:Pot,removeZAxis:Rot,updateYAxisWidth:Dst}=Yoe.actions,Pst=Yoe.reducer,Rst=["children"],Lst=["dangerouslySetInnerHTML","ticks"];function Joe(e,t,r){return(t=Ust(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ust(e){var t=Mst(e,"string");return typeof t=="symbol"?t:t+""}function Mst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FF(){return FF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FF.apply(null,arguments)}function Zoe(e,t){if(e==null)return{};var r,n,a=Qst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hst(e){var t=ts(),r=T.useMemo(()=>{var{children:s}=e,i=Zoe(e,Rst);return i},[e]),n=nr(s=>qf(s,r.id)),a=r===n;return T.useEffect(()=>(t(Ist(r)),()=>{t(jst(r))}),[r,t]),a?e.children:null}var Vst=e=>{var{xAxisId:t,className:r}=e,n=nr(yse),a=Rl(),s="xAxis",i=nr(p=>Nx(p,s,t,a)),o=nr(p=>Oie(p,s,t,a)),l=nr(p=>Tie(p,t)),u=nr(p=>HYe(p,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,m=Zoe(e,Lst);return T.createElement(q0,FF({},m,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:An("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},zst=e=>{var t,r,n,a,s;return T.createElement(Hst,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},T.createElement(Vst,e))};class HS extends T.Component{render(){return T.createElement(zst,this.props)}}Joe(HS,"displayName","XAxis");Joe(HS,"defaultProps",{allowDataOverflow:ac.allowDataOverflow,allowDecimals:ac.allowDecimals,allowDuplicatedCategory:ac.allowDuplicatedCategory,height:ac.height,hide:!1,mirror:ac.mirror,orientation:ac.orientation,padding:ac.padding,reversed:ac.reversed,scale:ac.scale,tickCount:ac.tickCount,type:ac.type,xAxisId:0});var $st=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=a+s,u=i+l+o+(r?n:0);return Math.round(u)}return 0},Kst=["dangerouslySetInnerHTML","ticks"];function ele(e,t,r){return(t=Gst(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gst(e){var t=qst(e,"string");return typeof t=="symbol"?t:t+""}function qst(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OF.apply(null,arguments)}function Wst(e,t){if(e==null)return{};var r,n,a=Xst(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xst(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Yst(e){var t=ts();return T.useEffect(()=>(t(Fst(e)),()=>{t(Ost(e))}),[e,t]),null}var Jst=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=T.useRef(null),o=T.useRef(null),l=nr(yse),u=Rl(),d=ts(),f="yAxis",m=nr(S=>Nx(S,f,r,u)),p=nr(S=>Iie(S,r)),x=nr(S=>VYe(S,r)),g=nr(S=>Oie(S,f,r,u));if(T.useLayoutEffect(()=>{var S;if(!(a!=="auto"||!p||aR(s)||T.isValidElement(s))){var B=i.current,I=B==null||(S=B.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:D,tickMargin:E}=B.props,C=$st({ticks:I,label:o.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(p.width)!==Math.round(C)&&d(Dst({id:r,width:C}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||x==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,_=Wst(e,Kst);return T.createElement(q0,OF({},_,{ref:i,labelRef:o,scale:m,x:x.x,y:x.y,width:p.width,height:p.height,className:An("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:g}))},Zst=e=>{var t,r,n,a,s;return T.createElement(T.Fragment,null,T.createElement(Yst,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),T.createElement(Jst,e))},eit={allowDataOverflow:sc.allowDataOverflow,allowDecimals:sc.allowDecimals,allowDuplicatedCategory:sc.allowDuplicatedCategory,hide:!1,mirror:sc.mirror,orientation:sc.orientation,padding:sc.padding,reversed:sc.reversed,scale:sc.scale,tickCount:sc.tickCount,type:sc.type,width:sc.width,yAxisId:0};class VS extends T.Component{render(){return T.createElement(Zst,this.props)}}ele(VS,"displayName","YAxis");ele(VS,"defaultProps",eit);var R3={exports:{}},L3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LG;function tit(){if(LG)return L3;LG=1;var e=tx();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return L3.useSyncExternalStoreWithSelector=function(l,u,d,f,m){var p=a(null);if(p.current===null){var x={hasValue:!1,value:null};p.current=x}else x=p.current;p=i(function(){function b(I){if(!y){if(y=!0,_=I,I=f(I),m!==void 0&&x.hasValue){var D=x.value;if(m(D,I))return S=D}return S=I}if(D=S,r(_,I))return D;var E=f(I);return m!==void 0&&m(D,E)?(_=I,D):(_=I,S=E)}var y=!1,_,S,B=d===void 0?null:d;return[function(){return b(u())},B===null?void 0:function(){return b(B())}]},[u,d,f,m]);var g=n(l,p[0],p[1]);return s(function(){x.hasValue=!0,x.value=g},[g]),o(g),g},L3}var UG;function rit(){return UG||(UG=1,R3.exports=tit()),R3.exports}rit();function nit(e){e()}function ait(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nit(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var MG={notify(){},get:()=>[]};function sit(e,t){let r,n=MG,a=0,s=!1;function i(g){d();const b=n.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(l),n=ait())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=MG)}function m(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return x}var iit=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oit=iit(),lit=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cit=lit(),uit=()=>oit||cit?T.useLayoutEffect:T.useEffect,dit=uit(),U3=Symbol.for("react-redux-context"),M3=typeof globalThis<"u"?globalThis:{};function Ait(){if(!T.createContext)return{};const e=M3[U3]??(M3[U3]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var fit=Ait();function hit(e){const{children:t,context:r,serverState:n,store:a}=e,s=T.useMemo(()=>{const l=sit(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),i=T.useMemo(()=>a.getState(),[a]);dit(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,i]);const o=r||fit;return T.createElement(o.Provider,{value:s},t)}var mit=hit,pit=(e,t)=>t,NR=at([pit,bn,Ex,xi,Xie,Wf,KJe,vi],YJe),BR=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},tle=pu("mouseClick"),rle=bw();rle.startListening({actionCreator:tle,effect:(e,t)=>{var r=e.payload,n=NR(t.getState(),BR(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(eJe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var DF=pu("mouseMove"),nle=bw();nle.startListening({actionCreator:DF,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=qP(n,n.tooltip.settings.shared),s=NR(n,BR(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Vie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Hie()))}});function git(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var QG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ale=Ec({name:"rootProps",initialState:QG,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:QG.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),vit=ale.reducer,{updateOptions:xit}=ale.actions,sle=Ec({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:bit}=sle.actions,yit=sle.reducer,ile=pu("keyDown"),ole=pu("focus"),kR=bw();kR.startListening({actionCreator:ile,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(WP(a,kx(r))),o=Wf(r);if(s==="Enter"){var l=OS(r,"axis","hover",String(a.index));t.dispatch(_F({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=$Ye(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,m=i+f*d;if(!(o==null||m>=o.length||m<0)){var p=OS(r,"axis","hover",String(m));t.dispatch(_F({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});kR.startListening({actionCreator:ole,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=OS(r,"axis","hover",String(s));t.dispatch(_F({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var eu=pu("externalEvent"),lle=bw();lle.startListening({actionCreator:eu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:PJe(r),activeDataKey:eoe(r),activeIndex:D0(r),activeLabel:Zie(r),activeTooltipIndex:D0(r),isTooltipActive:RJe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var wit=at([Bx],e=>e.tooltipItemPayloads),Eit=at([wit,Nw,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),cle=pu("touchMove"),ule=bw();ule.startListening({actionCreator:cle,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=qP(n,n.tooltip.settings.shared);if(a==="axis"){var s=NR(n,BR({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Vie({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(xse),d=(i=l.getAttribute(bse))!==null&&i!==void 0?i:void 0,f=Eit(t.getState(),u,d);t.dispatch(Qie({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var Cit=zae({brush:Qat,cartesianAxis:Pst,chartData:fZe,errorBars:Vnt,graphicalItems:Crt,layout:Oqe,legend:vWe,options:lZe,polarAxis:vtt,polarOptions:yit,referenceElements:qat,rootProps:vit,tooltip:tJe}),_it=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return sqe({reducer:Cit,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([rle.middleware,nle.middleware,kR.middleware,lle.middleware,ule.middleware]),devTools:{serialize:{replacer:git},name:"recharts-".concat(r)}})};function dle(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Rl(),s=T.useRef(null);if(a)return r;s.current==null&&(s.current=_it(t,n));var i=AP;return T.createElement(mit,{context:i,store:s.current},r)}function Ale(e){var{layout:t,width:r,height:n,margin:a}=e,s=ts(),i=Rl();return T.useEffect(()=>{i||(s(Iqe(t)),s(jqe({width:r,height:n})),s(Tqe(a)))},[s,i,t,r,n,a]),null}function fle(e){var t=ts();return T.useEffect(()=>{t(xit(e))},[t,e]),null}var Sit=["children"];function Nit(e,t){if(e==null)return{};var r,n,a=Bit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zS.apply(null,arguments)}var kit={width:"100%",height:"100%"},Tit=T.forwardRef((e,t)=>{var r=Ese(),n=Cse(),a=Bse();if(!qv(r)||!qv(n))return null;var{children:s,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,T.createElement(Iae,zS({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:kit,ref:t}),s)}),Iit=e=>{var{children:t}=e,r=nr(RN);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return T.createElement(Iae,{width:n,height:a,x:i,y:s},t)},HG=T.forwardRef((e,t)=>{var{children:r}=e,n=Nit(e,Sit),a=Rl();return a?T.createElement(Iit,null,r):T.createElement(Tit,zS({ref:t},n),r)});function jit(){var e=ts(),[t,r]=T.useState(null),n=nr(cWe);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;wc(s)&&s!==n&&e(Fqe(s))}},[t,e,n]),r}function VG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fit(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VG(Object(r),!0).forEach(function(n){Oit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oit(e,t,r){return(t=Dit(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dit(e){var t=Pit(e,"string");return typeof t=="symbol"?t:t+""}function Pit(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rit=T.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:p,onTouchMove:x,onTouchStart:g,style:b,width:y}=e,_=ts(),[S,B]=T.useState(null),[I,D]=T.useState(null);pZe();var E=jit(),C=T.useCallback(R=>{E(R),typeof t=="function"&&t(R),B(R),D(R)},[E,t,B,D]),N=T.useCallback(R=>{_(tle(R)),_(eu({handler:s,reactEvent:R}))},[_,s]),P=T.useCallback(R=>{_(DF(R)),_(eu({handler:u,reactEvent:R}))},[_,u]),O=T.useCallback(R=>{_(Hie()),_(eu({handler:d,reactEvent:R}))},[_,d]),F=T.useCallback(R=>{_(DF(R)),_(eu({handler:f,reactEvent:R}))},[_,f]),M=T.useCallback(()=>{_(ole())},[_]),Q=T.useCallback(R=>{_(ile(R.key))},[_]),J=T.useCallback(R=>{_(eu({handler:i,reactEvent:R}))},[_,i]),W=T.useCallback(R=>{_(eu({handler:o,reactEvent:R}))},[_,o]),Z=T.useCallback(R=>{_(eu({handler:l,reactEvent:R}))},[_,l]),H=T.useCallback(R=>{_(eu({handler:m,reactEvent:R}))},[_,m]),z=T.useCallback(R=>{_(eu({handler:g,reactEvent:R}))},[_,g]),G=T.useCallback(R=>{_(cle(R)),_(eu({handler:x,reactEvent:R}))},[_,x]),ne=T.useCallback(R=>{_(eu({handler:p,reactEvent:R}))},[_,p]);return T.createElement(ioe.Provider,{value:S},T.createElement(MKe.Provider,{value:I},T.createElement("div",{className:An("recharts-wrapper",n),style:Fit({position:"relative",cursor:"default",width:y,height:a},b),onClick:N,onContextMenu:J,onDoubleClick:W,onFocus:M,onKeyDown:Q,onMouseDown:Z,onMouseEnter:P,onMouseLeave:O,onMouseMove:F,onMouseUp:H,onTouchEnd:ne,onTouchMove:G,onTouchStart:z,ref:C},r)))}),Lit=["children","className","width","height","style","compact","title","desc"];function Uit(e,t){if(e==null)return{};var r,n,a=Mit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hle=T.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:l,desc:u}=e,d=Uit(e,Lit),f=zo(d);return o?T.createElement(HG,{otherAttributes:f,title:l,desc:u},r):T.createElement(Rit,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(HG,{otherAttributes:f,title:l,desc:u,ref:t},T.createElement(Xat,null,r)))}),Qit=["width","height"];function PF(){return PF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PF.apply(null,arguments)}function Hit(e,t){if(e==null)return{};var r,n,a=Vit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zit={top:5,right:5,bottom:5,left:5},$it={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:zit,reverseStackOrder:!1,syncMethod:"index"},Kit=T.forwardRef(function(t,r){var n,a=bu(t.categoricalChartProps,$it),{width:s,height:i}=a,o=Hit(a,Qit);if(!qv(s)||!qv(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(dle,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:l},T.createElement(Koe,{chartData:m.data}),T.createElement(Ale,{width:s,height:i,layout:a.layout,margin:a.margin}),T.createElement(fle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(hle,PF({},o,{width:s,height:i,ref:r})))}),Git=["axis","item"],zG=T.forwardRef((e,t)=>T.createElement(Kit,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Git,tooltipPayloadSearcher:nR,categoricalChartProps:e,ref:t}));function qit(e){var t=ts();return T.useEffect(()=>{t(bit(e))},[t,e]),null}var Wit=["width","height","layout"];function RF(){return RF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RF.apply(null,arguments)}function Xit(e,t){if(e==null)return{};var r,n,a=Yit(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Yit(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Jit={top:5,right:5,bottom:5,left:5},Zit={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Jit,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mle=T.forwardRef(function(t,r){var n,a=bu(t.categoricalChartProps,Zit),{width:s,height:i,layout:o}=a,l=Xit(a,Wit);if(!qv(s)||!qv(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return T.createElement(dle,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},T.createElement(Koe,{chartData:a.data}),T.createElement(Ale,{width:s,height:i,layout:o,margin:a.margin}),T.createElement(fle,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(qit,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),T.createElement(hle,RF({width:s,height:i},l,{ref:r})))}),eot=["item"],tot={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},rot=T.forwardRef((e,t)=>{var r=bu(e,tot);return T.createElement(mle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:eot,tooltipPayloadSearcher:nR,categoricalChartProps:r,ref:t})}),not=["axis"],aot={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},sot=T.forwardRef((e,t)=>{var r=bu(e,aot);return T.createElement(mle,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:not,tooltipPayloadSearcher:nR,categoricalChartProps:r,ref:t})});const iot=e=>{const[t,r]=T.useState(!1),[n,a]=T.useState(null);return T.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},ple=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],oot=["Mecnica Industrial","Mecnica Automotriz"],lot=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:ple.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),$G=({empresas:e,isLoaded:t,route:r})=>{const n=T.useRef(null),a=T.useRef(null),s=T.useRef([]),i=T.useRef(null),o=e.filter(l=>{var u,d;return((u=l.coordenadas)==null?void 0:u.lat)&&((d=l.coordenadas)==null?void 0:d.lng)});return T.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(l=>l.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(l=>{const u=new window.google.maps.Marker({position:{lat:l.coordenadas.lat,lng:l.coordenadas.lng},map:a.current,title:l.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${l.nombre}</div><div>${l.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),c.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[c.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:c.jsx("div",{className:"text-center p-6",children:c.jsx("p",{className:"text-gray-600 text-lg",children:" No hay empresas geo-localizadas"})})})]})},cot=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,m)=>{var p;return f+(((p=m.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,l=s+o,u=e.routes[0].legs.reduce((f,m)=>{var p;return f+(((p=m.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return c.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[c.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),c.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,m)=>{var p,x,g;return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",m+1,": ",f.start_address.split(",")[0],"  ",f.end_address.split(",")[0]]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text,"  ",(x=f.distance)==null?void 0:x.text]})]}),t==="TRANSIT"&&c.jsx("div",{className:"space-y-3",children:(g=f.steps)==null?void 0:g.map((b,y)=>b.transit&&c.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[c.jsx("span",{className:"text-lg",children:""}),c.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},m)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[c.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),c.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),c.jsxs("p",{className:"text-lg",children:["Duracin Total Estimada: ",Math.round(l/60)," min"]}),c.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&c.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},KG=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,uot=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),c.jsx(tC,{width:"100%",height:300,children:c.jsxs(rot,{children:[c.jsx(Ooe,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>c.jsx(kw,{fill:t[n%t.length]},`cell-${n}`))}),c.jsx(eC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),c.jsx(tC,{width:"100%",height:300,children:c.jsxs(zG,{data:e.porSupervisor,layout:"vertical",children:[c.jsx(jF,{strokeDasharray:"3 3"}),c.jsx(HS,{type:"number"}),c.jsx(VS,{type:"category",dataKey:"name",width:150}),c.jsx(eC,{}),c.jsx(IF,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),c.jsx(tC,{width:"100%",height:300,children:c.jsxs(zG,{data:e.porComuna,children:[c.jsx(jF,{strokeDasharray:"3 3"}),c.jsx(HS,{dataKey:"name"}),c.jsx(VS,{}),c.jsx(eC,{}),c.jsx(IF,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),c.jsx(tC,{width:"100%",height:300,children:c.jsxs(sot,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[c.jsx(woe,{}),c.jsx(JN,{dataKey:"subject"}),c.jsx(XN,{angle:30,domain:[0,5]}),c.jsx(ER,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),c.jsx(eC,{})]})})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),c.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:c.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>c.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[c.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),c.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," "]})]},r.id))})})]})]})},dot=()=>{const[e,t]=T.useState([]),[r,n]=T.useState([]),[a,s]=T.useState("list"),[i,o]=T.useState(null),[l,u]=T.useState(!0),[d,f]=T.useState(null),[m,p]=T.useState(null),[x,g]=T.useState(null),[b,y]=T.useState([]),[_,S]=T.useState(null),[B,I]=T.useState(!1),[D,E]=T.useState("DRIVING"),[C,N]=T.useState(""),[P,O]=T.useState([]),F="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:M}=iot(F);T.useEffect(()=>{u(!0);const oe=gze(t),ce=bze(n),ge=wze(O);return u(!1),()=>{oe(),ce(),ge()}},[]);const Q=T.useMemo(()=>{const oe=e.reduce((Ne,Oe)=>{const Ce=Oe.area||"Sin especificar";return Ne[Ce]=(Ne[Ce]||0)+1,Ne},{}),ce=e.reduce((Ne,Oe)=>{var fe;const Ce=((fe=Oe.docenteSupervisor)==null?void 0:fe.nombreCompleto)||"Sin asignar";return Ne[Ce]=(Ne[Ce]||0)+1,Ne},{}),ge=e.reduce((Ne,Oe)=>{const Ce=Oe.direccion.split(",").map(Ie=>Ie.trim()),fe=Ce.length>1?Ce[1]:"Desconocida";return Ne[fe]=(Ne[fe]||0)+1,Ne},{}),Fe=ple.map(Ne=>{const Oe=e.flatMap(fe=>{var Ie;return(Ie=fe.calificaciones.find(He=>He.elemento===Ne.elemento))==null?void 0:Ie.score}).filter(fe=>fe!=null),Ce=Oe.length>0?Oe.reduce((fe,Ie)=>fe+Ie,0)/Oe.length:0;return{subject:Ne.elemento.split(" ")[0],A:Ce,fullMark:5}}),re=e.map(Ne=>{const Oe=Ne.calificaciones.map(fe=>fe.score).filter(fe=>fe!=null),Ce=Oe.length>0?Oe.reduce((fe,Ie)=>fe+Ie,0)/Oe.length:0;return{...Ne,promedio:Ce}}).filter(Ne=>Ne.promedio>0).sort((Ne,Oe)=>Oe.promedio-Ne.promedio);return{porEspecialidad:Object.entries(oe).map(([Ne,Oe])=>({name:Ne,value:Oe})),porSupervisor:Object.entries(ce).map(([Ne,Oe])=>({name:Ne,value:Oe})),porComuna:Object.entries(ge).map(([Ne,Oe])=>({name:Ne,value:Oe})),calificacionPorAmbito:Fe,ranking:re}},[e]),J=async()=>{if(i)try{await vze(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},W=async oe=>{window.confirm("Est seguro de eliminar esta empresa?")&&await xze(oe)},Z=(oe,ce)=>{o(ge=>ge?{...ge,[oe]:ce}:null)},H=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&M){const ge=await KG(oe.value.place_id);Z("direccion",oe.label||""),Z("coordenadas",ge)}else Z("direccion",(oe==null?void 0:oe.label)||"")},z=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},G=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&M){const ge=await KG(oe.value.place_id);g(ge)}},ne=oe=>{y(ce=>ce.some(ge=>ge.id===oe.id)?ce.filter(ge=>ge.id!==oe.id):[...ce,oe])},R=()=>{if(!x||b.length===0||!M)return;I(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(ge=>ge.coordenadas).map(ge=>({location:ge.coordenadas,stopover:!0}));oe.route({origin:x,destination:x,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[D]},(ge,Fe)=>{I(!1),Fe===window.google.maps.DirectionsStatus.OK&&ge?S(ge):alert("No se pudo calcular la ruta: "+Fe)})},q=()=>{S(null),p(null),g(null),y([]),N("")},Y=async()=>{if(!C||!m||!x||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:C,startPoint:{label:m.label,coords:x},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:D};try{await yze(oe),alert("Ruta guardada con xito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const ge=new fr("p","mm","a4"),Fe=ge.internal.pageSize.getWidth();ge.text(`Ruta de Supervisin: ${C||"Sin nombre"}`,10,15),ge.setFontSize(10),ge.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Ne=(await H_(oe,{useCORS:!0})).toDataURL("image/png");ge.addImage(Ne,"PNG",10,30,Fe-20,100);const Ce=(await H_(ce)).toDataURL("image/png"),fe=ge.getImageProperties(Ce),Ie=fe.height*(Fe-20)/fe.width;ge.addImage(Ce,"PNG",10,135,Fe-20,Ie),ge.save(`ruta-${C||"supervision"}.pdf`)},ie=oe=>{p({label:oe.startPoint.label,value:null}),g(oe.startPoint.coords),y(oe.empresas),E(oe.travelMode),N(oe.nombre),s("route")},pe=async oe=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await Eze(oe),alert("Ruta eliminada."))};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),c.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&c.jsx("button",{onClick:()=>{s("list"),f(null),o(null),q()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),a==="list"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[c.jsx(Gpe,{size:18})," Dashboard"]}),c.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),c.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),c.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),c.jsx("button",{onClick:()=>{o(lot()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&c.jsx(uot,{data:Q}),a==="saved-routes"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),c.jsx("div",{className:"space-y-3",children:P.length===0?c.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):P.map(oe=>c.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ie(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),c.jsx("button",{onClick:()=>pe(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),c.jsx("input",{type:"text",value:C,onChange:oe=>N(oe.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),c.jsx(Ez,{apiKey:F,selectProps:{value:m,onChange:G,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),c.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[c.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${D==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),c.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${D==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),c.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>ne(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:R,disabled:!x||b.length===0||B,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:B?"Calculando...":"Visualizar Ruta"}),c.jsx("button",{onClick:Y,disabled:!C||!x||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),c.jsx("button",{onClick:te,disabled:!_,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),c.jsx("button",{onClick:q,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),c.jsx("div",{children:c.jsx($G,{empresas:b,isLoaded:M,route:_})})]}),_&&c.jsx(cot,{route:_,travelMode:D})]}),a==="map"&&c.jsx($G,{empresas:e,isLoaded:M}),a==="list"&&c.jsx("div",{className:"space-y-3",children:e.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>z(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),c.jsx("button",{onClick:()=>W(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Spe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.nombre,onChange:oe=>Z("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Vpe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.rut,onChange:oe=>Z("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(mI,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),c.jsx("div",{className:"w-full pl-10",children:c.jsx(Ez,{apiKey:F,selectProps:{value:d,onChange:H,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(yM,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{value:i.contacto,onChange:oe=>Z("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Wpe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"email",value:i.email||"",onChange:oe=>Z("email",oe.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(vge,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsx("input",{type:"number",value:i.cupos,onChange:oe=>Z("cupos",parseInt(oe.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(Cpe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.area||"",onChange:oe=>Z("area",oe.target.value),className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),oot.map(oe=>c.jsx("option",{value:oe,children:oe},oe))]})]}),c.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[c.jsx(yM,{className:"absolute left-3 w-5 h-5 text-slate-400"}),c.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;Z("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[c.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>c.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),i.calificaciones.map((oe,ce)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[c.jsx(Age,{className:"w-5 h-5 text-slate-400"}),c.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),c.jsxs("select",{value:oe.score||"",onChange:ge=>{const Fe=[...i.calificaciones];Fe[ce].score=ge.target.value?parseInt(ge.target.value):null,Z("calificaciones",Fe)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[c.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(ge=>c.jsx("option",{value:ge,children:ge},ge))]})]},ce))]}),c.jsx("div",{className:"pt-6",children:c.jsx("button",{onClick:J,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},Aot=()=>{const e=[{id:"c1",nombre:"4B - Mecnica Industrial",especialidad:"Mecnica Industrial",estudiantes:28,avance:48,empresa:"MetalMaq SpA"},{id:"c2",nombre:"4C - Energas Renovables",especialidad:"Energa",estudiantes:26,avance:22,empresa:"Energa Andes"}],t={backgroundColor:"#FFFFFF",color:"#334155",borderRadius:"0.75rem",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",border:"1px solid #E2E8F0"},r={display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#1E293B",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500",fontSize:"0.875rem"},n={...r,backgroundColor:"white",color:"#334155",border:"1px solid #E2E8F0"};return c.jsxs("div",{style:{fontFamily:"system-ui, sans-serif"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1E293B"},children:"Dashboard de Alternancia TP"}),c.jsx("p",{style:{marginTop:"0.25rem",color:"#64748B"},children:"Monitorea cohortes, empresas y el progreso de los planes de alternancia."})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsxs("button",{style:n,children:[c.jsx("span",{role:"img","aria-label":"descargar",children:""})," Exportar"]}),c.jsxs("button",{style:r,children:[c.jsx("span",{role:"img","aria-label":"aadir",children:""})," Nuevo Plan"]})]})]}),c.jsxs("div",{children:[c.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#1E293B"},children:"Cohortes en Curso"}),e.map(a=>c.jsxs("div",{style:t,children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",borderBottom:"1px solid #F1F5F9",paddingBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",margin:0},children:a.nombre}),c.jsx("p",{style:{color:"#64748B",margin:"0.25rem 0 0 0"},children:a.especialidad})]}),c.jsxs("span",{style:{padding:"0.25rem 0.75rem",border:"1px solid #E2E8F0",borderRadius:"9999px",fontSize:"0.875rem",whiteSpace:"nowrap"},children:[a.estudiantes," Estudiantes"]})]}),c.jsxs("div",{style:{marginTop:"1rem"},children:[c.jsxs("div",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748B",fontSize:"0.875rem"},children:[c.jsx("span",{role:"img","aria-label":"empresa",children:""}),c.jsxs("span",{children:["Empresa: ",c.jsx("span",{style:{fontWeight:"500",color:"#1E293B"},children:a.empresa})]})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:"0.875rem"},children:[c.jsx("span",{style:{fontWeight:"500"},children:"Progreso del Plan"}),c.jsxs("span",{style:{fontWeight:"500"},children:[a.avance,"%"]})]}),c.jsx("div",{style:{width:"100%",backgroundColor:"#E2E8F0",borderRadius:"9999px",height:"8px"},children:c.jsx("div",{style:{width:`${a.avance}%`,backgroundColor:"#3B82F6",borderRadius:"9999px",height:"100%"}})})]})]}),c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:"1.5rem",marginTop:"1rem",borderTop:"1px solid #F1F5F9"},children:c.jsxs("button",{style:r,children:["Ver Detalles ",c.jsx("span",{role:"img","aria-label":"flecha",children:""})]})})]},a.id))]})]})},fot=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},hot=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,l=T.useMemo(()=>{const y=cpe[o]||[];return o!==Kt.ESTUDIANTE?y:y.filter(_=>{if(_.name==="Asistencia a Empresa"){const S=fot(e.curso||"");return S.startsWith("3")||S.startsWith("4")}return!0})},[o,e.curso]),[u,d]=T.useState(null),[f,m]=T.useState(!1);T.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const p=T.useCallback(y=>{d(y),window.innerWidth<768&&m(!1)},[]),x=T.useCallback(y=>{const _=l.find(S=>S.name===y);_&&p(_)},[l,p]),g=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(Gme,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestin LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(y=>c.jsxs("button",{onClick:()=>p(y),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===y.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[y.icon,c.jsx("span",{className:"ml-4",children:y.name})]},y.name))})]}),b=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Calendario Acadmico")return c.jsx(nxe,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(lxe,{currentUser:e});if(u.name==="Mensajera Interna")return c.jsx(PIe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(pxe,{});if(o===Kt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(qge,{currentUser:e});if(u.name==="Administracin")return c.jsx(Mke,{});if(u.name==="Seguimiento Curricular")return c.jsx(cze,{currentUser:e});if(u.name==="Acompaamiento docente")return c.jsx(BIe,{currentUser:e});if(u.name==="Anlisis Taxonmico")return c.jsx(OV,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(XQ,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(Vge,{currentUser:e});if(u.name==="Crear horarios")return c.jsx(Ive,{});if(u.name==="Seguimiento de acciones pedaggicas")return c.jsx(Pve,{});if(u.name==="Inclusin")return c.jsx(V9,{currentUser:e})}if(o===Kt.PROFESORADO){if(u.name==="Planificacin")return c.jsx(Wve,{currentUser:e});if(u.name==="Mis Acompaamientos")return c.jsx(sQe,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return c.jsx($9e,{});if(u.name==="Anlisis Taxonmico")return c.jsx(OV,{currentUser:e});if(u.name==="Interdisciplinario")return c.jsx(XQ,{});if(u.name==="Inclusin")return c.jsx(V9,{currentUser:e});if(u.name==="Actividades Remotas")return c.jsx(oTe,{});if(u.name==="Evaluacin de Aprendizajes")return c.jsx(gbe,{});if(u.name==="Evaluaciones Formativas")return c.jsx(e3e,{currentUser:e})}if(o===Kt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(Xke,{});if(u.name==="Asistencia Dual")return c.jsx(LTe,{});if(u.name==="Paol")return c.jsx(CPe,{});if(u.name==="Gestin de Empresas")return c.jsx(dot,{});if(u.name==="Alternancia TP")return c.jsx(Aot,{})}if(o===Kt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(mTe,{currentUser:e});if(u.name==="Evaluacin Formativa")return c.jsx(J9e,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return c.jsx(nQe,{currentUser:e});if(u.name==="Asistencia a Empresa")return c.jsx(TTe,{currentUser:e})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 dark:bg-slate-900",children:[c.jsx(Nge,{currentUser:e,onLogout:t,onNavigate:x,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>m(!f),unreadMessagesCount:s,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&c.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${f?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(g,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-100 dark:bg-slate-900",children:c.jsx("div",{className:"p-6 md:p-8",children:b()})})]})]})},mot=({onSelectProfile:e,isAdminView:t=!1})=>c.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[c.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),c.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),c.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L6,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),c.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:lpe.map(r=>c.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[c.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),c.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),pot=()=>{const[e,t]=T.useState(null),[r,n]=T.useState(null),[a,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,f]=T.useState(null);T.useEffect(()=>{const _=Bq(Jy,async S=>{if(t(S),S)try{const B=await vX(S.email);B?(n(B),B.profile===Kt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await CB())}catch{o("Error al conectar con la base de datos."),await CB()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>_()},[]);const m=async(_,S)=>{if(o(null),!_.trim()||!S.trim()){o("Por favor ingrese email y contrasea");return}try{await zme(_.trim(),S)}catch(B){switch(B.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet.");break;default:o("Ocurri un error al intentar iniciar sesin.")}}},p=async _=>{try{await $me(_)}catch(S){console.error("Error al enviar email de recuperacin:",S)}},x=_=>{f(_),u(!1)},g=()=>{u(!0),f(null)},b=async()=>{try{await CB()}catch(_){console.error("Error al cerrar sesin:",_)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L6,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return c.jsx(fpe,{onLoginAttempt:m,onForgotPasswordRequest:p,error:i});if(l&&r.profile===Kt.SUBDIRECCION)return c.jsx(mot,{onSelectProfile:x,isAdminView:!0});const y=d||r.profile;return c.jsx(hot,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Kt.SUBDIRECCION?g:void 0,canChangeProfile:r.profile===Kt.SUBDIRECCION})},gle=document.getElementById("root");if(!gle)throw new Error("Could not find root element to mount to");const got=Oce.createRoot(gle);got.render(c.jsx(ft.StrictMode,{children:c.jsx(pot,{})}));export{ca as _,xot as c,il as g};
