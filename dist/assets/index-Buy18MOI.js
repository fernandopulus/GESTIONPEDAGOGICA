(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var VNe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hC={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function X9(){if(NN)return Qp;NN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Qp.Fragment=e,Qp.jsx=r,Qp.jsxs=r,Qp}var kN;function Y9(){return kN||(kN=1,hC.exports=X9()),hC.exports}var c=Y9(),mC={exports:{}},Hr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function J9(){if(IN)return Hr;IN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function E(K,le,O){this.props=K,this.context=le,this.refs=y,this.updater=O||g}E.prototype.isReactComponent={},E.prototype.setState=function(K,le){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,le,"setState")},E.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function B(){}B.prototype=E.prototype;function k(K,le,O){this.props=K,this.context=le,this.refs=y,this.updater=O||g}var F=k.prototype=new B;F.constructor=k,b(F,E.prototype),F.isPureReactComponent=!0;var U=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function C(K,le,O,W,Y,te){return O=te.ref,{$$typeof:t,type:K,key:le,ref:O!==void 0?O:null,props:te}}function S(K,le){return C(K.type,le,void 0,void 0,void 0,K.props)}function N(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function H(K){var le={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(O){return le[O]})}var L=/\/+/g;function I(K,le){return typeof K=="object"&&K!==null&&K.key!=null?H(""+K.key):le.toString(36)}function j(){}function z(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(j,j):(K.status="pending",K.then(function(le){K.status==="pending"&&(K.status="fulfilled",K.value=le)},function(le){K.status==="pending"&&(K.status="rejected",K.reason=le)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ne(K,le,O,W,Y){var te=typeof K;(te==="undefined"||te==="boolean")&&(K=null);var ce=!1;if(K===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(K.$$typeof){case t:case e:ce=!0;break;case d:return ce=K._init,ne(ce(K._payload),le,O,W,Y)}}if(ce)return Y=Y(K),ce=W===""?"."+I(K,0):W,U(Y)?(O="",ce!=null&&(O=ce.replace(L,"$&/")+"/"),ne(Y,le,O,"",function(ge){return ge})):Y!=null&&(N(Y)&&(Y=S(Y,O+(Y.key==null||K&&K.key===Y.key?"":(""+Y.key).replace(L,"$&/")+"/")+ce)),le.push(Y)),1;ce=0;var de=W===""?".":W+":";if(U(K))for(var me=0;me<K.length;me++)W=K[me],te=de+I(W,me),ce+=ne(W,le,O,te,Y);else if(me=m(K),typeof me=="function")for(K=me.call(K),me=0;!(W=K.next()).done;)W=W.value,te=de+I(W,me++),ce+=ne(W,le,O,te,Y);else if(te==="object"){if(typeof K.then=="function")return ne(z(K),le,O,W,Y);throw le=String(K),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return ce}function Z(K,le,O){if(K==null)return K;var W=[],Y=0;return ne(K,W,"","",function(te){return le.call(O,te,Y++)}),W}function ee(K){if(K._status===-1){var le=K._result;le=le(),le.then(function(O){(K._status===0||K._status===-1)&&(K._status=1,K._result=O)},function(O){(K._status===0||K._status===-1)&&(K._status=2,K._result=O)}),K._status===-1&&(K._status=0,K._result=le)}if(K._status===1)return K._result.default;throw K._result}var ae=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function G(){}return Hr.Children={map:Z,forEach:function(K,le,O){Z(K,function(){le.apply(this,arguments)},O)},count:function(K){var le=0;return Z(K,function(){le++}),le},toArray:function(K){return Z(K,function(le){return le})||[]},only:function(K){if(!N(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Hr.Component=E,Hr.Fragment=r,Hr.Profiler=a,Hr.PureComponent=k,Hr.StrictMode=n,Hr.Suspense=l,Hr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Hr.__COMPILER_RUNTIME={__proto__:null,c:function(K){return P.H.useMemoCache(K)}},Hr.cache=function(K){return function(){return K.apply(null,arguments)}},Hr.cloneElement=function(K,le,O){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var W=b({},K.props),Y=K.key,te=void 0;if(le!=null)for(ce in le.ref!==void 0&&(te=void 0),le.key!==void 0&&(Y=""+le.key),le)!D.call(le,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&le.ref===void 0||(W[ce]=le[ce]);var ce=arguments.length-2;if(ce===1)W.children=O;else if(1<ce){for(var de=Array(ce),me=0;me<ce;me++)de[me]=arguments[me+2];W.children=de}return C(K.type,Y,void 0,void 0,te,W)},Hr.createContext=function(K){return K={$$typeof:i,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},Hr.createElement=function(K,le,O){var W,Y={},te=null;if(le!=null)for(W in le.key!==void 0&&(te=""+le.key),le)D.call(le,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(Y[W]=le[W]);var ce=arguments.length-2;if(ce===1)Y.children=O;else if(1<ce){for(var de=Array(ce),me=0;me<ce;me++)de[me]=arguments[me+2];Y.children=de}if(K&&K.defaultProps)for(W in ce=K.defaultProps,ce)Y[W]===void 0&&(Y[W]=ce[W]);return C(K,te,void 0,void 0,null,Y)},Hr.createRef=function(){return{current:null}},Hr.forwardRef=function(K){return{$$typeof:o,render:K}},Hr.isValidElement=N,Hr.lazy=function(K){return{$$typeof:d,_payload:{_status:-1,_result:K},_init:ee}},Hr.memo=function(K,le){return{$$typeof:u,type:K,compare:le===void 0?null:le}},Hr.startTransition=function(K){var le=P.T,O={};P.T=O;try{var W=K(),Y=P.S;Y!==null&&Y(O,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(G,ae)}catch(te){ae(te)}finally{P.T=le}},Hr.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Hr.use=function(K){return P.H.use(K)},Hr.useActionState=function(K,le,O){return P.H.useActionState(K,le,O)},Hr.useCallback=function(K,le){return P.H.useCallback(K,le)},Hr.useContext=function(K){return P.H.useContext(K)},Hr.useDebugValue=function(){},Hr.useDeferredValue=function(K,le){return P.H.useDeferredValue(K,le)},Hr.useEffect=function(K,le,O){var W=P.H;if(typeof O=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(K,le)},Hr.useId=function(){return P.H.useId()},Hr.useImperativeHandle=function(K,le,O){return P.H.useImperativeHandle(K,le,O)},Hr.useInsertionEffect=function(K,le){return P.H.useInsertionEffect(K,le)},Hr.useLayoutEffect=function(K,le){return P.H.useLayoutEffect(K,le)},Hr.useMemo=function(K,le){return P.H.useMemo(K,le)},Hr.useOptimistic=function(K,le){return P.H.useOptimistic(K,le)},Hr.useReducer=function(K,le,O){return P.H.useReducer(K,le,O)},Hr.useRef=function(K){return P.H.useRef(K)},Hr.useState=function(K){return P.H.useState(K)},Hr.useSyncExternalStore=function(K,le,O){return P.H.useSyncExternalStore(K,le,O)},Hr.useTransition=function(){return P.H.useTransition()},Hr.version="19.1.1",Hr}var FN;function kx(){return FN||(FN=1,mC.exports=J9()),mC.exports}var J=kx();const At=eS(J);var pC={exports:{}},Hp={},gC={exports:{}},xC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DN;function Z9(){return DN||(DN=1,function(t){function e(Z,ee){var ae=Z.length;Z.push(ee);e:for(;0<ae;){var G=ae-1>>>1,K=Z[G];if(0<a(K,ee))Z[G]=ee,Z[ae]=K,ae=G;else break e}}function r(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var ee=Z[0],ae=Z.pop();if(ae!==ee){Z[0]=ae;e:for(var G=0,K=Z.length,le=K>>>1;G<le;){var O=2*(G+1)-1,W=Z[O],Y=O+1,te=Z[Y];if(0>a(W,ae))Y<K&&0>a(te,W)?(Z[G]=te,Z[Y]=ae,G=Y):(Z[G]=W,Z[O]=ae,G=O);else if(Y<K&&0>a(te,ae))Z[G]=te,Z[Y]=ae,G=Y;else break e}}return ee}function a(Z,ee){var ae=Z.sortIndex-ee.sortIndex;return ae!==0?ae:Z.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,y=!1,E=!1,B=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function U(Z){for(var ee=r(u);ee!==null;){if(ee.callback===null)n(u);else if(ee.startTime<=Z)n(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=r(u)}}function P(Z){if(y=!1,U(Z),!b)if(r(l)!==null)b=!0,D||(D=!0,I());else{var ee=r(u);ee!==null&&ne(P,ee.startTime-Z)}}var D=!1,C=-1,S=5,N=-1;function H(){return E?!0:!(t.unstable_now()-N<S)}function L(){if(E=!1,D){var Z=t.unstable_now();N=Z;var ee=!0;try{e:{b=!1,y&&(y=!1,k(C),C=-1),g=!0;var ae=m;try{t:{for(U(Z),h=r(l);h!==null&&!(h.expirationTime>Z&&H());){var G=h.callback;if(typeof G=="function"){h.callback=null,m=h.priorityLevel;var K=G(h.expirationTime<=Z);if(Z=t.unstable_now(),typeof K=="function"){h.callback=K,U(Z),ee=!0;break t}h===r(l)&&n(l),U(Z)}else n(l);h=r(l)}if(h!==null)ee=!0;else{var le=r(u);le!==null&&ne(P,le.startTime-Z),ee=!1}}break e}finally{h=null,m=ae,g=!1}ee=void 0}}finally{ee?I():D=!1}}}var I;if(typeof F=="function")I=function(){F(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,z=j.port2;j.port1.onmessage=L,I=function(){z.postMessage(null)}}else I=function(){B(L,0)};function ne(Z,ee){C=B(function(){Z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var ae=m;m=ee;try{return Z()}finally{m=ae}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(Z,ee){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ae=m;m=Z;try{return ee()}finally{m=ae}},t.unstable_scheduleCallback=function(Z,ee,ae){var G=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?G+ae:G):ae=G,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ae+K,Z={id:d++,callback:ee,priorityLevel:Z,startTime:ae,expirationTime:K,sortIndex:-1},ae>G?(Z.sortIndex=ae,e(u,Z),r(l)===null&&Z===r(u)&&(y?(k(C),C=-1):y=!0,ne(P,ae-G))):(Z.sortIndex=K,e(l,Z),b||g||(b=!0,D||(D=!0,I()))),Z},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(Z){var ee=m;return function(){var ae=m;m=ee;try{return Z.apply(this,arguments)}finally{m=ae}}}}(xC)),xC}var RN;function eH(){return RN||(RN=1,gC.exports=Z9()),gC.exports}var vC={exports:{}},Si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LN;function tH(){if(LN)return Si;LN=1;var t=kx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Si.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,d)},Si.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Si.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Si.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Si.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Si.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Si.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Si.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Si.requestFormReset=function(l){n.d.r(l)},Si.unstable_batchedUpdates=function(l,u){return l(u)},Si.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Si.useFormStatus=function(){return i.H.useHostTransitionStatus()},Si.version="19.1.1",Si}var UN;function JR(){if(UN)return vC.exports;UN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vC.exports=tH(),vC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function rH(){if(MN)return Hp;MN=1;var t=eH(),e=kx(),r=JR();function n(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var f=A,p=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(p=f.return),A=f.return;while(A)}return f.tag===3?p:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var f=A.alternate;if(!f){if(f=s(A),f===null)throw Error(n(188));return f!==A?null:A}for(var p=A,w=f;;){var R=p.return;if(R===null)break;var Q=R.alternate;if(Q===null){if(w=R.return,w!==null){p=w;continue}break}if(R.child===Q.child){for(Q=R.child;Q;){if(Q===p)return o(R),A;if(Q===w)return o(R),f;Q=Q.sibling}throw Error(n(188))}if(p.return!==w.return)p=R,w=Q;else{for(var oe=!1,be=R.child;be;){if(be===p){oe=!0,p=R,w=Q;break}if(be===w){oe=!0,w=R,p=Q;break}be=be.sibling}if(!oe){for(be=Q.child;be;){if(be===p){oe=!0,p=Q,w=R;break}if(be===w){oe=!0,w=Q,p=R;break}be=be.sibling}if(!oe)throw Error(n(189))}}if(p.alternate!==w)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=L&&A[L]||A["@@iterator"],typeof A=="function"?A:null)}var j=Symbol.for("react.client.reference");function z(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===j?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case b:return"Fragment";case E:return"Profiler";case y:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case g:return"Portal";case F:return(A.displayName||"Context")+".Provider";case k:return(A._context.displayName||"Context")+".Consumer";case U:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return f=A.displayName||null,f!==null?f:z(A.type)||"Memo";case S:f=A._payload,A=A._init;try{return z(A(f))}catch{}}return null}var ne=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},G=[],K=-1;function le(A){return{current:A}}function O(A){0>K||(A.current=G[K],G[K]=null,K--)}function W(A,f){K++,G[K]=A.current,A.current=f}var Y=le(null),te=le(null),ce=le(null),de=le(null);function me(A,f){switch(W(ce,f),W(te,A),W(Y,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?nN(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=nN(f),A=aN(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}O(Y),W(Y,A)}function ge(){O(Y),O(te),O(ce)}function Se(A){A.memoizedState!==null&&W(de,A);var f=Y.current,p=aN(f,A.type);f!==p&&(W(te,A),W(Y,p))}function xe(A){te.current===A&&(O(Y),O(te)),de.current===A&&(O(de),Up._currentValue=ae)}var ie=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,Ie=t.unstable_shouldYield,we=t.unstable_requestPaint,je=t.unstable_now,et=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,_t=t.unstable_NormalPriority,ut=t.unstable_LowPriority,Nt=t.unstable_IdlePriority,Qt=t.log,Yt=t.unstable_setDisableYieldValue,kt=null,It=null;function Wt(A){if(typeof Qt=="function"&&Yt(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(kt,A)}catch{}}var Dt=Math.clz32?Math.clz32:yr,Ft=Math.log,xt=Math.LN2;function yr(A){return A>>>=0,A===0?32:31-(Ft(A)/xt|0)|0}var Jt=256,fn=4194304;function gr(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ur(A,f,p){var w=A.pendingLanes;if(w===0)return 0;var R=0,Q=A.suspendedLanes,oe=A.pingedLanes;A=A.warmLanes;var be=w&134217727;return be!==0?(w=be&~Q,w!==0?R=gr(w):(oe&=be,oe!==0?R=gr(oe):p||(p=be&~A,p!==0&&(R=gr(p))))):(be=w&~Q,be!==0?R=gr(be):oe!==0?R=gr(oe):p||(p=w&~A,p!==0&&(R=gr(p)))),R===0?0:f!==0&&f!==R&&(f&Q)===0&&(Q=R&-R,p=f&-f,Q>=p||Q===32&&(p&4194048)!==0)?f:R}function In(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Ir(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function us(){var A=Jt;return Jt<<=1,(Jt&4194048)===0&&(Jt=256),A}function an(){var A=fn;return fn<<=1,(fn&62914560)===0&&(fn=4194304),A}function na(A){for(var f=[],p=0;31>p;p++)f.push(A);return f}function pa(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Pr(A,f,p,w,R,Q){var oe=A.pendingLanes;A.pendingLanes=p,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=p,A.entangledLanes&=p,A.errorRecoveryDisabledLanes&=p,A.shellSuspendCounter=0;var be=A.entanglements,De=A.expirationTimes,Ze=A.hiddenUpdates;for(p=oe&~p;0<p;){var dt=31-Dt(p),wt=1<<dt;be[dt]=0,De[dt]=-1;var rt=Ze[dt];if(rt!==null)for(Ze[dt]=null,dt=0;dt<rt.length;dt++){var at=rt[dt];at!==null&&(at.lane&=-536870913)}p&=~wt}w!==0&&rr(A,w,0),Q!==0&&R===0&&A.tag!==0&&(A.suspendedLanes|=Q&~(oe&~f))}function rr(A,f,p){A.pendingLanes|=f,A.suspendedLanes&=~f;var w=31-Dt(f);A.entangledLanes|=f,A.entanglements[w]=A.entanglements[w]|1073741824|p&4194090}function zr(A,f){var p=A.entangledLanes|=f;for(A=A.entanglements;p;){var w=31-Dt(p),R=1<<w;R&f|A[w]&f&&(A[w]|=f),p&=~R}}function As(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Wn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function ba(){var A=ee.p;return A!==0?A:(A=window.event,A===void 0?32:CN(A.type))}function Ss(A,f){var p=ee.p;try{return ee.p=A,f()}finally{ee.p=p}}var Ht=Math.random().toString(36).slice(2),hn="__reactFiber$"+Ht,sn="__reactProps$"+Ht,Fn="__reactContainer$"+Ht,Mn="__reactEvents$"+Ht,$n="__reactListeners$"+Ht,fe="__reactHandles$"+Ht,Ne="__reactResources$"+Ht,Ee="__reactMarker$"+Ht;function _e(A){delete A[hn],delete A[sn],delete A[Mn],delete A[$n],delete A[fe]}function Te(A){var f=A[hn];if(f)return f;for(var p=A.parentNode;p;){if(f=p[Fn]||p[hn]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(A=lN(A);A!==null;){if(p=A[hn])return p;A=lN(A)}return f}A=p,p=A.parentNode}return null}function ke(A){if(A=A[hn]||A[Fn]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function qe(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(n(33))}function tt(A){var f=A[Ne];return f||(f=A[Ne]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function He(A){A[Ee]=!0}var We=new Set,Ye={};function yt(A,f){Bt(A,f),Bt(A+"Capture",f)}function Bt(A,f){for(Ye[A]=f,A=0;A<f.length;A++)We.add(f[A])}var Pt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Rt={};function Ar(A){return ie.call(Rt,A)?!0:ie.call(Tt,A)?!1:Pt.test(A)?Rt[A]=!0:(Tt[A]=!0,!1)}function jr(A,f,p){if(Ar(f))if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+p)}}function Or(A,f,p){if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+p)}}function Gr(A,f,p,w){if(w===null)A.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttributeNS(f,p,""+w)}}var Fa,mi;function Da(A){if(Fa===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Fa=f&&f[1]||"",mi=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fa+A+mi}var ds=!1;function qa(A,f){if(!A||ds)return"";ds=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(at){var rt=at}Reflect.construct(A,[],wt)}else{try{wt.call()}catch(at){rt=at}A.call(wt.prototype)}}else{try{throw Error()}catch(at){rt=at}(wt=A())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(at){if(at&&rt&&typeof at.stack=="string")return[at.stack,rt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Q=w.DetermineComponentFrameRoot(),oe=Q[0],be=Q[1];if(oe&&be){var De=oe.split(`
`),Ze=be.split(`
`);for(R=w=0;w<De.length&&!De[w].includes("DetermineComponentFrameRoot");)w++;for(;R<Ze.length&&!Ze[R].includes("DetermineComponentFrameRoot");)R++;if(w===De.length||R===Ze.length)for(w=De.length-1,R=Ze.length-1;1<=w&&0<=R&&De[w]!==Ze[R];)R--;for(;1<=w&&0<=R;w--,R--)if(De[w]!==Ze[R]){if(w!==1||R!==1)do if(w--,R--,0>R||De[w]!==Ze[R]){var dt=`
`+De[w].replace(" at new "," at ");return A.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",A.displayName)),dt}while(1<=w&&0<=R);break}}}finally{ds=!1,Error.prepareStackTrace=p}return(p=A?A.displayName||A.name:"")?Da(p):""}function Ts(A){switch(A.tag){case 26:case 27:case 5:return Da(A.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 15:return qa(A.type,!1);case 11:return qa(A.type.render,!1);case 1:return qa(A.type,!0);case 31:return Da("Activity");default:return""}}function Xn(A){try{var f="";do f+=Ts(A),A=A.return;while(A);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function fs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Pc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function GA(A){var f=Pc(A)?"checked":"value",p=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),w=""+A[f];if(!A.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var R=p.get,Q=p.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return R.call(this)},set:function(oe){w=""+oe,Q.call(this,oe)}}),Object.defineProperty(A,f,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(oe){w=""+oe},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function ol(A){A._valueTracker||(A._valueTracker=GA(A))}function Ou(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var p=f.getValue(),w="";return A&&(w=Pc(A)?A.checked?"true":"false":A.value),A=w,A!==p?(f.setValue(A),!0):!1}function Bs(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var jc=/[\n"\\]/g;function mn(A){return A.replace(jc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Ns(A,f,p,w,R,Q,oe,be){A.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?A.type=oe:A.removeAttribute("type"),f!=null?oe==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+fs(f)):A.value!==""+fs(f)&&(A.value=""+fs(f)):oe!=="submit"&&oe!=="reset"||A.removeAttribute("value"),f!=null?cl(A,oe,fs(f)):p!=null?cl(A,oe,fs(p)):w!=null&&A.removeAttribute("value"),R==null&&Q!=null&&(A.defaultChecked=!!Q),R!=null&&(A.checked=R&&typeof R!="function"&&typeof R!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+fs(be):A.removeAttribute("name")}function ll(A,f,p,w,R,Q,oe,be){if(Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(A.type=Q),f!=null||p!=null){if(!(Q!=="submit"&&Q!=="reset"||f!=null))return;p=p!=null?""+fs(p):"",f=f!=null?""+fs(f):p,be||f===A.value||(A.value=f),A.defaultValue=f}w=w??R,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=be?A.checked:!!w,A.defaultChecked=!!w,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(A.name=oe)}function cl(A,f,p){f==="number"&&Bs(A.ownerDocument)===A||A.defaultValue===""+p||(A.defaultValue=""+p)}function so(A,f,p,w){if(A=A.options,f){f={};for(var R=0;R<p.length;R++)f["$"+p[R]]=!0;for(p=0;p<A.length;p++)R=f.hasOwnProperty("$"+A[p].value),A[p].selected!==R&&(A[p].selected=R),R&&w&&(A[p].defaultSelected=!0)}else{for(p=""+fs(p),f=null,R=0;R<A.length;R++){if(A[R].value===p){A[R].selected=!0,w&&(A[R].defaultSelected=!0);return}f!==null||A[R].disabled||(f=A[R])}f!==null&&(f.selected=!0)}}function En(A,f,p){if(f!=null&&(f=""+fs(f),f!==A.value&&(A.value=f),p==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=p!=null?""+fs(p):""}function ul(A,f,p,w){if(f==null){if(w!=null){if(p!=null)throw Error(n(92));if(ne(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),f=p}p=fs(f),A.defaultValue=p,w=A.textContent,w===p&&w!==""&&w!==null&&(A.value=w)}function pi(A,f){if(f){var p=A.firstChild;if(p&&p===A.lastChild&&p.nodeType===3){p.nodeValue=f;return}}A.textContent=f}var Io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qA(A,f,p){var w=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":w?A.setProperty(f,p):typeof p!="number"||p===0||Io.has(f)?f==="float"?A.cssFloat=p:A[f]=(""+p).trim():A[f]=p+"px"}function Qu(A,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(A=A.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var R in f)w=f[R],f.hasOwnProperty(R)&&p[R]!==w&&qA(A,R,w)}else for(var Q in f)f.hasOwnProperty(Q)&&qA(A,Q,f[Q])}function Hu(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(A){return Oc.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var io=null;function Pn(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Ro=null,oo=null;function hr(A){var f=ke(A);if(f&&(A=f.stateNode)){var p=A[sn]||null;e:switch(A=f.stateNode,f.type){case"input":if(Ns(A,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=A;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+mn(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var w=p[f];if(w!==A&&w.form===A.form){var R=w[sn]||null;if(!R)throw Error(n(90));Ns(w,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<p.length;f++)w=p[f],w.form===A.form&&Ou(w)}break e;case"textarea":En(A,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&so(A,!!p.multiple,f,!1)}}}var lo=!1;function KA(A,f,p){if(lo)return A(f,p);lo=!0;try{var w=A(f);return w}finally{if(lo=!1,(Ro!==null||oo!==null)&&(M1(),Ro&&(f=Ro,A=oo,oo=Ro=null,hr(f),A)))for(f=0;f<A.length;f++)hr(A[f])}}function Ms(A,f){var p=A.stateNode;if(p===null)return null;var w=p[sn]||null;if(w===null)return null;p=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(gi)try{var co={};Object.defineProperty(co,"passive",{get:function(){ei=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{ei=!1}var xi=null,Al=null,Lo=null;function Vu(){if(Lo)return Lo;var A,f=Al,p=f.length,w,R="value"in xi?xi.value:xi.textContent,Q=R.length;for(A=0;A<p&&f[A]===R[A];A++);var oe=p-A;for(w=1;w<=oe&&f[p-w]===R[Q-w];w++);return Lo=R.slice(A,1<w?1-w:void 0)}function vi(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Ps(){return!0}function uo(){return!1}function Ra(A){function f(p,w,R,Q,oe){this._reactName=p,this._targetInst=R,this.type=w,this.nativeEvent=Q,this.target=oe,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(p=A[be],this[be]=p?p(Q):Q[be]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Ps:uo,this.isPropagationStopped=uo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),f}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=Ra(Jr),Ao=d({},Jr,{view:0,detail:0}),zu=Ra(Ao),Wl,$l,Wi,js=d({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Wi&&(Wi&&A.type==="mousemove"?(Wl=A.screenX-Wi.screenX,$l=A.screenY-Wi.screenY):$l=Wl=0,Wi=A),Wl)},movementY:function(A){return"movementY"in A?A.movementY:$l}}),La=Ra(js),WA=d({},js,{dataTransfer:0}),fl=Ra(WA),ks=d({},Ao,{relatedTarget:0}),hl=Ra(ks),Uo=d({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=Ra(Uo),Xl=d({},Jr,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Hc=Ra(Xl),Gu=d({},Jr,{data:0}),Yl=Ra(Gu),ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=Vc[A])?!!f[A]:!1}function pl(){return Zl}var $A=d({},Ao,{key:function(A){if(A.key){var f=ml[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=vi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Jl[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pl,charCode:function(A){return A.type==="keypress"?vi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?vi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Mo=Ra($A),gl=d({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=Ra(gl),Os=d({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pl}),zc=Ra(Os),V=d({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Ra(V),Fe=d({},js,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=Ra(Fe),Ve=d({},Jr,{newState:0,oldState:0}),ot=Ra(Ve),Et=[9,13,27,32],jt=gi&&"CompositionEvent"in window,T=null;gi&&"documentMode"in document&&(T=document.documentMode);var X=gi&&"TextEvent"in window&&!T,se=gi&&(!jt||T&&8<T&&11>=T),ye=" ",Qe=!1;function Je(A,f){switch(A){case"keyup":return Et.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var mr=!1;function Zr(A,f){switch(A){case"compositionend":return St(f);case"keypress":return f.which!==32?null:(Qe=!0,ye);case"textInput":return A=f.data,A===ye&&Qe?null:A;default:return null}}function Nr(A,f){if(mr)return A==="compositionend"||!jt&&Je(A,f)?(A=Vu(),Lo=Al=xi=null,mr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return se&&f.locale!=="ko"?null:f.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!_n[A.type]:f==="textarea"}function fo(A,f,p,w){Ro?oo?oo.push(w):oo=[w]:Ro=w,f=V1(f,"onChange"),0<f.length&&(p=new dl("onChange","change",null,p,w),A.push({event:p,listeners:f}))}var Ca=null,yi=null;function xl(A){JB(A,0)}function Gc(A){var f=qe(A);if(Ou(f))return A}function XA(A,f){if(A==="change")return f}var qu=!1;if(gi){var Ka;if(gi){var qc="oninput"in document;if(!qc){var Ku=document.createElement("div");Ku.setAttribute("oninput","return;"),qc=typeof Ku.oninput=="function"}Ka=qc}else Ka=!1;qu=Ka&&(!document.documentMode||9<document.documentMode)}function Wu(){Ca&&(Ca.detachEvent("onpropertychange",YA),yi=Ca=null)}function YA(A){if(A.propertyName==="value"&&Gc(yi)){var f=[];fo(f,yi,A,Pn(A)),KA(xl,f)}}function wi(A,f,p){A==="focusin"?(Wu(),Ca=f,yi=p,Ca.attachEvent("onpropertychange",YA)):A==="focusout"&&Wu()}function np(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Gc(yi)}function Tf(A,f){if(A==="click")return Gc(f)}function Gh(A,f){if(A==="input"||A==="change")return Gc(f)}function ho(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var hs=typeof Object.is=="function"?Object.is:ho;function Kc(A,f){if(hs(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var p=Object.keys(A),w=Object.keys(f);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var R=p[w];if(!ie.call(f,R)||!hs(A[R],f[R]))return!1}return!0}function Bf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function tc(A,f){var p=Bf(A);A=0;for(var w;p;){if(p.nodeType===3){if(w=A+p.textContent.length,A<=f&&w>=f)return{node:p,offset:f-A};A=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Bf(p)}}function Wc(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?Wc(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function ti(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=Bs(A.document);f instanceof A.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)A=f.contentWindow;else break;f=Bs(A.document)}return f}function Is(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var $c=gi&&"documentMode"in document&&11>=document.documentMode,bi=null,Po=null,vl=null,jo=!1;function ga(A,f,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;jo||bi==null||bi!==Bs(w)||(w=bi,"selectionStart"in w&&Is(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),vl&&Kc(vl,w)||(vl=w,w=V1(Po,"onSelect"),0<w.length&&(f=new dl("onSelect","select",null,f,p),A.push({event:f,listeners:w}),f.target=bi)))}function Oo(A,f){var p={};return p[A.toLowerCase()]=f.toLowerCase(),p["Webkit"+A]="webkit"+f,p["Moz"+A]="moz"+f,p}var Ua={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},Ci={},$u={};gi&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function yl(A){if(Ci[A])return Ci[A];if(!Ua[A])return A;var f=Ua[A],p;for(p in f)if(f.hasOwnProperty(p)&&p in $u)return Ci[A]=f[p];return A}var JA=yl("animationend"),Xc=yl("animationiteration"),Yc=yl("animationstart"),Jc=yl("transitionrun"),Xu=yl("transitionstart"),ZA=yl("transitioncancel"),Zc=yl("transitionend"),rc=new Map,Yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yu.push("scrollEnd");function xa(A,f){rc.set(A,f),yt(f,[A])}var $i=new WeakMap;function Kr(A,f){if(typeof A=="object"&&A!==null){var p=$i.get(A);return p!==void 0?p:(f={value:A,source:f,stack:Xn(f)},$i.set(A,f),f)}return{value:A,source:f,stack:Xn(f)}}var Wr=[],Yn=0,Ea=0;function mo(){for(var A=Yn,f=Ea=Yn=0;f<A;){var p=Wr[f];Wr[f++]=null;var w=Wr[f];Wr[f++]=null;var R=Wr[f];Wr[f++]=null;var Q=Wr[f];if(Wr[f++]=null,w!==null&&R!==null){var oe=w.pending;oe===null?R.next=R:(R.next=oe.next,oe.next=R),w.pending=R}Q!==0&&qh(p,R,Q)}}function eu(A,f,p,w){Wr[Yn++]=A,Wr[Yn++]=f,Wr[Yn++]=p,Wr[Yn++]=w,Ea|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function tu(A,f,p,w){return eu(A,f,p,w),Ju(A)}function nc(A,f){return eu(A,null,null,f),Ju(A)}function qh(A,f,p){A.lanes|=p;var w=A.alternate;w!==null&&(w.lanes|=p);for(var R=!1,Q=A.return;Q!==null;)Q.childLanes|=p,w=Q.alternate,w!==null&&(w.childLanes|=p),Q.tag===22&&(A=Q.stateNode,A===null||A._visibility&1||(R=!0)),A=Q,Q=Q.return;return A.tag===3?(Q=A.stateNode,R&&f!==null&&(R=31-Dt(p),A=Q.hiddenUpdates,w=A[R],w===null?A[R]=[f]:w.push(f),f.lane=p|536870912),Q):null}function Ju(A){if(50<Bp)throw Bp=0,Pb=null,Error(n(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var ms={};function po(A,f,p,w){this.tag=A,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(A,f,p,w){return new po(A,f,p,w)}function ed(A){return A=A.prototype,!(!A||!A.isReactComponent)}function wl(A,f){var p=A.alternate;return p===null?(p=Qs(A.tag,f,A.key,A.mode),p.elementType=A.elementType,p.type=A.type,p.stateNode=A.stateNode,p.alternate=A,A.alternate=p):(p.pendingProps=f,p.type=A.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=A.flags&65011712,p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,f=A.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=A.sibling,p.index=A.index,p.ref=A.ref,p.refCleanup=A.refCleanup,p}function Nf(A,f){A.flags&=65011714;var p=A.alternate;return p===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,A.type=p.type,f=p.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function Zu(A,f,p,w,R,Q){var oe=0;if(w=A,typeof A=="function")ed(A)&&(oe=1);else if(typeof A=="string")oe=M9(A,p,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case N:return A=Qs(31,p,f,R),A.elementType=N,A.lanes=Q,A;case b:return ac(p.children,R,Q,f);case y:oe=8,R|=24;break;case E:return A=Qs(12,p,f,R|2),A.elementType=E,A.lanes=Q,A;case P:return A=Qs(13,p,f,R),A.elementType=P,A.lanes=Q,A;case D:return A=Qs(19,p,f,R),A.elementType=D,A.lanes=Q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case B:case F:oe=10;break e;case k:oe=9;break e;case U:oe=11;break e;case C:oe=14;break e;case S:oe=16,w=null;break e}oe=29,p=Error(n(130,A===null?"null":typeof A,"")),w=null}return f=Qs(oe,p,f,R),f.elementType=A,f.type=w,f.lanes=Q,f}function ac(A,f,p,w){return A=Qs(7,A,w,f),A.lanes=p,A}function Kh(A,f,p){return A=Qs(6,A,null,f),A.lanes=p,A}function kf(A,f,p){return f=Qs(4,A.children!==null?A.children:[],A.key,f),f.lanes=p,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var ru=[],sc=0,td=null,Wh=0,go=[],Xi=0,eA=null,ic=1,oc="";function tA(A,f){ru[sc++]=Wh,ru[sc++]=td,td=A,Wh=f}function o1(A,f,p){go[Xi++]=ic,go[Xi++]=oc,go[Xi++]=eA,eA=A;var w=ic;A=oc;var R=32-Dt(w)-1;w&=~(1<<R),p+=1;var Q=32-Dt(f)+R;if(30<Q){var oe=R-R%5;Q=(w&(1<<oe)-1).toString(32),w>>=oe,R-=oe,ic=1<<32-Dt(f)+R|p<<R|w,oc=Q+A}else ic=1<<Q|p<<R|w,oc=A}function If(A){A.return!==null&&(tA(A,1),o1(A,1,0))}function Ff(A){for(;A===td;)td=ru[--sc],ru[sc]=null,Wh=ru[--sc],ru[sc]=null;for(;A===eA;)eA=go[--Xi],go[Xi]=null,oc=go[--Xi],go[Xi]=null,ic=go[--Xi],go[Xi]=null}var Wa=null,va=null,wn=!1,nu=null,bl=!1,ap=Error(n(519));function rA(A){var f=Error(n(418,""));throw rd(Kr(f,A)),ap}function l1(A){var f=A.stateNode,p=A.type,w=A.memoizedProps;switch(f[hn]=A,f[sn]=w,p){case"dialog":ln("cancel",f),ln("close",f);break;case"iframe":case"object":case"embed":ln("load",f);break;case"video":case"audio":for(p=0;p<kp.length;p++)ln(kp[p],f);break;case"source":ln("error",f);break;case"img":case"image":case"link":ln("error",f),ln("load",f);break;case"details":ln("toggle",f);break;case"input":ln("invalid",f),ll(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),ol(f);break;case"select":ln("invalid",f);break;case"textarea":ln("invalid",f),ul(f,w.value,w.defaultValue,w.children),ol(f)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||w.suppressHydrationWarning===!0||rN(f.textContent,p)?(w.popover!=null&&(ln("beforetoggle",f),ln("toggle",f)),w.onScroll!=null&&ln("scroll",f),w.onScrollEnd!=null&&ln("scrollend",f),w.onClick!=null&&(f.onclick=z1),f=!0):f=!1,f||rA(A)}function lc(A){for(Wa=A.return;Wa;)switch(Wa.tag){case 5:case 13:bl=!1;return;case 27:case 3:bl=!0;return;default:Wa=Wa.return}}function ri(A){if(A!==Wa)return!1;if(!wn)return lc(A),wn=!0,!1;var f=A.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=A.type,p=!(p!=="form"&&p!=="button")||eC(A.type,A.memoizedProps)),p=!p),p&&va&&rA(A),lc(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(p=A.data,p==="/$"){if(f===0){va=pc(A.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;A=A.nextSibling}va=null}}else f===27?(f=va,vd(A.type)?(A=aC,aC=null,va=A):va=f):va=Wa?pc(A.stateNode.nextSibling):null;return!0}function Yi(){va=Wa=null,wn=!1}function c1(){var A=nu;return A!==null&&(yo===null?yo=A:yo.push.apply(yo,A),nu=null),A}function rd(A){nu===null?nu=[A]:nu.push(A)}var Cl=le(null),ps=null,cc=null;function au(A,f,p){W(Cl,f._currentValue),f._currentValue=p}function El(A){A._currentValue=Cl.current,O(Cl)}function $h(A,f,p){for(;A!==null;){var w=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),A===p)break;A=A.return}}function Xh(A,f,p,w){var R=A.child;for(R!==null&&(R.return=A);R!==null;){var Q=R.dependencies;if(Q!==null){var oe=R.child;Q=Q.firstContext;e:for(;Q!==null;){var be=Q;Q=R;for(var De=0;De<f.length;De++)if(be.context===f[De]){Q.lanes|=p,be=Q.alternate,be!==null&&(be.lanes|=p),$h(Q.return,p,A),w||(oe=null);break e}Q=be.next}}else if(R.tag===18){if(oe=R.return,oe===null)throw Error(n(341));oe.lanes|=p,Q=oe.alternate,Q!==null&&(Q.lanes|=p),$h(oe,p,A),oe=null}else oe=R.child;if(oe!==null)oe.return=R;else for(oe=R;oe!==null;){if(oe===A){oe=null;break}if(R=oe.sibling,R!==null){R.return=oe.return,oe=R;break}oe=oe.return}R=oe}}function nd(A,f,p,w){A=null;for(var R=f,Q=!1;R!==null;){if(!Q){if((R.flags&524288)!==0)Q=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var oe=R.alternate;if(oe===null)throw Error(n(387));if(oe=oe.memoizedProps,oe!==null){var be=R.type;hs(R.pendingProps.value,oe.value)||(A!==null?A.push(be):A=[be])}}else if(R===de.current){if(oe=R.alternate,oe===null)throw Error(n(387));oe.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(A!==null?A.push(Up):A=[Up])}R=R.return}A!==null&&Xh(f,A,p,w),f.flags|=262144}function Yh(A){for(A=A.firstContext;A!==null;){if(!hs(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function _l(A){ps=A,cc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function $a(A){return Jh(ps,A)}function su(A,f){return ps===null&&_l(A),Jh(A,f)}function Jh(A,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},cc===null){if(A===null)throw Error(n(308));cc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else cc=cc.next=f;return p}var cb=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(p,w){A.push(w)}};this.abort=function(){f.aborted=!0,A.forEach(function(p){return p()})}},u1=t.unstable_scheduleCallback,ub=t.unstable_NormalPriority,Xa={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sp(){return{controller:new cb,data:new Map,refCount:0}}function Df(A){A.refCount--,A.refCount===0&&u1(ub,function(){A.controller.abort()})}var Rf=null,ip=0,nA=0,uc=null;function Ab(A,f){if(Rf===null){var p=Rf=[];ip=0,nA=Gb(),uc={status:"pending",value:void 0,then:function(w){p.push(w)}}}return ip++,f.then(A1,A1),f}function A1(){if(--ip===0&&Rf!==null){uc!==null&&(uc.status="fulfilled");var A=Rf;Rf=null,nA=0,uc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function d1(A,f){var p=[],w={status:"pending",value:null,reason:null,then:function(R){p.push(R)}};return A.then(function(){w.status="fulfilled",w.value=f;for(var R=0;R<p.length;R++)(0,p[R])(f)},function(R){for(w.status="rejected",w.reason=R,R=0;R<p.length;R++)(0,p[R])(void 0)}),w}var _=Z.S;Z.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Ab(A,f),_!==null&&_(A,f)};var M=le(null);function q(){var A=M.current;return A!==null?A:oa.pooledCache}function re(A,f){f===null?W(M,M.current):W(M,f.pool)}function ue(){var A=q();return A===null?null:{parent:Xa._currentValue,pool:A}}var he=Error(n(460)),pe=Error(n(474)),ve=Error(n(542)),Ce={then:function(){}};function Be(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ue(){}function Xe(A,f,p){switch(p=A[p],p===void 0?A.push(f):p!==f&&(f.then(Ue,Ue),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A;default:if(typeof f.status=="string")f.then(Ue,Ue);else{if(A=oa,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=f,A.status="pending",A.then(function(w){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=w}},function(w){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,gt(A),A}throw Ke=f,he}}var Ke=null;function ze(){if(Ke===null)throw Error(n(459));var A=Ke;return Ke=null,A}function gt(A){if(A===he||A===ve)throw Error(n(483))}var it=!1;function Me(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ct(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function vt(A,f,p){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(On&2)!==0){var R=w.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),w.pending=f,f=Ju(A),qh(A,null,p),f}return eu(A,w,f,p),Ju(A)}function ft(A,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,zr(A,p)}}function zt(A,f){var p=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var R=null,Q=null;if(p=p.firstBaseUpdate,p!==null){do{var oe={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};Q===null?R=Q=oe:Q=Q.next=oe,p=p.next}while(p!==null);Q===null?R=Q=f:Q=Q.next=f}else R=Q=f;p={baseState:w.baseState,firstBaseUpdate:R,lastBaseUpdate:Q,shared:w.shared,callbacks:w.callbacks},A.updateQueue=p;return}A=p.lastBaseUpdate,A===null?p.firstBaseUpdate=f:A.next=f,p.lastBaseUpdate=f}var Mt=!1;function nr(){if(Mt){var A=uc;if(A!==null)throw A}}function Ot(A,f,p,w){Mt=!1;var R=A.updateQueue;it=!1;var Q=R.firstBaseUpdate,oe=R.lastBaseUpdate,be=R.shared.pending;if(be!==null){R.shared.pending=null;var De=be,Ze=De.next;De.next=null,oe===null?Q=Ze:oe.next=Ze,oe=De;var dt=A.alternate;dt!==null&&(dt=dt.updateQueue,be=dt.lastBaseUpdate,be!==oe&&(be===null?dt.firstBaseUpdate=Ze:be.next=Ze,dt.lastBaseUpdate=De))}if(Q!==null){var wt=R.baseState;oe=0,dt=Ze=De=null,be=Q;do{var rt=be.lane&-536870913,at=rt!==be.lane;if(at?(vn&rt)===rt:(w&rt)===rt){rt!==0&&rt===nA&&(Mt=!0),dt!==null&&(dt=dt.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var Sr=A,pr=be;rt=f;var Zn=p;switch(pr.tag){case 1:if(Sr=pr.payload,typeof Sr=="function"){wt=Sr.call(Zn,wt,rt);break e}wt=Sr;break e;case 3:Sr.flags=Sr.flags&-65537|128;case 0:if(Sr=pr.payload,rt=typeof Sr=="function"?Sr.call(Zn,wt,rt):Sr,rt==null)break e;wt=d({},wt,rt);break e;case 2:it=!0}}rt=be.callback,rt!==null&&(A.flags|=64,at&&(A.flags|=8192),at=R.callbacks,at===null?R.callbacks=[rt]:at.push(rt))}else at={lane:rt,tag:be.tag,payload:be.payload,callback:be.callback,next:null},dt===null?(Ze=dt=at,De=wt):dt=dt.next=at,oe|=rt;if(be=be.next,be===null){if(be=R.shared.pending,be===null)break;at=be,be=at.next,at.next=null,R.lastBaseUpdate=at,R.shared.pending=null}}while(!0);dt===null&&(De=wt),R.baseState=De,R.firstBaseUpdate=Ze,R.lastBaseUpdate=dt,Q===null&&(R.shared.lanes=0),md|=oe,A.lanes=oe,A.memoizedState=wt}}function gn(A,f){if(typeof A!="function")throw Error(n(191,A));A.call(f)}function Sn(A,f){var p=A.callbacks;if(p!==null)for(A.callbacks=null,A=0;A<p.length;A++)gn(p[A],f)}var qr=le(null),Qr=le(0);function Rn(A,f){A=fA,W(Qr,A),W(qr,f),fA=A|f.baseLanes}function Tn(){W(Qr,fA),W(qr,qr.current)}function kr(){fA=Qr.current,O(qr),O(Qr)}var jn=0,dr=null,wr=null,pn=null,xn=!1,gs=!1,Ya=!1,_a=0,Sa=0,Ma=null,xo=0;function Bn(){throw Error(n(321))}function Pa(A,f){if(f===null)return!1;for(var p=0;p<f.length&&p<A.length;p++)if(!hs(A[p],f[p]))return!1;return!0}function Qo(A,f,p,w,R,Q){return jn=Q,dr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Z.H=A===null||A.memoizedState===null?UT:MT,Ya=!1,Q=p(w,R),Ya=!1,gs&&(Q=aA(f,p,w,R)),iu(A),Q}function iu(A){Z.H=E1;var f=wr!==null&&wr.next!==null;if(jn=0,pn=wr=dr=null,xn=!1,Sa=0,Ma=null,f)throw Error(n(300));A===null||Hs||(A=A.dependencies,A!==null&&Yh(A)&&(Hs=!0))}function aA(A,f,p,w){dr=A;var R=0;do{if(gs&&(Ma=null),Sa=0,gs=!1,25<=R)throw Error(n(301));if(R+=1,pn=wr=null,A.updateQueue!=null){var Q=A.updateQueue;Q.lastEffect=null,Q.events=null,Q.stores=null,Q.memoCache!=null&&(Q.memoCache.index=0)}Z.H=WQ,Q=f(p,w)}while(gs);return Q}function ou(){var A=Z.H,f=A.useState()[0];return f=typeof f.then=="function"?lu(f):f,A=A.useState()[0],(wr!==null?wr.memoizedState:null)!==A&&(dr.flags|=1024),f}function ia(){var A=_a!==0;return _a=0,A}function Lf(A,f,p){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~p}function Zh(A){if(xn){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}xn=!1}jn=0,pn=wr=dr=null,gs=!1,Sa=_a=0,Ma=null}function ni(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?dr.memoizedState=pn=A:pn=pn.next=A,pn}function ua(){if(wr===null){var A=dr.alternate;A=A!==null?A.memoizedState:null}else A=wr.next;var f=pn===null?dr.memoizedState:pn.next;if(f!==null)pn=f,wr=A;else{if(A===null)throw dr.alternate===null?Error(n(467)):Error(n(310));wr=A,A={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},pn===null?dr.memoizedState=pn=A:pn=pn.next=A}return pn}function sA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(A){var f=Sa;return Sa+=1,Ma===null&&(Ma=[]),A=Xe(Ma,A,f),f=dr,(pn===null?f.memoizedState:pn.next)===null&&(f=f.alternate,Z.H=f===null||f.memoizedState===null?UT:MT),A}function Ei(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return lu(A);if(A.$$typeof===F)return $a(A)}throw Error(n(438,String(A)))}function cu(A){var f=null,p=dr.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var w=dr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=sA(),dr.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(A),w=0;w<A;w++)p[w]=H;return f.index++,p}function _i(A,f){return typeof f=="function"?f(A):f}function Uf(A){var f=ua();return ad(f,wr,A)}function ad(A,f,p){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var R=A.baseQueue,Q=w.pending;if(Q!==null){if(R!==null){var oe=R.next;R.next=Q.next,Q.next=oe}f.baseQueue=R=Q,w.pending=null}if(Q=A.baseState,R===null)A.memoizedState=Q;else{f=R.next;var be=oe=null,De=null,Ze=f,dt=!1;do{var wt=Ze.lane&-536870913;if(wt!==Ze.lane?(vn&wt)===wt:(jn&wt)===wt){var rt=Ze.revertLane;if(rt===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),wt===nA&&(dt=!0);else if((jn&rt)===rt){Ze=Ze.next,rt===nA&&(dt=!0);continue}else wt={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},De===null?(be=De=wt,oe=Q):De=De.next=wt,dr.lanes|=rt,md|=rt;wt=Ze.action,Ya&&p(Q,wt),Q=Ze.hasEagerState?Ze.eagerState:p(Q,wt)}else rt={lane:wt,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},De===null?(be=De=rt,oe=Q):De=De.next=rt,dr.lanes|=wt,md|=wt;Ze=Ze.next}while(Ze!==null&&Ze!==f);if(De===null?oe=Q:De.next=be,!hs(Q,A.memoizedState)&&(Hs=!0,dt&&(p=uc,p!==null)))throw p;A.memoizedState=Q,A.baseState=oe,A.baseQueue=De,w.lastRenderedState=Q}return R===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function e0(A){var f=ua(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=A;var w=p.dispatch,R=p.pending,Q=f.memoizedState;if(R!==null){p.pending=null;var oe=R=R.next;do Q=A(Q,oe.action),oe=oe.next;while(oe!==R);hs(Q,f.memoizedState)||(Hs=!0),f.memoizedState=Q,f.baseQueue===null&&(f.baseState=Q),p.lastRenderedState=Q}return[Q,w]}function Mf(A,f,p){var w=dr,R=ua(),Q=wn;if(Q){if(p===void 0)throw Error(n(407));p=p()}else p=f();var oe=!hs((wr||R).memoizedState,p);oe&&(R.memoizedState=p,Hs=!0),R=R.queue;var be=sd.bind(null,w,R,A);if(ld(2048,8,be,[A]),R.getSnapshot!==f||oe||pn!==null&&pn.memoizedState.tag&1){if(w.flags|=2048,dc(9,Qf(),Pf.bind(null,w,R,p,f),null),oa===null)throw Error(n(349));Q||(jn&124)!==0||t0(w,f,p)}return p}function t0(A,f,p){A.flags|=16384,A={getSnapshot:f,value:p},f=dr.updateQueue,f===null?(f=sA(),dr.updateQueue=f,f.stores=[A]):(p=f.stores,p===null?f.stores=[A]:p.push(A))}function Pf(A,f,p,w){f.value=p,f.getSnapshot=w,f1(f)&&h1(A)}function sd(A,f,p){return p(function(){f1(f)&&h1(A)})}function f1(A){var f=A.getSnapshot;A=A.value;try{var p=f();return!hs(A,p)}catch{return!0}}function h1(A){var f=nc(A,2);f!==null&&Ko(f,A,2)}function jf(A){var f=ni();if(typeof A=="function"){var p=A;if(A=p(),Ya){Wt(!0);try{p()}finally{Wt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:A},f}function Ac(A,f,p,w){return A.baseState=p,ad(A,wr,typeof w=="function"?w:_i)}function db(A,f,p,w,R){if(C1(A))throw Error(n(485));if(A=f.action,A!==null){var Q={payload:R,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){Q.listeners.push(oe)}};Z.T!==null?p(!0):Q.isTransition=!1,w(Q),p=f.pending,p===null?(Q.next=f.pending=Q,m1(f,Q)):(Q.next=p.next,f.pending=p.next=Q)}}function m1(A,f){var p=f.action,w=f.payload,R=A.state;if(f.isTransition){var Q=Z.T,oe={};Z.T=oe;try{var be=p(R,w),De=Z.S;De!==null&&De(oe,be),p1(A,f,be)}catch(Ze){id(A,f,Ze)}finally{Z.T=Q}}else try{Q=p(R,w),p1(A,f,Q)}catch(Ze){id(A,f,Ze)}}function p1(A,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){op(A,f,w)},function(w){return id(A,f,w)}):op(A,f,p)}function op(A,f,p){f.status="fulfilled",f.value=p,lp(f),A.state=p,f=A.pending,f!==null&&(p=f.next,p===f?A.pending=null:(p=p.next,f.next=p,m1(A,p)))}function id(A,f,p){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=p,lp(f),f=f.next;while(f!==w)}A.action=null}function lp(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function cp(A,f){return f}function Of(A,f){if(wn){var p=oa.formState;if(p!==null){e:{var w=dr;if(wn){if(va){t:{for(var R=va,Q=bl;R.nodeType!==8;){if(!Q){R=null;break t}if(R=pc(R.nextSibling),R===null){R=null;break t}}Q=R.data,R=Q==="F!"||Q==="F"?R:null}if(R){va=pc(R.nextSibling),w=R.data==="F!";break e}}rA(w)}w=!1}w&&(f=p[0])}}return p=ni(),p.memoizedState=p.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:f},p.queue=w,p=DT.bind(null,dr,w),w.dispatch=p,w=jf(!1),Q=fb.bind(null,dr,!1,w.queue),w=ni(),R={state:f,dispatch:null,action:A,pending:null},w.queue=R,p=db.bind(null,dr,R,Q,p),R.dispatch=p,w.memoizedState=A,[f,p,!1]}function r0(A){var f=ua();return od(f,wr,A)}function od(A,f,p){if(f=ad(A,f,cp)[0],A=Uf(_i)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=lu(f)}catch(oe){throw oe===he?ve:oe}else w=f;f=ua();var R=f.queue,Q=R.dispatch;return p!==f.memoizedState&&(dr.flags|=2048,dc(9,Qf(),g1.bind(null,R,p),null)),[w,Q,A]}function g1(A,f){A.action=f}function x1(A){var f=ua(),p=wr;if(p!==null)return od(f,p,A);ua(),f=f.memoizedState,p=ua();var w=p.queue.dispatch;return p.memoizedState=A,[f,w,!1]}function dc(A,f,p,w){return A={tag:A,create:p,deps:w,inst:f,next:null},f=dr.updateQueue,f===null&&(f=sA(),dr.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=A.next=A:(w=p.next,p.next=A,A.next=w,f.lastEffect=A),A}function Qf(){return{destroy:void 0,resource:void 0}}function n0(){return ua().memoizedState}function Ho(A,f,p,w){var R=ni();w=w===void 0?null:w,dr.flags|=A,R.memoizedState=dc(1|f,Qf(),p,w)}function ld(A,f,p,w){var R=ua();w=w===void 0?null:w;var Q=R.memoizedState.inst;wr!==null&&w!==null&&Pa(w,wr.memoizedState.deps)?R.memoizedState=dc(f,Q,p,w):(dr.flags|=A,R.memoizedState=dc(1|f,Q,p,w))}function up(A,f){Ho(8390656,8,A,f)}function v1(A,f){ld(2048,8,A,f)}function Ap(A,f){return ld(4,2,A,f)}function iA(A,f){return ld(4,4,A,f)}function y1(A,f){if(typeof f=="function"){A=A();var p=f(A);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function dp(A,f,p){p=p!=null?p.concat([A]):null,ld(4,4,y1.bind(null,f,A),p)}function fp(){}function hp(A,f){var p=ua();f=f===void 0?null:f;var w=p.memoizedState;return f!==null&&Pa(f,w[1])?w[0]:(p.memoizedState=[A,f],A)}function w1(A,f){var p=ua();f=f===void 0?null:f;var w=p.memoizedState;if(f!==null&&Pa(f,w[1]))return w[0];if(w=A(),Ya){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w}function oA(A,f,p){return p===void 0||(jn&1073741824)!==0?A.memoizedState=f:(A.memoizedState=p,A=NB(),dr.lanes|=A,md|=A,p)}function a0(A,f,p,w){return hs(p,f)?p:qr.current!==null?(A=oA(A,p,w),hs(A,f)||(Hs=!0),A):(jn&42)===0?(Hs=!0,A.memoizedState=p):(A=NB(),dr.lanes|=A,md|=A,f)}function Hf(A,f,p,w,R){var Q=ee.p;ee.p=Q!==0&&8>Q?Q:8;var oe=Z.T,be={};Z.T=be,fb(A,!1,f,p);try{var De=R(),Ze=Z.S;if(Ze!==null&&Ze(be,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var dt=d1(De,w);xp(A,f,dt,qo(A))}else xp(A,f,w,qo(A))}catch(wt){xp(A,f,{then:function(){},status:"rejected",reason:wt},qo())}finally{ee.p=Q,Z.T=oe}}function fc(){}function Sl(A,f,p,w){if(A.tag!==5)throw Error(n(476));var R=hc(A).queue;Hf(A,R,f,ae,p===null?fc:function(){return Vf(A),p(w)})}function hc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:ae},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:p},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function Vf(A){var f=hc(A).next.queue;xp(A,f,{},qo())}function zf(){return $a(Up)}function mp(){return ua().memoizedState}function b1(){return ua().memoizedState}function pp(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var p=qo();A=ct(p);var w=vt(f,A,p);w!==null&&(Ko(w,f,p),ft(w,f,p)),f={cache:sp()},A.payload=f;return}f=f.return}}function gp(A,f,p){var w=qo();p={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},C1(A)?RT(f,p):(p=tu(A,f,p,w),p!==null&&(Ko(p,A,w),LT(p,f,w)))}function DT(A,f,p){var w=qo();xp(A,f,p,w)}function xp(A,f,p,w){var R={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(C1(A))RT(f,R);else{var Q=A.alternate;if(A.lanes===0&&(Q===null||Q.lanes===0)&&(Q=f.lastRenderedReducer,Q!==null))try{var oe=f.lastRenderedState,be=Q(oe,p);if(R.hasEagerState=!0,R.eagerState=be,hs(be,oe))return eu(A,f,R,0),oa===null&&mo(),!1}catch{}finally{}if(p=tu(A,f,R,w),p!==null)return Ko(p,A,w),LT(p,f,w),!0}return!1}function fb(A,f,p,w){if(w={lane:2,revertLane:Gb(),action:w,hasEagerState:!1,eagerState:null,next:null},C1(A)){if(f)throw Error(n(479))}else f=tu(A,p,w,2),f!==null&&Ko(f,A,2)}function C1(A){var f=A.alternate;return A===dr||f!==null&&f===dr}function RT(A,f){gs=xn=!0;var p=A.pending;p===null?f.next=f:(f.next=p.next,p.next=f),A.pending=f}function LT(A,f,p){if((p&4194048)!==0){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,zr(A,p)}}var E1={readContext:$a,use:Ei,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn},UT={readContext:$a,use:Ei,useCallback:function(A,f){return ni().memoizedState=[A,f===void 0?null:f],A},useContext:$a,useEffect:up,useImperativeHandle:function(A,f,p){p=p!=null?p.concat([A]):null,Ho(4194308,4,y1.bind(null,f,A),p)},useLayoutEffect:function(A,f){return Ho(4194308,4,A,f)},useInsertionEffect:function(A,f){Ho(4,2,A,f)},useMemo:function(A,f){var p=ni();f=f===void 0?null:f;var w=A();if(Ya){Wt(!0);try{A()}finally{Wt(!1)}}return p.memoizedState=[w,f],w},useReducer:function(A,f,p){var w=ni();if(p!==void 0){var R=p(f);if(Ya){Wt(!0);try{p(f)}finally{Wt(!1)}}}else R=f;return w.memoizedState=w.baseState=R,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:R},w.queue=A,A=A.dispatch=gp.bind(null,dr,A),[w.memoizedState,A]},useRef:function(A){var f=ni();return A={current:A},f.memoizedState=A},useState:function(A){A=jf(A);var f=A.queue,p=DT.bind(null,dr,f);return f.dispatch=p,[A.memoizedState,p]},useDebugValue:fp,useDeferredValue:function(A,f){var p=ni();return oA(p,A,f)},useTransition:function(){var A=jf(!1);return A=Hf.bind(null,dr,A.queue,!0,!1),ni().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,p){var w=dr,R=ni();if(wn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),oa===null)throw Error(n(349));(vn&124)!==0||t0(w,f,p)}R.memoizedState=p;var Q={value:p,getSnapshot:f};return R.queue=Q,up(sd.bind(null,w,Q,A),[A]),w.flags|=2048,dc(9,Qf(),Pf.bind(null,w,Q,p,f),null),p},useId:function(){var A=ni(),f=oa.identifierPrefix;if(wn){var p=oc,w=ic;p=(w&~(1<<32-Dt(w)-1)).toString(32)+p,f="«"+f+"R"+p,p=_a++,0<p&&(f+="H"+p.toString(32)),f+="»"}else p=xo++,f="«"+f+"r"+p.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:zf,useFormState:Of,useActionState:Of,useOptimistic:function(A){var f=ni();f.memoizedState=f.baseState=A;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=fb.bind(null,dr,!0,p),p.dispatch=f,[A,f]},useMemoCache:cu,useCacheRefresh:function(){return ni().memoizedState=pp.bind(null,dr)}},MT={readContext:$a,use:Ei,useCallback:hp,useContext:$a,useEffect:v1,useImperativeHandle:dp,useInsertionEffect:Ap,useLayoutEffect:iA,useMemo:w1,useReducer:Uf,useRef:n0,useState:function(){return Uf(_i)},useDebugValue:fp,useDeferredValue:function(A,f){var p=ua();return a0(p,wr.memoizedState,A,f)},useTransition:function(){var A=Uf(_i)[0],f=ua().memoizedState;return[typeof A=="boolean"?A:lu(A),f]},useSyncExternalStore:Mf,useId:mp,useHostTransitionStatus:zf,useFormState:r0,useActionState:r0,useOptimistic:function(A,f){var p=ua();return Ac(p,wr,A,f)},useMemoCache:cu,useCacheRefresh:b1},WQ={readContext:$a,use:Ei,useCallback:hp,useContext:$a,useEffect:v1,useImperativeHandle:dp,useInsertionEffect:Ap,useLayoutEffect:iA,useMemo:w1,useReducer:e0,useRef:n0,useState:function(){return e0(_i)},useDebugValue:fp,useDeferredValue:function(A,f){var p=ua();return wr===null?oA(p,A,f):a0(p,wr.memoizedState,A,f)},useTransition:function(){var A=e0(_i)[0],f=ua().memoizedState;return[typeof A=="boolean"?A:lu(A),f]},useSyncExternalStore:Mf,useId:mp,useHostTransitionStatus:zf,useFormState:x1,useActionState:x1,useOptimistic:function(A,f){var p=ua();return wr!==null?Ac(p,wr,A,f):(p.baseState=A,[A,p.queue.dispatch])},useMemoCache:cu,useCacheRefresh:b1},s0=null,vp=0;function _1(A){var f=vp;return vp+=1,s0===null&&(s0=[]),Xe(s0,A,f)}function yp(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function S1(A,f){throw f.$$typeof===h?Error(n(525)):(A=Object.prototype.toString.call(f),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function PT(A){var f=A._init;return f(A._payload)}function jT(A){function f(Ge,Pe){if(A){var $e=Ge.deletions;$e===null?(Ge.deletions=[Pe],Ge.flags|=16):$e.push(Pe)}}function p(Ge,Pe){if(!A)return null;for(;Pe!==null;)f(Ge,Pe),Pe=Pe.sibling;return null}function w(Ge){for(var Pe=new Map;Ge!==null;)Ge.key!==null?Pe.set(Ge.key,Ge):Pe.set(Ge.index,Ge),Ge=Ge.sibling;return Pe}function R(Ge,Pe){return Ge=wl(Ge,Pe),Ge.index=0,Ge.sibling=null,Ge}function Q(Ge,Pe,$e){return Ge.index=$e,A?($e=Ge.alternate,$e!==null?($e=$e.index,$e<Pe?(Ge.flags|=67108866,Pe):$e):(Ge.flags|=67108866,Pe)):(Ge.flags|=1048576,Pe)}function oe(Ge){return A&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function be(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==6?(Pe=Kh($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=R(Pe,$e),Pe.return=Ge,Pe)}function De(Ge,Pe,$e,pt){var er=$e.type;return er===b?dt(Ge,Pe,$e.props.children,pt,$e.key):Pe!==null&&(Pe.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===S&&PT(er)===Pe.type)?(Pe=R(Pe,$e.props),yp(Pe,$e),Pe.return=Ge,Pe):(Pe=Zu($e.type,$e.key,$e.props,null,Ge.mode,pt),yp(Pe,$e),Pe.return=Ge,Pe)}function Ze(Ge,Pe,$e,pt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==$e.containerInfo||Pe.stateNode.implementation!==$e.implementation?(Pe=kf($e,Ge.mode,pt),Pe.return=Ge,Pe):(Pe=R(Pe,$e.children||[]),Pe.return=Ge,Pe)}function dt(Ge,Pe,$e,pt,er){return Pe===null||Pe.tag!==7?(Pe=ac($e,Ge.mode,pt,er),Pe.return=Ge,Pe):(Pe=R(Pe,$e),Pe.return=Ge,Pe)}function wt(Ge,Pe,$e){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Kh(""+Pe,Ge.mode,$e),Pe.return=Ge,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case m:return $e=Zu(Pe.type,Pe.key,Pe.props,null,Ge.mode,$e),yp($e,Pe),$e.return=Ge,$e;case g:return Pe=kf(Pe,Ge.mode,$e),Pe.return=Ge,Pe;case S:var pt=Pe._init;return Pe=pt(Pe._payload),wt(Ge,Pe,$e)}if(ne(Pe)||I(Pe))return Pe=ac(Pe,Ge.mode,$e,null),Pe.return=Ge,Pe;if(typeof Pe.then=="function")return wt(Ge,_1(Pe),$e);if(Pe.$$typeof===F)return wt(Ge,su(Ge,Pe),$e);S1(Ge,Pe)}return null}function rt(Ge,Pe,$e,pt){var er=Pe!==null?Pe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return er!==null?null:be(Ge,Pe,""+$e,pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:return $e.key===er?De(Ge,Pe,$e,pt):null;case g:return $e.key===er?Ze(Ge,Pe,$e,pt):null;case S:return er=$e._init,$e=er($e._payload),rt(Ge,Pe,$e,pt)}if(ne($e)||I($e))return er!==null?null:dt(Ge,Pe,$e,pt,null);if(typeof $e.then=="function")return rt(Ge,Pe,_1($e),pt);if($e.$$typeof===F)return rt(Ge,Pe,su(Ge,$e),pt);S1(Ge,$e)}return null}function at(Ge,Pe,$e,pt,er){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ge=Ge.get($e)||null,be(Pe,Ge,""+pt,er);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case m:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,De(Pe,Ge,pt,er);case g:return Ge=Ge.get(pt.key===null?$e:pt.key)||null,Ze(Pe,Ge,pt,er);case S:var en=pt._init;return pt=en(pt._payload),at(Ge,Pe,$e,pt,er)}if(ne(pt)||I(pt))return Ge=Ge.get($e)||null,dt(Pe,Ge,pt,er,null);if(typeof pt.then=="function")return at(Ge,Pe,$e,_1(pt),er);if(pt.$$typeof===F)return at(Ge,Pe,$e,su(Pe,pt),er);S1(Pe,pt)}return null}function Sr(Ge,Pe,$e,pt){for(var er=null,en=null,sr=Pe,xr=Pe=0,zs=null;sr!==null&&xr<$e.length;xr++){sr.index>xr?(zs=sr,sr=null):zs=sr.sibling;var Nn=rt(Ge,sr,$e[xr],pt);if(Nn===null){sr===null&&(sr=zs);break}A&&sr&&Nn.alternate===null&&f(Ge,sr),Pe=Q(Nn,Pe,xr),en===null?er=Nn:en.sibling=Nn,en=Nn,sr=zs}if(xr===$e.length)return p(Ge,sr),wn&&tA(Ge,xr),er;if(sr===null){for(;xr<$e.length;xr++)sr=wt(Ge,$e[xr],pt),sr!==null&&(Pe=Q(sr,Pe,xr),en===null?er=sr:en.sibling=sr,en=sr);return wn&&tA(Ge,xr),er}for(sr=w(sr);xr<$e.length;xr++)zs=at(sr,Ge,xr,$e[xr],pt),zs!==null&&(A&&zs.alternate!==null&&sr.delete(zs.key===null?xr:zs.key),Pe=Q(zs,Pe,xr),en===null?er=zs:en.sibling=zs,en=zs);return A&&sr.forEach(function(Ed){return f(Ge,Ed)}),wn&&tA(Ge,xr),er}function pr(Ge,Pe,$e,pt){if($e==null)throw Error(n(151));for(var er=null,en=null,sr=Pe,xr=Pe=0,zs=null,Nn=$e.next();sr!==null&&!Nn.done;xr++,Nn=$e.next()){sr.index>xr?(zs=sr,sr=null):zs=sr.sibling;var Ed=rt(Ge,sr,Nn.value,pt);if(Ed===null){sr===null&&(sr=zs);break}A&&sr&&Ed.alternate===null&&f(Ge,sr),Pe=Q(Ed,Pe,xr),en===null?er=Ed:en.sibling=Ed,en=Ed,sr=zs}if(Nn.done)return p(Ge,sr),wn&&tA(Ge,xr),er;if(sr===null){for(;!Nn.done;xr++,Nn=$e.next())Nn=wt(Ge,Nn.value,pt),Nn!==null&&(Pe=Q(Nn,Pe,xr),en===null?er=Nn:en.sibling=Nn,en=Nn);return wn&&tA(Ge,xr),er}for(sr=w(sr);!Nn.done;xr++,Nn=$e.next())Nn=at(sr,Ge,xr,Nn.value,pt),Nn!==null&&(A&&Nn.alternate!==null&&sr.delete(Nn.key===null?xr:Nn.key),Pe=Q(Nn,Pe,xr),en===null?er=Nn:en.sibling=Nn,en=Nn);return A&&sr.forEach(function($9){return f(Ge,$9)}),wn&&tA(Ge,xr),er}function Zn(Ge,Pe,$e,pt){if(typeof $e=="object"&&$e!==null&&$e.type===b&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case m:e:{for(var er=$e.key;Pe!==null;){if(Pe.key===er){if(er=$e.type,er===b){if(Pe.tag===7){p(Ge,Pe.sibling),pt=R(Pe,$e.props.children),pt.return=Ge,Ge=pt;break e}}else if(Pe.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===S&&PT(er)===Pe.type){p(Ge,Pe.sibling),pt=R(Pe,$e.props),yp(pt,$e),pt.return=Ge,Ge=pt;break e}p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}$e.type===b?(pt=ac($e.props.children,Ge.mode,pt,$e.key),pt.return=Ge,Ge=pt):(pt=Zu($e.type,$e.key,$e.props,null,Ge.mode,pt),yp(pt,$e),pt.return=Ge,Ge=pt)}return oe(Ge);case g:e:{for(er=$e.key;Pe!==null;){if(Pe.key===er)if(Pe.tag===4&&Pe.stateNode.containerInfo===$e.containerInfo&&Pe.stateNode.implementation===$e.implementation){p(Ge,Pe.sibling),pt=R(Pe,$e.children||[]),pt.return=Ge,Ge=pt;break e}else{p(Ge,Pe);break}else f(Ge,Pe);Pe=Pe.sibling}pt=kf($e,Ge.mode,pt),pt.return=Ge,Ge=pt}return oe(Ge);case S:return er=$e._init,$e=er($e._payload),Zn(Ge,Pe,$e,pt)}if(ne($e))return Sr(Ge,Pe,$e,pt);if(I($e)){if(er=I($e),typeof er!="function")throw Error(n(150));return $e=er.call($e),pr(Ge,Pe,$e,pt)}if(typeof $e.then=="function")return Zn(Ge,Pe,_1($e),pt);if($e.$$typeof===F)return Zn(Ge,Pe,su(Ge,$e),pt);S1(Ge,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Pe!==null&&Pe.tag===6?(p(Ge,Pe.sibling),pt=R(Pe,$e),pt.return=Ge,Ge=pt):(p(Ge,Pe),pt=Kh($e,Ge.mode,pt),pt.return=Ge,Ge=pt),oe(Ge)):p(Ge,Pe)}return function(Ge,Pe,$e,pt){try{vp=0;var er=Zn(Ge,Pe,$e,pt);return s0=null,er}catch(sr){if(sr===he||sr===ve)throw sr;var en=Qs(29,sr,null,Ge.mode);return en.lanes=pt,en.return=Ge,en}finally{}}}var i0=jT(!0),OT=jT(!1),Tl=le(null),uu=null;function cd(A){var f=A.alternate;W(Fs,Fs.current&1),W(Tl,A),uu===null&&(f===null||qr.current!==null||f.memoizedState!==null)&&(uu=A)}function QT(A){if(A.tag===22){if(W(Fs,Fs.current),W(Tl,A),uu===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(uu=A)}}else ud()}function ud(){W(Fs,Fs.current),W(Tl,Tl.current)}function lA(A){O(Tl),uu===A&&(uu=null),O(Fs)}var Fs=le(0);function T1(A){for(var f=A;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||nC(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function hb(A,f,p,w){f=A.memoizedState,p=p(w,f),p=p==null?f:d({},f,p),A.memoizedState=p,A.lanes===0&&(A.updateQueue.baseState=p)}var mb={enqueueSetState:function(A,f,p){A=A._reactInternals;var w=qo(),R=ct(w);R.payload=f,p!=null&&(R.callback=p),f=vt(A,R,w),f!==null&&(Ko(f,A,w),ft(f,A,w))},enqueueReplaceState:function(A,f,p){A=A._reactInternals;var w=qo(),R=ct(w);R.tag=1,R.payload=f,p!=null&&(R.callback=p),f=vt(A,R,w),f!==null&&(Ko(f,A,w),ft(f,A,w))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var p=qo(),w=ct(p);w.tag=2,f!=null&&(w.callback=f),f=vt(A,w,p),f!==null&&(Ko(f,A,p),ft(f,A,p))}};function HT(A,f,p,w,R,Q,oe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,Q,oe):f.prototype&&f.prototype.isPureReactComponent?!Kc(p,w)||!Kc(R,Q):!0}function VT(A,f,p,w){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,w),f.state!==A&&mb.enqueueReplaceState(f,f.state,null)}function Gf(A,f){var p=f;if("ref"in f){p={};for(var w in f)w!=="ref"&&(p[w]=f[w])}if(A=A.defaultProps){p===f&&(p=d({},p));for(var R in A)p[R]===void 0&&(p[R]=A[R])}return p}var B1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function zT(A){B1(A)}function GT(A){console.error(A)}function qT(A){B1(A)}function N1(A,f){try{var p=A.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function KT(A,f,p){try{var w=A.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function pb(A,f,p){return p=ct(p),p.tag=3,p.payload={element:null},p.callback=function(){N1(A,f)},p}function WT(A){return A=ct(A),A.tag=3,A}function $T(A,f,p,w){var R=p.type.getDerivedStateFromError;if(typeof R=="function"){var Q=w.value;A.payload=function(){return R(Q)},A.callback=function(){KT(f,p,w)}}var oe=p.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(A.callback=function(){KT(f,p,w),typeof R!="function"&&(pd===null?pd=new Set([this]):pd.add(this));var be=w.stack;this.componentDidCatch(w.value,{componentStack:be!==null?be:""})})}function $Q(A,f,p,w,R){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=p.alternate,f!==null&&nd(f,p,R,!0),p=Tl.current,p!==null){switch(p.tag){case 13:return uu===null?Ob():p.alternate===null&&ja===0&&(ja=3),p.flags&=-257,p.flags|=65536,p.lanes=R,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([w]):f.add(w),Hb(A,w,R)),!1;case 22:return p.flags|=65536,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([w]):p.add(w)),Hb(A,w,R)),!1}throw Error(n(435,p.tag))}return Hb(A,w,R),Ob(),!1}if(wn)return f=Tl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,w!==ap&&(A=Error(n(422),{cause:w}),rd(Kr(A,p)))):(w!==ap&&(f=Error(n(423),{cause:w}),rd(Kr(f,p))),A=A.current.alternate,A.flags|=65536,R&=-R,A.lanes|=R,w=Kr(w,p),R=pb(A.stateNode,w,R),zt(A,R),ja!==4&&(ja=2)),!1;var Q=Error(n(520),{cause:w});if(Q=Kr(Q,p),Tp===null?Tp=[Q]:Tp.push(Q),ja!==4&&(ja=2),f===null)return!0;w=Kr(w,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,A=R&-R,p.lanes|=A,A=pb(p.stateNode,w,A),zt(p,A),!1;case 1:if(f=p.type,Q=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(pd===null||!pd.has(Q))))return p.flags|=65536,R&=-R,p.lanes|=R,R=WT(R),$T(R,A,p,w),zt(p,R),!1}p=p.return}while(p!==null);return!1}var XT=Error(n(461)),Hs=!1;function ai(A,f,p,w){f.child=A===null?OT(f,null,p,w):i0(f,A.child,p,w)}function YT(A,f,p,w,R){p=p.render;var Q=f.ref;if("ref"in w){var oe={};for(var be in w)be!=="ref"&&(oe[be]=w[be])}else oe=w;return _l(f),w=Qo(A,f,p,oe,Q,R),be=ia(),A!==null&&!Hs?(Lf(A,f,R),cA(A,f,R)):(wn&&be&&If(f),f.flags|=1,ai(A,f,w,R),f.child)}function JT(A,f,p,w,R){if(A===null){var Q=p.type;return typeof Q=="function"&&!ed(Q)&&Q.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=Q,ZT(A,f,Q,w,R)):(A=Zu(p.type,null,w,f,f.mode,R),A.ref=f.ref,A.return=f,f.child=A)}if(Q=A.child,!Eb(A,R)){var oe=Q.memoizedProps;if(p=p.compare,p=p!==null?p:Kc,p(oe,w)&&A.ref===f.ref)return cA(A,f,R)}return f.flags|=1,A=wl(Q,w),A.ref=f.ref,A.return=f,f.child=A}function ZT(A,f,p,w,R){if(A!==null){var Q=A.memoizedProps;if(Kc(Q,w)&&A.ref===f.ref)if(Hs=!1,f.pendingProps=w=Q,Eb(A,R))(A.flags&131072)!==0&&(Hs=!0);else return f.lanes=A.lanes,cA(A,f,R)}return gb(A,f,p,w,R)}function eB(A,f,p){var w=f.pendingProps,R=w.children,Q=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=Q!==null?Q.baseLanes|p:p,A!==null){for(R=f.child=A.child,Q=0;R!==null;)Q=Q|R.lanes|R.childLanes,R=R.sibling;f.childLanes=Q&~w}else f.childLanes=0,f.child=null;return tB(A,f,w,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&re(f,Q!==null?Q.cachePool:null),Q!==null?Rn(f,Q):Tn(),QT(f);else return f.lanes=f.childLanes=536870912,tB(A,f,Q!==null?Q.baseLanes|p:p,p)}else Q!==null?(re(f,Q.cachePool),Rn(f,Q),ud(),f.memoizedState=null):(A!==null&&re(f,null),Tn(),ud());return ai(A,f,R,p),f.child}function tB(A,f,p,w){var R=q();return R=R===null?null:{parent:Xa._currentValue,pool:R},f.memoizedState={baseLanes:p,cachePool:R},A!==null&&re(f,null),Tn(),QT(f),A!==null&&nd(A,f,w,!0),null}function k1(A,f){var p=f.ref;if(p===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(A===null||A.ref!==p)&&(f.flags|=4194816)}}function gb(A,f,p,w,R){return _l(f),p=Qo(A,f,p,w,void 0,R),w=ia(),A!==null&&!Hs?(Lf(A,f,R),cA(A,f,R)):(wn&&w&&If(f),f.flags|=1,ai(A,f,p,R),f.child)}function rB(A,f,p,w,R,Q){return _l(f),f.updateQueue=null,p=aA(f,w,p,R),iu(A),w=ia(),A!==null&&!Hs?(Lf(A,f,Q),cA(A,f,Q)):(wn&&w&&If(f),f.flags|=1,ai(A,f,p,Q),f.child)}function nB(A,f,p,w,R){if(_l(f),f.stateNode===null){var Q=ms,oe=p.contextType;typeof oe=="object"&&oe!==null&&(Q=$a(oe)),Q=new p(w,Q),f.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Q.updater=mb,f.stateNode=Q,Q._reactInternals=f,Q=f.stateNode,Q.props=w,Q.state=f.memoizedState,Q.refs={},Me(f),oe=p.contextType,Q.context=typeof oe=="object"&&oe!==null?$a(oe):ms,Q.state=f.memoizedState,oe=p.getDerivedStateFromProps,typeof oe=="function"&&(hb(f,p,oe,w),Q.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(oe=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),oe!==Q.state&&mb.enqueueReplaceState(Q,Q.state,null),Ot(f,w,Q,R),nr(),Q.state=f.memoizedState),typeof Q.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(A===null){Q=f.stateNode;var be=f.memoizedProps,De=Gf(p,be);Q.props=De;var Ze=Q.context,dt=p.contextType;oe=ms,typeof dt=="object"&&dt!==null&&(oe=$a(dt));var wt=p.getDerivedStateFromProps;dt=typeof wt=="function"||typeof Q.getSnapshotBeforeUpdate=="function",be=f.pendingProps!==be,dt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(be||Ze!==oe)&&VT(f,Q,w,oe),it=!1;var rt=f.memoizedState;Q.state=rt,Ot(f,w,Q,R),nr(),Ze=f.memoizedState,be||rt!==Ze||it?(typeof wt=="function"&&(hb(f,p,wt,w),Ze=f.memoizedState),(De=it||HT(f,p,De,w,rt,Ze,oe))?(dt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=Ze),Q.props=w,Q.state=Ze,Q.context=oe,w=De):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{Q=f.stateNode,Oe(A,f),oe=f.memoizedProps,dt=Gf(p,oe),Q.props=dt,wt=f.pendingProps,rt=Q.context,Ze=p.contextType,De=ms,typeof Ze=="object"&&Ze!==null&&(De=$a(Ze)),be=p.getDerivedStateFromProps,(Ze=typeof be=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(oe!==wt||rt!==De)&&VT(f,Q,w,De),it=!1,rt=f.memoizedState,Q.state=rt,Ot(f,w,Q,R),nr();var at=f.memoizedState;oe!==wt||rt!==at||it||A!==null&&A.dependencies!==null&&Yh(A.dependencies)?(typeof be=="function"&&(hb(f,p,be,w),at=f.memoizedState),(dt=it||HT(f,p,dt,w,rt,at,De)||A!==null&&A.dependencies!==null&&Yh(A.dependencies))?(Ze||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(w,at,De),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(w,at,De)),typeof Q.componentDidUpdate=="function"&&(f.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Q.componentDidUpdate!="function"||oe===A.memoizedProps&&rt===A.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||oe===A.memoizedProps&&rt===A.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=at),Q.props=w,Q.state=at,Q.context=De,w=dt):(typeof Q.componentDidUpdate!="function"||oe===A.memoizedProps&&rt===A.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||oe===A.memoizedProps&&rt===A.memoizedState||(f.flags|=1024),w=!1)}return Q=w,k1(A,f),w=(f.flags&128)!==0,Q||w?(Q=f.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:Q.render(),f.flags|=1,A!==null&&w?(f.child=i0(f,A.child,null,R),f.child=i0(f,null,p,R)):ai(A,f,p,R),f.memoizedState=Q.state,A=f.child):A=cA(A,f,R),A}function aB(A,f,p,w){return Yi(),f.flags|=256,ai(A,f,p,w),f.child}var xb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vb(A){return{baseLanes:A,cachePool:ue()}}function yb(A,f,p){return A=A!==null?A.childLanes&~p:0,f&&(A|=Bl),A}function sB(A,f,p){var w=f.pendingProps,R=!1,Q=(f.flags&128)!==0,oe;if((oe=Q)||(oe=A!==null&&A.memoizedState===null?!1:(Fs.current&2)!==0),oe&&(R=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,A===null){if(wn){if(R?cd(f):ud(),wn){var be=va,De;if(De=be){e:{for(De=be,be=bl;De.nodeType!==8;){if(!be){be=null;break e}if(De=pc(De.nextSibling),De===null){be=null;break e}}be=De}be!==null?(f.memoizedState={dehydrated:be,treeContext:eA!==null?{id:ic,overflow:oc}:null,retryLane:536870912,hydrationErrors:null},De=Qs(18,null,null,0),De.stateNode=be,De.return=f,f.child=De,Wa=f,va=null,De=!0):De=!1}De||rA(f)}if(be=f.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return nC(be)?f.lanes=32:f.lanes=536870912,null;lA(f)}return be=w.children,w=w.fallback,R?(ud(),R=f.mode,be=I1({mode:"hidden",children:be},R),w=ac(w,R,p,null),be.return=f,w.return=f,be.sibling=w,f.child=be,R=f.child,R.memoizedState=vb(p),R.childLanes=yb(A,oe,p),f.memoizedState=xb,w):(cd(f),wb(f,be))}if(De=A.memoizedState,De!==null&&(be=De.dehydrated,be!==null)){if(Q)f.flags&256?(cd(f),f.flags&=-257,f=bb(A,f,p)):f.memoizedState!==null?(ud(),f.child=A.child,f.flags|=128,f=null):(ud(),R=w.fallback,be=f.mode,w=I1({mode:"visible",children:w.children},be),R=ac(R,be,p,null),R.flags|=2,w.return=f,R.return=f,w.sibling=R,f.child=w,i0(f,A.child,null,p),w=f.child,w.memoizedState=vb(p),w.childLanes=yb(A,oe,p),f.memoizedState=xb,f=R);else if(cd(f),nC(be)){if(oe=be.nextSibling&&be.nextSibling.dataset,oe)var Ze=oe.dgst;oe=Ze,w=Error(n(419)),w.stack="",w.digest=oe,rd({value:w,source:null,stack:null}),f=bb(A,f,p)}else if(Hs||nd(A,f,p,!1),oe=(p&A.childLanes)!==0,Hs||oe){if(oe=oa,oe!==null&&(w=p&-p,w=(w&42)!==0?1:As(w),w=(w&(oe.suspendedLanes|p))!==0?0:w,w!==0&&w!==De.retryLane))throw De.retryLane=w,nc(A,w),Ko(oe,A,w),XT;be.data==="$?"||Ob(),f=bb(A,f,p)}else be.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=De.treeContext,va=pc(be.nextSibling),Wa=f,wn=!0,nu=null,bl=!1,A!==null&&(go[Xi++]=ic,go[Xi++]=oc,go[Xi++]=eA,ic=A.id,oc=A.overflow,eA=f),f=wb(f,w.children),f.flags|=4096);return f}return R?(ud(),R=w.fallback,be=f.mode,De=A.child,Ze=De.sibling,w=wl(De,{mode:"hidden",children:w.children}),w.subtreeFlags=De.subtreeFlags&65011712,Ze!==null?R=wl(Ze,R):(R=ac(R,be,p,null),R.flags|=2),R.return=f,w.return=f,w.sibling=R,f.child=w,w=R,R=f.child,be=A.child.memoizedState,be===null?be=vb(p):(De=be.cachePool,De!==null?(Ze=Xa._currentValue,De=De.parent!==Ze?{parent:Ze,pool:Ze}:De):De=ue(),be={baseLanes:be.baseLanes|p,cachePool:De}),R.memoizedState=be,R.childLanes=yb(A,oe,p),f.memoizedState=xb,w):(cd(f),p=A.child,A=p.sibling,p=wl(p,{mode:"visible",children:w.children}),p.return=f,p.sibling=null,A!==null&&(oe=f.deletions,oe===null?(f.deletions=[A],f.flags|=16):oe.push(A)),f.child=p,f.memoizedState=null,p)}function wb(A,f){return f=I1({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function I1(A,f){return A=Qs(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function bb(A,f,p){return i0(f,A.child,null,p),A=wb(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function iB(A,f,p){A.lanes|=f;var w=A.alternate;w!==null&&(w.lanes|=f),$h(A.return,f,p)}function Cb(A,f,p,w,R){var Q=A.memoizedState;Q===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:R}:(Q.isBackwards=f,Q.rendering=null,Q.renderingStartTime=0,Q.last=w,Q.tail=p,Q.tailMode=R)}function oB(A,f,p){var w=f.pendingProps,R=w.revealOrder,Q=w.tail;if(ai(A,f,w.children,p),w=Fs.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&iB(A,p,f);else if(A.tag===19)iB(A,p,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(W(Fs,w),R){case"forwards":for(p=f.child,R=null;p!==null;)A=p.alternate,A!==null&&T1(A)===null&&(R=p),p=p.sibling;p=R,p===null?(R=f.child,f.child=null):(R=p.sibling,p.sibling=null),Cb(f,!1,R,p,Q);break;case"backwards":for(p=null,R=f.child,f.child=null;R!==null;){if(A=R.alternate,A!==null&&T1(A)===null){f.child=R;break}A=R.sibling,R.sibling=p,p=R,R=A}Cb(f,!0,p,null,Q);break;case"together":Cb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function cA(A,f,p){if(A!==null&&(f.dependencies=A.dependencies),md|=f.lanes,(p&f.childLanes)===0)if(A!==null){if(nd(A,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(n(153));if(f.child!==null){for(A=f.child,p=wl(A,A.pendingProps),f.child=p,p.return=f;A.sibling!==null;)A=A.sibling,p=p.sibling=wl(A,A.pendingProps),p.return=f;p.sibling=null}return f.child}function Eb(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&Yh(A)))}function XQ(A,f,p){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),au(f,Xa,A.memoizedState.cache),Yi();break;case 27:case 5:Se(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:au(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(cd(f),f.flags|=128,null):(p&f.child.childLanes)!==0?sB(A,f,p):(cd(f),A=cA(A,f,p),A!==null?A.sibling:null);cd(f);break;case 19:var R=(A.flags&128)!==0;if(w=(p&f.childLanes)!==0,w||(nd(A,f,p,!1),w=(p&f.childLanes)!==0),R){if(w)return oB(A,f,p);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),W(Fs,Fs.current),w)break;return null;case 22:case 23:return f.lanes=0,eB(A,f,p);case 24:au(f,Xa,A.memoizedState.cache)}return cA(A,f,p)}function lB(A,f,p){if(A!==null)if(A.memoizedProps!==f.pendingProps)Hs=!0;else{if(!Eb(A,p)&&(f.flags&128)===0)return Hs=!1,XQ(A,f,p);Hs=(A.flags&131072)!==0}else Hs=!1,wn&&(f.flags&1048576)!==0&&o1(f,Wh,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var w=f.elementType,R=w._init;if(w=R(w._payload),f.type=w,typeof w=="function")ed(w)?(A=Gf(w,A),f.tag=1,f=nB(null,f,w,A,p)):(f.tag=0,f=gb(null,f,w,A,p));else{if(w!=null){if(R=w.$$typeof,R===U){f.tag=11,f=YT(null,f,w,A,p);break e}else if(R===C){f.tag=14,f=JT(null,f,w,A,p);break e}}throw f=z(w)||w,Error(n(306,f,""))}}return f;case 0:return gb(A,f,f.type,f.pendingProps,p);case 1:return w=f.type,R=Gf(w,f.pendingProps),nB(A,f,w,R,p);case 3:e:{if(me(f,f.stateNode.containerInfo),A===null)throw Error(n(387));w=f.pendingProps;var Q=f.memoizedState;R=Q.element,Oe(A,f),Ot(f,w,null,p);var oe=f.memoizedState;if(w=oe.cache,au(f,Xa,w),w!==Q.cache&&Xh(f,[Xa],p,!0),nr(),w=oe.element,Q.isDehydrated)if(Q={element:w,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=Q,f.memoizedState=Q,f.flags&256){f=aB(A,f,w,p);break e}else if(w!==R){R=Kr(Error(n(424)),f),rd(R),f=aB(A,f,w,p);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(va=pc(A.firstChild),Wa=f,wn=!0,nu=null,bl=!0,p=OT(f,null,w,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Yi(),w===R){f=cA(A,f,p);break e}ai(A,f,w,p)}f=f.child}return f;case 26:return k1(A,f),A===null?(p=dN(f.type,null,f.pendingProps,null))?f.memoizedState=p:wn||(p=f.type,A=f.pendingProps,w=G1(ce.current).createElement(p),w[hn]=f,w[sn]=A,ii(w,p,A),He(w),f.stateNode=w):f.memoizedState=dN(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return Se(f),A===null&&wn&&(w=f.stateNode=cN(f.type,f.pendingProps,ce.current),Wa=f,bl=!0,R=va,vd(f.type)?(aC=R,va=pc(w.firstChild)):va=R),ai(A,f,f.pendingProps.children,p),k1(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&wn&&((R=w=va)&&(w=E9(w,f.type,f.pendingProps,bl),w!==null?(f.stateNode=w,Wa=f,va=pc(w.firstChild),bl=!1,R=!0):R=!1),R||rA(f)),Se(f),R=f.type,Q=f.pendingProps,oe=A!==null?A.memoizedProps:null,w=Q.children,eC(R,Q)?w=null:oe!==null&&eC(R,oe)&&(f.flags|=32),f.memoizedState!==null&&(R=Qo(A,f,ou,null,null,p),Up._currentValue=R),k1(A,f),ai(A,f,w,p),f.child;case 6:return A===null&&wn&&((A=p=va)&&(p=_9(p,f.pendingProps,bl),p!==null?(f.stateNode=p,Wa=f,va=null,A=!0):A=!1),A||rA(f)),null;case 13:return sB(A,f,p);case 4:return me(f,f.stateNode.containerInfo),w=f.pendingProps,A===null?f.child=i0(f,null,w,p):ai(A,f,w,p),f.child;case 11:return YT(A,f,f.type,f.pendingProps,p);case 7:return ai(A,f,f.pendingProps,p),f.child;case 8:return ai(A,f,f.pendingProps.children,p),f.child;case 12:return ai(A,f,f.pendingProps.children,p),f.child;case 10:return w=f.pendingProps,au(f,f.type,w.value),ai(A,f,w.children,p),f.child;case 9:return R=f.type._context,w=f.pendingProps.children,_l(f),R=$a(R),w=w(R),f.flags|=1,ai(A,f,w,p),f.child;case 14:return JT(A,f,f.type,f.pendingProps,p);case 15:return ZT(A,f,f.type,f.pendingProps,p);case 19:return oB(A,f,p);case 31:return w=f.pendingProps,p=f.mode,w={mode:w.mode,children:w.children},A===null?(p=I1(w,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=wl(A.child,w),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return eB(A,f,p);case 24:return _l(f),w=$a(Xa),A===null?(R=q(),R===null&&(R=oa,Q=sp(),R.pooledCache=Q,Q.refCount++,Q!==null&&(R.pooledCacheLanes|=p),R=Q),f.memoizedState={parent:w,cache:R},Me(f),au(f,Xa,R)):((A.lanes&p)!==0&&(Oe(A,f),Ot(f,null,null,p),nr()),R=A.memoizedState,Q=f.memoizedState,R.parent!==w?(R={parent:w,cache:w},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),au(f,Xa,w)):(w=Q.cache,au(f,Xa,w),w!==R.cache&&Xh(f,[Xa],p,!0))),ai(A,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function uA(A){A.flags|=4}function cB(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!gN(f)){if(f=Tl.current,f!==null&&((vn&4194048)===vn?uu!==null:(vn&62914560)!==vn&&(vn&536870912)===0||f!==uu))throw Ke=Ce,pe;A.flags|=8192}}function F1(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?an():536870912,A.lanes|=f,u0|=f)}function wp(A,f){if(!wn)switch(A.tailMode){case"hidden":f=A.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?A.tail=null:p.sibling=null;break;case"collapsed":p=A.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function Ta(A){var f=A.alternate!==null&&A.alternate.child===A.child,p=0,w=0;if(f)for(var R=A.child;R!==null;)p|=R.lanes|R.childLanes,w|=R.subtreeFlags&65011712,w|=R.flags&65011712,R.return=A,R=R.sibling;else for(R=A.child;R!==null;)p|=R.lanes|R.childLanes,w|=R.subtreeFlags,w|=R.flags,R.return=A,R=R.sibling;return A.subtreeFlags|=w,A.childLanes=p,f}function YQ(A,f,p){var w=f.pendingProps;switch(Ff(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(f),null;case 1:return Ta(f),null;case 3:return p=f.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),El(Xa),ge(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(A===null||A.child===null)&&(ri(f)?uA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,c1())),Ta(f),null;case 26:return p=f.memoizedState,A===null?(uA(f),p!==null?(Ta(f),cB(f,p)):(Ta(f),f.flags&=-16777217)):p?p!==A.memoizedState?(uA(f),Ta(f),cB(f,p)):(Ta(f),f.flags&=-16777217):(A.memoizedProps!==w&&uA(f),Ta(f),f.flags&=-16777217),null;case 27:xe(f),p=ce.current;var R=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==w&&uA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Ta(f),null}A=Y.current,ri(f)?l1(f):(A=cN(R,w,p),f.stateNode=A,uA(f))}return Ta(f),null;case 5:if(xe(f),p=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==w&&uA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return Ta(f),null}if(A=Y.current,ri(f))l1(f);else{switch(R=G1(ce.current),A){case 1:A=R.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:A=R.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":A=R.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":A=R.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":A=R.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?R.createElement("select",{is:w.is}):R.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?R.createElement(p,{is:w.is}):R.createElement(p)}}A[hn]=f,A[sn]=w;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)A.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=A;e:switch(ii(A,p,w),p){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&uA(f)}}return Ta(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==w&&uA(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(n(166));if(A=ce.current,ri(f)){if(A=f.stateNode,p=f.memoizedProps,w=null,R=Wa,R!==null)switch(R.tag){case 27:case 5:w=R.memoizedProps}A[hn]=f,A=!!(A.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||rN(A.nodeValue,p)),A||rA(f)}else A=G1(A).createTextNode(w),A[hn]=f,f.stateNode=A}return Ta(f),null;case 13:if(w=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(R=ri(f),w!==null&&w.dehydrated!==null){if(A===null){if(!R)throw Error(n(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[hn]=f}else Yi(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ta(f),R=!1}else R=c1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(lA(f),f):(lA(f),null)}if(lA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=w!==null,A=A!==null&&A.memoizedState!==null,p){w=f.child,R=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(R=w.alternate.memoizedState.cachePool.pool);var Q=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(Q=w.memoizedState.cachePool.pool),Q!==R&&(w.flags|=2048)}return p!==A&&p&&(f.child.flags|=8192),F1(f,f.updateQueue),Ta(f),null;case 4:return ge(),A===null&&$b(f.stateNode.containerInfo),Ta(f),null;case 10:return El(f.type),Ta(f),null;case 19:if(O(Fs),R=f.memoizedState,R===null)return Ta(f),null;if(w=(f.flags&128)!==0,Q=R.rendering,Q===null)if(w)wp(R,!1);else{if(ja!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(Q=T1(A),Q!==null){for(f.flags|=128,wp(R,!1),A=Q.updateQueue,f.updateQueue=A,F1(f,A),f.subtreeFlags=0,A=p,p=f.child;p!==null;)Nf(p,A),p=p.sibling;return W(Fs,Fs.current&1|2),f.child}A=A.sibling}R.tail!==null&&je()>L1&&(f.flags|=128,w=!0,wp(R,!1),f.lanes=4194304)}else{if(!w)if(A=T1(Q),A!==null){if(f.flags|=128,w=!0,A=A.updateQueue,f.updateQueue=A,F1(f,A),wp(R,!0),R.tail===null&&R.tailMode==="hidden"&&!Q.alternate&&!wn)return Ta(f),null}else 2*je()-R.renderingStartTime>L1&&p!==536870912&&(f.flags|=128,w=!0,wp(R,!1),f.lanes=4194304);R.isBackwards?(Q.sibling=f.child,f.child=Q):(A=R.last,A!==null?A.sibling=Q:f.child=Q,R.last=Q)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=je(),f.sibling=null,A=Fs.current,W(Fs,w?A&1|2:A&1),f):(Ta(f),null);case 22:case 23:return lA(f),kr(),w=f.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(p&536870912)!==0&&(f.flags&128)===0&&(Ta(f),f.subtreeFlags&6&&(f.flags|=8192)):Ta(f),p=f.updateQueue,p!==null&&F1(f,p.retryQueue),p=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==p&&(f.flags|=2048),A!==null&&O(M),null;case 24:return p=null,A!==null&&(p=A.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),El(Xa),Ta(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function JQ(A,f){switch(Ff(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return El(Xa),ge(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return xe(f),null;case 13:if(lA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Yi()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return O(Fs),null;case 4:return ge(),null;case 10:return El(f.type),null;case 22:case 23:return lA(f),kr(),A!==null&&O(M),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return El(Xa),null;case 25:return null;default:return null}}function uB(A,f){switch(Ff(f),f.tag){case 3:El(Xa),ge();break;case 26:case 27:case 5:xe(f);break;case 4:ge();break;case 13:lA(f);break;case 19:O(Fs);break;case 10:El(f.type);break;case 22:case 23:lA(f),kr(),A!==null&&O(M);break;case 24:El(Xa)}}function bp(A,f){try{var p=f.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var R=w.next;p=R;do{if((p.tag&A)===A){w=void 0;var Q=p.create,oe=p.inst;w=Q(),oe.destroy=w}p=p.next}while(p!==R)}}catch(be){aa(f,f.return,be)}}function Ad(A,f,p){try{var w=f.updateQueue,R=w!==null?w.lastEffect:null;if(R!==null){var Q=R.next;w=Q;do{if((w.tag&A)===A){var oe=w.inst,be=oe.destroy;if(be!==void 0){oe.destroy=void 0,R=f;var De=p,Ze=be;try{Ze()}catch(dt){aa(R,De,dt)}}}w=w.next}while(w!==Q)}}catch(dt){aa(f,f.return,dt)}}function AB(A){var f=A.updateQueue;if(f!==null){var p=A.stateNode;try{Sn(f,p)}catch(w){aa(A,A.return,w)}}}function dB(A,f,p){p.props=Gf(A.type,A.memoizedProps),p.state=A.memoizedState;try{p.componentWillUnmount()}catch(w){aa(A,f,w)}}function Cp(A,f){try{var p=A.ref;if(p!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof p=="function"?A.refCleanup=p(w):p.current=w}}catch(R){aa(A,f,R)}}function Au(A,f){var p=A.ref,w=A.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(R){aa(A,f,R)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(R){aa(A,f,R)}else p.current=null}function fB(A){var f=A.type,p=A.memoizedProps,w=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(R){aa(A,A.return,R)}}function _b(A,f,p){try{var w=A.stateNode;v9(w,A.type,p,f),w[sn]=f}catch(R){aa(A,A.return,R)}}function hB(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&vd(A.type)||A.tag===4}function Sb(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||hB(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&vd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Tb(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(A,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(A),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=z1));else if(w!==4&&(w===27&&vd(A.type)&&(p=A.stateNode,f=null),A=A.child,A!==null))for(Tb(A,f,p),A=A.sibling;A!==null;)Tb(A,f,p),A=A.sibling}function D1(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?p.insertBefore(A,f):p.appendChild(A);else if(w!==4&&(w===27&&vd(A.type)&&(p=A.stateNode),A=A.child,A!==null))for(D1(A,f,p),A=A.sibling;A!==null;)D1(A,f,p),A=A.sibling}function mB(A){var f=A.stateNode,p=A.memoizedProps;try{for(var w=A.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);ii(f,w,p),f[hn]=A,f[sn]=p}catch(Q){aa(A,A.return,Q)}}var AA=!1,Ja=!1,Bb=!1,pB=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function ZQ(A,f){if(A=A.containerInfo,Jb=Y1,A=ti(A),Is(A)){if("selectionStart"in A)var p={start:A.selectionStart,end:A.selectionEnd};else e:{p=(p=A.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var R=w.anchorOffset,Q=w.focusNode;w=w.focusOffset;try{p.nodeType,Q.nodeType}catch{p=null;break e}var oe=0,be=-1,De=-1,Ze=0,dt=0,wt=A,rt=null;t:for(;;){for(var at;wt!==p||R!==0&&wt.nodeType!==3||(be=oe+R),wt!==Q||w!==0&&wt.nodeType!==3||(De=oe+w),wt.nodeType===3&&(oe+=wt.nodeValue.length),(at=wt.firstChild)!==null;)rt=wt,wt=at;for(;;){if(wt===A)break t;if(rt===p&&++Ze===R&&(be=oe),rt===Q&&++dt===w&&(De=oe),(at=wt.nextSibling)!==null)break;wt=rt,rt=wt.parentNode}wt=at}p=be===-1||De===-1?null:{start:be,end:De}}else p=null}p=p||{start:0,end:0}}else p=null;for(Zb={focusedElem:A,selectionRange:p},Y1=!1,Vs=f;Vs!==null;)if(f=Vs,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,Vs=A;else for(;Vs!==null;){switch(f=Vs,Q=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&Q!==null){A=void 0,p=f,R=Q.memoizedProps,Q=Q.memoizedState,w=p.stateNode;try{var Sr=Gf(p.type,R,p.elementType===p.type);A=w.getSnapshotBeforeUpdate(Sr,Q),w.__reactInternalSnapshotBeforeUpdate=A}catch(pr){aa(p,p.return,pr)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,p=A.nodeType,p===9)rC(A);else if(p===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":rC(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=f.sibling,A!==null){A.return=f.return,Vs=A;break}Vs=f.return}}function gB(A,f,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:dd(A,p),w&4&&bp(5,p);break;case 1:if(dd(A,p),w&4)if(A=p.stateNode,f===null)try{A.componentDidMount()}catch(oe){aa(p,p.return,oe)}else{var R=Gf(p.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(R,f,A.__reactInternalSnapshotBeforeUpdate)}catch(oe){aa(p,p.return,oe)}}w&64&&AB(p),w&512&&Cp(p,p.return);break;case 3:if(dd(A,p),w&64&&(A=p.updateQueue,A!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Sn(A,f)}catch(oe){aa(p,p.return,oe)}}break;case 27:f===null&&w&4&&mB(p);case 26:case 5:dd(A,p),f===null&&w&4&&fB(p),w&512&&Cp(p,p.return);break;case 12:dd(A,p);break;case 13:dd(A,p),w&4&&yB(A,p),w&64&&(A=p.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(p=l9.bind(null,p),S9(A,p))));break;case 22:if(w=p.memoizedState!==null||AA,!w){f=f!==null&&f.memoizedState!==null||Ja,R=AA;var Q=Ja;AA=w,(Ja=f)&&!Q?fd(A,p,(p.subtreeFlags&8772)!==0):dd(A,p),AA=R,Ja=Q}break;case 30:break;default:dd(A,p)}}function xB(A){var f=A.alternate;f!==null&&(A.alternate=null,xB(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&_e(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ya=null,vo=!1;function dA(A,f,p){for(p=p.child;p!==null;)vB(A,f,p),p=p.sibling}function vB(A,f,p){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(kt,p)}catch{}switch(p.tag){case 26:Ja||Au(p,f),dA(A,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Ja||Au(p,f);var w=ya,R=vo;vd(p.type)&&(ya=p.stateNode,vo=!1),dA(A,f,p),Fp(p.stateNode),ya=w,vo=R;break;case 5:Ja||Au(p,f);case 6:if(w=ya,R=vo,ya=null,dA(A,f,p),ya=w,vo=R,ya!==null)if(vo)try{(ya.nodeType===9?ya.body:ya.nodeName==="HTML"?ya.ownerDocument.body:ya).removeChild(p.stateNode)}catch(Q){aa(p,f,Q)}else try{ya.removeChild(p.stateNode)}catch(Q){aa(p,f,Q)}break;case 18:ya!==null&&(vo?(A=ya,oN(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,p.stateNode),Op(A)):oN(ya,p.stateNode));break;case 4:w=ya,R=vo,ya=p.stateNode.containerInfo,vo=!0,dA(A,f,p),ya=w,vo=R;break;case 0:case 11:case 14:case 15:Ja||Ad(2,p,f),Ja||Ad(4,p,f),dA(A,f,p);break;case 1:Ja||(Au(p,f),w=p.stateNode,typeof w.componentWillUnmount=="function"&&dB(p,f,w)),dA(A,f,p);break;case 21:dA(A,f,p);break;case 22:Ja=(w=Ja)||p.memoizedState!==null,dA(A,f,p),Ja=w;break;default:dA(A,f,p)}}function yB(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Op(A)}catch(p){aa(f,f.return,p)}}function e9(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new pB),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new pB),f;default:throw Error(n(435,A.tag))}}function Nb(A,f){var p=e9(A);f.forEach(function(w){var R=c9.bind(null,A,w);p.has(w)||(p.add(w),w.then(R,R))})}function Vo(A,f){var p=f.deletions;if(p!==null)for(var w=0;w<p.length;w++){var R=p[w],Q=A,oe=f,be=oe;e:for(;be!==null;){switch(be.tag){case 27:if(vd(be.type)){ya=be.stateNode,vo=!1;break e}break;case 5:ya=be.stateNode,vo=!1;break e;case 3:case 4:ya=be.stateNode.containerInfo,vo=!0;break e}be=be.return}if(ya===null)throw Error(n(160));vB(Q,oe,R),ya=null,vo=!1,Q=R.alternate,Q!==null&&(Q.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)wB(f,A),f=f.sibling}var mc=null;function wB(A,f){var p=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Vo(f,A),zo(A),w&4&&(Ad(3,A,A.return),bp(3,A),Ad(5,A,A.return));break;case 1:Vo(f,A),zo(A),w&512&&(Ja||p===null||Au(p,p.return)),w&64&&AA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(p=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var R=mc;if(Vo(f,A),zo(A),w&512&&(Ja||p===null||Au(p,p.return)),w&4){var Q=p!==null?p.memoizedState:null;if(w=A.memoizedState,p===null)if(w===null)if(A.stateNode===null){e:{w=A.type,p=A.memoizedProps,R=R.ownerDocument||R;t:switch(w){case"title":Q=R.getElementsByTagName("title")[0],(!Q||Q[Ee]||Q[hn]||Q.namespaceURI==="http://www.w3.org/2000/svg"||Q.hasAttribute("itemprop"))&&(Q=R.createElement(w),R.head.insertBefore(Q,R.querySelector("head > title"))),ii(Q,w,p),Q[hn]=A,He(Q),w=Q;break e;case"link":var oe=mN("link","href",R).get(w+(p.href||""));if(oe){for(var be=0;be<oe.length;be++)if(Q=oe[be],Q.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&Q.getAttribute("rel")===(p.rel==null?null:p.rel)&&Q.getAttribute("title")===(p.title==null?null:p.title)&&Q.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){oe.splice(be,1);break t}}Q=R.createElement(w),ii(Q,w,p),R.head.appendChild(Q);break;case"meta":if(oe=mN("meta","content",R).get(w+(p.content||""))){for(be=0;be<oe.length;be++)if(Q=oe[be],Q.getAttribute("content")===(p.content==null?null:""+p.content)&&Q.getAttribute("name")===(p.name==null?null:p.name)&&Q.getAttribute("property")===(p.property==null?null:p.property)&&Q.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&Q.getAttribute("charset")===(p.charSet==null?null:p.charSet)){oe.splice(be,1);break t}}Q=R.createElement(w),ii(Q,w,p),R.head.appendChild(Q);break;default:throw Error(n(468,w))}Q[hn]=A,He(Q),w=Q}A.stateNode=w}else pN(R,A.type,A.stateNode);else A.stateNode=hN(R,w,A.memoizedProps);else Q!==w?(Q===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):Q.count--,w===null?pN(R,A.type,A.stateNode):hN(R,w,A.memoizedProps)):w===null&&A.stateNode!==null&&_b(A,A.memoizedProps,p.memoizedProps)}break;case 27:Vo(f,A),zo(A),w&512&&(Ja||p===null||Au(p,p.return)),p!==null&&w&4&&_b(A,A.memoizedProps,p.memoizedProps);break;case 5:if(Vo(f,A),zo(A),w&512&&(Ja||p===null||Au(p,p.return)),A.flags&32){R=A.stateNode;try{pi(R,"")}catch(at){aa(A,A.return,at)}}w&4&&A.stateNode!=null&&(R=A.memoizedProps,_b(A,R,p!==null?p.memoizedProps:R)),w&1024&&(Bb=!0);break;case 6:if(Vo(f,A),zo(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,p=A.stateNode;try{p.nodeValue=w}catch(at){aa(A,A.return,at)}}break;case 3:if(W1=null,R=mc,mc=q1(f.containerInfo),Vo(f,A),mc=R,zo(A),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Op(f.containerInfo)}catch(at){aa(A,A.return,at)}Bb&&(Bb=!1,bB(A));break;case 4:w=mc,mc=q1(A.stateNode.containerInfo),Vo(f,A),zo(A),mc=w;break;case 12:Vo(f,A),zo(A);break;case 13:Vo(f,A),zo(A),A.child.flags&8192&&A.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Lb=je()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Nb(A,w)));break;case 22:R=A.memoizedState!==null;var De=p!==null&&p.memoizedState!==null,Ze=AA,dt=Ja;if(AA=Ze||R,Ja=dt||De,Vo(f,A),Ja=dt,AA=Ze,zo(A),w&8192)e:for(f=A.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(p===null||De||AA||Ja||qf(A)),p=null,f=A;;){if(f.tag===5||f.tag===26){if(p===null){De=p=f;try{if(Q=De.stateNode,R)oe=Q.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{be=De.stateNode;var wt=De.memoizedProps.style,rt=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;be.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(at){aa(De,De.return,at)}}}else if(f.tag===6){if(p===null){De=f;try{De.stateNode.nodeValue=R?"":De.memoizedProps}catch(at){aa(De,De.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=A.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,Nb(A,p))));break;case 19:Vo(f,A),zo(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,Nb(A,w)));break;case 30:break;case 21:break;default:Vo(f,A),zo(A)}}function zo(A){var f=A.flags;if(f&2){try{for(var p,w=A.return;w!==null;){if(hB(w)){p=w;break}w=w.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var R=p.stateNode,Q=Sb(A);D1(A,Q,R);break;case 5:var oe=p.stateNode;p.flags&32&&(pi(oe,""),p.flags&=-33);var be=Sb(A);D1(A,be,oe);break;case 3:case 4:var De=p.stateNode.containerInfo,Ze=Sb(A);Tb(A,Ze,De);break;default:throw Error(n(161))}}catch(dt){aa(A,A.return,dt)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function bB(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;bB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function dd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)gB(A,f.alternate,f),f=f.sibling}function qf(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:Ad(4,f,f.return),qf(f);break;case 1:Au(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&dB(f,f.return,p),qf(f);break;case 27:Fp(f.stateNode);case 26:case 5:Au(f,f.return),qf(f);break;case 22:f.memoizedState===null&&qf(f);break;case 30:qf(f);break;default:qf(f)}A=A.sibling}}function fd(A,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,R=A,Q=f,oe=Q.flags;switch(Q.tag){case 0:case 11:case 15:fd(R,Q,p),bp(4,Q);break;case 1:if(fd(R,Q,p),w=Q,R=w.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Ze){aa(w,w.return,Ze)}if(w=Q,R=w.updateQueue,R!==null){var be=w.stateNode;try{var De=R.shared.hiddenCallbacks;if(De!==null)for(R.shared.hiddenCallbacks=null,R=0;R<De.length;R++)gn(De[R],be)}catch(Ze){aa(w,w.return,Ze)}}p&&oe&64&&AB(Q),Cp(Q,Q.return);break;case 27:mB(Q);case 26:case 5:fd(R,Q,p),p&&w===null&&oe&4&&fB(Q),Cp(Q,Q.return);break;case 12:fd(R,Q,p);break;case 13:fd(R,Q,p),p&&oe&4&&yB(R,Q);break;case 22:Q.memoizedState===null&&fd(R,Q,p),Cp(Q,Q.return);break;case 30:break;default:fd(R,Q,p)}f=f.sibling}}function kb(A,f){var p=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==p&&(A!=null&&A.refCount++,p!=null&&Df(p))}function Ib(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Df(A))}function du(A,f,p,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)CB(A,f,p,w),f=f.sibling}function CB(A,f,p,w){var R=f.flags;switch(f.tag){case 0:case 11:case 15:du(A,f,p,w),R&2048&&bp(9,f);break;case 1:du(A,f,p,w);break;case 3:du(A,f,p,w),R&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Df(A)));break;case 12:if(R&2048){du(A,f,p,w),A=f.stateNode;try{var Q=f.memoizedProps,oe=Q.id,be=Q.onPostCommit;typeof be=="function"&&be(oe,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(De){aa(f,f.return,De)}}else du(A,f,p,w);break;case 13:du(A,f,p,w);break;case 23:break;case 22:Q=f.stateNode,oe=f.alternate,f.memoizedState!==null?Q._visibility&2?du(A,f,p,w):Ep(A,f):Q._visibility&2?du(A,f,p,w):(Q._visibility|=2,o0(A,f,p,w,(f.subtreeFlags&10256)!==0)),R&2048&&kb(oe,f);break;case 24:du(A,f,p,w),R&2048&&Ib(f.alternate,f);break;default:du(A,f,p,w)}}function o0(A,f,p,w,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var Q=A,oe=f,be=p,De=w,Ze=oe.flags;switch(oe.tag){case 0:case 11:case 15:o0(Q,oe,be,De,R),bp(8,oe);break;case 23:break;case 22:var dt=oe.stateNode;oe.memoizedState!==null?dt._visibility&2?o0(Q,oe,be,De,R):Ep(Q,oe):(dt._visibility|=2,o0(Q,oe,be,De,R)),R&&Ze&2048&&kb(oe.alternate,oe);break;case 24:o0(Q,oe,be,De,R),R&&Ze&2048&&Ib(oe.alternate,oe);break;default:o0(Q,oe,be,De,R)}f=f.sibling}}function Ep(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=A,w=f,R=w.flags;switch(w.tag){case 22:Ep(p,w),R&2048&&kb(w.alternate,w);break;case 24:Ep(p,w),R&2048&&Ib(w.alternate,w);break;default:Ep(p,w)}f=f.sibling}}var _p=8192;function l0(A){if(A.subtreeFlags&_p)for(A=A.child;A!==null;)EB(A),A=A.sibling}function EB(A){switch(A.tag){case 26:l0(A),A.flags&_p&&A.memoizedState!==null&&j9(mc,A.memoizedState,A.memoizedProps);break;case 5:l0(A);break;case 3:case 4:var f=mc;mc=q1(A.stateNode.containerInfo),l0(A),mc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=_p,_p=16777216,l0(A),_p=f):l0(A));break;default:l0(A)}}function _B(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function Sp(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];Vs=w,TB(w,A)}_B(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)SB(A),A=A.sibling}function SB(A){switch(A.tag){case 0:case 11:case 15:Sp(A),A.flags&2048&&Ad(9,A,A.return);break;case 3:Sp(A);break;case 12:Sp(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,R1(A)):Sp(A);break;default:Sp(A)}}function R1(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];Vs=w,TB(w,A)}_B(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:Ad(8,f,f.return),R1(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,R1(f));break;default:R1(f)}A=A.sibling}}function TB(A,f){for(;Vs!==null;){var p=Vs;switch(p.tag){case 0:case 11:case 15:Ad(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Df(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,Vs=w;else e:for(p=A;Vs!==null;){w=Vs;var R=w.sibling,Q=w.return;if(xB(w),w===p){Vs=null;break e}if(R!==null){R.return=Q,Vs=R;break e}Vs=Q}}}var t9={getCacheForType:function(A){var f=$a(Xa),p=f.data.get(A);return p===void 0&&(p=A(),f.data.set(A,p)),p}},r9=typeof WeakMap=="function"?WeakMap:Map,On=0,oa=null,on=null,vn=0,Qn=0,Go=null,hd=!1,c0=!1,Fb=!1,fA=0,ja=0,md=0,Kf=0,Db=0,Bl=0,u0=0,Tp=null,yo=null,Rb=!1,Lb=0,L1=1/0,U1=null,pd=null,si=0,gd=null,A0=null,d0=0,Ub=0,Mb=null,BB=null,Bp=0,Pb=null;function qo(){if((On&2)!==0&&vn!==0)return vn&-vn;if(Z.T!==null){var A=nA;return A!==0?A:Gb()}return ba()}function NB(){Bl===0&&(Bl=(vn&536870912)===0||wn?us():536870912);var A=Tl.current;return A!==null&&(A.flags|=32),Bl}function Ko(A,f,p){(A===oa&&(Qn===2||Qn===9)||A.cancelPendingCommit!==null)&&(f0(A,0),xd(A,vn,Bl,!1)),pa(A,p),((On&2)===0||A!==oa)&&(A===oa&&((On&2)===0&&(Kf|=p),ja===4&&xd(A,vn,Bl,!1)),fu(A))}function kB(A,f,p){if((On&6)!==0)throw Error(n(327));var w=!p&&(f&124)===0&&(f&A.expiredLanes)===0||In(A,f),R=w?s9(A,f):Qb(A,f,!0),Q=w;do{if(R===0){c0&&!w&&xd(A,f,0,!1);break}else{if(p=A.current.alternate,Q&&!n9(p)){R=Qb(A,f,!1),Q=!1;continue}if(R===2){if(Q=f,A.errorRecoveryDisabledLanes&Q)var oe=0;else oe=A.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var be=A;R=Tp;var De=be.current.memoizedState.isDehydrated;if(De&&(f0(be,oe).flags|=256),oe=Qb(be,oe,!1),oe!==2){if(Fb&&!De){be.errorRecoveryDisabledLanes|=Q,Kf|=Q,R=4;break e}Q=yo,yo=R,Q!==null&&(yo===null?yo=Q:yo.push.apply(yo,Q))}R=oe}if(Q=!1,R!==2)continue}}if(R===1){f0(A,0),xd(A,f,0,!0);break}e:{switch(w=A,Q=R,Q){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:xd(w,f,Bl,!hd);break e;case 2:yo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(R=Lb+300-je(),10<R)){if(xd(w,f,Bl,!hd),Ur(w,0,!0)!==0)break e;w.timeoutHandle=sN(IB.bind(null,w,p,yo,U1,Rb,f,Bl,Kf,u0,hd,Q,2,-0,0),R);break e}IB(w,p,yo,U1,Rb,f,Bl,Kf,u0,hd,Q,0,-0,0)}}break}while(!0);fu(A)}function IB(A,f,p,w,R,Q,oe,be,De,Ze,dt,wt,rt,at){if(A.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(Lp={stylesheets:null,count:0,unsuspend:P9},EB(f),wt=O9(),wt!==null)){A.cancelPendingCommit=wt(PB.bind(null,A,f,Q,p,w,R,oe,be,De,dt,1,rt,at)),xd(A,Q,oe,!Ze);return}PB(A,f,Q,p,w,R,oe,be,De)}function n9(A){for(var f=A;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var R=p[w],Q=R.getSnapshot;R=R.value;try{if(!hs(Q(),R))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function xd(A,f,p,w){f&=~Db,f&=~Kf,A.suspendedLanes|=f,A.pingedLanes&=~f,w&&(A.warmLanes|=f),w=A.expirationTimes;for(var R=f;0<R;){var Q=31-Dt(R),oe=1<<Q;w[Q]=-1,R&=~oe}p!==0&&rr(A,p,f)}function M1(){return(On&6)===0?(Np(0),!1):!0}function jb(){if(on!==null){if(Qn===0)var A=on.return;else A=on,cc=ps=null,Zh(A),s0=null,vp=0,A=on;for(;A!==null;)uB(A.alternate,A),A=A.return;on=null}}function f0(A,f){var p=A.timeoutHandle;p!==-1&&(A.timeoutHandle=-1,w9(p)),p=A.cancelPendingCommit,p!==null&&(A.cancelPendingCommit=null,p()),jb(),oa=A,on=p=wl(A.current,null),vn=f,Qn=0,Go=null,hd=!1,c0=In(A,f),Fb=!1,u0=Bl=Db=Kf=md=ja=0,yo=Tp=null,Rb=!1,(f&8)!==0&&(f|=f&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=f;0<w;){var R=31-Dt(w),Q=1<<R;f|=A[R],w&=~Q}return fA=f,mo(),p}function FB(A,f){dr=null,Z.H=E1,f===he||f===ve?(f=ze(),Qn=3):f===pe?(f=ze(),Qn=4):Qn=f===XT?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Go=f,on===null&&(ja=1,N1(A,Kr(f,A.current)))}function DB(){var A=Z.H;return Z.H=E1,A===null?E1:A}function RB(){var A=Z.A;return Z.A=t9,A}function Ob(){ja=4,hd||(vn&4194048)!==vn&&Tl.current!==null||(c0=!0),(md&134217727)===0&&(Kf&134217727)===0||oa===null||xd(oa,vn,Bl,!1)}function Qb(A,f,p){var w=On;On|=2;var R=DB(),Q=RB();(oa!==A||vn!==f)&&(U1=null,f0(A,f)),f=!1;var oe=ja;e:do try{if(Qn!==0&&on!==null){var be=on,De=Go;switch(Qn){case 8:jb(),oe=6;break e;case 3:case 2:case 9:case 6:Tl.current===null&&(f=!0);var Ze=Qn;if(Qn=0,Go=null,h0(A,be,De,Ze),p&&c0){oe=0;break e}break;default:Ze=Qn,Qn=0,Go=null,h0(A,be,De,Ze)}}a9(),oe=ja;break}catch(dt){FB(A,dt)}while(!0);return f&&A.shellSuspendCounter++,cc=ps=null,On=w,Z.H=R,Z.A=Q,on===null&&(oa=null,vn=0,mo()),oe}function a9(){for(;on!==null;)LB(on)}function s9(A,f){var p=On;On|=2;var w=DB(),R=RB();oa!==A||vn!==f?(U1=null,L1=je()+500,f0(A,f)):c0=In(A,f);e:do try{if(Qn!==0&&on!==null){f=on;var Q=Go;t:switch(Qn){case 1:Qn=0,Go=null,h0(A,f,Q,1);break;case 2:case 9:if(Be(Q)){Qn=0,Go=null,UB(f);break}f=function(){Qn!==2&&Qn!==9||oa!==A||(Qn=7),fu(A)},Q.then(f,f);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:Be(Q)?(Qn=0,Go=null,UB(f)):(Qn=0,Go=null,h0(A,f,Q,7));break;case 5:var oe=null;switch(on.tag){case 26:oe=on.memoizedState;case 5:case 27:var be=on;if(!oe||gN(oe)){Qn=0,Go=null;var De=be.sibling;if(De!==null)on=De;else{var Ze=be.return;Ze!==null?(on=Ze,P1(Ze)):on=null}break t}}Qn=0,Go=null,h0(A,f,Q,5);break;case 6:Qn=0,Go=null,h0(A,f,Q,6);break;case 8:jb(),ja=6;break e;default:throw Error(n(462))}}i9();break}catch(dt){FB(A,dt)}while(!0);return cc=ps=null,Z.H=w,Z.A=R,On=p,on!==null?0:(oa=null,vn=0,mo(),ja)}function i9(){for(;on!==null&&!Ie();)LB(on)}function LB(A){var f=lB(A.alternate,A,fA);A.memoizedProps=A.pendingProps,f===null?P1(A):on=f}function UB(A){var f=A,p=f.alternate;switch(f.tag){case 15:case 0:f=rB(p,f,f.pendingProps,f.type,void 0,vn);break;case 11:f=rB(p,f,f.pendingProps,f.type.render,f.ref,vn);break;case 5:Zh(f);default:uB(p,f),f=on=Nf(f,fA),f=lB(p,f,fA)}A.memoizedProps=A.pendingProps,f===null?P1(A):on=f}function h0(A,f,p,w){cc=ps=null,Zh(f),s0=null,vp=0;var R=f.return;try{if($Q(A,R,f,p,vn)){ja=1,N1(A,Kr(p,A.current)),on=null;return}}catch(Q){if(R!==null)throw on=R,Q;ja=1,N1(A,Kr(p,A.current)),on=null;return}f.flags&32768?(wn||w===1?A=!0:c0||(vn&536870912)!==0?A=!1:(hd=A=!0,(w===2||w===9||w===3||w===6)&&(w=Tl.current,w!==null&&w.tag===13&&(w.flags|=16384))),MB(f,A)):P1(f)}function P1(A){var f=A;do{if((f.flags&32768)!==0){MB(f,hd);return}A=f.return;var p=YQ(f.alternate,f,fA);if(p!==null){on=p;return}if(f=f.sibling,f!==null){on=f;return}on=f=A}while(f!==null);ja===0&&(ja=5)}function MB(A,f){do{var p=JQ(A.alternate,A);if(p!==null){p.flags&=32767,on=p;return}if(p=A.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(A=A.sibling,A!==null)){on=A;return}on=A=p}while(A!==null);ja=6,on=null}function PB(A,f,p,w,R,Q,oe,be,De){A.cancelPendingCommit=null;do j1();while(si!==0);if((On&6)!==0)throw Error(n(327));if(f!==null){if(f===A.current)throw Error(n(177));if(Q=f.lanes|f.childLanes,Q|=Ea,Pr(A,p,Q,oe,be,De),A===oa&&(on=oa=null,vn=0),A0=f,gd=A,d0=p,Ub=Q,Mb=R,BB=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,u9(_t,function(){return VB(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=Z.T,Z.T=null,R=ee.p,ee.p=2,oe=On,On|=4;try{ZQ(A,f,p)}finally{On=oe,ee.p=R,Z.T=w}}si=1,jB(),OB(),QB()}}function jB(){if(si===1){si=0;var A=gd,f=A0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=Z.T,Z.T=null;var w=ee.p;ee.p=2;var R=On;On|=4;try{wB(f,A);var Q=Zb,oe=ti(A.containerInfo),be=Q.focusedElem,De=Q.selectionRange;if(oe!==be&&be&&be.ownerDocument&&Wc(be.ownerDocument.documentElement,be)){if(De!==null&&Is(be)){var Ze=De.start,dt=De.end;if(dt===void 0&&(dt=Ze),"selectionStart"in be)be.selectionStart=Ze,be.selectionEnd=Math.min(dt,be.value.length);else{var wt=be.ownerDocument||document,rt=wt&&wt.defaultView||window;if(rt.getSelection){var at=rt.getSelection(),Sr=be.textContent.length,pr=Math.min(De.start,Sr),Zn=De.end===void 0?pr:Math.min(De.end,Sr);!at.extend&&pr>Zn&&(oe=Zn,Zn=pr,pr=oe);var Ge=tc(be,pr),Pe=tc(be,Zn);if(Ge&&Pe&&(at.rangeCount!==1||at.anchorNode!==Ge.node||at.anchorOffset!==Ge.offset||at.focusNode!==Pe.node||at.focusOffset!==Pe.offset)){var $e=wt.createRange();$e.setStart(Ge.node,Ge.offset),at.removeAllRanges(),pr>Zn?(at.addRange($e),at.extend(Pe.node,Pe.offset)):($e.setEnd(Pe.node,Pe.offset),at.addRange($e))}}}}for(wt=[],at=be;at=at.parentNode;)at.nodeType===1&&wt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<wt.length;be++){var pt=wt[be];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}Y1=!!Jb,Zb=Jb=null}finally{On=R,ee.p=w,Z.T=p}}A.current=f,si=2}}function OB(){if(si===2){si=0;var A=gd,f=A0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=Z.T,Z.T=null;var w=ee.p;ee.p=2;var R=On;On|=4;try{gB(A,f.alternate,f)}finally{On=R,ee.p=w,Z.T=p}}si=3}}function QB(){if(si===4||si===3){si=0,we();var A=gd,f=A0,p=d0,w=BB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?si=5:(si=0,A0=gd=null,HB(A,A.pendingLanes));var R=A.pendingLanes;if(R===0&&(pd=null),Wn(p),f=f.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(kt,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=Z.T,R=ee.p,ee.p=2,Z.T=null;try{for(var Q=A.onRecoverableError,oe=0;oe<w.length;oe++){var be=w[oe];Q(be.value,{componentStack:be.stack})}}finally{Z.T=f,ee.p=R}}(d0&3)!==0&&j1(),fu(A),R=A.pendingLanes,(p&4194090)!==0&&(R&42)!==0?A===Pb?Bp++:(Bp=0,Pb=A):Bp=0,Np(0)}}function HB(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,Df(f)))}function j1(A){return jB(),OB(),QB(),VB()}function VB(){if(si!==5)return!1;var A=gd,f=Ub;Ub=0;var p=Wn(d0),w=Z.T,R=ee.p;try{ee.p=32>p?32:p,Z.T=null,p=Mb,Mb=null;var Q=gd,oe=d0;if(si=0,A0=gd=null,d0=0,(On&6)!==0)throw Error(n(331));var be=On;if(On|=4,SB(Q.current),CB(Q,Q.current,oe,p),On=be,Np(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(kt,Q)}catch{}return!0}finally{ee.p=R,Z.T=w,HB(A,f)}}function zB(A,f,p){f=Kr(p,f),f=pb(A.stateNode,f,2),A=vt(A,f,2),A!==null&&(pa(A,2),fu(A))}function aa(A,f,p){if(A.tag===3)zB(A,A,p);else for(;f!==null;){if(f.tag===3){zB(f,A,p);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(pd===null||!pd.has(w))){A=Kr(p,A),p=WT(2),w=vt(f,p,2),w!==null&&($T(p,w,f,A),pa(w,2),fu(w));break}}f=f.return}}function Hb(A,f,p){var w=A.pingCache;if(w===null){w=A.pingCache=new r9;var R=new Set;w.set(f,R)}else R=w.get(f),R===void 0&&(R=new Set,w.set(f,R));R.has(p)||(Fb=!0,R.add(p),A=o9.bind(null,A,f,p),f.then(A,A))}function o9(A,f,p){var w=A.pingCache;w!==null&&w.delete(f),A.pingedLanes|=A.suspendedLanes&p,A.warmLanes&=~p,oa===A&&(vn&p)===p&&(ja===4||ja===3&&(vn&62914560)===vn&&300>je()-Lb?(On&2)===0&&f0(A,0):Db|=p,u0===vn&&(u0=0)),fu(A)}function GB(A,f){f===0&&(f=an()),A=nc(A,f),A!==null&&(pa(A,f),fu(A))}function l9(A){var f=A.memoizedState,p=0;f!==null&&(p=f.retryLane),GB(A,p)}function c9(A,f){var p=0;switch(A.tag){case 13:var w=A.stateNode,R=A.memoizedState;R!==null&&(p=R.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(f),GB(A,p)}function u9(A,f){return Le(A,f)}var O1=null,m0=null,Vb=!1,Q1=!1,zb=!1,Wf=0;function fu(A){A!==m0&&A.next===null&&(m0===null?O1=m0=A:m0=m0.next=A),Q1=!0,Vb||(Vb=!0,d9())}function Np(A,f){if(!zb&&Q1){zb=!0;do for(var p=!1,w=O1;w!==null;){if(A!==0){var R=w.pendingLanes;if(R===0)var Q=0;else{var oe=w.suspendedLanes,be=w.pingedLanes;Q=(1<<31-Dt(42|A)+1)-1,Q&=R&~(oe&~be),Q=Q&201326741?Q&201326741|1:Q?Q|2:0}Q!==0&&(p=!0,$B(w,Q))}else Q=vn,Q=Ur(w,w===oa?Q:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(Q&3)===0||In(w,Q)||(p=!0,$B(w,Q));w=w.next}while(p);zb=!1}}function A9(){qB()}function qB(){Q1=Vb=!1;var A=0;Wf!==0&&(y9()&&(A=Wf),Wf=0);for(var f=je(),p=null,w=O1;w!==null;){var R=w.next,Q=KB(w,f);Q===0?(w.next=null,p===null?O1=R:p.next=R,R===null&&(m0=p)):(p=w,(A!==0||(Q&3)!==0)&&(Q1=!0)),w=R}Np(A)}function KB(A,f){for(var p=A.suspendedLanes,w=A.pingedLanes,R=A.expirationTimes,Q=A.pendingLanes&-62914561;0<Q;){var oe=31-Dt(Q),be=1<<oe,De=R[oe];De===-1?((be&p)===0||(be&w)!==0)&&(R[oe]=Ir(be,f)):De<=f&&(A.expiredLanes|=be),Q&=~be}if(f=oa,p=vn,p=Ur(A,A===f?p:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,p===0||A===f&&(Qn===2||Qn===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&nt(w),A.callbackNode=null,A.callbackPriority=0;if((p&3)===0||In(A,p)){if(f=p&-p,f===A.callbackPriority)return f;switch(w!==null&&nt(w),Wn(p)){case 2:case 8:p=mt;break;case 32:p=_t;break;case 268435456:p=Nt;break;default:p=_t}return w=WB.bind(null,A),p=Le(p,w),A.callbackPriority=f,A.callbackNode=p,f}return w!==null&&w!==null&&nt(w),A.callbackPriority=2,A.callbackNode=null,2}function WB(A,f){if(si!==0&&si!==5)return A.callbackNode=null,A.callbackPriority=0,null;var p=A.callbackNode;if(j1()&&A.callbackNode!==p)return null;var w=vn;return w=Ur(A,A===oa?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(kB(A,w,f),KB(A,je()),A.callbackNode!=null&&A.callbackNode===p?WB.bind(null,A):null)}function $B(A,f){if(j1())return null;kB(A,f,!0)}function d9(){b9(function(){(On&6)!==0?Le(st,A9):qB()})}function Gb(){return Wf===0&&(Wf=us()),Wf}function XB(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Do(""+A)}function YB(A,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,A.id&&p.setAttribute("form",A.id),f.parentNode.insertBefore(p,f),A=new FormData(A),p.parentNode.removeChild(p),A}function f9(A,f,p,w,R){if(f==="submit"&&p&&p.stateNode===R){var Q=XB((R[sn]||null).action),oe=w.submitter;oe&&(f=(f=oe[sn]||null)?XB(f.formAction):oe.getAttribute("formAction"),f!==null&&(Q=f,oe=null));var be=new dl("action","action",null,w,R);A.push({event:be,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Wf!==0){var De=oe?YB(R,oe):new FormData(R);Sl(p,{pending:!0,data:De,method:R.method,action:Q},null,De)}}else typeof Q=="function"&&(be.preventDefault(),De=oe?YB(R,oe):new FormData(R),Sl(p,{pending:!0,data:De,method:R.method,action:Q},Q,De))},currentTarget:R}]})}}for(var qb=0;qb<Yu.length;qb++){var Kb=Yu[qb],h9=Kb.toLowerCase(),m9=Kb[0].toUpperCase()+Kb.slice(1);xa(h9,"on"+m9)}xa(JA,"onAnimationEnd"),xa(Xc,"onAnimationIteration"),xa(Yc,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(Jc,"onTransitionRun"),xa(Xu,"onTransitionStart"),xa(ZA,"onTransitionCancel"),xa(Zc,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kp));function JB(A,f){f=(f&4)!==0;for(var p=0;p<A.length;p++){var w=A[p],R=w.event;w=w.listeners;e:{var Q=void 0;if(f)for(var oe=w.length-1;0<=oe;oe--){var be=w[oe],De=be.instance,Ze=be.currentTarget;if(be=be.listener,De!==Q&&R.isPropagationStopped())break e;Q=be,R.currentTarget=Ze;try{Q(R)}catch(dt){B1(dt)}R.currentTarget=null,Q=De}else for(oe=0;oe<w.length;oe++){if(be=w[oe],De=be.instance,Ze=be.currentTarget,be=be.listener,De!==Q&&R.isPropagationStopped())break e;Q=be,R.currentTarget=Ze;try{Q(R)}catch(dt){B1(dt)}R.currentTarget=null,Q=De}}}}function ln(A,f){var p=f[Mn];p===void 0&&(p=f[Mn]=new Set);var w=A+"__bubble";p.has(w)||(ZB(f,A,2,!1),p.add(w))}function Wb(A,f,p){var w=0;f&&(w|=4),ZB(p,A,w,f)}var H1="_reactListening"+Math.random().toString(36).slice(2);function $b(A){if(!A[H1]){A[H1]=!0,We.forEach(function(p){p!=="selectionchange"&&(p9.has(p)||Wb(p,!1,A),Wb(p,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[H1]||(f[H1]=!0,Wb("selectionchange",!1,f))}}function ZB(A,f,p,w){switch(CN(f)){case 2:var R=V9;break;case 8:R=z9;break;default:R=cC}p=R.bind(null,f,p,A),R=void 0,!ei||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),w?R!==void 0?A.addEventListener(f,p,{capture:!0,passive:R}):A.addEventListener(f,p,!0):R!==void 0?A.addEventListener(f,p,{passive:R}):A.addEventListener(f,p,!1)}function Xb(A,f,p,w,R){var Q=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var oe=w.tag;if(oe===3||oe===4){var be=w.stateNode.containerInfo;if(be===R)break;if(oe===4)for(oe=w.return;oe!==null;){var De=oe.tag;if((De===3||De===4)&&oe.stateNode.containerInfo===R)return;oe=oe.return}for(;be!==null;){if(oe=Te(be),oe===null)return;if(De=oe.tag,De===5||De===6||De===26||De===27){w=Q=oe;continue e}be=be.parentNode}}w=w.return}KA(function(){var Ze=Q,dt=Pn(p),wt=[];e:{var rt=rc.get(A);if(rt!==void 0){var at=dl,Sr=A;switch(A){case"keypress":if(vi(p)===0)break e;case"keydown":case"keyup":at=Mo;break;case"focusin":Sr="focus",at=hl;break;case"focusout":Sr="blur",at=hl;break;case"beforeblur":case"afterblur":at=hl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=La;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=zc;break;case JA:case Xc:case Yc:at=Qc;break;case Zc:at=Ae;break;case"scroll":case"scrollend":at=zu;break;case"wheel":at=Re;break;case"copy":case"cut":case"paste":at=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=ec;break;case"toggle":case"beforetoggle":at=ot}var pr=(f&4)!==0,Zn=!pr&&(A==="scroll"||A==="scrollend"),Ge=pr?rt!==null?rt+"Capture":null:rt;pr=[];for(var Pe=Ze,$e;Pe!==null;){var pt=Pe;if($e=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||$e===null||Ge===null||(pt=Ms(Pe,Ge),pt!=null&&pr.push(Ip(Pe,pt,$e))),Zn)break;Pe=Pe.return}0<pr.length&&(rt=new at(rt,Sr,null,p,dt),wt.push({event:rt,listeners:pr}))}}if((f&7)===0){e:{if(rt=A==="mouseover"||A==="pointerover",at=A==="mouseout"||A==="pointerout",rt&&p!==io&&(Sr=p.relatedTarget||p.fromElement)&&(Te(Sr)||Sr[Fn]))break e;if((at||rt)&&(rt=dt.window===dt?dt:(rt=dt.ownerDocument)?rt.defaultView||rt.parentWindow:window,at?(Sr=p.relatedTarget||p.toElement,at=Ze,Sr=Sr?Te(Sr):null,Sr!==null&&(Zn=s(Sr),pr=Sr.tag,Sr!==Zn||pr!==5&&pr!==27&&pr!==6)&&(Sr=null)):(at=null,Sr=Ze),at!==Sr)){if(pr=La,pt="onMouseLeave",Ge="onMouseEnter",Pe="mouse",(A==="pointerout"||A==="pointerover")&&(pr=ec,pt="onPointerLeave",Ge="onPointerEnter",Pe="pointer"),Zn=at==null?rt:qe(at),$e=Sr==null?rt:qe(Sr),rt=new pr(pt,Pe+"leave",at,p,dt),rt.target=Zn,rt.relatedTarget=$e,pt=null,Te(dt)===Ze&&(pr=new pr(Ge,Pe+"enter",Sr,p,dt),pr.target=$e,pr.relatedTarget=Zn,pt=pr),Zn=pt,at&&Sr)t:{for(pr=at,Ge=Sr,Pe=0,$e=pr;$e;$e=p0($e))Pe++;for($e=0,pt=Ge;pt;pt=p0(pt))$e++;for(;0<Pe-$e;)pr=p0(pr),Pe--;for(;0<$e-Pe;)Ge=p0(Ge),$e--;for(;Pe--;){if(pr===Ge||Ge!==null&&pr===Ge.alternate)break t;pr=p0(pr),Ge=p0(Ge)}pr=null}else pr=null;at!==null&&eN(wt,rt,at,pr,!1),Sr!==null&&Zn!==null&&eN(wt,Zn,Sr,pr,!0)}}e:{if(rt=Ze?qe(Ze):window,at=rt.nodeName&&rt.nodeName.toLowerCase(),at==="select"||at==="input"&&rt.type==="file")var er=XA;else if(Dn(rt))if(qu)er=Gh;else{er=np;var en=wi}else at=rt.nodeName,!at||at.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?Ze&&Hu(Ze.elementType)&&(er=XA):er=Tf;if(er&&(er=er(A,Ze))){fo(wt,er,p,dt);break e}en&&en(A,rt,Ze),A==="focusout"&&Ze&&rt.type==="number"&&Ze.memoizedProps.value!=null&&cl(rt,"number",rt.value)}switch(en=Ze?qe(Ze):window,A){case"focusin":(Dn(en)||en.contentEditable==="true")&&(bi=en,Po=Ze,vl=null);break;case"focusout":vl=Po=bi=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,ga(wt,p,dt);break;case"selectionchange":if($c)break;case"keydown":case"keyup":ga(wt,p,dt)}var sr;if(jt)e:{switch(A){case"compositionstart":var xr="onCompositionStart";break e;case"compositionend":xr="onCompositionEnd";break e;case"compositionupdate":xr="onCompositionUpdate";break e}xr=void 0}else mr?Je(A,p)&&(xr="onCompositionEnd"):A==="keydown"&&p.keyCode===229&&(xr="onCompositionStart");xr&&(se&&p.locale!=="ko"&&(mr||xr!=="onCompositionStart"?xr==="onCompositionEnd"&&mr&&(sr=Vu()):(xi=dt,Al="value"in xi?xi.value:xi.textContent,mr=!0)),en=V1(Ze,xr),0<en.length&&(xr=new Yl(xr,A,null,p,dt),wt.push({event:xr,listeners:en}),sr?xr.data=sr:(sr=St(p),sr!==null&&(xr.data=sr)))),(sr=X?Zr(A,p):Nr(A,p))&&(xr=V1(Ze,"onBeforeInput"),0<xr.length&&(en=new Yl("onBeforeInput","beforeinput",null,p,dt),wt.push({event:en,listeners:xr}),en.data=sr)),f9(wt,A,Ze,p,dt)}JB(wt,f)})}function Ip(A,f,p){return{instance:A,listener:f,currentTarget:p}}function V1(A,f){for(var p=f+"Capture",w=[];A!==null;){var R=A,Q=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||Q===null||(R=Ms(A,p),R!=null&&w.unshift(Ip(A,R,Q)),R=Ms(A,f),R!=null&&w.push(Ip(A,R,Q))),A.tag===3)return w;A=A.return}return[]}function p0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function eN(A,f,p,w,R){for(var Q=f._reactName,oe=[];p!==null&&p!==w;){var be=p,De=be.alternate,Ze=be.stateNode;if(be=be.tag,De!==null&&De===w)break;be!==5&&be!==26&&be!==27||Ze===null||(De=Ze,R?(Ze=Ms(p,Q),Ze!=null&&oe.unshift(Ip(p,Ze,De))):R||(Ze=Ms(p,Q),Ze!=null&&oe.push(Ip(p,Ze,De)))),p=p.return}oe.length!==0&&A.push({event:f,listeners:oe})}var g9=/\r\n?/g,x9=/\u0000|\uFFFD/g;function tN(A){return(typeof A=="string"?A:""+A).replace(g9,`
`).replace(x9,"")}function rN(A,f){return f=tN(f),tN(A)===f}function z1(){}function Jn(A,f,p,w,R,Q){switch(p){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||pi(A,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&pi(A,""+w);break;case"className":Or(A,"class",w);break;case"tabIndex":Or(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(A,p,w);break;case"style":Qu(A,w,Q);break;case"data":if(f!=="object"){Or(A,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||p!=="href")){A.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Do(""+w),A.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Q=="function"&&(p==="formAction"?(f!=="input"&&Jn(A,f,"name",R.name,R,null),Jn(A,f,"formEncType",R.formEncType,R,null),Jn(A,f,"formMethod",R.formMethod,R,null),Jn(A,f,"formTarget",R.formTarget,R,null)):(Jn(A,f,"encType",R.encType,R,null),Jn(A,f,"method",R.method,R,null),Jn(A,f,"target",R.target,R,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Do(""+w),A.setAttribute(p,w);break;case"onClick":w!=null&&(A.onclick=z1);break;case"onScroll":w!=null&&ln("scroll",A);break;case"onScrollEnd":w!=null&&ln("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(R.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}p=Do(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""+w):A.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""):A.removeAttribute(p);break;case"capture":case"download":w===!0?A.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,w):A.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(p,w):A.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(p):A.setAttribute(p,w);break;case"popover":ln("beforetoggle",A),ln("toggle",A),jr(A,"popover",w);break;case"xlinkActuate":Gr(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Gr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Gr(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Gr(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Gr(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Gr(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Gr(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":jr(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Fo.get(p)||p,jr(A,p,w))}}function Yb(A,f,p,w,R,Q){switch(p){case"style":Qu(A,w,Q);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(R.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"children":typeof w=="string"?pi(A,w):(typeof w=="number"||typeof w=="bigint")&&pi(A,""+w);break;case"onScroll":w!=null&&ln("scroll",A);break;case"onScrollEnd":w!=null&&ln("scrollend",A);break;case"onClick":w!=null&&(A.onclick=z1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ye.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(R=p.endsWith("Capture"),f=p.slice(2,R?p.length-7:void 0),Q=A[sn]||null,Q=Q!=null?Q[p]:null,typeof Q=="function"&&A.removeEventListener(f,Q,R),typeof w=="function")){typeof Q!="function"&&Q!==null&&(p in A?A[p]=null:A.hasAttribute(p)&&A.removeAttribute(p)),A.addEventListener(f,w,R);break e}p in A?A[p]=w:w===!0?A.setAttribute(p,""):jr(A,p,w)}}}function ii(A,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ln("error",A),ln("load",A);var w=!1,R=!1,Q;for(Q in p)if(p.hasOwnProperty(Q)){var oe=p[Q];if(oe!=null)switch(Q){case"src":w=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Jn(A,f,Q,oe,p,null)}}R&&Jn(A,f,"srcSet",p.srcSet,p,null),w&&Jn(A,f,"src",p.src,p,null);return;case"input":ln("invalid",A);var be=Q=oe=R=null,De=null,Ze=null;for(w in p)if(p.hasOwnProperty(w)){var dt=p[w];if(dt!=null)switch(w){case"name":R=dt;break;case"type":oe=dt;break;case"checked":De=dt;break;case"defaultChecked":Ze=dt;break;case"value":Q=dt;break;case"defaultValue":be=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,f));break;default:Jn(A,f,w,dt,p,null)}}ll(A,Q,be,De,Ze,oe,R,!1),ol(A);return;case"select":ln("invalid",A),w=oe=Q=null;for(R in p)if(p.hasOwnProperty(R)&&(be=p[R],be!=null))switch(R){case"value":Q=be;break;case"defaultValue":oe=be;break;case"multiple":w=be;default:Jn(A,f,R,be,p,null)}f=Q,p=oe,A.multiple=!!w,f!=null?so(A,!!w,f,!1):p!=null&&so(A,!!w,p,!0);return;case"textarea":ln("invalid",A),Q=R=w=null;for(oe in p)if(p.hasOwnProperty(oe)&&(be=p[oe],be!=null))switch(oe){case"value":w=be;break;case"defaultValue":R=be;break;case"children":Q=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:Jn(A,f,oe,be,p,null)}ul(A,w,R,Q),ol(A);return;case"option":for(De in p)if(p.hasOwnProperty(De)&&(w=p[De],w!=null))switch(De){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Jn(A,f,De,w,p,null)}return;case"dialog":ln("beforetoggle",A),ln("toggle",A),ln("cancel",A),ln("close",A);break;case"iframe":case"object":ln("load",A);break;case"video":case"audio":for(w=0;w<kp.length;w++)ln(kp[w],A);break;case"image":ln("error",A),ln("load",A);break;case"details":ln("toggle",A);break;case"embed":case"source":case"link":ln("error",A),ln("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in p)if(p.hasOwnProperty(Ze)&&(w=p[Ze],w!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Jn(A,f,Ze,w,p,null)}return;default:if(Hu(f)){for(dt in p)p.hasOwnProperty(dt)&&(w=p[dt],w!==void 0&&Yb(A,f,dt,w,p,void 0));return}}for(be in p)p.hasOwnProperty(be)&&(w=p[be],w!=null&&Jn(A,f,be,w,p,null))}function v9(A,f,p,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,Q=null,oe=null,be=null,De=null,Ze=null,dt=null;for(at in p){var wt=p[at];if(p.hasOwnProperty(at)&&wt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":De=wt;default:w.hasOwnProperty(at)||Jn(A,f,at,null,w,wt)}}for(var rt in w){var at=w[rt];if(wt=p[rt],w.hasOwnProperty(rt)&&(at!=null||wt!=null))switch(rt){case"type":Q=at;break;case"name":R=at;break;case"checked":Ze=at;break;case"defaultChecked":dt=at;break;case"value":oe=at;break;case"defaultValue":be=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,f));break;default:at!==wt&&Jn(A,f,rt,at,w,wt)}}Ns(A,oe,be,De,Ze,dt,Q,R);return;case"select":at=oe=be=rt=null;for(Q in p)if(De=p[Q],p.hasOwnProperty(Q)&&De!=null)switch(Q){case"value":break;case"multiple":at=De;default:w.hasOwnProperty(Q)||Jn(A,f,Q,null,w,De)}for(R in w)if(Q=w[R],De=p[R],w.hasOwnProperty(R)&&(Q!=null||De!=null))switch(R){case"value":rt=Q;break;case"defaultValue":be=Q;break;case"multiple":oe=Q;default:Q!==De&&Jn(A,f,R,Q,w,De)}f=be,p=oe,w=at,rt!=null?so(A,!!p,rt,!1):!!w!=!!p&&(f!=null?so(A,!!p,f,!0):so(A,!!p,p?[]:"",!1));return;case"textarea":at=rt=null;for(be in p)if(R=p[be],p.hasOwnProperty(be)&&R!=null&&!w.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:Jn(A,f,be,null,w,R)}for(oe in w)if(R=w[oe],Q=p[oe],w.hasOwnProperty(oe)&&(R!=null||Q!=null))switch(oe){case"value":rt=R;break;case"defaultValue":at=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==Q&&Jn(A,f,oe,R,w,Q)}En(A,rt,at);return;case"option":for(var Sr in p)if(rt=p[Sr],p.hasOwnProperty(Sr)&&rt!=null&&!w.hasOwnProperty(Sr))switch(Sr){case"selected":A.selected=!1;break;default:Jn(A,f,Sr,null,w,rt)}for(De in w)if(rt=w[De],at=p[De],w.hasOwnProperty(De)&&rt!==at&&(rt!=null||at!=null))switch(De){case"selected":A.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Jn(A,f,De,rt,w,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pr in p)rt=p[pr],p.hasOwnProperty(pr)&&rt!=null&&!w.hasOwnProperty(pr)&&Jn(A,f,pr,null,w,rt);for(Ze in w)if(rt=w[Ze],at=p[Ze],w.hasOwnProperty(Ze)&&rt!==at&&(rt!=null||at!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,f));break;default:Jn(A,f,Ze,rt,w,at)}return;default:if(Hu(f)){for(var Zn in p)rt=p[Zn],p.hasOwnProperty(Zn)&&rt!==void 0&&!w.hasOwnProperty(Zn)&&Yb(A,f,Zn,void 0,w,rt);for(dt in w)rt=w[dt],at=p[dt],!w.hasOwnProperty(dt)||rt===at||rt===void 0&&at===void 0||Yb(A,f,dt,rt,w,at);return}}for(var Ge in p)rt=p[Ge],p.hasOwnProperty(Ge)&&rt!=null&&!w.hasOwnProperty(Ge)&&Jn(A,f,Ge,null,w,rt);for(wt in w)rt=w[wt],at=p[wt],!w.hasOwnProperty(wt)||rt===at||rt==null&&at==null||Jn(A,f,wt,rt,w,at)}var Jb=null,Zb=null;function G1(A){return A.nodeType===9?A:A.ownerDocument}function nN(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aN(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function eC(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var tC=null;function y9(){var A=window.event;return A&&A.type==="popstate"?A===tC?!1:(tC=A,!0):(tC=null,!1)}var sN=typeof setTimeout=="function"?setTimeout:void 0,w9=typeof clearTimeout=="function"?clearTimeout:void 0,iN=typeof Promise=="function"?Promise:void 0,b9=typeof queueMicrotask=="function"?queueMicrotask:typeof iN<"u"?function(A){return iN.resolve(null).then(A).catch(C9)}:sN;function C9(A){setTimeout(function(){throw A})}function vd(A){return A==="head"}function oN(A,f){var p=f,w=0,R=0;do{var Q=p.nextSibling;if(A.removeChild(p),Q&&Q.nodeType===8)if(p=Q.data,p==="/$"){if(0<w&&8>w){p=w;var oe=A.ownerDocument;if(p&1&&Fp(oe.documentElement),p&2&&Fp(oe.body),p&4)for(p=oe.head,Fp(p),oe=p.firstChild;oe;){var be=oe.nextSibling,De=oe.nodeName;oe[Ee]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||p.removeChild(oe),oe=be}}if(R===0){A.removeChild(Q),Op(f);return}R--}else p==="$"||p==="$?"||p==="$!"?R++:w=p.charCodeAt(0)-48;else w=0;p=Q}while(p);Op(f)}function rC(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":rC(p),_e(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}A.removeChild(p)}}function E9(A,f,p,w){for(;A.nodeType===1;){var R=p;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[Ee])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(Q=A.getAttribute("rel"),Q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(Q!==R.rel||A.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||A.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||A.getAttribute("title")!==(R.title==null?null:R.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(Q=A.getAttribute("src"),(Q!==(R.src==null?null:R.src)||A.getAttribute("type")!==(R.type==null?null:R.type)||A.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&Q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var Q=R.name==null?null:""+R.name;if(R.type==="hidden"&&A.getAttribute("name")===Q)return A}else return A;if(A=pc(A.nextSibling),A===null)break}return null}function _9(A,f,p){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!p||(A=pc(A.nextSibling),A===null))return null;return A}function nC(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function S9(A,f){var p=A.ownerDocument;if(A.data!=="$?"||p.readyState==="complete")f();else{var w=function(){f(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function pc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var aC=null;function lN(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var p=A.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return A;f--}else p==="/$"&&f++}A=A.previousSibling}return null}function cN(A,f,p){switch(f=G1(p),A){case"html":if(A=f.documentElement,!A)throw Error(n(452));return A;case"head":if(A=f.head,!A)throw Error(n(453));return A;case"body":if(A=f.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Fp(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);_e(A)}var Nl=new Map,uN=new Set;function q1(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var hA=ee.d;ee.d={f:T9,r:B9,D:N9,C:k9,L:I9,m:F9,X:R9,S:D9,M:L9};function T9(){var A=hA.f(),f=M1();return A||f}function B9(A){var f=ke(A);f!==null&&f.tag===5&&f.type==="form"?Vf(f):hA.r(A)}var g0=typeof document>"u"?null:document;function AN(A,f,p){var w=g0;if(w&&typeof f=="string"&&f){var R=mn(f);R='link[rel="'+A+'"][href="'+R+'"]',typeof p=="string"&&(R+='[crossorigin="'+p+'"]'),uN.has(R)||(uN.add(R),A={rel:A,crossOrigin:p,href:f},w.querySelector(R)===null&&(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function N9(A){hA.D(A),AN("dns-prefetch",A,null)}function k9(A,f){hA.C(A,f),AN("preconnect",A,f)}function I9(A,f,p){hA.L(A,f,p);var w=g0;if(w&&A&&f){var R='link[rel="preload"][as="'+mn(f)+'"]';f==="image"&&p&&p.imageSrcSet?(R+='[imagesrcset="'+mn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(R+='[imagesizes="'+mn(p.imageSizes)+'"]')):R+='[href="'+mn(A)+'"]';var Q=R;switch(f){case"style":Q=x0(A);break;case"script":Q=v0(A)}Nl.has(Q)||(A=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:A,as:f},p),Nl.set(Q,A),w.querySelector(R)!==null||f==="style"&&w.querySelector(Dp(Q))||f==="script"&&w.querySelector(Rp(Q))||(f=w.createElement("link"),ii(f,"link",A),He(f),w.head.appendChild(f)))}}function F9(A,f){hA.m(A,f);var p=g0;if(p&&A){var w=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+mn(w)+'"][href="'+mn(A)+'"]',Q=R;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Q=v0(A)}if(!Nl.has(Q)&&(A=d({rel:"modulepreload",href:A},f),Nl.set(Q,A),p.querySelector(R)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Rp(Q)))return}w=p.createElement("link"),ii(w,"link",A),He(w),p.head.appendChild(w)}}}function D9(A,f,p){hA.S(A,f,p);var w=g0;if(w&&A){var R=tt(w).hoistableStyles,Q=x0(A);f=f||"default";var oe=R.get(Q);if(!oe){var be={loading:0,preload:null};if(oe=w.querySelector(Dp(Q)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},p),(p=Nl.get(Q))&&sC(A,p);var De=oe=w.createElement("link");He(De),ii(De,"link",A),De._p=new Promise(function(Ze,dt){De.onload=Ze,De.onerror=dt}),De.addEventListener("load",function(){be.loading|=1}),De.addEventListener("error",function(){be.loading|=2}),be.loading|=4,K1(oe,f,w)}oe={type:"stylesheet",instance:oe,count:1,state:be},R.set(Q,oe)}}}function R9(A,f){hA.X(A,f);var p=g0;if(p&&A){var w=tt(p).hoistableScripts,R=v0(A),Q=w.get(R);Q||(Q=p.querySelector(Rp(R)),Q||(A=d({src:A,async:!0},f),(f=Nl.get(R))&&iC(A,f),Q=p.createElement("script"),He(Q),ii(Q,"link",A),p.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},w.set(R,Q))}}function L9(A,f){hA.M(A,f);var p=g0;if(p&&A){var w=tt(p).hoistableScripts,R=v0(A),Q=w.get(R);Q||(Q=p.querySelector(Rp(R)),Q||(A=d({src:A,async:!0,type:"module"},f),(f=Nl.get(R))&&iC(A,f),Q=p.createElement("script"),He(Q),ii(Q,"link",A),p.head.appendChild(Q)),Q={type:"script",instance:Q,count:1,state:null},w.set(R,Q))}}function dN(A,f,p,w){var R=(R=ce.current)?q1(R):null;if(!R)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=x0(p.href),p=tt(R).hoistableStyles,w=p.get(f),w||(w={type:"style",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){A=x0(p.href);var Q=tt(R).hoistableStyles,oe=Q.get(A);if(oe||(R=R.ownerDocument||R,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Q.set(A,oe),(Q=R.querySelector(Dp(A)))&&!Q._p&&(oe.instance=Q,oe.state.loading=5),Nl.has(A)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Nl.set(A,p),Q||U9(R,A,p,oe.state))),f&&w===null)throw Error(n(528,""));return oe}if(f&&w!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=v0(p),p=tt(R).hoistableScripts,w=p.get(f),w||(w={type:"script",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function x0(A){return'href="'+mn(A)+'"'}function Dp(A){return'link[rel="stylesheet"]['+A+"]"}function fN(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function U9(A,f,p,w){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=A.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),ii(f,"link",p),He(f),A.head.appendChild(f))}function v0(A){return'[src="'+mn(A)+'"]'}function Rp(A){return"script[async]"+A}function hN(A,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var w=A.querySelector('style[data-href~="'+mn(p.href)+'"]');if(w)return f.instance=w,He(w),w;var R=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),He(w),ii(w,"style",R),K1(w,p.precedence,A),f.instance=w;case"stylesheet":R=x0(p.href);var Q=A.querySelector(Dp(R));if(Q)return f.state.loading|=4,f.instance=Q,He(Q),Q;w=fN(p),(R=Nl.get(R))&&sC(w,R),Q=(A.ownerDocument||A).createElement("link"),He(Q);var oe=Q;return oe._p=new Promise(function(be,De){oe.onload=be,oe.onerror=De}),ii(Q,"link",w),f.state.loading|=4,K1(Q,p.precedence,A),f.instance=Q;case"script":return Q=v0(p.src),(R=A.querySelector(Rp(Q)))?(f.instance=R,He(R),R):(w=p,(R=Nl.get(Q))&&(w=d({},p),iC(w,R)),A=A.ownerDocument||A,R=A.createElement("script"),He(R),ii(R,"link",w),A.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,K1(w,p.precedence,A));return f.instance}function K1(A,f,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=w.length?w[w.length-1]:null,Q=R,oe=0;oe<w.length;oe++){var be=w[oe];if(be.dataset.precedence===f)Q=be;else if(Q!==R)break}Q?Q.parentNode.insertBefore(A,Q.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(A,f.firstChild))}function sC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function iC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var W1=null;function mN(A,f,p){if(W1===null){var w=new Map,R=W1=new Map;R.set(p,w)}else R=W1,w=R.get(p),w||(w=new Map,R.set(p,w));if(w.has(A))return w;for(w.set(A,null),p=p.getElementsByTagName(A),R=0;R<p.length;R++){var Q=p[R];if(!(Q[Ee]||Q[hn]||A==="link"&&Q.getAttribute("rel")==="stylesheet")&&Q.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=Q.getAttribute(f)||"";oe=A+oe;var be=w.get(oe);be?be.push(Q):w.set(oe,[Q])}}return w}function pN(A,f,p){A=A.ownerDocument||A,A.head.insertBefore(p,f==="title"?A.querySelector("head > title"):null)}function M9(A,f,p){if(p===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function gN(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Lp=null;function P9(){}function j9(A,f,p){if(Lp===null)throw Error(n(475));var w=Lp;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=x0(p.href),Q=A.querySelector(Dp(R));if(Q){A=Q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=$1.bind(w),A.then(w,w)),f.state.loading|=4,f.instance=Q,He(Q);return}Q=A.ownerDocument||A,p=fN(p),(R=Nl.get(R))&&sC(p,R),Q=Q.createElement("link"),He(Q);var oe=Q;oe._p=new Promise(function(be,De){oe.onload=be,oe.onerror=De}),ii(Q,"link",p),f.instance=Q}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=$1.bind(w),A.addEventListener("load",f),A.addEventListener("error",f))}}function O9(){if(Lp===null)throw Error(n(475));var A=Lp;return A.stylesheets&&A.count===0&&oC(A,A.stylesheets),0<A.count?function(f){var p=setTimeout(function(){if(A.stylesheets&&oC(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(p)}}:null}function $1(){if(this.count--,this.count===0){if(this.stylesheets)oC(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var X1=null;function oC(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,X1=new Map,f.forEach(Q9,A),X1=null,$1.call(A))}function Q9(A,f){if(!(f.state.loading&4)){var p=X1.get(A);if(p)var w=p.get(null);else{p=new Map,X1.set(A,p);for(var R=A.querySelectorAll("link[data-precedence],style[data-precedence]"),Q=0;Q<R.length;Q++){var oe=R[Q];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(p.set(oe.dataset.precedence,oe),w=oe)}w&&p.set(null,w)}R=f.instance,oe=R.getAttribute("data-precedence"),Q=p.get(oe)||w,Q===w&&p.set(null,R),p.set(oe,R),this.count++,w=$1.bind(this),R.addEventListener("load",w),R.addEventListener("error",w),Q?Q.parentNode.insertBefore(R,Q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(R,A.firstChild)),f.state.loading|=4}}var Up={$$typeof:F,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function H9(A,f,p,w,R,Q,oe,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.hiddenUpdates=na(null),this.identifierPrefix=w,this.onUncaughtError=R,this.onCaughtError=Q,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function xN(A,f,p,w,R,Q,oe,be,De,Ze,dt,wt){return A=new H9(A,f,p,oe,be,De,Ze,wt),f=1,Q===!0&&(f|=24),Q=Qs(3,null,null,f),A.current=Q,Q.stateNode=A,f=sp(),f.refCount++,A.pooledCache=f,f.refCount++,Q.memoizedState={element:w,isDehydrated:p,cache:f},Me(Q),A}function vN(A){return A?(A=ms,A):ms}function yN(A,f,p,w,R,Q){R=vN(R),w.context===null?w.context=R:w.pendingContext=R,w=ct(f),w.payload={element:p},Q=Q===void 0?null:Q,Q!==null&&(w.callback=Q),p=vt(A,w,f),p!==null&&(Ko(p,A,f),ft(p,A,f))}function wN(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var p=A.retryLane;A.retryLane=p!==0&&p<f?p:f}}function lC(A,f){wN(A,f),(A=A.alternate)&&wN(A,f)}function bN(A){if(A.tag===13){var f=nc(A,67108864);f!==null&&Ko(f,A,67108864),lC(A,67108864)}}var Y1=!0;function V9(A,f,p,w){var R=Z.T;Z.T=null;var Q=ee.p;try{ee.p=2,cC(A,f,p,w)}finally{ee.p=Q,Z.T=R}}function z9(A,f,p,w){var R=Z.T;Z.T=null;var Q=ee.p;try{ee.p=8,cC(A,f,p,w)}finally{ee.p=Q,Z.T=R}}function cC(A,f,p,w){if(Y1){var R=uC(w);if(R===null)Xb(A,f,w,J1,p),EN(A,w);else if(q9(R,A,f,p,w))w.stopPropagation();else if(EN(A,w),f&4&&-1<G9.indexOf(A)){for(;R!==null;){var Q=ke(R);if(Q!==null)switch(Q.tag){case 3:if(Q=Q.stateNode,Q.current.memoizedState.isDehydrated){var oe=gr(Q.pendingLanes);if(oe!==0){var be=Q;for(be.pendingLanes|=2,be.entangledLanes|=2;oe;){var De=1<<31-Dt(oe);be.entanglements[1]|=De,oe&=~De}fu(Q),(On&6)===0&&(L1=je()+500,Np(0))}}break;case 13:be=nc(Q,2),be!==null&&Ko(be,Q,2),M1(),lC(Q,2)}if(Q=uC(w),Q===null&&Xb(A,f,w,J1,p),Q===R)break;R=Q}R!==null&&w.stopPropagation()}else Xb(A,f,w,null,p)}}function uC(A){return A=Pn(A),AC(A)}var J1=null;function AC(A){if(J1=null,A=Te(A),A!==null){var f=s(A);if(f===null)A=null;else{var p=f.tag;if(p===13){if(A=i(f),A!==null)return A;A=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return J1=A,null}function CN(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(et()){case st:return 2;case mt:return 8;case _t:case ut:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var dC=!1,yd=null,wd=null,bd=null,Mp=new Map,Pp=new Map,Cd=[],G9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EN(A,f){switch(A){case"focusin":case"focusout":yd=null;break;case"dragenter":case"dragleave":wd=null;break;case"mouseover":case"mouseout":bd=null;break;case"pointerover":case"pointerout":Mp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pp.delete(f.pointerId)}}function jp(A,f,p,w,R,Q){return A===null||A.nativeEvent!==Q?(A={blockedOn:f,domEventName:p,eventSystemFlags:w,nativeEvent:Q,targetContainers:[R]},f!==null&&(f=ke(f),f!==null&&bN(f)),A):(A.eventSystemFlags|=w,f=A.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),A)}function q9(A,f,p,w,R){switch(f){case"focusin":return yd=jp(yd,A,f,p,w,R),!0;case"dragenter":return wd=jp(wd,A,f,p,w,R),!0;case"mouseover":return bd=jp(bd,A,f,p,w,R),!0;case"pointerover":var Q=R.pointerId;return Mp.set(Q,jp(Mp.get(Q)||null,A,f,p,w,R)),!0;case"gotpointercapture":return Q=R.pointerId,Pp.set(Q,jp(Pp.get(Q)||null,A,f,p,w,R)),!0}return!1}function _N(A){var f=Te(A.target);if(f!==null){var p=s(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){A.blockedOn=f,Ss(A.priority,function(){if(p.tag===13){var w=qo();w=As(w);var R=nc(p,w);R!==null&&Ko(R,p,w),lC(p,w)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){A.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Z1(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var p=uC(A.nativeEvent);if(p===null){p=A.nativeEvent;var w=new p.constructor(p.type,p);io=w,p.target.dispatchEvent(w),io=null}else return f=ke(p),f!==null&&bN(f),A.blockedOn=p,!1;f.shift()}return!0}function SN(A,f,p){Z1(A)&&p.delete(f)}function K9(){dC=!1,yd!==null&&Z1(yd)&&(yd=null),wd!==null&&Z1(wd)&&(wd=null),bd!==null&&Z1(bd)&&(bd=null),Mp.forEach(SN),Pp.forEach(SN)}function ev(A,f){A.blockedOn===f&&(A.blockedOn=null,dC||(dC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,K9)))}var tv=null;function TN(A){tv!==A&&(tv=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tv===A&&(tv=null);for(var f=0;f<A.length;f+=3){var p=A[f],w=A[f+1],R=A[f+2];if(typeof w!="function"){if(AC(w||p)===null)continue;break}var Q=ke(p);Q!==null&&(A.splice(f,3),f-=3,Sl(Q,{pending:!0,data:R,method:p.method,action:w},w,R))}}))}function Op(A){function f(De){return ev(De,A)}yd!==null&&ev(yd,A),wd!==null&&ev(wd,A),bd!==null&&ev(bd,A),Mp.forEach(f),Pp.forEach(f);for(var p=0;p<Cd.length;p++){var w=Cd[p];w.blockedOn===A&&(w.blockedOn=null)}for(;0<Cd.length&&(p=Cd[0],p.blockedOn===null);)_N(p),p.blockedOn===null&&Cd.shift();if(p=(A.ownerDocument||A).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var R=p[w],Q=p[w+1],oe=R[sn]||null;if(typeof Q=="function")oe||TN(p);else if(oe){var be=null;if(Q&&Q.hasAttribute("formAction")){if(R=Q,oe=Q[sn]||null)be=oe.formAction;else if(AC(R)!==null)continue}else be=oe.action;typeof be=="function"?p[w+1]=be:(p.splice(w,3),w-=3),TN(p)}}}function fC(A){this._internalRoot=A}rv.prototype.render=fC.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,w=qo();yN(p,w,A,f,null,null)},rv.prototype.unmount=fC.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;yN(A.current,2,null,A,null,null),M1(),f[Fn]=null}};function rv(A){this._internalRoot=A}rv.prototype.unstable_scheduleHydration=function(A){if(A){var f=ba();A={blockedOn:null,target:A,priority:f};for(var p=0;p<Cd.length&&f!==0&&f<Cd[p].priority;p++);Cd.splice(p,0,A),p===0&&_N(A)}};var BN=e.version;if(BN!=="19.1.1")throw Error(n(527,BN,"19.1.1"));ee.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var W9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{kt=nv.inject(W9),It=nv}catch{}}return Hp.createRoot=function(A,f){if(!a(A))throw Error(n(299));var p=!1,w="",R=zT,Q=GT,oe=qT,be=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(Q=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(be=f.unstable_transitionCallbacks)),f=xN(A,1,!1,null,null,p,w,R,Q,oe,be,null),A[Fn]=f.current,$b(A),new fC(f)},Hp.hydrateRoot=function(A,f,p){if(!a(A))throw Error(n(299));var w=!1,R="",Q=zT,oe=GT,be=qT,De=null,Ze=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(R=p.identifierPrefix),p.onUncaughtError!==void 0&&(Q=p.onUncaughtError),p.onCaughtError!==void 0&&(oe=p.onCaughtError),p.onRecoverableError!==void 0&&(be=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(De=p.unstable_transitionCallbacks),p.formState!==void 0&&(Ze=p.formState)),f=xN(A,1,!0,f,p??null,w,R,Q,oe,be,De,Ze),f.context=vN(null),p=f.current,w=qo(),w=As(w),R=ct(w),R.callback=null,vt(p,R,w),p=w,f.current.lanes=p,pa(f,p),fu(f),A[Fn]=f.current,$b(A),new rv(f)},Hp.version="19.1.1",Hp}var PN;function nH(){if(PN)return pC.exports;PN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pC.exports=rH(),pC.exports}var aH=nH();const sH=eS(aH),iH=()=>{};var jN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},oH=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],o=t[r++],l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},eL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,o=i?t[a+1]:0,l=a+2<t.length,u=l?t[a+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||o==null||u==null||h==null)throw new lH;const m=s<<2|o>>4;if(n.push(m),u!==64){const g=o<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cH=function(t){const e=ZR(t);return eL.encodeByteArray(e,!0)},R2=function(t){return cH(t).replace(/\./g,"")},tL=function(t){try{return eL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=()=>uH().__FIREBASE_DEFAULTS__,dH=()=>{if(typeof process>"u"||typeof jN>"u")return;const t=jN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tL(t[1]);return e&&JSON.parse(e)},Gy=()=>{try{return iH()||AH()||dH()||fH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rL=t=>{var e,r;return(r=(e=Gy())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},hH=t=>{const e=rL(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},nL=()=>{var t;return(t=Gy())==null?void 0:t.config},aL=t=>{var e;return(e=Gy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sL(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[R2(JSON.stringify(r)),R2(JSON.stringify(i)),""].join(".")}const _g={};function gH(){const t={prod:[],emulator:[]};for(const e of Object.keys(_g))_g[e]?t.emulator.push(e):t.prod.push(e);return t}function xH(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let ON=!1;function iL(t,e){if(typeof window>"u"||typeof document>"u"||!Pm(window.location.host)||_g[t]===e||_g[t]||ON)return;_g[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",s=gH().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ON=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=xH(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),E=document.getElementById(y)||document.createElement("a"),B=r("preprendIcon"),k=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const F=m.element;o(F),d(E,y);const U=u();l(k,B),F.append(k,b,E,U),document.body.appendChild(F)}s?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zi())}function yH(){var e;const t=(e=Gy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EH(){const t=zi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _H(){return!yH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SH(){try{return typeof indexedDB=="object"}catch{return!1}}function TH(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH="FirebaseError";class PA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=BH,Object.setPrototypeOf(this,PA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ix.prototype.create)}}class Ix{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?NH(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new PA(a,o,n)}}function NH(t,e){return t.replace(kH,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const kH=/\{\$([^}]+)}/g;function IH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function of(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(QN(s)&&QN(i)){if(!of(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function QN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ag(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function sg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function FH(t,e){const r=new DH(t,e);return r.subscribe.bind(r)}class DH{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");RH(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=yC),a.error===void 0&&(a.error=yC),a.complete===void 0&&(a.complete=yC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RH(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function yC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t){return t&&t._delegate?t._delegate:t}class yh{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LH=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new mH;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MH(e))try{this.getOrInitializeService({instanceIdentifier:Jf})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Jf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jf){return this.instances.has(e)}getOptions(e=Jf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:UH(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jf){return this.component?this.component.multipleInstances?e:Jf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UH(t){return t===Jf?void 0:t}function MH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new LH(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(un||(un={}));const jH={debug:un.DEBUG,verbose:un.VERBOSE,info:un.INFO,warn:un.WARN,error:un.ERROR,silent:un.SILENT},OH=un.INFO,QH={[un.DEBUG]:"log",[un.VERBOSE]:"log",[un.INFO]:"info",[un.WARN]:"warn",[un.ERROR]:"error"},HH=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=QH[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let tS=class{constructor(e){this.name=e,this._logLevel=OH,this._logHandler=HH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in un))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,un.DEBUG,...e),this._logHandler(this,un.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,un.VERBOSE,...e),this._logHandler(this,un.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,un.INFO,...e),this._logHandler(this,un.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,un.WARN,...e),this._logHandler(this,un.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,un.ERROR,...e),this._logHandler(this,un.ERROR,...e)}};const VH=(t,e)=>e.some(r=>t instanceof r);let HN,VN;function zH(){return HN||(HN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GH(){return VN||(VN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oL=new WeakMap,e_=new WeakMap,lL=new WeakMap,wC=new WeakMap,rS=new WeakMap;function qH(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r($d(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&oL.set(r,t)}).catch(()=>{}),rS.set(e,t),e}function KH(t){if(e_.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});e_.set(t,e)}let t_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return e_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lL.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $d(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WH(t){t_=t(t_)}function $H(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(bC(this),e,...r);return lL.set(n,e.sort?e.sort():[e]),$d(n)}:GH().includes(t)?function(...e){return t.apply(bC(this),e),$d(oL.get(this))}:function(...e){return $d(t.apply(bC(this),e))}}function XH(t){return typeof t=="function"?$H(t):(t instanceof IDBTransaction&&KH(t),VH(t,zH())?new Proxy(t,t_):t)}function $d(t){if(t instanceof IDBRequest)return qH(t);if(wC.has(t))return wC.get(t);const e=XH(t);return e!==t&&(wC.set(t,e),rS.set(e,t)),e}const bC=t=>rS.get(t);function YH(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),o=$d(i);return n&&i.addEventListener("upgradeneeded",l=>{n($d(i.result),l.oldVersion,l.newVersion,$d(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),a&&l.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const JH=["get","getKey","getAll","getAllKeys","count"],ZH=["put","add","delete","clear"],CC=new Map;function zN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(CC.get(e))return CC.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=ZH.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||JH.includes(r)))return;const s=async function(i,...o){const l=this.transaction(i,a?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&l.done]))[0]};return CC.set(e,s),s}WH(t=>({...t,get:(e,r,n)=>zN(e,r)||t.get(e,r,n),has:(e,r)=>!!zN(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(tV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function tV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r_="@firebase/app",GN="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new tS("@firebase/app"),rV="@firebase/app-compat",nV="@firebase/analytics-compat",aV="@firebase/analytics",sV="@firebase/app-check-compat",iV="@firebase/app-check",oV="@firebase/auth",lV="@firebase/auth-compat",cV="@firebase/database",uV="@firebase/data-connect",AV="@firebase/database-compat",dV="@firebase/functions",fV="@firebase/functions-compat",hV="@firebase/installations",mV="@firebase/installations-compat",pV="@firebase/messaging",gV="@firebase/messaging-compat",xV="@firebase/performance",vV="@firebase/performance-compat",yV="@firebase/remote-config",wV="@firebase/remote-config-compat",bV="@firebase/storage",CV="@firebase/storage-compat",EV="@firebase/firestore",_V="@firebase/ai",SV="@firebase/firestore-compat",TV="firebase",BV="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="[DEFAULT]",NV={[r_]:"fire-core",[rV]:"fire-core-compat",[aV]:"fire-analytics",[nV]:"fire-analytics-compat",[iV]:"fire-app-check",[sV]:"fire-app-check-compat",[oV]:"fire-auth",[lV]:"fire-auth-compat",[cV]:"fire-rtdb",[uV]:"fire-data-connect",[AV]:"fire-rtdb-compat",[dV]:"fire-fn",[fV]:"fire-fn-compat",[hV]:"fire-iid",[mV]:"fire-iid-compat",[pV]:"fire-fcm",[gV]:"fire-fcm-compat",[xV]:"fire-perf",[vV]:"fire-perf-compat",[yV]:"fire-rc",[wV]:"fire-rc-compat",[bV]:"fire-gcs",[CV]:"fire-gcs-compat",[EV]:"fire-fst",[SV]:"fire-fst-compat",[_V]:"fire-vertex","fire-js":"fire-js",[TV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map,kV=new Map,a_=new Map;function qN(t,e){try{t.container.addComponent(e)}catch(r){NA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function wm(t){const e=t.name;if(a_.has(e))return NA.debug(`There were multiple attempts to register component ${e}.`),!1;a_.set(e,t);for(const r of Wg.values())qN(r,t);for(const r of kV.values())qN(r,t);return!0}function nS(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function bc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xd=new Ix("app","Firebase",IV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=BV;function aS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:n_,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Xd.create("bad-app-name",{appName:String(a)});if(r||(r=nL()),!r)throw Xd.create("no-options");const s=Wg.get(a);if(s){if(of(r,s.options)&&of(n,s.config))return s;throw Xd.create("duplicate-app",{appName:a})}const i=new PH(a);for(const l of a_.values())i.addComponent(l);const o=new FV(r,n,i);return Wg.set(a,o),o}function cL(t=n_){const e=Wg.get(t);if(!e&&t===n_&&nL())return aS();if(!e)throw Xd.create("no-app",{appName:t});return e}function KN(){return Array.from(Wg.values())}function Yd(t,e,r){let n=NV[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${e}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),NA.warn(i.join(" "));return}wm(new yh(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="firebase-heartbeat-database",RV=1,$g="firebase-heartbeat-store";let EC=null;function uL(){return EC||(EC=YH(DV,RV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($g)}catch(r){console.warn(r)}}}}).catch(t=>{throw Xd.create("idb-open",{originalErrorMessage:t.message})})),EC}async function LV(t){try{const r=(await uL()).transaction($g),n=await r.objectStore($g).get(AL(t));return await r.done,n}catch(e){if(e instanceof PA)NA.warn(e.message);else{const r=Xd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});NA.warn(r.message)}}}async function WN(t,e){try{const n=(await uL()).transaction($g,"readwrite");await n.objectStore($g).put(e,AL(t)),await n.done}catch(r){if(r instanceof PA)NA.warn(r.message);else{const n=Xd.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});NA.warn(n.message)}}}function AL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=1024,MV=30;class PV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new OV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$N();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>MV){const i=QV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){NA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$N(),{heartbeatsToSend:n,unsentEntries:a}=jV(this._heartbeatsCache.heartbeats),s=R2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return NA.warn(r),""}}}function $N(){return new Date().toISOString().substring(0,10)}function jV(t,e=UV){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),XN(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),XN(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class OV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SH()?TH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await LV(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return WN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return WN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function XN(t){return R2(JSON.stringify({version:2,heartbeats:t})).length}function QV(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t){wm(new yh("platform-logger",e=>new eV(e),"PRIVATE")),wm(new yh("heartbeat",e=>new PV(e),"PRIVATE")),Yd(r_,GN,t),Yd(r_,GN,"esm2020"),Yd("fire-js","")}HV("");function dL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VV=dL,fL=new Ix("auth","Firebase",dL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new tS("@firebase/auth");function zV(t,...e){L2.logLevel<=un.WARN&&L2.warn(`Auth (${jm}): ${t}`,...e)}function l2(t,...e){L2.logLevel<=un.ERROR&&L2.error(`Auth (${jm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t,...e){throw sS(t,...e)}function Eu(t,...e){return sS(t,...e)}function hL(t,e,r){const n={...VV(),[e]:r};return new Ix("auth","Firebase",n).create(e,{appName:t.name})}function Jd(t){return hL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sS(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return fL.create(t,...e)}function Er(t,e,...r){if(!t)throw sS(e,...r)}function vA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw l2(e),new Error(e)}function kA(t,e){t||vA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function GV(){return YN()==="http:"||YN()==="https:"}function YN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GV()||bH()||"connection"in navigator)?navigator.onLine:!0}function KV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,r){this.shortDelay=e,this.longDelay=r,kA(r>e,"Short delay should be less than long delay!"),this.isMobile=vH()||CH()}get(){return qV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t,e){kA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XV=new Dx(3e4,6e4);function wf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jA(t,e,r,n,a={}){return pL(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const o=Fx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return wH()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Pm(t.emulatorConfig.host)&&(u.credentials="include"),mL.fetch()(await gL(t,t.config.apiHost,r,o),u)})}async function pL(t,e,r){t._canInitEmulator=!1;const n={...WV,...e};try{const a=new JV(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw av(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw av(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw av(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw av(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw hL(t,d,u);Ic(t,d)}}catch(a){if(a instanceof PA)throw a;Ic(t,"network-request-failed",{message:String(a)})}}async function qy(t,e,r,n,a={}){const s=await jA(t,e,r,n,a);return"mfaPendingCredential"in s&&Ic(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function gL(t,e,r,n){const a=`${e}${r}?${n}`,s=t,i=s.config.emulator?iS(t.config,a):`${t.config.apiScheme}://${a}`;return $V.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function YV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Eu(this.auth,"network-request-failed")),XV.get())})}}function av(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Eu(t,e,n);return a.customData._tokenResponse=r,a}function JN(t){return t!==void 0&&t.enterprise!==void 0}class ZV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return YV(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ez(t,e){return jA(t,"GET","/v2/recaptchaConfig",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(t,e){return jA(t,"POST","/v1/accounts:delete",e)}async function U2(t,e){return jA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rz(t,e=!1){const r=ls(t),n=await r.getIdToken(e),a=oS(n);Er(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Sg(_C(a.auth_time)),issuedAtTime:Sg(_C(a.iat)),expirationTime:Sg(_C(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _C(t){return Number(t)*1e3}function oS(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return l2("JWT malformed, contained fewer than 3 sections"),null;try{const a=tL(r);return a?JSON.parse(a):(l2("Failed to decode base64 JWT payload"),null)}catch(a){return l2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function ZN(t){const e=oS(t);return Er(e,"internal-error"),Er(typeof e.exp<"u","internal-error"),Er(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xg(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof PA&&nz(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function nz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sg(this.lastLoginAt),this.creationTime=Sg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t){var h;const e=t.auth,r=await t.getIdToken(),n=await Xg(t,U2(e,{idToken:r}));Er(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?xL(a.providerUserInfo):[],i=iz(t.providerData,s),o=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new i_(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function sz(t){const e=ls(t);await M2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iz(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function xL(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(t,e){const r=await pL(t,{},async()=>{const n=Fx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=await gL(t,a,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Pm(t.emulatorConfig.host)&&(l.credentials="include"),mL.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function lz(t,e){return jA(t,"POST","/v2/accounts:revokeToken",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Er(e.idToken,"internal-error"),Er(typeof e.idToken<"u","internal-error"),Er(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Er(e.length!==0,"internal-error");const r=ZN(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Er(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await oz(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Z0;return n&&(Er(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(Er(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(Er(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z0,this.toJSON())}_performRefresh(){return vA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e){Er(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _c{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new az(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new i_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Xg(this,this.stsTokenManager.getToken(this.auth,e));return Er(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return rz(this,e)}reload(){return sz(this)}_assign(e){this!==e&&(Er(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new _c({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Er(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await M2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bc(this.auth.app))return Promise.reject(Jd(this.auth));const e=await this.getIdToken();return await Xg(this,tz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:y}=r;Er(h&&y,e,"internal-error");const E=Z0.fromJSON(this.name,y);Er(typeof h=="string",e,"internal-error"),_d(n,e.name),_d(a,e.name),Er(typeof m=="boolean",e,"internal-error"),Er(typeof g=="boolean",e,"internal-error"),_d(s,e.name),_d(i,e.name),_d(o,e.name),_d(l,e.name),_d(u,e.name),_d(d,e.name);const B=new _c({uid:h,auth:e,email:a,emailVerified:m,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(B.providerData=b.map(k=>({...k}))),l&&(B._redirectEventId=l),B}static async _fromIdTokenResponse(e,r,n=!1){const a=new Z0;a.updateFromServerResponse(r);const s=new _c({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await M2(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];Er(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?xL(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new Z0;o.updateFromIdToken(n);const l=new _c({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new i_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new Map;function yA(t){kA(t instanceof Function,"Expected a class definition");let e=ek.get(t);return e?(kA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ek.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}vL.type="NONE";const tk=vL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e,r){return`firebase:${t}:${e}:${r}`}class em{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=c2(this.userKey,a.apiKey,s),this.fullPersistenceKey=c2("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await U2(this.auth,{idToken:e}).catch(()=>{});return r?_c._fromGetAccountInfoResponse(this.auth,r,e):null}return _c._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new em(yA(tk),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||yA(tk);const i=c2(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await U2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await _c._fromGetAccountInfoResponse(e,m,d)}else h=_c._fromJSON(e,d);u!==s&&(o=h),s=u;break}}catch{}const l=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new em(s,e,n):(s=l[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new em(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_L(e))return"Blackberry";if(SL(e))return"Webos";if(wL(e))return"Safari";if((e.includes("chrome/")||bL(e))&&!e.includes("edge/"))return"Chrome";if(EL(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function yL(t=zi()){return/firefox\//i.test(t)}function wL(t=zi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bL(t=zi()){return/crios\//i.test(t)}function CL(t=zi()){return/iemobile/i.test(t)}function EL(t=zi()){return/android/i.test(t)}function _L(t=zi()){return/blackberry/i.test(t)}function SL(t=zi()){return/webos/i.test(t)}function lS(t=zi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cz(t=zi()){var e;return lS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function uz(){return EH()&&document.documentMode===10}function TL(t=zi()){return lS(t)||EL(t)||SL(t)||_L(t)||/windows phone/i.test(t)||CL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e=[]){let r;switch(t){case"Browser":r=rk(zi());break;case"Worker":r=`${rk(zi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${jm}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,o)=>{try{const l=e(s);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(t,e={}){return jA(t,"GET","/v2/passwordPolicy",wf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=6;class hz{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??fz,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nk(this),this.idTokenSubscription=new nk(this),this.beforeStateQueue=new Az(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=yA(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await em.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await U2(this,{idToken:e}),n=await _c._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(bc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Er(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await M2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bc(this.app))return Promise.reject(Jd(this));const r=e?ls(e):null;return r&&Er(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Er(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bc(this.app)?Promise.reject(Jd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bc(this.app)?Promise.reject(Jd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dz(this),r=new hz(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ix("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await lz(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&yA(e)||this._popupRedirectResolver;Er(r,this,"argument-error"),this.redirectPersistenceManager=await em.create(this,[yA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Er(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,a);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Er(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(bc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&zV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Dh(t){return ls(t)}class nk{constructor(e){this.auth=e,this.observer=null,this.addObserver=FH(r=>this.observer=r)}get next(){return Er(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ky={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pz(t){Ky=t}function NL(t){return Ky.loadJS(t)}function gz(){return Ky.recaptchaEnterpriseScript}function xz(){return Ky.gapiScript}function vz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yz{constructor(){this.enterprise=new wz}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class wz{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const bz="recaptcha-enterprise",kL="NO_RECAPTCHA";class Cz{constructor(e){this.type=bz,this.auth=Dh(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{ez(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new ZV(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function a(s,i,o){const l=window.grecaptcha;JN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(kL)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yz().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&JN(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=gz();l.length!==0&&(l+=o),NL(l).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function ak(t,e,r,n=!1,a=!1){const s=new Cz(t);let i;if(a)i=kL;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function o_(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ak(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ak(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e){const r=nS(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(of(s,e??{}))return a;Ic(a,"already-initialized")}return r.initialize({options:e})}function _z(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(yA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Sz(t,e,r){const n=Dh(t);Er(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=IL(e),{host:i,port:o}=Tz(e),l=o===null?"":`:${o}`,u={url:`${s}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Er(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Er(of(u,n.config.emulator)&&of(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Pm(i)?(sL(`${s}//${i}${l}`),iL("Auth",!0)):Bz()}function IL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Tz(t){const e=IL(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:sk(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:sk(i)}}}function sk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Bz(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vA("not implemented")}_getIdTokenResponse(e){return vA("not implemented")}_linkToIdToken(e,r){return vA("not implemented")}_getReauthenticationResolver(e){return vA("not implemented")}}async function Nz(t,e){return jA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t,e){return qy(t,"POST","/v1/accounts:signInWithPassword",wf(t,e))}async function Iz(t,e){return jA(t,"POST","/v1/accounts:sendOobCode",wf(t,e))}async function Fz(t,e){return Iz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(t,e){return qy(t,"POST","/v1/accounts:signInWithEmailLink",wf(t,e))}async function Rz(t,e){return qy(t,"POST","/v1/accounts:signInWithEmailLink",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends cS{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Yg(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Yg(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o_(e,r,"signInWithPassword",kz);case"emailLink":return Dz(e,{email:this._email,oobCode:this._password});default:Ic(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o_(e,n,"signUpPassword",Nz);case"emailLink":return Rz(e,{idToken:r,email:this._email,oobCode:this._password});default:Ic(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tm(t,e){return qy(t,"POST","/v1/accounts:signInWithIdp",wf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz="http://localhost";class wh extends cS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new wh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ic("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new wh(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return tm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,tm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,tm(e,r)}buildRequest(){const e={requestUri:Lz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mz(t){const e=ag(sg(t)).link,r=e?ag(sg(e)).deep_link_id:null,n=ag(sg(t)).deep_link_id;return(n?ag(sg(n)).link:null)||n||r||e||t}class uS{constructor(e){const r=ag(sg(e)),n=r.apiKey??null,a=r.oobCode??null,s=Uz(r.mode??null);Er(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Mz(e);try{return new uS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.providerId=Om.PROVIDER_ID}static credential(e,r){return Yg._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=uS.parseLink(r);return Er(n,"argument-error"),Yg._fromEmailAndCode(e,n.code,n.tenantId)}}Om.PROVIDER_ID="password";Om.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Om.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx extends FL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends Rx{constructor(){super("facebook.com")}static credential(e){return wh._fromParams({providerId:Ud.PROVIDER_ID,signInMethod:Ud.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ud.credentialFromTaggedObject(e)}static credentialFromError(e){return Ud.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ud.credential(e.oauthAccessToken)}catch{return null}}}Ud.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ud.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Rx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return wh._fromParams({providerId:Md.PROVIDER_ID,signInMethod:Md.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Md.credentialFromTaggedObject(e)}static credentialFromError(e){return Md.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Md.credential(r,n)}catch{return null}}}Md.GOOGLE_SIGN_IN_METHOD="google.com";Md.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Rx{constructor(){super("github.com")}static credential(e){return wh._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pd.credentialFromTaggedObject(e)}static credentialFromError(e){return Pd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pd.credential(e.oauthAccessToken)}catch{return null}}}Pd.GITHUB_SIGN_IN_METHOD="github.com";Pd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Rx{constructor(){super("twitter.com")}static credential(e,r){return wh._fromParams({providerId:jd.PROVIDER_ID,signInMethod:jd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return jd.credentialFromTaggedObject(e)}static credentialFromError(e){return jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return jd.credential(r,n)}catch{return null}}}jd.TWITTER_SIGN_IN_METHOD="twitter.com";jd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await _c._fromIdTokenResponse(e,n,a),i=ik(n);return new bm({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=ik(n);return new bm({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function ik(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2 extends PA{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,P2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new P2(e,r,n,a)}}function DL(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?P2._fromErrorAndOperation(t,s,e,n):s})}async function Pz(t,e,r=!1){const n=await Xg(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return bm._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jz(t,e,r=!1){const{auth:n}=t;if(bc(n.app))return Promise.reject(Jd(n));const a="reauthenticate";try{const s=await Xg(t,DL(n,a,e,t),r);Er(s.idToken,n,"internal-error");const i=oS(s.idToken);Er(i,n,"internal-error");const{sub:o}=i;return Er(t.uid===o,n,"user-mismatch"),bm._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ic(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e,r=!1){if(bc(t.app))return Promise.reject(Jd(t));const n="signIn",a=await DL(t,n,e),s=await bm._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function Oz(t,e){return RL(Dh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t){const e=Dh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hz(t,e,r){const n=Dh(t);await o_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Fz)}function Vz(t,e,r){return bc(t.app)?Promise.reject(Jd(t)):Oz(ls(t),Om.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Qz(t),n})}function zz(t,e,r,n){return ls(t).onIdTokenChanged(e,r,n)}function Gz(t,e,r){return ls(t).beforeAuthStateChanged(e,r)}function qz(t,e,r,n){return ls(t).onAuthStateChanged(e,r,n)}function ok(t){return ls(t).signOut()}const j2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(j2,"1"),this.storage.removeItem(j2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=1e3,Wz=10;class UL extends LL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);uz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Wz):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}UL.type="LOCAL";const $z=UL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML extends LL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}ML.type="SESSION";const PL=ML;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new Wy(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),l=await Xz(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,l)=>{const u=AS("",20);a.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(){return window}function Jz(t){_u().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){return typeof _u().WorkerGlobalScope<"u"&&typeof _u().importScripts=="function"}async function Zz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tG(){return jL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="firebaseLocalStorageDb",rG=1,O2="firebaseLocalStorage",QL="fbase_key";class Lx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $y(t,e){return t.transaction([O2],e?"readwrite":"readonly").objectStore(O2)}function nG(){const t=indexedDB.deleteDatabase(OL);return new Lx(t).toPromise()}function l_(){const t=indexedDB.open(OL,rG);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(O2,{keyPath:QL})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(O2)?e(n):(n.close(),await nG(),e(await l_()))})})}async function lk(t,e,r){const n=$y(t,!0).put({[QL]:e,value:r});return new Lx(n).toPromise()}async function aG(t,e){const r=$y(t,!1).get(e),n=await new Lx(r).toPromise();return n===void 0?null:n.value}function ck(t,e){const r=$y(t,!0).delete(e);return new Lx(r).toPromise()}const sG=800,iG=3;class HL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>iG)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wy._getInstance(tG()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Zz(),!this.activeServiceWorker)return;this.sender=new Yz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l_();return await lk(e,j2,"1"),await ck(e,j2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>lk(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>aG(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>ck(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=$y(a,!1).getAll();return new Lx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HL.type="LOCAL";const oG=HL;new Dx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(t,e){return e?yA(e):(Er(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends cS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return tm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return tm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function cG(t){return RL(t.auth,new dS(t),t.bypassAuthState)}function uG(t){const{auth:e,user:r}=t;return Er(r,e,"internal-error"),jz(r,new dS(t),t.bypassAuthState)}async function AG(t){const{auth:e,user:r}=t;return Er(r,e,"internal-error"),Pz(r,new dS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cG;case"linkViaPopup":case"linkViaRedirect":return AG;case"reauthViaPopup":case"reauthViaRedirect":return uG;default:Ic(this.auth,"internal-error")}}resolve(e){kA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=new Dx(2e3,1e4);class K0 extends VL{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,K0.currentPopupAction&&K0.currentPopupAction.cancel(),K0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Er(e,this.auth,"internal-error"),e}async onExecution(){kA(this.filter.length===1,"Popup operations only handle one event");const e=AS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Eu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Eu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,K0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Eu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dG.get())};e()}}K0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG="pendingRedirect",u2=new Map;class hG extends VL{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=u2.get(this.auth._key());if(!e){try{const n=await mG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}u2.set(this.auth._key(),e)}return this.bypassAuthState||u2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mG(t,e){const r=xG(e),n=gG(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function pG(t,e){u2.set(t._key(),e)}function gG(t){return yA(t._redirectPersistence)}function xG(t){return c2(fG,t.config.apiKey,t.name)}async function vG(t,e,r=!1){if(bc(t.app))return Promise.reject(Jd(t));const n=Dh(t),a=lG(n,e),i=await new hG(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=600*1e3;class wG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bG(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!zL(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Eu(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yG&&this.cachedEventUids.clear(),this.cachedEventUids.has(uk(e))}saveEventToCache(e){this.cachedEventUids.add(uk(e)),this.lastProcessedEventTime=Date.now()}}function uk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CG(t,e={}){return jA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_G=/^https?/;async function SG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CG(t);for(const r of e)try{if(TG(r))return}catch{}Ic(t,"unauthorized-domain")}function TG(t){const e=s_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!_G.test(r))return!1;if(EG.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=new Dx(3e4,6e4);function Ak(){const t=_u().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function NG(t){return new Promise((e,r)=>{var a,s,i;function n(){Ak(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ak(),r(Eu(t,"network-request-failed"))},timeout:BG.get()})}if((s=(a=_u().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((i=_u().gapi)!=null&&i.load)n();else{const o=vz("iframefcb");return _u()[o]=()=>{gapi.load?n():r(Eu(t,"network-request-failed"))},NL(`${xz()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw A2=null,e})}let A2=null;function kG(t){return A2=A2||NG(t),A2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG=new Dx(5e3,15e3),FG="__/auth/iframe",DG="emulator/auth/iframe",RG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UG(t){const e=t.config;Er(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?iS(e,DG):`https://${t.config.authDomain}/${FG}`,n={apiKey:e.apiKey,appName:t.name,v:jm},a=LG.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Fx(n).slice(1)}`}async function MG(t){const e=await kG(t),r=_u().gapi;return Er(r,t,"internal-error"),e.open({where:document.body,url:UG(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RG,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=Eu(t,"network-request-failed"),o=_u().setTimeout(()=>{s(i)},IG.get());function l(){_u().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jG=500,OG=600,QG="_blank",HG="http://localhost";class dk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VG(t,e,r,n=jG,a=OG){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...PG,width:n.toString(),height:a.toString(),top:s,left:i},u=zi().toLowerCase();r&&(o=bL(u)?QG:r),yL(u)&&(e=e||HG,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(cz(u)&&o!=="_self")return zG(e||"",o),new dk(null);const h=window.open(e||"",o,d);Er(h,t,"popup-blocked");try{h.focus()}catch{}return new dk(h)}function zG(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG="__/auth/handler",qG="emulator/auth/handler",KG=encodeURIComponent("fac");async function fk(t,e,r,n,a,s){Er(t.config.authDomain,t,"auth-domain-config-required"),Er(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:jm,eventId:a};if(e instanceof FL){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",IH(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Rx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${KG}=${encodeURIComponent(l)}`:"";return`${WG(t)}?${Fx(o).slice(1)}${u}`}function WG({config:t}){return t.emulator?iS(t,qG):`https://${t.authDomain}/${GG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="webStorageSupport";class $G{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PL,this._completeRedirectFn=vG,this._overrideRedirectResult=pG}async _openPopup(e,r,n,a){var i;kA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await fk(e,r,n,s_(),a);return VG(e,s,AS())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await fk(e,r,n,s_(),a);return Jz(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(kA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await MG(e),n=new wG(e);return r.register("authEvent",a=>(Er(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(SC,{type:SC},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[SC];s!==void 0&&r(!!s),Ic(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=SG(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return TL()||wL()||lS()}}const XG=$G;var hk="@firebase/auth",mk="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Er(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZG(t){wm(new yh("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Er(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BL(t)},u=new mz(n,a,s,l);return _z(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),wm(new yh("auth-internal",e=>{const r=Dh(e.getProvider("auth").getImmediate());return(n=>new YG(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yd(hk,mk,JG(t)),Yd(hk,mk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=300,tq=aL("authIdTokenMaxAge")||eq;let pk=null;const rq=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>tq)return;const a=r==null?void 0:r.token;pk!==a&&(pk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function GL(t=cL()){const e=nS(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Ez(t,{popupRedirectResolver:XG,persistence:[oG,$z,PL]}),n=aL("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=rq(s.toString());Gz(r,i,()=>i(r.currentUser)),zz(r,o=>i(o))}}const a=rL("auth");return a&&Sz(r,`http://${a}`),r}function nq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pz({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Eu("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",nq().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZG("Browser");var aq="firebase",sq="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yd(aq,sq,"app");var gk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zd,qL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function N(){}N.prototype=S.prototype,C.D=S.prototype,C.prototype=new N,C.prototype.constructor=C,C.C=function(H,L,I){for(var j=Array(arguments.length-2),z=2;z<arguments.length;z++)j[z-2]=arguments[z];return S.prototype[L].apply(H,j)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,N){N||(N=0);var H=Array(16);if(typeof S=="string")for(var L=0;16>L;++L)H[L]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(L=0;16>L;++L)H[L]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=C.g[0],N=C.g[1],L=C.g[2];var I=C.g[3],j=S+(I^N&(L^I))+H[0]+3614090360&4294967295;S=N+(j<<7&4294967295|j>>>25),j=I+(L^S&(N^L))+H[1]+3905402710&4294967295,I=S+(j<<12&4294967295|j>>>20),j=L+(N^I&(S^N))+H[2]+606105819&4294967295,L=I+(j<<17&4294967295|j>>>15),j=N+(S^L&(I^S))+H[3]+3250441966&4294967295,N=L+(j<<22&4294967295|j>>>10),j=S+(I^N&(L^I))+H[4]+4118548399&4294967295,S=N+(j<<7&4294967295|j>>>25),j=I+(L^S&(N^L))+H[5]+1200080426&4294967295,I=S+(j<<12&4294967295|j>>>20),j=L+(N^I&(S^N))+H[6]+2821735955&4294967295,L=I+(j<<17&4294967295|j>>>15),j=N+(S^L&(I^S))+H[7]+4249261313&4294967295,N=L+(j<<22&4294967295|j>>>10),j=S+(I^N&(L^I))+H[8]+1770035416&4294967295,S=N+(j<<7&4294967295|j>>>25),j=I+(L^S&(N^L))+H[9]+2336552879&4294967295,I=S+(j<<12&4294967295|j>>>20),j=L+(N^I&(S^N))+H[10]+4294925233&4294967295,L=I+(j<<17&4294967295|j>>>15),j=N+(S^L&(I^S))+H[11]+2304563134&4294967295,N=L+(j<<22&4294967295|j>>>10),j=S+(I^N&(L^I))+H[12]+1804603682&4294967295,S=N+(j<<7&4294967295|j>>>25),j=I+(L^S&(N^L))+H[13]+4254626195&4294967295,I=S+(j<<12&4294967295|j>>>20),j=L+(N^I&(S^N))+H[14]+2792965006&4294967295,L=I+(j<<17&4294967295|j>>>15),j=N+(S^L&(I^S))+H[15]+1236535329&4294967295,N=L+(j<<22&4294967295|j>>>10),j=S+(L^I&(N^L))+H[1]+4129170786&4294967295,S=N+(j<<5&4294967295|j>>>27),j=I+(N^L&(S^N))+H[6]+3225465664&4294967295,I=S+(j<<9&4294967295|j>>>23),j=L+(S^N&(I^S))+H[11]+643717713&4294967295,L=I+(j<<14&4294967295|j>>>18),j=N+(I^S&(L^I))+H[0]+3921069994&4294967295,N=L+(j<<20&4294967295|j>>>12),j=S+(L^I&(N^L))+H[5]+3593408605&4294967295,S=N+(j<<5&4294967295|j>>>27),j=I+(N^L&(S^N))+H[10]+38016083&4294967295,I=S+(j<<9&4294967295|j>>>23),j=L+(S^N&(I^S))+H[15]+3634488961&4294967295,L=I+(j<<14&4294967295|j>>>18),j=N+(I^S&(L^I))+H[4]+3889429448&4294967295,N=L+(j<<20&4294967295|j>>>12),j=S+(L^I&(N^L))+H[9]+568446438&4294967295,S=N+(j<<5&4294967295|j>>>27),j=I+(N^L&(S^N))+H[14]+3275163606&4294967295,I=S+(j<<9&4294967295|j>>>23),j=L+(S^N&(I^S))+H[3]+4107603335&4294967295,L=I+(j<<14&4294967295|j>>>18),j=N+(I^S&(L^I))+H[8]+1163531501&4294967295,N=L+(j<<20&4294967295|j>>>12),j=S+(L^I&(N^L))+H[13]+2850285829&4294967295,S=N+(j<<5&4294967295|j>>>27),j=I+(N^L&(S^N))+H[2]+4243563512&4294967295,I=S+(j<<9&4294967295|j>>>23),j=L+(S^N&(I^S))+H[7]+1735328473&4294967295,L=I+(j<<14&4294967295|j>>>18),j=N+(I^S&(L^I))+H[12]+2368359562&4294967295,N=L+(j<<20&4294967295|j>>>12),j=S+(N^L^I)+H[5]+4294588738&4294967295,S=N+(j<<4&4294967295|j>>>28),j=I+(S^N^L)+H[8]+2272392833&4294967295,I=S+(j<<11&4294967295|j>>>21),j=L+(I^S^N)+H[11]+1839030562&4294967295,L=I+(j<<16&4294967295|j>>>16),j=N+(L^I^S)+H[14]+4259657740&4294967295,N=L+(j<<23&4294967295|j>>>9),j=S+(N^L^I)+H[1]+2763975236&4294967295,S=N+(j<<4&4294967295|j>>>28),j=I+(S^N^L)+H[4]+1272893353&4294967295,I=S+(j<<11&4294967295|j>>>21),j=L+(I^S^N)+H[7]+4139469664&4294967295,L=I+(j<<16&4294967295|j>>>16),j=N+(L^I^S)+H[10]+3200236656&4294967295,N=L+(j<<23&4294967295|j>>>9),j=S+(N^L^I)+H[13]+681279174&4294967295,S=N+(j<<4&4294967295|j>>>28),j=I+(S^N^L)+H[0]+3936430074&4294967295,I=S+(j<<11&4294967295|j>>>21),j=L+(I^S^N)+H[3]+3572445317&4294967295,L=I+(j<<16&4294967295|j>>>16),j=N+(L^I^S)+H[6]+76029189&4294967295,N=L+(j<<23&4294967295|j>>>9),j=S+(N^L^I)+H[9]+3654602809&4294967295,S=N+(j<<4&4294967295|j>>>28),j=I+(S^N^L)+H[12]+3873151461&4294967295,I=S+(j<<11&4294967295|j>>>21),j=L+(I^S^N)+H[15]+530742520&4294967295,L=I+(j<<16&4294967295|j>>>16),j=N+(L^I^S)+H[2]+3299628645&4294967295,N=L+(j<<23&4294967295|j>>>9),j=S+(L^(N|~I))+H[0]+4096336452&4294967295,S=N+(j<<6&4294967295|j>>>26),j=I+(N^(S|~L))+H[7]+1126891415&4294967295,I=S+(j<<10&4294967295|j>>>22),j=L+(S^(I|~N))+H[14]+2878612391&4294967295,L=I+(j<<15&4294967295|j>>>17),j=N+(I^(L|~S))+H[5]+4237533241&4294967295,N=L+(j<<21&4294967295|j>>>11),j=S+(L^(N|~I))+H[12]+1700485571&4294967295,S=N+(j<<6&4294967295|j>>>26),j=I+(N^(S|~L))+H[3]+2399980690&4294967295,I=S+(j<<10&4294967295|j>>>22),j=L+(S^(I|~N))+H[10]+4293915773&4294967295,L=I+(j<<15&4294967295|j>>>17),j=N+(I^(L|~S))+H[1]+2240044497&4294967295,N=L+(j<<21&4294967295|j>>>11),j=S+(L^(N|~I))+H[8]+1873313359&4294967295,S=N+(j<<6&4294967295|j>>>26),j=I+(N^(S|~L))+H[15]+4264355552&4294967295,I=S+(j<<10&4294967295|j>>>22),j=L+(S^(I|~N))+H[6]+2734768916&4294967295,L=I+(j<<15&4294967295|j>>>17),j=N+(I^(L|~S))+H[13]+1309151649&4294967295,N=L+(j<<21&4294967295|j>>>11),j=S+(L^(N|~I))+H[4]+4149444226&4294967295,S=N+(j<<6&4294967295|j>>>26),j=I+(N^(S|~L))+H[11]+3174756917&4294967295,I=S+(j<<10&4294967295|j>>>22),j=L+(S^(I|~N))+H[2]+718787259&4294967295,L=I+(j<<15&4294967295|j>>>17),j=N+(I^(L|~S))+H[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+I&4294967295}n.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var N=S-this.blockSize,H=this.B,L=this.h,I=0;I<S;){if(L==0)for(;I<=N;)a(this,C,I),I+=this.blockSize;if(typeof C=="string"){for(;I<S;)if(H[L++]=C.charCodeAt(I++),L==this.blockSize){a(this,H),L=0;break}}else for(;I<S;)if(H[L++]=C[I++],L==this.blockSize){a(this,H),L=0;break}}this.h=L,this.o+=S},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var N=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=N&255,N/=256;for(this.u(C),C=Array(16),S=N=0;4>S;++S)for(var H=0;32>H;H+=8)C[N++]=this.g[S]>>>H&255;return C};function s(C,S){var N=o;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=S(C)}function i(C,S){this.h=S;for(var N=[],H=!0,L=C.length-1;0<=L;L--){var I=C[L]|0;H&&I==S||(N[L]=I,H=!1)}this.g=N}var o={};function l(C){return-128<=C&&128>C?s(C,function(S){return new i([S|0],0>S?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(u(-C));for(var S=[],N=1,H=0;C>=N;H++)S[H]=C/N|0,N*=4294967296;return new i(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return E(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(S,8)),H=h,L=0;L<C.length;L+=8){var I=Math.min(8,C.length-L),j=parseInt(C.substring(L,L+I),S);8>I?(I=u(Math.pow(S,I)),H=H.j(I).add(u(j))):(H=H.j(N),H=H.add(u(j)))}return H}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-E(this).m();for(var C=0,S=1,N=0;N<this.g.length;N++){var H=this.i(N);C+=(0<=H?H:4294967296+H)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+E(this).toString(C);for(var S=u(Math.pow(C,6)),N=this,H="";;){var L=U(N,S).g;N=B(N,L.j(S));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(C);if(N=L,b(N))return I+H;for(;6>I.length;)I="0"+I;H=I+H}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=B(this,C),y(C)?-1:b(C)?0:1};function E(C){for(var S=C.g.length,N=[],H=0;H<S;H++)N[H]=~C.g[H];return new i(N,~C.h).add(m)}t.abs=function(){return y(this)?E(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],H=0,L=0;L<=S;L++){var I=H+(this.i(L)&65535)+(C.i(L)&65535),j=(I>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);H=j>>>16,I&=65535,j&=65535,N[L]=j<<16|I}return new i(N,N[N.length-1]&-2147483648?-1:0)};function B(C,S){return C.add(E(S))}t.j=function(C){if(b(this)||b(C))return h;if(y(this))return y(C)?E(this).j(E(C)):E(E(this).j(C));if(y(C))return E(this.j(E(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,N=[],H=0;H<2*S;H++)N[H]=0;for(H=0;H<this.g.length;H++)for(var L=0;L<C.g.length;L++){var I=this.i(H)>>>16,j=this.i(H)&65535,z=C.i(L)>>>16,ne=C.i(L)&65535;N[2*H+2*L]+=j*ne,k(N,2*H+2*L),N[2*H+2*L+1]+=I*ne,k(N,2*H+2*L+1),N[2*H+2*L+1]+=j*z,k(N,2*H+2*L+1),N[2*H+2*L+2]+=I*z,k(N,2*H+2*L+2)}for(H=0;H<S;H++)N[H]=N[2*H+1]<<16|N[2*H];for(H=S;H<2*S;H++)N[H]=0;return new i(N,0)};function k(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function F(C,S){this.g=C,this.h=S}function U(C,S){if(b(S))throw Error("division by zero");if(b(C))return new F(h,h);if(y(C))return S=U(E(C),S),new F(E(S.g),E(S.h));if(y(S))return S=U(C,E(S)),new F(E(S.g),S.h);if(30<C.g.length){if(y(C)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var N=m,H=S;0>=H.l(C);)N=P(N),H=P(H);var L=D(N,1),I=D(H,1);for(H=D(H,2),N=D(N,2);!b(H);){var j=I.add(H);0>=j.l(C)&&(L=L.add(N),I=j),H=D(H,1),N=D(N,1)}return S=B(C,L.j(S)),new F(L,S)}for(L=h;0<=C.l(S);){for(N=Math.max(1,Math.floor(C.m()/S.m())),H=Math.ceil(Math.log(N)/Math.LN2),H=48>=H?1:Math.pow(2,H-48),I=u(N),j=I.j(S);y(j)||0<j.l(C);)N-=H,I=u(N),j=I.j(S);b(I)&&(I=m),L=L.add(I),C=B(C,j)}return new F(L,C)}t.A=function(C){return U(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],H=0;H<S;H++)N[H]=this.i(H)&C.i(H);return new i(N,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],H=0;H<S;H++)N[H]=this.i(H)|C.i(H);return new i(N,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),N=[],H=0;H<S;H++)N[H]=this.i(H)^C.i(H);return new i(N,this.h^C.h)};function P(C){for(var S=C.g.length+1,N=[],H=0;H<S;H++)N[H]=C.i(H)<<1|C.i(H-1)>>>31;return new i(N,C.h)}function D(C,S){var N=S>>5;S%=32;for(var H=C.g.length-N,L=[],I=0;I<H;I++)L[I]=0<S?C.i(I+N)>>>S|C.i(I+N+1)<<32-S:C.i(I+N);return new i(L,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,qL=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,Zd=i}).apply(typeof gk<"u"?gk:typeof self<"u"?self:typeof window<"u"?window:{});var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KL,ig,WL,d2,c_,$L,XL,YL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,X,se){return T==Array.prototype||T==Object.prototype||(T[X]=se.value),T};function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof sv=="object"&&sv];for(var X=0;X<T.length;++X){var se=T[X];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(T,X){if(X)e:{var se=n;T=T.split(".");for(var ye=0;ye<T.length-1;ye++){var Qe=T[ye];if(!(Qe in se))break e;se=se[Qe]}T=T[T.length-1],ye=se[T],X=X(ye),X!=ye&&X!=null&&e(se,T,{configurable:!0,writable:!0,value:X})}}function s(T,X){T instanceof String&&(T+="");var se=0,ye=!1,Qe={next:function(){if(!ye&&se<T.length){var Je=se++;return{value:X(Je,T[Je]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return Qe[Symbol.iterator]=function(){return Qe},Qe}a("Array.prototype.values",function(T){return T||function(){return s(this,function(X,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(T){var X=typeof T;return X=X!="object"?X:T?Array.isArray(T)?"array":X:"null",X=="array"||X=="object"&&typeof T.length=="number"}function u(T){var X=typeof T;return X=="object"&&T!=null||X=="function"}function d(T,X,se){return T.call.apply(T.bind,arguments)}function h(T,X,se){if(!T)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var Qe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Qe,ye),T.apply(X,Qe)}}return function(){return T.apply(X,arguments)}}function m(T,X,se){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(T,X){var se=Array.prototype.slice.call(arguments,1);return function(){var ye=se.slice();return ye.push.apply(ye,arguments),T.apply(this,ye)}}function b(T,X){function se(){}se.prototype=X.prototype,T.aa=X.prototype,T.prototype=new se,T.prototype.constructor=T,T.Qb=function(ye,Qe,Je){for(var St=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)St[mr-2]=arguments[mr];return X.prototype[Qe].apply(ye,St)}}function y(T){const X=T.length;if(0<X){const se=Array(X);for(let ye=0;ye<X;ye++)se[ye]=T[ye];return se}return[]}function E(T,X){for(let se=1;se<arguments.length;se++){const ye=arguments[se];if(l(ye)){const Qe=T.length||0,Je=ye.length||0;T.length=Qe+Je;for(let St=0;St<Je;St++)T[Qe+St]=ye[St]}else T.push(ye)}}class B{constructor(X,se){this.i=X,this.j=se,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function k(T){return/^[\s\xa0]*$/.test(T)}function F(){var T=o.navigator;return T&&(T=T.userAgent)?T:""}function U(T){return U[" "](T),T}U[" "]=function(){};var P=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function D(T,X,se){for(const ye in T)X.call(se,T[ye],ye,T)}function C(T,X){for(const se in T)X.call(void 0,T[se],se,T)}function S(T){const X={};for(const se in T)X[se]=T[se];return X}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(T,X){let se,ye;for(let Qe=1;Qe<arguments.length;Qe++){ye=arguments[Qe];for(se in ye)T[se]=ye[se];for(let Je=0;Je<N.length;Je++)se=N[Je],Object.prototype.hasOwnProperty.call(ye,se)&&(T[se]=ye[se])}}function L(T){var X=1;T=T.split(":");const se=[];for(;0<X&&T.length;)se.push(T.shift()),X--;return T.length&&se.push(T.join(":")),se}function I(T){o.setTimeout(()=>{throw T},0)}function j(){var T=G;let X=null;return T.g&&(X=T.g,T.g=T.g.next,T.g||(T.h=null),X.next=null),X}class z{constructor(){this.h=this.g=null}add(X,se){const ye=ne.get();ye.set(X,se),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var ne=new B(()=>new Z,T=>T.reset());class Z{constructor(){this.next=this.g=this.h=null}set(X,se){this.h=X,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ae=!1,G=new z,K=()=>{const T=o.Promise.resolve(void 0);ee=()=>{T.then(le)}};var le=()=>{for(var T;T=j();){try{T.h.call(T.g)}catch(se){I(se)}var X=ne;X.j(T),100>X.h&&(X.h++,T.next=X.g,X.g=T)}ae=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(T,X){this.type=T,this.g=this.target=X,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,X=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const se=()=>{};o.addEventListener("test",se,X),o.removeEventListener("test",se,X)}catch{}return T}();function te(T,X){if(W.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var se=this.type=T.type,ye=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=X,X=T.relatedTarget){if(P){e:{try{U(X.nodeName);var Qe=!0;break e}catch{}Qe=!1}Qe||(X=null)}}else se=="mouseover"?X=T.fromElement:se=="mouseout"&&(X=T.toElement);this.relatedTarget=X,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ce[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&te.aa.h.call(this)}}b(te,W);var ce={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),me=0;function ge(T,X,se,ye,Qe){this.listener=T,this.proxy=null,this.src=X,this.type=se,this.capture=!!ye,this.ha=Qe,this.key=++me,this.da=this.fa=!1}function Se(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function xe(T){this.src=T,this.g={},this.h=0}xe.prototype.add=function(T,X,se,ye,Qe){var Je=T.toString();T=this.g[Je],T||(T=this.g[Je]=[],this.h++);var St=Le(T,X,ye,Qe);return-1<St?(X=T[St],se||(X.fa=!1)):(X=new ge(X,this.src,Je,!!ye,Qe),X.fa=se,T.push(X)),X};function ie(T,X){var se=X.type;if(se in T.g){var ye=T.g[se],Qe=Array.prototype.indexOf.call(ye,X,void 0),Je;(Je=0<=Qe)&&Array.prototype.splice.call(ye,Qe,1),Je&&(Se(X),T.g[se].length==0&&(delete T.g[se],T.h--))}}function Le(T,X,se,ye){for(var Qe=0;Qe<T.length;++Qe){var Je=T[Qe];if(!Je.da&&Je.listener==X&&Je.capture==!!se&&Je.ha==ye)return Qe}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),Ie={};function we(T,X,se,ye,Qe){if(Array.isArray(X)){for(var Je=0;Je<X.length;Je++)we(T,X[Je],se,ye,Qe);return null}return se=Yt(se),T&&T[de]?T.K(X,se,u(ye)?!!ye.capture:!1,Qe):je(T,X,se,!1,ye,Qe)}function je(T,X,se,ye,Qe,Je){if(!X)throw Error("Invalid event type");var St=u(Qe)?!!Qe.capture:!!Qe,mr=Nt(T);if(mr||(T[nt]=mr=new xe(T)),se=mr.add(X,se,ye,St,Je),se.proxy)return se;if(ye=et(),se.proxy=ye,ye.src=T,ye.listener=se,T.addEventListener)Y||(Qe=St),Qe===void 0&&(Qe=!1),T.addEventListener(X.toString(),ye,Qe);else if(T.attachEvent)T.attachEvent(_t(X.toString()),ye);else if(T.addListener&&T.removeListener)T.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return se}function et(){function T(se){return X.call(T.src,T.listener,se)}const X=ut;return T}function st(T,X,se,ye,Qe){if(Array.isArray(X))for(var Je=0;Je<X.length;Je++)st(T,X[Je],se,ye,Qe);else ye=u(ye)?!!ye.capture:!!ye,se=Yt(se),T&&T[de]?(T=T.i,X=String(X).toString(),X in T.g&&(Je=T.g[X],se=Le(Je,se,ye,Qe),-1<se&&(Se(Je[se]),Array.prototype.splice.call(Je,se,1),Je.length==0&&(delete T.g[X],T.h--)))):T&&(T=Nt(T))&&(X=T.g[X.toString()],T=-1,X&&(T=Le(X,se,ye,Qe)),(se=-1<T?X[T]:null)&&mt(se))}function mt(T){if(typeof T!="number"&&T&&!T.da){var X=T.src;if(X&&X[de])ie(X.i,T);else{var se=T.type,ye=T.proxy;X.removeEventListener?X.removeEventListener(se,ye,T.capture):X.detachEvent?X.detachEvent(_t(se),ye):X.addListener&&X.removeListener&&X.removeListener(ye),(se=Nt(X))?(ie(se,T),se.h==0&&(se.src=null,X[nt]=null)):Se(T)}}}function _t(T){return T in Ie?Ie[T]:Ie[T]="on"+T}function ut(T,X){if(T.da)T=!0;else{X=new te(X,this);var se=T.listener,ye=T.ha||T.src;T.fa&&mt(T),T=se.call(ye,X)}return T}function Nt(T){return T=T[nt],T instanceof xe?T:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(T){return typeof T=="function"?T:(T[Qt]||(T[Qt]=function(X){return T.handleEvent(X)}),T[Qt])}function kt(){O.call(this),this.i=new xe(this),this.M=this,this.F=null}b(kt,O),kt.prototype[de]=!0,kt.prototype.removeEventListener=function(T,X,se,ye){st(this,T,X,se,ye)};function It(T,X){var se,ye=T.F;if(ye)for(se=[];ye;ye=ye.F)se.push(ye);if(T=T.M,ye=X.type||X,typeof X=="string")X=new W(X,T);else if(X instanceof W)X.target=X.target||T;else{var Qe=X;X=new W(ye,T),H(X,Qe)}if(Qe=!0,se)for(var Je=se.length-1;0<=Je;Je--){var St=X.g=se[Je];Qe=Wt(St,ye,!0,X)&&Qe}if(St=X.g=T,Qe=Wt(St,ye,!0,X)&&Qe,Qe=Wt(St,ye,!1,X)&&Qe,se)for(Je=0;Je<se.length;Je++)St=X.g=se[Je],Qe=Wt(St,ye,!1,X)&&Qe}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var T=this.i,X;for(X in T.g){for(var se=T.g[X],ye=0;ye<se.length;ye++)Se(se[ye]);delete T.g[X],T.h--}}this.F=null},kt.prototype.K=function(T,X,se,ye){return this.i.add(String(T),X,!1,se,ye)},kt.prototype.L=function(T,X,se,ye){return this.i.add(String(T),X,!0,se,ye)};function Wt(T,X,se,ye){if(X=T.i.g[String(X)],!X)return!0;X=X.concat();for(var Qe=!0,Je=0;Je<X.length;++Je){var St=X[Je];if(St&&!St.da&&St.capture==se){var mr=St.listener,Zr=St.ha||St.src;St.fa&&ie(T.i,St),Qe=mr.call(Zr,ye)!==!1&&Qe}}return Qe&&!ye.defaultPrevented}function Dt(T,X,se){if(typeof T=="function")se&&(T=m(T,se));else if(T&&typeof T.handleEvent=="function")T=m(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:o.setTimeout(T,X||0)}function Ft(T){T.g=Dt(()=>{T.g=null,T.i&&(T.i=!1,Ft(T))},T.l);const X=T.h;T.h=null,T.m.apply(null,X)}class xt extends O{constructor(X,se){super(),this.m=X,this.l=se,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(T){O.call(this),this.h=T,this.g={}}b(yr,O);var Jt=[];function fn(T){D(T.g,function(X,se){this.g.hasOwnProperty(se)&&mt(X)},T),T.g={}}yr.prototype.N=function(){yr.aa.N.call(this),fn(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gr=o.JSON.stringify,Ur=o.JSON.parse,In=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Ir(){}Ir.prototype.h=null;function us(T){return T.h||(T.h=T.i())}function an(){}var na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pa(){W.call(this,"d")}b(pa,W);function Pr(){W.call(this,"c")}b(Pr,W);var rr={},zr=null;function As(){return zr=zr||new kt}rr.La="serverreachability";function Wn(T){W.call(this,rr.La,T)}b(Wn,W);function ba(T){const X=As();It(X,new Wn(X))}rr.STAT_EVENT="statevent";function Ss(T,X){W.call(this,rr.STAT_EVENT,T),this.stat=X}b(Ss,W);function Ht(T){const X=As();It(X,new Ss(X,T))}rr.Ma="timingevent";function hn(T,X){W.call(this,rr.Ma,T),this.size=X}b(hn,W);function sn(T,X){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},X)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Mn(T,X,se,ye,Qe,Je){T.info(function(){if(T.g)if(Je)for(var St="",mr=Je.split("&"),Zr=0;Zr<mr.length;Zr++){var Nr=mr[Zr].split("=");if(1<Nr.length){var _n=Nr[0];Nr=Nr[1];var Dn=_n.split("_");St=2<=Dn.length&&Dn[1]=="type"?St+(_n+"="+Nr+"&"):St+(_n+"=redacted&")}}else St=null;else St=Je;return"XMLHTTP REQ ("+ye+") [attempt "+Qe+"]: "+X+`
`+se+`
`+St})}function $n(T,X,se,ye,Qe,Je,St){T.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+Qe+"]: "+X+`
`+se+`
`+Je+" "+St})}function fe(T,X,se,ye){T.info(function(){return"XMLHTTP TEXT ("+X+"): "+Ee(T,se)+(ye?" "+ye:"")})}function Ne(T,X){T.info(function(){return"TIMEOUT: "+X})}Fn.prototype.info=function(){};function Ee(T,X){if(!T.g)return X;if(!X)return null;try{var se=JSON.parse(X);if(se){for(T=0;T<se.length;T++)if(Array.isArray(se[T])){var ye=se[T];if(!(2>ye.length)){var Qe=ye[1];if(Array.isArray(Qe)&&!(1>Qe.length)){var Je=Qe[0];if(Je!="noop"&&Je!="stop"&&Je!="close")for(var St=1;St<Qe.length;St++)Qe[St]=""}}}}return gr(se)}catch{return X}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function qe(){}b(qe,Ir),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},ke=new qe;function tt(T,X,se,ye){this.j=T,this.i=X,this.l=se,this.R=ye||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new He}function He(){this.i=null,this.g="",this.h=!1}var We={},Ye={};function yt(T,X,se){T.L=1,T.v=ul(Ns(X)),T.m=se,T.P=!0,Bt(T,null)}function Bt(T,X){T.F=Date.now(),Rt(T),T.A=Ns(T.v);var se=T.A,ye=T.R;Array.isArray(ye)||(ye=[String(ye)]),hr(se.i,"t",ye),T.C=0,se=T.j.J,T.h=new He,T.g=Ae(T.j,se?X:null,!T.m),0<T.O&&(T.M=new xt(m(T.Y,T,T.g),T.O)),X=T.U,se=T.g,ye=T.ca;var Qe="readystatechange";Array.isArray(Qe)||(Qe&&(Jt[0]=Qe.toString()),Qe=Jt);for(var Je=0;Je<Qe.length;Je++){var St=we(se,Qe[Je],ye||X.handleEvent,!1,X.h||X);if(!St)break;X.g[St.key]=St}X=T.H?S(T.H):{},T.m?(T.u||(T.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,X)):(T.u="GET",T.g.ea(T.A,T.u,null,X)),ba(),Mn(T.i,T.u,T.A,T.l,T.R,T.m)}tt.prototype.ca=function(T){T=T.target;const X=this.M;X&&La(T)==3?X.j():this.Y(T)},tt.prototype.Y=function(T){try{if(T==this.g)e:{const Dn=La(this.g);var X=this.g.Ba();const fo=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||WA(this.g)))){this.J||Dn!=4||X==7||(X==8||0>=fo?ba(3):ba(2)),jr(this);var se=this.g.Z();this.X=se;t:if(Pt(this)){var ye=WA(this.g);T="";var Qe=ye.length,Je=La(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Or(this);var St="";break t}this.h.i=new o.TextDecoder}for(X=0;X<Qe;X++)this.h.h=!0,T+=this.h.i.decode(ye[X],{stream:!(Je&&X==Qe-1)});ye.length=0,this.h.g+=T,this.C=0,St=this.h.g}else St=this.g.oa();if(this.o=se==200,$n(this.i,this.u,this.A,this.l,this.R,Dn,se),this.o){if(this.T&&!this.K){t:{if(this.g){var mr,Zr=this.g;if((mr=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(mr)){var Nr=mr;break t}}Nr=null}if(se=Nr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,se);else{this.o=!1,this.s=3,Ht(12),Gr(this),Or(this);break e}}if(this.P){se=!0;let Ca;for(;!this.J&&this.C<St.length;)if(Ca=Tt(this,St),Ca==Ye){Dn==4&&(this.s=4,Ht(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(Ca==We){this.s=4,Ht(15),fe(this.i,this.l,St,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,Ca,null),Fa(this,Ca);if(Pt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||St.length!=0||this.h.h||(this.s=1,Ht(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,St,"[Invalid Chunked Response]"),Gr(this),Or(this);else if(0<St.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+St.length),pl(_n),_n.M=!0,Ht(11))}}else fe(this.i,this.l,St,null),Fa(this,St);Dn==4&&Gr(this),this.o&&!this.J&&(Dn==4?gl(this.j,this):(this.o=!1,Rt(this)))}else fl(this.g),se==400&&0<St.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),Gr(this),Or(this)}}}catch{}finally{}};function Pt(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Tt(T,X){var se=T.C,ye=X.indexOf(`
`,se);return ye==-1?Ye:(se=Number(X.substring(se,ye)),isNaN(se)?We:(ye+=1,ye+se>X.length?Ye:(X=X.slice(ye,ye+se),T.C=ye+se,X)))}tt.prototype.cancel=function(){this.J=!0,Gr(this)};function Rt(T){T.S=Date.now()+T.I,Ar(T,T.I)}function Ar(T,X){if(T.B!=null)throw Error("WatchDog timer not null");T.B=sn(m(T.ba,T),X)}function jr(T){T.B&&(o.clearTimeout(T.B),T.B=null)}tt.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ne(this.i,this.A),this.L!=2&&(ba(),Ht(17)),Gr(this),this.s=2,Or(this)):Ar(this,this.S-T)};function Or(T){T.j.G==0||T.J||gl(T.j,T)}function Gr(T){jr(T);var X=T.M;X&&typeof X.ma=="function"&&X.ma(),T.M=null,fn(T.U),T.g&&(X=T.g,T.g=null,X.abort(),X.ma())}function Fa(T,X){try{var se=T.j;if(se.G!=0&&(se.g==T||Ts(se.h,T))){if(!T.K&&Ts(se.h,T)&&se.G==3){try{var ye=se.Da.g.parse(X)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var Qe=ye;if(Qe[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<T.F)Mo(se),Qc(se);else break e;Zl(se),Ht(18)}}else se.za=Qe[1],0<se.za-se.T&&37500>Qe[2]&&se.F&&se.v==0&&!se.C&&(se.C=sn(m(se.Za,se),6e3));if(1>=qa(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Os(se,11)}else if((T.K||se.g==T)&&Mo(se),!k(X))for(Qe=se.Da.g.parse(X),X=0;X<Qe.length;X++){let Nr=Qe[X];if(se.T=Nr[0],Nr=Nr[1],se.G==2)if(Nr[0]=="c"){se.K=Nr[1],se.ia=Nr[2];const _n=Nr[3];_n!=null&&(se.la=_n,se.j.info("VER="+se.la));const Dn=Nr[4];Dn!=null&&(se.Aa=Dn,se.j.info("SVER="+se.Aa));const fo=Nr[5];fo!=null&&typeof fo=="number"&&0<fo&&(ye=1.5*fo,se.L=ye,se.j.info("backChannelRequestTimeoutMs_="+ye)),ye=se;const Ca=T.g;if(Ca){const yi=Ca.g?Ca.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var Je=ye.h;Je.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(Je.j=Je.l,Je.g=new Set,Je.h&&(Xn(Je,Je.h),Je.h=null))}if(ye.D){const xl=Ca.g?Ca.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(ye.ya=xl,En(ye.I,ye.D,xl))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-T.F,se.j.info("Handshake RTT: "+se.R+"ms")),ye=se;var St=T;if(ye.qa=V(ye,ye.J?ye.ia:null,ye.W),St.K){fs(ye.h,St);var mr=St,Zr=ye.L;Zr&&(mr.I=Zr),mr.B&&(jr(mr),Rt(mr)),ye.g=St}else Vc(ye);0<se.i.length&&Hc(se)}else Nr[0]!="stop"&&Nr[0]!="close"||Os(se,7);else se.G==3&&(Nr[0]=="stop"||Nr[0]=="close"?Nr[0]=="stop"?Os(se,7):Uo(se):Nr[0]!="noop"&&se.l&&se.l.ta(Nr),se.v=0)}}ba(4)}catch{}}var mi=class{constructor(T,X){this.g=T,this.map=X}};function Da(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ds(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function qa(T){return T.h?1:T.g?T.g.size:0}function Ts(T,X){return T.h?T.h==X:T.g?T.g.has(X):!1}function Xn(T,X){T.g?T.g.add(X):T.h=X}function fs(T,X){T.h&&T.h==X?T.h=null:T.g&&T.g.has(X)&&T.g.delete(X)}Da.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Pc(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let X=T.i;for(const se of T.g.values())X=X.concat(se.D);return X}return y(T.i)}function GA(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var X=[],se=T.length,ye=0;ye<se;ye++)X.push(T[ye]);return X}X=[],se=0;for(ye in T)X[se++]=T[ye];return X}function ol(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var X=[];T=T.length;for(var se=0;se<T;se++)X.push(se);return X}X=[],se=0;for(const ye in T)X[se++]=ye;return X}}}function Ou(T,X){if(T.forEach&&typeof T.forEach=="function")T.forEach(X,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,X,void 0);else for(var se=ol(T),ye=GA(T),Qe=ye.length,Je=0;Je<Qe;Je++)X.call(void 0,ye[Je],se&&se[Je],T)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(T,X){if(T){T=T.split("&");for(var se=0;se<T.length;se++){var ye=T[se].indexOf("="),Qe=null;if(0<=ye){var Je=T[se].substring(0,ye);Qe=T[se].substring(ye+1)}else Je=T[se];X(Je,Qe?decodeURIComponent(Qe.replace(/\+/g," ")):"")}}}function mn(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof mn){this.h=T.h,ll(this,T.j),this.o=T.o,this.g=T.g,cl(this,T.s),this.l=T.l;var X=T.i,se=new io;se.i=X.i,X.g&&(se.g=new Map(X.g),se.h=X.h),so(this,se),this.m=T.m}else T&&(X=String(T).match(Bs))?(this.h=!1,ll(this,X[1]||"",!0),this.o=pi(X[2]||""),this.g=pi(X[3]||"",!0),cl(this,X[4]),this.l=pi(X[5]||"",!0),so(this,X[6]||"",!0),this.m=pi(X[7]||"")):(this.h=!1,this.i=new io(null,this.h))}mn.prototype.toString=function(){var T=[],X=this.j;X&&T.push(Io(X,Qu,!0),":");var se=this.g;return(se||X=="file")&&(T.push("//"),(X=this.o)&&T.push(Io(X,Qu,!0),"@"),T.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&T.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&T.push("/"),T.push(Io(se,se.charAt(0)=="/"?Fo:Hu,!0))),(se=this.i.toString())&&T.push("?",se),(se=this.m)&&T.push("#",Io(se,Do)),T.join("")};function Ns(T){return new mn(T)}function ll(T,X,se){T.j=se?pi(X,!0):X,T.j&&(T.j=T.j.replace(/:$/,""))}function cl(T,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);T.s=X}else T.s=null}function so(T,X,se){X instanceof io?(T.i=X,KA(T.i,T.h)):(se||(X=Io(X,Oc)),T.i=new io(X,T.h))}function En(T,X,se){T.i.set(X,se)}function ul(T){return En(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function pi(T,X){return T?X?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Io(T,X,se){return typeof T=="string"?(T=encodeURI(T).replace(X,qA),se&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function qA(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Qu=/[#\/\?@]/g,Hu=/[#\?:]/g,Fo=/[#\?]/g,Oc=/[#\?@]/g,Do=/#/g;function io(T,X){this.h=this.g=null,this.i=T||null,this.j=!!X}function Pn(T){T.g||(T.g=new Map,T.h=0,T.i&&jc(T.i,function(X,se){T.add(decodeURIComponent(X.replace(/\+/g," ")),se)}))}t=io.prototype,t.add=function(T,X){Pn(this),this.i=null,T=lo(this,T);var se=this.g.get(T);return se||this.g.set(T,se=[]),se.push(X),this.h+=1,this};function Ro(T,X){Pn(T),X=lo(T,X),T.g.has(X)&&(T.i=null,T.h-=T.g.get(X).length,T.g.delete(X))}function oo(T,X){return Pn(T),X=lo(T,X),T.g.has(X)}t.forEach=function(T,X){Pn(this),this.g.forEach(function(se,ye){se.forEach(function(Qe){T.call(X,Qe,ye,this)},this)},this)},t.na=function(){Pn(this);const T=Array.from(this.g.values()),X=Array.from(this.g.keys()),se=[];for(let ye=0;ye<X.length;ye++){const Qe=T[ye];for(let Je=0;Je<Qe.length;Je++)se.push(X[ye])}return se},t.V=function(T){Pn(this);let X=[];if(typeof T=="string")oo(this,T)&&(X=X.concat(this.g.get(lo(this,T))));else{T=Array.from(this.g.values());for(let se=0;se<T.length;se++)X=X.concat(T[se])}return X},t.set=function(T,X){return Pn(this),this.i=null,T=lo(this,T),oo(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[X]),this.h+=1,this},t.get=function(T,X){return T?(T=this.V(T),0<T.length?String(T[0]):X):X};function hr(T,X,se){Ro(T,X),0<se.length&&(T.i=null,T.g.set(lo(T,X),y(se)),T.h+=se.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],X=Array.from(this.g.keys());for(var se=0;se<X.length;se++){var ye=X[se];const Je=encodeURIComponent(String(ye)),St=this.V(ye);for(ye=0;ye<St.length;ye++){var Qe=Je;St[ye]!==""&&(Qe+="="+encodeURIComponent(String(St[ye]))),T.push(Qe)}}return this.i=T.join("&")};function lo(T,X){return X=String(X),T.j&&(X=X.toLowerCase()),X}function KA(T,X){X&&!T.j&&(Pn(T),T.i=null,T.g.forEach(function(se,ye){var Qe=ye.toLowerCase();ye!=Qe&&(Ro(this,ye),hr(this,Qe,se))},T)),T.j=X}function Ms(T,X){const se=new Fn;if(o.Image){const ye=new Image;ye.onload=g(ei,se,"TestLoadImage: loaded",!0,X,ye),ye.onerror=g(ei,se,"TestLoadImage: error",!1,X,ye),ye.onabort=g(ei,se,"TestLoadImage: abort",!1,X,ye),ye.ontimeout=g(ei,se,"TestLoadImage: timeout",!1,X,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=T}else X(!1)}function gi(T,X){const se=new Fn,ye=new AbortController,Qe=setTimeout(()=>{ye.abort(),ei(se,"TestPingServer: timeout",!1,X)},1e4);fetch(T,{signal:ye.signal}).then(Je=>{clearTimeout(Qe),Je.ok?ei(se,"TestPingServer: ok",!0,X):ei(se,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(Qe),ei(se,"TestPingServer: error",!1,X)})}function ei(T,X,se,ye,Qe){try{Qe&&(Qe.onload=null,Qe.onerror=null,Qe.onabort=null,Qe.ontimeout=null),ye(se)}catch{}}function co(){this.g=new In}function xi(T,X,se){const ye=se||"";try{Ou(T,function(Qe,Je){let St=Qe;u(Qe)&&(St=gr(Qe)),X.push(ye+Je+"="+encodeURIComponent(St))})}catch(Qe){throw X.push(ye+"type="+encodeURIComponent("_badmap")),Qe}}function Al(T){this.l=T.Ub||null,this.j=T.eb||!1}b(Al,Ir),Al.prototype.g=function(){return new Lo(this.l,this.j)},Al.prototype.i=function(T){return function(){return T}}({});function Lo(T,X){kt.call(this),this.D=T,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Lo,kt),t=Lo.prototype,t.open=function(T,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=X,this.readyState=1,Ps(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(X.body=T),(this.D||o).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vu(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vu(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}t.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var X=T.value?T.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!T.done}))&&(this.response=this.responseText+=X)}T.done?vi(this):Ps(this),this.readyState==3&&Vu(this)}},t.Ra=function(T){this.g&&(this.response=this.responseText=T,vi(this))},t.Qa=function(T){this.g&&(this.response=T,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Ps(T)}t.setRequestHeader=function(T,X){this.u.append(T,X)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],X=this.h.entries();for(var se=X.next();!se.done;)se=se.value,T.push(se[0]+": "+se[1]),se=X.next();return T.join(`\r
`)};function Ps(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function uo(T){let X="";return D(T,function(se,ye){X+=ye,X+=":",X+=se,X+=`\r
`}),X}function Ra(T,X,se){e:{for(ye in se){var ye=!1;break e}ye=!0}ye||(se=uo(se),typeof T=="string"?se!=null&&encodeURIComponent(String(se)):En(T,X,se))}function Jr(T){kt.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Jr,kt);var dl=/^https?$/i,Ao=["POST","PUT"];t=Jr.prototype,t.Ha=function(T){this.J=T},t.ea=function(T,X,se,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);X=X?X.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?us(this.o):us(ke),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(X,String(T),!0),this.B=!1}catch(Je){zu(this,Je);return}if(T=se||"",se=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var Qe in ye)se.set(Qe,ye[Qe]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const Je of ye.keys())se.set(Je,ye.get(Je));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(se.keys()).find(Je=>Je.toLowerCase()=="content-type"),Qe=o.FormData&&T instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Ao,X,void 0))||ye||Qe||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Je,St]of se)this.g.setRequestHeader(Je,St);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(T),this.u=!1}catch(Je){zu(this,Je)}};function zu(T,X){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=X,T.m=5,Wl(T),Wi(T)}function Wl(T){T.A||(T.A=!0,It(T,"complete"),It(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,It(this,"complete"),It(this,"abort"),Wi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),Jr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$l(this):this.bb())},t.bb=function(){$l(this)};function $l(T){if(T.h&&typeof i<"u"&&(!T.v[1]||La(T)!=4||T.Z()!=2)){if(T.u&&La(T)==4)Dt(T.Ea,0,T);else if(It(T,"readystatechange"),La(T)==4){T.h=!1;try{const St=T.Z();e:switch(St){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var se;if(!(se=X)){var ye;if(ye=St===0){var Qe=String(T.D).match(Bs)[1]||null;!Qe&&o.self&&o.self.location&&(Qe=o.self.location.protocol.slice(0,-1)),ye=!dl.test(Qe?Qe.toLowerCase():"")}se=ye}if(se)It(T,"complete"),It(T,"success");else{T.m=6;try{var Je=2<La(T)?T.g.statusText:""}catch{Je=""}T.l=Je+" ["+T.Z()+"]",Wl(T)}}finally{Wi(T)}}}}function Wi(T,X){if(T.g){js(T);const se=T.g,ye=T.v[0]?()=>{}:null;T.g=null,T.v=null,X||It(T,"ready");try{se.onreadystatechange=ye}catch{}}}function js(T){T.I&&(o.clearTimeout(T.I),T.I=null)}t.isActive=function(){return!!this.g};function La(T){return T.g?T.g.readyState:0}t.Z=function(){try{return 2<La(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(T){if(this.g){var X=this.g.responseText;return T&&X.indexOf(T)==0&&(X=X.substring(T.length)),Ur(X)}};function WA(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function fl(T){const X={};T=(T.g&&2<=La(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<T.length;ye++){if(k(T[ye]))continue;var se=L(T[ye]);const Qe=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const Je=X[Qe]||[];X[Qe]=Je,Je.push(se)}C(X,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(T,X,se){return se&&se.internalChannelParams&&se.internalChannelParams[T]||X}function hl(T){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,T),this.cb=ks("retryDelaySeedMs",1e4,T),this.Wa=ks("forwardChannelMaxRetries",2,T),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Da(T&&T.concurrentRequestLimit),this.Da=new co,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hl.prototype,t.la=8,t.G=1,t.connect=function(T,X,se,ye){Ht(0),this.W=T,this.H=X||{},se&&ye!==void 0&&(this.H.OSID=se,this.H.OAID=ye),this.F=this.X,this.I=V(this,null,this.W),Hc(this)};function Uo(T){if(Xl(T),T.G==3){var X=T.U++,se=Ns(T.I);if(En(se,"SID",T.K),En(se,"RID",X),En(se,"TYPE","terminate"),ml(T,se),X=new tt(T,T.j,X),X.L=2,X.v=ul(Ns(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(X.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=X.v,se=!0),se||(X.g=Ae(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Rt(X)}zc(T)}function Qc(T){T.g&&(pl(T),T.g.cancel(),T.g=null)}function Xl(T){Qc(T),T.u&&(o.clearTimeout(T.u),T.u=null),Mo(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&o.clearTimeout(T.s),T.s=null)}function Hc(T){if(!ds(T.h)&&!T.s){T.s=!0;var X=T.Ga;ee||K(),ae||(ee(),ae=!0),G.add(X,T),T.B=0}}function Gu(T,X){return qa(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=X.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=sn(m(T.Ga,T,X),ec(T,T.B)),T.B++,!0)}t.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Qe=new tt(this,this.j,T);let Je=this.o;if(this.S&&(Je?(Je=S(Je),H(Je,this.S)):Je=this.S),this.m!==null||this.O||(Qe.H=Je,Je=null),this.P)e:{for(var X=0,se=0;se<this.i.length;se++){t:{var ye=this.i[se];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(X+=ye,4096<X){X=se;break e}if(X===4096||se===this.i.length-1){X=se+1;break e}}X=1e3}else X=1e3;X=Jl(this,Qe,X),se=Ns(this.I),En(se,"RID",T),En(se,"CVER",22),this.D&&En(se,"X-HTTP-Session-Id",this.D),ml(this,se),Je&&(this.O?X="headers="+encodeURIComponent(String(uo(Je)))+"&"+X:this.m&&Ra(se,this.m,Je)),Xn(this.h,Qe),this.Ua&&En(se,"TYPE","init"),this.P?(En(se,"$req",X),En(se,"SID","null"),Qe.T=!0,yt(Qe,se,null)):yt(Qe,se,X),this.G=2}}else this.G==3&&(T?Yl(this,T):this.i.length==0||ds(this.h)||Yl(this))};function Yl(T,X){var se;X?se=X.l:se=T.U++;const ye=Ns(T.I);En(ye,"SID",T.K),En(ye,"RID",se),En(ye,"AID",T.T),ml(T,ye),T.m&&T.o&&Ra(ye,T.m,T.o),se=new tt(T,T.j,se,T.B+1),T.m===null&&(se.H=T.o),X&&(T.i=X.D.concat(T.i)),X=Jl(T,se,1e3),se.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Xn(T.h,se),yt(se,ye,X)}function ml(T,X){T.H&&D(T.H,function(se,ye){En(X,ye,se)}),T.l&&Ou({},function(se,ye){En(X,ye,se)})}function Jl(T,X,se){se=Math.min(T.i.length,se);var ye=T.l?m(T.l.Na,T.l,T):null;e:{var Qe=T.i;let Je=-1;for(;;){const St=["count="+se];Je==-1?0<se?(Je=Qe[0].g,St.push("ofs="+Je)):Je=0:St.push("ofs="+Je);let mr=!0;for(let Zr=0;Zr<se;Zr++){let Nr=Qe[Zr].g;const _n=Qe[Zr].map;if(Nr-=Je,0>Nr)Je=Math.max(0,Qe[Zr].g-100),mr=!1;else try{xi(_n,St,"req"+Nr+"_")}catch{ye&&ye(_n)}}if(mr){ye=St.join("&");break e}}}return T=T.i.splice(0,se),X.D=T,ye}function Vc(T){if(!T.g&&!T.u){T.Y=1;var X=T.Fa;ee||K(),ae||(ee(),ae=!0),G.add(X,T),T.v=0}}function Zl(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=sn(m(T.Fa,T),ec(T,T.v)),T.v++,!0)}t.Fa=function(){if(this.u=null,$A(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=sn(m(this.ab,this),T)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Qc(this),$A(this))};function pl(T){T.A!=null&&(o.clearTimeout(T.A),T.A=null)}function $A(T){T.g=new tt(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var X=Ns(T.qa);En(X,"RID","rpc"),En(X,"SID",T.K),En(X,"AID",T.T),En(X,"CI",T.F?"0":"1"),!T.F&&T.ja&&En(X,"TO",T.ja),En(X,"TYPE","xmlhttp"),ml(T,X),T.m&&T.o&&Ra(X,T.m,T.o),T.L&&(T.g.I=T.L);var se=T.g;T=T.ia,se.L=1,se.v=ul(Ns(X)),se.m=null,se.P=!0,Bt(se,T)}t.Za=function(){this.C!=null&&(this.C=null,Qc(this),Zl(this),Ht(19))};function Mo(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function gl(T,X){var se=null;if(T.g==X){Mo(T),pl(T),T.g=null;var ye=2}else if(Ts(T.h,X))se=X.D,fs(T.h,X),ye=1;else return;if(T.G!=0){if(X.o)if(ye==1){se=X.m?X.m.length:0,X=Date.now()-X.F;var Qe=T.B;ye=As(),It(ye,new hn(ye,se)),Hc(T)}else Vc(T);else if(Qe=X.s,Qe==3||Qe==0&&0<X.X||!(ye==1&&Gu(T,X)||ye==2&&Zl(T)))switch(se&&0<se.length&&(X=T.h,X.i=X.i.concat(se)),Qe){case 1:Os(T,5);break;case 4:Os(T,10);break;case 3:Os(T,6);break;default:Os(T,2)}}}function ec(T,X){let se=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(se*=2),se*X}function Os(T,X){if(T.j.info("Error code "+X),X==2){var se=m(T.fb,T),ye=T.Xa;const Qe=!ye;ye=new mn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ll(ye,"https"),ul(ye),Qe?Ms(ye.toString(),se):gi(ye.toString(),se)}else Ht(2);T.G=0,T.l&&T.l.sa(X),zc(T),Xl(T)}t.fb=function(T){T?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function zc(T){if(T.G=0,T.ka=[],T.l){const X=Pc(T.h);(X.length!=0||T.i.length!=0)&&(E(T.ka,X),E(T.ka,T.i),T.h.i.length=0,y(T.i),T.i.length=0),T.l.ra()}}function V(T,X,se){var ye=se instanceof mn?Ns(se):new mn(se);if(ye.g!="")X&&(ye.g=X+"."+ye.g),cl(ye,ye.s);else{var Qe=o.location;ye=Qe.protocol,X=X?X+"."+Qe.hostname:Qe.hostname,Qe=+Qe.port;var Je=new mn(null);ye&&ll(Je,ye),X&&(Je.g=X),Qe&&cl(Je,Qe),se&&(Je.l=se),ye=Je}return se=T.D,X=T.ya,se&&X&&En(ye,se,X),En(ye,"VER",T.la),ml(T,ye),ye}function Ae(T,X,se){if(X&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=T.Ca&&!T.pa?new Jr(new Al({eb:se})):new Jr(T.pa),X.Ha(T.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}t=Fe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Re(){}Re.prototype.g=function(T,X){return new Ve(T,X)};function Ve(T,X){kt.call(this),this.g=new hl(X),this.l=T,this.h=X&&X.messageUrlParams||null,T=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(T?T["X-WebChannel-Content-Type"]=X.messageContentType:T={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(T?T["X-WebChannel-Client-Profile"]=X.va:T={"X-WebChannel-Client-Profile":X.va}),this.g.S=T,(T=X&&X.Sb)&&!k(T)&&(this.g.m=T),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!k(X)&&(this.g.D=X,T=this.h,T!==null&&X in T&&(T=this.h,X in T&&delete T[X])),this.j=new jt(this)}b(Ve,kt),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){Uo(this.g)},Ve.prototype.o=function(T){var X=this.g;if(typeof T=="string"){var se={};se.__data__=T,T=se}else this.u&&(se={},se.__data__=gr(T),T=se);X.i.push(new mi(X.Ya++,T)),X.G==3&&Hc(X)},Ve.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Ve.aa.N.call(this)};function ot(T){pa.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var X=T.__sm__;if(X){e:{for(const se in X){T=se;break e}T=void 0}(this.i=T)&&(T=this.i,X=X!==null&&T in X?X[T]:void 0),this.data=X}else this.data=T}b(ot,pa);function Et(){Pr.call(this),this.status=1}b(Et,Pr);function jt(T){this.g=T}b(jt,Fe),jt.prototype.ua=function(){It(this.g,"a")},jt.prototype.ta=function(T){It(this.g,new ot(T))},jt.prototype.sa=function(T){It(this.g,new Et)},jt.prototype.ra=function(){It(this.g,"b")},Re.prototype.createWebChannel=Re.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,YL=function(){return new Re},XL=function(){return As()},$L=rr,c_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,d2=_e,Te.COMPLETE="complete",WL=Te,an.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",kt.prototype.listen=kt.prototype.K,ig=an,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,KL=Jr}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});const xk="@firebase/firestore",vk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new tS("@firebase/firestore");function P0(){return bh.logLevel}function Zt(t,...e){if(bh.logLevel<=un.DEBUG){const r=e.map(fS);bh.debug(`Firestore (${Qm}): ${t}`,...r)}}function IA(t,...e){if(bh.logLevel<=un.ERROR){const r=e.map(fS);bh.error(`Firestore (${Qm}): ${t}`,...r)}}function Cm(t,...e){if(bh.logLevel<=un.WARN){const r=e.map(fS);bh.warn(`Firestore (${Qm}): ${t}`,...r)}}function fS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,JL(t,n,r)}function JL(t,e,r){let n=`FIRESTORE (${Qm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw IA(n),new Error(n)}function Un(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||JL(e,a,n)}function Rr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends PA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ri.UNAUTHENTICATED))}shutdown(){}}class oq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lq{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Un(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let s=new EA;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new EA,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new EA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Un(typeof n.accessToken=="string",31837,{l:n}),new ZL(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Un(e===null||typeof e=="string",2055,{h:e}),new Ri(e)}}class cq{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uq{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new cq(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Aq{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Un(this.o===void 0,3512);const n=s=>{s.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,Zt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Un(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new yk(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=dq(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function An(t,e){return t<e?-1:t>e?1:0}function u_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return TC(a)===TC(s)?An(a,s):TC(a)?1:-1}return An(t.length,e.length)}const fq=55296,hq=57343;function TC(t){const e=t.charCodeAt(0);return e>=fq&&e<=hq}function Em(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="__name__";class yu{constructor(e,r,n){r===void 0?r=0:r>e.length&&_r(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&_r(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return yu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof yu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=yu.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return An(e.length,r.length)}static compareSegments(e,r){const n=yu.isNumericId(e),a=yu.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?yu.extractNumericId(e).compare(yu.extractNumericId(r)):u_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zd.fromString(e.substring(4,e.length-2))}}class la extends yu{construct(e,r,n){return new la(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new la(r)}static emptyPath(){return new la([])}}const mq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends yu{construct(e,r,n){return new Ai(e,r,n)}static isValidIdentifier(e){return mq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wk}static keyField(){return new Ai([wk])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new Vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(r)}static emptyPath(){return new Ai([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.path=e}static fromPath(e){return new ur(la.fromString(e))}static fromName(e){return new ur(la.fromString(e).popFirst(5))}static empty(){return new ur(la.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&la.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return la.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ur(new la(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t,e,r){if(!r)throw new Vt(ht.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pq(t,e,r,n){if(e===!0&&n===!0)throw new Vt(ht.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function bk(t){if(!ur.isDocumentKey(t))throw new Vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ck(t){if(ur.isDocumentKey(t))throw new Vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_r(12329,{type:typeof t})}function to(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Xy(t);throw new Vt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function gq(t,e){if(e<=0)throw new Vt(ht.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){const r={typeString:t};return e&&(r.value=e),r}function Ux(t,e){if(!tU(t))throw new Vt(ht.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Vt(ht.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=-62135596800,_k=1e6;class Br{static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*_k);return new Br(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Ek)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_k}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Br._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ux(e,Br._jsonSchema))return new Br(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ek;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Br._jsonSchemaVersion="firestore/timestamp/1.0",Br._jsonSchema={type:Es("string",Br._jsonSchemaVersion),seconds:Es("number"),nanoseconds:Es("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{static fromTimestamp(e){return new Fr(e)}static min(){return new Fr(new Br(0,0))}static max(){return new Fr(new Br(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=-1;function xq(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Fr.fromTimestamp(n===1e9?new Br(r+1,0):new Br(r,n));return new lf(a,ur.empty(),e)}function vq(t){return new lf(t.readTime,t.key,Jg)}class lf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new lf(Fr.min(),ur.empty(),Jg)}static max(){return new lf(Fr.max(),ur.empty(),Jg)}}function yq(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ur.comparator(t.documentKey,e.documentKey),r!==0?r:An(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(t){if(t.code!==ht.FAILED_PRECONDITION||t.message!==wq)throw t;Zt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&_r(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new bt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof bt?r:bt.resolve(r)}catch(r){return bt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):bt.reject(r)}static resolve(e){return new bt((r,n)=>{r(e)})}static reject(e){return new bt((r,n)=>{n(e)})}static waitFor(e){return new bt((r,n)=>{let a=0,s=0,i=!1;e.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},l=>n(l))}),i=!0,s===a&&r()})}static or(e){let r=bt.resolve(!1);for(const n of e)r=r.next(a=>a?bt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new bt((n,a)=>{const s=e.length,i=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;r(e[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new bt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function Cq(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Vm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=-1;function Jy(t){return t==null}function Q2(t){return t===0&&1/t==-1/0}function Eq(t){return typeof t=="number"&&Number.isInteger(t)&&!Q2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU="";function _q(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Sk(e)),e=Sq(t.get(r),e);return Sk(e)}function Sq(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case rU:r+="";break;default:r+=s}}return r}function Sk(t){return t+rU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function bf(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,r){this.comparator=e,this.root=r||ci.EMPTY}insert(e,r){return new ka(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new ka(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iv(this.root,e,this.comparator,!1)}getReverseIterator(){return new iv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iv(this.root,e,this.comparator,!0)}}class iv{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??ci.RED,this.left=a??ci.EMPTY,this.right=s??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new ci(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ci.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _r(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _r(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _r(27949);return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw _r(57766)}get value(){throw _r(16141)}get color(){throw _r(16727)}get left(){throw _r(29726)}get right(){throw _r(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new ci(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.comparator=e,this.data=new ka(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bk(this.data.getIterator())}getIteratorFrom(e){return new Bk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ls(this.comparator);return r.data=e,r}}class Bk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new el([])}unionWith(e){let r=new Ls(Ai.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new el(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Em(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aU("Invalid base64 string: "+s):s}}(e);return new hi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new hi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const Tq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cf(t){if(Un(!!t,39018),typeof t=="string"){let e=0;const r=Tq.exec(t);if(Un(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:rs(t.seconds),nanos:rs(t.nanos)}}function rs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uf(t){return typeof t=="string"?hi.fromBase64String(t):hi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="server_timestamp",iU="__type__",oU="__previous_value__",lU="__local_write_time__";function pS(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[iU])==null?void 0:n.stringValue)===sU}function Zy(t){const e=t.mapValue.fields[oU];return pS(e)?Zy(e):e}function Zg(t){const e=cf(t.mapValue.fields[lU].timestampValue);return new Br(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,r,n,a,s,i,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const H2="(default)";class ex{constructor(e,r){this.projectId=e,this.database=r||H2}static empty(){return new ex("","")}get isDefaultDatabase(){return this.database===H2}isEqual(e){return e instanceof ex&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="__type__",Nq="__max__",ov={mapValue:{}},uU="__vector__",V2="value";function Af(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pS(t)?4:Iq(t)?9007199254740991:kq(t)?10:11:_r(28295,{value:t})}function Fu(t,e){if(t===e)return!0;const r=Af(t);if(r!==Af(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zg(t).isEqual(Zg(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=cf(a.timestampValue),o=cf(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return uf(a.bytesValue).isEqual(uf(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return rs(a.geoPointValue.latitude)===rs(s.geoPointValue.latitude)&&rs(a.geoPointValue.longitude)===rs(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return rs(a.integerValue)===rs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=rs(a.doubleValue),o=rs(s.doubleValue);return i===o?Q2(i)===Q2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Em(t.arrayValue.values||[],e.arrayValue.values||[],Fu);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(Tk(i)!==Tk(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Fu(i[l],o[l])))return!1;return!0}(t,e);default:return _r(52216,{left:t})}}function tx(t,e){return(t.values||[]).find(r=>Fu(r,e))!==void 0}function _m(t,e){if(t===e)return 0;const r=Af(t),n=Af(e);if(r!==n)return An(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return An(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=rs(s.integerValue||s.doubleValue),l=rs(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Nk(t.timestampValue,e.timestampValue);case 4:return Nk(Zg(t),Zg(e));case 5:return u_(t.stringValue,e.stringValue);case 6:return function(s,i){const o=uf(s),l=uf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=An(o[u],l[u]);if(d!==0)return d}return An(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=An(rs(s.latitude),rs(i.latitude));return o!==0?o:An(rs(s.longitude),rs(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kk(t.arrayValue,e.arrayValue);case 10:return function(s,i){var m,g,b,y;const o=s.fields||{},l=i.fields||{},u=(m=o[V2])==null?void 0:m.arrayValue,d=(g=l[V2])==null?void 0:g.arrayValue,h=An(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:kk(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===ov.mapValue&&i===ov.mapValue)return 0;if(s===ov.mapValue)return 1;if(i===ov.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=u_(l[h],d[h]);if(m!==0)return m;const g=_m(o[l[h]],u[d[h]]);if(g!==0)return g}return An(l.length,d.length)}(t.mapValue,e.mapValue);default:throw _r(23264,{he:r})}}function Nk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return An(t,e);const r=cf(t),n=cf(e),a=An(r.seconds,n.seconds);return a!==0?a:An(r.nanos,n.nanos)}function kk(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=_m(r[a],n[a]);if(s)return s}return An(r.length,n.length)}function Sm(t){return A_(t)}function A_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=cf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return uf(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ur.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=A_(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${A_(r.fields[i])}`;return a+"}"}(t.mapValue):_r(61005,{value:t})}function f2(t){switch(Af(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zy(t);return e?16+f2(e):16;case 5:return 2*t.stringValue.length;case 6:return uf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+f2(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return bf(n.fields,(s,i)=>{a+=s.length+f2(i)}),a}(t.mapValue);default:throw _r(13486,{value:t})}}function Ik(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d_(t){return!!t&&"integerValue"in t}function gS(t){return!!t&&"arrayValue"in t}function Fk(t){return!!t&&"nullValue"in t}function Dk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function h2(t){return!!t&&"mapValue"in t}function kq(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[cU])==null?void 0:n.stringValue)===uU}function Tg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return bf(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Tg(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Tg(t.arrayValue.values[r]);return e}return{...t}}function Iq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Nq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.value=e}static empty(){return new Eo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!h2(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tg(r)}setAll(e){let r=Ai.emptyPath(),n={},a=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=Tg(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());h2(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Fu(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];h2(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){bf(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Eo(Tg(this.value))}}function AU(t){const e=[];return bf(t.fields,(r,n)=>{const a=new Ai([r]);if(h2(n)){const s=AU(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new el(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,r,n,a,s,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Pi(e,0,Fr.min(),Fr.min(),Fr.min(),Eo.empty(),0)}static newFoundDocument(e,r,n,a){return new Pi(e,1,r,Fr.min(),n,a,0)}static newNoDocument(e,r){return new Pi(e,2,r,Fr.min(),Fr.min(),Eo.empty(),0)}static newUnknownDocument(e,r){return new Pi(e,3,r,Fr.min(),Fr.min(),Eo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Fr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,r){this.position=e,this.inclusive=r}}function Rk(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=ur.comparator(ur.fromName(i.referenceValue),r.key):n=_m(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Lk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Fu(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,r="asc"){this.field=e,this.dir=r}}function Fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{}class Cs extends dU{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Rq(e,r,n):r==="array-contains"?new Mq(e,n):r==="in"?new Pq(e,n):r==="not-in"?new jq(e,n):r==="array-contains-any"?new Oq(e,n):new Cs(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Lq(e,n):new Uq(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(_m(r,this.value)):r!==null&&Af(this.value)===Af(r)&&this.matchesComparison(_m(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _r(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fc extends dU{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Fc(e,r)}matches(e){return fU(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fU(t){return t.op==="and"}function hU(t){return Dq(t)&&fU(t)}function Dq(t){for(const e of t.filters)if(e instanceof Fc)return!1;return!0}function f_(t){if(t instanceof Cs)return t.field.canonicalString()+t.op.toString()+Sm(t.value);if(hU(t))return t.filters.map(e=>f_(e)).join(",");{const e=t.filters.map(r=>f_(r)).join(",");return`${t.op}(${e})`}}function mU(t,e){return t instanceof Cs?function(n,a){return a instanceof Cs&&n.op===a.op&&n.field.isEqual(a.field)&&Fu(n.value,a.value)}(t,e):t instanceof Fc?function(n,a){return a instanceof Fc&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&mU(i,a.filters[o]),!0):!1}(t,e):void _r(19439)}function pU(t){return t instanceof Cs?function(r){return`${r.field.canonicalString()} ${r.op} ${Sm(r.value)}`}(t):t instanceof Fc?function(r){return r.op.toString()+" {"+r.getFilters().map(pU).join(" ,")+"}"}(t):"Filter"}class Rq extends Cs{constructor(e,r,n){super(e,r,n),this.key=ur.fromName(n.referenceValue)}matches(e){const r=ur.comparator(e.key,this.key);return this.matchesComparison(r)}}class Lq extends Cs{constructor(e,r){super(e,"in",r),this.keys=gU("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Uq extends Cs{constructor(e,r){super(e,"not-in",r),this.keys=gU("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function gU(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>ur.fromName(n.referenceValue))}class Mq extends Cs{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return gS(r)&&tx(r.arrayValue,this.value)}}class Pq extends Cs{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&tx(this.value.arrayValue,r)}}class jq extends Cs{constructor(e,r){super(e,"not-in",r)}matches(e){if(tx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!tx(this.value.arrayValue,r)}}class Oq extends Cs{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!gS(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>tx(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e,r=null,n=[],a=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function Uk(t,e=null,r=[],n=[],a=null,s=null,i=null){return new Qq(t,e,r,n,a,s,i)}function xS(t){const e=Rr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>f_(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Jy(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sm(n)).join(",")),e.Te=r}return e.Te}function vS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Fq(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!mU(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lk(t.startAt,e.startAt)&&Lk(t.endAt,e.endAt)}function h_(t){return ur.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,r=null,n=[],a=[],s=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Hq(t,e,r,n,a,s,i,o){return new zm(t,e,r,n,a,s,i,o)}function ew(t){return new zm(t)}function Mk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xU(t){return t.collectionGroup!==null}function Bg(t){const e=Rr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Ls(Ai.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new rx(s,n))}),r.has(Ai.keyField().canonicalString())||e.Ie.push(new rx(Ai.keyField(),n))}return e.Ie}function Su(t){const e=Rr(t);return e.Ee||(e.Ee=Vq(e,Bg(t))),e.Ee}function Vq(t,e){if(t.limitType==="F")return Uk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new rx(a.field,s)});const r=t.endAt?new z2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new z2(t.startAt.position,t.startAt.inclusive):null;return Uk(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function m_(t,e){const r=t.filters.concat([e]);return new zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function G2(t,e,r){return new zm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function tw(t,e){return vS(Su(t),Su(e))&&t.limitType===e.limitType}function vU(t){return`${xS(Su(t))}|lt:${t.limitType}`}function j0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>pU(a)).join(", ")}]`),Jy(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Sm(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Sm(a)).join(",")),`Target(${n})`}(Su(t))}; limitType=${t.limitType})`}function rw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ur.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Bg(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,o,l){const u=Rk(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Bg(n),a)||n.endAt&&!function(i,o,l){const u=Rk(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Bg(n),a))}(t,e)}function zq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yU(t){return(e,r)=>{let n=!1;for(const a of Bg(t)){const s=Gq(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Gq(t,e,r){const n=t.field.isKeyField()?ur.comparator(e.key,r.key):function(s,i,o){const l=i.data.field(s),u=o.data.field(s);return l!==null&&u!==null?_m(l,u):_r(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return _r(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){bf(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return nU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq=new ka(ur.comparator);function FA(){return qq}const wU=new ka(ur.comparator);function og(...t){let e=wU;for(const r of t)e=e.insert(r.key,r);return e}function bU(t){let e=wU;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function sh(){return Ng()}function CU(){return Ng()}function Ng(){return new Rh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Kq=new ka(ur.comparator),Wq=new Ls(ur.comparator);function dn(...t){let e=Wq;for(const r of t)e=e.add(r);return e}const $q=new Ls(An);function Xq(){return $q}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q2(e)?"-0":e}}function EU(t){return{integerValue:""+t}}function Yq(t,e){return Eq(e)?EU(e):yS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._=void 0}}function Jq(t,e,r){return t instanceof q2?function(a,s){const i={fields:{[iU]:{stringValue:sU},[lU]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&pS(s)&&(s=Zy(s)),s&&(i.fields[oU]=s),{mapValue:i}}(r,e):t instanceof Tm?SU(t,e):t instanceof nx?TU(t,e):function(a,s){const i=_U(a,s),o=Pk(i)+Pk(a.Ae);return d_(i)&&d_(a.Ae)?EU(o):yS(a.serializer,o)}(t,e)}function Zq(t,e,r){return t instanceof Tm?SU(t,e):t instanceof nx?TU(t,e):r}function _U(t,e){return t instanceof K2?function(n){return d_(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class q2 extends nw{}class Tm extends nw{constructor(e){super(),this.elements=e}}function SU(t,e){const r=BU(e);for(const n of t.elements)r.some(a=>Fu(a,n))||r.push(n);return{arrayValue:{values:r}}}class nx extends nw{constructor(e){super(),this.elements=e}}function TU(t,e){let r=BU(e);for(const n of t.elements)r=r.filter(a=>!Fu(a,n));return{arrayValue:{values:r}}}class K2 extends nw{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Pk(t){return rs(t.integerValue||t.doubleValue)}function BU(t){return gS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,r){this.field=e,this.transform=r}}function tK(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Tm&&a instanceof Tm||n instanceof nx&&a instanceof nx?Em(n.elements,a.elements,Fu):n instanceof K2&&a instanceof K2?Fu(n.Ae,a.Ae):n instanceof q2&&a instanceof q2}(t.transform,e.transform)}class rK{constructor(e,r){this.version=e,this.transformResults=r}}class ro{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ro}static exists(e){return new ro(void 0,e)}static updateTime(e){return new ro(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m2(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class aw{}function NU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sw(t.key,ro.none()):new Mx(t.key,t.data,ro.none());{const r=t.data,n=Eo.empty();let a=new Ls(Ai.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Cf(t.key,n,new el(a.toArray()),ro.none())}}function nK(t,e,r){t instanceof Mx?function(a,s,i){const o=a.value.clone(),l=Ok(a.fieldTransforms,s,i.transformResults);o.setAll(l),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Cf?function(a,s,i){if(!m2(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Ok(a.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(kU(a)),l.setAll(o),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function kg(t,e,r,n){return t instanceof Mx?function(s,i,o,l){if(!m2(s.precondition,i))return o;const u=s.value.clone(),d=Qk(s.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Cf?function(s,i,o,l){if(!m2(s.precondition,i))return o;const u=Qk(s.fieldTransforms,l,i),d=i.data;return d.setAll(kU(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,o){return m2(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function aK(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=_U(n.transform,a||null);s!=null&&(r===null&&(r=Eo.empty()),r.set(n.field,s))}return r||null}function jk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Em(n,a,(s,i)=>tK(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mx extends aw{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Cf extends aw{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kU(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Ok(t,e,r){const n=new Map;Un(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,o=e.data.field(s.field);n.set(s.field,Zq(i,o,r[a]))}return n}function Qk(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Jq(s,i,e))}return n}class sw extends aw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sK extends aw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&nK(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=kg(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=kg(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=CU();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const l=NU(i,o);l!==null&&n.set(a.key,l),i.isValidDocument()||i.convertToNoDocument(Fr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),dn())}isEqual(e){return this.batchId===e.batchId&&Em(this.mutations,e.mutations,(r,n)=>jk(r,n))&&Em(this.baseMutations,e.baseMutations,(r,n)=>jk(r,n))}}class wS{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Un(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return Kq}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new wS(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,yn;function cK(t){switch(t){case ht.OK:return _r(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return _r(15467,{code:t})}}function IU(t){if(t===void 0)return IA("GRPC error has no .code"),ht.UNKNOWN;switch(t){case vs.OK:return ht.OK;case vs.CANCELLED:return ht.CANCELLED;case vs.UNKNOWN:return ht.UNKNOWN;case vs.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case vs.INTERNAL:return ht.INTERNAL;case vs.UNAVAILABLE:return ht.UNAVAILABLE;case vs.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case vs.NOT_FOUND:return ht.NOT_FOUND;case vs.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case vs.ABORTED:return ht.ABORTED;case vs.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case vs.DATA_LOSS:return ht.DATA_LOSS;default:return _r(39323,{code:t})}}(yn=vs||(vs={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=new Zd([4294967295,4294967295],0);function Hk(t){const e=uK().encode(t),r=new qL;return r.update(e),new Uint8Array(r.digest())}function Vk(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zd([r,n],0),new Zd([a,s],0)]}class bS{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new lg(`Invalid padding: ${r}`);if(n<0)throw new lg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new lg(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new lg(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Zd.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(Zd.fromNumber(n)));return a.compare(AK)===1&&(a=new Zd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Hk(e),[n,a]=Vk(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new bS(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=Hk(e),[n,a]=Vk(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class lg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Px.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new iw(Fr.min(),a,new ka(An),FA(),dn())}}class Px{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Px(n,r,dn(),dn(),dn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class FU{constructor(e,r){this.targetId=e,this.Ce=r}}class DU{constructor(e,r,n=hi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class zk{constructor(){this.ve=0,this.Fe=Gk(),this.Me=hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dn(),r=dn(),n=dn();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:_r(38017,{changeType:s})}}),new Px(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=Gk()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dK{constructor(e){this.Ge=e,this.ze=new Map,this.je=FA(),this.Je=lv(),this.He=lv(),this.Ye=new ka(An)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:_r(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(h_(s))if(n===0){const i=new ur(s.path);this.et(r,i,Pi.newNoDocument(i,Fr.min()))}else Un(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=uf(n).toUint8Array()}catch(l){if(l instanceof aU)return Cm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new bS(i,a,s)}catch(l){return Cm(l instanceof lg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&h_(o.target)){const l=new ur(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Pi.newNoDocument(l,e))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=dn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(e));const a=new iw(e,r,this.Ye,this.je,n);return this.je=FA(),this.Je=lv(),this.He=lv(),this.Ye=new ka(An),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new zk,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ls(An),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ls(An),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Zt("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zk),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function lv(){return new ka(ur.comparator)}function Gk(){return new ka(ur.comparator)}const fK={asc:"ASCENDING",desc:"DESCENDING"},hK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mK={and:"AND",or:"OR"};class pK{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function p_(t,e){return t.useProto3Json||Jy(e)?e:{value:e}}function W2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gK(t,e){return W2(t,e.toTimestamp())}function Tu(t){return Un(!!t,49232),Fr.fromTimestamp(function(r){const n=cf(r);return new Br(n.seconds,n.nanos)}(t))}function CS(t,e){return g_(t,e).canonicalString()}function g_(t,e){const r=function(a){return new la(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function LU(t){const e=la.fromString(t);return Un(OU(e),10190,{key:e.toString()}),e}function x_(t,e){return CS(t.databaseId,e.path)}function BC(t,e){const r=LU(e);if(r.get(1)!==t.databaseId.projectId)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ur(MU(r))}function UU(t,e){return CS(t.databaseId,e)}function xK(t){const e=LU(t);return e.length===4?la.emptyPath():MU(e)}function v_(t){return new la(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MU(t){return Un(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qk(t,e,r){return{name:x_(t,e),fields:r.value.mapValue.fields}}function vK(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:_r(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Un(d===void 0||typeof d=="string",58123),hi.fromBase64String(d||"")):(Un(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),hi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?ht.UNKNOWN:IU(u.code);return new Vt(d,u.message||"")}(i);r=new DU(n,a,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=BC(t,n.document.name),s=Tu(n.document.updateTime),i=n.document.createTime?Tu(n.document.createTime):Fr.min(),o=new Eo({mapValue:{fields:n.document.fields}}),l=Pi.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new p2(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=BC(t,n.document),s=n.readTime?Tu(n.readTime):Fr.min(),i=Pi.newNoDocument(a,s),o=n.removedTargetIds||[];r=new p2([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=BC(t,n.document),s=n.removedTargetIds||[];r=new p2([],s,a,null)}else{if(!("filter"in e))return _r(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new lK(a,s),o=n.targetId;r=new FU(o,i)}}return r}function yK(t,e){let r;if(e instanceof Mx)r={update:qk(t,e.key,e.value)};else if(e instanceof sw)r={delete:x_(t,e.key)};else if(e instanceof Cf)r={update:qk(t,e.key,e.data),updateMask:NK(e.fieldMask)};else{if(!(e instanceof sK))return _r(16599,{Vt:e.type});r={verify:x_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof q2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof K2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw _r(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:gK(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_r(27497)}(t,e.precondition)),r}function wK(t,e){return t&&t.length>0?(Un(e!==void 0,14353),t.map(r=>function(a,s){let i=a.updateTime?Tu(a.updateTime):Tu(s);return i.isEqual(Fr.min())&&(i=Tu(s)),new rK(i,a.transformResults||[])}(r,e))):[]}function bK(t,e){return{documents:[UU(t,e.path)]}}function CK(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=UU(t,a);const s=function(u){if(u.length!==0)return jU(Fc.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:O0(m.field),direction:SK(m.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=p_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function EK(t){let e=xK(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Un(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const m=PU(h);return m instanceof Fc&&hU(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(b){return new rx(Q0(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Jy(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new z2(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new z2(g,m)}(r.endAt)),Hq(e,a,i,s,o,"F",l,u)}function _K(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _r(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function PU(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Q0(r.unaryFilter.field);return Cs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Q0(r.unaryFilter.field);return Cs.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Q0(r.unaryFilter.field);return Cs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Q0(r.unaryFilter.field);return Cs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _r(61313);default:return _r(60726)}}(t):t.fieldFilter!==void 0?function(r){return Cs.create(Q0(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _r(58110);default:return _r(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Fc.create(r.compositeFilter.filters.map(n=>PU(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _r(1026)}}(r.compositeFilter.op))}(t):_r(30097,{filter:t})}function SK(t){return fK[t]}function TK(t){return hK[t]}function BK(t){return mK[t]}function O0(t){return{fieldPath:t.canonicalString()}}function Q0(t){return Ai.fromServerFormat(t.fieldPath)}function jU(t){return t instanceof Cs?function(r){if(r.op==="=="){if(Dk(r.value))return{unaryFilter:{field:O0(r.field),op:"IS_NAN"}};if(Fk(r.value))return{unaryFilter:{field:O0(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Dk(r.value))return{unaryFilter:{field:O0(r.field),op:"IS_NOT_NAN"}};if(Fk(r.value))return{unaryFilter:{field:O0(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O0(r.field),op:TK(r.op),value:r.value}}}(t):t instanceof Fc?function(r){const n=r.getFilters().map(a=>jU(a));return n.length===1?n[0]:{compositeFilter:{op:BK(r.op),filters:n}}}(t):_r(54877,{filter:t})}function NK(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function OU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,a,s=Fr.min(),i=Fr.min(),o=hi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(e){this.yt=e}}function IK(t){const e=EK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?G2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(){this.Cn=new DK}addToCollectionParentIndex(e,r){return this.Cn.add(r),bt.resolve()}getCollectionParents(e,r){return bt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return bt.resolve()}deleteFieldIndex(e,r){return bt.resolve()}deleteAllFieldIndexes(e){return bt.resolve()}createTargetIndexes(e,r){return bt.resolve()}getDocumentsMatchingTarget(e,r){return bt.resolve(null)}getIndexType(e,r){return bt.resolve(0)}getFieldIndexes(e,r){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,r){return bt.resolve(lf.min())}getMinOffsetFromCollectionGroup(e,r){return bt.resolve(lf.min())}updateCollectionGroup(e,r,n){return bt.resolve()}updateIndexEntries(e,r){return bt.resolve()}}class DK{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ls(la.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ls(la.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QU=41943040;class bo{static withCacheSize(e){return new bo(e,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(QU,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bm(0)}static cr(){return new Bm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="LruGarbageCollector",RK=1048576;function $k([t,e],[r,n]){const a=An(t,r);return a===0?An(e,n):a}class LK{constructor(e){this.Ir=e,this.buffer=new Ls($k),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();$k(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class UK{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Zt(Wk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Vm(r)?Zt(Wk,"Ignoring IndexedDB error during garbage collection: ",r):await Hm(r)}await this.Vr(3e5)})}}class MK{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return bt.resolve(Yy.ce);const n=new LK(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(Kk)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kk):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,i=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),P0()<=un.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function PK(t,e){return new MK(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(){this.changes=new Rh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Pi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?bt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&kg(n.mutation,a,el.empty(),Br.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,dn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=dn()){const a=sh();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=og();return s.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=sh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,dn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,a){let s=FA();const i=Ng(),o=function(){return Ng()}();return r.forEach((l,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Cf)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),kg(d.mutation,u,d.mutation.getFieldMask(),Br.now())):i.set(u.key,el.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new OK(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Ng();let a=new ka((i,o)=>i-o),s=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||el.empty();d=o.applyToLocalView(u,d),n.set(l,d);const h=(a.get(o.batchId)||dn()).add(l);a=a.insert(o.batchId,h)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=CU();d.forEach(m=>{if(!s.has(m)){const g=NU(r.get(m),n.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return bt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return ur.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):xU(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):bt.resolve(sh());let o=Jg,l=s;return i.next(u=>bt.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?bt.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,dn())).next(d=>({batchId:o,changes:bU(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ur(r)).next(n=>{let a=og();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=og();return this.indexManager.getCollectionParents(e,s).next(o=>bt.forEach(o,l=>{const u=function(h,m){return new zm(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Pi.newInvalidDocument(d)))});let o=og();return i.forEach((l,u)=>{const d=s.get(l);d!==void 0&&kg(d.mutation,u,el.empty(),Br.now()),rw(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return bt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Tu(a.createTime)}}(r)),bt.resolve()}getNamedQuery(e,r){return bt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:IK(a.bundledQuery),readTime:Tu(a.readTime)}}(r)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(){this.overlays=new ka(ur.comparator),this.qr=new Map}getOverlay(e,r){return bt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=sh();return bt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),bt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),bt.resolve()}getOverlaysForCollection(e,r,n){const a=sh(),s=r.length+1,i=new ur(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&a.set(l.getKey(),l)}return bt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new ka((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=sh(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=sh(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return bt.resolve(o)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new oK(r,n));let s=this.qr.get(r);s===void 0&&(s=dn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return bt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.Qr=new Ls(qs.$r),this.Ur=new Ls(qs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new qs(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new qs(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new ur(new la([])),n=new qs(r,e),a=new qs(r,e+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new ur(new la([])),n=new qs(r,e),a=new qs(r,e+1);let s=dn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new qs(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class qs{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return ur.comparator(e.key,r.key)||An(e.Yr,r.Yr)}static Kr(e,r){return An(e.Yr,r.Yr)||ur.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ls(qs.$r)}checkEmpty(e){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new iK(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new qs(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bt.resolve(i)}lookupMutationBatch(e,r){return bt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?mS:this.tr-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new qs(r,0),a=new qs(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ls(An);return r.forEach(a=>{const s=new qs(a,0),i=new qs(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),bt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;ur.isDocumentKey(s)||(s=s.child(""));const i=new qs(new ur(s),0);let o=new Ls(An);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(l.Yr)),!0)},i),bt.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Un(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return bt.forEach(r.mutations,a=>{const s=new qs(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new qs(r,0),a=this.Zr.firstAfterOrEqual(n);return bt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,bt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e){this.ri=e,this.docs=function(){return new ka(ur.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return bt.resolve(n?n.document.mutableCopy():Pi.newInvalidDocument(r))}getEntries(e,r){let n=FA();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Pi.newInvalidDocument(a))}),bt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=FA();const i=r.path,o=new ur(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||yq(vq(d),n)<=0||(a.has(d.key)||rw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return bt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){_r(9500)}ii(e,r){return bt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new KK(this)}getSize(e){return bt.resolve(this.size)}}class KK extends jK{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),bt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.persistence=e,this.si=new Rh(r=>xS(r),vS),this.lastRemoteSnapshotVersion=Fr.min(),this.highestTargetId=0,this.oi=0,this._i=new ES,this.targetCount=0,this.ai=Bm.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),bt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Bm(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,bt.resolve()}updateTargetData(e,r){return this.Pr(r),bt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),bt.waitFor(s).next(()=>a)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return bt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),bt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),bt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),bt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return bt.resolve(n)}containsKey(e,r){return bt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,r){this.ui={},this.overlays={},this.ci=new Yy(0),this.li=!1,this.li=!0,this.hi=new zK,this.referenceDelegate=e(this),this.Pi=new WK(this),this.indexManager=new FK,this.remoteDocumentCache=function(a){return new qK(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new kK(r),this.Ii=new HK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new VK,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new GK(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Zt("MemoryPersistence","Starting transaction:",e);const a=new $K(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return bt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class $K extends bq{constructor(e){super(),this.currentSequenceNumber=e}}class _S{constructor(e){this.persistence=e,this.Ri=new ES,this.Vi=null}static mi(e){return new _S(e)}get fi(){if(this.Vi)return this.Vi;throw _r(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),bt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),bt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),bt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.fi,n=>{const a=ur.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,Fr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return bt.or([()=>bt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class $2{constructor(e,r){this.persistence=e,this.pi=new Rh(n=>_q(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=PK(this,r)}static mi(e,r){return new $2(e,r)}Ei(){}di(e){return bt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return bt.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?bt.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,s.removeEntry(i,Fr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),bt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),bt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=f2(e.data.value)),r}br(e,r,n){return bt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return bt.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=dn(),a=dn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new SS(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _H()?8:Cq(zi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new XK;return this.Ss(e,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(P0()<=un.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",j0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),bt.resolve()):(P0()<=un.DEBUG&&Zt("QueryEngine","Query:",j0(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(P0()<=un.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",j0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Su(r))):bt.resolve())}ys(e,r){if(Mk(r))return bt.resolve(null);let n=Su(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=G2(r,null,"F"),n=Su(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=dn(...s);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(e,G2(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,a){return Mk(r)||a.isEqual(Fr.min())?bt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?bt.resolve(null):(P0()<=un.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),j0(r)),this.vs(e,i,r,xq(a,Jg)).next(o=>o))})}Ds(e,r){let n=new Ls(yU(e));return r.forEach((a,s)=>{rw(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return P0()<=un.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",j0(r)),this.ps.getDocumentsMatchingQuery(e,r,lf.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="LocalStore",JK=3e8;class ZK{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new ka(An),this.xs=new Rh(s=>xS(s),vS),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function eW(t,e,r,n){return new ZK(t,e,r,n)}async function VU(t,e){const r=Rr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let l=dn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function tW(t,e){const r=Rr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let g=bt.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(y=>{const E=u.docVersions.get(b);Un(E!==null,48541),y.version.compareTo(E)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=dn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function zU(t){const e=Rr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function rW(t,e){const r=Rr(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=a.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(hi.EMPTY_BYTE_STRING,Fr.min()).withLastLimboFreeSnapshotVersion(Fr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),a=a.insert(h,g),function(y,E,B){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=JK?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,g,d)&&o.push(r.Pi.updateTargetData(s,g))});let l=FA(),u=dn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(nW(s,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Fr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return bt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(r.Ms=a,s))}function nW(t,e,r){let n=dn(),a=dn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=FA();return r.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),l.isNoDocument()&&l.version.isEqual(Fr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):Zt(TS,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:a}})}function aW(t,e){const r=Rr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=mS),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function sW(t,e){const r=Rr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,bt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new Hd(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function y_(t,e,r){const n=Rr(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!Vm(i))throw i;Zt(TS,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function Xk(t,e,r){const n=Rr(t);let a=Fr.min(),s=dn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=Rr(l),m=h.xs.get(d);return m!==void 0?bt.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(n,i,Su(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?a:Fr.min(),r?s:dn())).next(o=>(iW(n,zq(e),o),{documents:o,Qs:s})))}function iW(t,e,r){let n=t.Os.get(e)||Fr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class Yk{constructor(){this.activeTargetIds=Xq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oW{constructor(){this.Mo=new Yk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yk,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="ConnectivityMonitor";class Zk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Zt(Jk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Zt(Jk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cv=null;function w_(){return cv===null?cv=function(){return 268435456+Math.round(2147483648*Math.random())}():cv++,"0x"+cv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="RestConnection",cW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===H2?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const i=w_(),o=this.zo(e,r.toUriEncodedString());Zt(NC,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,a,s);const{host:u}=new URL(o),d=Pm(u);return this.Jo(e,o,l,n,d).then(h=>(Zt(NC,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Cm(NC,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,a,s,i){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=cW[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="WebChannelConnection";class dW extends uW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const i=w_();return new Promise((o,l)=>{const u=new KL;u.setWithCredentials(!0),u.listenOnce(WL.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case d2.NO_ERROR:const h=u.getResponseJson();Zt(Ti,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case d2.TIMEOUT:Zt(Ti,`RPC '${e}' ${i} timed out`),l(new Vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case d2.HTTP_ERROR:const m=u.getStatus();if(Zt(Ti,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(B){const k=B.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(k)>=0?k:ht.UNKNOWN}(b.status);l(new Vt(y,b.message))}else l(new Vt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Vt(ht.UNAVAILABLE,"Connection failed."));break;default:_r(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Zt(Ti,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(a);Zt(Ti,`RPC '${e}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(e,r,n){const a=w_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=YL(),o=XL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=s.join("");Zt(Ti,`Creating RPC '${e}' stream ${a}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new AW({Yo:E=>{g?Zt(Ti,`Not sending because RPC '${e}' stream ${a} is closed:`,E):(m||(Zt(Ti,`Opening RPC '${e}' stream ${a} transport.`),h.open(),m=!0),Zt(Ti,`RPC '${e}' stream ${a} sending:`,E),h.send(E))},Zo:()=>h.close()}),y=(E,B,k)=>{E.listen(B,F=>{try{k(F)}catch(U){setTimeout(()=>{throw U},0)}})};return y(h,ig.EventType.OPEN,()=>{g||(Zt(Ti,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),y(h,ig.EventType.CLOSE,()=>{g||(g=!0,Zt(Ti,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),y(h,ig.EventType.ERROR,E=>{g||(g=!0,Cm(Ti,`RPC '${e}' stream ${a} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new Vt(ht.UNAVAILABLE,"The operation could not be completed")))}),y(h,ig.EventType.MESSAGE,E=>{var B;if(!g){const k=E.data[0];Un(!!k,16349);const F=k,U=(F==null?void 0:F.error)||((B=F[0])==null?void 0:B.error);if(U){Zt(Ti,`RPC '${e}' stream ${a} received error:`,U);const P=U.status;let D=function(N){const H=vs[N];if(H!==void 0)return IU(H)}(P),C=U.message;D===void 0&&(D=ht.INTERNAL,C="Unknown error status: "+P+" with message "+U.message),g=!0,b.a_(new Vt(D,C)),h.close()}else Zt(Ti,`RPC '${e}' stream ${a} received:`,k),b.u_(k)}}),y(o,$L.STAT_EVENT,E=>{E.stat===c_.PROXY?Zt(Ti,`RPC '${e}' stream ${a} detected buffering proxy`):E.stat===c_.NOPROXY&&Zt(Ti,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function kC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){return new pK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Zt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="PersistentStream";class qU{constructor(e,r,n,a,s,i,o,l){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GU(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ht.RESOURCE_EXHAUSTED?(IA(r.toString()),IA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new Vt(ht.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Zt(e3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Zt(e3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fW extends qU{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=vK(this.serializer,e),n=function(s){if(!("targetChange"in s))return Fr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Fr.min():i.readTime?Tu(i.readTime):Fr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=v_(this.serializer),r.addTarget=function(s,i){let o;const l=i.target;if(o=h_(l)?{documents:bK(s,l)}:{query:CK(s,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=RU(s,i.resumeToken);const u=p_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Fr.min())>0){o.readTime=W2(s,i.snapshotVersion.toTimestamp());const u=p_(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=_K(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=v_(this.serializer),r.removeTarget=e,this.q_(r)}}class hW extends qU{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Un(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=wK(e.writeResults,e.commitTime),n=Tu(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=v_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>yK(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{}class pW extends mW{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(e,g_(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ht.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,g_(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Vt(ht.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(IA(r),this.aa=!1):Zt("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch="RemoteStore";class xW{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Lh(this)&&(Zt(Ch,"Restarting streams for network reachability change."),await async function(l){const u=Rr(l);u.Ea.add(4),await jx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await lw(u)}(this))})}),this.Ra=new gW(n,a)}}async function lw(t){if(Lh(t))for(const e of t.da)await e(!0)}async function jx(t){for(const e of t.da)await e(!1)}function KU(t,e){const r=Rr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),IS(r)?kS(r):Gm(r).O_()&&NS(r,e))}function BS(t,e){const r=Rr(t),n=Gm(r);r.Ia.delete(e),n.O_()&&WU(r,e),r.Ia.size===0&&(n.O_()?n.L_():Lh(r)&&r.Ra.set("Unknown"))}function NS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Gm(t).Y_(e)}function WU(t,e){t.Va.Ue(e),Gm(t).Z_(e)}function kS(t){t.Va=new dK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Gm(t).start(),t.Ra.ua()}function IS(t){return Lh(t)&&!Gm(t).x_()&&t.Ia.size>0}function Lh(t){return Rr(t).Ea.size===0}function $U(t){t.Va=void 0}async function vW(t){t.Ra.set("Online")}async function yW(t){t.Ia.forEach((e,r)=>{NS(t,e)})}async function wW(t,e){$U(t),IS(t)?(t.Ra.ha(e),kS(t)):t.Ra.set("Unknown")}async function bW(t,e,r){if(t.Ra.set("Online"),e instanceof DU&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(n){Zt(Ch,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await X2(t,n)}else if(e instanceof p2?t.Va.Ze(e):e instanceof FU?t.Va.st(e):t.Va.tt(e),!r.isEqual(Fr.min()))try{const n=await zU(t.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(hi.EMPTY_BYTE_STRING,d.snapshotVersion)),WU(s,l);const h=new Hd(d.target,l,u,d.sequenceNumber);NS(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Zt(Ch,"Failed to raise snapshot:",n),await X2(t,n)}}async function X2(t,e,r){if(!Vm(e))throw e;t.Ea.add(1),await jx(t),t.Ra.set("Offline"),r||(r=()=>zU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Zt(Ch,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await lw(t)})}function XU(t,e){return e().catch(r=>X2(t,r,e))}async function cw(t){const e=Rr(t),r=df(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mS;for(;CW(e);)try{const a=await aW(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,EW(e,a)}catch(a){await X2(e,a)}YU(e)&&JU(e)}function CW(t){return Lh(t)&&t.Ta.length<10}function EW(t,e){t.Ta.push(e);const r=df(t);r.O_()&&r.X_&&r.ea(e.mutations)}function YU(t){return Lh(t)&&!df(t).x_()&&t.Ta.length>0}function JU(t){df(t).start()}async function _W(t){df(t).ra()}async function SW(t){const e=df(t);for(const r of t.Ta)e.ea(r.mutations)}async function TW(t,e,r){const n=t.Ta.shift(),a=wS.from(n,e,r);await XU(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await cw(t)}async function BW(t,e){e&&df(t).X_&&await async function(n,a){if(function(i){return cK(i)&&i!==ht.ABORTED}(a.code)){const s=n.Ta.shift();df(n).B_(),await XU(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await cw(n)}}(t,e),YU(t)&&JU(t)}async function t3(t,e){const r=Rr(t);r.asyncQueue.verifyOperationInProgress(),Zt(Ch,"RemoteStore received new credentials");const n=Lh(r);r.Ea.add(3),await jx(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await lw(r)}async function NW(t,e){const r=Rr(t);e?(r.Ea.delete(2),await lw(r)):e||(r.Ea.add(2),await jx(r),r.Ra.set("Unknown"))}function Gm(t){return t.ma||(t.ma=function(r,n,a){const s=Rr(r);return s.sa(),new fW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:vW.bind(null,t),t_:yW.bind(null,t),r_:wW.bind(null,t),H_:bW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),IS(t)?kS(t):t.Ra.set("Unknown")):(await t.ma.stop(),$U(t))})),t.ma}function df(t){return t.fa||(t.fa=function(r,n,a){const s=Rr(r);return s.sa(),new hW(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_W.bind(null,t),r_:BW.bind(null,t),ta:SW.bind(null,t),na:TW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await cw(t)):(await t.fa.stop(),t.Ta.length>0&&(Zt(Ch,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new EA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,o=new FS(e,r,i,a,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DS(t,e){if(IA("AsyncQueue",`${e}: ${t}`),Vm(t))return new Vt(ht.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{static emptySet(e){return new rm(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ur.comparator(r.key,n.key):(r,n)=>ur.comparator(r.key,n.key),this.keyedMap=og(),this.sortedSet=new ka(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof rm)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new rm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.ga=new ka(ur.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):_r(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Nm{constructor(e,r,n,a,s,i,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Nm(e,r,rm.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class IW{constructor(){this.queries=n3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Rr(r),s=a.queries;a.queries=n3(),s.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Vt(ht.ABORTED,"Firestore shutting down"))}}function n3(){return new Rh(t=>vU(t),tw)}async function RS(t,e){const r=Rr(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new kW,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=DS(i,`Initialization of query '${j0(e.query)}' failed`);return void e.onError(o)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&US(r)}async function LS(t,e){const r=Rr(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(e);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function FW(t,e){const r=Rr(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&US(r)}function DW(t,e,r){const n=Rr(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function US(t){t.Ca.forEach(e=>{e.next()})}var b_,a3;(a3=b_||(b_={})).Ma="default",a3.Cache="cache";class MS{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Nm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Nm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==b_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.key=e}}class e8{constructor(e){this.key=e}}class RW{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dn(),this.mutatedKeys=dn(),this.eu=yU(e),this.tu=new rm(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new r3,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const l=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const m=a.get(d),g=rw(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;m&&g?m.data.isEqual(g.data)?b!==y&&(n.track({type:3,doc:g}),E=!0):this.su(m,g)||(n.track({type:2,doc:g}),E=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),E=!0):m&&!g&&(n.track({type:1,doc:m}),E=!0,(l||u)&&(o=!0)),E&&(g?(i=i.add(g),s=y?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _r(20277,{Rt:E})}};return y(g)-y(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],l=this.Xa.size===0&&this.current&&!a?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Nm(this.query,e.tu,s,i,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new e8(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new ZU(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=dn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Nm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const PS="SyncEngine";class LW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class UW{constructor(e){this.key=e,this.hu=!1}}class MW{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Rh(o=>vU(o),tw),this.Iu=new Map,this.Eu=new Set,this.du=new ka(ur.comparator),this.Au=new Map,this.Ru=new ES,this.Vu={},this.mu=new Map,this.fu=Bm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PW(t,e,r=!0){const n=i8(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await t8(n,e,r,!0),a}async function jW(t,e){const r=i8(t);await t8(r,e,!0,!1)}async function t8(t,e,r,n){const a=await sW(t.localStore,Su(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await OW(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&KU(t.remoteStore,a),o}async function OW(t,e,r,n,a){t.pu=(h,m,g)=>async function(y,E,B,k){let F=E.view.ru(B);F.Cs&&(F=await Xk(y.localStore,E.query,!1).then(({documents:C})=>E.view.ru(C,F)));const U=k&&k.targetChanges.get(E.targetId),P=k&&k.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(F,y.isPrimaryClient,U,P);return i3(y,E.targetId,D.au),D.snapshot}(t,h,m,g);const s=await Xk(t.localStore,e,!0),i=new RW(e,s.Qs),o=i.ru(s.documents),l=Px.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(o,t.isPrimaryClient,l);i3(t,r,u.au);const d=new LW(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function QW(t,e,r){const n=Rr(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!tw(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await y_(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&BS(n.remoteStore,a.targetId),C_(n,a.targetId)}).catch(Hm)):(C_(n,a.targetId),await y_(n.localStore,a.targetId,!0))}async function HW(t,e){const r=Rr(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),BS(r.remoteStore,n.targetId))}async function VW(t,e,r){const n=XW(t);try{const a=await function(i,o){const l=Rr(i),u=Br.now(),d=o.reduce((g,b)=>g.add(b.key),dn());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=FA(),y=dn();return l.Ns.getEntries(g,d).next(E=>{b=E,b.forEach((B,k)=>{k.isValidDocument()||(y=y.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(E=>{h=E;const B=[];for(const k of o){const F=aK(k,h.get(k.key).overlayedDocument);F!=null&&B.push(new Cf(k.key,F,AU(F.value.mapValue),ro.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,B,o)}).next(E=>{m=E;const B=E.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,E.batchId,B)})}).then(()=>({batchId:m.batchId,changes:bU(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new ka(An)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await Ox(n,a.changes),await cw(n.remoteStore)}catch(a){const s=DS(a,"Failed to persist write");r.reject(s)}}async function r8(t,e){const r=Rr(t);try{const n=await rW(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(Un(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?Un(i.hu,14607):a.removedDocuments.size>0&&(Un(i.hu,42227),i.hu=!1))}),await Ox(r,n,e)}catch(n){await Hm(n)}}function s3(t,e,r){const n=Rr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(i,o){const l=Rr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&US(l)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function zW(t,e,r){const n=Rr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let i=new ka(ur.comparator);i=i.insert(s,Pi.newNoDocument(s,Fr.min()));const o=dn().add(s),l=new iw(Fr.min(),new Map,new ka(An),i,o);await r8(n,l),n.du=n.du.remove(s),n.Au.delete(e),jS(n)}else await y_(n.localStore,e,!1).then(()=>C_(n,e,r)).catch(Hm)}async function GW(t,e){const r=Rr(t),n=e.batch.batchId;try{const a=await tW(r.localStore,e);a8(r,n,null),n8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ox(r,a)}catch(a){await Hm(a)}}async function qW(t,e,r){const n=Rr(t);try{const a=await function(i,o){const l=Rr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Un(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,e);a8(n,e,r),n8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ox(n,a)}catch(a){await Hm(a)}}function n8(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function a8(t,e,r){const n=Rr(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function C_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||s8(t,n)})}function s8(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(BS(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),jS(t))}function i3(t,e,r){for(const n of r)n instanceof ZU?(t.Ru.addReference(n.key,e),KW(t,n)):n instanceof e8?(Zt(PS,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||s8(t,n.key)):_r(19791,{wu:n})}function KW(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Zt(PS,"New document in limbo: "+r),t.Eu.add(n),jS(t))}function jS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ur(la.fromString(e)),n=t.fu.next();t.Au.set(n,new UW(r)),t.du=t.du.insert(r,n),KU(t.remoteStore,new Hd(Su(ew(r.path)),n,"TargetPurposeLimboResolution",Yy.ce))}}async function Ox(t,e,r){const n=Rr(t),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){a.push(u);const h=SS.As(l.targetId,u);s.push(h)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(l,u){const d=Rr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>bt.forEach(u,m=>bt.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>bt.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Vm(h))throw h;Zt(TS,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,y)}}}(n.localStore,s))}async function WW(t,e){const r=Rr(t);if(!r.currentUser.isEqual(e)){Zt(PS,"User change. New user:",e.toKey());const n=await VU(r.localStore,e);r.currentUser=e,function(s,i){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new Vt(ht.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ox(r,n.Ls)}}function $W(t,e){const r=Rr(t),n=r.Au.get(e);if(n&&n.hu)return dn().add(n.key);{let a=dn();const s=r.Iu.get(e);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function i8(t){const e=Rr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$W.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zW.bind(null,e),e.Pu.H_=FW.bind(null,e.eventManager),e.Pu.yu=DW.bind(null,e.eventManager),e}function XW(t){const e=Rr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qW.bind(null,e),e}class Y2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ow(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return eW(this.persistence,new YK,e.initialUser,this.serializer)}Cu(e){return new HU(_S.mi,this.serializer)}Du(e){return new oW}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Y2.provider={build:()=>new Y2};class YW extends Y2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Un(this.persistence.referenceDelegate instanceof $2,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new UK(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new HU(n=>$2.mi(n,r),this.serializer)}}class E_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>s3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=WW.bind(null,this.syncEngine),await NW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IW}()}createDatastore(e){const r=ow(e.databaseInfo.databaseId),n=function(s){return new dW(s)}(e.databaseInfo);return function(s,i,o,l){return new pW(s,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,o){return new xW(n,a,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>s3(this.syncEngine,r,0),function(){return Zk.v()?new Zk:new lW}())}createSyncEngine(e,r){return function(a,s,i,o,l,u,d){const h=new MW(a,s,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=Rr(a);Zt(Ch,"RemoteStore shutting down."),s.Ea.add(5),await jx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}E_.provider={build:()=>new E_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):IA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="FirestoreClient";class JW{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ri.UNAUTHENTICATED,this.clientId=hS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Zt(ff,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Zt(ff,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new EA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=DS(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function IC(t,e){t.asyncQueue.verifyOperationInProgress(),Zt(ff,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await VU(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await ZW(t);Zt(ff,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>t3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>t3(e.remoteStore,a)),t._onlineComponents=e}async function ZW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Zt(ff,"Using user provided OfflineComponentProvider");try{await IC(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ht.FAILED_PRECONDITION||a.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Cm("Error using user provided cache. Falling back to memory cache: "+r),await IC(t,new Y2)}}else Zt(ff,"Using default OfflineComponentProvider"),await IC(t,new YW(void 0));return t._offlineComponents}async function o8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Zt(ff,"Using user provided OnlineComponentProvider"),await o3(t,t._uninitializedComponentsProvider._online)):(Zt(ff,"Using default OnlineComponentProvider"),await o3(t,new E_))),t._onlineComponents}function e$(t){return o8(t).then(e=>e.syncEngine)}async function J2(t){const e=await o8(t),r=e.eventManager;return r.onListen=PW.bind(null,e.syncEngine),r.onUnlisten=QW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=jW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=HW.bind(null,e.syncEngine),r}function t$(t,e,r={}){const n=new EA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new OS({next:m=>{d.Nu(),i.enqueueAndForget(()=>LS(s,h));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new Vt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new Vt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new MS(ew(o.path),d,{includeMetadataChanges:!0,qa:!0});return RS(s,h)}(await J2(t),t.asyncQueue,e,r,n)),n.promise}function r$(t,e,r={}){const n=new EA;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,l,u){const d=new OS({next:m=>{d.Nu(),i.enqueueAndForget(()=>LS(s,h)),m.fromCache&&l.source==="server"?u.reject(new Vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new MS(o,d,{includeMetadataChanges:!0,qa:!0});return RS(s,h)}(await J2(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="firestore.googleapis.com",c3=!0;class u3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c8,this.ssl=c3}else this.host=e.host,this.ssl=e.ssl??c3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RK)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l8(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uw{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new iq;switch(n.type){case"firstParty":return new uq(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=l3.get(r);n&&(Zt("ComponentProvider","Removing Datastore"),l3.delete(r),n.terminate())}(this),Promise.resolve()}}function n$(t,e,r,n={}){var u;t=to(t,uw);const a=Pm(e),s=t._getSettings(),i={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;a&&(sL(`https://${o}`),iL("Firestore",!0)),s.host!==c8&&s.host!==o&&Cm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:a,emulatorOptions:n};if(!of(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Ri.MOCK_USER;else{d=pH(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new Vt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ri(m)}t._authCredentials=new oq(new ZL(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new OA(this.firestore,e,this._query)}}class Ha{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ef(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ha(this.firestore,e,this._key)}toJSON(){return{type:Ha._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Ux(r,Ha._jsonSchema))return new Ha(e,n||null,new ur(la.fromString(r.referencePath)))}}Ha._jsonSchemaVersion="firestore/documentReference/1.0",Ha._jsonSchema={type:Es("string",Ha._jsonSchemaVersion),referencePath:Es("string")};class ef extends OA{constructor(e,r,n){super(e,r,ew(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ha(this.firestore,null,new ur(e))}withConverter(e){return new ef(this.firestore,e,this._path)}}function Kt(t,e,...r){if(t=ls(t),eU("collection","path",e),t instanceof uw){const n=la.fromString(e,...r);return Ck(n),new ef(t,null,n)}{if(!(t instanceof Ha||t instanceof ef))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(la.fromString(e,...r));return Ck(n),new ef(t.firestore,null,n)}}function Lr(t,e,...r){if(t=ls(t),arguments.length===1&&(e=hS.newId()),eU("doc","path",e),t instanceof uw){const n=la.fromString(e,...r);return bk(n),new Ha(t,null,new ur(n))}{if(!(t instanceof Ha||t instanceof ef))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(la.fromString(e,...r));return bk(n),new Ha(t.firestore,t instanceof ef?t.converter:null,new ur(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="AsyncQueue";class d3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GU(this,"async_queue_retry"),this._c=()=>{const n=kC();n&&Zt(A3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=kC();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=kC();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new EA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vm(e))throw e;Zt(A3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,IA("INTERNAL UNHANDLED ERROR: ",f3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=FS.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&_r(47125,{Pc:f3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function f3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Du extends uw{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new d3,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d3(e),this._firestoreClient=void 0,await e}}}function u8(t,e){const r=typeof t=="object"?t:cL(),n=typeof t=="string"?t:H2,a=nS(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=hH("firestore");s&&n$(a,...s)}return a}function Qx(t){if(t._terminated)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||a$(t),t._firestoreClient}function a$(t){var n,a,s;const e=t._freezeSettings(),r=function(o,l,u,d){return new Bq(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,l8(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new JW(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(hi.fromBase64String(e))}catch(r){throw new Vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Pl(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ux(e,Pl._jsonSchema))return Pl.fromBase64String(e.bytes)}}Pl._jsonSchemaVersion="firestore/bytes/1.0",Pl._jsonSchema={type:Es("string",Pl._jsonSchemaVersion),bytes:Es("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bu._jsonSchemaVersion}}static fromJSON(e){if(Ux(e,Bu._jsonSchema))return new Bu(e.latitude,e.longitude)}}Bu._jsonSchemaVersion="firestore/geoPoint/1.0",Bu._jsonSchema={type:Es("string",Bu._jsonSchemaVersion),latitude:Es("number"),longitude:Es("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ux(e,Nu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Nu(e.vectorValues);throw new Vt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nu._jsonSchemaVersion="firestore/vectorValue/1.0",Nu._jsonSchema={type:Es("string",Nu._jsonSchemaVersion),vectorValues:Es("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=/^__.*__$/;class i${constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Cf(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mx(e,this.data,r,this.fieldTransforms)}}class A8{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Cf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function d8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _r(40011,{Ac:t})}}class dw{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Z2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d8(this.Ac)&&s$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class o${constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||ow(e)}Cc(e,r,n,a=!1){return new dw({Ac:e,methodName:r,Dc:n,path:Ai.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vx(t){const e=t._freezeSettings(),r=ow(t._databaseId);return new o$(t._databaseId,!!e.ignoreUndefinedProperties,r)}function QS(t,e,r,n,a,s={}){const i=t.Cc(s.merge||s.mergeFields?2:0,e,r,a);VS("Data must be an object, but it was:",i,n);const o=m8(n,i);let l,u;if(s.merge)l=new el(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=__(e,h,r);if(!i.contains(m))throw new Vt(ht.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);g8(d,m)||d.push(m)}l=new el(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new i$(new Eo(o),l,u)}class fw extends Aw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function l$(t,e,r){return new dw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HS extends Aw{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=l$(this,e,!0),n=this.vc.map(s=>qm(s,r)),a=new Tm(n);return new eK(e.path,a)}isEqual(e){return e instanceof HS&&of(this.vc,e.vc)}}function f8(t,e,r,n){const a=t.Cc(1,e,r);VS("Data must be an object, but it was:",a,n);const s=[],i=Eo.empty();bf(n,(l,u)=>{const d=zS(e,l,r);u=ls(u);const h=a.yc(d);if(u instanceof fw)s.push(d);else{const m=qm(u,h);m!=null&&(s.push(d),i.set(d,m))}});const o=new el(s);return new A8(i,o,a.fieldTransforms)}function h8(t,e,r,n,a,s){const i=t.Cc(1,e,r),o=[__(e,n,r)],l=[a];if(s.length%2!=0)throw new Vt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(__(e,s[m])),l.push(s[m+1]);const u=[],d=Eo.empty();for(let m=o.length-1;m>=0;--m)if(!g8(u,o[m])){const g=o[m];let b=l[m];b=ls(b);const y=i.yc(g);if(b instanceof fw)u.push(g);else{const E=qm(b,y);E!=null&&(u.push(g),d.set(g,E))}}const h=new el(u);return new A8(d,h,i.fieldTransforms)}function c$(t,e,r,n=!1){return qm(r,t.Cc(n?4:3,e))}function qm(t,e){if(p8(t=ls(t)))return VS("Unsupported field value:",e,t),m8(t,e);if(t instanceof Aw)return function(n,a){if(!d8(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let l=qm(o,a.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=ls(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Yq(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Br.fromDate(n);return{timestampValue:W2(a.serializer,s)}}if(n instanceof Br){const s=new Br(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:W2(a.serializer,s)}}if(n instanceof Bu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pl)return{bytesValue:RU(a.serializer,n._byteString)};if(n instanceof Ha){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CS(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Nu)return function(i,o){return{mapValue:{fields:{[cU]:{stringValue:uU},[V2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return yS(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${Xy(n)}`)}(t,e)}function m8(t,e){const r={};return nU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bf(t,(n,a)=>{const s=qm(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function p8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Br||t instanceof Bu||t instanceof Pl||t instanceof Ha||t instanceof Aw||t instanceof Nu)}function VS(t,e,r){if(!p8(r)||!tU(r)){const n=Xy(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function __(t,e,r){if((e=ls(e))instanceof Hx)return e._internalPath;if(typeof e=="string")return zS(t,e);throw Z2("Field path arguments must be of type string or ",t,!1,void 0,r)}const u$=new RegExp("[~\\*/\\[\\]]");function zS(t,e,r){if(e.search(u$)>=0)throw Z2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Hx(...e.split("."))._internalPath}catch{throw Z2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Z2(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${n}`),i&&(l+=` in document ${a}`),l+=")"),new Vt(ht.INVALID_ARGUMENT,o+t+l)}function g8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ha(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(hw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class A$ extends x8{data(){return super.data()}}function hw(t,e){return typeof e=="string"?zS(t,e):e instanceof Hx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GS{}class qS extends GS{}function fr(t,e,...r){let n=[];e instanceof GS&&n.push(e),n=n.concat(r),function(s){const i=s.filter(l=>l instanceof KS).length,o=s.filter(l=>l instanceof mw).length;if(i>1||i>0&&o>0)throw new Vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class mw extends qS{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new mw(e,r,n)}_apply(e){const r=this._parse(e);return y8(e._query,r),new OA(e.firestore,e.converter,m_(e._query,r))}_parse(e){const r=Vx(e.firestore);return function(s,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){p3(h,d);const b=[];for(const y of h)b.push(m3(l,s,y));m={arrayValue:{values:b}}}else m=m3(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||p3(h,d),m=c$(o,i,h,d==="in"||d==="not-in");return Cs.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ta(t,e,r){const n=e,a=hw("where",t);return mw._create(a,n,r)}class KS extends GS{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new KS(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Fc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const l of o)y8(i,l),i=m_(i,l)}(e._query,r),new OA(e.firestore,e.converter,m_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class WS extends qS{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new WS(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rx(s,i)}(e._query,this._field,this._direction);return new OA(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new zm(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Kn(t,e="asc"){const r=e,n=hw("orderBy",t);return WS._create(n,r)}class $S extends qS{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new $S(e,r,n)}_apply(e){return new OA(e.firestore,e.converter,G2(e._query,this._limit,this._limitType))}}function pw(t){return gq("limit",t),$S._create("limit",t,"F")}function m3(t,e,r){if(typeof(r=ls(r))=="string"){if(r==="")throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xU(e)&&r.indexOf("/")!==-1)throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(la.fromString(r));if(!ur.isDocumentKey(n))throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ik(t,new ur(n))}if(r instanceof Ha)return Ik(t,r._key);throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xy(r)}.`)}function p3(t,e){if(!Array.isArray(t)||t.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function y8(t,e){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class d${convertValue(e,r="none"){switch(Af(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(uf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw _r(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return bf(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[V2].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>rs(i.doubleValue));return new Nu(r)}convertGeoPoint(e){return new Bu(rs(e.latitude),rs(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Zy(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Zg(e));default:return null}}convertTimestamp(e){const r=cf(e);return new Br(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=la.fromString(e);Un(OU(n),9688,{name:e});const a=new ex(n.get(1),n.get(3)),s=new ur(n.popFirst(5));return a.isEqual(r)||IA(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class cg{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uh extends x8{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new g2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(hw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=uh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}uh._jsonSchemaVersion="firestore/documentSnapshot/1.0",uh._jsonSchema={type:Es("string",uh._jsonSchemaVersion),bundleSource:Es("string","DocumentSnapshot"),bundleName:Es("string"),bundle:Es("string")};class g2 extends uh{data(e={}){return super.data(e)}}class Ah{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new cg(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new g2(this._firestore,this._userDataWriter,n.key,n,new cg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const l=new g2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new cg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new g2(a._firestore,a._userDataWriter,o.doc.key,o.doc,new cg(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:f$(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Vt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ah._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _r(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){t=to(t,Ha);const e=to(t.firestore,Du);return t$(Qx(e),t._key).then(r=>w8(e,t,r))}Ah._jsonSchemaVersion="firestore/querySnapshot/1.0",Ah._jsonSchema={type:Es("string",Ah._jsonSchemaVersion),bundleSource:Es("string","QuerySnapshot"),bundleName:Es("string"),bundle:Es("string")};class YS extends d${constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ha(this.firestore,null,r)}}function Ys(t){t=to(t,OA);const e=to(t.firestore,Du),r=Qx(e),n=new YS(e);return v8(t._query),r$(r,t._query).then(a=>new Ah(e,n,t,a))}function il(t,e,r){t=to(t,Ha);const n=to(t.firestore,Du),a=XS(t.converter,e,r);return zx(n,[QS(Vx(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ro.none())])}function Km(t,e,r,...n){t=to(t,Ha);const a=to(t.firestore,Du),s=Vx(a);let i;return i=typeof(e=ls(e))=="string"||e instanceof Hx?h8(s,"updateDoc",t._key,e,r,n):f8(s,"updateDoc",t._key,e),zx(a,[i.toMutation(t._key,ro.exists(!0))])}function No(t){return zx(to(t.firestore,Du),[new sw(t._key,ro.none())])}function Js(t,e){const r=to(t.firestore,Du),n=Lr(t),a=XS(t.converter,e);return zx(r,[QS(Vx(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ro.exists(!1))]).then(()=>n)}function Yr(t,...e){var l,u,d;t=ls(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||h3(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(h3(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,i,o;if(t instanceof Ha)i=to(t.firestore,Du),o=ew(t._key.path),s={next:h=>{e[n]&&e[n](w8(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=to(t,OA);i=to(h.firestore,Du),o=h._query;const m=new YS(i);s={next:g=>{e[n]&&e[n](new Ah(i,m,h,g))},error:e[n+1],complete:e[n+2]},v8(t._query)}return function(m,g,b,y){const E=new OS(y),B=new MS(g,E,b);return m.asyncQueue.enqueueAndForget(async()=>RS(await J2(m),B)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>LS(await J2(m),B))}}(Qx(i),o,a,s)}function zx(t,e){return function(n,a){const s=new EA;return n.asyncQueue.enqueueAndForget(async()=>VW(await e$(n),a,s)),s.promise}(Qx(t),e)}function w8(t,e,r){const n=r.docs.get(e._key),a=new YS(t);return new uh(t,a,e._key,n,new cg(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Vx(e)}set(e,r,n){this._verifyNotCommitted();const a=FC(e,this._firestore),s=XS(a.converter,r,n),i=QS(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,ro.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=FC(e,this._firestore);let i;return i=typeof(r=ls(r))=="string"||r instanceof Hx?h8(this._dataReader,"WriteBatch.update",s._key,r,n,a):f8(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,ro.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=FC(e,this._firestore);return this._mutations=this._mutations.concat(new sw(r._key,ro.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function FC(t,e){if((t=ls(t)).firestore!==e)throw new Vt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function m$(...t){return new HS("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){return Qx(t=to(t,Du)),new h$(t,e=>zx(t,e))}(function(e,r=!0){(function(a){Qm=a})(jm),wm(new yh("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Du(new lq(n.getProvider("auth-internal")),new Aq(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ex(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Yd(xk,vk,e),Yd(xk,vk,"esm2020")})();const p$={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},C8=aS(p$),Vp=GL(C8),nn=u8(C8);var $t=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))($t||{}),$r=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))($r||{}),th=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(th||{});const _s="w-6 h-6",gw="w-24 h-24",JS=()=>c.jsxs("svg",{className:"w-32 h-32 text-slate-700 dark:text-slate-300",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M9 14V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("path",{d:"M12 14V8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),g$=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),x$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),v$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ug=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Ag=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),E8=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),y$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),w$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),b$=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),C$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),E$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),g3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),uv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),DC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Av=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),RC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),x3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),_$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),S$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),T$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),B$=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),v3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),N$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),LC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),k$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:_s,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),I$=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:_s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),y3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:_s,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),F$=[{id:$t.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(y$,{})},{id:$t.PROFESORADO,label:"Profesorado",icon:c.jsx(w$,{})},{id:$t.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(b$,{})},{id:$t.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(C$,{})}],D$={[$t.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(E$,{})},{name:"Administración",icon:c.jsx(B$,{})},{name:"Seguimiento Curricular",icon:c.jsx(I$,{})},{name:"Acompañamiento docente",icon:c.jsx(T$,{})},{name:"Análisis Taxonómico",icon:c.jsx(y3,{})},{name:"Interdisciplinario",icon:c.jsx(LC,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(g3,{})},{name:"Crear horarios",icon:c.jsx(DC,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(Av,{})},{name:"Inclusión",icon:c.jsx(v3,{})},{name:"Calendario Académico",icon:c.jsx(uv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(RC,{})}],[$t.PROFESORADO]:[{name:"Planificación",icon:c.jsx(x3,{})},{name:"Mis Acompañamientos",icon:c.jsx(N$,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(_$,{})},{name:"Análisis Taxonómico",icon:c.jsx(y3,{})},{name:"Interdisciplinario",icon:c.jsx(LC,{})},{name:"Inclusión",icon:c.jsx(v3,{})},{name:"Actividades Remotas",icon:c.jsx(S$,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(RC,{})},{name:"Evaluaciones Formativas",icon:c.jsx(Av,{})},{name:"Calendario Académico",icon:c.jsx(uv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(g3,{})}],[$t.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(Av,{})},{name:"Asistencia Dual",icon:c.jsx(DC,{})},{name:"Pañol",icon:c.jsx(k$,{})},{name:"Calendario Académico",icon:c.jsx(uv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})},{name:"Generador de Actas",icon:c.jsx(RC,{})}],[$t.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(x3,{})},{name:"Evaluación Formativa",icon:c.jsx(Av,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(LC,{})},{name:"Asistencia a Empresa",icon:c.jsx(DC,{})},{name:"Calendario Académico",icon:c.jsx(uv,{})},{name:"Muro de Anuncios",icon:c.jsx(ug,{})},{name:"Mensajería Interna",icon:c.jsx(Ag,{})}]},w3=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],zp=["Pendiente","En Proceso","Cumplida"],ey=["1º Medio","2º Medio","3º Medio","4º Medio"],nl=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],is=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],S_=["Juan Pérez","María González","Carlos Soto","Ana Fernández","Luis Rojas","Laura Muñoz","Pedro Castillo","Sofía Reyes","Diego Flores","Valentina Castro"],x2=["Lunes","Martes","Miércoles","Jueves","Viernes"],T_=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],R$={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},Od={[$r.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[$r.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[$r.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[$r.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},L$=Object.values(th),UC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],MC=["Vinculado","Desvinculado","En proceso","Empresa"],nm=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],U$=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],ty=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Ig=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],_8=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],dv=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],b3=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,a]=J.useState(""),[s,i]=J.useState(""),[o,l]=J.useState("login"),u=m=>{m.preventDefault(),t(n,s)},d=m=>{m.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>a(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(JS,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},PC=({trigger:t,children:e,onOpen:r})=>{const[n,a]=J.useState(!1),s=J.useRef(null),i=()=>{const l=!n;a(l),l&&r&&r()},o=l=>{s.current&&!s.current.contains(l.target)&&a(!1)};return J.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("div",{onClick:i,children:t}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:e})]})},C3="usuariosLiceo",M$=({user:t,onClose:e,onSave:r})=>{const[n,a]=J.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const u=localStorage.getItem(C3);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(C3,JSON.stringify(d)),r(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},E3="usuariosLiceo",P$=({user:t,onClose:e,onSave:r})=>{const[n,a]=J.useState(""),[s,i]=J.useState(""),[o,l]=J.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==s){l("Las contraseñas no coinciden.");return}const h={...t,password:n};try{const m=localStorage.getItem(E3);let g=m?JSON.parse(m):[];const b=g.findIndex(y=>y.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(E3,JSON.stringify(g)),r(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},_3="anunciosMuro",S3="mensajesInternos",T3="lir-read-status",j$=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},O$=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:a,toggleSidebar:s,unreadMessagesCount:i,refreshUnreadCount:o})=>{const[l,u]=J.useState([]),[d,h]=J.useState([]),[m,g]=J.useState(!1),[b,y]=J.useState(!1),E=J.useCallback(()=>{try{const U=localStorage.getItem(`${T3}-${t.id}`);return U?JSON.parse(U):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),B=J.useCallback(U=>{try{localStorage.setItem(`${T3}-${t.id}`,JSON.stringify(U))}catch(P){console.error("Failed to set read status:",P)}},[t.id]);J.useEffect(()=>{const U=JSON.parse(localStorage.getItem(_3)||"[]"),P=E();u(U.filter(C=>!P.announcements.includes(C.id)));const D=JSON.parse(localStorage.getItem(S3)||"[]");h(D.filter(C=>C.para===t.email).sort((C,S)=>new Date(S.fecha).getTime()-new Date(C.fecha).getTime()).slice(0,5))},[t.id,E,i]);const k=()=>{const U=E(),P=JSON.parse(localStorage.getItem(_3)||"[]").map(D=>D.id);U.announcements=P,B(U),u([])},F=()=>{const U=E(),D=JSON.parse(localStorage.getItem(S3)||"[]").filter(C=>C.para===t.email).map(C=>C.id);U.messages=[...new Set([...U.messages,...D])],B(U),o()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:s,children:c.jsx(x$,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(v$,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(PC,{onOpen:k,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(ug,{}),l.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:l.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[l.slice(0,3).map(U=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:U.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.mensaje})]},U.id)),l.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(PC,{onOpen:F,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Ag,{}),i>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:i})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[d.slice(0,3).map(U=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",U.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:U.asunto})]},U.id)),d.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(PC,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(j$,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>y(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),t.email==="subdi@lir.cl"&&c.jsx("li",{children:c.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cambiar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),m&&c.jsx(M$,{user:t,onClose:()=>g(!1),onSave:n}),b&&c.jsx(P$,{user:t,onClose:()=>y(!1),onSave:n})]})};var $f={};const Q$={apiKey:$f.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:$f.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:$f.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:$f.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:$f.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:$f.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:$f.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},S8=KN().length===0?aS(Q$):KN()[0],Gt=u8(S8);GL(S8);const Gx="reemplazos_docentes",H$="usuarios",ZS=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((s=(a=e.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||e.fechaActualizacion}},V$=t=>{const e=t.data();return{id:t.id,...e}},z$=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Br.fromDate(new Date),fechaActualizacion:Br.fromDate(new Date)};return(await Js(Kt(Gt,Gx),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},G$=async(t,e)=>{try{const r=Lr(Gt,Gx,t),n=await km(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await No(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},q$=(t,e,r=50)=>{try{const n=fr(Kt(Gt,Gx),ta("userId","==",t),Kn("diaAusencia","desc"),pw(r));return Yr(n,a=>{const s=a.docs.map(ZS);e(s)},a=>{console.error("Error en suscripción a reemplazos:",a),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},K$=t=>{try{const e=fr(Kt(Gt,H$),ta("profile","==",$t.PROFESORADO));return Yr(e,n=>{const a=n.docs.map(V$);t(a)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},W$=async t=>{try{const e=fr(Kt(Gt,Gx),ta("userId","==",t)),n=(await Ys(e)).docs.map(ZS),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},$$=async(t,e)=>{try{if(!e.trim())return[];const r=fr(Kt(Gt,Gx),ta("userId","==",t),Kn("diaAusencia","desc"),pw(100)),a=(await Ys(r)).docs.map(ZS),s=e.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},X$=Array.from({length:12},(t,e)=>e+1),B3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},Y$=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?q$(t,h=>{r(h),a(!1)}):void 0,[t]);const o=J.useCallback(async d=>{try{return i(null),await z$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=J.useCallback(async d=>{try{i(null),await G$(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=J.useCallback(async d=>{try{return i(null),d.trim()?await $$(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:s,save:o,remove:l,search:u}},J$=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!0);J.useEffect(()=>K$(i=>{e(i),n(!1)}),[]);const a=J.useMemo(()=>t.map(s=>s.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:a,loading:r}},Z$=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:X$.map(a=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:a,checked:t.includes(a),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:a})]},a))})]}),eX=({userId:t})=>{const[e,r]=J.useState(null),[n,a]=J.useState(!1),s=J.useCallback(async()=>{try{a(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await W$(t);r(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{a(!1)}},[t]);return J.useEffect(()=>{t&&s()},[t,s]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},tX=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=Y$(e),{profesorNames:l,loading:u}=J$(),[d,h]=J.useState(B3),[m,g]=J.useState(""),[b,y]=J.useState([]),[E,B]=J.useState(null),[k,F]=J.useState(!1),[U,P]=J.useState(!1);J.useEffect(()=>{(async()=>{if(!m.trim()){y(r);return}P(!0);try{const I=await s(m);y(I)}catch(I){console.error("Error en búsqueda:",I),y(r)}finally{P(!1)}})()},[r,m,s]);const D=J.useCallback(L=>{const{name:I,value:j}=L.target;h(z=>({...z,[I]:j}))},[]),C=J.useCallback(L=>{const I=parseInt(L.target.value,10);h(j=>{const z=j.bloquesAfectados,ne=z.includes(I)?z.filter(Z=>Z!==I):[...z,I].sort((Z,ee)=>Z-ee);return{...j,bloquesAfectados:ne}})},[]),S=J.useCallback(async L=>{L.preventDefault(),B(null),F(!0);const{docenteAusente:I,asignaturaAusente:j,curso:z,diaAusencia:ne,bloquesAfectados:Z,docenteReemplazante:ee,asignaturaReemplazante:ae}=d;if(!I||!j||!z||!ne||!ee||!ae||Z.length===0){B("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),F(!1);return}if(I===ee){B("El docente ausente y el reemplazante no pueden ser la misma persona."),F(!1);return}const G=new Date(ne),K=new Date;if(K.setHours(0,0,0,0),G<K&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){F(!1);return}try{const le=j.trim().toLowerCase()===ae.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",O={...d,resultado:le};await n(O),h(B3);const W=le==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",Y=document.createElement("div");Y.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Y.textContent=W,document.body.appendChild(Y),setTimeout(()=>{document.body.contains(Y)&&document.body.removeChild(Y)},3e3)}catch(le){console.error("Error al guardar reemplazo:",le),B("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{F(!1)}},[d,n]),N=J.useCallback(async L=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await a(L)}catch(I){console.error("Error al eliminar reemplazo:",I),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[a]),H="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(eX,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:D,className:H,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(L=>c.jsx("option",{value:L,children:L},L))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:D,className:H,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),nl.map(L=>c.jsx("option",{value:L,children:L},L))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:D,className:H,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),is.map(L=>c.jsx("option",{value:L,children:L},L))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:D,className:H,disabled:k,required:!0})]}),c.jsx(Z$,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:D,className:H,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(L=>c.jsx("option",{value:L,children:L},L))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:D,className:H,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),nl.map(L=>c.jsx("option",{value:L,children:L},L))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(E||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:E||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:L=>g(L.target.value),className:`${H} md:w-1/2 pl-10`,disabled:U}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:U?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:U?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(L=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(L.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:L.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[L.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:L.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[L.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:L.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:L.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${L.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:L.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>N(L.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},L.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",b.length," registros"]})]})]})},rX=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=Kt(nn,"reemplazos"),r=fr(e,Kn("fecha","desc"));return Yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},nX=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=Kt(nn,"acompanamientos"),r=fr(e,Kn("fecha","desc"));return Yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},aX=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=Kt(nn,"calendar_events"),r=fr(e,Kn("date","asc"));return Yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},hu=({title:t,value:e,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),Xf=({title:t,data:e,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=J.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=J.useMemo(()=>Math.max(...s,1),[s]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},sX=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(!0),[l,u]=J.useState(null);return J.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const g=rX(E=>{e(E),m()}),b=nX(E=>{n(E),m()}),y=aX(E=>{s(E),m()});return()=>{g(),b(),y()}}catch(g){console.error("❌ Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:a,loading:i,error:l}},iX=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:a,error:s}=sX(),[i,o]=J.useState(Ig);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:t==null?void 0:t.profile}),J.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):Ig)}catch(g){console.error("Error al leer rúbrica personalizada",g),o(Ig)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=J.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(P=>P.resultado==="Hora realizada").length,y=g-b,E=`${(b/g*100).toFixed(1)}%`,B=(P,D)=>P.reduce((C,S)=>{const N=S[D];return typeof N=="string"&&(C[N]=(C[N]||0)+1),C},{}),k=B(e,"docenteAusente"),F=B(e,"docenteReemplazante"),U=B(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:y,tasaCobertura:E,inasistenciasPorDocente:Object.entries(k).map(([P,D])=>({label:P,value:D})),reemplazosPorDocente:Object.entries(F).map(([P,D])=>({label:P,value:D})),inasistenciasPorCurso:Object.entries(U).map(([P,D])=>({label:P,value:D})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:y}]}},[e]),u=J.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(D=>{D.criteria.forEach(C=>{b.set(C.name,D.domain)})});let y=0,E=0;const B={},k={};r.forEach(D=>{B[D.docente]||(B[D.docente]={total:0,count:0}),Object.entries(D.rubricaResultados).forEach(([C,S])=>{y+=S,E++,B[D.docente].total+=S,B[D.docente].count++;const N=b.get(C);N&&(k[N]||(k[N]={total:0,count:0}),k[N].total+=S,k[N].count++)})});const F=E>0?(y/E).toFixed(2):"N/A",U=Object.entries(B).map(([D,C])=>({label:D,value:C.count>0?(C.total/C.count).toFixed(2):0})),P=Object.entries(k).map(([D,C])=>({label:D,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:F,desempenoPorDocente:U,desempenoPorDominio:P}},[r,i]),d=J.useMemo(()=>{const g={[$r.EVALUACION]:0,[$r.ACTO]:0,[$r.ACTIVIDAD_FOCALIZADA]:0,[$r.SALIDA_PEDAGOGICA]:0};for(const y of n)g.hasOwnProperty(y.type)&&g[y.type]++;const b=Object.entries(g).map(([y,E])=>({label:Od[y].label,value:E}));return{totalEvaluaciones:g[$r.EVALUACION],totalActos:g[$r.ACTO],totalActividadesFocalizadas:g[$r.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[$r.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:a}),c.jsx(hu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),c.jsx(hu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),c.jsx(hu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Xf,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),c.jsx(Xf,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),c.jsx(Xf,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),c.jsx(Xf,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),c.jsx(hu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Xf,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a}),c.jsx(Xf,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:a})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(hu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),c.jsx(hu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(Xf,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var y,E;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",g.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=Od[g.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((E=Od[g.type])==null?void 0:E.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})},e4="horario_asignaciones",T8="horarios_generados",oX="usuarios",B8=t=>{const e=t.data();return{id:t.id,...e}},lX=t=>{const e=fr(Kt(Gt,e4));return Yr(e,n=>{const a=n.docs.map(s=>B8(s));t(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},cX=async t=>{try{return(await Js(Kt(Gt,e4),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},uX=async t=>{try{const e=Lr(Gt,e4,t);await No(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},N3=async t=>{try{const e=Lr(Gt,T8,"global");await il(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},AX=t=>{const e=Lr(Gt,T8,"global");return Yr(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},dX=t=>{const e=fr(Kt(Gt,oX),ta("profile","==",$t.PROFESORADO));return Yr(e,n=>{const a=n.docs.map(s=>B8(s));t(a)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},fX=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),is.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:x2.map(e=>c.jsxs(At.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+is.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),T_.map(({bloque:r,inicio:n,fin:a})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),is.map(s=>{var o,l;const i=(l=(o=t[s])==null?void 0:o[e])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),hX=()=>{const[t,e]=J.useState([]),[r,n]=J.useState({curso:"",asignatura:"",profesor:""}),[a,s]=J.useState([]),[i,o]=J.useState({}),[l,u]=J.useState(is[0]),[d,h]=J.useState(!1),[m,g]=J.useState(!0),[b,y]=J.useState(null),[E,B]=J.useState(null),[k,F]=J.useState(null),[U,P]=J.useState({asignatura:"",profesor:""}),[D,C]=J.useState("edicion"),[S,N]=J.useState("");J.useEffect(()=>{g(!0);const ae=lX(e),G=AX(o),K=dX(le=>{const O=le.map(W=>W.nombreCompleto).sort();s(O),g(!1)});return()=>{ae(),G(),K()}},[]);const H=async ae=>{if(ae.preventDefault(),y(null),!r.curso||!r.asignatura||!r.profesor){y("Todos los campos de la asignación son obligatorios.");return}try{await cX({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(G){y(G instanceof Error?G.message:"Error al guardar la asignación.")}},L=async ae=>{try{await uX(ae)}catch(G){y(G instanceof Error?G.message:"Error al eliminar la asignación.")}},I=async()=>{if(t.length===0){y("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),y(null),B(null);try{const G=new globalThis.GoogleGenerativeAI(""),K=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${x2.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(T_,null,2)}
                - Cursos del liceo: ${is.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(R$,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${S||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional antes o después. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,Y=(await(await G.getGenerativeModel({model:"gemini-pro"}).generateContent(K)).response).text(),te=JSON.parse(Y);await N3(te),B("¡Horario generado y guardado con éxito!")}catch(ae){console.error("Error al generar horario con IA:",ae),y("Ocurrió un error al contactar con la IA o al procesar la respuesta. Por favor, inténtelo de nuevo.")}finally{h(!1)}},j=(ae,G,K)=>{F({dia:ae,bloque:G}),P({asignatura:(K==null?void 0:K.asignatura)||"",profesor:(K==null?void 0:K.profesor)||""})},z=async()=>{if(!k)return;const{dia:ae,bloque:G}=k,K=JSON.parse(JSON.stringify(i));K[l]||(K[l]={}),K[l][ae]||(K[l][ae]={}),K[l][ae][G]={asignatura:U.asignatura||null,profesor:U.profesor||null};try{await N3(K),F(null)}catch(le){y(le instanceof Error?le.message:"Error al guardar la edición.")}},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=()=>{const ae=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),x2.map(G=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:G},G))]})}),c.jsx("tbody",{children:T_.map(({bloque:G,inicio:K,fin:le})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:G}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${K} - ${le}`})]}),x2.map(O=>{var te;const W=(k==null?void 0:k.dia)===O&&(k==null?void 0:k.bloque)===G,Y=(te=ae[O])==null?void 0:te[G];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!W&&j(O,G,Y),children:W?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:U.asignatura,onChange:ce=>P(de=>({...de,asignatura:ce.target.value})),className:ne+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:U.profesor,onChange:ce=>P(de=>({...de,profesor:ce.target.value})),className:ne+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>F(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:z,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Y!=null&&Y.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Y.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Y.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${O}-${G}`)})]},G))})]})})},ee=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:ae=>n(G=>({...G,curso:ae.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),is.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:ae=>n(G=>({...G,asignatura:ae.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),nl.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:ae=>n(G=>({...G,profesor:ae.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),a.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(ae=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ae.curso," - ",ae.asignatura," - ",c.jsx("strong",{children:ae.profesor})]}),c.jsx("button",{onClick:()=>L(ae.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},ae.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:S,onChange:ae=>N(ae.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:ne})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:I,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),b&&c.jsx("p",{className:"text-red-600",children:b}),E&&c.jsx("p",{className:"text-green-600",children:E})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:ae=>u(ae.target.value),className:ne+" md:w-1/3",children:is.map(ae=>c.jsx("option",{value:ae,children:ae},ae))})]}),Object.keys(i).length>0?Z():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>C("edicion"),className:`${D==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>C("global"),className:`${D==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),D==="edicion"?ee():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(fX,{horarios:i})]})]})},xw="acciones",mX=async()=>{try{const t=fr(Kt(nn,xw),Kn("fechaRegistro","desc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},pX=async t=>{try{return{id:(await Js(Kt(nn,xw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},k3=async(t,e)=>{try{const r=Lr(nn,xw,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},gX=async t=>{try{const e=Lr(nn,xw,t);await No(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},I3={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},xX={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},vX=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState(null),[i,o]=J.useState(I3),[l,u]=J.useState(null),[d,h]=J.useState(""),[m,g]=J.useState(""),[b,y]=J.useState(""),E=J.useCallback(async()=>{n(!0);try{const N=await mX();e(N),s(null)}catch(N){console.error("Error al cargar acciones desde Firestore",N),s("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{n(!1)}},[]);J.useEffect(()=>{E()},[E]);const B=J.useCallback(N=>{const{name:H,value:L}=N.target;o(I=>({...I,[H]:L}))},[]),k=J.useCallback(()=>{o(I3),u(null),s(null)},[]),F=J.useCallback(async N=>{N.preventDefault();const{fechaRegistro:H,responsable:L,area:I,descripcion:j,fechaCumplimiento:z,estado:ne}=i;if(!H||!L||!I||!j||!z){s("Todos los campos son obligatorios.");return}try{l?await k3(l,i):await pX(i),await E(),k()}catch(Z){console.error("Error al guardar acción:",Z),s("Error al guardar la acción en la nube.")}},[i,l,E,k]),U=J.useCallback(N=>{window.scrollTo({top:0,behavior:"smooth"}),u(N.id),o(N)},[]),P=J.useCallback(async N=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await gX(N),await E()}catch(H){console.error("Error al eliminar acción:",H),s("No se pudo eliminar la acción en la nube.")}},[E]),D=J.useCallback(async N=>{try{const H=t.find(L=>L.id===N);if(H){const I=(zp.indexOf(H.estado)+1)%zp.length,j=zp[I];await k3(N,{estado:j}),await E()}}catch(H){console.error("Error al cambiar estado:",H),s("No se pudo cambiar el estado de la acción en la nube.")}},[t,E]),C=J.useMemo(()=>t.filter(N=>{const H=d===""||N.responsable.toLowerCase().includes(d.toLowerCase())||N.descripcion.toLowerCase().includes(d.toLowerCase()),L=m===""||N.area===m,I=b===""||N.estado===b;return H&&L&&I}),[t,d,m,b]),S="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("form",{onSubmit:F,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:B,className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:B,placeholder:"Nombre del responsable",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:B,className:S,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),w3.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:B,rows:3,placeholder:"Detalle de la acción a realizar...",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:B,className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),c.jsx("select",{name:"estado",value:i.estado,onChange:B,className:S,children:zp.map(N=>c.jsx("option",{value:N,children:N},N))})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:N=>h(N.target.value),className:S+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:N=>g(N.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),w3.map(N=>c.jsx("option",{value:N,children:N},N))]}),c.jsxs("select",{value:b,onChange:N=>y(N.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),zp.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&C.length>0?C.map(N=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:N.responsable}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:N.area}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:N.descripcion}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{children:["Reg: ",N.fechaRegistro]}),c.jsxs("span",{className:"font-semibold",children:["Comp: ",N.fechaCumplimiento]})]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${xX[N.estado]}`,children:N.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>D(N.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),c.jsx("button",{onClick:()=>U(N),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>P(N.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},N.id)):!r&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yX,wX;function bX(){return{geminiUrl:yX,vertexUrl:wX}}function CX(t,e,r,n){var a,s;if(!(t!=null&&t.baseUrl)){const i=bX();return e?(a=i.vertexUrl)!==null&&a!==void 0?a:r:(s=i.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uh{}function ar(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function v(t,e,r){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(s+1),r[u])}else for(const u of l)v(u,e.slice(s+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(s+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],a=t[n];if(a!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===a)return;if(typeof a=="object"&&typeof r=="object"&&a!==null&&r!==null)Object.assign(a,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const a=n.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var F3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(F3||(F3={}));var D3;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(D3||(D3={}));var or;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(or||(or={}));var R3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(R3||(R3={}));var L3;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(L3||(L3={}));var U3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(U3||(U3={}));var M3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(M3||(M3={}));var P3;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(P3||(P3={}));var j3;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(j3||(j3={}));var O3;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(O3||(O3={}));var Q3;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Q3||(Q3={}));var H3;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(H3||(H3={}));var V3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(V3||(V3={}));var z3;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(z3||(z3={}));var G3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(G3||(G3={}));var q3;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(q3||(q3={}));var ry;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ry||(ry={}));var K3;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(K3||(K3={}));var N_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(N_||(N_={}));var W3;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(W3||(W3={}));var $3;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})($3||($3={}));var X3;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(X3||(X3={}));var Y3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Y3||(Y3={}));var J3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(J3||(J3={}));var Z3;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Z3||(Z3={}));var eI;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(eI||(eI={}));var tI;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tI||(tI={}));var rI;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rI||(rI={}));var nI;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nI||(nI={}));var aI;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(aI||(aI={}));var sI;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sI||(sI={}));var iI;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(iI||(iI={}));var oI;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(oI||(oI={}));var lI;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(lI||(lI={}));var cI;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(cI||(cI={}));var uI;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(uI||(uI={}));var AI;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(AI||(AI={}));var dI;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(dI||(dI={}));var fI;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(fI||(fI={}));var hI;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(hI||(hI={}));var mI;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(mI||(mI={}));var W0;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(W0||(W0={}));class k_{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gp{get text(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,n,a,s,i,o,l;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,r,n,a,s,i,o,l,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,n,a,s,i,o,l,u;if(((a=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class pI{}class gI{}class EX{}class _X{}class xI{}class vI{}class yI{}class SX{}class wI{}class bI{}class CI{}class EI{}class TX{}class BX{}class NX{}class _I{}class kX{get text(){var e,r,n;let a="",s=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;s=!0,a+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,r,n;let a="";const s=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&s.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(a+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class ny{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new ny;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const a=e.response;if(a){const s=new wI,i=a.videos;s.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?B_(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),s.raiMediaFilteredCount=a.raiMediaFilteredCount,s.raiMediaFilteredReasons=a.raiMediaFilteredReasons,n.response=s}}else{const a=e.response;if(a){const s=new wI,i=a.generateVideoResponse,o=i==null?void 0:i.generatedSamples;s.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?B_(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),s.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=s}}return n}}class IX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function N8(t,e){const r=qn(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function k8(t){return Array.isArray(t)?t.map(e=>ay(e)):[ay(t)]}function ay(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function I8(t){const e=ay(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function F8(t){const e=ay(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function SI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function D8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>SI(e)):[SI(t)]}function I_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function TI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function BI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Hi(t){if(t==null)throw new Error("ContentUnion is required");return I_(t)?t:{role:"user",parts:D8(t)}}function R8(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Hi(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Hi(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Hi(r)):[Hi(e)]}function Vl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(TI(t)||BI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Hi(t)]}const e=[],r=[],n=I_(t[0]);for(const a of t){const s=I_(a);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(a);else{if(TI(a)||BI(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(a)}}return n||e.push({role:"user",parts:D8(r)}),e}function FX(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(or).includes(r[0].toUpperCase())?r[0].toUpperCase():or.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(or).includes(n.toUpperCase())?n.toUpperCase():or.TYPE_UNSPECIFIED})}}function am(t){const e={},r=["items"],n=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&FX(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(or).includes(o.toUpperCase())?o.toUpperCase():or.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=am(o);else if(n.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(am(u))}e[i]=l}else if(a.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=am(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function t4(t){return am(t)}function r4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function n4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wm(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=am(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=am(e.response));return t}function $m(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function DX(t,e,r,n=1){const a=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:a?`${r}/${e}`:e}function QA(t,e){if(typeof e!="string")throw new Error("name must be a string");return DX(t,e,"cachedContents")}function L8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mh(t){return B_(t)}function RX(t){return t!=null&&typeof t=="object"&&"name"in t}function LX(t){return t!=null&&typeof t=="object"&&"video"in t}function UX(t){return t!=null&&typeof t=="object"&&"uri"in t}function U8(t){var e;let r;if(RX(t)&&(r=t.name),!(UX(t)&&(r=t.uri,r===void 0))&&!(LX(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const a=r.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${r}`);r=a[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function M8(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function P8(t){for(const e of["models","tunedModels","publisherModels"])if(MX(t,e))return t[e];return[]}function MX(t,e){return t!==null&&typeof t=="object"&&e in t}function PX(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function jX(t,e={}){const r=[],n=new Set;for(const a of t){const s=a.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const i=PX(a,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function j8(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function OX(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Xm(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function O8(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function HX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function VX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function zX(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],QX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],HX(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],VX(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Q8(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>zX(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function GX(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const F=x(t,["properties"]);F!=null&&v(e,["properties"],F);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function qX(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function KX(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function WX(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function $X(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],WX(r)),e}function XX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function YX(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],XX(r)),e}function JX(){return{}}function ZX(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>KX(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],$X(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],YX(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],JX());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function eY(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function tY(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function rY(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],tY(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function nY(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],eY(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],rY(n)),e}function aY(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function H8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],aY(r)),e}function sY(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],H8(n)),e}function iY(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>sY(a))),v(e,["speakerVoiceConfigs"],n)}return e}function oY(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],H8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],iY(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function lY(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function cY(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Q8(Hi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],GX(t4(B)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=x(e,["safetySettings"]);if(r!==void 0&&F!=null){let L=F;Array.isArray(L)&&(L=L.map(I=>qX(I))),v(r,["safetySettings"],L)}const U=x(e,["tools"]);if(r!==void 0&&U!=null){let L=$m(U);Array.isArray(L)&&(L=L.map(I=>ZX(Wm(I)))),v(r,["tools"],L)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],nY(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);r!==void 0&&D!=null&&v(r,["cachedContent"],QA(t,D));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const S=x(e,["mediaResolution"]);S!=null&&v(n,["mediaResolution"],S);const N=x(e,["speechConfig"]);if(N!=null&&v(n,["speechConfig"],oY(r4(N))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=x(e,["thinkingConfig"]);return H!=null&&v(n,["thinkingConfig"],lY(H)),n}function uY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>Q8(o))),v(r,["request","contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["request","generationConfig"],cY(t,s,r)),r}function AY(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const a=x(e,["inlinedRequests"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>uY(t,i))),v(r,["requests","requests"],s)}return r}function dY(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function fY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["src"]);a!=null&&v(r,["batch","inputConfig"],AY(t,j8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],dY(s,r)),r}function hY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function mY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function pY(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);if(e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function gY(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],pY(r,e)),e}function xY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function vY(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigquerySource","inputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yY(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const a=x(t,["bigqueryUri"]);if(a!=null&&v(e,["bigqueryDestination","outputUri"],a),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function wY(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["dest"]);return e!==void 0&&a!=null&&v(e,["outputConfig"],yY(OX(a))),r}function bY(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],qn(t,n));const a=x(e,["src"]);a!=null&&v(r,["inputConfig"],vY(j8(t,a)));const s=x(e,["config"]);return s!=null&&v(r,["config"],wY(s,r)),r}function CY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function EY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function _Y(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function SY(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],_Y(r,e)),e}function TY(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],Xm(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function BY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function NY(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function kY(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function IY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],BY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],NY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],kY(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function FY(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>IY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function DY(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function RY(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function LY(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>RY(a))),v(e,["urlMetadata"],n)}return e}function UY(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],FY(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],DY(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],LY(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function MY(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>UY(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function V8(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function PY(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],MY(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],V8(n)),e}function jY(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>PY(s))),v(e,["inlinedResponses"],a)}return e}function F_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["metadata","state"]);a!=null&&v(e,["state"],O8(a));const s=x(t,["metadata","createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],jY(u)),e}function OY(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["operations"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>F_(i))),v(e,["batchJobs"],s)}return e}function QY(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],V8(a)),e}function z8(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const a=x(t,["message"]);return a!=null&&v(e,["message"],a),e}function HY(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigquerySource","inputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function VY(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const a=x(t,["bigqueryDestination","outputUri"]);return a!=null&&v(e,["bigqueryUri"],a),e}function D_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],O8(a));const s=x(t,["error"]);s!=null&&v(e,["error"],z8(s));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],HY(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],VY(m)),e}function zY(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["batchPredictionJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>D_(i))),v(e,["batchJobs"],s)}return e}function GY(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const a=x(t,["error"]);return a!=null&&v(e,["error"],z8(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Eh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Eh||(Eh={}));class qx{constructor(e,r,n,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,a)}init(e,r,n){var a,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(a=i.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qY extends Uh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${a}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new qx(Eh.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=bY(this.apiClient,e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>D_(d))}else{const u=fY(this.apiClient,e);return o=ar("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>F_(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=CY(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>D_(d))}else{const u=hY(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>F_(d))}}async cancel(e){var r,n,a,s;let i="",o={};if(this.apiClient.isVertexAI()){const l=EY(this.apiClient,e);i=ar("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=mY(this.apiClient,e);i=ar("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=SY(e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=zY(d),m=new _I;return Object.assign(m,h),m})}else{const u=gY(e);return o=ar("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=OY(d),m=new _I;return Object.assign(m,h),m})}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=TY(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>GY(d))}else{const u=xY(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>QY(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KY(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function WY(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function $Y(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function XY(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],KY(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],WY(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],$Y(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function NI(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>XY(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function YY(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function JY(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function ZY(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],JY(r)),e}function eJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function tJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],eJ(r)),e}function rJ(){return{}}function nJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>YY(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],ZY(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],tJ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],rJ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function aJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function sJ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function iJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],sJ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function oJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],aJ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],iJ(n)),e}function lJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Vl(i);Array.isArray(d)&&(d=d.map(h=>NI(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],NI(Hi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>nJ(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],oJ(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function cJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],N8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],lJ(a,r)),r}function uJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function AJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function dJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function fJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],dJ(a,r)),r}function hJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function mJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],hJ(r,e)),e}function pJ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function gJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function xJ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function vJ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],pJ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],gJ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],xJ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function kI(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>vJ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function yJ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function wJ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function bJ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],wJ(r)),e}function CJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function EJ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],CJ(r)),e}function _J(){return{}}function SJ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function TJ(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],SJ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function BJ(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],TJ(r)),e}function NJ(){return{}}function kJ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>yJ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],bJ(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],EJ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],_J());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],BJ(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],NJ());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function IJ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function FJ(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function DJ(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],FJ(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function RJ(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],IJ(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],DJ(n)),e}function LJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);e!==void 0&&a!=null&&v(e,["expireTime"],a);const s=x(t,["displayName"]);e!==void 0&&s!=null&&v(e,["displayName"],s);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Vl(i);Array.isArray(h)&&(h=h.map(m=>kI(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],kI(Hi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>kJ(m))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],RJ(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),r}function UJ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],N8(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],LJ(a,r)),r}function MJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function PJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function jJ(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const a=x(t,["expireTime"]);return e!==void 0&&a!=null&&v(e,["expireTime"],a),r}function OJ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],QA(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],jJ(a,r)),r}function QJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function HJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],QJ(r,e)),e}function v2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function VJ(){return{}}function zJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>v2(i))),v(e,["cachedContents"],s)}return e}function y2(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["model"]);a!=null&&v(e,["model"],a);const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function GJ(){return{}}function qJ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>y2(i))),v(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KJ extends Uh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new qx(Eh.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=UJ(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>y2(d))}else{const u=cJ(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>v2(d))}}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=MJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>y2(d))}else{const u=uJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>v2(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=PJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=GJ(),h=new CI;return Object.assign(h,d),h})}else{const u=AJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=VJ(),h=new CI;return Object.assign(h,d),h})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=OJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>y2(d))}else{const u=fJ(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>v2(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=HJ(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=qJ(d),m=new EI;return Object.assign(m,h),m})}else{const u=mJ(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=zJ(d),m=new EI;return Object.assign(m,h),m})}}}function II(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Aa(t){return this instanceof Aa?(this.v=t,this):new Aa(t)}function sm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){n[g]&&(a[g]=function(y){return new Promise(function(E,B){s.push([g,y,E,B])>1||l(g,y)})},b&&(a[g]=b(a[g])))}function l(g,b){try{u(n[g](b))}catch(y){m(s[0][3],y)}}function u(g){g.value instanceof Aa?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof II=="function"?II(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(i){return new Promise(function(o,l){i=t[s](i),a(o,l,i.done,i.value)})}}function a(s,i,o,l){Promise.resolve(l).then(function(u){s({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WJ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:G8(r)}function G8(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function $J(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function FI(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const a=[];let s=!0;for(;n<r&&t[n].role==="model";)a.push(t[n]),s&&!G8(t[n])&&(s=!1),n++;s?e.push(...a):e.pop()}return e}class XJ{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new YJ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class YJ{constructor(e,r,n,a={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),$J(s)}async sendMessage(e){var r;await this.sendPromise;const n=Hi(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,i,o;const l=await a,u=(i=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(n,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var r;await this.sendPromise;const n=Hi(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,n)}getHistory(e=!1){const r=e?FI(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,a;return sm(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=Fg(e),g;g=yield Aa(m.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(WJ(b)){const y=(a=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||a===void 0?void 0:a.content;y!==void 0&&d.push(y)}yield yield Aa(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield Aa(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let a=[];r.length>0&&r.every(s=>s.role!==void 0)?a=r:a.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...FI(n)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,vw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JJ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);return e!==void 0&&a!=null&&v(e,["_query","pageToken"],a),r}function ZJ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],JJ(r,e)),e}function eZ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function tZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],eZ(y)),e}function rZ(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],tZ(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function nZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],U8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function aZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],U8(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function sZ(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const a=x(t,["code"]);return a!=null&&v(e,["code"],a),e}function R_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["mimeType"]);a!=null&&v(e,["mimeType"],a);const s=x(t,["sizeBytes"]);s!=null&&v(e,["sizeBytes"],s);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],sZ(y)),e}function iZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>R_(i))),v(e,["files"],s)}return e}function oZ(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function lZ(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cZ extends Uh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new qx(Eh.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>R_(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ZJ(e);return s=ar("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=iZ(l),d=new TX;return Object.assign(d,u),d})}}async createInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=rZ(e);return s=ar("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>{const u=oZ(l),d=new BX;return Object.assign(d,u),d})}}async get(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=nZ(e);return s=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(l=>R_(l))}}async delete(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=aZ(e);return s=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a.then(()=>{const l=lZ(),u=new NX;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function q8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],uZ(r)),e}function AZ(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],q8(n)),e}function dZ(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>AZ(a))),v(e,["speakerVoiceConfigs"],n)}return e}function fZ(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],q8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],dZ(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function hZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function mZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function pZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function gZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],hZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],mZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],pZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function xZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>gZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function vZ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function wZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],yZ(r)),e}function bZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function CZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],bZ(r)),e}function EZ(){return{}}function _Z(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vZ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],wZ(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],CZ(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],EZ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function SZ(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DI(){return{}}function TZ(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function BZ(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],TZ(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function NZ(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function kZ(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],NZ(n)),e}function IZ(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function FZ(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],fZ(n4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],xZ(Hi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=$m(b);Array.isArray(P)&&(P=P.map(D=>_Z(Wm(D)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],SZ(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],DI());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],DI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],BZ(k));const F=x(t,["contextWindowCompression"]);e!==void 0&&F!=null&&v(e,["setup","contextWindowCompression"],kZ(F));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],IZ(U)),r}function DZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],FZ(a,r)),r}function RZ(){return{}}function LZ(){return{}}function UZ(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],k8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],F8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],I8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],RZ()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],LZ()),e}function K8(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function MZ(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>K8(a))),v(e,["weightedPrompts"],n)}return e}function W8(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function PZ(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],W8(r)),e}function $8(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function X8(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>K8(a))),v(e,["weightedPrompts"],n)}return e}function L_(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],$8(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],X8(n));const a=x(t,["musicGenerationConfig"]);a!=null&&v(e,["musicGenerationConfig"],W8(a));const s=x(t,["playbackControl"]);return s!=null&&v(e,["playbackControl"],s),e}function jZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function OZ(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],jZ(r)),e}function QZ(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],OZ(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function HZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function VZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function zZ(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function GZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],HZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],VZ(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],zZ(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function qZ(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>GZ(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function KZ(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function WZ(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function $Z(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],WZ(r)),e}function XZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function YZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],XZ(r)),e}function JZ(){return{}}function ZZ(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function eee(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],ZZ(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function tee(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],eee(r)),e}function ree(){return{}}function nee(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>KZ(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],$Z(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],YZ(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],JZ());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],tee(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],ree());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function aee(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function RI(){return{}}function see(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function iee(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],see(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function oee(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function lee(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],oee(n)),e}function cee(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function uee(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],QZ(n4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],qZ(Hi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=$m(b);Array.isArray(P)&&(P=P.map(D=>nee(Wm(D)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],aee(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],RI());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],RI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],iee(k));const F=x(t,["contextWindowCompression"]);e!==void 0&&F!=null&&v(e,["setup","contextWindowCompression"],lee(F));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],cee(U)),r}function Aee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],uee(a,r)),r}function dee(){return{}}function fee(){return{}}function hee(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],k8(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],F8(n));const a=x(t,["audioStreamEnd"]);a!=null&&v(e,["audioStreamEnd"],a);const s=x(t,["video"]);s!=null&&v(e,["video"],I8(s));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],dee()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],fee()),e}function mee(){return{}}function pee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function gee(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function xee(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function vee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],pee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],gee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],xee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function yee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>vee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function LI(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function wee(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function bee(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>wee(a))),v(e,["urlMetadata"],n)}return e}function Cee(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],yee(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],LI(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],LI(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],bee(u)),e}function Eee(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const a=x(t,["name"]);return a!=null&&v(e,["name"],a),e}function _ee(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Eee(a))),v(e,["functionCalls"],n)}return e}function See(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function fv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function Tee(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["responseTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>fv(g))),v(e,["promptTokensDetails"],m)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>fv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>fv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>fv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function Bee(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function Nee(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function kee(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],mee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Cee(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],_ee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],See(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],Tee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Bee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],Nee(l)),e}function Iee(){return{}}function Fee(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Dee(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Fee(a))),v(e,["weightedPrompts"],n)}return e}function Ree(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const a=x(t,["seed"]);a!=null&&v(e,["seed"],a);const s=x(t,["guidance"]);s!=null&&v(e,["guidance"],s);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function Lee(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],Dee(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],Ree(n)),e}function Uee(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const a=x(t,["sourceMetadata"]);return a!=null&&v(e,["sourceMetadata"],Lee(a)),e}function Mee(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Uee(a))),v(e,["audioChunks"],n)}return e}function Pee(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function jee(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Iee());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Mee(n));const a=x(t,["filteredPrompt"]);return a!=null&&v(e,["filteredPrompt"],Pee(a)),e}function Oee(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function Qee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Hee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Vee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function zee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Qee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Hee(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Vee(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Gee(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>zee(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function UI(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function qee(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],Gee(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const a=x(t,["interrupted"]);a!=null&&v(e,["interrupted"],a);const s=x(t,["groundingMetadata"]);s!=null&&v(e,["groundingMetadata"],s);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],UI(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],UI(l)),e}function Kee(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function Wee(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Kee(a))),v(e,["functionCalls"],n)}return e}function $ee(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function hv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function Xee(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const a=x(t,["candidatesTokenCount"]);a!=null&&v(e,["responseTokenCount"],a);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&v(e,["toolUsePromptTokenCount"],s);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>hv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>hv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>hv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>hv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function Yee(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function Jee(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const a=x(t,["lastConsumedClientMessageIndex"]);return a!=null&&v(e,["lastConsumedClientMessageIndex"],a),e}function Zee(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],Oee(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],qee(n));const a=x(t,["toolCall"]);a!=null&&v(e,["toolCall"],Wee(a));const s=x(t,["toolCallCancellation"]);s!=null&&v(e,["toolCallCancellation"],$ee(s));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],Xee(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Yee(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],Jee(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ete(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function tte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function rte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function nte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ete(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],tte(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],rte(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function yw(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>nte(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function ate(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const F=x(t,["properties"]);F!=null&&v(e,["properties"],F);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function ste(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function ite(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function ote(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function lte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],ote(r)),e}function cte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function ute(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],cte(r)),e}function Ate(){return{}}function dte(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ite(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],lte(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],ute(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Ate());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function fte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function hte(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function mte(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],hte(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function pte(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],fte(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],mte(n)),e}function gte(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function Y8(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],gte(r)),e}function xte(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],Y8(n)),e}function vte(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>xte(a))),v(e,["speakerVoiceConfigs"],n)}return e}function yte(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],Y8(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],vte(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function wte(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function bte(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],yw(Hi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],ate(t4(B)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=x(e,["safetySettings"]);if(r!==void 0&&F!=null){let L=F;Array.isArray(L)&&(L=L.map(I=>ste(I))),v(r,["safetySettings"],L)}const U=x(e,["tools"]);if(r!==void 0&&U!=null){let L=$m(U);Array.isArray(L)&&(L=L.map(I=>dte(Wm(I)))),v(r,["tools"],L)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],pte(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);r!==void 0&&D!=null&&v(r,["cachedContent"],QA(t,D));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const S=x(e,["mediaResolution"]);S!=null&&v(n,["mediaResolution"],S);const N=x(e,["speechConfig"]);if(N!=null&&v(n,["speechConfig"],yte(r4(N))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=x(e,["thinkingConfig"]);return H!=null&&v(n,["thinkingConfig"],wte(H)),n}function MI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>yw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],bte(t,s,r)),r}function Cte(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["requests[]","title"],a);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&v(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Ete(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["requests[]","content"],R8(t,a));const s=x(e,["config"]);s!=null&&v(r,["config"],Cte(s,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],qn(t,i)),r}function _te(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a);const s=x(t,["guidanceScale"]);if(e!==void 0&&s!=null&&v(e,["parameters","guidanceScale"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function Ste(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],_te(s,r)),r}function Tte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Bte(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],M8(t,o)),n}function Nte(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Bte(t,n,r)),r}function kte(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function Ite(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],kte(a,r)),r}function Fte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Dte(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Rte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>yw(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],Dte(s)),r}function Lte(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Mh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Ute(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=x(t,["durationSeconds"]);if(e!==void 0&&a!=null&&v(e,["parameters","durationSeconds"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["aspectRatio"]);if(e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Mte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);if(s!=null&&v(r,["instances[0]","image"],Lte(s)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],Ute(i,r)),r}function Pte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function jte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Ote(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Qte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Pte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],jte(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Ote(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Ym(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Qte(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Hte(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["enum"]);s!=null&&v(e,["enum"],s);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const E=x(t,["minimum"]);E!=null&&v(e,["minimum"],E);const B=x(t,["nullable"]);B!=null&&v(e,["nullable"],B);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const F=x(t,["properties"]);F!=null&&v(e,["properties"],F);const U=x(t,["propertyOrdering"]);U!=null&&v(e,["propertyOrdering"],U);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const D=x(t,["title"]);D!=null&&v(e,["title"],D);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function Vte(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function zte(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const a=x(t,["threshold"]);return a!=null&&v(e,["threshold"],a),e}function Gte(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const s=x(t,["parametersJsonSchema"]);s!=null&&v(e,["parametersJsonSchema"],s);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function qte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Kte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],qte(r)),e}function Wte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function $te(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],Wte(r)),e}function Xte(){return{}}function Yte(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function Jte(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],Yte(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const a=x(t,["googleServiceAccountConfig"]);a!=null&&v(e,["googleServiceAccountConfig"],a);const s=x(t,["httpBasicAuthConfig"]);s!=null&&v(e,["httpBasicAuthConfig"],s);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Zte(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],Jte(r)),e}function ere(){return{}}function J8(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Gte(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const a=x(t,["googleSearch"]);a!=null&&v(e,["googleSearch"],Kte(a));const s=x(t,["googleSearchRetrieval"]);s!=null&&v(e,["googleSearchRetrieval"],$te(s)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],Xte());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Zte(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],ere());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function tre(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function rre(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function nre(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],rre(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function are(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],tre(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],nre(n)),e}function sre(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function ire(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],sre(r)),e}function ore(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],ire(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function lre(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function cre(t,e,r){const n={},a=x(e,["systemInstruction"]);r!==void 0&&a!=null&&v(r,["systemInstruction"],Ym(Hi(a)));const s=x(e,["temperature"]);s!=null&&v(n,["temperature"],s);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const E=x(e,["responseMimeType"]);E!=null&&v(n,["responseMimeType"],E);const B=x(e,["responseSchema"]);B!=null&&v(n,["responseSchema"],Hte(t4(B)));const k=x(e,["responseJsonSchema"]);k!=null&&v(n,["responseJsonSchema"],k);const F=x(e,["routingConfig"]);F!=null&&v(n,["routingConfig"],F);const U=x(e,["modelSelectionConfig"]);U!=null&&v(n,["modelConfig"],Vte(U));const P=x(e,["safetySettings"]);if(r!==void 0&&P!=null){let ne=P;Array.isArray(ne)&&(ne=ne.map(Z=>zte(Z))),v(r,["safetySettings"],ne)}const D=x(e,["tools"]);if(r!==void 0&&D!=null){let ne=$m(D);Array.isArray(ne)&&(ne=ne.map(Z=>J8(Wm(Z)))),v(r,["tools"],ne)}const C=x(e,["toolConfig"]);r!==void 0&&C!=null&&v(r,["toolConfig"],are(C));const S=x(e,["labels"]);r!==void 0&&S!=null&&v(r,["labels"],S);const N=x(e,["cachedContent"]);r!==void 0&&N!=null&&v(r,["cachedContent"],QA(t,N));const H=x(e,["responseModalities"]);H!=null&&v(n,["responseModalities"],H);const L=x(e,["mediaResolution"]);L!=null&&v(n,["mediaResolution"],L);const I=x(e,["speechConfig"]);I!=null&&v(n,["speechConfig"],ore(r4(I)));const j=x(e,["audioTimestamp"]);j!=null&&v(n,["audioTimestamp"],j);const z=x(e,["thinkingConfig"]);return z!=null&&v(n,["thinkingConfig"],lre(z)),n}function PI(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>Ym(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["generationConfig"],cre(t,s,r)),r}function ure(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const a=x(t,["title"]);e!==void 0&&a!=null&&v(e,["instances[]","title"],a);const s=x(t,["outputDimensionality"]);e!==void 0&&s!=null&&v(e,["parameters","outputDimensionality"],s);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function Are(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);a!=null&&v(r,["instances[]","content"],R8(t,a));const s=x(e,["config"]);return s!=null&&v(r,["config"],ure(s,r)),r}function dre(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["imageSize"]);e!==void 0&&B!=null&&v(e,["parameters","sampleImageSize"],B);const k=x(t,["enhancePrompt"]);return e!==void 0&&k!=null&&v(e,["parameters","enhancePrompt"],k),r}function fre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["config"]);return s!=null&&v(r,["config"],dre(s,r)),r}function ww(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Mh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function hre(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const a=x(t,["maskDilation"]);return a!=null&&v(e,["dilation"],a),e}function mre(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function pre(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function gre(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function xre(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],ww(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const a=x(t,["referenceType"]);a!=null&&v(e,["referenceType"],a);const s=x(t,["maskImageConfig"]);s!=null&&v(e,["maskImageConfig"],hre(s));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],mre(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],pre(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],gre(l)),e}function vre(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const a=x(t,["negativePrompt"]);e!==void 0&&a!=null&&v(e,["parameters","negativePrompt"],a);const s=x(t,["numberOfImages"]);e!==void 0&&s!=null&&v(e,["parameters","sampleCount"],s);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&v(e,["parameters","addWatermark"],E);const B=x(t,["editMode"]);e!==void 0&&B!=null&&v(e,["parameters","editMode"],B);const k=x(t,["baseSteps"]);return e!==void 0&&k!=null&&v(e,["parameters","editConfig","baseSteps"],k),r}function yre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["referenceImages"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>xre(l))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],vre(i,r)),r}function wre(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const a=x(t,["outputMimeType"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","compressionQuality"],s);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),r}function bre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],ww(a));const s=x(e,["upscaleFactor"]);s!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],s);const i=x(e,["config"]);return i!=null&&v(r,["config"],wre(i,r)),r}function Cre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Ere(t,e,r){const n={},a=x(e,["pageSize"]);r!==void 0&&a!=null&&v(r,["_query","pageSize"],a);const s=x(e,["pageToken"]);r!==void 0&&s!=null&&v(r,["_query","pageToken"],s);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],M8(t,o)),n}function _re(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Ere(t,n,r)),r}function Sre(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const s=x(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&v(e,["defaultCheckpointId"],s),r}function Tre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Sre(a,r)),r}function Bre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Nre(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],Ym(Hi(n)));const a=x(t,["tools"]);if(e!==void 0&&a!=null){let i=a;Array.isArray(i)&&(i=i.map(o=>J8(o))),v(e,["tools"],i)}const s=x(t,["generationConfig"]);return e!==void 0&&s!=null&&v(e,["generationConfig"],s),r}function kre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>Ym(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],Nre(s,r)),r}function Ire(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["contents"]);if(a!=null){let i=Vl(a);Array.isArray(i)&&(i=i.map(o=>Ym(o))),v(r,["contents"],i)}const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Fre(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Mh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Dre(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&v(e,["parameters","storageUri"],a);const s=x(t,["fps"]);e!==void 0&&s!=null&&v(e,["parameters","fps"],s);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const y=x(t,["lastFrame"]);e!==void 0&&y!=null&&v(e,["instances[0]","lastFrame"],ww(y));const E=x(t,["compressionQuality"]);return e!==void 0&&E!=null&&v(e,["parameters","compressionQuality"],E),r}function Rre(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],qn(t,n));const a=x(e,["prompt"]);a!=null&&v(r,["instances[0]","prompt"],a);const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],ww(s));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],Fre(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],Dre(o,r)),r}function Lre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function Ure(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Mre(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Pre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Lre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],Ure(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],Mre(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function jre(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Pre(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Ore(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function Qre(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Hre(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Qre(a))),v(e,["urlMetadata"],n)}return e}function Vre(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],jre(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],Ore(n));const a=x(t,["tokenCount"]);a!=null&&v(e,["tokenCount"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Hre(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function jI(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Vre(l))),v(e,["candidates"],o)}const a=x(t,["modelVersion"]);a!=null&&v(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&v(e,["promptFeedback"],s);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function zre(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function Gre(){return{}}function qre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>zre(i))),v(e,["embeddings"],s)}return x(t,["metadata"])!=null&&v(e,["metadata"],Gre()),e}function Kre(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Mh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Z8(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function Wre(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],Kre(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);return a!=null&&v(e,["safetyAttributes"],Z8(a)),e}function $re(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Wre(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],Z8(a)),e}function Xre(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function U_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["version"]);s!=null&&v(e,["version"],s);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],Xre(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function Yre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=P8(a);Array.isArray(s)&&(s=s.map(i=>U_(i))),v(e,["models"],s)}return e}function Jre(){return{}}function Zre(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const a=x(t,["cachedContentTokenCount"]);return a!=null&&v(e,["cachedContentTokenCount"],a),e}function ene(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],Mh(n));const a=x(t,["encoding"]);return a!=null&&v(e,["mimeType"],a),e}function tne(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],ene(r)),e}function rne(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>tne(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function nne(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],rne(i)),e}function ane(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function sne(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function ine(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function one(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ane(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],sne(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],ine(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function lne(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>one(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function cne(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function une(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Ane(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>une(a))),v(e,["urlMetadata"],n)}return e}function dne(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],lne(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],cne(n));const a=x(t,["finishMessage"]);a!=null&&v(e,["finishMessage"],a);const s=x(t,["finishReason"]);s!=null&&v(e,["finishReason"],s);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Ane(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function OI(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>dne(d))),v(e,["candidates"],u)}const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const s=x(t,["responseId"]);s!=null&&v(e,["responseId"],s);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function fne(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function hne(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],fne(n)),e}function mne(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function pne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>hne(i))),v(e,["embeddings"],s)}const a=x(t,["metadata"]);return a!=null&&v(e,["metadata"],mne(a)),e}function gne(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Mh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function eM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const a=x(t,["contentType"]);return a!=null&&v(e,["contentType"],a),e}function a4(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],gne(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const a=x(t,["_self"]);a!=null&&v(e,["safetyAttributes"],eM(a));const s=x(t,["prompt"]);return s!=null&&v(e,["enhancedPrompt"],s),e}function xne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>a4(i))),v(e,["generatedImages"],s)}const a=x(t,["positivePromptSafetyAttributes"]);return a!=null&&v(e,["positivePromptSafetyAttributes"],eM(a)),e}function vne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>a4(s))),v(e,["generatedImages"],a)}return e}function yne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>a4(s))),v(e,["generatedImages"],a)}return e}function wne(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function bne(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const a=x(t,["updateTime"]);return a!=null&&v(e,["updateTime"],a),e}function Cne(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);return a!=null&&v(e,["step"],a),e}function M_(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const a=x(t,["description"]);a!=null&&v(e,["description"],a);const s=x(t,["versionId"]);s!=null&&v(e,["version"],s);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>wne(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],bne(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>Cne(m))),v(e,["checkpoints"],h)}return e}function Ene(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["_self"]);if(a!=null){let s=P8(a);Array.isArray(s)&&(s=s.map(i=>M_(i))),v(e,["models"],s)}return e}function _ne(){return{}}function Sne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function Tne(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function Bne(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],Mh(n));const a=x(t,["mimeType"]);return a!=null&&v(e,["mimeType"],a),e}function Nne(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Bne(r)),e}function kne(t){const e={},r=x(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Nne(i))),v(e,["generatedVideos"],s)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const a=x(t,["raiMediaFilteredReasons"]);return a!=null&&v(e,["raiMediaFilteredReasons"],a),e}function Ine(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const s=x(t,["error"]);s!=null&&v(e,["error"],s);const i=x(t,["response"]);return i!=null&&v(e,["response"],kne(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fne="Content-Type",Dne="X-Server-Timeout",Rne="User-Agent",P_="x-goog-api-client",Lne="1.12.0",Une=`google-genai-sdk/${Lne}`,Mne="v1beta1",Pne="v1beta",QI=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class jne{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Mne,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Pne,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const a=[this.getRequestUrlInternal(r)];return n&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))a.searchParams.append(i,String(o));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(r))typeof s=="object"?n[a]=Object.assign(Object.assign({},n[a]),s):s!==void 0&&(n[a]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,r,n);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const a=new AbortController,s=a.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>a.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{a.abort()}),e.signal=s}return r&&r.extraBody!==null&&One(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await HI(a),new k_(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async a=>(await HI(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var r;return sm(this,arguments,function*(){const a=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield Aa(a.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,y=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new vw({message:y,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(QI);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Aa(new k_(m)),i=i.slice(d[0].length),d=i.match(QI)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{a.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=Une+" "+this.clientOptions.userAgentExtra;return e[Rne]=r,e[P_]=r,e[Fne]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,a]of Object.entries(e.headers))r.append(n,a);e.timeout&&e.timeout>0&&r.append(Dne,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const a={};r!=null&&(a.mimeType=r.mimeType,a.name=r.name,a.displayName=r.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);a.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=o;const l=await this.fetchUploadUrl(a,r);return s.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let a={};r!=null&&r.httpOptions?a=r.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},i=await this.request({path:ar("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function HI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(n);throw r>=400&&r<600?new vw({message:a,status:r}):new Error(a)}}function One(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,i){const o=Object.assign({},s);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const a=n(r,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qne="mcp_used/unknown";let Hne=!1;function tM(t){for(const e of t)if(Vne(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Hne}function rM(t){var e;const r=(e=t[P_])!==null&&e!==void 0?e:"";t[P_]=(r+` ${Qne}`).trimStart()}function Vne(t){return t!==null&&typeof t=="object"&&t instanceof s4}function zne(t,e=100){return sm(this,arguments,function*(){let n,a=0;for(;a<e;){const s=yield Aa(t.listTools({cursor:n}));for(const i of s.tools)yield yield Aa(i),a++;if(!s.nextCursor)break;n=s.nextCursor}})}class s4{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new s4(e,r)}async initialize(){var e,r,n,a;if(this.mcpTools.length>0)return;const s={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,Fg(zne(d))),u;u=await l.next(),e=u.done,!e;o=!0){a=u.value,o=!1;const h=a;i.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),jX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await a.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Gne(t,e,r){const n=new IX;let a;r.data instanceof Blob?a=JSON.parse(await r.data.text()):a=JSON.parse(r.data);const s=jee(a);Object.assign(n,s),e(n)}class qne{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=$ne(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(F=>{u=F}),h=e.callbacks,m=function(){u({})},g=this.apiClient,b={onopen:m,onmessage:F=>{Gne(g,h.onmessage,F)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(F){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(F){}},y=this.webSocketFactory.create(l,Wne(i),b);y.connect(),await d;const E=qn(this.apiClient,e.model),B=$8({model:E}),k=L_({setup:B});return y.send(JSON.stringify(k)),new Kne(y,this.apiClient)}}class Kne{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=MZ(e),n=X8(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=PZ(e),n=L_(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=L_({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(W0.PLAY)}pause(){this.sendPlaybackControl(W0.PAUSE)}stop(){this.sendPlaybackControl(W0.STOP)}resetContext(){this.sendPlaybackControl(W0.RESET_CONTEXT)}close(){this.conn.close()}}function Wne(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function $ne(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xne="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Yne(t,e,r){const n=new kX;let a;r.data instanceof Blob?a=await r.data.text():r.data instanceof ArrayBuffer?a=new TextDecoder().decode(r.data):a=r.data;const s=JSON.parse(a);if(t.isVertexAI()){const i=Zee(s);Object.assign(n,i)}else{const i=kee(s);Object.assign(n,i)}e(n)}class Jne{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new qne(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,a,s,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&tM(e.config.tools)&&rM(h);const m=rae(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const N=this.apiClient.getApiKey();let H="BidiGenerateContent",L="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",L="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${H}?${L}=${N}`}let g=()=>{};const b=new Promise(N=>{g=N}),y=e.callbacks,E=function(){var N;(N=y==null?void 0:y.onopen)===null||N===void 0||N.call(y),g({})},B=this.apiClient,k={onopen:E,onmessage:N=>{Yne(B,y.onmessage,N)},onerror:(r=y==null?void 0:y.onerror)!==null&&r!==void 0?r:function(N){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(N){}},F=this.webSocketFactory.create(d,tae(m),k);F.connect(),await b;let U=qn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const N=this.apiClient.getProject(),H=this.apiClient.getLocation();U=`projects/${N}/locations/${H}/`+U}let P={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ry.AUDIO]}:e.config.responseModalities=[ry.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const N of D)if(this.isCallableTool(N)){const H=N;C.push(await H.tool())}else C.push(N);C.length>0&&(e.config.tools=C);const S={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=Aee(this.apiClient,S):P=DZ(this.apiClient,S),delete P.config,F.send(JSON.stringify(P)),new eae(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Zne={turnComplete:!0};class eae{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Vl(r.turns),e.isVertexAI()?n=n.map(a=>Ym(a)):n=n.map(a=>yw(a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Xne)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Zne),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:hee(e)}:r={realtimeInput:UZ(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function tae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function rae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VI=10;function zI(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(im(i)){a=!0;break}if(!a)return!0;const s=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function im(t){return"callTool"in t&&typeof t.callTool=="function"}function nae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>im(a)))!==null&&n!==void 0?n:!1}function aae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(a=>!im(a)))!==null&&n!==void 0?n:!1}function GI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sae extends Uh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,a,s,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!nae(r)||zI(r.config))return await this.generateContentInternal(l);if(aae(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=Vl(l.contents),m=(s=(a=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&s!==void 0?s:VI;let g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,y=[];for(const E of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(im(E)){const k=await E.callTool(u.functionCalls);y.push(...k)}g++,d={role:"user",parts:y},l.contents=Vl(l.contents),l.contents.push(b),l.contents.push(d),GI(l.config)&&(h.push(b),h.push(d))}return GI(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),zI(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var a;let s;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((a=l==null?void 0:l.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:i.push(l);let o;return s?o={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new qx(Eh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const a={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(a)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,a;const s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;const i=await Promise.all(s.map(async l=>im(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&tM(e.config.tools)){const l=(a=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&a!==void 0?a:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),rM(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var r,n,a;const s=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(im(i)){const o=i,l=await o.tool();for(const u of(a=l.functionDeclarations)!==null&&a!==void 0?a:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,o)}}return s}async processAfcStream(e){var r,n,a;const s=(a=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&a!==void 0?a:VI;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,g;return sm(this,arguments,function*(){for(var b,y,E,B;o<s;){i&&(o++,i=!1);const P=yield Aa(u.processParamsMaybeAddMcpUsage(h)),D=yield Aa(u.generateContentStreamInternal(P)),C=[],S=[];try{for(var k=!0,F=(y=void 0,Fg(D)),U;U=yield Aa(F.next()),b=U.done,!b;k=!0){B=U.value,k=!1;const N=B;if(yield yield Aa(N),N.candidates&&(!((m=N.candidates[0])===null||m===void 0)&&m.content)){S.push(N.candidates[0].content);for(const H of(g=N.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<s&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(H.functionCall.name)){const L=yield Aa(d.get(H.functionCall.name).callTool([H.functionCall]));C.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!k&&!b&&(E=F.return)&&(yield Aa(E.call(F)))}finally{if(y)throw y.error}}if(C.length>0){i=!0;const N=new Gp;N.candidates=[{content:{role:"user",parts:C}}],yield yield Aa(N);const H=[];H.push(...S),H.push({role:"user",parts:C});const L=Vl(h.contents).concat(H);h.contents=L}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=PI(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=OI(d),m=new Gp;return Object.assign(m,h),m})}else{const u=MI(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=jI(d),m=new Gp;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=PI(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return sm(this,arguments,function*(){var m,g,b,y;try{for(var E=!0,B=Fg(h),k;k=yield Aa(B.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const F=y,U=OI(yield Aa(F.json()));U.sdkHttpResponse={headers:F.headers};const P=new Gp;Object.assign(P,U),yield yield Aa(P)}}catch(F){g={error:F}}finally{try{!E&&!m&&(b=B.return)&&(yield Aa(b.call(B)))}finally{if(g)throw g.error}}})})}else{const u=MI(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(h){return sm(this,arguments,function*(){var m,g,b,y;try{for(var E=!0,B=Fg(h),k;k=yield Aa(B.next()),m=k.done,!m;E=!0){y=k.value,E=!1;const F=y,U=jI(yield Aa(F.json()));U.sdkHttpResponse={headers:F.headers};const P=new Gp;Object.assign(P,U),yield yield Aa(P)}}catch(F){g={error:F}}finally{try{!E&&!m&&(b=B.return)&&(yield Aa(b.call(B)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Are(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=pne(d),m=new pI;return Object.assign(m,h),m})}else{const u=Ete(this.apiClient,e);return o=ar("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=qre(d),m=new pI;return Object.assign(m,h),m})}}async generateImagesInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=fre(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=xne(d),m=new gI;return Object.assign(m,h),m})}else{const u=Ste(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=$re(d),m=new gI;return Object.assign(m,h),m})}}async editImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=yre(this.apiClient,e);return s=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=vne(l),d=new EX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=bre(this.apiClient,e);return s=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=yne(l),d=new _X;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Cre(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>M_(d))}else{const u=Tte(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>U_(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=_re(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Ene(d),m=new xI;return Object.assign(m,h),m})}else{const u=Nte(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Yre(d),m=new xI;return Object.assign(m,h),m})}}async update(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Tre(this.apiClient,e);return o=ar("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>M_(d))}else{const u=Ite(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>U_(d))}}async delete(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Bre(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=_ne(),h=new vI;return Object.assign(h,d),h})}else{const u=Fte(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Jre(),h=new vI;return Object.assign(h,d),h})}}async countTokens(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kre(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Sne(d),m=new yI;return Object.assign(m,h),m})}else{const u=Rte(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Zre(d),m=new yI;return Object.assign(m,h),m})}}async computeTokens(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Ire(this.apiClient,e);return s=ar("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>{const u=Tne(l),d=new SX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Rre(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Ine(d),m=new ny;return Object.assign(m,h),m})}else{const u=Mte(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i.then(d=>{const h=nne(d),m=new ny;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function oae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function lae(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const a=x(t,["config"]);return a!=null&&v(e,["config"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cae extends Uh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=r.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:a,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=oae(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const u=iae(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=lae(e);return s=ar("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uae(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function nM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],uae(r)),e}function Aae(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],nM(n)),e}function dae(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Aae(a))),v(e,["speakerVoiceConfigs"],n)}return e}function fae(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],nM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],dae(n));const a=x(t,["languageCode"]);return a!=null&&v(e,["languageCode"],a),e}function hae(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const a=x(t,["startOffset"]);return a!=null&&v(e,["startOffset"],a),e}function mae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function pae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function gae(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],hae(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const a=x(t,["inlineData"]);a!=null&&v(e,["inlineData"],mae(a));const s=x(t,["fileData"]);s!=null&&v(e,["fileData"],pae(s));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function xae(t){const e={},r=x(t,["parts"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>gae(s))),v(e,["parts"],a)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function vae(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const a=x(t,["name"]);a!=null&&v(e,["name"],a);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function yae(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function wae(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],yae(r)),e}function bae(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Cae(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],bae(r)),e}function Eae(){return{}}function _ae(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>vae(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],wae(n));const a=x(t,["googleSearchRetrieval"]);if(a!=null&&v(e,["googleSearchRetrieval"],Cae(a)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],Eae());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function Sae(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qI(){return{}}function Tae(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const a=x(t,["endOfSpeechSensitivity"]);a!=null&&v(e,["endOfSpeechSensitivity"],a);const s=x(t,["prefixPaddingMs"]);s!=null&&v(e,["prefixPaddingMs"],s);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Bae(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Tae(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const a=x(t,["turnCoverage"]);return a!=null&&v(e,["turnCoverage"],a),e}function Nae(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function kae(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],Nae(n)),e}function Iae(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Fae(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const a=x(t,["responseModalities"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","responseModalities"],a);const s=x(t,["temperature"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","temperature"],s);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],fae(n4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],xae(Hi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=$m(b);Array.isArray(P)&&(P=P.map(D=>_ae(Wm(D)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],Sae(y));const E=x(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&v(e,["setup","inputAudioTranscription"],qI());const B=x(t,["outputAudioTranscription"]);e!==void 0&&B!=null&&v(e,["setup","outputAudioTranscription"],qI());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Bae(k));const F=x(t,["contextWindowCompression"]);e!==void 0&&F!=null&&v(e,["setup","contextWindowCompression"],kae(F));const U=x(t,["proactivity"]);return e!==void 0&&U!=null&&v(e,["setup","proactivity"],Iae(U)),r}function Dae(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],qn(t,n));const a=x(e,["config"]);return a!=null&&v(r,["config"],Fae(a,r)),r}function Rae(t,e,r){const n={},a=x(e,["expireTime"]);r!==void 0&&a!=null&&v(r,["expireTime"],a);const s=x(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&v(r,["newSessionExpireTime"],s);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],Dae(t,o));const l=x(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&v(r,["fieldMask"],l),n}function Lae(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Rae(t,n,r)),r}function Uae(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mae(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const a=Object.keys(n).map(s=>`${r}.${s}`);e.push(...a)}else e.push(r)}return e.join(",")}function Pae(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(r){const s=Mae(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];a.length>0&&(o=a.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class jae extends Uh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=Lae(this.apiClient,e);s=ar("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=Pae(o,e.config);return a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),a.then(u=>Uae(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Qae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function Hae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Qae(r,e)),e}function Vae(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function zae(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(a=>Vae(a))),v(e,["examples","examples"],n)}return e}function Gae(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&v(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function qae(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],zae(n));const a=x(t,["config"]);return a!=null&&v(e,["config"],Gae(a,e)),e}function Kae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Wae(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&v(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&v(e,["_query","filter"],s),r}function $ae(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Wae(r,e)),e}function Xae(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Yae(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const a=x(t,["vertexDatasetResource"]);return e!==void 0&&a!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],a),r}function Jae(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],Yae(n,r));const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&v(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function Zae(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],Xae(n,e));const a=x(t,["config"]);return a!=null&&v(e,["config"],Jae(a,e)),e}function ese(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function aM(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],L8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],ese(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const y=x(t,["pipelineJob"]);y!=null&&v(e,["pipelineJob"],y);const E=x(t,["satisfiesPzi"]);E!=null&&v(e,["satisfiesPzi"],E);const B=x(t,["satisfiesPzs"]);B!=null&&v(e,["satisfiesPzs"],B);const k=x(t,["serviceAccount"]);k!=null&&v(e,["serviceAccount"],k);const F=x(t,["tunedModelDisplayName"]);return F!=null&&v(e,["tunedModelDisplayName"],F),e}function tse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>aM(i))),v(e,["tuningJobs"],s)}return e}function rse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["metadata"]);a!=null&&v(e,["metadata"],a);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function nse(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const a=x(t,["step"]);a!=null&&v(e,["step"],a);const s=x(t,["endpoint"]);return s!=null&&v(e,["endpoint"],s),e}function ase(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const a=x(t,["checkpoints"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>nse(i))),v(e,["checkpoints"],s)}return e}function j_(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const a=x(t,["state"]);a!=null&&v(e,["state"],L8(a));const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],ase(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const y=x(t,["encryptionSpec"]);y!=null&&v(e,["encryptionSpec"],y);const E=x(t,["partnerModelTuningSpec"]);E!=null&&v(e,["partnerModelTuningSpec"],E);const B=x(t,["distillationSpec"]);B!=null&&v(e,["distillationSpec"],B);const k=x(t,["experiment"]);k!=null&&v(e,["experiment"],k);const F=x(t,["labels"]);F!=null&&v(e,["labels"],F);const U=x(t,["pipelineJob"]);U!=null&&v(e,["pipelineJob"],U);const P=x(t,["satisfiesPzi"]);P!=null&&v(e,["satisfiesPzi"],P);const D=x(t,["satisfiesPzs"]);D!=null&&v(e,["satisfiesPzs"],D);const C=x(t,["serviceAccount"]);C!=null&&v(e,["serviceAccount"],C);const S=x(t,["tunedModelDisplayName"]);return S!=null&&v(e,["tunedModelDisplayName"],S),e}function sse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(i=>j_(i))),v(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ise extends Uh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new qx(Eh.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let a="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?a=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(a=n.name.split("/operations/")[0]),{name:a,state:N_.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Kae(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>j_(d))}else{const u=Oae(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>aM(d))}}async listInternal(e){var r,n,a,s;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$ae(e);return o=ar("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=sse(d),m=new bI;return Object.assign(m,h),m})}else{const u=Hae(e);return o=ar("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=tse(d),m=new bI;return Object.assign(m,h),m})}}async tuneInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI()){const o=Zae(e);return s=ar("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>j_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let a,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=qae(e);return s=ar("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,a=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),a.then(l=>rse(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ose{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lse=1024*1024*8,cse=3,use=1e3,Ase=2,jC="x-goog-upload-status";async function dse(t,e,r){var n,a,s;let i=0,o=0,l=new k_(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(lse,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=use;for(;g<cse&&(l=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[jC]));)g++,await hse(b),b=b*Ase;if(o+=h,((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[jC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[jC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function fse(t){return{size:t.size,type:t.type}}function hse(t){return new Promise(e=>setTimeout(e,t))}class mse{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dse(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fse(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pse{create(e,r,n){return new gse(e,r,n)}}class gse{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KI="x-goog-api-key";class xse{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(KI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(KI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vse="gl-node/";class Dc{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=CX(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const a=new xse(this.apiKey);this.apiClient=new jne({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vse+"web",uploader:new mse,downloader:new ose}),this.models=new sae(this.apiClient),this.live=new Jne(this.apiClient,a,new pse),this.batches=new qY(this.apiClient),this.chats=new XJ(this.models,this.apiClient),this.caches=new KJ(this.apiClient),this.files=new cZ(this.apiClient),this.operations=new cae(this.apiClient),this.authTokens=new jae(this.apiClient),this.tunings=new ise(this.apiClient)}}const WI="apiCallLogs",yse="lir-sessionUser",Gl=t=>{try{const e=localStorage.getItem(yse);if(!e){console.warn("No se pudo registrar la llamada a la API: no hay usuario en sesión.");return}const r=JSON.parse(e),n=localStorage.getItem(WI),a=n?JSON.parse(n):[],i=[{id:crypto.randomUUID(),timestamp:new Date().toISOString(),userId:r.id,userEmail:r.email,module:t},...a].slice(0,2e3);localStorage.setItem(WI,JSON.stringify(i)),window.dispatchEvent(new Event("storage"))}catch(e){console.error("Error al registrar la llamada a la API:",e)}},bw="planificaciones",sM="actividades_calendario",iM="eventos_calendario",oM=t=>{var r,n,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((a=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||e.fechaCreacion}},wse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Br.fromDate(new Date),fechaActualizacion:Br.fromDate(new Date)};return(await Js(Kt(Gt,bw),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},bse=async(t,e,r)=>{try{const n=Lr(Gt,bw,t),a=await km(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Km(n,{...e,fechaActualizacion:Br.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},Cse=async(t,e)=>{try{const r=Lr(Gt,bw,t),n=await km(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await No(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},Ese=(t,e)=>{const r=fr(Kt(Gt,bw),ta("userId","==",t),Kn("fechaCreacion","desc"));return Yr(r,n=>{const a=n.docs.map(oM);e(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},_se=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Br.fromDate(new Date),fechaActualizacion:Br.fromDate(new Date)};return(await Js(Kt(Gt,sM),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},Sse=(t,e)=>{const r=fr(Kt(Gt,sM),ta("userId","==",t),Kn("fecha","desc"));return Yr(r,n=>{const a=n.docs.map(oM);e(a)},n=>{console.error("Error en suscripción a actividades:",n)})},Tse=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:Br.fromDate(new Date)};return(await Js(Kt(Gt,iM),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},Bse=async(t,e,r,n)=>{try{const a=fr(Kt(Gt,iM),ta("userId","==",t),ta("date","==",e),ta("type","==",$r.ACTIVIDAD_FOCALIZADA),pw(1));return(await Ys(a)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(a){return console.error("Error al verificar evento existente:",a),!1}},Nse={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},kse=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?Ese(t,h=>{r(h),a(!1)}):void 0,[t]);const o=J.useCallback(async d=>{try{i(null),await wse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=J.useCallback(async(d,h)=>{try{i(null),await bse(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),u=J.useCallback(async d=>{try{i(null),await Cse(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:n,error:s,save:o,update:l,remove:u}},Ise=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null);J.useEffect(()=>t?Sse(t,u=>{r(u),a(!1)}):void 0,[t]);const o=J.useCallback(async l=>{try{return i(null),await _se(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:n,error:s,save:o}},Fse=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[a,s]=J.useState(t),i=l=>{s({...a,[l.target.name]:l.target.value})},o=async()=>{try{await r(a),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Dse=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((a,s)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",s+1,": ",a.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(s,a),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(a,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},s))})]}),Rse=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[a,s]=J.useState(t),[i,o]=J.useState(!1),l=d=>{const{name:h,value:m}=d.target,[g,b]=h.split(".");s(g==="momentosClase"?y=>({...y,momentosClase:{...y.momentosClase,[b]:m}}):y=>({...y,[h]:m}))},u=async()=>{o(!0);try{await r(a)}catch(d){console.error("Error al guardar plan de clase:",d)}finally{o(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:l,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:l,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("button",{onClick:u,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},Lse=({userId:t})=>{const{actividades:e,save:r}=Ise(t),[n,a]=J.useState("list"),[s,i]=J.useState(null),[o,l]=J.useState(!1),[u,d]=J.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=J.useState(h);J.useEffect(()=>{n==="summary"&&s&&b()},[n,s,t]);const b=async()=>{if(s)try{const D=await Bse(t,s.fecha,s.nombre,s.ubicacion);d(D)}catch(D){console.error("Error al verificar evento en calendario:",D)}},y=D=>{const{name:C,value:S}=D.target;g(N=>({...N,[C]:S}))},E=(D,C,S)=>{g(N=>({...N,tareas:N.tareas.map(H=>H.id===D?{...H,[C]:S}:H)}))},B=()=>{g(D=>({...D,tareas:[...D.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=D=>{g(C=>({...C,tareas:C.tareas.filter(S=>S.id!==D)}))},F=async D=>{D.preventDefault(),l(!0);const C=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(S=>S.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{Gl("Planificación - Actividad Calendario");const N=await new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:C}),H={...m,objetivo:N.text.replace(/(\*\*|\*)/g,"")},L=await r(H),I={...H,id:L};i(I),a("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const N={...m,objetivo:"No generado"},H=await r(N),L={...N,id:H};i(L),a("summary")}catch(N){console.error("Error al guardar actividad:",N),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},U=async D=>{if(!D)return;const C={date:D.fecha,type:$r.ACTIVIDAD_FOCALIZADA,responsables:D.nombre,ubicacion:D.ubicacion,horario:D.hora};try{await Tse(C,t),d(!0),alert("Actividad añadida al Calendario Académico.")}catch(S){console.error("Error adding to calendar:",S),alert("Hubo un error al agregar la actividad al calendario.")}},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:F,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:y,className:P,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:y,className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:y,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:y,placeholder:"Ubicación",className:P,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:y,placeholder:"Participantes",className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:P,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((D,C)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(D.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:D.descripcion,onChange:S=>E(D.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:D.responsable,onChange:S=>E(D.id,"responsable",S.target.value),placeholder:"Responsable",className:P,required:!0,disabled:o}),c.jsx("input",{value:D.recursos,onChange:S=>E(D.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:P,disabled:o})]})]},D.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:s.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:s.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:s.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:s.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:s.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:s.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>U(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{a("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(D=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(D.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",D.ubicacion]})]},D.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Use=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=kse(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=J.useState(o),[d,h]=J.useState(null),[m,g]=J.useState(!1),[b,y]=J.useState(null),[E,B]=J.useState("unidad"),[k,F]=J.useState(null),[U,P]=J.useState(null),D=J.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=J.useMemo(()=>{const G=t.cursos||[],K=new Set;return G.forEach(le=>{le.startsWith("1º")?K.add("1º Medio"):le.startsWith("2º")?K.add("2º Medio"):le.startsWith("3º")?K.add("3º Medio"):le.startsWith("4º")&&K.add("4º Medio")}),Array.from(K)},[t.cursos]);J.useEffect(()=>{u(G=>({...G,asignatura:D[0]||"",nivel:C[0]||""}))},[D,C]);const S=G=>{const{name:K,value:le}=G.target;u(O=>({...O,[K]:K==="cantidadClases"?parseInt(le,10):le}))},N=()=>{const{asignatura:G,nivel:K,nombreUnidad:le,contenidos:O,cantidadClases:W,observaciones:Y,ideasParaUnidad:te}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${G}
    - Nivel: ${K}
    - Nombre de la Unidad: "${le}"
    - Contenidos clave a trabajar (insumo principal): "${O}"
    - Cantidad de clases para la unidad: ${W}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${Y||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${W} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},H=async G=>{if(G.preventDefault(),g(!0),y(null),console.log("🔍 Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",Nse),!l.contenidos||!l.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{Gl("Planificación - Unidad");const K=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),le=N(),O={type:or.OBJECT,properties:{objetivosAprendizaje:{type:or.STRING},indicadoresEvaluacion:{type:or.STRING},detallesLeccion:{type:or.ARRAY,items:{type:or.OBJECT,properties:{objetivosAprendizaje:{type:or.STRING},contenidosConceptuales:{type:or.STRING},habilidadesBloom:{type:or.STRING},perfilEgreso:{type:or.STRING},actividades:{type:or.STRING},asignaturasInterdisciplinariedad:{type:or.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},W=await K.models.generateContent({model:"gemini-2.5-flash",contents:le,config:{responseMimeType:"application/json",responseSchema:O}}),Y=JSON.parse(W.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:Y.objetivosAprendizaje,indicadoresEvaluacion:Y.indicadoresEvaluacion,detallesLeccion:Y.detallesLeccion};if(d)await a(d.id,te),h({...te,id:d.id});else{const ce=await n(te);h({...te,id:ce})}}catch(K){console.error("Error al generar planificación con IA",K),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{g(!1)}},L=async(G,K)=>{g(!0),y(null);const le=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${K.asignatura}
    - Nivel: ${K.nivel}
    - Objetivo de la clase: ${G.objetivosAprendizaje}
    - Contenidos: ${G.contenidosConceptuales}
    - Actividades sugeridas: ${G.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Gl("Planificación - Utilizar Clase");const O=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),W={type:or.OBJECT,properties:{inicio:{type:or.STRING},desarrollo:{type:or.STRING},cierre:{type:or.STRING}},required:["inicio","desarrollo","cierre"]},Y=await O.models.generateContent({model:"gemini-2.5-flash",contents:le,config:{responseMimeType:"application/json",responseSchema:W}}),te=JSON.parse(Y.text),ce={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:K.asignatura,nivel:K.nivel,contenidos:G.contenidosConceptuales,observaciones:"",nombreClase:G.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:G};await n(ce),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),B("clase")}catch(O){console.error("Error al generar plan de clase con IA",O),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{g(!1)}},I=G=>{G.tipo==="Unidad"&&(u({asignatura:G.asignatura,nivel:G.nivel,nombreUnidad:G.nombreUnidad,contenidos:G.contenidos,cantidadClases:G.cantidadClases,observaciones:G.observaciones,ideasParaUnidad:G.ideasParaUnidad||""}),h(G),window.scrollTo({top:0,behavior:"smooth"}))},j=async G=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(G),(d==null?void 0:d.id)===G&&(h(null),u(o))}catch(K){console.error("Error al eliminar planificación:",K),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},z=(G,K)=>{d&&P({planId:d.id,lessonIndex:G,lessonData:K})},ne=async G=>{if(U)try{const{planId:K,lessonIndex:le}=U,O=r.find(te=>te.id===K&&te.tipo==="Unidad");if(!O)return;const W=[...O.detallesLeccion];W[le]=G;const Y={...O,detallesLeccion:W};await a(K,Y),h(Y),P(null)}catch(K){console.error("Error al actualizar lección:",K),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:H,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:S,className:Z,disabled:m,children:D.length>0?D.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:S,className:Z,disabled:m,children:C.length>0?C.map(G=>c.jsx("option",{value:G,children:G},G)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:S,className:Z,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:S,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:Z,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:S,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Z,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:S,className:Z,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:S,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Z,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Dse,{plan:d,onEditLesson:z,onUseLesson:L,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(G=>G.tipo==="Unidad").length>0?r.filter(G=>G.tipo==="Unidad").map(G=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===G.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(G.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",G.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>I(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>j(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},G.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ae=()=>{const G=r.filter(K=>K.tipo==="Clase").sort((K,le)=>new Date(le.fechaCreacion).getTime()-new Date(K.fechaCreacion).getTime());return k?c.jsx(Rse,{plan:k,onBack:()=>F(null),onSave:async K=>{try{await a(K.id,K),F(K)}catch(le){console.error("Error al actualizar plan de clase:",le),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:G.length>0?G.map(K=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(K.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",K.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>F(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},K.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>B("unidad"),className:`${E==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>B("clase"),className:`${E==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>B("calendario"),className:`${E==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),E==="unidad"&&ee(),E==="clase"&&ae(),E==="calendario"&&c.jsx(Lse,{userId:e}),U&&c.jsx(Fse,{lesson:U.lessonData,onClose:()=>P(null),onSave:ne,isLoading:m})]})},Cw="events",Mse=async()=>{try{const t=fr(Kt(nn,Cw),Kn("date","asc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},Pse=async t=>{try{return{id:(await Js(Kt(nn,Cw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},jse=async(t,e)=>{try{const r=Lr(nn,Cw,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},Ose=async t=>{try{const e=Lr(nn,Cw,t);await No(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},Qse=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Hse=t=>{switch(t.type){case $r.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case $r.ACTO:return`Acto: ${t.ubicacion}`;case $r.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case $r.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Vse=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,l]=J.useState({});J.useEffect(()=>{l(a||{type:$r.EVALUACION,subtype:th.PRUEBA_PARCIAL,asignatura:nl[0],curso:is[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=y=>{const{name:E,value:B}=y.target;l(k=>({...k,[E]:B}))},h=y=>{l(E=>{if(E.type===$r.SALIDA_PEDAGOGICA){const B=E.cursos||[],k=B.includes(y)?B.filter(F=>F!==y):[...B,y];return{...E,cursos:k.sort()}}return E})},m=y=>{var B;y.preventDefault();let E;switch(o.type){case $r.EVALUACION:const k={date:s,type:$r.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===th.RUBRICA||o.subtype===th.PAUTA_COTEJO)&&((B=o.enlace)!=null&&B.trim())&&(k.enlace=o.enlace.trim()),E=k;break;case $r.ACTO:E={date:s,type:$r.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case $r.ACTIVIDAD_FOCALIZADA:E={date:s,type:$r.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case $r.SALIDA_PEDAGOGICA:E={date:s,type:$r.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(E)};if(!t)return null;const g=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case $r.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:L$.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:nl.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:is.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===th.RUBRICA||o.subtype===th.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case $r.ACTO:case $r.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case $r.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:is.map(y=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>h(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:y})]},y))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:a?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values($r).map(y=>c.jsx("option",{value:y,children:y},y))})]}),b()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:a&&n&&c.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},zse=({profile:t})=>{const[e,r]=J.useState(new Date),[n,a]=J.useState([]),[s,i]=J.useState(!1),[o,l]=J.useState(null),[u,d]=J.useState(!1),[h,m]=J.useState(Object.values($r)),[g,b]=J.useState(!1),[y,E]=J.useState(null),[B,k]=J.useState(null),F=J.useCallback(async()=>{i(!0);try{const L=await Mse();a(L),l(null)}catch(L){console.error("Error al cargar eventos desde Firestore",L),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);J.useEffect(()=>{F()},[F]);const U=J.useMemo(()=>{const L=e.getFullYear(),I=e.getMonth(),j=new Date(L,I,1).getDay(),z=new Date(L,I+1,0).getDate(),ne=[];let Z=1;for(let ee=0;ee<6;ee++){const ae=[];for(let G=0;G<7;G++)ee===0&&G<j||Z>z?ae.push(null):(ae.push(new Date(L,I,Z)),Z++);if(ne.push(ae),Z>z)break}return ne},[e]),P=L=>{m(I=>I.includes(L)?I.filter(j=>j!==L):[...I,L])},D=()=>{h.length===Object.values($r).length?m([]):m(Object.values($r))},C=L=>{t!==$t.ESTUDIANTE&&(E(L.toISOString().split("T")[0]),k(null),b(!0))},S=(L,I)=>{I.stopPropagation(),t!==$t.ESTUDIANTE&&(E(L.date),k(L),b(!0))},N=async L=>{d(!0);try{B?await jse(B.id,L):await Pse(L),await F(),b(!1)}catch(I){console.error("Error al guardar evento:",I);const j=I instanceof Error?I.message:"Error desconocido";l(`Error al guardar el evento: ${j}`)}finally{d(!1)}},H=async()=>{if(B){d(!0);try{await Ose(B.id),await F(),b(!1)}catch(L){console.error("Error al eliminar evento:",L);const I=L instanceof Error?L.message:"Error desconocido";l(`No se pudo eliminar el evento: ${I}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!s&&n.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:D,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values($r).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values($r).map(L=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(L)?`shadow-sm ${Od[L].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(L),onChange:()=>P(L),className:"hidden"}),c.jsx("span",{children:Od[L].icon}),c.jsx("span",{children:Od[L].label})]},L))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:Qse.map(L=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:L},L))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:U.flat().map((L,I)=>{const j=L&&L.toDateString()===new Date().toDateString(),z=L==null?void 0:L.toISOString().split("T")[0],ne=z?n.filter(Z=>Z.date===z&&h.includes(Z.type)):[];return c.jsx("div",{onClick:()=>L&&C(L),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${L?t!==$t.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:L&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${j?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:L.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ne.map(Z=>c.jsxs("div",{onClick:ee=>S(Z,ee),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${Od[Z.type].color}`,children:[c.jsx("span",{children:Od[Z.type].icon}),c.jsx("span",{className:"truncate",children:Hse(Z)})]},Z.id))}),t!==$t.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},I)})})]}),g&&c.jsx(Vse,{isOpen:g,onClose:()=>b(!1),onSave:N,onDelete:H,event:B,date:y,isLoading:u})]})},Ew="anuncios",Gse=async()=>{try{const t=fr(Kt(nn,Ew),Kn("fechaPublicacion","desc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},qse=async t=>{try{return{id:(await Js(Kt(nn,Ew),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},Kse=async(t,e)=>{try{const r=Lr(nn,Ew,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Wse=async t=>{try{const e=Lr(nn,Ew,t);await No(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},$I=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],$se=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=J.useState({tipo:"Todos",cursos:[]}),h=J.useCallback(async()=>{a(!0);try{const C=await Gse();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);J.useEffect(()=>{h()},[h]);const m=C=>{const{name:S,value:N}=C.target;l(H=>({...H,[S]:N}))},g=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},b=C=>{d(S=>{var H;if(S.tipo!=="Cursos")return S;const N=(H=S.cursos)!=null&&H.includes(C)?S.cursos.filter(L=>L!==C):[...S.cursos||[],C];return{...S,cursos:N}})},y=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await qse(S),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),i("Error al publicar el anuncio en la nube.")}},E=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Wse(C),await h()}catch(S){console.error("Error al eliminar anuncio:",S),i("No se pudo eliminar el anuncio en la nube.")}},B=async C=>{try{const S=e.find(N=>N.id===C);S&&(await Kse(C,{destacado:!S.destacado}),await h())}catch(S){console.error("Error al actualizar anuncio:",S),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=J.useMemo(()=>[...e].sort((C,S)=>C.destacado&&!S.destacado?-1:!C.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),F=J.useMemo(()=>{const C=t.profile,S=t.curso;return k.filter(N=>{if(C===$t.SUBDIRECCION)return!0;if(!N.destinatarios)return C!==$t.ESTUDIANTE;const{tipo:H,cursos:L}=N.destinatarios;return H==="Todos"||H==="Profesores"&&C===$t.PROFESORADO||H==="Coordinación TP"&&C===$t.COORDINACION_TP?!0:H==="Cursos"?C===$t.ESTUDIANTE?L==null?void 0:L.includes(S||""):!0:!1})},[k,t]),U=C=>t.profile===$t.ESTUDIANTE?!1:t.profile===$t.SUBDIRECCION||t.profile===C.profileCreador,P=()=>t.profile===$t.SUBDIRECCION||t.profile===$t.PROFESORADO,D="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),t.profile!==$t.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:D})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>g(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:is.map(C=>{var S;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(C),onChange:()=>b(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:D})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&F.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&F.length>0&&F.map((C,S)=>{const N=$I[S%$I.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${N.bg} ${N.rotate}`,children:[C.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:C.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[P()&&c.jsx("button",{onClick:()=>B(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),U(C)&&c.jsx("button",{onClick:()=>E(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},OC="actasDeReunion",lM=window.SpeechRecognition||window.webkitSpeechRecognition,XI=!!lM,Xse=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),Yse=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(null),[a,s]=J.useState({tipoReunion:UC[0],asistentes:"",textoReunion:""}),[i,o]=J.useState(!1),[l,u]=J.useState(!1),[d,h]=J.useState(null),m=J.useRef(null);J.useEffect(()=>{try{const U=localStorage.getItem(OC);if(U){const P=JSON.parse(U);e(P),P.length>0&&!r&&n(P[0])}}catch(U){console.error("Error al leer actas de localStorage",U)}},[r]);const g=U=>{const{name:P,value:D}=U.target;s(C=>({...C,[P]:D}))},b=J.useCallback(()=>{var U;if(!XI){h("El reconocimiento de voz no es compatible con este navegador.");return}i?(U=m.current)==null||U.stop():(m.current=new lM,m.current.lang="es-CL",m.current.continuous=!0,m.current.interimResults=!0,m.current.onresult=P=>{let D="";for(let C=P.resultIndex;C<P.results.length;++C)P.results[C].isFinal&&(D+=P.results[C][0].transcript+". ");s(C=>({...C,textoReunion:C.textoReunion+D}))},m.current.onstart=()=>o(!0),m.current.onend=()=>o(!1),m.current.onerror=P=>{console.error("Speech recognition error",P.error),h(`Error de reconocimiento: ${P.error}`),o(!1)},m.current.start())},[i]),y=async U=>{U.preventDefault();const{tipoReunion:P,asistentes:D,textoReunion:C}=a;if(!P||!D.trim()||!C.trim()){h("Todos los campos son obligatorios.");return}u(!0),h(null);try{Gl("Generador de Actas");const S=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),N=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${C}"
                
                Asistentes a la reunión para referencia de nombres: ${D}
            `,H={type:or.OBJECT,properties:{temas:{type:or.ARRAY,description:"Lista de los principales temas tratados en la reunión.",items:{type:or.STRING}},acuerdos:{type:or.ARRAY,description:"Lista de los acuerdos o decisiones tomadas.",items:{type:or.STRING}},plazos:{type:or.ARRAY,description:"Lista de fechas límite o plazos mencionados en el texto.",items:{type:or.STRING}},responsables:{type:or.ARRAY,description:"Lista de las personas asignadas como responsables de tareas.",items:{type:or.STRING}}},required:["temas","acuerdos","plazos","responsables"]},L=await S.models.generateContent({model:"gemini-2.5-flash",contents:N,config:{responseMimeType:"application/json",responseSchema:H}}),I=JSON.parse(L.text),j={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),...a,...I},z=[j,...t];e(z),localStorage.setItem(OC,JSON.stringify(z)),s({tipoReunion:UC[0],asistentes:"",textoReunion:""}),n(j)}catch(S){console.error("Error al analizar acta con IA:",S),h("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{u(!1)}},E=U=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?")){const P=t.filter(D=>D.id!==U);e(P),localStorage.setItem(OC,JSON.stringify(P)),(r==null?void 0:r.id)===U&&n(P.length>0?P[0]:null)}},B=U=>{n(U)},k=U=>U.temas||U.acuerdos||U.plazos||U.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),U.temas&&U.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.temas.map((D,C)=>c.jsx("li",{children:D},C))})]}),U.acuerdos&&U.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.acuerdos.map((D,C)=>c.jsx("li",{children:D},C))})]}),U.plazos&&U.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.plazos.map((D,C)=>c.jsx("li",{children:D},C))})]}),U.responsables&&U.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:U.responsables.map((D,C)=>c.jsx("li",{children:D},C))})]})]}):null,F="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:g,required:!0,className:F,children:UC.map(U=>c.jsx("option",{value:U,children:U},U))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:g,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:F})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:g,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:F}),XI&&c.jsx("button",{type:"button",onClick:b,title:i?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${i?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(Xse,{isListening:i})})]})]}),d&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:d}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.sort((U,P)=>new Date(P.fechaCreacion).getTime()-new Date(U.fechaCreacion).getTime()).map(U=>c.jsxs("button",{onClick:()=>B(U),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===U.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:U.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(U.fechaCreacion).toLocaleDateString("es-CL")})]},U.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:r?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${r.tipoReunion}`}),c.jsx("button",{onClick:()=>E(r.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(r.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(r.asistentes||"").split(",").map((U,P)=>U.trim()&&c.jsx("li",{children:U.trim()},P))}),k(r),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:r.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},Jse="modulepreload",Zse=function(t){return"/"+t},YI={},O_=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=Zse(u),u in YI)return;YI[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Jse,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function zn(t){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(t)}var Oi=Uint8Array,tl=Uint16Array,i4=Int32Array,_w=new Oi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sw=new Oi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Q_=new Oi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cM=function(t,e){for(var r=new tl(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new i4(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},uM=cM(_w,2),AM=uM.b,H_=uM.r;AM[28]=258,H_[258]=28;var dM=cM(Sw,0),eie=dM.b,JI=dM.r,V_=new tl(32768);for(var fa=0;fa<32768;++fa){var Sd=(fa&43690)>>1|(fa&21845)<<1;Sd=(Sd&52428)>>2|(Sd&13107)<<2,Sd=(Sd&61680)>>4|(Sd&3855)<<4,V_[fa]=((Sd&65280)>>8|(Sd&255)<<8)>>1}var ku=function(t,e,r){for(var n=t.length,a=0,s=new tl(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new tl(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new tl(1<<e);var l=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],h=i[t[a]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[V_[h]>>l]=u}else for(o=new tl(n),a=0;a<n;++a)t[a]&&(o[a]=V_[i[t[a]-1]++]>>15-t[a]);return o},hf=new Oi(288);for(var fa=0;fa<144;++fa)hf[fa]=8;for(var fa=144;fa<256;++fa)hf[fa]=9;for(var fa=256;fa<280;++fa)hf[fa]=7;for(var fa=280;fa<288;++fa)hf[fa]=8;var ax=new Oi(32);for(var fa=0;fa<32;++fa)ax[fa]=5;var tie=ku(hf,9,0),rie=ku(hf,9,1),nie=ku(ax,5,0),aie=ku(ax,5,1),QC=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},gc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},HC=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},o4=function(t){return(t+7)/8|0},fM=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Oi(t.subarray(e,r))},sie=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wc=function(t,e,r){var n=new Error(e||sie[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,wc),!r)throw n;return n},iie=function(t,e,r,n){var a=t.length,s=0;if(!a||e.f&&!e.l)return r||new Oi(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new Oi(a*3));var u=function(xe){var ie=r.length;if(xe>ie){var Le=new Oi(Math.max(ie*2,xe));Le.set(r),r=Le}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,y=e.m,E=e.n,B=a*8;do{if(!g){d=gc(t,h,1);var k=gc(t,h+1,3);if(h+=3,k)if(k==1)g=rie,b=aie,y=9,E=5;else if(k==2){var D=gc(t,h,31)+257,C=gc(t,h+10,15)+4,S=D+gc(t,h+5,31)+1;h+=14;for(var N=new Oi(S),H=new Oi(19),L=0;L<C;++L)H[Q_[L]]=gc(t,h+L*3,7);h+=C*3;for(var I=QC(H),j=(1<<I)-1,z=ku(H,I,1),L=0;L<S;){var ne=z[gc(t,h,j)];h+=ne&15;var F=ne>>4;if(F<16)N[L++]=F;else{var Z=0,ee=0;for(F==16?(ee=3+gc(t,h,3),h+=2,Z=N[L-1]):F==17?(ee=3+gc(t,h,7),h+=3):F==18&&(ee=11+gc(t,h,127),h+=7);ee--;)N[L++]=Z}}var ae=N.subarray(0,D),G=N.subarray(D);y=QC(ae),E=QC(G),g=ku(ae,y,1),b=ku(G,E,1)}else wc(1);else{var F=o4(h)+4,U=t[F-4]|t[F-3]<<8,P=F+U;if(P>a){l&&wc(0);break}o&&u(m+U),r.set(t.subarray(F,P),m),e.b=m+=U,e.p=h=P*8,e.f=d;continue}if(h>B){l&&wc(0);break}}o&&u(m+131072);for(var K=(1<<y)-1,le=(1<<E)-1,O=h;;O=h){var Z=g[HC(t,h)&K],W=Z>>4;if(h+=Z&15,h>B){l&&wc(0);break}if(Z||wc(2),W<256)r[m++]=W;else if(W==256){O=h,g=null;break}else{var Y=W-254;if(W>264){var L=W-257,te=_w[L];Y=gc(t,h,(1<<te)-1)+AM[L],h+=te}var ce=b[HC(t,h)&le],de=ce>>4;ce||wc(3),h+=ce&15;var G=eie[de];if(de>3){var te=Sw[de];G+=HC(t,h)&(1<<te)-1,h+=te}if(h>B){l&&wc(0);break}o&&u(m+131072);var me=m+Y;if(m<G){var ge=s-G,Se=Math.min(G,me);for(ge+m<0&&wc(3);m<Se;++m)r[m]=n[ge+m]}for(;m<me;++m)r[m]=r[m-G]}}e.l=g,e.p=O,e.b=m,e.f=d,g&&(d=1,e.m=y,e.d=b,e.n=E)}while(!d);return m!=r.length&&i?fM(r,0,m):r.subarray(0,m)},mA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},qp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},VC=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:mM,l:0};if(a==1){var i=new Oi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(P,D){return P.f-D.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=a-1;)o=r[r[u].f<r[h].f?u++:h++],l=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=s[0].s,n=1;n<a;++n)s[n].s>m&&(m=s[n].s);var g=new tl(m+1),b=z_(r[d-1],g,0);if(b>e){var n=0,y=0,E=b-e,B=1<<E;for(s.sort(function(D,C){return g[C.s]-g[D.s]||D.f-C.f});n<a;++n){var k=s[n].s;if(g[k]>e)y+=B-(1<<b-g[k]),g[k]=e;else break}for(y>>=E;y>0;){var F=s[n].s;g[F]<e?y-=1<<e-g[F]++-1:++n}for(;n>=0&&y;--n){var U=s[n].s;g[U]==e&&(--g[U],++y)}b=e}return{t:new Oi(g),l:b}},z_=function(t,e,r){return t.s==-1?Math.max(z_(t.l,e,r+1),z_(t.r,e,r+1)):e[t.s]=r},ZI=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new tl(++e),n=0,a=t[0],s=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==a&&o!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[o]}return{c:r.subarray(0,n),n:e}},Kp=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},hM=function(t,e,r){var n=r.length,a=o4(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},eF=function(t,e,r,n,a,s,i,o,l,u,d){mA(e,d++,r),++a[256];for(var h=VC(a,15),m=h.t,g=h.l,b=VC(s,15),y=b.t,E=b.l,B=ZI(m),k=B.c,F=B.n,U=ZI(y),P=U.c,D=U.n,C=new tl(19),S=0;S<k.length;++S)++C[k[S]&31];for(var S=0;S<P.length;++S)++C[P[S]&31];for(var N=VC(C,7),H=N.t,L=N.l,I=19;I>4&&!H[Q_[I-1]];--I);var j=u+5<<3,z=Kp(a,hf)+Kp(s,ax)+i,ne=Kp(a,m)+Kp(s,y)+i+14+3*I+Kp(C,H)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&j<=z&&j<=ne)return hM(e,d,t.subarray(l,l+u));var Z,ee,ae,G;if(mA(e,d,1+(ne<z)),d+=2,ne<z){Z=ku(m,g,0),ee=m,ae=ku(y,E,0),G=y;var K=ku(H,L,0);mA(e,d,F-257),mA(e,d+5,D-1),mA(e,d+10,I-4),d+=14;for(var S=0;S<I;++S)mA(e,d+3*S,H[Q_[S]]);d+=3*I;for(var le=[k,P],O=0;O<2;++O)for(var W=le[O],S=0;S<W.length;++S){var Y=W[S]&31;mA(e,d,K[Y]),d+=H[Y],Y>15&&(mA(e,d,W[S]>>5&127),d+=W[S]>>12)}}else Z=tie,ee=hf,ae=nie,G=ax;for(var S=0;S<o;++S){var te=n[S];if(te>255){var Y=te>>18&31;qp(e,d,Z[Y+257]),d+=ee[Y+257],Y>7&&(mA(e,d,te>>23&31),d+=_w[Y]);var ce=te&31;qp(e,d,ae[ce]),d+=G[ce],ce>3&&(qp(e,d,te>>5&8191),d+=Sw[ce])}else qp(e,d,Z[te]),d+=ee[te]}return qp(e,d,Z[256]),d+ee[256]},oie=new i4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mM=new Oi(0),lie=function(t,e,r,n,a,s){var i=s.z||t.length,o=new Oi(n+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var h=oie[e-1],m=h>>13,g=h&8191,b=(1<<r)-1,y=s.p||new tl(32768),E=s.h||new tl(b+1),B=Math.ceil(r/3),k=2*B,F=function(nt){return(t[nt]^t[nt+1]<<B^t[nt+2]<<k)&b},U=new i4(25e3),P=new tl(288),D=new tl(32),C=0,S=0,N=s.i||0,H=0,L=s.w||0,I=0;N+2<i;++N){var j=F(N),z=N&32767,ne=E[j];if(y[z]=ne,E[j]=z,L<=N){var Z=i-N;if((C>7e3||H>24576)&&(Z>423||!u)){d=eF(t,l,0,U,P,D,S,H,I,N-I,d),H=C=S=0,I=N;for(var ee=0;ee<286;++ee)P[ee]=0;for(var ee=0;ee<30;++ee)D[ee]=0}var ae=2,G=0,K=g,le=z-ne&32767;if(Z>2&&j==F(N-le))for(var O=Math.min(m,Z)-1,W=Math.min(32767,N),Y=Math.min(258,Z);le<=W&&--K&&z!=ne;){if(t[N+ae]==t[N+ae-le]){for(var te=0;te<Y&&t[N+te]==t[N+te-le];++te);if(te>ae){if(ae=te,G=le,te>O)break;for(var ce=Math.min(le,te-2),de=0,ee=0;ee<ce;++ee){var me=N-le+ee&32767,ge=y[me],Se=me-ge&32767;Se>de&&(de=Se,ne=me)}}}z=ne,ne=y[z],le+=z-ne&32767}if(G){U[H++]=268435456|H_[ae]<<18|JI[G];var xe=H_[ae]&31,ie=JI[G]&31;S+=_w[xe]+Sw[ie],++P[257+xe],++D[ie],L=N+ae,++C}else U[H++]=t[N],++P[t[N]]}}for(N=Math.max(N,L);N<i;++N)U[H++]=t[N],++P[t[N]];d=eF(t,l,u,U,P,D,S,H,I,N-I,d),u||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=E,s.p=y,s.i=N,s.w=L)}else{for(var N=s.w||0;N<i+u;N+=65535){var Le=N+65535;Le>=i&&(l[d/8|0]=u,Le=i),d=hM(l,d+1,t.subarray(N,Le))}s.i=i}return fM(o,0,n+o4(d)+a)},pM=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},cie=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Oi(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return lie(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},gM=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},uie=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=pM();a.p(e.dictionary),gM(t,2,a.d())}},Aie=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&wc(6,"invalid zlib data"),(t[1]>>5&1)==1&&wc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function G_(t,e){e||(e={});var r=pM();r.p(t);var n=cie(t,e,e.dictionary?6:2,4);return uie(n,e),gM(n,n.length-4,r.d()),n}function die(t,e){return iie(t.subarray(Aie(t),-4),{i:2},e,e)}var fie=typeof TextDecoder<"u"&&new TextDecoder,hie=0;try{fie.decode(mM,{stream:!0}),hie=1}catch{}var br=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function zC(){br.console&&typeof br.console.log=="function"&&br.console.log.apply(br.console,arguments)}var sa={log:zC,warn:function(t){br.console&&(typeof br.console.warn=="function"?br.console.warn.apply(br.console,arguments):zC.call(null,arguments))},error:function(t){br.console&&(typeof br.console.error=="function"?br.console.error.apply(br.console,arguments):zC(t))}};function GC(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Zf(n.response,e,r)},n.onerror=function(){sa.error("could not download file")},n.send()}function tF(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function mv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Dg,q_,Zf=br.saveAs||((typeof window>"u"?"undefined":zn(window))!=="object"||window!==br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=br.URL||br.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?tF(a.href)?GC(t,e,r):mv(a,a.target="_blank"):mv(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){mv(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(tF(t))GC(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){mv(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:zn(s)!=="object"&&(sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return GC(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(br.HTMLElement)||br.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":zn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=br.URL||br.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xM(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function qC(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Bi(r,n,a,s,e[0],7,-680876936),s=Bi(s,r,n,a,e[1],12,-389564586),a=Bi(a,s,r,n,e[2],17,606105819),n=Bi(n,a,s,r,e[3],22,-1044525330),r=Bi(r,n,a,s,e[4],7,-176418897),s=Bi(s,r,n,a,e[5],12,1200080426),a=Bi(a,s,r,n,e[6],17,-1473231341),n=Bi(n,a,s,r,e[7],22,-45705983),r=Bi(r,n,a,s,e[8],7,1770035416),s=Bi(s,r,n,a,e[9],12,-1958414417),a=Bi(a,s,r,n,e[10],17,-42063),n=Bi(n,a,s,r,e[11],22,-1990404162),r=Bi(r,n,a,s,e[12],7,1804603682),s=Bi(s,r,n,a,e[13],12,-40341101),a=Bi(a,s,r,n,e[14],17,-1502002290),r=Ni(r,n=Bi(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Ni(s,r,n,a,e[6],9,-1069501632),a=Ni(a,s,r,n,e[11],14,643717713),n=Ni(n,a,s,r,e[0],20,-373897302),r=Ni(r,n,a,s,e[5],5,-701558691),s=Ni(s,r,n,a,e[10],9,38016083),a=Ni(a,s,r,n,e[15],14,-660478335),n=Ni(n,a,s,r,e[4],20,-405537848),r=Ni(r,n,a,s,e[9],5,568446438),s=Ni(s,r,n,a,e[14],9,-1019803690),a=Ni(a,s,r,n,e[3],14,-187363961),n=Ni(n,a,s,r,e[8],20,1163531501),r=Ni(r,n,a,s,e[13],5,-1444681467),s=Ni(s,r,n,a,e[2],9,-51403784),a=Ni(a,s,r,n,e[7],14,1735328473),r=ki(r,n=Ni(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=ki(s,r,n,a,e[8],11,-2022574463),a=ki(a,s,r,n,e[11],16,1839030562),n=ki(n,a,s,r,e[14],23,-35309556),r=ki(r,n,a,s,e[1],4,-1530992060),s=ki(s,r,n,a,e[4],11,1272893353),a=ki(a,s,r,n,e[7],16,-155497632),n=ki(n,a,s,r,e[10],23,-1094730640),r=ki(r,n,a,s,e[13],4,681279174),s=ki(s,r,n,a,e[0],11,-358537222),a=ki(a,s,r,n,e[3],16,-722521979),n=ki(n,a,s,r,e[6],23,76029189),r=ki(r,n,a,s,e[9],4,-640364487),s=ki(s,r,n,a,e[12],11,-421815835),a=ki(a,s,r,n,e[15],16,530742520),r=Ii(r,n=ki(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ii(s,r,n,a,e[7],10,1126891415),a=Ii(a,s,r,n,e[14],15,-1416354905),n=Ii(n,a,s,r,e[5],21,-57434055),r=Ii(r,n,a,s,e[12],6,1700485571),s=Ii(s,r,n,a,e[3],10,-1894986606),a=Ii(a,s,r,n,e[10],15,-1051523),n=Ii(n,a,s,r,e[1],21,-2054922799),r=Ii(r,n,a,s,e[8],6,1873313359),s=Ii(s,r,n,a,e[15],10,-30611744),a=Ii(a,s,r,n,e[6],15,-1560198380),n=Ii(n,a,s,r,e[13],21,1309151649),r=Ii(r,n,a,s,e[4],6,-145523070),s=Ii(s,r,n,a,e[11],10,-1120210379),a=Ii(a,s,r,n,e[2],15,718787259),n=Ii(n,a,s,r,e[9],21,-343485551),t[0]=Vd(r,t[0]),t[1]=Vd(n,t[1]),t[2]=Vd(a,t[2]),t[3]=Vd(s,t[3])}function Tw(t,e,r,n,a,s){return e=Vd(Vd(e,t),Vd(n,s)),Vd(e<<a|e>>>32-a,r)}function Bi(t,e,r,n,a,s,i){return Tw(e&r|~e&n,t,e,a,s,i)}function Ni(t,e,r,n,a,s,i){return Tw(e&n|r&~n,t,e,a,s,i)}function ki(t,e,r,n,a,s,i){return Tw(e^r^n,t,e,a,s,i)}function Ii(t,e,r,n,a,s,i){return Tw(r^(e|~n),t,e,a,s,i)}function vM(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)qC(n,mie(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(qC(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,qC(n,a),n}function mie(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Dg=br.atob.bind(br),q_=br.btoa.bind(br);var rF="0123456789abcdef".split("");function pie(t){for(var e="",r=0;r<4;r++)e+=rF[t>>8*r+4&15]+rF[t>>8*r&15];return e}function gie(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function K_(t){return vM(t).map(gie).join("")}var xie=function(t){for(var e=0;e<t.length;e++)t[e]=pie(t[e]);return t.join("")}(vM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vd(t,e){if(xie){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function W_(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length>>0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=t,n=o}else o=n;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nF={print:4,modify:8,copy:16,"annot-forms":32};function H0(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(nF.perm!==void 0)throw new Error("Invalid permission: "+o);a+=nF[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=K_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=W_(this.encryptionKey,this.padding)}function V0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[n]}return e}function aF(t){if(zn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(o){br.console&&sa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sy(t){if(!(this instanceof sy))return new sy(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function yM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rh(t,e,r,n,a){if(!(this instanceof rh))return new rh(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,yM.call(this,n,a)}function $0(t,e,r,n,a){if(!(this instanceof $0))return new $0(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,yM.call(this,n,a)}function ir(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,u="S",d=null;zn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=aF;var b="1.3",y=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(V){b=V};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var B=g.__private__.getPageFormat=function(V){return E[V]};a=a||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},F=k.COMPAT;function U(){this.saveGraphicsState(),we(new Ht(xt,0,0,-xt,0,Os()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",F=k.ADVANCED}function P(){this.restoreGraphicsState(),u="S",F=k.COMPAT}var D=g.__private__.combineFontStyleAndFontWeight=function(V,Ae){if(V=="bold"&&Ae=="normal"||V=="bold"&&Ae==400||V=="normal"&&Ae=="italic"||V=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(V=Ae==400||Ae==="normal"?V==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||V!=="normal"?(Ae==700?"bold":Ae)+""+V:"bold"),V};g.advancedAPI=function(V){var Ae=F===k.COMPAT;return Ae&&U.call(this),typeof V!="function"||(V(this),Ae&&P.call(this)),this},g.compatAPI=function(V){var Ae=F===k.ADVANCED;return Ae&&P.call(this),typeof V!="function"||(V(this),Ae&&U.call(this)),this},g.isAdvancedAPI=function(){return F===k.ADVANCED};var C,S=function(V){if(F!==k.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=g.roundToPrecision=g.__private__.roundToPrecision=function(V,Ae){var Fe=e||Ae;if(isNaN(V)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Fe).replace(/0+$/,"")};C=g.hpf=g.__private__.hpf=typeof l=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,l)}:l==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return N(V,16)};var H=g.f2=g.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return N(V,2)},L=g.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return N(V,3)},I=g.scale=g.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return F===k.COMPAT?V*xt:F===k.ADVANCED?V:void 0},j=function(V){return F===k.COMPAT?Os()-V:F===k.ADVANCED?V:void 0},z=function(V){return I(j(V))};g.__private__.setPrecision=g.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var ne,Z="00000000000000000000000000000000",ee=g.__private__.getFileId=function(){return Z},ae=g.__private__.setFileId=function(V){return Z=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Pn=new H0(d.userPermissions,d.userPassword,d.ownerPassword,Z)),Z};g.setFileId=function(V){return ae(V),this},g.getFileId=function(){return ee()};var G=g.__private__.convertDateToPDFDate=function(V){var Ae=V.getTimezoneOffset(),Fe=Ae<0?"+":"-",Re=Math.floor(Math.abs(Ae/60)),Ve=Math.abs(Ae%60),ot=[Fe,Y(Re),"'",Y(Ve),"'"].join("");return["D:",V.getFullYear(),Y(V.getMonth()+1),Y(V.getDate()),Y(V.getHours()),Y(V.getMinutes()),Y(V.getSeconds()),ot].join("")},K=g.__private__.convertPDFDateToDate=function(V){var Ae=parseInt(V.substr(2,4),10),Fe=parseInt(V.substr(6,2),10)-1,Re=parseInt(V.substr(8,2),10),Ve=parseInt(V.substr(10,2),10),ot=parseInt(V.substr(12,2),10),Et=parseInt(V.substr(14,2),10);return new Date(Ae,Fe,Re,Ve,ot,Et,0)},le=g.__private__.setCreationDate=function(V){var Ae;if(V===void 0&&(V=new Date),V instanceof Date)Ae=G(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=V}return ne=Ae},O=g.__private__.getCreationDate=function(V){var Ae=ne;return V==="jsDate"&&(Ae=K(ne)),Ae};g.setCreationDate=function(V){return le(V),this},g.getCreationDate=function(V){return O(V)};var W,Y=g.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},te=g.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},ce=0,de=[],me=[],ge=0,Se=[],xe=[],ie=!1,Le=me,nt=function(){ce=0,ge=0,me=[],de=[],Se=[],Ee=$n(),_e=$n()};g.__private__.setCustomOutputDestination=function(V){ie=!0,Le=V};var Ie=function(V){ie||(Le=V)};g.__private__.resetCustomOutputDestination=function(){ie=!1,Le=me};var we=g.__private__.out=function(V){return V=V.toString(),ge+=V.length+1,Le.push(V),Le},je=g.__private__.write=function(V){return we(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},et=g.__private__.getArrayBuffer=function(V){for(var Ae=V.length,Fe=new ArrayBuffer(Ae),Re=new Uint8Array(Fe);Ae--;)Re[Ae]=V.charCodeAt(Ae);return Fe},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return st};var mt=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(V){return mt=F===k.ADVANCED?V/xt:V,this};var _t,ut=g.__private__.getFontSize=g.getFontSize=function(){return F===k.COMPAT?mt:mt*xt},Nt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(V){return Nt=V,this},g.__private__.getR2L=g.getR2L=function(){return Nt};var Qt,Yt=g.__private__.setZoomMode=function(V){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))_t=V;else if(isNaN(V)){if(Ae.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');_t=V}else _t=parseInt(V,10)};g.__private__.getZoomMode=function(){return _t};var kt,It=g.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Qt=V};g.__private__.getPageMode=function(){return Qt};var Wt=g.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');kt=V};g.__private__.getLayoutMode=function(){return kt},g.__private__.setDisplayMode=g.setDisplayMode=function(V,Ae,Fe){return Yt(V),Wt(Ae),It(Fe),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(V){if(Object.keys(Dt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[V]},g.__private__.getDocumentProperties=function(){return Dt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(V){for(var Ae in Dt)Dt.hasOwnProperty(Ae)&&V[Ae]&&(Dt[Ae]=V[Ae]);return this},g.__private__.setDocumentProperty=function(V,Ae){if(Object.keys(Dt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[V]=Ae};var Ft,xt,yr,Jt,fn,gr={},Ur={},In=[],Ir={},us={},an={},na={},pa=null,Pr=0,rr=[],zr=new aF(g),As=t.hotfixes||[],Wn={},ba={},Ss=[],Ht=function V(Ae,Fe,Re,Ve,ot,Et){if(!(this instanceof V))return new V(Ae,Fe,Re,Ve,ot,Et);isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(Re)&&(Re=0),isNaN(Ve)&&(Ve=1),isNaN(ot)&&(ot=0),isNaN(Et)&&(Et=0),this._matrix=[Ae,Fe,Re,Ve,ot,Et]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(V)},Ht.prototype.multiply=function(V){var Ae=V.sx*this.sx+V.shy*this.shx,Fe=V.sx*this.shy+V.shy*this.sy,Re=V.shx*this.sx+V.sy*this.shx,Ve=V.shx*this.shy+V.sy*this.sy,ot=V.tx*this.sx+V.ty*this.shx+this.tx,Et=V.tx*this.shy+V.ty*this.sy+this.ty;return new Ht(Ae,Fe,Re,Ve,ot,Et)},Ht.prototype.decompose=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,Et=Math.sqrt(V*V+Ae*Ae),jt=(V/=Et)*Fe+(Ae/=Et)*Re;Fe-=V*jt,Re-=Ae*jt;var T=Math.sqrt(Fe*Fe+Re*Re);return jt/=T,V*(Re/=T)<Ae*(Fe/=T)&&(V=-V,Ae=-Ae,jt=-jt,Et=-Et),{scale:new Ht(Et,0,0,T,0,0),translate:new Ht(1,0,0,1,Ve,ot),rotate:new Ht(V,Ae,-Ae,V,0,0),skew:new Ht(1,0,jt,1,0,0)}},Ht.prototype.toString=function(V){return this.join(" ")},Ht.prototype.inversed=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty,Et=1/(V*Re-Ae*Fe),jt=Re*Et,T=-Ae*Et,X=-Fe*Et,se=V*Et;return new Ht(jt,T,X,se,-jt*Ve-X*ot,-T*Ve-se*ot)},Ht.prototype.applyToPoint=function(V){var Ae=V.x*this.sx+V.y*this.shx+this.tx,Fe=V.x*this.shy+V.y*this.sy+this.ty;return new Jl(Ae,Fe)},Ht.prototype.applyToRectangle=function(V){var Ae=this.applyToPoint(V),Fe=this.applyToPoint(new Jl(V.x+V.w,V.y+V.h));return new Vc(Ae.x,Ae.y,Fe.x-Ae.x,Fe.y-Ae.y)},Ht.prototype.clone=function(){var V=this.sx,Ae=this.shy,Fe=this.shx,Re=this.sy,Ve=this.tx,ot=this.ty;return new Ht(V,Ae,Fe,Re,Ve,ot)},g.Matrix=Ht;var hn=g.matrixMult=function(V,Ae){return Ae.multiply(V)},sn=new Ht(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=sn;var Fn=function(V,Ae){if(!us[V]){var Fe=(Ae instanceof rh?"Sh":"P")+(Object.keys(Ir).length+1).toString(10);Ae.id=Fe,us[V]=Fe,Ir[Fe]=Ae,zr.publish("addPattern",Ae)}};g.ShadingPattern=rh,g.TilingPattern=$0,g.addShadingPattern=function(V,Ae){return S("addShadingPattern()"),Fn(V,Ae),this},g.beginTilingPattern=function(V){S("beginTilingPattern()"),pl(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},g.endTilingPattern=function(V,Ae){S("endTilingPattern()"),Ae.stream=xe[W].join(`
`),Fn(V,Ae),zr.publish("endTilingPattern",Ae),Ss.pop().restore()};var Mn=g.__private__.newObject=function(){var V=$n();return fe(V,!0),V},$n=g.__private__.newObjectDeferred=function(){return ce++,de[ce]=function(){return ge},ce},fe=function(V,Ae){return Ae=typeof Ae=="boolean"&&Ae,de[V]=ge,Ae&&we(V+" 0 obj"),V},Ne=g.__private__.newAdditionalObject=function(){var V={objId:$n(),content:""};return Se.push(V),V},Ee=$n(),_e=$n(),Te=g.__private__.decodeColorString=function(V){var Ae=V.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Fe=parseFloat(Ae[0]);Ae=[Fe,Fe,Fe,"r"]}for(var Re="#",Ve=0;Ve<3;Ve++)Re+=("0"+Math.floor(255*parseFloat(Ae[Ve])).toString(16)).slice(-2);return Re},ke=g.__private__.encodeColorString=function(V){var Ae;typeof V=="string"&&(V={ch1:V});var Fe=V.ch1,Re=V.ch2,Ve=V.ch3,ot=V.ch4,Et=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var jt=new xM(Fe);if(jt.ok)Fe=jt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var T=parseInt(Fe.substr(1),16);Fe=T>>16&255,Re=T>>8&255,Ve=255&T}if(Re===void 0||ot===void 0&&Fe===Re&&Re===Ve)if(typeof Fe=="string")Ae=Fe+" "+Et[0];else switch(V.precision){case 2:Ae=H(Fe/255)+" "+Et[0];break;case 3:default:Ae=L(Fe/255)+" "+Et[0]}else if(ot===void 0||zn(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",Et[1]].join(" ");if(typeof Fe=="string")Ae=[Fe,Re,Ve,Et[1]].join(" ");else switch(V.precision){case 2:Ae=[H(Fe/255),H(Re/255),H(Ve/255),Et[1]].join(" ");break;default:case 3:Ae=[L(Fe/255),L(Re/255),L(Ve/255),Et[1]].join(" ")}}else if(typeof Fe=="string")Ae=[Fe,Re,Ve,ot,Et[2]].join(" ");else switch(V.precision){case 2:Ae=[H(Fe),H(Re),H(Ve),H(ot),Et[2]].join(" ");break;case 3:default:Ae=[L(Fe),L(Re),L(Ve),L(ot),Et[2]].join(" ")}return Ae},qe=g.__private__.getFilters=function(){return i},tt=g.__private__.putStream=function(V){var Ae=(V=V||{}).data||"",Fe=V.filters||qe(),Re=V.alreadyAppliedFilters||[],Ve=V.addLength1||!1,ot=Ae.length,Et=V.objectId,jt=function(mr){return mr};if(d!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jt=Pn.encryptor(Et,0));var T={};Fe===!0&&(Fe=["FlateEncode"]);var X=V.additionalKeyValues||[],se=(T=ir.API.processDataByFilters!==void 0?ir.API.processDataByFilters(Ae,Fe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(T.data.length!==0&&(X.push({key:"Length",value:T.data.length}),Ve===!0&&X.push({key:"Length1",value:ot})),se.length!=0)if(se.split("/").length-1==1)X.push({key:"Filter",value:se});else{X.push({key:"Filter",value:"["+se+"]"});for(var ye=0;ye<X.length;ye+=1)if(X[ye].key==="DecodeParms"){for(var Qe=[],Je=0;Je<T.reverseChain.split("/").length-1;Je+=1)Qe.push("null");Qe.push(X[ye].value),X[ye].value="["+Qe.join(" ")+"]"}}we("<<");for(var St=0;St<X.length;St++)we("/"+X[St].key+" "+X[St].value);we(">>"),T.data.length!==0&&(we("stream"),we(jt(T.data)),we("endstream"))},He=g.__private__.putPage=function(V){var Ae=V.number,Fe=V.data,Re=V.objId,Ve=V.contentsObjId;fe(Re,!0),we("<</Type /Page"),we("/Parent "+V.rootDictionaryObjId+" 0 R"),we("/Resources "+V.resourceDictionaryObjId+" 0 R"),we("/MediaBox ["+parseFloat(C(V.mediaBox.bottomLeftX))+" "+parseFloat(C(V.mediaBox.bottomLeftY))+" "+C(V.mediaBox.topRightX)+" "+C(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&we("/CropBox ["+C(V.cropBox.bottomLeftX)+" "+C(V.cropBox.bottomLeftY)+" "+C(V.cropBox.topRightX)+" "+C(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&we("/BleedBox ["+C(V.bleedBox.bottomLeftX)+" "+C(V.bleedBox.bottomLeftY)+" "+C(V.bleedBox.topRightX)+" "+C(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&we("/TrimBox ["+C(V.trimBox.bottomLeftX)+" "+C(V.trimBox.bottomLeftY)+" "+C(V.trimBox.topRightX)+" "+C(V.trimBox.topRightY)+"]"),V.artBox!==null&&we("/ArtBox ["+C(V.artBox.bottomLeftX)+" "+C(V.artBox.bottomLeftY)+" "+C(V.artBox.topRightX)+" "+C(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&we("/UserUnit "+V.userUnit),zr.publish("putPage",{objId:Re,pageContext:rr[Ae],pageNumber:Ae,page:Fe}),we("/Contents "+Ve+" 0 R"),we(">>"),we("endobj");var ot=Fe.join(`
`);return F===k.ADVANCED&&(ot+=`
Q`),fe(Ve,!0),tt({data:ot,filters:qe(),objectId:Ve}),we("endobj"),Re},We=g.__private__.putPages=function(){var V,Ae,Fe=[];for(V=1;V<=Pr;V++)rr[V].objId=$n(),rr[V].contentsObjId=$n();for(V=1;V<=Pr;V++)Fe.push(He({number:V,data:xe[V],objId:rr[V].objId,contentsObjId:rr[V].contentsObjId,mediaBox:rr[V].mediaBox,cropBox:rr[V].cropBox,bleedBox:rr[V].bleedBox,trimBox:rr[V].trimBox,artBox:rr[V].artBox,userUnit:rr[V].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:_e}));fe(Ee,!0),we("<</Type /Pages");var Re="/Kids [";for(Ae=0;Ae<Pr;Ae++)Re+=Fe[Ae]+" 0 R ";we(Re+"]"),we("/Count "+Pr),we(">>"),we("endobj"),zr.publish("postPutPages")},Ye=function(V){zr.publish("putFont",{font:V,out:we,newObject:Mn,putStream:tt}),V.isAlreadyPutted!==!0&&(V.objectNumber=Mn(),we("<<"),we("/Type /Font"),we("/BaseFont /"+V0(V.postScriptName)),we("/Subtype /Type1"),typeof V.encoding=="string"&&we("/Encoding /"+V.encoding),we("/FirstChar 32"),we("/LastChar 255"),we(">>"),we("endobj"))},yt=function(){for(var V in gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&Ye(gr[V])},Bt=function(V){V.objectNumber=Mn();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[C(V.x),C(V.y),C(V.x+V.width),C(V.y+V.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Fe=V.pages[1].join(`
`);tt({data:Fe,additionalKeyValues:Ae,objectId:V.objectNumber}),we("endobj")},Pt=function(){for(var V in Wn)Wn.hasOwnProperty(V)&&Bt(Wn[V])},Tt=function(V,Ae){var Fe,Re=[],Ve=1/(Ae-1);for(Fe=0;Fe<1;Fe+=Ve)Re.push(Fe);if(Re.push(1),V[0].offset!=0){var ot={offset:0,color:V[0].color};V.unshift(ot)}if(V[V.length-1].offset!=1){var Et={offset:1,color:V[V.length-1].color};V.push(Et)}for(var jt="",T=0,X=0;X<Re.length;X++){for(Fe=Re[X];Fe>V[T+1].offset;)T++;var se=V[T].offset,ye=(Fe-se)/(V[T+1].offset-se),Qe=V[T].color,Je=V[T+1].color;jt+=te(Math.round((1-ye)*Qe[0]+ye*Je[0]).toString(16))+te(Math.round((1-ye)*Qe[1]+ye*Je[1]).toString(16))+te(Math.round((1-ye)*Qe[2]+ye*Je[2]).toString(16))}return jt.trim()},Rt=function(V,Ae){Ae||(Ae=21);var Fe=Mn(),Re=Tt(V.colors,Ae),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+Ae+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt({data:Re,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),we("endobj"),V.objectNumber=Mn(),we("<< /ShadingType "+V.type),we("/ColorSpace /DeviceRGB");var ot="/Coords ["+C(parseFloat(V.coords[0]))+" "+C(parseFloat(V.coords[1]))+" ";V.type===2?ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3])):ot+=C(parseFloat(V.coords[2]))+" "+C(parseFloat(V.coords[3]))+" "+C(parseFloat(V.coords[4]))+" "+C(parseFloat(V.coords[5])),we(ot+="]"),V.matrix&&we("/Matrix ["+V.matrix.toString()+"]"),we("/Function "+Fe+" 0 R"),we("/Extend [true true]"),we(">>"),we("endobj")},Ar=function(V,Ae){var Fe=$n(),Re=Mn();Ae.push({resourcesOid:Fe,objectOid:Re}),V.objectNumber=Re;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+V.boundingBox.map(C).join(" ")+"]"}),Ve.push({key:"XStep",value:C(V.xStep)}),Ve.push({key:"YStep",value:C(V.yStep)}),Ve.push({key:"Resources",value:Fe+" 0 R"}),V.matrix&&Ve.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),tt({data:V.stream,additionalKeyValues:Ve,objectId:V.objectNumber}),we("endobj")},jr=function(V){var Ae;for(Ae in Ir)Ir.hasOwnProperty(Ae)&&(Ir[Ae]instanceof rh?Rt(Ir[Ae]):Ir[Ae]instanceof $0&&Ar(Ir[Ae],V))},Or=function(V){for(var Ae in V.objectNumber=Mn(),we("<<"),V)switch(Ae){case"opacity":we("/ca "+H(V[Ae]));break;case"stroke-opacity":we("/CA "+H(V[Ae]))}we(">>"),we("endobj")},Gr=function(){var V;for(V in an)an.hasOwnProperty(V)&&Or(an[V])},Fa=function(){for(var V in we("/XObject <<"),Wn)Wn.hasOwnProperty(V)&&Wn[V].objectNumber>=0&&we("/"+V+" "+Wn[V].objectNumber+" 0 R");zr.publish("putXobjectDict"),we(">>")},mi=function(){Pn.oid=Mn(),we("<<"),we("/Filter /Standard"),we("/V "+Pn.v),we("/R "+Pn.r),we("/U <"+Pn.toHexString(Pn.U)+">"),we("/O <"+Pn.toHexString(Pn.O)+">"),we("/P "+Pn.P),we(">>"),we("endobj")},Da=function(){for(var V in we("/Font <<"),gr)gr.hasOwnProperty(V)&&(h===!1||h===!0&&m.hasOwnProperty(V))&&we("/"+V+" "+gr[V].objectNumber+" 0 R");we(">>")},ds=function(){if(Object.keys(Ir).length>0){for(var V in we("/Shading <<"),Ir)Ir.hasOwnProperty(V)&&Ir[V]instanceof rh&&Ir[V].objectNumber>=0&&we("/"+V+" "+Ir[V].objectNumber+" 0 R");zr.publish("putShadingPatternDict"),we(">>")}},qa=function(V){if(Object.keys(Ir).length>0){for(var Ae in we("/Pattern <<"),Ir)Ir.hasOwnProperty(Ae)&&Ir[Ae]instanceof g.TilingPattern&&Ir[Ae].objectNumber>=0&&Ir[Ae].objectNumber<V&&we("/"+Ae+" "+Ir[Ae].objectNumber+" 0 R");zr.publish("putTilingPatternDict"),we(">>")}},Ts=function(){if(Object.keys(an).length>0){var V;for(V in we("/ExtGState <<"),an)an.hasOwnProperty(V)&&an[V].objectNumber>=0&&we("/"+V+" "+an[V].objectNumber+" 0 R");zr.publish("putGStateDict"),we(">>")}},Xn=function(V){fe(V.resourcesOid,!0),we("<<"),we("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Da(),ds(),qa(V.objectOid),Ts(),Fa(),we(">>"),we("endobj")},fs=function(){var V=[];yt(),Gr(),Pt(),jr(V),zr.publish("putResources"),V.forEach(Xn),Xn({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),zr.publish("postPutResources")},Pc=function(){zr.publish("putAdditionalObjects");for(var V=0;V<Se.length;V++){var Ae=Se[V];fe(Ae.objId,!0),we(Ae.content),we("endobj")}zr.publish("postPutAdditionalObjects")},GA=function(V){Ur[V.fontName]=Ur[V.fontName]||{},Ur[V.fontName][V.fontStyle]=V.id},ol=function(V,Ae,Fe,Re,Ve){var ot={id:"F"+(Object.keys(gr).length+1).toString(10),postScriptName:V,fontName:Ae,fontStyle:Fe,encoding:Re,isStandardFont:Ve||!1,metadata:{}};return zr.publish("addFont",{font:ot,instance:this}),gr[ot.id]=ot,GA(ot),ot.id},Ou=function(V){for(var Ae=0,Fe=st.length;Ae<Fe;Ae++){var Re=ol.call(this,V[Ae][0],V[Ae][1],V[Ae][2],st[Ae][3],!0);h===!1&&(m[Re]=!0);var Ve=V[Ae][0].split("-");GA({id:Re,fontName:Ve[0],fontStyle:Ve[1]||""})}zr.publish("addFonts",{fonts:gr,dictionary:Ur})},Bs=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Re){var Ae=Re.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Fe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Re.message;if(!br.console)throw new Error(Fe);br.console.error(Fe,Re),br.alert&&alert(Fe)}},V.foo.bar=V,V.foo},jc=function(V,Ae){var Fe,Re,Ve,ot,Et,jt,T,X,se;if(Ve=(Ae=Ae||{}).sourceEncoding||"Unicode",Et=Ae.outputEncoding,(Ae.autoencode||Et)&&gr[Ft].metadata&&gr[Ft].metadata[Ve]&&gr[Ft].metadata[Ve].encoding&&(ot=gr[Ft].metadata[Ve].encoding,!Et&&gr[Ft].encoding&&(Et=gr[Ft].encoding),!Et&&ot.codePages&&(Et=ot.codePages[0]),typeof Et=="string"&&(Et=ot[Et]),Et)){for(T=!1,jt=[],Fe=0,Re=V.length;Fe<Re;Fe++)(X=Et[V.charCodeAt(Fe)])?jt.push(String.fromCharCode(X)):jt.push(V[Fe]),jt[Fe].charCodeAt(0)>>8&&(T=!0);V=jt.join("")}for(Fe=V.length;T===void 0&&Fe!==0;)V.charCodeAt(Fe-1)>>8&&(T=!0),Fe--;if(!T)return V;for(jt=Ae.noBOM?[]:[254,255],Fe=0,Re=V.length;Fe<Re;Fe++){if((se=(X=V.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(se),jt.push(X-(se<<8))}return String.fromCharCode.apply(void 0,jt)},mn=g.__private__.pdfEscape=g.pdfEscape=function(V,Ae){return jc(V,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ns=g.__private__.beginPage=function(V){xe[++Pr]=[],rr[Pr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},so(Pr),Ie(xe[W])},ll=function(V,Ae){var Fe,Re,Ve;switch(r=Ae||r,typeof V=="string"&&(Fe=B(V.toLowerCase()),Array.isArray(Fe)&&(Re=Fe[0],Ve=Fe[1])),Array.isArray(V)&&(Re=V[0]*xt,Ve=V[1]*xt),isNaN(Re)&&(Re=a[0],Ve=a[1]),(Re>14400||Ve>14400)&&(sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),Ve=Math.min(14400,Ve)),a=[Re,Ve],r.substr(0,1)){case"l":Ve>Re&&(a=[Ve,Re]);break;case"p":Re>Ve&&(a=[Ve,Re])}Ns(a),zu(dl),we(ks),Gu!==0&&we(Gu+" J"),Yl!==0&&we(Yl+" j"),zr.publish("addPage",{pageNumber:Pr})},cl=function(V){V>0&&V<=Pr&&(xe.splice(V,1),rr.splice(V,1),Pr--,W>Pr&&(W=Pr),this.setPage(W))},so=function(V){V>0&&V<=Pr&&(W=V)},En=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return xe.length-1},ul=function(V,Ae,Fe){var Re,Ve=void 0;return Fe=Fe||{},V=V!==void 0?V:gr[Ft].fontName,Ae=Ae!==void 0?Ae:gr[Ft].fontStyle,Re=V.toLowerCase(),Ur[Re]!==void 0&&Ur[Re][Ae]!==void 0?Ve=Ur[Re][Ae]:Ur[V]!==void 0&&Ur[V][Ae]!==void 0?Ve=Ur[V][Ae]:Fe.disableWarning===!1&&sa.warn("Unable to look up font label for font '"+V+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ve||Fe.noFallback||(Ve=Ur.times[Ae])==null&&(Ve=Ur.times.normal),Ve},pi=g.__private__.putInfo=function(){var V=Mn(),Ae=function(Re){return Re};for(var Fe in d!==null&&(Ae=Pn.encryptor(V,0)),we("<<"),we("/Producer ("+mn(Ae("jsPDF "+ir.version))+")"),Dt)Dt.hasOwnProperty(Fe)&&Dt[Fe]&&we("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+mn(Ae(Dt[Fe]))+")");we("/CreationDate ("+mn(Ae(ne))+")"),we(">>"),we("endobj")},Io=g.__private__.putCatalog=function(V){var Ae=(V=V||{}).rootDictionaryObjId||Ee;switch(Mn(),we("<<"),we("/Type /Catalog"),we("/Pages "+Ae+" 0 R"),_t||(_t="fullwidth"),_t){case"fullwidth":we("/OpenAction [3 0 R /FitH null]");break;case"fullheight":we("/OpenAction [3 0 R /FitV null]");break;case"fullpage":we("/OpenAction [3 0 R /Fit]");break;case"original":we("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+_t;Fe.substr(Fe.length-1)==="%"&&(_t=parseInt(_t)/100),typeof _t=="number"&&we("/OpenAction [3 0 R /XYZ null null "+H(_t)+"]")}switch(kt||(kt="continuous"),kt){case"continuous":we("/PageLayout /OneColumn");break;case"single":we("/PageLayout /SinglePage");break;case"two":case"twoleft":we("/PageLayout /TwoColumnLeft");break;case"tworight":we("/PageLayout /TwoColumnRight")}Qt&&we("/PageMode /"+Qt),zr.publish("putCatalog"),we(">>"),we("endobj")},qA=g.__private__.putTrailer=function(){we("trailer"),we("<<"),we("/Size "+(ce+1)),we("/Root "+ce+" 0 R"),we("/Info "+(ce-1)+" 0 R"),d!==null&&we("/Encrypt "+Pn.oid+" 0 R"),we("/ID [ <"+Z+"> <"+Z+"> ]"),we(">>")},Qu=g.__private__.putHeader=function(){we("%PDF-"+b),we("%ºß¬à")},Hu=g.__private__.putXRef=function(){var V="0000000000";we("xref"),we("0 "+(ce+1)),we("0000000000 65535 f ");for(var Ae=1;Ae<=ce;Ae++)typeof de[Ae]=="function"?we((V+de[Ae]()).slice(-10)+" 00000 n "):de[Ae]!==void 0?we((V+de[Ae]).slice(-10)+" 00000 n "):we("0000000000 00000 n ")},Fo=g.__private__.buildDocument=function(){nt(),Ie(me),zr.publish("buildDocument"),Qu(),We(),Pc(),fs(),d!==null&&mi(),pi(),Io();var V=ge;return Hu(),qA(),we("startxref"),we(""+V),we("%%EOF"),Ie(xe[W]),me.join(`
`)},Oc=g.__private__.getBlob=function(V){return new Blob([et(V)],{type:"application/pdf"})},Do=g.output=g.__private__.output=Bs(function(V,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",V){case void 0:return Fo();case"save":g.save(Ae.filename);break;case"arraybuffer":return et(Fo());case"blob":return Oc(Fo());case"bloburi":case"bloburl":if(br.URL!==void 0&&typeof br.URL.createObjectURL=="function")return br.URL&&br.URL.createObjectURL(Oc(Fo()))||void 0;sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Re=Fo();try{Fe=q_(Re)}catch{Fe=q_(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(br)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ve=Ae.pdfObjectUrl,ot="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",jt=br.open();return jt!==null&&jt.document.write(Et),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(br)==="[object Window]"){var T='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',X=br.open();if(X!==null){X.document.write(T);var se=this;X.document.documentElement.querySelector("#pdfViewer").onload=function(){X.document.title=Ae.filename,X.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return X}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Qe=br.open();if(Qe!==null&&(Qe.document.write(ye),Qe.document.title=Ae.filename),Qe||typeof safari>"u")return Qe;break;case"datauri":case"dataurl":return br.document.location.href=this.output("datauristring",Ae);default:return null}}),io=function(V){return Array.isArray(As)===!0&&As.indexOf(V)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=io("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var Pn=null;le(),ae();var Ro=function(V){return d!==null?Pn.encryptor(V,0):function(Ae){return Ae}},oo=g.__private__.getPageInfo=g.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rr[V].objId,pageNumber:V,pageContext:rr[V]}},hr=g.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in rr)if(rr[Ae].objId===V)break;return oo(Ae)},lo=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:rr[W].objId,pageNumber:W,pageContext:rr[W]}};g.addPage=function(){return ll.apply(this,arguments),this},g.setPage=function(){return so.apply(this,arguments),Ie.call(this,xe[W]),this},g.insertPage=function(V){return this.addPage(),this.movePage(W,V),this},g.movePage=function(V,Ae){var Fe,Re;if(V>Ae){Fe=xe[V],Re=rr[V];for(var Ve=V;Ve>Ae;Ve--)xe[Ve]=xe[Ve-1],rr[Ve]=rr[Ve-1];xe[Ae]=Fe,rr[Ae]=Re,this.setPage(Ae)}else if(V<Ae){Fe=xe[V],Re=rr[V];for(var ot=V;ot<Ae;ot++)xe[ot]=xe[ot+1],rr[ot]=rr[ot+1];xe[Ae]=Fe,rr[Ae]=Re,this.setPage(Ae)}return this},g.deletePage=function(){return cl.apply(this,arguments),this},g.__private__.text=g.text=function(V,Ae,Fe,Re,Ve){var ot,Et,jt,T,X,se,ye,Qe,Je,St=(Re=Re||{}).scope||this;if(typeof V=="number"&&typeof Ae=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var mr=Fe;Fe=Ae,Ae=V,V=mr}if(arguments[3]instanceof Ht?(S("The transform parameter of text() with a Matrix value"),Je=Ve):(jt=arguments[4],T=arguments[5],zn(ye=arguments[3])==="object"&&ye!==null||(typeof jt=="string"&&(T=jt,jt=null),typeof ye=="string"&&(T=ye,ye=null),typeof ye=="number"&&(jt=ye,ye=null),Re={flags:ye,angle:jt,align:T})),isNaN(Ae)||isNaN(Fe)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return St;var Zr="",Nr=!1,_n=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Jr,Dn=St.internal.scaleFactor;function fo(Kr){return Kr=Kr.split("	").join(Array(Re.TabLen||9).join(" ")),mn(Kr,ye)}function Ca(Kr){for(var Wr,Yn=Kr.concat(),Ea=[],mo=Yn.length;mo--;)typeof(Wr=Yn.shift())=="string"?Ea.push(Wr):Array.isArray(Kr)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?Ea.push(Wr[0]):Ea.push([Wr[0],Wr[1],Wr[2]]);return Ea}function yi(Kr,Wr){var Yn;if(typeof Kr=="string")Yn=Wr(Kr)[0];else if(Array.isArray(Kr)){for(var Ea,mo,eu=Kr.concat(),tu=[],nc=eu.length;nc--;)typeof(Ea=eu.shift())=="string"?tu.push(Wr(Ea)[0]):Array.isArray(Ea)&&typeof Ea[0]=="string"&&(mo=Wr(Ea[0],Ea[1],Ea[2]),tu.push([mo[0],mo[1],mo[2]]));Yn=tu}return Yn}var xl=!1,Gc=!0;if(typeof V=="string")xl=!0;else if(Array.isArray(V)){var XA=V.concat();Et=[];for(var qu,Ka=XA.length;Ka--;)(typeof(qu=XA.shift())!="string"||Array.isArray(qu)&&typeof qu[0]!="string")&&(Gc=!1);xl=Gc}if(xl===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var qc=mt/St.internal.scaleFactor,Ku=qc*(_n-1);switch(Re.baseline){case"bottom":Fe-=Ku;break;case"top":Fe+=qc-Ku;break;case"hanging":Fe+=qc-2*Ku;break;case"middle":Fe+=qc/2-Ku}if((se=Re.maxWidth||0)>0&&(typeof V=="string"?V=St.splitTextToSize(V,se):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Kr,Wr){return Kr.concat(St.splitTextToSize(Wr,se))},[]))),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:mn,activeFontKey:Ft,fonts:gr,activeFontSize:mt}},zr.publish("preProcessText",ot),V=ot.text,jt=(Re=ot.options).angle,!(Je instanceof Ht)&&jt&&typeof jt=="number"){jt*=Math.PI/180,Re.rotationDirection===0&&(jt=-jt),F===k.ADVANCED&&(jt=-jt);var Wu=Math.cos(jt),YA=Math.sin(jt);Je=new Ht(Wu,YA,-YA,Wu,0,0)}else jt&&jt instanceof Ht&&(Je=jt);F!==k.ADVANCED||Je||(Je=sn),(X=Re.charSpace||Xl)!==void 0&&(Zr+=C(I(X))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qe=Re.horizontalScale)!==void 0&&(Zr+=C(100*Qe)+` Tz
`),Re.lang;var wi=-1,np=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,Tf=St.internal.getCurrentPageInfo().pageContext;switch(np){case 0:case!1:case"fill":wi=0;break;case 1:case!0:case"stroke":wi=1;break;case 2:case"fillThenStroke":wi=2;break;case 3:case"invisible":wi=3;break;case 4:case"fillAndAddForClipping":wi=4;break;case 5:case"strokeAndAddPathForClipping":wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":wi=6;break;case 7:case"addToPathForClipping":wi=7}var Gh=Tf.usedRenderingMode!==void 0?Tf.usedRenderingMode:-1;wi!==-1?Zr+=wi+` Tr
`:Gh!==-1&&(Zr+=`0 Tr
`),wi!==-1&&(Tf.usedRenderingMode=wi),T=Re.align||"left";var ho,hs=mt*_n,Kc=St.internal.pageSize.getWidth(),Bf=gr[Ft];X=Re.charSpace||Xl,se=Re.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var tc=[],Wc=function(Kr){return St.getStringUnitWidth(Kr,{font:Bf,charSpace:X,fontSize:mt,doKerning:!1})*mt/Dn};if(Object.prototype.toString.call(V)==="[object Array]"){var ti;Et=Ca(V),T!=="left"&&(ho=Et.map(Wc));var Is,$c=0;if(T==="right"){Ae-=ho[0],V=[],Ka=Et.length;for(var bi=0;bi<Ka;bi++)bi===0?(Is=js(Ae),ti=La(Fe)):(Is=I($c-ho[bi]),ti=-hs),V.push([Et[bi],Is,ti]),$c=ho[bi]}else if(T==="center"){Ae-=ho[0]/2,V=[],Ka=Et.length;for(var Po=0;Po<Ka;Po++)Po===0?(Is=js(Ae),ti=La(Fe)):(Is=I(($c-ho[Po])/2),ti=-hs),V.push([Et[Po],Is,ti]),$c=ho[Po]}else if(T==="left"){V=[],Ka=Et.length;for(var vl=0;vl<Ka;vl++)V.push(Et[vl])}else if(T==="justify"&&Bf.encoding==="Identity-H"){V=[],Ka=Et.length,se=se!==0?se:Kc;for(var jo=0,ga=0;ga<Ka;ga++)if(ti=ga===0?La(Fe):-hs,Is=ga===0?js(Ae):jo,ga<Ka-1){var Oo=I((se-ho[ga])/(Et[ga].split(" ").length-1)),Ua=Et[ga].split(" ");V.push([Ua[0]+" ",Is,ti]),jo=0;for(var Ci=1;Ci<Ua.length;Ci++){var $u=(Wc(Ua[Ci-1]+" "+Ua[Ci])-Wc(Ua[Ci]))*Dn+Oo;Ci==Ua.length-1?V.push([Ua[Ci],$u,0]):V.push([Ua[Ci]+" ",$u,0]),jo-=$u}}else V.push([Et[ga],Is,ti]);V.push(["",jo,0])}else{if(T!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Ka=Et.length,se=se!==0?se:Kc,ga=0;ga<Ka;ga++)ti=ga===0?La(Fe):-hs,Is=ga===0?js(Ae):0,ga<Ka-1?tc.push(C(I((se-ho[ga])/(Et[ga].split(" ").length-1)))):tc.push(0),V.push([Et[ga],Is,ti])}}var yl=typeof Re.R2L=="boolean"?Re.R2L:Nt;yl===!0&&(V=yi(V,function(Kr,Wr,Yn){return[Kr.split("").reverse().join(""),Wr,Yn]})),ot={text:V,x:Ae,y:Fe,options:Re,mutex:{pdfEscape:mn,activeFontKey:Ft,fonts:gr,activeFontSize:mt}},zr.publish("postProcessText",ot),V=ot.text,Nr=ot.mutex.isHex||!1;var JA=gr[Ft].encoding;JA!=="WinAnsiEncoding"&&JA!=="StandardEncoding"||(V=yi(V,function(Kr,Wr,Yn){return[fo(Kr),Wr,Yn]})),Et=Ca(V),V=[];for(var Xc,Yc,Jc,Xu=0,ZA=1,Zc=Array.isArray(Et[0])?ZA:Xu,rc="",Yu=function(Kr,Wr,Yn){var Ea="";return Yn instanceof Ht?(Yn=typeof Re.angle=="number"?hn(Yn,new Ht(1,0,0,1,Kr,Wr)):hn(new Ht(1,0,0,1,Kr,Wr),Yn),F===k.ADVANCED&&(Yn=hn(new Ht(1,0,0,-1,0,0),Yn)),Ea=Yn.join(" ")+` Tm
`):Ea=C(Kr)+" "+C(Wr)+` Td
`,Ea},xa=0;xa<Et.length;xa++){switch(rc="",Zc){case ZA:Jc=(Nr?"<":"(")+Et[xa][0]+(Nr?">":")"),Xc=parseFloat(Et[xa][1]),Yc=parseFloat(Et[xa][2]);break;case Xu:Jc=(Nr?"<":"(")+Et[xa]+(Nr?">":")"),Xc=js(Ae),Yc=La(Fe)}tc!==void 0&&tc[xa]!==void 0&&(rc=tc[xa]+` Tw
`),xa===0?V.push(rc+Yu(Xc,Yc,Je)+Jc):Zc===Xu?V.push(rc+Jc):Zc===ZA&&V.push(rc+Yu(Xc,Yc,Je)+Jc)}V=Zc===Xu?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var $i=`BT
/`;return $i+=Ft+" "+mt+` Tf
`,$i+=C(mt*_n)+` TL
`,$i+=Uo+`
`,$i+=Zr,$i+=V,we($i+="ET"),m[Ft]=!0,St};var KA=g.__private__.clip=g.clip=function(V){return we(V==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return KA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return we("n"),this};var Ms=g.__private__.isValidStyle=function(V){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(V){return Ms(V)&&(u=V),this};var gi=g.__private__.getStyle=g.getStyle=function(V){var Ae=u;switch(V){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=V}return Ae},ei=g.close=function(){return we("h"),this};g.stroke=function(){return we("S"),this},g.fill=function(V){return co("f",V),this},g.fillEvenOdd=function(V){return co("f*",V),this},g.fillStroke=function(V){return co("B",V),this},g.fillStrokeEvenOdd=function(V){return co("B*",V),this};var co=function(V,Ae){zn(Ae)==="object"?Lo(Ae,V):we(V)},xi=function(V){V===null||F===k.ADVANCED&&V===void 0||(V=gi(V),we(V))};function Al(V,Ae,Fe,Re,Ve){var ot=new $0(Ae||this.boundingBox,Fe||this.xStep,Re||this.yStep,this.gState,Ve||this.matrix);ot.stream=this.stream;var Et=V+"$$"+this.cloneIndex+++"$$";return Fn(Et,ot),ot}var Lo=function(V,Ae){var Fe=us[V.key],Re=Ir[Fe];if(Re instanceof rh)we("q"),we(Vu(Ae)),Re.gState&&g.setGState(Re.gState),we(V.matrix.toString()+" cm"),we("/"+Fe+" sh"),we("Q");else if(Re instanceof $0){var Ve=new Ht(1,0,0,-1,0,Os());V.matrix&&(Ve=Ve.multiply(V.matrix||sn),Fe=Al.call(Re,V.key,V.boundingBox,V.xStep,V.yStep,Ve).id),we("q"),we("/Pattern cs"),we("/"+Fe+" scn"),Re.gState&&g.setGState(Re.gState),we(Ae),we("Q")}},Vu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vi=g.moveTo=function(V,Ae){return we(C(I(V))+" "+C(z(Ae))+" m"),this},Ps=g.lineTo=function(V,Ae){return we(C(I(V))+" "+C(z(Ae))+" l"),this},uo=g.curveTo=function(V,Ae,Fe,Re,Ve,ot){return we([C(I(V)),C(z(Ae)),C(I(Fe)),C(z(Re)),C(I(Ve)),C(z(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!Ms(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return F===k.COMPAT?this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1],Ve||"S"):this.lines([[Fe-V,Re-Ae]],V,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(V,Ae,Fe,Re,Ve,ot){var Et,jt,T,X,se,ye,Qe,Je,St,mr,Zr,Nr;if(typeof V=="number"&&(Nr=Fe,Fe=Ae,Ae=V,V=Nr),Re=Re||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Fe)||!Array.isArray(V)||!Array.isArray(Re)||!Ms(Ve)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vi(Ae,Fe),Et=Re[0],jt=Re[1],X=V.length,mr=Ae,Zr=Fe,T=0;T<X;T++)(se=V[T]).length===2?(mr=se[0]*Et+mr,Zr=se[1]*jt+Zr,Ps(mr,Zr)):(ye=se[0]*Et+mr,Qe=se[1]*jt+Zr,Je=se[2]*Et+mr,St=se[3]*jt+Zr,mr=se[4]*Et+mr,Zr=se[5]*jt+Zr,uo(ye,Qe,Je,St,mr,Zr));return ot&&ei(),xi(Ve),this},g.path=function(V){for(var Ae=0;Ae<V.length;Ae++){var Fe=V[Ae],Re=Fe.c;switch(Fe.op){case"m":vi(Re[0],Re[1]);break;case"l":Ps(Re[0],Re[1]);break;case"c":uo.apply(this,Re);break;case"h":ei()}}return this},g.__private__.rect=g.rect=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!Ms(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return F===k.COMPAT&&(Re=-Re),we([C(I(V)),C(z(Ae)),C(I(Fe)),C(I(Re)),"re"].join(" ")),xi(Ve),this},g.__private__.triangle=g.triangle=function(V,Ae,Fe,Re,Ve,ot,Et){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!Ms(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-V,Re-Ae],[Ve-Fe,ot-Re],[V-Ve,Ae-ot]],V,Ae,[1,1],Et,!0),this},g.__private__.roundedRect=g.roundedRect=function(V,Ae,Fe,Re,Ve,ot,Et){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||isNaN(Ve)||isNaN(ot)||!Ms(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Fe),ot=Math.min(ot,.5*Re),this.lines([[Fe-2*Ve,0],[Ve*jt,0,Ve,ot-ot*jt,Ve,ot],[0,Re-2*ot],[0,ot*jt,-Ve*jt,ot,-Ve,ot],[2*Ve-Fe,0],[-Ve*jt,0,-Ve,-ot*jt,-Ve,-ot],[0,2*ot-Re],[0,-ot*jt,Ve*jt,-ot,Ve,-ot]],V+Ve,Ae,[1,1],Et,!0),this},g.__private__.ellipse=g.ellipse=function(V,Ae,Fe,Re,Ve){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||isNaN(Re)||!Ms(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Fe,Et=4/3*(Math.SQRT2-1)*Re;return vi(V+Fe,Ae),uo(V+Fe,Ae-Et,V+ot,Ae-Re,V,Ae-Re),uo(V-ot,Ae-Re,V-Fe,Ae-Et,V-Fe,Ae),uo(V-Fe,Ae+Et,V-ot,Ae+Re,V,Ae+Re),uo(V+ot,Ae+Re,V+Fe,Ae+Et,V+Fe,Ae),xi(Ve),this},g.__private__.circle=g.circle=function(V,Ae,Fe,Re){if(isNaN(V)||isNaN(Ae)||isNaN(Fe)||!Ms(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ae,Fe,Fe,Re)},g.setFont=function(V,Ae,Fe){return Fe&&(Ae=D(Ae,Fe)),Ft=ul(V,Ae,{disableWarning:!1}),this};var Ra=g.__private__.getFont=g.getFont=function(){return gr[ul.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var V,Ae,Fe={};for(V in Ur)if(Ur.hasOwnProperty(V))for(Ae in Fe[V]=[],Ur[V])Ur[V].hasOwnProperty(Ae)&&Fe[V].push(Ae);return Fe},g.addFont=function(V,Ae,Fe,Re,Ve){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Fe=D(Fe,Re)),Ve=Ve||"Identity-H",ol.call(this,V,Ae,Fe,Ve)};var Jr,dl=t.lineWidth||.200025,Ao=g.__private__.getLineWidth=g.getLineWidth=function(){return dl},zu=g.__private__.setLineWidth=g.setLineWidth=function(V){return dl=V,we(C(I(V))+" w"),this};g.__private__.setLineDash=ir.API.setLineDash=ir.API.setLineDashPattern=function(V,Ae){if(V=V||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(Fe){return C(I(Fe))}).join(" "),Ae=C(I(Ae)),we("["+V+"] "+Ae+" d"),this};var Wl=g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Jr};g.__private__.getLineHeight=g.getLineHeight=function(){return mt*Jr};var $l=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Jr=V),this},Wi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Jr};$l(t.lineHeight);var js=g.__private__.getHorizontalCoordinate=function(V){return I(V)},La=g.__private__.getVerticalCoordinate=function(V){return F===k.ADVANCED?V:rr[W].mediaBox.topRightY-rr[W].mediaBox.bottomLeftY-I(V)},WA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(V){return C(js(V))},fl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(V){return C(La(V))},ks=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Te(ks)},g.__private__.setStrokeColor=g.setDrawColor=function(V,Ae,Fe,Re){return ks=ke({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"draw",precision:2}),we(ks),this};var hl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Te(hl)},g.__private__.setFillColor=g.setFillColor=function(V,Ae,Fe,Re){return hl=ke({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"fill",precision:2}),we(hl),this};var Uo=t.textColor||"0 g",Qc=g.__private__.getTextColor=g.getTextColor=function(){return Te(Uo)};g.__private__.setTextColor=g.setTextColor=function(V,Ae,Fe,Re){return Uo=ke({ch1:V,ch2:Ae,ch3:Fe,ch4:Re,pdfColorType:"text",precision:3}),this};var Xl=t.charSpace,Hc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Xl||0)};g.__private__.setCharSpace=g.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xl=V,this};var Gu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gu=Ae,we(Ae+" J"),this};var Yl=0;g.__private__.setLineJoin=g.setLineJoin=function(V){var Ae=g.CapJoinStyles[V];if(Ae===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=Ae,we(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return we(C(I(V))+" M"),this},g.GState=sy,g.setGState=function(V){(V=typeof V=="string"?an[na[V]]:ml(null,V)).equals(pa)||(we("/"+V.id+" gs"),pa=V)};var ml=function(V,Ae){if(!V||!na[V]){var Fe=!1;for(var Re in an)if(an.hasOwnProperty(Re)&&an[Re].equals(Ae)){Fe=!0;break}if(Fe)Ae=an[Re];else{var Ve="GS"+(Object.keys(an).length+1).toString(10);an[Ve]=Ae,Ae.id=Ve}return V&&(na[V]=Ae.id),zr.publish("addGState",Ae),Ae}};g.addGState=function(V,Ae){return ml(V,Ae),this},g.saveGraphicsState=function(){return we("q"),In.push({key:Ft,size:mt,color:Uo}),this},g.restoreGraphicsState=function(){we("Q");var V=In.pop();return Ft=V.key,mt=V.size,Uo=V.color,pa=null,this},g.setCurrentTransformationMatrix=function(V){return we(V.toString()+" cm"),this},g.comment=function(V){return we("#"+V),this};var Jl=function(V,Ae){var Fe=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(ot){isNaN(ot)||(Fe=parseFloat(ot))}});var Re=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(ot){isNaN(ot)||(Re=parseFloat(ot))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ot){Ve=ot.toString()}}),this},Vc=function(V,Ae,Fe,Re){Jl.call(this,V,Ae),this.type="rect";var Ve=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(Et){isNaN(Et)||(Ve=parseFloat(Et))}});var ot=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(Et){isNaN(Et)||(ot=parseFloat(Et))}}),this},Zl=function(){this.page=Pr,this.currentPage=W,this.pages=xe.slice(0),this.pagesContext=rr.slice(0),this.x=yr,this.y=Jt,this.matrix=fn,this.width=gl(W),this.height=Os(W),this.outputDestination=Le,this.id="",this.objectNumber=-1};Zl.prototype.restore=function(){Pr=this.page,W=this.currentPage,rr=this.pagesContext,xe=this.pages,yr=this.x,Jt=this.y,fn=this.matrix,ec(W,this.width),zc(W,this.height),Le=this.outputDestination};var pl=function(V,Ae,Fe,Re,Ve){Ss.push(new Zl),Pr=W=0,xe=[],yr=V,Jt=Ae,fn=Ve,Ns([Fe,Re])},$A=function(V){if(ba[V])Ss.pop().restore();else{var Ae=new Zl,Fe="Xo"+(Object.keys(Wn).length+1).toString(10);Ae.id=Fe,ba[V]=Fe,Wn[Fe]=Ae,zr.publish("addFormObject",Ae),Ss.pop().restore()}};for(var Mo in g.beginFormObject=function(V,Ae,Fe,Re,Ve){return pl(V,Ae,Fe,Re,Ve),this},g.endFormObject=function(V){return $A(V),this},g.doFormObject=function(V,Ae){var Fe=Wn[ba[V]];return we("q"),we(Ae.toString()+" cm"),we("/"+Fe.id+" Do"),we("Q"),this},g.getFormObject=function(V){var Ae=Wn[ba[V]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(V,Ae){return V=V||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(Zf(Oc(Fo()),V),typeof Zf.unload=="function"&&br.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(Fe,Re){try{var Ve=Zf(Oc(Fo()),V);typeof Zf.unload=="function"&&br.setTimeout&&setTimeout(Zf.unload,911),Fe(Ve)}catch(ot){Re(ot.message)}})},ir.API)ir.API.hasOwnProperty(Mo)&&(Mo==="events"&&ir.API.events.length?function(V,Ae){var Fe,Re,Ve;for(Ve=Ae.length-1;Ve!==-1;Ve--)Fe=Ae[Ve][0],Re=Ae[Ve][1],V.subscribe.apply(V,[Fe].concat(typeof Re=="function"?[Re]:Re))}(zr,ir.API.events):g[Mo]=ir.API[Mo]);var gl=g.getPageWidth=function(V){return(rr[V=V||W].mediaBox.topRightX-rr[V].mediaBox.bottomLeftX)/xt},ec=g.setPageWidth=function(V,Ae){rr[V].mediaBox.topRightX=Ae*xt+rr[V].mediaBox.bottomLeftX},Os=g.getPageHeight=function(V){return(rr[V=V||W].mediaBox.topRightY-rr[V].mediaBox.bottomLeftY)/xt},zc=g.setPageHeight=function(V,Ae){rr[V].mediaBox.topRightY=Ae*xt+rr[V].mediaBox.bottomLeftY};return g.internal={pdfEscape:mn,getStyle:gi,getFont:Ra,getFontSize:ut,getCharSpace:Hc,getTextColor:Qc,getLineHeight:Wl,getLineHeightFactor:Wi,getLineWidth:Ao,write:je,getHorizontalCoordinate:js,getVerticalCoordinate:La,getCoordinateString:WA,getVerticalCoordinateString:fl,collections:{},newObject:Mn,newAdditionalObject:Ne,newObjectDeferred:$n,newObjectDeferredBegin:fe,getFilters:qe,putStream:tt,events:zr,scaleFactor:xt,pageSize:{getWidth:function(){return gl(W)},setWidth:function(V){ec(W,V)},getHeight:function(){return Os(W)},setHeight:function(V){zc(W,V)}},encryptionOptions:d,encryption:Pn,getEncryptor:Ro,output:Do,getNumberOfPages:En,pages:xe,out:we,f2:H,f3:L,getPageInfo:oo,getPageInfoByObjId:hr,getCurrentPageInfo:lo,getPDFVersion:y,Point:Jl,Rectangle:Vc,Matrix:Ht,hasHotfix:io},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return gl(W)},set:function(V){ec(W,V)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Os(W)},set:function(V){zc(W,V)},enumerable:!0,configurable:!0}),Ou.call(g,st),Ft="F1",ll(a,r),zr.publish("initialized"),g}H0.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},H0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},H0.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},H0.prototype.processOwnerPassword=function(t,e){return W_(K_(e).substr(0,5),t)},H0.prototype.encryptor=function(t,e){var r=K_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return W_(r,n)}},sy.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||zn(t)!==zn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ir.API={events:[]},ir.version="2.5.2";var Oa=ir.API,l4=1,Ph=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},y0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dr=function(t){return t.toFixed(2)},Td=function(t){return t.toFixed(5)};Oa.__acroform__={};var ko=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sF=function(t){return t*l4},gu=function(t){var e=new bM,r=tr.internal.getHeight(t)||0,n=tr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Dr(n)),Number(Dr(r))],e},vie=Oa.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},yie=Oa.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},wie=Oa.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},ns=Oa.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wie(t,e-1)},as=Oa.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vie(t,e-1)},ss=Oa.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yie(t,e-1)},bie=Oa.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(s)||0,[Number(Dr(l.lowerLeft_X)),Number(Dr(l.lowerLeft_Y)),Number(Dr(l.upperRight_X)),Number(Dr(l.upperRight_Y))]},Cie=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=$_(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Dr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=gu(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},$_=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(L){return L.split(`
`)}):a.map(function(L){return[L]});var s=r,i=tr.internal.getHeight(t)||0;i=i<0?-i:i;var o=tr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(L,I,j){if(L+1<a.length){var z=I+" "+a[L+1][0];return pv(z,t,j).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=pv("3",t,s).height,m=t.multiline?i-s:(i-h)/2,g=m+=2,b=0,y=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+pv(e,t,s=12).width+", FieldWidth:"+o+`
`;break}for(var B="",k=0,F=0;F<a.length;F++)if(a.hasOwnProperty(F)){var U=!1;if(a[F].length!==1&&E!==a[F].length-1){if((h+2)*(k+2)+2>i)continue e;B+=a[F][E],U=!0,y=F,F--}else{B=(B+=a[F][E]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var P=parseInt(F),D=l(P,B,s),C=F>=a.length-1;if(D&&!C){B+=" ",E=0;continue}if(D||C){if(C)y=P;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;y=P}}for(var S="",N=b;N<=y;N++){var H=a[N];if(t.multiline){if(N===y){S+=H[E]+" ",E=(E+1)%H.length;continue}if(N===b){S+=H[H.length-1]+" ";continue}}S+=H[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=pv(S,t,s).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Dr(u)+" "+Dr(g)+` Td
`,e+="("+Ph(S)+`) Tj
`,e+=-Dr(u)+` 0 Td
`,g=-(s+2),d=0,b=U?y:y+1,k++,B=""}break}return n.text=e,n.fontSize=s,n},pv=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Eie={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_ie=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Sie=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];e.internal.newObjectDeferredBegin(a.objId,!0),zn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},Tie=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Rc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Eie)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");l4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new CM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&_ie(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=bie(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=tr.createDefaultAppearanceStream(o),zn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Cie(o);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,o)),h+="/"+i+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}s&&Sie(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},wM=Oa.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),zn(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Ph(n(t[s].toString()))+")"):a+=t[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},KC=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ph(n(t))+")"},bu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bu.prototype.toString=function(){return this.objId+" 0 R"},bu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},bu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:wM(a,this.objId,this.scope)}):a instanceof bu?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var bM=function(){bu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ko(bM,bu);var CM=function(){bu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ph(r(t))+")"}},set:function(r){t=r}})};ko(CM,bu);var Rc=function t(){bu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');e=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ns(e,3)},set:function(B){B?this.F=as(e,3):this.F=ss(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');r=B}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(B){n=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(B){n[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(B){n[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(B){n[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(B){n[3]=B}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof iy)return;s="FieldObject"+t.FieldNum++}var B=function(k){return k};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Ph(B(s))+")"},set:function(B){s=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(B){s=B}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(B){i=B}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(B){o=B}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(B){l=B}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/l4:u},set:function(B){u=B}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(B){d=B}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof iy||this instanceof dh))return KC(h,this.objId,this.scope)},set:function(B){B=B.toString(),h=B}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ws?m:KC(m,this.objId,this.scope)},set:function(B){B=B.toString(),m=this instanceof Ws?B:B.substr(0,1)==="("?y0(B.substr(1,B.length-2)):y0(B)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws?y0(m.substr(1,m.length-1)):m},set:function(B){B=B.toString(),m=this instanceof Ws?"/"+B:B}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ws?g:KC(g,this.objId,this.scope)},set:function(B){B=B.toString(),g=this instanceof Ws?B:B.substr(0,1)==="("?y0(B.substr(1,B.length-2)):y0(B)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ws?y0(g.substr(1,g.length-1)):g},set:function(B){B=B.toString(),g=this instanceof Ws?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(B){B=!!B,y=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(B){b=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,1)},set:function(B){B?this.Ff=as(this.Ff,1):this.Ff=ss(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,2)},set:function(B){B?this.Ff=as(this.Ff,2):this.Ff=ss(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,3)},set:function(B){B?this.Ff=as(this.Ff,3):this.Ff=ss(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');E=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(E){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};ko(Rc,bu);var om=function(){Rc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wM(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var l,u=[];l=i.exec(s);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,18)},set:function(r){r?this.Ff=as(this.Ff,18):this.Ff=ss(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=as(this.Ff,19):this.Ff=ss(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,20)},set:function(r){r?(this.Ff=as(this.Ff,20),e.sort()):this.Ff=ss(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,22)},set:function(r){r?this.Ff=as(this.Ff,22):this.Ff=ss(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(r){r?this.Ff=as(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,27)},set:function(r){r?this.Ff=as(this.Ff,27):this.Ff=ss(this.Ff,27)}}),this.hasAppearanceStream=!1};ko(om,Rc);var lm=function(){om.call(this),this.fontName="helvetica",this.combo=!1};ko(lm,om);var cm=function(){lm.call(this),this.combo=!0};ko(cm,lm);var w2=function(){cm.call(this),this.edit=!0};ko(w2,cm);var Ws=function(){Rc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,15)},set:function(r){r?this.Ff=as(this.Ff,15):this.Ff=ss(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,16)},set:function(r){r?this.Ff=as(this.Ff,16):this.Ff=ss(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,17)},set:function(r){r?this.Ff=as(this.Ff,17):this.Ff=ss(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(r){r?this.Ff=as(this.Ff,26):this.Ff=ss(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Ph(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){zn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ko(Ws,Rc);var b2=function(){Ws.call(this),this.pushButton=!0};ko(b2,Ws);var um=function(){Ws.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ko(um,Ws);var iy=function(){var t,e;Rc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Ph(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){zn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ko(iy,Rc),um.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},um.prototype.createOption=function(t){var e=new iy;return e.Parent=this,e.optionName=t,this.Kids.push(e),Bie.call(this.scope,e),e};var C2=function(){Ws.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tr.CheckBox.createAppearanceStream()};ko(C2,Ws);var dh=function(){Rc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,13)},set:function(e){e?this.Ff=as(this.Ff,13):this.Ff=ss(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,21)},set:function(e){e?this.Ff=as(this.Ff,21):this.Ff=ss(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(e){e?this.Ff=as(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,24)},set:function(e){e?this.Ff=as(this.Ff,24):this.Ff=ss(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,25)},set:function(e){e?this.Ff=as(this.Ff,25):this.Ff=ss(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(e){e?this.Ff=as(this.Ff,26):this.Ff=ss(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ko(dh,Rc);var E2=function(){dh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,14)},set:function(t){t?this.Ff=as(this.Ff,14):this.Ff=ss(this.Ff,14)}}),this.password=!0};ko(E2,dh);var tr={CheckBox:{createAppearanceStream:function(){return{N:{On:tr.CheckBox.YesNormal},D:{On:tr.CheckBox.YesPushDown,Off:tr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=$_(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Dr(tr.internal.getWidth(t))+" "+Dr(tr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Dr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=tr.internal.getHeight(t),i=tr.internal.getWidth(t),o=$_(t,t.caption);return a.push("1 g"),a.push("0 0 "+Dr(i)+" "+Dr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Dr(i-1)+" "+Dr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Dr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Dr(tr.internal.getWidth(t))+" "+Dr(tr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tr.RadioButton.Circle.YesNormal,e.D[t]=tr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=tr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Td(tr.internal.getWidth(t)/2)+" "+Td(tr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*tr.internal.Bezier_C).toFixed(5)),i=Number((n*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Td(tr.internal.getWidth(t)/2)+" "+Td(tr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Td(tr.internal.getWidth(t)/2)+" "+Td(tr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=tr.internal.getWidth(t)<=tr.internal.getHeight(t)?tr.internal.getWidth(t)/4:tr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Td(tr.internal.getWidth(t)/2)+" "+Td(tr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tr.RadioButton.Cross.YesNormal,e.D[t]=tr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gu(t);e.scope=t.scope;var r=[],n=tr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Dr(tr.internal.getWidth(t)-2)+" "+Dr(tr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Dr(n.x1.x)+" "+Dr(n.x1.y)+" m"),r.push(Dr(n.x2.x)+" "+Dr(n.x2.y)+" l"),r.push(Dr(n.x4.x)+" "+Dr(n.x4.y)+" m"),r.push(Dr(n.x3.x)+" "+Dr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=tr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Dr(tr.internal.getWidth(t))+" "+Dr(tr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Dr(tr.internal.getWidth(t)-2)+" "+Dr(tr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Dr(r.x1.x)+" "+Dr(r.x1.y)+" m"),n.push(Dr(r.x2.x)+" "+Dr(r.x2.y)+" l"),n.push(Dr(r.x4.x)+" "+Dr(r.x4.y)+" m"),n.push(Dr(r.x3.x)+" "+Dr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Dr(tr.internal.getWidth(t))+" "+Dr(tr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};tr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tr.internal.getWidth(t),r=tr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},tr.internal.getWidth=function(t){var e=0;return zn(t)==="object"&&(e=sF(t.Rect[2])),e},tr.internal.getHeight=function(t){var e=0;return zn(t)==="object"&&(e=sF(t.Rect[3])),e};var Bie=Oa.addField=function(t){if(Tie(this,t),!(t instanceof Rc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Oa.AcroFormChoiceField=om,Oa.AcroFormListBox=lm,Oa.AcroFormComboBox=cm,Oa.AcroFormEditBox=w2,Oa.AcroFormButton=Ws,Oa.AcroFormPushButton=b2,Oa.AcroFormRadioButton=um,Oa.AcroFormCheckBox=C2,Oa.AcroFormTextField=dh,Oa.AcroFormPasswordField=E2,Oa.AcroFormAppearance=tr,Oa.AcroForm={ChoiceField:om,ListBox:lm,ComboBox:cm,EditBox:w2,Button:Ws,PushButton:b2,RadioButton:um,CheckBox:C2,TextField:dh,PasswordField:E2,Appearance:tr},ir.AcroForm={ChoiceField:om,ListBox:lm,ComboBox:cm,EditBox:w2,Button:Ws,PushButton:b2,RadioButton:um,CheckBox:C2,TextField:dh,PasswordField:E2,Appearance:tr};ir.AcroForm;function EM(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(L,I){var j,z,ne,Z,ee,ae=e;if((I=I||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(D(L))for(ee in r)for(ne=r[ee],j=0;j<ne.length;j+=1){for(Z=!0,z=0;z<ne[j].length;z+=1)if(ne[j][z]!==void 0&&ne[j][z]!==L[z]){Z=!1;break}if(Z===!0){ae=ee;break}}else for(ee in r)for(ne=r[ee],j=0;j<ne.length;j+=1){for(Z=!0,z=0;z<ne[j].length;z+=1)if(ne[j][z]!==void 0&&ne[j][z]!==L.charCodeAt(z)){Z=!1;break}if(Z===!0){ae=ee;break}}return ae===e&&I!==e&&(ae=I),ae},a=function L(I){for(var j=this.internal.write,z=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:I.width}),Z.push({key:"Height",value:I.height}),I.colorSpace===E.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===E.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var ee="",ae=0,G=I.transparency.length;ae<G;ae++)ee+=I.transparency[ae]+" "+I.transparency[ae]+" ";Z.push({key:"Mask",value:"["+ee+"]"})}I.sMask!==void 0&&Z.push({key:"SMask",value:I.objectId+1+" 0 R"});var K=I.filter!==void 0?["/"+I.filter]:void 0;if(z({data:I.data,additionalKeyValues:Z,alreadyAppliedFilters:K,objectId:I.objectId}),j("endobj"),"sMask"in I&&I.sMask!==void 0){var le="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,O={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:le,data:I.sMask};"filter"in I&&(O.filter=I.filter),L.call(this,O)}if(I.colorSpace===E.INDEXED){var W=this.internal.newObject();z({data:S(new Uint8Array(I.palette)),objectId:W}),j("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var I in L)a.call(this,L[I])},i=function(){var L,I=this.internal.collections.addImage_images,j=this.internal.write;for(var z in I)j("/I"+(L=I[z]).index,L.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var L=this.internal.collections.addImage_images;return o.call(this),L},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(L){return typeof t["process"+L.toUpperCase()]=="function"},h=function(L){return zn(L)==="object"&&L.nodeType===1},m=function(L,I){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var j=""+L.getAttribute("src");if(j.indexOf("data:image/")===0)return Dg(unescape(j).split("base64,").pop());var z=t.loadFile(j,!0);if(z!==void 0)return z}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var ne;switch(I){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Dg(L.toDataURL(ne,1).split("base64,").pop())}},g=function(L){var I=this.internal.collections.addImage_images;if(I){for(var j in I)if(L===I[j].alias)return I[j]}},b=function(L,I,j){return L||I||(L=-96,I=-96),L<0&&(L=-1*j.width*72/L/this.internal.scaleFactor),I<0&&(I=-1*j.height*72/I/this.internal.scaleFactor),L===0&&(L=I*j.width/j.height),I===0&&(I=L*j.height/j.width),[L,I]},y=function(L,I,j,z,ne,Z){var ee=b.call(this,j,z,ne),ae=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,K=l.call(this);if(j=ee[0],z=ee[1],K[ne.index]=ne,Z){Z*=Math.PI/180;var le=Math.cos(Z),O=Math.sin(Z),W=function(te){return te.toFixed(4)},Y=[W(le),W(O),W(-1*O),W(le),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,ae(L),G(I+z),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ae(j),"0","0",ae(z),"0","0","cm"].join(" "))):this.internal.write([ae(j),"0","0",ae(z),ae(L),G(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(L){var I,j,z=0;if(typeof L=="string")for(j=L.length,I=0;I<j;I++)z=(z<<5)-z+L.charCodeAt(I),z|=0;else if(D(L))for(j=L.byteLength/2,I=0;I<j;I++)z=(z<<5)-z+L[I],z|=0;return z},F=t.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var I=!0;return L.length===0&&(I=!1),L.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(I=!1),I},U=t.__addimage__.extractImageFromDataUrl=function(L){var I=(L=L||"").split("base64,"),j=null;if(I.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(z)&&(j={mimeType:z[1],charset:z[2],data:I[1]})}return j},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(L){return P()&&L instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(L){return P()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(L){for(var I=L.length,j=new Uint8Array(I),z=0;z<I;z++)j[z]=L.charCodeAt(z);return j},S=t.__addimage__.arrayBufferToBinaryString=function(L){for(var I="",j=D(L)?L:new Uint8Array(L),z=0;z<j.length;z+=8192)I+=String.fromCharCode.apply(null,j.subarray(z,z+8192));return I};t.addImage=function(){var L,I,j,z,ne,Z,ee,ae,G;if(typeof arguments[1]=="number"?(I=e,j=arguments[1],z=arguments[2],ne=arguments[3],Z=arguments[4],ee=arguments[5],ae=arguments[6],G=arguments[7]):(I=arguments[1],j=arguments[2],z=arguments[3],ne=arguments[4],Z=arguments[5],ee=arguments[6],ae=arguments[7],G=arguments[8]),zn(L=arguments[0])==="object"&&!h(L)&&"imageData"in L){var K=L;L=K.imageData,I=K.format||I||e,j=K.x||j||0,z=K.y||z||0,ne=K.w||K.width||ne,Z=K.h||K.height||Z,ee=K.alias||ee,ae=K.compression||ae,G=K.rotation||K.angle||G}var le=this.internal.getFilters();if(ae===void 0&&le.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(j)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=N.call(this,L,I,ee,ae);return y.call(this,j,z,ne,Z,O,G),this};var N=function(L,I,j,z){var ne,Z,ee;if(typeof L=="string"&&n(L)===e){L=unescape(L);var ae=H(L,!1);(ae!==""||(ae=t.loadFile(L,!0))!==void 0)&&(L=ae)}if(h(L)&&(L=m(L,I)),I=n(L,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ee=j)==null||ee.length===0)&&(j=function(G){return typeof G=="string"||D(G)?k(G):D(G.data)?k(G.data):null}(L)),(ne=g.call(this,j))||(P()&&(L instanceof Uint8Array||I==="RGBA"||(Z=L,L=C(L))),ne=this["process"+I.toUpperCase()](L,u.call(this),j,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in t.image_compression?G:B.NONE}(z),Z)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},H=t.__addimage__.convertBase64ToBinaryString=function(L,I){var j;I=typeof I!="boolean"||I;var z,ne="";if(typeof L=="string"){z=(j=U(L))!==null?j.data:L;try{ne=Dg(z)}catch(Z){if(I)throw F(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(L){var I,j,z="";if(h(L)&&(L=m(L)),typeof L=="string"&&n(L)===e&&((z=H(L,!1))===""&&(z=t.loadFile(L)||""),L=z),j=n(L),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!P()||L instanceof Uint8Array||(L=C(L)),!(I=this["process"+j.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=j,I}})(ir.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ir.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(y.objId),k=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(B(n.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(B(k))+") >>",y.content=s;var F=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(y.objId,"0 R",E.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var U=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,a-u,o,i,s),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ir.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&a.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&s(y)&&e[y.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(y){var E=0,B=r,k="",F=0;for(E=0;E<y.length;E+=1)B[y.charCodeAt(E)]!==void 0?(F++,typeof(B=B[y.charCodeAt(E)])=="number"&&(k+=String.fromCharCode(B),B=r,F=0),E===y.length-1&&(B=r,k+=y.charAt(E-(F-1)),E-=F-1,F=0)):(B=r,k+=y.charAt(E-F),E-=F,F=0);return k};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(y,E,B){return i(y)?s(y)===!1?-1:!u(y)||!i(E)&&!i(B)||!i(B)&&o(E)||o(y)&&!i(E)||o(y)&&l(E)||o(y)&&o(E)?0:d(y)&&i(E)&&!o(E)&&i(B)&&u(B)?3:o(y)||!i(B)?1:2:-1},g=function(y){var E=0,B=0,k=0,F="",U="",P="",D=(y=y||"").split("\\s+"),C=[];for(E=0;E<D.length;E+=1){for(C.push(""),B=0;B<D[E].length;B+=1)F=D[E][B],U=D[E][B-1],P=D[E][B+1],i(F)?(k=m(F,U,P),C[E]+=k!==-1?String.fromCharCode(e[F.charCodeAt(0)][k]):F):C[E]+=F;C[E]=h(C[E])}return C.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var y,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(E)){var k=0;for(B=[],k=0;k<E.length;k+=1)Array.isArray(E[k])?B.push([g(E[k][0]),E[k][1],E[k][2]]):B.push([g(E[k])]);y=B}else y=g(E);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",b])}(ir.API),ir.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ir.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,y=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var B=u.maxWidth;B>0?typeof l=="string"?l=this.splitTextToSize(l,B):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(F,U){return F.concat(E.splitTextToSize(U,B))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)g<(y=this.getStringUnitWidth(l[k],{font:h})*d)&&(g=y);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,y,E,B=[],k=[],F=[],U={},P={},D=[],C=[],S=(m=m||{}).autoSize||!1,N=m.printHeaders!==!1,H=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,L=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,j=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=z,this.setFontSize(H),h==null)k=B=Object.keys(d[0]),F=B.map(function(){return"left"});else if(Array.isArray(h)&&zn(h[0])==="object")for(B=h.map(function(K){return K.name}),k=h.map(function(K){return K.prompt||K.name||""}),F=h.map(function(K){return K.align||"left"}),g=0;g<h.length;g+=1)P[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=B=h,F=B.map(function(){return"left"}));if(S||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<B.length;g+=1){for(U[E=B[g]]=d.map(function(K){return K[E]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=U[E],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)D.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[E]=Math.max.apply(null,D)+I+I,D=[]}if(N){var ne={};for(g=0;g<B.length;g+=1)ne[B[g]]={},ne[B[g]].text=k[g],ne[B[g]].align=F[g];var Z=o.call(this,ne,P);C=B.map(function(K){return new s(l,u,P[K],Z,ne[K].text,void 0,ne[K].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ee=h.reduce(function(K,le){return K[le.name]=le.align,K},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var ae=o.call(this,d[g],P);for(y=0;y<B.length;y+=1){var G=d[g][B[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:y,data:G},this),i.call(this,new s(l,u,P[B[y]],ae,G,g+2,ee[B[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(ir.API);var _M={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},SM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],X_=EM(SM),TM=[100,200,300,400,500,600,700,800,900],Nie=EM(TM);function Y_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return _M[s=s||"normal"]?s:"normal"}(t.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(s){return typeof X_[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function iF(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var kie={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},oF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lF(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Iie(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},kie,r.genericFontFamilies||{}),s=null,i=null,o=0;o<e.length;++o)if(a[(s=Y_(e[o])).family]&&(s.family=a[s.family]),t.hasOwnProperty(s.family)){i=t[s.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+lF(s)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=X_[l],h=d<=X_.normal?-1:1,m=iF(u,SM,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=_M[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=Nie[l],h=iF(u,TM,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+lF(s)+"'.");return i}function cF(t){return t.trimLeft()}function Fie(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Die(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var gv,uF,AF,WC=["times"];(function(t){var e,r,n,a,s,i,o,l,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new i,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new i,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=O;Object.defineProperty(this,"pdf",{get:function(){return W}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Ie){Y=!!Ie}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Ie){te=!!Ie}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Ie){isNaN(Ie)||(ce=Ie)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Ie){isNaN(Ie)||(de=Ie)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ie){var we;typeof Ie=="number"?we=[Ie,Ie,Ie,Ie]:((we=new Array(4))[0]=Ie[0],we[1]=Ie.length>=2?Ie[1]:we[0],we[2]=Ie.length>=3?Ie[2]:we[0],we[3]=Ie.length>=4?Ie[3]:we[1]),u.margin=we}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Ie){me=Ie}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Ie){ge=Ie}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(Ie){Se=Ie}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ie){Ie instanceof d&&(u=Ie)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ie){u.path=Ie}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(Ie){xe=Ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ie){var we;we=m(Ie),this.ctx.fillStyle=we.style,this.ctx.isFillTransparent=we.a===0,this.ctx.fillOpacity=we.a,this.pdf.setFillColor(we.r,we.g,we.b,{a:we.a}),this.pdf.setTextColor(we.r,we.g,we.b,{a:we.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ie){var we=m(Ie);this.ctx.strokeStyle=we.style,this.ctx.isStrokeTransparent=we.a===0,this.ctx.strokeOpacity=we.a,we.a===0?this.pdf.setDrawColor(255,255,255):(we.a,this.pdf.setDrawColor(we.r,we.g,we.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ie){["butt","round","square"].indexOf(Ie)!==-1&&(this.ctx.lineCap=Ie,this.pdf.setLineCap(Ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ie){isNaN(Ie)||(this.ctx.lineWidth=Ie,this.pdf.setLineWidth(Ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ie){["bevel","round","miter"].indexOf(Ie)!==-1&&(this.ctx.lineJoin=Ie,this.pdf.setLineJoin(Ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ie){isNaN(Ie)||(this.ctx.miterLimit=Ie,this.pdf.setMiterLimit(Ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ie){this.ctx.textBaseline=Ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ie){["right","end","center","left","start"].indexOf(Ie)!==-1&&(this.ctx.textAlign=Ie)}});var ie=null;function Le(Ie,we){if(ie===null){var je=function(et){var st=[];return Object.keys(et).forEach(function(mt){et[mt].forEach(function(_t){var ut=null;switch(_t){case"bold":ut={family:mt,weight:"bold"};break;case"italic":ut={family:mt,style:"italic"};break;case"bolditalic":ut={family:mt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:mt}}ut!==null&&(ut.ref={name:mt,style:_t},st.push(ut))})}),st}(Ie.getFontList());ie=function(et){for(var st={},mt=0;mt<et.length;++mt){var _t=Y_(et[mt]),ut=_t.family,Nt=_t.stretch,Qt=_t.style,Yt=_t.weight;st[ut]=st[ut]||{},st[ut][Nt]=st[ut][Nt]||{},st[ut][Nt][Qt]=st[ut][Nt][Qt]||{},st[ut][Nt][Qt][Yt]=_t}return st}(je.concat(we))}return ie}var nt=null;Object.defineProperty(this,"fontFaces",{get:function(){return nt},set:function(Ie){ie=null,nt=Ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ie){var we;if(this.ctx.font=Ie,(we=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ie))!==null){var je=we[1],et=(we[2],we[3]),st=we[4],mt=(we[5],we[6]),_t=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(_t==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:_t==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var ut=function(Dt){var Ft,xt,yr=[],Jt=Dt.trim();if(Jt==="")return WC;if(Jt in oF)return[oF[Jt]];for(;Jt!=="";){switch(xt=null,Ft=(Jt=cF(Jt)).charAt(0)){case'"':case"'":xt=Fie(Jt.substring(1),Ft);break;default:xt=Die(Jt)}if(xt===null||(yr.push(xt[0]),(Jt=cF(xt[1]))!==""&&Jt.charAt(0)!==","))return WC;Jt=Jt.replace(/^,/,"")}return yr}(mt);if(this.fontFaces){var Nt=Iie(Le(this.pdf,this.fontFaces),ut.map(function(Dt){return{family:Dt,stretch:"normal",weight:et,style:je}}));this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var Qt="";(et==="bold"||parseInt(et,10)>=700||je==="bold")&&(Qt="bold"),je==="italic"&&(Qt+="italic"),Qt.length===0&&(Qt="normal");for(var Yt="",kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<ut.length;It++){if(this.pdf.internal.getFont(ut[It],Qt,{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[It];break}if(Qt==="bolditalic"&&this.pdf.internal.getFont(ut[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=ut[It],Qt="bold";else if(this.pdf.internal.getFont(ut[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[It],Qt="normal";break}}if(Yt===""){for(var Wt=0;Wt<ut.length;Wt++)if(kt[ut[Wt]]){Yt=kt[ut[Wt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,Qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ie){this.ctx.globalCompositeOperation=Ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ie){this.ctx.globalAlpha=Ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ie){this.ctx.lineDashOffset=Ie,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ie){this.ctx.lineDash=Ie,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ie){this.ctx.ignoreClearRect=!!Ie}})};h.prototype.setLineDash=function(O){this.lineDash=O},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){U.call(this,"fill",!1)},h.prototype.stroke=function(){U.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(O,W){if(isNaN(O)||isNaN(W))throw sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(O,W)},h.prototype.closePath=function(){var O=new i(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&zn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){O=new i(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(O.x,O.y)},h.prototype.lineTo=function(O,W){if(isNaN(O)||isNaN(W))throw sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},h.prototype.quadraticCurveTo=function(O,W,Y,te){if(isNaN(Y)||isNaN(te)||isNaN(O)||isNaN(W))throw sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new i(Y,te)),de=this.ctx.transform.applyToPoint(new i(O,W));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new i(ce.x,ce.y)},h.prototype.bezierCurveTo=function(O,W,Y,te,ce,de){if(isNaN(ce)||isNaN(de)||isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te))throw sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new i(ce,de)),ge=this.ctx.transform.applyToPoint(new i(O,W)),Se=this.ctx.transform.applyToPoint(new i(Y,te));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:Se.x,y2:Se.y,x:me.x,y:me.y}),this.ctx.lastPoint=new i(me.x,me.y)},h.prototype.arc=function(O,W,Y,te,ce,de){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te)||isNaN(ce))throw sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new i(O,W));O=me.x,W=me.y;var ge=this.ctx.transform.applyToPoint(new i(0,Y)),Se=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(ge.x-Se.x,2)+Math.pow(ge.y-Se.y,2))}Math.abs(ce-te)>=2*Math.PI&&(te=0,ce=2*Math.PI),this.path.push({type:"arc",x:O,y:W,radius:Y,startAngle:te,endAngle:ce,counterclockwise:de})},h.prototype.arcTo=function(O,W,Y,te,ce){throw new Error("arcTo not implemented.")},h.prototype.rect=function(O,W,Y,te){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te))throw sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,W),this.lineTo(O+Y,W),this.lineTo(O+Y,W+te),this.lineTo(O,W+te),this.lineTo(O,W),this.lineTo(O+Y,W),this.lineTo(O,W)},h.prototype.fillRect=function(O,W,Y,te){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te))throw sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,W,Y,te),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},h.prototype.strokeRect=function(O,W,Y,te){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te))throw sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,W,Y,te),this.stroke())},h.prototype.clearRect=function(O,W,Y,te){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te))throw sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,W,Y,te))},h.prototype.save=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(W),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var W,Y,te,ce;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))W=0,Y=0,te=0,ce=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(de!==null)W=parseInt(de[1]),Y=parseInt(de[2]),te=parseInt(de[3]),ce=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)W=parseInt(de[1]),Y=parseInt(de[2]),te=parseInt(de[3]),ce=parseFloat(de[4]);else{if(ce=1,typeof O=="string"&&O.charAt(0)!=="#"){var me=new xM(O);O=me.ok?me.toHex():"#000000"}O.length===4?(W=O.substring(1,2),W+=W,Y=O.substring(2,3),Y+=Y,te=O.substring(3,4),te+=te):(W=O.substring(1,3),Y=O.substring(3,5),te=O.substring(5,7)),W=parseInt(W,16),Y=parseInt(Y,16),te=parseInt(te,16)}}return{r:W,g:Y,b:te,a:ce,style:O}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(O,W,Y,te){if(isNaN(W)||isNaN(Y)||typeof O!="string")throw sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var ce=ae(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:O,x:W,y:Y,scale:de,angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(O,W,Y,te){if(isNaN(W)||isNaN(Y)||typeof O!="string")throw sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var ce=ae(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:O,x:W,y:Y,scale:de,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(O){if(typeof O!="string")throw sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Y=this.pdf.internal.scaleFactor,te=W.internal.getFontSize(),ce=W.getStringUnitWidth(O)*te/W.internal.scaleFactor,de=function(me){var ge=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new de({width:ce*=Math.round(96*Y/72*1e4)/1e4})},h.prototype.scale=function(O,W){if(isNaN(O)||isNaN(W))throw sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(O,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.rotate=function(O){if(isNaN(O))throw sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(O,W){if(isNaN(O)||isNaN(W))throw sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,O,W);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.transform=function(O,W,Y,te,ce,de){if(isNaN(O)||isNaN(W)||isNaN(Y)||isNaN(te)||isNaN(ce)||isNaN(de))throw sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(O,W,Y,te,ce,de);this.ctx.transform=this.ctx.transform.multiply(me)},h.prototype.setTransform=function(O,W,Y,te,ce,de){O=isNaN(O)?1:O,W=isNaN(W)?0:W,Y=isNaN(Y)?0:Y,te=isNaN(te)?1:te,ce=isNaN(ce)?0:ce,de=isNaN(de)?0:de,this.ctx.transform=new l(O,W,Y,te,ce,de)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(O,W,Y,te,ce,de,me,ge,Se){var xe=this.pdf.getImageProperties(O),ie=1,Le=1,nt=1,Ie=1;te!==void 0&&ge!==void 0&&(nt=ge/te,Ie=Se/ce,ie=xe.width/te*ge/te,Le=xe.height/ce*Se/ce),de===void 0&&(de=W,me=Y,W=0,Y=0),te!==void 0&&ge===void 0&&(ge=te,Se=ce),te===void 0&&ge===void 0&&(ge=xe.width,Se=xe.height);for(var we,je=this.ctx.transform.decompose(),et=ae(je.rotate.shx),st=new l,mt=(st=(st=(st=st.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(de-W*nt,me-Y*Ie,te*ie,ce*Le)),_t=E.call(this,mt),ut=[],Nt=0;Nt<_t.length;Nt+=1)ut.indexOf(_t[Nt])===-1&&ut.push(_t[Nt]);if(F(ut),this.autoPaging)for(var Qt=ut[0],Yt=ut[ut.length-1],kt=Qt;kt<Yt+1;kt++){this.pdf.setPage(kt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=kt===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=kt===1?0:Dt+(kt-2)*Ft;if(this.ctx.clip_path.length!==0){var yr=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(we,this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=yr}var Jt=JSON.parse(JSON.stringify(mt));Jt=k([Jt],this.posX+this.margin[3],-xt+Wt+this.ctx.prevPageLastElemOffset)[0];var fn=(kt>Qt||kt<Yt)&&y.call(this);fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Ft,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,et),fn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,et)};var E=function(O,W,Y){var te=[];W=W||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":te.push(Math.floor((O.y+ce)/Y)+1);break;case"arc":te.push(Math.floor((O.y+ce-O.radius)/Y)+1),te.push(Math.floor((O.y+ce+O.radius)/Y)+1);break;case"qct":var de=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);te.push(Math.floor((de.y+ce)/Y)+1),te.push(Math.floor((de.y+de.h+ce)/Y)+1);break;case"bct":var me=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);te.push(Math.floor((me.y+ce)/Y)+1),te.push(Math.floor((me.y+me.h+ce)/Y)+1);break;case"rect":te.push(Math.floor((O.y+ce)/Y)+1),te.push(Math.floor((O.y+O.h+ce)/Y)+1)}for(var ge=0;ge<te.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<te[ge];)B.call(this);return te},B=function(){var O=this.fillStyle,W=this.strokeStyle,Y=this.font,te=this.lineCap,ce=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=W,this.font=Y,this.lineCap=te,this.lineWidth=ce,this.lineJoin=de},k=function(O,W,Y){for(var te=0;te<O.length;te++)switch(O[te].type){case"bct":O[te].x2+=W,O[te].y2+=Y;case"qct":O[te].x1+=W,O[te].y1+=Y;case"mt":case"lt":case"arc":default:O[te].x+=W,O[te].y+=Y}return O},F=function(O){return O.sort(function(W,Y){return W-Y})},U=function(O,W){for(var Y,te,ce=this.fillStyle,de=this.strokeStyle,me=this.lineCap,ge=this.lineWidth,Se=Math.abs(ge*this.ctx.transform.scaleX),xe=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),nt=[],Ie=0;Ie<Le.length;Ie++)if(Le[Ie].x!==void 0)for(var we=E.call(this,Le[Ie]),je=0;je<we.length;je+=1)nt.indexOf(we[je])===-1&&nt.push(we[je]);for(var et=0;et<nt.length;et++)for(;this.pdf.internal.getNumberOfPages()<nt[et];)B.call(this);if(F(nt),this.autoPaging)for(var st=nt[0],mt=nt[nt.length-1],_t=st;_t<mt+1;_t++){this.pdf.setPage(_t),this.fillStyle=ce,this.strokeStyle=de,this.lineCap=me,this.lineWidth=Se,this.lineJoin=xe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=_t===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kt=_t===1?0:Qt+(_t-2)*Yt;if(this.ctx.clip_path.length!==0){var It=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Y,this.posX+this.margin[3],-kt+Nt+this.ctx.prevPageLastElemOffset),P.call(this,O,!0),this.path=It}if(te=JSON.parse(JSON.stringify(ie)),this.path=k(te,this.posX+this.margin[3],-kt+Nt+this.ctx.prevPageLastElemOffset),W===!1||_t===0){var Wt=(_t>st||_t<mt)&&y.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Yt,null).clip().discardPath()),P.call(this,O,W),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=Se,P.call(this,O,W),this.lineWidth=ge;this.path=ie},P=function(O,W){if((O!=="stroke"||W||!b.call(this))&&(O==="stroke"||W||!g.call(this))){for(var Y,te,ce=[],de=this.path,me=0;me<de.length;me++){var ge=de[me];switch(ge.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ge,deltas:[],abs:[]});break;case"lt":var Se=ce.length;if(de[me-1]&&!isNaN(de[me-1].x)&&(Y=[ge.x-de[me-1].x,ge.y-de[me-1].y],Se>0)){for(;Se>=0;Se--)if(ce[Se-1].close!==!0&&ce[Se-1].begin!==!0){ce[Se-1].deltas.push(Y),ce[Se-1].abs.push(ge);break}}break;case"bct":Y=[ge.x1-de[me-1].x,ge.y1-de[me-1].y,ge.x2-de[me-1].x,ge.y2-de[me-1].y,ge.x-de[me-1].x,ge.y-de[me-1].y],ce[ce.length-1].deltas.push(Y);break;case"qct":var xe=de[me-1].x+2/3*(ge.x1-de[me-1].x),ie=de[me-1].y+2/3*(ge.y1-de[me-1].y),Le=ge.x+2/3*(ge.x1-ge.x),nt=ge.y+2/3*(ge.y1-ge.y),Ie=ge.x,we=ge.y;Y=[xe-de[me-1].x,ie-de[me-1].y,Le-de[me-1].x,nt-de[me-1].y,Ie-de[me-1].x,we-de[me-1].y],ce[ce.length-1].deltas.push(Y);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ge)}}te=W?null:O==="stroke"?"stroke":"fill";for(var je=!1,et=0;et<ce.length;et++)if(ce[et].arc)for(var st=ce[et].abs,mt=0;mt<st.length;mt++){var _t=st[mt];_t.type==="arc"?S.call(this,_t.x,_t.y,_t.radius,_t.startAngle,_t.endAngle,_t.counterclockwise,void 0,W,!je):j.call(this,_t.x,_t.y),je=!0}else if(ce[et].close===!0)this.pdf.internal.out("h"),je=!1;else if(ce[et].begin!==!0){var ut=ce[et].start.x,Nt=ce[et].start.y;z.call(this,ce[et].deltas,ut,Nt),je=!0}te&&N.call(this,te),W&&H.call(this)}},D=function(O){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-Y;case"top":return O+W-Y;case"hanging":return O+W-2*Y;case"middle":return O+W/2-Y;case"ideographic":return O;case"alphabetic":default:return O}},C=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(W,Y){this.colorStops.push([W,Y])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,W,Y,te,ce,de,me,ge,Se){for(var xe=Z.call(this,Y,te,ce,de),ie=0;ie<xe.length;ie++){var Le=xe[ie];ie===0&&(Se?L.call(this,Le.x1+O,Le.y1+W):j.call(this,Le.x1+O,Le.y1+W)),ne.call(this,O,W,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ge?H.call(this):N.call(this,me)},N=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(O,W){this.pdf.internal.out(r(O)+" "+n(W)+" m")},I=function(O){var W;switch(O.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Y=this.pdf.getTextDimensions(O.text),te=D.call(this,O.y),ce=C.call(this,te)-Y.h,de=this.ctx.transform.applyToPoint(new i(O.x,te)),me=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var Se,xe,ie,Le=this.ctx.transform.applyToRectangle(new o(O.x,te,Y.w,Y.h)),nt=ge.applyToRectangle(new o(O.x,ce,Y.w,Y.h)),Ie=E.call(this,nt),we=[],je=0;je<Ie.length;je+=1)we.indexOf(Ie[je])===-1&&we.push(Ie[je]);if(F(we),this.autoPaging)for(var et=we[0],st=we[we.length-1],mt=et;mt<st+1;mt++){this.pdf.setPage(mt);var _t=mt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],Qt=Nt-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],kt=Yt-this.margin[3],It=mt===1?0:ut+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Wt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Se,this.posX+this.margin[3],-1*It+_t),P.call(this,"fill",!0),this.path=Wt}var Dt=k([JSON.parse(JSON.stringify(nt))],this.posX+this.margin[3],-It+_t+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*O.scale),ie=this.lineWidth,this.lineWidth=ie*O.scale);var Ft=this.autoPaging!=="text";if(Ft||Dt.y+Dt.h<=Nt){if(Ft||Dt.y>=_t&&Dt.x<=Yt){var xt=Ft?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Yt-Dt.x)[0],yr=k([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-It+_t+this.ctx.prevPageLastElemOffset)[0],Jt=Ft&&(mt>et||mt<st)&&y.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,Qt,null).clip().discardPath()),this.pdf.text(xt,yr.x,yr.y,{angle:O.angle,align:W,renderingMode:O.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else Dt.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Dt.y);O.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ie)}else O.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*O.scale),ie=this.lineWidth,this.lineWidth=ie*O.scale),this.pdf.text(O.text,de.x+this.posX,de.y+this.posY,{angle:O.angle,align:W,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=ie)},j=function(O,W,Y,te){Y=Y||0,te=te||0,this.pdf.internal.out(r(O+Y)+" "+n(W+te)+" l")},z=function(O,W,Y){return this.pdf.lines(O,W,Y,null,null)},ne=function(O,W,Y,te,ce,de,me,ge){this.pdf.internal.out([e(a(Y+O)),e(s(te+W)),e(a(ce+O)),e(s(de+W)),e(a(me+O)),e(s(ge+W)),"c"].join(" "))},Z=function(O,W,Y,te){for(var ce=2*Math.PI,de=Math.PI/2;W>Y;)W-=ce;var me=Math.abs(Y-W);me<ce&&te&&(me=ce-me);for(var ge=[],Se=te?-1:1,xe=W;me>1e-5;){var ie=xe+Se*Math.min(me,de);ge.push(ee.call(this,O,xe,ie)),me-=Math.abs(ie-xe),xe=ie}return ge},ee=function(O,W,Y){var te=(Y-W)/2,ce=O*Math.cos(te),de=O*Math.sin(te),me=ce,ge=-de,Se=me*me+ge*ge,xe=Se+me*ce+ge*de,ie=4/3*(Math.sqrt(2*Se*xe)-xe)/(me*de-ge*ce),Le=me-ie*ge,nt=ge+ie*me,Ie=Le,we=-nt,je=te+W,et=Math.cos(je),st=Math.sin(je);return{x1:O*Math.cos(W),y1:O*Math.sin(W),x2:Le*et-nt*st,y2:Le*st+nt*et,x3:Ie*et-we*st,y3:Ie*st+we*et,x4:O*Math.cos(Y),y4:O*Math.sin(Y)}},ae=function(O){return 180*O/Math.PI},G=function(O,W,Y,te,ce,de){var me=O+.5*(Y-O),ge=W+.5*(te-W),Se=ce+.5*(Y-ce),xe=de+.5*(te-de),ie=Math.min(O,ce,me,Se),Le=Math.max(O,ce,me,Se),nt=Math.min(W,de,ge,xe),Ie=Math.max(W,de,ge,xe);return new o(ie,nt,Le-ie,Ie-nt)},K=function(O,W,Y,te,ce,de,me,ge){var Se,xe,ie,Le,nt,Ie,we,je,et,st,mt,_t,ut,Nt,Qt=Y-O,Yt=te-W,kt=ce-Y,It=de-te,Wt=me-ce,Dt=ge-de;for(xe=0;xe<41;xe++)et=(we=(ie=O+(Se=xe/40)*Qt)+Se*((nt=Y+Se*kt)-ie))+Se*(nt+Se*(ce+Se*Wt-nt)-we),st=(je=(Le=W+Se*Yt)+Se*((Ie=te+Se*It)-Le))+Se*(Ie+Se*(de+Se*Dt-Ie)-je),xe==0?(mt=et,_t=st,ut=et,Nt=st):(mt=Math.min(mt,et),_t=Math.min(_t,st),ut=Math.max(ut,et),Nt=Math.max(Nt,st));return new o(Math.round(mt),Math.round(_t),Math.round(ut-mt),Math.round(Nt-_t))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,W,Y=(O=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:W}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(ir.API),function(t){var e=function(s){var i,o,l,u,d,h,m,g,b,y;for(o=[],l=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,y+33)):o.push(122);return function(E,B){for(var k=B;k>0;k--)E.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,l,u,d,h=String,m="length",g=255,b="charCodeAt",y="slice",E="replace";for(s[y](-2),s=s[y](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],u=0,d=(s+=i="uuuuu"[y](s[m]%5||5))[m];d>u;u+=5)o=52200625*(s[b](u)-33)+614125*(s[b](u+1)-33)+7225*(s[b](u+2)-33)+85*(s[b](u+3)-33)+(s[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(B,k){for(var F=k;F>0;F--)B.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=G_(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,i){var o=0,l=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(ir.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,g=function(b){var y=b.length,E=[],B=String.fromCharCode;for(m=0;m<y;m+=1)E.push(B(255&b.charCodeAt(m)));return E.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(a,s,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(ir.API),function(t){function e(){return(br.html2canvas?Promise.resolve(br.html2canvas):O_(()=>Promise.resolve().then(()=>zCe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(br.DOMPurify?Promise.resolve(br.DOMPurify):O_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=zn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},s=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],b=g.src.find(function(y){return y.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var l=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||ir.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ir.getPageSize=function(i,o,l){if(zn(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,y=0;if(m.hasOwnProperty(h))b=m[h][1]/d,y=m[h][0]/d;else try{b=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",y>b&&(g=y,y=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>y&&(g=y,y=b,b=g)}return{width:y,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Y_):null;var l=new s(o);return o.worker?l:l.from(i).doCallback()}}(ir.API),ir.API.addJS=function(t){return AF=t,this.internal.events.subscribe("postPutResources",function(){gv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+AF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gv!==void 0&&uF!==void 0&&this.internal.out("/Names <</JavaScript "+gv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(ir.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,y={width:0,height:0,numcomponents:1},E=4;E<b;E+=2){if(E+=g,e.indexOf(h.charCodeAt(E+1))!==-1){m=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),y={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:m,numcomponents:h.charCodeAt(E+9)};break}g=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(ir.API);var w0,xv,dF,fF,hF,Rie=function(){var t,e,r;function n(s){var i,o,l,u,d,h,m,g,b,y,E,B,k,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var U,P;for(P=[],U=0;U<4;++U)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),s=(h!=null?h.data:void 0)||this.imgData,B=0;0<=i?B<i:B>i;0<=i?++B:--B)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(k=0;0<=y?k<y:k>y;0<=y?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(E=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(h,m,g,b){var y,E,B,k,F,U,P,D,C,S,N,H,L,I,j,z,ne,Z,ee,ae,G,K=Math.ceil((u.width-h)/g),le=Math.ceil((u.height-m)/b),O=u.width==K&&u.height==le;for(I=i*K,H=O?o:new Uint8Array(I*le),U=s.length,L=0,E=0;L<le&&l<U;){switch(s[l++]){case 0:for(k=ne=0;ne<I;k=ne+=1)H[E++]=s[l++];break;case 1:for(k=Z=0;Z<I;k=Z+=1)y=s[l++],F=k<i?0:H[E-i],H[E++]=(y+F)%256;break;case 2:for(k=ee=0;ee<I;k=ee+=1)y=s[l++],B=(k-k%i)/i,j=L&&H[(L-1)*I+B*i+k%i],H[E++]=(j+y)%256;break;case 3:for(k=ae=0;ae<I;k=ae+=1)y=s[l++],B=(k-k%i)/i,F=k<i?0:H[E-i],j=L&&H[(L-1)*I+B*i+k%i],H[E++]=(y+Math.floor((F+j)/2))%256;break;case 4:for(k=G=0;G<I;k=G+=1)y=s[l++],B=(k-k%i)/i,F=k<i?0:H[E-i],L===0?j=z=0:(j=H[(L-1)*I+B*i+k%i],z=B&&H[(L-1)*I+(B-1)*i+k%i]),P=F+j-z,D=Math.abs(P-F),S=Math.abs(P-j),N=Math.abs(P-z),C=D<=S&&D<=N?F:S<=N?j:z,H[E++]=(y+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var W=((m+L*b)*u.width+h)*i,Y=L*I;for(k=0;k<K;k+=1){for(var te=0;te<i;te+=1)o[W++]=H[Y++];W+=(g-1)*i}}L++}}return s=die(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,l,u,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,s=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[s++])!=null?g:255;return u},n.prototype.copyToImageData=function(s,i){var o,l,u,d,h,m,g,b,y,E,B;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(B=this._decodedPalette)!=null?B:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=s.data||s).length,h=y||i,d=m=0,l===1)for(;d<b;)g=y?4*i[d/4]:m,E=h[g++],u[d++]=E,u[d++]=E,u[d++]=E,u[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=y?4*i[d/4]:m,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,m=g},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(br)==="[object Window]"){try{e=br.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,l,u,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},n.prototype.renderFrame=function(s,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],m.renderFrame(s,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Lie(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<(7&a)+1;t[e++],t[e++];var o=null,l=null;s&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&y)==0&&(m=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,U=t[e++],P=U>>6&1,D=1<<(7&U)+1,C=o,S=l,N=!1;U>>7&&(N=!0,C=e,S=D,e+=3*D);var H=e;for(e++;;){var L;if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}d.push({x:E,y:B,width:k,height:F,has_local_palette:N,palette_offset:C,palette_size:S,data_offset:H,data_length:e-H,transparent_index:m,interlaced:!!P,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,j){var z=this.frameInfo(I),ne=z.width*z.height,Z=new Uint8Array(ne);mF(t,z.data_offset,Z,ne);var ee=z.palette_offset,ae=z.transparent_index;ae===null&&(ae=256);var G=z.width,K=r-G,le=G,O=4*(z.y*r+z.x),W=4*((z.y+z.height)*r+z.x),Y=O,te=4*K;z.interlaced===!0&&(te+=4*r*7);for(var ce=8,de=0,me=Z.length;de<me;++de){var ge=Z[de];if(le===0&&(le=G,(Y+=te)>=W&&(te=4*K+4*r*(ce-1),Y=O+(G+K)*(ce<<1),ce>>=1)),ge===ae)Y+=4;else{var Se=t[ee+3*ge],xe=t[ee+3*ge+1],ie=t[ee+3*ge+2];j[Y++]=ie,j[Y++]=xe,j[Y++]=Se,j[Y++]=255}--le}},this.decodeAndBlitFrameRGBA=function(I,j){var z=this.frameInfo(I),ne=z.width*z.height,Z=new Uint8Array(ne);mF(t,z.data_offset,Z,ne);var ee=z.palette_offset,ae=z.transparent_index;ae===null&&(ae=256);var G=z.width,K=r-G,le=G,O=4*(z.y*r+z.x),W=4*((z.y+z.height)*r+z.x),Y=O,te=4*K;z.interlaced===!0&&(te+=4*r*7);for(var ce=8,de=0,me=Z.length;de<me;++de){var ge=Z[de];if(le===0&&(le=G,(Y+=te)>=W&&(te=4*K+4*r*(ce-1),Y=O+(G+K)*(ce<<1),ce>>=1)),ge===ae)Y+=4;else{var Se=t[ee+3*ge],xe=t[ee+3*ge+1],ie=t[ee+3*ge+2];j[Y++]=Se,j[Y++]=xe,j[Y++]=ie,j[Y++]=255}--le}}}function mF(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,o=i+1,l=a+1,u=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),y=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var E=h&u;if(h>>=l,d-=l,E!==s){if(E===i)break;for(var B=E<o?E:y,k=0,F=B;F>s;)F=b[F]>>8,++k;var U=F;if(m+k+(B!==E?1:0)>n)return void sa.log("Warning, gif stream longer than expected.");r[m++]=U;var P=m+=k;for(B!==E&&(r[m++]=U),F=B;k--;)F=b[F],r[--P]=255&F,F>>=8;y!==null&&o<4096&&(b[o++]=y<<8|U,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=E}else o=i+1,u=(1<<(l=a+1))-1,y=null}return m!==n&&sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $C(t){var e,r,n,a,s,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),y=[],E=0,B=7,k=new Array(64),F=new Array(64),U=new Array(64),P=new Array(256),D=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(O,W){for(var Y=0,te=0,ce=new Array,de=1;de<=16;de++){for(var me=1;me<=O[de];me++)ce[W[te]]=[],ce[W[te]][0]=Y,ce[W[te]][1]=de,te++,Y++;Y*=2}return ce}function ee(O){for(var W=O[0],Y=O[1]-1;Y>=0;)W&1<<Y&&(E|=1<<B),Y--,--B<0&&(E==255?(ae(255),ae(0)):ae(E),B=7,E=0)}function ae(O){y.push(O)}function G(O){ae(O>>8&255),ae(255&O)}function K(O,W,Y,te,ce){for(var de,me=ce[0],ge=ce[240],Se=function(st,mt){var _t,ut,Nt,Qt,Yt,kt,It,Wt,Dt,Ft,xt=0;for(Dt=0;Dt<8;++Dt){_t=st[xt],ut=st[xt+1],Nt=st[xt+2],Qt=st[xt+3],Yt=st[xt+4],kt=st[xt+5],It=st[xt+6];var yr=_t+(Wt=st[xt+7]),Jt=_t-Wt,fn=ut+It,gr=ut-It,Ur=Nt+kt,In=Nt-kt,Ir=Qt+Yt,us=Qt-Yt,an=yr+Ir,na=yr-Ir,pa=fn+Ur,Pr=fn-Ur;st[xt]=an+pa,st[xt+4]=an-pa;var rr=.707106781*(Pr+na);st[xt+2]=na+rr,st[xt+6]=na-rr;var zr=.382683433*((an=us+In)-(Pr=gr+Jt)),As=.5411961*an+zr,Wn=1.306562965*Pr+zr,ba=.707106781*(pa=In+gr),Ss=Jt+ba,Ht=Jt-ba;st[xt+5]=Ht+As,st[xt+3]=Ht-As,st[xt+1]=Ss+Wn,st[xt+7]=Ss-Wn,xt+=8}for(xt=0,Dt=0;Dt<8;++Dt){_t=st[xt],ut=st[xt+8],Nt=st[xt+16],Qt=st[xt+24],Yt=st[xt+32],kt=st[xt+40],It=st[xt+48];var hn=_t+(Wt=st[xt+56]),sn=_t-Wt,Fn=ut+It,Mn=ut-It,$n=Nt+kt,fe=Nt-kt,Ne=Qt+Yt,Ee=Qt-Yt,_e=hn+Ne,Te=hn-Ne,ke=Fn+$n,qe=Fn-$n;st[xt]=_e+ke,st[xt+32]=_e-ke;var tt=.707106781*(qe+Te);st[xt+16]=Te+tt,st[xt+48]=Te-tt;var He=.382683433*((_e=Ee+fe)-(qe=Mn+sn)),We=.5411961*_e+He,Ye=1.306562965*qe+He,yt=.707106781*(ke=fe+Mn),Bt=sn+yt,Pt=sn-yt;st[xt+40]=Pt+We,st[xt+24]=Pt-We,st[xt+8]=Bt+Ye,st[xt+56]=Bt-Ye,xt++}for(Dt=0;Dt<64;++Dt)Ft=st[Dt]*mt[Dt],g[Dt]=Ft>0?Ft+.5|0:Ft-.5|0;return g}(O,W),xe=0;xe<64;++xe)b[C[xe]]=Se[xe];var ie=b[0]-Y;Y=b[0],ie==0?ee(te[0]):(ee(te[m[de=32767+ie]]),ee(h[de]));for(var Le=63;Le>0&&b[Le]==0;)Le--;if(Le==0)return ee(me),Y;for(var nt,Ie=1;Ie<=Le;){for(var we=Ie;b[Ie]==0&&Ie<=Le;)++Ie;var je=Ie-we;if(je>=16){nt=je>>4;for(var et=1;et<=nt;++et)ee(ge);je&=15}de=32767+b[Ie],ee(ce[(je<<4)+m[de]]),ee(h[de]),Ie++}return Le!=63&&ee(me),Y}function le(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(W){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ce=i((Y[te]*W+50)/100);ce=Math.min(Math.max(ce,1),255),o[C[te]]=ce}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ge=i((de[me]*W+50)/100);ge=Math.min(Math.max(ge,1),255),l[C[me]]=ge}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,ie=0;ie<8;ie++)for(var Le=0;Le<8;Le++)u[xe]=1/(o[C[xe]]*Se[ie]*Se[Le]*8),d[xe]=1/(l[C[xe]]*Se[ie]*Se[Le]*8),xe++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,W){W&&le(W),y=new Array,E=0,B=7,G(65496),G(65504),G(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),G(1),G(1),ae(0),ae(0),function(){G(65499),G(132),ae(0);for(var ut=0;ut<64;ut++)ae(o[ut]);ae(1);for(var Nt=0;Nt<64;Nt++)ae(l[Nt])}(),function(ut,Nt){G(65472),G(17),ae(8),G(Nt),G(ut),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)}(O.width,O.height),function(){G(65476),G(418),ae(0);for(var ut=0;ut<16;ut++)ae(S[ut+1]);for(var Nt=0;Nt<=11;Nt++)ae(N[Nt]);ae(16);for(var Qt=0;Qt<16;Qt++)ae(H[Qt+1]);for(var Yt=0;Yt<=161;Yt++)ae(L[Yt]);ae(1);for(var kt=0;kt<16;kt++)ae(I[kt+1]);for(var It=0;It<=11;It++)ae(j[It]);ae(17);for(var Wt=0;Wt<16;Wt++)ae(z[Wt+1]);for(var Dt=0;Dt<=161;Dt++)ae(ne[Dt])}(),G(65498),G(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var Y=0,te=0,ce=0;E=0,B=7,this.encode.displayName="_encode_";for(var de,me,ge,Se,xe,ie,Le,nt,Ie,we=O.data,je=O.width,et=O.height,st=4*je,mt=0;mt<et;){for(de=0;de<st;){for(xe=st*mt+de,Le=-1,nt=0,Ie=0;Ie<64;Ie++)ie=xe+(nt=Ie>>3)*st+(Le=4*(7&Ie)),mt+nt>=et&&(ie-=st*(mt+1+nt-et)),de+Le>=st&&(ie-=de+Le-st+4),me=we[ie++],ge=we[ie++],Se=we[ie++],k[Ie]=(D[me]+D[ge+256>>0]+D[Se+512>>0]>>16)-128,F[Ie]=(D[me+768>>0]+D[ge+1024>>0]+D[Se+1280>>0]>>16)-128,U[Ie]=(D[me+1280>>0]+D[ge+1536>>0]+D[Se+1792>>0]>>16)-128;Y=K(k,u,Y,e,n),te=K(F,d,te,r,a),ce=K(U,d,ce,r,a),de+=32}mt+=8}if(B>=0){var _t=[];_t[1]=B+1,_t[0]=(1<<B+1)-1,ee(_t)}return G(65497),new Uint8Array(y)},t=t||50,function(){for(var O=String.fromCharCode,W=0;W<256;W++)P[W]=O(W)}(),e=Z(S,N),r=Z(I,j),n=Z(H,L),a=Z(z,ne),function(){for(var O=1,W=2,Y=1;Y<=15;Y++){for(var te=O;te<W;te++)m[32767+te]=Y,h[32767+te]=[],h[32767+te][1]=Y,h[32767+te][0]=te;for(var ce=-(W-1);ce<=-O;ce++)m[32767+ce]=Y,h[32767+ce]=[],h[32767+ce][1]=Y,h[32767+ce][0]=W-1+ce;O<<=1,W<<=1}}(),function(){for(var O=0;O<256;O++)D[O]=19595*O,D[O+256>>0]=38470*O,D[O+512>>0]=7471*O+32768,D[O+768>>0]=-11059*O,D[O+1024>>0]=-21709*O,D[O+1280>>0]=32768*O+8421375,D[O+1536>>0]=-27439*O,D[O+1792>>0]=-5329*O}(),le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pF(t){function e(S){if(!S)throw Error("assert :P")}function r(S,N,H){for(var L=0;4>L;L++)if(S[N+L]!=H.charCodeAt(L))return!0;return!1}function n(S,N,H,L,I){for(var j=0;j<I;j++)S[N+j]=H[L+j]}function a(S,N,H,L){for(var I=0;I<L;I++)S[N+I]=H}function s(S){return new Int32Array(S)}function i(S,N){for(var H=[],L=0;L<S;L++)H.push(new N);return H}function o(S,N){var H=[];return function L(I,j,z){for(var ne=z[j],Z=0;Z<ne&&(I.push(z.length>j+1?[]:new N),!(z.length<j+1));Z++)L(I[Z],j+1,z)}(H,0,S),H}var l=function(){var S=this;function N(_,M){for(var q=1<<M-1>>>0;_&q;)q>>>=1;return q?(_&q-1)+q:_}function H(_,M,q,re,ue){e(!(re%q));do _[M+(re-=q)]=ue;while(0<re)}function L(_,M,q,re,ue){if(e(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(pe,ve,Ce,Be,Ue,Xe){var Ke,ze,gt=ve,it=1<<Ce,Me=s(16),Oe=s(16);for(e(Ue!=0),e(Be!=null),e(pe!=null),e(0<Ce),ze=0;ze<Ue;++ze){if(15<Be[ze])return 0;++Me[Be[ze]]}if(Me[0]==Ue)return 0;for(Oe[1]=0,Ke=1;15>Ke;++Ke){if(Me[Ke]>1<<Ke)return 0;Oe[Ke+1]=Oe[Ke]+Me[Ke]}for(ze=0;ze<Ue;++ze)Ke=Be[ze],0<Be[ze]&&(Xe[Oe[Ke]++]=ze);if(Oe[15]==1)return(Be=new I).g=0,Be.value=Xe[0],H(pe,gt,1,it,Be),it;var ct,vt=-1,ft=it-1,zt=0,Mt=1,nr=1,Ot=1<<Ce;for(ze=0,Ke=1,Ue=2;Ke<=Ce;++Ke,Ue<<=1){if(Mt+=nr<<=1,0>(nr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke])(Be=new I).g=Ke,Be.value=Xe[ze++],H(pe,gt+zt,Ue,Ot,Be),zt=N(zt,Ke)}for(Ke=Ce+1,Ue=2;15>=Ke;++Ke,Ue<<=1){if(Mt+=nr<<=1,0>(nr-=Me[Ke]))return 0;for(;0<Me[Ke];--Me[Ke]){if(Be=new I,(zt&ft)!=vt){for(gt+=Ot,ct=1<<(vt=Ke)-Ce;15>vt&&!(0>=(ct-=Me[vt]));)++vt,ct<<=1;it+=Ot=1<<(ct=vt-Ce),pe[ve+(vt=zt&ft)].g=ct+Ce,pe[ve+vt].value=gt-ve-vt}Be.g=Ke-Ce,Be.value=Xe[ze++],H(pe,gt+(zt>>Ce),Ue,Ot,Be),zt=N(zt,Ke)}}return Mt!=2*Oe[15]-1?0:it}(_,M,q,re,ue,he)}function I(){this.value=this.g=0}function j(){this.value=this.g=0}function z(){this.G=i(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ka,j)}function ne(_,M,q,re){e(_!=null),e(M!=null),e(2147483648>re),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=M,_.pa=q,_.Jd=M,_.Yc=q+re,_.Zc=4<=re?q+re-4+1:q,de(_)}function Z(_,M){for(var q=0;0<M--;)q|=ge(_,128)<<M;return q}function ee(_,M){var q=Z(_,M);return me(_)?-q:q}function ae(_,M,q,re){var ue,he=0;for(e(_!=null),e(M!=null),e(4294967288>re),_.Sb=re,_.Ra=0,_.u=0,_.h=0,4<re&&(re=4),ue=0;ue<re;++ue)he+=M[q+ue]<<8*ue;_.Ra=he,_.bb=re,_.oa=M,_.pa=q}function G(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Wu-8>>>0,++_.bb,_.u-=8;Y(_)&&(_.h=1,_.u=0)}function K(_,M){if(e(0<=M),!_.h&&M<=Ku){var q=W(_)&qc[M];return _.u+=M,G(_),q}return _.h=1,_.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(_){return _.Ra>>>(_.u&Wu-1)>>>0}function Y(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Wu}function te(_,M){_.u=M,_.h=Y(_)}function ce(_){_.u>=YA&&(e(_.u>=YA),G(_))}function de(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function me(_){return Z(_,1)}function ge(_,M){var q=_.Ca;0>_.b&&de(_);var re=_.b,ue=q*M>>>8,he=(_.I>>>re>ue)+0;for(he?(q-=ue,_.I-=ue+1<<re>>>0):q=ue+1,re=q,ue=0;256<=re;)ue+=8,re>>=8;return re=7^ue+wi[re],_.b-=re,_.Ca=(q<<re)-1,he}function Se(_,M,q){_[M+0]=q>>24&255,_[M+1]=q>>16&255,_[M+2]=q>>8&255,_[M+3]=q>>0&255}function xe(_,M){return _[M+0]<<0|_[M+1]<<8}function ie(_,M){return xe(_,M)|_[M+2]<<16}function Le(_,M){return xe(_,M)|xe(_,M+2)<<16}function nt(_,M){var q=1<<M;return e(_!=null),e(0<M),_.X=s(q),_.X==null?0:(_.Mb=32-M,_.Xa=M,1)}function Ie(_,M){e(_!=null),e(M!=null),e(_.Xa==M.Xa),n(M.X,0,_.X,0,1<<M.Xa)}function we(){this.X=[],this.Xa=this.Mb=0}function je(_,M,q,re){e(q!=null),e(re!=null);var ue=q[0],he=re[0];return ue==0&&(ue=(_*he+M/2)/M),he==0&&(he=(M*ue+_/2)/_),0>=ue||0>=he?0:(q[0]=ue,re[0]=he,1)}function et(_,M){return _+(1<<M)-1>>>M}function st(_,M){return((4278255360&_)+(4278255360&M)>>>0&4278255360)+((16711935&_)+(16711935&M)>>>0&16711935)>>>0}function mt(_,M){S[M]=function(q,re,ue,he,pe,ve,Ce){var Be;for(Be=0;Be<pe;++Be){var Ue=S[_](ve[Ce+Be-1],ue,he+Be);ve[Ce+Be]=st(q[re+Be],Ue)}}}function _t(){this.ud=this.hd=this.jd=0}function ut(_,M){return((4278124286&(_^M))>>>1)+(_&M)>>>0}function Nt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Qt(_,M){return Nt(_+(_-M+.5>>1))}function Yt(_,M,q){return Math.abs(M-q)-Math.abs(_-q)}function kt(_,M,q,re,ue,he,pe){for(re=he[pe-1],q=0;q<ue;++q)he[pe+q]=re=st(_[M+q],re)}function It(_,M,q,re,ue){var he;for(he=0;he<q;++he){var pe=_[M+he],ve=pe>>8&255,Ce=16711935&(Ce=(Ce=16711935&pe)+((ve<<16)+ve));re[ue+he]=(4278255360&pe)+Ce>>>0}}function Wt(_,M){M.jd=_>>0&255,M.hd=_>>8&255,M.ud=_>>16&255}function Dt(_,M,q,re,ue,he){var pe;for(pe=0;pe<re;++pe){var ve=M[q+pe],Ce=ve>>>8,Be=ve,Ue=255&(Ue=(Ue=ve>>>16)+((_.jd<<24>>24)*(Ce<<24>>24)>>>5));Be=255&(Be=(Be=Be+((_.hd<<24>>24)*(Ce<<24>>24)>>>5))+((_.ud<<24>>24)*(Ue<<24>>24)>>>5)),ue[he+pe]=(4278255360&ve)+(Ue<<16)+Be}}function Ft(_,M,q,re,ue){S[M]=function(he,pe,ve,Ce,Be,Ue,Xe,Ke,ze){for(Ce=Xe;Ce<Ke;++Ce)for(Xe=0;Xe<ze;++Xe)Be[Ue++]=ue(ve[re(he[pe++])])},S[_]=function(he,pe,ve,Ce,Be,Ue,Xe){var Ke=8>>he.b,ze=he.Ea,gt=he.K[0],it=he.w;if(8>Ke)for(he=(1<<he.b)-1,it=(1<<Ke)-1;pe<ve;++pe){var Me,Oe=0;for(Me=0;Me<ze;++Me)Me&he||(Oe=re(Ce[Be++])),Ue[Xe++]=ue(gt[Oe&it]),Oe>>=Ke}else S["VP8LMapColor"+q](Ce,Be,gt,it,Ue,Xe,pe,ve,ze)}}function xt(_,M,q,re,ue){for(q=M+q;M<q;){var he=_[M++];re[ue++]=he>>16&255,re[ue++]=he>>8&255,re[ue++]=he>>0&255}}function yr(_,M,q,re,ue){for(q=M+q;M<q;){var he=_[M++];re[ue++]=he>>16&255,re[ue++]=he>>8&255,re[ue++]=he>>0&255,re[ue++]=he>>24&255}}function Jt(_,M,q,re,ue){for(q=M+q;M<q;){var he=(pe=_[M++])>>16&240|pe>>12&15,pe=pe>>0&240|pe>>28&15;re[ue++]=he,re[ue++]=pe}}function fn(_,M,q,re,ue){for(q=M+q;M<q;){var he=(pe=_[M++])>>16&248|pe>>13&7,pe=pe>>5&224|pe>>3&31;re[ue++]=he,re[ue++]=pe}}function gr(_,M,q,re,ue){for(q=M+q;M<q;){var he=_[M++];re[ue++]=he>>0&255,re[ue++]=he>>8&255,re[ue++]=he>>16&255}}function Ur(_,M,q,re,ue,he){if(he==0)for(q=M+q;M<q;)Se(re,((he=_[M++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(re,ue,_,M,q)}function In(_,M){S[M][0]=S[_+"0"],S[M][1]=S[_+"1"],S[M][2]=S[_+"2"],S[M][3]=S[_+"3"],S[M][4]=S[_+"4"],S[M][5]=S[_+"5"],S[M][6]=S[_+"6"],S[M][7]=S[_+"7"],S[M][8]=S[_+"8"],S[M][9]=S[_+"9"],S[M][10]=S[_+"10"],S[M][11]=S[_+"11"],S[M][12]=S[_+"12"],S[M][13]=S[_+"13"],S[M][14]=S[_+"0"],S[M][15]=S[_+"0"]}function Ir(_){return _==kf||_==ru||_==sc||_==td}function us(){this.eb=[],this.size=this.A=this.fb=0}function an(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function na(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new us,this.f.kb=new an,this.sd=null}function pa(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rr(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function zr(_,M){var q=_.T,re=M.ba.f.RGBA,ue=re.eb,he=re.fb+_.ka*re.A,pe=ps[M.ba.S],ve=_.y,Ce=_.O,Be=_.f,Ue=_.N,Xe=_.ea,Ke=_.W,ze=M.cc,gt=M.dc,it=M.Mc,Me=M.Nc,Oe=_.ka,ct=_.ka+_.T,vt=_.U,ft=vt+1>>1;for(Oe==0?pe(ve,Ce,null,null,Be,Ue,Xe,Ke,Be,Ue,Xe,Ke,ue,he,null,null,vt):(pe(M.ec,M.fc,ve,Ce,ze,gt,it,Me,Be,Ue,Xe,Ke,ue,he-re.A,ue,he,vt),++q);Oe+2<ct;Oe+=2)ze=Be,gt=Ue,it=Xe,Me=Ke,Ue+=_.Rc,Ke+=_.Rc,he+=2*re.A,pe(ve,(Ce+=2*_.fa)-_.fa,ve,Ce,ze,gt,it,Me,Be,Ue,Xe,Ke,ue,he-re.A,ue,he,vt);return Ce+=_.fa,_.j+ct<_.o?(n(M.ec,M.fc,ve,Ce,vt),n(M.cc,M.dc,Be,Ue,ft),n(M.Mc,M.Nc,Xe,Ke,ft),q--):1&ct||pe(ve,Ce,null,null,Be,Ue,Xe,Ke,Be,Ue,Xe,Ke,ue,he+re.A,null,null,vt),q}function As(_,M,q){var re=_.F,ue=[_.J];if(re!=null){var he=_.U,pe=M.ba.S,ve=pe==Zu||pe==sc;M=M.ba.f.RGBA;var Ce=[0],Be=_.ka;Ce[0]=_.T,_.Kb&&(Be==0?--Ce[0]:(--Be,ue[0]-=_.width),_.j+_.ka+_.T==_.o&&(Ce[0]=_.o-_.j-Be));var Ue=M.eb;Be=M.fb+Be*M.A,_=Wr(re,ue[0],_.width,he,Ce,Ue,Be+(ve?0:3),M.A),e(q==Ce),_&&Ir(pe)&&$i(Ue,Be,ve,he,Ce,M.A)}return 0}function Wn(_){var M=_.ma,q=M.ba.S,re=11>q,ue=q==ed||q==Nf||q==Zu||q==ac||q==12||Ir(q);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Gc(M.Oa,_,ue?11:12))return 0;if(ue&&Ir(q)&&Et(),_.da)alert("todo:use_scaling");else{if(re){if(M.Ib=rr,_.Kb){if(q=_.U+1>>1,M.memory=s(_.U+2*q),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+_.U,M.Mc=M.cc,M.Nc=M.dc+q,M.Ib=zr,Et()}}else alert("todo:EmitYUV");ue&&(M.Jb=As,re&&Ve())}if(re&&!u1){for(_=0;256>_;++_)ub[_]=89858*(_-128)+$a>>_l,Df[_]=-22014*(_-128)+$a,sp[_]=-45773*(_-128),Xa[_]=113618*(_-128)+$a>>_l;for(_=su;_<Jh;++_)M=76283*(_-16)+$a>>_l,Rf[_-su]=_n(M,255),ip[_-su]=_n(M+8>>4,15);u1=1}return 1}function ba(_){var M=_.ma,q=_.U,re=_.T;return e(!(1&_.ka)),0>=q||0>=re?0:(q=M.Ib(_,M),M.Jb!=null&&M.Jb(_,M,q),M.Dc+=q,1)}function Ss(_){_.ma.memory=null}function Ht(_,M,q,re){return K(_,8)!=47?0:(M[0]=K(_,14)+1,q[0]=K(_,14)+1,re[0]=K(_,1),K(_,3)!=0?0:!_.h)}function hn(_,M){if(4>_)return _+1;var q=_-2>>1;return(2+(1&_)<<q)+K(M,q)+1}function sn(_,M){return 120<M?M-120:1<=(q=((q=oc[M-1])>>4)*_+(8-(15&q)))?q:1;var q}function Fn(_,M,q){var re=W(q),ue=_[M+=255&re].g-8;return 0<ue&&(te(q,q.u+8),re=W(q),M+=_[M].value,M+=re&(1<<ue)-1),te(q,q.u+_[M].g),_[M].value}function Mn(_,M,q){return q.g+=_.g,q.value+=_.value<<M>>>0,e(8>=q.g),_.g}function $n(_,M,q){var re=_.xc;return e((M=re==0?0:_.vc[_.md*(q>>re)+(M>>re)])<_.Wb),_.Ya[M]}function fe(_,M,q,re){var ue=_.ab,he=_.c*M,pe=_.C;M=pe+M;var ve=q,Ce=re;for(re=_.Ta,q=_.Ua;0<ue--;){var Be=_.gc[ue],Ue=pe,Xe=M,Ke=ve,ze=Ce,gt=(Ce=re,ve=q,Be.Ea);switch(e(Ue<Xe),e(Xe<=Be.nc),Be.hc){case 2:Gh(Ke,ze,(Xe-Ue)*gt,Ce,ve);break;case 0:var it=Ue,Me=Xe,Oe=Ce,ct=ve,vt=(Ot=Be).Ea;it==0&&(np(Ke,ze,null,null,1,Oe,ct),kt(Ke,ze+1,0,0,vt-1,Oe,ct+1),ze+=vt,ct+=vt,++it);for(var ft=1<<Ot.b,zt=ft-1,Mt=et(vt,Ot.b),nr=Ot.K,Ot=Ot.w+(it>>Ot.b)*Mt;it<Me;){var gn=nr,Sn=Ot,qr=1;for(Tf(Ke,ze,Oe,ct-vt,1,Oe,ct);qr<vt;){var Qr=(qr&~zt)+ft;Qr>vt&&(Qr=vt),(0,tc[gn[Sn++]>>8&15])(Ke,ze+ +qr,Oe,ct+qr-vt,Qr-qr,Oe,ct+qr),qr=Qr}ze+=vt,ct+=vt,++it&zt||(Ot+=Mt)}Xe!=Be.nc&&n(Ce,ve-gt,Ce,ve+(Xe-Ue-1)*gt,gt);break;case 1:for(gt=Ke,Me=ze,vt=(Ke=Be.Ea)-(ct=Ke&~(Oe=(ze=1<<Be.b)-1)),it=et(Ke,Be.b),ft=Be.K,Be=Be.w+(Ue>>Be.b)*it;Ue<Xe;){for(zt=ft,Mt=Be,nr=new _t,Ot=Me+ct,gn=Me+Ke;Me<Ot;)Wt(zt[Mt++],nr),Wc(nr,gt,Me,ze,Ce,ve),Me+=ze,ve+=ze;Me<gn&&(Wt(zt[Mt++],nr),Wc(nr,gt,Me,vt,Ce,ve),Me+=vt,ve+=vt),++Ue&Oe||(Be+=it)}break;case 3:if(Ke==Ce&&ze==ve&&0<Be.b){for(Me=Ce,Ke=gt=ve+(Xe-Ue)*gt-(ct=(Xe-Ue)*et(Be.Ea,Be.b)),ze=Ce,Oe=ve,it=[],ct=(vt=ct)-1;0<=ct;--ct)it[ct]=ze[Oe+ct];for(ct=vt-1;0<=ct;--ct)Me[Ke+ct]=it[ct];ho(Be,Ue,Xe,Ce,gt,Ce,ve)}else ho(Be,Ue,Xe,Ke,ze,Ce,ve)}ve=re,Ce=q}Ce!=q&&n(re,q,ve,Ce,he)}function Ne(_,M){var q=_.V,re=_.Ba+_.c*_.C,ue=M-_.C;if(e(M<=_.l.o),e(16>=ue),0<ue){var he=_.l,pe=_.Ta,ve=_.Ua,Ce=he.width;if(fe(_,ue,q,re),ue=ve=[ve],e((q=_.C)<(re=M)),e(he.v<he.va),re>he.o&&(re=he.o),q<he.j){var Be=he.j-q;q=he.j,ue[0]+=Be*Ce}if(q>=re?q=0:(ue[0]+=4*he.v,he.ka=q-he.j,he.U=he.va-he.v,he.T=re-q,q=1),q){if(ve=ve[0],11>(q=_.ca).S){var Ue=q.f.RGBA,Xe=(re=q.S,ue=he.U,he=he.T,Be=Ue.eb,Ue.A),Ke=he;for(Ue=Ue.fb+_.Ma*Ue.A;0<Ke--;){var ze=pe,gt=ve,it=ue,Me=Be,Oe=Ue;switch(re){case Qs:ti(ze,gt,it,Me,Oe);break;case ed:Is(ze,gt,it,Me,Oe);break;case kf:Is(ze,gt,it,Me,Oe),$i(Me,Oe,0,it,1,0);break;case wl:Po(ze,gt,it,Me,Oe);break;case Nf:Ur(ze,gt,it,Me,Oe,1);break;case ru:Ur(ze,gt,it,Me,Oe,1),$i(Me,Oe,0,it,1,0);break;case Zu:Ur(ze,gt,it,Me,Oe,0);break;case sc:Ur(ze,gt,it,Me,Oe,0),$i(Me,Oe,1,it,1,0);break;case ac:$c(ze,gt,it,Me,Oe);break;case td:$c(ze,gt,it,Me,Oe),Kr(Me,Oe,it,1,0);break;case Kh:bi(ze,gt,it,Me,Oe);break;default:e(0)}ve+=Ce,Ue+=Xe}_.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=q.height)}}_.C=M,e(_.C<=_.i)}function Ee(_){var M;if(0<_.ua)return 0;for(M=0;M<_.Wb;++M){var q=_.Ya[M].G,re=_.Ya[M].H;if(0<q[1][re[1]+0].g||0<q[2][re[2]+0].g||0<q[3][re[3]+0].g)return 0}return 1}function _e(_,M,q,re,ue,he){if(_.Z!=0){var pe=_.qd,ve=_.rd;for(e(Cl[_.Z]!=null);M<q;++M)Cl[_.Z](pe,ve,re,ue,re,ue,he),pe=re,ve=ue,ue+=he;_.qd=pe,_.rd=ve}}function Te(_,M){var q=_.l.ma,re=q.Z==0||q.Z==1?_.l.j:_.C;if(re=_.C<re?re:_.C,e(M<=_.l.o),M>re){var ue=_.l.width,he=q.ca,pe=q.tb+ue*re,ve=_.V,Ce=_.Ba+_.c*re,Be=_.gc;e(_.ab==1),e(Be[0].hc==3),Kc(Be[0],re,M,ve,Ce,he,pe),_e(q,re,M,he,pe,ue)}_.C=_.Ma=M}function ke(_,M,q,re,ue,he,pe){var ve=_.$/re,Ce=_.$%re,Be=_.m,Ue=_.s,Xe=q+_.$,Ke=Xe;ue=q+re*ue;var ze=q+re*he,gt=280+Ue.ua,it=_.Pb?ve:16777216,Me=0<Ue.ua?Ue.Wa:null,Oe=Ue.wc,ct=Xe<ze?$n(Ue,Ce,ve):null;e(_.C<he),e(ze<=ue);var vt=!1;e:for(;;){for(;vt||Xe<ze;){var ft=0;if(ve>=it){var zt=Xe-q;e((it=_).Pb),it.wd=it.m,it.xd=zt,0<it.s.ua&&Ie(it.s.Wa,it.s.vb),it=ve+o1}if(Ce&Oe||(ct=$n(Ue,Ce,ve)),e(ct!=null),ct.Qb&&(M[Xe]=ct.qb,vt=!0),!vt)if(ce(Be),ct.jc){ft=Be,zt=M;var Mt=Xe,nr=ct.pd[W(ft)&Ka-1];e(ct.jc),256>nr.g?(te(ft,ft.u+nr.g),zt[Mt]=nr.value,ft=0):(te(ft,ft.u+nr.g-256),e(256<=nr.value),ft=nr.value),ft==0&&(vt=!0)}else ft=Fn(ct.G[0],ct.H[0],Be);if(Be.h)break;if(vt||256>ft){if(!vt)if(ct.nd)M[Xe]=(ct.qb|ft<<8)>>>0;else{if(ce(Be),vt=Fn(ct.G[1],ct.H[1],Be),ce(Be),zt=Fn(ct.G[2],ct.H[2],Be),Mt=Fn(ct.G[3],ct.H[3],Be),Be.h)break;M[Xe]=(Mt<<24|vt<<16|ft<<8|zt)>>>0}if(vt=!1,++Xe,++Ce>=re&&(Ce=0,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(_,ve),Me!=null))for(;Ke<Xe;)ft=M[Ke++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else if(280>ft){if(ft=hn(ft-256,Be),zt=Fn(ct.G[4],ct.H[4],Be),ce(Be),zt=sn(re,zt=hn(zt,Be)),Be.h)break;if(Xe-q<zt||ue-Xe<ft)break e;for(Mt=0;Mt<ft;++Mt)M[Xe+Mt]=M[Xe+Mt-zt];for(Xe+=ft,Ce+=ft;Ce>=re;)Ce-=re,++ve,pe!=null&&ve<=he&&!(ve%16)&&pe(_,ve);if(e(Xe<=ue),Ce&Oe&&(ct=$n(Ue,Ce,ve)),Me!=null)for(;Ke<Xe;)ft=M[Ke++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft}else{if(!(ft<gt))break e;for(vt=ft-280,e(Me!=null);Ke<Xe;)ft=M[Ke++],Me.X[(506832829*ft&4294967295)>>>Me.Mb]=ft;ft=Xe,e(!(vt>>>(zt=Me).Xa)),M[ft]=zt.X[vt],vt=!0}vt||e(Be.h==Y(Be))}if(_.Pb&&Be.h&&Xe<ue)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Ie(_.s.vb,_.s.Wa);else{if(Be.h)break e;pe!=null&&pe(_,ve>he?he:ve),_.a=0,_.$=Xe-q}return 1}return _.a=3,0}function qe(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var M=_.Wa;M!=null&&(M.X=null),_.vb=null,e(_!=null)}function tt(){var _=new $A;return _==null?null:(_.a=0,_.xb=rd,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),Gh=It,Wc=Dt,ti=xt,Is=yr,$c=Jt,bi=fn,Po=gr,S.VP8LMapColor32b=hs,S.VP8LMapColor8b=Bf,_)}function He(_,M,q,re,ue){var he=1,pe=[_],ve=[M],Ce=re.m,Be=re.s,Ue=null,Xe=0;e:for(;;){if(q)for(;he&&K(Ce,1);){var Ke=pe,ze=ve,gt=re,it=1,Me=gt.m,Oe=gt.gc[gt.ab],ct=K(Me,2);if(gt.Oc&1<<ct)he=0;else{switch(gt.Oc|=1<<ct,Oe.hc=ct,Oe.Ea=Ke[0],Oe.nc=ze[0],Oe.K=[null],++gt.ab,e(4>=gt.ab),ct){case 0:case 1:Oe.b=K(Me,3)+2,it=He(et(Oe.Ea,Oe.b),et(Oe.nc,Oe.b),0,gt,Oe.K),Oe.K=Oe.K[0];break;case 3:var vt,ft=K(Me,8)+1,zt=16<ft?0:4<ft?1:2<ft?2:3;if(Ke[0]=et(Oe.Ea,zt),Oe.b=zt,vt=it=He(ft,1,0,gt,Oe.K)){var Mt,nr=ft,Ot=Oe,gn=1<<(8>>Ot.b),Sn=s(gn);if(Sn==null)vt=0;else{var qr=Ot.K[0],Qr=Ot.w;for(Sn[0]=Ot.K[0][0],Mt=1;Mt<1*nr;++Mt)Sn[Mt]=st(qr[Qr+Mt],Sn[Mt-1]);for(;Mt<4*gn;++Mt)Sn[Mt]=0;Ot.K[0]=null,Ot.K[0]=Sn,vt=1}}it=vt;break;case 2:break;default:e(0)}he=it}}if(pe=pe[0],ve=ve[0],he&&K(Ce,1)&&!(he=1<=(Xe=K(Ce,4))&&11>=Xe)){re.a=3;break e}var Rn;if(Rn=he)t:{var Tn,kr,jn,dr=re,wr=pe,pn=ve,xn=Xe,gs=q,Ya=dr.m,_a=dr.s,Sa=[null],Ma=1,xo=0,Bn=tA[xn];r:for(;;){if(gs&&K(Ya,1)){var Pa=K(Ya,3)+2,Qo=et(wr,Pa),iu=et(pn,Pa),aA=Qo*iu;if(!He(Qo,iu,0,dr,Sa))break r;for(Sa=Sa[0],_a.xc=Pa,Tn=0;Tn<aA;++Tn){var ou=Sa[Tn]>>8&65535;Sa[Tn]=ou,ou>=Ma&&(Ma=ou+1)}}if(Ya.h)break r;for(kr=0;5>kr;++kr){var ia=Xi[kr];!kr&&0<xn&&(ia+=1<<xn),xo<ia&&(xo=ia)}var Lf=i(Ma*Bn,I),Zh=Ma,ni=i(Zh,z);if(ni==null)var ua=null;else e(65536>=Zh),ua=ni;var sA=s(xo);if(ua==null||sA==null||Lf==null){dr.a=1;break r}var lu=Lf;for(Tn=jn=0;Tn<Ma;++Tn){var Ei=ua[Tn],cu=Ei.G,_i=Ei.H,Uf=0,ad=1,e0=0;for(kr=0;5>kr;++kr){ia=Xi[kr],cu[kr]=lu,_i[kr]=jn,!kr&&0<xn&&(ia+=1<<xn);a:{var Mf,t0=ia,Pf=dr,sd=sA,f1=lu,h1=jn,jf=0,Ac=Pf.m,db=K(Ac,1);if(a(sd,0,0,t0),db){var m1=K(Ac,1)+1,p1=K(Ac,1),op=K(Ac,p1==0?1:8);sd[op]=1,m1==2&&(sd[op=K(Ac,8)]=1);var id=1}else{var lp=s(19),cp=K(Ac,4)+4;if(19<cp){Pf.a=3;var Of=0;break a}for(Mf=0;Mf<cp;++Mf)lp[ic[Mf]]=K(Ac,3);var r0=void 0,od=void 0,g1=Pf,x1=lp,dc=t0,Qf=sd,n0=0,Ho=g1.m,ld=8,up=i(128,I);n:for(;L(up,0,7,x1,19);){if(K(Ho,1)){var v1=2+2*K(Ho,3);if((r0=2+K(Ho,v1))>dc)break n}else r0=dc;for(od=0;od<dc&&r0--;){ce(Ho);var Ap=up[0+(127&W(Ho))];te(Ho,Ho.u+Ap.g);var iA=Ap.value;if(16>iA)Qf[od++]=iA,iA!=0&&(ld=iA);else{var y1=iA==16,dp=iA-16,fp=go[dp],hp=K(Ho,Wh[dp])+fp;if(od+hp>dc)break n;for(var w1=y1?ld:0;0<hp--;)Qf[od++]=w1}}n0=1;break n}n0||(g1.a=3),id=n0}(id=id&&!Ac.h)&&(jf=L(f1,h1,8,sd,t0)),id&&jf!=0?Of=jf:(Pf.a=3,Of=0)}if(Of==0)break r;if(ad&&eA[kr]==1&&(ad=lu[jn].g==0),Uf+=lu[jn].g,jn+=Of,3>=kr){var oA,a0=sA[0];for(oA=1;oA<ia;++oA)sA[oA]>a0&&(a0=sA[oA]);e0+=a0}}if(Ei.nd=ad,Ei.Qb=0,ad&&(Ei.qb=(cu[3][_i[3]+0].value<<24|cu[1][_i[1]+0].value<<16|cu[2][_i[2]+0].value)>>>0,Uf==0&&256>cu[0][_i[0]+0].value&&(Ei.Qb=1,Ei.qb+=cu[0][_i[0]+0].value<<8)),Ei.jc=!Ei.Qb&&6>e0,Ei.jc){var Hf,fc=Ei;for(Hf=0;Hf<Ka;++Hf){var Sl=Hf,hc=fc.pd[Sl],Vf=fc.G[0][fc.H[0]+Sl];256<=Vf.value?(hc.g=Vf.g+256,hc.value=Vf.value):(hc.g=0,hc.value=0,Sl>>=Mn(Vf,8,hc),Sl>>=Mn(fc.G[1][fc.H[1]+Sl],16,hc),Sl>>=Mn(fc.G[2][fc.H[2]+Sl],0,hc),Mn(fc.G[3][fc.H[3]+Sl],24,hc))}}}_a.vc=Sa,_a.Wb=Ma,_a.Ya=ua,_a.yc=Lf,Rn=1;break t}Rn=0}if(!(he=Rn)){re.a=3;break e}if(0<Xe){if(Be.ua=1<<Xe,!nt(Be.Wa,Xe)){re.a=1,he=0;break e}}else Be.ua=0;var zf=re,mp=pe,b1=ve,pp=zf.s,gp=pp.xc;if(zf.c=mp,zf.i=b1,pp.md=et(mp,gp),pp.wc=gp==0?-1:(1<<gp)-1,q){re.xb=c1;break e}if((Ue=s(pe*ve))==null){re.a=1,he=0;break e}he=(he=ke(re,Ue,0,pe,ve,ve,null))&&!Ce.h;break e}return he?(ue!=null?ue[0]=Ue:(e(Ue==null),e(q)),re.$=0,q||qe(Be)):qe(Be),he}function We(_,M){var q=_.c*_.i,re=q+M+16*M;return e(_.c<=M),_.V=s(re),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+q+M,1)}function Ye(_,M){var q=_.C,re=M-q,ue=_.V,he=_.Ba+_.c*q;for(e(M<=_.l.o);0<re;){var pe=16<re?16:re,ve=_.l.ma,Ce=_.l.width,Be=Ce*pe,Ue=ve.ca,Xe=ve.tb+Ce*q,Ke=_.Ta,ze=_.Ua;fe(_,pe,ue,he),Yn(Ke,ze,Ue,Xe,Be),_e(ve,q,q+pe,Ue,Xe,Ce),re-=pe,ue+=pe*_.c,q+=pe}e(q==M),_.C=_.Ma=M}function yt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Tt(){this.Yb=function(){var _=[];return function M(q,re,ue){for(var he=ue[re],pe=0;pe<he&&(q.push(ue.length>re+1?[]:0),!(ue.length<re+1));pe++)M(q[pe],re+1,ue)}(_,0,[3,11]),_}()}function Rt(){this.jb=s(3),this.Wc=o([4,8],Tt),this.Xc=o([4,17],Tt)}function Ar(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function jr(){this.ld=this.La=this.dd=this.tc=0}function Or(){this.Na=this.la=0}function Gr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fa(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mi(){this.uc=this.M=this.Nb=0,this.wa=Array(new jr),this.Y=0,this.ya=Array(new Fa),this.aa=0,this.l=new qa}function Da(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ds(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new yt,this.Kc=new Bt,this.ed=new Ar,this.Qa=new Pt,this.Ic=this.$c=this.Aa=0,this.D=new mi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,le),this.ia=0,this.pb=i(4,Gr),this.Pa=new Rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Da),this.Hd=0,this.rb=Array(new Or),this.sb=0,this.wa=Array(new jr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fa),this.L=this.aa=0,this.gd=o([4,2],jr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ts(){var _=new ds;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Wa||(Wa=GA)),_}function Xn(_,M,q){return _.a==0&&(_.a=M,_.sc=q,_.cb=0),0}function fs(_,M,q){return 3<=q&&_[M+0]==157&&_[M+1]==1&&_[M+2]==42}function Pc(_,M){if(_==null)return 0;if(_.a=0,_.sc="OK",M==null)return Xn(_,2,"null VP8Io passed to VP8GetHeaders()");var q=M.data,re=M.w,ue=M.ha;if(4>ue)return Xn(_,7,"Truncated header.");var he=q[re+0]|q[re+1]<<8|q[re+2]<<16,pe=_.Od;if(pe.Rb=!(1&he),pe.td=he>>1&7,pe.yd=he>>4&1,pe.ub=he>>5,3<pe.td)return Xn(_,3,"Incorrect keyframe parameters.");if(!pe.yd)return Xn(_,4,"Frame not displayable.");re+=3,ue-=3;var ve=_.Kc;if(pe.Rb){if(7>ue)return Xn(_,7,"cannot parse picture header");if(!fs(q,re,ue))return Xn(_,3,"Bad code word");ve.c=16383&(q[re+4]<<8|q[re+3]),ve.Td=q[re+4]>>6,ve.i=16383&(q[re+6]<<8|q[re+5]),ve.Ud=q[re+6]>>6,re+=7,ue-=7,_.za=ve.c+15>>4,_.Ub=ve.i+15>>4,M.width=ve.c,M.height=ve.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,a((he=_.Pa).jb,0,255,he.jb.length),e((he=_.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(pe.ub>ue)return Xn(_,7,"bad partition length");ne(he=_.m,q,re,pe.ub),re+=pe.ub,ue-=pe.ub,pe.Rb&&(ve.Ld=me(he),ve.Kd=me(he)),ve=_.Qa;var Ce,Be=_.Pa;if(e(he!=null),e(ve!=null),ve.Cb=me(he),ve.Cb){if(ve.Bb=me(he),me(he)){for(ve.Fb=me(he),Ce=0;4>Ce;++Ce)ve.Zb[Ce]=me(he)?ee(he,7):0;for(Ce=0;4>Ce;++Ce)ve.Lb[Ce]=me(he)?ee(he,6):0}if(ve.Bb)for(Ce=0;3>Ce;++Ce)Be.jb[Ce]=me(he)?Z(he,8):255}else ve.Bb=0;if(he.Ka)return Xn(_,3,"cannot parse segment header");if((ve=_.ed).zd=me(he),ve.Tb=Z(he,6),ve.wb=Z(he,3),ve.Pc=me(he),ve.Pc&&me(he)){for(Be=0;4>Be;++Be)me(he)&&(ve.vd[Be]=ee(he,6));for(Be=0;4>Be;++Be)me(he)&&(ve.od[Be]=ee(he,6))}if(_.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return Xn(_,3,"cannot parse filter header");var Ue=ue;if(ue=Ce=re,re=Ce+Ue,ve=Ue,_.Xb=(1<<Z(_.m,2))-1,Ue<3*(Be=_.Xb))q=7;else{for(Ce+=3*Be,ve-=3*Be,Ue=0;Ue<Be;++Ue){var Xe=q[ue+0]|q[ue+1]<<8|q[ue+2]<<16;Xe>ve&&(Xe=ve),ne(_.Jc[+Ue],q,Ce,Xe),Ce+=Xe,ve-=Xe,ue+=3}ne(_.Jc[+Be],q,Ce,ve),q=Ce<re?0:5}if(q!=0)return Xn(_,q,"cannot parse partitions");for(q=Z(Ce=_.m,7),ue=me(Ce)?ee(Ce,4):0,re=me(Ce)?ee(Ce,4):0,ve=me(Ce)?ee(Ce,4):0,Be=me(Ce)?ee(Ce,4):0,Ce=me(Ce)?ee(Ce,4):0,Ue=_.Qa,Xe=0;4>Xe;++Xe){if(Ue.Cb){var Ke=Ue.Zb[Xe];Ue.Fb||(Ke+=q)}else{if(0<Xe){_.pb[Xe]=_.pb[0];continue}Ke=q}var ze=_.pb[Xe];ze.Sc[0]=If[_n(Ke+ue,127)],ze.Sc[1]=Ff[_n(Ke+0,127)],ze.Eb[0]=2*If[_n(Ke+re,127)],ze.Eb[1]=101581*Ff[_n(Ke+ve,127)]>>16,8>ze.Eb[1]&&(ze.Eb[1]=8),ze.Qc[0]=If[_n(Ke+Be,117)],ze.Qc[1]=Ff[_n(Ke+Ce,127)],ze.lc=Ke+Ce}if(!pe.Rb)return Xn(_,4,"Not a key frame.");for(me(he),pe=_.Pa,q=0;4>q;++q){for(ue=0;8>ue;++ue)for(re=0;3>re;++re)for(ve=0;11>ve;++ve)Be=ge(he,rA[q][ue][re][ve])?Z(he,8):bl[q][ue][re][ve],pe.Wc[q][ue].Yb[re][ve]=Be;for(ue=0;17>ue;++ue)pe.Xc[q][ue]=pe.Wc[q][l1[ue]]}return _.kc=me(he),_.kc&&(_.Bd=Z(he,8)),_.cb=1}function GA(_,M,q,re,ue,he,pe){var ve=M[ue].Yb[q];for(q=0;16>ue;++ue){if(!ge(_,ve[q+0]))return ue;for(;!ge(_,ve[q+1]);)if(ve=M[++ue].Yb[0],q=0,ue==16)return 16;var Ce=M[ue+1].Yb;if(ge(_,ve[q+2])){var Be=_,Ue=0;if(ge(Be,(Ke=ve)[(Xe=q)+3]))if(ge(Be,Ke[Xe+6])){for(ve=0,Xe=2*(Ue=ge(Be,Ke[Xe+8]))+(Ke=ge(Be,Ke[Xe+9+Ue])),Ue=0,Ke=va[Xe];Ke[ve];++ve)Ue+=Ue+ge(Be,Ke[ve]);Ue+=3+(8<<Xe)}else ge(Be,Ke[Xe+7])?(Ue=7+2*ge(Be,165),Ue+=ge(Be,145)):Ue=5+ge(Be,159);else Ue=ge(Be,Ke[Xe+4])?3+ge(Be,Ke[Xe+5]):2;ve=Ce[2]}else Ue=1,ve=Ce[1];Ce=pe+wn[ue],0>(Be=_).b&&de(Be);var Xe,Ke=Be.b,ze=(Xe=Be.Ca>>1)-(Be.I>>Ke)>>31;--Be.b,Be.Ca+=ze,Be.Ca|=1,Be.I-=(Xe+1&ze)<<Ke,he[Ce]=((Ue^ze)-ze)*re[(0<ue)+0]}return 16}function ol(_){var M=_.rb[_.sb-1];M.la=0,M.Na=0,a(_.zc,0,0,_.zc.length),_.ja=0}function Ou(_,M){if(_==null)return 0;if(M==null)return Xn(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Pc(_,M))return 0;if(e(_.cb),M.ac==null||M.ac(M)){M.ob&&(_.L=0);var q=uc[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=M.v-q>>4,_.zb=M.j-q>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=M.o+15+q>>4,_.Hb=M.va+15+q>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var re=_.ed;for(q=0;4>q;++q){var ue;if(_.Qa.Cb){var he=_.Qa.Lb[q];_.Qa.Fb||(he+=re.Tb)}else he=re.Tb;for(ue=0;1>=ue;++ue){var pe=_.gd[q][ue],ve=he;if(re.Pc&&(ve+=re.vd[0],ue&&(ve+=re.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ce=ve;0<re.wb&&(Ce=4<re.wb?Ce>>2:Ce>>1)>9-re.wb&&(Ce=9-re.wb),1>Ce&&(Ce=1),pe.dd=Ce,pe.tc=2*ve+Ce,pe.ld=40<=ve?2:15<=ve?1:0}else pe.tc=0;pe.La=ue}}}q=0}else Xn(_,6,"Frame setup failed"),q=_.a;if(q=q==0){if(q){_.$c=0,0<_.Aa||(_.Ic=A1);e:{q=_.Ic,re=4*(Ce=_.za);var Be=32*Ce,Ue=Ce+1,Xe=0<_.L?Ce*(0<_.Aa?2:1):0,Ke=(_.Aa==2?2:1)*Ce;if((pe=re+832+(ue=3*(16*q+uc[_.L])/2*Be)+(he=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=pe)q=0;else{if(pe>_.Vb){if(_.Vb=0,_.Ec=s(pe),_.Fc=0,_.Ec==null){q=Xn(_,1,"no memory during frame initialization.");break e}_.Vb=pe}pe=_.Ec,ve=_.Fc,_.Ac=pe,_.Bc=ve,ve+=re,_.Gd=i(Be,Da),_.Hd=0,_.rb=i(Ue+1,Or),_.sb=1,_.wa=Xe?i(Xe,jr):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=Ce),e(!0),_.oc=pe,_.pc=ve,ve+=832,_.ya=i(Ke,Fa),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=Ce),_.R=16*Ce,_.B=8*Ce,Ce=(Be=uc[_.L])*_.R,Be=Be/2*_.B,_.sa=pe,_.ta=ve+Ce,_.qa=_.sa,_.ra=_.ta+16*q*_.R+Be,_.Ha=_.qa,_.Ia=_.ra+8*q*_.B+Be,_.$c=0,ve+=ue,_.mb=he?pe:null,_.nb=he?ve:null,e(ve+he<=_.Fc+_.Vb),ol(_),a(_.Ac,_.Bc,0,re),q=1}}if(q){if(M.ka=0,M.y=_.sa,M.O=_.ta,M.f=_.qa,M.N=_.ra,M.ea=_.Ha,M.Vd=_.Ia,M.fa=_.R,M.Rc=_.B,M.F=null,M.J=0,!nc){for(q=-255;255>=q;++q)Ea[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)mo[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)eu[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)tu[255+q]=0>q?0:255<q?255:q;nc=1}vl=pi,jo=cl,Oo=so,Ua=En,Ci=ul,ga=ll,$u=hl,yl=Uo,JA=Hc,Xc=Gu,Yc=Qc,Jc=Xl,Xu=Yl,ZA=ml,Zc=Wi,rc=js,Yu=La,xa=WA,ri[0]=Ms,ri[1]=qA,ri[2]=lo,ri[3]=KA,ri[4]=gi,ri[5]=co,ri[6]=ei,ri[7]=xi,ri[8]=Lo,ri[9]=Al,lc[0]=io,lc[1]=Hu,lc[2]=Fo,lc[3]=Oc,lc[4]=Pn,lc[5]=Ro,lc[6]=oo,Yi[0]=uo,Yi[1]=Qu,Yi[2]=Vu,Yi[3]=vi,Yi[4]=Jr,Yi[5]=Ra,Yi[6]=dl,q=1}else q=0}q&&(q=function(ze,gt){for(ze.M=0;ze.M<ze.Va;++ze.M){var it,Me=ze.Jc[ze.M&ze.Xb],Oe=ze.m,ct=ze;for(it=0;it<ct.za;++it){var vt=Oe,ft=ct,zt=ft.Ac,Mt=ft.Bc+4*it,nr=ft.zc,Ot=ft.ya[ft.aa+it];if(ft.Qa.Bb?Ot.$b=ge(vt,ft.Pa.jb[0])?2+ge(vt,ft.Pa.jb[2]):ge(vt,ft.Pa.jb[1]):Ot.$b=0,ft.kc&&(Ot.Ad=ge(vt,ft.Bd)),Ot.Za=!ge(vt,145)+0,Ot.Za){var gn=Ot.Ob,Sn=0;for(ft=0;4>ft;++ft){var qr,Qr=nr[0+ft];for(qr=0;4>qr;++qr){Qr=ap[zt[Mt+qr]][Qr];for(var Rn=nu[ge(vt,Qr[0])];0<Rn;)Rn=nu[2*Rn+ge(vt,Qr[Rn])];Qr=-Rn,zt[Mt+qr]=Qr}n(gn,Sn,zt,Mt,4),Sn+=4,nr[0+ft]=Qr}}else Qr=ge(vt,156)?ge(vt,128)?1:3:ge(vt,163)?2:0,Ot.Ob[0]=Qr,a(zt,Mt,Qr,4),a(nr,0,Qr,4);Ot.Dd=ge(vt,142)?ge(vt,114)?ge(vt,183)?1:3:2:0}if(ct.m.Ka)return Xn(ze,7,"Premature end-of-partition0 encountered.");for(;ze.ja<ze.za;++ze.ja){if(ct=Me,vt=(Oe=ze).rb[Oe.sb-1],zt=Oe.rb[Oe.sb+Oe.ja],it=Oe.ya[Oe.aa+Oe.ja],Mt=Oe.kc?it.Ad:0)vt.la=zt.la=0,it.Za||(vt.Na=zt.Na=0),it.Hc=0,it.Gc=0,it.ia=0;else{var Tn,kr;if(vt=zt,zt=ct,Mt=Oe.Pa.Xc,nr=Oe.ya[Oe.aa+Oe.ja],Ot=Oe.pb[nr.$b],ft=nr.ad,gn=0,Sn=Oe.rb[Oe.sb-1],Qr=qr=0,a(ft,gn,0,384),nr.Za)var jn=0,dr=Mt[3];else{Rn=s(16);var wr=vt.Na+Sn.Na;if(wr=Wa(zt,Mt[1],wr,Ot.Eb,0,Rn,0),vt.Na=Sn.Na=(0<wr)+0,1<wr)vl(Rn,0,ft,gn);else{var pn=Rn[0]+3>>3;for(Rn=0;256>Rn;Rn+=16)ft[gn+Rn]=pn}jn=1,dr=Mt[0]}var xn=15&vt.la,gs=15&Sn.la;for(Rn=0;4>Rn;++Rn){var Ya=1&gs;for(pn=kr=0;4>pn;++pn)xn=xn>>1|(Ya=(wr=Wa(zt,dr,wr=Ya+(1&xn),Ot.Sc,jn,ft,gn))>jn)<<7,kr=kr<<2|(3<wr?3:1<wr?2:ft[gn+0]!=0),gn+=16;xn>>=4,gs=gs>>1|Ya<<7,qr=(qr<<8|kr)>>>0}for(dr=xn,jn=gs>>4,Tn=0;4>Tn;Tn+=2){for(kr=0,xn=vt.la>>4+Tn,gs=Sn.la>>4+Tn,Rn=0;2>Rn;++Rn){for(Ya=1&gs,pn=0;2>pn;++pn)wr=Ya+(1&xn),xn=xn>>1|(Ya=0<(wr=Wa(zt,Mt[2],wr,Ot.Qc,0,ft,gn)))<<3,kr=kr<<2|(3<wr?3:1<wr?2:ft[gn+0]!=0),gn+=16;xn>>=2,gs=gs>>1|Ya<<5}Qr|=kr<<4*Tn,dr|=xn<<4<<Tn,jn|=(240&gs)<<Tn}vt.la=dr,Sn.la=jn,nr.Hc=qr,nr.Gc=Qr,nr.ia=43690&Qr?0:Ot.ia,Mt=!(qr|Qr)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[it.$b][it.Za],Oe.wa[Oe.Y+Oe.ja].La|=!Mt),ct.Ka)return Xn(ze,7,"Premature end-of-file encountered.")}if(ol(ze),Oe=gt,ct=1,it=(Me=ze).D,vt=0<Me.L&&Me.M>=Me.zb&&Me.M<=Me.Va,Me.Aa==0)e:{if(it.M=Me.M,it.uc=vt,yi(Me,it),ct=1,it=(kr=Me.D).Nb,vt=(Qr=uc[Me.L])*Me.R,zt=Qr/2*Me.B,Rn=16*it*Me.R,pn=8*it*Me.B,Mt=Me.sa,nr=Me.ta-vt+Rn,Ot=Me.qa,ft=Me.ra-zt+pn,gn=Me.Ha,Sn=Me.Ia-zt+pn,gs=(xn=kr.M)==0,qr=xn>=Me.Va-1,Me.Aa==2&&yi(Me,kr),kr.uc)for(Ya=(wr=Me).D.M,e(wr.D.uc),kr=wr.yb;kr<wr.Hb;++kr){jn=kr,dr=Ya;var _a=(Sa=(ia=wr).D).Nb;Tn=ia.R;var Sa=Sa.wa[Sa.Y+jn],Ma=ia.sa,xo=ia.ta+16*_a*Tn+16*jn,Bn=Sa.dd,Pa=Sa.tc;if(Pa!=0)if(e(3<=Pa),ia.L==1)0<jn&&rc(Ma,xo,Tn,Pa+4),Sa.La&&xa(Ma,xo,Tn,Pa),0<dr&&Zc(Ma,xo,Tn,Pa+4),Sa.La&&Yu(Ma,xo,Tn,Pa);else{var Qo=ia.B,iu=ia.qa,aA=ia.ra+8*_a*Qo+8*jn,ou=ia.Ha,ia=ia.Ia+8*_a*Qo+8*jn;_a=Sa.ld,0<jn&&(yl(Ma,xo,Tn,Pa+4,Bn,_a),Xc(iu,aA,ou,ia,Qo,Pa+4,Bn,_a)),Sa.La&&(Jc(Ma,xo,Tn,Pa,Bn,_a),ZA(iu,aA,ou,ia,Qo,Pa,Bn,_a)),0<dr&&($u(Ma,xo,Tn,Pa+4,Bn,_a),JA(iu,aA,ou,ia,Qo,Pa+4,Bn,_a)),Sa.La&&(Yc(Ma,xo,Tn,Pa,Bn,_a),Xu(iu,aA,ou,ia,Qo,Pa,Bn,_a))}}if(Me.ia&&alert("todo:DitherRow"),Oe.put!=null){if(kr=16*xn,xn=16*(xn+1),gs?(Oe.y=Me.sa,Oe.O=Me.ta+Rn,Oe.f=Me.qa,Oe.N=Me.ra+pn,Oe.ea=Me.Ha,Oe.W=Me.Ia+pn):(kr-=Qr,Oe.y=Mt,Oe.O=nr,Oe.f=Ot,Oe.N=ft,Oe.ea=gn,Oe.W=Sn),qr||(xn-=Qr),xn>Oe.o&&(xn=Oe.o),Oe.F=null,Oe.J=null,Me.Fa!=null&&0<Me.Fa.length&&kr<xn&&(Oe.J=zc(Me,Oe,kr,xn-kr),Oe.F=Me.mb,Oe.F==null&&Oe.F.length==0)){ct=Xn(Me,3,"Could not decode alpha data.");break e}kr<Oe.j&&(Qr=Oe.j-kr,kr=Oe.j,e(!(1&Qr)),Oe.O+=Me.R*Qr,Oe.N+=Me.B*(Qr>>1),Oe.W+=Me.B*(Qr>>1),Oe.F!=null&&(Oe.J+=Oe.width*Qr)),kr<xn&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=kr-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=xn-kr,ct=Oe.put(Oe))}it+1!=Me.Ic||qr||(n(Me.sa,Me.ta-vt,Mt,nr+16*Me.R,vt),n(Me.qa,Me.ra-zt,Ot,ft+8*Me.B,zt),n(Me.Ha,Me.Ia-zt,gn,Sn+8*Me.B,zt))}if(!ct)return Xn(ze,6,"Output aborted.")}return 1}(_,M)),M.bc!=null&&M.bc(M),q&=1}return q?(_.cb=0,q):0}function Bs(_,M,q,re,ue){ue=_[M+q+32*re]+(ue>>3),_[M+q+32*re]=-256&ue?0>ue?0:255:ue}function jc(_,M,q,re,ue,he){Bs(_,M,0,q,re+ue),Bs(_,M,1,q,re+he),Bs(_,M,2,q,re-he),Bs(_,M,3,q,re-ue)}function mn(_){return(20091*_>>16)+_}function Ns(_,M,q,re){var ue,he=0,pe=s(16);for(ue=0;4>ue;++ue){var ve=_[M+0]+_[M+8],Ce=_[M+0]-_[M+8],Be=(35468*_[M+4]>>16)-mn(_[M+12]),Ue=mn(_[M+4])+(35468*_[M+12]>>16);pe[he+0]=ve+Ue,pe[he+1]=Ce+Be,pe[he+2]=Ce-Be,pe[he+3]=ve-Ue,he+=4,M++}for(ue=he=0;4>ue;++ue)ve=(_=pe[he+0]+4)+pe[he+8],Ce=_-pe[he+8],Be=(35468*pe[he+4]>>16)-mn(pe[he+12]),Bs(q,re,0,0,ve+(Ue=mn(pe[he+4])+(35468*pe[he+12]>>16))),Bs(q,re,1,0,Ce+Be),Bs(q,re,2,0,Ce-Be),Bs(q,re,3,0,ve-Ue),he++,re+=32}function ll(_,M,q,re){var ue=_[M+0]+4,he=35468*_[M+4]>>16,pe=mn(_[M+4]),ve=35468*_[M+1]>>16;jc(q,re,0,ue+pe,_=mn(_[M+1]),ve),jc(q,re,1,ue+he,_,ve),jc(q,re,2,ue-he,_,ve),jc(q,re,3,ue-pe,_,ve)}function cl(_,M,q,re,ue){Ns(_,M,q,re),ue&&Ns(_,M+16,q,re+4)}function so(_,M,q,re){jo(_,M+0,q,re,1),jo(_,M+32,q,re+128,1)}function En(_,M,q,re){var ue;for(_=_[M+0]+4,ue=0;4>ue;++ue)for(M=0;4>M;++M)Bs(q,re,M,ue,_)}function ul(_,M,q,re){_[M+0]&&Ua(_,M+0,q,re),_[M+16]&&Ua(_,M+16,q,re+4),_[M+32]&&Ua(_,M+32,q,re+128),_[M+48]&&Ua(_,M+48,q,re+128+4)}function pi(_,M,q,re){var ue,he=s(16);for(ue=0;4>ue;++ue){var pe=_[M+0+ue]+_[M+12+ue],ve=_[M+4+ue]+_[M+8+ue],Ce=_[M+4+ue]-_[M+8+ue],Be=_[M+0+ue]-_[M+12+ue];he[0+ue]=pe+ve,he[8+ue]=pe-ve,he[4+ue]=Be+Ce,he[12+ue]=Be-Ce}for(ue=0;4>ue;++ue)pe=(_=he[0+4*ue]+3)+he[3+4*ue],ve=he[1+4*ue]+he[2+4*ue],Ce=he[1+4*ue]-he[2+4*ue],Be=_-he[3+4*ue],q[re+0]=pe+ve>>3,q[re+16]=Be+Ce>>3,q[re+32]=pe-ve>>3,q[re+48]=Be-Ce>>3,re+=64}function Io(_,M,q){var re,ue=M-32,he=ms,pe=255-_[ue-1];for(re=0;re<q;++re){var ve,Ce=he,Be=pe+_[M-1];for(ve=0;ve<q;++ve)_[M+ve]=Ce[Be+_[ue+ve]];M+=32}}function qA(_,M){Io(_,M,4)}function Qu(_,M){Io(_,M,8)}function Hu(_,M){Io(_,M,16)}function Fo(_,M){var q;for(q=0;16>q;++q)n(_,M+32*q,_,M-32,16)}function Oc(_,M){var q;for(q=16;0<q;--q)a(_,M,_[M-1],16),M+=32}function Do(_,M,q){var re;for(re=0;16>re;++re)a(M,q+32*re,_,16)}function io(_,M){var q,re=16;for(q=0;16>q;++q)re+=_[M-1+32*q]+_[M+q-32];Do(re>>5,_,M)}function Pn(_,M){var q,re=8;for(q=0;16>q;++q)re+=_[M-1+32*q];Do(re>>4,_,M)}function Ro(_,M){var q,re=8;for(q=0;16>q;++q)re+=_[M+q-32];Do(re>>4,_,M)}function oo(_,M){Do(128,_,M)}function hr(_,M,q){return _+2*M+q+2>>2}function lo(_,M){var q,re=M-32;for(re=new Uint8Array([hr(_[re-1],_[re+0],_[re+1]),hr(_[re+0],_[re+1],_[re+2]),hr(_[re+1],_[re+2],_[re+3]),hr(_[re+2],_[re+3],_[re+4])]),q=0;4>q;++q)n(_,M+32*q,re,0,re.length)}function KA(_,M){var q=_[M-1],re=_[M-1+32],ue=_[M-1+64],he=_[M-1+96];Se(_,M+0,16843009*hr(_[M-1-32],q,re)),Se(_,M+32,16843009*hr(q,re,ue)),Se(_,M+64,16843009*hr(re,ue,he)),Se(_,M+96,16843009*hr(ue,he,he))}function Ms(_,M){var q,re=4;for(q=0;4>q;++q)re+=_[M+q-32]+_[M-1+32*q];for(re>>=3,q=0;4>q;++q)a(_,M+32*q,re,4)}function gi(_,M){var q=_[M-1+0],re=_[M-1+32],ue=_[M-1+64],he=_[M-1-32],pe=_[M+0-32],ve=_[M+1-32],Ce=_[M+2-32],Be=_[M+3-32];_[M+0+96]=hr(re,ue,_[M-1+96]),_[M+1+96]=_[M+0+64]=hr(q,re,ue),_[M+2+96]=_[M+1+64]=_[M+0+32]=hr(he,q,re),_[M+3+96]=_[M+2+64]=_[M+1+32]=_[M+0+0]=hr(pe,he,q),_[M+3+64]=_[M+2+32]=_[M+1+0]=hr(ve,pe,he),_[M+3+32]=_[M+2+0]=hr(Ce,ve,pe),_[M+3+0]=hr(Be,Ce,ve)}function ei(_,M){var q=_[M+1-32],re=_[M+2-32],ue=_[M+3-32],he=_[M+4-32],pe=_[M+5-32],ve=_[M+6-32],Ce=_[M+7-32];_[M+0+0]=hr(_[M+0-32],q,re),_[M+1+0]=_[M+0+32]=hr(q,re,ue),_[M+2+0]=_[M+1+32]=_[M+0+64]=hr(re,ue,he),_[M+3+0]=_[M+2+32]=_[M+1+64]=_[M+0+96]=hr(ue,he,pe),_[M+3+32]=_[M+2+64]=_[M+1+96]=hr(he,pe,ve),_[M+3+64]=_[M+2+96]=hr(pe,ve,Ce),_[M+3+96]=hr(ve,Ce,Ce)}function co(_,M){var q=_[M-1+0],re=_[M-1+32],ue=_[M-1+64],he=_[M-1-32],pe=_[M+0-32],ve=_[M+1-32],Ce=_[M+2-32],Be=_[M+3-32];_[M+0+0]=_[M+1+64]=he+pe+1>>1,_[M+1+0]=_[M+2+64]=pe+ve+1>>1,_[M+2+0]=_[M+3+64]=ve+Ce+1>>1,_[M+3+0]=Ce+Be+1>>1,_[M+0+96]=hr(ue,re,q),_[M+0+64]=hr(re,q,he),_[M+0+32]=_[M+1+96]=hr(q,he,pe),_[M+1+32]=_[M+2+96]=hr(he,pe,ve),_[M+2+32]=_[M+3+96]=hr(pe,ve,Ce),_[M+3+32]=hr(ve,Ce,Be)}function xi(_,M){var q=_[M+0-32],re=_[M+1-32],ue=_[M+2-32],he=_[M+3-32],pe=_[M+4-32],ve=_[M+5-32],Ce=_[M+6-32],Be=_[M+7-32];_[M+0+0]=q+re+1>>1,_[M+1+0]=_[M+0+64]=re+ue+1>>1,_[M+2+0]=_[M+1+64]=ue+he+1>>1,_[M+3+0]=_[M+2+64]=he+pe+1>>1,_[M+0+32]=hr(q,re,ue),_[M+1+32]=_[M+0+96]=hr(re,ue,he),_[M+2+32]=_[M+1+96]=hr(ue,he,pe),_[M+3+32]=_[M+2+96]=hr(he,pe,ve),_[M+3+64]=hr(pe,ve,Ce),_[M+3+96]=hr(ve,Ce,Be)}function Al(_,M){var q=_[M-1+0],re=_[M-1+32],ue=_[M-1+64],he=_[M-1+96];_[M+0+0]=q+re+1>>1,_[M+2+0]=_[M+0+32]=re+ue+1>>1,_[M+2+32]=_[M+0+64]=ue+he+1>>1,_[M+1+0]=hr(q,re,ue),_[M+3+0]=_[M+1+32]=hr(re,ue,he),_[M+3+32]=_[M+1+64]=hr(ue,he,he),_[M+3+64]=_[M+2+64]=_[M+0+96]=_[M+1+96]=_[M+2+96]=_[M+3+96]=he}function Lo(_,M){var q=_[M-1+0],re=_[M-1+32],ue=_[M-1+64],he=_[M-1+96],pe=_[M-1-32],ve=_[M+0-32],Ce=_[M+1-32],Be=_[M+2-32];_[M+0+0]=_[M+2+32]=q+pe+1>>1,_[M+0+32]=_[M+2+64]=re+q+1>>1,_[M+0+64]=_[M+2+96]=ue+re+1>>1,_[M+0+96]=he+ue+1>>1,_[M+3+0]=hr(ve,Ce,Be),_[M+2+0]=hr(pe,ve,Ce),_[M+1+0]=_[M+3+32]=hr(q,pe,ve),_[M+1+32]=_[M+3+64]=hr(re,q,pe),_[M+1+64]=_[M+3+96]=hr(ue,re,q),_[M+1+96]=hr(he,ue,re)}function Vu(_,M){var q;for(q=0;8>q;++q)n(_,M+32*q,_,M-32,8)}function vi(_,M){var q;for(q=0;8>q;++q)a(_,M,_[M-1],8),M+=32}function Ps(_,M,q){var re;for(re=0;8>re;++re)a(M,q+32*re,_,8)}function uo(_,M){var q,re=8;for(q=0;8>q;++q)re+=_[M+q-32]+_[M-1+32*q];Ps(re>>4,_,M)}function Ra(_,M){var q,re=4;for(q=0;8>q;++q)re+=_[M+q-32];Ps(re>>3,_,M)}function Jr(_,M){var q,re=4;for(q=0;8>q;++q)re+=_[M-1+32*q];Ps(re>>3,_,M)}function dl(_,M){Ps(128,_,M)}function Ao(_,M,q){var re=_[M-q],ue=_[M+0],he=3*(ue-re)+qh[1020+_[M-2*q]-_[M+q]],pe=Ju[112+(he+4>>3)];_[M-q]=ms[255+re+Ju[112+(he+3>>3)]],_[M+0]=ms[255+ue-pe]}function zu(_,M,q,re){var ue=_[M+0],he=_[M+q];return po[255+_[M-2*q]-_[M-q]]>re||po[255+he-ue]>re}function Wl(_,M,q,re){return 4*po[255+_[M-q]-_[M+0]]+po[255+_[M-2*q]-_[M+q]]<=re}function $l(_,M,q,re,ue){var he=_[M-3*q],pe=_[M-2*q],ve=_[M-q],Ce=_[M+0],Be=_[M+q],Ue=_[M+2*q],Xe=_[M+3*q];return 4*po[255+ve-Ce]+po[255+pe-Be]>re?0:po[255+_[M-4*q]-he]<=ue&&po[255+he-pe]<=ue&&po[255+pe-ve]<=ue&&po[255+Xe-Ue]<=ue&&po[255+Ue-Be]<=ue&&po[255+Be-Ce]<=ue}function Wi(_,M,q,re){var ue=2*re+1;for(re=0;16>re;++re)Wl(_,M+re,q,ue)&&Ao(_,M+re,q)}function js(_,M,q,re){var ue=2*re+1;for(re=0;16>re;++re)Wl(_,M+re*q,1,ue)&&Ao(_,M+re*q,1)}function La(_,M,q,re){var ue;for(ue=3;0<ue;--ue)Wi(_,M+=4*q,q,re)}function WA(_,M,q,re){var ue;for(ue=3;0<ue;--ue)js(_,M+=4,q,re)}function fl(_,M,q,re,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if($l(_,M,q,he,pe))if(zu(_,M,q,ve))Ao(_,M,q);else{var Ce=_,Be=M,Ue=q,Xe=Ce[Be-2*Ue],Ke=Ce[Be-Ue],ze=Ce[Be+0],gt=Ce[Be+Ue],it=Ce[Be+2*Ue],Me=27*(ct=qh[1020+3*(ze-Ke)+qh[1020+Xe-gt]])+63>>7,Oe=18*ct+63>>7,ct=9*ct+63>>7;Ce[Be-3*Ue]=ms[255+Ce[Be-3*Ue]+ct],Ce[Be-2*Ue]=ms[255+Xe+Oe],Ce[Be-Ue]=ms[255+Ke+Me],Ce[Be+0]=ms[255+ze-Me],Ce[Be+Ue]=ms[255+gt-Oe],Ce[Be+2*Ue]=ms[255+it-ct]}M+=re}}function ks(_,M,q,re,ue,he,pe,ve){for(he=2*he+1;0<ue--;){if($l(_,M,q,he,pe))if(zu(_,M,q,ve))Ao(_,M,q);else{var Ce=_,Be=M,Ue=q,Xe=Ce[Be-Ue],Ke=Ce[Be+0],ze=Ce[Be+Ue],gt=Ju[112+((it=3*(Ke-Xe))+4>>3)],it=Ju[112+(it+3>>3)],Me=gt+1>>1;Ce[Be-2*Ue]=ms[255+Ce[Be-2*Ue]+Me],Ce[Be-Ue]=ms[255+Xe+it],Ce[Be+0]=ms[255+Ke-gt],Ce[Be+Ue]=ms[255+ze-Me]}M+=re}}function hl(_,M,q,re,ue,he){fl(_,M,q,1,16,re,ue,he)}function Uo(_,M,q,re,ue,he){fl(_,M,1,q,16,re,ue,he)}function Qc(_,M,q,re,ue,he){var pe;for(pe=3;0<pe;--pe)ks(_,M+=4*q,q,1,16,re,ue,he)}function Xl(_,M,q,re,ue,he){var pe;for(pe=3;0<pe;--pe)ks(_,M+=4,1,q,16,re,ue,he)}function Hc(_,M,q,re,ue,he,pe,ve){fl(_,M,ue,1,8,he,pe,ve),fl(q,re,ue,1,8,he,pe,ve)}function Gu(_,M,q,re,ue,he,pe,ve){fl(_,M,1,ue,8,he,pe,ve),fl(q,re,1,ue,8,he,pe,ve)}function Yl(_,M,q,re,ue,he,pe,ve){ks(_,M+4*ue,ue,1,8,he,pe,ve),ks(q,re+4*ue,ue,1,8,he,pe,ve)}function ml(_,M,q,re,ue,he,pe,ve){ks(_,M+4,1,ue,8,he,pe,ve),ks(q,re+4,1,ue,8,he,pe,ve)}function Jl(){this.ba=new na,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Vc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pl(){this.ua=0,this.Wa=new we,this.vb=new we,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new I}function $A(){this.xb=this.a=0,this.l=new qa,this.ca=new na,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pl,this.ab=0,this.gc=i(4,Zl),this.Oc=0}function Mo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gl(_,M,q,re,ue,he,pe){for(_=_==null?0:_[M+0],M=0;M<pe;++M)ue[he+M]=_+q[re+M]&255,_=ue[he+M]}function ec(_,M,q,re,ue,he,pe){var ve;if(_==null)gl(null,null,q,re,ue,he,pe);else for(ve=0;ve<pe;++ve)ue[he+ve]=_[M+ve]+q[re+ve]&255}function Os(_,M,q,re,ue,he,pe){if(_==null)gl(null,null,q,re,ue,he,pe);else{var ve,Ce=_[M+0],Be=Ce,Ue=Ce;for(ve=0;ve<pe;++ve)Be=Ue+(Ce=_[M+ve])-Be,Ue=q[re+ve]+(-256&Be?0>Be?0:255:Be)&255,Be=Ce,ue[he+ve]=Ue}}function zc(_,M,q,re){var ue=M.width,he=M.o;if(e(_!=null&&M!=null),0>q||0>=re||q+re>he)return null;if(!_.Cc){if(_.ga==null){var pe;if(_.ga=new Mo,(pe=_.ga==null)||(pe=M.width*M.o,e(_.Gb.length==0),_.Gb=s(pe),_.Uc=0,_.Gb==null?pe=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,pe=1),pe=!pe),!pe){pe=_.ga;var ve=_.Fa,Ce=_.P,Be=_.qc,Ue=_.mb,Xe=_.nb,Ke=Ce+1,ze=Be-1,gt=pe.l;if(e(ve!=null&&Ue!=null&&M!=null),Cl[0]=null,Cl[1]=gl,Cl[2]=ec,Cl[3]=Os,pe.ca=Ue,pe.tb=Xe,pe.c=M.width,pe.i=M.height,e(0<pe.c&&0<pe.i),1>=Be)M=0;else if(pe.$a=ve[Ce+0]>>0&3,pe.Z=ve[Ce+0]>>2&3,pe.Lc=ve[Ce+0]>>4&3,Ce=ve[Ce+0]>>6&3,0>pe.$a||1<pe.$a||4<=pe.Z||1<pe.Lc||Ce)M=0;else if(gt.put=ba,gt.ac=Wn,gt.bc=Ss,gt.ma=pe,gt.width=M.width,gt.height=M.height,gt.Da=M.Da,gt.v=M.v,gt.va=M.va,gt.j=M.j,gt.o=M.o,pe.$a)e:{e(pe.$a==1),M=tt();t:for(;;){if(M==null){M=0;break e}if(e(pe!=null),pe.mc=M,M.c=pe.c,M.i=pe.i,M.l=pe.l,M.l.ma=pe,M.l.width=pe.c,M.l.height=pe.i,M.a=0,ae(M.m,ve,Ke,ze),!He(pe.c,pe.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Ee(M.s)?(pe.ic=1,ve=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(ve),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(pe.ic=0,M=We(M,pe.c)),!M))break t;M=1;break e}pe.mc=null,M=0}else M=ze>=pe.c*pe.i;pe=!M}if(pe)return null;_.ga.Lc!=1?_.Ga=0:re=he-q}e(_.ga!=null),e(q+re<=he);e:{if(M=(ve=_.ga).c,he=ve.l.o,ve.$a==0){if(Ke=_.rc,ze=_.Vc,gt=_.Fa,Ce=_.P+1+q*M,Be=_.mb,Ue=_.nb+q*M,e(Ce<=_.P+_.qc),ve.Z!=0)for(e(Cl[ve.Z]!=null),pe=0;pe<re;++pe)Cl[ve.Z](Ke,ze,gt,Ce,Be,Ue,M),Ke=Be,ze=Ue,Ue+=M,Ce+=M;else for(pe=0;pe<re;++pe)n(Be,Ue,gt,Ce,M),Ke=Be,ze=Ue,Ue+=M,Ce+=M;_.rc=Ke,_.Vc=ze}else{if(e(ve.mc!=null),M=q+re,e((pe=ve.mc)!=null),e(M<=pe.i),pe.C>=M)M=1;else if(ve.ic||Ve(),ve.ic){ve=pe.V,Ke=pe.Ba,ze=pe.c;var it=pe.i,Me=(gt=1,Ce=pe.$/ze,Be=pe.$%ze,Ue=pe.m,Xe=pe.s,pe.$),Oe=ze*it,ct=ze*M,vt=Xe.wc,ft=Me<ct?$n(Xe,Be,Ce):null;e(Me<=Oe),e(M<=it),e(Ee(Xe));t:for(;;){for(;!Ue.h&&Me<ct;){if(Be&vt||(ft=$n(Xe,Be,Ce)),e(ft!=null),ce(Ue),256>(it=Fn(ft.G[0],ft.H[0],Ue)))ve[Ke+Me]=it,++Me,++Be>=ze&&(Be=0,++Ce<=M&&!(Ce%16)&&Te(pe,Ce));else{if(!(280>it)){gt=0;break t}it=hn(it-256,Ue);var zt,Mt=Fn(ft.G[4],ft.H[4],Ue);if(ce(Ue),!(Me>=(Mt=sn(ze,Mt=hn(Mt,Ue)))&&Oe-Me>=it)){gt=0;break t}for(zt=0;zt<it;++zt)ve[Ke+Me+zt]=ve[Ke+Me+zt-Mt];for(Me+=it,Be+=it;Be>=ze;)Be-=ze,++Ce<=M&&!(Ce%16)&&Te(pe,Ce);Me<ct&&Be&vt&&(ft=$n(Xe,Be,Ce))}e(Ue.h==Y(Ue))}Te(pe,Ce>M?M:Ce);break t}!gt||Ue.h&&Me<Oe?(gt=0,pe.a=Ue.h?5:3):pe.$=Me,M=gt}else M=ke(pe,pe.V,pe.Ba,pe.c,pe.i,M,Ye);if(!M){re=0;break e}}q+re>=he&&(_.Cc=1),re=1}if(!re)return null;if(_.Cc&&((re=_.ga)!=null&&(re.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+q*ue}function V(_,M,q,re,ue,he){for(;0<ue--;){var pe,ve=_,Ce=M+(q?1:0),Be=_,Ue=M+(q?0:3);for(pe=0;pe<re;++pe){var Xe=Be[Ue+4*pe];Xe!=255&&(Xe*=32897,ve[Ce+4*pe+0]=ve[Ce+4*pe+0]*Xe>>23,ve[Ce+4*pe+1]=ve[Ce+4*pe+1]*Xe>>23,ve[Ce+4*pe+2]=ve[Ce+4*pe+2]*Xe>>23)}M+=he}}function Ae(_,M,q,re,ue){for(;0<re--;){var he;for(he=0;he<q;++he){var pe=_[M+2*he+0],ve=15&(Be=_[M+2*he+1]),Ce=4369*ve,Be=(240&Be|Be>>4)*Ce>>16;_[M+2*he+0]=(240&pe|pe>>4)*Ce>>16&240|(15&pe|pe<<4)*Ce>>16>>4&15,_[M+2*he+1]=240&Be|ve}M+=ue}}function Fe(_,M,q,re,ue,he,pe,ve){var Ce,Be,Ue=255;for(Be=0;Be<ue;++Be){for(Ce=0;Ce<re;++Ce){var Xe=_[M+Ce];he[pe+4*Ce]=Xe,Ue&=Xe}M+=q,pe+=ve}return Ue!=255}function Re(_,M,q,re,ue){var he;for(he=0;he<ue;++he)q[re+he]=_[M+he]>>8}function Ve(){$i=V,Kr=Ae,Wr=Fe,Yn=Re}function ot(_,M,q){S[_]=function(re,ue,he,pe,ve,Ce,Be,Ue,Xe,Ke,ze,gt,it,Me,Oe,ct,vt){var ft,zt=vt-1>>1,Mt=ve[Ce+0]|Be[Ue+0]<<16,nr=Xe[Ke+0]|ze[gt+0]<<16;e(re!=null);var Ot=3*Mt+nr+131074>>2;for(M(re[ue+0],255&Ot,Ot>>16,it,Me),he!=null&&(Ot=3*nr+Mt+131074>>2,M(he[pe+0],255&Ot,Ot>>16,Oe,ct)),ft=1;ft<=zt;++ft){var gn=ve[Ce+ft]|Be[Ue+ft]<<16,Sn=Xe[Ke+ft]|ze[gt+ft]<<16,qr=Mt+gn+nr+Sn+524296,Qr=qr+2*(gn+nr)>>3;Ot=Qr+Mt>>1,Mt=(qr=qr+2*(Mt+Sn)>>3)+gn>>1,M(re[ue+2*ft-1],255&Ot,Ot>>16,it,Me+(2*ft-1)*q),M(re[ue+2*ft-0],255&Mt,Mt>>16,it,Me+(2*ft-0)*q),he!=null&&(Ot=qr+nr>>1,Mt=Qr+Sn>>1,M(he[pe+2*ft-1],255&Ot,Ot>>16,Oe,ct+(2*ft-1)*q),M(he[pe+2*ft+0],255&Mt,Mt>>16,Oe,ct+(2*ft+0)*q)),Mt=gn,nr=Sn}1&vt||(Ot=3*Mt+nr+131074>>2,M(re[ue+vt-1],255&Ot,Ot>>16,it,Me+(vt-1)*q),he!=null&&(Ot=3*nr+Mt+131074>>2,M(he[pe+vt-1],255&Ot,Ot>>16,Oe,ct+(vt-1)*q)))}}function Et(){ps[Qs]=cc,ps[ed]=El,ps[wl]=au,ps[Nf]=$h,ps[Zu]=Xh,ps[ac]=nd,ps[Kh]=Yh,ps[kf]=El,ps[ru]=$h,ps[sc]=Xh,ps[td]=nd}function jt(_){return _&-16384?0>_?0:255:_>>cb}function T(_,M){return jt((19077*_>>8)+(26149*M>>8)-14234)}function X(_,M,q){return jt((19077*_>>8)-(6419*M>>8)-(13320*q>>8)+8708)}function se(_,M){return jt((19077*_>>8)+(33050*M>>8)-17685)}function ye(_,M,q,re,ue){re[ue+0]=T(_,q),re[ue+1]=X(_,M,q),re[ue+2]=se(_,M)}function Qe(_,M,q,re,ue){re[ue+0]=se(_,M),re[ue+1]=X(_,M,q),re[ue+2]=T(_,q)}function Je(_,M,q,re,ue){var he=X(_,M,q);M=he<<3&224|se(_,M)>>3,re[ue+0]=248&T(_,q)|he>>5,re[ue+1]=M}function St(_,M,q,re,ue){var he=240&se(_,M)|15;re[ue+0]=240&T(_,q)|X(_,M,q)>>4,re[ue+1]=he}function mr(_,M,q,re,ue){re[ue+0]=255,ye(_,M,q,re,ue+1)}function Zr(_,M,q,re,ue){Qe(_,M,q,re,ue),re[ue+3]=255}function Nr(_,M,q,re,ue){ye(_,M,q,re,ue),re[ue+3]=255}function _n(_,M){return 0>_?0:_>M?M:_}function Dn(_,M,q){S[_]=function(re,ue,he,pe,ve,Ce,Be,Ue,Xe){for(var Ke=Ue+(-2&Xe)*q;Ue!=Ke;)M(re[ue+0],he[pe+0],ve[Ce+0],Be,Ue),M(re[ue+1],he[pe+0],ve[Ce+0],Be,Ue+q),ue+=2,++pe,++Ce,Ue+=2*q;1&Xe&&M(re[ue+0],he[pe+0],ve[Ce+0],Be,Ue)}}function fo(_,M,q){return q==0?_==0?M==0?6:5:M==0?4:0:q}function Ca(_,M,q,re,ue){switch(_>>>30){case 3:jo(M,q,re,ue,0);break;case 2:ga(M,q,re,ue);break;case 1:Ua(M,q,re,ue)}}function yi(_,M){var q,re,ue=M.M,he=M.Nb,pe=_.oc,ve=_.pc+40,Ce=_.oc,Be=_.pc+584,Ue=_.oc,Xe=_.pc+600;for(q=0;16>q;++q)pe[ve+32*q-1]=129;for(q=0;8>q;++q)Ce[Be+32*q-1]=129,Ue[Xe+32*q-1]=129;for(0<ue?pe[ve-1-32]=Ce[Be-1-32]=Ue[Xe-1-32]=129:(a(pe,ve-32-1,127,21),a(Ce,Be-32-1,127,9),a(Ue,Xe-32-1,127,9)),re=0;re<_.za;++re){var Ke=M.ya[M.aa+re];if(0<re){for(q=-1;16>q;++q)n(pe,ve+32*q-4,pe,ve+32*q+12,4);for(q=-1;8>q;++q)n(Ce,Be+32*q-4,Ce,Be+32*q+4,4),n(Ue,Xe+32*q-4,Ue,Xe+32*q+4,4)}var ze=_.Gd,gt=_.Hd+re,it=Ke.ad,Me=Ke.Hc;if(0<ue&&(n(pe,ve-32,ze[gt].y,0,16),n(Ce,Be-32,ze[gt].f,0,8),n(Ue,Xe-32,ze[gt].ea,0,8)),Ke.Za){var Oe=pe,ct=ve-32+16;for(0<ue&&(re>=_.za-1?a(Oe,ct,ze[gt].y[15],4):n(Oe,ct,ze[gt+1].y,0,4)),q=0;4>q;q++)Oe[ct+128+q]=Oe[ct+256+q]=Oe[ct+384+q]=Oe[ct+0+q];for(q=0;16>q;++q,Me<<=2)Oe=pe,ct=ve+nA[q],ri[Ke.Ob[q]](Oe,ct),Ca(Me,it,16*+q,Oe,ct)}else if(Oe=fo(re,ue,Ke.Ob[0]),lc[Oe](pe,ve),Me!=0)for(q=0;16>q;++q,Me<<=2)Ca(Me,it,16*+q,pe,ve+nA[q]);for(q=Ke.Gc,Oe=fo(re,ue,Ke.Dd),Yi[Oe](Ce,Be),Yi[Oe](Ue,Xe),Me=it,Oe=Ce,ct=Be,255&(Ke=q>>0)&&(170&Ke?Oo(Me,256,Oe,ct):Ci(Me,256,Oe,ct)),Ke=Ue,Me=Xe,255&(q>>=8)&&(170&q?Oo(it,320,Ke,Me):Ci(it,320,Ke,Me)),ue<_.Ub-1&&(n(ze[gt].y,0,pe,ve+480,16),n(ze[gt].f,0,Ce,Be+224,8),n(ze[gt].ea,0,Ue,Xe+224,8)),q=8*he*_.B,ze=_.sa,gt=_.ta+16*re+16*he*_.R,it=_.qa,Ke=_.ra+8*re+q,Me=_.Ha,Oe=_.Ia+8*re+q,q=0;16>q;++q)n(ze,gt+q*_.R,pe,ve+32*q,16);for(q=0;8>q;++q)n(it,Ke+q*_.B,Ce,Be+32*q,8),n(Me,Oe+q*_.B,Ue,Xe+32*q,8)}}function xl(_,M,q,re,ue,he,pe,ve,Ce){var Be=[0],Ue=[0],Xe=0,Ke=Ce!=null?Ce.kd:0,ze=Ce??new Vc;if(_==null||12>q)return 7;ze.data=_,ze.w=M,ze.ha=q,M=[M],q=[q],ze.gb=[ze.gb];e:{var gt=M,it=q,Me=ze.gb;if(e(_!=null),e(it!=null),e(Me!=null),Me[0]=0,12<=it[0]&&!r(_,gt[0],"RIFF")){if(r(_,gt[0]+8,"WEBP")){Me=3;break e}var Oe=Le(_,gt[0]+4);if(12>Oe||4294967286<Oe){Me=3;break e}if(Ke&&Oe>it[0]-8){Me=7;break e}Me[0]=Oe,gt[0]+=12,it[0]-=12}Me=0}if(Me!=0)return Me;for(Oe=0<ze.gb[0],q=q[0];;){e:{var ct=_;it=M,Me=q;var vt=Be,ft=Ue,zt=gt=[0];if((Ot=Xe=[Xe])[0]=0,8>Me[0])Me=7;else{if(!r(ct,it[0],"VP8X")){if(Le(ct,it[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var Mt=Le(ct,it[0]+8),nr=1+ie(ct,it[0]+12);if(2147483648<=nr*(ct=1+ie(ct,it[0]+15))){Me=3;break e}zt!=null&&(zt[0]=Mt),vt!=null&&(vt[0]=nr),ft!=null&&(ft[0]=ct),it[0]+=18,Me[0]-=18,Ot[0]=1}Me=0}}if(Xe=Xe[0],gt=gt[0],Me!=0)return Me;if(it=!!(2&gt),!Oe&&Xe)return 3;if(he!=null&&(he[0]=!!(16&gt)),pe!=null&&(pe[0]=it),ve!=null&&(ve[0]=0),pe=Be[0],gt=Ue[0],Xe&&it&&Ce==null){Me=0;break}if(4>q){Me=7;break}if(Oe&&Xe||!Oe&&!Xe&&!r(_,M[0],"ALPH")){q=[q],ze.na=[ze.na],ze.P=[ze.P],ze.Sa=[ze.Sa];e:{Mt=_,Me=M,Oe=q;var Ot=ze.gb;vt=ze.na,ft=ze.P,zt=ze.Sa,nr=22,e(Mt!=null),e(Oe!=null),ct=Me[0];var gn=Oe[0];for(e(vt!=null),e(zt!=null),vt[0]=null,ft[0]=null,zt[0]=0;;){if(Me[0]=ct,Oe[0]=gn,8>gn){Me=7;break e}var Sn=Le(Mt,ct+4);if(4294967286<Sn){Me=3;break e}var qr=8+Sn+1&-2;if(nr+=qr,0<Ot&&nr>Ot){Me=3;break e}if(!r(Mt,ct,"VP8 ")||!r(Mt,ct,"VP8L")){Me=0;break e}if(gn[0]<qr){Me=7;break e}r(Mt,ct,"ALPH")||(vt[0]=Mt,ft[0]=ct+8,zt[0]=Sn),ct+=qr,gn-=qr}}if(q=q[0],ze.na=ze.na[0],ze.P=ze.P[0],ze.Sa=ze.Sa[0],Me!=0)break}q=[q],ze.Ja=[ze.Ja],ze.xa=[ze.xa];e:if(Ot=_,Me=M,Oe=q,vt=ze.gb[0],ft=ze.Ja,zt=ze.xa,Mt=Me[0],ct=!r(Ot,Mt,"VP8 "),nr=!r(Ot,Mt,"VP8L"),e(Ot!=null),e(Oe!=null),e(ft!=null),e(zt!=null),8>Oe[0])Me=7;else{if(ct||nr){if(Ot=Le(Ot,Mt+4),12<=vt&&Ot>vt-12){Me=3;break e}if(Ke&&Ot>Oe[0]-8){Me=7;break e}ft[0]=Ot,Me[0]+=8,Oe[0]-=8,zt[0]=nr}else zt[0]=5<=Oe[0]&&Ot[Mt+0]==47&&!(Ot[Mt+4]>>5),ft[0]=Oe[0];Me=0}if(q=q[0],ze.Ja=ze.Ja[0],ze.xa=ze.xa[0],M=M[0],Me!=0)break;if(4294967286<ze.Ja)return 3;if(ve==null||it||(ve[0]=ze.xa?2:1),pe=[pe],gt=[gt],ze.xa){if(5>q){Me=7;break}ve=pe,Ke=gt,it=he,_==null||5>q?_=0:5<=q&&_[M+0]==47&&!(_[M+4]>>5)?(Oe=[0],Ot=[0],vt=[0],ae(ft=new O,_,M,q),Ht(ft,Oe,Ot,vt)?(ve!=null&&(ve[0]=Oe[0]),Ke!=null&&(Ke[0]=Ot[0]),it!=null&&(it[0]=vt[0]),_=1):_=0):_=0}else{if(10>q){Me=7;break}ve=gt,_==null||10>q||!fs(_,M+3,q-3)?_=0:(Ke=_[M+0]|_[M+1]<<8|_[M+2]<<16,it=16383&(_[M+7]<<8|_[M+6]),_=16383&(_[M+9]<<8|_[M+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=ze.Ja||!it||!_?_=0:(pe&&(pe[0]=it),ve&&(ve[0]=_),_=1))}if(!_||(pe=pe[0],gt=gt[0],Xe&&(Be[0]!=pe||Ue[0]!=gt)))return 3;Ce!=null&&(Ce[0]=ze,Ce.offset=M-Ce.w,e(4294967286>M-Ce.w),e(Ce.offset==Ce.ha-q));break}return Me==0||Me==7&&Xe&&Ce==null?(he!=null&&(he[0]|=ze.na!=null&&0<ze.na.length),re!=null&&(re[0]=pe),ue!=null&&(ue[0]=gt),0):Me}function Gc(_,M,q){var re=M.width,ue=M.height,he=0,pe=0,ve=re,Ce=ue;if(M.Da=_!=null&&0<_.Da,M.Da&&(ve=_.cd,Ce=_.bd,he=_.v,pe=_.j,11>q||(he&=-2,pe&=-2),0>he||0>pe||0>=ve||0>=Ce||he+ve>re||pe+Ce>ue))return 0;if(M.v=he,M.j=pe,M.va=he+ve,M.o=pe+Ce,M.U=ve,M.T=Ce,M.da=_!=null&&0<_.da,M.da){if(!je(ve,Ce,q=[_.ib],he=[_.hb]))return 0;M.ib=q[0],M.hb=he[0]}return M.ob=_!=null&&_.ob,M.Kb=_==null||!_.Sd,M.da&&(M.ob=M.ib<3*re/4&&M.hb<3*ue/4,M.Kb=0),1}function XA(_){if(_==null)return 2;if(11>_.S){var M=_.f.RGBA;M.fb+=(_.height-1)*M.A,M.A=-M.A}else M=_.f.kb,_=_.height,M.O+=(_-1)*M.fa,M.fa=-M.fa,M.N+=(_-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(_-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(_-1)*M.lb,M.lb=-M.lb);return 0}function qu(_,M,q,re){if(re==null||0>=_||0>=M)return 2;if(q!=null){if(q.Da){var ue=q.cd,he=q.bd,pe=-2&q.v,ve=-2&q.j;if(0>pe||0>ve||0>=ue||0>=he||pe+ue>_||ve+he>M)return 2;_=ue,M=he}if(q.da){if(!je(_,M,ue=[q.ib],he=[q.hb]))return 2;_=ue[0],M=he[0]}}re.width=_,re.height=M;e:{var Ce=re.width,Be=re.height;if(_=re.S,0>=Ce||0>=Be||!(_>=Qs&&13>_))_=2;else{if(0>=re.Rd&&re.sd==null){pe=he=ue=M=0;var Ue=(ve=Ce*d1[_])*Be;if(11>_||(he=(Be+1)/2*(M=(Ce+1)/2),_==12&&(pe=(ue=Ce)*Be)),(Be=s(Ue+2*he+pe))==null){_=1;break e}re.sd=Be,11>_?((Ce=re.f.RGBA).eb=Be,Ce.fb=0,Ce.A=ve,Ce.size=Ue):((Ce=re.f.kb).y=Be,Ce.O=0,Ce.fa=ve,Ce.Fd=Ue,Ce.f=Be,Ce.N=0+Ue,Ce.Ab=M,Ce.Cd=he,Ce.ea=Be,Ce.W=0+Ue+he,Ce.Db=M,Ce.Ed=he,_==12&&(Ce.F=Be,Ce.J=0+Ue+2*he),Ce.Tc=pe,Ce.lb=ue)}if(M=1,ue=re.S,he=re.width,pe=re.height,ue>=Qs&&13>ue)if(11>ue)_=re.f.RGBA,M&=(ve=Math.abs(_.A))*(pe-1)+he<=_.size,M&=ve>=he*d1[ue],M&=_.eb!=null;else{_=re.f.kb,ve=(he+1)/2,Ue=(pe+1)/2,Ce=Math.abs(_.fa),Be=Math.abs(_.Ab);var Xe=Math.abs(_.Db),Ke=Math.abs(_.lb),ze=Ke*(pe-1)+he;M&=Ce*(pe-1)+he<=_.Fd,M&=Be*(Ue-1)+ve<=_.Cd,M=(M&=Xe*(Ue-1)+ve<=_.Ed)&Ce>=he&Be>=ve&Xe>=ve,M&=_.y!=null,M&=_.f!=null,M&=_.ea!=null,ue==12&&(M&=Ke>=he,M&=ze<=_.Tc,M&=_.F!=null)}else M=0;_=M?0:2}}return _!=0||q!=null&&q.fd&&(_=XA(re)),_}var Ka=64,qc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ku=24,Wu=32,YA=8,wi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(_){return _},S.Predictor2=function(_,M,q){return M[q+0]},S.Predictor3=function(_,M,q){return M[q+1]},S.Predictor4=function(_,M,q){return M[q-1]},S.Predictor5=function(_,M,q){return ut(ut(_,M[q+1]),M[q+0])},S.Predictor6=function(_,M,q){return ut(_,M[q-1])},S.Predictor7=function(_,M,q){return ut(_,M[q+0])},S.Predictor8=function(_,M,q){return ut(M[q-1],M[q+0])},S.Predictor9=function(_,M,q){return ut(M[q+0],M[q+1])},S.Predictor10=function(_,M,q){return ut(ut(_,M[q-1]),ut(M[q+0],M[q+1]))},S.Predictor11=function(_,M,q){var re=M[q+0];return 0>=Yt(re>>24&255,_>>24&255,(M=M[q-1])>>24&255)+Yt(re>>16&255,_>>16&255,M>>16&255)+Yt(re>>8&255,_>>8&255,M>>8&255)+Yt(255&re,255&_,255&M)?re:_},S.Predictor12=function(_,M,q){var re=M[q+0];return(Nt((_>>24&255)+(re>>24&255)-((M=M[q-1])>>24&255))<<24|Nt((_>>16&255)+(re>>16&255)-(M>>16&255))<<16|Nt((_>>8&255)+(re>>8&255)-(M>>8&255))<<8|Nt((255&_)+(255&re)-(255&M)))>>>0},S.Predictor13=function(_,M,q){var re=M[q-1];return(Qt((_=ut(_,M[q+0]))>>24&255,re>>24&255)<<24|Qt(_>>16&255,re>>16&255)<<16|Qt(_>>8&255,re>>8&255)<<8|Qt(_>>0&255,re>>0&255))>>>0};var np=S.PredictorAdd0;S.PredictorAdd1=kt,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var Tf=S.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Gh,ho=S.ColorIndexInverseTransform,hs=S.MapARGB,Kc=S.VP8LColorIndexInverseTransformAlpha,Bf=S.MapAlpha,tc=S.VP8LPredictorsAdd=[];tc.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Wc,ti,Is,$c,bi,Po,vl,jo,ga,Oo,Ua,Ci,$u,yl,JA,Xc,Yc,Jc,Xu,ZA,Zc,rc,Yu,xa,$i,Kr,Wr,Yn,Ea=s(511),mo=s(2041),eu=s(225),tu=s(767),nc=0,qh=mo,Ju=eu,ms=tu,po=Ea,Qs=0,ed=1,wl=2,Nf=3,Zu=4,ac=5,Kh=6,kf=7,ru=8,sc=9,td=10,Wh=[2,3,7],go=[3,3,11],Xi=[280,256,256,256,40],eA=[0,1,1,1,0],ic=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],o1=8,If=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ff=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wa=null,va=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ap=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],l1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lc=[],ri=[],Yi=[],c1=1,rd=2,Cl=[],ps=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",Qe,3),ot("UpsampleRgbaLinePair",Nr,4),ot("UpsampleBgraLinePair",Zr,4),ot("UpsampleArgbLinePair",mr,4),ot("UpsampleRgba4444LinePair",St,2),ot("UpsampleRgb565LinePair",Je,2);var cc=S.UpsampleRgbLinePair,au=S.UpsampleBgrLinePair,El=S.UpsampleRgbaLinePair,$h=S.UpsampleBgraLinePair,Xh=S.UpsampleArgbLinePair,nd=S.UpsampleRgba4444LinePair,Yh=S.UpsampleRgb565LinePair,_l=16,$a=1<<_l-1,su=-227,Jh=482,cb=6,u1=0,ub=s(256),Xa=s(256),sp=s(256),Df=s(256),Rf=s(Jh-su),ip=s(Jh-su);Dn("YuvToRgbRow",ye,3),Dn("YuvToBgrRow",Qe,3),Dn("YuvToRgbaRow",Nr,4),Dn("YuvToBgraRow",Zr,4),Dn("YuvToArgbRow",mr,4),Dn("YuvToRgba4444Row",St,2),Dn("YuvToRgb565Row",Je,2);var nA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],uc=[0,2,8],Ab=[8,7,6,4,4,2,2,2,1,1,1,1],A1=1;this.WebPDecodeRGBA=function(_,M,q,re,ue){var he=ed,pe=new Jl,ve=new na;pe.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var Ce=ve.width,Be=ve.height,Ue=new pa;if(Ue==null||_==null)var Xe=2;else e(Ue!=null),Xe=xl(_,M,q,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(Xe!=0?Ce=0:(Ce!=null&&(Ce[0]=Ue.width[0]),Be!=null&&(Be[0]=Ue.height[0]),Ce=1),Ce){ve.width=ve.width[0],ve.height=ve.height[0],re!=null&&(re[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(re=new qa,(ue=new Vc).data=_,ue.w=M,ue.ha=q,ue.kd=1,M=[0],e(ue!=null),((_=xl(ue.data,ue.w,ue.ha,null,null,null,M,null,ue))==0||_==7)&&M[0]&&(_=4),(M=_)==0){if(e(pe!=null),re.data=ue.data,re.w=ue.w+ue.offset,re.ha=ue.ha-ue.offset,re.put=ba,re.ac=Wn,re.bc=Ss,re.ma=pe,ue.xa){if((_=tt())==null){pe=1;break e}if(function(Ke,ze){var gt=[0],it=[0],Me=[0];t:for(;;){if(Ke==null)return 0;if(ze==null)return Ke.a=2,0;if(Ke.l=ze,Ke.a=0,ae(Ke.m,ze.data,ze.w,ze.ha),!Ht(Ke.m,gt,it,Me)){Ke.a=3;break t}if(Ke.xb=rd,ze.width=gt[0],ze.height=it[0],!He(gt[0],it[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(_,re)){if(re=(M=qu(re.width,re.height,pe.Oa,pe.ba))==0){t:{re=_;r:for(;;){if(re==null){re=0;break t}if(e(re.s.yc!=null),e(re.s.Ya!=null),e(0<re.s.Wb),e((q=re.l)!=null),e((ue=q.ma)!=null),re.xb!=0){if(re.ca=ue.ba,re.tb=ue.tb,e(re.ca!=null),!Gc(ue.Oa,q,Nf)){re.a=2;break r}if(!We(re,q.width)||q.da)break r;if((q.da||Ir(re.ca.S))&&Ve(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&Ve()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!nt(re.s.vb,re.s.Wa.Xa)){re.a=1;break r}re.xb=0}if(!ke(re,re.V,re.Ba,re.c,re.i,q.o,Ne))break r;ue.Dc=re.Ma,re=1;break t}e(re.a!=0),re=0}re=!re}re&&(M=_.a)}else M=_.a}else{if((_=new Ts)==null){pe=1;break e}if(_.Fa=ue.na,_.P=ue.P,_.qc=ue.Sa,Pc(_,re)){if((M=qu(re.width,re.height,pe.Oa,pe.ba))==0){if(_.Aa=0,q=pe.Oa,e((ue=_)!=null),q!=null){if(0<(Ce=0>(Ce=q.Md)?0:100<Ce?255:255*Ce/100)){for(Be=Ue=0;4>Be;++Be)12>(Xe=ue.pb[Be]).lc&&(Xe.ia=Ce*Ab[0>Xe.lc?0:Xe.lc]>>3),Ue|=Xe.ia;Ue&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=q.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}Ou(_,re)||(M=_.a)}}else M=_.a}M==0&&pe.Oa!=null&&pe.Oa.fd&&(M=XA(pe.ba))}pe=M}he=pe!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var d1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,N){for(var H="",L=0;L<4;L++)H+=String.fromCharCode(S[N++]);return H}function d(S,N){return(S[N+0]<<0|S[N+1]<<8|S[N+2]<<16)>>>0}function h(S,N){return(S[N+0]<<0|S[N+1]<<8|S[N+2]<<16|S[N+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],y=new l,E=t,B=function(S,N){var H={},L=0,I=!1,j=0,z=0;if(H.frames=[],!function(W,Y,te,ce){for(var de=0;de<ce;de++)if(W[Y+de]!=te.charCodeAt(de))return!0;return!1}(S,N,"RIFF",4)){var ne,Z;for(h(S,N+=4),N+=8;N<S.length;){var ee=u(S,N),ae=h(S,N+=4);N+=4;var G=ae+(1&ae);switch(ee){case"VP8 ":case"VP8L":H.frames[L]===void 0&&(H.frames[L]={}),(O=H.frames[L]).src_off=I?z:N-8,O.src_size=j+ae+8,L++,I&&(I=!1,j=0,z=0);break;case"VP8X":(O=H.header={}).feature_flags=S[N];var K=N+4;O.canvas_width=1+d(S,K),K+=3,O.canvas_height=1+d(S,K),K+=3;break;case"ALPH":I=!0,j=G+8,z=N-8;break;case"ANIM":(O=H.header).bgcolor=h(S,N),K=N+4,O.loop_count=(ne=S)[(Z=K)+0]<<0|ne[Z+1]<<8,K+=2;break;case"ANMF":var le,O;(O=H.frames[L]={}).offset_x=2*d(S,N),N+=3,O.offset_y=2*d(S,N),N+=3,O.width=1+d(S,N),N+=3,O.height=1+d(S,N),N+=3,O.duration=d(S,N),N+=3,le=S[N++],O.dispose=1&le,O.blend=le>>1&1}ee!="ANMF"&&(N+=G)}return H}}(E,0);B.response=E,B.rgbaoutput=!0,B.dataurl=!1;var k=B.header?B.header:null,F=B.frames?B.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],g=[k.canvas_width];for(var U=0;U<F.length&&F[U].blend!=0;U++);}var P=F[0],D=y.WebPDecodeRGBA(E,P.src_off,P.src_size,g,m);P.rgba=D,P.imgwidth=g[0],P.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)b[C]=D[C];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof G_=="function"},r=function(m,g,b,y){var E=4,B=i;switch(y){case t.image_compression.FAST:E=1,B=s;break;case t.image_compression.MEDIUM:E=6,B=o;break;case t.image_compression.SLOW:E=9,B=l}m=n(m,g,b,B);var k=G_(m,{level:E});return t.__addimage__.arrayBufferToBinaryString(k)},n=function(m,g,b,y){for(var E,B,k,F=m.length/g,U=new Uint8Array(m.length+F),P=d(),D=0;D<F;D+=1){if(k=D*g,E=m.subarray(k,k+g),y)U.set(y(E,b,B),k+D);else{for(var C,S=P.length,N=[];C<S;C+=1)N[C]=P[C](E,b,B);var H=h(N.concat());U.set(N[H],k+D)}B=E}return U},a=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var b,y=[],E=m.length;y[0]=1;for(var B=0;B<E;B+=1)b=m[B-g]||0,y[B+1]=m[B]-b+256&255;return y},i=function(m,g,b){var y,E=[],B=m.length;E[0]=2;for(var k=0;k<B;k+=1)y=b&&b[k]||0,E[k+1]=m[k]-y+256&255;return E},o=function(m,g,b){var y,E,B=[],k=m.length;B[0]=3;for(var F=0;F<k;F+=1)y=m[F-g]||0,E=b&&b[F]||0,B[F+1]=m[F]+256-(y+E>>>1)&255;return B},l=function(m,g,b){var y,E,B,k,F=[],U=m.length;F[0]=4;for(var P=0;P<U;P+=1)y=m[P-g]||0,E=b&&b[P]||0,B=b&&b[P-g]||0,k=u(y,E,B),F[P+1]=m[P]-k+256&255;return F},u=function(m,g,b){if(m===g&&g===b)return m;var y=Math.abs(g-b),E=Math.abs(m-b),B=Math.abs(m+g-b-b);return y<=E&&y<=B?m:E<=B?g:b},d=function(){return[a,s,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(y,E){return y+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,y){var E,B,k,F,U,P,D,C,S,N,H,L,I,j,z,ne=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new Rie(m)).imgData,B=k.bits,E=k.colorSpace,U=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){S=(C=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,H=new Uint8Array(S*k.colors),N=new Uint8Array(S);var ee,ae=k.pixelBitlength-k.bits;for(j=0,z=0;j<S;j++){for(I=C[j],ee=0;ee<ae;)H[z++]=I>>>ee&255,ee+=k.bits;N[j]=I>>>ee&255}}if(k.bits===16){S=(C=new Uint32Array(k.decodePixels().buffer)).length,H=new Uint8Array(S*(32/k.pixelBitlength)*k.colors),N=new Uint8Array(S*(32/k.pixelBitlength)),L=k.colors>1,j=0,z=0;for(var G=0;j<S;)I=C[j++],H[z++]=I>>>0&255,L&&(H[z++]=I>>>16&255,I=C[j++],H[z++]=I>>>0&255),N[G++]=I>>>16&255;B=8}y!==t.image_compression.NONE&&e()?(m=r(H,k.width*k.colors,k.colors,y),D=r(N,k.width,1,y)):(m=H,D=N,ne=void 0)}if(k.colorType===3&&(E=this.color_spaces.INDEXED,P=k.palette,k.transparency.indexed)){var K=k.transparency.indexed,le=0;for(j=0,S=K.length;j<S;++j)le+=K[j];if((le/=255)===S-1&&K.indexOf(0)!==-1)F=[K.indexOf(0)];else if(le!==S){for(C=k.decodePixels(),N=new Uint8Array(C.length),j=0,S=C.length;j<S;j++)N[j]=K[C[j]];D=r(N,k.width,1)}}var O=function(W){var Y;switch(W){case t.image_compression.FAST:Y=11;break;case t.image_compression.MEDIUM:Y=13;break;case t.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(y);return ne===this.decode.FLATE_DECODE&&(Z="/Predictor "+O+" "),Z+="/Colors "+U+" /BitsPerComponent "+B+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:b,data:m,index:g,filter:ne,decodeParameters:Z,transparency:F,palette:P,sMask:D,predictor:O,width:k.width,height:k.height,bitsPerComponent:B,colorSpace:E}}}})(ir.API),function(t){t.processGIF89A=function(e,r,n,a){var s=new Lie(e),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new $C(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(ir.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){sa.log("bit decode error:"+r)}},xc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},xc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,l=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},xc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},xc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},xc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},xc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new xc(e,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new $C(100).encode(l,100);return t.processJPEG.call(this,u,r,n,a)}}(ir.API),pF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new pF(e),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},u=new $C(100).encode(l,100);return t.processJPEG.call(this,u,r,n,a)}}(ir.API),ir.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,u=0;u<a;u+=4){var d=n[u],h=n[u+1],m=n[u+2],g=n[u+3];s[o++]=d,s[o++]=h,s[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ir.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},w0=ir.API,xv=w0.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,y=o[0]||l,E=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?E.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(m=h&&zn(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,E.push((o[n]||y)/l+m)),b=n;return E},dF=w0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return w0.processArabic&&(t=w0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:xv.apply(this,arguments).reduce(function(s,i){return s+i},0)},fF=function(t,e,r,n){for(var a=[],s=0,i=t.length,o=0;s!==i&&o+e[s]<r;)o+=e[s],s++;a.push(t.slice(0,s));var l=s;for(o=0;s!==i;)o+e[s]>n&&(a.push(t.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&a.push(t.slice(l,s)),a},hF=function(t,e,r){r||(r={});var n,a,s,i,o,l,u,d=[],h=[d],m=r.textIndent||0,g=0,b=0,y=t.split(" "),E=xv.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var B=Array(l).join(" "),k=[];y.map(function(U){(U=U.split(/\s*\n/)).length>1?k=k.concat(U.map(function(P,D){return(D&&P.length?`
`:"")+P})):k.push(U[0])}),y=k,l=dF.apply(this,[B,r])}for(s=0,i=y.length;s<i;s++){var F=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),F=1),m+g+(b=(a=xv.apply(this,[n,r])).reduce(function(U,P){return U+P},0))>e||F){if(b>e){for(o=fF.apply(this,[n,a,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(U,P){return U+P},0)}else d=[n];h.push(d),m=b+l,g=E}else d.push(n),m+=g+b,g=E}return u=l?function(U,P){return(P?B:"")+U.join(" ")}:function(U){return U.join(" ")},h.map(u)},w0.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(hF.apply(this,[n[o],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},a=0;a<e.length;a++)r[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,y,E=["{"];for(var B in h){if(m=h[B],isNaN(parseInt(B,10))?g="'"+B+"'":(B=parseInt(B,10),g=(g=s(B).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(b=s(m).slice(3),y="-"):(b=s(m).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(zn(m)!=="object")throw new Error("Don't know what to do with value type "+zn(m)+".");b=i(m)}E.push(g+b)}return E.push("}"),E.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,y,E={},B=1,k=E,F=[],U="",P="",D=h.length-1,C=1;C<D;C+=1)(y=h[C])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(F.push([k,b]),k={},b=void 0):y=="}"?((g=F.pop())[0][g[1]]=k,b=void 0,k=g[0]):y=="-"?B=-1:b===void 0?r.hasOwnProperty(y)?(U+=r[y],b=parseInt(U,16)*B,B=1,U=""):U+=y:r.hasOwnProperty(y)?(P+=r[y],k[b]=parseInt(P,16)*B,B=1,b=void 0,P=""):P+=y;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(ir.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Dg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(ir),function(t){function e(){return(br.canvg?Promise.resolve(br.canvg):O_(()=>import("./index.es-DOSBdUBE.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ir.API.addSvgAsImage=function(r,n,a,s,i,o,l,u){if(isNaN(n)||isNaN(a))throw sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,l,u)})}}(),ir.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},ir.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(b,y){var E,B=!1;for(E=0;E<b.length;E+=1)b[E]===y&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(zn(t)==="object"){for(a in t)if(s=t[a],m(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&m(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ir.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=s.length;h<m;++h){if(o=i.metadata.characterToGlyph(s.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(s).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var y=u();d({data:g,addLength1:!0,objectId:y}),l("endobj");var E=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var B=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+V0(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+V0(o.fontName)),l("/FontDescriptor "+B+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+V0(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=u();d({data:m,addLength1:!0,objectId:b}),l("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var E=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+V0(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var B=0;B<o.metadata.hmtx.widths.length;B++)o.metadata.hmtx.widths[B]=parseInt(o.metadata.hmtx.widths[B]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+V0(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",l=s.x,u=s.y,d=s.options||{},h=s.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,y=g,E="",B=0,k="",F=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(k=o,y=g,Array.isArray(o)&&(k=o[0]),B=0;B<k.length;B+=1)b[y].metadata.hasOwnProperty("cmap")&&(i=b[y].metadata.cmap.unicode.codeMap[k[B].charCodeAt(0)]),i||k[B].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?E+=k[B]:E+="";var U="";return parseInt(y.slice(1))<14||F==="WinAnsiEncoding"?U=m(E,y).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(U=r(E,b[y])),h.isHex=!0,{text:U,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var i=s.text||"",o=[],l={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},l,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},l,{text:i})).text}])}(ir),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ir.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,F=0;this.__bidiEngine__={};var U=function(L){var I=L.charCodeAt(),j=I>>8,z=y[j];return z!==void 0?h[256*z+(255&I)]:j===252||j===253?"AL":B.test(j)?"L":j===8?"R":"N"},P=function(L){for(var I,j=0;j<L.length;j++){if((I=U(L.charAt(j)))==="L")return!1;if(I==="R")return!0}return!1},D=function(L,I,j,z){var ne,Z,ee,ae,G=I[z];switch(G){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(G="AN");break;case"AL":k=!0,G="R";break;case"WS":G="N";break;case"CS":z<1||z+1>=I.length||(ne=j[z-1])!=="EN"&&ne!=="AN"||(Z=I[z+1])!=="EN"&&Z!=="AN"?G="N":k&&(Z="AN"),G=Z===ne?Z:"N";break;case"ES":G=(ne=z>0?j[z-1]:"B")==="EN"&&z+1<I.length&&I[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&j[z-1]==="EN"){G="EN";break}if(k){G="N";break}for(ee=z+1,ae=I.length;ee<ae&&I[ee]==="ET";)ee++;G=ee<ae&&I[ee]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(ae=I.length,ee=z+1;ee<ae&&I[ee]==="NSM";)ee++;if(ee<ae){var K=L[z],le=K>=1425&&K<=2303||K===64286;if(ne=I[ee],le&&(ne==="R"||ne==="AL")){G="R";break}}}G=z<1||(ne=I[z-1])==="B"?"N":j[z-1];break;case"B":k=!1,a=!0,G=F;break;case"S":s=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":G="N"}return G},C=function(L,I,j){var z=L.split("");return j&&S(z,j,{hiLevel:F}),z.reverse(),I&&I.reverse(),z.join("")},S=function(L,I,j){var z,ne,Z,ee,ae,G=-1,K=L.length,le=0,O=[],W=F?g:m,Y=[];for(k=!1,a=!1,s=!1,ne=0;ne<K;ne++)Y[ne]=U(L[ne]);for(Z=0;Z<K;Z++){if(ae=le,O[Z]=D(L,Y,O,Z),z=240&(le=W[ae][b[O[Z]]]),le&=15,I[Z]=ee=W[le][5],z>0)if(z===16){for(ne=G;ne<Z;ne++)I[ne]=1;G=-1}else G=-1;if(W[le][6])G===-1&&(G=Z);else if(G>-1){for(ne=G;ne<Z;ne++)I[ne]=ee;G=-1}Y[Z]==="B"&&(I[Z]=0),j.hiLevel|=ee}s&&function(te,ce,de){for(var me=0;me<de;me++)if(te[me]==="S"){ce[me]=F;for(var ge=me-1;ge>=0&&te[ge]==="WS";ge--)ce[ge]=F}}(Y,I,K)},N=function(L,I,j,z,ne){if(!(ne.hiLevel<L)){if(L===1&&F===1&&!a)return I.reverse(),void(j&&j.reverse());for(var Z,ee,ae,G,K=I.length,le=0;le<K;){if(z[le]>=L){for(ae=le+1;ae<K&&z[ae]>=L;)ae++;for(G=le,ee=ae-1;G<ee;G++,ee--)Z=I[G],I[G]=I[ee],I[ee]=Z,j&&(Z=j[G],j[G]=j[ee],j[ee]=Z);le=ae}le++}}},H=function(L,I,j){var z=L.split(""),ne={hiLevel:F};return j||(j=[]),S(z,j,ne),function(Z,ee,ae){if(ae.hiLevel!==0&&d)for(var G,K=0;K<Z.length;K++)ee[K]===1&&(G=E.indexOf(Z[K]))>=0&&(Z[K]=E[G+1])}(z,j,ne),N(2,z,I,j,ne),N(1,z,I,j,ne),z.join("")};return this.__bidiEngine__.doBidiReorder=function(L,I,j){if(function(ne,Z){if(Z)for(var ee=0;ee<ne.length;ee++)Z[ee]=ee;o===void 0&&(o=P(ne)),u===void 0&&(u=P(ne))}(L,I),i||!l||u)if(i&&l&&o^u)F=o?1:0,L=C(L,I,j);else if(!i&&l&&u)F=o?1:0,L=H(L,I,j),L=C(L,I);else if(!i||o||l||u){if(i&&!l&&o^u)L=C(L,I),o?(F=0,L=H(L,I,j)):(F=1,L=H(L,I,j),L=C(L,I));else if(i&&o&&!l&&u)F=1,L=H(L,I,j),L=C(L,I);else if(!i&&!l&&o^u){var z=d;o?(F=1,L=H(L,I,j),F=0,d=!1,L=H(L,I,j),d=z):(F=0,L=H(L,I,j),L=C(L,I),F=1,d=!1,L=H(L,I,j),d=z,L=C(L,I))}}else F=0,L=H(L,I,j);else F=o?1:0,L=H(L,I,j);return L},this.__bidiEngine__.setOptions=function(L){L&&(i=L.isInputVisual,l=L.isOutputVisual,o=L.isInputRtl,u=L.isOutputRtl,d=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(ir),ir.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new mf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Xie(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Uie(this.contents),this.head=new Pie(this),this.name=new Vie(this),this.cmap=new BM(this),this.toUnicode={},this.hhea=new jie(this),this.maxp=new zie(this),this.hmtx=new Gie(this),this.post=new Qie(this),this.os2=new Oie(this),this.loca=new $ie(this),this.glyf=new qie(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,o;for(i=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Lc,mf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Uie=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,o,l,u,d,h,m,g,b,y;for(y in g=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(a=new mf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(i),a.writeShort(d),s=16*g,u=a.pos+s,o=null,b=[],r)for(m=r[y],a.writeString(y),a.writeInt(t(m)),a.writeInt(u),a.writeInt(m.length),b=b.concat(m),y==="head"&&(o=u),u+=m.length;u%4;)b.push(0),u++;return a.write(b),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=NM.call(r);r.length%4;)r.push(0);for(s=new mf(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Mie={}.hasOwnProperty,Ru=function(t,e){for(var r in e)Mie.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Lc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Pie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new mf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),gF=function(){function t(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),e.pos+=2,y=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),u=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),d=function(){var U,P;for(P=[],l=U=0;0<=m?U<m:U>m;l=0<=m?++U:--U)P.push(e.readUInt16());return P}(),a=(this.length-e.pos+this.offset)/2,o=function(){var U,P;for(P=[],l=U=0;0<=a?U<a:U>a;l=0<=a?++U:--U)P.push(e.readUInt16());return P}(),l=B=0,F=s.length;B<F;l=++B)for(E=s[l],n=k=b=y[l];b<=E?k<=E:k>=E;n=b<=E?++k:--k)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-b)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,F,U,P,D,C,S,N,H,L,I,j,z,ne,Z,ee,ae,G,K,le,O,W,Y,te,ce,de,me,ge,Se,xe,ie;switch(z=new mf,i=Object.keys(e).sort(function(Le,nt){return Le-nt}),r){case"macroman":for(y=0,E=function(){var Le=[];for(b=0;b<256;++b)Le.push(0);return Le}(),k={0:0},s={},ne=0,G=i.length;ne<G;ne++)k[ge=e[a=i[ne]]]==null&&(k[ge]=++y),s[a]={old:e[a],new:k[e[a]]},E[a]=k[e[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(E),{charMap:s,subtable:z.data,maxGlyphID:y+1};case"unicode":for(I=[],h=[],F=0,k={},n={},B=u=null,Z=0,K=i.length;Z<K;Z++)k[P=e[a=i[Z]]]==null&&(k[P]=++F),n[a]={old:P,new:k[P]},o=k[P]-a,B!=null&&o===u||(B&&h.push(B),I.push(a),u=o),B=a;for(B&&h.push(B),h.push(65535),I.push(65535),H=2*(N=I.length),S=2*Math.pow(Math.log(N)/Math.LN2,2),m=Math.log(S/2)/Math.LN2,C=2*N-S,l=[],D=[],g=[],b=ee=0,le=I.length;ee<le;b=++ee){if(L=I[b],d=h[b],L===65535){l.push(0),D.push(0);break}if(L-(j=n[L].new)>=32768)for(l.push(0),D.push(2*(g.length+N-b)),a=ae=L;L<=d?ae<=d:ae>=d;a=L<=d?++ae:--ae)g.push(n[a].new);else l.push(j-L),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*N+2*g.length),z.writeUInt16(0),z.writeUInt16(H),z.writeUInt16(S),z.writeUInt16(m),z.writeUInt16(C),de=0,O=h.length;de<O;de++)a=h[de],z.writeUInt16(a);for(z.writeUInt16(0),me=0,W=I.length;me<W;me++)a=I[me],z.writeUInt16(a);for(Se=0,Y=l.length;Se<Y;Se++)o=l[Se],z.writeUInt16(o);for(xe=0,te=D.length;xe<te;xe++)U=D[xe],z.writeUInt16(U);for(ie=0,ce=g.length;ie<ce;ie++)y=g[ie],z.writeUInt16(y);return{charMap:n,subtable:z.data,maxGlyphID:F+1}}},t}(),BM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new gF(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=gF.encode(r,n),(s=new mf).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),jie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Oie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Qie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="post",e.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},e}(),Hie=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Vie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="name",e.prototype.parse=function(r){var n,a,s,i,o,l,u,d,h,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=h=0,m=a.length;h<m;i=++h)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new Hie(d,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),zie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Gie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,a,s,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),NM=[].slice,qie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,a,s,i,o,l,u,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(l=new mf(n.read(s))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new Wie(l,d,m,u,h):new Kie(l,o,d,m,u,h),this.cache[r]))},e.prototype.encode=function(r,n,a){var s,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)s=r[n[l]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},e}(),Kie=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Wie=function(){function t(e,r,n,a,s){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new mf(NM.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),$ie=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ru(e,Lc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(s+=u)}for(var d=new Array(4*a.length),h=0;h<a.length;++h)d[4*h+3]=255&a[h],d[4*h+2]=(65280&a[h])>>8,d[4*h+1]=(16711680&a[h])>>16,d[4*h]=(4278190080&a[h])>>24;return d},e}(),Xie=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,o,l;for(a={},i=0,o=e.length;i<o;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in l=this.glyphsFor(r))n=l[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,o,l,u,d,h,m,g,b,y,E,B;for(a in n=BM.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},B=n.charMap)g[(l=B[a]).old]=l.new;for(b in m=n.maxGlyphID,i)b in g||(g[b]=m++);return d=function(k){var F,U;for(F in U={},k)U[k[F]]=F;return U}(g),h=Object.keys(d).sort(function(k,F){return k-F}),y=function(){var k,F,U;for(U=[],k=0,F=h.length;k<F;k++)o=h[k],U.push(d[o]);return U}(),s=this.font.glyf.encode(i,y,g),u=this.font.loca.encode(s.offsets,y),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();ir.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();function kM(t,e,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,l=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),r+=o*(2-s),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,r),r+=u;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var xF={},Am=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:xF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return xF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),J_=function(t,e){return J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},J_(t,e)};function IM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");J_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var FM=function(t){IM(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Yie(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Jie(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function oy(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function DM(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var i=RM(a,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function RM(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Bw(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function LM(t,e){var r=Bw(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Zie(t,e,r,n,a){var s={},i=1.3333333333333333,o=XC(e,function(F){return a.getComputedStyle(F).backgroundColor});o!=null&&(s.fillColor=o);var l=XC(e,function(F){return a.getComputedStyle(F).color});l!=null&&(s.textColor=l);var u=toe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=XC(e,function(F){return a.getComputedStyle(F)[d]});b!=null&&(s.lineColor=b);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var E=parseInt(n.fontSize||"");isNaN(E)||(s.fontSize=E/i);var B=eoe(n);B&&(s.fontStyle=B);var k=(n.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(s.font=k),s}function eoe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function XC(t,e){var r=UM(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function UM(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:UM(t.parentElement,e):r}function toe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=Bw(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function MM(t,e,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],y=(i=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),E=roe(l,u,r,b,n,a);E&&(y==="thead"?d.push(E):y==="tfoot"?m.push(E):h.push(E))}return{head:d,body:h,foot:m}}function roe(t,e,r,n,a,s){for(var i=new FM(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;s&&(d=Zie(t,l,e,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:noe(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(a||h.display!=="none"))return i}function noe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function aoe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function wA(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}function PM(t,e){var r=new Am(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();aoe(a,n,e);var s=wA({},a,n,e),i;typeof window<"u"&&(i=window);var o=soe(a,n,e),l=ioe(a,n,e),u=ooe(r,s),d=coe(r,s,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function soe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=r[l];n.columnStyles=wA({},u,d,h)}else{var m=[t,e,r],g=m.map(function(b){return b[l]||{}});n[l]=wA({},g[0],g[1],g[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function ioe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function ooe(t,e){var r,n,a,s,i,o,l,u,d,h,m,g,b=Bw(e.margin,40/t.scaleFactor()),y=(r=loe(t,e.startY))!==null&&r!==void 0?r:b.top,E;e.showFoot===!0?E="everyPage":e.showFoot===!1?E="never":E=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var B;e.showHead===!0?B="everyPage":e.showHead===!1?B="never":B=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var k=(s=e.useCss)!==null&&s!==void 0?s:!1,F=e.theme||(k?"plain":"striped"),U=!!e.horizontalPageBreak,P=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:F,startY:y,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:B,showFoot:E,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:U,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function loe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function coe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=MM(t,e.html,r,i,e.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||uoe(n,a,s);return{columns:l,head:n,body:a,foot:s}}function uoe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var Z_=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),Aoe=function(t){IM(e,t);function e(r,n,a,s,i,o){var l=t.call(this,r,n,o)||this;return l.cell=a,l.row=s,l.column=i,l.section=s.section,l}return e}(Z_),doe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new Aoe(e,this,n,a,s,i),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Z_(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Z_(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),jM=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof FM&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>a?u:a},0)},t}(),OM=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Bw(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),foe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function hoe(t,e){moe(t,e);var r=[],n=0;e.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(e);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=e5(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=e5(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),goe(e),xoe(e,t),poe(e)}function moe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=LM(t,e);e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,l,null);var h=u.padding("horizontal");u.contentWidth=oy(u.text,u.styles,t)+h;var m=oy(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function e5(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var i=t[s],o=i.wrappedWidth/a,l=n*o,u=i.width+l,d=r(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>r(g):!0});m.length&&(e=e5(m,e,r))}return e}function poe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(r>1)r--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:s}}}}}function goe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])s+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+s}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=l.width;continue}u.width=l.width+s}}}function xoe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=vF(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=vF(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>s.height&&(s.height=m)}}r.count--}}function vF(t,e,r,n,a){return t.map(function(s){return voe(s,e,r,n,a)})}function voe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=oy(t,r,n))return t;for(;e<oy(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function QM(t,e){var r=new Am(t),n=yoe(e,r.scaleFactor()),a=new doe(e,n);return hoe(r,a),r.applyStyles(r.userStyles),a}function yoe(t,e){var r=t.content,n=boe(r.columns);if(r.head.length===0){var a=yF(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=yF(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,i=t.styles;return{columns:n,head:YC("head",r.head,n,i,s,e),body:YC("body",r.body,n,i,s,e),foot:YC("foot",r.foot,n,i,s,e)}}function YC(t,e,r,n,a,s){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,g=0,b=0,y=r;b<y.length;b++){var E=y[b];if(i[E.index]==null||i[E.index].left===0)if(g===0){var B=void 0;Array.isArray(l)?B=l[E.index-m-d]:B=l[E.dataKey];var k={};typeof B=="object"&&!Array.isArray(B)&&(k=(B==null?void 0:B.styles)||{});var F=Coe(t,E,u,a,n,s,k),U=new OM(B,F,t);h[E.dataKey]=U,h[E.index]=U,g=U.colSpan-1,i[E.index]={left:U.rowSpan-1,times:g}}else g--,m++;else i[E.index].left--,g=i[E.index].times,d++}return new jM(l,u,t,h)});return o}function yF(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=woe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function woe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function boe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new foe(a,e,r)})}function Coe(t,e,r,n,a,s,i){var o=Jie(n),l;t==="head"?l=a.headStyles:t==="body"?l=a.bodyStyles:t==="foot"&&(l=a.footStyles);var u=wA({},o.table,o[t],a.styles,l),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&r%2===0?wA({},o.alternateRow,a.alternateRowStyles):{},g=Yie(s),b=wA({},g,u,m,h);return wA(b,i)}function Eoe(t,e,r){var n;r===void 0&&(r={});var a=LM(t,e),s=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!s.has(g.index)&&(s.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||a>=h)u=!1,i.push(d),o.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function _oe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=Eoe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function HM(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,g){return m+g.height},0);o+=u}var d=new Am(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(zM(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=wA({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Soe(d,e,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return DA(d,e,m,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;ly(d,e,m,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return DA(d,e,m,s,e.columns)})),DM(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Soe(t,e,r,n){var a=_oe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Rg(t,e,r,n,u.columns,!0):wF(t,e,n,u.columns),Toe(t,e,r,n,u.columns),JC(t,e,n,u.columns)});else for(var i=-1,o=a[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Rg(t,e,r,n,d,!0):wF(t,e,n,d),u=bF(t,e,i+1,n,d),JC(t,e,n,d)}var h=u-i;a.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Rg(t,e,r,n,m.columns,!0),bF(t,e,i+1,n,m.columns,h),JC(t,e,n,m.columns)}),i=u};i<e.body.length-1;)l()}function wF(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return DA(t,e,s,r,n)})}function Toe(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,i){var o=i===e.body.length-1;ly(t,e,s,o,r,n,a)})}function bF(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var i=Math.min(r+s,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,u){var d=r+u===e.body.length-1,h=VM(t,e,d,n);l.canEntireRowFit(h,a)&&(DA(t,e,l,n,a),o=r+u)}),o}function JC(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return DA(t,e,s,r,n)})}function Boe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function Noe(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new OM(u.raw,u.styles,u.section);d=wA(d,u),d.text=[];var h=Boe(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>s&&(s=d.contentHeight),a[l.index]=d}}var b=new jM(t.raw,-1,t.section,a,!0);b.height=s;for(var y=0,E=r.columns;y<E.length;y++){var l=E[y],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function koe(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function ly(t,e,r,n,a,s,i){var o=VM(t,e,n,s);if(r.canEntireRowFit(o,i))DA(t,e,r,s,i);else if(koe(t,r,o,e)){var l=Noe(r,o,e,t);DA(t,e,r,s,i),Rg(t,e,a,s,i),ly(t,e,l,n,a,s,i)}else Rg(t,e,a,s,i),ly(t,e,r,n,a,s,i)}function DA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}Ioe(t,l,n);var d=l.getTextPos();kM(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function Ioe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=RM(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Foe(t,e,r,n.lineWidth))}function Foe(t,e,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,s,i,o)),n.right&&(a=r.x+e.width,s=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,s,i,o));function l(u,d,h,m,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,g,"S")}}function VM(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Rg(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return DA(t,e,o,n,a)}),e.callEndPageHooks(t,n);var i=e.settings.margin;DM(t,e,r,n),zM(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return DA(t,e,o,n,a)}),t.applyStyles(t.userStyles))}function zM(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Doe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=PM(this,n),s=QM(this,a);return HM(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){kM(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return Am.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Am.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Am(this),s=MM(a,e,window,r,!1),i=s.head,o=s.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var ZC;function rl(t,e){var r=PM(t,e),n=QM(t,r);HM(t,n)}try{if(typeof window<"u"&&window){var CF=window,EF=CF.jsPDF||((ZC=CF.jspdf)===null||ZC===void 0?void 0:ZC.jsPDF);EF&&Doe(EF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const c4="evaluaciones_pruebas",u4="evaluaciones_rubricas_estaticas",A4="evaluaciones_rubricas_interactivas",Roe="usuarios",Nw=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Loe=t=>{const e=fr(Kt(Gt,c4),Kn("fechaCreacion","desc"));return Yr(e,n=>{t(n.docs.map(a=>Nw(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},Uoe=async t=>{try{const{id:e,...r}=t,n=Lr(Gt,c4,e);await il(n,{...r,fechaCreacion:Br.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},Moe=async t=>{try{await No(Lr(Gt,c4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},Poe=t=>{const e=fr(Kt(Gt,u4),Kn("fechaCreacion","desc"));return Yr(e,n=>{t(n.docs.map(a=>Nw(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},joe=async t=>{try{const{id:e,...r}=t,n=Lr(Gt,u4,e);await il(n,{...r,fechaCreacion:Br.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Ooe=async t=>{try{await No(Lr(Gt,u4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Qoe=t=>{const e=fr(Kt(Gt,A4));return Yr(e,n=>{t(n.docs.map(a=>Nw(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},Hoe=async t=>{try{const{id:e,...r}=t,n=Lr(Gt,A4,e);await il(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},Voe=async t=>{try{return(await Js(Kt(Gt,A4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},zoe=t=>{const e=fr(Kt(Gt,Roe));return Yr(e,n=>{t(n.docs.map(a=>Nw(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},Goe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],_F={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},_2=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},qoe=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Koe=({item:t,index:e,showAnswers:r})=>{const n=J.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((a,s)=>{const i=r&&s===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((a,s)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((a,s)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((a,s)=>c.jsxs("li",{children:[c.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},t.id)},Woe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(null),[a,s]=J.useState(!1),[i,o]=J.useState(!1),[l,u]=J.useState(null),[d,h]=J.useState(!1),m={nombre:"",asignatura:nl[0],nivel:ey[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=J.useState(m);J.useEffect(()=>{const C=Loe(e);return()=>C()},[]);const y=C=>{const{name:S,value:N}=C.target;b(H=>({...H,[S]:N}))},E=C=>{b(S=>{const N={...S.tiposActividad};return N[C]?delete N[C]:N[C]=_F[C][0],{...S,tiposActividad:N}})},B=(C,S)=>{b(N=>({...N,tiposActividad:{...N.tiposActividad,[C]:S}}))},k=C=>{b(S=>{const N=S.selectedNee.includes(C)?S.selectedNee.filter(H=>H!==C):[...S.selectedNee,C];return{...S,selectedNee:N}})},F=async C=>{if(C.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const S=Object.entries(g.tiposActividad).map(([L,I])=>`- ${I} ítem(s) de tipo '${L}'`).join(`
`),N=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",H=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${N}

            Tu respuesta DEBE ser un único objeto JSON que contenga:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (string con el texto) y 'preguntas' (un array de sub-preguntas que pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener también 'habilidadBloom').
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Gl("Evaluación - Pruebas");const L="",ee=(await(await new globalThis.GoogleGenerativeAI(L).getGenerativeModel({model:"gemini-pro"}).generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),ae=JSON.parse(ee);let G=0;ae.actividades.forEach(le=>{le.items.forEach(O=>{G+=O.puntaje||0,O.tipo==="Comprensión de lectura"&&O.preguntas.forEach(W=>{G+=W.puntaje||0})})});const K={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:ae.objetivo,instruccionesGenerales:ae.instruccionesGenerales,puntajeIdeal:G,actividades:ae.actividades,dificultad:g.dificultad,adaptacionNEE:g.isNee?g.selectedNee:void 0};n(K),h(!1)}catch(L){console.error(L),u("Error al generar la prueba con IA. Inténtelo de nuevo.")}finally{s(!1)}},U=async()=>{if(r)try{await Uoe(r),alert("Prueba guardada con éxito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},P=async C=>{if(window.confirm("¿Eliminar esta prueba?"))try{await Moe(C),(r==null?void 0:r.id)===C&&n(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},D=async C=>{o(!0);const S=new ir("p","mm","a4"),N=20,H=S.internal.pageSize.getHeight(),L=S.internal.pageSize.getWidth(),I=L-N*2;let j=N;const z=ee=>{ee.setFillColor(230,230,230),ee.rect(0,0,L,25,"F"),ee.setFontSize(9),ee.setTextColor(0,0,0),ee.text("LICEO INDUSTRIAL DE RECOLETA",N,15,{align:"left"}),ee.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",L-N,15,{align:"right"})};z(S),j=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(C.nombre,L/2,j,{align:"center"}),j+=10,rl(S,{startY:j,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:ee=>{z(S)}}),j=S.lastAutoTable.finalY+10;const ne=ee=>{j+ee>H-N&&(S.addPage(),z(S),j=N+15,S.setTextColor(0,0,0))},Z=(ee,ae)=>{S.setFont("helvetica",ae.isBold?"bold":"normal"),S.setFontSize(ae.fontSize);const G=Array.isArray(ee)?ee.join(`
`):ee;return S.getTextDimensions(G,{maxWidth:ae.width}).h};for(const ee of C.actividades){let ae=Z(ee.titulo,{fontSize:12,width:I,isBold:!0})+Z(ee.instrucciones,{fontSize:10,width:I})+12;ne(ae),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(ee.titulo,N,j),j+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const G=S.splitTextToSize(ee.instrucciones,I);S.text(G,N,j),j+=G.length*(10*.35*1.15)+4;for(const[K,le]of ee.items.entries()){let O=0;const W=`${K+1}. ${le.pregunta} (${le.puntaje} pts)`;switch(O+=Z(W,{fontSize:10,width:I,isBold:!0}),le.tipo){case"Selección múltiple":le.opciones.forEach(ce=>{O+=Z(ce,{fontSize:10,width:I-5})+3}),O+=7;break;case"Verdadero o Falso":O+=10;break;case"Desarrollo":O+=30;break;case"Términos pareados":O+=le.pares.length*12+20;break;case"Comprensión de lectura":const te=le;O+=Z(te.texto,{fontSize:10,width:I-10})+10,te.preguntas.forEach(ce=>{const de=`${ce.pregunta} (${ce.puntaje} pts)`;O+=Z(de,{fontSize:10,width:I-5,isBold:!0}),ce.tipo==="Selección múltiple"?(ce.opciones.forEach(me=>{O+=Z(me,{fontSize:10,width:I-10})+3}),O+=7):ce.tipo==="Desarrollo"&&(O+=30),O+=5}),O+=15;break}ne(O),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const Y=S.splitTextToSize(W,I);if(S.text(Y,N,j),j+=Y.length*5+4,S.setFont("helvetica","normal"),le.tipo==="Selección múltiple")le.opciones.forEach((te,ce)=>{S.text(`${String.fromCharCode(65+ce)}) ${te}`,N+5,j),j+=7});else if(le.tipo==="Verdadero o Falso")S.text("V ______    F ______",N+5,j),j+=10;else if(le.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(N,j,I,25,"FD"),j+=30;else if(le.tipo==="Términos pareados"){const te=[...le.pares.map(de=>de.definicion)].sort(()=>Math.random()-.5),ce=le.pares.map((de,me)=>[`${me+1}. ${de.concepto}`,`(   ) ${te[me]}`]);rl(S,{startY:j,head:[["Columna A: Concepto","Columna B: Definición"]],body:ce,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:de=>z(S)}),j=S.lastAutoTable.finalY+10}else if(le.tipo==="Comprensión de lectura"){const te=le;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const ce=S.splitTextToSize(te.texto,I-10),de=ce.length*(10*.35*1.15)+8;S.rect(N,j,I,de,"FD"),j+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(ce,N+5,j),j+=de;for(const[me,ge]of te.preguntas.entries()){const Se=`${me+1}. ${ge.pregunta} (${ge.puntaje} pts)`;S.setFont("helvetica","bold");const xe=S.splitTextToSize(Se,I-5);S.text(xe,N+5,j),j+=xe.length*5+4,S.setFont("helvetica","normal"),ge.tipo==="Selección múltiple"?ge.opciones.forEach((ie,Le)=>{S.text(`${String.fromCharCode(65+Le)}) ${ie}`,N+10,j),j+=7}):ge.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(N+5,j,I-5,25,"FD"),j+=30)}}j+=5}}S.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(qoe,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:U,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>D(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(E8,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),c.jsx("div",{className:"space-y-6",children:C.items.map((S,N)=>c.jsx(Koe,{item:S,index:N,showAnswers:d},S.id))})]},C.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:F,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:y,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:g.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:nl.map(C=>c.jsx("option",{children:C},C))}),c.jsx("select",{name:"nivel",value:g.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ey.map(C=>c.jsx("option",{children:C},C))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((C,S)=>c.jsx("button",{type:"button",onClick:()=>b(N=>({...N,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${g.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.isNee,onChange:C=>b(S=>({...S,isNee:C.target.checked,selectedNee:C.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:ty.map(C=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(C),onChange:()=>k(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),c.jsx("textarea",{name:"contenido",value:g.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:Goe.map(C=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[C],onChange:()=>E(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),g.tiposActividad[C]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),_F[C].map(S=>c.jsx("button",{type:"button",onClick:()=>B(C,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[C]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},C))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>P(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},$oe=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[a,s]=J.useState(null),[i,o]=J.useState("list"),[l,u]=J.useState(!1),[d,h]=J.useState(""),m=async(P,D)=>{if(!P.trim()||!D.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const C=`Crea una rúbrica de evaluación detallada sobre "${P}" con el propósito de "${D}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Gl("Evaluación - Rúbricas");const N="",ne=(await(await new globalThis.GoogleGenerativeAI(N).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(ne),ee={id:crypto.randomUUID(),titulo:P,descripcion:D,fechaCreacion:new Date().toISOString(),dimensiones:Z.map(ae=>({id:crypto.randomUUID(),nombre:ae.dimension,niveles:{insuficiente:ae.insuficiente,suficiente:ae.suficiente,competente:ae.competente,avanzado:ae.avanzado}}))};s(ee)}catch(N){console.error(N),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},g=async()=>{if(!d.trim()||!a)return;const P=crypto.randomUUID(),D={id:P,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(N=>N?{...N,dimensiones:[...N.dimensiones,D]}:null),h("");const C=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(N=>N.nombre).join(", ")}.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Gl("Evaluación - Rúbricas (Añadir Dimensión)");const N="",ne=(await(await new globalThis.GoogleGenerativeAI(N).getGenerativeModel({model:"gemini-pro"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text().replace(/^```json\s*|```\s*$/g,""),Z=JSON.parse(ne);s(ee=>ee?{...ee,dimensiones:ee.dimensiones.map(ae=>ae.id===P?{...ae,niveles:Z,isLoading:!1}:ae)}:null)}catch(N){console.error("Error generating dimension descriptors:",N),alert("No se pudieron generar los descriptores."),s(H=>H?{...H,dimensiones:H.dimensiones.filter(L=>L.id!==P)}:null)}},b=()=>{if(!a)return;t.some(D=>D.id===a.id)?e(a):n(a),o("list"),s(null)},y=P=>{s(P),o("form")},E=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},B=(P,D,C)=>{a&&s(S=>S?{...S,dimensiones:S.dimensiones.map(N=>N.id!==P?N:D==="nombre"?{...N,nombre:C}:{...N,niveles:{...N.niveles,[D]:C}})}:null)},k=(P,D)=>{s(C=>C?{...C,[P]:D}:null)},F=P=>{a&&s(D=>D?{...D,dimensiones:D.dimensiones.filter(C=>C.id!==P)}:null)},U=()=>{if(!a)return null;const P="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",D=`${P} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:a.titulo,onChange:C=>k("titulo",C.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${P} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:a.descripcion,onChange:C=>k("descripcion",C.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${P} mt-1`})]})]}),a.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(a.titulo,a.descripcion),disabled:l||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:C.nombre,onChange:S=>B(C.id,"nombre",S.target.value),rows:4,className:D})}),Object.keys(C.niveles).map(S=>c.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:C.niveles[S],onChange:N=>B(C.id,S,N.target.value),rows:4,className:D})},S)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>F(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},C.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${P} mt-1`})]}),c.jsx("button",{onClick:g,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(P=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:P.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>y(P),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(P.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):U()},Xoe=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=J.useState([]),[a,s]=J.useState(null),[i,o]=J.useState(null),[l,u]=J.useState({rubricaEstaticaId:"",curso:""}),[d,h]=J.useState(null);J.useEffect(()=>{const k=Qoe(n);return()=>k()},[]);const m=async k=>{k.preventDefault();const F=e.find(P=>P.id===l.rubricaEstaticaId);if(!F||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const U={nombre:F.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:F.id,resultados:{}};try{await Voe(U),u({rubricaEstaticaId:"",curso:""})}catch(P){console.error(P),alert("No se pudo crear la evaluación con rúbrica.")}},g=k=>{s(k),o(JSON.parse(JSON.stringify(k)))},b=(k,F,U)=>{i&&o(P=>{if(!P)return null;const D=JSON.parse(JSON.stringify(P));return D.resultados[k]||(D.resultados[k]={puntajes:{},feedback:""}),D.resultados[k].puntajes[F]=U,D})},y=async()=>{if(i)try{await Hoe(i),s(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},E=J.useCallback(k=>{const F=i,U=e.find(H=>H.id===(F==null?void 0:F.rubricaEstaticaId));if(!F||!U)return{score:0,maxScore:0,grade:"N/A"};const P=U.dimensiones.length*4,D=F.resultados[k];if(!D)return{score:0,maxScore:P,grade:"1.0"};const C=Object.values(D.puntajes).reduce((H,L)=>H+L,0),S=1+6*(C/P),N=P>0?S.toFixed(1):"1.0";return{score:C,maxScore:P,grade:N}},[i,e]),B=async k=>{if(!i)return;const F=e.find(C=>C.id===i.rubricaEstaticaId),U=i.resultados[k];if(!F||!U||Object.keys(U.puntajes).length===0)return;h(k);const D=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${F.dimensiones.map(C=>`${C.nombre}: ${U.puntajes[C.nombre]||"N/A"}/4`).join("; ")}. Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{Gl("Evaluación - Rúbricas Interactivas (Feedback)");const C="",I=(await(await new globalThis.GoogleGenerativeAI(C).getGenerativeModel({model:"gemini-pro"}).generateContent(D)).response).text();o(j=>{if(!j)return null;const z=JSON.parse(JSON.stringify(j));return z.resultados[k].feedback=I.replace(/(\*\*|\*)/g,""),z})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(a&&i){const k=e.find(U=>U.id===a.rubricaEstaticaId),F=t.filter(U=>U.profile===$t.ESTUDIANTE&&_2(U.curso||"")===a.curso).map(U=>U.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),c.jsx("p",{className:"text-slate-500",children:a.curso})]}),c.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(U=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:U.nombre},U.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:F.map(U=>{var S;const{score:P,maxScore:D,grade:C}=E(U);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:U}),k.dimensiones.map(N=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(H=>{var L;return c.jsx("button",{onClick:()=>b(U,N.nombre,H),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((L=i.resultados[U])==null?void 0:L.puntajes[N.nombre])===H?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:H},H)})})},N.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[P,"/",D]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((S=i.resultados[U])==null?void 0:S.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>B(U),disabled:d===U,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===U?"...":"Generar IA"})]})})]},U)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),is.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(k=>c.jsxs("button",{onClick:()=>g(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Yoe=({allUsers:t})=>{const[e,r]=J.useState(""),n=J.useMemo(()=>Array.from(new Set(t.filter(s=>s.profile===$t.ESTUDIANTE&&s.curso).map(s=>_2(s.curso)))).sort(),[t]),a=J.useMemo(()=>{const s=t.filter(i=>i.profile===$t.ESTUDIANTE);return e?s.filter(i=>_2(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>c.jsx("option",{value:s,children:s},s))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:_2(s.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Joe=()=>{const[t,e]=J.useState("pruebas"),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(!0);J.useEffect(()=>{o(!0);const h=zoe(n),m=Poe(g=>{s(g),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await joe(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},u=async h=>{try{await Ooe(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(Woe,{}),t==="rubricas"&&c.jsx($oe,{rubricas:a,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(Xoe,{allUsers:r,rubricasEstaticas:a}),t==="nominas"&&c.jsx(Yoe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cy={};cy.version="0.18.5";var GM=1252,Zoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],d4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},f4=function(t){Zoe.indexOf(t)!=-1&&(GM=d4[0]=t)};function ele(){f4(1252)}var Sc=function(t){f4(t)};function h4(){Sc(1200),ele()}function SF(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function tle(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function qM(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var dg=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?tle(t.slice(2)):e==254&&r==255?qM(t.slice(2)):e==65279?t.slice(1):t},vv=function(e){return String.fromCharCode(e)},TF=function(e){return String.fromCharCode(e)},sx,zd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ix(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),o=(n&15)<<2|a>>6,l=a&63,isNaN(n)?o=l=64:isNaN(a)&&(l=64),e+=zd.charAt(s)+zd.charAt(i)+zd.charAt(o)+zd.charAt(l);return e}function al(t){var e="",r=0,n=0,a=0,s=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=zd.indexOf(t.charAt(u++)),i=zd.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),o=zd.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=zd.indexOf(t.charAt(u++)),a=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(a));return e}var Xr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),HA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function pf(t){return Xr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function BF(t){return Xr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Jo=function(e){return Xr?HA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function kw(t){if(typeof ArrayBuffer>"u")return Jo(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Ef(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function rle(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function m4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return m4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var $s=Xr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:HA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function nle(t){for(var e=[],r=0,n=t.length+250,a=pf(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=pf(65535),n=65530)}return e.push(a.slice(0,r)),$s(e)}var no=/\u0000/g,fg=/[\u0001-\u0006]/g;function dm(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Tc(t,e){var r=""+t;return r.length>=e?r:Qa("0",e-r.length)+r}function p4(t,e){var r=""+t;return r.length>=e?r:Qa(" ",e-r.length)+r}function uy(t,e){var r=""+t;return r.length>=e?r:r+Qa(" ",e-r.length)}function ale(t,e){var r=""+Math.round(t);return r.length>=e?r:Qa("0",e-r.length)+r}function sle(t,e){var r=""+t;return r.length>=e?r:Qa("0",e-r.length)+r}var NF=Math.pow(2,32);function b0(t,e){if(t>NF||t<-NF)return ale(t,e);var r=Math.round(t);return sle(r,e)}function Ay(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var kF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],eE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ile(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var vr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},IF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ole={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function dy(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(a);u<e&&(h=Math.floor(a),o=h*i+s,d=h*u+l,!(a-h<5e-8));)a=1/(a-h),s=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=s):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function ih(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],o={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=fle(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var KM=new Date(1899,11,31,0,0,0),lle=KM.getTime(),cle=new Date(1900,2,1,0,0,0);function WM(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=cle&&(r+=1440*60*1e3),(r-(lle+(t.getTimezoneOffset()-KM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function g4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ule(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ale(t){var e=t<0?12:11,r=g4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function dle(t){var e=g4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ox(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Ale(t):e===10?r=t.toFixed(10).substr(0,12):r=dle(t),g4(ule(r.toUpperCase()))}function _h(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ox(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ql(14,WM(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function fle(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function hle(t,e,r,n){var a="",s=0,i=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return eE[r.m-1][1];case 5:return eE[r.m-1][0];default:return eE[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return kF[r.q][0];default:return kF[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Tc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Tc(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Tc(l,u):"";return d}function Gd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var $M=/%/g;function mle(t,e,r){var n=e.replace($M,""),a=e.length-n.length;return _A(t,n,r*Math.pow(10,2*a))+Qa("%",a)}function ple(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return _A(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function XM(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+XM(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var YM=/# (\?+)( ?)\/( ?)(\d+)/;function gle(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Qa(" ",t[1].length+1+t[4].length):p4(i,t[1].length)+t[2]+"/"+t[3]+Tc(o,t[4].length))}function xle(t,e,r){return r+(e===0?"":""+e)+Qa(" ",t[1].length+2+t[4].length)}var JM=/^#*0*\.([0#]+)/,ZM=/\).*[0#]/,eP=/\(###\) ###\\?-####/;function Zi(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function FF(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function DF(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function vle(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function yle(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Il(t,e,r){if(t.charCodeAt(0)===40&&!e.match(ZM)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Il("n",n,r):"("+Il("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return ple(t,e,r);if(e.indexOf("%")!==-1)return mle(t,e,r);if(e.indexOf("E")!==-1)return XM(e,r);if(e.charCodeAt(0)===36)return"$"+Il(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+b0(l,e.length);if(e.match(/^[#?]+$/))return a=b0(r,0),a==="0"&&(a=""),a.length>e.length?a:Zi(e.substr(0,e.length-a.length))+a;if(s=e.match(YM))return gle(s,l,u);if(e.match(/^#+0+$/))return u+b0(l,e.length-e.indexOf("0"));if(s=e.match(JM))return a=FF(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Zi(s[1])).replace(/\.$/,"."+Zi(s[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Qa("0",Zi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+FF(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Gd(b0(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Il(t,e,-r):Gd(""+(Math.floor(r)+vle(r,s[1].length)))+"."+Tc(DF(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Il(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dm(Il(t,e.replace(/[\\-]/g,""),r)),i=0,dm(dm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(eP))return a=Il(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=dy(l,Math.pow(10,i)-1,!1),a=""+u,d=_A("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=uy(o[2],i),d.length<s[4].length&&(d=Zi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=dy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?p4(o[1],i)+s[2]+"/"+s[3]+uy(o[2],i):Qa(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=b0(r,0),e.length<=a.length?a:Zi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return Zi(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=DF(r,s[1].length),r<0?"-"+Il(t,e,-r):Gd(yle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Tc(0,3-b.length):"")+b})+"."+Tc(i,s[1].length);switch(e){case"###,##0.00":return Il(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Gd(b0(l,0));return g!=="0"?u+g:"";case"###,###.00":return Il(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Il(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function wle(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return _A(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function ble(t,e,r){var n=e.replace($M,""),a=e.length-n.length;return _A(t,n,r*Math.pow(10,2*a))+Qa("%",a)}function tP(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tP(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function xu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(ZM)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xu("n",n,r):"("+xu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return wle(t,e,r);if(e.indexOf("%")!==-1)return ble(t,e,r);if(e.indexOf("E")!==-1)return tP(e,r);if(e.charCodeAt(0)===36)return"$"+xu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Tc(l,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Zi(e.substr(0,e.length-a.length))+a;if(s=e.match(YM))return xle(s,l,u);if(e.match(/^#+0+$/))return u+Tc(l,e.length-e.indexOf("0"));if(s=e.match(JM))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Zi(s[1])).replace(/\.$/,"."+Zi(s[1])),a=a.replace(/\.(\d*)$/,function(b,y){return"."+y+Qa("0",Zi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Gd(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xu(t,e,-r):Gd(""+r)+"."+Qa("0",s[1].length);if(s=e.match(/^#,#*,#0/))return xu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dm(xu(t,e.replace(/[\\-]/g,""),r)),i=0,dm(dm(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<a.length?a.charAt(i++):b==="0"?"0":""}));if(e.match(eP))return a=xu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=dy(l,Math.pow(10,i)-1,!1),a=""+u,d=_A("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=uy(o[2],i),d.length<s[4].length&&(d=Zi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=dy(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?p4(o[1],i)+s[2]+"/"+s[3]+uy(o[2],i):Qa(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Zi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var h=e.indexOf(".")-i,m=e.length-a.length-h;return Zi(e.substr(0,h)+a+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+xu(t,e,-r):Gd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Tc(0,3-b.length):"")+b})+"."+Tc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Gd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return xu(t,e.slice(0,e.lastIndexOf(".")),r)+Zi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function _A(t,e,r){return(r|0)===r?xu(t,e,r):Il(t,e,r)}function Cle(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var rP=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Jm(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Ay(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(rP))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ele(t,e,r,n){for(var a=[],s="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Ay(t,i))throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(h=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=ih(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=ih(e,r),u==null))return"";for(s=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),a[a.length]={t:o,v:s},l=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=ih(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,m="h"):(y.t="t",++i),u==null&&y.t==="T")return"";a[a.length]=y,l=o;break;case"[":for(s=o;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(rP)){if(u==null&&(u=ih(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Jm(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<t.length&&(o=t.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;t.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);a[a.length]={t:"t",v:o},++i;break}var E=0,B=0,k;for(i=a.length-1,l="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=m,l="h",E<1&&(E=1);break;case"s":(k=a[i].v.match(/\.0+$/))&&(B=Math.max(B,k[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=a[i].t;break;case"m":l==="s"&&(a[i].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&a[i].v.match(/[Hh]/)&&(E=1),E<2&&a[i].v.match(/[Mm]/)&&(E=2),E<3&&a[i].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var F="",U;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=hle(a[i].t.charCodeAt(0),a[i].v,u,B),a[i].t="t";break;case"n":case"?":for(U=i+1;a[U]!=null&&((o=a[U].t)==="?"||o==="D"||(o===" "||o==="t")&&a[U+1]!=null&&(a[U+1].t==="?"||a[U+1].t==="t"&&a[U+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[U].v==="/"||a[U].v===" "&&a[U+1]!=null&&a[U+1].t=="?"));)a[i].v+=a[U].v,a[U]={v:"",t:";"},++U;F+=a[i].v,i=U-1;break;case"G":a[i].t="t",a[i].v=_h(e,r);break}var P="",D,C;if(F.length>0){F.charCodeAt(0)==40?(D=e<0&&F.charCodeAt(0)===45?-e:e,C=_A("n",F,D)):(D=e<0&&n>1?-e:e,C=_A("n",F,D),D<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),U=C.length-1;var S=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){S=i;break}var N=a.length;if(S===a.length&&C.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(U>=a[i].v.length-1?(U-=a[i].v.length,a[i].v=C.substr(U+1,a[i].v.length)):U<0?a[i].v="":(a[i].v=C.substr(0,U+1),U=-1),a[i].t="t",N=i);U>=0&&N<a.length&&(a[N].v=C.substr(0,U+1)+a[N].v)}else if(S!==a.length&&C.indexOf("E")===-1){for(U=C.indexOf(".")-1,i=S;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")-1:a[i].v.length-1,P=a[i].v.substr(d+1);d>=0;--d)U>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(P=C.charAt(U--)+P);a[i].v=P,a[i].t="t",N=i}for(U>=0&&N<a.length&&(a[N].v=C.substr(0,U+1)+a[N].v),U=C.indexOf(".")+1,i=S;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==S)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")+1:0,P=a[i].v.substr(0,d);d<a[i].v.length;++d)U<C.length&&(P+=C.charAt(U++));a[i].v=P,a[i].t="t",N=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(D=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=_A(a[i].t,a[i].v,D),a[i].t="t");var H="";for(i=0;i!==a.length;++i)a[i]!=null&&(H+=a[i].v);return H}var RF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function LF(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function _le(t,e){var r=Cle(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(RF),o=r[1].match(RF);return LF(e,i)?[n,r[0]]:LF(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function ql(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:vr)[t],n==null&&(n=r.table&&r.table[IF[t]]||vr[IF[t]]),n==null&&(n=ole[t]||"General");break}if(Ay(n,0))return _h(e,r);e instanceof Date&&(e=WM(e,r.date1904));var a=_le(n,e);if(Ay(a[1]))return _h(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ele(a[1],e,r,a[0])}function SA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(vr[r]==null){e<0&&(e=r);continue}if(vr[r]==t){e=r;break}}e<0&&(e=391)}return vr[e]=t,e}function Iw(t){for(var e=0;e!=392;++e)t[e]!==void 0&&SA(t[e],e)}function Zm(){vr=ile()}var Sle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},nP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Tle(t){var e=typeof t=="number"?vr[t]:t;return e=e.replace(nP,"(\\d+)"),new RegExp("^"+e+"$")}function Ble(t,e,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(e.match(nP)||[]).forEach(function(h,m){var g=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:a=g;break}}),l>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var Nle=function(){var t={};t.version="1.2.0";function e(){for(var C=0,S=new Array(256),N=0;N!=256;++N)C=N,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,S[N]=C;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(C){var S=0,N=0,H=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)L[H]=C[H];for(H=0;H!=256;++H)for(N=C[H],S=256+H;S<4096;S+=256)N=L[S]=N>>>8^C[N&255];var I=[];for(H=1;H!=16;++H)I[H-1]=typeof Int32Array<"u"?L.subarray(H*256,H*256+256):L.slice(H*256,H*256+256);return I}var a=n(r),s=a[0],i=a[1],o=a[2],l=a[3],u=a[4],d=a[5],h=a[6],m=a[7],g=a[8],b=a[9],y=a[10],E=a[11],B=a[12],k=a[13],F=a[14];function U(C,S){for(var N=S^-1,H=0,L=C.length;H<L;)N=N>>>8^r[(N^C.charCodeAt(H++))&255];return~N}function P(C,S){for(var N=S^-1,H=C.length-15,L=0;L<H;)N=F[C[L++]^N&255]^k[C[L++]^N>>8&255]^B[C[L++]^N>>16&255]^E[C[L++]^N>>>24]^y[C[L++]]^b[C[L++]]^g[C[L++]]^m[C[L++]]^h[C[L++]]^d[C[L++]]^u[C[L++]]^l[C[L++]]^o[C[L++]]^i[C[L++]]^s[C[L++]]^r[C[L++]];for(H+=15;L<H;)N=N>>>8^r[(N^C[L++])&255];return~N}function D(C,S){for(var N=S^-1,H=0,L=C.length,I=0,j=0;H<L;)I=C.charCodeAt(H++),I<128?N=N>>>8^r[(N^I)&255]:I<2048?(N=N>>>8^r[(N^(192|I>>6&31))&255],N=N>>>8^r[(N^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,j=C.charCodeAt(H++)&1023,N=N>>>8^r[(N^(240|I>>8&7))&255],N=N>>>8^r[(N^(128|I>>2&63))&255],N=N>>>8^r[(N^(128|j>>6&15|(I&3)<<4))&255],N=N>>>8^r[(N^(128|j&63))&255]):(N=N>>>8^r[(N^(224|I>>12&15))&255],N=N>>>8^r[(N^(128|I>>6&63))&255],N=N>>>8^r[(N^(128|I&63))&255]);return~N}return t.table=r,t.bstr=U,t.buf=P,t.str=D,t}(),cr=function(){var e={};e.version="1.2.1";function r(fe,Ne){for(var Ee=fe.split("/"),_e=Ne.split("/"),Te=0,ke=0,qe=Math.min(Ee.length,_e.length);Te<qe;++Te){if(ke=Ee[Te].length-_e[Te].length)return ke;if(Ee[Te]!=_e[Te])return Ee[Te]<_e[Te]?-1:1}return Ee.length-_e.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(0,Ne+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Ne=fe.lastIndexOf("/");return Ne===-1?fe:fe.slice(Ne+1)}function s(fe,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var Ee=Ne.getHours();Ee=Ee<<6|Ne.getMinutes(),Ee=Ee<<5|Ne.getSeconds()>>>1,fe.write_shift(2,Ee);var _e=Ne.getFullYear()-1980;_e=_e<<4|Ne.getMonth()+1,_e=_e<<5|Ne.getDate(),fe.write_shift(2,_e)}function i(fe){var Ne=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,_e=new Date,Te=Ee&31;Ee>>>=5;var ke=Ee&15;Ee>>>=4,_e.setMilliseconds(0),_e.setFullYear(Ee+1980),_e.setMonth(ke-1),_e.setDate(Te);var qe=Ne&31;Ne>>>=5;var tt=Ne&63;return Ne>>>=6,_e.setHours(Ne),_e.setMinutes(tt),_e.setSeconds(qe<<1),_e}function o(fe){ui(fe,0);for(var Ne={},Ee=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Te=fe.read_shift(2),ke=fe.l+Te,qe={};switch(_e){case 21589:Ee=fe.read_shift(1),Ee&1&&(qe.mtime=fe.read_shift(4)),Te>5&&(Ee&2&&(qe.atime=fe.read_shift(4)),Ee&4&&(qe.ctime=fe.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}fe.l=ke,Ne[_e]=qe}return Ne}var l;function u(){return l||(l={})}function d(fe,Ne){if(fe[0]==80&&fe[1]==75)return an(fe,Ne);if((fe[0]|32)==109&&(fe[1]|32)==105)return Ss(fe,Ne);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,_e=512,Te=0,ke=0,qe=0,tt=0,He=0,We=[],Ye=fe.slice(0,512);ui(Ye,0);var yt=h(Ye);switch(Ee=yt[0],Ee){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(yt[1]==0)return an(fe,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}_e!==512&&(Ye=fe.slice(0,_e),ui(Ye,28));var Bt=fe.slice(0,_e);m(Ye,Ee);var Pt=Ye.read_shift(4,"i");if(Ee===3&&Pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Pt);Ye.l+=4,qe=Ye.read_shift(4,"i"),Ye.l+=4,Ye.chk("00100000","Mini Stream Cutoff Size: "),tt=Ye.read_shift(4,"i"),Te=Ye.read_shift(4,"i"),He=Ye.read_shift(4,"i"),ke=Ye.read_shift(4,"i");for(var Tt=-1,Rt=0;Rt<109&&(Tt=Ye.read_shift(4,"i"),!(Tt<0));++Rt)We[Rt]=Tt;var Ar=g(fe,_e);E(He,ke,Ar,_e,We);var jr=k(Ar,qe,We,_e);jr[qe].name="!Directory",Te>0&&tt!==j&&(jr[tt].name="!MiniFAT"),jr[We[0]].name="!FAT",jr.fat_addrs=We,jr.ssz=_e;var Or={},Gr=[],Fa=[],mi=[];F(qe,jr,Ar,Gr,Te,Or,Fa,tt),b(Fa,mi,Gr),Gr.shift();var Da={FileIndex:Fa,FullPaths:mi};return Ne&&Ne.raw&&(Da.raw={header:Bt,sectors:Ar}),Da}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(z,"Header Signature: "),fe.l+=16;var Ne=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Ne]}function m(fe,Ne){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function g(fe,Ne){for(var Ee=Math.ceil(fe.length/Ne)-1,_e=[],Te=1;Te<Ee;++Te)_e[Te-1]=fe.slice(Te*Ne,(Te+1)*Ne);return _e[Ee-1]=fe.slice(Ee*Ne),_e}function b(fe,Ne,Ee){for(var _e=0,Te=0,ke=0,qe=0,tt=0,He=Ee.length,We=[],Ye=[];_e<He;++_e)We[_e]=Ye[_e]=_e,Ne[_e]=Ee[_e];for(;tt<Ye.length;++tt)_e=Ye[tt],Te=fe[_e].L,ke=fe[_e].R,qe=fe[_e].C,We[_e]===_e&&(Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]),ke!==-1&&We[ke]!==ke&&(We[_e]=We[ke])),qe!==-1&&(We[qe]=_e),Te!==-1&&_e!=We[_e]&&(We[Te]=We[_e],Ye.lastIndexOf(Te)<tt&&Ye.push(Te)),ke!==-1&&_e!=We[_e]&&(We[ke]=We[_e],Ye.lastIndexOf(ke)<tt&&Ye.push(ke));for(_e=1;_e<He;++_e)We[_e]===_e&&(ke!==-1&&We[ke]!==ke?We[_e]=We[ke]:Te!==-1&&We[Te]!==Te&&(We[_e]=We[Te]));for(_e=1;_e<He;++_e)if(fe[_e].type!==0){if(tt=_e,tt!=We[tt])do tt=We[tt],Ne[_e]=Ne[tt]+"/"+Ne[_e];while(tt!==0&&We[tt]!==-1&&tt!=We[tt]);We[_e]=-1}for(Ne[0]+="/",_e=1;_e<He;++_e)fe[_e].type!==2&&(Ne[_e]+="/")}function y(fe,Ne,Ee){for(var _e=fe.start,Te=fe.size,ke=[],qe=_e;Ee&&Te>0&&qe>=0;)ke.push(Ne.slice(qe*I,qe*I+I)),Te-=I,qe=nh(Ee,qe*4);return ke.length===0?lt(0):$s(ke).slice(0,fe.size)}function E(fe,Ne,Ee,_e,Te){var ke=j;if(fe===j){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var qe=Ee[fe],tt=(_e>>>2)-1;if(!qe)return;for(var He=0;He<tt&&(ke=nh(qe,He*4))!==j;++He)Te.push(ke);E(nh(qe,_e-4),Ne-1,Ee,_e,Te)}}function B(fe,Ne,Ee,_e,Te){var ke=[],qe=[];Te||(Te=[]);var tt=_e-1,He=0,We=0;for(He=Ne;He>=0;){Te[He]=!0,ke[ke.length]=He,qe.push(fe[He]);var Ye=Ee[Math.floor(He*4/_e)];if(We=He*4&tt,_e<4+We)throw new Error("FAT boundary crossed: "+He+" 4 "+_e);if(!fe[Ye])break;He=nh(fe[Ye],We)}return{nodes:ke,data:KF([qe])}}function k(fe,Ne,Ee,_e){var Te=fe.length,ke=[],qe=[],tt=[],He=[],We=_e-1,Ye=0,yt=0,Bt=0,Pt=0;for(Ye=0;Ye<Te;++Ye)if(tt=[],Bt=Ye+Ne,Bt>=Te&&(Bt-=Te),!qe[Bt]){He=[];var Tt=[];for(yt=Bt;yt>=0;){Tt[yt]=!0,qe[yt]=!0,tt[tt.length]=yt,He.push(fe[yt]);var Rt=Ee[Math.floor(yt*4/_e)];if(Pt=yt*4&We,_e<4+Pt)throw new Error("FAT boundary crossed: "+yt+" 4 "+_e);if(!fe[Rt]||(yt=nh(fe[Rt],Pt),Tt[yt]))break}ke[Bt]={nodes:tt,data:KF([He])}}return ke}function F(fe,Ne,Ee,_e,Te,ke,qe,tt){for(var He=0,We=_e.length?2:0,Ye=Ne[fe].data,yt=0,Bt=0,Pt;yt<Ye.length;yt+=128){var Tt=Ye.slice(yt,yt+128);ui(Tt,64),Bt=Tt.read_shift(2),Pt=E4(Tt,0,Bt-We),_e.push(Pt);var Rt={name:Pt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},Ar=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);Ar!==0&&(Rt.ct=U(Tt,Tt.l-8));var jr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);jr!==0&&(Rt.mt=U(Tt,Tt.l-8)),Rt.start=Tt.read_shift(4,"i"),Rt.size=Tt.read_shift(4,"i"),Rt.size<0&&Rt.start<0&&(Rt.size=Rt.type=0,Rt.start=j,Rt.name=""),Rt.type===5?(He=Rt.start,Te>0&&He!==j&&(Ne[He].name="!StreamData")):Rt.size>=4096?(Rt.storage="fat",Ne[Rt.start]===void 0&&(Ne[Rt.start]=B(Ee,Rt.start,Ne.fat_addrs,Ne.ssz)),Ne[Rt.start].name=Rt.name,Rt.content=Ne[Rt.start].data.slice(0,Rt.size)):(Rt.storage="minifat",Rt.size<0?Rt.size=0:He!==j&&Rt.start!==j&&Ne[He]&&(Rt.content=y(Rt,Ne[He].data,(Ne[tt]||{}).data))),Rt.content&&ui(Rt.content,0),ke[Pt]=Rt,qe.push(Rt)}}function U(fe,Ne){return new Date((Yo(fe,Ne+4)/1e7*Math.pow(2,32)+Yo(fe,Ne)/1e7-11644473600)*1e3)}function P(fe,Ne){return u(),d(l.readFileSync(fe),Ne)}function D(fe,Ne){var Ee=Ne&&Ne.type;switch(Ee||Xr&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return P(fe,Ne);case"base64":return d(Jo(al(fe)),Ne);case"binary":return d(Jo(fe),Ne)}return d(fe,Ne)}function C(fe,Ne){var Ee=Ne||{},_e=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),S(fe)}function S(fe){var Ne="Sh33tJ5";if(!cr.find(fe,"/"+Ne)){var Ee=lt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Ne,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Ne),N(fe)}}function N(fe,Ne){C(fe);for(var Ee=!1,_e=!1,Te=fe.FullPaths.length-1;Te>=0;--Te){var ke=fe.FileIndex[Te];switch(ke.type){case 0:_e?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(ke.R*ke.L*ke.C)&&(Ee=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Ne)){var qe=new Date(1987,1,19),tt=0,He=Object.create?Object.create(null):{},We=[];for(Te=0;Te<fe.FullPaths.length;++Te)He[fe.FullPaths[Te]]=!0,fe.FileIndex[Te].type!==0&&We.push([fe.FullPaths[Te],fe.FileIndex[Te]]);for(Te=0;Te<We.length;++Te){var Ye=n(We[Te][0]);_e=He[Ye],_e||(We.push([Ye,{name:a(Ye).replace("/",""),type:1,clsid:Z,ct:qe,mt:qe,content:null}]),He[Ye]=!0)}for(We.sort(function(Pt,Tt){return r(Pt[0],Tt[0])}),fe.FullPaths=[],fe.FileIndex=[],Te=0;Te<We.length;++Te)fe.FullPaths[Te]=We[Te][0],fe.FileIndex[Te]=We[Te][1];for(Te=0;Te<We.length;++Te){var yt=fe.FileIndex[Te],Bt=fe.FullPaths[Te];if(yt.name=a(Bt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||Z,Te===0)yt.C=We.length>1?1:-1,yt.size=0,yt.type=5;else if(Bt.slice(-1)=="/"){for(tt=Te+1;tt<We.length&&n(fe.FullPaths[tt])!=Bt;++tt);for(yt.C=tt>=We.length?-1:tt,tt=Te+1;tt<We.length&&n(fe.FullPaths[tt])!=n(Bt);++tt);yt.R=tt>=We.length?-1:tt,yt.type=1}else n(fe.FullPaths[Te+1]||"")==n(Bt)&&(yt.R=Te+1),yt.type=2}}}function H(fe,Ne){var Ee=Ne||{};if(Ee.fileType=="mad")return Ht(fe,Ee);switch(N(fe),Ee.fileType){case"zip":return pa(fe,Ee)}var _e=function(Pt){for(var Tt=0,Rt=0,Ar=0;Ar<Pt.FileIndex.length;++Ar){var jr=Pt.FileIndex[Ar];if(jr.content){var Or=jr.content.length;Or>0&&(Or<4096?Tt+=Or+63>>6:Rt+=Or+511>>9)}}for(var Gr=Pt.FullPaths.length+3>>2,Fa=Tt+7>>3,mi=Tt+127>>7,Da=Fa+Rt+Gr+mi,ds=Da+127>>7,qa=ds<=109?0:Math.ceil((ds-109)/127);Da+ds+qa+127>>7>ds;)qa=++ds<=109?0:Math.ceil((ds-109)/127);var Ts=[1,qa,ds,mi,Gr,Rt,Tt,0];return Pt.FileIndex[0].size=Tt<<6,Ts[7]=(Pt.FileIndex[0].start=Ts[0]+Ts[1]+Ts[2]+Ts[3]+Ts[4]+Ts[5])+(Ts[6]+7>>3),Ts}(fe),Te=lt(_e[7]<<9),ke=0,qe=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,ne[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,_e[2]),Te.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:j),Te.write_shift(4,_e[3]),Te.write_shift(-4,_e[1]?_e[0]-1:j),Te.write_shift(4,_e[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1)}if(_e[1])for(qe=0;qe<_e[1];++qe){for(;ke<236+qe*127;++ke)Te.write_shift(-4,ke<_e[2]?_e[1]+ke:-1);Te.write_shift(-4,qe===_e[1]-1?j:qe+1)}var tt=function(Pt){for(qe+=Pt;ke<qe-1;++ke)Te.write_shift(-4,ke+1);Pt&&(++ke,Te.write_shift(-4,j))};for(qe=ke=0,qe+=_e[1];ke<qe;++ke)Te.write_shift(-4,ee.DIFSECT);for(qe+=_e[2];ke<qe;++ke)Te.write_shift(-4,ee.FATSECT);tt(_e[3]),tt(_e[4]);for(var He=0,We=0,Ye=fe.FileIndex[0];He<fe.FileIndex.length;++He)Ye=fe.FileIndex[He],Ye.content&&(We=Ye.content.length,!(We<4096)&&(Ye.start=qe,tt(We+511>>9)));for(tt(_e[6]+7>>3);Te.l&511;)Te.write_shift(-4,ee.ENDOFCHAIN);for(qe=ke=0,He=0;He<fe.FileIndex.length;++He)Ye=fe.FileIndex[He],Ye.content&&(We=Ye.content.length,!(!We||We>=4096)&&(Ye.start=qe,tt(We+63>>6)));for(;Te.l&511;)Te.write_shift(-4,ee.ENDOFCHAIN);for(ke=0;ke<_e[4]<<2;++ke){var yt=fe.FullPaths[ke];if(!yt||yt.length===0){for(He=0;He<17;++He)Te.write_shift(4,0);for(He=0;He<3;++He)Te.write_shift(4,-1);for(He=0;He<12;++He)Te.write_shift(4,0);continue}Ye=fe.FileIndex[ke],ke===0&&(Ye.start=Ye.size?Ye.start-1:j);var Bt=ke===0&&Ee.root||Ye.name;if(We=2*(Bt.length+1),Te.write_shift(64,Bt,"utf16le"),Te.write_shift(2,We),Te.write_shift(1,Ye.type),Te.write_shift(1,Ye.color),Te.write_shift(-4,Ye.L),Te.write_shift(-4,Ye.R),Te.write_shift(-4,Ye.C),Ye.clsid)Te.write_shift(16,Ye.clsid,"hex");else for(He=0;He<4;++He)Te.write_shift(4,0);Te.write_shift(4,Ye.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Ye.start),Te.write_shift(4,Ye.size),Te.write_shift(4,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Ye=fe.FileIndex[ke],Ye.size>=4096)if(Te.l=Ye.start+1<<9,Xr&&Buffer.isBuffer(Ye.content))Ye.content.copy(Te,Te.l,0,Ye.size),Te.l+=Ye.size+511&-512;else{for(He=0;He<Ye.size;++He)Te.write_shift(1,Ye.content[He]);for(;He&511;++He)Te.write_shift(1,0)}for(ke=1;ke<fe.FileIndex.length;++ke)if(Ye=fe.FileIndex[ke],Ye.size>0&&Ye.size<4096)if(Xr&&Buffer.isBuffer(Ye.content))Ye.content.copy(Te,Te.l,0,Ye.size),Te.l+=Ye.size+63&-64;else{for(He=0;He<Ye.size;++He)Te.write_shift(1,Ye.content[He]);for(;He&63;++He)Te.write_shift(1,0)}if(Xr)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function L(fe,Ne){var Ee=fe.FullPaths.map(function(He){return He.toUpperCase()}),_e=Ee.map(function(He){var We=He.split("/");return We[We.length-(He.slice(-1)=="/"?2:1)]}),Te=!1;Ne.charCodeAt(0)===47?(Te=!0,Ne=Ee[0].slice(0,-1)+Ne):Te=Ne.indexOf("/")!==-1;var ke=Ne.toUpperCase(),qe=Te===!0?Ee.indexOf(ke):_e.indexOf(ke);if(qe!==-1)return fe.FileIndex[qe];var tt=!ke.match(fg);for(ke=ke.replace(no,""),tt&&(ke=ke.replace(fg,"!")),qe=0;qe<Ee.length;++qe)if((tt?Ee[qe].replace(fg,"!"):Ee[qe]).replace(no,"")==ke||(tt?_e[qe].replace(fg,"!"):_e[qe]).replace(no,"")==ke)return fe.FileIndex[qe];return null}var I=64,j=-2,z="d0cf11e0a1b11ae1",ne=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(fe,Ne,Ee){u();var _e=H(fe,Ee);l.writeFileSync(Ne,_e)}function G(fe){for(var Ne=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Ne[Ee]=String.fromCharCode(fe[Ee]);return Ne.join("")}function K(fe,Ne){var Ee=H(fe,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),l.writeFileSync(Ne.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:G(Ee);case"base64":return ix(typeof Ee=="string"?Ee:G(Ee));case"buffer":if(Xr)return Buffer.isBuffer(Ee)?Ee:HA(Ee);case"array":return typeof Ee=="string"?Jo(Ee):Ee}return Ee}var le;function O(fe){try{var Ne=fe.InflateRaw,Ee=new Ne;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)le=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function W(fe,Ne){if(!le)return Ir(fe,Ne);var Ee=le.InflateRaw,_e=new Ee,Te=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Te}function Y(fe){return le?le.deflateRawSync(fe):Ft(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],de=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(fe){var Ne=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ge=typeof Uint8Array<"u",Se=ge?new Uint8Array(256):[],xe=0;xe<256;++xe)Se[xe]=me(xe);function ie(fe,Ne){var Ee=Se[fe&255];return Ne<=8?Ee>>>8-Ne:(Ee=Ee<<8|Se[fe>>8&255],Ne<=16?Ee>>>16-Ne:(Ee=Ee<<8|Se[fe>>16&255],Ee>>>24-Ne))}function Le(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=6?0:fe[_e+1]<<8))>>>Ee&3}function nt(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=5?0:fe[_e+1]<<8))>>>Ee&7}function Ie(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=4?0:fe[_e+1]<<8))>>>Ee&15}function we(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=3?0:fe[_e+1]<<8))>>>Ee&31}function je(fe,Ne){var Ee=Ne&7,_e=Ne>>>3;return(fe[_e]|(Ee<=1?0:fe[_e+1]<<8))>>>Ee&127}function et(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3,ke=(1<<Ee)-1,qe=fe[Te]>>>_e;return Ee<8-_e||(qe|=fe[Te+1]<<8-_e,Ee<16-_e)||(qe|=fe[Te+2]<<16-_e,Ee<24-_e)||(qe|=fe[Te+3]<<24-_e),qe&ke}function st(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return _e<=5?fe[Te]|=(Ee&7)<<_e:(fe[Te]|=Ee<<_e&255,fe[Te+1]=(Ee&7)>>8-_e),Ne+3}function mt(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee=(Ee&1)<<_e,fe[Te]|=Ee,Ne+1}function _t(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee,Ne+8}function ut(fe,Ne,Ee){var _e=Ne&7,Te=Ne>>>3;return Ee<<=_e,fe[Te]|=Ee&255,Ee>>>=8,fe[Te+1]=Ee&255,fe[Te+2]=Ee>>>8,Ne+16}function Nt(fe,Ne){var Ee=fe.length,_e=2*Ee>Ne?2*Ee:Ne+5,Te=0;if(Ee>=Ne)return fe;if(Xr){var ke=BF(_e);if(fe.copy)fe.copy(ke);else for(;Te<fe.length;++Te)ke[Te]=fe[Te];return ke}else if(ge){var qe=new Uint8Array(_e);if(qe.set)qe.set(fe);else for(;Te<Ee;++Te)qe[Te]=fe[Te];return qe}return fe.length=_e,fe}function Qt(fe){for(var Ne=new Array(fe),Ee=0;Ee<fe;++Ee)Ne[Ee]=0;return Ne}function Yt(fe,Ne,Ee){var _e=1,Te=0,ke=0,qe=0,tt=0,He=fe.length,We=ge?new Uint16Array(32):Qt(32);for(ke=0;ke<32;++ke)We[ke]=0;for(ke=He;ke<Ee;++ke)fe[ke]=0;He=fe.length;var Ye=ge?new Uint16Array(He):Qt(He);for(ke=0;ke<He;++ke)We[Te=fe[ke]]++,_e<Te&&(_e=Te),Ye[ke]=0;for(We[0]=0,ke=1;ke<=_e;++ke)We[ke+16]=tt=tt+We[ke-1]<<1;for(ke=0;ke<He;++ke)tt=fe[ke],tt!=0&&(Ye[ke]=We[tt+16]++);var yt=0;for(ke=0;ke<He;++ke)if(yt=fe[ke],yt!=0)for(tt=ie(Ye[ke],_e)>>_e-yt,qe=(1<<_e+4-yt)-1;qe>=0;--qe)Ne[tt|qe<<yt]=yt&15|ke<<4;return _e}var kt=ge?new Uint16Array(512):Qt(512),It=ge?new Uint16Array(32):Qt(32);if(!ge){for(var Wt=0;Wt<512;++Wt)kt[Wt]=0;for(Wt=0;Wt<32;++Wt)It[Wt]=0}(function(){for(var fe=[],Ne=0;Ne<32;Ne++)fe.push(5);Yt(fe,It,32);var Ee=[];for(Ne=0;Ne<=143;Ne++)Ee.push(8);for(;Ne<=255;Ne++)Ee.push(9);for(;Ne<=279;Ne++)Ee.push(7);for(;Ne<=287;Ne++)Ee.push(8);Yt(Ee,kt,288)})();var Dt=function(){for(var Ne=ge?new Uint8Array(32768):[],Ee=0,_e=0;Ee<de.length-1;++Ee)for(;_e<de[Ee+1];++_e)Ne[_e]=Ee;for(;_e<32768;++_e)Ne[_e]=29;var Te=ge?new Uint8Array(259):[];for(Ee=0,_e=0;Ee<ce.length-1;++Ee)for(;_e<ce[Ee+1];++_e)Te[_e]=Ee;function ke(tt,He){for(var We=0;We<tt.length;){var Ye=Math.min(65535,tt.length-We),yt=We+Ye==tt.length;for(He.write_shift(1,+yt),He.write_shift(2,Ye),He.write_shift(2,~Ye&65535);Ye-- >0;)He[He.l++]=tt[We++]}return He.l}function qe(tt,He){for(var We=0,Ye=0,yt=ge?new Uint16Array(32768):[];Ye<tt.length;){var Bt=Math.min(65535,tt.length-Ye);if(Bt<10){for(We=st(He,We,+(Ye+Bt==tt.length)),We&7&&(We+=8-(We&7)),He.l=We/8|0,He.write_shift(2,Bt),He.write_shift(2,~Bt&65535);Bt-- >0;)He[He.l++]=tt[Ye++];We=He.l*8;continue}We=st(He,We,+(Ye+Bt==tt.length)+2);for(var Pt=0;Bt-- >0;){var Tt=tt[Ye];Pt=(Pt<<5^Tt)&32767;var Rt=-1,Ar=0;if((Rt=yt[Pt])&&(Rt|=Ye&-32768,Rt>Ye&&(Rt-=32768),Rt<Ye))for(;tt[Rt+Ar]==tt[Ye+Ar]&&Ar<250;)++Ar;if(Ar>2){Tt=Te[Ar],Tt<=22?We=_t(He,We,Se[Tt+1]>>1)-1:(_t(He,We,3),We+=5,_t(He,We,Se[Tt-23]>>5),We+=3);var jr=Tt<8?0:Tt-4>>2;jr>0&&(ut(He,We,Ar-ce[Tt]),We+=jr),Tt=Ne[Ye-Rt],We=_t(He,We,Se[Tt]>>3),We-=3;var Or=Tt<4?0:Tt-2>>1;Or>0&&(ut(He,We,Ye-Rt-de[Tt]),We+=Or);for(var Gr=0;Gr<Ar;++Gr)yt[Pt]=Ye&32767,Pt=(Pt<<5^tt[Ye])&32767,++Ye;Bt-=Ar-1}else Tt<=143?Tt=Tt+48:We=mt(He,We,1),We=_t(He,We,Se[Tt]),yt[Pt]=Ye&32767,++Ye}We=_t(He,We,0)-1}return He.l=(We+7)/8|0,He.l}return function(He,We){return He.length<8?ke(He,We):qe(He,We)}}();function Ft(fe){var Ne=lt(50+Math.floor(fe.length*1.1)),Ee=Dt(fe,Ne);return Ne.slice(0,Ee)}var xt=ge?new Uint16Array(32768):Qt(32768),yr=ge?new Uint16Array(32768):Qt(32768),Jt=ge?new Uint16Array(128):Qt(128),fn=1,gr=1;function Ur(fe,Ne){var Ee=we(fe,Ne)+257;Ne+=5;var _e=we(fe,Ne)+1;Ne+=5;var Te=Ie(fe,Ne)+4;Ne+=4;for(var ke=0,qe=ge?new Uint8Array(19):Qt(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,We=ge?new Uint8Array(8):Qt(8),Ye=ge?new Uint8Array(8):Qt(8),yt=qe.length,Bt=0;Bt<Te;++Bt)qe[te[Bt]]=ke=nt(fe,Ne),He<ke&&(He=ke),We[ke]++,Ne+=3;var Pt=0;for(We[0]=0,Bt=1;Bt<=He;++Bt)Ye[Bt]=Pt=Pt+We[Bt-1]<<1;for(Bt=0;Bt<yt;++Bt)(Pt=qe[Bt])!=0&&(tt[Bt]=Ye[Pt]++);var Tt=0;for(Bt=0;Bt<yt;++Bt)if(Tt=qe[Bt],Tt!=0){Pt=Se[tt[Bt]]>>8-Tt;for(var Rt=(1<<7-Tt)-1;Rt>=0;--Rt)Jt[Pt|Rt<<Tt]=Tt&7|Bt<<3}var Ar=[];for(He=1;Ar.length<Ee+_e;)switch(Pt=Jt[je(fe,Ne)],Ne+=Pt&7,Pt>>>=3){case 16:for(ke=3+Le(fe,Ne),Ne+=2,Pt=Ar[Ar.length-1];ke-- >0;)Ar.push(Pt);break;case 17:for(ke=3+nt(fe,Ne),Ne+=3;ke-- >0;)Ar.push(0);break;case 18:for(ke=11+je(fe,Ne),Ne+=7;ke-- >0;)Ar.push(0);break;default:Ar.push(Pt),He<Pt&&(He=Pt);break}var jr=Ar.slice(0,Ee),Or=Ar.slice(Ee);for(Bt=Ee;Bt<286;++Bt)jr[Bt]=0;for(Bt=_e;Bt<30;++Bt)Or[Bt]=0;return fn=Yt(jr,xt,286),gr=Yt(Or,yr,30),Ne}function In(fe,Ne){if(fe[0]==3&&!(fe[1]&3))return[pf(Ne),2];for(var Ee=0,_e=0,Te=BF(Ne||1<<18),ke=0,qe=Te.length>>>0,tt=0,He=0;(_e&1)==0;){if(_e=nt(fe,Ee),Ee+=3,_e>>>1)_e>>1==1?(tt=9,He=5):(Ee=Ur(fe,Ee),tt=fn,He=gr);else{Ee&7&&(Ee+=8-(Ee&7));var We=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,We>0)for(!Ne&&qe<ke+We&&(Te=Nt(Te,ke+We),qe=Te.length);We-- >0;)Te[ke++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Ne&&qe<ke+32767&&(Te=Nt(Te,ke+32767),qe=Te.length);var Ye=et(fe,Ee,tt),yt=_e>>>1==1?kt[Ye]:xt[Ye];if(Ee+=yt&15,yt>>>=4,(yt>>>8&255)===0)Te[ke++]=yt;else{if(yt==256)break;yt-=257;var Bt=yt<8?0:yt-4>>2;Bt>5&&(Bt=0);var Pt=ke+ce[yt];Bt>0&&(Pt+=et(fe,Ee,Bt),Ee+=Bt),Ye=et(fe,Ee,He),yt=_e>>>1==1?It[Ye]:yr[Ye],Ee+=yt&15,yt>>>=4;var Tt=yt<4?0:yt-2>>1,Rt=de[yt];for(Tt>0&&(Rt+=et(fe,Ee,Tt),Ee+=Tt),!Ne&&qe<Pt&&(Te=Nt(Te,Pt+100),qe=Te.length);ke<Pt;)Te[ke]=Te[ke-Rt],++ke}}}return Ne?[Te,Ee+7>>>3]:[Te.slice(0,ke),Ee+7>>>3]}function Ir(fe,Ne){var Ee=fe.slice(fe.l||0),_e=In(Ee,Ne);return fe.l+=_e[1],_e[0]}function us(fe,Ne){if(fe)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function an(fe,Ne){var Ee=fe;ui(Ee,0);var _e=[],Te=[],ke={FileIndex:_e,FullPaths:Te};C(ke,{root:Ne.root});for(var qe=Ee.length-4;(Ee[qe]!=80||Ee[qe+1]!=75||Ee[qe+2]!=5||Ee[qe+3]!=6)&&qe>=0;)--qe;Ee.l=qe+4,Ee.l+=4;var tt=Ee.read_shift(2);Ee.l+=6;var He=Ee.read_shift(4);for(Ee.l=He,qe=0;qe<tt;++qe){Ee.l+=20;var We=Ee.read_shift(4),Ye=Ee.read_shift(4),yt=Ee.read_shift(2),Bt=Ee.read_shift(2),Pt=Ee.read_shift(2);Ee.l+=8;var Tt=Ee.read_shift(4),Rt=o(Ee.slice(Ee.l+yt,Ee.l+yt+Bt));Ee.l+=yt+Bt+Pt;var Ar=Ee.l;Ee.l=Tt+4,na(Ee,We,Ye,ke,Rt),Ee.l=Ar}return ke}function na(fe,Ne,Ee,_e,Te){fe.l+=2;var ke=fe.read_shift(2),qe=fe.read_shift(2),tt=i(fe);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var He=fe.read_shift(4),We=fe.read_shift(4),Ye=fe.read_shift(4),yt=fe.read_shift(2),Bt=fe.read_shift(2),Pt="",Tt=0;Tt<yt;++Tt)Pt+=String.fromCharCode(fe[fe.l++]);if(Bt){var Rt=o(fe.slice(fe.l,fe.l+Bt));(Rt[21589]||{}).mt&&(tt=Rt[21589].mt),((Te||{})[21589]||{}).mt&&(tt=Te[21589].mt)}fe.l+=Bt;var Ar=fe.slice(fe.l,fe.l+We);switch(qe){case 8:Ar=W(fe,Ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var jr=!1;ke&8&&(He=fe.read_shift(4),He==134695760&&(He=fe.read_shift(4),jr=!0),We=fe.read_shift(4),Ye=fe.read_shift(4)),We!=Ne&&us(jr,"Bad compressed size: "+Ne+" != "+We),Ye!=Ee&&us(jr,"Bad uncompressed size: "+Ee+" != "+Ye),sn(_e,Pt,Ar,{unsafe:!0,mt:tt})}function pa(fe,Ne){var Ee=Ne||{},_e=[],Te=[],ke=lt(1),qe=Ee.compression?8:0,tt=0,He=0,We=0,Ye=0,yt=0,Bt=fe.FullPaths[0],Pt=Bt,Tt=fe.FileIndex[0],Rt=[],Ar=0;for(He=1;He<fe.FullPaths.length;++He)if(Pt=fe.FullPaths[He].slice(Bt.length),Tt=fe.FileIndex[He],!(!Tt.size||!Tt.content||Pt=="Sh33tJ5")){var jr=Ye,Or=lt(Pt.length);for(We=0;We<Pt.length;++We)Or.write_shift(1,Pt.charCodeAt(We)&127);Or=Or.slice(0,Or.l),Rt[yt]=Nle.buf(Tt.content,0);var Gr=Tt.content;qe==8&&(Gr=Y(Gr)),ke=lt(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,tt),ke.write_shift(2,qe),Tt.mt?s(ke,Tt.mt):ke.write_shift(4,0),ke.write_shift(-4,Rt[yt]),ke.write_shift(4,Gr.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Or.length),ke.write_shift(2,0),Ye+=ke.length,_e.push(ke),Ye+=Or.length,_e.push(Or),Ye+=Gr.length,_e.push(Gr),ke=lt(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,tt),ke.write_shift(2,qe),ke.write_shift(4,0),ke.write_shift(-4,Rt[yt]),ke.write_shift(4,Gr.length),ke.write_shift(4,Tt.content.length),ke.write_shift(2,Or.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,jr),Ar+=ke.l,Te.push(ke),Ar+=Or.length,Te.push(Or),++yt}return ke=lt(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,yt),ke.write_shift(2,yt),ke.write_shift(4,Ar),ke.write_shift(4,Ye),ke.write_shift(2,0),$s([$s(_e),$s(Te),ke])}var Pr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function rr(fe,Ne){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",_e=Ee.match(/\.([^\.]+)$/);return _e&&Pr[_e[1]]||Ne&&(_e=(Ee=Ne).match(/[\.\\]([^\.\\])+$/),_e&&Pr[_e[1]])?Pr[_e[1]]:"application/octet-stream"}function zr(fe){for(var Ne=ix(fe),Ee=[],_e=0;_e<Ne.length;_e+=76)Ee.push(Ne.slice(_e,_e+76));return Ee.join(`\r
`)+`\r
`}function As(fe){var Ne=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var Ye=We.charCodeAt(0).toString(16).toUpperCase();return"="+(Ye.length==1?"0"+Ye:Ye)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],_e=Ne.split(`\r
`),Te=0;Te<_e.length;++Te){var ke=_e[Te];if(ke.length==0){Ee.push("");continue}for(var qe=0;qe<ke.length;){var tt=76,He=ke.slice(qe,qe+tt);He.charAt(tt-1)=="="?tt--:He.charAt(tt-2)=="="?tt-=2:He.charAt(tt-3)=="="&&(tt-=3),He=ke.slice(qe,qe+tt),qe+=tt,qe<ke.length&&(He+="="),Ee.push(He)}}return Ee.join(`\r
`)}function Wn(fe){for(var Ne=[],Ee=0;Ee<fe.length;++Ee){for(var _e=fe[Ee];Ee<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Ee];Ne.push(_e)}for(var Te=0;Te<Ne.length;++Te)Ne[Te]=Ne[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Jo(Ne.join(`\r
`))}function ba(fe,Ne,Ee){for(var _e="",Te="",ke="",qe,tt=0;tt<10;++tt){var He=Ne[tt];if(!He||He.match(/^\s*$/))break;var We=He.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":_e=We[2].trim();break;case"content-type":ke=We[2].trim();break;case"content-transfer-encoding":Te=We[2].trim();break}}switch(++tt,Te.toLowerCase()){case"base64":qe=Jo(al(Ne.slice(tt).join("")));break;case"quoted-printable":qe=Wn(Ne.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Ye=sn(fe,_e.slice(Ee.length),qe,{unsafe:!0});ke&&(Ye.ctype=ke)}function Ss(fe,Ne){if(G(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Ne&&Ne.root||"",_e=(Xr&&Buffer.isBuffer(fe)?fe.toString("binary"):G(fe)).split(`\r
`),Te=0,ke="";for(Te=0;Te<_e.length;++Te)if(ke=_e[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ee||(Ee=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),ke.slice(0,Ee.length)!=Ee););var qe=(_e[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var tt="--"+(qe[1]||""),He=[],We=[],Ye={FileIndex:He,FullPaths:We};C(Ye);var yt,Bt=0;for(Te=0;Te<_e.length;++Te){var Pt=_e[Te];Pt!==tt&&Pt!==tt+"--"||(Bt++&&ba(Ye,_e.slice(yt,Te),Ee),yt=Te)}return Ye}function Ht(fe,Ne){var Ee=Ne||{},_e=Ee.boundary||"SheetJS";_e="------="+_e;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],ke=fe.FullPaths[0],qe=ke,tt=fe.FileIndex[0],He=1;He<fe.FullPaths.length;++He)if(qe=fe.FullPaths[He].slice(ke.length),tt=fe.FileIndex[He],!(!tt.size||!tt.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ar){return"_x"+Ar.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ar){return"_u"+Ar.charCodeAt(0).toString(16)+"_"});for(var We=tt.content,Ye=Xr&&Buffer.isBuffer(We)?We.toString("binary"):G(We),yt=0,Bt=Math.min(1024,Ye.length),Pt=0,Tt=0;Tt<=Bt;++Tt)(Pt=Ye.charCodeAt(Tt))>=32&&Pt<128&&++yt;var Rt=yt>=Bt*4/5;Te.push(_e),Te.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+qe),Te.push("Content-Transfer-Encoding: "+(Rt?"quoted-printable":"base64")),Te.push("Content-Type: "+rr(tt,qe)),Te.push(""),Te.push(Rt?As(Ye):zr(Ye))}return Te.push(_e+`--\r
`),Te.join(`\r
`)}function hn(fe){var Ne={};return C(Ne,fe),Ne}function sn(fe,Ne,Ee,_e){var Te=_e&&_e.unsafe;Te||C(fe);var ke=!Te&&cr.find(fe,Ne);if(!ke){var qe=fe.FullPaths[0];Ne.slice(0,qe.length)==qe?qe=Ne:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Ne).replace("//","/")),ke={name:a(Ne),type:2},fe.FileIndex.push(ke),fe.FullPaths.push(qe),Te||cr.utils.cfb_gc(fe)}return ke.content=Ee,ke.size=Ee?Ee.length:0,_e&&(_e.CLSID&&(ke.clsid=_e.CLSID),_e.mt&&(ke.mt=_e.mt),_e.ct&&(ke.ct=_e.ct)),ke}function Fn(fe,Ne){C(fe);var Ee=cr.find(fe,Ne);if(Ee){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Ee)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function Mn(fe,Ne,Ee){C(fe);var _e=cr.find(fe,Ne);if(_e){for(var Te=0;Te<fe.FileIndex.length;++Te)if(fe.FileIndex[Te]==_e)return fe.FileIndex[Te].name=a(Ee),fe.FullPaths[Te]=Ee,!0}return!1}function $n(fe){N(fe,!0)}return e.find=L,e.read=D,e.parse=d,e.write=K,e.writeFile=ae,e.utils={cfb_new:hn,cfb_add:sn,cfb_del:Fn,cfb_mov:Mn,cfb_gc:$n,ReadShift:Lg,CheckField:_P,prep_blob:ui,bconcat:$s,use_zlib:O,_deflateRaw:Ft,_inflateRaw:Ir,consts:ee},e}();function kle(t){return typeof t=="string"?kw(t):Array.isArray(t)?rle(t):t}function Kx(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=kw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Cu(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([kle(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ef(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Ile(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ga(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function UF(t,e){for(var r=[],n=Ga(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function Fw(t){for(var e=[],r=Ga(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Dw(t){for(var e=[],r=Ga(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Fle(t){for(var e=[],r=Ga(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var fy=new Date(1899,11,30,0,0,0);function Us(t,e){var r=t.getTime(),n=fy.getTime()+(t.getTimezoneOffset()-fy.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var aP=new Date,Dle=fy.getTime()+(aP.getTimezoneOffset()-fy.getTimezoneOffset())*6e4,MF=aP.getTimezoneOffset();function Rw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Dle),e.getTimezoneOffset()!==MF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-MF)*6e4),e}function Rle(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var PF=new Date("2017-02-19T19:06:09.000Z"),sP=isNaN(PF.getFullYear())?new Date("2/19/17"):PF,Lle=sP.getFullYear()==2017;function ha(t,e){var r=new Date(t);if(Lle)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(sP.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Sh(t,e){if(Xr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Cu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Cu(qM(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Cu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Cu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ma(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ma(t[r]));return e}function Qa(t,e){for(var r="";r.length<e;)r+=t;return r}function Bc(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Ule=["january","february","march","april","may","june","july","august","september","october","november","december"];function Im(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ule.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Mle=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function iP(t){return t?t.content&&t.type?Sh(t.content,!0):t.data?dg(t.data):t.asNodeBuffer&&Xr?dg(t.asNodeBuffer().toString("binary")):t.asBinary?dg(t.asBinary()):t._data&&t._data.getContent?dg(Sh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function oP(t){if(!t)return null;if(t.data)return SF(t.data);if(t.asNodeBuffer&&Xr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?SF(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Ple(t){return t&&t.name.slice(-4)===".bin"?oP(t):iP(t)}function Rl(t,e){for(var r=t.FullPaths||Ga(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function x4(t,e){var r=Rl(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function ys(t,e,r){if(!r)return Ple(x4(t,e));if(!e)return null;try{return ys(t,e)}catch{return null}}function Zo(t,e,r){if(!r)return iP(x4(t,e));if(!e)return null;try{return Zo(t,e)}catch{return null}}function jle(t,e,r){return oP(x4(t,e))}function jF(t){for(var e=t.FullPaths||Ga(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Vr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Xr?n=HA(r):n=nle(r),cr.utils.cfb_add(t,e,n)}cr.utils.cfb_add(t,e,r)}else t.file(e,r)}function v4(){return cr.utils.cfb_new()}function lP(t,e){switch(e.type){case"base64":return cr.read(t,{type:"base64"});case"binary":return cr.read(t,{type:"binary"});case"buffer":case"array":return cr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function hg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var cs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ole=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,OF=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Qle=/<[^>]*>/g,Ki=cs.match(OF)?OF:Qle,Hle=/<\w*:/,Vle=/<(\/?)\w+:/;function Tr(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(Ole),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],s=0;s!=h.length&&h.charCodeAt(s)!==61;++s);for(d=h.slice(0,s).trim();h.charCodeAt(s+1)==32;)++s;for(m=(a=h.charCodeAt(s+1))==34||a==39?1:0,l=h.slice(s+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function Lu(t){return t.replace(Vle,"<$1")}var cP={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},y4=Fw(cP),bn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(o,l){return cP[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),w4=/[&<>'"]/g,zle=/[\u0000-\u0008\u000b-\u001f]/g;function Gn(t){var e=t+"";return e.replace(w4,function(r){return y4[r]}).replace(zle,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function QF(t){return Gn(t).replace(/ /g,"_x0020_")}var uP=/[\u0000-\u001f]/g;function b4(t){var e=t+"";return e.replace(w4,function(r){return y4[r]}).replace(/\n/g,"<br/>").replace(uP,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Gle(t){var e=t+"";return e.replace(w4,function(r){return y4[r]}).replace(uP,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var HF=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function qle(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function da(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function tE(t){for(var e="",r=0,n=0,a=0,s=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function VF(t){var e=pf(2*t.length),r,n,a=1,s=0,i=0,o;for(n=0;n<t.length;n+=a)a=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function zF(t){return HA(t,"binary").toString("utf8")}var yv="foo bar bazâð£",ra=Xr&&(zF(yv)==tE(yv)&&zF||VF(yv)==tE(yv)&&VF)||tE,Cu=Xr?function(t){return HA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},lx=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),AP=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Kle=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Wle=/<\/?(?:vt:)?variant>/g,$le=/<(?:vt:)([^>]*)>([\s\S]*)</;function GF(t,e){var r=Tr(t),n=t.match(Kle(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(Wle,"").match($le);i&&a.push({v:ra(i[2]),t:i[1]})}),a}var dP=/(^\s|\s$|\n)/;function di(t,e){return"<"+t+(e.match(dP)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function cx(t){return Ga(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Lt(t,e,r){return"<"+t+(r!=null?cx(r):"")+(e!=null?(e.match(dP)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function t5(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Xle(t,e){switch(typeof t){case"string":var r=Lt("vt:lpwstr",Gn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Lt((t|0)==t?"vt:i4":"vt:r8",Gn(String(t)));case"boolean":return Lt("vt:bool",t?"true":"false")}if(t instanceof Date)return Lt("vt:filetime",t5(t));throw new Error("Unable to serialize "+t)}function C4(t){if(Xr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ra(Ef(m4(t)));throw new Error("Bad input format: expected Buffer or string")}var ux=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Rs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},jh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Xo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Yle(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Jle(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)t[r+o]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var qF=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},KF=Xr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:HA(e)})):qF(t)}:qF,WF=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(bA(t,a)));return n.join("").replace(no,"")},E4=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(no,""):WF(t,e,r)}:WF,$F=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},fP=Xr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):$F(t,e,r)}:$F,XF=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(z0(t,a)));return n.join("")},Wx=Xr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):XF(e,r,n)}:XF,hP=function(t,e){var r=Yo(t,e);return r>0?Wx(t,e+4,e+4+r-1):""},mP=hP,pP=function(t,e){var r=Yo(t,e);return r>0?Wx(t,e+4,e+4+r-1):""},gP=pP,xP=function(t,e){var r=2*Yo(t,e);return r>0?Wx(t,e+4,e+4+r-1):""},vP=xP,yP=function(e,r){var n=Yo(e,r);return n>0?E4(e,r+4,r+4+n):""},wP=yP,bP=function(t,e){var r=Yo(t,e);return r>0?Wx(t,e+4,e+4+r):""},CP=bP,EP=function(t,e){return Yle(t,e)},hy=EP,_4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Xr&&(mP=function(e,r){if(!Buffer.isBuffer(e))return hP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},gP=function(e,r){if(!Buffer.isBuffer(e))return pP(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},vP=function(e,r){if(!Buffer.isBuffer(e))return xP(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},wP=function(e,r){if(!Buffer.isBuffer(e))return yP(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},CP=function(e,r){if(!Buffer.isBuffer(e))return bP(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},hy=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):EP(e,r)},_4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var z0=function(t,e){return t[e]},bA=function(t,e){return t[e+1]*256+t[e]},Zle=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Yo=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},nh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},ece=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Lg(t,e){var r="",n,a,s=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,Xr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(bA(this,u)),u+=2;t*=2;break;case"utf8":r=Wx(this,this.l,this.l+t);break;case"utf16le":t*=2,r=E4(this,this.l,this.l+t);break;case"wstr":return Lg.call(this,t,"dbcs");case"lpstr-ansi":r=mP(this,this.l),t=4+Yo(this,this.l);break;case"lpstr-cp":r=gP(this,this.l),t=4+Yo(this,this.l);break;case"lpwstr":r=vP(this,this.l),t=4+2*Yo(this,this.l);break;case"lpp4":t=4+Yo(this,this.l),r=wP(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Yo(this,this.l),r=CP(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=z0(this,this.l+t++))!==0;)s.push(vv(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=bA(this,this.l+t))!==0;)s.push(vv(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=z0(this,u),this.l=u+1,o=Lg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(vv(bA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=z0(this,u),this.l=u+1,o=Lg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(vv(z0(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=z0(this,this.l),this.l++,n;case 2:return n=(e==="i"?Zle:bA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?nh:ece)(this,this.l),this.l+=4,n):(a=Yo(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=hy(this,this.l):a=hy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=fP(this,this.l,t);break}}return this.l+=t,r}var tce=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},rce=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},nce=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function ace(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)nce(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,tce(this,e,this.l);break;case 8:if(n=8,r==="f"){Jle(this,e,this.l);break}case 16:break;case-4:n=4,rce(this,e,this.l);break}return this.l+=n,this}function _P(t,e){var r=fP(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function ui(t,e){t.l=e,t.read_shift=Lg,t.chk=_P,t.write_shift=ace}function Gi(t,e){t.l+=e}function lt(t){var e=pf(t);return ui(e,0),e}function VA(t,e,r){if(t){var n,a,s;ui(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=px[o]||px[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;l=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=l,e(d,u,o))return}}}function So(){var t=[],e=Xr?256:2048,r=function(u){var d=lt(u);return ui(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),$s(t)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:i,_bufs:t}}function Ct(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=px[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&_4(r)&&t.push(r)}}function Ug(t,e,r){var n=ma(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function YF(t,e,r){var n=ma(t);return n.s=Ug(n.s,e.s,r),n.e=Ug(n.e,e.s,r),n}function Mg(t,e){if(t.cRel&&t.c<0)for(t=ma(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ma(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Cr(t);return!t.cRel&&t.cRel!=null&&(r=oce(r)),!t.rRel&&t.rRel!=null&&(r=sce(r)),r}function rE(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ba(t.s.c)+":"+(t.e.cRel?"":"$")+Ba(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+os(t.s.r)+":"+(t.e.rRel?"":"$")+os(t.e.r):Mg(t.s,e.biff)+":"+Mg(t.e,e.biff)}function S4(t){return parseInt(ice(t),10)-1}function os(t){return""+(t+1)}function sce(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ice(t){return t.replace(/\$(\d+)$/,"$1")}function T4(t){for(var e=lce(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ba(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function oce(t){return t.replace(/^([A-Z])/,"$$$1")}function lce(t){return t.replace(/^\$([A-Z])/,"$1")}function cce(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Na(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Cr(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Bo(t){var e=t.indexOf(":");return e==-1?{s:Na(t),e:Na(t)}:{s:Na(t.slice(0,e)),e:Na(t.slice(e+1))}}function Mr(t,e){return typeof e>"u"||typeof e=="number"?Mr(t.s,t.e):(typeof t!="string"&&(t=Cr(t)),typeof e!="string"&&(e=Cr(e)),t==e?t:t+":"+e)}function Cn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function JF(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=ql(t.z,r?Us(e):e)}catch{}try{return t.w=ql((t.XF||{}).numFmtId||(r?14:0),r?Us(e):e)}catch{return""+e}}function RA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?zA[t.v]||t.v:e==null?JF(t,t.v):JF(t,e))}function _f(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function SP(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Na(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Cn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,y=o+m;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||vr[14],n.cellDates?(g.t="d",g.w=ql(g.z,Us(g.v))):(g.t="n",g.v=Us(g.v),g.w=ql(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][y]&&s[b][y].z&&(g.z=s[b][y].z),s[b][y]=g;else{var E=Cr({c:y,r:b});s[E]&&s[E].z&&(g.z=s[E].z),s[E]=g}}}return u.s.c<1e7&&(s["!ref"]=Mr(u)),s}function ep(t,e){return SP(null,t,e)}function uce(t){return t.read_shift(4,"i")}function Nc(t,e){return e||(e=lt(4)),e.write_shift(4,t),e}function Vi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Xs(t,e){var r=!1;return e==null&&(r=!0,e=lt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function Ace(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function dce(t,e){return e||(e=lt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function B4(t,e){var r=t.l,n=t.read_shift(1),a=Vi(t),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)s.push(Ace(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function fce(t,e){var r=!1;return e==null&&(r=!0,e=lt(15+4*t.t.length)),e.write_shift(1,0),Xs(t.t,e),r?e.slice(0,e.l):e}var hce=B4;function mce(t,e){var r=!1;return e==null&&(r=!0,e=lt(23+4*t.t.length)),e.write_shift(1,1),Xs(t.t,e),e.write_shift(4,1),dce({},e),r?e.slice(0,e.l):e}function Kl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Oh(t,e){return e==null&&(e=lt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Qh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Hh(t,e){return e==null&&(e=lt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var pce=Vi,TP=Xs;function N4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function my(t,e){var r=!1;return e==null&&(r=!0,e=lt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var gce=Vi,r5=N4,k4=my;function I4(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?hy([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):nh(e,0)>>2;return r?a/100:a}function BP(t,e){e==null&&(e=lt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function NP(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function xce(t,e){return e||(e=lt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Vh=NP,tp=xce;function Qi(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Th(t,e){return(e||lt(8)).write_shift(8,t,"f")}function vce(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=fh[a];u&&(e.rgb=dx(u));break;case 2:e.rgb=dx([i,o,l]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function py(t,e){if(e||(e=lt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function yce(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function wce(t,e){e||(e=lt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function kP(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function bce(t){return kP(t,1)}function Cce(t){return kP(t,2)}var F4=2,wo=3,wv=11,ZF=12,gy=19,bv=64,Ece=65,_ce=71,Sce=4108,Tce=4126,Ks=80,IP=81,Bce=[Ks,IP],n5={1:{n:"CodePage",t:F4},2:{n:"Category",t:Ks},3:{n:"PresentationFormat",t:Ks},4:{n:"ByteCount",t:wo},5:{n:"LineCount",t:wo},6:{n:"ParagraphCount",t:wo},7:{n:"SlideCount",t:wo},8:{n:"NoteCount",t:wo},9:{n:"HiddenCount",t:wo},10:{n:"MultimediaClipCount",t:wo},11:{n:"ScaleCrop",t:wv},12:{n:"HeadingPairs",t:Sce},13:{n:"TitlesOfParts",t:Tce},14:{n:"Manager",t:Ks},15:{n:"Company",t:Ks},16:{n:"LinksUpToDate",t:wv},17:{n:"CharacterCount",t:wo},19:{n:"SharedDoc",t:wv},22:{n:"HyperlinksChanged",t:wv},23:{n:"AppVersion",t:wo,p:"version"},24:{n:"DigSig",t:Ece},26:{n:"ContentType",t:Ks},27:{n:"ContentStatus",t:Ks},28:{n:"Language",t:Ks},29:{n:"Version",t:Ks},255:{},2147483648:{n:"Locale",t:gy},2147483651:{n:"Behavior",t:gy},1919054434:{}},a5={1:{n:"CodePage",t:F4},2:{n:"Title",t:Ks},3:{n:"Subject",t:Ks},4:{n:"Author",t:Ks},5:{n:"Keywords",t:Ks},6:{n:"Comments",t:Ks},7:{n:"Template",t:Ks},8:{n:"LastAuthor",t:Ks},9:{n:"RevNumber",t:Ks},10:{n:"EditTime",t:bv},11:{n:"LastPrinted",t:bv},12:{n:"CreatedDate",t:bv},13:{n:"ModifiedDate",t:bv},14:{n:"PageCount",t:wo},15:{n:"WordCount",t:wo},16:{n:"CharCount",t:wo},17:{n:"Thumbnail",t:_ce},18:{n:"Application",t:Ks},19:{n:"DocSecurity",t:wo},255:{},2147483648:{n:"Locale",t:gy},2147483651:{n:"Behavior",t:gy},1919054434:{}},e6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Nce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function kce(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Ice=kce([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),fh=ma(Ice),zA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},FP={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},s5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Cv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function D4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Fce(t){var e=D4();if(!t||!t.match)return e;var r={};if((t.match(Ki)||[]).forEach(function(n){var a=Tr(n);switch(a[0].replace(Hle,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[s5[a.ContentType]]!==void 0&&e[s5[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Rs.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function DP(t,e){var r=Fle(s5),n=[],a;n[n.length]=cs,n[n.length]=Lt("Types",null,{xmlns:Rs.CT,"xmlns:xsd":Rs.xsd,"xmlns:xsi":Rs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Lt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(a=t[l][0],n[n.length]=Lt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Cv[l][e.bookType]||Cv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Lt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Cv[l][e.bookType]||Cv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Lt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var rn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ax(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Pg(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ki)||[]).forEach(function(a){var s=Tr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:hg(s.Target,e);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function fm(t){var e=[cs,Lt("Relationships",null,{xmlns:Rs.RELS})];return Ga(t["!id"]).forEach(function(r){e[e.length]=Lt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Vn(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[rn.HLINK,rn.XPATH,rn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var Dce="application/vnd.oasis.opendocument.spreadsheet";function Rce(t,e){for(var r=C4(t),n,a;n=ux.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Tr(n[0],!1),a.path=="/"&&a.type!==Dce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Lce(t){var e=[cs];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function t6(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Uce(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Mce(t){var e=[cs];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(t6(t[r][0],t[r][1])),e.push(Uce("",t[r][0]));return e.push(t6("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function RP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cy.version+"</meta:generator></office:meta></office:document-meta>"}var zl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Pce=function(){for(var t=new Array(zl.length),e=0;e<zl.length;++e){var r=zl[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function LP(t){var e={};t=ra(t);for(var r=0;r<zl.length;++r){var n=zl[r],a=t.match(Pce[r]);a!=null&&a.length>0&&(e[n[1]]=bn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=ha(e[n[1]]))}return e}function nE(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Gn(e),n[n.length]=r?Lt(t,e,r):di(t,e))}function UP(t,e){var r=e||{},n=[cs,Lt("cp:coreProperties",null,{"xmlns:cp":Rs.CORE_PROPS,"xmlns:dc":Rs.dc,"xmlns:dcterms":Rs.dcterms,"xmlns:dcmitype":Rs.dcmitype,"xmlns:xsi":Rs.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&nE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:t5(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&nE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:t5(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=zl.length;++s){var i=zl[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&nE(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var hh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],MP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function PP(t,e,r,n){var a=[];if(typeof t=="string")a=GF(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?GF(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function jce(t,e,r){var n={};return e||(e={}),t=ra(t),hh.forEach(function(a){var s=(t.match(lx(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=bn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&PP(n.HeadingPairs,n.TitlesOfParts,e,r),e}function jP(t){var e=[],r=Lt;return t||(t={}),t.Application="SheetJS",e[e.length]=cs,e[e.length]=Lt("Properties",null,{xmlns:Rs.EXT_PROPS,"xmlns:vt":Rs.vt}),hh.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Gn(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Gn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Oce=/<[^>]+>[^<]*/g;function Qce(t,e){var r={},n="",a=t.match(Oce);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Tr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=bn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=bn(d);break;case"bool":r[n]=da(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ha(d);break;case"cy":case"error":r[n]=bn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function OP(t){var e=[cs,Lt("Properties",null,{xmlns:Rs.CUST_PROPS,"xmlns:vt":Rs.vt})];if(!t)return e.join("");var r=1;return Ga(t).forEach(function(a){++r,e[e.length]=Lt("property",Xle(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Gn(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var i5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},aE;function Hce(t,e,r){aE||(aE=Fw(i5)),e=aE[e]||e,t[e]=r}function Vce(t,e){var r=[];return Ga(i5).map(function(n){for(var a=0;a<zl.length;++a)if(zl[a][1]==n)return zl[a];for(a=0;a<hh.length;++a)if(hh[a][1]==n)return hh[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(di(i5[n[1]]||n[1],a))}}),Lt("DocumentProperties",r.join(""),{xmlns:Xo.o})}function zce(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Ga(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<zl.length;++i)if(s==zl[i][1])return;for(i=0;i<hh.length;++i)if(s==hh[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),a.push(Lt(QF(s),o,{"dt:dt":l}))}}),e&&Ga(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Lt(QF(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Xo.o+'">'+a.join("")+"</"+n+">"}function R4(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Gce(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=lt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function QP(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function HP(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function VP(t,e,r){return e===31?HP(t):QP(t,e,r)}function o5(t,e,r){return VP(t,e,r===!1?0:4)}function qce(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return VP(t,e,0)}function Kce(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(no,""),t.l-a&2&&(t.l+=2)}return r}function Wce(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(no,"");return r}function $ce(t){var e=t.l,r=xy(t,IP);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=xy(t,wo);return[r,n]}function Xce(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push($ce(t));return r}function r6(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(no,"").replace(fg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function zP(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function Yce(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function xy(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==ZF&&n!==e&&Bce.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===ZF?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return QP(t,n,4).replace(no,"");case 31:return HP(t);case 64:return R4(t);case 65:return zP(t);case 71:return Yce(t);case 80:return o5(t,n,!s.raw).replace(no,"");case 81:return qce(t,n).replace(no,"");case 4108:return Xce(t);case 4126:case 4127:return n==4127?Kce(t):Wce(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function n6(t,e){var r=lt(4),n=lt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=lt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Gce(e);break;case 31:case 80:for(n=lt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return $s([r,n])}function a6(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,o=0,l=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),h=t.read_shift(4);s[i]=[d,h+r]}s.sort(function(k,F){return k[1]-F[1]});var m={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var g=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],g=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(g=!1,t.l=s[i][1]),g)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[s[i][0]];if(m[b.n]=xy(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Sc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(s[i][0]===1){if(o=m.CodePage=xy(t,F4),Sc(o),l!==-1){var y=t.l;t.l=s[l][1],u=r6(t,o),t.l=y}}else if(s[i][0]===0){if(o===0){l=i,t.l=s[i+1][1];continue}u=r6(t,o)}else{var E=u[s[i][0]],B;switch(t[t.l]){case 65:t.l+=4,B=zP(t);break;case 30:t.l+=4,B=o5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,B=o5(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,B=t.read_shift(4,"i");break;case 19:t.l+=4,B=t.read_shift(4);break;case 5:t.l+=4,B=t.read_shift(8,"f");break;case 11:t.l+=4,B=es(t,4);break;case 64:t.l+=4,B=ha(R4(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[E]=B}}return t.l=r+n,m}var GP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Jce(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function s6(t,e,r){var n=lt(8),a=[],s=[],i=8,o=0,l=lt(8),u=lt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),a.push(u),i+=8+l.length,!e){u=lt(8),u.write_shift(4,0),a.unshift(u);var d=[lt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=lt(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=$s(d),s.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(GP.indexOf(t[o][0])>-1||MP.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof m=="string"){var y=m.split(".");m=(+y[0]<<16)+(+y[1]||0)}l=n6(b.t,m)}else{var E=Jce(m);E==-1&&(E=31,m=String(m)),l=n6(E,m)}s.push(l),u=lt(8),u.write_shift(4,e?g:2+o),a.push(u),i+=8+l.length}var B=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,B),B+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),$s([n].concat(a).concat(s))}function i6(t,e,r){var n=t.content;if(!n)return{};ui(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==cr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=a6(n,e),m={SystemIdentifier:u};for(var g in h)m[g]=h[g];if(m.FMTID=s,a===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var b;try{b=a6(n,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[s,i],m}function o6(t,e,r,n,a,s){var i=lt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,cr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var l=s6(t,r,n);if(o.push(l),a){var u=s6(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(u)}return $s(o)}function Bd(t,e){return t.read_shift(e),null}function Zce(t,e){e||(e=lt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function eue(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function es(t,e){return t.read_shift(e)===1}function eo(t,e){return e||(e=lt(2)),e.write_shift(2,+!!t),e}function ws(t){return t.read_shift(2,"u")}function Ul(t,e){return e||(e=lt(2)),e.write_shift(2,t),e}function qP(t,e){return eue(t,e,ws)}function tue(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function KP(t,e,r){return r||(r=lt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function $x(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function rue(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,l={};a&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=o),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function nue(t){var e=t.t||"",r=lt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=lt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return $s(a)}function Bh(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Xx(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Bh(t,n,r)}function zh(t,e,r){if(r.biff>5)return Xx(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function WP(t,e,r){return r||(r=lt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function aue(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function sue(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(no,"");return n&&(t.l+=24),a}function iue(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(no,"");return r+i}function oue(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return sue(t);case"0303000000000000c000000000000046":return iue(t);default:throw new Error("Unsupported Moniker "+r)}}function Ev(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(no,""):"";return r}function l6(t,e){e||(e=lt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function lue(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,o,l,u="",d,h;a&16&&(s=Ev(t,r-t.l)),a&128&&(i=Ev(t,r-t.l)),(a&257)===257&&(o=Ev(t,r-t.l)),(a&257)===1&&(l=oue(t,r-t.l)),a&8&&(u=Ev(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(h=R4(t)),t.l=r;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),a&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),s&&(g.Tooltip=s),g}function cue(t){var e=lt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),l6(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),s&8&&l6(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function $P(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function XP(t,e){var r=$P(t);return r[3]=0,r}function Uu(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Nh(t,e,r,n){return n||(n=lt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function uue(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function Aue(t,e,r){return e===0?"":zh(t,e,r)}function due(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function YP(t){var e=t.read_shift(2),r=I4(t);return[e,r]}function fue(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=$x(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function Lw(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function JP(t,e){return e||(e=lt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function ZP(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var hue=ZP;function ej(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function mue(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function pue(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Fi(t){t.l+=2,t.l+=t.read_shift(2)}var gue={0:Fi,4:Fi,5:Fi,6:Fi,7:pue,8:Fi,9:Fi,10:Fi,11:Fi,12:Fi,13:mue,14:Fi,15:Fi,16:Fi,17:Fi,18:Fi,19:Fi,20:Fi,21:ej};function xue(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(gue[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function _v(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function L4(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=lt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function vue(t,e){return e===0||t.read_shift(2),1200}function yue(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=zh(t,0,r);return t.read_shift(e+n-t.l),a}function wue(t,e){var r=!e||e.biff==8,n=lt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function bue(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Cue(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=$x(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Eue(t,e){var r=!e||e.biff>=8?2:1,n=lt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function _ue(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(rue(t));return s.Count=n,s.Unique=a,s}function Sue(t,e){var r=lt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=nue(t[a]);var s=$s([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function Tue(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Bue(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Nue(t){var e=uue(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function kue(t){return t.read_shift(2),t.read_shift(4)}function c6(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Iue(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Fue(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Due(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Rue(t){var e=lt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Lue(){}function Uue(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=$x(t,0,r),n}function Mue(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=lt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Pue(t){var e=Uu(t);return e.isst=t.read_shift(4),e}function jue(t,e,r,n){var a=lt(10);return Nh(t,e,n,a),a.write_shift(4,r),a}function Oue(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Uu(t);r.biff==2&&t.l++;var s=Xx(t,n-t.l,r);return a.val=s,a}function Que(t,e,r,n,a){var s=!a||a.biff==8,i=lt(8+ +s+(1+s)*r.length);return Nh(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function Hue(t,e,r){var n=t.read_shift(2),a=zh(t,0,r);return[n,a]}function Vue(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var zue=zh;function u6(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function Gue(t,e){var r=e.biff==8||!e.biff?4:2,n=lt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function que(t){var e=t.read_shift(2),r=t.read_shift(2),n=YP(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Kue(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(YP(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function Wue(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function $ue(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return a.patternType=Nce[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function Xue(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=$ue(t,e,n.fStyle,r),n}function A6(t,e,r,n){var a=r&&r.biff==5;n||(n=lt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Yue(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Jue(t){var e=lt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function d6(t,e,r){var n=Uu(t);(r.biff==2||e==9)&&++t.l;var a=tue(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function Zue(t,e,r,n,a,s){var i=lt(8);return Nh(t,e,n,i),KP(r,s,i),i}function eAe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Uu(t),a=Qi(t);return n.val=a,n}function tAe(t,e,r,n){var a=lt(14);return Nh(t,e,n,a),Th(r,a),a}var f6=Aue;function rAe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Bh(t,s),o=[];n>t.l;)o.push(Xx(t));return[s,a,i,o]}function h6(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=fue(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var nAe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function m6(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Bh(t,i,r);a&32&&(u=nAe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:x0e(t,d,r,o);return{chKey:s,Name:u,itab:l,rgce:h}}function tj(t,e,r){if(r.biff<8)return aAe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(due(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function aAe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=$x(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function sAe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Bh(t,n,r),i=Bh(t,a,r);return[s,i]}function iAe(t,e,r){var n=ZP(t);t.l++;var a=t.read_shift(1);return e-=8,[v0e(t,e,r),a,n]}function p6(t,e,r){var n=hue(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,p0e(t,e,r)]}function oAe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function lAe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=zh(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},o,i,s]}}function cAe(t,e,r){return lAe(t,e,r)}function uAe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Lw(t));return r}function AAe(t){var e=lt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)JP(t[r],e);return e}function dAe(t,e,r){if(r&&r.biff<8)return hAe(t,e,r);var n=ej(t),a=xue(t,e-22,n[1]);return{cmo:n,ft:a}}var fAe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function hAe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((fAe[n]||Gi)(t,e,r)),{cmo:[a,n,s],ft:i}}function mAe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=aue(t,6,r);var o=t.read_shift(2);t.read_shift(2),ws(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=Bh(t,t.lens[u+1]-t.lens[u]-1);if(a+=h,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function pAe(t,e){var r=Lw(t);t.l+=16;var n=lue(t,e-24);return[r,n]}function gAe(t){var e=lt(24),r=Na(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return $s([e,cue(t[1])])}function xAe(t,e){t.read_shift(2);var r=Lw(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(no,""),[r,n]}function vAe(t){var e=t[1].Tooltip,r=lt(10+2*(e.length+1));r.write_shift(2,2048);var n=Na(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function yAe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=e6[r]||r,r=t.read_shift(2),e[1]=e6[r]||r,e}function wAe(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function bAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(XP(t));return r}function CAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(XP(t));return r}function EAe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function rj(t,e,r){if(!r.cellStyles)return Gi(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function _Ae(t,e){var r=lt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function SAe(t,e){var r={};return e<32||(t.l+=16,r.header=Qi(t),r.footer=Qi(t),t.l+=2),r}function TAe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function BAe(t){for(var e=lt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var NAe=Uu,kAe=qP,IAe=Xx;function FAe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function DAe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Uu(t);++t.l;var a=zh(t,e-7,r);return n.t="str",n.val=a,n}function RAe(t){var e=Uu(t);++t.l;var r=Qi(t);return e.t="n",e.val=r,e}function LAe(t,e,r){var n=lt(15);return e1(n,t,e),n.write_shift(8,r,"f"),n}function UAe(t){var e=Uu(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function MAe(t,e,r){var n=lt(9);return e1(n,t,e),n.write_shift(2,r),n}function PAe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function jAe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function OAe(t,e,r){var n=t.l+e,a=Uu(t),s=t.read_shift(2),i=Bh(t,s,r);return t.l=n,a.t="str",a.val=i,a}var QAe=[2,3,48,49,131,139,140,245],l5=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Fw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=pf(1);switch(l.type){case"base64":d=Jo(al(o));break;case"binary":d=Jo(o);break;case"buffer":case"array":d=o;break}ui(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var y=0,E=521;h==2&&(y=d.read_shift(2)),d.l+=3,h!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),h!=2&&(E=d.read_shift(2));var B=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var F=[],U={},P=Math.min(d.length,h==2?521:E-10-(g?264:0)),D=b?32:11;d.l<P&&d[d.l]!=13;)switch(U={},U.name=sx.utils.decode(k,d.slice(d.l,d.l+D)).replace(/[\u0000\r\n].*$/g,""),d.l+=D,U.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(U.offset=d.read_shift(4)),U.len=d.read_shift(1),h==2&&(U.offset=d.read_shift(2)),U.dec=d.read_shift(1),U.name.length&&F.push(U),h!=2&&(d.l+=b?13:14),U.type){case"B":(!g||U.len!=8)&&l.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+U.type)}if(d[d.l]!==13&&(d.l=E-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=E;var C=0,S=0;for(u[0]=[],S=0;S!=F.length;++S)u[0][S]=F[S].name;for(;y-- >0;){if(d[d.l]===42){d.l+=B;continue}for(++d.l,u[++C]=[],S=0,S=0;S!=F.length;++S){var N=d.slice(d.l,d.l+F[S].len);d.l+=F[S].len,ui(N,0);var H=sx.utils.decode(k,N);switch(F[S].type){case"C":H.trim().length&&(u[C][S]=H.replace(/\s+$/,""));break;case"D":H.length===8?u[C][S]=new Date(+H.slice(0,4),+H.slice(4,6)-1,+H.slice(6,8)):u[C][S]=H;break;case"F":u[C][S]=parseFloat(H.trim());break;case"+":case"I":u[C][S]=b?N.read_shift(-4,"i")^2147483648:N.read_shift(4,"i");break;case"L":switch(H.trim().toUpperCase()){case"Y":case"T":u[C][S]=!0;break;case"N":case"F":u[C][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+H+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[C][S]="##MEMO##"+(b?parseInt(H.trim(),10):N.read_shift(4));break;case"N":H=H.replace(/\u0000/g,"").trim(),H&&H!="."&&(u[C][S]=+H||0);break;case"@":u[C][S]=new Date(N.read_shift(-8,"f")-621356832e5);break;case"T":u[C][S]=new Date((N.read_shift(4)-2440588)*864e5+N.read_shift(4));break;case"Y":u[C][S]=N.read_shift(4,"i")/1e4+N.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][S]=-N.read_shift(-8,"f");break;case"B":if(g&&F[S].len==8){u[C][S]=N.read_shift(8,"f");break}case"G":case"P":N.l+=F[S].len;break;case"0":if(F[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+F[S].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=F,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ep(r(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function a(o,l){try{return _f(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Sc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=So(),h=wy(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],y=0,E=0,B=0,k=1;for(y=0;y<m.length;++y){if(((b[y]||{}).DBF||{}).name){m[y]=b[y].DBF.name,++B;continue}if(m[y]!=null){if(++B,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(E=0;E<1024;++E)if(m.indexOf(m[y]+"_"+E)==-1){m[y]+="_"+E;break}}}}var F=Cn(o["!ref"]),U=[],P=[],D=[];for(y=0;y<=F.e.c-F.s.c;++y){var C="",S="",N=0,H=[];for(E=0;E<g.length;++E)g[E][y]!=null&&H.push(g[E][y]);if(H.length==0||m[y]==null){U[y]="?";continue}for(E=0;E<H.length;++E){switch(typeof H[E]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=H[E]instanceof Date?"D":"C";break;default:S="C"}N=Math.max(N,String(H[E]).length),C=C&&C!=S?"C":S}N>250&&(N=250),S=((b[y]||{}).DBF||{}).type,S=="C"&&b[y].DBF.len>N&&(N=b[y].DBF.len),C=="B"&&S=="N"&&(C="N",D[y]=b[y].DBF.dec,N=b[y].DBF.len),P[y]=C=="C"||S=="N"?N:s[C]||0,k+=P[y],U[y]=C}var L=d.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*B),L.write_shift(2,k),y=0;y<4;++y)L.write_shift(4,0);for(L.write_shift(4,0|(+e[GM]||3)<<8),y=0,E=0;y<m.length;++y)if(m[y]!=null){var I=d.next(32),j=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,j,"sbcs"),I.write_shift(1,U[y]=="?"?"C":U[y],"sbcs"),I.write_shift(4,E),I.write_shift(1,P[y]||s[U[y]]||0),I.write_shift(1,D[y]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),E+=P[y]||s[U[y]]||0}var z=d.next(264);for(z.write_shift(4,13),y=0;y<65;++y)z.write_shift(4,0);for(y=0;y<g.length;++y){var ne=d.next(k);for(ne.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(U[E]){case"L":ne.write_shift(1,g[y][E]==null?63:g[y][E]?84:70);break;case"B":ne.write_shift(8,g[y][E]||0,"f");break;case"N":var Z="0";for(typeof g[y][E]=="number"&&(Z=g[y][E].toFixed(D[E]||0)),B=0;B<P[E]-Z.length;++B)ne.write_shift(1,32);ne.write_shift(1,Z,"sbcs");break;case"D":g[y][E]?(ne.write_shift(4,("0000"+g[y][E].getFullYear()).slice(-4),"sbcs"),ne.write_shift(2,("00"+(g[y][E].getMonth()+1)).slice(-2),"sbcs"),ne.write_shift(2,("00"+g[y][E].getDate()).slice(-2),"sbcs")):ne.write_shift(8,"00000000","sbcs");break;case"C":var ee=String(g[y][E]!=null?g[y][E]:"").slice(0,P[E]);for(ne.write_shift(1,ee,"sbcs"),B=0;B<P[E]-ee.length;++B)ne.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),nj=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ga(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var b=t[g];return typeof b=="number"?TF(b):b},n=function(m,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?m:TF(y)};t["|"]=254;function a(m,g){switch(g.type){case"base64":return s(al(m),g);case"binary":return s(m,g);case"buffer":return s(Xr&&Buffer.isBuffer(m)?m.toString("binary"):Ef(m),g);case"array":return s(Sh(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var b=m.split(/[\n\r]+/),y=-1,E=-1,B=0,k=0,F=[],U=[],P=null,D={},C=[],S=[],N=[],H=0,L;for(+g.codepage>=0&&Sc(+g.codepage);B!==b.length;++B){H=0;var I=b[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),j=I.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),z=j[0],ne;if(I.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&U.push(I.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,ee=!1,ae=!1,G=!1,K=-1,le=-1;for(k=1;k<j.length;++k)switch(j[k].charAt(0)){case"A":break;case"X":E=parseInt(j[k].slice(1))-1,ee=!0;break;case"Y":for(y=parseInt(j[k].slice(1))-1,ee||(E=0),L=F.length;L<=y;++L)F[L]=[];break;case"K":ne=j[k].slice(1),ne.charAt(0)==='"'?ne=ne.slice(1,ne.length-1):ne==="TRUE"?ne=!0:ne==="FALSE"?ne=!1:isNaN(Bc(ne))?isNaN(Im(ne).getDate())||(ne=ha(ne)):(ne=Bc(ne),P!==null&&Jm(P)&&(ne=Rw(ne))),Z=!0;break;case"E":G=!0;var O=hm(j[k].slice(1),{r:y,c:E});F[y][E]=[F[y][E],O];break;case"S":ae=!0,F[y][E]=[F[y][E],"S5S"];break;case"G":break;case"R":K=parseInt(j[k].slice(1))-1;break;case"C":le=parseInt(j[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}if(Z&&(F[y][E]&&F[y][E].length==2?F[y][E][0]=ne:F[y][E]=ne,P=null),ae){if(G)throw new Error("SYLK shared formula cannot have own formula");var W=K>-1&&F[K][le];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");F[y][E][1]=wj(W[1],{r:y-K,c:E-le})}break;case"F":var Y=0;for(k=1;k<j.length;++k)switch(j[k].charAt(0)){case"X":E=parseInt(j[k].slice(1))-1,++Y;break;case"Y":for(y=parseInt(j[k].slice(1))-1,L=F.length;L<=y;++L)F[L]=[];break;case"M":H=parseInt(j[k].slice(1))/20;break;case"F":break;case"G":break;case"P":P=U[parseInt(j[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(N=j[k].slice(1).split(" "),L=parseInt(N[0],10);L<=parseInt(N[1],10);++L)H=parseInt(N[2],10),S[L-1]=H===0?{hidden:!0}:{wch:H},gf(S[L-1]);break;case"C":E=parseInt(j[k].slice(1))-1,S[E]||(S[E]={});break;case"R":y=parseInt(j[k].slice(1))-1,C[y]||(C[y]={}),H>0?(C[y].hpt=H,C[y].hpx=Dm(H)):H===0&&(C[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}Y<1&&(P=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+I)}}return C.length>0&&(D["!rows"]=C),S.length>0&&(D["!cols"]=S),g&&g.sheetRows&&(F=F.slice(0,g.sheetRows)),[F,D]}function i(m,g){var b=a(m,g),y=b[0],E=b[1],B=ep(y,g);return Ga(E).forEach(function(k){B[k]=E[k]}),B}function o(m,g){return _f(i(m,g),g)}function l(m,g,b,y){var E="C;Y"+(b+1)+";X"+(y+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+Q4(m.f,{r:b,c:y}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(m,g){g.forEach(function(b,y){var E="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?E+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=fx(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=hx(b.wpx)),typeof b.wch=="number"&&(E+=Math.round(b.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function d(m,g){g.forEach(function(b,y){var E="F;";b.hidden?E+="M0;":b.hpt?E+="M"+20*b.hpt+";":b.hpx&&(E+="M"+20*mx(b.hpx)+";"),E.length>2&&m.push(E+"R"+(y+1))})}function h(m,g){var b=["ID;PWXL;N;E"],y=[],E=Cn(m["!ref"]),B,k=Array.isArray(m),F=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&u(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var U=E.s.r;U<=E.e.r;++U)for(var P=E.s.c;P<=E.e.c;++P){var D=Cr({r:U,c:P});B=k?(m[U]||[])[P]:m[D],!(!B||B.v==null&&(!B.f||B.F))&&y.push(l(B,m,U,P))}return b.join(F)+F+y.join(F)+F+"E"+F}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),aj=function(){function t(s,i){switch(i.type){case"base64":return e(al(s),i);case"binary":return e(s,i);case"buffer":return e(Xr&&Buffer.isBuffer(s)?s.toString("binary"):Ef(s),i);case"array":return e(Sh(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var o=s.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){h[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?h[l][u]=!0:y==="FALSE"?h[l][u]=!1:isNaN(Bc(b))?isNaN(Im(b).getDate())?h[l][u]=b:h[l][u]=ha(b):h[l][u]=Bc(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),h[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(s,i){return ep(t(s,i),i)}function n(s,i){return _f(r(s,i),i)}var a=function(){var s=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=Cn(l["!ref"]),h,m=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var y=Cr({r:g,c:b});if(h=m?(l[g]||[])[b]:l[y],!h){i(u,1,0,"");continue}switch(h.t){case"n":var E=h.w;!E&&h.v!=null&&(E=h.v),E==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,E,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=ql(h.z||vr[14],Us(ha(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var B=`\r
`,k=u.join(B);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),sj=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var g=h.split(`
`),b=-1,y=-1,E=0,B=[];E!==g.length;++E){var k=g[E].trim().split(":");if(k[0]==="cell"){var F=Na(k[1]);if(B.length<=F.r)for(b=B.length;b<=F.r;++b)B[b]||(B[b]=[]);switch(b=F.r,y=F.c,k[2]){case"t":B[b][y]=t(k[3]);break;case"v":B[b][y]=+k[3];break;case"vtf":var U=k[k.length-1];case"vtc":switch(k[3]){case"nl":B[b][y]=!!+k[4];break;default:B[b][y]=+k[4];break}k[2]=="vtf"&&(B[b][y]=[B[b][y],U])}}}return m&&m.sheetRows&&(B=B.slice(0,m.sheetRows)),B}function n(h,m){return ep(r(h,m),m)}function a(h,m){return _f(n(h,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,y="",E=Bo(h["!ref"]),B=Array.isArray(h),k=E.s.r;k<=E.e.r;++k)for(var F=E.s.c;F<=E.e.c;++F)if(y=Cr({r:k,c:F}),b=B?(h[k]||[])[F]:h[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var U=Us(ha(b.v));g[2]="vtc",g[3]="nd",g[4]=""+U,g[5]=b.w||ql(b.z||vr[14],U);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[s,i,o,i,u(h),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Fm=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(Bc(d))?isNaN(Im(d).getDate())?h[m][g]=d:h[m][g]=ha(d):h[m][g]=Bc(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var E=10,B=0,k=0;k<=y;++k)B=b[k].indexOf(" "),B==-1?B=b[k].length:B++,E=Math.max(E,B);for(k=0;k<=y;++k){g[k]=[];var F=0;for(t(b[k].slice(0,E).trim(),g,k,F,m),F=1;F<=(b[k].length-E)/10+1;++F)t(b[k].slice(E+(F-1)*10,E+F*10).trim(),g,k,F,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(y,E){return y[0]-E[0]||n[y[1]]-n[E[1]]}),r[b.pop()[1]]||44}function s(d,h){var m=h||{},g="",b=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):m&&m.FS?g=m.FS:g=a(d.slice(0,1024));var E=0,B=0,k=0,F=0,U=0,P=g.charCodeAt(0),D=!1,C=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var N=m.dateNF!=null?Tle(m.dateNF):null;function H(){var L=d.slice(F,U),I={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)I.t="z";else if(m.raw)I.t="s",I.v=L;else if(L.trim().length===0)I.t="s",I.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(I.t="s",I.v=L.slice(2,-1).replace(/""/g,'"')):rhe(L)?(I.t="n",I.f=L.slice(1)):(I.t="s",I.v=L);else if(L=="TRUE")I.t="b",I.v=!0;else if(L=="FALSE")I.t="b",I.v=!1;else if(!isNaN(k=Bc(L)))I.t="n",m.cellText!==!1&&(I.w=L),I.v=k;else if(!isNaN(Im(L).getDate())||N&&L.match(N)){I.z=m.dateNF||vr[14];var j=0;N&&L.match(N)&&(L=Ble(L,m.dateNF,L.match(N)||[]),j=1),m.cellDates?(I.t="d",I.v=ha(L,j)):(I.t="n",I.v=Us(ha(L,j))),m.cellText!==!1&&(I.w=ql(I.z,I.v instanceof Date?Us(I.v):I.v)),m.cellNF||delete I.z}else I.t="s",I.v=L;if(I.t=="z"||(m.dense?(b[E]||(b[E]=[]),b[E][B]=I):b[Cr({c:B,r:E})]=I),F=U+1,S=d.charCodeAt(F),y.e.c<B&&(y.e.c=B),y.e.r<E&&(y.e.r=E),C==P)++B;else if(B=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;U<d.length;++U)switch(C=d.charCodeAt(U)){case 34:S===34&&(D=!D);break;case P:case 10:case 13:if(!D&&H())break e;break}return U-F>0&&H(),b["!ref"]=Mr(y),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):ep(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:$4(d,h);switch(h.type){case"base64":m=al(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof sx<"u"||(m=Xr&&Buffer.isBuffer(d)?d.toString("binary"):Ef(d));break;case"array":m=Sh(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=ra(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=ra(m):h.type=="binary"&&typeof sx<"u",m.slice(0,19)=="socialcalc:version:"?sj.to_sheet(h.type=="string"?m:ra(m),h):i(m,h)}function l(d,h){return _f(o(d,h),h)}function u(d){for(var h=[],m=Cn(d["!ref"]),g,b=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var E=[],B=m.s.c;B<=m.e.c;++B){var k=Cr({r:y,c:B});if(g=b?(d[y]||[])[B]:d[k],!g||g.v==null){E.push("          ");continue}for(var F=(g.w||(RA(g),g.w)||"").slice(0,10);F.length<10;)F+=" ";E.push(F+(B===0?" ":""))}h.push(E.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function HAe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=nj.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Fm.to_workbook(t,e)}}var mh=function(){function t(O,W,Y){if(O){ui(O,O.l||0);for(var te=Y.Enum||K;O.l<O.length;){var ce=O.read_shift(2),de=te[ce]||te[65535],me=O.read_shift(2),ge=O.l+me,Se=de.f&&de.f(O,me,Y);if(O.l=ge,W(Se,de,ce))return}}}function e(O,W){switch(W.type){case"base64":return r(Jo(al(O)),W);case"binary":return r(Jo(O),W);case"buffer":case"array":return r(O,W)}throw"Unsupported type "+W.type}function r(O,W){if(!O)return O;var Y=W||{},te=Y.dense?[]:{},ce="Sheet1",de="",me=0,ge={},Se=[],xe=[],ie={s:{r:0,c:0},e:{r:0,c:0}},Le=Y.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)Y.Enum=K,t(O,function(je,et,st){switch(st){case 0:Y.vers=je,je>=4096&&(Y.qpro=!0);break;case 6:ie=je;break;case 204:je&&(de=je);break;case 222:de=je;break;case 15:case 51:Y.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:st==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=Y.dateNF||vr[14],Y.cellDates&&(je[1].t="d",je[1].v=Rw(je[1].v))),Y.qpro&&je[3]>me&&(te["!ref"]=Mr(ie),ge[ce]=te,Se.push(ce),te=Y.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},me=je[3],ce=de||"Sheet"+(me+1),de="");var mt=Y.dense?(te[je[0].r]||[])[je[0].c]:te[Cr(je[0])];if(mt){mt.t=je[1].t,mt.v=je[1].v,je[1].z!=null&&(mt.z=je[1].z),je[1].f!=null&&(mt.f=je[1].f);break}Y.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Cr(je[0])]=je[1];break}},Y);else if(O[2]==26||O[2]==14)Y.Enum=le,O[2]==14&&(Y.qpro=!0,O.l=0),t(O,function(je,et,st){switch(st){case 204:ce=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>me&&(te["!ref"]=Mr(ie),ge[ce]=te,Se.push(ce),te=Y.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},me=je[3],ce="Sheet"+(me+1)),Le>0&&je[0].r>=Le)break;Y.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Cr(je[0])]=je[1],ie.e.c<je[0].c&&(ie.e.c=je[0].c),ie.e.r<je[0].r&&(ie.e.r=je[0].r);break;case 27:je[14e3]&&(xe[je[14e3][0]]=je[14e3][1]);break;case 1537:xe[je[0]]=je[1],je[0]==me&&(ce=je[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(te["!ref"]=Mr(ie),ge[de||ce]=te,Se.push(de||ce),!xe.length)return{SheetNames:Se,Sheets:ge};for(var nt={},Ie=[],we=0;we<xe.length;++we)ge[Se[we]]?(Ie.push(xe[we]||Se[we]),nt[xe[we]]=ge[xe[we]]||ge[Se[we]]):(Ie.push(xe[we]),nt[xe[we]]={"!ref":"A1"});return{SheetNames:Ie,Sheets:nt}}function n(O,W){var Y=W||{};if(+Y.codepage>=0&&Sc(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var te=So(),ce=Cn(O["!ref"]),de=Array.isArray(O),me=[];Ut(te,0,s(1030)),Ut(te,6,l(ce));for(var ge=Math.min(ce.e.r,8191),Se=ce.s.r;Se<=ge;++Se)for(var xe=os(Se),ie=ce.s.c;ie<=ce.e.c;++ie){Se===ce.s.r&&(me[ie]=Ba(ie));var Le=me[ie]+xe,nt=de?(O[Se]||[])[ie]:O[Le];if(!(!nt||nt.t=="z"))if(nt.t=="n")(nt.v|0)==nt.v&&nt.v>=-32768&&nt.v<=32767?Ut(te,13,g(Se,ie,nt.v)):Ut(te,14,y(Se,ie,nt.v));else{var Ie=RA(nt);Ut(te,15,h(Se,ie,Ie.slice(0,239)))}}return Ut(te,1),te.end()}function a(O,W){var Y=W||{};if(+Y.codepage>=0&&Sc(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var te=So();Ut(te,0,i(O));for(var ce=0,de=0;ce<O.SheetNames.length;++ce)(O.Sheets[O.SheetNames[ce]]||{})["!ref"]&&Ut(te,27,G(O.SheetNames[ce],de++));var me=0;for(ce=0;ce<O.SheetNames.length;++ce){var ge=O.Sheets[O.SheetNames[ce]];if(!(!ge||!ge["!ref"])){for(var Se=Cn(ge["!ref"]),xe=Array.isArray(ge),ie=[],Le=Math.min(Se.e.r,8191),nt=Se.s.r;nt<=Le;++nt)for(var Ie=os(nt),we=Se.s.c;we<=Se.e.c;++we){nt===Se.s.r&&(ie[we]=Ba(we));var je=ie[we]+Ie,et=xe?(ge[nt]||[])[we]:ge[je];if(!(!et||et.t=="z"))if(et.t=="n")Ut(te,23,H(nt,we,me,et.v));else{var st=RA(et);Ut(te,22,C(nt,we,me,st.slice(0,239)))}}++me}}return Ut(te,1),te.end()}function s(O){var W=lt(2);return W.write_shift(2,O),W}function i(O){var W=lt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var Y=0,te=0,ce=0,de=0;de<O.SheetNames.length;++de){var me=O.SheetNames[de],ge=O.Sheets[me];if(!(!ge||!ge["!ref"])){++ce;var Se=Bo(ge["!ref"]);Y<Se.e.r&&(Y=Se.e.r),te<Se.e.c&&(te=Se.e.c)}}return Y>8191&&(Y=8191),W.write_shift(2,Y),W.write_shift(1,ce),W.write_shift(1,te),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(O,W,Y){var te={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&Y.qpro?(te.s.c=O.read_shift(1),O.l++,te.s.r=O.read_shift(2),te.e.c=O.read_shift(1),O.l++,te.e.r=O.read_shift(2),te):(te.s.c=O.read_shift(2),te.s.r=O.read_shift(2),W==12&&Y.qpro&&(O.l+=2),te.e.c=O.read_shift(2),te.e.r=O.read_shift(2),W==12&&Y.qpro&&(O.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(O){var W=lt(8);return W.write_shift(2,O.s.c),W.write_shift(2,O.s.r),W.write_shift(2,O.e.c),W.write_shift(2,O.e.r),W}function u(O,W,Y){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(te[0].c=O.read_shift(1),te[3]=O.read_shift(1),te[0].r=O.read_shift(2),O.l+=2):(te[2]=O.read_shift(1),te[0].c=O.read_shift(2),te[0].r=O.read_shift(2)),te}function d(O,W,Y){var te=O.l+W,ce=u(O,W,Y);if(ce[1].t="s",Y.vers==20768){O.l++;var de=O.read_shift(1);return ce[1].v=O.read_shift(de,"utf8"),ce}return Y.qpro&&O.l++,ce[1].v=O.read_shift(te-O.l,"cstr"),ce}function h(O,W,Y){var te=lt(7+Y.length);te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,O),te.write_shift(1,39);for(var ce=0;ce<te.length;++ce){var de=Y.charCodeAt(ce);te.write_shift(1,de>=128?95:de)}return te.write_shift(1,0),te}function m(O,W,Y){var te=u(O,W,Y);return te[1].v=O.read_shift(2,"i"),te}function g(O,W,Y){var te=lt(7);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,O),te.write_shift(2,Y,"i"),te}function b(O,W,Y){var te=u(O,W,Y);return te[1].v=O.read_shift(8,"f"),te}function y(O,W,Y){var te=lt(13);return te.write_shift(1,255),te.write_shift(2,W),te.write_shift(2,O),te.write_shift(8,Y,"f"),te}function E(O,W,Y){var te=O.l+W,ce=u(O,W,Y);if(ce[1].v=O.read_shift(8,"f"),Y.qpro)O.l=te;else{var de=O.read_shift(2);U(O.slice(O.l,O.l+de),ce),O.l+=de}return ce}function B(O,W,Y){var te=W&32768;return W&=-32769,W=(te?O:0)+(W>=8192?W-16384:W),(te?"":"$")+(Y?Ba(W):os(W))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},F=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function U(O,W){ui(O,0);for(var Y=[],te=0,ce="",de="",me="",ge="";O.l<O.length;){var Se=O[O.l++];switch(Se){case 0:Y.push(O.read_shift(8,"f"));break;case 1:de=B(W[0].c,O.read_shift(2),!0),ce=B(W[0].r,O.read_shift(2),!1),Y.push(de+ce);break;case 2:{var xe=B(W[0].c,O.read_shift(2),!0),ie=B(W[0].r,O.read_shift(2),!1);de=B(W[0].c,O.read_shift(2),!0),ce=B(W[0].r,O.read_shift(2),!1),Y.push(xe+ie+":"+de+ce)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(O.read_shift(2));break;case 6:{for(var Le="";Se=O[O.l++];)Le+=String.fromCharCode(Se);Y.push('"'+Le.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ge=Y.pop(),me=Y.pop(),Y.push(["AND","OR"][Se-20]+"("+me+","+ge+")");break;default:if(Se<32&&F[Se])ge=Y.pop(),me=Y.pop(),Y.push(me+F[Se]+ge);else if(k[Se]){if(te=k[Se][1],te==69&&(te=O[O.l++]),te>Y.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+Y.join("|")+"|");return}var nt=Y.slice(-te);Y.length-=te,Y.push(k[Se][0]+"("+nt.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}Y.length==1?W[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function P(O){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=O.read_shift(2),W[3]=O[O.l++],W[0].c=O[O.l++],W}function D(O,W){var Y=P(O);return Y[1].t="s",Y[1].v=O.read_shift(W-4,"cstr"),Y}function C(O,W,Y,te){var ce=lt(6+te.length);ce.write_shift(2,O),ce.write_shift(1,Y),ce.write_shift(1,W),ce.write_shift(1,39);for(var de=0;de<te.length;++de){var me=te.charCodeAt(de);ce.write_shift(1,me>=128?95:me)}return ce.write_shift(1,0),ce}function S(O,W){var Y=P(O);Y[1].v=O.read_shift(2);var te=Y[1].v>>1;if(Y[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Y[1].v=te,Y}function N(O,W){var Y=P(O),te=O.read_shift(4),ce=O.read_shift(4),de=O.read_shift(2);if(de==65535)return te===0&&ce===3221225472?(Y[1].t="e",Y[1].v=15):te===0&&ce===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var me=de&32768;return de=(de&32767)-16446,Y[1].v=(1-me*2)*(ce*Math.pow(2,de+32)+te*Math.pow(2,de)),Y}function H(O,W,Y,te){var ce=lt(14);if(ce.write_shift(2,O),ce.write_shift(1,Y),ce.write_shift(1,W),te==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var de=0,me=0,ge=0,Se=0;return te<0&&(de=1,te=-te),me=Math.log2(te)|0,te/=Math.pow(2,me-31),Se=te>>>0,(Se&2147483648)==0&&(te/=2,++me,Se=te>>>0),te-=Se,Se|=2147483648,Se>>>=0,te*=Math.pow(2,32),ge=te>>>0,ce.write_shift(4,ge),ce.write_shift(4,Se),me+=16383+(de?32768:0),ce.write_shift(2,me),ce}function L(O,W){var Y=N(O);return O.l+=W-14,Y}function I(O,W){var Y=P(O),te=O.read_shift(4);return Y[1].v=te>>6,Y}function j(O,W){var Y=P(O),te=O.read_shift(8,"f");return Y[1].v=te,Y}function z(O,W){var Y=j(O);return O.l+=W-10,Y}function ne(O,W){return O[O.l+W-1]==0?O.read_shift(W,"cstr"):""}function Z(O,W){var Y=O[O.l++];Y>W-1&&(Y=W-1);for(var te="";te.length<Y;)te+=String.fromCharCode(O[O.l++]);return te}function ee(O,W,Y){if(!(!Y.qpro||W<21)){var te=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var ce=O.read_shift(W-21,"cstr");return[te,ce]}}function ae(O,W){for(var Y={},te=O.l+W;O.l<te;){var ce=O.read_shift(2);if(ce==14e3){for(Y[ce]=[0,""],Y[ce][0]=O.read_shift(2);O[O.l];)Y[ce][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return Y}function G(O,W){var Y=lt(5+O.length);Y.write_shift(2,14e3),Y.write_shift(2,W);for(var te=0;te<O.length;++te){var ce=O.charCodeAt(te);Y[Y.l++]=ce>127?95:ce}return Y[Y.l++]=0,Y}var K={0:{n:"BOF",f:ws},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ne},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},le={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:N},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ee},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function VAe(t){var e={},r=t.match(Ki),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Tr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=d4[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var zAe=function(){var t=lx("t"),e=lx("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:bn(i[1])},l=s.match(e);return l&&(o.s=VAe(l[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),GAe=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),qAe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,KAe=/<(?:\w+:)?r>/,WAe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function U4(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=bn(ra(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ra(t),r&&(n.h=b4(n.t))):t.match(KAe)&&(n.r=ra(t),n.t=bn(ra((t.replace(WAe,"").match(qAe)||[]).join("").replace(Ki,""))),r&&(n.h=GAe(zAe(n.r)))),n):{t:""}}var $Ae=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,XAe=/<(?:\w+:)?(?:si|sstItem)>/g,YAe=/<\/(?:\w+:)?(?:si|sstItem)>/;function JAe(t,e){var r=[],n="";if(!t)return r;var a=t.match($Ae);if(a){n=a[2].replace(XAe,"").split(YAe);for(var s=0;s!=n.length;++s){var i=U4(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=Tr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var ZAe=/^\s|\s$|[\t\n\r]/;function ij(t,e){if(!e.bookSST)return"";var r=[cs];r[r.length]=Lt("sst",null,{xmlns:jh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(ZAe)&&(s+=' xml:space="preserve"'),s+=">"+Gn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function ede(t){return[t.read_shift(4),t.read_shift(4)]}function tde(t,e){var r=[],n=!1;return VA(t,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function rde(t,e){return e||(e=lt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var nde=fce;function ade(t){var e=So();Ct(e,159,rde(t));for(var r=0;r<t.length;++r)Ct(e,19,nde(t[r]));return Ct(e,160),e.end()}function oj(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function TA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function sde(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=TA(t,4),e.U=TA(t,4),e.W=TA(t,4),e}function ide(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function ode(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(ide(t));return e}function lde(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function cde(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=TA(t,4),e.U=TA(t,4),e.W=TA(t,4),e}function ude(t){var e=cde(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function lj(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function cj(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Ade(t){var e=TA(t);switch(e.Minor){case 2:return[e.Minor,dde(t)];case 3:return[e.Minor,fde()];case 4:return[e.Minor,hde(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function dde(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=lj(t,r),a=cj(t,t.length-t.l);return{t:"Std",h:n,v:a}}function fde(){throw new Error("File is password-protected: ECMA-376 Extensible")}function hde(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ki,function(s){var i=Tr(s);switch(Lu(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function mde(t,e){var r={},n=r.EncryptionVersionInfo=TA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=lj(t,a),e-=a,r.EncryptionVerifier=cj(t,e),r}function pde(t){var e={},r=e.EncryptionVersionInfo=TA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function M4(t){var e=0,r,n=oj(t),a=n.length+1,s,i,o,l,u;for(r=pf(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var uj=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=oj(i),l=s(o),u=o.length,d=pf(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((u&1)===1&&(m=l>>8,d[u]=a(t[0],m),--u,m=l&255,g=o[o.length-1],d[u]=a(g,m));u>0;)--u,m=l>>8,d[u]=a(o[u],m),--u,m=l&255,d[u]=a(o[u],m);for(u=15,b=15-o.length;b>0;)m=l>>8,d[u]=a(t[b],m),--u,--b,m=l&255,d[u]=a(o[u],m),--u,--b;return d}}(),gde=function(t,e,r,n,a){a||(a=e),n||(n=uj(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},xde=function(t){var e=0,r=uj(t);return function(n){var a=gde("",n,e,r);return e=a[1],a[0]}};function vde(t,e,r,n){var a={key:ws(t),verificationBytes:ws(t)};return r.password&&(a.verifier=M4(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=xde(r.password)),a}function yde(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=pde(t):n.Data=mde(t,e),n}function wde(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?yde(t,e-2,n):vde(t,r.biff>=8?e:e-2,r,n),n}var Aj=function(){function t(a,s){switch(s.type){case"base64":return e(al(a),s);case"binary":return e(a,s);case"buffer":return e(Xr&&Buffer.isBuffer(a)?a.toString("binary"):Ef(a),s);case"array":return e(Sh(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},o=i.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,y=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var E=d.slice(g,m.lastIndex-b[0].length);if(E[0]==" "&&(E=E.slice(1)),++y,E.length){var B={v:E,t:"s"};Array.isArray(o)?o[h][y]=B:o[Cr({r:h,c:y})]=B}break}g=m.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Mr(u),o}function r(a,s){return _f(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Cn(a["!ref"]),o,l=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=Cr({r:u,c:d});o=l?(a[u]||[])[d]:a[h],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(RA(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function bde(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function dx(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Cde(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var o=0,l=0,u=a+s;switch(l=i/(u>1?2-u:u),a){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,u/2]}function Ede(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=a*o,i[0]+=a,i[1]+=l;break;case 1:l=a*(2-o),i[0]+=l,i[1]+=a;break;case 2:l=a*(o-2),i[1]+=a,i[2]+=l;break;case 3:l=a*(4-o),i[1]+=l,i[2]+=a;break;case 4:l=a*(o-4),i[2]+=a,i[0]+=l;break;case 5:l=a*(6-o),i[2]+=l,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function vy(t,e){if(e===0)return t;var r=Cde(bde(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),dx(Ede(r))}var dj=6,_de=15,Sde=1,ji=dj;function fx(t){return Math.floor((t+Math.round(128/ji)/256)*ji)}function hx(t){return Math.floor((t-5)/ji*100+.5)/100}function yy(t){return Math.round((t*ji+5)/ji*256)/256}function sE(t){return yy(hx(fx(t)))}function P4(t){var e=Math.abs(t-sE(t)),r=ji;if(e>.005)for(ji=Sde;ji<_de;++ji)Math.abs(t-sE(t))<=e&&(e=Math.abs(t-sE(t)),r=ji);ji=r}function gf(t){t.width?(t.wpx=fx(t.width),t.wch=hx(t.wpx),t.MDW=ji):t.wpx?(t.wch=hx(t.wpx),t.width=yy(t.wch),t.MDW=ji):typeof t.wch=="number"&&(t.width=yy(t.wch),t.wpx=fx(t.width),t.MDW=ji),t.customWidth&&delete t.customWidth}var Tde=96,fj=Tde;function mx(t){return t*96/fj}function Dm(t){return t*fj/96}var Bde={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Nde(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Ki)||[]).forEach(function(i){var o=Tr(i);switch(Lu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=da(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=da(o.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function kde(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Ki)||[]).forEach(function(i){var o=Tr(i);switch(Lu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function Ide(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Ki)||[]).forEach(function(i){var o=Tr(i);switch(Lu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=ra(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?da(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?da(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?da(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?da(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?da(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?da(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?da(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=d4[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=da(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var l=fh[a.color.index];a.color.index==81&&(l=fh[1]),l||(l=fh[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=vy(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Fde(t,e,r){e.NumberFmt=[];for(var n=Ga(vr),a=0;a<n.length;++a)e.NumberFmt[n[a]]=vr[n[a]];var s=t[0].match(Ki);if(s)for(a=0;a<s.length;++a){var i=Tr(s[a]);switch(Lu(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=bn(ra(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}SA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Dde(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Lt("numFmt",null,{numFmtId:n,formatCode:Gn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Lt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Sv=["numFmtId","fillId","fontId","borderId","xfId"],Tv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Rde(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Ki)||[]).forEach(function(s){var i=Tr(s),o=0;switch(Lu(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Sv.length;++o)n[Sv[o]]&&(n[Sv[o]]=parseInt(n[Sv[o]],10));for(o=0;o<Tv.length;++o)n[Tv[o]]&&(n[Tv[o]]=da(n[Tv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=da(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Lde(t){var e=[];return e[e.length]=Lt("cellXfs",null),t.forEach(function(r){e[e.length]=Lt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Lt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Ude=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&Fde(h,d,u),(h=o.match(a))&&Ide(h,d,l,u),(h=o.match(n))&&kde(h,d,l,u),(h=o.match(s))&&Nde(h,d,l,u),(h=o.match(r))&&Rde(h,d,u),d}}();function hj(t,e){var r=[cs,Lt("styleSheet",null,{xmlns:jh[0],"xmlns:vt":Rs.vt})],n;return t.SSF&&(n=Dde(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Lde(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Mde(t,e){var r=t.read_shift(2),n=Vi(t);return[r,n]}function Pde(t,e,r){r||(r=lt(6+4*e.length)),r.write_shift(2,t),Xs(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function jde(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=yce(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=vce(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Vi(t),n}function Ode(t,e){e||(e=lt(153)),e.write_shift(2,t.sz*20),wce(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),py(t.color,e);var n=0;return n=2,e.write_shift(1,n),Xs(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Qde=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],iE,Hde=Gi;function g6(t,e){e||(e=lt(84)),iE||(iE=Fw(Qde));var r=iE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(py({auto:1},e),py({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Vde(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function mj(t,e,r){r||(r=lt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Wp(t,e){return e||(e=lt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var zde=Gi;function Gde(t,e){return e||(e=lt(51)),e.write_shift(1,0),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),Wp(null,e),e.length>e.l?e.slice(0,e.l):e}function qde(t,e){return e||(e=lt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),my(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Kde(t,e,r){var n=lt(2052);return n.write_shift(4,t),my(e,n),my(r,n),n.length>n.l?n.slice(0,n.l):n}function Wde(t,e,r){var n={};n.NumberFmt=[];for(var a in vr)n.NumberFmt[a]=vr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return VA(t,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],SA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=vy(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function $de(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(Ct(t,615,Nc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Ct(t,44,Pde(a,e[a]))}),Ct(t,616))}}function Xde(t){var e=1;Ct(t,611,Nc(e)),Ct(t,43,Ode({sz:12,color:{theme:1},name:"Calibri",family:2})),Ct(t,612)}function Yde(t){var e=2;Ct(t,603,Nc(e)),Ct(t,45,g6({patternType:"none"})),Ct(t,45,g6({patternType:"gray125"})),Ct(t,604)}function Jde(t){var e=1;Ct(t,613,Nc(e)),Ct(t,46,Gde()),Ct(t,614)}function Zde(t){var e=1;Ct(t,626,Nc(e)),Ct(t,47,mj({numFmtId:0},65535)),Ct(t,627)}function efe(t,e){Ct(t,617,Nc(e.length)),e.forEach(function(r){Ct(t,47,mj(r,0))}),Ct(t,618)}function tfe(t){var e=1;Ct(t,619,Nc(e)),Ct(t,48,qde({xfId:0,name:"Normal"})),Ct(t,620)}function rfe(t){var e=0;Ct(t,505,Nc(e)),Ct(t,506)}function nfe(t){var e=0;Ct(t,508,Kde(e,"TableStyleMedium9","PivotStyleMedium4")),Ct(t,509)}function afe(t,e){var r=So();return Ct(r,278),$de(r,t.SSF),Xde(r),Yde(r),Jde(r),Zde(r),efe(r,e.cellXfs),tfe(r),rfe(r),nfe(r),Ct(r,279),r.end()}var sfe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function ife(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ki)||[]).forEach(function(a){var s=Tr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[sfe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function ofe(){}function lfe(){}var cfe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,ufe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Afe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function dfe(t,e,r){e.themeElements={};var n;[["clrScheme",cfe,ife],["fontScheme",ufe,ofe],["fmtScheme",Afe,lfe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var ffe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function pj(t,e){(!t||t.length===0)&&(t=j4());var r,n={};if(!(r=t.match(ffe)))throw new Error("themeElements not found in theme");return dfe(r[0],n,e),n.raw=t,n}function j4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[cs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function hfe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=lP(s,{type:"array"})}catch{return}var o=Zo(i,"theme/theme/theme1.xml",!0);if(o)return pj(o,r)}}function mfe(t){return t.read_shift(4)}function pfe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=gfe(t,4);break;case 2:e.xclrValue=$P(t);break;case 3:e.xclrValue=mfe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function gfe(t,e){return Gi(t,e)}function xfe(t,e){return Gi(t,e)}function vfe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=pfe(t);break;case 6:n[1]=xfe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function yfe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(vfe(t,r-t.l));return{ixfe:n,ext:s}}function wfe(t,e){e.forEach(function(r){r[0]})}function bfe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Vi(t)}}function Cfe(t){var e=lt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Xs(t.name,e),e.slice(0,e.l)}function Efe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function _fe(t){var e=lt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Sfe(t,e){var r=lt(8+2*e.length);return r.write_shift(4,t),Xs(e,r),r.slice(0,r.l)}function Tfe(t){return t.l+=4,t.read_shift(4)!=0}function Bfe(t,e){var r=lt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Nfe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return VA(t,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function kfe(){var t=So();return Ct(t,332),Ct(t,334,Nc(1)),Ct(t,335,Cfe({name:"XLDAPR",version:12e4,flags:3496657072})),Ct(t,336),Ct(t,339,Sfe(1,"XLDAPR")),Ct(t,52),Ct(t,35,Nc(514)),Ct(t,4096,Nc(0)),Ct(t,4097,Ul(1)),Ct(t,36),Ct(t,53),Ct(t,340),Ct(t,337,Bfe(1)),Ct(t,51,_fe([[1,0]])),Ct(t,338),Ct(t,333),t.end()}function Ife(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(Ki,function(o){var l=Tr(o);switch(Lu(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):s==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function gj(){var t=[cs];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Ffe(t){var e=[];if(!t)return e;var r=1;return(t.match(Ki)||[]).forEach(function(n){var a=Tr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function Dfe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Cr(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function Rfe(t,e,r){var n=[];return VA(t,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Lfe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;VA(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function Ufe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var X0=1024;function xj(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Lt("xml",null,{"xmlns:v":Xo.v,"xmlns:o":Xo.o,"xmlns:x":Xo.x,"xmlns:mv":Xo.mv}).replace(/\/>/,">"),Lt("o:shapelayout",Lt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Lt("v:shapetype",[Lt("v:stroke",null,{joinstyle:"miter"}),Lt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];X0<t*1e3;)X0+=1e3;return e.forEach(function(s){var i=Na(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Lt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Lt("v:fill",l,o),d={on:"t",obscured:"t"};++X0,a=a.concat(["<v:shape"+cx({id:"_x0000_s"+X0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Lt("v:shadow",null,d),Lt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",di("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),di("x:AutoFill","False"),di("x:Row",String(i.r)),di("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function x6(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var o=Na(i.ref);if(a?(t[o.r]||(t[o.r]=[]),s=t[o.r][o.c]):s=t[i.ref],!s){s={t:"z"},a?t[o.r][o.c]=s:t[i.ref]=s;var l=Cn(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Mr(l);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=s.c.length-1;h>=0;--h){if(!r&&s.c[h].T)return;r&&!s.c[h].T&&s.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}s.c.push(d)})}function Mfe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Tr(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Na(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&U4(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function vj(t){var e=[cs,Lt("comments",null,{xmlns:jh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Gn(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(Gn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(di("t",Gn(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;e.push(di("t",Gn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Pfe(t,e){var r=[],n=!1,a={},s=0;return t.replace(Ki,function(o,l){var u=Tr(o);switch(Lu(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":a.t=t.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function jfe(t,e,r){var n=[cs,Lt("ThreadedComments",null,{xmlns:Rs.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Lt("threadedComment",di("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Ofe(t,e){var r=[],n=!1;return t.replace(Ki,function(s){var i=Tr(s);switch(Lu(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function Qfe(t){var e=[cs,Lt("personList",null,{xmlns:Rs.TCMNT,"xmlns:x":jh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Lt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Hfe(t){var e={};e.iauthor=t.read_shift(4);var r=Vh(t);return e.rfx=r.s,e.ref=Cr(r.s),t.l+=16,e}function Vfe(t,e){return e==null&&(e=lt(36)),e.write_shift(4,t[1].iauthor),tp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var zfe=Vi;function Gfe(t){return Xs(t.slice(0,54))}function qfe(t,e){var r=[],n=[],a={},s=!1;return VA(t,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Kfe(t){var e=So(),r=[];return Ct(e,628),Ct(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ct(e,632,Gfe(a.a)))})}),Ct(e,631),Ct(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Na(n[0]),e:Na(n[0])};Ct(e,635,Vfe([s,a])),a.t&&a.t.length>0&&Ct(e,637,mce(a)),Ct(e,636),delete a.iauthor})}),Ct(e,634),Ct(e,629),e.end()}var Wfe="application/vnd.ms-office.vbaProject";function $fe(t){var e=cr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");cr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),cr.write(e)}function Xfe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&cr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var yj=["xlsb","xlsm","xlam","biff8","xla"];function Yfe(){return{"!type":"dialog"}}function Jfe(){return{"!type":"dialog"}}function Zfe(){return{"!type":"macro"}}function ehe(){return{"!type":"macro"}}var hm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,a+(o?"":"$")+Ba(d)+(l?"":"$")+os(u)}return function(a,s){return e=s,a.replace(t,r)}}(),O4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Q4=function(){return function(e,r){return e.replace(O4,function(n,a,s,i,o,l){var u=T4(i)-(s?0:r.c),d=S4(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":s?u+1:"["+u+"]";return a+"R"+h+"C"+m})}}();function wj(t,e){return t.replace(O4,function(r,n,a,s,i,o){return n+(a=="$"?a+s:Ba(T4(s)+e.c))+(i=="$"?i+o:os(S4(o)+e.r))})}function the(t,e,r){var n=Bo(e),a=n.s,s=Na(r),i={r:s.r-a.r,c:s.c-a.c};return wj(t,i)}function rhe(t){return t.length!=1}function v6(t){return t.replace(/_xlfn\./g,"")}function xs(t){t.l+=1}function xf(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function bj(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Cj(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=xf(t),o=xf(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Cj(t){var e=xf(t),r=xf(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function nhe(t,e,r){if(r.biff<8)return Cj(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=xf(t),i=xf(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Ej(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return ahe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=xf(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function ahe(t){var e=xf(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function she(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ihe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return ohe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function ohe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function lhe(t,e,r){var n=(t[t.l++]&96)>>5,a=bj(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function che(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=bj(t,s,r);return[n,a,i]}function uhe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ahe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function dhe(t,e,r){var n=(t[t.l++]&96)>>5,a=nhe(t,e-1,r);return[n,a]}function fhe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function y6(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function hhe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function mhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function phe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ghe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function xhe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function _j(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function vhe(t){return t.read_shift(2),_j(t)}function yhe(t){return t.read_shift(2),_j(t)}function whe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Ej(t,0,r);return[n,a]}function bhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=ihe(t,0,r);return[n,a]}function Che(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Ej(t,0,r);return[n,a,s]}function Ehe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[T0e[a],Bj[a],n]}function _he(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:She(t);return[a,(s[0]===0?Bj:S0e)[s[1]]]}function She(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function The(t,e,r){t.l+=r&&r.biff==2?3:4}function Bhe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Nhe(t){return t.l++,zA[t.read_shift(1)]}function khe(t){return t.l++,t.read_shift(2)}function Ihe(t){return t.l++,t.read_shift(1)!==0}function Fhe(t){return t.l++,Qi(t)}function Dhe(t,e,r){return t.l++,$x(t,e-1,r)}function Rhe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=es(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=zA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Qi(t);break;case 2:r[1]=zh(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Lhe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Vh:Lw)(t));return a}function Uhe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=Rhe(t,r.biff);return i}function Mhe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function Phe(t,e,r){if(r.biff==5)return jhe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function jhe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Ohe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Qhe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Hhe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Vhe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var zhe=Gi,Ghe=Gi,qhe=Gi;function Yx(t,e,r){return t.l+=2,[she(t)]}function H4(t){return t.l+=6,[]}var Khe=Yx,Whe=H4,$he=H4,Xhe=Yx;function Sj(t){return t.l+=2,[ws(t),t.read_shift(2)&1]}var Yhe=Yx,Jhe=Sj,Zhe=H4,e0e=Yx,t0e=Yx,r0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function n0e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=r0e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function a0e(t){return t.l+=2,[t.read_shift(4)]}function s0e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function i0e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function o0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function l0e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function c0e(t){return t.l+=4,[0,0]}var w6={1:{n:"PtgExp",f:Bhe},2:{n:"PtgTbl",f:qhe},3:{n:"PtgAdd",f:xs},4:{n:"PtgSub",f:xs},5:{n:"PtgMul",f:xs},6:{n:"PtgDiv",f:xs},7:{n:"PtgPower",f:xs},8:{n:"PtgConcat",f:xs},9:{n:"PtgLt",f:xs},10:{n:"PtgLe",f:xs},11:{n:"PtgEq",f:xs},12:{n:"PtgGe",f:xs},13:{n:"PtgGt",f:xs},14:{n:"PtgNe",f:xs},15:{n:"PtgIsect",f:xs},16:{n:"PtgUnion",f:xs},17:{n:"PtgRange",f:xs},18:{n:"PtgUplus",f:xs},19:{n:"PtgUminus",f:xs},20:{n:"PtgPercent",f:xs},21:{n:"PtgParen",f:xs},22:{n:"PtgMissArg",f:xs},23:{n:"PtgStr",f:Dhe},26:{n:"PtgSheet",f:s0e},27:{n:"PtgEndSheet",f:i0e},28:{n:"PtgErr",f:Nhe},29:{n:"PtgBool",f:Ihe},30:{n:"PtgInt",f:khe},31:{n:"PtgNum",f:Fhe},32:{n:"PtgArray",f:fhe},33:{n:"PtgFunc",f:Ehe},34:{n:"PtgFuncVar",f:_he},35:{n:"PtgName",f:Mhe},36:{n:"PtgRef",f:whe},37:{n:"PtgArea",f:lhe},38:{n:"PtgMemArea",f:Ohe},39:{n:"PtgMemErr",f:zhe},40:{n:"PtgMemNoMem",f:Ghe},41:{n:"PtgMemFunc",f:Qhe},42:{n:"PtgRefErr",f:Hhe},43:{n:"PtgAreaErr",f:uhe},44:{n:"PtgRefN",f:bhe},45:{n:"PtgAreaN",f:dhe},46:{n:"PtgMemAreaN",f:o0e},47:{n:"PtgMemNoMemN",f:l0e},57:{n:"PtgNameX",f:Phe},58:{n:"PtgRef3d",f:Che},59:{n:"PtgArea3d",f:che},60:{n:"PtgRefErr3d",f:Vhe},61:{n:"PtgAreaErr3d",f:Ahe},255:{}},u0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},A0e={1:{n:"PtgElfLel",f:Sj},2:{n:"PtgElfRw",f:e0e},3:{n:"PtgElfCol",f:Khe},6:{n:"PtgElfRwV",f:t0e},7:{n:"PtgElfColV",f:Xhe},10:{n:"PtgElfRadical",f:Yhe},11:{n:"PtgElfRadicalS",f:Zhe},13:{n:"PtgElfColS",f:Whe},15:{n:"PtgElfColSV",f:$he},16:{n:"PtgElfRadicalLel",f:Jhe},25:{n:"PtgList",f:n0e},29:{n:"PtgSxName",f:a0e},255:{}},d0e={0:{n:"PtgAttrNoop",f:c0e},1:{n:"PtgAttrSemi",f:xhe},2:{n:"PtgAttrIf",f:phe},4:{n:"PtgAttrChoose",f:hhe},8:{n:"PtgAttrGoto",f:mhe},16:{n:"PtgAttrSum",f:The},32:{n:"PtgAttrBaxcel",f:y6},33:{n:"PtgAttrBaxcel",f:y6},64:{n:"PtgAttrSpace",f:vhe},65:{n:"PtgAttrSpaceSemi",f:yhe},128:{n:"PtgAttrIfError",f:ghe},255:{}};function Jx(t,e,r,n){if(n.biff<8)return Gi(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Uhe(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Lhe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(Gi(t,e)),s}function Zx(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=w6[s]||w6[u0e[s]],(s===24||s===25)&&(a=(s===24?A0e:d0e)[t[t.l+1]]),!a||!a.f?Gi(t,e):i.push([a.n,a.f(t,e,r)]);return i}function f0e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var h0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m0e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Tj(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function b6(t,e,r){var n=Tj(t,e,r);return n=="#REF"?n:m0e(n,r)}function Ui(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var y=-1,E="",B=0,k=t[0].length;B<k;++B){var F=t[0][B];switch(F[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:E=Qa(" ",t[0][y][1][1]);break;case 1:E=Qa("\r",t[0][y][1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+E,y=-1}o.push(u+h0e[F[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ug(F[1][1],i,a),o.push(Mg(d,s));break;case"PtgRefN":d=r?Ug(F[1][1],r,a):F[1][1],o.push(Mg(d,s));break;case"PtgRef3d":h=F[1][1],d=Ug(F[1][2],i,a),b=b6(n,h,a),o.push(b+"!"+Mg(d,s));break;case"PtgFunc":case"PtgFuncVar":var U=F[1][0],P=F[1][1];U||(U=0),U&=127;var D=U==0?[]:o.slice(-U);o.length-=U,P==="User"&&(P=D.shift()),o.push(P+"("+D.join(",")+")");break;case"PtgBool":o.push(F[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(F[1]);break;case"PtgNum":o.push(String(F[1]));break;case"PtgStr":o.push('"'+F[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(F[1]);break;case"PtgAreaN":g=YF(F[1][1],r?{s:r}:i,a),o.push(rE(g,a));break;case"PtgArea":g=YF(F[1][1],i,a),o.push(rE(g,a));break;case"PtgArea3d":h=F[1][1],g=F[1][2],b=b6(n,h,a),o.push(b+"!"+rE(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=F[1][2];var C=(n.names||[])[m-1]||(n[0]||[])[m],S=C?C.Name:"SH33TJSNAME"+String(m);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var N=F[1][1];m=F[1][2];var H;if(a.biff<=5)N<0&&(N=-N),n[N]&&(H=n[N][m]);else{var L="";if(((n[N]||[])[0]||[])[0]==14849||(((n[N]||[])[0]||[])[0]==1025?n[N][m]&&n[N][m].itab>0&&(L=n.SheetNames[n[N][m].itab-1]+"!"):L=n.SheetNames[m-1]+"!"),n[N]&&n[N][m])L+=n[N][m].Name;else if(n[0]&&n[0][m])L+=n[0][m].Name;else{var I=(Tj(n,N,a)||"").split(";;");I[m-1]?L=I[m-1]:L+="SH33TJSERRX"}o.push(L);break}H||(H={Name:"SH33TJSERRY"}),o.push(H.Name);break;case"PtgParen":var j="(",z=")";if(y>=0){switch(E="",t[0][y][1][0]){case 2:j=Qa(" ",t[0][y][1][1])+j;break;case 3:j=Qa("\r",t[0][y][1][1])+j;break;case 4:z=Qa(" ",t[0][y][1][1])+z;break;case 5:z=Qa("\r",t[0][y][1][1])+z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(j+o.pop()+z);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:F[1][1],r:F[1][0]};var ne={c:r.c,r:r.r};if(n.sharedf[Cr(d)]){var Z=n.sharedf[Cr(d)];o.push(Ui(Z,i,ne,n,a))}else{var ee=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ui(u[1],i,ne,n,a)),ee=!0;break}ee||o.push(F[1])}break;case"PtgArray":o.push("{"+f0e(F[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+F[1].idx+"[#"+F[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(F));default:throw new Error("Unrecognized Formula Token: "+String(F))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&y>=0&&ae.indexOf(t[0][B][0])==-1){F=t[0][y];var G=!0;switch(F[1][0]){case 4:G=!1;case 0:E=Qa(" ",F[1][1]);break;case 5:G=!1;case 1:E=Qa("\r",F[1][1]);break;default:if(E="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+F[1][0])}o.push((G?E:"")+o.pop()+(G?"":E)),y=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function p0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Gi(t,e-2)];var o=Zx(t,i,r);return e!==i+a&&(s=Jx(t,e-i-a,o,r)),t.l=n,[o,s]}function g0e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],Gi(t,e-2)];var o=Zx(t,i,r);return e!==i+a&&(s=Jx(t,e-i-a,o,r)),t.l=n,[o,s]}function x0e(t,e,r,n){var a=t.l+e,s=Zx(t,n,r),i;return a!==t.l&&(i=Jx(t,a-t.l,s,r)),[s,i]}function v0e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=Zx(t,s,r);return s==65535?[[],Gi(t,e-2)]:(e!==s+2&&(a=Jx(t,n-s-2,i,r)),[i,a])}function y0e(t){var e;if(bA(t,t.l+6)!==65535)return[Qi(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function w0e(t){if(t==null){var e=lt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Th(t);return Th(0)}function oE(t,e,r){var n=t.l+e,a=Uu(t);r.biff==2&&++t.l;var s=y0e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=g0e(t,n-t.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function b0e(t,e,r,n,a){var s=Nh(e,r,a),i=w0e(t.v),o=lt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=lt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=$s([s,i,o,u]);return h}function Uw(t,e,r){var n=t.read_shift(4),a=Zx(t,n,r),s=t.read_shift(4),i=s>0?Jx(t,s,a,r):null;return[a,i]}var C0e=Uw,Mw=Uw,E0e=Uw,_0e=Uw,S0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Bj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},T0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function C6(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function B0e(t){var e="of:="+t.replace(O4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function lE(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function N0e(t){return t.replace(/\./,"!")}var jg={},mm={},Og=typeof Map<"u";function V4(t,e,r){var n=0,a=t.length;if(r){if(Og?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Og?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Og?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function Pw(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(ji=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=hx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=yy(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function ph(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Sf(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){SA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Nj(t,e,r,n,a,s){try{n.cellNF&&(t.z=vr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ha(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(vr[e]==null&&SA(Sle[e]||"General",e),t.t==="e")t.w=t.w||zA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v);else if(t.t==="d"){var i=Us(t.v);(i|0)===i?t.w=i.toString(10):t.w=ox(i)}else{if(t.v===void 0)return"";t.w=_h(t.v,mm)}else t.t==="d"?t.w=ql(e,Us(t.v),mm):t.w=ql(e,t.v,mm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=vy(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=vy(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function k0e(t,e,r){if(t&&t["!ref"]){var n=Cn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function I0e(t,e){var r=Cn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Mr(r))}var F0e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,D0e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,R0e=/<(?:\w:)?hyperlink [^>]*>/mg,L0e=/"(\w*:\w*)"/,U0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,M0e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,P0e=/<(?:\w:)?pageMargins[^>]*\/>/g,kj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,j0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,O0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Q0e(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(D0e);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match(kj);m?z4(m[0],o,a,r):(m=u.match(j0e))&&V0e(m[0],m[1]||"",o,a,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(L0e);b&&I0e(o,b[1])}var y=u.match(O0e);y&&y[1]&&rme(y[1],a);var E=[];if(e.cellStyles){var B=u.match(U0e);B&&Y0e(E,B)}h&&sme(h[1],o,e,l,s,i);var k=d.match(M0e);k&&(o["!autofilter"]=Z0e(k[0]));var F=[],U=d.match(F0e);if(U)for(g=0;g!=U.length;++g)F[g]=Cn(U[g].slice(U[g].indexOf('"')+1));var P=d.match(R0e);P&&W0e(o,P,n);var D=d.match(P0e);if(D&&(o["!margins"]=$0e(Tr(D[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Mr(l)),e.sheetRows>0&&o["!ref"]){var C=Cn(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Mr(C))}return E.length>0&&(o["!cols"]=E),F.length>0&&(o["!merges"]=F),o}function H0e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Mr(t[r])+'"/>';return e+"</mergeCells>"}function z4(t,e,r,n){var a=Tr(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=bn(ra(a.codeName)))}function V0e(t,e,r,n,a){z4(t.slice(0,t.indexOf(">")),r,n,a)}function z0e(t,e,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}s=!0,i.codeName=Cu(Gn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Lt("outlinePr",null,u)}!s&&!o||(a[a.length]=Lt("sheetPr",o,i))}var G0e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],q0e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function K0e(t){var e={sheet:1};return G0e.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),q0e.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=M4(t.password).toString(16).toUpperCase()),Lt("sheetProtection",null,e)}function W0e(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Tr(ra(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+bn(s.location))):(s.Target="#"+bn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Cn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Cr({c:u,r:l});n?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function $0e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function X0e(t){return ph(t),Lt("pageMargins",null,t)}function Y0e(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Tr(e[n],!0);a.hidden&&(a.hidden=da(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,P4(a.width)),gf(a);s<=i;)t[s++]=ma(a)}}function J0e(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Lt("col",null,Pw(a,n)));return r[r.length]="</cols>",r.join("")}function Z0e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function eme(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Mr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Bo(a);i.s.r==i.e.r&&(i.e.r=Bo(e["!ref"]).e.r,a=Mr(i));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Lt("autoFilter",null,{ref:a})}var tme=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function rme(t,e){e.Views||(e.Views=[{}]),(t.match(tme)||[]).forEach(function(r,n){var a=Tr(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),da(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function nme(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Lt("sheetViews",Lt("sheetView",null,a),{})}function ame(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=zA[t.v];break;case"d":n&&n.cellDates?a=ha(t.v,-1).toISOString():(t=ma(t),t.t="n",a=""+(t.v=Us(ha(t.v)))),typeof t.z>"u"&&(t.z=vr[14]);break;default:a=t.v;break}var o=di("v",Gn(a)),l={r:e},u=Sf(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=di("v",""+V4(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Lt("f",Gn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Lt("c",o,l)}var sme=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=lx("v"),i=lx("f");return function(l,u,d,h,m,g){for(var b=0,y="",E=[],B=[],k=0,F=0,U=0,P="",D,C,S=0,N=0,H,L,I=0,j=0,z=Array.isArray(g.CellXf),ne,Z=[],ee=[],ae=Array.isArray(u),G=[],K={},le=!1,O=!!d.sheetStubs,W=l.split(e),Y=0,te=W.length;Y!=te;++Y){y=W[Y].trim();var ce=y.length;if(ce!==0){var de=0;e:for(b=0;b<ce;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(C=Tr(y.slice(de,b),!0),S=C.r!=null?parseInt(C.r,10):S+1,N=-1,d.sheetRows&&d.sheetRows<S)continue;K={},le=!1,C.ht&&(le=!0,K.hpt=parseFloat(C.ht),K.hpx=Dm(K.hpt)),C.hidden=="1"&&(le=!0,K.hidden=!0),C.outlineLevel!=null&&(le=!0,K.level=+C.outlineLevel),le&&(G[S-1]=K)}break;case"<":de=b;break}if(de>=b)break;if(C=Tr(y.slice(de,b),!0),S=C.r!=null?parseInt(C.r,10):S+1,N=-1,!(d.sheetRows&&d.sheetRows<S)){h.s.r>S-1&&(h.s.r=S-1),h.e.r<S-1&&(h.e.r=S-1),d&&d.cellStyles&&(K={},le=!1,C.ht&&(le=!0,K.hpt=parseFloat(C.ht),K.hpx=Dm(K.hpt)),C.hidden=="1"&&(le=!0,K.hidden=!0),C.outlineLevel!=null&&(le=!0,K.level=+C.outlineLevel),le&&(G[S-1]=K)),E=y.slice(b).split(t);for(var me=0;me!=E.length&&E[me].trim().charAt(0)=="<";++me);for(E=E.slice(me),b=0;b!=E.length;++b)if(y=E[b].trim(),y.length!==0){if(B=y.match(r),k=b,F=0,U=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,B!=null&&B.length===2){for(k=0,P=B[1],F=0;F!=P.length&&!((U=P.charCodeAt(F)-64)<1||U>26);++F)k=26*k+U;--k,N=k}else++N;for(F=0;F!=y.length&&y.charCodeAt(F)!==62;++F);if(++F,C=Tr(y.slice(0,F),!0),C.r||(C.r=Cr({r:S-1,c:N})),P=y.slice(F),D={t:""},(B=P.match(s))!=null&&B[1]!==""&&(D.v=bn(B[1])),d.cellFormula){if((B=P.match(i))!=null&&B[1]!==""){if(D.f=bn(ra(B[1])).replace(/\r\n/g,`
`),d.xlfn||(D.f=v6(D.f)),B[0].indexOf('t="array"')>-1)D.F=(P.match(a)||[])[1],D.F.indexOf(":")>-1&&Z.push([Cn(D.F),D.F]);else if(B[0].indexOf('t="shared"')>-1){L=Tr(B[0]);var ge=bn(ra(B[1]));d.xlfn||(ge=v6(ge)),ee[parseInt(L.si,10)]=[L,ge,C.r]}}else(B=P.match(/<f[^>]*\/>/))&&(L=Tr(B[0]),ee[L.si]&&(D.f=the(ee[L.si][1],ee[L.si][2],C.r)));var Se=Na(C.r);for(F=0;F<Z.length;++F)Se.r>=Z[F][0].s.r&&Se.r<=Z[F][0].e.r&&Se.c>=Z[F][0].s.c&&Se.c<=Z[F][0].e.c&&(D.F=Z[F][1])}if(C.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(O)D.t="z";else continue;else D.t=C.t||"n";switch(h.s.c>N&&(h.s.c=N),h.e.c<N&&(h.e.c=N),D.t){case"n":if(D.v==""||D.v==null){if(!O)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!O)continue;D.t="z"}else H=jg[parseInt(D.v,10)],D.v=H.t,D.r=H.r,d.cellHTML&&(D.h=H.h);break;case"str":D.t="s",D.v=D.v!=null?ra(D.v):"",d.cellHTML&&(D.h=b4(D.v));break;case"inlineStr":B=P.match(n),D.t="s",B!=null&&(H=U4(B[1]))?(D.v=H.t,d.cellHTML&&(D.h=H.h)):D.v="";break;case"b":D.v=da(D.v);break;case"d":d.cellDates?D.v=ha(D.v,1):(D.v=Us(ha(D.v,1)),D.t="n");break;case"e":(!d||d.cellText!==!1)&&(D.w=D.v),D.v=FP[D.v];break}if(I=j=0,ne=null,z&&C.s!==void 0&&(ne=g.CellXf[C.s],ne!=null&&(ne.numFmtId!=null&&(I=ne.numFmtId),d.cellStyles&&ne.fillId!=null&&(j=ne.fillId))),Nj(D,I,j,d,m,g),d.cellDates&&z&&D.t=="n"&&Jm(vr[I])&&(D.t="d",D.v=Rw(D.v)),C.cm&&d.xlmeta){var xe=(d.xlmeta.Cell||[])[+C.cm-1];xe&&xe.type=="XLDAPR"&&(D.D=!0)}if(ae){var ie=Na(C.r);u[ie.r]||(u[ie.r]=[]),u[ie.r][ie.c]=D}else u[C.r]=D}}}}G.length>0&&(u["!rows"]=G)}}();function ime(t,e,r,n){var a=[],s=[],i=Cn(t["!ref"]),o="",l,u="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),y={r:u},E,B=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Ba(m);for(h=i.s.r;h<=i.e.r;++h){for(s=[],u=os(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var k=b?(t[h]||[])[m]:t[l];k!==void 0&&(o=ame(k,l,t,e))!=null&&s.push(o)}(s.length>0||g&&g[h])&&(y={r:u},g&&g[h]&&(E=g[h],E.hidden&&(y.hidden=1),B=-1,E.hpx?B=mx(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(y.ht=B,y.customHeight=1),E.level&&(y.outlineLevel=E.level)),a[a.length]=Lt("row",s.join(""),y))}if(g)for(;h<g.length;++h)g&&g[h]&&(y={r:h+1},E=g[h],E.hidden&&(y.hidden=1),B=-1,E.hpx?B=mx(E.hpx):E.hpt&&(B=E.hpt),B>-1&&(y.ht=B,y.customHeight=1),E.level&&(y.outlineLevel=E.level),a[a.length]=Lt("row","",y));return a.join("")}function Ij(t,e,r,n){var a=[cs,Lt("worksheet",null,{xmlns:jh[0],"xmlns:r":Rs.r})],s=r.SheetNames[t],i=0,o="",l=r.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",d=Cn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Mr(d)}n||(n={}),l["!comments"]=[];var h=[];z0e(l,r,t,e,a),a[a.length]=Lt("dimension",null,{ref:u}),a[a.length]=nme(l,e,t,r),e.sheetFormat&&(a[a.length]=Lt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=J0e(l,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=ime(l,e),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=K0e(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=eme(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=H0e(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=Vn(n,-1,Gn(y[1].Target).replace(/#.*$/,""),rn.HLINK),g["r:id"]="rId"+b),(m=y[1].Target.indexOf("#"))>-1&&(g.location=Gn(y[1].Target.slice(m+1))),y[1].Tooltip&&(g.tooltip=Gn(y[1].Tooltip)),a[a.length]=Lt("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=X0e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=di("ignoredErrors",Lt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=Vn(n,-1,"../drawings/drawing"+(t+1)+".xml",rn.DRAW),a[a.length]=Lt("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=Vn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",rn.VML),a[a.length]=Lt("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function ome(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function lme(t,e,r){var n=lt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=mx(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Cr(u)];b&&(h<0&&(h=g),m=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function cme(t,e,r,n){var a=lme(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&Ct(t,0,a)}var ume=Vh,Ame=tp;function dme(){}function fme(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=pce(t),r}function hme(t,e,r){r==null&&(r=lt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return py({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),TP(t,r),r.slice(0,r.l)}function mme(t){var e=Kl(t);return[e]}function pme(t,e,r){return r==null&&(r=lt(8)),Oh(e,r)}function gme(t){var e=Qh(t);return[e]}function xme(t,e,r){return r==null&&(r=lt(4)),Hh(e,r)}function vme(t){var e=Kl(t),r=t.read_shift(1);return[e,r,"b"]}function yme(t,e,r){return r==null&&(r=lt(9)),Oh(e,r),r.write_shift(1,t.v?1:0),r}function wme(t){var e=Qh(t),r=t.read_shift(1);return[e,r,"b"]}function bme(t,e,r){return r==null&&(r=lt(5)),Hh(e,r),r.write_shift(1,t.v?1:0),r}function Cme(t){var e=Kl(t),r=t.read_shift(1);return[e,r,"e"]}function Eme(t,e,r){return r==null&&(r=lt(9)),Oh(e,r),r.write_shift(1,t.v),r}function _me(t){var e=Qh(t),r=t.read_shift(1);return[e,r,"e"]}function Sme(t,e,r){return r==null&&(r=lt(8)),Hh(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Tme(t){var e=Kl(t),r=t.read_shift(4);return[e,r,"s"]}function Bme(t,e,r){return r==null&&(r=lt(12)),Oh(e,r),r.write_shift(4,e.v),r}function Nme(t){var e=Qh(t),r=t.read_shift(4);return[e,r,"s"]}function kme(t,e,r){return r==null&&(r=lt(8)),Hh(e,r),r.write_shift(4,e.v),r}function Ime(t){var e=Kl(t),r=Qi(t);return[e,r,"n"]}function Fme(t,e,r){return r==null&&(r=lt(16)),Oh(e,r),Th(t.v,r),r}function Fj(t){var e=Qh(t),r=Qi(t);return[e,r,"n"]}function Dme(t,e,r){return r==null&&(r=lt(12)),Hh(e,r),Th(t.v,r),r}function Rme(t){var e=Kl(t),r=I4(t);return[e,r,"n"]}function Lme(t,e,r){return r==null&&(r=lt(12)),Oh(e,r),BP(t.v,r),r}function Ume(t){var e=Qh(t),r=I4(t);return[e,r,"n"]}function Mme(t,e,r){return r==null&&(r=lt(8)),Hh(e,r),BP(t.v,r),r}function Pme(t){var e=Kl(t),r=B4(t);return[e,r,"is"]}function jme(t){var e=Kl(t),r=Vi(t);return[e,r,"str"]}function Ome(t,e,r){return r==null&&(r=lt(12+4*t.v.length)),Oh(e,r),Xs(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Qme(t){var e=Qh(t),r=Vi(t);return[e,r,"str"]}function Hme(t,e,r){return r==null&&(r=lt(8+4*t.v.length)),Hh(e,r),Xs(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Vme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var o=Mw(t,n-t.l,r);i[3]=Ui(o,null,a,r.supbooks,r)}else t.l=n;return i}function zme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var o=Mw(t,n-t.l,r);i[3]=Ui(o,null,a,r.supbooks,r)}else t.l=n;return i}function Gme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=Qi(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var o=Mw(t,n-t.l,r);i[3]=Ui(o,null,a,r.supbooks,r)}else t.l=n;return i}function qme(t,e,r){var n=t.l+e,a=Kl(t);a.r=r["!row"];var s=Vi(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var o=Mw(t,n-t.l,r);i[3]=Ui(o,null,a,r.supbooks,r)}else t.l=n;return i}var Kme=Vh,Wme=tp;function $me(t,e){return e==null&&(e=lt(4)),e.write_shift(4,t),e}function Xme(t,e){var r=t.l+e,n=Vh(t),a=N4(t),s=Vi(t),i=Vi(t),o=Vi(t);t.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}function Yme(t,e){var r=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));tp({s:Na(t[0]),e:Na(t[0])},r),k4("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Xs(a||"",r),Xs(t[1].Tooltip||"",r),Xs("",r),r.slice(0,r.l)}function Jme(){}function Zme(t,e,r){var n=t.l+e,a=NP(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=C0e(t,n-t.l,r);i[1]=o}else t.l=n;return i}function epe(t,e,r){var n=t.l+e,a=Vh(t),s=[a];if(r.cellFormula){var i=_0e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function tpe(t,e,r){r==null&&(r=lt(18));var n=Pw(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Dj=["left","right","top","bottom","header","footer"];function rpe(t){var e={};return Dj.forEach(function(r){e[r]=Qi(t)}),e}function npe(t,e){return e==null&&(e=lt(48)),ph(t),Dj.forEach(function(r){Th(t[r],e)}),e}function ape(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function spe(t,e,r){r==null&&(r=lt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function ipe(t){var e=lt(24);return e.write_shift(4,4),e.write_shift(4,1),tp(t,e),e}function ope(t,e){return e==null&&(e=lt(66)),e.write_shift(2,t.password?M4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function lpe(){}function cpe(){}function upe(t,e,r,n,a,s,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,y,E,B,k,F,U,P,D=[];o.biff=12,o["!row"]=0;var C=0,S=!1,N=[],H={},L=o.supbooks||a.supbooks||[[]];if(L.sharedf=H,L.arrayf=N,L.SheetNames=a.SheetNames||a.Sheets.map(function(ae){return ae.name}),!o.supbooks&&(o.supbooks=L,a.Names))for(var I=0;I<a.Names.length;++I)L[0][I+1]=a.Names[I];var j=[],z=[],ne=!1;px[16]={n:"BrtShortReal",f:Fj};var Z;if(VA(t,function(G,K,le){if(!m)switch(le){case 148:u=G;break;case 0:g=G,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),U=os(E=g.r),o["!row"]=g.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=Dm(G.hpt)),z[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:G[2]},G[2]){case"n":b.v=G[1];break;case"s":F=jg[G[1]],b.v=F.t,b.r=F.r;break;case"b":b.v=!!G[1];break;case"e":b.v=G[1],o.cellText!==!1&&(b.w=zA[b.v]);break;case"str":b.t="s",b.v=G[1];break;case"is":b.t="s",b.v=G[1].t;break}if((y=i.CellXf[G[0].iStyleRef])&&Nj(b,y.numFmtId,null,o,s,i),B=G[0].c==-1?B+1:G[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=b):l[Ba(B)+U]=b,o.cellFormula){for(S=!1,C=0;C<N.length;++C){var O=N[C];g.r>=O[0].s.r&&g.r<=O[0].e.r&&B>=O[0].s.c&&B<=O[0].e.c&&(b.F=Mr(O[0]),S=!0)}!S&&G.length>3&&(b.f=G[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),o.cellDates&&y&&b.t=="n"&&Jm(vr[y.numFmtId])){var W=ih(b.v);W&&(b.t="d",b.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},B=G[0].c==-1?B+1:G[0].c,o.dense?(l[E]||(l[E]=[]),l[E][B]=b):l[Ba(B)+U]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>B&&(d.s.c=B),d.e.r<g.r&&(d.e.r=g.r),d.e.c<B&&(d.e.c=B),Z&&(Z.type=="XLDAPR"&&(b.D=!0),Z=void 0);break;case 176:D.push(G);break;case 49:Z=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var Y=n["!id"][G.relId];for(Y?(G.Target=Y.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=Y):G.relId==""&&(G.Target="#"+G.loc),E=G.rfx.s.r;E<=G.rfx.e.r;++E)for(B=G.rfx.s.c;B<=G.rfx.e.c;++B)o.dense?(l[E]||(l[E]=[]),l[E][B]||(l[E][B]={t:"z",v:void 0}),l[E][B].l=G):(k=Cr({c:B,r:E}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=G);break;case 426:if(!o.cellFormula)break;N.push(G),P=o.dense?l[E][B]:l[Ba(B)+U],P.f=Ui(G[1],d,{r:g.r,c:B},L,o),P.F=Mr(G[0]);break;case 427:if(!o.cellFormula)break;H[Cr(G[0].s)]=G[1],P=o.dense?l[E][B]:l[Ba(B)+U],P.f=Ui(G[1],d,{r:g.r,c:B},L,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)j[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},ne||(ne=!0,P4(G.w/256)),gf(j[G.e+1]);break;case 161:l["!autofilter"]={ref:Mr(G)};break;case 476:l["!margins"]=G;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),G.name&&(a.Sheets[r].CodeName=G.name),(G.above||G.left)&&(l["!outline"]={above:G.above,left:G.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),G.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!K.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+le.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Mr(u||d)),o.sheetRows&&l["!ref"]){var ee=Cn(l["!ref"]);o.sheetRows<=+ee.e.r&&(ee.e.r=o.sheetRows-1,ee.e.r>d.e.r&&(ee.e.r=d.e.r),ee.e.r<ee.s.r&&(ee.s.r=ee.e.r),ee.e.c>d.e.c&&(ee.e.c=d.e.c),ee.e.c<ee.s.c&&(ee.s.c=ee.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Mr(ee))}return D.length>0&&(l["!merges"]=D),j.length>0&&(l["!cols"]=j),z.length>0&&(l["!rows"]=z),l}function Ape(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ma(e),e.z=e.z||vr[14],e.v=Us(ha(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Sf(a.cellXfs,e,a),e.l&&s["!links"].push([Cr(l),e.l]),e.c&&s["!comments"].push([Cr(l),e.c]),e.t){case"s":case"str":return a.bookSST?(o=V4(a.Strings,e.v,a.revStrings),l.t="s",l.v=o,i?Ct(t,18,kme(e,l)):Ct(t,7,Bme(e,l))):(l.t="str",i?Ct(t,17,Hme(e,l)):Ct(t,6,Ome(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Ct(t,13,Mme(e,l)):Ct(t,2,Lme(e,l)):i?Ct(t,16,Dme(e,l)):Ct(t,5,Fme(e,l)),!0;case"b":return l.t="b",i?Ct(t,15,bme(e,l)):Ct(t,4,yme(e,l)),!0;case"e":return l.t="e",i?Ct(t,14,Sme(e,l)):Ct(t,3,Eme(e,l)),!0}return i?Ct(t,12,xme(e,l)):Ct(t,1,pme(e,l)),!0}function dpe(t,e,r,n){var a=Cn(e["!ref"]||"A1"),s,i="",o=[];Ct(t,145);var l=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=os(d),cme(t,e,a,d);var h=!1;if(d<=a.e.r)for(var m=a.s.c;m<=a.e.c;++m){d===a.s.r&&(o[m]=Ba(m)),s=o[m]+i;var g=l?(e[d]||[])[m]:e[s];if(!g){h=!1;continue}h=Ape(t,g,d,m,n,e,h)}}Ct(t,146)}function fpe(t,e){!e||!e["!merges"]||(Ct(t,177,$me(e["!merges"].length)),e["!merges"].forEach(function(r){Ct(t,176,Wme(r))}),Ct(t,178))}function hpe(t,e){!e||!e["!cols"]||(Ct(t,390),e["!cols"].forEach(function(r,n){r&&Ct(t,60,tpe(n,r))}),Ct(t,391))}function mpe(t,e){!e||!e["!ref"]||(Ct(t,648),Ct(t,649,ipe(Cn(e["!ref"]))),Ct(t,650))}function ppe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Vn(r,-1,n[1].Target.replace(/#.*$/,""),rn.HLINK);Ct(t,494,Yme(n,a))}}),delete e["!links"]}function gpe(t,e,r,n){if(e["!comments"].length>0){var a=Vn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rn.VML);Ct(t,551,k4("rId"+a)),e["!legacy"]=a}}function xpe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Mr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Bo(s);o.s.r==o.e.r&&(o.e.r=Bo(e["!ref"]).e.r,s=Mr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Ct(t,161,tp(Cn(s))),Ct(t,162)}}function vpe(t,e,r){Ct(t,133),Ct(t,137,spe(e,r)),Ct(t,138),Ct(t,134)}function ype(t,e){e["!protect"]&&Ct(t,535,ope(e["!protect"]))}function wpe(t,e,r,n){var a=So(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Cn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ct(a,129),(r.vbaraw||i["!outline"])&&Ct(a,147,hme(o,i["!outline"])),Ct(a,148,Ame(l)),vpe(a,i,r.Workbook),hpe(a,i),dpe(a,i,t,e),ype(a,i),xpe(a,i,r,t),fpe(a,i),ppe(a,i,n),i["!margins"]&&Ct(a,476,npe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&mpe(a,i),gpe(a,i,t,n),Ct(a,130),a.end()}function bpe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=bn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function Cpe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=bpe(h);d.s.r=d.s.c=0,d.e.c=o,u=Ba(o),m[0].forEach(function(g,b){i[u+os(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Mr(d)),i}function Epe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(kj);return o&&z4(o[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function _pe(t,e){t.l+=10;var r=Vi(t);return{name:r}}function Spe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return VA(t,function(l,u,d){switch(d){case 550:s["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var G4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Tpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Bpe=[],Npe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function E6(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=da(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function _6(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=da(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Rj(t){_6(t.WBProps,G4),_6(t.CalcPr,Npe),E6(t.WBView,Tpe),E6(t.Sheets,Bpe),mm.date1904=da(t.WBProps.date1904)}function kpe(t){return!t.Workbook||!t.Workbook.WBProps?"false":da(t.Workbook.WBProps.date1904)?"true":"false"}var Ipe="][*?/\\".split("");function Lj(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Ipe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Fpe(t,e,r){t.forEach(function(n,a){Lj(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Dpe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Fpe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)k0e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Rpe=/<\w+:workbook/;function Lpe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(Ki,function(l,u){var d=Tr(l);switch(Lu(d[0])){case"<?xml":break;case"<workbook":l.match(Rpe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":G4.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=da(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=ra(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=bn(ra(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ra(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),da(d.hidden||"0")&&(s.Hidden=!0),i=u+l.length;break;case"</definedName>":s.Ref=bn(ra(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),jh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Rj(r),r}function Uj(t){var e=[cs];e[e.length]=Lt("workbook",null,{xmlns:jh[0],"xmlns:r":Rs.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(G4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Lt("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Gn(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Lt("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Lt("definedName",Gn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Upe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=r5(t),r.name=Vi(t),r}function Mpe(t,e){return e||(e=lt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),k4(t.strRelID,e),Xs(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Ppe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Vi(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function jpe(t,e){e||(e=lt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),TP(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Ope(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Qpe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=gce(t),i=E0e(t,0,r),o=N4(t);t.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}function Hpe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],px[16]={n:"BrtFRTArchID$",f:Ope},VA(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Ui(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Rj(r),r.Names=s,r.supbooks=i,r}function Vpe(t,e){Ct(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Ct(t,156,Mpe(a))}Ct(t,144)}function zpe(t,e){e||(e=lt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Xs("SheetJS",e),Xs(cy.version,e),Xs(cy.version,e),Xs("7262",e),e.length>e.l?e.slice(0,e.l):e}function Gpe(t,e){e||(e=lt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function qpe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Ct(t,135),Ct(t,158,Gpe(a)),Ct(t,136))}}function Kpe(t,e){var r=So();return Ct(r,131),Ct(r,128,zpe()),Ct(r,153,jpe(t.Workbook&&t.Workbook.WBProps||null)),qpe(r,t),Vpe(r,t),Ct(r,132),r.end()}function Wpe(t,e,r){return e.slice(-4)===".bin"?Hpe(t,r):Lpe(t,r)}function $pe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?upe(t,n,r,a,s,i,o):Q0e(t,n,r,a,s,i,o)}function Xpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Spe(t,n,r,a,s):Epe(t,n,r,a,s)}function Ype(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Zfe():ehe()}function Jpe(t,e,r,n,a,s,i,o){return e.slice(-4)===".bin"?Yfe():Jfe()}function Zpe(t,e,r,n){return e.slice(-4)===".bin"?Wde(t,r,n):Ude(t,r,n)}function ege(t,e,r){return pj(t,r)}function tge(t,e,r){return e.slice(-4)===".bin"?tde(t,r):JAe(t,r)}function rge(t,e,r){return e.slice(-4)===".bin"?qfe(t,r):Mfe(t,r)}function nge(t,e,r){return e.slice(-4)===".bin"?Rfe(t):Ffe(t)}function age(t,e,r,n){return r.slice(-4)===".bin"?Lfe(t,e,r,n):void 0}function sge(t,e,r){return e.slice(-4)===".bin"?Nfe(t,e,r):Ife(t,e,r)}function ige(t,e,r){return(e.slice(-4)===".bin"?Kpe:Uj)(t)}function oge(t,e,r,n,a){return(e.slice(-4)===".bin"?wpe:Ij)(t,r,n,a)}function lge(t,e,r){return(e.slice(-4)===".bin"?afe:hj)(t,r)}function cge(t,e,r){return(e.slice(-4)===".bin"?ade:ij)(t,r)}function uge(t,e,r){return(e.slice(-4)===".bin"?Kfe:vj)(t)}function Age(t){return(t.slice(-4)===".bin"?kfe:gj)()}var Mj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Pj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function vc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Mj),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(Pj),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function dge(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Mj),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Pj),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Qg;function fge(t,e){var r=Qg[t]||bn(t);return r==="General"?_h(e):ql(r,e)}function hge(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=da(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[bn(e)]=a}function mge(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||zA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v):t.w=_h(t.v):t.w=fge(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Qg[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Jm(n)){var a=ih(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function pge(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Bde[n.Pattern]||n.Pattern)}t[e.ID]=e}function gge(t,e,r,n,a,s,i,o,l,u){var d="General",h=n.StyleID,m={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);s[h]!==void 0&&(s[h].nf&&(d=s[h].nf),s[h].Interior&&g.push(s[h].Interior),!!s[h].Parent);)h=s[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=da(t);break;case"String":n.t="s",n.r=HF(bn(t)),n.v=t.indexOf("<")>-1?bn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(ha(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=bn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=FP[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=HF(e||t));break}if(mge(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=bn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=hm(y,a),delete n.Formula,n.ArrayRange=="RC"?n.F=hm("RC:RC",a):n.ArrayRange&&(n.F=hm(n.ArrayRange,a),l.push([Cn(n.F),n.F]))}else for(b=0;b<l.length;++b)a.r>=l[b][0].s.r&&a.r<=l[b][0].e.r&&a.c>=l[b][0].s.c&&a.c<=l[b][0].e.c&&(n.F=l[b][1]);u.cellStyles&&(g.forEach(function(E){!m.patternType&&E.patternType&&(m.patternType=E.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function xge(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function cE(t,e){var r=e||{};Zm();var n=dg(C4(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ra(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ma(r);return i.type="string",Fm.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(et){a.indexOf("<"+et)>=0&&(s=!0)}),s)return nxe(n,r);Qg={"General Number":"General","General Date":vr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":vr[15],"Short Date":vr[14],"Long Time":vr[19],"Medium Time":vr[18],"Short Time":vr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:vr[2],Standard:vr[4],Percent:vr[10],Scientific:vr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=r.dense?[]:{},g="",b={},y={},E=vc('<Data ss:Type="String">'),B=0,k=0,F=0,U={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},D={},C="",S=0,N=[],H={},L={},I=0,j=[],z=[],ne={},Z=[],ee,ae=!1,G=[],K=[],le={},O=0,W=0,Y={Sheets:[],WBProps:{date1904:!1}},te={};ux.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";o=ux.exec(n);)switch(o[3]=(ce=o[3]).toLowerCase()){case"data":if(ce=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?gge(n.slice(B,o.index),C,E,l[l.length-1][0]=="comment"?ne:b,{c:k,r:F},P,Z[k],y,G,r):(C="",E=vc(o[0]),B=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(z.length>0&&(b.c=z),(!r.sheetRows||r.sheetRows>F)&&b.v!==void 0&&(r.dense?(m[F]||(m[F]=[]),m[F][k]=b):m[Ba(k)+os(F)]=b),b.HRef&&(b.l={Target:bn(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(O=k+(parseInt(b.MergeAcross,10)|0),W=F+(parseInt(b.MergeDown,10)|0),N.push({s:{c:k,r:F},e:{c:O,r:W}})),!r.sheetStubs)b.MergeAcross?k=O+1:++k;else if(b.MergeAcross||b.MergeDown){for(var de=k;de<=O;++de)for(var me=F;me<=W;++me)(de>k||me>F)&&(r.dense?(m[me]||(m[me]=[]),m[me][de]={t:"z"}):m[Ba(de)+os(me)]={t:"z"});k=O+1}else++k;else b=dge(o[0]),b.Index&&(k=+b.Index-1),k<U.s.c&&(U.s.c=k),k>U.e.c&&(U.e.c=k),o[0].slice(-2)==="/>"&&++k,z=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(F<U.s.r&&(U.s.r=F),F>U.e.r&&(U.e.r=F),o[0].slice(-2)==="/>"&&(y=vc(o[0]),y.Index&&(F=+y.Index-1)),k=0,++F):(y=vc(o[0]),y.Index&&(F=+y.Index-1),le={},(y.AutoFitHeight=="0"||y.Height)&&(le.hpx=parseInt(y.Height,10),le.hpt=mx(le.hpx),K[F]=le),y.Hidden=="1"&&(le.hidden=!0,K[F]=le));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),U.s.r<=U.e.r&&U.s.c<=U.e.c&&(m["!ref"]=Mr(U),r.sheetRows&&r.sheetRows<=U.e.r&&(m["!fullref"]=m["!ref"],U.e.r=r.sheetRows-1,m["!ref"]=Mr(U))),N.length&&(m["!merges"]=N),Z.length>0&&(m["!cols"]=Z),K.length>0&&(m["!rows"]=K),d[g]=m}else U={s:{r:2e6,c:2e6},e:{r:0,c:0}},F=k=0,l.push([o[3],!1]),u=vc(o[0]),g=bn(u.Name),m=r.dense?[]:{},N=[],G=[],K=[],te={name:g,Hidden:0},Y.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Z=[],ae=!1}break;case"style":o[1]==="/"?pge(P,D,r):D=vc(o[0]);break;case"numberformat":D.nf=bn(vc(o[0]).Format||"General"),Qg[D.nf]&&(D.nf=Qg[D.nf]);for(var ge=0;ge!=392&&vr[ge]!=D.nf;++ge);if(ge==392){for(ge=57;ge!=392;++ge)if(vr[ge]==null){SA(D.nf,ge);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ee=vc(o[0]),ee.Hidden&&(ee.hidden=!0,delete ee.Hidden),ee.Width&&(ee.wpx=parseInt(ee.Width,10)),!ae&&ee.wpx>10){ae=!0,ji=dj;for(var Se=0;Se<Z.length;++Se)Z[Se]&&gf(Z[Se])}ae&&gf(ee),Z[ee.Index-1||Z.length]=ee;for(var xe=0;xe<+ee.Span;++xe)Z[Z.length]=ma(ee);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var ie=Tr(o[0]),Le={Name:ie.Name,Ref:hm(ie.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Le.Sheet=Y.Sheets.length-1),Y.Names.push(Le);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=vc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Hce(H,ce,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));xge(ne),z.push(ne)}else l.push([o[3],!1]),u=vc(o[0]),ne={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var nt=vc(o[0]);m["!autofilter"]={ref:hm(nt.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return k6(n,r);var Ie=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ie=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ie=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ie=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ie=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else I=o.index+o[0].length;break;case"header":m["!margins"]||ph(m["!margins"]={},"xlml"),isNaN(+Tr(o[0]).Margin)||(m["!margins"].header=+Tr(o[0]).Margin);break;case"footer":m["!margins"]||ph(m["!margins"]={},"xlml"),isNaN(+Tr(o[0]).Margin)||(m["!margins"].footer=+Tr(o[0]).Margin);break;case"pagemargins":var we=Tr(o[0]);m["!margins"]||ph(m["!margins"]={},"xlml"),isNaN(+we.Top)||(m["!margins"].top=+we.Top),isNaN(+we.Left)||(m["!margins"].left=+we.Left),isNaN(+we.Right)||(m["!margins"].right=+we.Right),isNaN(+we.Bottom)||(m["!margins"].bottom=+we.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ie=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ie=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ie=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ie=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ie=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ie=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ie=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ie=!1}break;case"smarttags":break;default:Ie=!1;break}if(Ie||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?hge(L,ce,j,n.slice(I,o.index)):(j=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=h,je.Workbook=Y,je.SSF=ma(vr),je.Props=H,je.Custprops=L,je}function c5(t,e){switch(K4(e=e||{}),e.type||"base64"){case"base64":return cE(al(t),e);case"binary":case"buffer":case"file":return cE(t,e);case"array":return cE(Ef(t),e)}}function vge(t,e){var r=[];return t.Props&&r.push(Vce(t.Props,e)),t.Custprops&&r.push(zce(t.Props,t.Custprops)),r.join("")}function yge(){return""}function wge(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Lt("NumberFormat",null,{"ss:Format":Gn(vr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Lt("Style",s.join(""),i))}),Lt("Styles",r.join(""))}function jj(t){return Lt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Q4(t.Ref,{r:0,c:0})})}function bge(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(jj(a)))}return Lt("Names",r.join(""))}function Cge(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(jj(o)))}return s.join("")}function Ege(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Lt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Lt("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Lt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Lt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(di("ProtectContents","True")),t["!protect"].objects&&a.push(di("ProtectObjects","True")),t["!protect"].scenarios&&a.push(di("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(di("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Lt("WorksheetOptions",a.join(""),{xmlns:Xo.x})}function _ge(t){return t.map(function(e){var r=qle(e.t||""),n=Lt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Lt("Comment",n,{"ss:Author":e.a})}).join("")}function Sge(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Gn(Q4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Na(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Gn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Gn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=zA[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||vr[14]);break;case"s":h="String",m=Gle(t.v||"");break}var g=Sf(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",y=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(y+=_ge(t.c)),Lt("Cell",y,o)}function Tge(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Dm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Bge(t,e,r,n){if(!t["!ref"])return"";var a=Cn(t["!ref"]),s=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(E,B){gf(E);var k=!!E.width,F=Pw(B,E),U={"ss:Index":B+1};k&&(U["ss:Width"]=fx(F.width)),E.hidden&&(U["ss:Hidden"]="1"),o.push(Lt("Column",null,U))});for(var l=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[Tge(u,(t["!rows"]||[])[u])],h=a.s.c;h<=a.e.c;++h){var m=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>h)&&!(s[i].s.r>u)&&!(s[i].e.c<h)&&!(s[i].e.r<u)){(s[i].s.c!=h||s[i].s.r!=u)&&(m=!0);break}if(!m){var g={r:u,c:h},b=Cr(g),y=l?(t[u]||[])[h]:t[b];d.push(Sge(y,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Nge(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?Cge(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?Bge(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Ege(s,e,t,r)),n.join("")}function kge(t,e){e||(e={}),t.SSF||(t.SSF=ma(vr)),t.SSF&&(Zm(),Iw(t.SSF),e.revssf=Dw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(vge(t,e)),r.push(yge()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Lt("Worksheet",Nge(n,e,t),{"ss:Name":Gn(t.SheetNames[n])}));return r[2]=wge(t,e),r[3]=bge(t),cs+Lt("Workbook",r.join(""),{xmlns:Xo.ss,"xmlns:o":Xo.o,"xmlns:x":Xo.x,"xmlns:ss":Xo.ss,"xmlns:dt":Xo.dt,"xmlns:html":Xo.html})}function Ige(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=bce(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=Cce(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Fge=[60,1084,2066,2165,2175];function Dge(t,e,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=bA(r,r.l),u=u5[l],d=0;u!=null&&Fge.indexOf(l)>-1;)s=bA(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=u5[l=bA(r,r.l)];var h=$s(i);ui(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,a)}function mu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=vr[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||zA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=ox(t.v):t.w=_h(t.v):t.w=ql(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&Jm(vr[n]||String(n))){var a=ih(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Bv(t,e,r){return{v:t,ixfe:e,t:r}}function Rge(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},o=null,l=[],u="",d={},h,m="",g,b,y,E,B={},k=[],F,U,P=[],D=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},N=function(Ft){return Ft<8?fh[Ft]:Ft<64&&D[Ft-8]||fh[Ft]},H=function(Ft,xt,yr){var Jt=xt.XF.data;if(!(!Jt||!Jt.patternType||!yr||!yr.cellStyles)){xt.s={},xt.s.patternType=Jt.patternType;var fn;(fn=dx(N(Jt.icvFore)))&&(xt.s.fgColor={rgb:fn}),(fn=dx(N(Jt.icvBack)))&&(xt.s.bgColor={rgb:fn})}},L=function(Ft,xt,yr){if(!(le>1)&&!(yr.sheetRows&&Ft.r>=yr.sheetRows)){if(yr.cellStyles&&xt.XF&&xt.XF.data&&H(Ft,xt,yr),delete xt.ixfe,delete xt.XF,h=Ft,m=Cr(Ft),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ft.r<i.s.r&&(i.s.r=Ft.r),Ft.c<i.s.c&&(i.s.c=Ft.c),Ft.r+1>i.e.r&&(i.e.r=Ft.r+1),Ft.c+1>i.e.c&&(i.e.c=Ft.c+1),yr.cellFormula&&xt.f){for(var Jt=0;Jt<k.length;++Jt)if(!(k[Jt][0].s.c>Ft.c||k[Jt][0].s.r>Ft.r)&&!(k[Jt][0].e.c<Ft.c||k[Jt][0].e.r<Ft.r)){xt.F=Mr(k[Jt][0]),(k[Jt][0].s.c!=Ft.c||k[Jt][0].s.r!=Ft.r)&&delete xt.f,xt.f&&(xt.f=""+Ui(k[Jt][1],i,Ft,G,I));break}}yr.dense?(a[Ft.r]||(a[Ft.r]=[]),a[Ft.r][Ft.c]=xt):a[m]=xt}},I={enc:!1,sbcch:0,snames:[],sharedf:B,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(I.password=e.password);var j,z=[],ne=[],Z=[],ee=[],ae=!1,G=[];G.SheetNames=I.snames,G.sharedf=I.sharedf,G.arrayf=I.arrayf,G.names=[],G.XTI=[];var K=0,le=0,O=0,W=[],Y=[],te;I.codepage=1200,Sc(1200);for(var ce=!1;t.l<t.length-1;){var de=t.l,me=t.read_shift(2);if(me===0&&K===10)break;var ge=t.l===t.length?0:t.read_shift(2),Se=u5[me];if(Se&&Se.f){if(e.bookSheets&&K===133&&me!==133)break;if(K=me,Se.r===2||Se.r==12){var xe=t.read_shift(2);if(ge-=2,!I.enc&&xe!==me&&((xe&255)<<8|xe>>8)!==me)throw new Error("rt mismatch: "+xe+"!="+me);Se.r==12&&(t.l+=10,ge-=10)}var ie={};if(me===10?ie=Se.f(t,ge,I):ie=Dge(me,Se,t,ge,I),le==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(me){case 34:r.opts.Date1904=C.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(t.l=0),I.enc=ie,!e.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=ie;break;case 66:var Le=Number(ie);switch(Le){case 21010:Le=1200;break;case 32768:Le=1e4;break;case 32769:Le=1252;break}Sc(I.codepage=Le),ce=!0;break;case 317:I.rrtabid=ie;break;case 25:I.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:I.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(a["!type"]="dialog"),ie.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ie.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:P.push(ie);break;case 430:G.push([ie]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(ie);break;case 24:case 536:te={Name:ie.Name,Ref:Ui(ie.rgce,i,null,G,I)},ie.itab>0&&(te.Sheet=ie.itab-1),G.names.push(te),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(Y[ie.itab-1]={ref:Mr(ie.rgce[0][0][1][2])});break;case 22:I.ExternCount=ie;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(ie),G.XTI=G.XTI.concat(ie);break;case 2196:if(I.biff<8)break;te!=null&&(te.Comment=ie[1]);break;case 18:a["!protect"]=ie;break;case 19:ie!==0&&I.WTF&&console.error("Password verifier: "+ie);break;case 133:s[ie.pos]=ie,I.snames.push(ie.name);break;case 10:{if(--le)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=Mr(i),e.sheetRows&&e.sheetRows<=i.e.r){var nt=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Mr(i),i.e.r=nt}i.e.r++,i.e.c++}z.length>0&&(a["!merges"]=z),ne.length>0&&(a["!objects"]=ne),Z.length>0&&(a["!cols"]=Z),ee.length>0&&(a["!rows"]=ee),C.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),I.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(I.biff=5,ce=!0,Sc(I.codepage=28591)),I.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(I.biff=2),le++)break;if(a=e.dense?[]:{},I.biff<8&&!ce&&(ce=!0,Sc(I.codepage=e.codepage||1252)),I.biff<5||ie.BIFFVer==0&&ie.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ie={pos:t.l-ge,name:u};s[Ie.pos]=Ie,I.snames.push(u)}else u=(s[de]||{name:""}).name;ie.dt==32&&(a["!type"]="chart"),ie.dt==64&&(a["!type"]="macro"),z=[],ne=[],I.arrayf=k=[],Z=[],ee=[],ae=!1,S={Hidden:(s[de]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[ie.r]||[])[ie.c]:a[Cr({c:ie.c,r:ie.r})])&&++ie.c,F={ixfe:ie.ixfe,XF:P[ie.ixfe]||{},v:ie.val,t:"n"},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e);break;case 5:case 517:F={ixfe:ie.ixfe,XF:P[ie.ixfe],v:ie.val,t:ie.t},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e);break;case 638:F={ixfe:ie.ixfe,XF:P[ie.ixfe],v:ie.rknum,t:"n"},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e);break;case 189:for(var we=ie.c;we<=ie.C;++we){var je=ie.rkrec[we-ie.c][0];F={ixfe:je,XF:P[je],v:ie.rkrec[we-ie.c][1],t:"n"},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:we,r:ie.r},F,e)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(F=Bv(ie.val,ie.cell.ixfe,ie.tt),F.XF=P[F.ixfe],e.cellFormula){var et=ie.formula;if(et&&et[0]&&et[0][0]&&et[0][0][0]=="PtgExp"){var st=et[0][0][1][0],mt=et[0][0][1][1],_t=Cr({r:st,c:mt});B[_t]?F.f=""+Ui(ie.formula,i,ie.cell,G,I):F.F=((e.dense?(a[st]||[])[mt]:a[_t])||{}).F}else F.f=""+Ui(ie.formula,i,ie.cell,G,I)}O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L(ie.cell,F,e),o=ie}break;case 7:case 519:if(o)o.val=ie,F=Bv(ie,o.cell.ixfe,"s"),F.XF=P[F.ixfe],e.cellFormula&&(F.f=""+Ui(o.formula,i,o.cell,G,I)),O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L(o.cell,F,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ie);var ut=Cr(ie[0].s);if(g=e.dense?(a[ie[0].s.r]||[])[ie[0].s.c]:a[ut],e.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+Ui(ie[1],i,ie[0],G,I),g.F=Mr(ie[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;B[Cr(o.cell)]=ie[0],g=e.dense?(a[o.cell.r]||[])[o.cell.c]:a[Cr(o.cell)],(g||{}).f=""+Ui(ie[0],i,h,G,I)}}break;case 253:F=Bv(l[ie.isst].t,ie.ixfe,"s"),l[ie.isst].h&&(F.h=l[ie.isst].h),F.XF=P[F.ixfe],O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e);break;case 513:e.sheetStubs&&(F={ixfe:ie.ixfe,XF:P[ie.ixfe],t:"z"},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e));break;case 190:if(e.sheetStubs)for(var Nt=ie.c;Nt<=ie.C;++Nt){var Qt=ie.ixfe[Nt-ie.c];F={ixfe:Qt,XF:P[Qt],t:"z"},O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:Nt,r:ie.r},F,e)}break;case 214:case 516:case 4:F=Bv(ie.val,ie.ixfe,"s"),F.XF=P[F.ixfe],O>0&&(F.z=W[F.ixfe>>8&63]),mu(F,e,r.opts.Date1904),L({c:ie.c,r:ie.r},F,e);break;case 0:case 512:le===1&&(i=ie);break;case 252:l=ie;break;case 1054:if(I.biff==4){W[O++]=ie[1];for(var Yt=0;Yt<O+163&&vr[Yt]!=ie[1];++Yt);Yt>=163&&SA(ie[1],O+163)}else SA(ie[1],ie[0]);break;case 30:{W[O++]=ie;for(var kt=0;kt<O+163&&vr[kt]!=ie;++kt);kt>=163&&SA(ie,O+163)}break;case 229:z=z.concat(ie);break;case 93:ne[ie.cmo[0]]=I.lastobj=ie;break;case 438:I.lastobj.TxO=ie;break;case 127:I.lastobj.ImData=ie;break;case 440:for(E=ie[0].s.r;E<=ie[0].e.r;++E)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=e.dense?(a[E]||[])[y]:a[Cr({c:y,r:E})],g&&(g.l=ie[1]);break;case 2048:for(E=ie[0].s.r;E<=ie[0].e.r;++E)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=e.dense?(a[E]||[])[y]:a[Cr({c:y,r:E})],g&&g.l&&(g.l.Tooltip=ie[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;g=e.dense?(a[ie[0].r]||[])[ie[0].c]:a[Cr(ie[0])];var It=ne[ie[2]];g||(e.dense?(a[ie[0].r]||(a[ie[0].r]=[]),g=a[ie[0].r][ie[0].c]={t:"z"}):g=a[Cr(ie[0])]={t:"z"},i.e.r=Math.max(i.e.r,ie[0].r),i.s.r=Math.min(i.s.r,ie[0].r),i.e.c=Math.max(i.e.c,ie[0].c),i.s.c=Math.min(i.s.c,ie[0].c)),g.c||(g.c=[]),b={a:ie[1],t:It.TxO.t},g.c.push(b)}break;case 2173:wfe(P[ie.ixfe],ie.ext);break;case 125:{if(!I.cellStyles)break;for(;ie.e>=ie.s;)Z[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},ae||(ae=!0,P4(ie.w/256)),gf(Z[ie.e+1])}break;case 520:{var Wt={};ie.level!=null&&(ee[ie.r]=Wt,Wt.level=ie.level),ie.hidden&&(ee[ie.r]=Wt,Wt.hidden=!0),ie.hpt&&(ee[ie.r]=Wt,Wt.hpt=ie.hpt,Wt.hpx=Dm(ie.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||ph(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ie;break;case 161:a["!margins"]||ph(a["!margins"]={}),a["!margins"].header=ie.header,a["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(C.Views[0].RTL=!0);break;case 146:D=ie;break;case 2198:j=ie;break;case 140:U=ie;break;case 442:u?S.CodeName=ie||S.name:C.WBProps.CodeName=ie||"ThisWorkbook";break}}else Se||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=ge}return r.SheetNames=Ga(s).sort(function(Dt,Ft){return Number(Dt)-Number(Ft)}).map(function(Dt){return s[Dt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(Dt,Ft){r.Sheets[r.SheetNames[Ft]]["!autofilter"]=Dt}),r.Strings=l,r.SSF=ma(vr),I.enc&&(r.Encryption=I.enc),j&&(r.Themes=j),r.Metadata={},U!==void 0&&(r.Metadata.Country=U),G.names.length>0&&(C.Names=G.names),r.Workbook=C,r}var Hg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Lge(t,e,r){var n=cr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=i6(n,n5,Hg.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=cr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=i6(i,a5,Hg.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(PP(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Uge(t,e){var r=[],n=[],a=[],s=0,i,o=UF(n5,"n"),l=UF(a5,"n");if(t.Props)for(i=Ga(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Ga(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(l,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)GP.indexOf(a[s][0])>-1||MP.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&cr.utils.cfb_add(e,"/SummaryInformation",o6(n,Hg.SI,l,a5)),(r.length||u.length)&&cr.utils.cfb_add(e,"/DocumentSummaryInformation",o6(r,Hg.DSI,o,n5,u.length?u:null,Hg.UDI))}function Oj(t,e){e||(e={}),K4(e),h4(),e.codepage&&f4(e.codepage);var r,n;if(t.FullPaths){if(cr.find(t,"/encryption"))throw new Error("File is password-protected");r=cr.find(t,"!CompObj"),n=cr.find(t,"/Workbook")||cr.find(t,"/Book")}else{switch(e.type){case"base64":t=Jo(al(t));break;case"binary":t=Jo(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}ui(t,0),n={content:t}}var a,s;if(r&&Ige(r),e.bookProps&&!e.bookSheets)a={};else{var i=Xr?"buffer":"array";if(n&&n.content)a=Rge(n.content,e);else if((s=cr.find(t,"PerfectOffice_MAIN"))&&s.content)a=mh.to_workbook(s.content,(e.type=i,e));else if((s=cr.find(t,"NativeContent_MAIN"))&&s.content)a=mh.to_workbook(s.content,(e.type=i,e));else throw(s=cr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&cr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=$fe(t))}var o={};return t.FullPaths&&Lge(t,o,e),a.Props=a.Custprops=o,e.bookFiles&&(a.cfb=t),a}function Mge(t,e){var r=e||{},n=cr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return cr.utils.cfb_add(n,a,Qj(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Uge(t,n),r.biff==8&&t.vbaraw&&Xfe(n,cr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var px={0:{f:ome},1:{f:mme},2:{f:Rme},3:{f:Cme},4:{f:vme},5:{f:Ime},6:{f:jme},7:{f:Tme},8:{f:qme},9:{f:Gme},10:{f:Vme},11:{f:zme},12:{f:gme},13:{f:Ume},14:{f:_me},15:{f:wme},16:{f:Fj},17:{f:Qme},18:{f:Nme},19:{f:B4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Qpe},40:{},42:{},43:{f:jde},44:{f:Mde},45:{f:Hde},46:{f:zde},47:{f:Vde},48:{},49:{f:uce},50:{},51:{f:Efe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:rj},62:{f:Pme},63:{f:Dfe},64:{f:lpe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Gi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ape},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:fme},148:{f:ume,p:16},151:{f:Jme},152:{},153:{f:Ppe},154:{},155:{},156:{f:Upe},157:{},158:{},159:{T:1,f:ede},160:{T:-1},161:{T:1,f:Vh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:bfe},336:{T:-1},337:{f:Tfe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:r5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:tj},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Zme},427:{f:epe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:rpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Xme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:r5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:zfe},633:{T:1},634:{T:-1},635:{T:1,f:Hfe},636:{T:-1},637:{f:hce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_pe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:cpe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},u5={6:{f:oE},10:{f:Bd},12:{f:ws},13:{f:ws},14:{f:es},15:{f:es},16:{f:Qi},17:{f:es},18:{f:es},19:{f:ws},20:{f:f6},21:{f:f6},23:{f:tj},24:{f:m6},25:{f:es},26:{},27:{},28:{f:cAe},29:{},34:{f:es},35:{f:h6},38:{f:Qi},39:{f:Qi},40:{f:Qi},41:{f:Qi},42:{f:es},43:{f:es},47:{f:wde},49:{f:Uue},51:{f:ws},60:{},61:{f:Iue},64:{f:es},65:{f:Lue},66:{f:ws},77:{},80:{},81:{},82:{},85:{f:ws},89:{},90:{},91:{},92:{f:yue},93:{f:dAe},94:{},95:{f:es},96:{},97:{},99:{f:es},125:{f:rj},128:{f:Yue},129:{f:bue},130:{f:ws},131:{f:es},132:{f:es},133:{f:Cue},134:{},140:{f:yAe},141:{f:ws},144:{},146:{f:CAe},151:{},152:{},153:{},154:{},155:{},156:{f:ws},157:{},158:{},160:{f:kAe},161:{f:SAe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Kue},190:{f:Wue},193:{f:Bd},197:{},198:{},199:{},200:{},201:{},202:{f:es},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ws},220:{},221:{f:es},222:{},224:{f:Xue},225:{f:vue},226:{f:Bd},227:{},229:{f:uAe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:_ue},253:{f:Pue},255:{f:Tue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:qP},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:es},353:{f:Bd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:rAe},431:{f:es},432:{},433:{},434:{},437:{},438:{f:mAe},439:{f:es},440:{f:pAe},441:{},442:{f:Xx},443:{},444:{f:ws},445:{},446:{},448:{f:Bd},449:{f:kue,r:2},450:{f:Bd},512:{f:u6},513:{f:NAe},515:{f:eAe},516:{f:Oue},517:{f:d6},519:{f:IAe},520:{f:Bue},523:{},545:{f:p6},549:{f:c6},566:{},574:{f:Due},638:{f:que},659:{},1048:{},1054:{f:Hue},1084:{},1212:{f:iAe},2048:{f:xAe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:_v},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Bd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:EAe,r:12},2173:{f:yfe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:es,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:sAe,r:12},2197:{},2198:{f:hfe,r:12},2199:{},2200:{},2201:{},2202:{f:oAe,r:12},2203:{f:Bd},2204:{},2205:{},2206:{},2207:{},2211:{f:Nue},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ws},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:TAe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:bAe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:u6},1:{},2:{f:UAe},3:{f:RAe},4:{f:DAe},5:{f:d6},7:{f:PAe},8:{},9:{f:_v},11:{},22:{f:ws},30:{f:zue},31:{},32:{},33:{f:p6},36:{},37:{f:c6},50:{f:jAe},62:{},52:{},67:{},68:{f:ws},69:{},86:{},126:{},127:{f:FAe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:OAe},223:{},234:{},354:{},421:{},518:{f:oE},521:{f:_v},536:{f:m6},547:{f:h6},561:{},579:{},1030:{f:oE},1033:{f:_v},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ut(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&_4(r)&&t.push(r)}}function Pge(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Ut(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function e1(t,e,r){return t||(t=lt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function jge(t,e,r,n){var a=lt(9);return e1(a,t,e),KP(r,n||"b",a),a}function Oge(t,e,r){var n=lt(8+2*r.length);return e1(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Qge(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Us(ha(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Ut(t,2,MAe(r,n,a)):Ut(t,3,LAe(r,n,a));return;case"b":case"e":Ut(t,5,jge(r,n,e.v,e.t));return;case"s":case"str":Ut(t,4,Oge(r,n,(e.v||"").slice(0,255)));return}Ut(t,1,e1(null,r,n))}function Hge(t,e,r,n){var a=Array.isArray(e),s=Cn(e["!ref"]||"A1"),i,o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=Mr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=os(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(l[d]=Ba(d)),i=l[d]+o;var h=a?(e[u]||[])[d]:e[i];h&&Qge(t,h,u,d)}}}function Vge(t,e){for(var r=e||{},n=So(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ut(n,r.biff==4?1033:r.biff==3?521:9,L4(t,16,r)),Hge(n,t.Sheets[t.SheetNames[a]],a,r),Ut(n,10),n.end()}function zge(t,e,r){Ut(t,49,Mue({sz:12,name:"Arial"},r))}function Gge(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Ut(t,1054,Vue(a,e[a],r))})}function qge(t,e){var r=lt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ut(t,2151,r),r=lt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),JP(Cn(e["!ref"]||"A1"),r),r.write_shift(4,4),Ut(t,2152,r)}function Kge(t,e){for(var r=0;r<16;++r)Ut(t,224,A6({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Ut(t,224,A6(n,0,e))})}function Wge(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Ut(t,440,gAe(n)),n[1].Tooltip&&Ut(t,2048,vAe(n))}delete e["!links"]}function $ge(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Ut(t,125,_Ae(Pw(a,n),a))})}}function Xge(t,e,r,n,a){var s=16+Sf(a.cellXfs,e,a);if(e.v==null&&!e.bf){Ut(t,513,Nh(r,n,s));return}if(e.bf)Ut(t,6,b0e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Us(ha(e.v)):e.v;Ut(t,515,tAe(r,n,i,s));break;case"b":case"e":Ut(t,517,Zue(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var o=V4(a.Strings,e.v,a.revStrings);Ut(t,253,jue(r,n,o,s))}else Ut(t,516,Que(r,n,(e.v||"").slice(0,255),s,a));break;default:Ut(t,513,Nh(r,n,s))}}function Yge(t,e,r){var n=So(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(s),u=e.biff==8,d,h="",m=[],g=Cn(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Ut(n,2057,L4(r,16,e)),Ut(n,13,Ul(1)),Ut(n,12,Ul(100)),Ut(n,15,eo(!0)),Ut(n,17,eo(!1)),Ut(n,16,Th(.001)),Ut(n,95,eo(!0)),Ut(n,42,eo(!1)),Ut(n,43,eo(!1)),Ut(n,130,Ul(1)),Ut(n,128,Jue()),Ut(n,131,eo(!1)),Ut(n,132,eo(!1)),u&&$ge(n,s["!cols"]),Ut(n,512,Gue(g,e)),u&&(s["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){h=os(y);for(var E=g.s.c;E<=g.e.c;++E){y===g.s.r&&(m[E]=Ba(E)),d=m[E]+h;var B=l?(s[y]||[])[E]:s[d];B&&(Xge(n,B,y,E,e),u&&B.l&&s["!links"].push([d,B.l]))}}var k=o.CodeName||o.name||a;return u&&Ut(n,574,Rue((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ut(n,229,AAe(s["!merges"])),u&&Wge(n,s),Ut(n,442,WP(k)),u&&qge(n,s),Ut(n,10),n.end()}function Jge(t,e,r){var n=So(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,l=r.biff==5;if(Ut(n,2057,L4(t,5,r)),r.bookType=="xla"&&Ut(n,135),Ut(n,225,o?Ul(1200):null),Ut(n,193,Zce(2)),l&&Ut(n,191),l&&Ut(n,192),Ut(n,226),Ut(n,92,wue("SheetJS",r)),Ut(n,66,Ul(o?1200:1252)),o&&Ut(n,353,Ul(0)),o&&Ut(n,448),Ut(n,317,BAe(t.SheetNames.length)),o&&t.vbaraw&&Ut(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Ut(n,442,WP(u))}Ut(n,156,Ul(17)),Ut(n,25,eo(!1)),Ut(n,18,eo(!1)),Ut(n,19,Ul(0)),o&&Ut(n,431,eo(!1)),o&&Ut(n,444,Ul(0)),Ut(n,61,Fue()),Ut(n,64,eo(!1)),Ut(n,141,Ul(0)),Ut(n,34,eo(kpe(t)=="true")),Ut(n,14,eo(!0)),o&&Ut(n,439,eo(!1)),Ut(n,218,Ul(0)),zge(n,t,r),Gge(n,t.SSF,r),Kge(n,r),o&&Ut(n,352,eo(!1));var d=n.end(),h=So();o&&Ut(h,140,wAe()),o&&r.Strings&&Pge(h,252,Sue(r.Strings)),Ut(h,10);var m=h.end(),g=So(),b=0,y=0;for(y=0;y<t.SheetNames.length;++y)b+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var E=d.length+b+m.length;for(y=0;y<t.SheetNames.length;++y){var B=s[y]||{};Ut(g,133,Eue({pos:E,hs:B.Hidden||0,dt:0,name:t.SheetNames[y]},r)),E+=e[y].length}var k=g.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var F=[];return d.length&&F.push(d),k.length&&F.push(k),m.length&&F.push(m),$s(F)}function Zge(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(Zm(),Iw(t.SSF),r.revssf=Dw(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,W4(r),r.cellXfs=[],Sf(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=Yge(a,r,t);return n.unshift(Jge(t,n,r)),$s(n)}function Qj(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Bo(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Zge(t,e);case 4:case 3:case 2:return Vge(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function S6(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,o=s&&s.index||t.length,l=Mle(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var y=l[i].trim(),E=y.slice(0,3).toLowerCase();if(E=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(E!="<td"&&E!="<th")){var B=y.split(/<\/t[dh]>/i);for(o=0;o<B.length;++o){var k=B[o].trim();if(k.match(/<t[dh]/i)){for(var F=k,U=0;F.charAt(0)=="<"&&(U=F.indexOf(">"))>-1;)F=F.slice(U+1);for(var P=0;P<b.length;++P){var D=b[P];D.s.c==d&&D.s.r<u&&u<=D.e.r&&(d=D.e.c+1,P=-1)}var C=Tr(k.slice(0,k.indexOf(">")));m=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||m>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var S=C.t||C["data-t"]||"";if(!F.length){d+=m;continue}if(F=AP(F),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!F.length){d+=m;continue}var N={t:"s",v:F};r.raw||!F.trim().length||S=="s"||(F==="TRUE"?N={t:"b",v:!0}:F==="FALSE"?N={t:"b",v:!1}:isNaN(Bc(F))?isNaN(Im(F).getDate())||(N={t:"d",v:ha(F)},r.cellDates||(N={t:"n",v:Us(N.v)}),N.z=r.dateNF||vr[14]):N={t:"n",v:Bc(F)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=N):n[Cr({r:u,c:d})]=N,d+=m}}}}return n["!ref"]=Mr(g),b.length&&(n["!merges"]=b),n}function exe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Cr({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||b4(h.w||(RA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(n.id||"sjs")+"-"+d,s.push(Lt("td",m,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var txe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',rxe="</body></html>";function nxe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _f(S6(r[0],e),e);var n=J4();return r.forEach(function(a,s){Z4(n,S6(a,e),"Sheet"+(s+1))}),n}function axe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Hj(t,e){var r=e||{},n=r.header!=null?r.header:txe,a=r.footer!=null?r.footer:rxe,s=[n],i=Bo(t["!ref"]);r.dense=Array.isArray(t),s.push(axe(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(exe(t,i,o,r));return s.push("</table>"+a),s.join("")}function Vj(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Na(n.origin):n.origin;a=i.r,s=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Bo(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,y=0,E=0,B=0,k=0,F=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&y<l;++b){var U=o[b];if(T6(U)){if(n.display)continue;g[y]={hidden:!0}}var P=U.children;for(E=B=0;E<P.length;++E){var D=P[E];if(!(n.display&&T6(D))){var C=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):AP(D.innerHTML),S=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var N=h[m];N.s.c==B+s&&N.s.r<y+a&&y+a<=N.e.r&&(B=N.e.c+1-s,m=-1)}F=+D.getAttribute("colspan")||1,((k=+D.getAttribute("rowspan")||1)>1||F>1)&&h.push({s:{r:y+a,c:B+s},e:{r:y+a+(k||1)-1,c:B+s+(F||1)-1}});var H={t:"s",v:C},L=D.getAttribute("data-t")||D.getAttribute("t")||"";C!=null&&(C.length==0?H.t=L||"z":n.raw||C.trim().length==0||L=="s"||(C==="TRUE"?H={t:"b",v:!0}:C==="FALSE"?H={t:"b",v:!1}:isNaN(Bc(C))?isNaN(Im(C).getDate())||(H={t:"d",v:ha(C)},n.cellDates||(H={t:"n",v:Us(H.v)}),H.z=n.dateNF||vr[14]):H={t:"n",v:Bc(C)})),H.z===void 0&&S!=null&&(H.z=S);var I="",j=D.getElementsByTagName("A");if(j&&j.length)for(var z=0;z<j.length&&!(j[z].hasAttribute("href")&&(I=j[z].getAttribute("href"),I.charAt(0)!="#"));++z);I&&I.charAt(0)!="#"&&(H.l={Target:I}),n.dense?(t[y+a]||(t[y+a]=[]),t[y+a][B+s]=H):t[Cr({c:B+s,r:y+a})]=H,u.e.c<B+s&&(u.e.c=B+s),B+=F}}++y}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,y-1+a),t["!ref"]=Mr(u),y>=l&&(t["!fullref"]=Mr((u.e.r=o.length-b+y-1+a,u))),t}function zj(t,e){var r=e||{},n=r.dense?[]:{};return Vj(n,t,e)}function sxe(t,e){return _f(zj(t,e),e)}function T6(t){var e="",r=ixe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function ixe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function oxe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=bn(e.replace(/<[^>]*>/g,""));return[r]}var B6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Gj(t,e){var r=e||{},n=C4(t),a=[],s,i,o={name:""},l="",u=0,d,h,m={},g=[],b=r.dense?[]:{},y,E,B={value:""},k="",F=0,U=[],P=-1,D=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,N={},H=[],L={},I=0,j=0,z=[],ne=1,Z=1,ee=[],ae={Names:[]},G={},K=["",""],le=[],O={},W="",Y=0,te=!1,ce=!1,de=0;for(ux.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=ux.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?b["!ref"]=Mr(C):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(b["!fullref"]=b["!ref"],C.e.r=r.sheetRows-1,b["!ref"]=Mr(C)),H.length&&(b["!merges"]=H),z.length&&(b["!rows"]=z),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,ce=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Tr(y[0],!1),P=D=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,b=r.dense?[]:{},H=[],z=[],ce=!0);break;case"table-row-group":y[1]==="/"?--S:++S;break;case"table-row":case"行":if(y[1]==="/"){P+=ne,ne=1;break}if(h=Tr(y[0],!1),h.行号?P=h.行号-1:P==-1&&(P=0),ne=+h["number-rows-repeated"]||1,ne<10)for(de=0;de<ne;++de)S>0&&(z[P+de]={level:S});D=-1;break;case"covered-table-cell":y[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(b[P]||(b[P]=[]),b[P][D]={t:"z"}):b[Cr({r:P,c:D})]={t:"z"}),k="",U=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++D,B=Tr(y[0],!1),Z=parseInt(B["number-columns-repeated"]||"1",10),E={t:"z",v:null},B.formula&&r.cellFormula!=!1&&(E.f=C6(bn(B.formula))),(B.数据类型||B["value-type"])=="string"&&(E.t="s",E.v=bn(B["string-value"]||""),r.dense?(b[P]||(b[P]=[]),b[P][D]=E):b[Cr({r:P,c:D})]=E),D+=Z-1;else if(y[1]!=="/"){++D,k="",F=0,U=[],Z=1;var me=ne?P+ne-1:P;if(D>C.e.c&&(C.e.c=D),D<C.s.c&&(C.s.c=D),P<C.s.r&&(C.s.r=P),me>C.e.r&&(C.e.r=me),B=Tr(y[0],!1),le=[],O={},E={t:B.数据类型||B["value-type"],v:null},r.cellFormula)if(B.formula&&(B.formula=bn(B.formula)),B["number-matrix-columns-spanned"]&&B["number-matrix-rows-spanned"]&&(I=parseInt(B["number-matrix-rows-spanned"],10)||0,j=parseInt(B["number-matrix-columns-spanned"],10)||0,L={s:{r:P,c:D},e:{r:P+I-1,c:D+j-1}},E.F=Mr(L),ee.push([L,E.F])),B.formula)E.f=C6(B.formula);else for(de=0;de<ee.length;++de)P>=ee[de][0].s.r&&P<=ee[de][0].e.r&&D>=ee[de][0].s.c&&D<=ee[de][0].e.c&&(E.F=ee[de][1]);switch((B["number-columns-spanned"]||B["number-rows-spanned"])&&(I=parseInt(B["number-rows-spanned"],10)||0,j=parseInt(B["number-columns-spanned"],10)||0,L={s:{r:P,c:D},e:{r:P+I-1,c:D+j-1}},H.push(L)),B["number-columns-repeated"]&&(Z=parseInt(B["number-columns-repeated"],10)),E.t){case"boolean":E.t="b",E.v=da(B["boolean-value"]);break;case"float":E.t="n",E.v=parseFloat(B.value);break;case"percentage":E.t="n",E.v=parseFloat(B.value);break;case"currency":E.t="n",E.v=parseFloat(B.value);break;case"date":E.t="d",E.v=ha(B["date-value"]),r.cellDates||(E.t="n",E.v=Us(E.v)),E.z="m/d/yy";break;case"time":E.t="n",E.v=Rle(B["time-value"])/86400,r.cellDates&&(E.t="d",E.v=Rw(E.v)),E.z="HH:MM:SS";break;case"number":E.t="n",E.v=parseFloat(B.数据数值);break;default:if(E.t==="string"||E.t==="text"||!E.t)E.t="s",B["string-value"]!=null&&(k=bn(B["string-value"]),U=[]);else throw new Error("Unsupported value type "+E.t)}}else{if(te=!1,E.t==="s"&&(E.v=k||"",U.length&&(E.R=U),te=F==0),G.Target&&(E.l=G),le.length>0&&(E.c=le,le=[]),k&&r.cellText!==!1&&(E.w=k),te&&(E.t="z",delete E.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var ge=0;ge<ne;++ge){if(Z=parseInt(B["number-columns-repeated"]||"1",10),r.dense)for(b[P+ge]||(b[P+ge]=[]),b[P+ge][D]=ge==0?E:ma(E);--Z>0;)b[P+ge][D+Z]=ma(E);else for(b[Cr({r:P+ge,c:D})]=E;--Z>0;)b[Cr({r:P+ge,c:D+Z})]=ma(E);C.e.c<=D&&(C.e.c=D)}Z=parseInt(B["number-columns-repeated"]||"1",10),D+=Z-1,Z=0,E={},k="",U=[]}G={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s;O.t=k,U.length&&(O.R=U),O.a=W,le.push(O)}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);W="",Y=0,k="",F=0,U=[];break;case"creator":y[1]==="/"?W=n.slice(Y,y.index):Y=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);k="",F=0,U=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(N[o.name]=l,(s=a.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Tr(y[0],!1),a.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Tr(y[0],!1),l+=B6[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Tr(y[0],!1),l+=B6[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Tr(y[0],!1),K=lE(i["cell-range-address"]);var Se={Name:i.name,Ref:K[0]+"!"+K[1]};ce&&(Se.Sheet=g.length),ae.Names.push(Se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(y[1]==="/"&&(!B||!B["string-value"])){var xe=oxe(n.slice(F,y.index));k=(k.length>0?k+`
`:"")+xe[0]}else Tr(y[0],!1),F=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{K=lE(Tr(y[0])["target-range-address"]),m[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(G=Tr(y[0],!1),!G.href)break;G.Target=bn(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(K=lE(G.Target.slice(1)),G.Target="#"+K[0]+"!"+K[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(y)}}var ie={Sheets:m,SheetNames:g,Workbook:ae};return r.bookSheets&&delete ie.Sheets,ie}function N6(t,e){e=e||{},Rl(t,"META-INF/manifest.xml")&&Rce(ys(t,"META-INF/manifest.xml"),e);var r=Zo(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Gj(ra(r),e);return Rl(t,"meta.xml")&&(n.Props=LP(ys(t,"meta.xml"))),n}function k6(t,e){return Gj(t,e)}var lxe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+cx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return cs+e}}(),I6=function(){var t=function(s){return Gn(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var l=[];l.push('      <table:table table:name="'+Gn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=Bo(s["!ref"]||"A1"),m=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",E=s["!rows"]||[];for(u=0;u<h.s.r;++u)y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=h.e.r;++u){for(y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var B=!1,k={},F="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>u)&&!(m[g].e.c<d)&&!(m[g].e.r<u)){(m[g].s.c!=d||m[g].s.r!=u)&&(B=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(B){l.push(r);continue}var U=Cr({r:u,c:d}),P=b?(s[u]||[])[d]:s[U];if(P&&P.f&&(k["table:formula"]=Gn(B0e(P.f)),P.F&&P.F.slice(0,U.length)==U)){var D=Bo(P.F);k["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,k["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!P){l.push(e);continue}switch(P.t){case"b":F=P.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=P.v?"true":"false";break;case"n":F=P.w||String(P.v||0),k["office:value-type"]="float",k["office:value"]=P.v||0;break;case"s":case"str":F=P.v==null?"":P.v,k["office:value-type"]="string";break;case"d":F=P.w||ha(P.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=ha(P.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(F);if(P.l&&P.l.Target){var S=P.l.Target;S=S.charAt(0)=="#"?"#"+N0e(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),C=Lt("text:a",C,{"xlink:href":S.replace(/&/g,"&amp;")})}l.push("          "+Lt("table:table-cell",Lt("text:p",C,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;gf(h),h.ods=o;var m=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var l=[cs],u=cx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=cx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(RP().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function qj(t,e){if(e.bookType=="fods")return I6(t,e);var r=v4(),n="",a=[],s=[];return n="mimetype",Vr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Vr(r,n,I6(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Vr(r,n,lxe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Vr(r,n,cs+RP()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Vr(r,n,Mce(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Vr(r,n,Lce(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function kh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function A5(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ra(Ef(t))}function cxe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Jo(Cu(t))}function uxe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function vf(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function F6(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function Axe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function dxe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function gx(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Hn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function za(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function kn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=gx(t,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=gx(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function oi(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Hn(n*8+a.type)),a.type==2&&e.push(Hn(a.data.length)),e.push(a.data))})}),vf(e)}function q4(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Fl(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=gx(t,n),s=kn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:za(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=kn(o.data),u=za(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=za(s[3][0].data)>>>0>0),r.push(i)}return r}function C0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Hn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Hn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Hn(i.data.length)}],n[2].push({data:oi(i.meta),type:2})});var s=oi(n);e.push(Hn(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),vf(e)}function fxe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=gx(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[vf(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=vf(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Dl(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(fxe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return vf(e)}function E0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Hn(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return vf(e)}function hxe(t,e,r,n){var a=kh(t),s=a.getUint32(4,!0),i=(n>1?12:8)+F6(s&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=F6(s&(n>1?12288:4096))*4,s&16&&(l=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function mxe(t,e,r){var n=kh(t),a=n.getUint32(8,!0),s=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=Axe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return h}function uE(t,e){var r=new Uint8Array(32),n=kh(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,dxe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function AE(t,e){var r=new Uint8Array(32),n=kh(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function pxe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return hxe(t,e,r,t[0]);case 5:return mxe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Li(t){var e=kn(t);return gx(e[1][0].data)}function D6(t,e){var r=kn(e.data),n=za(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=kn(i.data),l=za(o[1][0].data)>>>0;switch(n){case 1:s[l]=A5(o[3][0].data);break;case 8:{var u=t[Li(o[9][0].data)][0],d=kn(u.data),h=t[Li(d[1][0].data)][0],m=za(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=kn(h.data);s[l]=g[3].map(function(b){return A5(b.data)}).join("")}break}}),s}function gxe(t,e){var r,n,a,s,i,o,l,u,d,h,m,g,b,y,E=kn(t),B=za(E[1][0].data)>>>0,k=za(E[2][0].data)>>>0,F=((n=(r=E[8])==null?void 0:r[0])==null?void 0:n.data)&&za(E[8][0].data)>0||!1,U,P;if((s=(a=E[7])==null?void 0:a[0])!=null&&s.data&&e!=0)U=(o=(i=E[7])==null?void 0:i[0])==null?void 0:o.data,P=(u=(l=E[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=E[4])==null?void 0:d[0])!=null&&h.data&&e!=1)U=(g=(m=E[4])==null?void 0:m[0])==null?void 0:g.data,P=(y=(b=E[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var D=F?4:1,C=kh(U),S=[],N=0;N<U.length/2;++N){var H=C.getUint16(N*2,!0);H<65535&&S.push([N,H])}if(S.length!=k)throw"Expected ".concat(k," cells, found ").concat(S.length);var L=[];for(N=0;N<S.length-1;++N)L[S[N][0]]=P.subarray(S[N][1]*D,S[N+1][1]*D);return S.length>=1&&(L[S[S.length-1][0]]=P.subarray(S[S.length-1][1]*D)),{R:B,cells:L}}function xxe(t,e){var r,n=kn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?za(n[7][0].data)>>>0>0?1:0:-1,s=q4(n[5],function(i){return gxe(i,a)});return{nrows:za(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function vxe(t,e,r){var n,a=kn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(za(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(za(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Mr(s);var i=kn(a[4][0].data),o=D6(t,t[Li(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?D6(t,t[Li(i[17][0].data)][0]):[],u=kn(i[3][0].data),d=0;u[1].forEach(function(h){var m=kn(h.data),g=t[Li(m[2][0].data)][0],b=za(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=xxe(t,g);y.data.forEach(function(E,B){E.forEach(function(k,F){var U=Cr({r:d+B,c:F}),P=pxe(k,o,l);P&&(r[U]=P)})}),d+=y.nrows})}function yxe(t,e){var r=kn(e.data),n={"!ref":"A1"},a=t[Li(r[2][0].data)],s=za(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return vxe(t,a[0],n),n}function wxe(t,e){var r,n=kn(e.data),a={name:(r=n[1])!=null&&r[0]?A5(n[1][0].data):"",sheets:[]},s=q4(n[2],Li);return s.forEach(function(i){t[i].forEach(function(o){var l=za(o.meta[1][0].data);l==6e3&&a.sheets.push(yxe(t,o))})}),a}function bxe(t,e){var r=J4(),n=kn(e.data),a=q4(n[1],Li);if(a.forEach(function(s){t[s].forEach(function(i){var o=za(i.meta[1][0].data);if(o==2){var l=wxe(t,i);l.sheets.forEach(function(u,d){Z4(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function dE(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Dl(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Fl(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){s[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&za(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(l){s[l].forEach(function(u){var d=za(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return bxe(s,o)}function Cxe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&za(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=kh(t[7][0].data),d=0,h=[],m=kh(t[4][0].data),g=0,b=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),m.setUint16(y*2,g,!0);var E,B;switch(typeof e[y]){case"string":E=uE({t:"s",v:e[y]},r),B=AE({t:"s",v:e[y]},r);break;case"number":E=uE({t:"n",v:e[y]},r),B=AE({t:"n",v:e[y]},r);break;case"boolean":E=uE({t:"b",v:e[y]},r),B=AE({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}h.push(E),d+=E.length,b.push(B),g+=B.length,++l}for(t[2][0].data=Hn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535,!0);return t[6][0].data=vf(h),t[3][0].data=vf(b),l}function Exe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Bo(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Mr(n)));var s=wy(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},l=[],u=cr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(W,Y){return[W,u.FullPaths[Y]]}).forEach(function(W){var Y=W[0],te=W[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ce=Y.content,de=Dl(ce),me=Fl(de);me.forEach(function(ge){l.push(ge.id),o[ge.id]={deps:[],location:te,type:za(ge.messages[0].meta[1][0].data)}})}}),l.sort(function(W,Y){return W-Y});var d=l.filter(function(W){return W>1}).map(function(W){return[W,Hn(W)]});u.FileIndex.map(function(W,Y){return[W,u.FullPaths[Y]]}).forEach(function(W){var Y=W[0];if(W[1],!!Y.name.match(/\.iwa/)){var te=Fl(Dl(Y.content));te.forEach(function(ce){ce.messages.forEach(function(de){d.forEach(function(me){ce.messages.some(function(ge){return za(ge.meta[1][0].data)!=11006&&uxe(ge.data,me[1])})&&o[me[0]].deps.push(ce.id)})})})}});for(var h=cr.find(u,o[1].location),m=Fl(Dl(h.content)),g,b=0;b<m.length;++b){var y=m[b];y.id==1&&(g=y)}var E=Li(kn(g.messages[0].data)[1][0].data);for(h=cr.find(u,o[E].location),m=Fl(Dl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);for(E=Li(kn(g.messages[0].data)[2][0].data),h=cr.find(u,o[E].location),m=Fl(Dl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);for(E=Li(kn(g.messages[0].data)[2][0].data),h=cr.find(u,o[E].location),m=Fl(Dl(h.content)),b=0;b<m.length;++b)y=m[b],y.id==E&&(g=y);var B=kn(g.messages[0].data);{B[6][0].data=Hn(n.e.r+1),B[7][0].data=Hn(n.e.c+1);var k=Li(B[46][0].data),F=cr.find(u,o[k].location),U=Fl(Dl(F.content));{for(var P=0;P<U.length&&U[P].id!=k;++P);if(U[P].id!=k)throw"Bad ColumnRowUIDMapArchive";var D=kn(U[P].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var C=0;C<=n.e.c;++C){var S=[];S[1]=S[2]=[{type:0,data:Hn(C+420690)}],D[1].push({type:2,data:oi(S)}),D[2].push({type:0,data:Hn(C)}),D[3].push({type:0,data:Hn(C)})}D[4]=[],D[5]=[],D[6]=[];for(var N=0;N<=n.e.r;++N)S=[],S[1]=S[2]=[{type:0,data:Hn(N+726270)}],D[4].push({type:2,data:oi(S)}),D[5].push({type:0,data:Hn(N)}),D[6].push({type:0,data:Hn(N)});U[P].messages[0].data=oi(D)}F.content=E0(C0(U)),F.size=F.content.length,delete B[46];var H=kn(B[4][0].data);{H[7][0].data=Hn(n.e.r+1);var L=kn(H[1][0].data),I=Li(L[2][0].data);F=cr.find(u,o[I].location),U=Fl(Dl(F.content));{if(U[0].id!=I)throw"Bad HeaderStorageBucket";var j=kn(U[0].messages[0].data);for(N=0;N<s.length;++N){var z=kn(j[2][0].data);z[1][0].data=Hn(N),z[4][0].data=Hn(s[N].length),j[2][N]={type:j[2][0].type,data:oi(z)}}U[0].messages[0].data=oi(j)}F.content=E0(C0(U)),F.size=F.content.length;var ne=Li(H[2][0].data);F=cr.find(u,o[ne].location),U=Fl(Dl(F.content));{if(U[0].id!=ne)throw"Bad HeaderStorageBucket";for(j=kn(U[0].messages[0].data),C=0;C<=n.e.c;++C)z=kn(j[2][0].data),z[1][0].data=Hn(C),z[4][0].data=Hn(n.e.r+1),j[2][C]={type:j[2][0].type,data:oi(z)};U[0].messages[0].data=oi(j)}F.content=E0(C0(U)),F.size=F.content.length;var Z=Li(H[4][0].data);(function(){for(var W=cr.find(u,o[Z].location),Y=Fl(Dl(W.content)),te,ce=0;ce<Y.length;++ce){var de=Y[ce];de.id==Z&&(te=de)}var me=kn(te.messages[0].data);{me[3]=[];var ge=[];i.forEach(function(ie,Le){ge[1]=[{type:0,data:Hn(Le)}],ge[2]=[{type:0,data:Hn(1)}],ge[3]=[{type:2,data:cxe(ie)}],me[3].push({type:2,data:oi(ge)})})}te.messages[0].data=oi(me);var Se=C0(Y),xe=E0(Se);W.content=xe,W.size=W.content.length})();var ee=kn(H[3][0].data);{var ae=ee[1][0];delete ee[2];var G=kn(ae.data);{var K=Li(G[2][0].data);(function(){for(var W=cr.find(u,o[K].location),Y=Fl(Dl(W.content)),te,ce=0;ce<Y.length;++ce){var de=Y[ce];de.id==K&&(te=de)}var me=kn(te.messages[0].data);{delete me[6],delete ee[7];var ge=new Uint8Array(me[5][0].data);me[5]=[];for(var Se=0,xe=0;xe<=n.e.r;++xe){var ie=kn(ge);Se+=Cxe(ie,s[xe],i),ie[1][0].data=Hn(xe),me[5].push({data:oi(ie),type:2})}me[1]=[{type:0,data:Hn(n.e.c+1)}],me[2]=[{type:0,data:Hn(n.e.r+1)}],me[3]=[{type:0,data:Hn(Se)}],me[4]=[{type:0,data:Hn(n.e.r+1)}]}te.messages[0].data=oi(me);var Le=C0(Y),nt=E0(Le);W.content=nt,W.size=W.content.length})()}ae.data=oi(G)}H[3][0].data=oi(ee)}B[4][0].data=oi(H)}g.messages[0].data=oi(B);var le=C0(m),O=E0(le);return h.content=O,h.size=h.content.length,u}function Kj(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function K4(t){Kj([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function W4(t){Kj([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function _xe(t){return rn.WS.indexOf(t)>-1?"sheet":t==rn.CS?"chart":t==rn.DS?"dialog":t==rn.MS?"macro":t&&t.length?t:"sheet"}function Sxe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,_xe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Txe(t,e,r,n,a,s,i,o,l,u,d,h){try{s[n]=Pg(Zo(t,r,!0),e);var m=ys(t,e),g;switch(o){case"sheet":g=$pe(m,e,a,l,s[n],u,d,h);break;case"chart":if(g=Xpe(m,e,a,l,s[n],u,d,h),!g||!g["!drawel"])break;var b=hg(g["!drawel"].Target,e),y=Ax(b),E=Ufe(Zo(t,b,!0),Pg(Zo(t,y,!0),b)),B=hg(E,b),k=Ax(B);g=Cpe(Zo(t,B,!0),B,l,Pg(Zo(t,k,!0),B),u,g);break;case"macro":g=Ype(m,e,a,l,s[n],u,d,h);break;case"dialog":g=Jpe(m,e,a,l,s[n],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var F=[];s&&s[n]&&Ga(s[n]).forEach(function(U){var P="";if(s[n][U].Type==rn.CMNT){P=hg(s[n][U].Target,e);var D=rge(ys(t,P,!0),P,l);if(!D||!D.length)return;x6(g,D,!1)}s[n][U].Type==rn.TCMNT&&(P=hg(s[n][U].Target,e),F=F.concat(Pfe(ys(t,P,!0),l)))}),F&&F.length&&x6(g,F,!0,l.people||[])}catch(U){if(l.WTF)throw U}}function kl(t){return t.charAt(0)=="/"?t.slice(1):t}function Bxe(t,e){if(Zm(),e=e||{},K4(e),Rl(t,"META-INF/manifest.xml")||Rl(t,"objectdata.xml"))return N6(t,e);if(Rl(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof dE<"u"){if(t.FileIndex)return dE(t);var r=cr.utils.cfb_new();return jF(t).forEach(function(z){Vr(r,z,jle(t,z))}),dE(r)}throw new Error("Unsupported NUMBERS file")}if(!Rl(t,"[Content_Types].xml"))throw Rl(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Rl(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=jF(t),a=Fce(Zo(t,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",ys(t,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!ys(t,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(jg=[],a.sst)try{jg=tge(ys(t,kl(a.sst)),a.sst,e)}catch(z){if(e.WTF)throw z}e.cellStyles&&a.themes.length&&(l=ege(Zo(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=Zpe(ys(t,kl(a.style)),a.style,l,e))}a.links.map(function(z){try{var ne=Pg(Zo(t,Ax(kl(z))),z);return age(ys(t,kl(z)),ne,z,e)}catch{}});var d=Wpe(ys(t,kl(a.workbooks[0])),a.workbooks[0],e),h={},m="";a.coreprops.length&&(m=ys(t,kl(a.coreprops[0]),!0),m&&(h=LP(m)),a.extprops.length!==0&&(m=ys(t,kl(a.extprops[0]),!0),m&&jce(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(m=Zo(t,kl(a.custprops[0]),!0),m&&(g=Qce(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ne){return ne.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var y={};e.bookDeps&&a.calcchain&&(y=nge(ys(t,kl(a.calcchain)),a.calcchain));var E=0,B={},k,F;{var U=d.Sheets;h.Worksheets=U.length,h.SheetNames=[];for(var P=0;P!=U.length;++P)h.SheetNames[P]=U[P].name}var D=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Rl(t,S)||(S="xl/_rels/workbook."+D+".rels");var N=Pg(Zo(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=sge(ys(t,kl(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=Ofe(ys(t,kl(a.people[0])),e)),N&&(N=Sxe(N,d.Sheets));var H=ys(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(E=0;E!=h.Worksheets;++E){var L="sheet";if(N&&N[E]?(k="xl/"+N[E][1].replace(/[\/]?xl\//,""),Rl(t,k)||(k=N[E][1]),Rl(t,k)||(k=S.replace(/_rels\/.*$/,"")+N[E][1]),L=N[E][2]):(k="xl/worksheets/sheet"+(E+1-H)+"."+D,k=k.replace(/sheet0\./,"sheet.")),F=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(E!=e.sheets)continue e;break;case"string":if(h.SheetNames[E].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,j=0;j!=e.sheets.length;++j)typeof e.sheets[j]=="number"&&e.sheets[j]==E&&(I=1),typeof e.sheets[j]=="string"&&e.sheets[j].toLowerCase()==h.SheetNames[E].toLowerCase()&&(I=1);if(!I)continue e}}Txe(t,k,F,h.SheetNames[E],E,B,i,L,e,d,l,u)}return b={Directory:a,Workbook:d,Props:h,Custprops:g,Deps:y,Sheets:i,SheetNames:h.SheetNames,Strings:jg,Styles:u,Themes:l,SSF:ma(vr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(z,ne){z=z.replace(/^Root Entry[\/]/,""),b.keys.push(z),b.files[z]=t.FileIndex[ne]}))),e&&e.bookVBA&&(a.vba.length>0?b.vbaraw=ys(t,kl(a.vba[0]),!0):a.defaults&&a.defaults.bin===Wfe&&(b.vbaraw=ys(t,"xl/vbaProject.bin",!0))),b}function Nxe(t,e){var r=e||{},n="Workbook",a=cr.find(t,n);try{if(n="/!DataSpaces/Version",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(sde(a.content),n="/!DataSpaces/DataSpaceMap",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=ode(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=lde(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);ude(a.content)}catch{}if(n="/EncryptionInfo",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Ade(a.content);if(n="/EncryptedPackage",a=cr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function kxe(t,e){return e.bookType=="ods"?qj(t,e):e.bookType=="numbers"?Exe(t,e):e.bookType=="xlsb"?Ixe(t,e):Fxe(t,e)}function Ixe(t,e){X0=1024,t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(Zm(),Iw(t.SSF),e.revssf=Dw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Og?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=yj.indexOf(e.bookType)>-1,a=D4();W4(e=e||{});var s=v4(),i="",o=0;if(e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(s,i,UP(t.Props,e)),a.coreprops.push(i),Vn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Vr(s,i,jP(t.Props)),a.extprops.push(i),Vn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ga(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(s,i,OP(t.Custprops)),a.custprops.push(i),Vn(e.rels,4,i,rn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(s,i,oge(o-1,i,e,t,d)),a.sheets.push(i),Vn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(h){var g=h["!comments"],b=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,Vr(s,y,uge(g,y)),a.comments.push(y),Vn(d,-1,"../comments"+o+"."+r,rn.CMNT),b=!0),h["!legacy"]&&b&&Vr(s,"xl/drawings/vmlDrawing"+o+".vml",xj(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Vr(s,Ax(i),fm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(s,i,cge(e.Strings,i,e)),a.strs.push(i),Vn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(s,i,ige(t,i)),a.workbooks.push(i),Vn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(s,i,j4(t.Themes,e)),a.themes.push(i),Vn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(s,i,lge(t,i,e)),a.styles.push(i),Vn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(s,i,t.vbaraw),a.vba.push(i),Vn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(s,i,Age(i)),a.metadata.push(i),Vn(e.wbrels,-1,"metadata."+r,rn.XLMETA),Vr(s,"[Content_Types].xml",DP(a,e)),Vr(s,"_rels/.rels",fm(e.rels)),Vr(s,"xl/_rels/workbook."+r+".rels",fm(e.wbrels)),delete e.revssf,delete e.ssf,s}function Fxe(t,e){X0=1024,t&&!t.SSF&&(t.SSF=ma(vr)),t&&t.SSF&&(Zm(),Iw(t.SSF),e.revssf=Dw(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Og?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=yj.indexOf(e.bookType)>-1,a=D4();W4(e=e||{});var s=v4(),i="",o=0;if(e.cellXfs=[],Sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Vr(s,i,UP(t.Props,e)),a.coreprops.push(i),Vn(e.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Vr(s,i,jP(t.Props)),a.extprops.push(i),Vn(e.rels,3,i,rn.EXT_PROPS),t.Custprops!==t.Props&&Ga(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Vr(s,i,OP(t.Custprops)),a.custprops.push(i),Vn(e.rels,4,i,rn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Vr(s,i,Ij(o-1,e,t,h)),a.sheets.push(i),Vn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(m){var b=m["!comments"],y=!1,E="";if(b&&b.length>0){var B=!1;b.forEach(function(k){k[1].forEach(function(F){F.T==!0&&(B=!0)})}),B&&(E="xl/threadedComments/threadedComment"+o+"."+r,Vr(s,E,jfe(b,d,e)),a.threadedcomments.push(E),Vn(h,-1,"../threadedComments/threadedComment"+o+"."+r,rn.TCMNT)),E="xl/comments"+o+"."+r,Vr(s,E,vj(b)),a.comments.push(E),Vn(h,-1,"../comments"+o+"."+r,rn.CMNT),y=!0}m["!legacy"]&&y&&Vr(s,"xl/drawings/vmlDrawing"+o+".vml",xj(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&Vr(s,Ax(i),fm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Vr(s,i,ij(e.Strings,e)),a.strs.push(i),Vn(e.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Vr(s,i,Uj(t)),a.workbooks.push(i),Vn(e.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Vr(s,i,j4(t.Themes,e)),a.themes.push(i),Vn(e.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Vr(s,i,hj(t,e)),a.styles.push(i),Vn(e.wbrels,-1,"styles."+r,rn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Vr(s,i,t.vbaraw),a.vba.push(i),Vn(e.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Vr(s,i,gj()),a.metadata.push(i),Vn(e.wbrels,-1,"metadata."+r,rn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Vr(s,i,Qfe(d)),a.people.push(i),Vn(e.wbrels,-1,"persons/person.xml",rn.PEOPLE)),Vr(s,"[Content_Types].xml",DP(a,e)),Vr(s,"_rels/.rels",fm(e.rels)),Vr(s,"xl/_rels/workbook."+r+".rels",fm(e.wbrels)),delete e.revssf,delete e.ssf,s}function $4(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=al(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Dxe(t,e){return cr.find(t,"EncryptedPackage")?Nxe(t,e):Oj(t,e)}function Rxe(t,e){var r,n=t,a=e||{};return a.type||(a.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r=lP(n,a),Bxe(r,a)}function Wj(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return c5(t.slice(r),e);default:break e}return Fm.to_workbook(t,e)}function Lxe(t,e){var r="",n=$4(t,e);switch(e.type){case"base64":r=al(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Sh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ra(r)),e.type="binary",Wj(r,e)}function Uxe(t,e){var r=t;return e.type=="base64"&&(r=al(r)),r=sx.utils.decode(1200,r.slice(2),"str"),e.type="binary",Wj(r,e)}function Mxe(t){return t.match(/[^\x00-\x7F]/)?Cu(t):t}function fE(t,e,r,n){return n?(r.type="string",Fm.to_workbook(t,r)):Fm.to_workbook(e,r)}function xx(t,e){h4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return xx(new Uint8Array(t),(r=ma(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),mm={},r.dateNF&&(mm.dateNF=r.dateNF),r.type||(r.type=Xr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Xr?"buffer":"binary",n=Ile(t),typeof Uint8Array<"u"&&!Xr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=Mxe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=ma(r),r.type="array",xx(m4(n),r)}switch((a=$4(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Dxe(cr.read(n,r),r);break;case 9:if(a[1]<=8)return Oj(n,r);break;case 60:return c5(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return HAe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return aj.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?Rxe(n,r):fE(t,n,r,s);case 239:return a[3]===60?c5(n,r):fE(t,n,r,s);case 255:if(a[1]===254)return Uxe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return mh.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return mh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return l5.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Aj.to_workbook(n,r);break;case 10:case 13:case 32:return Lxe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return QAe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?l5.to_workbook(n,r):fE(t,n,r,s)}function $j(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Kx(e.file,cr.write(t,{type:Xr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return cr.write(t,e)}function Pxe(t,e){var r=ma(e||{}),n=kxe(t,r);return jxe(n,r)}function jxe(t,e){var r={},n=Xr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?cr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(kw(a))}return e.password&&typeof encrypt_agile<"u"?$j(encrypt_agile(a,e.password),e):e.type==="file"?Kx(e.file,a):e.type=="string"?ra(a):a}function Oxe(t,e){var r=e||{},n=Mge(t,r);return $j(n,r)}function vu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return ix(Cu(n));case"binary":return Cu(n);case"string":return t;case"file":return Kx(e.file,n,"utf8");case"buffer":return Xr?HA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):vu(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Qxe(t,e){switch(e.type){case"base64":return ix(t);case"binary":return t;case"string":return t;case"file":return Kx(e.file,t,"binary");case"buffer":return Xr?HA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Nv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?ix(r):e.type=="string"?ra(r):r;case"file":return Kx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function Xj(t,e){h4(),Dpe(t);var r=ma(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Xj(t,r);return r.type="array",kw(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return vu(kge(t,r),r);case"slk":case"sylk":return vu(nj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return vu(Hj(t.Sheets[t.SheetNames[a]],r),r);case"txt":return Qxe(Yj(t.Sheets[t.SheetNames[a]],r),r);case"csv":return vu(Y4(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return vu(aj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return Nv(l5.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return vu(Fm.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return vu(Aj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return vu(sj.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return vu(qj(t,r),r);case"wk1":return Nv(mh.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return Nv(mh.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Nv(Qj(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Oxe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Pxe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Hxe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function X4(t,e,r){var n={};return n.type="file",n.file=e,Hxe(n),Xj(t,n)}function Vxe(t,e,r,n,a,s,i,o){var l=os(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(m[s[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(y==null)if(b.t=="e"&&y===null)m[s[g]]=null;else if(u!==void 0)m[s[g]]=u;else if(d&&y===null)m[s[g]]=null;else continue;else m[s[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?y:RA(b,y,o);y!=null&&(h=!1)}}return{row:m,isempty:h}}function wy(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Cn(d);break;case"number":l=Cn(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var h=os(l.s.r),m=[],g=[],b=0,y=0,E=Array.isArray(t),B=l.s.r,k=0,F={};E&&!t[B]&&(t[B]=[]);var U=u.skipHidden&&t["!cols"]||[],P=u.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(U[k]||{}).hidden)switch(m[k]=Ba(k),r=E?t[B][k]:t[m[k]+h],n){case 1:s[k]=k-l.s.c;break;case 2:s[k]=m[k];break;case 3:s[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=RA(r,null,u),y=F[i]||0,!y)F[i]=1;else{do o=i+"_"+y++;while(F[o]);F[i]=y,F[o]=1}s[k]=o}for(B=l.s.r+a;B<=l.e.r;++B)if(!(P[B]||{}).hidden){var D=Vxe(t,l,B,m,n,s,E,u);(D.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=D.row)}return g.length=b,g}var R6=/"/g;function zxe(t,e,r,n,a,s,i,o){for(var l=!0,u=[],d="",h=os(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var g=o.dense?(t[r]||[])[m]:t[n[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:RA(g,null,o));for(var b=0,y=0;b!==d.length;++b)if((y=d.charCodeAt(b))===a||y===s||y===34||o.forceQuotes){d='"'+d.replace(R6,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(R6,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function Y4(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=Cn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(m[b]||{}).hidden||(h[b]=Ba(b));for(var y=0,E=a.s.r;E<=a.e.r;++E)(g[E]||{}).hidden||(d=zxe(t,a,E,h,i,l,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function Yj(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=Y4(t,e);return r}function Gxe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=Cn(t["!ref"]),s="",i=[],o,l=[],u=Array.isArray(t);for(o=a.s.c;o<=a.e.c;++o)i[o]=Ba(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=os(d),o=a.s.c;o<=a.e.c;++o)if(e=i[o]+s,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function Jj(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Na(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+a}};if(s["!ref"]){var h=Cn(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var m=n.header||[],g=0;e.forEach(function(y,E){Ga(y).forEach(function(B){(g=m.indexOf(B))==-1&&(m[g=m.length]=B);var k=y[B],F="z",U="",P=Cr({c:o+g,r:i+E+a});u=vx(s,P),k&&typeof k=="object"&&!(k instanceof Date)?s[P]=k:(typeof k=="number"?F="n":typeof k=="boolean"?F="b":typeof k=="string"?F="s":k instanceof Date?(F="d",n.cellDates||(F="n",k=Us(k)),U=n.dateNF||vr[14]):k===null&&n.nullError&&(F="e",k=0),u?(u.t=F,u.v=k,delete u.w,delete u.R,U&&(u.z=U)):s[P]=u={t:F,v:k},U&&(u.z=U))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=os(i);if(a)for(g=0;g<m.length;++g)s[Ba(g+o)+b]={t:"s",v:m[g]};return s["!ref"]=Mr(d),s}function qxe(t,e){return Jj(null,t,e)}function vx(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Na(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?vx(t,Cr(e)):vx(t,Cr({r:e,c:r||0}))}function Kxe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function J4(){return{SheetNames:[],Sheets:{}}}function Z4(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Lj(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Wxe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Kxe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function $xe(t,e){return t.z=e,t}function Zj(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Xxe(t,e,r){return Zj(t,"#"+e,r)}function Yxe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Jxe(t,e,r,n){for(var a=typeof e!="string"?e:Cn(e),s=typeof e=="string"?e:Mr(e),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=vx(t,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return t}var jl={encode_col:Ba,encode_row:os,encode_cell:Cr,encode_range:Mr,decode_col:T4,decode_row:S4,split_cell:cce,decode_cell:Na,decode_range:Bo,format_cell:RA,sheet_add_aoa:SP,sheet_add_json:Jj,sheet_add_dom:Vj,aoa_to_sheet:ep,json_to_sheet:qxe,table_to_sheet:zj,table_to_book:sxe,sheet_to_csv:Y4,sheet_to_txt:Yj,sheet_to_json:wy,sheet_to_html:Hj,sheet_to_formulae:Gxe,sheet_to_row_object_array:wy,sheet_get_cell:vx,book_new:J4,book_append_sheet:Z4,book_set_sheet_visibility:Wxe,cell_set_number_format:$xe,cell_set_hyperlink:Zj,cell_set_internal_link:Xxe,cell_add_comment:Yxe,sheet_set_array_formula:Jxe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Zxe=async()=>{try{const t=fr(Kt(nn,"apiLogs"),Kn("timestamp","desc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener logs de API:",t),new Error("No se pudieron cargar los logs de API")}},e1e=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const l of r)try{const u=Kt(nn,l),d=await Ys(u),h=d.size;n+=h,s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),a+=m}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),s.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=Kt(nn,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=fr(l,ta("timestamp",">=",u.toISOString()),Kn("timestamp","desc")),h=await Ys(d),m={};h.docs.forEach(g=>{const b=g.data(),y=new Date(b.timestamp).toLocaleDateString("es-CL");m[y]=(m[y]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},L6=500,_0=({title:t,value:e,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),hE=({title:t,data:e,colorClass:r})=>{const n=J.useMemo(()=>Math.max(...e.map(a=>a.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(a=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},t1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState(null),[i,o]=J.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}),l=J.useCallback(async()=>{n(!0);try{const g=await Zxe();e(g),s(null)}catch(g){console.error("Error al cargar logs de la API desde Firestore:",g),s("No se pudieron cargar los logs de API desde la nube.")}finally{n(!1)}},[]),u=J.useCallback(async()=>{try{const g=await e1e();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}},[]);J.useEffect(()=>{l(),u();const g=setInterval(()=>{l(),u()},300*1e3);return()=>clearInterval(g)},[l,u]);const{stats:d,userStats:h,moduleStats:m}=J.useMemo(()=>{const g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),y=b-g.getDay()*24*60*60*1e3,E=new Date(g.getFullYear(),g.getMonth(),1).getTime(),B={today:0,week:0,month:0},k={},F={};t.forEach(D=>{const C=new Date(D.timestamp).getTime();C>=b&&B.today++,C>=y&&B.week++,C>=E&&B.month++,k[D.userId]||(k[D.userId]={email:D.userEmail,today:0,month:0,total:0}),k[D.userId].total++,C>=b&&k[D.userId].today++,C>=E&&k[D.userId].month++,F[D.module]=(F[D.module]||0)+1});const U=Object.values(k).sort((D,C)=>C.total-D.total),P=Object.entries(F).map(([D,C])=>({label:D,value:C})).sort((D,C)=>C.value-D.value);return{stats:B,userStats:U,moduleStats:P}},[t]);return c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(_0,{title:"Llamadas Hoy",value:r?"--":d.today,description:`Límite recomendado: ${L6}`,alert:d.today>L6}),c.jsx(_0,{title:"Llamadas esta Semana",value:r?"--":d.week}),c.jsx(_0,{title:"Llamadas este Mes",value:r?"--":d.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(hE,{title:"Uso por Módulo",data:m,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&h.length>0?h.map(g=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:g.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:g.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:g.total})]},g.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore en tiempo real."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(_0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(_0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(_0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(hE,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(hE,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})},jw=Kt(nn,"usuarios");async function e7(){return(await Ys(jw)).docs.map(e=>({id:e.id,...e.data()}))}async function mE(t){await il(Lr(jw,t.email),t)}async function U6(t,e){await Km(Lr(jw,t),e)}async function r1e(t){await No(Lr(jw,t))}const M6=Object.values($t),n1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.629 5.629l-2.371 2.37-1.414-1.414 2.371-2.371A6 6 0 0115 7zm-3.707 5.293L6 17.586V20h2.414l5.293-5.293a1 1 0 00-1.414-1.414z"})}),P6=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},a1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!1),[a,s]=J.useState("Usuarios"),[i,o]=J.useState({nombreCompleto:"",email:"",rut:"",profile:$t.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=J.useState(null),[d,h]=J.useState(""),[m,g]=J.useState(""),[b,y]=J.useState(""),[E,B]=J.useState(null),[k,F]=J.useState(null),[U,P]=J.useState(null),D=J.useCallback(async()=>{n(!0);try{const G=await e7();e(G)}catch(G){console.error("Error al cargar usuarios desde Firestore",G),B("No se pudieron cargar los usuarios desde la nube.")}finally{n(!1)}},[]);J.useEffect(()=>{D()},[D]);const C=J.useCallback(G=>{const{name:K,value:le}=G.target;o(O=>({...O,[K]:le,curso:K==="profile"&&le!==$t.ESTUDIANTE?"":O.curso}))},[]),S=J.useCallback((G,K)=>{o(le=>{const O=le[G]||[],W=O.includes(K)?O.filter(Y=>Y!==K):[...O,K];return{...le,[G]:W}})},[]),N=J.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:$t.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),B(null)},[]),H=J.useCallback(async G=>{var Le,nt;G.preventDefault();const{nombreCompleto:K,email:le,profile:O,curso:W,cursos:Y,asignaturas:te}=i;if(!K.trim()||!le.trim()){B("Nombre Completo y Email son obligatorios.");return}if(O===$t.ESTUDIANTE&&!W){B('El campo "Curso" es obligatorio para el perfil de Estudiante.');return}const ce=O===$t.ESTUDIANTE?P6(W||""):void 0,de=O===$t.PROFESORADO?Y:void 0,me=O===$t.PROFESORADO?te:void 0,ge=(Le=i.password)!=null&&Le.trim()?i.password.trim():void 0,Se=(nt=i.rut)!=null&&nt.trim()?i.rut.trim():void 0,ie={...{nombreCompleto:i.nombreCompleto,email:i.email,profile:i.profile}};ge!==void 0&&(ie.password=ge),Se!==void 0&&(ie.rut=Se),ce!==void 0&&(ie.curso=ce),de!==void 0&&(ie.cursos=de),me!==void 0&&(ie.asignaturas=me);try{l?await U6(i.email,ie):await mE(ie),await D(),N()}catch(Ie){console.error("Error al guardar usuario:",Ie),B("Error al guardar el usuario en la nube.")}},[i,l,D,N]),L=J.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),u(G.id),o({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]})},[]),I=J.useCallback(async G=>{if(window.confirm("¿Está seguro de que desea eliminar este usuario?"))try{await r1e(G),await D()}catch(K){console.error("Error al eliminar usuario:",K),B("No se pudo borrar el usuario en la nube.")}},[D]),j=async()=>{if(window.confirm(`ADVERTENCIA: Esta acción es irreversible.

¿Está seguro de que desea restablecer las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta')?

Cualquier contraseña personalizada será eliminada.`))try{await Promise.all(t.map(K=>U6(K.email,{password:void 0}))),await D(),alert("Todas las contraseñas han sido restablecidas exitosamente a 'recoleta'.")}catch(K){console.error("Error al restablecer contraseñas:",K),B("Error al restablecer contraseñas en la nube.")}},z=J.useMemo(()=>Array.from(new Set(t.filter(G=>G.profile===$t.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[t]),ne=J.useMemo(()=>t.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||G.profile===m)&&(b===""||G.curso===b)),[t,d,m,b]),Z=async G=>{var O;const K=(O=G.target.files)==null?void 0:O[0];if(!K)return;F({message:"Procesando archivo de estudiantes...",isError:!1});const le=new FileReader;le.onload=async W=>{var Y;try{const te=new Uint8Array((Y=W.target)==null?void 0:Y.result),ce=xx(te,{type:"array"}),de=ce.SheetNames[0],me=ce.Sheets[de],ge=jl.sheet_to_json(me);if(ge.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(ge[0]).map(Le=>Le.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("curso"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo', y 'Curso'.");const xe={};Object.keys(ge[0]).forEach(Le=>{xe[Le.trim().toLowerCase()]=Le});const ie=ge.map(Le=>{const nt=Le[xe.nombre],Ie=Le[xe.correo],we=Le[xe.curso];return!nt||!Ie||!we?null:{id:crypto.randomUUID(),nombreCompleto:String(nt).trim(),email:String(Ie).trim(),profile:$t.ESTUDIANTE,curso:P6(String(we).trim())}}).filter(Le=>Le!==null&&!t.some(nt=>nt.email.toLowerCase()===Le.email.toLowerCase()));ie.length>0&&(await Promise.all(ie.map(Le=>mE(Le))),await D()),F({message:`Carga completada. Se agregaron ${ie.length} nuevos estudiantes.`,isError:!1})}catch(te){F({message:`Error: ${te.message}`,isError:!0})}finally{G.target&&(G.target.value="")}},le.readAsArrayBuffer(K)},ee=async G=>{var O;const K=(O=G.target.files)==null?void 0:O[0];if(!K)return;P({message:"Procesando archivo de personal...",isError:!1});const le=new FileReader;le.onload=async W=>{var Y;try{const te=new Uint8Array((Y=W.target)==null?void 0:Y.result),ce=xx(te,{type:"array"}),de=ce.SheetNames[0],me=ce.Sheets[de],ge=jl.sheet_to_json(me);if(ge.length===0)throw new Error("El archivo Excel está vacío.");const Se=Object.keys(ge[0]).map(we=>we.trim().toLowerCase());if(!Se.includes("nombre")||!Se.includes("correo")||!Se.includes("perfil"))throw new Error("El archivo debe tener las columnas: 'Nombre', 'Correo' y 'Perfil'.");const xe={};Object.keys(ge[0]).forEach(we=>{xe[we.trim().toLowerCase()]=we});const ie=Se.includes("curso");let Le=0;const nt=ge.map(we=>{const je=we[xe.nombre],et=we[xe.correo],st=we[xe.perfil];if(!je||!et||!st)return null;const mt=String(st).trim();return mt===$t.ESTUDIANTE||!Object.values($t).includes(mt)?(console.warn(`Perfil inválido o de estudiante omitido: ${mt}`),null):ie&&we[xe.curso]?(console.warn(`Fila omitida: El perfil '${mt}' es para personal, pero se encontró una columna 'Curso' con datos. Use la carga de Estudiantes para este tipo de archivo.`),Le++,null):{id:crypto.randomUUID(),nombreCompleto:String(je).trim(),email:String(et).trim(),profile:mt}}).filter(we=>we!==null&&!t.some(je=>je.email.toLowerCase()===we.email.toLowerCase()));nt.length>0&&(await Promise.all(nt.map(we=>mE(we))),await D());let Ie=`Carga completada. Se agregaron ${nt.length} nuevos miembros del personal.`;Le>0&&(Ie+=` Se omitieron ${Le} filas porque parecían ser de estudiantes (contenían una columna 'Curso'). Por favor, use la opción 'Cargar Estudiantes' para ellas.`),P({message:Ie,isError:!1})}catch(te){P({message:`Error: ${te.message}`,isError:!0})}finally{G.target&&(G.target.value="")}},le.readAsArrayBuffer(K)},ae="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[r&&c.jsx("div",{className:"text-center text-amber-600",children:"Cargando usuarios desde la nube..."}),E&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:E}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay usuarios registrados en la nube."}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:H,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:ae,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:ae,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:"Dejar en blanco para no cambiar",className:ae})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:ae})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:C,className:ae,required:!0,children:M6.map(G=>c.jsx("option",{value:G,children:G},G))})]}),i.profile===$t.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:ae,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),is.map(G=>c.jsx("option",{value:G,children:G},G))]})]})]}),i.profile===$t.PROFESORADO&&c.jsxs("div",{className:"lg:col-span-3 mt-6 pt-6 border-t dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-800 dark:text-slate-200",children:"Asignaciones de Profesor"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Cursos Asignados"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:is.map(G=>c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:(i.cursos||[]).includes(G),onChange:()=>S("cursos",G),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:G})]},G))})]}),c.jsxs("fieldset",{className:"p-4 border rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold px-2 text-slate-700 dark:text-slate-300",children:"Asignaturas Asignadas"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 max-h-48 overflow-y-auto mt-2",children:nl.map(G=>c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:(i.asignaturas||[]).includes(G),onChange:()=>S("asignaturas",G),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 truncate",title:G,children:G})]},G))})]})]})]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center col-span-full pt-2",children:['Nota: La contraseña por defecto para todos los usuarios es "',c.jsx("strong",{children:"recoleta"}),'".']}),E&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:E}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:N,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cargas Masivas desde Excel"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Estudiantes"}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",c.jsx("strong",{children:"Nombre"}),", ",c.jsx("strong",{children:"Correo"}),", ",c.jsx("strong",{children:"Curso"}),"."]}),c.jsx("input",{type:"file",onChange:Z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),k&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${k.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:k.message})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:"Cargar Personal (Profesores, etc.)"}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["El archivo debe tener las columnas: ",c.jsx("strong",{children:"Nombre"}),", ",c.jsx("strong",{children:"Correo"}),", ",c.jsx("strong",{children:"Perfil"}),"."]}),c.jsx("input",{type:"file",onChange:ee,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),U&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${U.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:U.message})]})]})]}),!r&&t.length>0&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>h(G.target.value),className:ae}),c.jsxs("select",{value:m,onChange:G=>g(G.target.value),className:ae,children:[c.jsx("option",{value:"",children:"Filtrar por Perfil"}),M6.map(G=>c.jsx("option",{value:G,children:G},G))]}),c.jsxs("select",{value:b,onChange:G=>y(G.target.value),className:ae,children:[c.jsx("option",{value:"",children:"Filtrar por Curso"}),z.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Perfil / Curso"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:ne.map(G=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:G.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300",children:[G.profile," ",G.curso&&`(${G.curso})`]})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>L(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>I(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.id))})]})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Gestión de Contraseñas Masivas"}),c.jsx("div",{className:"p-4 border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:"Esta acción restablecerá las contraseñas de TODOS los usuarios a la contraseña por defecto ('recoleta'). Úselo con precaución."})})]})}),c.jsx("div",{className:"mt-4",children:c.jsxs("button",{onClick:j,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[c.jsx(n1e,{}),"Restablecer Todas las Contraseñas"]})})]})]}),a==="Monitor de Uso"&&c.jsx(t1e,{})]})},j6="seguimientoDualRecords",s1e={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},i1e=({record:t,onSave:e,onClose:r})=>{const[n,a]=J.useState(t),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;a(g=>({...g,[u]:h==="checkbox"?m:d}))},o=()=>{e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:t.nombreEstudiante}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},o1e=()=>{const[t,e]=J.useState([]),r=J.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:nm[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:MC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[n,a]=J.useState(r),[s,i]=J.useState(null),[o,l]=J.useState(""),[u,d]=J.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[h,m]=J.useState(null),[g,b]=J.useState(null),[y,E]=J.useState(!1),[B,k]=J.useState(null);J.useEffect(()=>{try{const ee=localStorage.getItem(j6);ee&&e(JSON.parse(ee))}catch(ee){console.error("Error al cargar datos de localStorage",ee)}},[]);const F=J.useCallback(ee=>{e(ee),localStorage.setItem(j6,JSON.stringify(ee))},[]),U=J.useCallback(ee=>{const{name:ae,value:G}=ee.target;a(K=>({...K,[ae]:G}))},[]),P=J.useCallback(ee=>{const{name:ae,value:G}=ee.target;d(K=>({...K,[ae]:G}))},[]),D=J.useCallback(()=>{a(r),i(null),m(null)},[r]),C=J.useCallback(ee=>{ee.preventDefault();const G=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(le=>!n[le].trim());if(G){m(`El campo '${G}' es obligatorio.`);return}const K=s?t.map(le=>le.id===s?{...le,...n}:le):[{...n,id:crypto.randomUUID()},...t];F(K),D()},[n,s,t,F,D]),S=J.useCallback(ee=>{window.scrollTo({top:0,behavior:"smooth"}),i(ee.id),a(ee)},[]),N=J.useCallback(ee=>{window.confirm("¿Está seguro de que desea eliminar este registro?")&&F(t.filter(ae=>ae.id!==ee))},[t,F]),H=ee=>{k(ee),E(!0)},L=()=>{k(null),E(!1)},I=ee=>{const ae=t.map(G=>G.id===ee.id?ee:G);F(ae),L()},j=()=>{const ee=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],ae=jl.aoa_to_sheet([ee]),G=jl.book_new();jl.book_append_sheet(G,ae,"Plantilla"),X4(G,"Plantilla_Seguimiento_Dual.xlsx")},z=ee=>{var K;const ae=(K=ee.target.files)==null?void 0:K[0];if(!ae)return;b({message:"Procesando archivo...",isError:!1});const G=new FileReader;G.onload=le=>{var O;try{const W=new Uint8Array((O=le.target)==null?void 0:O.result),Y=xx(W,{type:"array",cellDates:!0}),te=Y.SheetNames[0],ce=Y.Sheets[te],de=jl.sheet_to_json(ce);if(de.length===0)throw new Error("El archivo está vacío.");const me={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(de[0]).map(Le=>Le.trim().toLowerCase()),xe=["nombre","rut","curso 2025","empresa","estado"].find(Le=>!ge.includes(Le));if(xe)throw new Error(`Falta la columna requerida: '${xe}'`);const ie=de.map(Le=>{const nt={id:crypto.randomUUID()};for(const Ie in Le){const we=me[Ie.trim().toLowerCase()];if(we){let je=Le[Ie];je instanceof Date&&(je=je.toISOString().split("T")[0]),typeof je=="boolean"||typeof je=="string"&&(je.toLowerCase()==="true"||je.toLowerCase()==="false")?nt[we]=String(je).toLowerCase()==="true":nt[we]=je}}return!nt.nombreEstudiante||!nt.rutEstudiante?null:nt}).filter(Boolean);ie.length>0?(F([...ie,...t]),b({message:`Carga exitosa. Se agregaron ${ie.length} nuevos registros.`,isError:!1})):b({message:"No se encontraron nuevos registros válidos para agregar.",isError:!1})}catch(W){console.error(W),b({message:`Error al procesar el archivo: ${W.message}`,isError:!0})}},G.readAsArrayBuffer(ae)},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Z=J.useMemo(()=>t.filter(ee=>(o===""||ee.nombreEstudiante.toLowerCase().includes(o.toLowerCase())||ee.nombreEmpresa.toLowerCase().includes(o.toLowerCase())||ee.rutEstudiante.includes(o))&&(u.curso===""||ee.curso===u.curso)&&(u.empresa===""||ee.nombreEmpresa===u.empresa)&&(u.estado===""||ee.estado===u.estado)&&(u.comuna===""||ee.comuna===u.comuna)&&(u.profesor===""||ee.profesorTutorEmpresa===u.profesor)).sort((ee,ae)=>ee.nombreEstudiante.localeCompare(ae.nombreEstudiante)),[t,o,u]);return J.useMemo(()=>{const ee=new Set,ae=new Set;return t.forEach(G=>{G.nombreEmpresa&&ee.add(G.nombreEmpresa),G.comuna&&ae.add(G.comuna)}),{empresas:Array.from(ee).sort(),comunas:Array.from(ae).sort()}},[t]),c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:s?"Editando registro existente.":"Registre un nuevo estudiante en práctica."}),c.jsxs("form",{onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:n.nombreEstudiante,onChange:U,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:n.rutEstudiante,onChange:U,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:n.curso,onChange:U,className:ne,required:!0,children:nm.map(ee=>c.jsx("option",{value:ee,children:ee},ee))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:n.profesorTutorEmpresa,onChange:U,className:ne,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),S_.map(ee=>c.jsx("option",{value:ee,children:ee},ee))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:n.nombreEmpresa,onChange:U,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:n.rutEmpresa,onChange:U,className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:n.direccionEmpresa,onChange:U,className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:n.comuna,onChange:U,className:ne})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:n.estado,onChange:U,className:ne,children:MC.map(ee=>c.jsx("option",{value:ee,children:ee},ee))})]})]}),n.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:n.fechaDesvinculacion||"",onChange:U,className:`${ne} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:n.motivoDesvinculacion||"",onChange:U,className:`${ne} border-red-300`})]})]}),h&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:h}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[s&&c.jsx("button",{type:"button",onClick:D,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:s?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:j,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:z,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),g&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${g.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:g.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Registros de Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:o,onChange:ee=>l(ee.target.value),className:`${ne} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:u.curso,onChange:P,className:ne,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),nm.map(ee=>c.jsx("option",{children:ee},ee))]}),c.jsxs("select",{name:"estado",value:u.estado,onChange:P,className:ne,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),MC.map(ee=>c.jsx("option",{children:ee},ee))]}),c.jsxs("select",{name:"profesor",value:u.profesor,onChange:P,className:ne,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),S_.map(ee=>c.jsx("option",{children:ee},ee))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Z.map(ee=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:ee.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:ee.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:ee.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s1e[ee.estado]}`,children:ee.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>H(ee),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>S(ee),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>N(ee.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},ee.id))})]})})]}),y&&B&&c.jsx(i1e,{record:B,onClose:L,onSave:I})]})},t7="actividades_remotas",l1e="respuestas_actividades",c1e="usuarios",eT=t=>{var r,n,a,s,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((s=(a=e.plazoEntrega)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},u1e=t=>{const e=fr(Kt(Gt,t7),Kn("fechaCreacion","desc"));return Yr(e,n=>{const a=n.docs.map(s=>eT(s));t(a)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},A1e=async t=>{try{const e={...t,fechaCreacion:Br.fromDate(new Date),plazoEntrega:Br.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await Js(Kt(Gt,t7),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},d1e=t=>{const e=fr(Kt(Gt,l1e));return Yr(e,n=>{const a=n.docs.map(s=>eT(s));t(a)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},f1e=t=>{const e=fr(Kt(Gt,c1e));return Yr(e,n=>{const a=n.docs.map(s=>eT(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},pE={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},h1e=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=a=>r(a)}),m1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState([]),[i,o]=J.useState(null),[l,u]=J.useState(!1),[d,h]=J.useState(!1),[m,g]=J.useState(!0),[b,y]=J.useState(null),[E,B]=J.useState(""),[k,F]=J.useState(null),[U,P]=J.useState([]),D={asignatura:nl[0],nivel:ey[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,S]=J.useState(D);J.useEffect(()=>{g(!0);const de=u1e(e),me=d1e(n),ge=f1e(Se=>{s(Se),g(!1)});return()=>{de(),me(),ge()}},[]);const N=de=>{S(me=>({...me,[de.target.name]:de.target.value}))},H=de=>{S(me=>({...me,recursos:{...me.recursos,[de.target.name]:de.target.value}}))},L=de=>{de.target.files&&P(Array.from(de.target.files))},I=de=>{S(me=>{const ge=me.tipos.includes(de)?me.tipos.filter(xe=>xe!==de):[...me.tipos,de],Se={...me.cantidadPreguntas};return ge.includes(de)?Se[de]||(Se[de]=pE[de][0]):delete Se[de],{...me,tipos:ge,cantidadPreguntas:Se}})},j=(de,me)=>{S(ge=>({...ge,cantidadPreguntas:{...ge.cantidadPreguntas,[de]:me}}))},z=de=>{S(me=>{var Se;const ge=(Se=me.cursosDestino)!=null&&Se.includes(de)?me.cursosDestino.filter(xe=>xe!==de):[...me.cursosDestino||[],de];return{...me,cursosDestino:ge}})},ne=de=>{S(me=>{var Se;const ge=(Se=me.estudiantesDestino)!=null&&Se.includes(de)?me.estudiantesDestino.filter(xe=>xe!==de):[...me.estudiantesDestino||[],de];return{...me,estudiantesDestino:ge}})},Z=()=>{const{tipos:de,contenido:me,asignatura:ge,nivel:Se,cantidadPreguntas:xe}=C;let ie=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${me}"
Asignatura: ${ge}
Nivel: ${Se}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${me}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return de.forEach(Le=>{const nt=xe[Le]||pE[Le][0];switch(Le){case"Quiz":ie+=`- **Quiz**: Genera un quiz de ${nt} preguntas de selección múltiple sobre el contenido. Cada una con 4 opciones.
`;break;case"Comprensión de Lectura":ie+=`- **Comprensión de Lectura**: Genera ${nt} actividad(es) de comprensión. Cada una con un texto de 150-200 palabras y 4 preguntas de selección múltiple.
`;break;case"Términos Pareados":ie+=`- **Términos Pareados**: Genera ${nt} pares de términos pareados (concepto y definición).
`;break;case"Desarrollo":ie+=`- **Desarrollo**: Genera ${nt} pregunta(s) de desarrollo con una rúbrica simple en texto.
`;break}}),ie},ee=async de=>{if(de.preventDefault(),!C.contenido.trim()||C.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),y(null);try{const me=await Promise.all(U.map(async st=>({nombre:st.name,url:await h1e(st)}))),ge="",xe=new globalThis.GoogleGenerativeAI(ge).getGenerativeModel({model:"gemini-pro"}),ie=Z(),we=(await(await xe.generateContent(ie)).response).text().replace(/^```json\s*|```\s*$/g,""),je=JSON.parse(we),et={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:me},introduccion:je.introduccion,generatedContent:je.actividades};F(et)}catch(me){console.error("Error al generar actividad con IA",me),y("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo.")}finally{h(!1)}},ae=async()=>{if(k)try{await A1e(k),S(D),P([]),u(!1),F(null)}catch(de){console.error("Error al guardar la actividad:",de),y("No se pudo guardar la actividad en la base de datos.")}},G=J.useMemo(()=>{var ge,Se;if(!i||!a)return[];const de=a.filter(xe=>{var ie;return xe.profile===$t.ESTUDIANTE&&((ie=i.cursosDestino)==null?void 0:ie.includes(xe.curso||""))}).map(xe=>xe.nombreCompleto),me=i.estudiantesDestino||[];if(!((ge=i.cursosDestino)!=null&&ge.length)&&!((Se=i.estudiantesDestino)!=null&&Se.length)){const xe=i.nivel.charAt(0);return a.filter(ie=>{var Le;return ie.profile===$t.ESTUDIANTE&&((Le=ie.curso)==null?void 0:Le.startsWith(xe))}).map(ie=>ie.nombreCompleto).sort()}return Array.from(new Set([...de,...me])).sort()},[i,a]),K=J.useMemo(()=>r.filter(de=>de.actividadId===(i==null?void 0:i.id)),[r,i]),le=J.useMemo(()=>a.filter(de=>de.profile===$t.ESTUDIANTE).sort((de,me)=>de.nombreCompleto.localeCompare(me.nombreCompleto)),[a]),O=J.useMemo(()=>E.trim()?le.filter(de=>de.nombreCompleto.toLowerCase().includes(E.toLowerCase())):le,[le,E]),W=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:G.map(de=>{const me=K.find(ge=>ge.estudianteId===de);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:de}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:me?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?`${me.puntaje}/${me.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:me?new Date(me.fechaCompletado).toLocaleString("es-CL"):"-"})]},de)})})]})})]})]}),Y=()=>{var de,me;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:C.asignatura,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:nl.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:C.nivel,onChange:N,className:"w-full border-slate-300 rounded-md shadow-sm",children:ey.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(de=C.recursos)==null?void 0:de.instrucciones,onChange:H,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(me=C.recursos)==null?void 0:me.enlaces,onChange:H,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:is.map(ge=>{var Se;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Se=C.cursosDestino)==null?void 0:Se.includes(ge),onChange:()=>z(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:ge})]},ge)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:E,onChange:ge=>B(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:O.map(ge=>{var Se;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(Se=C.estudiantesDestino)==null?void 0:Se.includes(ge.nombreCompleto),onChange:()=>ne(ge.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:U$.map(ge=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C.tipos.includes(ge),onChange:()=>I(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ge})]}),C.tipos.includes(ge)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),pE[ge].map(Se=>c.jsx("button",{type:"button",onClick:()=>j(ge,Se),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[ge]===Se?"bg-amber-500 text-white":"bg-slate-200"}`,children:Se},Se))]})]},ge))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:C.contenido,onChange:N,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:N,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},te=()=>{var de;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k==null?void 0:k.introduccion})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((de=k.recursos.archivos)==null?void 0:de.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k.recursos.instrucciones}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((me,ge)=>me.trim()&&c.jsx("a",{href:me,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:me},ge))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(me=>c.jsx("li",{className:"text-slate-700",children:me.nombre},me.nombre))})]})]}),k==null?void 0:k.tipos.map(me=>{const ge=k.generatedContent[me];return ge?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:me}),c.jsxs("div",{className:"space-y-4 text-sm",children:[me==="Quiz"&&ge.map((Se,xe)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Se.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Se.opciones.map(ie=>c.jsx("li",{children:ie},ie))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Se.respuestaCorrecta]})]},xe)),me==="Comprensión de Lectura"&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-2 rounded",children:ge.texto}),ge.preguntas.map((Se,xe)=>c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{className:"font-semibold",children:[xe+1,". ",Se.pregunta]}),c.jsx("ul",{className:"list-disc pl-5 mt-1",children:Se.opciones.map(ie=>c.jsx("li",{children:ie},ie))}),c.jsxs("p",{className:"text-xs text-green-600",children:["R: ",Se.respuestaCorrecta]})]},xe))]}),me==="Términos Pareados"&&c.jsx("ul",{className:"list-disc pl-5",children:ge.map(Se=>c.jsxs("li",{children:[c.jsxs("strong",{children:[Se.concepto,":"]})," ",Se.definicion]},Se.id))}),me==="Desarrollo"&&ge.map((Se,xe)=>c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold",children:Se.pregunta}),c.jsxs("p",{className:"text-xs italic mt-1",children:["Rúbrica: ",Se.rubrica]})]},xe))]})]},me):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>F(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ae,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},ce=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(de=>{var Se,xe;const me=[];(Se=de.cursosDestino)!=null&&Se.length&&me.push(`Cursos: ${de.cursosDestino.join(", ")}`),(xe=de.estudiantesDestino)!=null&&xe.length&&me.push(`Estudiantes: ${de.estudiantesDestino.length}`);const ge=me.length?me.join(" | "):`Todo ${de.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[de.asignatura," - ",de.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ge," | Creado: ",new Date(de.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(de),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},de.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:k?te():i?W():l?Y():ce()})},p1e="actividadesRemotas",gE="respuestasActividades",g1e=t=>[...t].sort(()=>Math.random()-.5),x1e=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let a;return t>=n?a=4+(t-n)*3/(e-n):a=1+t*3/(n||1),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},O6=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v1e=({actividad:t,onComplete:e,currentUser:r})=>{var k,F,U,P;const[n,a]=J.useState({}),[s,i]=J.useState(!1),[o,l]=J.useState(!1),[u,d]=J.useState(!1),[h,m]=J.useState({}),g=`progress-${r.id}-${t.id}`;J.useEffect(()=>{const D={};t.tipos.forEach(C=>{if(C==="Términos Pareados"){const S=t.generatedContent[C];S&&(D[C]=g1e(S.map(N=>N.definicion)))}}),m(D);try{const C=localStorage.getItem(g);C&&a(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,g]);const b=(D,C)=>{a(S=>({...S,[D]:C}))},y=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(D){console.error("Could not save progress",D),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},E=async()=>{i(!0);let D=0,C=0;const S=[],N={};for(const L of t.tipos){const I=t.generatedContent[L],j=n[L];if(L==="Quiz"||L==="Comprensión de Lectura"){const z=L==="Quiz"?I:I.preguntas,ne=j||{};let Z=0,ee=0;z.forEach((ae,G)=>{ee+=1,ne[G]===ae.respuestaCorrecta&&(Z+=1)}),D+=Z,C+=ee,S.push(`${L}: ${Z}/${ee} correctas.`),N[L]={puntaje:Z,puntajeMaximo:ee}}else if(L==="Términos Pareados"){const z=I,ne=j||{};let Z=0,ee=0;z.forEach(ae=>{ee+=2,ne[ae.id]===ae.definicion&&(Z+=2)}),D+=Z,C+=ee,S.push(`${L}: ${Z/2}/${z.length} correctas.`),N[L]={puntaje:Z,puntajeMaximo:ee}}else if(L==="Desarrollo"){const z=I,ne=j||{};let Z=0,ee=0;for(let ae=0;ae<z.length;ae++){const G=z[ae];ee+=3;try{Gl("Autoaprendizaje - Evaluar Desarrollo");const K=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),le=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada. Asigna un puntaje de 0 a 3. Pregunta: "${G.pregunta}". Rúbrica: "${G.rubrica}". Respuesta: "${ne[ae]||""}". Proporciona también una frase corta de feedback.`,O={type:or.OBJECT,properties:{puntaje:{type:or.INTEGER,description:"Un puntaje de 0 a 3."},feedback:{type:or.STRING}},required:["puntaje","feedback"]},W=await K.models.generateContent({model:"gemini-2.5-flash",contents:le,config:{responseMimeType:"application/json",responseSchema:O}}),Y=JSON.parse(W.text),te=Math.max(0,Math.min(3,Y.puntaje||0));Z+=te,S.push(`${L} #${ae+1}: Puntaje ${te}/3. (${Y.feedback})`)}catch(K){console.error(K),S.push(`${L} #${ae+1}: No se pudo evaluar automáticamente.`)}}D+=Z,C+=ee,N[L]={puntaje:Z,puntajeMaximo:ee}}}let H=`¡Buen trabajo! Tu puntaje total es ${D} de ${C}.`;e({respuestas:n,puntaje:D,puntajeMaximo:C,retroalimentacion:H,calificacion:x1e(D,C),puntajesPorSeccion:N}),localStorage.removeItem(g),i(!1)},B=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((k=t.recursos.archivos)==null?void 0:k.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),B&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((F=t.recursos)==null?void 0:F.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((U=t.recursos)==null?void 0:U.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((D,C)=>D.trim()&&c.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:D},C))]}),((P=t.recursos)==null?void 0:P.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((D,C)=>c.jsx("li",{children:c.jsx("a",{href:D.url,download:D.nombre,className:"text-blue-500 hover:underline",children:D.nombre})},C))})]})]})]}),t.tipos.map(D=>{const C=t.generatedContent[D];if(!C)return null;switch(D){case"Quiz":case"Comprensión de Lectura":{const S=D==="Quiz",N=C,H=S?N:N.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),!S&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:N.texto}),c.jsx("div",{className:"space-y-6",children:H.map((L,I)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[I+1,". ",L.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:L.opciones.map((j,z)=>{var ne;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${D}-${I}-${t.id}`,value:j,checked:((ne=n[D])==null?void 0:ne[I])===j,onChange:()=>b(D,{...n[D]||{},[I]:j}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:j})]},z)})})]},`${D}-${I}`))})]},D)}case"Términos Pareados":{const S=C,N=h[D]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),S.map(H=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:H.concepto},H.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),S.map(H=>{var L;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((L=n[D])==null?void 0:L[H.id])||"",onChange:I=>b(D,{...n[D]||{},[H.id]:I.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definición..."}),N.map((I,j)=>c.jsx("option",{value:I,children:I},j))]})},H.id)})]})]})]},D)}case"Desarrollo":{const S=C;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:D}),S.map((N,H)=>{var L;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:N.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rúbrica:"})," ",N.rubrica]}),c.jsx("textarea",{value:((L=n[D])==null?void 0:L[H])||"",onChange:I=>b(D,{...n[D]||{},[H]:I.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},H)})]},D)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:y,disabled:s||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(O6,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:E,disabled:s||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:s?c.jsxs(c.Fragment,{children:[c.jsx(O6,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},y1e=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState("list"),[u,d]=J.useState(null),[h,m]=J.useState(null);J.useEffect(()=>{try{const E=localStorage.getItem(p1e);if(E){const k=JSON.parse(E),F=t.curso||"",U=t.nombreCompleto,P=k.filter(D=>{var H,L,I,j;const C=!((H=D.cursosDestino)!=null&&H.length)&&!((L=D.estudiantesDestino)!=null&&L.length),S=((I=D.cursosDestino)==null?void 0:I.includes(F))??!1,N=((j=D.estudiantesDestino)==null?void 0:j.includes(U))??!1;if(S||N)return!0;if(C&&F){const z=D.nivel.charAt(0),ne=F.charAt(0);return z===ne}return!1});r(P)}const B=localStorage.getItem(gE);if(B){const k=JSON.parse(B).filter(F=>F.estudianteId===t.nombreCompleto);a(k)}}catch(E){console.error("Error loading data",E)}},[t]);const g=E=>{m(E)},b=()=>{h&&(i(h),l("activity"),m(null))},y=J.useCallback(async E=>{if(!s)return;let B;const k=`
            Un estudiante ha completado una actividad sobre "${s.contenido}".
            Su puntaje total fue ${E.puntaje} de ${E.puntajeMaximo}.
            Detalle por sección: ${JSON.stringify(E.puntajesPorSeccion||{})}
            Respuestas de desarrollo: ${JSON.stringify(E.respuestas.Desarrollo||{})}
            
            Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
            - "resumenGeneral": Un párrafo breve y motivador sobre el desempeño general.
            - "areasDeFortaleza": Un array de 2 o 3 strings destacando lo que hizo bien.
            - "areasDeMejora": Un array de 2 o 3 strings con áreas a mejorar.
            - "planDeMejora": Un array de 3 objetos, cada uno con "paso" (string, ej: "Repasar conceptos clave") y "detalle" (string, una sugerencia concreta).
            - "feedbackPorSeccion": Un objeto donde cada clave es el tipo de actividad (ej: "Quiz") y el valor es un string con feedback específico para esa sección.
        `;try{Gl("Autoaprendizaje - Retroalimentación Detallada");const C=await new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:k,config:{responseMimeType:"application/json"}});B=JSON.parse(C.text.trim().replace(/(\*\*|\*)/g,""))}catch(D){console.error("Error generating detailed feedback:",D)}const F={id:crypto.randomUUID(),actividadId:s.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...E,retroalimentacionDetallada:B},U=JSON.parse(localStorage.getItem(gE)||"[]"),P=[F,...U.filter(D=>!(D.actividadId===F.actividadId&&D.estudianteId===F.estudianteId))];localStorage.setItem(gE,JSON.stringify(P)),a(D=>[F,...D.filter(C=>C.actividadId!==F.actividadId)]),d(F),l("result")},[s,t.nombreCompleto]);if(o==="activity"&&s)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[s.asignatura,": ",s.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",s.plazoEntrega]}),c.jsx(v1e,{actividad:s,onComplete:y,currentUser:t})]});if(o==="result"&&u){const E=u.retroalimentacionDetallada,B=u.puntajesPorSeccion||{},k=(F,U)=>{const P=U>0?F/U:0;return P<.4?"bg-red-100 text-red-800":P<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),E?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:E.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${k(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeFortaleza.map((F,U)=>c.jsx("li",{children:F},U))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:E.areasDeMejora.map((F,U)=>c.jsx("li",{children:F},U))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(B).map(([F,{puntaje:U,puntajeMaximo:P}])=>{var D;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:F}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${k(U,P)}`,children:[U," / ",P]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(D=E.feedbackPorSeccion)==null?void 0:D[F]})]},F)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:E.planDeMejora.map((F,U)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:F.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:F.detalle})]})]},U))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),c.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(E=>{const B=n.find(F=>F.actividadId===E.id),k=!!B;return c.jsx("div",{className:`p-4 border rounded-lg ${k?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[E.asignatura," - ",E.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",E.plazoEntrega]})]}),k?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(B),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",B.puntaje,"/",B.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>g(E),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},E.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},Ow="estudiantes_inclusion",w1e="usuarios",r7=t=>{const e=t.data();return{id:t.id,...e}},b1e=t=>{const e=fr(Kt(Gt,Ow));return Yr(e,n=>{const a=n.docs.map(s=>r7(s));t(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},C1e=t=>{const e=fr(Kt(Gt,w1e));return Yr(e,n=>{const a=n.docs.map(s=>r7(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},E1e=async t=>{try{return(await Js(Kt(Gt,Ow),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},_1e=async(t,e)=>{try{const{id:r,...n}=e,a=Lr(Gt,Ow,t);await il(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},S1e=async t=>{try{const e=Lr(Gt,Ow,t);await No(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},T1e=({student:t,onClose:e,onSave:r,profesores:n})=>{const[a,s]=J.useState("intervenciones"),[i,o]=J.useState(t);J.useEffect(()=>{o(t)},[t]);const[l,u]=J.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=J.useState(d),[g,b]=J.useState({trimestre:"T1",meta:""}),[y,E]=J.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[B,k]=J.useState(null),[F,U]=J.useState(!1),P={motivo:"",acuerdos:"",asistentes:""},[D,C]=J.useState(P),S=()=>{r(i),e()},N=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let xe;l?xe=(i.intervenciones||[]).map(Le=>Le.id===l.id?{...Le,...h}:Le):xe=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const ie=xe.sort((Le,nt)=>new Date(nt.fecha).getTime()-new Date(Le.fecha).getTime());o(Le=>({...Le,intervenciones:ie})),m(d),u(null)},H=xe=>{u(xe),m({responsable:xe.responsable,accion:xe.accion,observaciones:xe.observaciones})},L=xe=>{window.confirm("¿Eliminar esta intervención?")&&o(ie=>({...ie,intervenciones:(ie.intervenciones||[]).filter(Le=>Le.id!==xe)}))},I=xe=>{const{name:ie,value:Le}=xe.target;o(nt=>({...nt,[ie]:Le,fechaActualizacionApoyos:new Date().toISOString()}))},j=()=>{if(!g.meta.trim())return;const xe={...g,id:crypto.randomUUID(),cumplida:!1};o(ie=>({...ie,metasProgreso:[...ie.metasProgreso||[],xe]})),b({trimestre:"T1",meta:""})},z=xe=>{o(ie=>({...ie,metasProgreso:(ie.metasProgreso||[]).map(Le=>Le.id===xe?{...Le,cumplida:!Le.cumplida}:Le)}))},ne=xe=>{o(ie=>({...ie,metasProgreso:(ie.metasProgreso||[]).filter(Le=>Le.id!==xe)}))},Z=J.useMemo(()=>{const xe=i.metasProgreso||[];if(xe.length===0)return{percent:0,color:"bg-slate-300"};const ie=xe.filter(Ie=>Ie.cumplida).length,Le=Math.round(ie/xe.length*100),nt=Le<40?"bg-red-500":Le<75?"bg-yellow-500":"bg-green-500";return{percent:Le,color:nt}},[i.metasProgreso]),ee=J.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const xe=new Date(i.fechaActualizacionApoyos),ie=new Date;return ie.setMonth(ie.getMonth()-3),xe<ie},[i.fechaActualizacionApoyos]),ae=()=>{if(!y.titulo.trim()||!y.fecha)return;const xe={...y,id:crypto.randomUUID(),resuelta:!1};o(ie=>({...ie,alertas:[...ie.alertas||[],xe].sort((Le,nt)=>new Date(Le.fecha).getTime()-new Date(nt.fecha).getTime())})),E({titulo:"",fecha:new Date().toISOString().split("T")[0]})},G=xe=>{o(ie=>({...ie,alertas:(ie.alertas||[]).map(Le=>Le.id===xe?{...Le,resuelta:!Le.resuelta}:Le)}))},K=xe=>{o(ie=>({...ie,alertas:(ie.alertas||[]).filter(Le=>Le.id!==xe)}))},le=xe=>{xe.target.files&&xe.target.files[0]&&k(xe.target.files[0])},O=()=>{if(!B)return;U(!0);const xe=new FileReader;xe.readAsDataURL(B),xe.onloadend=()=>{const ie={id:crypto.randomUUID(),nombre:B.name,url:xe.result,fechaSubida:new Date().toISOString()};o(Le=>({...Le,archivos:[ie,...Le.archivos||[]]})),k(null),U(!1)},xe.onerror=()=>{alert("Error al leer el archivo."),U(!1)}},W=xe=>{window.confirm("¿Eliminar este archivo?")&&o(ie=>({...ie,archivos:(ie.archivos||[]).filter(Le=>Le.id!==xe)}))},Y=()=>{if(!D.motivo.trim()||!D.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const xe={...D,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(ie=>({...ie,reuniones:[xe,...ie.reuniones||[]].sort((Le,nt)=>new Date(nt.fecha).getTime()-new Date(Le.fecha).getTime())})),C(P)},te=xe=>{window.confirm("¿Eliminar este registro de reunión?")&&o(ie=>({...ie,reuniones:(ie.reuniones||[]).filter(Le=>Le.id!==xe)}))},ce=()=>{var st,mt,_t;const xe=new ir("p","mm","a4"),ie=20,Le=xe.internal.pageSize.getWidth(),nt=xe.internal.pageSize.getHeight();let Ie=ie;const we=ut=>{ut.setFontSize(10),ut.setTextColor(100),ut.text("Ficha de Seguimiento - Módulo Inclusión",ie,15)};we(xe),xe.setFontSize(18),xe.setFont("helvetica","bold"),xe.setTextColor(40),xe.text(i.nombre,ie,Ie+10),Ie+=15,xe.setFontSize(11),xe.setFont("helvetica","normal"),xe.setTextColor(80),xe.text(`Curso: ${i.curso}`,ie,Ie),xe.text(`Dificultad: ${i.dificultad}`,ie,Ie+6),Ie+=15;const je=ut=>{Ie+ut>nt-ie&&(xe.addPage(),we(xe),Ie=ie)},et=ut=>{je(15),xe.setFontSize(14),xe.setFont("helvetica","bold"),xe.text(ut,ie,Ie),Ie+=10};if((st=i.intervenciones)!=null&&st.length&&(et("Historial de Intervenciones"),rl(xe,{startY:Ie,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.responsable,ut.accion,ut.observaciones||""]),theme:"grid",didDrawPage:ut=>we(xe)}),Ie=xe.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){je(30),et("Seguimiento y Apoyos"),xe.setFontSize(11),xe.setFont("helvetica","normal");const ut=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Nt=xe.splitTextToSize(ut,Le-ie*2);xe.text(Nt,ie,Ie),Ie+=Nt.length*5+10}(mt=i.metasProgreso)!=null&&mt.length&&(je(30),et("Metas de Progreso"),rl(xe,{startY:Ie,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(ut=>[ut.trimestre,ut.meta,ut.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:ut=>we(xe)}),Ie=xe.lastAutoTable.finalY+10),(_t=i.reuniones)!=null&&_t.length&&(et("Reuniones con Apoderados"),rl(xe,{startY:Ie,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(ut=>[new Date(ut.fecha).toLocaleDateString("es-CL"),ut.motivo,ut.acuerdos,ut.asistentes]),theme:"grid",didDrawPage:ut=>we(xe)})),xe.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},de=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:h.responsable,onChange:xe=>m(ie=>({...ie,responsable:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(xe=>c.jsx("option",{value:xe,children:xe},xe))]}),c.jsx("textarea",{value:h.accion,onChange:xe=>m(ie=>({...ie,accion:xe.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:xe=>m(ie=>({...ie,observaciones:xe.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:N,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:xe.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - ",xe.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>H(xe),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>L(xe.id),className:"text-red-500",children:"🗑️"})]})]})},xe.id))})]}),me=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),ee&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:I,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Z.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${Z.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Z.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:xe=>b(ie=>({...ie,trimestre:xe.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:xe=>b(ie=>({...ie,meta:xe.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:j,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:xe.cumplida,onChange:()=>z(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[xe.trimestre,":"]})," ",xe.meta]}),c.jsx("button",{onClick:()=>ne(xe.id),className:"text-red-500 text-sm",children:"🗑️"})]},xe.id))})]})]}),ge=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:y.titulo,onChange:xe=>E(ie=>({...ie,titulo:xe.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:y.fecha,onChange:xe=>E(ie=>({...ie,fecha:xe.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:ae,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(xe=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:xe.resuelta,onChange:()=>G(xe.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${xe.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[xe.titulo," (",new Date(xe.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>K(xe.id),className:"text-red-500 text-sm",children:"🗑️"})]},xe.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:le,className:"w-full text-sm"}),c.jsx("button",{onClick:O,disabled:!B||F,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:F?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(xe=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:xe.url,download:xe.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:xe.nombre}),c.jsx("button",{onClick:()=>W(xe.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},xe.id))})]})]}),Se=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:D.motivo,onChange:xe=>C(ie=>({...ie,motivo:xe.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:D.acuerdos,onChange:xe=>C(ie=>({...ie,acuerdos:xe.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:D.asistentes,onChange:xe=>C(ie=>({...ie,asistentes:xe.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:Y,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(xe=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:xe.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",xe.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(xe.fecha).toLocaleString("es-CL")," - Asistentes: ",xe.asistentes]})]}),c.jsx("button",{onClick:()=>te(xe.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},xe.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:xe=>xe.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ce,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(xe=>c.jsx("button",{onClick:()=>s(xe),className:`${a===xe?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:xe==="alertas"?"Alertas y Archivos":xe==="seguimiento"?"Seguimiento y Metas":xe},xe))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[a==="intervenciones"&&de(),a==="seguimiento"&&me(),a==="reuniones"&&Se(),a==="alertas"&&ge()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},B1e=({student:t,onClose:e,onConfirm:r})=>{const[n,a]=J.useState(ty[0]),s=()=>{r(t,n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ty.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},Q6=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(!0),[o,l]=J.useState(null),[u,d]=J.useState(null),[h,m]=J.useState(""),[g,b]=J.useState(""),[y,E]=J.useState("");J.useEffect(()=>{i(!0);const S=b1e(H=>{r(H),i(!1)}),N=C1e(H=>{a(H)});return()=>{S(),N()}},[]);const B=async(S,N)=>{if(e.some(L=>L.nombre===S.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const H={nombre:S.nombreCompleto,curso:S.curso||"",dificultad:N,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await E1e(H)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},k=async S=>{try{await _1e(S.id,S)}catch(N){console.error("Error al actualizar la ficha:",N),alert("Hubo un error al guardar los cambios en la ficha.")}},F=async S=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await S1e(S),(o==null?void 0:o.id)===S&&l(null)}catch(N){console.error("Error al eliminar estudiante:",N),alert("Hubo un error al eliminar al estudiante.")}},U=S=>{if(D.length===0){alert("No hay datos para exportar.");return}const N=D.map(H=>{var L;return{Nombre:H.nombre,Curso:H.curso,Dificultad:H.dificultad,"N° Intervenciones":((L=H.intervenciones)==null?void 0:L.length)||0,"Alertas Pendientes":(H.alertas||[]).filter(I=>!I.resuelta).length}});if(S==="xlsx"){const H=jl.json_to_sheet(N),L=jl.book_new();jl.book_append_sheet(L,H,"Estudiantes_Inclusion"),X4(L,"Estudiantes_Inclusion.xlsx")}else{const H=new ir;H.text("Listado de Estudiantes - Programa de Inclusión",14,15),rl(H,{startY:20,head:[Object.keys(N[0])],body:N.map(Object.values)}),H.save("Estudiantes_Inclusion.pdf")}},P=J.useMemo(()=>n.filter(S=>{var N;return S.profile===$t.ESTUDIANTE&&(((N=t.cursos)==null?void 0:N.includes(S.curso||""))||t.profile===$t.SUBDIRECCION)}).filter(S=>!e.some(N=>N.nombre===S.nombreCompleto)),[n,e,t]),D=J.useMemo(()=>e.filter(S=>S.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||S.curso===g)&&(y===""||S.dificultad===y)).sort((S,N)=>S.nombre.localeCompare(N.nombre)),[e,h,g,y]),C=J.useMemo(()=>n.filter(S=>S.profile===$t.PROFESORADO).map(S=>S.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),s?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",D.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>U("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>U("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:S=>m(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:g,onChange:S=>b(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),is.map(S=>c.jsx("option",{children:S},S))]}),c.jsxs("select",{value:y,onChange:S=>E(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),ty.map(S=>c.jsx("option",{children:S},S))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:D.map(S=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.curso," - ",S.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(S),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>F(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},S.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:P.map(S=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:S.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:S.curso})]}),c.jsx("button",{onClick:()=>d(S),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},S.id))})]})]}),u&&c.jsx(B1e,{student:u,onClose:()=>d(null),onConfirm:(S,N)=>{B(S,N),d(null)}}),o&&c.jsx(T1e,{student:o,onClose:()=>l(null),onSave:k,profesores:C})]})},n7="asistencia_dual",N1e=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},k1e=(t,e)=>{const r=fr(Kt(Gt,n7),ta("emailEstudiante","==",t),Kn("fechaHora","desc"));return Yr(r,a=>{const s=a.docs.map(i=>N1e(i));e(s)},a=>{console.error("Error subscribing to personal attendance:",a),e([])})},I1e=async t=>{try{const e={...t,fechaHora:Br.fromDate(new Date(t.fechaHora))};await Js(Kt(Gt,n7),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},F1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),D1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),R1e=({currentUser:t})=>{const[e,r]=J.useState(t.curso||""),[n,a]=J.useState([]),[s,i]=J.useState(!1),[o,l]=J.useState(!0),[u,d]=J.useState(null);J.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const m=k1e(t.email,g=>{a(g),l(!1)});return()=>m()},[t.email]);const h=m=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async g=>{const b={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await I1e(b),d({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}d({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),nm.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:s||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:s||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(F1e,{}):c.jsx(D1e,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},L1e=async()=>{try{console.log("🔍 Debugging users collection...");const t=Kt(nn,"users"),e=fr(t,limit(10)),r=await Ys(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),l={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},U1e=async(t,e)=>{var l,u,d;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),a=Br.fromDate(r),s=Br.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=Kt(nn,h);try{const g=fr(m,ta("fechaHora",">=",a),ta("fechaHora","<=",s)),b=await Ys(g);o[h]={exists:!0,hasDateField:!0,count:b.size,sampleDoc:((l=b.docs[0])==null?void 0:l.data())||null}}catch{const b=["fecha","timestamp","createdAt"];let y=!1;for(const E of b)try{const B=fr(m,ta(E,">=",a),ta(E,"<=",s)),k=await Ys(B);o[h]={exists:!0,hasDateField:E,count:k.size,sampleDoc:((u=k.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const E=fr(m,Kn("__name__"),limit(5)),B=await Ys(E);o[h]={exists:!0,hasDateField:!1,count:B.size,sampleDoc:((d=B.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},M1e=(t,e,r,n)=>{try{const a=new Date(t,e,1),s=new Date(t,e+1,0,23,59,59,999),i=Br.fromDate(a),o=Br.fromDate(s),l=["asistenciaDual","asistenciaEmpresa","asistencia"],u=[],d=new Map,h=()=>{const m=Array.from(d.values());console.log(`Total registros encontrados: ${m.length}`),r(m)};return l.forEach(m=>{try{const g=Kt(nn,m),b=fr(g,ta("fechaHora",">=",i),ta("fechaHora","<=",o),Kn("fechaHora","desc")),y=Yr(b,E=>{console.log(`Loading from collection: ${m}, docs: ${E.size}`),Array.from(d.keys()).filter(k=>k.startsWith(`${m}_`)).forEach(k=>d.delete(k)),E.forEach(k=>{var H,L,I,j,z,ne;const F=k.data();let U;F.fechaHora?U=((L=(H=F.fechaHora)==null?void 0:H.toDate)==null?void 0:L.call(H))||new Date(F.fechaHora):F.fecha?U=((j=(I=F.fecha)==null?void 0:I.toDate)==null?void 0:j.call(I))||new Date(F.fecha):F.timestamp?U=((ne=(z=F.timestamp)==null?void 0:z.toDate)==null?void 0:ne.call(z))||new Date(F.timestamp):U=new Date;const P=F.emailEstudiante||F.email||F.userEmail||"",D=F.nombreEstudiante||F.nombre||F.displayName||F.nombreCompleto||"";let C=F.tipo||F.type||"Entrada";F.action?C=F.action==="checkin"?"Entrada":"Salida":F.tipoRegistro&&(C=F.tipoRegistro);const S={id:k.id,emailEstudiante:P,nombreEstudiante:D,curso:F.curso||F.course||"",fechaHora:U,tipo:C,ubicacion:F.ubicacion||F.location||F.coordinates||null,observaciones:F.observaciones||F.notes||F.comentarios||"",...F},N=`${m}_${k.id}`;d.set(N,S)}),h()},E=>{console.warn(`Error in collection ${m}:`,E)});u.push(y)}catch(g){console.warn(`Error setting up subscription for ${m}:`,g)}}),()=>{u.forEach(m=>{try{m()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},P1e=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["users","usuarios","estudiantes","profiles","accounts","members"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`),t(o)};let i=!1;return r.forEach(o=>{try{const l=Kt(nn,o),u=fr(l),d=Yr(u,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>a.delete(g)),h.forEach(g=>{var b,y,E,B;try{const k=g.data();console.log(`Procesando usuario de ${o}:`,g.id,k);const F=k.email||k.userEmail||k.mail||k.correo||"",U=k.nombreCompleto||k.displayName||k.name||k.nombre||k.fullName||"",P=k.curso||k.course||k.class||k.grade||"";let D=k.profile||k.role||k.tipo||k.userType||$t.ESTUDIANTE;if(typeof D=="string"){const N=D.toLowerCase();N.includes("estudiante")||N.includes("student")||N.includes("alumno")?D=$t.ESTUDIANTE:N.includes("coordinador")||N.includes("coordinator")?D=$t.COORDINADOR_TP:(N.includes("profesor")||N.includes("teacher")||N.includes("docente"))&&(D=$t.PROFESOR)}const C={id:g.id,email:F,nombreCompleto:U,curso:P,profile:D,activo:k.activo!==!1,fechaCreacion:((y=(b=k.fechaCreacion)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(k.fechaCreacion)||new Date,ultimaActividad:((B=(E=k.ultimaActividad)==null?void 0:E.toDate)==null?void 0:B.call(E))||new Date(k.ultimaActividad)||new Date,...k},S=`${o}_${g.id}`;a.set(S,C)}catch(k){console.warn(`Error procesando documento ${g.id} en ${o}:`,k)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},2e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},j1e=(t,e)=>{try{console.log("Setting up users subscription...");const r=Kt(nn,"users"),n=fr(r);return Yr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var h,m,g,b;try{const y=d.data();console.log(`Processing user doc ${d.id}:`,y);const E=y.email||y.userEmail||y.mail||"",B=y.nombreCompleto||y.displayName||y.name||y.nombre||"",k=y.curso||y.course||y.class||"";let F=y.profile||y.role||y.tipo||$t.ESTUDIANTE;if(typeof F=="string"){const P=F.toLowerCase();P.includes("estudiante")||P.includes("student")||P.includes("alumno")?F=$t.ESTUDIANTE:P.includes("coordinador")||P.includes("coordinator")?F=$t.COORDINADOR_TP:(P.includes("profesor")||P.includes("teacher")||P.includes("docente"))&&(F=$t.PROFESOR)}const U={id:d.id,email:E,nombreCompleto:B,curso:k,profile:F,activo:y.activo!==!1,fechaCreacion:((m=(h=y.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((b=(g=y.ultimaActividad)==null?void 0:g.toDate)==null?void 0:b.call(g))||new Date(y.ultimaActividad)||new Date,...y};i.push(U)}catch(y){console.warn(`Error processing user document ${d.id}:`,y)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===$t.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},s=>{console.error("Error in subscribeToAllUsers:",s),e&&e(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},H6=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},O1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Q1e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),H1e=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState(!0),[i,o]=J.useState(null),[l,u]=J.useState(new Date),[d,h]=J.useState("todos"),[m,g]=J.useState("");J.useEffect(()=>{s(!0),o(null);const D=l.getFullYear(),C=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",D,"Mes:",C);let S=!1,N=!1;const H=()=>{S&&N&&(console.log("=== CARGA COMPLETA ==="),s(!1))};U1e(D,C).then(L=>{console.log("🔍 Debug info for collections:",L),Object.entries(L).forEach(([I,j])=>{if(j.exists&&j.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${I.toUpperCase()}:`),console.log(`   📊 Total documentos: ${j.totalDocs}`),console.log(`   📅 Documentos del período: ${j.count}`),console.log(`   🔑 Campo de fecha: ${j.hasDateField}`),j.sampleDoc){console.log("   📄 Documento ejemplo:",j.sampleDoc);const z=j.sampleDoc,ne=z.emailEstudiante||z.email||z.userEmail||z.correo||"NO ENCONTRADO",Z=z.tipo||z.type||z.action||z.tipoRegistro||"NO ENCONTRADO",ee=z.fechaHora||z.fecha||z.timestamp||z.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${ne}`),console.log(`   📝 Tipo registro: ${Z}`),console.log(`   📅 Fecha: ${ee}`),console.log("   🗂️ Todos los campos:",Object.keys(z))}j.filteredDocs&&j.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",j.filteredDocs.length),j.filteredDocs.forEach((z,ne)=>{ne<3&&console.log(`      ${ne+1}. ID: ${z.id}`,z.data)}))}else j.exists?console.log(`⚪ Colección ${I}: vacía`):console.log(`❌ Colección ${I}: no existe`)})}).catch(L=>{console.error("Debug error:",L)}),L1e().then(L=>{console.log("🔍 Debug info for users:",L),(!L.exists||L.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async j=>{var z;try{const ne=Kt(nn,j),Z=fr(ne,pw(5)),ee=await Ys(Z);ee.size>0?(console.log(`✅ Encontrada colección alternativa: ${j} con ${ee.size} documentos`),console.log("Documento muestra:",(z=ee.docs[0])==null?void 0:z.data())):console.log(`❌ Colección ${j}: vacía`)}catch{console.log(`❌ Colección ${j}: no existe`)}}))}).catch(L=>{console.error("Users debug error:",L)});try{console.log("Configurando suscripción a asistencia...");const L=M1e(D,C,j=>{if(console.log("✅ Received registros:",j.length),j.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",j[0]);const z=[...new Set(j.map(K=>K.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",z);const ne=[...new Set(j.map(K=>K.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",ne);const Z=j.reduce((K,le)=>{const O=new Date(le.fechaHora).getDate();return K[O]||(K[O]=[]),K[O].push(le),K},{});console.log("📅 Registros por día del mes:",Object.keys(Z).map(K=>({dia:parseInt(K),cantidad:Z[parseInt(K)].length})));const ee=r.map(K=>K.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",ee);const ae=z.filter(K=>ee.includes(K)),G=z.filter(K=>!ee.includes(K));console.log("✅ Emails que coinciden:",ae),console.log("❌ Emails que NO coinciden:",G)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(j),S=!0,H()},j=>{console.error("❌ Error fetching asistencia:",j),o("Error al cargar datos de asistencia: "+j.message),S=!0,H()});console.log("Configurando suscripción a usuarios...");const I=P1e(j=>{if(console.log("✅ Received users (multi-collection):",j.length),j.length>0){console.log("Sample user:",j[0]);const z=j.filter(ne=>ne.profile===$t.ESTUDIANTE&&ne.curso);console.log("Dual students found:",z.length),z.forEach(ne=>{console.log(`- ${ne.nombreCompleto} (${ne.curso}) - ${ne.email}`)})}n(j),N=!0,H()},j=>{console.error("❌ Error fetching users (multi-collection):",j),console.log("🔄 Intentando con función original de usuarios...");const z=j1e(ne=>{console.log("✅ Received users (fallback):",ne.length),n(ne),N=!0,H()},ne=>{console.error("❌ Error en fallback también:",ne),o("Error al cargar estudiantes: "+j.message),N=!0,H()})});return()=>{console.log("Limpiando suscripciones..."),L&&L(),I&&I()}}catch(L){console.error("❌ Error setting up subscriptions:",L),o("Error al inicializar conexiones: "+(L instanceof Error?L.message:"Error desconocido")),s(!1)}},[l]);const{monthDays:b,monthName:y,year:E}=J.useMemo(()=>{const D=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(D,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:D}},[l]),B=J.useMemo(()=>{let D=r.filter(C=>C.profile===$t.ESTUDIANTE&&C.curso&&nm.includes(H6(C.curso)));return d!=="todos"&&(D=D.filter(C=>H6(C.curso||"")===d)),m&&(D=D.filter(C=>C.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),D.sort((C,S)=>C.nombreCompleto.localeCompare(S.nombreCompleto))},[r,d,m]),k=J.useMemo(()=>{const D=new Map;return t.forEach(C=>{const S=C.emailEstudiante;if(!S)return;const N=new Date(C.fechaHora).getDate();D.has(S)||D.set(S,new Map);const H=D.get(S);H.has(N)||H.set(N,{});const L=H.get(N);C.tipo==="Entrada"?(!L.entrada||new Date(C.fechaHora)<new Date(L.entrada.fechaHora))&&(L.entrada=C):C.tipo==="Salida"&&(!L.salida||new Date(C.fechaHora)>new Date(L.salida.fechaHora))&&(L.salida=C)}),D},[t]),F=D=>{u(C=>{const S=new Date(C);return S.setMonth(S.getMonth()+D),S})},U=D=>{D!=null&&D.latitud&&(D!=null&&D.longitud)&&window.open(`https://www.google.com/maps?q=${D.latitud},${D.longitud}`,"_blank")},P=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>F(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${E}`}),c.jsx("button",{onClick:()=>F(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:D=>h(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),nm.map(D=>c.jsx("option",{value:D,children:D},D))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:D=>g(D.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:b},(D,C)=>{const N=new Date(E,l.getMonth(),C+1).getDay(),H=N===0||N===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${H?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:P[N]}),c.jsx("div",{children:C+1})]},C)})]})}),c.jsx("tbody",{children:B.length>0?B.map(D=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:D.nombreCompleto}),Array.from({length:b},(C,S)=>{var j;const N=S+1,H=(j=k.get(D.email))==null?void 0:j.get(N),L=new Date(E,l.getMonth(),S+1),I=L.getDay()===0||L.getDay()===6;return c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${I?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(H==null?void 0:H.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z;return U((z=H.entrada)==null?void 0:z.ubicacion)},children:[c.jsx(O1e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(H.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(H==null?void 0:H.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var z;return U((z=H.salida)==null?void 0:z.ubicacion)},children:[c.jsx(Q1e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(H.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},N)})]},D.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:b+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},Qw="evaluaciones_formativas",Hw="calificaciones_formativas",tT="trabajos_grupales_formativos",V1e="usuarios",rT=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},z1e=(t,e,r)=>{const n=fr(Kt(Gt,Qw),ta("curso","==",t),ta("asignatura","==",e),Kn("fecha","asc"));return Yr(n,a=>{r(a.docs.map(s=>rT(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},G1e=async(t,e)=>{const r=b8(Gt),n=Lr(Kt(Gt,Qw));r.set(n,{...t,fecha:Br.fromDate(new Date(t.fecha+"T00:00:00"))});const a=Lr(Gt,Hw,n.id);return r.set(a,e),await r.commit(),n.id},q1e=async(t,e)=>{const r=Lr(Gt,Qw,t);await il(r,e,{merge:!0})},K1e=async t=>{const e=b8(Gt);e.delete(Lr(Gt,Qw,t)),e.delete(Lr(Gt,Hw,t)),await e.commit()},W1e=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const a=Lr(Gt,Hw,n);return Yr(a,s=>{s.exists()&&e({[n]:s.data()})})});return()=>r.forEach(n=>n())},$1e=async(t,e)=>{const r=Lr(Gt,Hw,t);await il(r,e,{merge:!0})},X1e=(t,e,r)=>{const n=fr(Kt(Gt,tT),ta("curso","==",t),ta("asignatura","==",e),Kn("fechaPresentacion","desc"));return Yr(n,a=>{r(a.docs.map(s=>rT(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},Y1e=async t=>{const e={...t,fechaPresentacion:Br.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await Js(Kt(Gt,tT),e)},J1e=async(t,e)=>{const r=Lr(Gt,tT,t);await il(r,e,{merge:!0})},Z1e=t=>{const e=fr(Kt(Gt,V1e));return Yr(e,r=>{t(r.docs.map(n=>rT(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},a7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},by={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},s7=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},eve=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=s7(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),tve=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const a=s7(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(s=>c.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:by[s]||by.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},rve=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=J.useState([]),[i,o]=J.useState({}),[l,u]=J.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=J.useState(null),[m,g]=J.useState(null),[b,y]=J.useState(!0),E=J.useMemo(()=>r.filter(S=>S.profile===$t.ESTUDIANTE&&a7(S.curso||"")===t).map(S=>S.nombreCompleto).sort((S,N)=>S.localeCompare(N)),[r,t]);J.useEffect(()=>{y(!0);const S=z1e(t,e,N=>{s(N);const H=N.map(I=>I.id),L=W1e(H,I=>{o(j=>({...j,...I}))});return y(!1),()=>L()});return()=>S()},[t,e]);const B=S=>{const{name:N,value:H}=S.target;d?h(L=>L?{...L,[N]:H}:null):u(L=>({...L,[N]:H}))},k=async S=>{if(S.preventDefault(),g(null),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const N={asignatura:e,curso:t,...l},H=E.reduce((L,I)=>(L[I]="trabajado",L),{});try{await G1e(N,H),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(L){console.error(L),g("No se pudo crear la evaluación.")}},F=(S,N)=>{var j;const L=(((j=i[S])==null?void 0:j[N])||"trabajado")==="trabajado"?"no trabajado":"trabajado",I={...i,[S]:{...i[S]||{},[N]:L}};o(I),$1e(S,{[N]:L}).catch(z=>{console.error("Error updating grade:",z)})},U=S=>h(S),P=async()=>{if(d)try{await q1e(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(S){console.error(S),g("No se pudo guardar la edición.")}},D=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await K1e(S)}catch(N){console.error(N),g("No se pudo eliminar la evaluación.")}},C=J.useCallback(S=>{if(a.length===0)return"-";let N=0,H=0;return a.forEach(L=>{var j;const I=(j=i[L.id])==null?void 0:j[S];I==="trabajado"?(N+=7,H++):I==="no trabajado"&&(N+=2,H++)}),H===0?"-":(N/H).toFixed(1)},[i,a]);return b?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(S=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:B,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:B,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:P,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:S.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>U(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>D(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:E.map(S=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),a.map(N=>{var I;const L=((I=i[N.id])==null?void 0:I[S])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>F(N.id,S),className:`text-3xl transition-opacity duration-200 ${L?"opacity-100":"opacity-20"}`,children:by[e]||by.Default})},N.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(S)})]},S))})]})})]})},nve=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[a,s]=J.useState([]),[i,o]=J.useState(null),[l,u]=J.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=J.useState({}),[m,g]=J.useState(2),b=J.useMemo(()=>r.filter(U=>U.profile===$t.ESTUDIANTE&&a7(U.curso||"")===t).sort((U,P)=>U.nombreCompleto.localeCompare(P.nombreCompleto)),[r,t]);J.useEffect(()=>{const U=X1e(t,e,s);return()=>U()},[t,e]),J.useEffect(()=>{if(i){const U={};i.grupos.forEach(P=>{P.integrantes.forEach(D=>{U[D.nombre]={groupNumber:String(P.numero),role:D.rol||""}})}),h(U)}else h({})},[i]);const y=async U=>{if(U.preventDefault(),!l.nombre.trim())return;const P={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await Y1e(P),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(D){console.error(D),alert("No se pudo crear la actividad grupal.")}},E=async()=>{if(!i)return;const U=new Map;for(const D of b){const C=d[D.nombreCompleto];if(C&&C.groupNumber){const S=parseInt(C.groupNumber,10);isNaN(S)||(U.has(S)||U.set(S,[]),U.get(S).push({nombre:D.nombreCompleto,rol:C.role||void 0}))}}const P=Array.from(U.entries()).map(([D,C])=>({numero:D,integrantes:C})).sort((D,C)=>D.numero-C.numero);try{await J1e(i.id,{grupos:P}),alert("Grupos guardados con éxito.")}catch(D){console.error(D),alert("No se pudieron guardar los grupos.")}},B=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const U=[...b].sort(()=>Math.random()-.5),P={};U.forEach((D,C)=>{var S;P[D.nombreCompleto]={groupNumber:String(C%m+1),role:((S=d[D.nombreCompleto])==null?void 0:S.role)||""}}),h(P)},k=(U,P,D)=>{h(C=>({...C,[U]:{...C[U]||{groupNumber:"",role:""},[P]:D}}))},F=J.useMemo(()=>{const U=new Map;return Object.entries(d).forEach(([P,D])=>{D.groupNumber&&(U.has(D.groupNumber)||U.set(D.groupNumber,[]),U.get(D.groupNumber).push({nombre:P,rol:D.role}))}),Array.from(U.entries()).sort((P,D)=>parseInt(P[0])-parseInt(D[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:U=>g(parseInt(U.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:B,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:b.map(U=>{var P;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:U.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((P=d[U.nombreCompleto])==null?void 0:P.groupNumber)||"",onChange:D=>k(U.nombreCompleto,"groupNumber",D.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},U.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:F.map(([U,P])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",U]}),c.jsx("ul",{className:"space-y-2",children:P.map(D=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:D.nombre}),c.jsxs("select",{value:D.rol||"",onChange:C=>k(D.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),_8.map(C=>c.jsx("option",{value:C,children:C},C))]})]},D.nombre))})]},U))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:U=>u({...l,nombre:U.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:U=>u({...l,fecha:U.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(U=>c.jsxs("button",{onClick:()=>o(U),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:U.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",U.fechaPresentacion]})]},U.id))]})]})},ave=({currentUser:t})=>{const[e,r]=J.useState("calificaciones"),[n,a]=J.useState(null),[s,i]=J.useState(null),[o,l]=J.useState([]),[u,d]=J.useState(!0);J.useEffect(()=>{d(!0);const y=Z1e(E=>{l(E),d(!1)});return()=>y()},[]);const h=J.useMemo(()=>t.cursos||[],[t.cursos]),m=J.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:y,label:E})=>c.jsx("button",{onClick:()=>r(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:E}),b=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(eve,{cursos:h,onSelect:a});if(!s)return c.jsx(tve,{curso:n,asignaturas:m,onSelect:i,onBack:()=>a(null)});if(e==="calificaciones")return c.jsx(rve,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(nve,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:b()})]})},t1="acompanamientos",sve=async()=>{try{const t=fr(Kt(nn,t1),Kn("fecha","desc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},ive=async t=>{try{return{id:(await Js(Kt(nn,t1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},ove=async(t,e)=>{try{const r=Lr(nn,t1,t);await Km(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},lve=async t=>{try{const e=Lr(nn,t1,t);await No(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},cve=async t=>{try{const e=fr(Kt(nn,t1),ta("docente","==",t),Kn("fecha","desc"));return(await Ys(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},uve=async()=>{try{const t=Lr(nn,"configuracion","rubricaAcompanamiento"),e=await km(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},Ave=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),[a,s]=J.useState(!1),[i,o]=J.useState(!1),[l,u]=J.useState(null),[d,h]=J.useState("list"),[m,g]=J.useState(null),[b,y]=J.useState(!1),[E,B]=J.useState(!1),k=Ig,F=J.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[U,P]=J.useState(F),D=J.useCallback(async()=>{s(!0);try{const ae=await sve();e(ae),u(null)}catch(ae){console.error("Error al cargar acompañamientos desde Firestore",ae),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{s(!1)}},[]),C=J.useCallback(async()=>{o(!0);try{const G=(await e7()).filter(K=>K.profile===$t.PROFESORADO).map(K=>K.nombreCompleto).sort();n(G)}catch(ae){console.error("Error al cargar profesores desde Firestore",ae),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);J.useEffect(()=>{D(),C()},[D,C]);const S=ae=>{P(G=>({...G,[ae.target.name]:ae.target.value}))},N=(ae,G)=>{P(K=>({...K,rubricaResultados:{...K.rubricaResultados,[ae]:G}}))},H=async()=>{y(!0);const{rubricaResultados:ae,observacionesGenerales:G}=U;let K=`Resultados de la Rúbrica:
`;k.forEach(O=>{O.criteria.forEach(W=>{const Y=ae[W.name];if(Y&&W.levels[Y-1]){const te=W.levels[Y-1];K+=`- Criterio: "${W.name}" | Nivel: ${Y} (${te})
`}})}),K+=`
Observaciones Generales del Evaluador:
${G||"No se proveyeron observaciones adicionales."}`;const le=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${K}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{Gl("Acompañamiento - Consolidar Feedback");const Y=(await new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:le})).text.replace(/(\*\*|\*)/g,"");P(te=>({...te,retroalimentacionConsolidada:Y}))}catch(O){console.error("Error al generar retroalimentación con IA",O),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{y(!1)}},L=async()=>{const ae=m;if(!ae)return;B(!0);const G=t.find(Se=>Se.id===ae);if(!G){B(!1);return}const K=new ir({orientation:"p",unit:"mm",format:"a4"}),le=20,O=K.internal.pageSize.getWidth(),W=K.internal.pageSize.getHeight(),Y=O-le*2;let te=le;const ce=Se=>{Se.setFont("helvetica","bold"),Se.setFontSize(10),Se.setTextColor(100),Se.text("LICEO INDUSTRIAL DE RECOLETA",O/2,15,{align:"center"})};ce(K),K.setFont("helvetica","bold"),K.setFontSize(18),K.setTextColor(40),K.text("Informe de Acompañamiento Docente",O/2,te+10,{align:"center"}),te+=25,rl(K,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},G.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(G.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},G.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},G.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=K.lastAutoTable.finalY+10;const de=[],me=["Débil","Incipiente","Satisfactorio","Avanzado"];k.forEach(Se=>{de.push([{content:Se.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),Se.criteria.forEach(xe=>{const ie=G.rubricaResultados[xe.name],Le=ie?me[ie-1]:"No evaluado";de.push([xe.name,Le])})}),rl(K,{startY:te,head:[["Indicador","Nivel de Logro"]],body:de,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:Se=>{Se.pageNumber>1&&ce(K)}}),te=K.lastAutoTable.finalY+15;const ge=(Se,xe)=>{te>W-le-10&&(K.addPage(),ce(K),te=le),K.setFont("helvetica",xe.style),K.setFontSize(xe.size);const ie=K.splitTextToSize(Se,Y),Le=ie.length*(xe.size*.352778*1.15);te+Le>W-le&&(K.addPage(),ce(K),te=le),K.text(ie,le,te,{align:"left"}),te+=Le+(xe.isTitle?5:8)};G.retroalimentacionConsolidada?G.retroalimentacionConsolidada.split(/(?=## )/).forEach(xe=>{if(xe.trim()){const ie=xe.trim().split(`
`),Le=ie[0].replace("## ",""),nt=ie.slice(1).join(`
`).trim();ge(Le,{size:14,style:"bold",isTitle:!0}),ge(nt,{size:11,style:"normal",isTitle:!1})}}):(ge("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),ge("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),K.save(`Acompanamiento_${G.docente.replace(/\s/g,"_")}_${new Date(G.fecha).toLocaleDateString("es-CL")}.pdf`),B(!1)},I=async ae=>{if(ae.preventDefault(),!U.docente||!U.curso||!U.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let G=m;if(m)await ove(m,U);else{const K=await ive(U);g(K.id),P({...U}),G=K.id}await D(),G&&alert("¡Guardado correctamente!")}catch(G){console.error("Error al guardar acompañamiento:",G),u("Error al guardar el registro en la nube.")}},j=()=>{P(F),g(null),h("form"),u(null)},z=ae=>{P(ae),g(ae.id),h("form"),u(null)},ne=async ae=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await lve(ae),await D()}catch(G){console.error("Error al eliminar acompañamiento:",G),u("No se pudo eliminar el registro en la nube.")}},Z=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:j,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!a&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!a&&t.length>0&&t.map(ae=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ae.curso," - ",ae.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(ae.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>z(ae),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>ne(ae.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},ae.id))})]}),ee=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:I,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:U.docente,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:U.curso,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),is.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:U.asignatura,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),nl.map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:U.bloques,onChange:S,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(ae=>c.jsx(At.Fragment,{children:ae.criteria.map((G,K)=>c.jsxs("tr",{children:[K===0&&c.jsx("td",{rowSpan:ae.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:ae.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:G.name}),G.levels.map((le,O)=>{const W=O+1,Y=U.rubricaResultados[G.name]===W;return c.jsx("td",{onClick:()=>N(G.name,W),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Y?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:le},W)})]},G.name))},ae.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:U.observacionesGenerales,onChange:S,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:U.retroalimentacionConsolidada,onChange:S,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:H,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:L,disabled:!m||E,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:E?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?Z():ee()})]})},nT="mensajes_internos",dve="usuarios",i7="mensajes_read_status",o7=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},fve=(t,e)=>{const r=fr(Kt(Gt,nT),ta("participants","array-contains",t),Kn("fecha","desc"));return Yr(r,a=>{const s=a.docs.map(i=>o7(i));e(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),e([])})},hve=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:Br.fromDate(new Date)};await Js(Kt(Gt,nT),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},mve=async t=>{try{const e=Lr(Gt,nT,t);await No(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},pve=(t,e)=>{const r=Lr(Gt,i7,t);return Yr(r,a=>{a.exists()?e(a.data()):e({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),e({announcements:[],messages:[]})})},gve=async(t,e)=>{try{const r=Lr(Gt,i7,t);await il(r,{messages:m$(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},xve=t=>{const e=fr(Kt(Gt,dve),Kn("nombreCompleto","asc"));return Yr(e,n=>{const a=n.docs.map(s=>o7(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},vve=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=J.useState("inbox"),[a,s]=J.useState([]),[i,o]=J.useState([]),[l,u]=J.useState(null),[d,h]=J.useState({announcements:[],messages:[]}),[m,g]=J.useState(!0),b={para:"",asunto:"",cuerpo:""},[y,E]=J.useState(b);J.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const C=fve(t.email,H=>{s(H),g(!1)}),S=xve(o),N=pve(t.id,H=>{h(H),e()});return()=>{C(),S(),N()}},[t.id,t.email,e]);const B=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&gve(t.id,C.id).catch(S=>{console.error("Failed to mark message as read:",S)})},k=async C=>{if(C.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await hve(S),E(b),n("sent")}catch(N){console.error("Error sending message:",N),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},F=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await mve(C),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},U=C=>{E({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},P=J.useMemo(()=>a.filter(C=>C.para===t.email),[a,t.email]),D=J.useMemo(()=>a.filter(C=>C.de===t.email),[a,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),E(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?P:D).map(C=>{const S=r==="inbox"&&!d.messages.includes(C.id);return c.jsxs("div",{onClick:()=>B(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),S&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:y.para,onChange:C=>E({...y,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>c.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:C=>E({...y,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:C=>E({...y,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>U(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>F(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d5=function(t,e){return d5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},d5(t,e)};function Uc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");d5(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var f5=function(){return f5=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},f5.apply(this,arguments)};function Ji(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(h){i(h)}}function l(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):a(d.value).then(o,l)}u((n=n.apply(t,[])).next())})}function Di(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kv(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var LA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Vw=function(t,e){return LA.fromClientRect(t,e.getBoundingClientRect())},yve=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new LA(0,0,n,a)},zw=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},ts=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},V6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Iv=0;Iv<V6.length;Iv++)wve[V6.charCodeAt(Iv)]=Iv;var z6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fv=0;Fv<z6.length;Fv++)mg[z6.charCodeAt(Fv)]=Fv;var bve=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=mg[t.charCodeAt(n)],i=mg[t.charCodeAt(n+1)],o=mg[t.charCodeAt(n+2)],l=mg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},Cve=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Eve=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},gh=5,aT=11,xE=2,_ve=aT-gh,l7=65536>>gh,Sve=1<<gh,vE=Sve-1,Tve=1024>>gh,Bve=l7+Tve,Nve=Bve,kve=32,Ive=Nve+kve,Fve=65536>>aT,Dve=1<<_ve,Rve=Dve-1,G6=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Lve=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Uve=function(t,e){var r=bve(t),n=Array.isArray(r)?Eve(r):new Uint32Array(r),a=Array.isArray(r)?Cve(r):new Uint16Array(r),s=24,i=G6(a,s/2,n[4]/2),o=n[5]===2?G6(a,(s+n[4])/2):Lve(n,Math.ceil((s+n[4])/4));return new Mve(n[0],n[1],n[2],n[3],i,o)},Mve=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>gh],r=(r<<xE)+(e&vE),this.data[r];if(e<=65535)return r=this.index[l7+(e-55296>>gh)],r=(r<<xE)+(e&vE),this.data[r];if(e<this.highStart)return r=Ive-Fve+(e>>aT),r=this.index[r],r+=e>>gh&Rve,r=this.index[r],r=(r<<xE)+(e&vE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),q6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dv=0;Dv<q6.length;Dv++)Pve[q6.charCodeAt(Dv)]=Dv;var jve="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",K6=50,Ove=1,c7=2,u7=3,Qve=4,Hve=5,W6=7,A7=8,$6=9,qd=10,h5=11,X6=12,m5=13,Vve=14,pg=15,p5=16,Rv=17,$p=18,zve=19,Y6=20,g5=21,Xp=22,yE=23,S0=24,$o=25,gg=26,xg=27,T0=28,Gve=29,ah=30,qve=31,Lv=32,Uv=33,x5=34,v5=35,y5=36,yx=37,w5=38,S2=39,T2=40,wE=41,d7=42,Kve=43,Wve=[9001,65288],f7="!",cn="×",Mv="÷",b5=Uve(jve),pA=[ah,y5],C5=[Ove,c7,u7,Hve],h7=[qd,A7],J6=[xg,gg],$ve=C5.concat(h7),Z6=[w5,S2,T2,x5,v5],Xve=[pg,m5],Yve=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var o=b5.get(s);if(o>K6?(a.push(!0),o-=K6):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(p5);if(o===Qve||o===h5){if(i===0)return n.push(i),r.push(ah);var l=r[i-1];return $ve.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(ah))}if(n.push(i),o===qve)return r.push(e==="strict"?g5:yx);if(o===d7||o===Gve)return r.push(ah);if(o===Kve)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(yx):r.push(ah);r.push(o)}),[n,r,a]},bE=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==qd)break}if(a===qd)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==qd)break}if(o!==qd)break}return!1},eD=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===qd)r--;else return n}return 0},Jve=function(t,e,r,n,a){if(r[n]===0)return cn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return cn;var i=s-1,o=s+1,l=e[s],u=i>=0?e[i]:0,d=e[o];if(l===c7&&d===u7)return cn;if(C5.indexOf(l)!==-1)return f7;if(C5.indexOf(d)!==-1||h7.indexOf(d)!==-1)return cn;if(eD(s,e)===A7)return Mv;if(b5.get(t[s])===h5||(l===Lv||l===Uv)&&b5.get(t[o])===h5||l===W6||d===W6||l===$6||[qd,m5,pg].indexOf(l)===-1&&d===$6||[Rv,$p,zve,S0,T0].indexOf(d)!==-1||eD(s,e)===Xp||bE(yE,Xp,s,e)||bE([Rv,$p],g5,s,e)||bE(X6,X6,s,e))return cn;if(l===qd)return Mv;if(l===yE||d===yE)return cn;if(d===p5||l===p5)return Mv;if([m5,pg,g5].indexOf(d)!==-1||l===Vve||u===y5&&Xve.indexOf(l)!==-1||l===T0&&d===y5||d===Y6||pA.indexOf(d)!==-1&&l===$o||pA.indexOf(l)!==-1&&d===$o||l===xg&&[yx,Lv,Uv].indexOf(d)!==-1||[yx,Lv,Uv].indexOf(l)!==-1&&d===gg||pA.indexOf(l)!==-1&&J6.indexOf(d)!==-1||J6.indexOf(l)!==-1&&pA.indexOf(d)!==-1||[xg,gg].indexOf(l)!==-1&&(d===$o||[Xp,pg].indexOf(d)!==-1&&e[o+1]===$o)||[Xp,pg].indexOf(l)!==-1&&d===$o||l===$o&&[$o,T0,S0].indexOf(d)!==-1)return cn;if([$o,T0,S0,Rv,$p].indexOf(d)!==-1)for(var h=s;h>=0;){var m=e[h];if(m===$o)return cn;if([T0,S0].indexOf(m)!==-1)h--;else break}if([xg,gg].indexOf(d)!==-1)for(var h=[Rv,$p].indexOf(l)!==-1?i:s;h>=0;){var m=e[h];if(m===$o)return cn;if([T0,S0].indexOf(m)!==-1)h--;else break}if(w5===l&&[w5,S2,x5,v5].indexOf(d)!==-1||[S2,x5].indexOf(l)!==-1&&[S2,T2].indexOf(d)!==-1||[T2,v5].indexOf(l)!==-1&&d===T2||Z6.indexOf(l)!==-1&&[Y6,gg].indexOf(d)!==-1||Z6.indexOf(d)!==-1&&l===xg||pA.indexOf(l)!==-1&&pA.indexOf(d)!==-1||l===S0&&pA.indexOf(d)!==-1||pA.concat($o).indexOf(l)!==-1&&d===Xp&&Wve.indexOf(t[o])===-1||pA.concat($o).indexOf(d)!==-1&&l===$p)return cn;if(l===wE&&d===wE){for(var g=r[s],b=1;g>0&&(g--,e[g]===wE);)b++;if(b%2!==0)return cn}return l===Lv&&d===Uv?cn:Mv},Zve=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Yve(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[$o,ah,d7].indexOf(o)!==-1?yx:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,a,i]},e2e=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===f7,this.start=n,this.end=a}return t.prototype.slice=function(){return ts.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),t2e=function(t,e){var r=zw(t),n=Zve(r,e),a=n[0],s=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=cn;u<o&&(d=Jve(r,s,a,++u,i))===cn;);if(d!==cn||u===o){var h=new e2e(r,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},r2e=1,n2e=2,r1=4,tD=8,Cy=10,rD=47,Vg=92,a2e=9,s2e=32,Pv=34,Yp=61,i2e=35,o2e=36,l2e=37,jv=39,Ov=40,Jp=41,c2e=95,Co=45,u2e=33,A2e=60,d2e=62,f2e=64,h2e=91,m2e=93,p2e=61,g2e=123,Qv=63,x2e=125,nD=124,v2e=126,y2e=128,aD=65533,CE=42,oh=43,w2e=44,b2e=58,C2e=59,wx=46,E2e=0,_2e=8,S2e=11,T2e=14,B2e=31,N2e=127,pu=-1,m7=48,p7=97,g7=101,k2e=102,I2e=117,F2e=122,x7=65,v7=69,y7=70,D2e=85,R2e=90,Mi=function(t){return t>=m7&&t<=57},L2e=function(t){return t>=55296&&t<=57343},B0=function(t){return Mi(t)||t>=x7&&t<=y7||t>=p7&&t<=k2e},U2e=function(t){return t>=p7&&t<=F2e},M2e=function(t){return t>=x7&&t<=R2e},P2e=function(t){return U2e(t)||M2e(t)},j2e=function(t){return t>=y2e},Hv=function(t){return t===Cy||t===a2e||t===s2e},Ey=function(t){return P2e(t)||j2e(t)||t===c2e},sD=function(t){return Ey(t)||Mi(t)||t===Co},O2e=function(t){return t>=E2e&&t<=_2e||t===S2e||t>=T2e&&t<=B2e||t===N2e},Dd=function(t,e){return t!==Vg?!1:e!==Cy},Vv=function(t,e,r){return t===Co?Ey(e)||Dd(e,r):Ey(t)?!0:!!(t===Vg&&Dd(t,e))},EE=function(t,e,r){return t===oh||t===Co?Mi(e)?!0:e===wx&&Mi(r):Mi(t===wx?e:t)},Q2e=function(t){var e=0,r=1;(t[e]===oh||t[e]===Co)&&(t[e]===Co&&(r=-1),e++);for(var n=[];Mi(t[e]);)n.push(t[e++]);var a=n.length?parseInt(ts.apply(void 0,n),10):0;t[e]===wx&&e++;for(var s=[];Mi(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(ts.apply(void 0,s),10):0;(t[e]===v7||t[e]===g7)&&e++;var l=1;(t[e]===oh||t[e]===Co)&&(t[e]===Co&&(l=-1),e++);for(var u=[];Mi(t[e]);)u.push(t[e++]);var d=u.length?parseInt(ts.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},H2e={type:2},V2e={type:3},z2e={type:4},G2e={type:13},q2e={type:8},K2e={type:21},W2e={type:9},$2e={type:10},X2e={type:11},Y2e={type:12},J2e={type:14},zv={type:23},Z2e={type:1},eye={type:25},tye={type:24},rye={type:26},nye={type:27},aye={type:28},sye={type:29},iye={type:31},E5={type:32},w7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(zw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==E5;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Pv:return this.consumeStringToken(Pv);case i2e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(sD(r)||Dd(n,a)){var s=Vv(r,n,a)?n2e:r2e,i=this.consumeName();return{type:5,value:i,flags:s}}break;case o2e:if(this.peekCodePoint(0)===Yp)return this.consumeCodePoint(),G2e;break;case jv:return this.consumeStringToken(jv);case Ov:return H2e;case Jp:return V2e;case CE:if(this.peekCodePoint(0)===Yp)return this.consumeCodePoint(),J2e;break;case oh:if(EE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case w2e:return z2e;case Co:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(EE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Vv(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Co&&u===d2e)return this.consumeCodePoint(),this.consumeCodePoint(),tye;break;case wx:if(EE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case rD:if(this.peekCodePoint(0)===CE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===CE&&(d=this.consumeCodePoint(),d===rD))return this.consumeToken();if(d===pu)return this.consumeToken()}break;case b2e:return rye;case C2e:return nye;case A2e:if(this.peekCodePoint(0)===u2e&&this.peekCodePoint(1)===Co&&this.peekCodePoint(2)===Co)return this.consumeCodePoint(),this.consumeCodePoint(),eye;break;case f2e:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Vv(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case h2e:return aye;case Vg:if(Dd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case m2e:return sye;case p2e:if(this.peekCodePoint(0)===Yp)return this.consumeCodePoint(),q2e;break;case g2e:return X2e;case x2e:return Y2e;case I2e:case D2e:var b=this.peekCodePoint(0),y=this.peekCodePoint(1);return b===oh&&(B0(y)||y===Qv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case nD:if(this.peekCodePoint(0)===Yp)return this.consumeCodePoint(),W2e;if(this.peekCodePoint(0)===nD)return this.consumeCodePoint(),K2e;break;case v2e:if(this.peekCodePoint(0)===Yp)return this.consumeCodePoint(),$2e;break;case pu:return E5}return Hv(e)?(this.consumeWhiteSpace(),iye):Mi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ey(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ts(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();B0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Qv&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ts.apply(void 0,e.map(function(l){return l===Qv?m7:l})),16),s=parseInt(ts.apply(void 0,e.map(function(l){return l===Qv?y7:l})),16);return{type:30,start:a,end:s}}var i=parseInt(ts.apply(void 0,e),16);if(this.peekCodePoint(0)===Co&&B0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];B0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(ts.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ov?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ov?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===jv||r===Pv){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===Jp)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),zv)}for(;;){var a=this.consumeCodePoint();if(a===pu||a===Jp)return{type:22,value:ts.apply(void 0,e)};if(Hv(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===Jp?(this.consumeCodePoint(),{type:22,value:ts.apply(void 0,e)}):(this.consumeBadUrlRemnants(),zv);if(a===Pv||a===jv||a===Ov||O2e(a))return this.consumeBadUrlRemnants(),zv;if(a===Vg)if(Dd(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),zv;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;Hv(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Jp||e===pu)return;Dd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=ts.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===pu||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===Cy)return this._value.splice(0,n),Z2e;if(a===Vg){var s=this._value[n+1];s!==pu&&s!==void 0&&(s===Cy?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Dd(a,s)&&(r+=this.consumeStringSlice(n),r+=ts(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=r1,n=this.peekCodePoint(0);for((n===oh||n===Co)&&e.push(this.consumeCodePoint());Mi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===wx&&Mi(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=tD;Mi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===v7||n===g7)&&((a===oh||a===Co)&&Mi(s)||Mi(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=tD;Mi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Q2e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Vv(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===l2e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(B0(e)){for(var r=ts(e);B0(this.peekCodePoint(0))&&r.length<6;)r+=ts(this.consumeCodePoint());Hv(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||L2e(n)||n>1114111?aD:n}return e===pu?aD:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(sD(r))e+=ts(r);else if(Dd(r,this.peekCodePoint(0)))e+=ts(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),b7=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new w7;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||lye(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?E5:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),n1=function(t){return t.type===15},rp=function(t){return t.type===17},ea=function(t){return t.type===20},oye=function(t){return t.type===0},_5=function(t,e){return ea(t)&&t.value===e},C7=function(t){return t.type!==31},Rm=function(t){return t.type!==31&&t.type!==4},Mu=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},lye=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},yf=function(t){return t.type===17||t.type===15},bs=function(t){return t.type===16||yf(t)},E7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},fi={type:17,number:0,flags:r1},sT={type:16,number:50,flags:r1},Kd={type:16,number:100,flags:r1},vg=function(t,e,r){var n=t[0],a=t[1];return[ca(n,e),ca(typeof a<"u"?a:n,r)]},ca=function(t,e){if(t.type===16)return t.number/100*e;if(n1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},_7="deg",S7="grad",T7="rad",B7="turn",Gw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case _7:return Math.PI*e.number/180;case S7:return Math.PI/200*e.number;case T7:return e.number;case B7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},N7=function(t){return t.type===15&&(t.unit===_7||t.unit===S7||t.unit===T7||t.unit===B7)},k7=function(t){var e=t.filter(ea).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[fi,fi];case"to top":case"bottom":return Ol(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[fi,Kd];case"to right":case"left":return Ol(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kd,Kd];case"to bottom":case"top":return Ol(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kd,fi];case"to left":case"right":return Ol(270)}return 0},Ol=function(t){return Math.PI*t/180},tf={name:"color",parse:function(t,e){if(e.type===18){var r=cye[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return Wd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Wd(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return Wd(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Wd(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=BA[e.value.toUpperCase()];if(typeof o<"u")return o}return BA.TRANSPARENT}},rf=function(t){return(255&t)===0},Gs=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Wd=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},iD=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},oD=function(t,e){var r=e.filter(Rm);if(r.length===3){var n=r.map(iD),a=n[0],s=n[1],i=n[2];return Wd(a,s,i,1)}if(r.length===4){var o=r.map(iD),a=o[0],s=o[1],i=o[2],l=o[3];return Wd(a,s,i,l)}return 0};function _E(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var lD=function(t,e){var r=e.filter(Rm),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Ol(n.number):Gw.parse(t,n))/(Math.PI*2),l=bs(a)?a.number/100:0,u=bs(s)?s.number/100:0,d=typeof i<"u"&&bs(i)?ca(i,1):1;if(l===0)return Wd(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,g=_E(m,h,o+1/3),b=_E(m,h,o),y=_E(m,h,o-1/3);return Wd(g*255,b*255,y*255,d)},cye={hsl:lD,hsla:lD,rgb:oD,rgba:oD},zg=function(t,e){return tf.parse(t,b7.create(e).parseComponentValue())},BA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},uye={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Aye={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qw=function(t,e){var r=tf.parse(t,e[0]),n=e[1];return n&&bs(n)?{color:r,stop:n}:{color:r,stop:null}},cD=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=fi),n.stop===null&&(n.stop=Kd);for(var a=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=ca(o,e);l>s?a.push(l):a.push(s),s=l}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=a[u-1],g=(d-m)/(h+1),b=1;b<=h;b++)a[u+b-1]=g*b;u=null}}return t.map(function(y,E){var B=y.color;return{color:B,stop:Math.max(Math.min(1,a[E]/e),0)}})},dye=function(t,e,r){var n=e/2,a=r/2,s=ca(t[0],e)-n,i=a-ca(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},fye=function(t,e,r){var n=typeof t=="number"?t:dye(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-l,i+l]},yc=function(t,e){return Math.sqrt(t*t+e*e)},uD=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var l=o[0],u=o[1],d=yc(r-l,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},hye=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(yc(e,r),yc(e,r-a),yc(e-n,r),yc(e-n,r-a));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),l=uD(n,a,e,r,!0),u=l[0],d=l[1];s=yc(u-e,(d-r)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(yc(e,r),yc(e,r-a),yc(e-n,r),yc(e-n,r-a));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),h=uD(n,a,e,r,!1),u=h[0],d=h[1];s=yc(u-e,(d-r)/o),i=o*s}break}return Array.isArray(t.size)&&(s=ca(t.size[0],n),i=t.size.length===2?ca(t.size[1],a):s),[s,i]},mye=function(t,e){var r=Ol(180),n=[];return Mu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=k7(a);return}else if(N7(i)){r=Gw.parse(t,i);return}}var o=qw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},Gv=function(t,e){var r=Ol(180),n=[];return Mu(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=k7(a);return}else if(N7(i)){r=(Gw.parse(t,i)+Ol(270))%Ol(360);return}}var o=qw(t,a);n.push(o)}),{angle:r,stops:n,type:1}},pye=function(t,e){var r=Ol(180),n=[],a=1,s=0,i=3,o=[];return Mu(e).forEach(function(l,u){var d=l[0];if(u===0){if(ea(d)&&d.value==="linear"){a=1;return}else if(ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var h=tf.parse(t,d.values[0]);n.push({stop:fi,color:h})}else if(d.name==="to"){var h=tf.parse(t,d.values[0]);n.push({stop:Kd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Rm);if(m.length===2){var h=tf.parse(t,m[1]),g=m[0];rp(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),a===1?{angle:(r+Ol(180))%Ol(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},I7="closest-side",F7="farthest-side",D7="closest-corner",R7="farthest-corner",L7="circle",U7="ellipse",M7="cover",P7="contain",gye=function(t,e){var r=0,n=3,a=[],s=[];return Mu(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if(ea(m))switch(m.value){case"center":return s.push(sT),h;case"top":case"left":return s.push(fi),h;case"right":case"bottom":return s.push(Kd),h}else(bs(m)||yf(m))&&s.push(m);else if(ea(m))switch(m.value){case L7:return r=0,!1;case U7:return r=1,!1;case"at":return u=!0,!1;case I7:return n=0,!1;case M7:case F7:return n=1,!1;case P7:case D7:return n=2,!1;case R7:return n=3,!1}else if(yf(m)||bs(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var d=qw(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},qv=function(t,e){var r=0,n=3,a=[],s=[];return Mu(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(ea(h))switch(h.value){case"center":return s.push(sT),!1;case"top":case"left":return s.push(fi),!1;case"right":case"bottom":return s.push(Kd),!1}else if(bs(h)||yf(h))return s.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(ea(h))switch(h.value){case L7:return r=0,!1;case U7:return r=1,!1;case P7:case I7:return n=0,!1;case F7:return n=1,!1;case D7:return n=2,!1;case M7:case R7:return n=3,!1}else if(yf(h)||bs(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var u=qw(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},xye=function(t){return t.type===1},vye=function(t){return t.type===2},iT={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=j7[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function yye(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!j7[t.name])}var j7={"linear-gradient":mye,"-moz-linear-gradient":Gv,"-ms-linear-gradient":Gv,"-o-linear-gradient":Gv,"-webkit-linear-gradient":Gv,"radial-gradient":gye,"-moz-radial-gradient":qv,"-ms-radial-gradient":qv,"-o-radial-gradient":qv,"-webkit-radial-gradient":qv,"-webkit-gradient":pye},wye={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Rm(n)&&yye(n)}).map(function(n){return iT.parse(t,n)})}},bye={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Cye={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Mu(e).map(function(r){return r.filter(bs)}).map(E7)}},Eye={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Mu(e).map(function(r){return r.filter(ea).map(function(n){return n.value}).join(" ")}).map(_ye)}},_ye=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(pm||(pm={}));var Sye={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Mu(e).map(function(r){return r.filter(Tye)})}},Tye=function(t){return ea(t)||bs(t)},Kw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Bye=Kw("top"),Nye=Kw("right"),kye=Kw("bottom"),Iye=Kw("left"),Ww=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return E7(r.filter(bs))}}},Fye=Ww("top-left"),Dye=Ww("top-right"),Rye=Ww("bottom-right"),Lye=Ww("bottom-left"),$w=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Uye=$w("top"),Mye=$w("right"),Pye=$w("bottom"),jye=$w("left"),Xw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return n1(r)?r.number:0}}},Oye=Xw("top"),Qye=Xw("right"),Hye=Xw("bottom"),Vye=Xw("left"),zye={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gye={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},qye={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ea).reduce(function(r,n){return r|Kye(n.value)},0)}},Kye=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Wye={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$ye={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},_y;(function(t){t.NORMAL="normal",t.STRICT="strict"})(_y||(_y={}));var Xye={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return _y.STRICT;case"normal":default:return _y.NORMAL}}},Yye={name:"line-height",initialValue:"normal",prefix:!1,type:4},AD=function(t,e){return ea(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:bs(t)?ca(t,e):e},Jye={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:iT.parse(t,e)}},Zye={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},S5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Yw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},ewe=Yw("top"),twe=Yw("right"),rwe=Yw("bottom"),nwe=Yw("left"),awe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},swe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Jw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},iwe=Jw("top"),owe=Jw("right"),lwe=Jw("bottom"),cwe=Jw("left"),uwe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Awe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},dwe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&_5(e[0],"none")?[]:Mu(e).map(function(r){for(var n={color:BA.TRANSPARENT,offsetX:fi,offsetY:fi,blur:fi},a=0,s=0;s<r.length;s++){var i=r[s];yf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=tf.parse(t,i)}return n})}},fwe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},hwe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=gwe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},mwe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},pwe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,o]:null},gwe={matrix:mwe,matrix3d:pwe},dD={type:16,number:50,flags:r1},xwe=[dD,dD],vwe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(bs);return r.length!==2?xwe:[r[0],r[1]]}},ywe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Gg;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Gg||(Gg={}));var wwe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Gg.BREAK_ALL;case"keep-all":return Gg.KEEP_ALL;case"normal":default:return Gg.NORMAL}}},bwe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(rp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},O7={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Cwe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return rp(e)?e.number:1}},Ewe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_we={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Swe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Twe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Bwe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(rp(e))return e.number;if(ea(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Nwe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ea).map(function(r){return r.value})}},kwe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ds=function(t,e){return(t&e)!==0},Iwe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Fwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(C7),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var l=o&&rp(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},Dwe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(C7),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(ea(s)&&s.value!=="none"){var o=i&&rp(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},Rwe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(n1).map(function(r){return O7.parse(t,r)})}},Lwe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(oye);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},fD=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Uwe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&_5(e[0],"none")?[]:Mu(e).map(function(r){for(var n={color:255,offsetX:fi,offsetY:fi,blur:fi,spread:fi,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];_5(i,"inset")?n.inset=!0:yf(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=tf.parse(t,i)}return n})}},Mwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Pwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},jwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return n1(e)?e.number:0}},Owe=function(){function t(e,r){var n,a;this.animationDuration=Xt(e,Rwe,r.animationDuration),this.backgroundClip=Xt(e,uye,r.backgroundClip),this.backgroundColor=Xt(e,Aye,r.backgroundColor),this.backgroundImage=Xt(e,wye,r.backgroundImage),this.backgroundOrigin=Xt(e,bye,r.backgroundOrigin),this.backgroundPosition=Xt(e,Cye,r.backgroundPosition),this.backgroundRepeat=Xt(e,Eye,r.backgroundRepeat),this.backgroundSize=Xt(e,Sye,r.backgroundSize),this.borderTopColor=Xt(e,Bye,r.borderTopColor),this.borderRightColor=Xt(e,Nye,r.borderRightColor),this.borderBottomColor=Xt(e,kye,r.borderBottomColor),this.borderLeftColor=Xt(e,Iye,r.borderLeftColor),this.borderTopLeftRadius=Xt(e,Fye,r.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,Dye,r.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,Rye,r.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,Lye,r.borderBottomLeftRadius),this.borderTopStyle=Xt(e,Uye,r.borderTopStyle),this.borderRightStyle=Xt(e,Mye,r.borderRightStyle),this.borderBottomStyle=Xt(e,Pye,r.borderBottomStyle),this.borderLeftStyle=Xt(e,jye,r.borderLeftStyle),this.borderTopWidth=Xt(e,Oye,r.borderTopWidth),this.borderRightWidth=Xt(e,Qye,r.borderRightWidth),this.borderBottomWidth=Xt(e,Hye,r.borderBottomWidth),this.borderLeftWidth=Xt(e,Vye,r.borderLeftWidth),this.boxShadow=Xt(e,Uwe,r.boxShadow),this.color=Xt(e,zye,r.color),this.direction=Xt(e,Gye,r.direction),this.display=Xt(e,qye,r.display),this.float=Xt(e,Wye,r.cssFloat),this.fontFamily=Xt(e,Swe,r.fontFamily),this.fontSize=Xt(e,Twe,r.fontSize),this.fontStyle=Xt(e,kwe,r.fontStyle),this.fontVariant=Xt(e,Nwe,r.fontVariant),this.fontWeight=Xt(e,Bwe,r.fontWeight),this.letterSpacing=Xt(e,$ye,r.letterSpacing),this.lineBreak=Xt(e,Xye,r.lineBreak),this.lineHeight=Xt(e,Yye,r.lineHeight),this.listStyleImage=Xt(e,Jye,r.listStyleImage),this.listStylePosition=Xt(e,Zye,r.listStylePosition),this.listStyleType=Xt(e,S5,r.listStyleType),this.marginTop=Xt(e,ewe,r.marginTop),this.marginRight=Xt(e,twe,r.marginRight),this.marginBottom=Xt(e,rwe,r.marginBottom),this.marginLeft=Xt(e,nwe,r.marginLeft),this.opacity=Xt(e,Cwe,r.opacity);var s=Xt(e,awe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Xt(e,swe,r.overflowWrap),this.paddingTop=Xt(e,iwe,r.paddingTop),this.paddingRight=Xt(e,owe,r.paddingRight),this.paddingBottom=Xt(e,lwe,r.paddingBottom),this.paddingLeft=Xt(e,cwe,r.paddingLeft),this.paintOrder=Xt(e,Mwe,r.paintOrder),this.position=Xt(e,Awe,r.position),this.textAlign=Xt(e,uwe,r.textAlign),this.textDecorationColor=Xt(e,Ewe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Xt(e,_we,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Xt(e,dwe,r.textShadow),this.textTransform=Xt(e,fwe,r.textTransform),this.transform=Xt(e,hwe,r.transform),this.transformOrigin=Xt(e,vwe,r.transformOrigin),this.visibility=Xt(e,ywe,r.visibility),this.webkitTextStrokeColor=Xt(e,Pwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,jwe,r.webkitTextStrokeWidth),this.wordBreak=Xt(e,wwe,r.wordBreak),this.zIndex=Xt(e,bwe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return rf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ds(this.display,4)||Ds(this.display,33554432)||Ds(this.display,268435456)||Ds(this.display,536870912)||Ds(this.display,67108864)||Ds(this.display,134217728)},t}(),Qwe=function(){function t(e,r){this.content=Xt(e,Iwe,r.content),this.quotes=Xt(e,Lwe,r.quotes)}return t}(),hD=function(){function t(e,r){this.counterIncrement=Xt(e,Fwe,r.counterIncrement),this.counterReset=Xt(e,Dwe,r.counterReset)}return t}(),Xt=function(t,e,r){var n=new w7,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new b7(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,ea(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Gw.parse(t,s.parseComponentValue());case"color":return tf.parse(t,s.parseComponentValue());case"image":return iT.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return yf(o)?o:fi;case"length-percentage":var l=s.parseComponentValue();return bs(l)?l:fi;case"time":return O7.parse(t,s.parseComponentValue())}break}},Hwe="data-html2canvas-debug",Vwe=function(t){var e=t.getAttribute(Hwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},T5=function(t,e){var r=Vwe(t);return r===1||e===r},Pu=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,T5(r,3))debugger;this.styles=new Owe(e,window.getComputedStyle(r,null)),k5(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Vw(this.context,r),T5(r,4)&&(this.flags|=16)}return t}(),zwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",mD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kv=0;Kv<mD.length;Kv++)yg[mD.charCodeAt(Kv)]=Kv;var Gwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=yg[t.charCodeAt(n)],i=yg[t.charCodeAt(n+1)],o=yg[t.charCodeAt(n+2)],l=yg[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|l&63;return u},qwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Kwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xh=5,oT=11,SE=2,Wwe=oT-xh,Q7=65536>>xh,$we=1<<xh,TE=$we-1,Xwe=1024>>xh,Ywe=Q7+Xwe,Jwe=Ywe,Zwe=32,ebe=Jwe+Zwe,tbe=65536>>oT,rbe=1<<Wwe,nbe=rbe-1,pD=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},abe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},sbe=function(t,e){var r=Gwe(t),n=Array.isArray(r)?Kwe(r):new Uint32Array(r),a=Array.isArray(r)?qwe(r):new Uint16Array(r),s=24,i=pD(a,s/2,n[4]/2),o=n[5]===2?pD(a,(s+n[4])/2):abe(n,Math.ceil((s+n[4])/4));return new ibe(n[0],n[1],n[2],n[3],i,o)},ibe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xh],r=(r<<SE)+(e&TE),this.data[r];if(e<=65535)return r=this.index[Q7+(e-55296>>xh)],r=(r<<SE)+(e&TE),this.data[r];if(e<this.highStart)return r=ebe-tbe+(e>>oT),r=this.index[r],r+=e>>xh&nbe,r=this.index[r],r=(r<<SE)+(e&TE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),gD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",obe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wv=0;Wv<gD.length;Wv++)obe[gD.charCodeAt(Wv)]=Wv;var lbe=1,BE=2,NE=3,xD=4,vD=5,cbe=7,yD=8,kE=9,IE=10,wD=11,bD=12,CD=13,ED=14,FE=15,ube=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Abe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},dbe=sbe(zwe),Ll="×",DE="÷",fbe=function(t){return dbe.get(t)},hbe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===BE&&i===NE)return Ll;if(s===BE||s===NE||s===xD||i===BE||i===NE||i===xD)return DE;if(s===yD&&[yD,kE,wD,bD].indexOf(i)!==-1||(s===wD||s===kE)&&(i===kE||i===IE)||(s===bD||s===IE)&&i===IE||i===CD||i===vD||i===cbe||s===lbe)return Ll;if(s===CD&&i===ED){for(;a===vD;)a=e[--n];if(a===ED)return Ll}if(s===FE&&i===FE){for(var o=0;a===FE;)o++,a=e[--n];if(o%2===0)return Ll}return DE},mbe=function(t){var e=ube(t),r=e.length,n=0,a=0,s=e.map(fbe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Ll;n<r&&(i=hbe(e,s,++n))===Ll;);if(i!==Ll||n===r){var o=Abe.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},pbe=function(t){for(var e=mbe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},gbe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},xbe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=zw(n.data).map(function(l){return ts(l)}),s=0,i={},o=a.every(function(l,u){r.setStart(n,s),r.setEnd(n,s+l.length);var d=r.getBoundingClientRect();s+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},vbe=function(){return typeof new Image().crossOrigin<"u"},ybe=function(){return typeof new XMLHttpRequest().responseType=="string"},wbe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},_D=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},bbe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=B5(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),SD(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",_D(l)?SD(B5(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),_D(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},B5=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},SD=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},li={get SUPPORT_RANGE_BOUNDS(){var t=gbe(document);return Object.defineProperty(li,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=li.SUPPORT_RANGE_BOUNDS&&xbe(document);return Object.defineProperty(li,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=wbe(document);return Object.defineProperty(li,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?bbe(document):Promise.resolve(!1);return Object.defineProperty(li,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=vbe();return Object.defineProperty(li,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=ybe();return Object.defineProperty(li,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(li,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(li,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},qg=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Cbe=function(t,e,r,n){var a=Sbe(e,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(li.SUPPORT_RANGE_BOUNDS){var l=TD(n,i,o.length).getClientRects();if(l.length>1){var u=lT(o),d=0;u.forEach(function(m){s.push(new qg(m,LA.fromDOMRectList(t,TD(n,d+i,m.length).getClientRects()))),d+=m.length})}else s.push(new qg(o,LA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);s.push(new qg(o,Ebe(t,n))),n=h}else li.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},Ebe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Vw(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return LA.EMPTY},TD=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},lT=function(t){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return pbe(t)},_be=function(t,e){if(li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Bbe(t,e)},Sbe=function(t,e){return e.letterSpacing!==0?lT(t):_be(t,e)},Tbe=[32,160,4961,65792,65793,4153,4241],Bbe=function(t,e){for(var r=t2e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=zw(i),l="";o.forEach(function(u){Tbe.indexOf(u)===-1?l+=ts(u):(l.length&&n.push(l),n.push(ts(u)),l="")}),l.length&&n.push(l)}};!(a=r.next()).done;)s();return n},Nbe=function(){function t(e,r,n){this.text=kbe(r.data,n.textTransform),this.textBounds=Cbe(e,this.text,n,r)}return t}(),kbe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Ibe,Fbe);case 2:return t.toUpperCase();default:return t}},Ibe=/(^|\s|:|-|\(|\))([a-z])/g,Fbe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},H7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Pu),V7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Pu),z7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=Vw(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Pu),G7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Pu),N5=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Pu),Dbe=[{type:15,flags:0,unit:"px",number:3}],Rbe=[{type:16,flags:0,number:50}],Lbe=function(t){return t.width>t.height?new LA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new LA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Ube=function(t){var e=t.type===Mbe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},Sy="checkbox",Ty="radio",Mbe="password",BD=707406591,cT=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Ube(n),(a.type===Sy||a.type===Ty)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=Lbe(a.bounds)),a.type){case Sy:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Dbe;break;case Ty:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=Rbe;break}return a}return e}(Pu),q7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Pu),K7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Pu),W7=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=X7(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?zg(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):BA.TRANSPARENT,i=n.contentWindow.document.body?zg(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):BA.TRANSPARENT;a.backgroundColor=rf(s)?rf(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Pu),Pbe=["OL","UL","MENU"],B2=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Y7(a)&&a.data.trim().length>0)r.textNodes.push(new Nbe(t,a,r.styles));else if(Y0(a))if(tO(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return B2(t,o,r,n)});else{var i=$7(t,a);i.styles.isVisible()&&(jbe(a,i,n)?i.flags|=4:Obe(i.styles)&&(i.flags|=2),Pbe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?B2(t,a.shadowRoot,i,n):!By(a)&&!J7(a)&&!Ny(a)&&B2(t,a,i,n))}},$7=function(t,e){return I5(e)?new H7(t,e):Z7(e)?new V7(t,e):J7(e)?new z7(t,e):Qbe(e)?new G7(t,e):Hbe(e)?new N5(t,e):Vbe(e)?new cT(t,e):Ny(e)?new q7(t,e):By(e)?new K7(t,e):eO(e)?new W7(t,e):new Pu(t,e)},X7=function(t,e){var r=$7(t,e);return r.flags|=4,B2(t,e,r,r),r},jbe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||uT(t)&&r.styles.isTransparent()},Obe=function(t){return t.isPositioned()||t.isFloating()},Y7=function(t){return t.nodeType===Node.TEXT_NODE},Y0=function(t){return t.nodeType===Node.ELEMENT_NODE},k5=function(t){return Y0(t)&&typeof t.style<"u"&&!N2(t)},N2=function(t){return typeof t.className=="object"},Qbe=function(t){return t.tagName==="LI"},Hbe=function(t){return t.tagName==="OL"},Vbe=function(t){return t.tagName==="INPUT"},zbe=function(t){return t.tagName==="HTML"},J7=function(t){return t.tagName==="svg"},uT=function(t){return t.tagName==="BODY"},Z7=function(t){return t.tagName==="CANVAS"},ND=function(t){return t.tagName==="VIDEO"},I5=function(t){return t.tagName==="IMG"},eO=function(t){return t.tagName==="IFRAME"},kD=function(t){return t.tagName==="STYLE"},Gbe=function(t){return t.tagName==="SCRIPT"},By=function(t){return t.tagName==="TEXTAREA"},Ny=function(t){return t.tagName==="SELECT"},tO=function(t){return t.tagName==="SLOT"},ID=function(t){return t.tagName.indexOf("-")>0},qbe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),FD={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},DD={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Kbe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Wbe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},N0=function(t,e,r,n,a,s){return t<e||t>r?bx(t,a,s.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+s},rO=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Za=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(rO(Math.abs(t),s,n,function(i){return ts(Math.floor(i%s)+e)})+a)},Yf=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return rO(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},G0=1,Id=2,Fd=4,wg=8,gA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return bx(t,4,a.length>0);var i=Math.abs(t),o=a;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ds(s,G0)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ds(s,Id)||u===1&&l===1&&Ds(s,Fd)&&t>100||u===1&&l>1&&Ds(s,wg)?o=e[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},RD="十百千萬",LD="拾佰仟萬",UD="マイナス",RE="마이너스",bx=function(t,e,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Za(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Yf(t,"〇一二三四五六七八九",a);case 6:return N0(t,1,3999,FD,3,n).toLowerCase();case 7:return N0(t,1,3999,FD,3,n);case 8:return Za(t,945,969,!1,n);case 9:return Za(t,97,122,!1,n);case 10:return Za(t,65,90,!1,n);case 11:return Za(t,1632,1641,!0,n);case 12:case 49:return N0(t,1,9999,DD,3,n);case 35:return N0(t,1,9999,DD,3,n).toLowerCase();case 13:return Za(t,2534,2543,!0,n);case 14:case 30:return Za(t,6112,6121,!0,n);case 15:return Yf(t,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Yf(t,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return gA(t,"零一二三四五六七八九",RD,"負",a,Id|Fd|wg);case 47:return gA(t,"零壹貳參肆伍陸柒捌玖",LD,"負",a,G0|Id|Fd|wg);case 42:return gA(t,"零一二三四五六七八九",RD,"负",a,Id|Fd|wg);case 41:return gA(t,"零壹贰叁肆伍陆柒捌玖",LD,"负",a,G0|Id|Fd|wg);case 26:return gA(t,"〇一二三四五六七八九","十百千万",UD,a,0);case 25:return gA(t,"零壱弐参四伍六七八九","拾百千万",UD,a,G0|Id|Fd);case 31:return gA(t,"영일이삼사오육칠팔구","십백천만",RE,s,G0|Id|Fd);case 33:return gA(t,"零一二三四五六七八九","十百千萬",RE,s,0);case 32:return gA(t,"零壹貳參四五六七八九","拾百千",RE,s,G0|Id|Fd);case 18:return Za(t,2406,2415,!0,n);case 20:return N0(t,1,19999,Wbe,3,n);case 21:return Za(t,2790,2799,!0,n);case 22:return Za(t,2662,2671,!0,n);case 22:return N0(t,1,10999,Kbe,3,n);case 23:return Yf(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Yf(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Za(t,3302,3311,!0,n);case 28:return Yf(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Yf(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Za(t,3792,3801,!0,n);case 37:return Za(t,6160,6169,!0,n);case 38:return Za(t,4160,4169,!0,n);case 39:return Za(t,2918,2927,!0,n);case 40:return Za(t,1776,1785,!0,n);case 43:return Za(t,3046,3055,!0,n);case 44:return Za(t,3174,3183,!0,n);case 45:return Za(t,3664,3673,!0,n);case 46:return Za(t,3872,3881,!0,n);case 3:default:return Za(t,48,57,!0,n)}},nO="data-html2canvas-ignore",MD=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new qbe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=$be(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=a.contentWindow,l=o.document,u=Jbe(a).then(function(){return Ji(n,void 0,void 0,function(){var d,h;return Di(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(rCe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ybe(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(eCe(document.doctype)+"<html></html>"),tCe(this.referenceElement.ownerDocument,s,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(T5(e,2))debugger;if(Z7(e))return this.createCanvasClone(e);if(ND(e))return this.createVideoClone(e);if(kD(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return I5(r)&&(I5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),ID(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return LE(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!Y0(r)||!Gbe(r)&&!r.hasAttribute(nO)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Y0(r)||!kD(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Y0(s)&&tO(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(Y7(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Y0(e)&&(k5(e)||N2(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&k5(a)&&(this.clonedReferenceElement=a),uT(a)&&sCe(a);var l=this.counters.parse(new hD(this.context,s)),u=this.resolvePseudoContent(e,a,i,Kg.BEFORE);ID(e)&&(r=!0),ND(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,o,Kg.AFTER);return d&&a.appendChild(d),this.counters.pop(l),(s&&(this.options.copyStyles||N2(e))&&!eO(e)||r)&&LE(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(By(e)||Ny(e))&&(By(a)||Ny(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new hD(this.context,n));var l=new Qwe(this.context,n),u=o.createElement("html2canvaspseudoelement");LE(n,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(ea);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Rm),y=b[0],E=b[1];if(y&&ea(y)){var B=s.counters.getCounterValue(y.value),k=E&&ea(E)?S5.parse(s.context,E.value):3;u.appendChild(o.createTextNode(bx(B,k,!1)))}}else if(h.name==="counters"){var F=h.values.filter(Rm),y=F[0],U=F[1],E=F[2];if(y&&ea(y)){var P=s.counters.getCounterValues(y.value),D=E&&ea(E)?S5.parse(s.context,E.value):3,C=U&&U.type===0?U.value:"",S=P.map(function(L){return bx(L,D,!1)}).join(C);u.appendChild(o.createTextNode(S))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(fD(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(fD(l.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=F5+" "+D5;var d=a===Kg.BEFORE?" "+F5:" "+D5;return N2(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Kg;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Kg||(Kg={}));var $be=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(nO,"true"),t.body.appendChild(r),r},Xbe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Ybe=function(t){return Promise.all([].slice.call(t.images,0).map(Xbe))},Jbe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},Zbe=["all","d","content"],LE=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);Zbe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},eCe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},tCe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},rCe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},nCe=":before",aCe=":after",F5="___html2canvas___pseudoelement_before",D5="___html2canvas___pseudoelement_after",PD=`{
    content: "" !important;
    display: none !important;
}`,sCe=function(t){iCe(t,"."+F5+nCe+PD+`
         .`+D5+aCe+PD)},iCe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},aO=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),oCe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ME(e)||ACe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ji(this,void 0,void 0,function(){var r,n,a,s,i=this;return Di(this,function(o){switch(o.label){case 0:return r=aO.isSameOrigin(e),n=!UE(e)&&this._options.useCORS===!0&&li.SUPPORT_CORS_IMAGES&&!r,a=!UE(e)&&!r&&!ME(e)&&typeof this._options.proxy=="string"&&li.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!UE(e)&&!ME(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(dCe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var o=li.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}l.send()})},t}(),lCe=/^data:image\/svg\+xml/i,cCe=/^data:image\/.*;base64,/i,uCe=/^data:image\/.*/i,ACe=function(t){return li.SUPPORT_SVG_DRAWING||!fCe(t)},UE=function(t){return uCe.test(t)},dCe=function(t){return cCe.test(t)},ME=function(t){return t.substr(0,4)==="blob"},fCe=function(t){return t.substr(-3).toLowerCase()==="svg"||lCe.test(t)},qt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),k0=function(t,e,r){return new qt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},$v=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=k0(this.start,this.startControl,e),a=k0(this.startControl,this.endControl,e),s=k0(this.endControl,this.end,e),i=k0(n,a,e),o=k0(a,s,e),l=k0(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ml=function(t){return t.type===1},hCe=function(){function t(e){var r=e.styles,n=e.bounds,a=vg(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=vg(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=vg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],g=vg(r.borderBottomLeftRadius,n.width,n.height),b=g[0],y=g[1],E=[];E.push((s+l)/n.width),E.push((b+h)/n.width),E.push((i+y)/n.height),E.push((u+m)/n.height);var B=Math.max.apply(Math,E);B>1&&(s/=B,i/=B,l/=B,u/=B,h/=B,m/=B,b/=B,y/=B);var k=n.width-l,F=n.height-m,U=n.width-h,P=n.height-y,D=r.borderTopWidth,C=r.borderRightWidth,S=r.borderBottomWidth,N=r.borderLeftWidth,H=ca(r.paddingTop,e.bounds.width),L=ca(r.paddingRight,e.bounds.width),I=ca(r.paddingBottom,e.bounds.width),j=ca(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?wa(n.left+N/3,n.top+D/3,s-N/3,i-D/3,Ln.TOP_LEFT):new qt(n.left+N/3,n.top+D/3),this.topRightBorderDoubleOuterBox=s>0||i>0?wa(n.left+k,n.top+D/3,l-C/3,u-D/3,Ln.TOP_RIGHT):new qt(n.left+n.width-C/3,n.top+D/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?wa(n.left+U,n.top+F,h-C/3,m-S/3,Ln.BOTTOM_RIGHT):new qt(n.left+n.width-C/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=b>0||y>0?wa(n.left+N/3,n.top+P,b-N/3,y-S/3,Ln.BOTTOM_LEFT):new qt(n.left+N/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?wa(n.left+N*2/3,n.top+D*2/3,s-N*2/3,i-D*2/3,Ln.TOP_LEFT):new qt(n.left+N*2/3,n.top+D*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?wa(n.left+k,n.top+D*2/3,l-C*2/3,u-D*2/3,Ln.TOP_RIGHT):new qt(n.left+n.width-C*2/3,n.top+D*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?wa(n.left+U,n.top+F,h-C*2/3,m-S*2/3,Ln.BOTTOM_RIGHT):new qt(n.left+n.width-C*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||y>0?wa(n.left+N*2/3,n.top+P,b-N*2/3,y-S*2/3,Ln.BOTTOM_LEFT):new qt(n.left+N*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||i>0?wa(n.left+N/2,n.top+D/2,s-N/2,i-D/2,Ln.TOP_LEFT):new qt(n.left+N/2,n.top+D/2),this.topRightBorderStroke=s>0||i>0?wa(n.left+k,n.top+D/2,l-C/2,u-D/2,Ln.TOP_RIGHT):new qt(n.left+n.width-C/2,n.top+D/2),this.bottomRightBorderStroke=h>0||m>0?wa(n.left+U,n.top+F,h-C/2,m-S/2,Ln.BOTTOM_RIGHT):new qt(n.left+n.width-C/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=b>0||y>0?wa(n.left+N/2,n.top+P,b-N/2,y-S/2,Ln.BOTTOM_LEFT):new qt(n.left+N/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||i>0?wa(n.left,n.top,s,i,Ln.TOP_LEFT):new qt(n.left,n.top),this.topRightBorderBox=l>0||u>0?wa(n.left+k,n.top,l,u,Ln.TOP_RIGHT):new qt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?wa(n.left+U,n.top+F,h,m,Ln.BOTTOM_RIGHT):new qt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||y>0?wa(n.left,n.top+P,b,y,Ln.BOTTOM_LEFT):new qt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?wa(n.left+N,n.top+D,Math.max(0,s-N),Math.max(0,i-D),Ln.TOP_LEFT):new qt(n.left+N,n.top+D),this.topRightPaddingBox=l>0||u>0?wa(n.left+Math.min(k,n.width-C),n.top+D,k>n.width+C?0:Math.max(0,l-C),Math.max(0,u-D),Ln.TOP_RIGHT):new qt(n.left+n.width-C,n.top+D),this.bottomRightPaddingBox=h>0||m>0?wa(n.left+Math.min(U,n.width-N),n.top+Math.min(F,n.height-S),Math.max(0,h-C),Math.max(0,m-S),Ln.BOTTOM_RIGHT):new qt(n.left+n.width-C,n.top+n.height-S),this.bottomLeftPaddingBox=b>0||y>0?wa(n.left+N,n.top+Math.min(P,n.height-S),Math.max(0,b-N),Math.max(0,y-S),Ln.BOTTOM_LEFT):new qt(n.left+N,n.top+n.height-S),this.topLeftContentBox=s>0||i>0?wa(n.left+N+j,n.top+D+H,Math.max(0,s-(N+j)),Math.max(0,i-(D+H)),Ln.TOP_LEFT):new qt(n.left+N+j,n.top+D+H),this.topRightContentBox=l>0||u>0?wa(n.left+Math.min(k,n.width+N+j),n.top+D+H,k>n.width+N+j?0:l-N+j,u-(D+H),Ln.TOP_RIGHT):new qt(n.left+n.width-(C+L),n.top+D+H),this.bottomRightContentBox=h>0||m>0?wa(n.left+Math.min(U,n.width-(N+j)),n.top+Math.min(F,n.height+D+H),Math.max(0,h-(C+L)),m-(S+I),Ln.BOTTOM_RIGHT):new qt(n.left+n.width-(C+L),n.top+n.height-(S+I)),this.bottomLeftContentBox=b>0||y>0?wa(n.left+N+j,n.top+P,Math.max(0,b-(N+j)),y-(S+I),Ln.BOTTOM_LEFT):new qt(n.left+N+j,n.top+n.height-(S+I))}return t}(),Ln;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ln||(Ln={}));var wa=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,l=t+r,u=e+n;switch(a){case Ln.TOP_LEFT:return new $v(new qt(t,u),new qt(t,u-o),new qt(l-i,e),new qt(l,e));case Ln.TOP_RIGHT:return new $v(new qt(t,e),new qt(t+i,e),new qt(l,u-o),new qt(l,u));case Ln.BOTTOM_RIGHT:return new $v(new qt(l,e),new qt(l,e+o),new qt(t+i,u),new qt(t,u));case Ln.BOTTOM_LEFT:default:return new $v(new qt(l,u),new qt(l-i,u),new qt(t,e+o),new qt(t,e))}},ky=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},mCe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Iy=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},pCe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Xv=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),gCe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),xCe=function(t){return t.type===0},sO=function(t){return t.type===1},vCe=function(t){return t.type===2},jD=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},yCe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},iO=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),oO=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new hCe(this.container),this.container.styles.opacity<1&&this.effects.push(new gCe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new pCe(n,a,s))}if(this.container.styles.overflowX!==0){var i=ky(this.curves),o=Iy(this.curves);jD(i,o)?this.effects.push(new Xv(i,6)):(this.effects.push(new Xv(i,2)),this.effects.push(new Xv(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!sO(l)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=ky(n.curves),o=Iy(n.curves);jD(i,o)||a.unshift(new Xv(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(l){return Ds(l.target,e)})},t}(),R5=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Ds(a.flags,4),i=Ds(a.flags,2),o=new oO(a,t);Ds(a.styles.display,2048)&&n.push(o);var l=Ds(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new iO(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(b,y){return h>b.element.container.styles.zIndex.order?(m=y,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,y){return h>=b.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);R5(o,d,s?d:r,l)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),R5(o,e,r,l);Ds(a.flags,8)&&lO(a,l)})},lO=function(t,e){for(var r=t instanceof N5?t.start:1,n=t instanceof N5?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof G7&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=bx(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},wCe=function(t){var e=new oO(t,null),r=new iO(e),n=[];return R5(e,r,r,n),lO(e.container,n),r},OD=function(t,e){switch(e){case 0:return Ql(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ql(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ql(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ql(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},bCe=function(t,e){switch(e){case 0:return Ql(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ql(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ql(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ql(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},CCe=function(t,e){switch(e){case 0:return Ql(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ql(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ql(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ql(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},ECe=function(t,e){switch(e){case 0:return Yv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Yv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Yv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Yv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Yv=function(t,e){var r=[];return Ml(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ml(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ql=function(t,e,r,n){var a=[];return Ml(t)?a.push(t.subdivide(.5,!1)):a.push(t),Ml(r)?a.push(r.subdivide(.5,!0)):a.push(r),Ml(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Ml(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},cO=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Fy=function(t){var e=t.styles,r=t.bounds,n=ca(e.paddingLeft,r.width),a=ca(e.paddingRight,r.width),s=ca(e.paddingTop,r.width),i=ca(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},_Ce=function(t,e){return t===0?e.bounds:t===2?Fy(e):cO(e)},SCe=function(t,e){return t===0?e.bounds:t===2?Fy(e):cO(e)},PE=function(t,e,r){var n=_Ce(q0(t.styles.backgroundOrigin,e),t),a=SCe(q0(t.styles.backgroundClip,e),t),s=TCe(q0(t.styles.backgroundSize,e),r,n),i=s[0],o=s[1],l=vg(q0(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=BCe(q0(t.styles.backgroundRepeat,e),l,s,n,a),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[u,d,h,i,o]},I0=function(t){return ea(t)&&t.value===pm.AUTO},Jv=function(t){return typeof t=="number"},TCe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(bs(i)&&o&&bs(o))return[ca(i,r.width),ca(o,r.height)];var l=Jv(s);if(ea(i)&&(i.value===pm.CONTAIN||i.value===pm.COVER)){if(Jv(s)){var u=r.width/r.height;return u<s!=(i.value===pm.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=Jv(n),h=Jv(a),m=d||h;if(I0(i)&&(!o||I0(o))){if(d&&h)return[n,a];if(!l&&!m)return[r.width,r.height];if(m&&l){var g=d?n:a*s,b=h?a:n/s;return[g,b]}var y=d?n:r.width,E=h?a:r.height;return[y,E]}if(l){var B=0,k=0;return bs(i)?B=ca(i,r.width):bs(o)&&(k=ca(o,r.height)),I0(i)?B=k*s:(!o||I0(o))&&(k=B/s),[B,k]}var F=null,U=null;if(bs(i)?F=ca(i,r.width):o&&bs(o)&&(U=ca(o,r.height)),F!==null&&(!o||I0(o))&&(U=d&&h?F/n*a:r.height),U!==null&&I0(i)&&(F=d&&h?U/a*n:r.width),F!==null&&U!==null)return[F,U];throw new Error("Unable to calculate background-size for element")},q0=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},BCe=function(t,e,r,n,a){var s=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new qt(Math.round(n.left),Math.round(n.top+i)),new qt(Math.round(n.left+n.width),Math.round(n.top+i)),new qt(Math.round(n.left+n.width),Math.round(l+n.top+i)),new qt(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new qt(Math.round(n.left+s),Math.round(n.top)),new qt(Math.round(n.left+s+o),Math.round(n.top)),new qt(Math.round(n.left+s+o),Math.round(n.height+n.top)),new qt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new qt(Math.round(n.left+s),Math.round(n.top+i)),new qt(Math.round(n.left+s+o),Math.round(n.top+i)),new qt(Math.round(n.left+s+o),Math.round(n.top+i+l)),new qt(Math.round(n.left+s),Math.round(n.top+i+l))];default:return[new qt(Math.round(a.left),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.top)),new qt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new qt(Math.round(a.left),Math.round(a.height+a.top))]}},NCe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",QD="Hidden Text",kCe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=NCe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(QD)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(QD)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),uO=function(){function t(e,r){this.context=e,this.options=r}return t}(),ICe=1e4,FCe=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new kCe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),vCe(r)&&(this.ctx.globalAlpha=r.opacity),xCe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),sO(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Ji(this,void 0,void 0,function(){var n;return Di(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Ji(this,void 0,void 0,function(){return Di(this,function(n){switch(n.label){case 0:if(Ds(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=lT(r.text);i.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+a),o+s.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=MCe(r.fontFamily).join(", "),s=n1(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Ji(this,void 0,void 0,function(){var a,s,i,o,l,u,d,h,m=this;return Di(this,function(g){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Gs(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,u);var E=n.textShadow;E.length&&b.text.trim().length&&(E.slice(0).reverse().forEach(function(B){m.ctx.shadowColor=Gs(B.color),m.ctx.shadowOffsetX=B.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=B.offsetY.number*m.options.scale,m.ctx.shadowBlur=B.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Gs(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(B){switch(B){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=Gs(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Fy(r),i=Iy(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Ji(this,void 0,void 0,function(){var n,a,s,i,o,l,k,k,u,d,h,m,U,g,b,P,y,E,B,k,F,U,P;return Di(this,function(D){switch(D.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,D.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,s)]):[3,4];case 2:D.sent(),D.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof H7))return[3,8];D.label=5;case 5:return D.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=D.sent(),this.renderReplacedElement(n,a,k),[3,8];case 7:return D.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof V7&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof z7))return[3,12];D.label=9;case 9:return D.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=D.sent(),this.renderReplacedElement(n,a,k),[3,12];case 11:return D.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof W7&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=D.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),D.label=14;case 14:if(n instanceof cT&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Sy?n.checked&&(this.ctx.save(),this.path([new qt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new qt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new qt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new qt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new qt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new qt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new qt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Gs(BD),this.ctx.fill(),this.ctx.restore()):n.type===Ty&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Gs(BD),this.ctx.fill(),this.ctx.restore())),DCe(n)&&n.value.length){switch(m=this.createFontStyle(s),U=m[0],g=m[1],b=this.fontMetrics.getMetrics(U,g).baseline,this.ctx.font=U,this.ctx.fillStyle=Gs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=LCe(n.styles.textAlign),P=Fy(n),y=0,n.styles.textAlign){case 1:y+=P.width/2;break;case 2:y+=P.width;break}E=P.add(y,0,0,-P.height/2+1),this.ctx.save(),this.path([new qt(P.left,P.top),new qt(P.left+P.width,P.top),new qt(P.left+P.width,P.top+P.height),new qt(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new qg(n.value,E),s.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ds(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(B=n.styles.listStyleImage,B.type!==0)return[3,18];k=void 0,F=B.url,D.label=15;case 15:return D.trys.push([15,17,,18]),[4,this.context.cache.match(F)];case 16:return k=D.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return D.sent(),this.context.logger.error("Error loading list-style-image "+F),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(U=this.createFontStyle(s)[0],this.ctx.font=U,this.ctx.fillStyle=Gs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new LA(n.bounds.left,n.bounds.top+ca(n.styles.paddingTop,n.bounds.width),n.bounds.width,AD(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new qg(r.listValue,P),s.letterSpacing,AD(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),D.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Ji(this,void 0,void 0,function(){var n,a,B,s,i,B,o,l,B,u,d,B,h,m,B,g,b,B,y,E,B;return Di(this,function(k){switch(k.label){case 0:if(Ds(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:k.sent(),n=0,a=r.negativeZIndex,k.label=2;case 2:return n<a.length?(B=a[n],[4,this.renderStack(B)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:k.sent(),s=0,i=r.nonInlineLevel,k.label=7;case 7:return s<i.length?(B=i[s],[4,this.renderNode(B)]):[3,10];case 8:k.sent(),k.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,k.label=11;case 11:return o<l.length?(B=l[o],[4,this.renderStack(B)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,k.label=15;case 15:return u<d.length?(B=d[u],[4,this.renderStack(B)]):[3,18];case 16:k.sent(),k.label=17;case 17:return u++,[3,15];case 18:h=0,m=r.inlineLevel,k.label=19;case 19:return h<m.length?(B=m[h],[4,this.renderNode(B)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return g<b.length?(B=b[g],[4,this.renderStack(B)]):[3,26];case 24:k.sent(),k.label=25;case 25:return g++,[3,23];case 26:y=0,E=r.positiveZIndex,k.label=27;case 27:return y<E.length?(B=E[y],[4,this.renderStack(B)]):[3,30];case 28:k.sent(),k.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Ml(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Ml(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(r){return Ji(this,void 0,void 0,function(){var n,a,s,i,o,l;return Di(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var h,m,g,H,Z,ee,j,z,S,b,H,Z,ee,j,z,y,E,B,k,F,U,P,D,C,S,N,H,L,I,j,z,ne,Z,ee,ae,G,K,le,O,W,Y,te;return Di(this,function(ce){switch(ce.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return h=ce.sent(),[3,4];case 3:return ce.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=PE(r,n,[h.width,h.height,h.width/h.height]),H=g[0],Z=g[1],ee=g[2],j=g[3],z=g[4],S=s.ctx.createPattern(s.resizeImage(h,j,z),"repeat"),s.renderRepeat(H,S,Z,ee)),[3,6];case 5:xye(d)?(b=PE(r,n,[null,null,null]),H=b[0],Z=b[1],ee=b[2],j=b[3],z=b[4],y=fye(d.angle,j,z),E=y[0],B=y[1],k=y[2],F=y[3],U=y[4],P=document.createElement("canvas"),P.width=j,P.height=z,D=P.getContext("2d"),C=D.createLinearGradient(B,F,k,U),cD(d.stops,E).forEach(function(de){return C.addColorStop(de.stop,Gs(de.color))}),D.fillStyle=C,D.fillRect(0,0,j,z),j>0&&z>0&&(S=s.ctx.createPattern(P,"repeat"),s.renderRepeat(H,S,Z,ee))):vye(d)&&(N=PE(r,n,[null,null,null]),H=N[0],L=N[1],I=N[2],j=N[3],z=N[4],ne=d.position.length===0?[sT]:d.position,Z=ca(ne[0],j),ee=ca(ne[ne.length-1],z),ae=hye(d,Z,ee,j,z),G=ae[0],K=ae[1],G>0&&K>0&&(le=s.ctx.createRadialGradient(L+Z,I+ee,0,L+Z,I+ee,G),cD(d.stops,G*2).forEach(function(de){return le.addColorStop(de.stop,Gs(de.color))}),s.path(H),s.ctx.fillStyle=le,G!==K?(O=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,Y=K/G,te=1/Y,s.ctx.save(),s.ctx.translate(O,W),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-O,-W),s.ctx.fillRect(L,te*(I-W)+W,j,z*te),s.ctx.restore()):s.ctx.fill())),ce.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,a(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Ji(this,void 0,void 0,function(){return Di(this,function(s){return this.path(OD(a,n)),this.ctx.fillStyle=Gs(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Ji(this,void 0,void 0,function(){var i,o;return Di(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return l.sent(),[2];case 2:return i=bCe(s,a),this.path(i),this.ctx.fillStyle=Gs(r),this.ctx.fill(),o=CCe(s,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Ji(this,void 0,void 0,function(){var n,a,s,i,o,l,u,d,h=this;return Di(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!rf(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=RCe(q0(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rf(n.backgroundColor)||(this.ctx.fillStyle=Gs(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=ky(r.curves),y=g.inset?0:ICe,E=yCe(b,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(E)):(h.mask(b),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=g.offsetX.number+y,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=Gs(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?Gs(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=s,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!rf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Ji(this,void 0,void 0,function(){var o,l,u,d,h,m,g,b,y,E,B,k,F,U,P,D,P,D;return Di(this,function(C){return this.ctx.save(),o=ECe(s,a),l=OD(s,a),i===2&&(this.path(l),this.ctx.clip()),Ml(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Ml(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),a===0||a===2?g=Math.abs(u-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(b=n,y=n),E=!0,g<=b*2?E=!1:g<=b*2+y?(B=g/(2*b+y),b*=B,y*=B):(k=Math.floor((g+y)/(b+y)),F=(g-k*b)/(k-1),U=(g-(k+1)*b)/k,y=U<=0||Math.abs(y-F)<Math.abs(y-U)?F:U),E&&(i===3?this.ctx.setLineDash([0,b+y]):this.ctx.setLineDash([b,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Gs(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Ml(l[0])&&(P=l[3],D=l[0],this.ctx.beginPath(),this.formatPath([new qt(P.end.x,P.end.y),new qt(D.start.x,D.start.y)]),this.ctx.stroke()),Ml(l[1])&&(P=l[1],D=l[2],this.ctx.beginPath(),this.formatPath([new qt(P.end.x,P.end.y),new qt(D.start.x,D.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Ji(this,void 0,void 0,function(){var n;return Di(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Gs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=wCe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uO),DCe=function(t){return t instanceof K7||t instanceof q7?!0:t instanceof cT&&t.type!==Ty&&t.type!==Sy},RCe=function(t,e){switch(t){case 0:return ky(e);case 2:return mCe(e);case 1:default:return Iy(e)}},LCe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},UCe=["-apple-system","system-ui"],MCe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return UCe.indexOf(e)===-1}):t},PCe=function(t){Uc(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Ji(this,void 0,void 0,function(){var n,a;return Di(this,function(s){switch(s.label){case 0:return n=B5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,jCe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Gs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uO),jCe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},OCe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kv([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kv([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),QCe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new OCe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new oCe(this,e)}return t.instanceCount=1,t}(),AO=function(t,e){return e===void 0&&(e={}),HCe(t,e)};typeof window<"u"&&aO.setContext(window);var HCe=function(t,e){return Ji(void 0,void 0,void 0,function(){var r,n,a,s,i,o,l,u,d,h,m,g,b,y,E,B,k,F,U,P,C,D,C,S,N,H,L,I,j,z,ne,Z,ee,ae,G,K,le,O,W,Y;return Di(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:(H=e.useCORS)!==null&&H!==void 0?H:!1},s=f5({logging:(L=e.logging)!==null&&L!==void 0?L:!0,cache:e.cache},a),i={windowWidth:(I=e.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(j=e.windowHeight)!==null&&j!==void 0?j:n.innerHeight,scrollX:(z=e.scrollX)!==null&&z!==void 0?z:n.pageXOffset,scrollY:(ne=e.scrollY)!==null&&ne!==void 0?ne:n.pageYOffset},o=new LA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new QCe(s,o),u=(Z=e.foreignObjectRendering)!==null&&Z!==void 0?Z:!1,d={allowTaint:(ee=e.allowTaint)!==null&&ee!==void 0?ee:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new MD(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=uT(m)||zbe(m)?yve(m.ownerDocument):Vw(l,m),y=b.width,E=b.height,B=b.left,k=b.top,F=VCe(l,m,e.backgroundColor),U={canvas:e.canvas,backgroundColor:F,scale:(G=(ae=e.scale)!==null&&ae!==void 0?ae:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((K=e.x)!==null&&K!==void 0?K:0)+B,y:((le=e.y)!==null&&le!==void 0?le:0)+k,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(y),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(E)},u?(l.logger.debug("Document cloned, using foreign object rendering"),C=new PCe(l,U),[4,C.render(m)]):[3,3];case 2:return P=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+B+","+k+" with size "+y+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),D=X7(l,m),F===D.styles.backgroundColor&&(D.styles.backgroundColor=BA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+U.x+","+U.y+" with size "+U.width+"x"+U.height),C=new FCe(l,U),[4,C.render(D)];case 4:P=te.sent(),te.label=5;case 5:return(!((Y=e.removeContainer)!==null&&Y!==void 0)||Y)&&(MD.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,P]}})})},VCe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?zg(t,getComputedStyle(n.documentElement).backgroundColor):BA.TRANSPARENT,s=n.body?zg(t,getComputedStyle(n.body).backgroundColor):BA.TRANSPARENT,i=typeof r=="string"?zg(t,r):r===null?BA.TRANSPARENT:4294967295;return e===n.documentElement?rf(a)?rf(s)?i:s:a:i};const zCe=Object.freeze(Object.defineProperty({__proto__:null,default:AO},Symbol.toStringTag,{value:"Module"})),Zw="proyectos_interdisciplinarios",dO="entregas_interdisciplinarias",GCe="usuarios",AT=t=>{const e=t.data();return{id:t.id,...e}},qCe=t=>{const e=fr(Kt(Gt,Zw),Kn("nombreProyecto","asc"));return Yr(e,n=>{const a=n.docs.map(s=>AT(s));t(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},KCe=async t=>{try{return(await Js(Kt(Gt,Zw),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},HD=async(t,e)=>{try{const{id:r,...n}=e,a=Lr(Gt,Zw,t);await il(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},WCe=async t=>{try{const e=Lr(Gt,Zw,t);await No(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},$Ce=(t,e)=>{const r=fr(Kt(Gt,dO),ta("planificacionId","==",t));return Yr(r,a=>{const s=a.docs.map(i=>AT(i));e(s)},a=>{console.error("Error al suscribirse a las entregas:",a),e([])})},XCe=async(t,e)=>{try{const r=Lr(Gt,dO,t);await il(r,{feedbackProfesor:e,fechaFeedback:Br.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},YCe=t=>{const e=fr(Kt(Gt,GCe));return Yr(e,n=>{const a=n.docs.map(s=>AT(s));t(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},JCe=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=J.useState(null),a=J.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),s=J.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let y=0;y<g.length;y++)b=g.charCodeAt(y)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=J.useState(l.activity),g=y=>{m({...h,[y.target.name]:y.target.value})},b=()=>{d(l.planId,h),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return a.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(l=>{const u=s(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},ZCe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),eEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),tEe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),rEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),nEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),aEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),sEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),iEe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),VD=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Nd=({icon:t,label:e,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),n]}),r]}),oEe=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,a]=J.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[s,i]=J.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=J.useState({nombre:"",fecha:""}),[u,d]=J.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=J.useState(!1),[g,b]=J.useState(!1);J.useEffect(()=>{a(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const y=async P=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}P==="objetivos"?m(!0):b(!0);let D="";P==="objetivos"?D=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:D=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const I=(await(await new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}).generateContent(D)).response).text();a(j=>({...j,[P]:I.replace(/(\*\*|\*)/g,"")}))}catch(C){console.error(`Error al generar ${P}`,C),alert(`Hubo un error al generar los ${P}. Inténtelo de nuevo.`)}finally{P==="objetivos"?m(!1):b(!1)}},E=P=>{a(D=>({...D,[P.target.name]:P.target.value}))},B=(P,D)=>{a(C=>{const S=C[P],N=S.includes(D)?S.filter(H=>H!==D):[...S,D];return{...C,[P]:N}})},k=()=>{if(!s.nombre||!s.fechaInicio||!s.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}a(P=>({...P,actividades:[...P.actividades||[],{...s,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},F=()=>{!o.nombre||!o.fecha||(a(P=>({...P,fechasClave:[...P.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},U=()=>{var D;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const P={id:crypto.randomUUID(),numero:(((D=n.tareas)==null?void 0:D.length)||0)+1,...u};a(C=>({...C,tareas:[...C.tareas||[],P]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Nd,{icon:c.jsx(ZCe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:E,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(eEe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:E,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(tEe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:is.map(P=>c.jsx("button",{type:"button",onClick:()=>B("cursos",P),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(P)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:P},P))})}),c.jsx(Nd,{icon:c.jsx(rEe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:nl.map(P=>c.jsx("button",{type:"button",onClick:()=>B("asignaturas",P),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(P)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:P},P))})}),c.jsx(Nd,{icon:c.jsx(nEe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:E,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(aEe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>y("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(VD,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:E,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(sEe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>y("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(VD,{})}),children:g?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:E,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Nd,{icon:c.jsx(iEe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:s.nombre,onChange:P=>i({...s,nombre:P.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:s.fechaInicio,onChange:P=>i({...s,fechaInicio:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:s.fechaFin,onChange:P=>i({...s,fechaFin:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(P=>c.jsx("li",{children:P.nombre},P.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:P=>l({...o,nombre:P.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:P=>l({...o,fecha:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:F,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(P=>c.jsxs("li",{children:[P.nombre," (",P.fecha,")"]},P.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:P=>d({...u,instrucciones:P.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:P=>d({...u,fechaEntrega:P.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:U,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(P=>c.jsxs("li",{children:[P.numero,". ",P.instrucciones]},P.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},zD=()=>{const[t,e]=J.useState([]),[r,n]=J.useState(!0),[a,s]=J.useState("list"),[i,o]=J.useState(null),[l,u]=J.useState(null),[d,h]=J.useState(null);J.useEffect(()=>{n(!0);const F=qCe(U=>{e(U),n(!1)});return()=>F()},[]);const m=J.useCallback(async(F,U)=>{const P=t.find(D=>D.id===F);if(P){const D={...P,actividades:(P.actividades||[]).map(C=>C.id===U.id?U:C)};await HD(F,D)}},[t]),g=async F=>{try{"id"in F&&F.id?await HD(F.id,F):await KCe(F),s("list"),o(null)}catch(U){console.error("Error al guardar la planificación:",U),alert("No se pudo guardar la planificación.")}},b=F=>{o(F),s("form")},y=async F=>{if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await WCe(F)}catch(U){console.error("Error al eliminar la planificación:",U),alert("No se pudo eliminar la planificación.")}},E=()=>{o(null),s("form")},B=async F=>{u(F.id);const U=new ir("p","mm","a4"),P=15,D=U.internal.pageSize.getWidth(),C=U.internal.pageSize.getHeight(),S=D-P*2;let N=P;const H=22,L=14,I=11,j=()=>{U.setFont("helvetica","normal"),U.setFontSize(9),U.setTextColor(150),U.text("Proyecto Interdisciplinario",P,12),U.text("Liceo Industrial de Recoleta",D-P,12,{align:"right"}),U.setDrawColor(220),U.line(P,15,D-P,15)},z=G=>{N+G>C-P&&(U.addPage(),j(),N=P+15)},ne=(G,K)=>{if(!K||Array.isArray(K)&&K.length===0||typeof K=="string"&&!K.trim())return;const le=10;U.setFontSize(I);const O=Array.isArray(K)?K.join(", "):String(K),W=U.splitTextToSize(O,S),Y=W.length*(I*.35*1.15);z(le+Y+12),U.setFont("helvetica","bold"),U.setFontSize(L),U.setTextColor(40),U.text(G,P,N),N+=6,U.setDrawColor(200),U.line(P,N,P+30,N),N+=8,U.setFont("helvetica","normal"),U.setFontSize(I),U.setTextColor(80),U.text(W,P,N),N+=Y+12};j(),N=P+20,U.setFont("helvetica","bold"),U.setFontSize(H),U.setTextColor(0);const Z=U.splitTextToSize(F.nombreProyecto,S);if(U.text(Z,P,N),N+=Z.length*(H*.4)+10,rl(U,{startY:N,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},F.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},F.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},F.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:I,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),N=U.lastAutoTable.finalY+15,ne("Descripción del Proyecto",F.descripcionProyecto),ne("Objetivos de Aprendizaje",F.objetivos),ne("Indicadores de Logro",F.indicadoresLogro),F.tareas&&F.tareas.length>0){const G=F.tareas.map(le=>[le.numero.toString(),le.instrucciones,le.fechaEntrega]),K=(G.length+1)*10+15;z(K+15),U.setFont("helvetica","bold"),U.setFontSize(L),U.setTextColor(40),U.text("Tareas para Estudiantes",P,N),N+=10,rl(U,{startY:N,head:[["#","Instrucciones","Fecha de Entrega"]],body:G,theme:"striped",headStyles:{fillColor:[52,73,94]}}),N=U.lastAutoTable.finalY+15}const ee=document.getElementById("gantt-container-vertical");if(ee)try{const K=(await AO(ee,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");U.addPage(),j(),N=P+15,U.setFont("helvetica","bold"),U.setFontSize(L),U.setTextColor(40),U.text("Cronograma del Proyecto",P,N),N+=10;const le=U.getImageProperties(K),O=S,W=le.height*O/le.width;U.addImage(K,"PNG",P,N,O,W)}catch(G){console.error("Error generating timeline image:",G)}const ae=U.internal.pages.length-1;for(let G=1;G<=ae;G++)U.setPage(G),U.setFont("helvetica","normal"),U.setFontSize(9),U.setTextColor(150),U.text(`Página ${G} de ${ae}`,D-P,U.internal.pageSize.getHeight()-10,{align:"right"});U.save(`Proyecto_${F.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},k=({plan:F,onBack:U})=>{var j,z;const[P,D]=J.useState([]),[C,S]=J.useState([]),[N,H]=J.useState(((j=F.tareas)==null?void 0:j[0])||null);J.useEffect(()=>{const ne=YCe(D),Z=$Ce(F.id,S);return()=>{ne(),Z()}},[F.id]);const L=J.useMemo(()=>P.filter(ne=>ne.profile===$t.ESTUDIANTE&&F.cursos.includes(ne.curso||"")).sort((ne,Z)=>ne.nombreCompleto.localeCompare(Z.nombreCompleto)),[P,F.cursos]),I=async(ne,Z)=>{try{await XCe(ne,Z)}catch(ee){console.error("Error saving feedback:",ee),alert("No se pudo guardar la retroalimentación.")}};return N?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",F.nombreProyecto]}),c.jsx("button",{onClick:U,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:N.id,onChange:ne=>{var Z;return H(((Z=F.tareas)==null?void 0:Z.find(ee=>ee.id===ne.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(z=F.tareas)==null?void 0:z.map(ne=>c.jsxs("option",{value:ne.id,children:["Tarea ",ne.numero,": ",ne.instrucciones]},ne.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:L.map(ne=>{const Z=C.find(ee=>ee.tareaId===N.id&&ee.estudianteId===ne.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[ne.nombreCompleto," - ",Z!=null&&Z.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),Z&&c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[Z.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",Z.observacionesEstudiante]}),Z.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:Z.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:Z.enlaceUrl})]}),Z.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:Z.archivoAdjunto.url,download:Z.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:Z.archivoAdjunto.nombre})]}),c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:Z.feedbackProfesor||"",onBlur:ee=>I(Z.id,ee.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]},ne.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:E,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(F=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:F.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(F.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(F),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>B(F),disabled:l===F.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===F.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>b(F),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>y(F.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},F.id))})]}):c.jsx(oEe,{initialPlan:i,onSave:g,onCancel:()=>{s("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(JCe,{planificaciones:t,onActivityUpdate:m})})]})},jE="pañolMaquinas",GD="pañolRegistros",lEe=()=>{const[t,e]=J.useState([]),[r,n]=J.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=J.useState(a),[o,l]=J.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=J.useState(u),[m,g]=J.useState(null),[b,y]=J.useState({maquinaId:"",curso:"",profesor:"",fecha:""});J.useEffect(()=>{try{const I=localStorage.getItem(jE);if(I&&JSON.parse(I).length>0)e(JSON.parse(I));else{const z=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(z),localStorage.setItem(jE,JSON.stringify(z))}const j=localStorage.getItem(GD);j&&n(JSON.parse(j))}catch(I){console.error("Error al cargar datos de Pañol desde localStorage",I)}},[]);const E=J.useCallback(I=>{e(I),localStorage.setItem(jE,JSON.stringify(I))},[]),B=J.useCallback(I=>{n(I),localStorage.setItem(GD,JSON.stringify(I))},[]),k=I=>{I.preventDefault(),d.nombre.trim()&&(E(m?t.map(j=>j.id===m.id?{...m,...d}:j):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},F=J.useCallback(I=>{if(r.some(j=>j.maquinaId===I)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&E(t.filter(j=>j.id!==I))},[t,r,E]),U=I=>{I.preventDefault();const j=o||s;if(!j.curso||!j.profesorResponsable.trim()||!j.maquinaId||j.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}B(o?r.map(z=>z.id===o.id?o:z):[{...s,id:crypto.randomUUID()},...r]),i(a),l(null)},P=J.useCallback(I=>{window.confirm("¿Eliminar este registro de uso?")&&B(r.filter(j=>j.id!==I))},[r,B]),D=J.useMemo(()=>r.filter(I=>(b.maquinaId===""||I.maquinaId===b.maquinaId)&&(b.curso===""||I.curso===b.curso)&&(b.profesor===""||I.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||I.fecha===b.fecha)).sort((I,j)=>new Date(j.fecha).getTime()-new Date(I.fecha).getTime()),[r,b]),C=J.useMemo(()=>new Map(t.map(I=>[I.id,I])),[t]),S=()=>{const I=D.map(ne=>{var Z,ee;return{Fecha:ne.fecha,Curso:ne.curso,Profesor:ne.profesorResponsable,Máquina:((Z=C.get(ne.maquinaId))==null?void 0:Z.nombre)||"N/A",Especialidad:((ee=C.get(ne.maquinaId))==null?void 0:ee.especialidad)||"N/A","Total Horas":ne.totalHoras,Observaciones:ne.observaciones}}),j=jl.json_to_sheet(I),z=jl.book_new();jl.book_append_sheet(z,j,"RegistrosPañol"),X4(z,"Registros_Pañol.xlsx")},N=()=>{const I=new ir;rl(I,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:D.map(j=>{var z,ne;return[j.fecha,j.curso,j.profesorResponsable,((z=C.get(j.maquinaId))==null?void 0:z.nombre)||"N/A",((ne=C.get(j.maquinaId))==null?void 0:ne.especialidad)||"N/A",j.totalHoras,j.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:j=>{I.setFontSize(10),I.setFont("helvetica","bold"),I.text("LICEO INDUSTRIAL DE RECOLETA",j.settings.margin.left,15)}}),I.save("Registros_Pañol.pdf")},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",L=()=>{const I=o||s,j=o?l:i;return c.jsxs("form",{onSubmit:U,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:I.fecha,onChange:z=>j({...I,fecha:z.target.value}),className:H,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:I.curso,onChange:z=>j({...I,curso:z.target.value}),className:H,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),is.map(z=>c.jsx("option",{children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:I.profesorResponsable,onChange:z=>j({...I,profesorResponsable:z.target.value}),className:H,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),S_.map(z=>c.jsx("option",{value:z,children:z},z))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:I.maquinaId,onChange:z=>j({...I,maquinaId:z.target.value}),className:H,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(z=>c.jsx("option",{value:z.id,children:z.nombre},z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:I.totalHoras,onChange:z=>j({...I,totalHoras:Number(z.target.value)}),className:H,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:I.observaciones,onChange:z=>j({...I,observaciones:z.target.value}),placeholder:"Observaciones...",className:`${H}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),L()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:I=>h({...d,nombre:I.target.value}),placeholder:"Nombre máquina",className:H}),c.jsxs("select",{value:d.especialidad,onChange:I=>h({...d,especialidad:I.target.value}),className:H,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(I=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[I.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",I.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{g(I),h(I)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>F(I.id),className:"text-red-500",children:"🗑️"})]})]},I.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:S,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:N,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:b.fecha,onChange:I=>y({...b,fecha:I.target.value}),className:H}),c.jsxs("select",{value:b.curso,onChange:I=>y({...b,curso:I.target.value}),className:H,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),is.map(I=>c.jsx("option",{children:I},I))]}),c.jsxs("select",{value:b.maquinaId,onChange:I=>y({...b,maquinaId:I.target.value}),className:H,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(I=>c.jsx("option",{value:I.id,children:I.nombre},I.id))]}),c.jsx("input",{value:b.profesor,onChange:I=>y({...b,profesor:I.target.value}),placeholder:"Buscar profesor...",className:H})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:D.map(I=>{var j;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((j=C.get(I.maquinaId))==null?void 0:j.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[I.profesorResponsable," (",I.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:I.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(I),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>P(I.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},I.id)})})]})})]})]})]})};function ao(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=ao(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var OE={exports:{}},QE={},HE={exports:{}},VE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function cEe(){if(qD)return VE;qD=1;var t=kx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=n({inst:{value:g,getSnapshot:m}}),y=b[0].inst,E=b[1];return s(function(){y.value=g,y.getSnapshot=m,l(y)&&E({inst:y})},[h,g,m]),a(function(){return l(y)&&E({inst:y}),h(function(){l(y)&&E({inst:y})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!r(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return VE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,VE}var KD;function uEe(){return KD||(KD=1,HE.exports=cEe()),HE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function AEe(){if(WD)return QE;WD=1;var t=kx(),e=uEe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return QE.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var b=s(null);if(b.current===null){var y={hasValue:!1,value:null};b.current=y}else y=b.current;b=o(function(){function B(D){if(!k){if(k=!0,F=D,D=m(D),g!==void 0&&y.hasValue){var C=y.value;if(g(C,D))return U=C}return U=D}if(C=U,n(F,D))return C;var S=m(D);return g!==void 0&&g(C,S)?(F=D,C):(F=D,U=S)}var k=!1,F,U,P=h===void 0?null:h;return[function(){return B(d())},P===null?void 0:function(){return B(P())}]},[d,h,m,g]);var E=a(u,b[0],b[1]);return i(function(){y.hasValue=!0,y.value=E},[E]),l(E),E},QE}var $D;function dEe(){return $D||($D=1,OE.exports=AEe()),OE.exports}var fEe=dEe();const hEe=eS(fEe),mEe={},XD=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(b=>b(e,g))}},a=()=>e,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(mEe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,a,l);return l},pEe=t=>t?XD(t):XD,{useDebugValue:gEe}=At,{useSyncExternalStoreWithSelector:xEe}=hEe,vEe=t=>t;function fO(t,e=vEe,r){const n=xEe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return gEe(n),n}const YD=(t,e)=>{const r=pEe(t),n=(a,s=e)=>fO(r,a,s);return Object.assign(n,r),n},yEe=(t,e)=>t?YD(t,e):YD;function qi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,a]of t)if(!Object.is(a,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var wEe={value:()=>{}};function eb(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new k2(r)}function k2(t){this._=t}function bEe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}k2.prototype=eb.prototype={constructor:k2,on:function(t,e){var r=this._,n=bEe(t+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(t=n[s]).type)&&(a=CEe(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<i;)if(a=(t=n[s]).type)r[a]=JD(r[a],t.name,e);else if(e==null)for(a in r)r[a]=JD(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new k2(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],n=0,a=s.length;n<a;++n)s[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,s=n.length;a<s;++a)n[a].value.apply(e,r)}};function CEe(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function JD(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=wEe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var L5="http://www.w3.org/1999/xhtml";const ZD={svg:"http://www.w3.org/2000/svg",xhtml:L5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tb(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ZD.hasOwnProperty(e)?{space:ZD[e],local:t}:t}function EEe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===L5&&e.documentElement.namespaceURI===L5?e.createElement(t):e.createElementNS(r,t)}}function _Ee(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hO(t){var e=tb(t);return(e.local?_Ee:EEe)(e)}function SEe(){}function dT(t){return t==null?SEe:function(){return this.querySelector(t)}}function TEe(t){typeof t!="function"&&(t=dT(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=new Array(i),l,u,d=0;d<i;++d)(l=s[d])&&(u=t.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new sl(n,this._parents)}function BEe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function NEe(){return[]}function mO(t){return t==null?NEe:function(){return this.querySelectorAll(t)}}function kEe(t){return function(){return BEe(t.apply(this,arguments))}}function IEe(t){typeof t=="function"?t=kEe(t):t=mO(t);for(var e=this._groups,r=e.length,n=[],a=[],s=0;s<r;++s)for(var i=e[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),a.push(l));return new sl(n,a)}function pO(t){return function(){return this.matches(t)}}function gO(t){return function(e){return e.matches(t)}}var FEe=Array.prototype.find;function DEe(t){return function(){return FEe.call(this.children,t)}}function REe(){return this.firstElementChild}function LEe(t){return this.select(t==null?REe:DEe(typeof t=="function"?t:gO(t)))}var UEe=Array.prototype.filter;function MEe(){return Array.from(this.children)}function PEe(t){return function(){return UEe.call(this.children,t)}}function jEe(t){return this.selectAll(t==null?MEe:PEe(typeof t=="function"?t:gO(t)))}function OEe(t){typeof t!="function"&&(t=pO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new sl(n,this._parents)}function xO(t){return new Array(t.length)}function QEe(){return new sl(this._enter||this._groups.map(xO),this._parents)}function Dy(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dy.prototype={constructor:Dy,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function HEe(t){return function(){return t}}function VEe(t,e,r,n,a,s){for(var i=0,o,l=e.length,u=s.length;i<u;++i)(o=e[i])?(o.__data__=s[i],n[i]=o):r[i]=new Dy(t,s[i]);for(;i<l;++i)(o=e[i])&&(a[i]=o)}function zEe(t,e,r,n,a,s,i){var o,l,u=new Map,d=e.length,h=s.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?a[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,s[o],o,s)+"",(l=u.get(g))?(n[o]=l,l.__data__=s[o],u.delete(g)):r[o]=new Dy(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(a[o]=l)}function GEe(t){return t.__data__}function qEe(t,e){if(!arguments.length)return Array.from(this,GEe);var r=e?zEe:VEe,n=this._parents,a=this._groups;typeof t!="function"&&(t=HEe(t));for(var s=a.length,i=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var d=n[u],h=a[u],m=h.length,g=KEe(t.call(d,d&&d.__data__,u,n)),b=g.length,y=o[u]=new Array(b),E=i[u]=new Array(b),B=l[u]=new Array(m);r(d,h,y,E,B,g,e);for(var k=0,F=0,U,P;k<b;++k)if(U=y[k]){for(k>=F&&(F=k+1);!(P=E[F])&&++F<b;);U._next=P||null}}return i=new sl(i,n),i._enter=o,i._exit=l,i}function KEe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function WEe(){return new sl(this._exit||this._groups.map(xO),this._parents)}function $Ee(t,e,r){var n=this.enter(),a=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function XEe(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),l=0;l<i;++l)for(var u=r[l],d=n[l],h=u.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(m[b]=g);for(;l<a;++l)o[l]=r[l];return new sl(o,this._parents)}function YEe(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function JEe(t){t||(t=ZEe);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,l=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new sl(a,this._parents).order()}function ZEe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function e_e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function t_e(){return Array.from(this)}function r_e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function n_e(){let t=0;for(const e of this)++t;return t}function a_e(){return!this.node()}function s_e(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&t.call(o,o.__data__,s,a);return this}function i_e(t){return function(){this.removeAttribute(t)}}function o_e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function l_e(t,e){return function(){this.setAttribute(t,e)}}function c_e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function u_e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function A_e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function d_e(t,e){var r=tb(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?o_e:i_e:typeof e=="function"?r.local?A_e:u_e:r.local?c_e:l_e)(r,e))}function vO(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function f_e(t){return function(){this.style.removeProperty(t)}}function h_e(t,e,r){return function(){this.style.setProperty(t,e,r)}}function m_e(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function p_e(t,e,r){return arguments.length>1?this.each((e==null?f_e:typeof e=="function"?m_e:h_e)(t,e,r??"")):Lm(this.node(),t)}function Lm(t,e){return t.style.getPropertyValue(e)||vO(t).getComputedStyle(t,null).getPropertyValue(e)}function g_e(t){return function(){delete this[t]}}function x_e(t,e){return function(){this[t]=e}}function v_e(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function y_e(t,e){return arguments.length>1?this.each((e==null?g_e:typeof e=="function"?v_e:x_e)(t,e)):this.node()[t]}function yO(t){return t.trim().split(/^|\s+/)}function fT(t){return t.classList||new wO(t)}function wO(t){this._node=t,this._names=yO(t.getAttribute("class")||"")}wO.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bO(t,e){for(var r=fT(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function CO(t,e){for(var r=fT(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function w_e(t){return function(){bO(this,t)}}function b_e(t){return function(){CO(this,t)}}function C_e(t,e){return function(){(e.apply(this,arguments)?bO:CO)(this,t)}}function E_e(t,e){var r=yO(t+"");if(arguments.length<2){for(var n=fT(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?C_e:e?w_e:b_e)(r,e))}function __e(){this.textContent=""}function S_e(t){return function(){this.textContent=t}}function T_e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function B_e(t){return arguments.length?this.each(t==null?__e:(typeof t=="function"?T_e:S_e)(t)):this.node().textContent}function N_e(){this.innerHTML=""}function k_e(t){return function(){this.innerHTML=t}}function I_e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function F_e(t){return arguments.length?this.each(t==null?N_e:(typeof t=="function"?I_e:k_e)(t)):this.node().innerHTML}function D_e(){this.nextSibling&&this.parentNode.appendChild(this)}function R_e(){return this.each(D_e)}function L_e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U_e(){return this.each(L_e)}function M_e(t){var e=typeof t=="function"?t:hO(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function P_e(){return null}function j_e(t,e){var r=typeof t=="function"?t:hO(t),n=e==null?P_e:typeof e=="function"?e:dT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function O_e(){var t=this.parentNode;t&&t.removeChild(this)}function Q_e(){return this.each(O_e)}function H_e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function V_e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function z_e(t){return this.select(t?V_e:H_e)}function G_e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function q_e(t){return function(e){t.call(this,e,this.__data__)}}function K_e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function W_e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,s;r<a;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function $_e(t,e,r){return function(){var n=this.__on,a,s=q_e(e);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=e;return}}this.addEventListener(t.type,s,r),a={type:t.type,name:t.name,value:e,listener:s,options:r},n?n.push(a):this.__on=[a]}}function X_e(t,e,r){var n=K_e(t+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(a=0,d=o[l];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?$_e:W_e,a=0;a<s;++a)this.each(o(n[a],e,r));return this}function EO(t,e,r){var n=vO(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Y_e(t,e){return function(){return EO(this,t,e)}}function J_e(t,e){return function(){return EO(this,t,e.apply(this,arguments))}}function Z_e(t,e){return this.each((typeof e=="function"?J_e:Y_e)(t,e))}function*e5e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var _O=[null];function sl(t,e){this._groups=t,this._parents=e}function a1(){return new sl([[document.documentElement]],_O)}function t5e(){return this}sl.prototype=a1.prototype={constructor:sl,select:TEe,selectAll:IEe,selectChild:LEe,selectChildren:jEe,filter:OEe,data:qEe,enter:QEe,exit:WEe,join:$Ee,merge:XEe,selection:t5e,order:YEe,sort:JEe,call:e_e,nodes:t_e,node:r_e,size:n_e,empty:a_e,each:s_e,attr:d_e,style:p_e,property:y_e,classed:E_e,text:B_e,html:F_e,raise:R_e,lower:U_e,append:M_e,insert:j_e,remove:Q_e,clone:z_e,datum:G_e,on:X_e,dispatch:Z_e,[Symbol.iterator]:e5e};function Cc(t){return typeof t=="string"?new sl([[document.querySelector(t)]],[document.documentElement]):new sl([[t]],_O)}function r5e(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wu(t,e){if(t=r5e(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const n5e={passive:!1},Cx={capture:!0,passive:!1};function zE(t){t.stopImmediatePropagation()}function gm(t){t.preventDefault(),t.stopImmediatePropagation()}function SO(t){var e=t.document.documentElement,r=Cc(t).on("dragstart.drag",gm,Cx);"onselectstart"in e?r.on("selectstart.drag",gm,Cx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function TO(t,e){var r=t.document.documentElement,n=Cc(t).on("dragstart.drag",null);e&&(n.on("click.drag",gm,Cx),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Zv=t=>()=>t;function U5(t,{sourceEvent:e,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}U5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function a5e(t){return!t.ctrlKey&&!t.button}function s5e(){return this.parentNode}function i5e(t,e){return e??{x:t.x,y:t.y}}function o5e(){return navigator.maxTouchPoints||"ontouchstart"in this}function l5e(){var t=a5e,e=s5e,r=i5e,n=o5e,a={},s=eb("start","drag","end"),i=0,o,l,u,d,h=0;function m(U){U.on("mousedown.drag",g).filter(n).on("touchstart.drag",E).on("touchmove.drag",B,n5e).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(U,P){if(!(d||!t.call(this,U,P))){var D=F(this,e.call(this,U,P),U,P,"mouse");D&&(Cc(U.view).on("mousemove.drag",b,Cx).on("mouseup.drag",y,Cx),SO(U.view),zE(U),u=!1,o=U.clientX,l=U.clientY,D("start",U))}}function b(U){if(gm(U),!u){var P=U.clientX-o,D=U.clientY-l;u=P*P+D*D>h}a.mouse("drag",U)}function y(U){Cc(U.view).on("mousemove.drag mouseup.drag",null),TO(U.view,u),gm(U),a.mouse("end",U)}function E(U,P){if(t.call(this,U,P)){var D=U.changedTouches,C=e.call(this,U,P),S=D.length,N,H;for(N=0;N<S;++N)(H=F(this,C,U,P,D[N].identifier,D[N]))&&(zE(U),H("start",U,D[N]))}}function B(U){var P=U.changedTouches,D=P.length,C,S;for(C=0;C<D;++C)(S=a[P[C].identifier])&&(gm(U),S("drag",U,P[C]))}function k(U){var P=U.changedTouches,D=P.length,C,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<D;++C)(S=a[P[C].identifier])&&(zE(U),S("end",U,P[C]))}function F(U,P,D,C,S,N){var H=s.copy(),L=wu(N||D,P),I,j,z;if((z=r.call(U,new U5("beforestart",{sourceEvent:D,target:m,identifier:S,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:H}),C))!=null)return I=z.x-L[0]||0,j=z.y-L[1]||0,function ne(Z,ee,ae){var G=L,K;switch(Z){case"start":a[S]=ne,K=i++;break;case"end":delete a[S],--i;case"drag":L=wu(ae||ee,P),K=i;break}H.call(Z,U,new U5(Z,{sourceEvent:ee,subject:z,target:m,identifier:S,active:K,x:L[0]+I,y:L[1]+j,dx:L[0]-G[0],dy:L[1]-G[1],dispatch:H}),C)}}return m.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Zv(!!U),m):t},m.container=function(U){return arguments.length?(e=typeof U=="function"?U:Zv(U),m):e},m.subject=function(U){return arguments.length?(r=typeof U=="function"?U:Zv(U),m):r},m.touchable=function(U){return arguments.length?(n=typeof U=="function"?U:Zv(!!U),m):n},m.on=function(){var U=s.on.apply(s,arguments);return U===s?m:U},m.clickDistance=function(U){return arguments.length?(h=(U=+U)*U,m):Math.sqrt(h)},m}function hT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function BO(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function s1(){}var Ex=.7,Ry=1/Ex,xm="\\s*([+-]?\\d+)\\s*",_x="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c5e=/^#([0-9a-f]{3,8})$/,u5e=new RegExp(`^rgb\\(${xm},${xm},${xm}\\)$`),A5e=new RegExp(`^rgb\\(${Iu},${Iu},${Iu}\\)$`),d5e=new RegExp(`^rgba\\(${xm},${xm},${xm},${_x}\\)$`),f5e=new RegExp(`^rgba\\(${Iu},${Iu},${Iu},${_x}\\)$`),h5e=new RegExp(`^hsl\\(${_x},${Iu},${Iu}\\)$`),m5e=new RegExp(`^hsla\\(${_x},${Iu},${Iu},${_x}\\)$`),eR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hT(s1,Sx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tR,formatHex:tR,formatHex8:p5e,formatHsl:g5e,formatRgb:rR,toString:rR});function tR(){return this.rgb().formatHex()}function p5e(){return this.rgb().formatHex8()}function g5e(){return NO(this).formatHsl()}function rR(){return this.rgb().formatRgb()}function Sx(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=c5e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?nR(e):r===3?new _o(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?e2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?e2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=u5e.exec(t))?new _o(e[1],e[2],e[3],1):(e=A5e.exec(t))?new _o(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=d5e.exec(t))?e2(e[1],e[2],e[3],e[4]):(e=f5e.exec(t))?e2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h5e.exec(t))?iR(e[1],e[2]/100,e[3]/100,1):(e=m5e.exec(t))?iR(e[1],e[2]/100,e[3]/100,e[4]):eR.hasOwnProperty(t)?nR(eR[t]):t==="transparent"?new _o(NaN,NaN,NaN,0):null}function nR(t){return new _o(t>>16&255,t>>8&255,t&255,1)}function e2(t,e,r,n){return n<=0&&(t=e=r=NaN),new _o(t,e,r,n)}function x5e(t){return t instanceof s1||(t=Sx(t)),t?(t=t.rgb(),new _o(t.r,t.g,t.b,t.opacity)):new _o}function M5(t,e,r,n){return arguments.length===1?x5e(t):new _o(t,e,r,n??1)}function _o(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}hT(_o,M5,BO(s1,{brighter(t){return t=t==null?Ry:Math.pow(Ry,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ex:Math.pow(Ex,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _o(vh(this.r),vh(this.g),vh(this.b),Ly(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aR,formatHex:aR,formatHex8:v5e,formatRgb:sR,toString:sR}));function aR(){return`#${lh(this.r)}${lh(this.g)}${lh(this.b)}`}function v5e(){return`#${lh(this.r)}${lh(this.g)}${lh(this.b)}${lh((isNaN(this.opacity)?1:this.opacity)*255)}`}function sR(){const t=Ly(this.opacity);return`${t===1?"rgb(":"rgba("}${vh(this.r)}, ${vh(this.g)}, ${vh(this.b)}${t===1?")":`, ${t})`}`}function Ly(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lh(t){return t=vh(t),(t<16?"0":"")+t.toString(16)}function iR(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ec(t,e,r,n)}function NO(t){if(t instanceof Ec)return new Ec(t.h,t.s,t.l,t.opacity);if(t instanceof s1||(t=Sx(t)),!t)return new Ec;if(t instanceof Ec)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,o=s-a,l=(s+a)/2;return o?(e===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Ec(i,o,l,t.opacity)}function y5e(t,e,r,n){return arguments.length===1?NO(t):new Ec(t,e,r,n??1)}function Ec(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}hT(Ec,y5e,BO(s1,{brighter(t){return t=t==null?Ry:Math.pow(Ry,t),new Ec(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ex:Math.pow(Ex,t),new Ec(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new _o(GE(t>=240?t-240:t+120,a,n),GE(t,a,n),GE(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ec(oR(this.h),t2(this.s),t2(this.l),Ly(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ly(this.opacity);return`${t===1?"hsl(":"hsla("}${oR(this.h)}, ${t2(this.s)*100}%, ${t2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oR(t){return t=(t||0)%360,t<0?t+360:t}function t2(t){return Math.max(0,Math.min(1,t||0))}function GE(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const kO=t=>()=>t;function w5e(t,e){return function(r){return t+r*e}}function b5e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function C5e(t){return(t=+t)==1?IO:function(e,r){return r-e?b5e(e,r,t):kO(isNaN(e)?r:e)}}function IO(t,e){var r=e-t;return r?w5e(t,r):kO(isNaN(t)?e:t)}const lR=function t(e){var r=C5e(e);function n(a,s){var i=r((a=M5(a)).r,(s=M5(s)).r),o=r(a.g,s.g),l=r(a.b,s.b),u=IO(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Rd(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var P5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qE=new RegExp(P5.source,"g");function E5e(t){return function(){return t}}function _5e(t){return function(e){return t(e)+""}}function S5e(t,e){var r=P5.lastIndex=qE.lastIndex=0,n,a,s,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=P5.exec(t))&&(a=qE.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,l.push({i,x:Rd(n,a)})),r=qE.lastIndex;return r<e.length&&(s=e.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?_5e(l[0].x):E5e(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var cR=180/Math.PI,j5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function FO(t,e,r,n,a,s){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*cR,skewX:Math.atan(l)*cR,scaleX:i,scaleY:o}}var r2;function T5e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?j5:FO(e.a,e.b,e.c,e.d,e.e,e.f)}function B5e(t){return t==null||(r2||(r2=document.createElementNS("http://www.w3.org/2000/svg","g")),r2.setAttribute("transform",t),!(t=r2.transform.baseVal.consolidate()))?j5:(t=t.matrix,FO(t.a,t.b,t.c,t.d,t.e,t.f))}function DO(t,e,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push("translate(",null,e,null,r);b.push({i:y-4,x:Rd(u,h)},{i:y-2,x:Rd(d,m)})}else(h||m)&&g.push("translate("+h+e+m+r)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(a(h)+"rotate(",null,n)-2,x:Rd(u,d)})):d&&h.push(a(h)+"rotate("+d+n)}function o(u,d,h,m){u!==d?m.push({i:h.push(a(h)+"skewX(",null,n)-2,x:Rd(u,d)}):d&&h.push(a(h)+"skewX("+d+n)}function l(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push(a(g)+"scale(",null,",",null,")");b.push({i:y-4,x:Rd(u,h)},{i:y-2,x:Rd(d,m)})}else(h!==1||m!==1)&&g.push(a(g)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(g){for(var b=-1,y=m.length,E;++b<y;)h[(E=m[b]).i]=E.x(g);return h.join("")}}}var N5e=DO(T5e,"px, ","px)","deg)"),k5e=DO(B5e,", ",")",")"),I5e=1e-12;function uR(t){return((t=Math.exp(t))+1/t)/2}function F5e(t){return((t=Math.exp(t))-1/t)/2}function D5e(t){return((t=Math.exp(2*t))-1)/(t+1)}const R5e=function t(e,r,n){function a(s,i){var o=s[0],l=s[1],u=s[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,y=g*g+b*b,E,B;if(y<I5e)B=Math.log(m/u)/e,E=function(C){return[o+C*g,l+C*b,u*Math.exp(e*C*B)]};else{var k=Math.sqrt(y),F=(m*m-u*u+n*y)/(2*u*r*k),U=(m*m-u*u-n*y)/(2*m*r*k),P=Math.log(Math.sqrt(F*F+1)-F),D=Math.log(Math.sqrt(U*U+1)-U);B=(D-P)/e,E=function(C){var S=C*B,N=uR(P),H=u/(r*k)*(N*D5e(e*S+P)-F5e(P));return[o+H*g,l+H*b,u*N/uR(e*S+P)]}}return E.duration=B*1e3*e/Math.SQRT2,E}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,l=o*o;return t(i,o,l)},a}(Math.SQRT2,2,4);var Um=0,bg=0,Zp=0,RO=1e3,Uy,Cg,My=0,Ih=0,rb=0,Tx=typeof performance=="object"&&performance.now?performance:Date,LO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mT(){return Ih||(LO(L5e),Ih=Tx.now()+rb)}function L5e(){Ih=0}function Py(){this._call=this._time=this._next=null}Py.prototype=UO.prototype={constructor:Py,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?mT():+r)+(e==null?0:+e),!this._next&&Cg!==this&&(Cg?Cg._next=this:Uy=this,Cg=this),this._call=t,this._time=r,O5()},stop:function(){this._call&&(this._call=null,this._time=1/0,O5())}};function UO(t,e,r){var n=new Py;return n.restart(t,e,r),n}function U5e(){mT(),++Um;for(var t=Uy,e;t;)(e=Ih-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Um}function AR(){Ih=(My=Tx.now())+rb,Um=bg=0;try{U5e()}finally{Um=0,P5e(),Ih=0}}function M5e(){var t=Tx.now(),e=t-My;e>RO&&(rb-=e,My=t)}function P5e(){for(var t,e=Uy,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Uy=r);Cg=t,O5(n)}function O5(t){if(!Um){bg&&(bg=clearTimeout(bg));var e=t-Ih;e>24?(t<1/0&&(bg=setTimeout(AR,t-Tx.now()-rb)),Zp&&(Zp=clearInterval(Zp))):(Zp||(My=Tx.now(),Zp=setInterval(M5e,RO)),Um=1,LO(AR))}}function dR(t,e,r){var n=new Py;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var j5e=eb("start","end","cancel","interrupt"),O5e=[],MO=0,fR=1,Q5=2,I2=3,hR=4,H5=5,F2=6;function nb(t,e,r,n,a,s){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Q5e(t,r,{name:e,index:n,group:a,on:j5e,tween:O5e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:MO})}function pT(t,e){var r=Mc(t,e);if(r.state>MO)throw new Error("too late; already scheduled");return r}function ju(t,e){var r=Mc(t,e);if(r.state>I2)throw new Error("too late; already running");return r}function Mc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Q5e(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=UO(s,0,r.time);function s(u){r.state=fR,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,h,m,g;if(r.state!==fR)return l();for(d in n)if(g=n[d],g.name===r.name){if(g.state===I2)return dR(i);g.state===hR?(g.state=F2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[d]):+d<e&&(g.state=F2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[d])}if(dR(function(){r.state===I2&&(r.state=hR,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=Q5,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Q5){for(r.state=I2,a=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=g);a.length=h+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=H5,1),h=-1,m=a.length;++h<m;)a[h].call(t,d);r.state===H5&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=F2,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function D2(t,e){var r=t.__transition,n,a,s=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){s=!1;continue}a=n.state>Q5&&n.state<H5,n.state=F2,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}s&&delete t.__transition}}function H5e(t){return this.each(function(){D2(this,t)})}function V5e(t,e){var r,n;return function(){var a=ju(this,t),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function z5e(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=ju(this,t),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:e,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=o;break}l===u&&a.push(o)}s.tween=a}}function G5e(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Mc(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?V5e:z5e)(r,t,e))}function gT(t,e,r){var n=t._id;return t.each(function(){var a=ju(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Mc(a,n).value[e]}}function PO(t,e){var r;return(typeof e=="number"?Rd:e instanceof Sx?lR:(r=Sx(e))?(e=r,lR):S5e)(t,e)}function q5e(t){return function(){this.removeAttribute(t)}}function K5e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function W5e(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttribute(t);return i===a?null:i===n?s:s=e(n=i,r)}}function $5e(t,e,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?s:s=e(n=i,r)}}function X5e(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function Y5e(t,e,r){var n,a,s;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o)))}}function J5e(t,e){var r=tb(t),n=r==="transform"?k5e:PO;return this.attrTween(t,typeof e=="function"?(r.local?Y5e:X5e)(r,n,gT(this,"attr."+t,e)):e==null?(r.local?K5e:q5e)(r):(r.local?$5e:W5e)(r,n,e))}function Z5e(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function eSe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function tSe(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&eSe(t,s)),r}return a._value=e,a}function rSe(t,e){var r,n;function a(){var s=e.apply(this,arguments);return s!==n&&(r=(n=s)&&Z5e(t,s)),r}return a._value=e,a}function nSe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=tb(t);return this.tween(r,(n.local?tSe:rSe)(n,e))}function aSe(t,e){return function(){pT(this,t).delay=+e.apply(this,arguments)}}function sSe(t,e){return e=+e,function(){pT(this,t).delay=e}}function iSe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?aSe:sSe)(e,t)):Mc(this.node(),e).delay}function oSe(t,e){return function(){ju(this,t).duration=+e.apply(this,arguments)}}function lSe(t,e){return e=+e,function(){ju(this,t).duration=e}}function cSe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oSe:lSe)(e,t)):Mc(this.node(),e).duration}function uSe(t,e){if(typeof e!="function")throw new Error;return function(){ju(this,t).ease=e}}function ASe(t){var e=this._id;return arguments.length?this.each(uSe(e,t)):Mc(this.node(),e).ease}function dSe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ju(this,t).ease=r}}function fSe(t){if(typeof t!="function")throw new Error;return this.each(dSe(this._id,t))}function hSe(t){typeof t!="function"&&(t=pO(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var s=e[a],i=s.length,o=n[a]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new UA(n,this._parents,this._name,this._id)}function mSe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var l=e[o],u=r[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||u[g])&&(h[g]=m);for(;o<n;++o)i[o]=e[o];return new UA(i,this._parents,this._name,this._id)}function pSe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function gSe(t,e,r){var n,a,s=pSe(e)?pT:ju;return function(){var i=s(this,t),o=i.on;o!==n&&(a=(n=o).copy()).on(e,r),i.on=a}}function xSe(t,e){var r=this._id;return arguments.length<2?Mc(this.node(),r).on.on(t):this.each(gSe(r,t,e))}function vSe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function ySe(){return this.on("end.remove",vSe(this._id))}function wSe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=dT(t));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],l=o.length,u=s[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,nb(u[m],e,r,m,u,Mc(d,r)));return new UA(s,this._parents,e,r)}function bSe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=mO(t));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=Mc(d,r),y=0,E=m.length;y<E;++y)(g=m[y])&&nb(g,e,r,y,m,b);s.push(m),i.push(d)}return new UA(s,i,e,r)}var CSe=a1.prototype.constructor;function ESe(){return new CSe(this._groups,this._parents)}function _Se(t,e){var r,n,a;return function(){var s=Lm(this,t),i=(this.style.removeProperty(t),Lm(this,t));return s===i?null:s===r&&i===n?a:a=e(r=s,n=i)}}function jO(t){return function(){this.style.removeProperty(t)}}function SSe(t,e,r){var n,a=r+"",s;return function(){var i=Lm(this,t);return i===a?null:i===n?s:s=e(n=i,r)}}function TSe(t,e,r){var n,a,s;return function(){var i=Lm(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Lm(this,t))),i===l?null:i===n&&l===a?s:(a=l,s=e(n=i,o))}}function BSe(t,e){var r,n,a,s="style."+e,i="end."+s,o;return function(){var l=ju(this,t),u=l.on,d=l.value[s]==null?o||(o=jO(e)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),l.on=n}}function NSe(t,e,r){var n=(t+="")=="transform"?N5e:PO;return e==null?this.styleTween(t,_Se(t,n)).on("end.style."+t,jO(t)):typeof e=="function"?this.styleTween(t,TSe(t,n,gT(this,"style."+t,e))).each(BSe(this._id,t)):this.styleTween(t,SSe(t,n,e),r).on("end.style."+t,null)}function kSe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function ISe(t,e,r){var n,a;function s(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&kSe(t,i,r)),n}return s._value=e,s}function FSe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,ISe(t,e,r??""))}function DSe(t){return function(){this.textContent=t}}function RSe(t){return function(){var e=t(this);this.textContent=e??""}}function LSe(t){return this.tween("text",typeof t=="function"?RSe(gT(this,"text",t)):DSe(t==null?"":t+""))}function USe(t){return function(e){this.textContent=t.call(this,e)}}function MSe(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&USe(a)),e}return n._value=t,n}function PSe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,MSe(t))}function jSe(){for(var t=this._name,e=this._id,r=OO(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Mc(l,e);nb(l,t,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new UA(n,this._parents,t,r)}function OSe(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},l={value:function(){--a===0&&s()}};r.each(function(){var u=ju(this,n),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),a===0&&s()})}var QSe=0;function UA(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function OO(){return++QSe}var xA=a1.prototype;UA.prototype={constructor:UA,select:wSe,selectAll:bSe,selectChild:xA.selectChild,selectChildren:xA.selectChildren,filter:hSe,merge:mSe,selection:ESe,transition:jSe,call:xA.call,nodes:xA.nodes,node:xA.node,size:xA.size,empty:xA.empty,each:xA.each,on:xSe,attr:J5e,attrTween:nSe,style:NSe,styleTween:FSe,text:LSe,textTween:PSe,remove:ySe,tween:G5e,delay:iSe,duration:cSe,ease:ASe,easeVarying:fSe,end:OSe,[Symbol.iterator]:xA[Symbol.iterator]};function HSe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var VSe={time:null,delay:0,duration:250,ease:HSe};function zSe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function GSe(t){var e,r;t instanceof UA?(e=t._id,t=t._name):(e=OO(),(r=VSe).time=mT(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,l,u=0;u<o;++u)(l=i[u])&&nb(l,t,e,u,i,r||zSe(l,e));return new UA(n,this._parents,t,e)}a1.prototype.interrupt=H5e;a1.prototype.transition=GSe;const n2=t=>()=>t;function qSe(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function CA(t,e,r){this.k=t,this.x=e,this.y=r}CA.prototype={constructor:CA,scale:function(t){return t===1?this:new CA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new CA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nf=new CA(1,0,0);CA.prototype;function KE(t){t.stopImmediatePropagation()}function eg(t){t.preventDefault(),t.stopImmediatePropagation()}function KSe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function WSe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function mR(){return this.__zoom||nf}function $Se(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function XSe(){return navigator.maxTouchPoints||"ontouchstart"in this}function YSe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],s=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function JSe(){var t=KSe,e=WSe,r=YSe,n=$Se,a=XSe,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=R5e,u=eb("start","zoom","end"),d,h,m,g=500,b=150,y=0,E=10;function B(z){z.property("__zoom",mR).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",H).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(z,ne,Z,ee){var ae=z.selection?z.selection():z;ae.property("__zoom",mR),z!==ae?P(z,ne,Z,ee):ae.interrupt().each(function(){D(this,arguments).event(ee).start().zoom(null,typeof ne=="function"?ne.apply(this,arguments):ne).end()})},B.scaleBy=function(z,ne,Z,ee){B.scaleTo(z,function(){var ae=this.__zoom.k,G=typeof ne=="function"?ne.apply(this,arguments):ne;return ae*G},Z,ee)},B.scaleTo=function(z,ne,Z,ee){B.transform(z,function(){var ae=e.apply(this,arguments),G=this.__zoom,K=Z==null?U(ae):typeof Z=="function"?Z.apply(this,arguments):Z,le=G.invert(K),O=typeof ne=="function"?ne.apply(this,arguments):ne;return r(F(k(G,O),K,le),ae,i)},Z,ee)},B.translateBy=function(z,ne,Z,ee){B.transform(z,function(){return r(this.__zoom.translate(typeof ne=="function"?ne.apply(this,arguments):ne,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),i)},null,ee)},B.translateTo=function(z,ne,Z,ee,ae){B.transform(z,function(){var G=e.apply(this,arguments),K=this.__zoom,le=ee==null?U(G):typeof ee=="function"?ee.apply(this,arguments):ee;return r(nf.translate(le[0],le[1]).scale(K.k).translate(typeof ne=="function"?-ne.apply(this,arguments):-ne,typeof Z=="function"?-Z.apply(this,arguments):-Z),G,i)},ee,ae)};function k(z,ne){return ne=Math.max(s[0],Math.min(s[1],ne)),ne===z.k?z:new CA(ne,z.x,z.y)}function F(z,ne,Z){var ee=ne[0]-Z[0]*z.k,ae=ne[1]-Z[1]*z.k;return ee===z.x&&ae===z.y?z:new CA(z.k,ee,ae)}function U(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function P(z,ne,Z,ee){z.on("start.zoom",function(){D(this,arguments).event(ee).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(ee).end()}).tween("zoom",function(){var ae=this,G=arguments,K=D(ae,G).event(ee),le=e.apply(ae,G),O=Z==null?U(le):typeof Z=="function"?Z.apply(ae,G):Z,W=Math.max(le[1][0]-le[0][0],le[1][1]-le[0][1]),Y=ae.__zoom,te=typeof ne=="function"?ne.apply(ae,G):ne,ce=l(Y.invert(O).concat(W/Y.k),te.invert(O).concat(W/te.k));return function(de){if(de===1)de=te;else{var me=ce(de),ge=W/me[2];de=new CA(ge,O[0]-me[0]*ge,O[1]-me[1]*ge)}K.zoom(null,de)}})}function D(z,ne,Z){return!Z&&z.__zooming||new C(z,ne)}function C(z,ne){this.that=z,this.args=ne,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,ne),this.taps=0}C.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,ne){return this.mouse&&z!=="mouse"&&(this.mouse[1]=ne.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=ne.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=ne.invert(this.touch1[0])),this.that.__zoom=ne,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var ne=Cc(this.that).datum();u.call(z,this.that,new qSe(z,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:u}),ne)}};function S(z,...ne){if(!t.apply(this,arguments))return;var Z=D(this,ne).event(z),ee=this.__zoom,ae=Math.max(s[0],Math.min(s[1],ee.k*Math.pow(2,n.apply(this,arguments)))),G=wu(z);if(Z.wheel)(Z.mouse[0][0]!==G[0]||Z.mouse[0][1]!==G[1])&&(Z.mouse[1]=ee.invert(Z.mouse[0]=G)),clearTimeout(Z.wheel);else{if(ee.k===ae)return;Z.mouse=[G,ee.invert(G)],D2(this),Z.start()}eg(z),Z.wheel=setTimeout(K,b),Z.zoom("mouse",r(F(k(ee,ae),Z.mouse[0],Z.mouse[1]),Z.extent,i));function K(){Z.wheel=null,Z.end()}}function N(z,...ne){if(m||!t.apply(this,arguments))return;var Z=z.currentTarget,ee=D(this,ne,!0).event(z),ae=Cc(z.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",W,!0),G=wu(z,Z),K=z.clientX,le=z.clientY;SO(z.view),KE(z),ee.mouse=[G,this.__zoom.invert(G)],D2(this),ee.start();function O(Y){if(eg(Y),!ee.moved){var te=Y.clientX-K,ce=Y.clientY-le;ee.moved=te*te+ce*ce>y}ee.event(Y).zoom("mouse",r(F(ee.that.__zoom,ee.mouse[0]=wu(Y,Z),ee.mouse[1]),ee.extent,i))}function W(Y){ae.on("mousemove.zoom mouseup.zoom",null),TO(Y.view,ee.moved),eg(Y),ee.event(Y).end()}}function H(z,...ne){if(t.apply(this,arguments)){var Z=this.__zoom,ee=wu(z.changedTouches?z.changedTouches[0]:z,this),ae=Z.invert(ee),G=Z.k*(z.shiftKey?.5:2),K=r(F(k(Z,G),ee,ae),e.apply(this,ne),i);eg(z),o>0?Cc(this).transition().duration(o).call(P,K,ee,z):Cc(this).call(B.transform,K,ee,z)}}function L(z,...ne){if(t.apply(this,arguments)){var Z=z.touches,ee=Z.length,ae=D(this,ne,z.changedTouches.length===ee).event(z),G,K,le,O;for(KE(z),K=0;K<ee;++K)le=Z[K],O=wu(le,this),O=[O,this.__zoom.invert(O),le.identifier],ae.touch0?!ae.touch1&&ae.touch0[2]!==O[2]&&(ae.touch1=O,ae.taps=0):(ae.touch0=O,G=!0,ae.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(ae.taps<2&&(h=O[0],d=setTimeout(function(){d=null},g)),D2(this),ae.start())}}function I(z,...ne){if(this.__zooming){var Z=D(this,ne).event(z),ee=z.changedTouches,ae=ee.length,G,K,le,O;for(eg(z),G=0;G<ae;++G)K=ee[G],le=wu(K,this),Z.touch0&&Z.touch0[2]===K.identifier?Z.touch0[0]=le:Z.touch1&&Z.touch1[2]===K.identifier&&(Z.touch1[0]=le);if(K=Z.that.__zoom,Z.touch1){var W=Z.touch0[0],Y=Z.touch0[1],te=Z.touch1[0],ce=Z.touch1[1],de=(de=te[0]-W[0])*de+(de=te[1]-W[1])*de,me=(me=ce[0]-Y[0])*me+(me=ce[1]-Y[1])*me;K=k(K,Math.sqrt(de/me)),le=[(W[0]+te[0])/2,(W[1]+te[1])/2],O=[(Y[0]+ce[0])/2,(Y[1]+ce[1])/2]}else if(Z.touch0)le=Z.touch0[0],O=Z.touch0[1];else return;Z.zoom("touch",r(F(K,le,O),Z.extent,i))}}function j(z,...ne){if(this.__zooming){var Z=D(this,ne).event(z),ee=z.changedTouches,ae=ee.length,G,K;for(KE(z),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),G=0;G<ae;++G)K=ee[G],Z.touch0&&Z.touch0[2]===K.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===K.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(K=wu(K,this),Math.hypot(h[0]-K[0],h[1]-K[1])<E)){var le=Cc(this).on("dblclick.zoom");le&&le.apply(this,arguments)}}}return B.wheelDelta=function(z){return arguments.length?(n=typeof z=="function"?z:n2(+z),B):n},B.filter=function(z){return arguments.length?(t=typeof z=="function"?z:n2(!!z),B):t},B.touchable=function(z){return arguments.length?(a=typeof z=="function"?z:n2(!!z),B):a},B.extent=function(z){return arguments.length?(e=typeof z=="function"?z:n2([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),B):e},B.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],B):[s[0],s[1]]},B.translateExtent=function(z){return arguments.length?(i[0][0]=+z[0][0],i[1][0]=+z[1][0],i[0][1]=+z[0][1],i[1][1]=+z[1][1],B):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},B.constrain=function(z){return arguments.length?(r=z,B):r},B.duration=function(z){return arguments.length?(o=+z,B):o},B.interpolate=function(z){return arguments.length?(l=z,B):l},B.on=function(){var z=u.on.apply(u,arguments);return z===u?B:z},B.clickDistance=function(z){return arguments.length?(y=(z=+z)*z,B):Math.sqrt(y)},B.tapDistance=function(z){return arguments.length?(E=+z,B):E},B}JR();const ab=J.createContext(null),ZSe=ab.Provider,MA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},QO=MA.error001();function Ia(t,e){const r=J.useContext(ab);if(r===null)throw new Error(QO);return fO(r,t,e)}const Zs=()=>{const t=J.useContext(ab);if(t===null)throw new Error(QO);return J.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},e4e=t=>t.userSelectionActive?"none":"all";function HO({position:t,children:e,className:r,style:n,...a}){const s=Ia(e4e),i=`${t}`.split("-");return At.createElement("div",{className:ao(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},e)}function t4e({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:At.createElement(HO,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},At.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const r4e=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=J.useRef(null),[m,g]=J.useState({x:0,y:0,width:0,height:0}),b=ao(["react-flow__edge-textwrapper",u]);return J.useEffect(()=>{if(h.current){const y=h.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:At.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},a&&At.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),At.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),l)};var n4e=J.memo(r4e);const xT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Mm=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),vT=(t={x:0,y:0},e)=>({x:Mm(t.x,e[0][0],e[1][0]),y:Mm(t.y,e[0][1],e[1][1])}),pR=(t,e,r)=>t<e?Mm(Math.abs(t-e),1,50)/50:t>r?-Mm(Math.abs(t-r),1,50)/50:0,VO=(t,e)=>{const r=pR(t.x,35,e.width-35)*20,n=pR(t.y,35,e.height-35)*20;return[r,n]},zO=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},a4e=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),yT=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),s4e=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),gR=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),V5=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},i4e=t=>Hl(t.width)&&Hl(t.height)&&Hl(t.x)&&Hl(t.y),Hl=t=>!isNaN(t)&&isFinite(t),Va=Symbol.for("internals"),GO=["Enter"," ","Escape"],o4e=(t,e)=>{},l4e=t=>"nativeEvent"in t;function z5(t){var a,s;const e=l4e(t)?t.nativeEvent:t,r=((s=(a=e.composedPath)==null?void 0:a.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const qO=t=>"clientX"in t,af=(t,e)=>{var s,i;const r=qO(t),n=r?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,a=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:a-((e==null?void 0:e.top)??0)}},jy=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},i1=({id:t,path:e,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>At.createElement(At.Fragment,null,At.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&At.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&Hl(r)&&Hl(n)?At.createElement(n4e,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);i1.displayName="BaseEdge";function tg(t,e,r){return r===void 0?r:n=>{const a=e().edges.find(s=>s.id===t);a&&r(n,{...a})}}function KO({sourceX:t,sourceY:e,targetX:r,targetY:n}){const a=Math.abs(r-t)/2,s=r<t?r+a:r-a,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[s,o,a,i]}function WO({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const l=t*.125+a*.375+i*.375+r*.125,u=e*.125+s*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Fh;(function(t){t.Strict="strict",t.Loose="loose"})(Fh||(Fh={}));var ch;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ch||(ch={}));var Bx;(function(t){t.Partial="partial",t.Full="full"})(Bx||(Bx={}));var Qd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Qd||(Qd={}));var Oy;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Oy||(Oy={}));var lr;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(lr||(lr={}));function xR({pos:t,x1:e,y1:r,x2:n,y2:a}){return t===lr.Left||t===lr.Right?[.5*(e+n),r]:[e,.5*(r+a)]}function $O({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top}){const[i,o]=xR({pos:r,x1:t,y1:e,x2:n,y2:a}),[l,u]=xR({pos:s,x1:n,y1:a,x2:t,y2:e}),[d,h,m,g]=WO({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${n},${a}`,d,h,m,g]}const wT=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=lr.Bottom,targetPosition:s=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[E,B,k]=$O({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return At.createElement(i1,{path:E,labelX:B,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});wT.displayName="SimpleBezierEdge";const vR={[lr.Left]:{x:-1,y:0},[lr.Right]:{x:1,y:0},[lr.Top]:{x:0,y:-1},[lr.Bottom]:{x:0,y:1}},c4e=({source:t,sourcePosition:e=lr.Bottom,target:r})=>e===lr.Left||e===lr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},yR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function u4e({source:t,sourcePosition:e=lr.Bottom,target:r,targetPosition:n=lr.Top,center:a,offset:s}){const i=vR[e],o=vR[n],l={x:t.x+i.x*s,y:t.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=c4e({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,y;const E={x:0,y:0},B={x:0,y:0},[k,F,U,P]=KO({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){b=a.x??k,y=a.y??F;const C=[{x:b,y:l.y},{x:b,y:u.y}],S=[{x:l.x,y},{x:u.x,y}];i[h]===m?g=h==="x"?C:S:g=h==="x"?S:C}else{const C=[{x:l.x,y:u.y}],S=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===m?S:C:g=i.y===m?C:S,e===n){const j=Math.abs(t[h]-r[h]);if(j<=s){const z=Math.min(s-1,s-j);i[h]===m?E[h]=(l[h]>t[h]?-1:1)*z:B[h]=(u[h]>r[h]?-1:1)*z}}if(e!==n){const j=h==="x"?"y":"x",z=i[h]===o[j],ne=l[j]>u[j],Z=l[j]<u[j];(i[h]===1&&(!z&&ne||z&&Z)||i[h]!==1&&(!z&&Z||z&&ne))&&(g=h==="x"?C:S)}const N={x:l.x+E.x,y:l.y+E.y},H={x:u.x+B.x,y:u.y+B.y},L=Math.max(Math.abs(N.x-g[0].x),Math.abs(H.x-g[0].x)),I=Math.max(Math.abs(N.y-g[0].y),Math.abs(H.y-g[0].y));L>=I?(b=(N.x+H.x)/2,y=g[0].y):(b=g[0].x,y=(N.y+H.y)/2)}return[[t,{x:l.x+E.x,y:l.y+E.y},...g,{x:u.x+B.x,y:u.y+B.y},r],b,y,U,P]}function A4e(t,e,r,n){const a=Math.min(yR(t,e)/2,yR(e,r)/2,n),{x:s,y:i}=e;if(t.x===s&&s===r.x||t.y===i&&i===r.y)return`L${s} ${i}`;if(t.y===i){const u=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${s},${i+a*l}Q ${s},${i} ${s+a*o},${i}`}function G5({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,g,b]=u4e({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:l},offset:u});return[d.reduce((E,B,k)=>{let F="";return k>0&&k<d.length-1?F=A4e(d[k-1],B,d[k+1],i):F=`${k===0?"M":"L"}${B.x} ${B.y}`,E+=F,E},""),h,m,g,b]}const sb=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=lr.Bottom,targetPosition:m=lr.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[B,k,F]=G5({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return At.createElement(i1,{path:B,labelX:k,labelY:F,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:E})});sb.displayName="SmoothStepEdge";const bT=J.memo(t=>{var e;return At.createElement(sb,{...t,pathOptions:J.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});bT.displayName="StepEdge";function d4e({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[a,s,i,o]=KO({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,a,s,i,o]}const CT=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,y,E]=d4e({sourceX:t,sourceY:e,targetX:r,targetY:n});return At.createElement(i1,{path:b,labelX:y,labelY:E,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});CT.displayName="StraightEdge";function a2(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function wR({pos:t,x1:e,y1:r,x2:n,y2:a,c:s}){switch(t){case lr.Left:return[e-a2(e-n,s),r];case lr.Right:return[e+a2(n-e,s),r];case lr.Top:return[e,r-a2(r-a,s)];case lr.Bottom:return[e,r+a2(a-r,s)]}}function XO({sourceX:t,sourceY:e,sourcePosition:r=lr.Bottom,targetX:n,targetY:a,targetPosition:s=lr.Top,curvature:i=.25}){const[o,l]=wR({pos:r,x1:t,y1:e,x2:n,y2:a,c:i}),[u,d]=wR({pos:s,x1:n,y1:a,x2:t,y2:e,c:i}),[h,m,g,b]=WO({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${n},${a}`,h,m,g,b]}const Qy=J.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=lr.Bottom,targetPosition:s=lr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[B,k,F]=XO({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:y==null?void 0:y.curvature});return At.createElement(i1,{path:B,labelX:k,labelY:F,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:E})});Qy.displayName="BezierEdge";const ET=J.createContext(null),f4e=ET.Provider;ET.Consumer;const h4e=()=>J.useContext(ET),m4e=t=>"id"in t&&"source"in t&&"target"in t,p4e=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,q5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,g4e=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),x4e=(t,e)=>{if(!t.source||!t.target)return e;let r;return m4e(t)?r={...t}:r={...t,id:p4e(t)},g4e(r,e)?e:e.concat(r)},K5=({x:t,y:e},[r,n,a],s,[i,o])=>{const l={x:(t-r)/a,y:(e-n)/a};return s?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},YO=({x:t,y:e},[r,n,a])=>({x:t*a+r,y:e*a+n}),vm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],a={x:t.position.x-r,y:t.position.y-n};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:a}},_T=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,a)=>{const{x:s,y:i}=vm(a,e).positionAbsolute;return a4e(n,yT({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return s4e(r)},JO=(t,e,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/a,y:(e.y-n)/a,width:e.width/a,height:e.height/a},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:y}=vm(d,o),E={x:y.x,y:y.y,width:h||0,height:m||0},B=V5(l,E),k=typeof h>"u"||typeof m>"u"||h===null||m===null,F=s&&B>0,U=(h||0)*(m||0);(k||F||B>=U||d.dragging)&&u.push(d)}),u},ZO=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},eQ=(t,e,r,n,a,s=.1)=>{const i=e/(t.width*(1+s)),o=r/(t.height*(1+s)),l=Math.min(i,o),u=Mm(l,n,a),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,g=r/2-h*u;return{x:m,y:g,zoom:u}},eh=(t,e=0)=>t.transition().duration(e);function bR(t,e,r,n){return(e[r]||[]).reduce((a,s)=>{var i,o;return`${t.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function v4e(t,e,r,n,a,s){const{x:i,y:o}=af(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=ST(void 0,u),E=u.getAttribute("data-handleid"),B=s({nodeId:b,id:E,type:y});if(B){const k=a.find(F=>F.nodeId===b&&F.type===y&&F.id===E);return{handle:{id:E,type:y,nodeId:b,x:(k==null?void 0:k.x)||r.x,y:(k==null?void 0:k.y)||r.y},validHandleResult:B}}}}let d=[],h=1/0;if(a.forEach(b=>{const y=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(y<=n){const E=s(b);y<=h&&(y<h?d=[{handle:b,validHandleResult:E}]:y===h&&d.push({handle:b,validHandleResult:E}),h=y)}}),!d.length)return{handle:null,validHandleResult:tQ()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||d[0]}const y4e={source:null,target:null,sourceHandle:null,targetHandle:null},tQ=()=>({handleDomNode:null,isValid:!1,connection:y4e,endHandle:null});function rQ(t,e,r,n,a,s,i){const o=a==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...tQ(),handleDomNode:l};if(l){const d=ST(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),y={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};u.connection=y,g&&b&&(e===Fh.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=s(y))}return u}function w4e({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((a,s)=>{if(s[Va]){const{handleBounds:i}=s[Va];let o=[],l=[];i&&(o=bR(s,i,"source",`${e}-${r}-${n}`),l=bR(s,i,"target",`${e}-${r}-${n}`)),a.push(...o,...l)}return a},[])}function ST(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function WE(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function b4e(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function nQ({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=zO(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:E,getNodes:B,cancelConnection:k}=s();let F=0,U;const{x:P,y:D}=af(t),C=d==null?void 0:d.elementFromPoint(P,D),S=ST(l,C),N=m==null?void 0:m.getBoundingClientRect();if(!N||!S)return;let H,L=af(t,N),I=!1,j=null,z=!1,ne=null;const Z=w4e({nodes:B(),nodeId:r,handleId:e,handleType:S}),ee=()=>{if(!g)return;const[K,le]=VO(L,N);E({x:K,y:le}),F=requestAnimationFrame(ee)};i({connectionPosition:L,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:r,handleId:e,type:S},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:S});function ae(K){const{transform:le}=s();L=af(K,N);const{handle:O,validHandleResult:W}=v4e(K,d,K5(L,le,!1,[1,1]),b,Z,Y=>rQ(Y,h,r,e,a?"target":"source",o,d));if(U=O,I||(ee(),I=!0),ne=W.handleDomNode,j=W.connection,z=W.isValid,i({connectionPosition:U&&z?YO({x:U.x,y:U.y},le):L,connectionStatus:b4e(!!U,z),connectionEndHandle:W.endHandle}),!U&&!z&&!ne)return WE(H);j.source!==j.target&&ne&&(WE(H),H=ne,ne.classList.add("connecting","react-flow__handle-connecting"),ne.classList.toggle("valid",z),ne.classList.toggle("react-flow__handle-valid",z))}function G(K){var le,O;(U||ne)&&j&&z&&(n==null||n(j)),(O=(le=s()).onConnectEnd)==null||O.call(le,K),l&&(u==null||u(K)),WE(H),k(),cancelAnimationFrame(F),I=!1,z=!1,j=null,ne=null,d.removeEventListener("mousemove",ae),d.removeEventListener("mouseup",G),d.removeEventListener("touchmove",ae),d.removeEventListener("touchend",G)}d.addEventListener("mousemove",ae),d.addEventListener("mouseup",G),d.addEventListener("touchmove",ae),d.addEventListener("touchend",G)}const CR=()=>!0,C4e=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),E4e=(t,e,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},aQ=J.forwardRef(({type:t="source",position:e=lr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},g)=>{var N,H;const b=i||null,y=t==="target",E=Zs(),B=h4e(),{connectOnClick:k,noPanClassName:F}=Ia(C4e,qi),{connecting:U,clickConnecting:P}=Ia(E4e(B,b,t),qi);B||(H=(N=E.getState()).onError)==null||H.call(N,"010",MA.error010());const D=L=>{const{defaultEdgeOptions:I,onConnect:j,hasDefaultEdges:z}=E.getState(),ne={...I,...L};if(z){const{edges:Z,setEdges:ee}=E.getState();ee(x4e(ne,Z))}j==null||j(ne),o==null||o(ne)},C=L=>{if(!B)return;const I=qO(L);a&&(I&&L.button===0||!I)&&nQ({event:L,handleId:b,nodeId:B,onConnect:D,isTarget:y,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||CR}),I?d==null||d(L):h==null||h(L)},S=L=>{const{onClickConnectStart:I,onClickConnectEnd:j,connectionClickStartHandle:z,connectionMode:ne,isValidConnection:Z}=E.getState();if(!B||!z&&!a)return;if(!z){I==null||I(L,{nodeId:B,handleId:b,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:B,type:t,handleId:b}});return}const ee=zO(L.target),ae=r||Z||CR,{connection:G,isValid:K}=rQ({nodeId:B,id:b,type:t},ne,z.nodeId,z.handleId||null,z.type,ae,ee);K&&D(G),j==null||j(L),E.setState({connectionClickStartHandle:null})};return At.createElement("div",{"data-handleid":b,"data-nodeid":B,"data-handlepos":e,"data-id":`${B}-${b}-${t}`,className:ao(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",F,u,{source:!y,target:y,connectable:n,connectablestart:a,connectableend:s,connecting:P,connectionindicator:n&&(a&&!U||s&&U)}]),onMouseDown:C,onTouchStart:C,onClick:k?S:void 0,ref:g,...m},l)});aQ.displayName="Handle";var Hy=J.memo(aQ);const sQ=({data:t,isConnectable:e,targetPosition:r=lr.Top,sourcePosition:n=lr.Bottom})=>At.createElement(At.Fragment,null,At.createElement(Hy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,At.createElement(Hy,{type:"source",position:n,isConnectable:e}));sQ.displayName="DefaultNode";var W5=J.memo(sQ);const iQ=({data:t,isConnectable:e,sourcePosition:r=lr.Bottom})=>At.createElement(At.Fragment,null,t==null?void 0:t.label,At.createElement(Hy,{type:"source",position:r,isConnectable:e}));iQ.displayName="InputNode";var oQ=J.memo(iQ);const lQ=({data:t,isConnectable:e,targetPosition:r=lr.Top})=>At.createElement(At.Fragment,null,At.createElement(Hy,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);lQ.displayName="OutputNode";var cQ=J.memo(lQ);const TT=()=>null;TT.displayName="GroupNode";const _4e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),s2=t=>t.id;function S4e(t,e){return qi(t.selectedNodes.map(s2),e.selectedNodes.map(s2))&&qi(t.selectedEdges.map(s2),e.selectedEdges.map(s2))}const uQ=J.memo(({onSelectionChange:t})=>{const e=Zs(),{selectedNodes:r,selectedEdges:n}=Ia(_4e,S4e);return J.useEffect(()=>{const a={nodes:r,edges:n};t==null||t(a),e.getState().onSelectionChange.forEach(s=>s(a))},[r,n,t]),null});uQ.displayName="SelectionListener";const T4e=t=>!!t.onSelectionChange;function B4e({onSelectionChange:t}){const e=Ia(T4e);return t||e?At.createElement(uQ,{onSelectionChange:t}):null}const N4e=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function F0(t,e){J.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function tn(t,e,r){J.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const k4e=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:E,nodeExtent:B,onNodesChange:k,onEdgesChange:F,elementsSelectable:U,connectionMode:P,snapGrid:D,snapToGrid:C,translateExtent:S,connectOnClick:N,defaultEdgeOptions:H,fitView:L,fitViewOptions:I,onNodesDelete:j,onEdgesDelete:z,onNodeDrag:ne,onNodeDragStart:Z,onNodeDragStop:ee,onSelectionDrag:ae,onSelectionDragStart:G,onSelectionDragStop:K,noPanClassName:le,nodeOrigin:O,rfId:W,autoPanOnConnect:Y,autoPanOnNodeDrag:te,onError:ce,connectionRadius:de,isValidConnection:me,nodeDragThreshold:ge})=>{const{setNodes:Se,setEdges:xe,setDefaultNodesAndEdges:ie,setMinZoom:Le,setMaxZoom:nt,setTranslateExtent:Ie,setNodeExtent:we,reset:je}=Ia(N4e,qi),et=Zs();return J.useEffect(()=>{const st=n==null?void 0:n.map(mt=>({...mt,...H}));return ie(r,st),()=>{je()}},[]),tn("defaultEdgeOptions",H,et.setState),tn("connectionMode",P,et.setState),tn("onConnect",a,et.setState),tn("onConnectStart",s,et.setState),tn("onConnectEnd",i,et.setState),tn("onClickConnectStart",o,et.setState),tn("onClickConnectEnd",l,et.setState),tn("nodesDraggable",u,et.setState),tn("nodesConnectable",d,et.setState),tn("nodesFocusable",h,et.setState),tn("edgesFocusable",m,et.setState),tn("edgesUpdatable",g,et.setState),tn("elementsSelectable",U,et.setState),tn("elevateNodesOnSelect",b,et.setState),tn("snapToGrid",C,et.setState),tn("snapGrid",D,et.setState),tn("onNodesChange",k,et.setState),tn("onEdgesChange",F,et.setState),tn("connectOnClick",N,et.setState),tn("fitViewOnInit",L,et.setState),tn("fitViewOnInitOptions",I,et.setState),tn("onNodesDelete",j,et.setState),tn("onEdgesDelete",z,et.setState),tn("onNodeDrag",ne,et.setState),tn("onNodeDragStart",Z,et.setState),tn("onNodeDragStop",ee,et.setState),tn("onSelectionDrag",ae,et.setState),tn("onSelectionDragStart",G,et.setState),tn("onSelectionDragStop",K,et.setState),tn("noPanClassName",le,et.setState),tn("nodeOrigin",O,et.setState),tn("rfId",W,et.setState),tn("autoPanOnConnect",Y,et.setState),tn("autoPanOnNodeDrag",te,et.setState),tn("onError",ce,et.setState),tn("connectionRadius",de,et.setState),tn("isValidConnection",me,et.setState),tn("nodeDragThreshold",ge,et.setState),F0(t,Se),F0(e,xe),F0(y,Le),F0(E,nt),F0(S,Ie),F0(B,we),null},ER={display:"none"},I4e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},AQ="react-flow__node-desc",dQ="react-flow__edge-desc",F4e="react-flow__aria-live",D4e=t=>t.ariaLiveMessage;function R4e({rfId:t}){const e=Ia(D4e);return At.createElement("div",{id:`${F4e}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:I4e},e)}function L4e({rfId:t,disableKeyboardA11y:e}){return At.createElement(At.Fragment,null,At.createElement("div",{id:`${AQ}-${t}`,style:ER},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),At.createElement("div",{id:`${dQ}-${t}`,style:ER},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&At.createElement(R4e,{rfId:t}))}var Nx=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=J.useState(!1),a=J.useRef(!1),s=J.useRef(new Set([])),[i,o]=J.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return J.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&z5(g))return!1;const y=SR(g.code,o);s.current.add(g[y]),_R(i,s.current,!1)&&(g.preventDefault(),n(!0))},h=g=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&z5(g))return!1;const y=SR(g.code,o);_R(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(g[y]),g.key==="Meta"&&s.current.clear(),a.current=!1},m=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,n]),r};function _R(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(a=>e.has(a)))}function SR(t,e){return e.includes(t)?"code":"key"}function fQ(t,e,r,n){var o,l;const a=t.parentNode||t.parentId;if(!a)return r;const s=e.get(a),i=vm(s,n);return fQ(s,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Va])==null?void 0:o.z)??0)>(r.z??0)?((l=s[Va])==null?void 0:l.z)??0:r.z??0},n)}function hQ(t,e,r){t.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:l}=fQ(n,t,{...n.position,z:((s=n[Va])==null?void 0:s.z)??0},e);n.positionAbsolute={x:i,y:o},n[Va].z=l,r!=null&&r[n.id]&&(n[Va].isParent=!0)}})}function $E(t,e,r,n){const a=new Map,s={},i=n?1e3:0;return t.forEach(o=>{var g;const l=(Hl(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(s[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Va,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[Va])==null?void 0:g.handleBounds,z:l}}),a.set(o.id,d)}),hQ(a,r,s),a}function mQ(t,e={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const b=r().filter(E=>{var k;const B=e.includeHiddenNodes?E.width&&E.height:!E.hidden;return(k=e.nodes)!=null&&k.length?B&&e.nodes.some(F=>F.id===E.id):B}),y=b.every(E=>E.width&&E.height);if(b.length>0&&y){const E=_T(b,h),{x:B,y:k,zoom:F}=eQ(E,n,a,e.minZoom??s,e.maxZoom??i,e.padding??.1),U=nf.translate(B,k).scale(F);return typeof e.duration=="number"&&e.duration>0?o.transform(eh(l,e.duration),U):o.transform(l,U),!0}}return!1}function U4e(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[Va]:n[Va],selected:r.selected})}),new Map(e)}function M4e(t,e){return e.map(r=>{const n=t.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function i2({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();t!=null&&t.length&&(l&&n({nodeInternals:U4e(t,a)}),i==null||i(t)),e!=null&&e.length&&(u&&n({edges:M4e(e,s)}),o==null||o(e))}const D0=()=>{},P4e={zoomIn:D0,zoomOut:D0,zoomTo:D0,getZoom:()=>1,setViewport:D0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:D0,fitBounds:D0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},j4e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),O4e=()=>{const t=Zs(),{d3Zoom:e,d3Selection:r}=Ia(j4e,qi);return J.useMemo(()=>r&&e?{zoomIn:a=>e.scaleBy(eh(r,a==null?void 0:a.duration),1.2),zoomOut:a=>e.scaleBy(eh(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>e.scaleTo(eh(r,s==null?void 0:s.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,s)=>{const[i,o,l]=t.getState().transform,u=nf.translate(a.x??i,a.y??o).scale(a.zoom??l);e.transform(eh(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>mQ(t.getState,a),setCenter:(a,s,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-a*d,m=l/2-s*d,g=nf.translate(h,m).scale(d);e.transform(eh(r,i==null?void 0:i.duration),g)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=eQ(a,i,o,l,u,(s==null?void 0:s.padding)??.1),g=nf.translate(d,h).scale(m);e.transform(eh(r,s==null?void 0:s.duration),g)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),K5(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return a;const{x:u,y:d}=l.getBoundingClientRect(),h={x:a.x-u,y:a.y-d};return K5(h,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:o,y:l}=i.getBoundingClientRect(),u=YO(a,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:P4e,[e,r])};function ib(){const t=O4e(),e=Zs(),r=J.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),n=J.useCallback(y=>e.getState().nodeInternals.get(y),[]),a=J.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(E=>({...E}))},[]),s=J.useCallback(y=>{const{edges:E=[]}=e.getState();return E.find(B=>B.id===y)},[]),i=J.useCallback(y=>{const{getNodes:E,setNodes:B,hasDefaultNodes:k,onNodesChange:F}=e.getState(),U=E(),P=typeof y=="function"?y(U):y;if(k)B(P);else if(F){const D=P.length===0?U.map(C=>({type:"remove",id:C.id})):P.map(C=>({item:C,type:"reset"}));F(D)}},[]),o=J.useCallback(y=>{const{edges:E=[],setEdges:B,hasDefaultEdges:k,onEdgesChange:F}=e.getState(),U=typeof y=="function"?y(E):y;if(k)B(U);else if(F){const P=U.length===0?E.map(D=>({type:"remove",id:D.id})):U.map(D=>({item:D,type:"reset"}));F(P)}},[]),l=J.useCallback(y=>{const E=Array.isArray(y)?y:[y],{getNodes:B,setNodes:k,hasDefaultNodes:F,onNodesChange:U}=e.getState();if(F){const D=[...B(),...E];k(D)}else if(U){const P=E.map(D=>({item:D,type:"add"}));U(P)}},[]),u=J.useCallback(y=>{const E=Array.isArray(y)?y:[y],{edges:B=[],setEdges:k,hasDefaultEdges:F,onEdgesChange:U}=e.getState();if(F)k([...B,...E]);else if(U){const P=E.map(D=>({item:D,type:"add"}));U(P)}},[]),d=J.useCallback(()=>{const{getNodes:y,edges:E=[],transform:B}=e.getState(),[k,F,U]=B;return{nodes:y().map(P=>({...P})),edges:E.map(P=>({...P})),viewport:{x:k,y:F,zoom:U}}},[]),h=J.useCallback(({nodes:y,edges:E})=>{const{nodeInternals:B,getNodes:k,edges:F,hasDefaultNodes:U,hasDefaultEdges:P,onNodesDelete:D,onEdgesDelete:C,onNodesChange:S,onEdgesChange:N}=e.getState(),H=(y||[]).map(ne=>ne.id),L=(E||[]).map(ne=>ne.id),I=k().reduce((ne,Z)=>{const ee=Z.parentNode||Z.parentId,ae=!H.includes(Z.id)&&ee&&ne.find(K=>K.id===ee);return(typeof Z.deletable=="boolean"?Z.deletable:!0)&&(H.includes(Z.id)||ae)&&ne.push(Z),ne},[]),j=F.filter(ne=>typeof ne.deletable=="boolean"?ne.deletable:!0),z=j.filter(ne=>L.includes(ne.id));if(I||z){const ne=ZO(I,j),Z=[...z,...ne],ee=Z.reduce((ae,G)=>(ae.includes(G.id)||ae.push(G.id),ae),[]);if((P||U)&&(P&&e.setState({edges:F.filter(ae=>!ee.includes(ae.id))}),U&&(I.forEach(ae=>{B.delete(ae.id)}),e.setState({nodeInternals:new Map(B)}))),ee.length>0&&(C==null||C(Z),N&&N(ee.map(ae=>({id:ae,type:"remove"})))),I.length>0&&(D==null||D(I),S)){const ae=I.map(G=>({id:G.id,type:"remove"}));S(ae)}}},[]),m=J.useCallback(y=>{const E=i4e(y),B=E?null:e.getState().nodeInternals.get(y.id);return!E&&!B?[null,null,E]:[E?y:gR(B),B,E]},[]),g=J.useCallback((y,E=!0,B)=>{const[k,F,U]=m(y);return k?(B||e.getState().getNodes()).filter(P=>{if(!U&&(P.id===F.id||!P.positionAbsolute))return!1;const D=gR(P),C=V5(D,k);return E&&C>0||C>=k.width*k.height}):[]},[]),b=J.useCallback((y,E,B=!0)=>{const[k]=m(y);if(!k)return!1;const F=V5(k,E);return B&&F>0||F>=k.width*k.height},[]);return J.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,r,n,a,s,i,o,l,u,d,h,g,b])}const Q4e={actInsideInputWithModifier:!1};var H4e=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Zs(),{deleteElements:n}=ib(),a=Nx(t,Q4e),s=Nx(e);J.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),J.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function V4e(t){const e=Zs();J.useEffect(()=>{let r;const n=()=>{var s,i;if(!t.current)return;const a=xT(t.current);(a.height===0||a.width===0)&&((i=(s=e.getState()).onError)==null||i.call(s,"004",MA.error004())),e.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const BT={position:"absolute",width:"100%",height:"100%",top:0,left:0},z4e=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,o2=t=>({x:t.x,y:t.y,zoom:t.k}),R0=(t,e)=>t.target.closest(`.${e}`),TR=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),BR=t=>{const e=t.ctrlKey&&jy()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},G4e=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),q4e=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=ch.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:E,preventScrolling:B=!0,children:k,noWheelClassName:F,noPanClassName:U})=>{const P=J.useRef(),D=Zs(),C=J.useRef(!1),S=J.useRef(!1),N=J.useRef(null),H=J.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:I,d3ZoomHandler:j,userSelectionActive:z}=Ia(G4e,qi),ne=Nx(E),Z=J.useRef(0),ee=J.useRef(!1),ae=J.useRef();return V4e(N),J.useEffect(()=>{if(N.current){const G=N.current.getBoundingClientRect(),K=JSe().scaleExtent([b,y]).translateExtent(g),le=Cc(N.current).call(K),O=nf.translate(m.x,m.y).scale(Mm(m.zoom,b,y)),W=[[0,0],[G.width,G.height]],Y=K.constrain()(O,W,g);K.transform(le,Y),K.wheelDelta(BR),D.setState({d3Zoom:K,d3Selection:le,d3ZoomHandler:le.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:N.current.closest(".react-flow")})}},[]),J.useEffect(()=>{I&&L&&(i&&!ne&&!z?I.on("wheel.zoom",G=>{if(R0(G,F))return!1;G.preventDefault(),G.stopImmediatePropagation();const K=I.property("__zoom").k||1;if(G.ctrlKey&&s){const me=wu(G),ge=BR(G),Se=K*Math.pow(2,ge);L.scaleTo(I,Se,me,G);return}const le=G.deltaMode===1?20:1;let O=l===ch.Vertical?0:G.deltaX*le,W=l===ch.Horizontal?0:G.deltaY*le;!jy()&&G.shiftKey&&l!==ch.Vertical&&(O=G.deltaY*le,W=0),L.translateBy(I,-(O/K)*o,-(W/K)*o,{internal:!0});const Y=o2(I.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ce,onViewportChangeEnd:de}=D.getState();clearTimeout(ae.current),ee.current||(ee.current=!0,e==null||e(G,Y),te==null||te(Y)),ee.current&&(t==null||t(G,Y),ce==null||ce(Y),ae.current=setTimeout(()=>{r==null||r(G,Y),de==null||de(Y),ee.current=!1},150))},{passive:!1}):typeof j<"u"&&I.on("wheel.zoom",function(G,K){if(!B&&G.type==="wheel"&&!G.ctrlKey||R0(G,F))return null;G.preventDefault(),j.call(this,G,K)},{passive:!1}))},[z,i,l,I,L,j,ne,s,B,F,e,t,r]),J.useEffect(()=>{L&&L.on("start",G=>{var O,W;if(!G.sourceEvent||G.sourceEvent.internal)return null;Z.current=(O=G.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:K}=D.getState(),le=o2(G.transform);C.current=!0,H.current=le,((W=G.sourceEvent)==null?void 0:W.type)==="mousedown"&&D.setState({paneDragging:!0}),K==null||K(le),e==null||e(G.sourceEvent,le)})},[L,e]),J.useEffect(()=>{L&&(z&&!C.current?L.on("zoom",null):z||L.on("zoom",G=>{var le;const{onViewportChange:K}=D.getState();if(D.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),S.current=!!(n&&TR(h,Z.current??0)),(t||K)&&!((le=G.sourceEvent)!=null&&le.internal)){const O=o2(G.transform);K==null||K(O),t==null||t(G.sourceEvent,O)}}))},[z,L,t,h,n]),J.useEffect(()=>{L&&L.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:K}=D.getState();if(C.current=!1,D.setState({paneDragging:!1}),n&&TR(h,Z.current??0)&&!S.current&&n(G.sourceEvent),S.current=!1,(r||K)&&z4e(H.current,G.transform)){const le=o2(G.transform);H.current=le,clearTimeout(P.current),P.current=setTimeout(()=>{K==null||K(le),r==null||r(G.sourceEvent,le)},i?150:0)}})},[L,i,h,r,n]),J.useEffect(()=>{L&&L.filter(G=>{const K=ne||a,le=s&&G.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&G.button===1&&G.type==="mousedown"&&(R0(G,"react-flow__node")||R0(G,"react-flow__edge")))return!0;if(!h&&!K&&!i&&!u&&!s||z||!u&&G.type==="dblclick"||R0(G,F)&&G.type==="wheel"||R0(G,U)&&(G.type!=="wheel"||i&&G.type==="wheel"&&!ne)||!s&&G.ctrlKey&&G.type==="wheel"||!K&&!i&&!le&&G.type==="wheel"||!h&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(h)&&!h.includes(G.button)&&G.type==="mousedown")return!1;const O=Array.isArray(h)&&h.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&O})},[z,L,a,s,i,u,h,d,ne]),At.createElement("div",{className:"react-flow__renderer",ref:N,style:BT},k)},K4e=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function W4e(){const{userSelectionActive:t,userSelectionRect:e}=Ia(K4e,qi);return t&&e?At.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function NR(t,e){const r=e.parentNode||e.parentId,n=t.find(a=>a.id===r);if(n){const a=e.position.x+e.width-n.width,s=e.position.y+e.height-n.height;if(a>0||s>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function pQ(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,a)=>{const s=t.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&NR(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&NR(n,i);break}case"remove":return n}return n.push(i),n},r)}function gQ(t,e){return pQ(t,e)}function $4e(t,e){return pQ(t,e)}const Ld=(t,e)=>({id:t,type:"select",selected:e});function J0(t,e){return t.reduce((r,n)=>{const a=e.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(Ld(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(Ld(n.id,!1))),r},[])}const XE=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},X4e=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),xQ=J.memo(({isSelecting:t,selectionMode:e=Bx.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=J.useRef(null),g=Zs(),b=J.useRef(0),y=J.useRef(0),E=J.useRef(),{userSelectionActive:B,elementsSelectable:k,dragging:F}=Ia(X4e,qi),U=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},P=j=>{s==null||s(j),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=j=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){j.preventDefault();return}i==null||i(j)},C=o?j=>o(j):void 0,S=j=>{const{resetSelectedElements:z,domNode:ne}=g.getState();if(E.current=ne==null?void 0:ne.getBoundingClientRect(),!k||!t||j.button!==0||j.target!==m.current||!E.current)return;const{x:Z,y:ee}=af(j,E.current);z(),g.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ee,x:Z,y:ee}}),n==null||n(j)},N=j=>{const{userSelectionRect:z,nodeInternals:ne,edges:Z,transform:ee,onNodesChange:ae,onEdgesChange:G,nodeOrigin:K,getNodes:le}=g.getState();if(!t||!E.current||!z)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=af(j,E.current),W=z.startX??0,Y=z.startY??0,te={...z,x:O.x<W?O.x:W,y:O.y<Y?O.y:Y,width:Math.abs(O.x-W),height:Math.abs(O.y-Y)},ce=le(),de=JO(ne,te,ee,e===Bx.Partial,!0,K),me=ZO(de,Z).map(Se=>Se.id),ge=de.map(Se=>Se.id);if(b.current!==ge.length){b.current=ge.length;const Se=J0(ce,ge);Se.length&&(ae==null||ae(Se))}if(y.current!==me.length){y.current=me.length;const Se=J0(Z,me);Se.length&&(G==null||G(Se))}g.setState({userSelectionRect:te})},H=j=>{if(j.button!==0)return;const{userSelectionRect:z}=g.getState();!B&&z&&j.target===m.current&&(P==null||P(j)),g.setState({nodesSelectionActive:b.current>0}),U(),a==null||a(j)},L=j=>{B&&(g.setState({nodesSelectionActive:b.current>0}),a==null||a(j)),U()},I=k&&(t||B);return At.createElement("div",{className:ao(["react-flow__pane",{dragging:F,selection:t}]),onClick:I?void 0:XE(P,m),onContextMenu:XE(D,m),onWheel:XE(C,m),onMouseEnter:I?void 0:l,onMouseDown:I?S:void 0,onMouseMove:I?N:u,onMouseUp:I?H:void 0,onMouseLeave:I?L:d,ref:m,style:BT},h,At.createElement(W4e,null))});xQ.displayName="Pane";function vQ(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:vQ(n,e):!1}function kR(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Y4e(t,e,r,n){return Array.from(t.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!vQ(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function J4e(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function yQ(t,e,r,n,a=[0,0],s){const i=J4e(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:m,y:g}=vm(h,a).positionAbsolute;o=h&&Hl(m)&&Hl(g)&&Hl(h.width)&&Hl(h.height)?[[m+t.width*a[0],g+t.height*a[1]],[m+h.width-t.width+t.width*a[0],g+h.height-t.height+t.height*a[1]]]:o}else s==null||s("005",MA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:m,y:g}=vm(h,a).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=r.get(l);u=vm(h,a).positionAbsolute}const d=o&&o!=="parent"?vT(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function YE({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?n.find(a=>a.id===t):n[0],n]}const IR=(t,e,r,n)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const s=Array.from(a),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...xT(l)}})};function rg(t,e,r){return r===void 0?r:n=>{const a=e().nodeInternals.get(t);a&&r(n,{...a})}}function $5({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",MA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([t])}function Z4e(){const t=Zs();return J.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(l.x/a[0]):l.x,ySnapped:s?a[1]*Math.round(l.y/a[1]):l.y,...l}},[])}function JE(t){return(e,r,n)=>t==null?void 0:t(e,n)}function wQ({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=Zs(),[l,u]=J.useState(!1),d=J.useRef([]),h=J.useRef({x:null,y:null}),m=J.useRef(0),g=J.useRef(null),b=J.useRef({x:0,y:0}),y=J.useRef(null),E=J.useRef(!1),B=J.useRef(!1),k=J.useRef(!1),F=Z4e();return J.useEffect(()=>{if(t!=null&&t.current){const U=Cc(t.current),P=({x:S,y:N})=>{const{nodeInternals:H,onNodeDrag:L,onSelectionDrag:I,updateNodePositions:j,nodeExtent:z,snapGrid:ne,snapToGrid:Z,nodeOrigin:ee,onError:ae}=o.getState();h.current={x:S,y:N};let G=!1,K={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&z){const O=_T(d.current,ee);K=yT(O)}if(d.current=d.current.map(O=>{const W={x:S-O.distance.x,y:N-O.distance.y};Z&&(W.x=ne[0]*Math.round(W.x/ne[0]),W.y=ne[1]*Math.round(W.y/ne[1]));const Y=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];d.current.length>1&&z&&!O.extent&&(Y[0][0]=O.positionAbsolute.x-K.x+z[0][0],Y[1][0]=O.positionAbsolute.x+(O.width??0)-K.x2+z[1][0],Y[0][1]=O.positionAbsolute.y-K.y+z[0][1],Y[1][1]=O.positionAbsolute.y+(O.height??0)-K.y2+z[1][1]);const te=yQ(O,W,H,Y,ee,ae);return G=G||O.position.x!==te.position.x||O.position.y!==te.position.y,O.position=te.position,O.positionAbsolute=te.positionAbsolute,O}),!G)return;j(d.current,!0,!0),u(!0);const le=a?L:JE(I);if(le&&y.current){const[O,W]=YE({nodeId:a,dragItems:d.current,nodeInternals:H});le(y.current,O,W)}},D=()=>{if(!g.current)return;const[S,N]=VO(b.current,g.current);if(S!==0||N!==0){const{transform:H,panBy:L}=o.getState();h.current.x=(h.current.x??0)-S/H[2],h.current.y=(h.current.y??0)-N/H[2],L({x:S,y:N})&&P(h.current)}m.current=requestAnimationFrame(D)},C=S=>{var ee;const{nodeInternals:N,multiSelectionActive:H,nodesDraggable:L,unselectNodesAndEdges:I,onNodeDragStart:j,onSelectionDragStart:z}=o.getState();B.current=!0;const ne=a?j:JE(z);(!i||!s)&&!H&&a&&((ee=N.get(a))!=null&&ee.selected||I()),a&&s&&i&&$5({id:a,store:o,nodeRef:t});const Z=F(S);if(h.current=Z,d.current=Y4e(N,L,Z,a),ne&&d.current){const[ae,G]=YE({nodeId:a,dragItems:d.current,nodeInternals:N});ne(S.sourceEvent,ae,G)}};if(e)U.on(".drag",null);else{const S=l5e().on("start",N=>{const{domNode:H,nodeDragThreshold:L}=o.getState();L===0&&C(N),k.current=!1;const I=F(N);h.current=I,g.current=(H==null?void 0:H.getBoundingClientRect())||null,b.current=af(N.sourceEvent,g.current)}).on("drag",N=>{var j,z;const H=F(N),{autoPanOnNodeDrag:L,nodeDragThreshold:I}=o.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!E.current&&B.current&&L&&(E.current=!0,D()),!B.current){const ne=H.xSnapped-(((j=h==null?void 0:h.current)==null?void 0:j.x)??0),Z=H.ySnapped-(((z=h==null?void 0:h.current)==null?void 0:z.y)??0);Math.sqrt(ne*ne+Z*Z)>I&&C(N)}(h.current.x!==H.xSnapped||h.current.y!==H.ySnapped)&&d.current&&B.current&&(y.current=N.sourceEvent,b.current=af(N.sourceEvent,g.current),P(H))}}).on("end",N=>{if(!(!B.current||k.current)&&(u(!1),E.current=!1,B.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:H,nodeInternals:L,onNodeDragStop:I,onSelectionDragStop:j}=o.getState(),z=a?I:JE(j);if(H(d.current,!1,!1),z){const[ne,Z]=YE({nodeId:a,dragItems:d.current,nodeInternals:L});z(N.sourceEvent,ne,Z)}}}).filter(N=>{const H=N.target;return!N.button&&(!r||!kR(H,`.${r}`,t))&&(!n||kR(H,n,t))});return U.call(S),()=>{U.on(".drag",null)}}}},[t,e,r,n,s,o,a,i,F]),l}function bQ(){const t=Zs();return J.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=r.isShiftPressed?4:1,y=r.x*m*b,E=r.y*g*b,B=h.map(k=>{if(k.positionAbsolute){const F={x:k.positionAbsolute.x+y,y:k.positionAbsolute.y+E};o&&(F.x=l[0]*Math.round(F.x/l[0]),F.y=l[1]*Math.round(F.y/l[1]));const{positionAbsolute:U,position:P}=yQ(k,F,n,a,void 0,u);k.position=P,k.positionAbsolute=U}return k});s(B,!0,!1)},[])}const ym={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ng=t=>{const e=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:E,className:B,isDraggable:k,isSelectable:F,isConnectable:U,isFocusable:P,selectNodesOnDrag:D,sourcePosition:C,targetPosition:S,hidden:N,resizeObserver:H,dragHandle:L,zIndex:I,isParent:j,noDragClassName:z,noPanClassName:ne,initialized:Z,disableKeyboardA11y:ee,ariaLabel:ae,rfId:G,hasHandleBounds:K})=>{const le=Zs(),O=J.useRef(null),W=J.useRef(null),Y=J.useRef(C),te=J.useRef(S),ce=J.useRef(n),de=F||k||d||h||m||g,me=bQ(),ge=rg(r,le.getState,h),Se=rg(r,le.getState,m),xe=rg(r,le.getState,g),ie=rg(r,le.getState,b),Le=rg(r,le.getState,y),nt=je=>{const{nodeDragThreshold:et}=le.getState();if(F&&(!D||!k||et>0)&&$5({id:r,store:le,nodeRef:O}),d){const st=le.getState().nodeInternals.get(r);st&&d(je,{...st})}},Ie=je=>{if(!z5(je)&&!ee)if(GO.includes(je.key)&&F){const et=je.key==="Escape";$5({id:r,store:le,unselect:et,nodeRef:O})}else k&&u&&Object.prototype.hasOwnProperty.call(ym,je.key)&&(le.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),me({x:ym[je.key].x,y:ym[je.key].y,isShiftPressed:je.shiftKey}))};J.useEffect(()=>()=>{W.current&&(H==null||H.unobserve(W.current),W.current=null)},[]),J.useEffect(()=>{if(O.current&&!N){const je=O.current;(!Z||!K||W.current!==je)&&(W.current&&(H==null||H.unobserve(W.current)),H==null||H.observe(je),W.current=je)}},[N,Z,K]),J.useEffect(()=>{const je=ce.current!==n,et=Y.current!==C,st=te.current!==S;O.current&&(je||et||st)&&(je&&(ce.current=n),et&&(Y.current=C),st&&(te.current=S),le.getState().updateNodeDimensions([{id:r,nodeElement:O.current,forceUpdate:!0}]))},[r,n,C,S]);const we=wQ({nodeRef:O,disabled:N||!k,noDragClassName:z,handleSelector:L,nodeId:r,isSelectable:F,selectNodesOnDrag:D});return N?null:At.createElement("div",{className:ao(["react-flow__node",`react-flow__node-${n}`,{[ne]:k},B,{selected:u,selectable:F,parent:j,dragging:we}]),ref:O,style:{zIndex:I,transform:`translate(${o}px,${l}px)`,pointerEvents:de?"all":"none",visibility:Z?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ge,onMouseMove:Se,onMouseLeave:xe,onContextMenu:ie,onClick:nt,onDoubleClick:Le,onKeyDown:P?Ie:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":ee?void 0:`${AQ}-${G}`,"aria-label":ae},At.createElement(f4e,{value:r},At.createElement(t,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:U,sourcePosition:C,targetPosition:S,dragging:we,dragHandle:L,zIndex:I})))};return e.displayName="NodeWrapper",J.memo(e)};const eTe=t=>{const e=t.getNodes().filter(r=>r.selected);return{..._T(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function tTe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=Zs(),{width:a,height:s,x:i,y:o,transformString:l,userSelectionActive:u}=Ia(eTe,qi),d=bQ(),h=J.useRef(null);if(J.useEffect(()=>{var b;r||(b=h.current)==null||b.focus({preventScroll:!0})},[r]),wQ({nodeRef:h}),u||!a||!s)return null;const m=t?b=>{const y=n.getState().getNodes().filter(E=>E.selected);t(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(ym,b.key)&&d({x:ym[b.key].x,y:ym[b.key].y,isShiftPressed:b.shiftKey})};return At.createElement("div",{className:ao(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},At.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:g,style:{width:a,height:s,top:o,left:i}}))}var rTe=J.memo(tTe);const nTe=t=>t.nodesSelectionActive,CQ=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:k,elementsSelectable:F,zoomOnScroll:U,zoomOnPinch:P,panOnScroll:D,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:H,defaultViewport:L,translateExtent:I,minZoom:j,maxZoom:z,preventScrolling:ne,onSelectionContextMenu:Z,noWheelClassName:ee,noPanClassName:ae,disableKeyboardA11y:G})=>{const K=Ia(nTe),le=Nx(h),O=Nx(B),W=O||H,Y=O||D,te=le||m&&W!==!0;return H4e({deleteKeyCode:o,multiSelectionKeyCode:E}),At.createElement(q4e,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:F,zoomOnScroll:U,zoomOnPinch:P,panOnScroll:Y,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:N,panOnDrag:!le&&W,defaultViewport:L,translateExtent:I,minZoom:j,maxZoom:z,zoomActivationKeyCode:k,preventScrolling:ne,noWheelClassName:ee,noPanClassName:ae},At.createElement(xQ,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:W,isSelecting:!!te,selectionMode:g},t,K&&At.createElement(rTe,{onSelectionContextMenu:Z,noPanClassName:ae,disableKeyboardA11y:G})))};CQ.displayName="FlowRenderer";var aTe=J.memo(CQ);function sTe(t){return Ia(J.useCallback(r=>t?JO(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function iTe(t){const e={input:ng(t.input||oQ),default:ng(t.default||W5),output:ng(t.output||cQ),group:ng(t.group||TT)},r={},n=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=ng(t[s]||W5),a),r);return{...e,...n}}const oTe=({x:t,y:e,width:r,height:n,origin:a})=>!r||!n?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-r*a[0],y:e-n*a[1]},lTe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),EQ=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=Ia(lTe,qi),o=sTe(t.onlyRenderVisibleElements),l=J.useRef(),u=J.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(m)});return l.current=d,d},[]);return J.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),At.createElement("div",{className:"react-flow__nodes",style:BT},o.map(d=>{var P,D,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",MA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||a&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),E=!!(d.focusable||n&&typeof d.focusable>"u"),B=t.nodeExtent?vT(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(B==null?void 0:B.x)??0,F=(B==null?void 0:B.y)??0,U=oTe({x:k,y:F,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return At.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||lr.Bottom,targetPosition:d.targetPosition||lr.Top,hidden:d.hidden,xPos:k,yPos:F,xPosOrigin:U.x,yPosOrigin:U.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:E,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((P=d[Va])==null?void 0:P.z)??0,isParent:!!((D=d[Va])!=null&&D.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Va])!=null&&C.handleBounds)})}))};EQ.displayName="NodeRenderer";var cTe=J.memo(EQ);const uTe=(t,e,r)=>r===lr.Left?t-e:r===lr.Right?t+e:t,ATe=(t,e,r)=>r===lr.Top?t-e:r===lr.Bottom?t+e:t,FR="react-flow__edgeupdater",DR=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>At.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:ao([FR,`${FR}-${o}`]),cx:uTe(e,n,t),cy:ATe(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),dTe=()=>!0;var L0=t=>{const e=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:E,source:B,target:k,sourceX:F,sourceY:U,targetX:P,targetY:D,sourcePosition:C,targetPosition:S,elementsSelectable:N,hidden:H,sourceHandleId:L,targetHandleId:I,onContextMenu:j,onMouseEnter:z,onMouseMove:ne,onMouseLeave:Z,reconnectRadius:ee,onReconnect:ae,onReconnectStart:G,onReconnectEnd:K,markerEnd:le,markerStart:O,rfId:W,ariaLabel:Y,isFocusable:te,isReconnectable:ce,pathOptions:de,interactionWidth:me,disableKeyboardA11y:ge})=>{const Se=J.useRef(null),[xe,ie]=J.useState(!1),[Le,nt]=J.useState(!1),Ie=Zs(),we=J.useMemo(()=>`url('#${q5(O,W)}')`,[O,W]),je=J.useMemo(()=>`url('#${q5(le,W)}')`,[le,W]);if(H)return null;const et=xt=>{var In;const{edges:yr,addSelectedEdges:Jt,unselectNodesAndEdges:fn,multiSelectionActive:gr}=Ie.getState(),Ur=yr.find(Ir=>Ir.id===r);Ur&&(N&&(Ie.setState({nodesSelectionActive:!1}),Ur.selected&&gr?(fn({nodes:[],edges:[Ur]}),(In=Se.current)==null||In.blur()):Jt([r])),i&&i(xt,Ur))},st=tg(r,Ie.getState,o),mt=tg(r,Ie.getState,j),_t=tg(r,Ie.getState,z),ut=tg(r,Ie.getState,ne),Nt=tg(r,Ie.getState,Z),Qt=(xt,yr)=>{if(xt.button!==0)return;const{edges:Jt,isValidConnection:fn}=Ie.getState(),gr=yr?k:B,Ur=(yr?I:L)||null,In=yr?"target":"source",Ir=fn||dTe,us=yr,an=Jt.find(Pr=>Pr.id===r);nt(!0),G==null||G(xt,an,In);const na=Pr=>{nt(!1),K==null||K(Pr,an,In)};nQ({event:xt,handleId:Ur,nodeId:gr,onConnect:Pr=>ae==null?void 0:ae(an,Pr),isTarget:us,getState:Ie.getState,setState:Ie.setState,isValidConnection:Ir,edgeUpdaterType:In,onReconnectEnd:na})},Yt=xt=>Qt(xt,!0),kt=xt=>Qt(xt,!1),It=()=>ie(!0),Wt=()=>ie(!1),Dt=!N&&!i,Ft=xt=>{var yr;if(!ge&&GO.includes(xt.key)&&N){const{unselectNodesAndEdges:Jt,addSelectedEdges:fn,edges:gr}=Ie.getState();xt.key==="Escape"?((yr=Se.current)==null||yr.blur(),Jt({edges:[gr.find(In=>In.id===r)]})):fn([r])}};return At.createElement("g",{className:ao(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:l,animated:u,inactive:Dt,updating:xe}]),onClick:et,onDoubleClick:st,onContextMenu:mt,onMouseEnter:_t,onMouseMove:ut,onMouseLeave:Nt,onKeyDown:te?Ft:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Y===null?void 0:Y||`Edge from ${B} to ${k}`,"aria-describedby":te?`${dQ}-${W}`:void 0,ref:Se},!Le&&At.createElement(t,{id:r,source:B,target:k,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:s,style:E,sourceX:F,sourceY:U,targetX:P,targetY:D,sourcePosition:C,targetPosition:S,sourceHandleId:L,targetHandleId:I,markerStart:we,markerEnd:je,pathOptions:de,interactionWidth:me}),ce&&At.createElement(At.Fragment,null,(ce==="source"||ce===!0)&&At.createElement(DR,{position:C,centerX:F,centerY:U,radius:ee,onMouseDown:Yt,onMouseEnter:It,onMouseOut:Wt,type:"source"}),(ce==="target"||ce===!0)&&At.createElement(DR,{position:S,centerX:P,centerY:D,radius:ee,onMouseDown:kt,onMouseEnter:It,onMouseOut:Wt,type:"target"})))};return e.displayName="EdgeWrapper",J.memo(e)};function fTe(t){const e={default:L0(t.default||Qy),straight:L0(t.bezier||CT),step:L0(t.step||bT),smoothstep:L0(t.step||sb),simplebezier:L0(t.simplebezier||wT)},r={},n=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=L0(t[s]||Qy),a),r);return{...e,...n}}function RR(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,a=((r==null?void 0:r.y)||0)+e.y,s=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case lr.Top:return{x:n+s/2,y:a};case lr.Right:return{x:n+s,y:a+i/2};case lr.Bottom:return{x:n+s/2,y:a+i};case lr.Left:return{x:n,y:a+i/2}}}function LR(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const hTe=(t,e,r,n,a,s)=>{const i=RR(r,t,e),o=RR(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function mTe({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+a),y2:Math.max(t.y+n,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=yT({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function UR(t){var n,a,s,i,o;const e=((n=t==null?void 0:t[Va])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const pTe=[{level:0,isMaxLevel:!0,edges:[]}];function gTe(t,e,r=!1){let n=-1;const a=t.reduce((i,o)=>{var d,h;const l=Hl(o.zIndex);let u=l?o.zIndex:0;if(r){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((d=g==null?void 0:g[Va])==null?void 0:d.z)||0,((h=m==null?void 0:m[Va])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?y:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return s.length===0?pTe:s}function xTe(t,e,r){const n=Ia(J.useCallback(a=>t?a.edges.filter(s=>{const i=e.get(s.source),o=e.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&mTe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return gTe(n,e,r)}const vTe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),yTe=({color:t="none",strokeWidth:e=1})=>At.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MR={[Oy.Arrow]:vTe,[Oy.ArrowClosed]:yTe};function wTe(t){const e=Zs();return J.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(MR,t)?MR[t]:((s=(a=e.getState()).onError)==null||s.call(a,"009",MA.error009(t)),null)},[t])}const bTe=({id:t,type:e,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=wTe(e);return l?At.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},At.createElement(l,{color:r,strokeWidth:i})):null},CTe=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=q5(i,e);n.includes(o)||(a.push({id:o,color:i.color||t,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},_Q=({defaultColor:t,rfId:e})=>{const r=Ia(J.useCallback(CTe({defaultColor:t,rfId:e}),[t,e]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return At.createElement("defs",null,r.map(n=>At.createElement(bTe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};_Q.displayName="MarkerDefinitions";var ETe=J.memo(_Q);const _Te=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),SQ=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:E,disableKeyboardA11y:B})=>{const{edgesFocusable:k,edgesUpdatable:F,elementsSelectable:U,width:P,height:D,connectionMode:C,nodeInternals:S,onError:N}=Ia(_Te,qi),H=xTe(e,S,r);return P?At.createElement(At.Fragment,null,H.map(({level:L,edges:I,isMaxLevel:j})=>At.createElement("svg",{key:L,style:{zIndex:L},width:P,height:D,className:"react-flow__edges react-flow__container"},j&&At.createElement(ETe,{defaultColor:t,rfId:n}),At.createElement("g",null,I.map(z=>{const[ne,Z,ee]=UR(S.get(z.source)),[ae,G,K]=UR(S.get(z.target));if(!ee||!K)return null;let le=z.type||"default";a[le]||(N==null||N("011",MA.error011(le)),le="default");const O=a[le]||a.default,W=C===Fh.Strict?G.target:(G.target??[]).concat(G.source??[]),Y=LR(Z.source,z.sourceHandle),te=LR(W,z.targetHandle),ce=(Y==null?void 0:Y.position)||lr.Bottom,de=(te==null?void 0:te.position)||lr.Top,me=!!(z.focusable||k&&typeof z.focusable>"u"),ge=z.reconnectable||z.updatable,Se=typeof m<"u"&&(ge||F&&typeof ge>"u");if(!Y||!te)return N==null||N("008",MA.error008(Y,z)),null;const{sourceX:xe,sourceY:ie,targetX:Le,targetY:nt}=hTe(ne,Y,ce,ae,te,de);return At.createElement(O,{key:z.id,id:z.id,className:ao([z.className,s]),type:le,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:xe,sourceY:ie,targetX:Le,targetY:nt,sourcePosition:ce,targetPosition:de,elementsSelectable:U,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:n,ariaLabel:z.ariaLabel,isFocusable:me,isReconnectable:Se,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:B})})))),E):null};SQ.displayName="EdgeRenderer";var STe=J.memo(SQ);const TTe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function BTe({children:t}){const e=Ia(TTe);return At.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function NTe(t){const e=ib(),r=J.useRef(!1);J.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const kTe={[lr.Left]:lr.Right,[lr.Right]:lr.Left,[lr.Top]:lr.Bottom,[lr.Bottom]:lr.Top},TQ=({nodeId:t,handleType:e,style:r,type:n=Qd.Bezier,CustomComponent:a,connectionStatus:s})=>{var D,C,S;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Ia(J.useCallback(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),qi),h=(D=i==null?void 0:i[Va])==null?void 0:D.handleBounds;let m=h==null?void 0:h[e];if(d===Fh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(N=>N.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,y=g?g.y+g.height/2:i.height??0,E=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+b,B=(((S=i.positionAbsolute)==null?void 0:S.y)??0)+y,k=g==null?void 0:g.position,F=k?kTe[k]:null;if(!k||!F)return null;if(a)return At.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:g,fromX:E,fromY:B,toX:l,toY:u,fromPosition:k,toPosition:F,connectionStatus:s});let U="";const P={sourceX:E,sourceY:B,sourcePosition:k,targetX:l,targetY:u,targetPosition:F};return n===Qd.Bezier?[U]=XO(P):n===Qd.Step?[U]=G5({...P,borderRadius:0}):n===Qd.SmoothStep?[U]=G5(P):n===Qd.SimpleBezier?[U]=$O(P):U=`M${E},${B} ${l},${u}`,At.createElement("path",{d:U,fill:"none",className:"react-flow__connection-path",style:r})};TQ.displayName="ConnectionLine";const ITe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function FTe({containerStyle:t,style:e,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Ia(ITe,qi);return!(a&&s&&o&&i)?null:At.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},At.createElement("g",{className:ao(["react-flow__connection",u])},At.createElement(TQ,{nodeId:a,handleType:s,style:e,type:r,CustomComponent:n,connectionStatus:u})))}function PR(t,e){return J.useRef(null),Zs(),J.useMemo(()=>e(t),[t])}const BQ=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:E,connectionLineType:B,connectionLineStyle:k,connectionLineComponent:F,connectionLineContainerStyle:U,selectionKeyCode:P,selectionOnDrag:D,selectionMode:C,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:H,deleteKeyCode:L,onlyRenderVisibleElements:I,elementsSelectable:j,selectNodesOnDrag:z,defaultViewport:ne,translateExtent:Z,minZoom:ee,maxZoom:ae,preventScrolling:G,defaultMarkerColor:K,zoomOnScroll:le,zoomOnPinch:O,panOnScroll:W,panOnScrollSpeed:Y,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:de,onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Se,onPaneMouseLeave:xe,onPaneScroll:ie,onPaneContextMenu:Le,onEdgeContextMenu:nt,onEdgeMouseEnter:Ie,onEdgeMouseMove:we,onEdgeMouseLeave:je,onReconnect:et,onReconnectStart:st,onReconnectEnd:mt,reconnectRadius:_t,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:Qt,elevateEdgesOnSelect:Yt,disableKeyboardA11y:kt,nodeOrigin:It,nodeExtent:Wt,rfId:Dt})=>{const Ft=PR(t,iTe),xt=PR(e,fTe);return NTe(s),At.createElement(aTe,{onPaneClick:me,onPaneMouseEnter:ge,onPaneMouseMove:Se,onPaneMouseLeave:xe,onPaneContextMenu:Le,onPaneScroll:ie,deleteKeyCode:L,selectionKeyCode:P,selectionOnDrag:D,selectionMode:C,onSelectionStart:y,onSelectionEnd:E,multiSelectionKeyCode:S,panActivationKeyCode:N,zoomActivationKeyCode:H,elementsSelectable:j,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:le,zoomOnPinch:O,zoomOnDoubleClick:ce,panOnScroll:W,panOnScrollSpeed:Y,panOnScrollMode:te,panOnDrag:de,defaultViewport:ne,translateExtent:Z,minZoom:ee,maxZoom:ae,onSelectionContextMenu:b,preventScrolling:G,noDragClassName:ut,noWheelClassName:Nt,noPanClassName:Qt,disableKeyboardA11y:kt},At.createElement(BTe,null,At.createElement(STe,{edgeTypes:xt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:I,onEdgeContextMenu:nt,onEdgeMouseEnter:Ie,onEdgeMouseMove:we,onEdgeMouseLeave:je,onReconnect:et,onReconnectStart:st,onReconnectEnd:mt,reconnectRadius:_t,defaultMarkerColor:K,noPanClassName:Qt,elevateEdgesOnSelect:!!Yt,disableKeyboardA11y:kt,rfId:Dt},At.createElement(FTe,{style:k,type:B,component:F,containerStyle:U})),At.createElement("div",{className:"react-flow__edgelabel-renderer"}),At.createElement(cTe,{nodeTypes:Ft,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:z,onlyRenderVisibleElements:I,noPanClassName:Qt,noDragClassName:ut,disableKeyboardA11y:kt,nodeOrigin:It,nodeExtent:Wt,rfId:Dt})))};BQ.displayName="GraphView";var DTe=J.memo(BQ);const X5=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],kd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:X5,nodeExtent:X5,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Fh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:o4e,isValidConnection:void 0},RTe=()=>yEe((t,e)=>({...kd,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=e();t({nodeInternals:$E(r,n,a,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?$E(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=r.reduce((y,E)=>{const B=a.get(E.id);if(B!=null&&B.hidden)a.set(B.id,{...B,[Va]:{...B[Va],handleBounds:void 0}});else if(B){const k=xT(E.nodeElement);!!(k.width&&k.height&&(B.width!==k.width||B.height!==k.height||E.forceUpdate))&&(a.set(B.id,{...B,[Va]:{...B[Va],handleBounds:{source:IR(".source",E.nodeElement,m,u),target:IR(".target",E.nodeElement,m,u)}},...k}),y.push({id:B.id,type:"dimensions",dimensions:k}))}return y},[]);hQ(a,u);const b=i||s&&!i&&mQ(e,{initial:!0,...o});t({nodeInternals:new Map(a),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:a};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(s){const u=gQ(r,o()),d=$E(u,a,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Ld(l,!0)):(i=J0(s(),r),o=J0(a,[])),i2({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=e();let i,o=null;n?i=r.map(l=>Ld(l,!0)):(i=J0(a,r),o=J0(s(),[])),i2({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=e(),i=r||s(),o=n||a,l=i.map(d=>(d.selected=!1,Ld(d.id,!1))),u=o.map(d=>Ld(d.id,!1));i2({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=e();n==null||n.scaleExtent([r,a]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=e();n==null||n.scaleExtent([a,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),s=n().filter(o=>o.selected).map(o=>Ld(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Ld(o.id,!1));i2({changedNodes:s,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(a=>{a.positionAbsolute=vT(a.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const u=nf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:kd.connectionNodeId,connectionHandleId:kd.connectionHandleId,connectionHandleType:kd.connectionHandleType,connectionStatus:kd.connectionStatus,connectionStartHandle:kd.connectionStartHandle,connectionEndHandle:kd.connectionEndHandle}),reset:()=>t({...kd})}),Object.is),NT=({children:t})=>{const e=J.useRef(null);return e.current||(e.current=RTe()),At.createElement(ZSe,{value:e.current},t)};NT.displayName="ReactFlowProvider";const NQ=({children:t})=>J.useContext(ab)?At.createElement(At.Fragment,null,t):At.createElement(NT,null,t);NQ.displayName="ReactFlowWrapper";const LTe={input:oQ,default:W5,output:cQ,group:TT},UTe={default:Qy,straight:CT,step:bT,smoothstep:sb,simplebezier:wT},MTe=[0,0],PTe=[15,15],jTe={x:0,y:0,zoom:1},OTe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},kQ=J.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=LTe,edgeTypes:i=UTe,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:B,onNodeMouseEnter:k,onNodeMouseMove:F,onNodeMouseLeave:U,onNodeContextMenu:P,onNodeDoubleClick:D,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:N,onNodesDelete:H,onEdgesDelete:L,onSelectionChange:I,onSelectionDragStart:j,onSelectionDrag:z,onSelectionDragStop:ne,onSelectionContextMenu:Z,onSelectionStart:ee,onSelectionEnd:ae,connectionMode:G=Fh.Strict,connectionLineType:K=Qd.Bezier,connectionLineStyle:le,connectionLineComponent:O,connectionLineContainerStyle:W,deleteKeyCode:Y="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ce=!1,selectionMode:de=Bx.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:ge=jy()?"Meta":"Control",zoomActivationKeyCode:Se=jy()?"Meta":"Control",snapToGrid:xe=!1,snapGrid:ie=PTe,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:nt=!0,nodesDraggable:Ie,nodesConnectable:we,nodesFocusable:je,nodeOrigin:et=MTe,edgesFocusable:st,edgesUpdatable:mt,elementsSelectable:_t,defaultViewport:ut=jTe,minZoom:Nt=.5,maxZoom:Qt=2,translateExtent:Yt=X5,preventScrolling:kt=!0,nodeExtent:It,defaultMarkerColor:Wt="#b1b1b7",zoomOnScroll:Dt=!0,zoomOnPinch:Ft=!0,panOnScroll:xt=!1,panOnScrollSpeed:yr=.5,panOnScrollMode:Jt=ch.Free,zoomOnDoubleClick:fn=!0,panOnDrag:gr=!0,onPaneClick:Ur,onPaneMouseEnter:In,onPaneMouseMove:Ir,onPaneMouseLeave:us,onPaneScroll:an,onPaneContextMenu:na,children:pa,onEdgeContextMenu:Pr,onEdgeDoubleClick:rr,onEdgeMouseEnter:zr,onEdgeMouseMove:As,onEdgeMouseLeave:Wn,onEdgeUpdate:ba,onEdgeUpdateStart:Ss,onEdgeUpdateEnd:Ht,onReconnect:hn,onReconnectStart:sn,onReconnectEnd:Fn,reconnectRadius:Mn=10,edgeUpdaterRadius:$n=10,onNodesChange:fe,onEdgesChange:Ne,noDragClassName:Ee="nodrag",noWheelClassName:_e="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:qe,connectOnClick:tt=!0,attributionPosition:He,proOptions:We,defaultEdgeOptions:Ye,elevateNodesOnSelect:yt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Pt=!1,autoPanOnConnect:Tt=!0,autoPanOnNodeDrag:Rt=!0,connectionRadius:Ar=20,isValidConnection:jr,onError:Or,style:Gr,id:Fa,nodeDragThreshold:mi,...Da},ds)=>{const qa=Fa||"1";return At.createElement("div",{...Da,style:{...Gr,...OTe},ref:ds,className:ao(["react-flow",a]),"data-testid":"rf__wrapper",id:Fa},At.createElement(NQ,null,At.createElement(DTe,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:F,onNodeMouseLeave:U,onNodeContextMenu:P,onNodeDoubleClick:D,nodeTypes:s,edgeTypes:i,connectionLineType:K,connectionLineStyle:le,connectionLineComponent:O,connectionLineContainerStyle:W,selectionKeyCode:te,selectionOnDrag:ce,selectionMode:de,deleteKeyCode:Y,multiSelectionKeyCode:ge,panActivationKeyCode:me,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Le,selectNodesOnDrag:nt,defaultViewport:ut,translateExtent:Yt,minZoom:Nt,maxZoom:Qt,preventScrolling:kt,zoomOnScroll:Dt,zoomOnPinch:Ft,zoomOnDoubleClick:fn,panOnScroll:xt,panOnScrollSpeed:yr,panOnScrollMode:Jt,panOnDrag:gr,onPaneClick:Ur,onPaneMouseEnter:In,onPaneMouseMove:Ir,onPaneMouseLeave:us,onPaneScroll:an,onPaneContextMenu:na,onSelectionContextMenu:Z,onSelectionStart:ee,onSelectionEnd:ae,onEdgeContextMenu:Pr,onEdgeDoubleClick:rr,onEdgeMouseEnter:zr,onEdgeMouseMove:As,onEdgeMouseLeave:Wn,onReconnect:hn??ba,onReconnectStart:sn??Ss,onReconnectEnd:Fn??Ht,reconnectRadius:Mn??$n,defaultMarkerColor:Wt,noDragClassName:Ee,noWheelClassName:_e,noPanClassName:Te,elevateEdgesOnSelect:Bt,rfId:qa,disableKeyboardA11y:Pt,nodeOrigin:et,nodeExtent:It}),At.createElement(k4e,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:B,nodesDraggable:Ie,nodesConnectable:we,nodesFocusable:je,edgesFocusable:st,edgesUpdatable:mt,elementsSelectable:_t,elevateNodesOnSelect:yt,minZoom:Nt,maxZoom:Qt,nodeExtent:It,onNodesChange:fe,onEdgesChange:Ne,snapToGrid:xe,snapGrid:ie,connectionMode:G,translateExtent:Yt,connectOnClick:tt,defaultEdgeOptions:Ye,fitView:ke,fitViewOptions:qe,onNodesDelete:H,onEdgesDelete:L,onNodeDragStart:C,onNodeDrag:S,onNodeDragStop:N,onSelectionDrag:z,onSelectionDragStart:j,onSelectionDragStop:ne,noPanClassName:Te,nodeOrigin:et,rfId:qa,autoPanOnConnect:Tt,autoPanOnNodeDrag:Rt,onError:Or,connectionRadius:Ar,isValidConnection:jr,nodeDragThreshold:mi}),At.createElement(B4e,{onSelectionChange:I}),pa,At.createElement(t4e,{proOptions:We,position:He}),At.createElement(L4e,{rfId:qa,disableKeyboardA11y:Pt})))});kQ.displayName="ReactFlow";function IQ(t){return e=>{const[r,n]=J.useState(e),a=J.useCallback(s=>n(i=>t(s,i)),[]);return[r,n,a]}}const QTe=IQ(gQ),HTe=IQ($4e);function VTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},At.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function zTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},At.createElement("path",{d:"M0 0h32v4.2H0z"}))}function GTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},At.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function qTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function KTe(){return At.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},At.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Eg=({children:t,className:e,...r})=>At.createElement("button",{type:"button",className:ao(["react-flow__controls-button",e]),...r},t);Eg.displayName="ControlButton";const WTe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),FQ=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=Zs(),[g,b]=J.useState(!1),{isInteractive:y,minZoomReached:E,maxZoomReached:B}=Ia(WTe,qi),{zoomIn:k,zoomOut:F,fitView:U}=ib();if(J.useEffect(()=>{b(!0)},[]),!g)return null;const P=()=>{k(),s==null||s()},D=()=>{F(),i==null||i()},C=()=>{U(a),o==null||o()},S=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return At.createElement(HO,{className:ao(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&At.createElement(At.Fragment,null,At.createElement(Eg,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},At.createElement(VTe,null)),At.createElement(Eg,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},At.createElement(zTe,null))),r&&At.createElement(Eg,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},At.createElement(GTe,null)),n&&At.createElement(Eg,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},y?At.createElement(KTe,null):At.createElement(qTe,null)),d)};FQ.displayName="Controls";var $Te=J.memo(FQ),kc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(kc||(kc={}));function XTe({color:t,dimensions:e,lineWidth:r}){return At.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function YTe({color:t,radius:e}){return At.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const JTe={[kc.Dots]:"#91919a",[kc.Lines]:"#eee",[kc.Cross]:"#e2e2e2"},ZTe={[kc.Dots]:1,[kc.Lines]:1,[kc.Cross]:6},eBe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function DQ({id:t,variant:e=kc.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:l}){const u=J.useRef(null),{transform:d,patternId:h}=Ia(eBe,qi),m=i||JTe[e],g=n||ZTe[e],b=e===kc.Dots,y=e===kc.Cross,E=Array.isArray(r)?r:[r,r],B=[E[0]*d[2]||1,E[1]*d[2]||1],k=g*d[2],F=y?[k,k]:B,U=b?[k/s,k/s]:[F[0]/s,F[1]/s];return At.createElement("svg",{className:ao(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},At.createElement("pattern",{id:h+t,x:d[0]%B[0],y:d[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${U[0]},-${U[1]})`},b?At.createElement(YTe,{color:m,radius:k/s}):At.createElement(XTe,{dimensions:F,color:m,lineWidth:a})),At.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}DQ.displayName="Background";var tBe=J.memo(DQ);function rBe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),e&&(n.href=e),a.href=t,a.href}const nBe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function sf(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let U0=null;function RQ(t={}){return U0||(t.includeStyleProperties?(U0=t.includeStyleProperties,U0):(U0=sf(window.getComputedStyle(document.documentElement)),U0))}function Vy(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function aBe(t){const e=Vy(t,"border-left-width"),r=Vy(t,"border-right-width");return t.clientWidth+e+r}function sBe(t){const e=Vy(t,"border-top-width"),r=Vy(t,"border-bottom-width");return t.clientHeight+e+r}function LQ(t,e={}){const r=e.width||aBe(t),n=e.height||sBe(t);return{width:r,height:n}}function iBe(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Wo=16384;function oBe(t){(t.width>Wo||t.height>Wo)&&(t.width>Wo&&t.height>Wo?t.width>t.height?(t.height*=Wo/t.width,t.width=Wo):(t.width*=Wo/t.height,t.height=Wo):t.width>Wo?(t.height*=Wo/t.width,t.width=Wo):(t.width*=Wo/t.height,t.height=Wo))}function zy(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function lBe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function cBe(t,e,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${e}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${e} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(t),lBe(a)}const To=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||To(r,e)};function uBe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function ABe(t,e){return RQ(e).map(r=>{const n=t.getPropertyValue(r),a=t.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function dBe(t,e,r,n){const a=`.${t}:${e}`,s=r.cssText?uBe(r):ABe(r,n);return document.createTextNode(`${a}{${s}}`)}function jR(t,e,r,n){const a=window.getComputedStyle(t,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=nBe();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(dBe(i,r,a,n)),e.appendChild(o)}function fBe(t,e,r){jR(t,e,":before",r),jR(t,e,":after",r)}const OR="application/font-woff",QR="image/jpeg",hBe={woff:OR,woff2:OR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:QR,jpeg:QR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function mBe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function kT(t){const e=mBe(t).toLowerCase();return hBe[e]||""}function pBe(t){return t.split(/,/)[1]}function Y5(t){return t.search(/^(data:)/)!==-1}function gBe(t,e){return`data:${e};base64,${t}`}async function UQ(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(a)})}const ZE={};function xBe(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function IT(t,e,r){const n=xBe(t,e,r.includeQueryParams);if(ZE[n]!=null)return ZE[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let a;try{const s=await UQ(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),pBe(o)));a=gBe(s,e)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return ZE[n]=a,a}async function vBe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):zy(e)}async function yBe(t,e){if(t.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,i==null||i.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return zy(o)}const r=t.poster,n=kT(r),a=await IT(r,n,e);return zy(a)}async function wBe(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await ob(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function bBe(t,e){return To(t,HTMLCanvasElement)?vBe(t):To(t,HTMLVideoElement)?yBe(t,e):To(t,HTMLIFrameElement)?wBe(t,e):t.cloneNode(MQ(t))}const CBe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",MQ=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function EBe(t,e,r){var n,a;if(MQ(e))return e;let s=[];return CBe(t)&&t.assignedNodes?s=sf(t.assignedNodes()):To(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?s=sf(t.contentDocument.body.childNodes):s=sf(((a=t.shadowRoot)!==null&&a!==void 0?a:t).childNodes),s.length===0||To(t,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>ob(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function _Be(t,e,r){const n=e.style;if(!n)return;const a=window.getComputedStyle(t);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):RQ(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),To(t,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function SBe(t,e){To(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),To(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function TBe(t,e){if(To(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(a=>t.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function BBe(t,e,r){return To(e,Element)&&(_Be(t,e,r),fBe(t,e,r),SBe(t,e),TBe(t,e)),e}async function NBe(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await ob(u,e,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let l=0;l<a.length;l++)o.appendChild(a[l]);t.appendChild(i)}return t}async function ob(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>bBe(n,e)).then(n=>EBe(t,n,e)).then(n=>BBe(t,n,e)).then(n=>NBe(n,e))}const PQ=/url\((['"]?)([^'"]+?)\1\)/g,kBe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,IBe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function FBe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function DBe(t){const e=[];return t.replace(PQ,(r,n,a)=>(e.push(a),r)),e.filter(r=>!Y5(r))}async function RBe(t,e,r,n,a){try{const s=r?rBe(e,r):e,i=kT(e);let o;return a||(o=await IT(s,i,n)),t.replace(FBe(e),`$1${o}$3`)}catch{}return t}function LBe(t,{preferredFontFormat:e}){return e?t.replace(IBe,r=>{for(;;){const[n,,a]=kBe.exec(r)||[];if(!a)return"";if(a===e)return`src: ${n};`}}):t}function jQ(t){return t.search(PQ)!==-1}async function OQ(t,e,r){if(!jQ(t))return t;const n=LBe(t,r);return DBe(n).reduce((s,i)=>s.then(o=>RBe(o,i,e,r)),Promise.resolve(n))}async function M0(t,e,r){var n;const a=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(a){const s=await OQ(a,null,r);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function UBe(t,e){await M0("background",t,e)||await M0("background-image",t,e),await M0("mask",t,e)||await M0("-webkit-mask",t,e)||await M0("mask-image",t,e)||await M0("-webkit-mask-image",t,e)}async function MBe(t,e){const r=To(t,HTMLImageElement);if(!(r&&!Y5(t.src))&&!(To(t,SVGImageElement)&&!Y5(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,a=await IT(n,kT(n),e);await new Promise((s,i)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=a):t.href.baseVal=a})}async function PBe(t,e){const n=sf(t.childNodes).map(a=>QQ(a,e));await Promise.all(n).then(()=>t)}async function QQ(t,e){To(t,Element)&&(await UBe(t,e),await MBe(t,e),await PBe(t,e))}function jBe(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),t}const HR={};async function VR(t){let e=HR[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},HR[t]=e,e}async function zR(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),UQ(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(s).then(()=>r)}function GR(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=s.exec(n);if(l===null){if(l=o.exec(n),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function OBe(t,e){const r=[],n=[];return t.forEach(a=>{if("cssRules"in a)try{sf(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const l=s.href,u=VR(l).then(d=>zR(d,e)).then(d=>GR(d).forEach(h=>{try{a.insertRule(h,h.startsWith("@import")?o+=1:a.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=t.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(VR(a.href).then(o=>zR(o,e)).then(o=>GR(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(t.forEach(a=>{if("cssRules"in a)try{sf(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function QBe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>jQ(e.style.getPropertyValue("src")))}async function HBe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=sf(t.ownerDocument.styleSheets),n=await OBe(r,e);return QBe(n)}function HQ(t){return t.trim().replace(/["']/g,"")}function VBe(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{e.add(HQ(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(t),e}async function zBe(t,e){const r=await HBe(t,e),n=VBe(t);return(await Promise.all(r.filter(s=>n.has(HQ(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return OQ(s.cssText,i,e)}))).join(`
`)}async function GBe(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await zBe(t,e);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function qBe(t,e={}){const{width:r,height:n}=LQ(t,e),a=await ob(t,e,!0);return await GBe(a,e),await QQ(a,e),jBe(a,e),await cBe(a,r,n)}async function KBe(t,e={}){const{width:r,height:n}=LQ(t,e),a=await qBe(t,e),s=await zy(a),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||iBe(),u=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=u*l,i.height=d*l,e.skipAutoScale||oBe(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function lb(t,e={}){return(await KBe(t,e)).toDataURL()}const qR="recursosAprendizaje_mindMaps_v2",WBe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 0h-4m4 4l-5-5"})}),$Be=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),XBe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),YBe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),J5=(t,e)=>t.children.length===0?e:t.children.reduce((r,n)=>r+J5(n,e),0),Z5=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,u,d)=>{const h=l*250;r.push({id:o.id,position:{x:h,y:u},data:{label:o.label},type:l===0?"input":"default",sourcePosition:lr.Right,targetPosition:lr.Left});const m=J5(o,80);let g=u-m/2;o.children.forEach(b=>{const y=J5(b,80),E=g+y/2;n.push({id:`e-${o.id}-${b.id}`,source:o.id,target:b.id,type:"smoothstep",animated:!0}),i(b,l+1,E),g+=y})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label},type:"input"});const i=250,o=450;t.children.forEach((l,u)=>{const d=u/t.children.length*2*Math.PI,h=i*Math.cos(d),m=i*Math.sin(d);r.push({id:l.id,position:{x:h,y:m},data:{label:l.label}}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),l.children.forEach((g,b)=>{const y=d+(b-(l.children.length-1)/2)*.2,E=h+o*.5*Math.cos(y),B=m+o*.5*Math.sin(y);r.push({id:g.id,position:{x:E,y:B},data:{label:g.label}}),n.push({id:`e-${l.id}-${g.id}`,source:l.id,target:g.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},VQ=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),t.children.map(o=>c.jsx(VQ,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:a+1},o.id))]})},JBe=({mapData:t,onBack:e,onSave:r})=>{const[n,a]=J.useState(t.treeData),[s,i]=J.useState("tree"),[o,l]=J.useState(!1),[u,d,h]=QTe([]),[m,g,b]=HTe([]),{fitView:y}=ib();J.useEffect(()=>{const{nodes:P,edges:D}=Z5(n,s);d(P),g(D),setTimeout(()=>y({duration:300}),50)},[n,s,d,g,y]);const E=(P,D)=>{const C=JSON.parse(JSON.stringify(n)),S=N=>N.id===P?(N.label=D,!0):N.children.some(S);S(C),a(C)},B=P=>{const D=JSON.parse(JSON.stringify(n)),C=S=>S.id===P?(S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):S.children.some(C);C(D),a(D)},k=P=>{const D=JSON.parse(JSON.stringify(n)),C=S=>{const N=S.children.findIndex(H=>H.id===P);return N!==-1?(S.children.splice(N,1),!0):S.children.some(C)};C(D),a(D)},F=()=>{l(!0);const{nodes:P,edges:D}=Z5(n,s);r({...t,treeData:n,nodes:P,edges:D}),setTimeout(()=>l(!1),1e3)},U=async P=>{const D=document.querySelector(".react-flow");D&&lb(D,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const S=document.createElement("a");S.download=`${t.tema}.png`,S.href=C,S.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:[c.jsxs(kQ,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,children:[c.jsx($Te,{}),c.jsx(tBe,{})]}),c.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:c.jsxs("button",{onClick:()=>{},className:"bg-white/80 backdrop-blur-sm dark:bg-slate-800/80 p-2 rounded-lg shadow border dark:border-slate-700 flex items-center gap-2 text-sm",children:[c.jsx(WBe,{})," Pantalla completa"]})})]}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx($Be,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(XBe,{})," Vista con tema central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(VQ,{node:n,onUpdate:E,onAddChild:B,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>U(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:F,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},ZBe=({onBack:t})=>{const[e,r]=J.useState("list"),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState(!1),[u,d]=J.useState(""),[h,m]=J.useState(""),[g,b]=J.useState("");J.useEffect(()=>{try{const P=localStorage.getItem(qR);P&&a(JSON.parse(P))}catch(P){console.error("Error loading mind maps",P)}},[]);const y=P=>{a(P),localStorage.setItem(qR,JSON.stringify(P))},E=async P=>{if(P.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const D=`Basado en el tema central "${u}", y considerando el contenido adicional "${g}", genera una estructura jerárquica detallada para un mapa mental con al menos 3 niveles de profundidad. La estructura debe ser un desglose lógico del tema en subtemas.

La respuesta DEBE ser un único objeto JSON válido. Cada nodo en el JSON debe tener las propiedades "id" (un string único generado con crypto.randomUUID()), "label" (el texto del nodo), y "children" (un array de nodos hijos con la misma estructura).`;try{const S=await new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:D,config:{responseMimeType:"application/json"}}),N=JSON.parse(S.text.trim()),{nodes:H,edges:L}=Z5(N),I={id:crypto.randomUUID(),tema:u,nivel:h,treeData:N,nodes:H,edges:L,createdAt:new Date().toISOString()};i(I),r("editor")}catch(C){console.error("AI Generation Error:",C),alert("Hubo un error al generar el mapa mental con la IA. Inténtelo de nuevo.")}finally{l(!1)}},B=P=>{const C=n.findIndex(S=>S.id===P.id)>-1?n.map(S=>S.id===P.id?P:S):[P,...n];y(C)},k=P=>{i(P),r("editor")},F=P=>{window.confirm("¿Eliminar este mapa mental?")&&y(n.filter(D=>D.id!==P))},U=()=>{switch(e){case"editor":return s?c.jsx(NT,{children:c.jsx(JBe,{mapData:s,onBack:()=>r("list"),onSave:B})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>r("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:u,onChange:P=>d(P.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:g,onChange:P=>b(P.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:o?c.jsx(YBe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>r("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(P=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:P.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(P.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>k(P),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>F(P.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),U()]})},eNe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),rNe=({onBack:t})=>{const[e,r]=J.useState("Media"),[n,a]=J.useState(10),[s,i]=J.useState(!1),[o,l]=J.useState(Array(10).fill("")),[u,d]=J.useState(""),[h,m]=J.useState(null),[g,b]=J.useState({ai:!1,puzzle:!1}),y=J.useRef(null);J.useEffect(()=>{l(D=>{const C=Array(n).fill("");for(let S=0;S<Math.min(D.length,n);S++)C[S]=D[S];return C})},[n]);const E=(D,C)=>{const S=[...o];S[D]=C,l(S)},B=async()=>{if(u.trim()){b(D=>({...D,ai:!0}));try{const D=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),C=`Genera una lista de ${n} palabras clave, en español, relacionadas con el tema "${u}". Las palabras no deben contener espacios ni caracteres especiales.`,S={type:or.OBJECT,properties:{palabras:{type:or.ARRAY,items:{type:or.STRING}}},required:["palabras"]},N=await D.models.generateContent({model:"gemini-2.5-flash",contents:C,config:{responseMimeType:"application/json",responseSchema:S}}),I=[...JSON.parse(N.text).palabras.map(j=>j.toUpperCase().replace(/\s/g,"")).slice(0,n)];for(;I.length<n;)I.push("");l(I)}catch(D){console.error("Error generating words with AI:",D),alert("No se pudieron generar las palabras. Inténtelo de nuevo.")}finally{b(D=>({...D,ai:!1}))}}},k=(D,C,S,N,H,L)=>{for(let I=0;I<D.length;I++){const j=S+I*H.y,z=N+I*H.x;if(j<0||j>=L||z<0||z>=L||C[j][z]&&C[j][z]!==D[I])return!1}return!0},F=(D,C,S,N,H)=>{for(let L=0;L<D.length;L++)C[S+L*H.y][N+L*H.x]=D[L]},U=()=>{b(D=>({...D,puzzle:!0})),m(null),setTimeout(()=>{const D=o.map(I=>I.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(D.length===0){alert("Por favor, ingrese al menos una palabra válida."),b(I=>({...I,puzzle:!1}));return}const C=Math.max(...D.map(I=>I.length));let S=Math.max(C,D.length)+2;e==="Media"&&(S+=3),e==="Difícil"&&(S+=5),S=Math.min(Math.max(S,10),25);const N=Array(S).fill(null).map(()=>Array(S).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];e!=="Fácil"&&H.push({x:1,y:-1}),e==="Difícil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const I of D.sort((j,z)=>z.length-j.length)){let j=!1;for(let z=0;z<100;z++){const ne=H[Math.floor(Math.random()*H.length)],Z=Math.floor(Math.random()*S),ee=Math.floor(Math.random()*S);if(k(I,N,Z,ee,ne,S)){F(I,N,Z,ee,ne),j=!0;break}}j||console.warn(`No se pudo colocar la palabra: ${I}`)}const L=N.map(I=>I.map(j=>j||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)]));m({grid:L,words:D.sort()}),b(I=>({...I,puzzle:!1}))},100)},P=()=>{y.current&&lb(y.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(D=>{const C=document.createElement("a");C.download="sopa-de-letras.png",C.href=D,C.click()}).catch(D=>{console.error("oops, something went wrong!",D),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!h&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:e,onChange:D=>r(D.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(D=>c.jsx("button",{onClick:()=>{a(D),i(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!s&&n===D?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:D},D)),c.jsx("button",{onClick:()=>i(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${s?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),s&&c.jsx("input",{type:"number",value:n,onChange:D=>a(parseInt(D.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:u,onChange:D=>d(D.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,disabled:g.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:g.ai?c.jsx(eNe,{}):c.jsxs(c.Fragment,{children:[c.jsx(tNe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:o.map((D,C)=>c.jsx("input",{type:"text",value:D,onChange:S=>E(C,S.target.value),placeholder:`Palabra ${C+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},C))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:U,disabled:g.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:g.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),h&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:y,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${h.grid.length}, minmax(0, 1fr))`},children:h.grid.flat().map((D,C)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:D},C))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:h.words.map(D=>c.jsx("li",{children:D},D))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:P,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]})},KR="recursosAprendizaje_timelines",nNe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),aNe=({timeline:t,onSave:e,onBack:r})=>{const[n,a]=J.useState(t),s=J.useRef(null),i=(d,h,m)=>{a(g=>({...g,events:g.events.map(b=>b.id===d?{...b,[h]:m}:b)}))},o=()=>{const d={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},h=[...n.events,d].sort((m,g)=>parseInt(m.date)-parseInt(g.date));a(m=>({...m,events:h}))},l=d=>{a(h=>({...h,events:h.events.filter(m=>m.id!==d)}))},u=()=>{s.current&&lb(s.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(d=>{const h=document.createElement("a");h.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,h.href=d,h.click()}).catch(d=>{console.error("Error al generar la imagen:",d),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:s,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((d,h)=>parseInt(d.date)-parseInt(h.date)).map((d,h)=>{const m=h%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:m&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!m&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:d.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:d.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:d.description})]})})})]},d.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(d=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:d.date,onChange:h=>i(d.id,"date",h.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsx("textarea",{value:d.description,onChange:h=>i(d.id,"description",h.target.value),placeholder:"Descripción",rows:2,className:"w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>l(d.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},d.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:o,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:u,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},sNe=({onBack:t})=>{const[e,r]=J.useState("list"),[n,a]=J.useState([]),[s,i]=J.useState(null),[o,l]=J.useState(!1),[u,d]=J.useState(""),[h,m]=J.useState(""),[g,b]=J.useState("");J.useEffect(()=>{try{const F=localStorage.getItem(KR);F&&a(JSON.parse(F))}catch(F){console.error("Error al cargar líneas de tiempo",F)}},[]);const y=F=>{a(F),localStorage.setItem(KR,JSON.stringify(F))},E=async F=>{if(F.preventDefault(),!u.trim()){alert("El tema es obligatorio.");return}l(!0);const U=h&&g?`entre ${h} y ${g}`:h?`a partir de ${h}`:g?`hasta ${g}`:"",P=`Genera una línea de tiempo sobre el tema "${u}" ${U}. Crea entre 5 y 10 hitos clave ordenados cronológicamente. Para cada hito, proporciona una fecha o año, una descripción breve y un emoji representativo.`,D={type:or.OBJECT,properties:{events:{type:or.ARRAY,items:{type:or.OBJECT,properties:{date:{type:or.STRING},description:{type:or.STRING},icon:{type:or.STRING}},required:["date","description"]}}},required:["events"]};try{const S=await new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json",responseSchema:D}}),N=JSON.parse(S.text),H={id:crypto.randomUUID(),tema:u,fechaInicio:h,fechaFin:g,createdAt:new Date().toISOString(),events:N.events.map(L=>({...L,id:crypto.randomUUID()}))};i(H),r("editor")}catch(C){console.error("AI Generation Error:",C),alert("Hubo un error al generar la línea de tiempo. Inténtelo de nuevo.")}finally{l(!1)}},B=F=>{n.findIndex(P=>P.id===F.id)>-1?y(n.map(P=>P.id===F.id?F:P)):y([F,...n]),r("list"),i(null)},k=F=>{window.confirm("¿Eliminar esta línea de tiempo?")&&y(n.filter(U=>U.id!==F))};return e==="editor"&&s?c.jsx(aNe,{timeline:s,onSave:B,onBack:()=>r("list")}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:u,onChange:F=>d(F.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:h,onChange:F=>m(F.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:g,onChange:F=>b(F.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:o,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:o?c.jsx(nNe,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),n.length>0?n.map(F=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:F.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(F.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{i(F),r("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>k(F.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},F.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},zQ="recursos_crucigramas",iNe=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},oNe=t=>{const e=fr(Kt(Gt,zQ),Kn("fechaCreacion","desc"));return Yr(e,n=>{const a=n.docs.map(s=>iNe(s));t(a)},n=>{console.error("Error al suscribirse a los crucigramas:",n),t([])})},lNe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Br.fromDate(new Date)};return(await Js(Kt(Gt,zQ),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},cNe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),ANe=({onBack:t,currentUser:e})=>{const[r,n]=J.useState([]),[a,s]=J.useState(10),[i,o]=J.useState(!1),[l,u]=J.useState(Array(10).fill("")),[d,h]=J.useState(Array(10).fill("")),[m,g]=J.useState(""),[b,y]=J.useState(null),[E,B]=J.useState(!1),[k,F]=J.useState({ai:!1,puzzle:!1,data:!0}),U=J.useRef(null);J.useEffect(()=>{F(j=>({...j,data:!0}));const I=oNe(j=>{n(j),F(z=>({...z,data:!1}))});return()=>I()},[]),J.useEffect(()=>{const I=a;u(j=>Array.from({length:I},(z,ne)=>j[ne]||"")),h(j=>Array.from({length:I},(z,ne)=>j[ne]||""))},[a]);const P=(I,j)=>{const z=[...l];z[I]=j,u(z)},D=(I,j)=>{const z=[...d];z[I]=j,h(z)},C=async()=>{if(m.trim()){F(I=>({...I,ai:!0}));try{const z=new globalThis.GoogleGenerativeAI("").getGenerativeModel({model:"gemini-pro"}),ne=`Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}". Las palabras no deben contener espacios.`,ae=(await(await z.generateContent(ne)).response).text(),G=JSON.parse(ae),K=G.items.map(O=>O.word.toUpperCase().replace(/\s/g,"")),le=G.items.map(O=>O.clue);u(Array.from({length:a},(O,W)=>K[W]||"")),h(Array.from({length:a},(O,W)=>le[W]||""))}catch(I){console.error("Error generating words/clues with AI:",I),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{F(I=>({...I,ai:!1}))}}},S=J.useCallback(()=>{try{const I=l.map((Ie,we)=>({word:Ie.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[we]})).filter(Ie=>Ie.word.length>0);if(I.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;I.sort((Ie,we)=>we.word.length-Ie.word.length);const j=I[0].word.length,z=Math.max(j,I.length)*2;let ne=Array.from({length:z},()=>Array(z).fill(null));const Z=[],ee=I.shift(),ae=Math.floor(z/2),G=Math.floor((z-ee.word.length)/2);for(let Ie=0;Ie<ee.word.length;Ie++)ne[ae][G+Ie]=ee.word[Ie];Z.push({word:ee.word,clue:ee.clue,direction:"across",row:ae,col:G});for(const Ie of I){let we={score:-1,row:-1,col:-1,direction:"across"};for(const je of Z)for(let et=0;et<je.word.length;et++)for(let st=0;st<Ie.word.length;st++)if(je.word[et]===Ie.word[st]){let mt=0,_t,ut,Nt;je.direction==="across"?(Nt="down",_t=je.row-st,ut=je.col+et):(Nt="across",_t=je.row+et,ut=je.col-st);let Qt=!0;for(let Yt=0;Yt<Ie.word.length;Yt++){const kt=_t+(Nt==="down"?Yt:0),It=ut+(Nt==="across"?Yt:0);if(kt<0||kt>=z||It<0||It>=z){Qt=!1;break}const Wt=ne[kt][It],Dt=kt===je.row+(je.direction==="down"?et:0)&&It===je.col+(je.direction==="across"?et:0);if(Wt&&!Dt){Qt=!1;break}if(Wt&&Dt&&Wt!==Ie.word[st]){Qt=!1;break}if(!Dt){if(Nt==="across"&&(kt>0&&ne[kt-1][It]||kt<z-1&&ne[kt+1][It])){Qt=!1;break}if(Nt==="down"&&(It>0&&ne[kt][It-1]||It<z-1&&ne[kt][It+1])){Qt=!1;break}}Wt&&mt++}Qt&&mt>we.score&&(we={score:mt,row:_t,col:ut,direction:Nt})}if(we.score>-1){for(let je=0;je<Ie.word.length;je++){const et=we.row+(we.direction==="down"?je:0),st=we.col+(we.direction==="across"?je:0);ne[et][st]=Ie.word[je]}Z.push({word:Ie.word,clue:Ie.clue,direction:we.direction,row:we.row,col:we.col})}}let K=z,le=-1,O=z,W=-1;Z.forEach(Ie=>{K=Math.min(K,Ie.row),le=Math.max(le,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),O=Math.min(O,Ie.col),W=Math.max(W,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),le===-1&&(K=Z[0].row,le=Z[0].row,O=Z[0].col,W=Z[0].col+Z[0].word.length-1);const Y=1,te=Math.max(0,K-Y),ce=Math.min(z,le+1+Y),de=Math.max(0,O-Y),me=Math.min(z,W+1+Y),ge=ne.slice(te,ce).map(Ie=>Ie.slice(de,me)),Se=Z.map(Ie=>({...Ie,row:Ie.row-te,col:Ie.col-de})).sort((Ie,we)=>Ie.row-we.row||Ie.col-we.col);let xe=1;const ie=[],Le=new Map;Se.forEach(Ie=>{const we=`${Ie.row},${Ie.col}`;Le.has(we)||Le.set(we,xe++),ie.push({...Ie,number:Le.get(we)})});const nt=ge.map(Ie=>Ie.map(we=>({char:we,number:null})));return ie.forEach(Ie=>{const we=`${Ie.row},${Ie.col}`;nt[Ie.row]&&nt[Ie.row][Ie.col]!==void 0&&(nt[Ie.row][Ie.col].number=Le.get(we))}),{grid:nt,clues:{across:ie.filter(Ie=>Ie.direction==="across").sort((Ie,we)=>Ie.number-we.number),down:ie.filter(Ie=>Ie.direction==="down").sort((Ie,we)=>Ie.number-we.number)}}}catch(I){return console.error("Error generating crossword grid:",I),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),N=async()=>{F(j=>({...j,puzzle:!0})),y(null),await new Promise(j=>setTimeout(j,100));const I=S();if(I){const j={tema:m,grid:I.grid,clues:I.clues};try{const z=await lNe(j,e);y({...j,id:z,fechaCreacion:new Date().toISOString(),creadorId:e.id,creadorNombre:e.nombreCompleto})}catch(z){console.error("Error saving puzzle:",z),alert("No se pudo guardar el crucigrama en la base de datos.")}}F(j=>({...j,puzzle:!1}))},H=()=>{U.current&&(B(!1),setTimeout(()=>{lb(U.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(I=>{const j=document.createElement("a");j.download="crucigrama.png",j.href=I,j.click()}).catch(I=>console.error("Error generating image",I))},100))},L=()=>b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:U,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${b.grid[0].length}, 2rem)`},children:b.grid.flat().map((I,j)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:I.char?"white":"black"},children:[I.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:I.number}),E&&I.char&&c.jsx("span",{children:I.char})]},j))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.across.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.down.map(I=>c.jsxs("li",{children:[c.jsxs("strong",{children:[I.number,"."]})," ",I.clue]},`${I.word}-${I.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:E,onChange:()=>B(!E),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:H,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):null;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),b?L():c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(I=>c.jsx("button",{onClick:()=>{s(I),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===I?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:I},I)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:a,onChange:I=>s(parseInt(I.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:I=>g(I.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:C,disabled:k.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:k.ai?c.jsx(cNe,{}):c.jsxs(c.Fragment,{children:[c.jsx(uNe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((I,j)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[j],onChange:z=>P(j,z.target.value),placeholder:`Palabra ${j+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:d[j],onChange:z=>D(j,z.target.value),placeholder:`Pista ${j+1}`,rows:1,className:"md:col-span-2 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]},j))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:N,disabled:k.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:k.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},dNe=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],fNe=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),hNe=()=>{const[t,e]=J.useState("menu"),r=()=>t==="mapasMentales"?c.jsx(ZBe,{onBack:()=>e("menu")}):t==="sopaDeLetras"?c.jsx(rNe,{onBack:()=>e("menu")}):t==="lineasDeTiempo"?c.jsx(sNe,{onBack:()=>e("menu")}):t==="crucigramas"?c.jsx(ANe,{onBack:()=>e("menu")}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:dNe.map(n=>c.jsx(fNe,{recurso:n,onClick:()=>e(n.id)},n.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},mNe="evaluaciones_formativas",pNe="calificaciones_formativas",GQ="trabajos_grupales_formativos",qQ=t=>{var r,n,a,s;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((s=(a=e.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||e.fechaPresentacion}},gNe=(t,e)=>{const r=fr(Kt(Gt,mNe),ta("curso","==",t));return Yr(r,n=>{e(n.docs.map(a=>qQ(a)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},xNe=t=>{const e=fr(Kt(Gt,pNe));return Yr(e,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},vNe=(t,e)=>{const r=fr(Kt(Gt,GQ),ta("curso","==",t));return Yr(r,n=>{e(n.docs.map(a=>qQ(a)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},yNe=async t=>{try{const{id:e,...r}=t,n=Lr(Gt,GQ,e);await il(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},wNe=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState({}),[s,i]=J.useState([]),[o,l]=J.useState(!0),[u,d]=J.useState(null),[h,m]=J.useState(!1),[g,b]=J.useState(null),y=J.useRef(null);J.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const U=gNe(t.curso,r),P=xNe(a),D=vNe(t.curso,C=>{i(C),l(!1)});return()=>{U(),P(),D()}},[t.curso]);const E=J.useMemo(()=>{if(!t.curso)return[];const P=e.filter(D=>D.curso===t.curso).reduce((D,C)=>((D[C.asignatura]=D[C.asignatura]||[]).push(C),D),{});return Object.entries(P).map(([D,C])=>{let S=0,N=0;const H=C.map(I=>{var ne;const j=(ne=n[I.id])==null?void 0:ne[t.nombreCompleto];let z="No Trabajado";return j==="trabajado"?(S+=7,N++,z="Trabajado"):j==="no trabajado"&&(S+=2,N++,z="No Trabajado"),{id:I.id,nombreActividad:I.nombreActividad,fecha:I.fecha,estado:z}}).filter(I=>{var j;return(j=n[I.id])==null?void 0:j[t.nombreCompleto]}),L=N>0?(S/N).toFixed(1):"N/A";return{asignatura:D,promedio:L,actividades:H.sort((I,j)=>new Date(j.fecha).getTime()-new Date(I.fecha).getTime())}}).filter(D=>D.actividades.length>0).sort((D,C)=>D.asignatura.localeCompare(C.asignatura))},[e,n,t]);J.useEffect(()=>{if(E.reduce((N,H)=>N+H.actividades.length,0)===0){d(null);return}const P=E.reduce((N,H)=>{const L=parseFloat(H.promedio);return isNaN(L)?N:N+L},0),D=E.length>0?P/E.length:0,C=dv.find(N=>D>=N.promedioMin&&D<=N.promedioMax)||null,S=dv.filter(N=>D>=N.promedioMin);if(d({puntajeTotal:0,promedio:D,rangoActual:C,insigniasGanadas:S}),y.current!==null){const N=dv.find(H=>y.current>=H.promedioMin&&y.current<=H.promedioMax)||null;C&&(!N||C.nombre!==N.nombre)&&b(C)}y.current=D},[E]);const B=J.useMemo(()=>t.curso?s.filter(U=>U.curso===t.curso).map(U=>{const P=U.grupos.find(D=>D.integrantes.some(C=>C.nombre===t.nombreCompleto));return P?{...U,miGrupo:P}:null}).filter(U=>U!==null).sort((U,P)=>new Date(P.fechaPresentacion).getTime()-new Date(U.fechaPresentacion).getTime()):[],[s,t]),k=async(U,P)=>{const D=s.find(S=>S.id===U);if(!D)return;const C={...D,grupos:D.grupos.map(S=>S.integrantes.some(H=>H.nombre===t.nombreCompleto)?{...S,integrantes:S.integrantes.map(H=>H.nombre===t.nombreCompleto?{...H,rol:P||void 0}:H)}:S)};try{await yNe(C)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},F=U=>{const P=parseFloat(U);return isNaN(P)?"bg-slate-400":P<4?"bg-red-500":P<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>b(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:U=>U.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),c.jsx("button",{onClick:()=>b(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:U=>U.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:dv.map(U=>{const P=u==null?void 0:u.insigniasGanadas.some(D=>D.nombre===U.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${P?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:U.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${P?"text-amber-700":"text-slate-600"}`,children:U.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",U.promedioMin," y ",U.promedioMax]})]})]},U.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),E.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(U=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:U.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${F(U.promedio)}`,children:U.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),U.actividades.map(P=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:P.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(P.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${P.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:P.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},P.id))]})]},U.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),B.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:B.map(U=>{const P=U.miGrupo.integrantes.filter(C=>C.nombre!==t.nombreCompleto&&C.rol).map(C=>C.rol),D=_8.filter(C=>!P.includes(C));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:U.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[U.asignatura," - Presentación: ",new Date(U.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",U.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:U.miGrupo.integrantes.map(C=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:C.nombre===t.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===t.nombreCompleto?c.jsxs("select",{value:C.rol||"",onChange:S=>k(U.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!D.includes(C.rol)&&c.jsx("option",{value:C.rol,children:C.rol}),D.map(S=>c.jsx("option",{value:S,children:S},S))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},U.id)})})]})]})},bNe="planificacionesInterdisciplinarias",WR="entregasTareasInterdisciplinarias",CNe=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState([]),[s,i]=J.useState(null);J.useEffect(()=>{const m=()=>{try{const g=localStorage.getItem(bNe);g&&r(JSON.parse(g));const b=localStorage.getItem(WR);b&&a(JSON.parse(b))}catch(g){console.error("Error al cargar datos desde localStorage",g)}};return m(),window.addEventListener("storage",m),()=>window.removeEventListener("storage",m)},[]);const o=J.useMemo(()=>e.filter(m=>m.cursos.includes(t.curso||"")),[e,t.curso]),l=m=>{a(m),localStorage.setItem(WR,JSON.stringify(m)),window.dispatchEvent(new Event("storage"))},u=(m,g)=>{let b=n.find(y=>y.planificacionId===m&&y.tareaId===g&&y.estudianteId===t.id);return b||(b={id:crypto.randomUUID(),planificacionId:m,tareaId:g,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}),b},d=m=>{const g=n.findIndex(y=>y.id===m.id);let b;g>-1?b=n.map(y=>y.id===m.id?m:y):b=[...n,m],l(b)},h=({plan:m,tarea:g})=>{const b=J.useMemo(()=>u(m.id,g.id),[m.id,g.id,n]),[y,E]=J.useState(!1),[B,k]=J.useState({observaciones:b.observacionesEstudiante||"",enlace:b.enlaceUrl||""}),F=D=>{var S;const C=(S=D.target.files)==null?void 0:S[0];if(C){const N=new FileReader;N.onloadend=()=>{d({...b,archivoAdjunto:{nombre:C.name,url:N.result},fechaCompletado:new Date().toISOString()})},N.readAsDataURL(C)}},U=()=>{d({...b,observacionesEstudiante:B.observaciones,enlaceUrl:B.enlace,fechaCompletado:new Date().toISOString()})},P=()=>{d({...b,completada:!b.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:b.completada,onChange:P,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${b.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",g.numero,": ",g.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",g.fechaEntrega]}),g.recursoUrl&&c.jsx("a",{href:g.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>E(!y),className:"text-sm font-semibold",children:y?"Ocultar":"Entregar"})]}),y&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:B.observaciones,onChange:D=>k({...B,observaciones:D.target.value}),onBlur:U,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:B.enlace,onChange:D=>k({...B,enlace:D.target.value}),onBlur:U,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:F,className:"text-sm"}),b.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",b.archivoAdjunto.nombre]})]}),b.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:b.feedbackProfesor})]})]})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),o.length>0?o.map(m=>{const g=m.tareas||[],y=n.filter(B=>B.planificacionId===m.id&&B.estudianteId===t.id).filter(B=>B.completada).length,E=g.length>0?y/g.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(s===m.id?null:m.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:m.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(E),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${E}%`}})})]})]}),s===m.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:g.length>0?g.map(B=>c.jsx(h,{plan:m,tarea:B},B.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},m.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},ENe=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),_Ne=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState(null),[u,d]=J.useState(Ig),h=J.useCallback(async()=>{a(!0);try{const E=(await cve(t.nombreCompleto)).sort((B,k)=>new Date(k.fecha).getTime()-new Date(B.fecha).getTime());r(E),i(null)}catch(y){console.error("Error al cargar acompañamientos desde Firestore",y),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[t.nombreCompleto]),m=J.useCallback(async()=>{try{const y=await uve();y&&d(y)}catch(y){console.error("Error al cargar rúbrica personalizada",y)}},[]);J.useEffect(()=>{h(),m()},[h,m]);const g=J.useMemo(()=>{if(!o)return[];const y={};return u.forEach(E=>{y[E.domain]={total:0,count:0},E.criteria.forEach(B=>{const k=o.rubricaResultados[B.name];k&&(y[E.domain].total+=k,y[E.domain].count++)})}),Object.entries(y).map(([E,B])=>({label:E,value:B.count>0?B.total/B.count:0}))},[o,u]),b=y=>{const E=new ir;E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),E.setFont("helvetica","bold"),E.setFontSize(16),E.setTextColor(40),E.text("Informe de Acompañamiento Docente",E.internal.pageSize.getWidth()/2,25,{align:"center"}),E.setFontSize(12),E.setFont("helvetica","normal"),rl(E,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let B=E.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const U=[],P=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(D=>{U.push([{content:D.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),D.criteria.forEach(C=>{const S=y.rubricaResultados[C.name],N=S?P[S-1]:"No evaluado";U.push([C.name,N])})}),rl(E,{startY:B,head:[["Indicador","Nivel de Logro"]],body:U,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),B=E.lastAutoTable.finalY+15}const k=(U,P)=>{if(!P)return;B>250&&(E.addPage(),B=20,E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(100),E.text("LICEO INDUSTRIAL DE RECOLETA",E.internal.pageSize.getWidth()/2,15,{align:"center"}),B=25),E.setFont("helvetica","bold"),E.setFontSize(14),E.setTextColor(40),E.text(U,14,B),B+=8,E.setFont("helvetica","normal"),E.setFontSize(11),E.setTextColor(60);const D=E.splitTextToSize(P.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);E.text(D,14,B),B+=D.length*5+10};k("Observaciones Generales",y.observacionesGenerales),k("Retroalimentación Consolidada",y.retroalimentacionConsolidada);const F=E.getNumberOfPages();for(let U=1;U<=F;U++)E.setPage(U),E.setFontSize(8),E.setTextColor(128),E.text(`Página ${U} de ${F}`,E.internal.pageSize.getWidth()/2,E.internal.pageSize.getHeight()-10,{align:"center"});E.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(E8,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(ENe,{data:g})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(y=>c.jsx("button",{onClick:()=>l(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},SNe=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=Kt(nn,"planificaciones"),r=fr(e,Kn("fechaCreacion","desc"));return Yr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),t(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},TNe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=Kt(nn,"planificaciones"),n=fr(r,ta("userId","==",t),Kn("fechaCreacion","desc"));return Yr(n,s=>{const i=[];s.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}},BNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),NNe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),kNe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),INe=({plan:t,onClose:e})=>{const r=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",a.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",a.indicadoresEvaluacion]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"Contenidos Clave:"})," ",a.contenidos]})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",a.cantidadClases,")"]}),c.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:a.detallesLeccion.map((s,i)=>c.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",s.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",s.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidosConceptuales]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",s.habilidadesBloom]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",s.perfilEgreso]}),c.jsxs("span",{className:"md:col-span-2",children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",s.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=a=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidos]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.inicio})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.desarrollo})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:a.momentosClase.cierre})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:a=>a.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(NNe,{})})]}),c.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},FNe=t=>{const[e,r]=J.useState([]),[n,a]=J.useState(!0),[s,i]=J.useState(null),o=J.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return J.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),a(!1);return}console.log("🔄 Configurando suscripción a planificaciones..."),console.log("🔍 Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log("👑 Cargando todas las planificaciones (vista admin)"),l=SNe(u=>{console.log("✅ Planificaciones admin cargadas:",u.length),r(u),a(!1),i(null)});else{const u=t.email||t.id||"";console.log("👤 Cargando planificaciones del usuario:",u),l=TNe(u,d=>{console.log("✅ Planificaciones del usuario cargadas:",d.length),r(d),a(!1),i(null)})}return l}catch(l){console.error("❌ Error al configurar suscripción:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),a(!1)}},[t,o]),{planificaciones:e,loading:n,error:s,canViewAllPlans:o}},DNe=({currentUser:t})=>{console.log("🔍 SeguimientoCurricular - currentUser recibido:",t),console.log("🔍 currentUser.email:",t==null?void 0:t.email),console.log("🔍 currentUser.id:",t==null?void 0:t.id),console.log("🔍 currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:a}=FNe(t),[s,i]=J.useState("1º"),[o,l]=J.useState(null),[u,d]=J.useState(null),h=J.useMemo(()=>{const y={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[s];return e.filter(E=>E.nivel===y)},[e,s]),m=b=>{l(y=>y===b?null:b)},g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(kNe,{}),c.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&c.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"👑 Vista administrativa - Todas las planificaciones"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>i(b.key),className:`${s===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),c.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:a?"Ningún profesor ha creado planificaciones aún":"Crea planificaciones desde el módulo de Planificación"})]}):c.jsx("div",{className:"space-y-4",children:nl.map(b=>{const y=h.filter(B=>B.asignatura===b);if(y.length===0)return null;const E=o===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," planificación",y.length!==1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform duration-200 ${E?"rotate-180":""}`,children:c.jsx(BNe,{})})]}),E&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:c.jsx("ul",{className:"space-y-3",children:y.map(B=>c.jsx("li",{children:c.jsx("button",{onClick:()=>d(B),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:B.tipo==="Unidad"?B.nombreUnidad:B.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Autor:"})," ",B.autor||"No especificado"]}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(B.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("div",{className:"ml-3",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${B.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:B.tipo})})]})})},B.id))})})]},b)})})]}),u&&c.jsx(INe,{plan:u,onClose:()=>d(null)})]})},FT="analisis",RNe=async()=>{try{const t=fr(Kt(nn,FT),Kn("uploadDate","desc"));return(await Ys(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},LNe=async t=>{try{return{id:(await Js(Kt(nn,FT),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},UNe=async t=>{try{const e=Lr(nn,FT,t);await No(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},$R=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],XR={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},MNe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),YR=({currentUser:t})=>{const[e,r]=J.useState([]),[n,a]=J.useState(!1),[s,i]=J.useState(null),[o,l]=J.useState(null),[u,d]=J.useState(""),[h,m]=J.useState(!1),[g,b]=J.useState(null),[y,E]=J.useState(null),B=J.useCallback(async()=>{a(!0);try{const D=await RNe();r(D),i(null)}catch(D){console.error("Error al cargar análisis desde Firestore",D),i("No se pudieron cargar los análisis desde la nube.")}finally{a(!1)}},[]);J.useEffect(()=>{B()},[B]);const k=async D=>{var S;const C=(S=D.target.files)==null?void 0:S[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),E(null),d("");return}b(C),d(C.name),i(null);const H=new FileReader;H.onloadend=()=>{const L=H.result.split(",")[1];if(!L){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),E(null);return}E({mimeType:C.type,data:L})},H.onerror=()=>{i("Error al leer el archivo."),E(null)},H.readAsDataURL(C)}},F=async()=>{if(!u.trim()||!y){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const D=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,C={type:or.OBJECT,properties:{analysisResults:{type:or.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:or.OBJECT,properties:{question:{type:or.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:or.STRING,description:"El nivel de Bloom correspondiente.",enum:$R}},required:["question","habilidadBloom"]}},summary:{type:or.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:or.INTEGER},Comprender:{type:or.INTEGER},Aplicar:{type:or.INTEGER},Analizar:{type:or.INTEGER},Evaluar:{type:or.INTEGER},Crear:{type:or.INTEGER}}}},required:["analysisResults","summary"]};try{Gl("Análisis Taxonómico");const S=new Dc({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),N={inlineData:{mimeType:y.mimeType,data:y.data}},H=await S.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:D},N]},config:{responseMimeType:"application/json",responseSchema:C}}),L=JSON.parse(H.text),I={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:L.analysisResults,summary:L.summary},j=await LNe(I);await B(),l(j),d(""),b(null),E(null)}catch(S){console.error(S),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{m(!1)}},U=async D=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await UNe(D),await B(),(o==null?void 0:o.id)===D&&l(null)}catch(C){console.error("Error al eliminar análisis:",C),i("No se pudo eliminar el análisis en la nube.")}},P=J.useMemo(()=>o?Object.values(o.summary).reduce((D,C)=>D+(C||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[c.jsx("span",{children:"Cargue un archivo"}),c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:D=>d(D.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:F,disabled:h||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(MNe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(D=>c.jsxs("button",{onClick:()=>l(D),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===D.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:D.documentName}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(D.uploadDate).toLocaleString("es-CL")})]},D.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>U(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",P," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:$R.map(D=>{const C=o.summary[D]||0,S=P>0?C/P*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:D}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",S.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${XR[D]} h-4 rounded-full`,style:{width:`${S}%`}})})]},D)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((D,C)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:D.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${XR[D.habilidadBloom]}`,children:D.habilidadBloom})})]},C))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},PNe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},jNe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,unreadMessagesCount:a,refreshUnreadCount:s})=>{const i=t.profile,o=J.useMemo(()=>{const E=D$[i]??[];return i!==$t.ESTUDIANTE?E:E.filter(B=>{if(B.name==="Asistencia a Empresa"){const k=PNe(t.curso||"");return k.startsWith("3º")||k.startsWith("4º")}return!0})},[i,t.curso]),[l,u]=J.useState(null),[d,h]=J.useState(!1);J.useEffect(()=>{o.length>0?u(o[0]):u(null)},[o]);const m=J.useCallback(E=>{u(E),window.innerWidth<768&&h(!1)},[]),g=J.useCallback(E=>{const B=o.find(k=>k.name===E);B&&m(B)},[o,m]),b=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(g$,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:o.map(E=>c.jsxs("button",{onClick:()=>m(E),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(l==null?void 0:l.name)===E.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[E.icon,c.jsx("span",{className:"ml-4",children:E.name})]},E.name))})]}),y=()=>{if(!l)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(l.name==="Calendario Académico")return c.jsx(zse,{profile:i});if(l.name==="Muro de Anuncios")return c.jsx($se,{currentUser:t});if(l.name==="Mensajería Interna")return c.jsx(vve,{currentUser:t,refreshUnreadCount:s});if(l.name==="Generador de Actas")return c.jsx(Yse,{});if(i===$t.SUBDIRECCION){if(l.name==="Dashboard")return console.log("=== DASHBOARD PRINCIPAL DEBUG ==="),console.log("🔍 Dashboard principal - currentUser antes de pasar:",t),console.log("🔍 Dashboard principal - profile del usuario:",t==null?void 0:t.profile),console.log("🔍 Dashboard principal - email del usuario:",t==null?void 0:t.email),console.log("====================================="),c.jsx(iX,{currentUser:t});if(l.name==="Administración")return c.jsx(a1e,{});if(l.name==="Seguimiento Curricular")return c.jsx(DNe,{currentUser:t});if(l.name==="Acompañamiento docente")return c.jsx(Ave,{currentUser:t});if(l.name==="Análisis Taxonómico")return c.jsx(YR,{currentUser:t});if(l.name==="Interdisciplinario")return c.jsx(zD,{});if(l.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(tX,{currentUser:t});if(l.name==="Crear horarios")return c.jsx(hX,{});if(l.name==="Seguimiento de acciones pedagógicas")return c.jsx(vX,{});if(l.name==="Inclusión")return c.jsx(Q6,{currentUser:t})}if(i===$t.PROFESORADO){if(l.name==="Planificación")return c.jsx(Use,{currentUser:t});if(l.name==="Mis Acompañamientos")return c.jsx(_Ne,{currentUser:t});if(l.name==="Recursos de Aprendizaje")return c.jsx(hNe,{});if(l.name==="Análisis Taxonómico")return c.jsx(YR,{currentUser:t});if(l.name==="Interdisciplinario")return c.jsx(zD,{});if(l.name==="Inclusión")return c.jsx(Q6,{currentUser:t});if(l.name==="Actividades Remotas")return c.jsx(m1e,{});if(l.name==="Evaluación de Aprendizajes")return c.jsx(Joe,{});if(l.name==="Evaluaciones Formativas")return c.jsx(ave,{currentUser:t})}if(i===$t.COORDINACION_TP){if(l.name==="Seguimiento Dual")return c.jsx(o1e,{});if(l.name==="Asistencia Dual")return c.jsx(H1e,{});if(l.name==="Pañol")return c.jsx(lEe,{})}if(i===$t.ESTUDIANTE){if(l.name==="Auto-aprendizaje")return c.jsx(y1e,{currentUser:t});if(l.name==="Evaluación Formativa")return c.jsx(wNe,{currentUser:t});if(l.name==="Tareas Interdisciplinarias")return c.jsx(CNe,{currentUser:t});if(l.name==="Asistencia a Empresa")return c.jsx(R1e,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:l.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:l.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(O$,{currentUser:t,onLogout:e,onNavigate:g,onUserUpdate:r,onChangeProfile:n,toggleSidebar:()=>h(!d),unreadMessagesCount:a,refreshUnreadCount:s}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[d&&c.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${d?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(b,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:y()})})]})]})},ONe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(JS,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:F$.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),QNe=()=>{const[t,e]=J.useState(null),[r,n]=J.useState(null),[a,s]=J.useState(!0),[i,o]=J.useState(null),[l,u]=J.useState(!1),[d,h]=J.useState(null);J.useEffect(()=>{console.log("🔄 Iniciando listener de Auth...");const B=qz(Vp,async k=>{try{if(console.log("🔄 Auth state changed:",(k==null?void 0:k.email)||"No user"),e(k),!k)console.log("🚪 Usuario no autenticado, limpiando estado"),n(null),h(null),u(!1),o(null);else{console.log("🔄 Cargando datos de Firestore para:",k.email);try{const F=Lr(nn,"usuarios",k.email),U=await km(F);if(U.exists()){const P={id:k.email,...U.data()};console.log("✅ Datos de usuario cargados:",{nombre:P.nombreCompleto,profile:P.profile,email:P.email}),n(P),o(null),P.profile===$t.SUBDIRECCION&&(console.log("👑 Usuario SUBDIRECCION detectado, habilitando selector de perfil"),u(!0))}else console.log("❌ Usuario no encontrado en Firestore para:",k.email),n(null),o("Usuario no encontrado en la base de datos. Contacte al administrador."),await ok(Vp)}catch(F){console.error("❌ Error específico de Firestore:",F),n(null),o("Error al conectar con la base de datos. Verifique su conexión.")}}}catch(F){console.error("❌ Error general en Auth state change:",F),n(null),e(null),o("Error de autenticación. Intente nuevamente.")}finally{s(!1),console.log("✅ Auth inicialización completada")}});return()=>{console.log("🔄 Limpiando listener de Auth"),B()}},[]);const m=async(B,k)=>{if(o(null),!B.trim()||!k.trim()){o("Por favor ingrese email y contraseña");return}try{console.log("🔄 Intentando login para:",B);const F=Lr(nn,"usuarios",B.trim().toLowerCase());if(!(await km(F)).exists()){o("Usuario no registrado en el sistema");return}await Vz(Vp,B.trim().toLowerCase(),k),console.log("✅ Login exitoso")}catch(F){switch(console.error("❌ Error de login:",F),F.code){case"auth/user-not-found":o("No existe una cuenta con este correo electrónico");break;case"auth/wrong-password":o("Contraseña incorrecta");break;case"auth/invalid-email":o("Formato de correo electrónico inválido");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde o restablezca su contraseña");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet");break;case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña");break;default:o(`Error de autenticación: ${F.message}`)}}},g=async B=>{try{return console.log("🔄 Enviando email de recuperación a:",B),await Hz(Vp,B),console.log("✅ Email de recuperación enviado"),{success:!0,message:"Email de recuperación enviado correctamente"}}catch(k){switch(console.error("❌ Error al enviar email de recuperación:",k),k.code){case"auth/user-not-found":return{success:!1,message:"No existe una cuenta con este correo"};case"auth/invalid-email":return{success:!1,message:"Correo electrónico inválido"};default:return{success:!1,message:"Error al enviar email de recuperación"}}}},b=B=>{console.log("👑 Admin seleccionó perfil:",B),h(B),u(!1)},y=async()=>{try{console.log("🚪 Cerrando sesión..."),await ok(Vp),e(null),n(null),h(null),u(!1),o(null),console.log("✅ Sesión cerrada exitosamente")}catch(B){console.error("❌ Error al cerrar sesión:",B)}};if(a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(JS,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."}),c.jsx("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-500",children:"Verificando autenticación y permisos"})]})});const E=()=>{if(i&&!t)return c.jsx(b3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(t&&l&&(r==null?void 0:r.profile)===$t.SUBDIRECCION)return c.jsx(ONe,{onSelectProfile:b,isAdminView:!0});if(t&&r){const B=d||r.profile;return console.log("🎯 Renderizando Dashboard para:",{user:r.nombreCompleto,originalProfile:r.profile,effectiveProfile:B}),c.jsx(jNe,{currentUser:{...r,profile:B},onLogout:y})}return t&&!r?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:[c.jsx("div",{className:"mb-4 text-red-500",children:c.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error de datos de usuario"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"No se pudieron cargar los datos del usuario desde la base de datos."}),c.jsx("button",{onClick:y,className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Volver al Login"})]})}):c.jsx(b3,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i})};return c.jsx("div",{className:"min-h-screen bg-slate-100 font-sans",children:E()})},KQ=document.getElementById("root");if(!KQ)throw new Error("Could not find root element to mount to");const HNe=sH.createRoot(KQ);HNe.render(c.jsx(At.StrictMode,{children:c.jsx(QNe,{})}));export{zn as _,VNe as c,eS as g};
