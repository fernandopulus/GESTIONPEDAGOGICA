(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var RFe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CV(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var z_={exports:{}},eg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk;function EV(){if(gk)return eg;gk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return eg.Fragment=e,eg.jsx=n,eg.jsxs=n,eg}var xk;function SV(){return xk||(xk=1,z_.exports=EV()),z_.exports}var c=SV(),G_={exports:{}},vr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk;function TV(){if(vk)return vr;vk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function p(X){return X===null||typeof X!="object"?null:(X=m&&X[m]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,y={};function T(X,ce,V){this.props=X,this.context=ce,this.refs=y,this.updater=V||x}T.prototype.isReactComponent={},T.prototype.setState=function(X,ce){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ce,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function I(){}I.prototype=T.prototype;function F(X,ce,V){this.props=X,this.context=ce,this.refs=y,this.updater=V||x}var M=F.prototype=new I;M.constructor=F,C(M,T.prototype),M.isPureReactComponent=!0;var O=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function E(X,ce,V,J,re,ie){return V=ie.ref,{$$typeof:t,type:X,key:ce,ref:V!==void 0?V:null,props:ie}}function S(X,ce){return E(X.type,ce,void 0,void 0,void 0,X.props)}function k(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function z(X){var ce={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(V){return ce[V]})}var P=/\/+/g;function R(X,ce){return typeof X=="object"&&X!==null&&X.key!=null?z(""+X.key):ce.toString(36)}function G(){}function q(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(G,G):(X.status="pending",X.then(function(ce){X.status==="pending"&&(X.status="fulfilled",X.value=ce)},function(ce){X.status==="pending"&&(X.status="rejected",X.reason=ce)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function le(X,ce,V,J,re){var ie=typeof X;(ie==="undefined"||ie==="boolean")&&(X=null);var fe=!1;if(X===null)fe=!0;else switch(ie){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(X.$$typeof){case t:case e:fe=!0;break;case d:return fe=X._init,le(fe(X._payload),ce,V,J,re)}}if(fe)return re=re(X),fe=J===""?"."+R(X,0):J,O(re)?(V="",fe!=null&&(V=fe.replace(P,"$&/")+"/"),le(re,ce,V,"",function(ye){return ye})):re!=null&&(k(re)&&(re=S(re,V+(re.key==null||X&&X.key===re.key?"":(""+re.key).replace(P,"$&/")+"/")+fe)),ce.push(re)),1;fe=0;var Se=J===""?".":J+":";if(O(X))for(var ve=0;ve<X.length;ve++)J=X[ve],ie=Se+R(J,ve),fe+=le(J,ce,V,ie,re);else if(ve=p(X),typeof ve=="function")for(X=ve.call(X),ve=0;!(J=X.next()).done;)J=J.value,ie=Se+R(J,ve++),fe+=le(J,ce,V,ie,re);else if(ie==="object"){if(typeof X.then=="function")return le(q(X),ce,V,J,re);throw ce=String(X),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ee(X,ce,V){if(X==null)return X;var J=[],re=0;return le(X,J,"","",function(ie){return ce.call(V,ie,re++)}),J}function oe(X){if(X._status===-1){var ce=X._result;ce=ce(),ce.then(function(V){(X._status===0||X._status===-1)&&(X._status=1,X._result=V)},function(V){(X._status===0||X._status===-1)&&(X._status=2,X._result=V)}),X._status===-1&&(X._status=0,X._result=ce)}if(X._status===1)return X._result.default;throw X._result}var K=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ne(){}return vr.Children={map:ee,forEach:function(X,ce,V){ee(X,function(){ce.apply(this,arguments)},V)},count:function(X){var ce=0;return ee(X,function(){ce++}),ce},toArray:function(X){return ee(X,function(ce){return ce})||[]},only:function(X){if(!k(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},vr.Component=T,vr.Fragment=n,vr.Profiler=s,vr.PureComponent=F,vr.StrictMode=r,vr.Suspense=l,vr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,vr.__COMPILER_RUNTIME={__proto__:null,c:function(X){return Q.H.useMemoCache(X)}},vr.cache=function(X){return function(){return X.apply(null,arguments)}},vr.cloneElement=function(X,ce,V){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var J=C({},X.props),re=X.key,ie=void 0;if(ce!=null)for(fe in ce.ref!==void 0&&(ie=void 0),ce.key!==void 0&&(re=""+ce.key),ce)!j.call(ce,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ce.ref===void 0||(J[fe]=ce[fe]);var fe=arguments.length-2;if(fe===1)J.children=V;else if(1<fe){for(var Se=Array(fe),ve=0;ve<fe;ve++)Se[ve]=arguments[ve+2];J.children=Se}return E(X.type,re,void 0,void 0,ie,J)},vr.createContext=function(X){return X={$$typeof:i,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},vr.createElement=function(X,ce,V){var J,re={},ie=null;if(ce!=null)for(J in ce.key!==void 0&&(ie=""+ce.key),ce)j.call(ce,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=ce[J]);var fe=arguments.length-2;if(fe===1)re.children=V;else if(1<fe){for(var Se=Array(fe),ve=0;ve<fe;ve++)Se[ve]=arguments[ve+2];re.children=Se}if(X&&X.defaultProps)for(J in fe=X.defaultProps,fe)re[J]===void 0&&(re[J]=fe[J]);return E(X,ie,void 0,void 0,null,re)},vr.createRef=function(){return{current:null}},vr.forwardRef=function(X){return{$$typeof:o,render:X}},vr.isValidElement=k,vr.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:oe}},vr.memo=function(X,ce){return{$$typeof:u,type:X,compare:ce===void 0?null:ce}},vr.startTransition=function(X){var ce=Q.T,V={};Q.T=V;try{var J=X(),re=Q.S;re!==null&&re(V,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(ne,K)}catch(ie){K(ie)}finally{Q.T=ce}},vr.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},vr.use=function(X){return Q.H.use(X)},vr.useActionState=function(X,ce,V){return Q.H.useActionState(X,ce,V)},vr.useCallback=function(X,ce){return Q.H.useCallback(X,ce)},vr.useContext=function(X){return Q.H.useContext(X)},vr.useDebugValue=function(){},vr.useDeferredValue=function(X,ce){return Q.H.useDeferredValue(X,ce)},vr.useEffect=function(X,ce,V){var J=Q.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(X,ce)},vr.useId=function(){return Q.H.useId()},vr.useImperativeHandle=function(X,ce,V){return Q.H.useImperativeHandle(X,ce,V)},vr.useInsertionEffect=function(X,ce){return Q.H.useInsertionEffect(X,ce)},vr.useLayoutEffect=function(X,ce){return Q.H.useLayoutEffect(X,ce)},vr.useMemo=function(X,ce){return Q.H.useMemo(X,ce)},vr.useOptimistic=function(X,ce){return Q.H.useOptimistic(X,ce)},vr.useReducer=function(X,ce,V){return Q.H.useReducer(X,ce,V)},vr.useRef=function(X){return Q.H.useRef(X)},vr.useState=function(X){return Q.H.useState(X)},vr.useSyncExternalStore=function(X,ce,V){return Q.H.useSyncExternalStore(X,ce,V)},vr.useTransition=function(){return Q.H.useTransition()},vr.version="19.1.1",vr}var yk;function $x(){return yk||(yk=1,G_.exports=TV()),G_.exports}var se=$x();const wt=Kx(se);var q_={exports:{}},tg={},K_={exports:{}},$_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wk;function NV(){return wk||(wk=1,function(t){function e(ee,oe){var K=ee.length;ee.push(oe);e:for(;0<K;){var ne=K-1>>>1,X=ee[ne];if(0<s(X,oe))ee[ne]=oe,ee[K]=X,K=ne;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var oe=ee[0],K=ee.pop();if(K!==oe){ee[0]=K;e:for(var ne=0,X=ee.length,ce=X>>>1;ne<ce;){var V=2*(ne+1)-1,J=ee[V],re=V+1,ie=ee[re];if(0>s(J,K))re<X&&0>s(ie,J)?(ee[ne]=ie,ee[re]=K,ne=re):(ee[ne]=J,ee[V]=K,ne=V);else if(re<X&&0>s(ie,K))ee[ne]=ie,ee[re]=K,ne=re;else break e}}return oe}function s(ee,oe){var K=ee.sortIndex-oe.sortIndex;return K!==0?K:ee.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,m=null,p=3,x=!1,C=!1,y=!1,T=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(ee){for(var oe=n(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=ee)r(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(u)}}function Q(ee){if(y=!1,O(ee),!C)if(n(l)!==null)C=!0,j||(j=!0,R());else{var oe=n(u);oe!==null&&le(Q,oe.startTime-ee)}}var j=!1,E=-1,S=5,k=-1;function z(){return T?!0:!(t.unstable_now()-k<S)}function P(){if(T=!1,j){var ee=t.unstable_now();k=ee;var oe=!0;try{e:{C=!1,y&&(y=!1,F(E),E=-1),x=!0;var K=p;try{t:{for(O(ee),m=n(l);m!==null&&!(m.expirationTime>ee&&z());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,p=m.priorityLevel;var X=ne(m.expirationTime<=ee);if(ee=t.unstable_now(),typeof X=="function"){m.callback=X,O(ee),oe=!0;break t}m===n(l)&&r(l),O(ee)}else r(l);m=n(l)}if(m!==null)oe=!0;else{var ce=n(u);ce!==null&&le(Q,ce.startTime-ee),oe=!1}}break e}finally{m=null,p=K,x=!1}oe=void 0}}finally{oe?R():j=!1}}}var R;if(typeof M=="function")R=function(){M(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,q=G.port2;G.port1.onmessage=P,R=function(){q.postMessage(null)}}else R=function(){I(P,0)};function le(ee,oe){E=I(function(){ee(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(ee){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var K=p;p=oe;try{return ee()}finally{p=K}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var K=p;p=ee;try{return oe()}finally{p=K}},t.unstable_scheduleCallback=function(ee,oe,K){var ne=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,ee={id:d++,callback:oe,priorityLevel:ee,startTime:K,expirationTime:X,sortIndex:-1},K>ne?(ee.sortIndex=K,e(u,ee),n(l)===null&&ee===n(u)&&(y?(F(E),E=-1):y=!0,le(Q,K-ne))):(ee.sortIndex=X,e(l,ee),C||x||(C=!0,j||(j=!0,R()))),ee},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(ee){var oe=p;return function(){var K=p;p=oe;try{return ee.apply(this,arguments)}finally{p=K}}}}($_)),$_}var bk;function BV(){return bk||(bk=1,K_.exports=NV()),K_.exports}var W_={exports:{}},Fo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _k;function kV(){if(_k)return Fo;_k=1;var t=$x();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Fo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fo.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},Fo.flushSync=function(l){var u=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=d,r.d.f()}},Fo.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Fo.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Fo.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,m=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:x}):d==="script"&&r.d.X(l,{crossOrigin:m,integrity:p,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Fo.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Fo.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,m=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Fo.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Fo.requestFormReset=function(l){r.d.r(l)},Fo.unstable_batchedUpdates=function(l,u){return l(u)},Fo.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Fo.useFormStatus=function(){return i.H.useHostTransitionStatus()},Fo.version="19.1.1",Fo}var Ck;function iP(){if(Ck)return W_.exports;Ck=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),W_.exports=kV(),W_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek;function IV(){if(Ek)return tg;Ek=1;var t=BV(),e=$x(),n=iP();function r(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var f=A,g=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(g=f.return),A=f.return;while(A)}return f.tag===3?g:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(r(188))}function l(A){var f=A.alternate;if(!f){if(f=a(A),f===null)throw Error(r(188));return f!==A?null:A}for(var g=A,_=f;;){var U=g.return;if(U===null)break;var W=U.alternate;if(W===null){if(_=U.return,_!==null){g=_;continue}break}if(U.child===W.child){for(W=U.child;W;){if(W===g)return o(U),A;if(W===_)return o(U),f;W=W.sibling}throw Error(r(188))}if(g.return!==_.return)g=U,_=W;else{for(var pe=!1,Be=U.child;Be;){if(Be===g){pe=!0,g=U,_=W;break}if(Be===_){pe=!0,_=U,g=W;break}Be=Be.sibling}if(!pe){for(Be=W.child;Be;){if(Be===g){pe=!0,g=W,_=U;break}if(Be===_){pe=!0,_=W,g=U;break}Be=Be.sibling}if(!pe)throw Error(r(189))}}if(g.alternate!==_)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function R(A){return A===null||typeof A!="object"?null:(A=P&&A[P]||A["@@iterator"],typeof A=="function"?A:null)}var G=Symbol.for("react.client.reference");function q(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===G?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case C:return"Fragment";case T:return"Profiler";case y:return"StrictMode";case Q:return"Suspense";case j:return"SuspenseList";case k:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case x:return"Portal";case M:return(A.displayName||"Context")+".Provider";case F:return(A._context.displayName||"Context")+".Consumer";case O:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return f=A.displayName||null,f!==null?f:q(A.type)||"Memo";case S:f=A._payload,A=A._init;try{return q(A(f))}catch{}}return null}var le=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ne=[],X=-1;function ce(A){return{current:A}}function V(A){0>X||(A.current=ne[X],ne[X]=null,X--)}function J(A,f){X++,ne[X]=A.current,A.current=f}var re=ce(null),ie=ce(null),fe=ce(null),Se=ce(null);function ve(A,f){switch(J(fe,f),J(ie,A),J(re,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?GB(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=GB(f),A=qB(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}V(re),J(re,A)}function ye(){V(re),V(ie),V(fe)}function we(A){A.memoizedState!==null&&J(Se,A);var f=re.current,g=qB(f,A.type);f!==g&&(J(ie,A),J(re,g))}function me(A){ie.current===A&&(V(re),V(ie)),Se.current===A&&(V(Se),Wp._currentValue=K)}var he=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,Oe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,je=t.unstable_now,Ke=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,vt=t.unstable_UserBlockingPriority,Tt=t.unstable_NormalPriority,xt=t.unstable_LowPriority,Vt=t.unstable_IdlePriority,Kt=t.log,cn=t.unstable_setDisableYieldValue,Gt=null,Wt=null;function sn(A){if(typeof Kt=="function"&&cn(A),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Gt,A)}catch{}}var Qt=Math.clz32?Math.clz32:On,Ht=Math.log,_t=Math.LN2;function On(A){return A>>>=0,A===0?32:31-(Ht(A)/_t|0)|0}var An=256,Tr=4194304;function In(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function nr(A,f,g){var _=A.pendingLanes;if(_===0)return 0;var U=0,W=A.suspendedLanes,pe=A.pingedLanes;A=A.warmLanes;var Be=_&134217727;return Be!==0?(_=Be&~W,_!==0?U=In(_):(pe&=Be,pe!==0?U=In(pe):g||(g=Be&~A,g!==0&&(U=In(g))))):(Be=_&~W,Be!==0?U=In(Be):pe!==0?U=In(pe):g||(g=_&~A,g!==0&&(U=In(g)))),U===0?0:f!==0&&f!==U&&(f&W)===0&&(W=U&-U,g=f&-f,W>=g||W===32&&(g&4194048)!==0)?f:U}function Lr(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Zn(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ya(){var A=An;return An<<=1,(An&4194048)===0&&(An=256),A}function wr(){var A=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),A}function us(A){for(var f=[],g=0;31>g;g++)f.push(A);return f}function Is(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function lr(A,f,g,_,U,W){var pe=A.pendingLanes;A.pendingLanes=g,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=g,A.entangledLanes&=g,A.errorRecoveryDisabledLanes&=g,A.shellSuspendCounter=0;var Be=A.entanglements,He=A.expirationTimes,At=A.hiddenUpdates;for(g=pe&~g;0<g;){var Ct=31-Qt(g),Dt=1<<Ct;Be[Ct]=0,He[Ct]=-1;var ft=At[Ct];if(ft!==null)for(At[Ct]=null,Ct=0;Ct<ft.length;Ct++){var mt=ft[Ct];mt!==null&&(mt.lane&=-536870913)}g&=~Dt}_!==0&&vn(A,_,0),W!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=W&~(pe&~f))}function vn(A,f,g){A.pendingLanes|=f,A.suspendedLanes&=~f;var _=31-Qt(f);A.entangledLanes|=f,A.entanglements[_]=A.entanglements[_]|1073741824|g&4194090}function Ar(A,f){var g=A.entangledLanes|=f;for(A=A.entanglements;g;){var _=31-Qt(g),U=1<<_;U&f|A[_]&f&&(A[_]|=f),g&=~U}}function wa(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function As(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function zs(){var A=oe.p;return A!==0?A:(A=window.event,A===void 0?32:Ak(A.type))}function oa(A,f){var g=oe.p;try{return oe.p=A,f()}finally{oe.p=g}}var rn=Math.random().toString(36).slice(2),Rr="__reactFiber$"+rn,Nr="__reactProps$"+rn,Xr="__reactContainer$"+rn,br="__reactEvents$"+rn,Yt="__reactListeners$"+rn,be="__reactHandles$"+rn,Pe="__reactResources$"+rn,Fe="__reactMarker$"+rn;function De(A){delete A[Rr],delete A[Nr],delete A[br],delete A[Yt],delete A[be]}function Le(A){var f=A[Rr];if(f)return f;for(var g=A.parentNode;g;){if(f=g[Xr]||g[Rr]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(A=YB(A);A!==null;){if(g=A[Rr])return g;A=YB(A)}return f}A=g,g=A.parentNode}return null}function Me(A){if(A=A[Rr]||A[Xr]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function et(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(r(33))}function dt(A){var f=A[Pe];return f||(f=A[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Je(A){A[Fe]=!0}var at=new Set,ct={};function Bt(A,f){jt(A,f),jt(A+"Capture",f)}function jt(A,f){for(ct[A]=f,A=0;A<f.length;A++)at.add(f[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},$t={};function Cn(A){return he.call($t,A)?!0:he.call(Ot,A)?!1:Jt.test(A)?$t[A]=!0:(Ot[A]=!0,!1)}function cr(A,f,g){if(Cn(f))if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+g)}}function ur(A,f,g){if(g===null)A.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+g)}}function dr(A,f,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttributeNS(f,g,""+_)}}var Rs,ba;function Gs(A){if(Rs===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Rs=f&&f[1]||"",ba=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rs+A+ba}var la=!1;function Fs(A,f){if(!A||la)return"";la=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(mt){var ft=mt}Reflect.construct(A,[],Dt)}else{try{Dt.call()}catch(mt){ft=mt}A.call(Dt.prototype)}}else{try{throw Error()}catch(mt){ft=mt}(Dt=A())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(mt){if(mt&&ft&&typeof mt.stack=="string")return[mt.stack,ft.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=_.DetermineComponentFrameRoot(),pe=W[0],Be=W[1];if(pe&&Be){var He=pe.split(`
`),At=Be.split(`
`);for(U=_=0;_<He.length&&!He[_].includes("DetermineComponentFrameRoot");)_++;for(;U<At.length&&!At[U].includes("DetermineComponentFrameRoot");)U++;if(_===He.length||U===At.length)for(_=He.length-1,U=At.length-1;1<=_&&0<=U&&He[_]!==At[U];)U--;for(;1<=_&&0<=U;_--,U--)if(He[_]!==At[U]){if(_!==1||U!==1)do if(_--,U--,0>U||He[_]!==At[U]){var Ct=`
`+He[_].replace(" at new "," at ");return A.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",A.displayName)),Ct}while(1<=_&&0<=U);break}}}finally{la=!1,Error.prepareStackTrace=g}return(g=A?A.displayName||A.name:"")?Gs(g):""}function Rn(A){switch(A.tag){case 26:case 27:case 5:return Gs(A.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return Fs(A.type,!1);case 11:return Fs(A.type.render,!1);case 1:return Fs(A.type,!0);case 31:return Gs("Activity");default:return""}}function Pn(A){try{var f="";do f+=Rn(A),A=A.return;while(A);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function qs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Ji(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function tl(A){var f=Ji(A)?"checked":"value",g=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),_=""+A[f];if(!A.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var U=g.get,W=g.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return U.call(this)},set:function(pe){_=""+pe,W.call(this,pe)}}),Object.defineProperty(A,f,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(pe){_=""+pe},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function bo(A){A._valueTracker||(A._valueTracker=tl(A))}function Qn(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var g=f.getValue(),_="";return A&&(_=Ji(A)?A.checked?"true":"false":A.value),A=_,A!==g?(f.setValue(A),!0):!1}function pr(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var bl=/[\n"\\]/g;function _r(A){return A.replace(bl,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function rs(A,f,g,_,U,W,pe,Be){A.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?A.type=pe:A.removeAttribute("type"),f!=null?pe==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+qs(f)):A.value!==""+qs(f)&&(A.value=""+qs(f)):pe!=="submit"&&pe!=="reset"||A.removeAttribute("value"),f!=null?Zi(A,pe,qs(f)):g!=null?Zi(A,pe,qs(g)):_!=null&&A.removeAttribute("value"),U==null&&W!=null&&(A.defaultChecked=!!W),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?A.name=""+qs(Be):A.removeAttribute("name")}function _l(A,f,g,_,U,W,pe,Be){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(A.type=W),f!=null||g!=null){if(!(W!=="submit"&&W!=="reset"||f!=null))return;g=g!=null?""+qs(g):"",f=f!=null?""+qs(f):g,Be||f===A.value||(A.value=f),A.defaultValue=f}_=_??U,_=typeof _!="function"&&typeof _!="symbol"&&!!_,A.checked=Be?A.checked:!!_,A.defaultChecked=!!_,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(A.name=pe)}function Zi(A,f,g){f==="number"&&pr(A.ownerDocument)===A||A.defaultValue===""+g||(A.defaultValue=""+g)}function _a(A,f,g,_){if(A=A.options,f){f={};for(var U=0;U<g.length;U++)f["$"+g[U]]=!0;for(g=0;g<A.length;g++)U=f.hasOwnProperty("$"+A[g].value),A[g].selected!==U&&(A[g].selected=U),U&&_&&(A[g].defaultSelected=!0)}else{for(g=""+qs(g),f=null,U=0;U<A.length;U++){if(A[U].value===g){A[U].selected=!0,_&&(A[U].defaultSelected=!0);return}f!==null||A[U].disabled||(f=A[U])}f!==null&&(f.selected=!0)}}function Fn(A,f,g){if(f!=null&&(f=""+qs(f),f!==A.value&&(A.value=f),g==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=g!=null?""+qs(g):""}function ti(A,f,g,_){if(f==null){if(_!=null){if(g!=null)throw Error(r(92));if(le(_)){if(1<_.length)throw Error(r(93));_=_[0]}g=_}g==null&&(g=""),f=g}g=qs(f),A.defaultValue=g,_=A.textContent,_===g&&_!==""&&_!==null&&(A.value=_)}function Ca(A,f){if(f){var g=A.firstChild;if(g&&g===A.lastChild&&g.nodeType===3){g.nodeValue=f;return}}A.textContent=f}var yi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(A,f,g){var _=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":_?A.setProperty(f,g):typeof g!="number"||g===0||yi.has(f)?f==="float"?A.cssFloat=g:A[f]=(""+g).trim():A[f]=g+"px"}function nl(A,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(A=A.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?A.setProperty(_,""):_==="float"?A.cssFloat="":A[_]="");for(var U in f)_=f[U],f.hasOwnProperty(U)&&g[U]!==_&&Tc(A,U,_)}else for(var W in f)f.hasOwnProperty(W)&&Tc(A,W,f[W])}function Jl(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(A){return rl.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Fi=null;function Gr(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var _o=null,Di=null;function Dn(A){var f=Me(A);if(f&&(A=f.stateNode)){var g=A[Nr]||null;e:switch(A=f.stateNode,f.type){case"input":if(rs(A,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=A;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+_r(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var _=g[f];if(_!==A&&_.form===A.form){var U=_[Nr]||null;if(!U)throw Error(r(90));rs(_,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(f=0;f<g.length;f++)_=g[f],_.form===A.form&&Qn(_)}break e;case"textarea":Fn(A,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&_a(A,!!g.multiple,f,!1)}}}var bn=!1;function wi(A,f,g){if(bn)return A(f,g);bn=!0;try{var _=A(f);return _}finally{if(bn=!1,(_o!==null||Di!==null)&&(s1(),_o&&(f=_o,A=Di,Di=_o=null,Dn(f),A)))for(f=0;f<A.length;f++)Dn(A[f])}}function rr(A,f){var g=A.stateNode;if(g===null)return null;var _=g[Nr]||null;if(_===null)return null;g=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(A=A.type,_=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!_;break e;default:A=!1}if(A)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(bi)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{Ua=!1}var ni=null,ri=null,no=null;function sl(){if(no)return no;var A,f=ri,g=f.length,_,U="value"in ni?ni.value:ni.textContent,W=U.length;for(A=0;A<g&&f[A]===U[A];A++);var pe=g-A;for(_=1;_<=pe&&f[g-_]===U[W-_];_++);return no=U.slice(A,1<_?1-_:void 0)}function qr(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Ps(){return!0}function ro(){return!1}function Ks(A){function f(g,_,U,W,pe){this._reactName=g,this._targetInst=U,this.type=_,this.nativeEvent=W,this.target=pe,this.currentTarget=null;for(var Be in A)A.hasOwnProperty(Be)&&(g=A[Be],this[Be]=g?g(W):W[Be]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?Ps:ro,this.isPropagationStopped=ro,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),f}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=Ks(Cr),Ri=d({},Cr,{view:0,detail:0}),lu=Ks(Ri),Cl,er,so,ds=d({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:il,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==so&&(so&&A.type==="mousemove"?(Cl=A.screenX-so.screenX,er=A.screenY-so.screenY):er=Cl=0,so=A),Cl)},movementY:function(A){return"movementY"in A?A.movementY:er}}),Ss=Ks(ds),cu=d({},ds,{dataTransfer:0}),El=Ks(cu),ca=d({},Ri,{relatedTarget:0}),Sl=Ks(ca),Co=d({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Nc=Ks(Co),Zl=d({},Cr,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Tl=Ks(Zl),uu=d({},Cr,{data:0}),Ea=Ks(uu),Nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=_i[A])?!!f[A]:!1}function il(){return kl}var Bc=d({},Ri,{key:function(A){if(A.key){var f=Nl[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=qr(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Bl[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:il,charCode:function(A){return A.type==="keypress"?qr(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?qr(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),ol=Ks(Bc),ll=d({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Ks(ll),si=d({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:il}),kc=Ks(si),Y=d({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ge=Ks(Y),Ue=d({},ds,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Ks(Ue),Xe=d({},Cr,{newState:0,oldState:0}),gt=Ks(Xe),Rt=[9,13,27,32],qt=bi&&"CompositionEvent"in window,B=null;bi&&"documentMode"in document&&(B=document.documentMode);var ae=bi&&"TextEvent"in window&&!B,de=bi&&(!qt||B&&8<B&&11>=B),Te=" ",We=!1;function ot(A,f){switch(A){case"keyup":return Rt.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ln=!1;function gr(A,f){switch(A){case"compositionend":return Pt(f);case"keypress":return f.which!==32?null:(We=!0,Te);case"textInput":return A=f.data,A===Te&&We?null:A;default:return null}}function Yn(A,f){if(Ln)return A==="compositionend"||!qt&&ot(A,f)?(A=sl(),no=ri=ni=null,Ln=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return de&&f.locale!=="ko"?null:f.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!ar[A.type]:f==="textarea"}function Eo(A,f,g,_){_o?Di?Di.push(_):Di=[_]:_o=_,f=u1(f,"onChange"),0<f.length&&(g=new al("onChange","change",null,g,_),A.push({event:g,listeners:f}))}var Jr=null,Pi=null;function Ci(A){jB(A,0)}function Ic(A){var f=et(A);if(Qn(f))return A}function Fl(A,f){if(A==="change")return f}var Fc=!1;if(bi){var Ms;if(bi){var Dc="oninput"in document;if(!Dc){var Mi=document.createElement("div");Mi.setAttribute("oninput","return;"),Dc=typeof Mi.oninput=="function"}Ms=Dc}else Ms=!1;Fc=Ms&&(!document.documentMode||9<document.documentMode)}function Dl(){Jr&&(Jr.detachEvent("onpropertychange",ju),Pi=Jr=null)}function ju(A){if(A.propertyName==="value"&&Ic(Pi)){var f=[];Eo(f,Pi,A,Gr(A)),wi(Ci,f)}}function ai(A,f,g){A==="focusin"?(Dl(),Jr=f,Pi=g,Jr.attachEvent("onpropertychange",ju)):A==="focusout"&&Dl()}function $f(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Ic(Pi)}function ao(A,f){if(A==="click")return Ic(f)}function vd(A,f){if(A==="input"||A==="change")return Ic(f)}function Oa(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var Sa=typeof Object.is=="function"?Object.is:Oa;function ii(A,f){if(Sa(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var g=Object.keys(A),_=Object.keys(f);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var U=g[_];if(!he.call(f,U)||!Sa(A[U],f[U]))return!1}return!0}function Lc(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Ll(A,f){var g=Lc(A);A=0;for(var _;g;){if(g.nodeType===3){if(_=A+g.textContent.length,A<=f&&_>=f)return{node:g,offset:f-A};A=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Lc(g)}}function Rl(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?Rl(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function Ta(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=pr(A.document);f instanceof A.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)A=f.contentWindow;else break;f=pr(A.document)}return f}function ua(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var cl=bi&&"documentMode"in document&&11>=document.documentMode,Aa=null,Ui=null,So=null,To=!1;function Us(A,f,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;To||Aa==null||Aa!==pr(_)||(_=Aa,"selectionStart"in _&&ua(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),So&&ii(So,_)||(So=_,_=u1(Ui,"onSelect"),0<_.length&&(f=new al("onSelect","select",null,f,g),A.push({event:f,listeners:_}),f.target=Aa)))}function Oi(A,f){var g={};return g[A.toLowerCase()]=f.toLowerCase(),g["Webkit"+A]="webkit"+f,g["Moz"+A]="moz"+f,g}var ra={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionrun:Oi("Transition","TransitionRun"),transitionstart:Oi("Transition","TransitionStart"),transitioncancel:Oi("Transition","TransitionCancel"),transitionend:Oi("Transition","TransitionEnd")},Ei={},Au={};bi&&(Au=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function ul(A){if(Ei[A])return Ei[A];if(!ra[A])return A;var f=ra[A],g;for(g in f)if(f.hasOwnProperty(g)&&g in Au)return Ei[A]=f[g];return A}var Qu=ul("animationend"),ja=ul("animationiteration"),Al=ul("animationstart"),Rc=ul("transitionrun"),Pl=ul("transitionstart"),Hu=ul("transitioncancel"),ec=ul("transitionend"),tc=new Map,dl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dl.push("scrollEnd");function Os(A,f){tc.set(A,f),Bt(f,[A])}var Na=new WeakMap;function fr(A,f){if(typeof A=="object"&&A!==null){var g=Na.get(A);return g!==void 0?g:(f={value:A,source:f,stack:Pn(f)},Na.set(A,f),f)}return{value:A,source:f,stack:Pn(f)}}var hr=[],fs=0,Zr=0;function io(){for(var A=fs,f=Zr=fs=0;f<A;){var g=hr[f];hr[f++]=null;var _=hr[f];hr[f++]=null;var U=hr[f];hr[f++]=null;var W=hr[f];if(hr[f++]=null,_!==null&&U!==null){var pe=_.pending;pe===null?U.next=U:(U.next=pe.next,pe.next=U),_.pending=U}W!==0&&du(g,U,W)}}function nc(A,f,g,_){hr[fs++]=A,hr[fs++]=f,hr[fs++]=g,hr[fs++]=_,Zr|=_,A.lanes|=_,A=A.alternate,A!==null&&(A.lanes|=_)}function No(A,f,g,_){return nc(A,f,g,_),fl(A)}function rc(A,f){return nc(A,null,null,f),fl(A)}function du(A,f,g){A.lanes|=g;var _=A.alternate;_!==null&&(_.lanes|=g);for(var U=!1,W=A.return;W!==null;)W.childLanes|=g,_=W.alternate,_!==null&&(_.childLanes|=g),W.tag===22&&(A=W.stateNode,A===null||A._visibility&1||(U=!0)),A=W,W=W.return;return A.tag===3?(W=A.stateNode,U&&f!==null&&(U=31-Qt(g),A=W.hiddenUpdates,_=A[U],_===null?A[U]=[f]:_.push(f),f.lane=g|536870912),W):null}function fl(A){if(50<Qp)throw Qp=0,h_=null,Error(r(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var da={};function oo(A,f,g,_){this.tag=A,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(A,f,g,_){return new oo(A,f,g,_)}function fu(A){return A=A.prototype,!(!A||!A.isReactComponent)}function hl(A,f){var g=A.alternate;return g===null?(g=oi(A.tag,f,A.key,A.mode),g.elementType=A.elementType,g.type=A.type,g.stateNode=A.stateNode,g.alternate=A,A.alternate=g):(g.pendingProps=f,g.type=A.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=A.flags&65011712,g.childLanes=A.childLanes,g.lanes=A.lanes,g.child=A.child,g.memoizedProps=A.memoizedProps,g.memoizedState=A.memoizedState,g.updateQueue=A.updateQueue,f=A.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=A.sibling,g.index=A.index,g.ref=A.ref,g.refCleanup=A.refCleanup,g}function Vu(A,f){A.flags&=65011714;var g=A.alternate;return g===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=g.childLanes,A.lanes=g.lanes,A.child=g.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=g.memoizedProps,A.memoizedState=g.memoizedState,A.updateQueue=g.updateQueue,A.type=g.type,f=g.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function Pc(A,f,g,_,U,W){var pe=0;if(_=A,typeof A=="function")fu(A)&&(pe=1);else if(typeof A=="string")pe=AV(A,g,re.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case k:return A=oi(31,g,f,U),A.elementType=k,A.lanes=W,A;case C:return Ml(g.children,U,W,f);case y:pe=8,U|=24;break;case T:return A=oi(12,g,f,U|2),A.elementType=T,A.lanes=W,A;case Q:return A=oi(13,g,f,U),A.elementType=Q,A.lanes=W,A;case j:return A=oi(19,g,f,U),A.elementType=j,A.lanes=W,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case I:case M:pe=10;break e;case F:pe=9;break e;case O:pe=11;break e;case E:pe=14;break e;case S:pe=16,_=null;break e}pe=29,g=Error(r(130,A===null?"null":typeof A,"")),_=null}return f=oi(pe,g,f,U),f.elementType=A,f.type=_,f.lanes=W,f}function Ml(A,f,g,_){return A=oi(7,A,_,f),A.lanes=g,A}function yd(A,f,g){return A=oi(6,A,null,f),A.lanes=g,A}function zu(A,f,g){return f=oi(4,A.children!==null?A.children:[],A.key,f),f.lanes=g,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var sc=[],ac=0,h=null,w=0,D=[],Z=0,Ae=null,Ce=1,Qe="";function rt(A,f){sc[ac++]=w,sc[ac++]=h,h=A,w=f}function ht(A,f,g){D[Z++]=Ce,D[Z++]=Qe,D[Z++]=Ae,Ae=A;var _=Ce;A=Qe;var U=32-Qt(_)-1;_&=~(1<<U),g+=1;var W=32-Qt(f)+U;if(30<W){var pe=U-U%5;W=(_&(1<<pe)-1).toString(32),_>>=pe,U-=pe,Ce=1<<32-Qt(f)+U|g<<U|_,Qe=W+A}else Ce=1<<W|g<<U|_,Qe=A}function Ft(A){A.return!==null&&(rt(A,1),ht(A,1,0))}function an(A){for(;A===h;)h=sc[--ac],sc[ac]=null,w=sc[--ac],sc[ac]=null;for(;A===Ae;)Ae=D[--Z],D[Z]=null,Qe=D[--Z],D[Z]=null,Ce=D[--Z],D[Z]=null}var dn=null,xn=null,zn=!1,gs=null,$s=!1,li=Error(r(519));function Bo(A){var f=Error(r(418,""));throw hu(fr(f,A)),li}function u0(A){var f=A.stateNode,g=A.type,_=A.memoizedProps;switch(f[Rr]=A,f[Nr]=_,g){case"dialog":Ur("cancel",f),Ur("close",f);break;case"iframe":case"object":case"embed":Ur("load",f);break;case"video":case"audio":for(g=0;g<Vp.length;g++)Ur(Vp[g],f);break;case"source":Ur("error",f);break;case"img":case"image":case"link":Ur("error",f),Ur("load",f);break;case"details":Ur("toggle",f);break;case"input":Ur("invalid",f),_l(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),bo(f);break;case"select":Ur("invalid",f);break;case"textarea":Ur("invalid",f),ti(f,_.value,_.defaultValue,_.children),bo(f)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||_.suppressHydrationWarning===!0||zB(f.textContent,g)?(_.popover!=null&&(Ur("beforetoggle",f),Ur("toggle",f)),_.onScroll!=null&&Ur("scroll",f),_.onScrollEnd!=null&&Ur("scrollend",f),_.onClick!=null&&(f.onclick=A1),f=!0):f=!1,f||Bo(A)}function ic(A){for(dn=A.return;dn;)switch(dn.tag){case 5:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:dn=dn.return}}function Si(A){if(A!==dn)return!1;if(!zn)return ic(A),zn=!0,!1;var f=A.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=A.type,g=!(g!=="form"&&g!=="button")||k_(A.type,A.memoizedProps)),g=!g),g&&xn&&Bo(A),ic(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(g=A.data,g==="/$"){if(f===0){xn=wu(A.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;A=A.nextSibling}xn=null}}else f===27?(f=xn,Pd(A.type)?(A=L_,L_=null,xn=A):xn=f):xn=dn?wu(A.stateNode.nextSibling):null;return!0}function ji(){xn=dn=null,zn=!1}function A0(){var A=gs;return A!==null&&(Ql===null?Ql=A:Ql.push.apply(Ql,A),gs=null),A}function hu(A){gs===null?gs=[A]:gs.push(A)}var es=ce(null),Ws=null,oc=null;function Mc(A,f,g){J(es,f._currentValue),f._currentValue=g}function Ul(A){A._currentValue=es.current,V(es)}function Gu(A,f,g){for(;A!==null;){var _=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),A===g)break;A=A.return}}function kA(A,f,g,_){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var W=U.dependencies;if(W!==null){var pe=U.child;W=W.firstContext;e:for(;W!==null;){var Be=W;W=U;for(var He=0;He<f.length;He++)if(Be.context===f[He]){W.lanes|=g,Be=W.alternate,Be!==null&&(Be.lanes|=g),Gu(W.return,g,A),_||(pe=null);break e}W=Be.next}}else if(U.tag===18){if(pe=U.return,pe===null)throw Error(r(341));pe.lanes|=g,W=pe.alternate,W!==null&&(W.lanes|=g),Gu(pe,g,A),pe=null}else pe=U.child;if(pe!==null)pe.return=U;else for(pe=U;pe!==null;){if(pe===A){pe=null;break}if(U=pe.sibling,U!==null){U.return=pe.return,pe=U;break}pe=pe.return}U=pe}}function qu(A,f,g,_){A=null;for(var U=f,W=!1;U!==null;){if(!W){if((U.flags&524288)!==0)W=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var pe=U.alternate;if(pe===null)throw Error(r(387));if(pe=pe.memoizedProps,pe!==null){var Be=U.type;Sa(U.pendingProps.value,pe.value)||(A!==null?A.push(Be):A=[Be])}}else if(U===Se.current){if(pe=U.alternate,pe===null)throw Error(r(387));pe.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Wp):A=[Wp])}U=U.return}A!==null&&kA(f,A,g,_),f.flags|=262144}function d0(A){for(A=A.firstContext;A!==null;){if(!Sa(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Uc(A){Ws=A,oc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Qa(A){return f0(Ws,A)}function Ku(A,f){return Ws===null&&Uc(A),f0(A,f)}function f0(A,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},oc===null){if(A===null)throw Error(r(308));oc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else oc=oc.next=f;return g}var Ob=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(g,_){A.push(_)}};this.abort=function(){f.aborted=!0,A.forEach(function(g){return g()})}},Iv=t.unstable_scheduleCallback,jb=t.unstable_NormalPriority,Ha={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xp(){return{controller:new Ob,data:new Map,refCount:0}}function Wf(A){A.refCount--,A.refCount===0&&Iv(jb,function(){A.controller.abort()})}var Yf=null,vp=0,IA=0,mu=null;function Qb(A,f){if(Yf===null){var g=Yf=[];vp=0,IA=w_(),mu={status:"pending",value:void 0,then:function(_){g.push(_)}}}return vp++,f.then(Fv,Fv),f}function Fv(){if(--vp===0&&Yf!==null){mu!==null&&(mu.status="fulfilled");var A=Yf;Yf=null,IA=0,mu=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function Dv(A,f){var g=[],_={status:"pending",value:null,reason:null,then:function(U){g.push(U)}};return A.then(function(){_.status="fulfilled",_.value=f;for(var U=0;U<g.length;U++)(0,g[U])(f)},function(U){for(_.status="rejected",_.reason=U,U=0;U<g.length;U++)(0,g[U])(void 0)}),_}var N=ee.S;ee.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Qb(A,f),N!==null&&N(A,f)};var H=ce(null);function te(){var A=H.current;return A!==null?A:Qs.pooledCache}function ue(A,f){f===null?J(H,H.current):J(H,f.pool)}function xe(){var A=te();return A===null?null:{parent:Ha._currentValue,pool:A}}var _e=Error(r(460)),Ee=Error(r(474)),Ne=Error(r(542)),ke={then:function(){}};function Re(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Ge(){}function ut(A,f,g){switch(g=A[g],g===void 0?A.push(f):g!==f&&(f.then(Ge,Ge),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,kt(A),A;default:if(typeof f.status=="string")f.then(Ge,Ge);else{if(A=Qs,A!==null&&100<A.shellSuspendCounter)throw Error(r(482));A=f,A.status="pending",A.then(function(_){if(f.status==="pending"){var U=f;U.status="fulfilled",U.value=_}},function(_){if(f.status==="pending"){var U=f;U.status="rejected",U.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,kt(A),A}throw it=f,_e}}var it=null;function Ze(){if(it===null)throw Error(r(459));var A=it;return it=null,A}function kt(A){if(A===_e||A===Ne)throw Error(r(483))}var pt=!1;function qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ye(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function bt(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function It(A,f,g){var _=A.updateQueue;if(_===null)return null;if(_=_.shared,(vs&2)!==0){var U=_.pending;return U===null?f.next=f:(f.next=U.next,U.next=f),_.pending=f,f=fl(A),du(A,null,g),f}return nc(A,_,f,g),fl(A)}function Et(A,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var _=f.lanes;_&=A.pendingLanes,g|=_,f.lanes=g,Ar(A,g)}}function ln(A,f){var g=A.updateQueue,_=A.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var U=null,W=null;if(g=g.firstBaseUpdate,g!==null){do{var pe={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};W===null?U=W=pe:W=W.next=pe,g=g.next}while(g!==null);W===null?U=W=f:W=W.next=f}else U=W=f;g={baseState:_.baseState,firstBaseUpdate:U,lastBaseUpdate:W,shared:_.shared,callbacks:_.callbacks},A.updateQueue=g;return}A=g.lastBaseUpdate,A===null?g.firstBaseUpdate=f:A.next=f,g.lastBaseUpdate=f}var en=!1;function yn(){if(en){var A=mu;if(A!==null)throw A}}function nn(A,f,g,_){en=!1;var U=A.updateQueue;pt=!1;var W=U.firstBaseUpdate,pe=U.lastBaseUpdate,Be=U.shared.pending;if(Be!==null){U.shared.pending=null;var He=Be,At=He.next;He.next=null,pe===null?W=At:pe.next=At,pe=He;var Ct=A.alternate;Ct!==null&&(Ct=Ct.updateQueue,Be=Ct.lastBaseUpdate,Be!==pe&&(Be===null?Ct.firstBaseUpdate=At:Be.next=At,Ct.lastBaseUpdate=He))}if(W!==null){var Dt=U.baseState;pe=0,Ct=At=He=null,Be=W;do{var ft=Be.lane&-536870913,mt=ft!==Be.lane;if(mt?(Wr&ft)===ft:(_&ft)===ft){ft!==0&&ft===IA&&(en=!0),Ct!==null&&(Ct=Ct.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var Xn=A,jn=Be;ft=f;var Ns=g;switch(jn.tag){case 1:if(Xn=jn.payload,typeof Xn=="function"){Dt=Xn.call(Ns,Dt,ft);break e}Dt=Xn;break e;case 3:Xn.flags=Xn.flags&-65537|128;case 0:if(Xn=jn.payload,ft=typeof Xn=="function"?Xn.call(Ns,Dt,ft):Xn,ft==null)break e;Dt=d({},Dt,ft);break e;case 2:pt=!0}}ft=Be.callback,ft!==null&&(A.flags|=64,mt&&(A.flags|=8192),mt=U.callbacks,mt===null?U.callbacks=[ft]:mt.push(ft))}else mt={lane:ft,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Ct===null?(At=Ct=mt,He=Dt):Ct=Ct.next=mt,pe|=ft;if(Be=Be.next,Be===null){if(Be=U.shared.pending,Be===null)break;mt=Be,Be=mt.next,mt.next=null,U.lastBaseUpdate=mt,U.shared.pending=null}}while(!0);Ct===null&&(He=Dt),U.baseState=He,U.firstBaseUpdate=At,U.lastBaseUpdate=Ct,W===null&&(U.shared.lanes=0),Fd|=pe,A.lanes=pe,A.memoizedState=Dt}}function Kr(A,f){if(typeof A!="function")throw Error(r(191,A));A.call(f)}function ss(A,f){var g=A.callbacks;if(g!==null)for(A.callbacks=null,A=0;A<g.length;A++)Kr(g[A],f)}var Er=ce(null),xr=ce(0);function hs(A,f){A=QA,J(xr,A),J(Er,f),QA=A|f.baseLanes}function as(){J(xr,QA),J(Er,Er.current)}function tr(){QA=xr.current,V(Er),V(xr)}var xs=0,kn=null,Gn=null,zr=null,$r=!1,ci=!1,Va=!1,fa=0,ha=0,Ba=null,Ol=0;function is(){throw Error(r(321))}function ka(A,f){if(f===null)return!1;for(var g=0;g<f.length&&g<A.length;g++)if(!Sa(A[g],f[g]))return!1;return!0}function lc(A,f,g,_,U,W){return xs=W,kn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ee.H=A===null||A.memoizedState===null?CN:EN,Va=!1,W=g(_,U),Va=!1,ci&&(W=FA(f,g,_,U)),$u(A),W}function $u(A){ee.H=Gv;var f=Gn!==null&&Gn.next!==null;if(xs=0,zr=Gn=kn=null,$r=!1,ha=0,Ba=null,f)throw Error(r(300));A===null||Qi||(A=A.dependencies,A!==null&&d0(A)&&(Qi=!0))}function FA(A,f,g,_){kn=A;var U=0;do{if(ci&&(Ba=null),ha=0,ci=!1,25<=U)throw Error(r(301));if(U+=1,zr=Gn=null,A.updateQueue!=null){var W=A.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}ee.H=b9,W=f(g,_)}while(ci);return W}function Wu(){var A=ee.H,f=A.useState()[0];return f=typeof f.then=="function"?Yu(f):f,A=A.useState()[0],(Gn!==null?Gn.memoizedState:null)!==A&&(kn.flags|=1024),f}function js(){var A=fa!==0;return fa=0,A}function Xf(A,f,g){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~g}function h0(A){if($r){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}$r=!1}xs=0,zr=Gn=kn=null,ci=!1,ha=fa=0,Ba=null}function lo(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?kn.memoizedState=zr=A:zr=zr.next=A,zr}function Ys(){if(Gn===null){var A=kn.alternate;A=A!==null?A.memoizedState:null}else A=Gn.next;var f=zr===null?kn.memoizedState:zr.next;if(f!==null)zr=f,Gn=A;else{if(A===null)throw kn.alternate===null?Error(r(467)):Error(r(310));Gn=A,A={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},zr===null?kn.memoizedState=zr=A:zr=zr.next=A}return zr}function DA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yu(A){var f=ha;return ha+=1,Ba===null&&(Ba=[]),A=ut(Ba,A,f),f=kn,(zr===null?f.memoizedState:zr.next)===null&&(f=f.alternate,ee.H=f===null||f.memoizedState===null?CN:EN),A}function ko(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Yu(A);if(A.$$typeof===M)return Qa(A)}throw Error(r(438,String(A)))}function Xu(A){var f=null,g=kn.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var _=kn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(U){return U.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=DA(),kn.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(A),_=0;_<A;_++)g[_]=z;return f.index++,g}function Io(A,f){return typeof f=="function"?f(A):f}function Jf(A){var f=Ys();return wd(f,Gn,A)}function wd(A,f,g){var _=A.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var U=A.baseQueue,W=_.pending;if(W!==null){if(U!==null){var pe=U.next;U.next=W.next,W.next=pe}f.baseQueue=U=W,_.pending=null}if(W=A.baseState,U===null)A.memoizedState=W;else{f=U.next;var Be=pe=null,He=null,At=f,Ct=!1;do{var Dt=At.lane&-536870913;if(Dt!==At.lane?(Wr&Dt)===Dt:(xs&Dt)===Dt){var ft=At.revertLane;if(ft===0)He!==null&&(He=He.next={lane:0,revertLane:0,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null}),Dt===IA&&(Ct=!0);else if((xs&ft)===ft){At=At.next,ft===IA&&(Ct=!0);continue}else Dt={lane:0,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},He===null?(Be=He=Dt,pe=W):He=He.next=Dt,kn.lanes|=ft,Fd|=ft;Dt=At.action,Va&&g(W,Dt),W=At.hasEagerState?At.eagerState:g(W,Dt)}else ft={lane:Dt,revertLane:At.revertLane,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null},He===null?(Be=He=ft,pe=W):He=He.next=ft,kn.lanes|=Dt,Fd|=Dt;At=At.next}while(At!==null&&At!==f);if(He===null?pe=W:He.next=Be,!Sa(W,A.memoizedState)&&(Qi=!0,Ct&&(g=mu,g!==null)))throw g;A.memoizedState=W,A.baseState=pe,A.baseQueue=He,_.lastRenderedState=W}return U===null&&(_.lanes=0),[A.memoizedState,_.dispatch]}function m0(A){var f=Ys(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=A;var _=g.dispatch,U=g.pending,W=f.memoizedState;if(U!==null){g.pending=null;var pe=U=U.next;do W=A(W,pe.action),pe=pe.next;while(pe!==U);Sa(W,f.memoizedState)||(Qi=!0),f.memoizedState=W,f.baseQueue===null&&(f.baseState=W),g.lastRenderedState=W}return[W,_]}function Zf(A,f,g){var _=kn,U=Ys(),W=zn;if(W){if(g===void 0)throw Error(r(407));g=g()}else g=f();var pe=!Sa((Gn||U).memoizedState,g);pe&&(U.memoizedState=g,Qi=!0),U=U.queue;var Be=bd.bind(null,_,U,A);if(Ed(2048,8,Be,[A]),U.getSnapshot!==f||pe||zr!==null&&zr.memoizedState.tag&1){if(_.flags|=2048,gu(9,rh(),eh.bind(null,_,U,g,f),null),Qs===null)throw Error(r(349));W||(xs&124)!==0||p0(_,f,g)}return g}function p0(A,f,g){A.flags|=16384,A={getSnapshot:f,value:g},f=kn.updateQueue,f===null?(f=DA(),kn.updateQueue=f,f.stores=[A]):(g=f.stores,g===null?f.stores=[A]:g.push(A))}function eh(A,f,g,_){f.value=g,f.getSnapshot=_,Lv(f)&&Rv(A)}function bd(A,f,g){return g(function(){Lv(f)&&Rv(A)})}function Lv(A){var f=A.getSnapshot;A=A.value;try{var g=f();return!Sa(A,g)}catch{return!0}}function Rv(A){var f=rc(A,2);f!==null&&hc(f,A,2)}function th(A){var f=lo();if(typeof A=="function"){var g=A;if(A=g(),Va){sn(!0);try{g()}finally{sn(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:A},f}function pu(A,f,g,_){return A.baseState=g,wd(A,Gn,typeof _=="function"?_:Io)}function Hb(A,f,g,_,U){if(zv(A))throw Error(r(485));if(A=f.action,A!==null){var W={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){W.listeners.push(pe)}};ee.T!==null?g(!0):W.isTransition=!1,_(W),g=f.pending,g===null?(W.next=f.pending=W,Pv(f,W)):(W.next=g.next,f.pending=g.next=W)}}function Pv(A,f){var g=f.action,_=f.payload,U=A.state;if(f.isTransition){var W=ee.T,pe={};ee.T=pe;try{var Be=g(U,_),He=ee.S;He!==null&&He(pe,Be),Mv(A,f,Be)}catch(At){_d(A,f,At)}finally{ee.T=W}}else try{W=g(U,_),Mv(A,f,W)}catch(At){_d(A,f,At)}}function Mv(A,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){yp(A,f,_)},function(_){return _d(A,f,_)}):yp(A,f,g)}function yp(A,f,g){f.status="fulfilled",f.value=g,wp(f),A.state=g,f=A.pending,f!==null&&(g=f.next,g===f?A.pending=null:(g=g.next,f.next=g,Pv(A,g)))}function _d(A,f,g){var _=A.pending;if(A.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=g,wp(f),f=f.next;while(f!==_)}A.action=null}function wp(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function bp(A,f){return f}function nh(A,f){if(zn){var g=Qs.formState;if(g!==null){e:{var _=kn;if(zn){if(xn){t:{for(var U=xn,W=$s;U.nodeType!==8;){if(!W){U=null;break t}if(U=wu(U.nextSibling),U===null){U=null;break t}}W=U.data,U=W==="F!"||W==="F"?U:null}if(U){xn=wu(U.nextSibling),_=U.data==="F!";break e}}Bo(_)}_=!1}_&&(f=g[0])}}return g=lo(),g.memoizedState=g.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:f},g.queue=_,g=wN.bind(null,kn,_),_.dispatch=g,_=th(!1),W=Vb.bind(null,kn,!1,_.queue),_=lo(),U={state:f,dispatch:null,action:A,pending:null},_.queue=U,g=Hb.bind(null,kn,U,W,g),U.dispatch=g,_.memoizedState=A,[f,g,!1]}function g0(A){var f=Ys();return Cd(f,Gn,A)}function Cd(A,f,g){if(f=wd(A,f,bp)[0],A=Jf(Io)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=Yu(f)}catch(pe){throw pe===_e?Ne:pe}else _=f;f=Ys();var U=f.queue,W=U.dispatch;return g!==f.memoizedState&&(kn.flags|=2048,gu(9,rh(),Uv.bind(null,U,g),null)),[_,W,A]}function Uv(A,f){A.action=f}function Ov(A){var f=Ys(),g=Gn;if(g!==null)return Cd(f,g,A);Ys(),f=f.memoizedState,g=Ys();var _=g.queue.dispatch;return g.memoizedState=A,[f,_,!1]}function gu(A,f,g,_){return A={tag:A,create:g,deps:_,inst:f,next:null},f=kn.updateQueue,f===null&&(f=DA(),kn.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=A.next=A:(_=g.next,g.next=A,A.next=_,f.lastEffect=A),A}function rh(){return{destroy:void 0,resource:void 0}}function x0(){return Ys().memoizedState}function cc(A,f,g,_){var U=lo();_=_===void 0?null:_,kn.flags|=A,U.memoizedState=gu(1|f,rh(),g,_)}function Ed(A,f,g,_){var U=Ys();_=_===void 0?null:_;var W=U.memoizedState.inst;Gn!==null&&_!==null&&ka(_,Gn.memoizedState.deps)?U.memoizedState=gu(f,W,g,_):(kn.flags|=A,U.memoizedState=gu(1|f,W,g,_))}function _p(A,f){cc(8390656,8,A,f)}function jv(A,f){Ed(2048,8,A,f)}function Cp(A,f){return Ed(4,2,A,f)}function LA(A,f){return Ed(4,4,A,f)}function Qv(A,f){if(typeof f=="function"){A=A();var g=f(A);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function Ep(A,f,g){g=g!=null?g.concat([A]):null,Ed(4,4,Qv.bind(null,f,A),g)}function Sp(){}function Tp(A,f){var g=Ys();f=f===void 0?null:f;var _=g.memoizedState;return f!==null&&ka(f,_[1])?_[0]:(g.memoizedState=[A,f],A)}function Hv(A,f){var g=Ys();f=f===void 0?null:f;var _=g.memoizedState;if(f!==null&&ka(f,_[1]))return _[0];if(_=A(),Va){sn(!0);try{A()}finally{sn(!1)}}return g.memoizedState=[_,f],_}function RA(A,f,g){return g===void 0||(xs&1073741824)!==0?A.memoizedState=f:(A.memoizedState=g,A=gB(),kn.lanes|=A,Fd|=A,g)}function v0(A,f,g,_){return Sa(g,f)?g:Er.current!==null?(A=RA(A,g,_),Sa(A,f)||(Qi=!0),A):(xs&42)===0?(Qi=!0,A.memoizedState=g):(A=gB(),kn.lanes|=A,Fd|=A,f)}function sh(A,f,g,_,U){var W=oe.p;oe.p=W!==0&&8>W?W:8;var pe=ee.T,Be={};ee.T=Be,Vb(A,!1,f,g);try{var He=U(),At=ee.S;if(At!==null&&At(Be,He),He!==null&&typeof He=="object"&&typeof He.then=="function"){var Ct=Dv(He,_);Ip(A,f,Ct,fc(A))}else Ip(A,f,_,fc(A))}catch(Dt){Ip(A,f,{then:function(){},status:"rejected",reason:Dt},fc())}finally{oe.p=W,ee.T=pe}}function xu(){}function Oc(A,f,g,_){if(A.tag!==5)throw Error(r(476));var U=vu(A).queue;sh(A,U,f,K,g===null?xu:function(){return ah(A),g(_)})}function vu(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:K},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:g},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function ah(A){var f=vu(A).next.queue;Ip(A,f,{},fc())}function ih(){return Qa(Wp)}function Np(){return Ys().memoizedState}function Vv(){return Ys().memoizedState}function Bp(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var g=fc();A=bt(g);var _=It(f,A,g);_!==null&&(hc(_,f,g),Et(_,f,g)),f={cache:xp()},A.payload=f;return}f=f.return}}function kp(A,f,g){var _=fc();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},zv(A)?bN(f,g):(g=No(A,f,g,_),g!==null&&(hc(g,A,_),_N(g,f,_)))}function wN(A,f,g){var _=fc();Ip(A,f,g,_)}function Ip(A,f,g,_){var U={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(zv(A))bN(f,U);else{var W=A.alternate;if(A.lanes===0&&(W===null||W.lanes===0)&&(W=f.lastRenderedReducer,W!==null))try{var pe=f.lastRenderedState,Be=W(pe,g);if(U.hasEagerState=!0,U.eagerState=Be,Sa(Be,pe))return nc(A,f,U,0),Qs===null&&io(),!1}catch{}finally{}if(g=No(A,f,U,_),g!==null)return hc(g,A,_),_N(g,f,_),!0}return!1}function Vb(A,f,g,_){if(_={lane:2,revertLane:w_(),action:_,hasEagerState:!1,eagerState:null,next:null},zv(A)){if(f)throw Error(r(479))}else f=No(A,g,_,2),f!==null&&hc(f,A,2)}function zv(A){var f=A.alternate;return A===kn||f!==null&&f===kn}function bN(A,f){ci=$r=!0;var g=A.pending;g===null?f.next=f:(f.next=g.next,g.next=f),A.pending=f}function _N(A,f,g){if((g&4194048)!==0){var _=f.lanes;_&=A.pendingLanes,g|=_,f.lanes=g,Ar(A,g)}}var Gv={readContext:Qa,use:ko,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useInsertionEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useSyncExternalStore:is,useId:is,useHostTransitionStatus:is,useFormState:is,useActionState:is,useOptimistic:is,useMemoCache:is,useCacheRefresh:is},CN={readContext:Qa,use:ko,useCallback:function(A,f){return lo().memoizedState=[A,f===void 0?null:f],A},useContext:Qa,useEffect:_p,useImperativeHandle:function(A,f,g){g=g!=null?g.concat([A]):null,cc(4194308,4,Qv.bind(null,f,A),g)},useLayoutEffect:function(A,f){return cc(4194308,4,A,f)},useInsertionEffect:function(A,f){cc(4,2,A,f)},useMemo:function(A,f){var g=lo();f=f===void 0?null:f;var _=A();if(Va){sn(!0);try{A()}finally{sn(!1)}}return g.memoizedState=[_,f],_},useReducer:function(A,f,g){var _=lo();if(g!==void 0){var U=g(f);if(Va){sn(!0);try{g(f)}finally{sn(!1)}}}else U=f;return _.memoizedState=_.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},_.queue=A,A=A.dispatch=kp.bind(null,kn,A),[_.memoizedState,A]},useRef:function(A){var f=lo();return A={current:A},f.memoizedState=A},useState:function(A){A=th(A);var f=A.queue,g=wN.bind(null,kn,f);return f.dispatch=g,[A.memoizedState,g]},useDebugValue:Sp,useDeferredValue:function(A,f){var g=lo();return RA(g,A,f)},useTransition:function(){var A=th(!1);return A=sh.bind(null,kn,A.queue,!0,!1),lo().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,g){var _=kn,U=lo();if(zn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),Qs===null)throw Error(r(349));(Wr&124)!==0||p0(_,f,g)}U.memoizedState=g;var W={value:g,getSnapshot:f};return U.queue=W,_p(bd.bind(null,_,W,A),[A]),_.flags|=2048,gu(9,rh(),eh.bind(null,_,W,g,f),null),g},useId:function(){var A=lo(),f=Qs.identifierPrefix;if(zn){var g=Qe,_=Ce;g=(_&~(1<<32-Qt(_)-1)).toString(32)+g,f="«"+f+"R"+g,g=fa++,0<g&&(f+="H"+g.toString(32)),f+="»"}else g=Ol++,f="«"+f+"r"+g.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:ih,useFormState:nh,useActionState:nh,useOptimistic:function(A){var f=lo();f.memoizedState=f.baseState=A;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=Vb.bind(null,kn,!0,g),g.dispatch=f,[A,f]},useMemoCache:Xu,useCacheRefresh:function(){return lo().memoizedState=Bp.bind(null,kn)}},EN={readContext:Qa,use:ko,useCallback:Tp,useContext:Qa,useEffect:jv,useImperativeHandle:Ep,useInsertionEffect:Cp,useLayoutEffect:LA,useMemo:Hv,useReducer:Jf,useRef:x0,useState:function(){return Jf(Io)},useDebugValue:Sp,useDeferredValue:function(A,f){var g=Ys();return v0(g,Gn.memoizedState,A,f)},useTransition:function(){var A=Jf(Io)[0],f=Ys().memoizedState;return[typeof A=="boolean"?A:Yu(A),f]},useSyncExternalStore:Zf,useId:Np,useHostTransitionStatus:ih,useFormState:g0,useActionState:g0,useOptimistic:function(A,f){var g=Ys();return pu(g,Gn,A,f)},useMemoCache:Xu,useCacheRefresh:Vv},b9={readContext:Qa,use:ko,useCallback:Tp,useContext:Qa,useEffect:jv,useImperativeHandle:Ep,useInsertionEffect:Cp,useLayoutEffect:LA,useMemo:Hv,useReducer:m0,useRef:x0,useState:function(){return m0(Io)},useDebugValue:Sp,useDeferredValue:function(A,f){var g=Ys();return Gn===null?RA(g,A,f):v0(g,Gn.memoizedState,A,f)},useTransition:function(){var A=m0(Io)[0],f=Ys().memoizedState;return[typeof A=="boolean"?A:Yu(A),f]},useSyncExternalStore:Zf,useId:Np,useHostTransitionStatus:ih,useFormState:Ov,useActionState:Ov,useOptimistic:function(A,f){var g=Ys();return Gn!==null?pu(g,Gn,A,f):(g.baseState=A,[A,g.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:Vv},y0=null,Fp=0;function qv(A){var f=Fp;return Fp+=1,y0===null&&(y0=[]),ut(y0,A,f)}function Dp(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function Kv(A,f){throw f.$$typeof===m?Error(r(525)):(A=Object.prototype.toString.call(f),Error(r(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function SN(A){var f=A._init;return f(A._payload)}function TN(A){function f(tt,$e){if(A){var lt=tt.deletions;lt===null?(tt.deletions=[$e],tt.flags|=16):lt.push($e)}}function g(tt,$e){if(!A)return null;for(;$e!==null;)f(tt,$e),$e=$e.sibling;return null}function _(tt){for(var $e=new Map;tt!==null;)tt.key!==null?$e.set(tt.key,tt):$e.set(tt.index,tt),tt=tt.sibling;return $e}function U(tt,$e){return tt=hl(tt,$e),tt.index=0,tt.sibling=null,tt}function W(tt,$e,lt){return tt.index=lt,A?(lt=tt.alternate,lt!==null?(lt=lt.index,lt<$e?(tt.flags|=67108866,$e):lt):(tt.flags|=67108866,$e)):(tt.flags|=1048576,$e)}function pe(tt){return A&&tt.alternate===null&&(tt.flags|=67108866),tt}function Be(tt,$e,lt,Nt){return $e===null||$e.tag!==6?($e=yd(lt,tt.mode,Nt),$e.return=tt,$e):($e=U($e,lt),$e.return=tt,$e)}function He(tt,$e,lt,Nt){var pn=lt.type;return pn===C?Ct(tt,$e,lt.props.children,Nt,lt.key):$e!==null&&($e.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===S&&SN(pn)===$e.type)?($e=U($e,lt.props),Dp($e,lt),$e.return=tt,$e):($e=Pc(lt.type,lt.key,lt.props,null,tt.mode,Nt),Dp($e,lt),$e.return=tt,$e)}function At(tt,$e,lt,Nt){return $e===null||$e.tag!==4||$e.stateNode.containerInfo!==lt.containerInfo||$e.stateNode.implementation!==lt.implementation?($e=zu(lt,tt.mode,Nt),$e.return=tt,$e):($e=U($e,lt.children||[]),$e.return=tt,$e)}function Ct(tt,$e,lt,Nt,pn){return $e===null||$e.tag!==7?($e=Ml(lt,tt.mode,Nt,pn),$e.return=tt,$e):($e=U($e,lt),$e.return=tt,$e)}function Dt(tt,$e,lt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return $e=yd(""+$e,tt.mode,lt),$e.return=tt,$e;if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:return lt=Pc($e.type,$e.key,$e.props,null,tt.mode,lt),Dp(lt,$e),lt.return=tt,lt;case x:return $e=zu($e,tt.mode,lt),$e.return=tt,$e;case S:var Nt=$e._init;return $e=Nt($e._payload),Dt(tt,$e,lt)}if(le($e)||R($e))return $e=Ml($e,tt.mode,lt,null),$e.return=tt,$e;if(typeof $e.then=="function")return Dt(tt,qv($e),lt);if($e.$$typeof===M)return Dt(tt,Ku(tt,$e),lt);Kv(tt,$e)}return null}function ft(tt,$e,lt,Nt){var pn=$e!==null?$e.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return pn!==null?null:Be(tt,$e,""+lt,Nt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:return lt.key===pn?He(tt,$e,lt,Nt):null;case x:return lt.key===pn?At(tt,$e,lt,Nt):null;case S:return pn=lt._init,lt=pn(lt._payload),ft(tt,$e,lt,Nt)}if(le(lt)||R(lt))return pn!==null?null:Ct(tt,$e,lt,Nt,null);if(typeof lt.then=="function")return ft(tt,$e,qv(lt),Nt);if(lt.$$typeof===M)return ft(tt,$e,Ku(tt,lt),Nt);Kv(tt,lt)}return null}function mt(tt,$e,lt,Nt,pn){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return tt=tt.get(lt)||null,Be($e,tt,""+Nt,pn);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case p:return tt=tt.get(Nt.key===null?lt:Nt.key)||null,He($e,tt,Nt,pn);case x:return tt=tt.get(Nt.key===null?lt:Nt.key)||null,At($e,tt,Nt,pn);case S:var kr=Nt._init;return Nt=kr(Nt._payload),mt(tt,$e,lt,Nt,pn)}if(le(Nt)||R(Nt))return tt=tt.get(lt)||null,Ct($e,tt,Nt,pn,null);if(typeof Nt.then=="function")return mt(tt,$e,lt,qv(Nt),pn);if(Nt.$$typeof===M)return mt(tt,$e,lt,Ku($e,Nt),pn);Kv($e,Nt)}return null}function Xn(tt,$e,lt,Nt){for(var pn=null,kr=null,_n=$e,Hn=$e=0,Vi=null;_n!==null&&Hn<lt.length;Hn++){_n.index>Hn?(Vi=_n,_n=null):Vi=_n.sibling;var os=ft(tt,_n,lt[Hn],Nt);if(os===null){_n===null&&(_n=Vi);break}A&&_n&&os.alternate===null&&f(tt,_n),$e=W(os,$e,Hn),kr===null?pn=os:kr.sibling=os,kr=os,_n=Vi}if(Hn===lt.length)return g(tt,_n),zn&&rt(tt,Hn),pn;if(_n===null){for(;Hn<lt.length;Hn++)_n=Dt(tt,lt[Hn],Nt),_n!==null&&($e=W(_n,$e,Hn),kr===null?pn=_n:kr.sibling=_n,kr=_n);return zn&&rt(tt,Hn),pn}for(_n=_(_n);Hn<lt.length;Hn++)Vi=mt(_n,tt,Hn,lt[Hn],Nt),Vi!==null&&(A&&Vi.alternate!==null&&_n.delete(Vi.key===null?Hn:Vi.key),$e=W(Vi,$e,Hn),kr===null?pn=Vi:kr.sibling=Vi,kr=Vi);return A&&_n.forEach(function(Qd){return f(tt,Qd)}),zn&&rt(tt,Hn),pn}function jn(tt,$e,lt,Nt){if(lt==null)throw Error(r(151));for(var pn=null,kr=null,_n=$e,Hn=$e=0,Vi=null,os=lt.next();_n!==null&&!os.done;Hn++,os=lt.next()){_n.index>Hn?(Vi=_n,_n=null):Vi=_n.sibling;var Qd=ft(tt,_n,os.value,Nt);if(Qd===null){_n===null&&(_n=Vi);break}A&&_n&&Qd.alternate===null&&f(tt,_n),$e=W(Qd,$e,Hn),kr===null?pn=Qd:kr.sibling=Qd,kr=Qd,_n=Vi}if(os.done)return g(tt,_n),zn&&rt(tt,Hn),pn;if(_n===null){for(;!os.done;Hn++,os=lt.next())os=Dt(tt,os.value,Nt),os!==null&&($e=W(os,$e,Hn),kr===null?pn=os:kr.sibling=os,kr=os);return zn&&rt(tt,Hn),pn}for(_n=_(_n);!os.done;Hn++,os=lt.next())os=mt(_n,tt,Hn,os.value,Nt),os!==null&&(A&&os.alternate!==null&&_n.delete(os.key===null?Hn:os.key),$e=W(os,$e,Hn),kr===null?pn=os:kr.sibling=os,kr=os);return A&&_n.forEach(function(_V){return f(tt,_V)}),zn&&rt(tt,Hn),pn}function Ns(tt,$e,lt,Nt){if(typeof lt=="object"&&lt!==null&&lt.type===C&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:e:{for(var pn=lt.key;$e!==null;){if($e.key===pn){if(pn=lt.type,pn===C){if($e.tag===7){g(tt,$e.sibling),Nt=U($e,lt.props.children),Nt.return=tt,tt=Nt;break e}}else if($e.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===S&&SN(pn)===$e.type){g(tt,$e.sibling),Nt=U($e,lt.props),Dp(Nt,lt),Nt.return=tt,tt=Nt;break e}g(tt,$e);break}else f(tt,$e);$e=$e.sibling}lt.type===C?(Nt=Ml(lt.props.children,tt.mode,Nt,lt.key),Nt.return=tt,tt=Nt):(Nt=Pc(lt.type,lt.key,lt.props,null,tt.mode,Nt),Dp(Nt,lt),Nt.return=tt,tt=Nt)}return pe(tt);case x:e:{for(pn=lt.key;$e!==null;){if($e.key===pn)if($e.tag===4&&$e.stateNode.containerInfo===lt.containerInfo&&$e.stateNode.implementation===lt.implementation){g(tt,$e.sibling),Nt=U($e,lt.children||[]),Nt.return=tt,tt=Nt;break e}else{g(tt,$e);break}else f(tt,$e);$e=$e.sibling}Nt=zu(lt,tt.mode,Nt),Nt.return=tt,tt=Nt}return pe(tt);case S:return pn=lt._init,lt=pn(lt._payload),Ns(tt,$e,lt,Nt)}if(le(lt))return Xn(tt,$e,lt,Nt);if(R(lt)){if(pn=R(lt),typeof pn!="function")throw Error(r(150));return lt=pn.call(lt),jn(tt,$e,lt,Nt)}if(typeof lt.then=="function")return Ns(tt,$e,qv(lt),Nt);if(lt.$$typeof===M)return Ns(tt,$e,Ku(tt,lt),Nt);Kv(tt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,$e!==null&&$e.tag===6?(g(tt,$e.sibling),Nt=U($e,lt),Nt.return=tt,tt=Nt):(g(tt,$e),Nt=yd(lt,tt.mode,Nt),Nt.return=tt,tt=Nt),pe(tt)):g(tt,$e)}return function(tt,$e,lt,Nt){try{Fp=0;var pn=Ns(tt,$e,lt,Nt);return y0=null,pn}catch(_n){if(_n===_e||_n===Ne)throw _n;var kr=oi(29,_n,null,tt.mode);return kr.lanes=Nt,kr.return=tt,kr}finally{}}}var w0=TN(!0),NN=TN(!1),jc=ce(null),Ju=null;function Sd(A){var f=A.alternate;J(Ti,Ti.current&1),J(jc,A),Ju===null&&(f===null||Er.current!==null||f.memoizedState!==null)&&(Ju=A)}function BN(A){if(A.tag===22){if(J(Ti,Ti.current),J(jc,A),Ju===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(Ju=A)}}else Td()}function Td(){J(Ti,Ti.current),J(jc,jc.current)}function PA(A){V(jc),Ju===A&&(Ju=null),V(Ti)}var Ti=ce(0);function $v(A){for(var f=A;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||D_(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function zb(A,f,g,_){f=A.memoizedState,g=g(_,f),g=g==null?f:d({},f,g),A.memoizedState=g,A.lanes===0&&(A.updateQueue.baseState=g)}var Gb={enqueueSetState:function(A,f,g){A=A._reactInternals;var _=fc(),U=bt(_);U.payload=f,g!=null&&(U.callback=g),f=It(A,U,_),f!==null&&(hc(f,A,_),Et(f,A,_))},enqueueReplaceState:function(A,f,g){A=A._reactInternals;var _=fc(),U=bt(_);U.tag=1,U.payload=f,g!=null&&(U.callback=g),f=It(A,U,_),f!==null&&(hc(f,A,_),Et(f,A,_))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var g=fc(),_=bt(g);_.tag=2,f!=null&&(_.callback=f),f=It(A,_,g),f!==null&&(hc(f,A,g),Et(f,A,g))}};function kN(A,f,g,_,U,W,pe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(_,W,pe):f.prototype&&f.prototype.isPureReactComponent?!ii(g,_)||!ii(U,W):!0}function IN(A,f,g,_){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,_),f.state!==A&&Gb.enqueueReplaceState(f,f.state,null)}function oh(A,f){var g=f;if("ref"in f){g={};for(var _ in f)_!=="ref"&&(g[_]=f[_])}if(A=A.defaultProps){g===f&&(g=d({},g));for(var U in A)g[U]===void 0&&(g[U]=A[U])}return g}var Wv=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function FN(A){Wv(A)}function DN(A){console.error(A)}function LN(A){Wv(A)}function Yv(A,f){try{var g=A.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function RN(A,f,g){try{var _=A.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function qb(A,f,g){return g=bt(g),g.tag=3,g.payload={element:null},g.callback=function(){Yv(A,f)},g}function PN(A){return A=bt(A),A.tag=3,A}function MN(A,f,g,_){var U=g.type.getDerivedStateFromError;if(typeof U=="function"){var W=_.value;A.payload=function(){return U(W)},A.callback=function(){RN(f,g,_)}}var pe=g.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(A.callback=function(){RN(f,g,_),typeof U!="function"&&(Dd===null?Dd=new Set([this]):Dd.add(this));var Be=_.stack;this.componentDidCatch(_.value,{componentStack:Be!==null?Be:""})})}function _9(A,f,g,_,U){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=g.alternate,f!==null&&qu(f,g,U,!0),g=jc.current,g!==null){switch(g.tag){case 13:return Ju===null?p_():g.alternate===null&&Ia===0&&(Ia=3),g.flags&=-257,g.flags|=65536,g.lanes=U,_===ke?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([_]):f.add(_),x_(A,_,U)),!1;case 22:return g.flags|=65536,_===ke?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([_]):g.add(_)),x_(A,_,U)),!1}throw Error(r(435,g.tag))}return x_(A,_,U),p_(),!1}if(zn)return f=jc.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=U,_!==li&&(A=Error(r(422),{cause:_}),hu(fr(A,g)))):(_!==li&&(f=Error(r(423),{cause:_}),hu(fr(f,g))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,_=fr(_,g),U=qb(A.stateNode,_,U),ln(A,U),Ia!==4&&(Ia=2)),!1;var W=Error(r(520),{cause:_});if(W=fr(W,g),jp===null?jp=[W]:jp.push(W),Ia!==4&&(Ia=2),f===null)return!0;_=fr(_,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,A=U&-U,g.lanes|=A,A=qb(g.stateNode,_,A),ln(g,A),!1;case 1:if(f=g.type,W=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Dd===null||!Dd.has(W))))return g.flags|=65536,U&=-U,g.lanes|=U,U=PN(U),MN(U,A,g,_),ln(g,U),!1}g=g.return}while(g!==null);return!1}var UN=Error(r(461)),Qi=!1;function co(A,f,g,_){f.child=A===null?NN(f,null,g,_):w0(f,A.child,g,_)}function ON(A,f,g,_,U){g=g.render;var W=f.ref;if("ref"in _){var pe={};for(var Be in _)Be!=="ref"&&(pe[Be]=_[Be])}else pe=_;return Uc(f),_=lc(A,f,g,pe,W,U),Be=js(),A!==null&&!Qi?(Xf(A,f,U),MA(A,f,U)):(zn&&Be&&Ft(f),f.flags|=1,co(A,f,_,U),f.child)}function jN(A,f,g,_,U){if(A===null){var W=g.type;return typeof W=="function"&&!fu(W)&&W.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=W,QN(A,f,W,_,U)):(A=Pc(g.type,null,_,f,f.mode,U),A.ref=f.ref,A.return=f,f.child=A)}if(W=A.child,!e_(A,U)){var pe=W.memoizedProps;if(g=g.compare,g=g!==null?g:ii,g(pe,_)&&A.ref===f.ref)return MA(A,f,U)}return f.flags|=1,A=hl(W,_),A.ref=f.ref,A.return=f,f.child=A}function QN(A,f,g,_,U){if(A!==null){var W=A.memoizedProps;if(ii(W,_)&&A.ref===f.ref)if(Qi=!1,f.pendingProps=_=W,e_(A,U))(A.flags&131072)!==0&&(Qi=!0);else return f.lanes=A.lanes,MA(A,f,U)}return Kb(A,f,g,_,U)}function HN(A,f,g){var _=f.pendingProps,U=_.children,W=A!==null?A.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=W!==null?W.baseLanes|g:g,A!==null){for(U=f.child=A.child,W=0;U!==null;)W=W|U.lanes|U.childLanes,U=U.sibling;f.childLanes=W&~_}else f.childLanes=0,f.child=null;return VN(A,f,_,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&ue(f,W!==null?W.cachePool:null),W!==null?hs(f,W):as(),BN(f);else return f.lanes=f.childLanes=536870912,VN(A,f,W!==null?W.baseLanes|g:g,g)}else W!==null?(ue(f,W.cachePool),hs(f,W),Td(),f.memoizedState=null):(A!==null&&ue(f,null),as(),Td());return co(A,f,U,g),f.child}function VN(A,f,g,_){var U=te();return U=U===null?null:{parent:Ha._currentValue,pool:U},f.memoizedState={baseLanes:g,cachePool:U},A!==null&&ue(f,null),as(),BN(f),A!==null&&qu(A,f,_,!0),null}function Xv(A,f){var g=f.ref;if(g===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(A===null||A.ref!==g)&&(f.flags|=4194816)}}function Kb(A,f,g,_,U){return Uc(f),g=lc(A,f,g,_,void 0,U),_=js(),A!==null&&!Qi?(Xf(A,f,U),MA(A,f,U)):(zn&&_&&Ft(f),f.flags|=1,co(A,f,g,U),f.child)}function zN(A,f,g,_,U,W){return Uc(f),f.updateQueue=null,g=FA(f,_,g,U),$u(A),_=js(),A!==null&&!Qi?(Xf(A,f,W),MA(A,f,W)):(zn&&_&&Ft(f),f.flags|=1,co(A,f,g,W),f.child)}function GN(A,f,g,_,U){if(Uc(f),f.stateNode===null){var W=da,pe=g.contextType;typeof pe=="object"&&pe!==null&&(W=Qa(pe)),W=new g(_,W),f.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=Gb,f.stateNode=W,W._reactInternals=f,W=f.stateNode,W.props=_,W.state=f.memoizedState,W.refs={},qe(f),pe=g.contextType,W.context=typeof pe=="object"&&pe!==null?Qa(pe):da,W.state=f.memoizedState,pe=g.getDerivedStateFromProps,typeof pe=="function"&&(zb(f,g,pe,_),W.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(pe=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),pe!==W.state&&Gb.enqueueReplaceState(W,W.state,null),nn(f,_,W,U),yn(),W.state=f.memoizedState),typeof W.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(A===null){W=f.stateNode;var Be=f.memoizedProps,He=oh(g,Be);W.props=He;var At=W.context,Ct=g.contextType;pe=da,typeof Ct=="object"&&Ct!==null&&(pe=Qa(Ct));var Dt=g.getDerivedStateFromProps;Ct=typeof Dt=="function"||typeof W.getSnapshotBeforeUpdate=="function",Be=f.pendingProps!==Be,Ct||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Be||At!==pe)&&IN(f,W,_,pe),pt=!1;var ft=f.memoizedState;W.state=ft,nn(f,_,W,U),yn(),At=f.memoizedState,Be||ft!==At||pt?(typeof Dt=="function"&&(zb(f,g,Dt,_),At=f.memoizedState),(He=pt||kN(f,g,He,_,ft,At,pe))?(Ct||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(f.flags|=4194308)):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=At),W.props=_,W.state=At,W.context=pe,_=He):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{W=f.stateNode,Ye(A,f),pe=f.memoizedProps,Ct=oh(g,pe),W.props=Ct,Dt=f.pendingProps,ft=W.context,At=g.contextType,He=da,typeof At=="object"&&At!==null&&(He=Qa(At)),Be=g.getDerivedStateFromProps,(At=typeof Be=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(pe!==Dt||ft!==He)&&IN(f,W,_,He),pt=!1,ft=f.memoizedState,W.state=ft,nn(f,_,W,U),yn();var mt=f.memoizedState;pe!==Dt||ft!==mt||pt||A!==null&&A.dependencies!==null&&d0(A.dependencies)?(typeof Be=="function"&&(zb(f,g,Be,_),mt=f.memoizedState),(Ct=pt||kN(f,g,Ct,_,ft,mt,He)||A!==null&&A.dependencies!==null&&d0(A.dependencies))?(At||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(_,mt,He),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(_,mt,He)),typeof W.componentDidUpdate=="function"&&(f.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof W.componentDidUpdate!="function"||pe===A.memoizedProps&&ft===A.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&ft===A.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=mt),W.props=_,W.state=mt,W.context=He,_=Ct):(typeof W.componentDidUpdate!="function"||pe===A.memoizedProps&&ft===A.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||pe===A.memoizedProps&&ft===A.memoizedState||(f.flags|=1024),_=!1)}return W=_,Xv(A,f),_=(f.flags&128)!==0,W||_?(W=f.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:W.render(),f.flags|=1,A!==null&&_?(f.child=w0(f,A.child,null,U),f.child=w0(f,null,g,U)):co(A,f,g,U),f.memoizedState=W.state,A=f.child):A=MA(A,f,U),A}function qN(A,f,g,_){return ji(),f.flags|=256,co(A,f,g,_),f.child}var $b={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wb(A){return{baseLanes:A,cachePool:xe()}}function Yb(A,f,g){return A=A!==null?A.childLanes&~g:0,f&&(A|=Qc),A}function KN(A,f,g){var _=f.pendingProps,U=!1,W=(f.flags&128)!==0,pe;if((pe=W)||(pe=A!==null&&A.memoizedState===null?!1:(Ti.current&2)!==0),pe&&(U=!0,f.flags&=-129),pe=(f.flags&32)!==0,f.flags&=-33,A===null){if(zn){if(U?Sd(f):Td(),zn){var Be=xn,He;if(He=Be){e:{for(He=Be,Be=$s;He.nodeType!==8;){if(!Be){Be=null;break e}if(He=wu(He.nextSibling),He===null){Be=null;break e}}Be=He}Be!==null?(f.memoizedState={dehydrated:Be,treeContext:Ae!==null?{id:Ce,overflow:Qe}:null,retryLane:536870912,hydrationErrors:null},He=oi(18,null,null,0),He.stateNode=Be,He.return=f,f.child=He,dn=f,xn=null,He=!0):He=!1}He||Bo(f)}if(Be=f.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return D_(Be)?f.lanes=32:f.lanes=536870912,null;PA(f)}return Be=_.children,_=_.fallback,U?(Td(),U=f.mode,Be=Jv({mode:"hidden",children:Be},U),_=Ml(_,U,g,null),Be.return=f,_.return=f,Be.sibling=_,f.child=Be,U=f.child,U.memoizedState=Wb(g),U.childLanes=Yb(A,pe,g),f.memoizedState=$b,_):(Sd(f),Xb(f,Be))}if(He=A.memoizedState,He!==null&&(Be=He.dehydrated,Be!==null)){if(W)f.flags&256?(Sd(f),f.flags&=-257,f=Jb(A,f,g)):f.memoizedState!==null?(Td(),f.child=A.child,f.flags|=128,f=null):(Td(),U=_.fallback,Be=f.mode,_=Jv({mode:"visible",children:_.children},Be),U=Ml(U,Be,g,null),U.flags|=2,_.return=f,U.return=f,_.sibling=U,f.child=_,w0(f,A.child,null,g),_=f.child,_.memoizedState=Wb(g),_.childLanes=Yb(A,pe,g),f.memoizedState=$b,f=U);else if(Sd(f),D_(Be)){if(pe=Be.nextSibling&&Be.nextSibling.dataset,pe)var At=pe.dgst;pe=At,_=Error(r(419)),_.stack="",_.digest=pe,hu({value:_,source:null,stack:null}),f=Jb(A,f,g)}else if(Qi||qu(A,f,g,!1),pe=(g&A.childLanes)!==0,Qi||pe){if(pe=Qs,pe!==null&&(_=g&-g,_=(_&42)!==0?1:wa(_),_=(_&(pe.suspendedLanes|g))!==0?0:_,_!==0&&_!==He.retryLane))throw He.retryLane=_,rc(A,_),hc(pe,A,_),UN;Be.data==="$?"||p_(),f=Jb(A,f,g)}else Be.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=He.treeContext,xn=wu(Be.nextSibling),dn=f,zn=!0,gs=null,$s=!1,A!==null&&(D[Z++]=Ce,D[Z++]=Qe,D[Z++]=Ae,Ce=A.id,Qe=A.overflow,Ae=f),f=Xb(f,_.children),f.flags|=4096);return f}return U?(Td(),U=_.fallback,Be=f.mode,He=A.child,At=He.sibling,_=hl(He,{mode:"hidden",children:_.children}),_.subtreeFlags=He.subtreeFlags&65011712,At!==null?U=hl(At,U):(U=Ml(U,Be,g,null),U.flags|=2),U.return=f,_.return=f,_.sibling=U,f.child=_,_=U,U=f.child,Be=A.child.memoizedState,Be===null?Be=Wb(g):(He=Be.cachePool,He!==null?(At=Ha._currentValue,He=He.parent!==At?{parent:At,pool:At}:He):He=xe(),Be={baseLanes:Be.baseLanes|g,cachePool:He}),U.memoizedState=Be,U.childLanes=Yb(A,pe,g),f.memoizedState=$b,_):(Sd(f),g=A.child,A=g.sibling,g=hl(g,{mode:"visible",children:_.children}),g.return=f,g.sibling=null,A!==null&&(pe=f.deletions,pe===null?(f.deletions=[A],f.flags|=16):pe.push(A)),f.child=g,f.memoizedState=null,g)}function Xb(A,f){return f=Jv({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function Jv(A,f){return A=oi(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Jb(A,f,g){return w0(f,A.child,null,g),A=Xb(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function $N(A,f,g){A.lanes|=f;var _=A.alternate;_!==null&&(_.lanes|=f),Gu(A.return,f,g)}function Zb(A,f,g,_,U){var W=A.memoizedState;W===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:U}:(W.isBackwards=f,W.rendering=null,W.renderingStartTime=0,W.last=_,W.tail=g,W.tailMode=U)}function WN(A,f,g){var _=f.pendingProps,U=_.revealOrder,W=_.tail;if(co(A,f,_.children,g),_=Ti.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&$N(A,g,f);else if(A.tag===19)$N(A,g,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}_&=1}switch(J(Ti,_),U){case"forwards":for(g=f.child,U=null;g!==null;)A=g.alternate,A!==null&&$v(A)===null&&(U=g),g=g.sibling;g=U,g===null?(U=f.child,f.child=null):(U=g.sibling,g.sibling=null),Zb(f,!1,U,g,W);break;case"backwards":for(g=null,U=f.child,f.child=null;U!==null;){if(A=U.alternate,A!==null&&$v(A)===null){f.child=U;break}A=U.sibling,U.sibling=g,g=U,U=A}Zb(f,!0,g,null,W);break;case"together":Zb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function MA(A,f,g){if(A!==null&&(f.dependencies=A.dependencies),Fd|=f.lanes,(g&f.childLanes)===0)if(A!==null){if(qu(A,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(r(153));if(f.child!==null){for(A=f.child,g=hl(A,A.pendingProps),f.child=g,g.return=f;A.sibling!==null;)A=A.sibling,g=g.sibling=hl(A,A.pendingProps),g.return=f;g.sibling=null}return f.child}function e_(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&d0(A)))}function C9(A,f,g){switch(f.tag){case 3:ve(f,f.stateNode.containerInfo),Mc(f,Ha,A.memoizedState.cache),ji();break;case 27:case 5:we(f);break;case 4:ve(f,f.stateNode.containerInfo);break;case 10:Mc(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Sd(f),f.flags|=128,null):(g&f.child.childLanes)!==0?KN(A,f,g):(Sd(f),A=MA(A,f,g),A!==null?A.sibling:null);Sd(f);break;case 19:var U=(A.flags&128)!==0;if(_=(g&f.childLanes)!==0,_||(qu(A,f,g,!1),_=(g&f.childLanes)!==0),U){if(_)return WN(A,f,g);f.flags|=128}if(U=f.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),J(Ti,Ti.current),_)break;return null;case 22:case 23:return f.lanes=0,HN(A,f,g);case 24:Mc(f,Ha,A.memoizedState.cache)}return MA(A,f,g)}function YN(A,f,g){if(A!==null)if(A.memoizedProps!==f.pendingProps)Qi=!0;else{if(!e_(A,g)&&(f.flags&128)===0)return Qi=!1,C9(A,f,g);Qi=(A.flags&131072)!==0}else Qi=!1,zn&&(f.flags&1048576)!==0&&ht(f,w,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var _=f.elementType,U=_._init;if(_=U(_._payload),f.type=_,typeof _=="function")fu(_)?(A=oh(_,A),f.tag=1,f=GN(null,f,_,A,g)):(f.tag=0,f=Kb(null,f,_,A,g));else{if(_!=null){if(U=_.$$typeof,U===O){f.tag=11,f=ON(null,f,_,A,g);break e}else if(U===E){f.tag=14,f=jN(null,f,_,A,g);break e}}throw f=q(_)||_,Error(r(306,f,""))}}return f;case 0:return Kb(A,f,f.type,f.pendingProps,g);case 1:return _=f.type,U=oh(_,f.pendingProps),GN(A,f,_,U,g);case 3:e:{if(ve(f,f.stateNode.containerInfo),A===null)throw Error(r(387));_=f.pendingProps;var W=f.memoizedState;U=W.element,Ye(A,f),nn(f,_,null,g);var pe=f.memoizedState;if(_=pe.cache,Mc(f,Ha,_),_!==W.cache&&kA(f,[Ha],g,!0),yn(),_=pe.element,W.isDehydrated)if(W={element:_,isDehydrated:!1,cache:pe.cache},f.updateQueue.baseState=W,f.memoizedState=W,f.flags&256){f=qN(A,f,_,g);break e}else if(_!==U){U=fr(Error(r(424)),f),hu(U),f=qN(A,f,_,g);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(xn=wu(A.firstChild),dn=f,zn=!0,gs=null,$s=!0,g=NN(f,null,_,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ji(),_===U){f=MA(A,f,g);break e}co(A,f,_,g)}f=f.child}return f;case 26:return Xv(A,f),A===null?(g=ek(f.type,null,f.pendingProps,null))?f.memoizedState=g:zn||(g=f.type,A=f.pendingProps,_=d1(fe.current).createElement(g),_[Rr]=f,_[Nr]=A,Ao(_,g,A),Je(_),f.stateNode=_):f.memoizedState=ek(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return we(f),A===null&&zn&&(_=f.stateNode=XB(f.type,f.pendingProps,fe.current),dn=f,$s=!0,U=xn,Pd(f.type)?(L_=U,xn=wu(_.firstChild)):xn=U),co(A,f,f.pendingProps.children,g),Xv(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&zn&&((U=_=xn)&&(_=J9(_,f.type,f.pendingProps,$s),_!==null?(f.stateNode=_,dn=f,xn=wu(_.firstChild),$s=!1,U=!0):U=!1),U||Bo(f)),we(f),U=f.type,W=f.pendingProps,pe=A!==null?A.memoizedProps:null,_=W.children,k_(U,W)?_=null:pe!==null&&k_(U,pe)&&(f.flags|=32),f.memoizedState!==null&&(U=lc(A,f,Wu,null,null,g),Wp._currentValue=U),Xv(A,f),co(A,f,_,g),f.child;case 6:return A===null&&zn&&((A=g=xn)&&(g=Z9(g,f.pendingProps,$s),g!==null?(f.stateNode=g,dn=f,xn=null,A=!0):A=!1),A||Bo(f)),null;case 13:return KN(A,f,g);case 4:return ve(f,f.stateNode.containerInfo),_=f.pendingProps,A===null?f.child=w0(f,null,_,g):co(A,f,_,g),f.child;case 11:return ON(A,f,f.type,f.pendingProps,g);case 7:return co(A,f,f.pendingProps,g),f.child;case 8:return co(A,f,f.pendingProps.children,g),f.child;case 12:return co(A,f,f.pendingProps.children,g),f.child;case 10:return _=f.pendingProps,Mc(f,f.type,_.value),co(A,f,_.children,g),f.child;case 9:return U=f.type._context,_=f.pendingProps.children,Uc(f),U=Qa(U),_=_(U),f.flags|=1,co(A,f,_,g),f.child;case 14:return jN(A,f,f.type,f.pendingProps,g);case 15:return QN(A,f,f.type,f.pendingProps,g);case 19:return WN(A,f,g);case 31:return _=f.pendingProps,g=f.mode,_={mode:_.mode,children:_.children},A===null?(g=Jv(_,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=hl(A.child,_),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return HN(A,f,g);case 24:return Uc(f),_=Qa(Ha),A===null?(U=te(),U===null&&(U=Qs,W=xp(),U.pooledCache=W,W.refCount++,W!==null&&(U.pooledCacheLanes|=g),U=W),f.memoizedState={parent:_,cache:U},qe(f),Mc(f,Ha,U)):((A.lanes&g)!==0&&(Ye(A,f),nn(f,null,null,g),yn()),U=A.memoizedState,W=f.memoizedState,U.parent!==_?(U={parent:_,cache:_},f.memoizedState=U,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=U),Mc(f,Ha,_)):(_=W.cache,Mc(f,Ha,_),_!==U.cache&&kA(f,[Ha],g,!0))),co(A,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function UA(A){A.flags|=4}function XN(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!ak(f)){if(f=jc.current,f!==null&&((Wr&4194048)===Wr?Ju!==null:(Wr&62914560)!==Wr&&(Wr&536870912)===0||f!==Ju))throw it=ke,Ee;A.flags|=8192}}function Zv(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?wr():536870912,A.lanes|=f,E0|=f)}function Lp(A,f){if(!zn)switch(A.tailMode){case"hidden":f=A.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?A.tail=null:g.sibling=null;break;case"collapsed":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:_.sibling=null}}function ma(A){var f=A.alternate!==null&&A.alternate.child===A.child,g=0,_=0;if(f)for(var U=A.child;U!==null;)g|=U.lanes|U.childLanes,_|=U.subtreeFlags&65011712,_|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)g|=U.lanes|U.childLanes,_|=U.subtreeFlags,_|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=_,A.childLanes=g,f}function E9(A,f,g){var _=f.pendingProps;switch(an(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ma(f),null;case 1:return ma(f),null;case 3:return g=f.stateNode,_=null,A!==null&&(_=A.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),Ul(Ha),ye(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(A===null||A.child===null)&&(Si(f)?UA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,A0())),ma(f),null;case 26:return g=f.memoizedState,A===null?(UA(f),g!==null?(ma(f),XN(f,g)):(ma(f),f.flags&=-16777217)):g?g!==A.memoizedState?(UA(f),ma(f),XN(f,g)):(ma(f),f.flags&=-16777217):(A.memoizedProps!==_&&UA(f),ma(f),f.flags&=-16777217),null;case 27:me(f),g=fe.current;var U=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==_&&UA(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return ma(f),null}A=re.current,Si(f)?u0(f):(A=XB(U,_,g),f.stateNode=A,UA(f))}return ma(f),null;case 5:if(me(f),g=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==_&&UA(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return ma(f),null}if(A=re.current,Si(f))u0(f);else{switch(U=d1(fe.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof _.is=="string"?U.createElement("select",{is:_.is}):U.createElement("select"),_.multiple?A.multiple=!0:_.size&&(A.size=_.size);break;default:A=typeof _.is=="string"?U.createElement(g,{is:_.is}):U.createElement(g)}}A[Rr]=f,A[Nr]=_;e:for(U=f.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===f)break e;for(;U.sibling===null;){if(U.return===null||U.return===f)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}f.stateNode=A;e:switch(Ao(A,g,_),g){case"button":case"input":case"select":case"textarea":A=!!_.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&UA(f)}}return ma(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==_&&UA(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(A=fe.current,Si(f)){if(A=f.stateNode,g=f.memoizedProps,_=null,U=dn,U!==null)switch(U.tag){case 27:case 5:_=U.memoizedProps}A[Rr]=f,A=!!(A.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||zB(A.nodeValue,g)),A||Bo(f)}else A=d1(A).createTextNode(_),A[Rr]=f,f.stateNode=A}return ma(f),null;case 13:if(_=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=Si(f),_!==null&&_.dehydrated!==null){if(A===null){if(!U)throw Error(r(318));if(U=f.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(r(317));U[Rr]=f}else ji(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ma(f),U=!1}else U=A0(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return f.flags&256?(PA(f),f):(PA(f),null)}if(PA(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=_!==null,A=A!==null&&A.memoizedState!==null,g){_=f.child,U=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(U=_.alternate.memoizedState.cachePool.pool);var W=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(W=_.memoizedState.cachePool.pool),W!==U&&(_.flags|=2048)}return g!==A&&g&&(f.child.flags|=8192),Zv(f,f.updateQueue),ma(f),null;case 4:return ye(),A===null&&E_(f.stateNode.containerInfo),ma(f),null;case 10:return Ul(f.type),ma(f),null;case 19:if(V(Ti),U=f.memoizedState,U===null)return ma(f),null;if(_=(f.flags&128)!==0,W=U.rendering,W===null)if(_)Lp(U,!1);else{if(Ia!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(W=$v(A),W!==null){for(f.flags|=128,Lp(U,!1),A=W.updateQueue,f.updateQueue=A,Zv(f,A),f.subtreeFlags=0,A=g,g=f.child;g!==null;)Vu(g,A),g=g.sibling;return J(Ti,Ti.current&1|2),f.child}A=A.sibling}U.tail!==null&&je()>n1&&(f.flags|=128,_=!0,Lp(U,!1),f.lanes=4194304)}else{if(!_)if(A=$v(W),A!==null){if(f.flags|=128,_=!0,A=A.updateQueue,f.updateQueue=A,Zv(f,A),Lp(U,!0),U.tail===null&&U.tailMode==="hidden"&&!W.alternate&&!zn)return ma(f),null}else 2*je()-U.renderingStartTime>n1&&g!==536870912&&(f.flags|=128,_=!0,Lp(U,!1),f.lanes=4194304);U.isBackwards?(W.sibling=f.child,f.child=W):(A=U.last,A!==null?A.sibling=W:f.child=W,U.last=W)}return U.tail!==null?(f=U.tail,U.rendering=f,U.tail=f.sibling,U.renderingStartTime=je(),f.sibling=null,A=Ti.current,J(Ti,_?A&1|2:A&1),f):(ma(f),null);case 22:case 23:return PA(f),tr(),_=f.memoizedState!==null,A!==null?A.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(g&536870912)!==0&&(f.flags&128)===0&&(ma(f),f.subtreeFlags&6&&(f.flags|=8192)):ma(f),g=f.updateQueue,g!==null&&Zv(f,g.retryQueue),g=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==g&&(f.flags|=2048),A!==null&&V(H),null;case 24:return g=null,A!==null&&(g=A.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),Ul(Ha),ma(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function S9(A,f){switch(an(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return Ul(Ha),ye(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return me(f),null;case 13:if(PA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(r(340));ji()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return V(Ti),null;case 4:return ye(),null;case 10:return Ul(f.type),null;case 22:case 23:return PA(f),tr(),A!==null&&V(H),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return Ul(Ha),null;case 25:return null;default:return null}}function JN(A,f){switch(an(f),f.tag){case 3:Ul(Ha),ye();break;case 26:case 27:case 5:me(f);break;case 4:ye();break;case 13:PA(f);break;case 19:V(Ti);break;case 10:Ul(f.type);break;case 22:case 23:PA(f),tr(),A!==null&&V(H);break;case 24:Ul(Ha)}}function Rp(A,f){try{var g=f.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var U=_.next;g=U;do{if((g.tag&A)===A){_=void 0;var W=g.create,pe=g.inst;_=W(),pe.destroy=_}g=g.next}while(g!==U)}}catch(Be){Ds(f,f.return,Be)}}function Nd(A,f,g){try{var _=f.updateQueue,U=_!==null?_.lastEffect:null;if(U!==null){var W=U.next;_=W;do{if((_.tag&A)===A){var pe=_.inst,Be=pe.destroy;if(Be!==void 0){pe.destroy=void 0,U=f;var He=g,At=Be;try{At()}catch(Ct){Ds(U,He,Ct)}}}_=_.next}while(_!==W)}}catch(Ct){Ds(f,f.return,Ct)}}function ZN(A){var f=A.updateQueue;if(f!==null){var g=A.stateNode;try{ss(f,g)}catch(_){Ds(A,A.return,_)}}}function eB(A,f,g){g.props=oh(A.type,A.memoizedProps),g.state=A.memoizedState;try{g.componentWillUnmount()}catch(_){Ds(A,f,_)}}function Pp(A,f){try{var g=A.ref;if(g!==null){switch(A.tag){case 26:case 27:case 5:var _=A.stateNode;break;case 30:_=A.stateNode;break;default:_=A.stateNode}typeof g=="function"?A.refCleanup=g(_):g.current=_}}catch(U){Ds(A,f,U)}}function Zu(A,f){var g=A.ref,_=A.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(U){Ds(A,f,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(U){Ds(A,f,U)}else g.current=null}function tB(A){var f=A.type,g=A.memoizedProps,_=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(U){Ds(A,A.return,U)}}function t_(A,f,g){try{var _=A.stateNode;K9(_,A.type,g,f),_[Nr]=f}catch(U){Ds(A,A.return,U)}}function nB(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Pd(A.type)||A.tag===4}function n_(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||nB(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Pd(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function r_(A,f,g){var _=A.tag;if(_===5||_===6)A=A.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(A,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(A),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=A1));else if(_!==4&&(_===27&&Pd(A.type)&&(g=A.stateNode,f=null),A=A.child,A!==null))for(r_(A,f,g),A=A.sibling;A!==null;)r_(A,f,g),A=A.sibling}function e1(A,f,g){var _=A.tag;if(_===5||_===6)A=A.stateNode,f?g.insertBefore(A,f):g.appendChild(A);else if(_!==4&&(_===27&&Pd(A.type)&&(g=A.stateNode),A=A.child,A!==null))for(e1(A,f,g),A=A.sibling;A!==null;)e1(A,f,g),A=A.sibling}function rB(A){var f=A.stateNode,g=A.memoizedProps;try{for(var _=A.type,U=f.attributes;U.length;)f.removeAttributeNode(U[0]);Ao(f,_,g),f[Rr]=A,f[Nr]=g}catch(W){Ds(A,A.return,W)}}var OA=!1,za=!1,s_=!1,sB=typeof WeakSet=="function"?WeakSet:Set,Hi=null;function T9(A,f){if(A=A.containerInfo,N_=x1,A=Ta(A),ua(A)){if("selectionStart"in A)var g={start:A.selectionStart,end:A.selectionEnd};else e:{g=(g=A.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var U=_.anchorOffset,W=_.focusNode;_=_.focusOffset;try{g.nodeType,W.nodeType}catch{g=null;break e}var pe=0,Be=-1,He=-1,At=0,Ct=0,Dt=A,ft=null;t:for(;;){for(var mt;Dt!==g||U!==0&&Dt.nodeType!==3||(Be=pe+U),Dt!==W||_!==0&&Dt.nodeType!==3||(He=pe+_),Dt.nodeType===3&&(pe+=Dt.nodeValue.length),(mt=Dt.firstChild)!==null;)ft=Dt,Dt=mt;for(;;){if(Dt===A)break t;if(ft===g&&++At===U&&(Be=pe),ft===W&&++Ct===_&&(He=pe),(mt=Dt.nextSibling)!==null)break;Dt=ft,ft=Dt.parentNode}Dt=mt}g=Be===-1||He===-1?null:{start:Be,end:He}}else g=null}g=g||{start:0,end:0}}else g=null;for(B_={focusedElem:A,selectionRange:g},x1=!1,Hi=f;Hi!==null;)if(f=Hi,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,Hi=A;else for(;Hi!==null;){switch(f=Hi,W=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&W!==null){A=void 0,g=f,U=W.memoizedProps,W=W.memoizedState,_=g.stateNode;try{var Xn=oh(g.type,U,g.elementType===g.type);A=_.getSnapshotBeforeUpdate(Xn,W),_.__reactInternalSnapshotBeforeUpdate=A}catch(jn){Ds(g,g.return,jn)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,g=A.nodeType,g===9)F_(A);else if(g===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":F_(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(r(163))}if(A=f.sibling,A!==null){A.return=f.return,Hi=A;break}Hi=f.return}}function aB(A,f,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Bd(A,g),_&4&&Rp(5,g);break;case 1:if(Bd(A,g),_&4)if(A=g.stateNode,f===null)try{A.componentDidMount()}catch(pe){Ds(g,g.return,pe)}else{var U=oh(g.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(U,f,A.__reactInternalSnapshotBeforeUpdate)}catch(pe){Ds(g,g.return,pe)}}_&64&&ZN(g),_&512&&Pp(g,g.return);break;case 3:if(Bd(A,g),_&64&&(A=g.updateQueue,A!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{ss(A,f)}catch(pe){Ds(g,g.return,pe)}}break;case 27:f===null&&_&4&&rB(g);case 26:case 5:Bd(A,g),f===null&&_&4&&tB(g),_&512&&Pp(g,g.return);break;case 12:Bd(A,g);break;case 13:Bd(A,g),_&4&&lB(A,g),_&64&&(A=g.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(g=P9.bind(null,g),eV(A,g))));break;case 22:if(_=g.memoizedState!==null||OA,!_){f=f!==null&&f.memoizedState!==null||za,U=OA;var W=za;OA=_,(za=f)&&!W?kd(A,g,(g.subtreeFlags&8772)!==0):Bd(A,g),OA=U,za=W}break;case 30:break;default:Bd(A,g)}}function iB(A){var f=A.alternate;f!==null&&(A.alternate=null,iB(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&De(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var sa=null,jl=!1;function jA(A,f,g){for(g=g.child;g!==null;)oB(A,f,g),g=g.sibling}function oB(A,f,g){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Gt,g)}catch{}switch(g.tag){case 26:za||Zu(g,f),jA(A,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:za||Zu(g,f);var _=sa,U=jl;Pd(g.type)&&(sa=g.stateNode,jl=!1),jA(A,f,g),Gp(g.stateNode),sa=_,jl=U;break;case 5:za||Zu(g,f);case 6:if(_=sa,U=jl,sa=null,jA(A,f,g),sa=_,jl=U,sa!==null)if(jl)try{(sa.nodeType===9?sa.body:sa.nodeName==="HTML"?sa.ownerDocument.body:sa).removeChild(g.stateNode)}catch(W){Ds(g,f,W)}else try{sa.removeChild(g.stateNode)}catch(W){Ds(g,f,W)}break;case 18:sa!==null&&(jl?(A=sa,WB(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,g.stateNode),Zp(A)):WB(sa,g.stateNode));break;case 4:_=sa,U=jl,sa=g.stateNode.containerInfo,jl=!0,jA(A,f,g),sa=_,jl=U;break;case 0:case 11:case 14:case 15:za||Nd(2,g,f),za||Nd(4,g,f),jA(A,f,g);break;case 1:za||(Zu(g,f),_=g.stateNode,typeof _.componentWillUnmount=="function"&&eB(g,f,_)),jA(A,f,g);break;case 21:jA(A,f,g);break;case 22:za=(_=za)||g.memoizedState!==null,jA(A,f,g),za=_;break;default:jA(A,f,g)}}function lB(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Zp(A)}catch(g){Ds(f,f.return,g)}}function N9(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new sB),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new sB),f;default:throw Error(r(435,A.tag))}}function a_(A,f){var g=N9(A);f.forEach(function(_){var U=M9.bind(null,A,_);g.has(_)||(g.add(_),_.then(U,U))})}function uc(A,f){var g=f.deletions;if(g!==null)for(var _=0;_<g.length;_++){var U=g[_],W=A,pe=f,Be=pe;e:for(;Be!==null;){switch(Be.tag){case 27:if(Pd(Be.type)){sa=Be.stateNode,jl=!1;break e}break;case 5:sa=Be.stateNode,jl=!1;break e;case 3:case 4:sa=Be.stateNode.containerInfo,jl=!0;break e}Be=Be.return}if(sa===null)throw Error(r(160));oB(W,pe,U),sa=null,jl=!1,W=U.alternate,W!==null&&(W.return=null),U.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)cB(f,A),f=f.sibling}var yu=null;function cB(A,f){var g=A.alternate,_=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:uc(f,A),Ac(A),_&4&&(Nd(3,A,A.return),Rp(3,A),Nd(5,A,A.return));break;case 1:uc(f,A),Ac(A),_&512&&(za||g===null||Zu(g,g.return)),_&64&&OA&&(A=A.updateQueue,A!==null&&(_=A.callbacks,_!==null&&(g=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var U=yu;if(uc(f,A),Ac(A),_&512&&(za||g===null||Zu(g,g.return)),_&4){var W=g!==null?g.memoizedState:null;if(_=A.memoizedState,g===null)if(_===null)if(A.stateNode===null){e:{_=A.type,g=A.memoizedProps,U=U.ownerDocument||U;t:switch(_){case"title":W=U.getElementsByTagName("title")[0],(!W||W[Fe]||W[Rr]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=U.createElement(_),U.head.insertBefore(W,U.querySelector("head > title"))),Ao(W,_,g),W[Rr]=A,Je(W),_=W;break e;case"link":var pe=rk("link","href",U).get(_+(g.href||""));if(pe){for(var Be=0;Be<pe.length;Be++)if(W=pe[Be],W.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&W.getAttribute("rel")===(g.rel==null?null:g.rel)&&W.getAttribute("title")===(g.title==null?null:g.title)&&W.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){pe.splice(Be,1);break t}}W=U.createElement(_),Ao(W,_,g),U.head.appendChild(W);break;case"meta":if(pe=rk("meta","content",U).get(_+(g.content||""))){for(Be=0;Be<pe.length;Be++)if(W=pe[Be],W.getAttribute("content")===(g.content==null?null:""+g.content)&&W.getAttribute("name")===(g.name==null?null:g.name)&&W.getAttribute("property")===(g.property==null?null:g.property)&&W.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&W.getAttribute("charset")===(g.charSet==null?null:g.charSet)){pe.splice(Be,1);break t}}W=U.createElement(_),Ao(W,_,g),U.head.appendChild(W);break;default:throw Error(r(468,_))}W[Rr]=A,Je(W),_=W}A.stateNode=_}else sk(U,A.type,A.stateNode);else A.stateNode=nk(U,_,A.memoizedProps);else W!==_?(W===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):W.count--,_===null?sk(U,A.type,A.stateNode):nk(U,_,A.memoizedProps)):_===null&&A.stateNode!==null&&t_(A,A.memoizedProps,g.memoizedProps)}break;case 27:uc(f,A),Ac(A),_&512&&(za||g===null||Zu(g,g.return)),g!==null&&_&4&&t_(A,A.memoizedProps,g.memoizedProps);break;case 5:if(uc(f,A),Ac(A),_&512&&(za||g===null||Zu(g,g.return)),A.flags&32){U=A.stateNode;try{Ca(U,"")}catch(mt){Ds(A,A.return,mt)}}_&4&&A.stateNode!=null&&(U=A.memoizedProps,t_(A,U,g!==null?g.memoizedProps:U)),_&1024&&(s_=!0);break;case 6:if(uc(f,A),Ac(A),_&4){if(A.stateNode===null)throw Error(r(162));_=A.memoizedProps,g=A.stateNode;try{g.nodeValue=_}catch(mt){Ds(A,A.return,mt)}}break;case 3:if(m1=null,U=yu,yu=f1(f.containerInfo),uc(f,A),yu=U,Ac(A),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Zp(f.containerInfo)}catch(mt){Ds(A,A.return,mt)}s_&&(s_=!1,uB(A));break;case 4:_=yu,yu=f1(A.stateNode.containerInfo),uc(f,A),Ac(A),yu=_;break;case 12:uc(f,A),Ac(A);break;case 13:uc(f,A),Ac(A),A.child.flags&8192&&A.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(A_=je()),_&4&&(_=A.updateQueue,_!==null&&(A.updateQueue=null,a_(A,_)));break;case 22:U=A.memoizedState!==null;var He=g!==null&&g.memoizedState!==null,At=OA,Ct=za;if(OA=At||U,za=Ct||He,uc(f,A),za=Ct,OA=At,Ac(A),_&8192)e:for(f=A.stateNode,f._visibility=U?f._visibility&-2:f._visibility|1,U&&(g===null||He||OA||za||lh(A)),g=null,f=A;;){if(f.tag===5||f.tag===26){if(g===null){He=g=f;try{if(W=He.stateNode,U)pe=W.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Be=He.stateNode;var Dt=He.memoizedProps.style,ft=Dt!=null&&Dt.hasOwnProperty("display")?Dt.display:null;Be.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(mt){Ds(He,He.return,mt)}}}else if(f.tag===6){if(g===null){He=f;try{He.stateNode.nodeValue=U?"":He.memoizedProps}catch(mt){Ds(He,He.return,mt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=A.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,a_(A,g))));break;case 19:uc(f,A),Ac(A),_&4&&(_=A.updateQueue,_!==null&&(A.updateQueue=null,a_(A,_)));break;case 30:break;case 21:break;default:uc(f,A),Ac(A)}}function Ac(A){var f=A.flags;if(f&2){try{for(var g,_=A.return;_!==null;){if(nB(_)){g=_;break}_=_.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var U=g.stateNode,W=n_(A);e1(A,W,U);break;case 5:var pe=g.stateNode;g.flags&32&&(Ca(pe,""),g.flags&=-33);var Be=n_(A);e1(A,Be,pe);break;case 3:case 4:var He=g.stateNode.containerInfo,At=n_(A);r_(A,At,He);break;default:throw Error(r(161))}}catch(Ct){Ds(A,A.return,Ct)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function uB(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;uB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function Bd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)aB(A,f.alternate,f),f=f.sibling}function lh(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:Nd(4,f,f.return),lh(f);break;case 1:Zu(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&eB(f,f.return,g),lh(f);break;case 27:Gp(f.stateNode);case 26:case 5:Zu(f,f.return),lh(f);break;case 22:f.memoizedState===null&&lh(f);break;case 30:lh(f);break;default:lh(f)}A=A.sibling}}function kd(A,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,U=A,W=f,pe=W.flags;switch(W.tag){case 0:case 11:case 15:kd(U,W,g),Rp(4,W);break;case 1:if(kd(U,W,g),_=W,U=_.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(At){Ds(_,_.return,At)}if(_=W,U=_.updateQueue,U!==null){var Be=_.stateNode;try{var He=U.shared.hiddenCallbacks;if(He!==null)for(U.shared.hiddenCallbacks=null,U=0;U<He.length;U++)Kr(He[U],Be)}catch(At){Ds(_,_.return,At)}}g&&pe&64&&ZN(W),Pp(W,W.return);break;case 27:rB(W);case 26:case 5:kd(U,W,g),g&&_===null&&pe&4&&tB(W),Pp(W,W.return);break;case 12:kd(U,W,g);break;case 13:kd(U,W,g),g&&pe&4&&lB(U,W);break;case 22:W.memoizedState===null&&kd(U,W,g),Pp(W,W.return);break;case 30:break;default:kd(U,W,g)}f=f.sibling}}function i_(A,f){var g=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(g=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==g&&(A!=null&&A.refCount++,g!=null&&Wf(g))}function o_(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Wf(A))}function eA(A,f,g,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)AB(A,f,g,_),f=f.sibling}function AB(A,f,g,_){var U=f.flags;switch(f.tag){case 0:case 11:case 15:eA(A,f,g,_),U&2048&&Rp(9,f);break;case 1:eA(A,f,g,_);break;case 3:eA(A,f,g,_),U&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Wf(A)));break;case 12:if(U&2048){eA(A,f,g,_),A=f.stateNode;try{var W=f.memoizedProps,pe=W.id,Be=W.onPostCommit;typeof Be=="function"&&Be(pe,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(He){Ds(f,f.return,He)}}else eA(A,f,g,_);break;case 13:eA(A,f,g,_);break;case 23:break;case 22:W=f.stateNode,pe=f.alternate,f.memoizedState!==null?W._visibility&2?eA(A,f,g,_):Mp(A,f):W._visibility&2?eA(A,f,g,_):(W._visibility|=2,b0(A,f,g,_,(f.subtreeFlags&10256)!==0)),U&2048&&i_(pe,f);break;case 24:eA(A,f,g,_),U&2048&&o_(f.alternate,f);break;default:eA(A,f,g,_)}}function b0(A,f,g,_,U){for(U=U&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var W=A,pe=f,Be=g,He=_,At=pe.flags;switch(pe.tag){case 0:case 11:case 15:b0(W,pe,Be,He,U),Rp(8,pe);break;case 23:break;case 22:var Ct=pe.stateNode;pe.memoizedState!==null?Ct._visibility&2?b0(W,pe,Be,He,U):Mp(W,pe):(Ct._visibility|=2,b0(W,pe,Be,He,U)),U&&At&2048&&i_(pe.alternate,pe);break;case 24:b0(W,pe,Be,He,U),U&&At&2048&&o_(pe.alternate,pe);break;default:b0(W,pe,Be,He,U)}f=f.sibling}}function Mp(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=A,_=f,U=_.flags;switch(_.tag){case 22:Mp(g,_),U&2048&&i_(_.alternate,_);break;case 24:Mp(g,_),U&2048&&o_(_.alternate,_);break;default:Mp(g,_)}f=f.sibling}}var Up=8192;function _0(A){if(A.subtreeFlags&Up)for(A=A.child;A!==null;)dB(A),A=A.sibling}function dB(A){switch(A.tag){case 26:_0(A),A.flags&Up&&A.memoizedState!==null&&fV(yu,A.memoizedState,A.memoizedProps);break;case 5:_0(A);break;case 3:case 4:var f=yu;yu=f1(A.stateNode.containerInfo),_0(A),yu=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=Up,Up=16777216,_0(A),Up=f):_0(A));break;default:_0(A)}}function fB(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function Op(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];Hi=_,mB(_,A)}fB(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)hB(A),A=A.sibling}function hB(A){switch(A.tag){case 0:case 11:case 15:Op(A),A.flags&2048&&Nd(9,A,A.return);break;case 3:Op(A);break;case 12:Op(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,t1(A)):Op(A);break;default:Op(A)}}function t1(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];Hi=_,mB(_,A)}fB(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:Nd(8,f,f.return),t1(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,t1(f));break;default:t1(f)}A=A.sibling}}function mB(A,f){for(;Hi!==null;){var g=Hi;switch(g.tag){case 0:case 11:case 15:Nd(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Wf(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,Hi=_;else e:for(g=A;Hi!==null;){_=Hi;var U=_.sibling,W=_.return;if(iB(_),_===g){Hi=null;break e}if(U!==null){U.return=W,Hi=U;break e}Hi=W}}}var B9={getCacheForType:function(A){var f=Qa(Ha),g=f.data.get(A);return g===void 0&&(g=A(),f.data.set(A,g)),g}},k9=typeof WeakMap=="function"?WeakMap:Map,vs=0,Qs=null,Mr=null,Wr=0,ys=0,dc=null,Id=!1,C0=!1,l_=!1,QA=0,Ia=0,Fd=0,ch=0,c_=0,Qc=0,E0=0,jp=null,Ql=null,u_=!1,A_=0,n1=1/0,r1=null,Dd=null,uo=0,Ld=null,S0=null,T0=0,d_=0,f_=null,pB=null,Qp=0,h_=null;function fc(){if((vs&2)!==0&&Wr!==0)return Wr&-Wr;if(ee.T!==null){var A=IA;return A!==0?A:w_()}return zs()}function gB(){Qc===0&&(Qc=(Wr&536870912)===0||zn?ya():536870912);var A=jc.current;return A!==null&&(A.flags|=32),Qc}function hc(A,f,g){(A===Qs&&(ys===2||ys===9)||A.cancelPendingCommit!==null)&&(N0(A,0),Rd(A,Wr,Qc,!1)),Is(A,g),((vs&2)===0||A!==Qs)&&(A===Qs&&((vs&2)===0&&(ch|=g),Ia===4&&Rd(A,Wr,Qc,!1)),tA(A))}function xB(A,f,g){if((vs&6)!==0)throw Error(r(327));var _=!g&&(f&124)===0&&(f&A.expiredLanes)===0||Lr(A,f),U=_?D9(A,f):g_(A,f,!0),W=_;do{if(U===0){C0&&!_&&Rd(A,f,0,!1);break}else{if(g=A.current.alternate,W&&!I9(g)){U=g_(A,f,!1),W=!1;continue}if(U===2){if(W=f,A.errorRecoveryDisabledLanes&W)var pe=0;else pe=A.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){f=pe;e:{var Be=A;U=jp;var He=Be.current.memoizedState.isDehydrated;if(He&&(N0(Be,pe).flags|=256),pe=g_(Be,pe,!1),pe!==2){if(l_&&!He){Be.errorRecoveryDisabledLanes|=W,ch|=W,U=4;break e}W=Ql,Ql=U,W!==null&&(Ql===null?Ql=W:Ql.push.apply(Ql,W))}U=pe}if(W=!1,U!==2)continue}}if(U===1){N0(A,0),Rd(A,f,0,!0);break}e:{switch(_=A,W=U,W){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Rd(_,f,Qc,!Id);break e;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(U=A_+300-je(),10<U)){if(Rd(_,f,Qc,!Id),nr(_,0,!0)!==0)break e;_.timeoutHandle=KB(vB.bind(null,_,g,Ql,r1,u_,f,Qc,ch,E0,Id,W,2,-0,0),U);break e}vB(_,g,Ql,r1,u_,f,Qc,ch,E0,Id,W,0,-0,0)}}break}while(!0);tA(A)}function vB(A,f,g,_,U,W,pe,Be,He,At,Ct,Dt,ft,mt){if(A.timeoutHandle=-1,Dt=f.subtreeFlags,(Dt&8192||(Dt&16785408)===16785408)&&($p={stylesheets:null,count:0,unsuspend:dV},dB(f),Dt=hV(),Dt!==null)){A.cancelPendingCommit=Dt(SB.bind(null,A,f,W,g,_,U,pe,Be,He,Ct,1,ft,mt)),Rd(A,W,pe,!At);return}SB(A,f,W,g,_,U,pe,Be,He)}function I9(A){for(var f=A;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var U=g[_],W=U.getSnapshot;U=U.value;try{if(!Sa(W(),U))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Rd(A,f,g,_){f&=~c_,f&=~ch,A.suspendedLanes|=f,A.pingedLanes&=~f,_&&(A.warmLanes|=f),_=A.expirationTimes;for(var U=f;0<U;){var W=31-Qt(U),pe=1<<W;_[W]=-1,U&=~pe}g!==0&&vn(A,g,f)}function s1(){return(vs&6)===0?(Hp(0),!1):!0}function m_(){if(Mr!==null){if(ys===0)var A=Mr.return;else A=Mr,oc=Ws=null,h0(A),y0=null,Fp=0,A=Mr;for(;A!==null;)JN(A.alternate,A),A=A.return;Mr=null}}function N0(A,f){var g=A.timeoutHandle;g!==-1&&(A.timeoutHandle=-1,W9(g)),g=A.cancelPendingCommit,g!==null&&(A.cancelPendingCommit=null,g()),m_(),Qs=A,Mr=g=hl(A.current,null),Wr=f,ys=0,dc=null,Id=!1,C0=Lr(A,f),l_=!1,E0=Qc=c_=ch=Fd=Ia=0,Ql=jp=null,u_=!1,(f&8)!==0&&(f|=f&32);var _=A.entangledLanes;if(_!==0)for(A=A.entanglements,_&=f;0<_;){var U=31-Qt(_),W=1<<U;f|=A[U],_&=~W}return QA=f,io(),g}function yB(A,f){kn=null,ee.H=Gv,f===_e||f===Ne?(f=Ze(),ys=3):f===Ee?(f=Ze(),ys=4):ys=f===UN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,dc=f,Mr===null&&(Ia=1,Yv(A,fr(f,A.current)))}function wB(){var A=ee.H;return ee.H=Gv,A===null?Gv:A}function bB(){var A=ee.A;return ee.A=B9,A}function p_(){Ia=4,Id||(Wr&4194048)!==Wr&&jc.current!==null||(C0=!0),(Fd&134217727)===0&&(ch&134217727)===0||Qs===null||Rd(Qs,Wr,Qc,!1)}function g_(A,f,g){var _=vs;vs|=2;var U=wB(),W=bB();(Qs!==A||Wr!==f)&&(r1=null,N0(A,f)),f=!1;var pe=Ia;e:do try{if(ys!==0&&Mr!==null){var Be=Mr,He=dc;switch(ys){case 8:m_(),pe=6;break e;case 3:case 2:case 9:case 6:jc.current===null&&(f=!0);var At=ys;if(ys=0,dc=null,B0(A,Be,He,At),g&&C0){pe=0;break e}break;default:At=ys,ys=0,dc=null,B0(A,Be,He,At)}}F9(),pe=Ia;break}catch(Ct){yB(A,Ct)}while(!0);return f&&A.shellSuspendCounter++,oc=Ws=null,vs=_,ee.H=U,ee.A=W,Mr===null&&(Qs=null,Wr=0,io()),pe}function F9(){for(;Mr!==null;)_B(Mr)}function D9(A,f){var g=vs;vs|=2;var _=wB(),U=bB();Qs!==A||Wr!==f?(r1=null,n1=je()+500,N0(A,f)):C0=Lr(A,f);e:do try{if(ys!==0&&Mr!==null){f=Mr;var W=dc;t:switch(ys){case 1:ys=0,dc=null,B0(A,f,W,1);break;case 2:case 9:if(Re(W)){ys=0,dc=null,CB(f);break}f=function(){ys!==2&&ys!==9||Qs!==A||(ys=7),tA(A)},W.then(f,f);break e;case 3:ys=7;break e;case 4:ys=5;break e;case 7:Re(W)?(ys=0,dc=null,CB(f)):(ys=0,dc=null,B0(A,f,W,7));break;case 5:var pe=null;switch(Mr.tag){case 26:pe=Mr.memoizedState;case 5:case 27:var Be=Mr;if(!pe||ak(pe)){ys=0,dc=null;var He=Be.sibling;if(He!==null)Mr=He;else{var At=Be.return;At!==null?(Mr=At,a1(At)):Mr=null}break t}}ys=0,dc=null,B0(A,f,W,5);break;case 6:ys=0,dc=null,B0(A,f,W,6);break;case 8:m_(),Ia=6;break e;default:throw Error(r(462))}}L9();break}catch(Ct){yB(A,Ct)}while(!0);return oc=Ws=null,ee.H=_,ee.A=U,vs=g,Mr!==null?0:(Qs=null,Wr=0,io(),Ia)}function L9(){for(;Mr!==null&&!Oe();)_B(Mr)}function _B(A){var f=YN(A.alternate,A,QA);A.memoizedProps=A.pendingProps,f===null?a1(A):Mr=f}function CB(A){var f=A,g=f.alternate;switch(f.tag){case 15:case 0:f=zN(g,f,f.pendingProps,f.type,void 0,Wr);break;case 11:f=zN(g,f,f.pendingProps,f.type.render,f.ref,Wr);break;case 5:h0(f);default:JN(g,f),f=Mr=Vu(f,QA),f=YN(g,f,QA)}A.memoizedProps=A.pendingProps,f===null?a1(A):Mr=f}function B0(A,f,g,_){oc=Ws=null,h0(f),y0=null,Fp=0;var U=f.return;try{if(_9(A,U,f,g,Wr)){Ia=1,Yv(A,fr(g,A.current)),Mr=null;return}}catch(W){if(U!==null)throw Mr=U,W;Ia=1,Yv(A,fr(g,A.current)),Mr=null;return}f.flags&32768?(zn||_===1?A=!0:C0||(Wr&536870912)!==0?A=!1:(Id=A=!0,(_===2||_===9||_===3||_===6)&&(_=jc.current,_!==null&&_.tag===13&&(_.flags|=16384))),EB(f,A)):a1(f)}function a1(A){var f=A;do{if((f.flags&32768)!==0){EB(f,Id);return}A=f.return;var g=E9(f.alternate,f,QA);if(g!==null){Mr=g;return}if(f=f.sibling,f!==null){Mr=f;return}Mr=f=A}while(f!==null);Ia===0&&(Ia=5)}function EB(A,f){do{var g=S9(A.alternate,A);if(g!==null){g.flags&=32767,Mr=g;return}if(g=A.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(A=A.sibling,A!==null)){Mr=A;return}Mr=A=g}while(A!==null);Ia=6,Mr=null}function SB(A,f,g,_,U,W,pe,Be,He){A.cancelPendingCommit=null;do i1();while(uo!==0);if((vs&6)!==0)throw Error(r(327));if(f!==null){if(f===A.current)throw Error(r(177));if(W=f.lanes|f.childLanes,W|=Zr,lr(A,g,W,pe,Be,He),A===Qs&&(Mr=Qs=null,Wr=0),S0=f,Ld=A,T0=g,d_=W,f_=U,pB=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,U9(Tt,function(){return IB(),null})):(A.callbackNode=null,A.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=ee.T,ee.T=null,U=oe.p,oe.p=2,pe=vs,vs|=4;try{T9(A,f,g)}finally{vs=pe,oe.p=U,ee.T=_}}uo=1,TB(),NB(),BB()}}function TB(){if(uo===1){uo=0;var A=Ld,f=S0,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=ee.T,ee.T=null;var _=oe.p;oe.p=2;var U=vs;vs|=4;try{cB(f,A);var W=B_,pe=Ta(A.containerInfo),Be=W.focusedElem,He=W.selectionRange;if(pe!==Be&&Be&&Be.ownerDocument&&Rl(Be.ownerDocument.documentElement,Be)){if(He!==null&&ua(Be)){var At=He.start,Ct=He.end;if(Ct===void 0&&(Ct=At),"selectionStart"in Be)Be.selectionStart=At,Be.selectionEnd=Math.min(Ct,Be.value.length);else{var Dt=Be.ownerDocument||document,ft=Dt&&Dt.defaultView||window;if(ft.getSelection){var mt=ft.getSelection(),Xn=Be.textContent.length,jn=Math.min(He.start,Xn),Ns=He.end===void 0?jn:Math.min(He.end,Xn);!mt.extend&&jn>Ns&&(pe=Ns,Ns=jn,jn=pe);var tt=Ll(Be,jn),$e=Ll(Be,Ns);if(tt&&$e&&(mt.rangeCount!==1||mt.anchorNode!==tt.node||mt.anchorOffset!==tt.offset||mt.focusNode!==$e.node||mt.focusOffset!==$e.offset)){var lt=Dt.createRange();lt.setStart(tt.node,tt.offset),mt.removeAllRanges(),jn>Ns?(mt.addRange(lt),mt.extend($e.node,$e.offset)):(lt.setEnd($e.node,$e.offset),mt.addRange(lt))}}}}for(Dt=[],mt=Be;mt=mt.parentNode;)mt.nodeType===1&&Dt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Be.focus=="function"&&Be.focus(),Be=0;Be<Dt.length;Be++){var Nt=Dt[Be];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}x1=!!N_,B_=N_=null}finally{vs=U,oe.p=_,ee.T=g}}A.current=f,uo=2}}function NB(){if(uo===2){uo=0;var A=Ld,f=S0,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=ee.T,ee.T=null;var _=oe.p;oe.p=2;var U=vs;vs|=4;try{aB(A,f.alternate,f)}finally{vs=U,oe.p=_,ee.T=g}}uo=3}}function BB(){if(uo===4||uo===3){uo=0,Ie();var A=Ld,f=S0,g=T0,_=pB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?uo=5:(uo=0,S0=Ld=null,kB(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(Dd=null),As(g),f=f.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Gt,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=ee.T,U=oe.p,oe.p=2,ee.T=null;try{for(var W=A.onRecoverableError,pe=0;pe<_.length;pe++){var Be=_[pe];W(Be.value,{componentStack:Be.stack})}}finally{ee.T=f,oe.p=U}}(T0&3)!==0&&i1(),tA(A),U=A.pendingLanes,(g&4194090)!==0&&(U&42)!==0?A===h_?Qp++:(Qp=0,h_=A):Qp=0,Hp(0)}}function kB(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,Wf(f)))}function i1(A){return TB(),NB(),BB(),IB()}function IB(){if(uo!==5)return!1;var A=Ld,f=d_;d_=0;var g=As(T0),_=ee.T,U=oe.p;try{oe.p=32>g?32:g,ee.T=null,g=f_,f_=null;var W=Ld,pe=T0;if(uo=0,S0=Ld=null,T0=0,(vs&6)!==0)throw Error(r(331));var Be=vs;if(vs|=4,hB(W.current),AB(W,W.current,pe,g),vs=Be,Hp(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Gt,W)}catch{}return!0}finally{oe.p=U,ee.T=_,kB(A,f)}}function FB(A,f,g){f=fr(g,f),f=qb(A.stateNode,f,2),A=It(A,f,2),A!==null&&(Is(A,2),tA(A))}function Ds(A,f,g){if(A.tag===3)FB(A,A,g);else for(;f!==null;){if(f.tag===3){FB(f,A,g);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Dd===null||!Dd.has(_))){A=fr(g,A),g=PN(2),_=It(f,g,2),_!==null&&(MN(g,_,f,A),Is(_,2),tA(_));break}}f=f.return}}function x_(A,f,g){var _=A.pingCache;if(_===null){_=A.pingCache=new k9;var U=new Set;_.set(f,U)}else U=_.get(f),U===void 0&&(U=new Set,_.set(f,U));U.has(g)||(l_=!0,U.add(g),A=R9.bind(null,A,f,g),f.then(A,A))}function R9(A,f,g){var _=A.pingCache;_!==null&&_.delete(f),A.pingedLanes|=A.suspendedLanes&g,A.warmLanes&=~g,Qs===A&&(Wr&g)===g&&(Ia===4||Ia===3&&(Wr&62914560)===Wr&&300>je()-A_?(vs&2)===0&&N0(A,0):c_|=g,E0===Wr&&(E0=0)),tA(A)}function DB(A,f){f===0&&(f=wr()),A=rc(A,f),A!==null&&(Is(A,f),tA(A))}function P9(A){var f=A.memoizedState,g=0;f!==null&&(g=f.retryLane),DB(A,g)}function M9(A,f){var g=0;switch(A.tag){case 13:var _=A.stateNode,U=A.memoizedState;U!==null&&(g=U.retryLane);break;case 19:_=A.stateNode;break;case 22:_=A.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),DB(A,g)}function U9(A,f){return Ve(A,f)}var o1=null,k0=null,v_=!1,l1=!1,y_=!1,uh=0;function tA(A){A!==k0&&A.next===null&&(k0===null?o1=k0=A:k0=k0.next=A),l1=!0,v_||(v_=!0,j9())}function Hp(A,f){if(!y_&&l1){y_=!0;do for(var g=!1,_=o1;_!==null;){if(A!==0){var U=_.pendingLanes;if(U===0)var W=0;else{var pe=_.suspendedLanes,Be=_.pingedLanes;W=(1<<31-Qt(42|A)+1)-1,W&=U&~(pe&~Be),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(g=!0,MB(_,W))}else W=Wr,W=nr(_,_===Qs?W:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(W&3)===0||Lr(_,W)||(g=!0,MB(_,W));_=_.next}while(g);y_=!1}}function O9(){LB()}function LB(){l1=v_=!1;var A=0;uh!==0&&($9()&&(A=uh),uh=0);for(var f=je(),g=null,_=o1;_!==null;){var U=_.next,W=RB(_,f);W===0?(_.next=null,g===null?o1=U:g.next=U,U===null&&(k0=g)):(g=_,(A!==0||(W&3)!==0)&&(l1=!0)),_=U}Hp(A)}function RB(A,f){for(var g=A.suspendedLanes,_=A.pingedLanes,U=A.expirationTimes,W=A.pendingLanes&-62914561;0<W;){var pe=31-Qt(W),Be=1<<pe,He=U[pe];He===-1?((Be&g)===0||(Be&_)!==0)&&(U[pe]=Zn(Be,f)):He<=f&&(A.expiredLanes|=Be),W&=~Be}if(f=Qs,g=Wr,g=nr(A,A===f?g:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),_=A.callbackNode,g===0||A===f&&(ys===2||ys===9)||A.cancelPendingCommit!==null)return _!==null&&_!==null&&nt(_),A.callbackNode=null,A.callbackPriority=0;if((g&3)===0||Lr(A,g)){if(f=g&-g,f===A.callbackPriority)return f;switch(_!==null&&nt(_),As(g)){case 2:case 8:g=vt;break;case 32:g=Tt;break;case 268435456:g=Vt;break;default:g=Tt}return _=PB.bind(null,A),g=Ve(g,_),A.callbackPriority=f,A.callbackNode=g,f}return _!==null&&_!==null&&nt(_),A.callbackPriority=2,A.callbackNode=null,2}function PB(A,f){if(uo!==0&&uo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var g=A.callbackNode;if(i1()&&A.callbackNode!==g)return null;var _=Wr;return _=nr(A,A===Qs?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),_===0?null:(xB(A,_,f),RB(A,je()),A.callbackNode!=null&&A.callbackNode===g?PB.bind(null,A):null)}function MB(A,f){if(i1())return null;xB(A,f,!0)}function j9(){Y9(function(){(vs&6)!==0?Ve(st,O9):LB()})}function w_(){return uh===0&&(uh=ya()),uh}function UB(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:to(""+A)}function OB(A,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,A.id&&g.setAttribute("form",A.id),f.parentNode.insertBefore(g,f),A=new FormData(A),g.parentNode.removeChild(g),A}function Q9(A,f,g,_,U){if(f==="submit"&&g&&g.stateNode===U){var W=UB((U[Nr]||null).action),pe=_.submitter;pe&&(f=(f=pe[Nr]||null)?UB(f.formAction):pe.getAttribute("formAction"),f!==null&&(W=f,pe=null));var Be=new al("action","action",null,_,U);A.push({event:Be,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(uh!==0){var He=pe?OB(U,pe):new FormData(U);Oc(g,{pending:!0,data:He,method:U.method,action:W},null,He)}}else typeof W=="function"&&(Be.preventDefault(),He=pe?OB(U,pe):new FormData(U),Oc(g,{pending:!0,data:He,method:U.method,action:W},W,He))},currentTarget:U}]})}}for(var b_=0;b_<dl.length;b_++){var __=dl[b_],H9=__.toLowerCase(),V9=__[0].toUpperCase()+__.slice(1);Os(H9,"on"+V9)}Os(Qu,"onAnimationEnd"),Os(ja,"onAnimationIteration"),Os(Al,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Rc,"onTransitionRun"),Os(Pl,"onTransitionStart"),Os(Hu,"onTransitionCancel"),Os(ec,"onTransitionEnd"),jt("onMouseEnter",["mouseout","mouseover"]),jt("onMouseLeave",["mouseout","mouseover"]),jt("onPointerEnter",["pointerout","pointerover"]),jt("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vp));function jB(A,f){f=(f&4)!==0;for(var g=0;g<A.length;g++){var _=A[g],U=_.event;_=_.listeners;e:{var W=void 0;if(f)for(var pe=_.length-1;0<=pe;pe--){var Be=_[pe],He=Be.instance,At=Be.currentTarget;if(Be=Be.listener,He!==W&&U.isPropagationStopped())break e;W=Be,U.currentTarget=At;try{W(U)}catch(Ct){Wv(Ct)}U.currentTarget=null,W=He}else for(pe=0;pe<_.length;pe++){if(Be=_[pe],He=Be.instance,At=Be.currentTarget,Be=Be.listener,He!==W&&U.isPropagationStopped())break e;W=Be,U.currentTarget=At;try{W(U)}catch(Ct){Wv(Ct)}U.currentTarget=null,W=He}}}}function Ur(A,f){var g=f[br];g===void 0&&(g=f[br]=new Set);var _=A+"__bubble";g.has(_)||(QB(f,A,2,!1),g.add(_))}function C_(A,f,g){var _=0;f&&(_|=4),QB(g,A,_,f)}var c1="_reactListening"+Math.random().toString(36).slice(2);function E_(A){if(!A[c1]){A[c1]=!0,at.forEach(function(g){g!=="selectionchange"&&(z9.has(g)||C_(g,!1,A),C_(g,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[c1]||(f[c1]=!0,C_("selectionchange",!1,f))}}function QB(A,f,g,_){switch(Ak(f)){case 2:var U=gV;break;case 8:U=xV;break;default:U=O_}g=U.bind(null,f,g,A),U=void 0,!Ua||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(U=!0),_?U!==void 0?A.addEventListener(f,g,{capture:!0,passive:U}):A.addEventListener(f,g,!0):U!==void 0?A.addEventListener(f,g,{passive:U}):A.addEventListener(f,g,!1)}function S_(A,f,g,_,U){var W=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var pe=_.tag;if(pe===3||pe===4){var Be=_.stateNode.containerInfo;if(Be===U)break;if(pe===4)for(pe=_.return;pe!==null;){var He=pe.tag;if((He===3||He===4)&&pe.stateNode.containerInfo===U)return;pe=pe.return}for(;Be!==null;){if(pe=Le(Be),pe===null)return;if(He=pe.tag,He===5||He===6||He===26||He===27){_=W=pe;continue e}Be=Be.parentNode}}_=_.return}wi(function(){var At=W,Ct=Gr(g),Dt=[];e:{var ft=tc.get(A);if(ft!==void 0){var mt=al,Xn=A;switch(A){case"keypress":if(qr(g)===0)break e;case"keydown":case"keyup":mt=ol;break;case"focusin":Xn="focus",mt=Sl;break;case"focusout":Xn="blur",mt=Sl;break;case"beforeblur":case"afterblur":mt=Sl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ss;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=El;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=kc;break;case Qu:case ja:case Al:mt=Nc;break;case ec:mt=ge;break;case"scroll":case"scrollend":mt=lu;break;case"wheel":mt=ze;break;case"copy":case"cut":case"paste":mt=Tl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Il;break;case"toggle":case"beforetoggle":mt=gt}var jn=(f&4)!==0,Ns=!jn&&(A==="scroll"||A==="scrollend"),tt=jn?ft!==null?ft+"Capture":null:ft;jn=[];for(var $e=At,lt;$e!==null;){var Nt=$e;if(lt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||lt===null||tt===null||(Nt=rr($e,tt),Nt!=null&&jn.push(zp($e,Nt,lt))),Ns)break;$e=$e.return}0<jn.length&&(ft=new mt(ft,Xn,null,g,Ct),Dt.push({event:ft,listeners:jn}))}}if((f&7)===0){e:{if(ft=A==="mouseover"||A==="pointerover",mt=A==="mouseout"||A==="pointerout",ft&&g!==Fi&&(Xn=g.relatedTarget||g.fromElement)&&(Le(Xn)||Xn[Xr]))break e;if((mt||ft)&&(ft=Ct.window===Ct?Ct:(ft=Ct.ownerDocument)?ft.defaultView||ft.parentWindow:window,mt?(Xn=g.relatedTarget||g.toElement,mt=At,Xn=Xn?Le(Xn):null,Xn!==null&&(Ns=a(Xn),jn=Xn.tag,Xn!==Ns||jn!==5&&jn!==27&&jn!==6)&&(Xn=null)):(mt=null,Xn=At),mt!==Xn)){if(jn=Ss,Nt="onMouseLeave",tt="onMouseEnter",$e="mouse",(A==="pointerout"||A==="pointerover")&&(jn=Il,Nt="onPointerLeave",tt="onPointerEnter",$e="pointer"),Ns=mt==null?ft:et(mt),lt=Xn==null?ft:et(Xn),ft=new jn(Nt,$e+"leave",mt,g,Ct),ft.target=Ns,ft.relatedTarget=lt,Nt=null,Le(Ct)===At&&(jn=new jn(tt,$e+"enter",Xn,g,Ct),jn.target=lt,jn.relatedTarget=Ns,Nt=jn),Ns=Nt,mt&&Xn)t:{for(jn=mt,tt=Xn,$e=0,lt=jn;lt;lt=I0(lt))$e++;for(lt=0,Nt=tt;Nt;Nt=I0(Nt))lt++;for(;0<$e-lt;)jn=I0(jn),$e--;for(;0<lt-$e;)tt=I0(tt),lt--;for(;$e--;){if(jn===tt||tt!==null&&jn===tt.alternate)break t;jn=I0(jn),tt=I0(tt)}jn=null}else jn=null;mt!==null&&HB(Dt,ft,mt,jn,!1),Xn!==null&&Ns!==null&&HB(Dt,Ns,Xn,jn,!0)}}e:{if(ft=At?et(At):window,mt=ft.nodeName&&ft.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ft.type==="file")var pn=Fl;else if(Pr(ft))if(Fc)pn=vd;else{pn=$f;var kr=ai}else mt=ft.nodeName,!mt||mt.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?At&&Jl(At.elementType)&&(pn=Fl):pn=ao;if(pn&&(pn=pn(A,At))){Eo(Dt,pn,g,Ct);break e}kr&&kr(A,ft,At),A==="focusout"&&At&&ft.type==="number"&&At.memoizedProps.value!=null&&Zi(ft,"number",ft.value)}switch(kr=At?et(At):window,A){case"focusin":(Pr(kr)||kr.contentEditable==="true")&&(Aa=kr,Ui=At,So=null);break;case"focusout":So=Ui=Aa=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":To=!1,Us(Dt,g,Ct);break;case"selectionchange":if(cl)break;case"keydown":case"keyup":Us(Dt,g,Ct)}var _n;if(qt)e:{switch(A){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else Ln?ot(A,g)&&(Hn="onCompositionEnd"):A==="keydown"&&g.keyCode===229&&(Hn="onCompositionStart");Hn&&(de&&g.locale!=="ko"&&(Ln||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&Ln&&(_n=sl()):(ni=Ct,ri="value"in ni?ni.value:ni.textContent,Ln=!0)),kr=u1(At,Hn),0<kr.length&&(Hn=new Ea(Hn,A,null,g,Ct),Dt.push({event:Hn,listeners:kr}),_n?Hn.data=_n:(_n=Pt(g),_n!==null&&(Hn.data=_n)))),(_n=ae?gr(A,g):Yn(A,g))&&(Hn=u1(At,"onBeforeInput"),0<Hn.length&&(kr=new Ea("onBeforeInput","beforeinput",null,g,Ct),Dt.push({event:kr,listeners:Hn}),kr.data=_n)),Q9(Dt,A,At,g,Ct)}jB(Dt,f)})}function zp(A,f,g){return{instance:A,listener:f,currentTarget:g}}function u1(A,f){for(var g=f+"Capture",_=[];A!==null;){var U=A,W=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||W===null||(U=rr(A,g),U!=null&&_.unshift(zp(A,U,W)),U=rr(A,f),U!=null&&_.push(zp(A,U,W))),A.tag===3)return _;A=A.return}return[]}function I0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function HB(A,f,g,_,U){for(var W=f._reactName,pe=[];g!==null&&g!==_;){var Be=g,He=Be.alternate,At=Be.stateNode;if(Be=Be.tag,He!==null&&He===_)break;Be!==5&&Be!==26&&Be!==27||At===null||(He=At,U?(At=rr(g,W),At!=null&&pe.unshift(zp(g,At,He))):U||(At=rr(g,W),At!=null&&pe.push(zp(g,At,He)))),g=g.return}pe.length!==0&&A.push({event:f,listeners:pe})}var G9=/\r\n?/g,q9=/\u0000|\uFFFD/g;function VB(A){return(typeof A=="string"?A:""+A).replace(G9,`
`).replace(q9,"")}function zB(A,f){return f=VB(f),VB(A)===f}function A1(){}function Ts(A,f,g,_,U,W){switch(g){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||Ca(A,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&Ca(A,""+_);break;case"className":ur(A,"class",_);break;case"tabIndex":ur(A,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(A,g,_);break;case"style":nl(A,_,W);break;case"data":if(f!=="object"){ur(A,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||g!=="href")){A.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){A.removeAttribute(g);break}_=to(""+_),A.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){A.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(g==="formAction"?(f!=="input"&&Ts(A,f,"name",U.name,U,null),Ts(A,f,"formEncType",U.formEncType,U,null),Ts(A,f,"formMethod",U.formMethod,U,null),Ts(A,f,"formTarget",U.formTarget,U,null)):(Ts(A,f,"encType",U.encType,U,null),Ts(A,f,"method",U.method,U,null),Ts(A,f,"target",U.target,U,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){A.removeAttribute(g);break}_=to(""+_),A.setAttribute(g,_);break;case"onClick":_!=null&&(A.onclick=A1);break;case"onScroll":_!=null&&Ur("scroll",A);break;case"onScrollEnd":_!=null&&Ur("scrollend",A);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(U.children!=null)throw Error(r(60));A.innerHTML=g}}break;case"multiple":A.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":A.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){A.removeAttribute("xlink:href");break}g=to(""+_),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?A.setAttribute(g,""+_):A.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?A.setAttribute(g,""):A.removeAttribute(g);break;case"capture":case"download":_===!0?A.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?A.setAttribute(g,_):A.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?A.setAttribute(g,_):A.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?A.removeAttribute(g):A.setAttribute(g,_);break;case"popover":Ur("beforetoggle",A),Ur("toggle",A),cr(A,"popover",_);break;case"xlinkActuate":dr(A,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":dr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":dr(A,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":dr(A,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":dr(A,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":dr(A,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":dr(A,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":dr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":dr(A,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":cr(A,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=eo.get(g)||g,cr(A,g,_))}}function T_(A,f,g,_,U,W){switch(g){case"style":nl(A,_,W);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(U.children!=null)throw Error(r(60));A.innerHTML=g}}break;case"children":typeof _=="string"?Ca(A,_):(typeof _=="number"||typeof _=="bigint")&&Ca(A,""+_);break;case"onScroll":_!=null&&Ur("scroll",A);break;case"onScrollEnd":_!=null&&Ur("scrollend",A);break;case"onClick":_!=null&&(A.onclick=A1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ct.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(U=g.endsWith("Capture"),f=g.slice(2,U?g.length-7:void 0),W=A[Nr]||null,W=W!=null?W[g]:null,typeof W=="function"&&A.removeEventListener(f,W,U),typeof _=="function")){typeof W!="function"&&W!==null&&(g in A?A[g]=null:A.hasAttribute(g)&&A.removeAttribute(g)),A.addEventListener(f,_,U);break e}g in A?A[g]=_:_===!0?A.setAttribute(g,""):cr(A,g,_)}}}function Ao(A,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ur("error",A),Ur("load",A);var _=!1,U=!1,W;for(W in g)if(g.hasOwnProperty(W)){var pe=g[W];if(pe!=null)switch(W){case"src":_=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Ts(A,f,W,pe,g,null)}}U&&Ts(A,f,"srcSet",g.srcSet,g,null),_&&Ts(A,f,"src",g.src,g,null);return;case"input":Ur("invalid",A);var Be=W=pe=U=null,He=null,At=null;for(_ in g)if(g.hasOwnProperty(_)){var Ct=g[_];if(Ct!=null)switch(_){case"name":U=Ct;break;case"type":pe=Ct;break;case"checked":He=Ct;break;case"defaultChecked":At=Ct;break;case"value":W=Ct;break;case"defaultValue":Be=Ct;break;case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,f));break;default:Ts(A,f,_,Ct,g,null)}}_l(A,W,Be,He,At,pe,U,!1),bo(A);return;case"select":Ur("invalid",A),_=pe=W=null;for(U in g)if(g.hasOwnProperty(U)&&(Be=g[U],Be!=null))switch(U){case"value":W=Be;break;case"defaultValue":pe=Be;break;case"multiple":_=Be;default:Ts(A,f,U,Be,g,null)}f=W,g=pe,A.multiple=!!_,f!=null?_a(A,!!_,f,!1):g!=null&&_a(A,!!_,g,!0);return;case"textarea":Ur("invalid",A),W=U=_=null;for(pe in g)if(g.hasOwnProperty(pe)&&(Be=g[pe],Be!=null))switch(pe){case"value":_=Be;break;case"defaultValue":U=Be;break;case"children":W=Be;break;case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(91));break;default:Ts(A,f,pe,Be,g,null)}ti(A,_,U,W),bo(A);return;case"option":for(He in g)if(g.hasOwnProperty(He)&&(_=g[He],_!=null))switch(He){case"selected":A.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Ts(A,f,He,_,g,null)}return;case"dialog":Ur("beforetoggle",A),Ur("toggle",A),Ur("cancel",A),Ur("close",A);break;case"iframe":case"object":Ur("load",A);break;case"video":case"audio":for(_=0;_<Vp.length;_++)Ur(Vp[_],A);break;case"image":Ur("error",A),Ur("load",A);break;case"details":Ur("toggle",A);break;case"embed":case"source":case"link":Ur("error",A),Ur("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(At in g)if(g.hasOwnProperty(At)&&(_=g[At],_!=null))switch(At){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Ts(A,f,At,_,g,null)}return;default:if(Jl(f)){for(Ct in g)g.hasOwnProperty(Ct)&&(_=g[Ct],_!==void 0&&T_(A,f,Ct,_,g,void 0));return}}for(Be in g)g.hasOwnProperty(Be)&&(_=g[Be],_!=null&&Ts(A,f,Be,_,g,null))}function K9(A,f,g,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,W=null,pe=null,Be=null,He=null,At=null,Ct=null;for(mt in g){var Dt=g[mt];if(g.hasOwnProperty(mt)&&Dt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":He=Dt;default:_.hasOwnProperty(mt)||Ts(A,f,mt,null,_,Dt)}}for(var ft in _){var mt=_[ft];if(Dt=g[ft],_.hasOwnProperty(ft)&&(mt!=null||Dt!=null))switch(ft){case"type":W=mt;break;case"name":U=mt;break;case"checked":At=mt;break;case"defaultChecked":Ct=mt;break;case"value":pe=mt;break;case"defaultValue":Be=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:mt!==Dt&&Ts(A,f,ft,mt,_,Dt)}}rs(A,pe,Be,He,At,Ct,W,U);return;case"select":mt=pe=Be=ft=null;for(W in g)if(He=g[W],g.hasOwnProperty(W)&&He!=null)switch(W){case"value":break;case"multiple":mt=He;default:_.hasOwnProperty(W)||Ts(A,f,W,null,_,He)}for(U in _)if(W=_[U],He=g[U],_.hasOwnProperty(U)&&(W!=null||He!=null))switch(U){case"value":ft=W;break;case"defaultValue":Be=W;break;case"multiple":pe=W;default:W!==He&&Ts(A,f,U,W,_,He)}f=Be,g=pe,_=mt,ft!=null?_a(A,!!g,ft,!1):!!_!=!!g&&(f!=null?_a(A,!!g,f,!0):_a(A,!!g,g?[]:"",!1));return;case"textarea":mt=ft=null;for(Be in g)if(U=g[Be],g.hasOwnProperty(Be)&&U!=null&&!_.hasOwnProperty(Be))switch(Be){case"value":break;case"children":break;default:Ts(A,f,Be,null,_,U)}for(pe in _)if(U=_[pe],W=g[pe],_.hasOwnProperty(pe)&&(U!=null||W!=null))switch(pe){case"value":ft=U;break;case"defaultValue":mt=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:U!==W&&Ts(A,f,pe,U,_,W)}Fn(A,ft,mt);return;case"option":for(var Xn in g)if(ft=g[Xn],g.hasOwnProperty(Xn)&&ft!=null&&!_.hasOwnProperty(Xn))switch(Xn){case"selected":A.selected=!1;break;default:Ts(A,f,Xn,null,_,ft)}for(He in _)if(ft=_[He],mt=g[He],_.hasOwnProperty(He)&&ft!==mt&&(ft!=null||mt!=null))switch(He){case"selected":A.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:Ts(A,f,He,ft,_,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jn in g)ft=g[jn],g.hasOwnProperty(jn)&&ft!=null&&!_.hasOwnProperty(jn)&&Ts(A,f,jn,null,_,ft);for(At in _)if(ft=_[At],mt=g[At],_.hasOwnProperty(At)&&ft!==mt&&(ft!=null||mt!=null))switch(At){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,f));break;default:Ts(A,f,At,ft,_,mt)}return;default:if(Jl(f)){for(var Ns in g)ft=g[Ns],g.hasOwnProperty(Ns)&&ft!==void 0&&!_.hasOwnProperty(Ns)&&T_(A,f,Ns,void 0,_,ft);for(Ct in _)ft=_[Ct],mt=g[Ct],!_.hasOwnProperty(Ct)||ft===mt||ft===void 0&&mt===void 0||T_(A,f,Ct,ft,_,mt);return}}for(var tt in g)ft=g[tt],g.hasOwnProperty(tt)&&ft!=null&&!_.hasOwnProperty(tt)&&Ts(A,f,tt,null,_,ft);for(Dt in _)ft=_[Dt],mt=g[Dt],!_.hasOwnProperty(Dt)||ft===mt||ft==null&&mt==null||Ts(A,f,Dt,ft,_,mt)}var N_=null,B_=null;function d1(A){return A.nodeType===9?A:A.ownerDocument}function GB(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qB(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function k_(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var I_=null;function $9(){var A=window.event;return A&&A.type==="popstate"?A===I_?!1:(I_=A,!0):(I_=null,!1)}var KB=typeof setTimeout=="function"?setTimeout:void 0,W9=typeof clearTimeout=="function"?clearTimeout:void 0,$B=typeof Promise=="function"?Promise:void 0,Y9=typeof queueMicrotask=="function"?queueMicrotask:typeof $B<"u"?function(A){return $B.resolve(null).then(A).catch(X9)}:KB;function X9(A){setTimeout(function(){throw A})}function Pd(A){return A==="head"}function WB(A,f){var g=f,_=0,U=0;do{var W=g.nextSibling;if(A.removeChild(g),W&&W.nodeType===8)if(g=W.data,g==="/$"){if(0<_&&8>_){g=_;var pe=A.ownerDocument;if(g&1&&Gp(pe.documentElement),g&2&&Gp(pe.body),g&4)for(g=pe.head,Gp(g),pe=g.firstChild;pe;){var Be=pe.nextSibling,He=pe.nodeName;pe[Fe]||He==="SCRIPT"||He==="STYLE"||He==="LINK"&&pe.rel.toLowerCase()==="stylesheet"||g.removeChild(pe),pe=Be}}if(U===0){A.removeChild(W),Zp(f);return}U--}else g==="$"||g==="$?"||g==="$!"?U++:_=g.charCodeAt(0)-48;else _=0;g=W}while(g);Zp(f)}function F_(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":F_(g),De(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}A.removeChild(g)}}function J9(A,f,g,_){for(;A.nodeType===1;){var U=g;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(_){if(!A[Fe])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(W=A.getAttribute("rel"),W==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(W!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(W=A.getAttribute("src"),(W!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&W&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var W=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===W)return A}else return A;if(A=wu(A.nextSibling),A===null)break}return null}function Z9(A,f,g){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=wu(A.nextSibling),A===null))return null;return A}function D_(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function eV(A,f){var g=A.ownerDocument;if(A.data!=="$?"||g.readyState==="complete")f();else{var _=function(){f(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),A._reactRetry=_}}function wu(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var L_=null;function YB(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var g=A.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return A;f--}else g==="/$"&&f++}A=A.previousSibling}return null}function XB(A,f,g){switch(f=d1(g),A){case"html":if(A=f.documentElement,!A)throw Error(r(452));return A;case"head":if(A=f.head,!A)throw Error(r(453));return A;case"body":if(A=f.body,!A)throw Error(r(454));return A;default:throw Error(r(451))}}function Gp(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);De(A)}var Hc=new Map,JB=new Set;function f1(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var HA=oe.d;oe.d={f:tV,r:nV,D:rV,C:sV,L:aV,m:iV,X:lV,S:oV,M:cV};function tV(){var A=HA.f(),f=s1();return A||f}function nV(A){var f=Me(A);f!==null&&f.tag===5&&f.type==="form"?ah(f):HA.r(A)}var F0=typeof document>"u"?null:document;function ZB(A,f,g){var _=F0;if(_&&typeof f=="string"&&f){var U=_r(f);U='link[rel="'+A+'"][href="'+U+'"]',typeof g=="string"&&(U+='[crossorigin="'+g+'"]'),JB.has(U)||(JB.add(U),A={rel:A,crossOrigin:g,href:f},_.querySelector(U)===null&&(f=_.createElement("link"),Ao(f,"link",A),Je(f),_.head.appendChild(f)))}}function rV(A){HA.D(A),ZB("dns-prefetch",A,null)}function sV(A,f){HA.C(A,f),ZB("preconnect",A,f)}function aV(A,f,g){HA.L(A,f,g);var _=F0;if(_&&A&&f){var U='link[rel="preload"][as="'+_r(f)+'"]';f==="image"&&g&&g.imageSrcSet?(U+='[imagesrcset="'+_r(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(U+='[imagesizes="'+_r(g.imageSizes)+'"]')):U+='[href="'+_r(A)+'"]';var W=U;switch(f){case"style":W=D0(A);break;case"script":W=L0(A)}Hc.has(W)||(A=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:A,as:f},g),Hc.set(W,A),_.querySelector(U)!==null||f==="style"&&_.querySelector(qp(W))||f==="script"&&_.querySelector(Kp(W))||(f=_.createElement("link"),Ao(f,"link",A),Je(f),_.head.appendChild(f)))}}function iV(A,f){HA.m(A,f);var g=F0;if(g&&A){var _=f&&typeof f.as=="string"?f.as:"script",U='link[rel="modulepreload"][as="'+_r(_)+'"][href="'+_r(A)+'"]',W=U;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=L0(A)}if(!Hc.has(W)&&(A=d({rel:"modulepreload",href:A},f),Hc.set(W,A),g.querySelector(U)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Kp(W)))return}_=g.createElement("link"),Ao(_,"link",A),Je(_),g.head.appendChild(_)}}}function oV(A,f,g){HA.S(A,f,g);var _=F0;if(_&&A){var U=dt(_).hoistableStyles,W=D0(A);f=f||"default";var pe=U.get(W);if(!pe){var Be={loading:0,preload:null};if(pe=_.querySelector(qp(W)))Be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},g),(g=Hc.get(W))&&R_(A,g);var He=pe=_.createElement("link");Je(He),Ao(He,"link",A),He._p=new Promise(function(At,Ct){He.onload=At,He.onerror=Ct}),He.addEventListener("load",function(){Be.loading|=1}),He.addEventListener("error",function(){Be.loading|=2}),Be.loading|=4,h1(pe,f,_)}pe={type:"stylesheet",instance:pe,count:1,state:Be},U.set(W,pe)}}}function lV(A,f){HA.X(A,f);var g=F0;if(g&&A){var _=dt(g).hoistableScripts,U=L0(A),W=_.get(U);W||(W=g.querySelector(Kp(U)),W||(A=d({src:A,async:!0},f),(f=Hc.get(U))&&P_(A,f),W=g.createElement("script"),Je(W),Ao(W,"link",A),g.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},_.set(U,W))}}function cV(A,f){HA.M(A,f);var g=F0;if(g&&A){var _=dt(g).hoistableScripts,U=L0(A),W=_.get(U);W||(W=g.querySelector(Kp(U)),W||(A=d({src:A,async:!0,type:"module"},f),(f=Hc.get(U))&&P_(A,f),W=g.createElement("script"),Je(W),Ao(W,"link",A),g.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},_.set(U,W))}}function ek(A,f,g,_){var U=(U=fe.current)?f1(U):null;if(!U)throw Error(r(446));switch(A){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=D0(g.href),g=dt(U).hoistableStyles,_=g.get(f),_||(_={type:"style",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){A=D0(g.href);var W=dt(U).hoistableStyles,pe=W.get(A);if(pe||(U=U.ownerDocument||U,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(A,pe),(W=U.querySelector(qp(A)))&&!W._p&&(pe.instance=W,pe.state.loading=5),Hc.has(A)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Hc.set(A,g),W||uV(U,A,g,pe.state))),f&&_===null)throw Error(r(528,""));return pe}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=L0(g),g=dt(U).hoistableScripts,_=g.get(f),_||(_={type:"script",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,A))}}function D0(A){return'href="'+_r(A)+'"'}function qp(A){return'link[rel="stylesheet"]['+A+"]"}function tk(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function uV(A,f,g,_){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=A.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Ao(f,"link",g),Je(f),A.head.appendChild(f))}function L0(A){return'[src="'+_r(A)+'"]'}function Kp(A){return"script[async]"+A}function nk(A,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var _=A.querySelector('style[data-href~="'+_r(g.href)+'"]');if(_)return f.instance=_,Je(_),_;var U=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(A.ownerDocument||A).createElement("style"),Je(_),Ao(_,"style",U),h1(_,g.precedence,A),f.instance=_;case"stylesheet":U=D0(g.href);var W=A.querySelector(qp(U));if(W)return f.state.loading|=4,f.instance=W,Je(W),W;_=tk(g),(U=Hc.get(U))&&R_(_,U),W=(A.ownerDocument||A).createElement("link"),Je(W);var pe=W;return pe._p=new Promise(function(Be,He){pe.onload=Be,pe.onerror=He}),Ao(W,"link",_),f.state.loading|=4,h1(W,g.precedence,A),f.instance=W;case"script":return W=L0(g.src),(U=A.querySelector(Kp(W)))?(f.instance=U,Je(U),U):(_=g,(U=Hc.get(W))&&(_=d({},g),P_(_,U)),A=A.ownerDocument||A,U=A.createElement("script"),Je(U),Ao(U,"link",_),A.head.appendChild(U),f.instance=U);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,h1(_,g.precedence,A));return f.instance}function h1(A,f,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=_.length?_[_.length-1]:null,W=U,pe=0;pe<_.length;pe++){var Be=_[pe];if(Be.dataset.precedence===f)W=Be;else if(W!==U)break}W?W.parentNode.insertBefore(A,W.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(A,f.firstChild))}function R_(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function P_(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var m1=null;function rk(A,f,g){if(m1===null){var _=new Map,U=m1=new Map;U.set(g,_)}else U=m1,_=U.get(g),_||(_=new Map,U.set(g,_));if(_.has(A))return _;for(_.set(A,null),g=g.getElementsByTagName(A),U=0;U<g.length;U++){var W=g[U];if(!(W[Fe]||W[Rr]||A==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=W.getAttribute(f)||"";pe=A+pe;var Be=_.get(pe);Be?Be.push(W):_.set(pe,[W])}}return _}function sk(A,f,g){A=A.ownerDocument||A,A.head.insertBefore(g,f==="title"?A.querySelector("head > title"):null)}function AV(A,f,g){if(g===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function ak(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var $p=null;function dV(){}function fV(A,f,g){if($p===null)throw Error(r(475));var _=$p;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var U=D0(g.href),W=A.querySelector(qp(U));if(W){A=W._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(_.count++,_=p1.bind(_),A.then(_,_)),f.state.loading|=4,f.instance=W,Je(W);return}W=A.ownerDocument||A,g=tk(g),(U=Hc.get(U))&&R_(g,U),W=W.createElement("link"),Je(W);var pe=W;pe._p=new Promise(function(Be,He){pe.onload=Be,pe.onerror=He}),Ao(W,"link",g),f.instance=W}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=p1.bind(_),A.addEventListener("load",f),A.addEventListener("error",f))}}function hV(){if($p===null)throw Error(r(475));var A=$p;return A.stylesheets&&A.count===0&&M_(A,A.stylesheets),0<A.count?function(f){var g=setTimeout(function(){if(A.stylesheets&&M_(A,A.stylesheets),A.unsuspend){var _=A.unsuspend;A.unsuspend=null,_()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(g)}}:null}function p1(){if(this.count--,this.count===0){if(this.stylesheets)M_(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var g1=null;function M_(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,g1=new Map,f.forEach(mV,A),g1=null,p1.call(A))}function mV(A,f){if(!(f.state.loading&4)){var g=g1.get(A);if(g)var _=g.get(null);else{g=new Map,g1.set(A,g);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<U.length;W++){var pe=U[W];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(g.set(pe.dataset.precedence,pe),_=pe)}_&&g.set(null,_)}U=f.instance,pe=U.getAttribute("data-precedence"),W=g.get(pe)||_,W===_&&g.set(null,U),g.set(pe,U),this.count++,_=p1.bind(this),U.addEventListener("load",_),U.addEventListener("error",_),W?W.parentNode.insertBefore(U,W.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),f.state.loading|=4}}var Wp={$$typeof:M,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function pV(A,f,g,_,U,W,pe,Be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=_,this.onUncaughtError=U,this.onCaughtError=W,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function ik(A,f,g,_,U,W,pe,Be,He,At,Ct,Dt){return A=new pV(A,f,g,pe,Be,He,At,Dt),f=1,W===!0&&(f|=24),W=oi(3,null,null,f),A.current=W,W.stateNode=A,f=xp(),f.refCount++,A.pooledCache=f,f.refCount++,W.memoizedState={element:_,isDehydrated:g,cache:f},qe(W),A}function ok(A){return A?(A=da,A):da}function lk(A,f,g,_,U,W){U=ok(U),_.context===null?_.context=U:_.pendingContext=U,_=bt(f),_.payload={element:g},W=W===void 0?null:W,W!==null&&(_.callback=W),g=It(A,_,f),g!==null&&(hc(g,A,f),Et(g,A,f))}function ck(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var g=A.retryLane;A.retryLane=g!==0&&g<f?g:f}}function U_(A,f){ck(A,f),(A=A.alternate)&&ck(A,f)}function uk(A){if(A.tag===13){var f=rc(A,67108864);f!==null&&hc(f,A,67108864),U_(A,67108864)}}var x1=!0;function gV(A,f,g,_){var U=ee.T;ee.T=null;var W=oe.p;try{oe.p=2,O_(A,f,g,_)}finally{oe.p=W,ee.T=U}}function xV(A,f,g,_){var U=ee.T;ee.T=null;var W=oe.p;try{oe.p=8,O_(A,f,g,_)}finally{oe.p=W,ee.T=U}}function O_(A,f,g,_){if(x1){var U=j_(_);if(U===null)S_(A,f,_,v1,g),dk(A,_);else if(yV(U,A,f,g,_))_.stopPropagation();else if(dk(A,_),f&4&&-1<vV.indexOf(A)){for(;U!==null;){var W=Me(U);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var pe=In(W.pendingLanes);if(pe!==0){var Be=W;for(Be.pendingLanes|=2,Be.entangledLanes|=2;pe;){var He=1<<31-Qt(pe);Be.entanglements[1]|=He,pe&=~He}tA(W),(vs&6)===0&&(n1=je()+500,Hp(0))}}break;case 13:Be=rc(W,2),Be!==null&&hc(Be,W,2),s1(),U_(W,2)}if(W=j_(_),W===null&&S_(A,f,_,v1,g),W===U)break;U=W}U!==null&&_.stopPropagation()}else S_(A,f,_,null,g)}}function j_(A){return A=Gr(A),Q_(A)}var v1=null;function Q_(A){if(v1=null,A=Le(A),A!==null){var f=a(A);if(f===null)A=null;else{var g=f.tag;if(g===13){if(A=i(f),A!==null)return A;A=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return v1=A,null}function Ak(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case st:return 2;case vt:return 8;case Tt:case xt:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var H_=!1,Md=null,Ud=null,Od=null,Yp=new Map,Xp=new Map,jd=[],vV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dk(A,f){switch(A){case"focusin":case"focusout":Md=null;break;case"dragenter":case"dragleave":Ud=null;break;case"mouseover":case"mouseout":Od=null;break;case"pointerover":case"pointerout":Yp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xp.delete(f.pointerId)}}function Jp(A,f,g,_,U,W){return A===null||A.nativeEvent!==W?(A={blockedOn:f,domEventName:g,eventSystemFlags:_,nativeEvent:W,targetContainers:[U]},f!==null&&(f=Me(f),f!==null&&uk(f)),A):(A.eventSystemFlags|=_,f=A.targetContainers,U!==null&&f.indexOf(U)===-1&&f.push(U),A)}function yV(A,f,g,_,U){switch(f){case"focusin":return Md=Jp(Md,A,f,g,_,U),!0;case"dragenter":return Ud=Jp(Ud,A,f,g,_,U),!0;case"mouseover":return Od=Jp(Od,A,f,g,_,U),!0;case"pointerover":var W=U.pointerId;return Yp.set(W,Jp(Yp.get(W)||null,A,f,g,_,U)),!0;case"gotpointercapture":return W=U.pointerId,Xp.set(W,Jp(Xp.get(W)||null,A,f,g,_,U)),!0}return!1}function fk(A){var f=Le(A.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=i(g),f!==null){A.blockedOn=f,oa(A.priority,function(){if(g.tag===13){var _=fc();_=wa(_);var U=rc(g,_);U!==null&&hc(U,g,_),U_(g,_)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){A.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}A.blockedOn=null}function y1(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var g=j_(A.nativeEvent);if(g===null){g=A.nativeEvent;var _=new g.constructor(g.type,g);Fi=_,g.target.dispatchEvent(_),Fi=null}else return f=Me(g),f!==null&&uk(f),A.blockedOn=g,!1;f.shift()}return!0}function hk(A,f,g){y1(A)&&g.delete(f)}function wV(){H_=!1,Md!==null&&y1(Md)&&(Md=null),Ud!==null&&y1(Ud)&&(Ud=null),Od!==null&&y1(Od)&&(Od=null),Yp.forEach(hk),Xp.forEach(hk)}function w1(A,f){A.blockedOn===f&&(A.blockedOn=null,H_||(H_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wV)))}var b1=null;function mk(A){b1!==A&&(b1=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){b1===A&&(b1=null);for(var f=0;f<A.length;f+=3){var g=A[f],_=A[f+1],U=A[f+2];if(typeof _!="function"){if(Q_(_||g)===null)continue;break}var W=Me(g);W!==null&&(A.splice(f,3),f-=3,Oc(W,{pending:!0,data:U,method:g.method,action:_},_,U))}}))}function Zp(A){function f(He){return w1(He,A)}Md!==null&&w1(Md,A),Ud!==null&&w1(Ud,A),Od!==null&&w1(Od,A),Yp.forEach(f),Xp.forEach(f);for(var g=0;g<jd.length;g++){var _=jd[g];_.blockedOn===A&&(_.blockedOn=null)}for(;0<jd.length&&(g=jd[0],g.blockedOn===null);)fk(g),g.blockedOn===null&&jd.shift();if(g=(A.ownerDocument||A).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var U=g[_],W=g[_+1],pe=U[Nr]||null;if(typeof W=="function")pe||mk(g);else if(pe){var Be=null;if(W&&W.hasAttribute("formAction")){if(U=W,pe=W[Nr]||null)Be=pe.formAction;else if(Q_(U)!==null)continue}else Be=pe.action;typeof Be=="function"?g[_+1]=Be:(g.splice(_,3),_-=3),mk(g)}}}function V_(A){this._internalRoot=A}_1.prototype.render=V_.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,_=fc();lk(g,_,A,f,null,null)},_1.prototype.unmount=V_.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;lk(A.current,2,null,A,null,null),s1(),f[Xr]=null}};function _1(A){this._internalRoot=A}_1.prototype.unstable_scheduleHydration=function(A){if(A){var f=zs();A={blockedOn:null,target:A,priority:f};for(var g=0;g<jd.length&&f!==0&&f<jd[g].priority;g++);jd.splice(g,0,A),g===0&&fk(A)}};var pk=e.version;if(pk!=="19.1.1")throw Error(r(527,pk,"19.1.1"));oe.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(r(188)):(A=Object.keys(A).join(","),Error(r(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var bV={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C1.isDisabled&&C1.supportsFiber)try{Gt=C1.inject(bV),Wt=C1}catch{}}return tg.createRoot=function(A,f){if(!s(A))throw Error(r(299));var g=!1,_="",U=FN,W=DN,pe=LN,Be=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(U=f.onUncaughtError),f.onCaughtError!==void 0&&(W=f.onCaughtError),f.onRecoverableError!==void 0&&(pe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Be=f.unstable_transitionCallbacks)),f=ik(A,1,!1,null,null,g,_,U,W,pe,Be,null),A[Xr]=f.current,E_(A),new V_(f)},tg.hydrateRoot=function(A,f,g){if(!s(A))throw Error(r(299));var _=!1,U="",W=FN,pe=DN,Be=LN,He=null,At=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(U=g.identifierPrefix),g.onUncaughtError!==void 0&&(W=g.onUncaughtError),g.onCaughtError!==void 0&&(pe=g.onCaughtError),g.onRecoverableError!==void 0&&(Be=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(He=g.unstable_transitionCallbacks),g.formState!==void 0&&(At=g.formState)),f=ik(A,1,!0,f,g??null,_,U,W,pe,Be,He,At),f.context=ok(null),g=f.current,_=fc(),_=wa(_),U=bt(_),U.callback=null,It(g,U,_),g=_,f.current.lanes=g,Is(f,g),tA(f),A[Xr]=f.current,E_(A),new _1(f)},tg.version="19.1.1",tg}var Sk;function FV(){if(Sk)return q_.exports;Sk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),q_.exports=IV(),q_.exports}var DV=FV();const LV=Kx(DV),RV=()=>{};var Tk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},PV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],i=t[n++],o=t[n++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},lP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,m=(a&3)<<4|o>>4;let p=(o&15)<<2|u>>6,x=u&63;l||(x=64,i||(p=64)),r.push(n[d],n[m],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||m==null)throw new MV;const p=a<<2|o>>4;if(r.push(p),u!==64){const x=o<<4&240|u>>2;if(r.push(x),m!==64){const C=u<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UV=function(t){const e=oP(t);return lP.encodeByteArray(e,!0)},aw=function(t){return UV(t).replace(/\./g,"")},cP=function(t){try{return lP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=()=>OV().__FIREBASE_DEFAULTS__,QV=()=>{if(typeof process>"u"||typeof Tk>"u")return;const t=Tk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cP(t[1]);return e&&JSON.parse(e)},v2=()=>{try{return RV()||jV()||QV()||HV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uP=t=>{var e,n;return(n=(e=v2())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},AP=t=>{const e=uP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dP=()=>{var t;return(t=v2())==null?void 0:t.config},fP=t=>{var e;return(e=v2())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[aw(JSON.stringify(n)),aw(JSON.stringify(i)),""].join(".")}const Ug={};function GV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ug))Ug[e]?t.emulator.push(e):t.prod.push(e);return t}function qV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Nk=!1;function LT(t,e){if(typeof window>"u"||typeof document>"u"||!Xh(window.location.host)||Ug[t]===e||Ug[t]||Nk)return;Ug[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",a=GV().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,x){p.setAttribute("width","24"),p.setAttribute("id",x),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Nk=!0,i()},p}function d(p,x){p.setAttribute("id",x),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=qV(r),x=n("text"),C=document.getElementById(x)||document.createElement("span"),y=n("learnmore"),T=document.getElementById(y)||document.createElement("a"),I=n("preprendIcon"),F=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const M=p.element;o(M),d(T,y);const O=u();l(F,I),M.append(F,C,T,O),document.body.appendChild(M)}a?(C.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xo())}function $V(){var e;const t=(e=v2())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JV(){const t=Xo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZV(){return!$V()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ez(){try{return typeof indexedDB=="object"}catch{return!1}}function tz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="FirebaseError";class _A extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nz,Object.setPrototypeOf(this,_A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wx.prototype.create)}}class Wx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?rz(a,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new _A(s,o,r)}}function rz(t,e){return t.replace(sz,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const sz=/\{\$([^}]+)}/g;function az(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],i=e[s];if(Bk(a)&&Bk(i)){if(!Tf(a,i))return!1}else if(a!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Bk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function gg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iz(t,e){const n=new oz(t,e);return n.subscribe.bind(n)}class oz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lz(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Y_),s.error===void 0&&(s.error=Y_),s.complete===void 0&&(s.complete=Y_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Y_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){return t&&t._delegate?t._delegate:t}class Nf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cz=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Az(e))try{this.getOrInitializeService({instanceIdentifier:hh})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=hh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hh){return this.instances.has(e)}getOptions(e=hh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&i.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hh){return this.component?this.component.multipleInstances?e:hh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uz(t){return t===hh?void 0:t}function Az(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qr||(Qr={}));const fz={debug:Qr.DEBUG,verbose:Qr.VERBOSE,info:Qr.INFO,warn:Qr.WARN,error:Qr.ERROR,silent:Qr.SILENT},hz=Qr.INFO,mz={[Qr.DEBUG]:"log",[Qr.VERBOSE]:"log",[Qr.INFO]:"info",[Qr.WARN]:"warn",[Qr.ERROR]:"error"},pz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let RT=class{constructor(e){this.name=e,this._logLevel=hz,this._logHandler=pz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qr.DEBUG,...e),this._logHandler(this,Qr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qr.VERBOSE,...e),this._logHandler(this,Qr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qr.INFO,...e),this._logHandler(this,Qr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qr.WARN,...e),this._logHandler(this,Qr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qr.ERROR,...e),this._logHandler(this,Qr.ERROR,...e)}};const gz=(t,e)=>e.some(n=>t instanceof n);let kk,Ik;function xz(){return kk||(kk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vz(){return Ik||(Ik=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hP=new WeakMap,IE=new WeakMap,mP=new WeakMap,X_=new WeakMap,PT=new WeakMap;function yz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{n(mf(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&hP.set(n,t)}).catch(()=>{}),PT.set(e,t),e}function wz(t){if(IE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});IE.set(t,e)}let FE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return IE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bz(t){FE=t(FE)}function _z(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(J_(this),e,...n);return mP.set(r,e.sort?e.sort():[e]),mf(r)}:vz().includes(t)?function(...e){return t.apply(J_(this),e),mf(hP.get(this))}:function(...e){return mf(t.apply(J_(this),e))}}function Cz(t){return typeof t=="function"?_z(t):(t instanceof IDBTransaction&&wz(t),gz(t,xz())?new Proxy(t,FE):t)}function mf(t){if(t instanceof IDBRequest)return yz(t);if(X_.has(t))return X_.get(t);const e=Cz(t);return e!==t&&(X_.set(t,e),PT.set(e,t)),e}const J_=t=>PT.get(t);function Ez(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=mf(i);return r&&i.addEventListener("upgradeneeded",l=>{r(mf(i.result),l.oldVersion,l.newVersion,mf(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Sz=["get","getKey","getAll","getAllKeys","count"],Tz=["put","add","delete","clear"],Z_=new Map;function Fk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z_.get(e))return Z_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Tz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Sz.includes(n)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&l.done]))[0]};return Z_.set(e,a),a}bz(t=>({...t,get:(e,n,r)=>Fk(e,n)||t.get(e,n,r),has:(e,n)=>!!Fk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const DE="@firebase/app",Dk="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new RT("@firebase/app"),kz="@firebase/app-compat",Iz="@firebase/analytics-compat",Fz="@firebase/analytics",Dz="@firebase/app-check-compat",Lz="@firebase/app-check",Rz="@firebase/auth",Pz="@firebase/auth-compat",Mz="@firebase/database",Uz="@firebase/data-connect",Oz="@firebase/database-compat",jz="@firebase/functions",Qz="@firebase/functions-compat",Hz="@firebase/installations",Vz="@firebase/installations-compat",zz="@firebase/messaging",Gz="@firebase/messaging-compat",qz="@firebase/performance",Kz="@firebase/performance-compat",$z="@firebase/remote-config",Wz="@firebase/remote-config-compat",Yz="@firebase/storage",Xz="@firebase/storage-compat",Jz="@firebase/firestore",Zz="@firebase/ai",eG="@firebase/firestore-compat",tG="firebase",nG="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="[DEFAULT]",rG={[DE]:"fire-core",[kz]:"fire-core-compat",[Fz]:"fire-analytics",[Iz]:"fire-analytics-compat",[Lz]:"fire-app-check",[Dz]:"fire-app-check-compat",[Rz]:"fire-auth",[Pz]:"fire-auth-compat",[Mz]:"fire-rtdb",[Uz]:"fire-data-connect",[Oz]:"fire-rtdb-compat",[jz]:"fire-fn",[Qz]:"fire-fn-compat",[Hz]:"fire-iid",[Vz]:"fire-iid-compat",[zz]:"fire-fcm",[Gz]:"fire-fcm-compat",[qz]:"fire-perf",[Kz]:"fire-perf-compat",[$z]:"fire-rc",[Wz]:"fire-rc-compat",[Yz]:"fire-gcs",[Xz]:"fire-gcs-compat",[Jz]:"fire-fst",[eG]:"fire-fst-compat",[Zz]:"fire-vertex","fire-js":"fire-js",[tG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map,sG=new Map,RE=new Map;function Lk(t,e){try{t.container.addComponent(e)}catch(n){rd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mh(t){const e=t.name;if(RE.has(e))return rd.debug(`There were multiple attempts to register component ${e}.`),!1;RE.set(e,t);for(const n of lx.values())Lk(n,t);for(const n of sG.values())Lk(n,t);return!0}function y2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xc(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pf=new Wx("app","Firebase",aG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=nG;function MT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:LE,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw pf.create("bad-app-name",{appName:String(s)});if(n||(n=dP()),!n)throw pf.create("no-options");const a=lx.get(s);if(a){if(Tf(n,a.options)&&Tf(r,a.config))return a;throw pf.create("duplicate-app",{appName:s})}const i=new dz(s);for(const l of RE.values())i.addComponent(l);const o=new iG(n,r,i);return lx.set(s,o),o}function UT(t=LE){const e=lx.get(t);if(!e&&t===LE&&dP())return MT();if(!e)throw pf.create("no-app",{appName:t});return e}function Rk(){return Array.from(lx.values())}function dA(t,e,n){let r=rG[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${r}" with version "${e}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rd.warn(i.join(" "));return}Mh(new Nf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG="firebase-heartbeat-database",lG=1,cx="firebase-heartbeat-store";let eC=null;function pP(){return eC||(eC=Ez(oG,lG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cx)}catch(n){console.warn(n)}}}}).catch(t=>{throw pf.create("idb-open",{originalErrorMessage:t.message})})),eC}async function cG(t){try{const n=(await pP()).transaction(cx),r=await n.objectStore(cx).get(gP(t));return await n.done,r}catch(e){if(e instanceof _A)rd.warn(e.message);else{const n=pf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rd.warn(n.message)}}}async function Pk(t,e){try{const r=(await pP()).transaction(cx,"readwrite");await r.objectStore(cx).put(e,gP(t)),await r.done}catch(n){if(n instanceof _A)rd.warn(n.message);else{const r=pf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rd.warn(r.message)}}}function gP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uG=1024,AG=30;class dG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Mk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>AG){const i=mG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mk(),{heartbeatsToSend:r,unsentEntries:s}=fG(this._heartbeatsCache.heartbeats),a=aw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return rd.warn(n),""}}}function Mk(){return new Date().toISOString().substring(0,10)}function fG(t,e=uG){const n=[];let r=t.slice();for(const s of t){const a=n.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),Uk(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ez()?tz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cG(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uk(t){return aw(JSON.stringify({version:2,heartbeats:t})).length}function mG(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pG(t){Mh(new Nf("platform-logger",e=>new Nz(e),"PRIVATE")),Mh(new Nf("heartbeat",e=>new dG(e),"PRIVATE")),dA(DE,Dk,t),dA(DE,Dk,"esm2020"),dA("fire-js","")}pG("");function xP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gG=xP,vP=new Wx("auth","Firebase",xP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new RT("@firebase/auth");function xG(t,...e){iw.logLevel<=Qr.WARN&&iw.warn(`Auth (${tp}): ${t}`,...e)}function Iy(t,...e){iw.logLevel<=Qr.ERROR&&iw.error(`Auth (${tp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,...e){throw OT(t,...e)}function fA(t,...e){return OT(t,...e)}function yP(t,e,n){const r={...gG(),[e]:n};return new Wx("auth","Firebase",r).create(e,{appName:t.name})}function gf(t){return yP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vP.create(t,...e)}function $n(t,e,...n){if(!t)throw OT(e,...n)}function KA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Iy(e),new Error(e)}function sd(t,e){t||KA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function vG(){return Ok()==="http:"||Ok()==="https:"}function Ok(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vG()||YV()||"connection"in navigator)?navigator.onLine:!0}function wG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.shortDelay=e,this.longDelay=n,sd(n>e,"Short delay should be less than long delay!"),this.isMobile=KV()||XV()}get(){return yG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){sd(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;KA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;KA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;KA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CG=new Xx(3e4,6e4);function Hf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fd(t,e,n,r,s={}){return bP(t,s,async()=>{let a={},i={};r&&(e==="GET"?i=r:a={body:JSON.stringify(r)});const o=Yx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return WV()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Xh(t.emulatorConfig.host)&&(u.credentials="include"),wP.fetch()(await _P(t,t.config.apiHost,n,o),u)})}async function bP(t,e,n){t._canInitEmulator=!1;const r={...bG,...e};try{const s=new SG(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw E1(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw E1(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw E1(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw E1(t,"user-disabled",i);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yP(t,d,u);Lu(t,d)}}catch(s){if(s instanceof _A)throw s;Lu(t,"network-request-failed",{message:String(s)})}}async function w2(t,e,n,r,s={}){const a=await fd(t,e,n,r,s);return"mfaPendingCredential"in a&&Lu(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function _P(t,e,n,r){const s=`${e}${n}?${r}`,a=t,i=a.config.emulator?jT(t.config,s):`${t.config.apiScheme}://${s}`;return _G.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function EG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fA(this.auth,"network-request-failed")),CG.get())})}}function E1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fA(t,e,r);return s.customData._tokenResponse=n,s}function jk(t){return t!==void 0&&t.enterprise!==void 0}class TG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NG(t,e){return fd(t,"GET","/v2/recaptchaConfig",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BG(t,e){return fd(t,"POST","/v1/accounts:delete",e)}async function ow(t,e){return fd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kG(t,e=!1){const n=ia(t),r=await n.getIdToken(e),s=QT(r);$n(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Og(tC(s.auth_time)),issuedAtTime:Og(tC(s.iat)),expirationTime:Og(tC(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function tC(t){return Number(t)*1e3}function QT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Iy("JWT malformed, contained fewer than 3 sections"),null;try{const s=cP(n);return s?JSON.parse(s):(Iy("Failed to decode base64 JWT payload"),null)}catch(s){return Iy("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Qk(t){const e=QT(t);return $n(e,"internal-error"),$n(typeof e.exp<"u","internal-error"),$n(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _A&&IG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(t){var m;const e=t.auth,n=await t.getIdToken(),r=await ux(t,ow(e,{idToken:n}));$n(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(m=s.providerUserInfo)!=null&&m.length?CP(s.providerUserInfo):[],i=LG(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ME(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function DG(t){const e=ia(t);await lw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LG(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function CP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RG(t,e){const n=await bP(t,{},async()=>{const r=Yx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await _P(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&Xh(t.emulatorConfig.host)&&(l.credentials="include"),wP.fetch()(i,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PG(t,e){return fd(t,"POST","/v2/accounts:revokeToken",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$n(e.idToken,"internal-error"),$n(typeof e.idToken<"u","internal-error"),$n(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$n(e.length!==0,"internal-error");const n=Qk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($n(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await RG(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,i=new pm;return r&&($n(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&($n(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&($n(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pm,this.toJSON())}_performRefresh(){return KA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e){$n(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nu{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new FG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ME(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ux(this,this.stsTokenManager.getToken(this.auth,e));return $n(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kG(this,e)}reload(){return DG(this)}_assign(e){this!==e&&($n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){$n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xc(this.auth.app))return Promise.reject(gf(this.auth));const e=await this.getIdToken();return await ux(this,BG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,i=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:x,providerData:C,stsTokenManager:y}=n;$n(m&&y,e,"internal-error");const T=pm.fromJSON(this.name,y);$n(typeof m=="string",e,"internal-error"),Hd(r,e.name),Hd(s,e.name),$n(typeof p=="boolean",e,"internal-error"),$n(typeof x=="boolean",e,"internal-error"),Hd(a,e.name),Hd(i,e.name),Hd(o,e.name),Hd(l,e.name),Hd(u,e.name),Hd(d,e.name);const I=new Nu({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:x,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:T,createdAt:u,lastLoginAt:d});return C&&Array.isArray(C)&&(I.providerData=C.map(F=>({...F}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new pm;s.updateFromServerResponse(n);const a=new Nu({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];$n(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?CP(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new pm;o.updateFromIdToken(r);const l=new Nu({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ME(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new Map;function $A(t){sd(t instanceof Function,"Expected a class definition");let e=Hk.get(t);return e?(sd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EP.type="NONE";const Vk=EP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t,e,n){return`firebase:${t}:${e}:${n}`}class gm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Fy(this.userKey,s.apiKey,a),this.fullPersistenceKey=Fy("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ow(this.auth,{idToken:e}).catch(()=>{});return n?Nu._fromGetAccountInfoResponse(this.auth,n,e):null}return Nu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gm($A(Vk),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||$A(Vk);const i=Fy(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(i);if(d){let m;if(typeof d=="string"){const p=await ow(e,{idToken:d}).catch(()=>{});if(!p)break;m=await Nu._fromGetAccountInfoResponse(e,p,d)}else m=Nu._fromJSON(e,d);u!==a&&(o=m),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new gm(a,e,r):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new gm(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IP(e))return"Blackberry";if(FP(e))return"Webos";if(TP(e))return"Safari";if((e.includes("chrome/")||NP(e))&&!e.includes("edge/"))return"Chrome";if(kP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SP(t=Xo()){return/firefox\//i.test(t)}function TP(t=Xo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NP(t=Xo()){return/crios\//i.test(t)}function BP(t=Xo()){return/iemobile/i.test(t)}function kP(t=Xo()){return/android/i.test(t)}function IP(t=Xo()){return/blackberry/i.test(t)}function FP(t=Xo()){return/webos/i.test(t)}function HT(t=Xo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MG(t=Xo()){var e;return HT(t)&&!!((e=window.navigator)!=null&&e.standalone)}function UG(){return JV()&&document.documentMode===10}function DP(t=Xo()){return HT(t)||kP(t)||FP(t)||IP(t)||/windows phone/i.test(t)||BP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e=[]){let n;switch(t){case"Browser":n=zk(Xo());break;case"Worker":n=`${zk(Xo())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(t,e={}){return fd(t,"GET","/v2/passwordPolicy",Hf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG=6;class HG{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QG,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gk(this),this.idTokenSubscription=new Gk(this),this.beforeStateQueue=new OG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$A(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await gm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ow(this,{idToken:e}),r=await Nu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Xc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lw(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xc(this.app))return Promise.reject(gf(this));const n=e?ia(e):null;return n&&$n(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$n(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xc(this.app)?Promise.reject(gf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xc(this.app)?Promise.reject(gf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($A(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jG(this),n=new HG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$A(e)||this._popupRedirectResolver;$n(n,this,"argument-error"),this.redirectPersistenceManager=await gm.create(this,[$A(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($n(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Xc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xG(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Jh(t){return ia(t)}class Gk{constructor(e){this.auth=e,this.observer=null,this.addObserver=iz(n=>this.observer=n)}get next(){return $n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zG(t){b2=t}function RP(t){return b2.loadJS(t)}function GG(){return b2.recaptchaEnterpriseScript}function qG(){return b2.gapiScript}function KG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $G{constructor(){this.enterprise=new WG}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WG{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YG="recaptcha-enterprise",PP="NO_RECAPTCHA";class XG{constructor(e){this.type=YG,this.auth=Jh(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{NG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new TG(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;jk(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(PP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $G().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{r(this.auth).then(o=>{if(!n&&jk(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GG();l.length!==0&&(l+=o),RP(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function qk(t,e,n,r=!1,s=!1){const a=new XG(t);let i;if(s)i=PP;else try{i=await a.verify(n)}catch{i=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function UE(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qk(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qk(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t,e){const n=y2(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Tf(a,e??{}))return s;Lu(s,"already-initialized")}return n.initialize({options:e})}function ZG(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($A);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eq(t,e,n){const r=Jh(t);$n(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=MP(e),{host:i,port:o}=tq(e),l=o===null?"":`:${o}`,u={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){$n(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$n(Tf(u,r.config.emulator)&&Tf(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Xh(i)?(DT(`${a}//${i}${l}`),LT("Auth",!0)):nq()}function MP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tq(t){const e=MP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Kk(r.substr(a.length+1))}}else{const[a,i]=r.split(":");return{host:a,port:Kk(i)}}}function Kk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return KA("not implemented")}_getIdTokenResponse(e){return KA("not implemented")}_linkToIdToken(e,n){return KA("not implemented")}_getReauthenticationResolver(e){return KA("not implemented")}}async function rq(t,e){return fd(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sq(t,e){return w2(t,"POST","/v1/accounts:signInWithPassword",Hf(t,e))}async function aq(t,e){return fd(t,"POST","/v1/accounts:sendOobCode",Hf(t,e))}async function iq(t,e){return aq(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oq(t,e){return w2(t,"POST","/v1/accounts:signInWithEmailLink",Hf(t,e))}async function lq(t,e){return w2(t,"POST","/v1/accounts:signInWithEmailLink",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends VT{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ax(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ax(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UE(e,n,"signInWithPassword",sq);case"emailLink":return oq(e,{email:this._email,oobCode:this._password});default:Lu(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return UE(e,r,"signUpPassword",rq);case"emailLink":return lq(e,{idToken:n,email:this._email,oobCode:this._password});default:Lu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t,e){return w2(t,"POST","/v1/accounts:signInWithIdp",Hf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="http://localhost";class Uh extends VT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Uh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lu("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const i=new Uh(r,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return xm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xm(e,n)}buildRequest(){const e={requestUri:cq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yx(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aq(t){const e=pg(gg(t)).link,n=e?pg(gg(e)).deep_link_id:null,r=pg(gg(t)).deep_link_id;return(r?pg(gg(r)).link:null)||r||n||e||t}class zT{constructor(e){const n=pg(gg(e)),r=n.apiKey??null,s=n.oobCode??null,a=uq(n.mode??null);$n(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Aq(e);try{return new zT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.providerId=np.PROVIDER_ID}static credential(e,n){return Ax._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zT.parseLink(n);return $n(r,"argument-error"),Ax._fromEmailAndCode(e,r.code,r.tenantId)}}np.PROVIDER_ID="password";np.EMAIL_PASSWORD_SIGN_IN_METHOD="password";np.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends UP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Jx{constructor(){super("facebook.com")}static credential(e){return Uh._fromParams({providerId:ef.PROVIDER_ID,signInMethod:ef.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ef.credentialFromTaggedObject(e)}static credentialFromError(e){return ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ef.credential(e.oauthAccessToken)}catch{return null}}}ef.FACEBOOK_SIGN_IN_METHOD="facebook.com";ef.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Jx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Uh._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tf.credential(n,r)}catch{return null}}}tf.GOOGLE_SIGN_IN_METHOD="google.com";tf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Jx{constructor(){super("github.com")}static credential(e){return Uh._fromParams({providerId:nf.PROVIDER_ID,signInMethod:nf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nf.credentialFromTaggedObject(e)}static credentialFromError(e){return nf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nf.credential(e.oauthAccessToken)}catch{return null}}}nf.GITHUB_SIGN_IN_METHOD="github.com";nf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends Jx{constructor(){super("twitter.com")}static credential(e,n){return Uh._fromParams({providerId:rf.PROVIDER_ID,signInMethod:rf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rf.credentialFromTaggedObject(e)}static credentialFromError(e){return rf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rf.credential(n,r)}catch{return null}}}rf.TWITTER_SIGN_IN_METHOD="twitter.com";rf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Nu._fromIdTokenResponse(e,r,s),i=$k(r);return new Mm({user:a,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$k(r);return new Mm({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $k(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends _A{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,cw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new cw(e,n,r,s)}}function OP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cw._fromErrorAndOperation(t,a,e,r):a})}async function dq(t,e,n=!1){const r=await ux(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mm._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fq(t,e,n=!1){const{auth:r}=t;if(Xc(r.app))return Promise.reject(gf(r));const s="reauthenticate";try{const a=await ux(t,OP(r,s,e,t),n);$n(a.idToken,r,"internal-error");const i=QT(a.idToken);$n(i,r,"internal-error");const{sub:o}=i;return $n(t.uid===o,r,"user-mismatch"),Mm._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Lu(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t,e,n=!1){if(Xc(t.app))return Promise.reject(gf(t));const r="signIn",s=await OP(t,r,e),a=await Mm._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function hq(t,e){return jP(Jh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mq(t){const e=Jh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pq(t,e,n){const r=Jh(t);await UE(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",iq)}function gq(t,e,n){return Xc(t.app)?Promise.reject(gf(t)):hq(ia(t),np.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mq(t),r})}function xq(t,e,n,r){return ia(t).onIdTokenChanged(e,n,r)}function vq(t,e,n){return ia(t).beforeAuthStateChanged(e,n)}function QP(t,e,n,r){return ia(t).onAuthStateChanged(e,n,r)}function yq(t){return ia(t).signOut()}const uw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uw,"1"),this.storage.removeItem(uw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=1e3,bq=10;class VP extends HP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},a=this.storage.getItem(r);UG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bq):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VP.type="LOCAL";const _q=VP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends HP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zP.type="SESSION";const GP=zP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async u=>u(n.origin,a)),l=await Cq(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=GT("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(p.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return window}function Sq(t){hA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(){return typeof hA().WorkerGlobalScope<"u"&&typeof hA().importScripts=="function"}async function Tq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Bq(){return qP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebaseLocalStorageDb",kq=1,Aw="firebaseLocalStorage",$P="fbase_key";class Zx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function C2(t,e){return t.transaction([Aw],e?"readwrite":"readonly").objectStore(Aw)}function Iq(){const t=indexedDB.deleteDatabase(KP);return new Zx(t).toPromise()}function OE(){const t=indexedDB.open(KP,kq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Aw,{keyPath:$P})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Aw)?e(r):(r.close(),await Iq(),e(await OE()))})})}async function Wk(t,e,n){const r=C2(t,!0).put({[$P]:e,value:n});return new Zx(r).toPromise()}async function Fq(t,e){const n=C2(t,!1).get(e),r=await new Zx(n).toPromise();return r===void 0?null:r.value}function Yk(t,e){const n=C2(t,!0).delete(e);return new Zx(n).toPromise()}const Dq=800,Lq=3;class WP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await OE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Lq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_2._getInstance(Bq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Tq(),!this.activeServiceWorker)return;this.sender=new Eq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await OE();return await Wk(e,uw,"1"),await Yk(e,uw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Fq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=C2(s,!1).getAll();return new Zx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WP.type="LOCAL";const Rq=WP;new Xx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t,e){return e?$A(e):($n(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends VT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mq(t){return jP(t.auth,new qT(t),t.bypassAuthState)}function Uq(t){const{auth:e,user:n}=t;return $n(n,e,"internal-error"),fq(n,new qT(t),t.bypassAuthState)}async function Oq(t){const{auth:e,user:n}=t;return $n(n,e,"internal-error"),dq(n,new qT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mq;case"linkViaPopup":case"linkViaRedirect":return Oq;case"reauthViaPopup":case"reauthViaRedirect":return Uq;default:Lu(this.auth,"internal-error")}}resolve(e){sd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=new Xx(2e3,1e4);class um extends YP{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,um.currentPopupAction&&um.currentPopupAction.cancel(),um.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $n(e,this.auth,"internal-error"),e}async onExecution(){sd(this.filter.length===1,"Popup operations only handle one event");const e=GT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,um.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jq.get())};e()}}um.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="pendingRedirect",Dy=new Map;class Hq extends YP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dy.get(this.auth._key());if(!e){try{const r=await Vq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dy.set(this.auth._key(),e)}return this.bypassAuthState||Dy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vq(t,e){const n=qq(e),r=Gq(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function zq(t,e){Dy.set(t._key(),e)}function Gq(t){return $A(t._redirectPersistence)}function qq(t){return Fy(Qq,t.config.apiKey,t.name)}async function Kq(t,e,n=!1){if(Xc(t.app))return Promise.reject(gf(t));const r=Jh(t),s=Pq(r,e),i=await new Hq(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q=600*1e3;class Wq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XP(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(fA(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$q&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xk(e))}saveEventToCache(e){this.cachedEventUids.add(Xk(e)),this.lastProcessedEventTime=Date.now()}}function Xk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Yq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq(t,e={}){return fd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zq=/^https?/;async function eK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xq(t);for(const n of e)try{if(tK(n))return}catch{}Lu(t,"unauthorized-domain")}function tK(t){const e=PE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!Zq.test(n))return!1;if(Jq.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=new Xx(3e4,6e4);function Jk(){const t=hA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rK(t){return new Promise((e,n)=>{var s,a,i;function r(){Jk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jk(),n(fA(t,"network-request-failed"))},timeout:nK.get()})}if((a=(s=hA().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=hA().gapi)!=null&&i.load)r();else{const o=KG("iframefcb");return hA()[o]=()=>{gapi.load?r():n(fA(t,"network-request-failed"))},RP(`${qG()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Ly=null,e})}let Ly=null;function sK(t){return Ly=Ly||rK(t),Ly}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=new Xx(5e3,15e3),iK="__/auth/iframe",oK="emulator/auth/iframe",lK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uK(t){const e=t.config;$n(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jT(e,oK):`https://${t.config.authDomain}/${iK}`,r={apiKey:e.apiKey,appName:t.name,v:tp},s=cK.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Yx(r).slice(1)}`}async function AK(t){const e=await sK(t),n=hA().gapi;return $n(n,t,"internal-error"),e.open({where:document.body,url:uK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lK,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const i=fA(t,"network-request-failed"),o=hA().setTimeout(()=>{a(i)},aK.get());function l(){hA().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fK=500,hK=600,mK="_blank",pK="http://localhost";class Zk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gK(t,e,n,r=fK,s=hK){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...dK,width:r.toString(),height:s.toString(),top:a,left:i},u=Xo().toLowerCase();n&&(o=NP(u)?mK:n),SP(u)&&(e=e||pK,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[x,C])=>`${p}${x}=${C},`,"");if(MG(u)&&o!=="_self")return xK(e||"",o),new Zk(null);const m=window.open(e||"",o,d);$n(m,t,"popup-blocked");try{m.focus()}catch{}return new Zk(m)}function xK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK="__/auth/handler",yK="emulator/auth/handler",wK=encodeURIComponent("fac");async function eI(t,e,n,r,s,a){$n(t.config.authDomain,t,"auth-domain-config-required"),$n(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tp,eventId:s};if(e instanceof UP){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",az(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))i[d]=m}if(e instanceof Jx){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${wK}=${encodeURIComponent(l)}`:"";return`${bK(t)}?${Yx(o).slice(1)}${u}`}function bK({config:t}){return t.emulator?jT(t,yK):`https://${t.authDomain}/${vK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="webStorageSupport";class _K{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GP,this._completeRedirectFn=Kq,this._overrideRedirectResult=zq}async _openPopup(e,n,r,s){var i;sd((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await eI(e,n,r,PE(),s);return gK(e,a,GT())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await eI(e,n,r,PE(),s);return Sq(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(sd(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await AK(e),r=new Wq(e);return n.register("authEvent",s=>($n(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nC,{type:nC},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[nC];a!==void 0&&n(!!a),Lu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return DP()||TP()||HT()}}const CK=_K;var tI="@firebase/auth",nI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TK(t){Mh(new Nf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;$n(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LP(t)},u=new VG(r,s,a,l);return ZG(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mh(new Nf("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(r=>new EK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dA(tI,nI,SK(t)),dA(tI,nI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=300,BK=fP("authIdTokenMaxAge")||NK;let rI=null;const kK=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BK)return;const s=n==null?void 0:n.token;rI!==s&&(rI=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JP(t=UT()){const e=y2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JG(t,{popupRedirectResolver:CK,persistence:[Rq,_q,GP]}),r=fP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const i=kK(a.toString());vq(n,i,()=>i(n.currentUser)),xq(n,o=>i(o))}}const s=uP("auth");return s&&eq(n,`http://${s}`),n}function IK(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}zG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=fA("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",IK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TK("Browser");var FK="firebase",DK="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dA(FK,DK,"app");var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xf,ZP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,S){function k(){}k.prototype=S.prototype,E.D=S.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(z,P,R){for(var G=Array(arguments.length-2),q=2;q<arguments.length;q++)G[q-2]=arguments[q];return S.prototype[P].apply(z,G)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,S,k){k||(k=0);var z=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)z[P]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(P=0;16>P;++P)z[P]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=E.g[0],k=E.g[1],P=E.g[2];var R=E.g[3],G=S+(R^k&(P^R))+z[0]+3614090360&4294967295;S=k+(G<<7&4294967295|G>>>25),G=R+(P^S&(k^P))+z[1]+3905402710&4294967295,R=S+(G<<12&4294967295|G>>>20),G=P+(k^R&(S^k))+z[2]+606105819&4294967295,P=R+(G<<17&4294967295|G>>>15),G=k+(S^P&(R^S))+z[3]+3250441966&4294967295,k=P+(G<<22&4294967295|G>>>10),G=S+(R^k&(P^R))+z[4]+4118548399&4294967295,S=k+(G<<7&4294967295|G>>>25),G=R+(P^S&(k^P))+z[5]+1200080426&4294967295,R=S+(G<<12&4294967295|G>>>20),G=P+(k^R&(S^k))+z[6]+2821735955&4294967295,P=R+(G<<17&4294967295|G>>>15),G=k+(S^P&(R^S))+z[7]+4249261313&4294967295,k=P+(G<<22&4294967295|G>>>10),G=S+(R^k&(P^R))+z[8]+1770035416&4294967295,S=k+(G<<7&4294967295|G>>>25),G=R+(P^S&(k^P))+z[9]+2336552879&4294967295,R=S+(G<<12&4294967295|G>>>20),G=P+(k^R&(S^k))+z[10]+4294925233&4294967295,P=R+(G<<17&4294967295|G>>>15),G=k+(S^P&(R^S))+z[11]+2304563134&4294967295,k=P+(G<<22&4294967295|G>>>10),G=S+(R^k&(P^R))+z[12]+1804603682&4294967295,S=k+(G<<7&4294967295|G>>>25),G=R+(P^S&(k^P))+z[13]+4254626195&4294967295,R=S+(G<<12&4294967295|G>>>20),G=P+(k^R&(S^k))+z[14]+2792965006&4294967295,P=R+(G<<17&4294967295|G>>>15),G=k+(S^P&(R^S))+z[15]+1236535329&4294967295,k=P+(G<<22&4294967295|G>>>10),G=S+(P^R&(k^P))+z[1]+4129170786&4294967295,S=k+(G<<5&4294967295|G>>>27),G=R+(k^P&(S^k))+z[6]+3225465664&4294967295,R=S+(G<<9&4294967295|G>>>23),G=P+(S^k&(R^S))+z[11]+643717713&4294967295,P=R+(G<<14&4294967295|G>>>18),G=k+(R^S&(P^R))+z[0]+3921069994&4294967295,k=P+(G<<20&4294967295|G>>>12),G=S+(P^R&(k^P))+z[5]+3593408605&4294967295,S=k+(G<<5&4294967295|G>>>27),G=R+(k^P&(S^k))+z[10]+38016083&4294967295,R=S+(G<<9&4294967295|G>>>23),G=P+(S^k&(R^S))+z[15]+3634488961&4294967295,P=R+(G<<14&4294967295|G>>>18),G=k+(R^S&(P^R))+z[4]+3889429448&4294967295,k=P+(G<<20&4294967295|G>>>12),G=S+(P^R&(k^P))+z[9]+568446438&4294967295,S=k+(G<<5&4294967295|G>>>27),G=R+(k^P&(S^k))+z[14]+3275163606&4294967295,R=S+(G<<9&4294967295|G>>>23),G=P+(S^k&(R^S))+z[3]+4107603335&4294967295,P=R+(G<<14&4294967295|G>>>18),G=k+(R^S&(P^R))+z[8]+1163531501&4294967295,k=P+(G<<20&4294967295|G>>>12),G=S+(P^R&(k^P))+z[13]+2850285829&4294967295,S=k+(G<<5&4294967295|G>>>27),G=R+(k^P&(S^k))+z[2]+4243563512&4294967295,R=S+(G<<9&4294967295|G>>>23),G=P+(S^k&(R^S))+z[7]+1735328473&4294967295,P=R+(G<<14&4294967295|G>>>18),G=k+(R^S&(P^R))+z[12]+2368359562&4294967295,k=P+(G<<20&4294967295|G>>>12),G=S+(k^P^R)+z[5]+4294588738&4294967295,S=k+(G<<4&4294967295|G>>>28),G=R+(S^k^P)+z[8]+2272392833&4294967295,R=S+(G<<11&4294967295|G>>>21),G=P+(R^S^k)+z[11]+1839030562&4294967295,P=R+(G<<16&4294967295|G>>>16),G=k+(P^R^S)+z[14]+4259657740&4294967295,k=P+(G<<23&4294967295|G>>>9),G=S+(k^P^R)+z[1]+2763975236&4294967295,S=k+(G<<4&4294967295|G>>>28),G=R+(S^k^P)+z[4]+1272893353&4294967295,R=S+(G<<11&4294967295|G>>>21),G=P+(R^S^k)+z[7]+4139469664&4294967295,P=R+(G<<16&4294967295|G>>>16),G=k+(P^R^S)+z[10]+3200236656&4294967295,k=P+(G<<23&4294967295|G>>>9),G=S+(k^P^R)+z[13]+681279174&4294967295,S=k+(G<<4&4294967295|G>>>28),G=R+(S^k^P)+z[0]+3936430074&4294967295,R=S+(G<<11&4294967295|G>>>21),G=P+(R^S^k)+z[3]+3572445317&4294967295,P=R+(G<<16&4294967295|G>>>16),G=k+(P^R^S)+z[6]+76029189&4294967295,k=P+(G<<23&4294967295|G>>>9),G=S+(k^P^R)+z[9]+3654602809&4294967295,S=k+(G<<4&4294967295|G>>>28),G=R+(S^k^P)+z[12]+3873151461&4294967295,R=S+(G<<11&4294967295|G>>>21),G=P+(R^S^k)+z[15]+530742520&4294967295,P=R+(G<<16&4294967295|G>>>16),G=k+(P^R^S)+z[2]+3299628645&4294967295,k=P+(G<<23&4294967295|G>>>9),G=S+(P^(k|~R))+z[0]+4096336452&4294967295,S=k+(G<<6&4294967295|G>>>26),G=R+(k^(S|~P))+z[7]+1126891415&4294967295,R=S+(G<<10&4294967295|G>>>22),G=P+(S^(R|~k))+z[14]+2878612391&4294967295,P=R+(G<<15&4294967295|G>>>17),G=k+(R^(P|~S))+z[5]+4237533241&4294967295,k=P+(G<<21&4294967295|G>>>11),G=S+(P^(k|~R))+z[12]+1700485571&4294967295,S=k+(G<<6&4294967295|G>>>26),G=R+(k^(S|~P))+z[3]+2399980690&4294967295,R=S+(G<<10&4294967295|G>>>22),G=P+(S^(R|~k))+z[10]+4293915773&4294967295,P=R+(G<<15&4294967295|G>>>17),G=k+(R^(P|~S))+z[1]+2240044497&4294967295,k=P+(G<<21&4294967295|G>>>11),G=S+(P^(k|~R))+z[8]+1873313359&4294967295,S=k+(G<<6&4294967295|G>>>26),G=R+(k^(S|~P))+z[15]+4264355552&4294967295,R=S+(G<<10&4294967295|G>>>22),G=P+(S^(R|~k))+z[6]+2734768916&4294967295,P=R+(G<<15&4294967295|G>>>17),G=k+(R^(P|~S))+z[13]+1309151649&4294967295,k=P+(G<<21&4294967295|G>>>11),G=S+(P^(k|~R))+z[4]+4149444226&4294967295,S=k+(G<<6&4294967295|G>>>26),G=R+(k^(S|~P))+z[11]+3174756917&4294967295,R=S+(G<<10&4294967295|G>>>22),G=P+(S^(R|~k))+z[2]+718787259&4294967295,P=R+(G<<15&4294967295|G>>>17),G=k+(R^(P|~S))+z[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(P+(G<<21&4294967295|G>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var k=S-this.blockSize,z=this.B,P=this.h,R=0;R<S;){if(P==0)for(;R<=k;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<S;)if(z[P++]=E.charCodeAt(R++),P==this.blockSize){s(this,z),P=0;break}}else for(;R<S;)if(z[P++]=E[R++],P==this.blockSize){s(this,z),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var k=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=k&255,k/=256;for(this.u(E),E=Array(16),S=k=0;4>S;++S)for(var z=0;32>z;z+=8)E[k++]=this.g[S]>>>z&255;return E};function a(E,S){var k=o;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=S(E)}function i(E,S){this.h=S;for(var k=[],z=!0,P=E.length-1;0<=P;P--){var R=E[P]|0;z&&R==S||(k[P]=R,z=!1)}this.g=k}var o={};function l(E){return-128<=E&&128>E?a(E,function(S){return new i([S|0],0>S?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return T(u(-E));for(var S=[],k=1,z=0;E>=k;z++)S[z]=E/k|0,k*=4294967296;return new i(S,0)}function d(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return T(d(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(S,8)),z=m,P=0;P<E.length;P+=8){var R=Math.min(8,E.length-P),G=parseInt(E.substring(P,P+R),S);8>R?(R=u(Math.pow(S,R)),z=z.j(R).add(u(G))):(z=z.j(k),z=z.add(u(G)))}return z}var m=l(0),p=l(1),x=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-T(this).m();for(var E=0,S=1,k=0;k<this.g.length;k++){var z=this.i(k);E+=(0<=z?z:4294967296+z)*S,S*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(y(this))return"-"+T(this).toString(E);for(var S=u(Math.pow(E,6)),k=this,z="";;){var P=O(k,S).g;k=I(k,P.j(S));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=P,C(k))return R+z;for(;6>R.length;)R="0"+R;z=R+z}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function y(E){return E.h==-1}t.l=function(E){return E=I(this,E),y(E)?-1:C(E)?0:1};function T(E){for(var S=E.g.length,k=[],z=0;z<S;z++)k[z]=~E.g[z];return new i(k,~E.h).add(p)}t.abs=function(){return y(this)?T(this):this},t.add=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],z=0,P=0;P<=S;P++){var R=z+(this.i(P)&65535)+(E.i(P)&65535),G=(R>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);z=G>>>16,R&=65535,G&=65535,k[P]=G<<16|R}return new i(k,k[k.length-1]&-2147483648?-1:0)};function I(E,S){return E.add(T(S))}t.j=function(E){if(C(this)||C(E))return m;if(y(this))return y(E)?T(this).j(T(E)):T(T(this).j(E));if(y(E))return T(this.j(T(E)));if(0>this.l(x)&&0>E.l(x))return u(this.m()*E.m());for(var S=this.g.length+E.g.length,k=[],z=0;z<2*S;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(var P=0;P<E.g.length;P++){var R=this.i(z)>>>16,G=this.i(z)&65535,q=E.i(P)>>>16,le=E.i(P)&65535;k[2*z+2*P]+=G*le,F(k,2*z+2*P),k[2*z+2*P+1]+=R*le,F(k,2*z+2*P+1),k[2*z+2*P+1]+=G*q,F(k,2*z+2*P+1),k[2*z+2*P+2]+=R*q,F(k,2*z+2*P+2)}for(z=0;z<S;z++)k[z]=k[2*z+1]<<16|k[2*z];for(z=S;z<2*S;z++)k[z]=0;return new i(k,0)};function F(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function M(E,S){this.g=E,this.h=S}function O(E,S){if(C(S))throw Error("division by zero");if(C(E))return new M(m,m);if(y(E))return S=O(T(E),S),new M(T(S.g),T(S.h));if(y(S))return S=O(E,T(S)),new M(T(S.g),S.h);if(30<E.g.length){if(y(E)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var k=p,z=S;0>=z.l(E);)k=Q(k),z=Q(z);var P=j(k,1),R=j(z,1);for(z=j(z,2),k=j(k,2);!C(z);){var G=R.add(z);0>=G.l(E)&&(P=P.add(k),R=G),z=j(z,1),k=j(k,1)}return S=I(E,P.j(S)),new M(P,S)}for(P=m;0<=E.l(S);){for(k=Math.max(1,Math.floor(E.m()/S.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),R=u(k),G=R.j(S);y(G)||0<G.l(E);)k-=z,R=u(k),G=R.j(S);C(R)&&(R=p),P=P.add(R),E=I(E,G)}return new M(P,E)}t.A=function(E){return O(this,E).h},t.and=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],z=0;z<S;z++)k[z]=this.i(z)&E.i(z);return new i(k,this.h&E.h)},t.or=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],z=0;z<S;z++)k[z]=this.i(z)|E.i(z);return new i(k,this.h|E.h)},t.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),k=[],z=0;z<S;z++)k[z]=this.i(z)^E.i(z);return new i(k,this.h^E.h)};function Q(E){for(var S=E.g.length+1,k=[],z=0;z<S;z++)k[z]=E.i(z)<<1|E.i(z-1)>>>31;return new i(k,E.h)}function j(E,S){var k=S>>5;S%=32;for(var z=E.g.length-k,P=[],R=0;R<z;R++)P[R]=0<S?E.i(R+k)>>>S|E.i(R+k+1)<<32-S:E.i(R+k);return new i(P,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZP=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,xf=i}).apply(typeof sI<"u"?sI:typeof self<"u"?self:typeof window<"u"?window:{});var S1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eM,xg,tM,Ry,jE,nM,rM,sM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(B,ae,de){return B==Array.prototype||B==Object.prototype||(B[ae]=de.value),B};function n(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof S1=="object"&&S1];for(var ae=0;ae<B.length;++ae){var de=B[ae];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var r=n(this);function s(B,ae){if(ae)e:{var de=r;B=B.split(".");for(var Te=0;Te<B.length-1;Te++){var We=B[Te];if(!(We in de))break e;de=de[We]}B=B[B.length-1],Te=de[B],ae=ae(Te),ae!=Te&&ae!=null&&e(de,B,{configurable:!0,writable:!0,value:ae})}}function a(B,ae){B instanceof String&&(B+="");var de=0,Te=!1,We={next:function(){if(!Te&&de<B.length){var ot=de++;return{value:ae(ot,B[ot]),done:!1}}return Te=!0,{done:!0,value:void 0}}};return We[Symbol.iterator]=function(){return We},We}s("Array.prototype.values",function(B){return B||function(){return a(this,function(ae,de){return de})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(B){var ae=typeof B;return ae=ae!="object"?ae:B?Array.isArray(B)?"array":ae:"null",ae=="array"||ae=="object"&&typeof B.length=="number"}function u(B){var ae=typeof B;return ae=="object"&&B!=null||ae=="function"}function d(B,ae,de){return B.call.apply(B.bind,arguments)}function m(B,ae,de){if(!B)throw Error();if(2<arguments.length){var Te=Array.prototype.slice.call(arguments,2);return function(){var We=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(We,Te),B.apply(ae,We)}}return function(){return B.apply(ae,arguments)}}function p(B,ae,de){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,p.apply(null,arguments)}function x(B,ae){var de=Array.prototype.slice.call(arguments,1);return function(){var Te=de.slice();return Te.push.apply(Te,arguments),B.apply(this,Te)}}function C(B,ae){function de(){}de.prototype=ae.prototype,B.aa=ae.prototype,B.prototype=new de,B.prototype.constructor=B,B.Qb=function(Te,We,ot){for(var Pt=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)Pt[Ln-2]=arguments[Ln];return ae.prototype[We].apply(Te,Pt)}}function y(B){const ae=B.length;if(0<ae){const de=Array(ae);for(let Te=0;Te<ae;Te++)de[Te]=B[Te];return de}return[]}function T(B,ae){for(let de=1;de<arguments.length;de++){const Te=arguments[de];if(l(Te)){const We=B.length||0,ot=Te.length||0;B.length=We+ot;for(let Pt=0;Pt<ot;Pt++)B[We+Pt]=Te[Pt]}else B.push(Te)}}class I{constructor(ae,de){this.i=ae,this.j=de,this.h=0,this.g=null}get(){let ae;return 0<this.h?(this.h--,ae=this.g,this.g=ae.next,ae.next=null):ae=this.i(),ae}}function F(B){return/^[\s\xa0]*$/.test(B)}function M(){var B=o.navigator;return B&&(B=B.userAgent)?B:""}function O(B){return O[" "](B),B}O[" "]=function(){};var Q=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function j(B,ae,de){for(const Te in B)ae.call(de,B[Te],Te,B)}function E(B,ae){for(const de in B)ae.call(void 0,B[de],de,B)}function S(B){const ae={};for(const de in B)ae[de]=B[de];return ae}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(B,ae){let de,Te;for(let We=1;We<arguments.length;We++){Te=arguments[We];for(de in Te)B[de]=Te[de];for(let ot=0;ot<k.length;ot++)de=k[ot],Object.prototype.hasOwnProperty.call(Te,de)&&(B[de]=Te[de])}}function P(B){var ae=1;B=B.split(":");const de=[];for(;0<ae&&B.length;)de.push(B.shift()),ae--;return B.length&&de.push(B.join(":")),de}function R(B){o.setTimeout(()=>{throw B},0)}function G(){var B=ne;let ae=null;return B.g&&(ae=B.g,B.g=B.g.next,B.g||(B.h=null),ae.next=null),ae}class q{constructor(){this.h=this.g=null}add(ae,de){const Te=le.get();Te.set(ae,de),this.h?this.h.next=Te:this.g=Te,this.h=Te}}var le=new I(()=>new ee,B=>B.reset());class ee{constructor(){this.next=this.g=this.h=null}set(ae,de){this.h=ae,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,K=!1,ne=new q,X=()=>{const B=o.Promise.resolve(void 0);oe=()=>{B.then(ce)}};var ce=()=>{for(var B;B=G();){try{B.h.call(B.g)}catch(de){R(de)}var ae=le;ae.j(B),100>ae.h&&(ae.h++,B.next=ae.g,ae.g=B)}K=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(B,ae){this.type=B,this.g=this.target=ae,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var B=!1,ae=Object.defineProperty({},"passive",{get:function(){B=!0}});try{const de=()=>{};o.addEventListener("test",de,ae),o.removeEventListener("test",de,ae)}catch{}return B}();function ie(B,ae){if(J.call(this,B?B.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,B){var de=this.type=B.type,Te=B.changedTouches&&B.changedTouches.length?B.changedTouches[0]:null;if(this.target=B.target||B.srcElement,this.g=ae,ae=B.relatedTarget){if(Q){e:{try{O(ae.nodeName);var We=!0;break e}catch{}We=!1}We||(ae=null)}}else de=="mouseover"?ae=B.fromElement:de=="mouseout"&&(ae=B.toElement);this.relatedTarget=ae,Te?(this.clientX=Te.clientX!==void 0?Te.clientX:Te.pageX,this.clientY=Te.clientY!==void 0?Te.clientY:Te.pageY,this.screenX=Te.screenX||0,this.screenY=Te.screenY||0):(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0),this.button=B.button,this.key=B.key||"",this.ctrlKey=B.ctrlKey,this.altKey=B.altKey,this.shiftKey=B.shiftKey,this.metaKey=B.metaKey,this.pointerId=B.pointerId||0,this.pointerType=typeof B.pointerType=="string"?B.pointerType:fe[B.pointerType]||"",this.state=B.state,this.i=B,B.defaultPrevented&&ie.aa.h.call(this)}}C(ie,J);var fe={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var B=this.i;B.preventDefault?B.preventDefault():B.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),ve=0;function ye(B,ae,de,Te,We){this.listener=B,this.proxy=null,this.src=ae,this.type=de,this.capture=!!Te,this.ha=We,this.key=++ve,this.da=this.fa=!1}function we(B){B.da=!0,B.listener=null,B.proxy=null,B.src=null,B.ha=null}function me(B){this.src=B,this.g={},this.h=0}me.prototype.add=function(B,ae,de,Te,We){var ot=B.toString();B=this.g[ot],B||(B=this.g[ot]=[],this.h++);var Pt=Ve(B,ae,Te,We);return-1<Pt?(ae=B[Pt],de||(ae.fa=!1)):(ae=new ye(ae,this.src,ot,!!Te,We),ae.fa=de,B.push(ae)),ae};function he(B,ae){var de=ae.type;if(de in B.g){var Te=B.g[de],We=Array.prototype.indexOf.call(Te,ae,void 0),ot;(ot=0<=We)&&Array.prototype.splice.call(Te,We,1),ot&&(we(ae),B.g[de].length==0&&(delete B.g[de],B.h--))}}function Ve(B,ae,de,Te){for(var We=0;We<B.length;++We){var ot=B[We];if(!ot.da&&ot.listener==ae&&ot.capture==!!de&&ot.ha==Te)return We}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),Oe={};function Ie(B,ae,de,Te,We){if(Array.isArray(ae)){for(var ot=0;ot<ae.length;ot++)Ie(B,ae[ot],de,Te,We);return null}return de=cn(de),B&&B[Se]?B.K(ae,de,u(Te)?!!Te.capture:!1,We):je(B,ae,de,!1,Te,We)}function je(B,ae,de,Te,We,ot){if(!ae)throw Error("Invalid event type");var Pt=u(We)?!!We.capture:!!We,Ln=Vt(B);if(Ln||(B[nt]=Ln=new me(B)),de=Ln.add(ae,de,Te,Pt,ot),de.proxy)return de;if(Te=Ke(),de.proxy=Te,Te.src=B,Te.listener=de,B.addEventListener)re||(We=Pt),We===void 0&&(We=!1),B.addEventListener(ae.toString(),Te,We);else if(B.attachEvent)B.attachEvent(Tt(ae.toString()),Te);else if(B.addListener&&B.removeListener)B.addListener(Te);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Ke(){function B(de){return ae.call(B.src,B.listener,de)}const ae=xt;return B}function st(B,ae,de,Te,We){if(Array.isArray(ae))for(var ot=0;ot<ae.length;ot++)st(B,ae[ot],de,Te,We);else Te=u(Te)?!!Te.capture:!!Te,de=cn(de),B&&B[Se]?(B=B.i,ae=String(ae).toString(),ae in B.g&&(ot=B.g[ae],de=Ve(ot,de,Te,We),-1<de&&(we(ot[de]),Array.prototype.splice.call(ot,de,1),ot.length==0&&(delete B.g[ae],B.h--)))):B&&(B=Vt(B))&&(ae=B.g[ae.toString()],B=-1,ae&&(B=Ve(ae,de,Te,We)),(de=-1<B?ae[B]:null)&&vt(de))}function vt(B){if(typeof B!="number"&&B&&!B.da){var ae=B.src;if(ae&&ae[Se])he(ae.i,B);else{var de=B.type,Te=B.proxy;ae.removeEventListener?ae.removeEventListener(de,Te,B.capture):ae.detachEvent?ae.detachEvent(Tt(de),Te):ae.addListener&&ae.removeListener&&ae.removeListener(Te),(de=Vt(ae))?(he(de,B),de.h==0&&(de.src=null,ae[nt]=null)):we(B)}}}function Tt(B){return B in Oe?Oe[B]:Oe[B]="on"+B}function xt(B,ae){if(B.da)B=!0;else{ae=new ie(ae,this);var de=B.listener,Te=B.ha||B.src;B.fa&&vt(B),B=de.call(Te,ae)}return B}function Vt(B){return B=B[nt],B instanceof me?B:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(B){return typeof B=="function"?B:(B[Kt]||(B[Kt]=function(ae){return B.handleEvent(ae)}),B[Kt])}function Gt(){V.call(this),this.i=new me(this),this.M=this,this.F=null}C(Gt,V),Gt.prototype[Se]=!0,Gt.prototype.removeEventListener=function(B,ae,de,Te){st(this,B,ae,de,Te)};function Wt(B,ae){var de,Te=B.F;if(Te)for(de=[];Te;Te=Te.F)de.push(Te);if(B=B.M,Te=ae.type||ae,typeof ae=="string")ae=new J(ae,B);else if(ae instanceof J)ae.target=ae.target||B;else{var We=ae;ae=new J(Te,B),z(ae,We)}if(We=!0,de)for(var ot=de.length-1;0<=ot;ot--){var Pt=ae.g=de[ot];We=sn(Pt,Te,!0,ae)&&We}if(Pt=ae.g=B,We=sn(Pt,Te,!0,ae)&&We,We=sn(Pt,Te,!1,ae)&&We,de)for(ot=0;ot<de.length;ot++)Pt=ae.g=de[ot],We=sn(Pt,Te,!1,ae)&&We}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var B=this.i,ae;for(ae in B.g){for(var de=B.g[ae],Te=0;Te<de.length;Te++)we(de[Te]);delete B.g[ae],B.h--}}this.F=null},Gt.prototype.K=function(B,ae,de,Te){return this.i.add(String(B),ae,!1,de,Te)},Gt.prototype.L=function(B,ae,de,Te){return this.i.add(String(B),ae,!0,de,Te)};function sn(B,ae,de,Te){if(ae=B.i.g[String(ae)],!ae)return!0;ae=ae.concat();for(var We=!0,ot=0;ot<ae.length;++ot){var Pt=ae[ot];if(Pt&&!Pt.da&&Pt.capture==de){var Ln=Pt.listener,gr=Pt.ha||Pt.src;Pt.fa&&he(B.i,Pt),We=Ln.call(gr,Te)!==!1&&We}}return We&&!Te.defaultPrevented}function Qt(B,ae,de){if(typeof B=="function")de&&(B=p(B,de));else if(B&&typeof B.handleEvent=="function")B=p(B.handleEvent,B);else throw Error("Invalid listener argument");return 2147483647<Number(ae)?-1:o.setTimeout(B,ae||0)}function Ht(B){B.g=Qt(()=>{B.g=null,B.i&&(B.i=!1,Ht(B))},B.l);const ae=B.h;B.h=null,B.m.apply(null,ae)}class _t extends V{constructor(ae,de){super(),this.m=ae,this.l=de,this.h=null,this.i=!1,this.g=null}j(ae){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(B){V.call(this),this.h=B,this.g={}}C(On,V);var An=[];function Tr(B){j(B.g,function(ae,de){this.g.hasOwnProperty(de)&&vt(ae)},B),B.g={}}On.prototype.N=function(){On.aa.N.call(this),Tr(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=o.JSON.stringify,nr=o.JSON.parse,Lr=class{stringify(B){return o.JSON.stringify(B,void 0)}parse(B){return o.JSON.parse(B,void 0)}};function Zn(){}Zn.prototype.h=null;function ya(B){return B.h||(B.h=B.i())}function wr(){}var us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Is(){J.call(this,"d")}C(Is,J);function lr(){J.call(this,"c")}C(lr,J);var vn={},Ar=null;function wa(){return Ar=Ar||new Gt}vn.La="serverreachability";function As(B){J.call(this,vn.La,B)}C(As,J);function zs(B){const ae=wa();Wt(ae,new As(ae))}vn.STAT_EVENT="statevent";function oa(B,ae){J.call(this,vn.STAT_EVENT,B),this.stat=ae}C(oa,J);function rn(B){const ae=wa();Wt(ae,new oa(ae,B))}vn.Ma="timingevent";function Rr(B,ae){J.call(this,vn.Ma,B),this.size=ae}C(Rr,J);function Nr(B,ae){if(typeof B!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){B()},ae)}function Xr(){this.g=!0}Xr.prototype.xa=function(){this.g=!1};function br(B,ae,de,Te,We,ot){B.info(function(){if(B.g)if(ot)for(var Pt="",Ln=ot.split("&"),gr=0;gr<Ln.length;gr++){var Yn=Ln[gr].split("=");if(1<Yn.length){var ar=Yn[0];Yn=Yn[1];var Pr=ar.split("_");Pt=2<=Pr.length&&Pr[1]=="type"?Pt+(ar+"="+Yn+"&"):Pt+(ar+"=redacted&")}}else Pt=null;else Pt=ot;return"XMLHTTP REQ ("+Te+") [attempt "+We+"]: "+ae+`
`+de+`
`+Pt})}function Yt(B,ae,de,Te,We,ot,Pt){B.info(function(){return"XMLHTTP RESP ("+Te+") [ attempt "+We+"]: "+ae+`
`+de+`
`+ot+" "+Pt})}function be(B,ae,de,Te){B.info(function(){return"XMLHTTP TEXT ("+ae+"): "+Fe(B,de)+(Te?" "+Te:"")})}function Pe(B,ae){B.info(function(){return"TIMEOUT: "+ae})}Xr.prototype.info=function(){};function Fe(B,ae){if(!B.g)return ae;if(!ae)return null;try{var de=JSON.parse(ae);if(de){for(B=0;B<de.length;B++)if(Array.isArray(de[B])){var Te=de[B];if(!(2>Te.length)){var We=Te[1];if(Array.isArray(We)&&!(1>We.length)){var ot=We[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Pt=1;Pt<We.length;Pt++)We[Pt]=""}}}}return In(de)}catch{return ae}}var De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Me;function et(){}C(et,Zn),et.prototype.g=function(){return new XMLHttpRequest},et.prototype.i=function(){return{}},Me=new et;function dt(B,ae,de,Te){this.j=B,this.i=ae,this.l=de,this.R=Te||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Je}function Je(){this.i=null,this.g="",this.h=!1}var at={},ct={};function Bt(B,ae,de){B.L=1,B.v=ti(rs(ae)),B.m=de,B.P=!0,jt(B,null)}function jt(B,ae){B.F=Date.now(),$t(B),B.A=rs(B.v);var de=B.A,Te=B.R;Array.isArray(Te)||(Te=[String(Te)]),Dn(de.i,"t",Te),B.C=0,de=B.j.J,B.h=new Je,B.g=ge(B.j,de?ae:null,!B.m),0<B.O&&(B.M=new _t(p(B.Y,B,B.g),B.O)),ae=B.U,de=B.g,Te=B.ca;var We="readystatechange";Array.isArray(We)||(We&&(An[0]=We.toString()),We=An);for(var ot=0;ot<We.length;ot++){var Pt=Ie(de,We[ot],Te||ae.handleEvent,!1,ae.h||ae);if(!Pt)break;ae.g[Pt.key]=Pt}ae=B.H?S(B.H):{},B.m?(B.u||(B.u="POST"),ae["Content-Type"]="application/x-www-form-urlencoded",B.g.ea(B.A,B.u,B.m,ae)):(B.u="GET",B.g.ea(B.A,B.u,null,ae)),zs(),br(B.i,B.u,B.A,B.l,B.R,B.m)}dt.prototype.ca=function(B){B=B.target;const ae=this.M;ae&&Ss(B)==3?ae.j():this.Y(B)},dt.prototype.Y=function(B){try{if(B==this.g)e:{const Pr=Ss(this.g);var ae=this.g.Ba();const Eo=this.g.Z();if(!(3>Pr)&&(Pr!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||Pr!=4||ae==7||(ae==8||0>=Eo?zs(3):zs(2)),cr(this);var de=this.g.Z();this.X=de;t:if(Jt(this)){var Te=cu(this.g);B="";var We=Te.length,ot=Ss(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),ur(this);var Pt="";break t}this.h.i=new o.TextDecoder}for(ae=0;ae<We;ae++)this.h.h=!0,B+=this.h.i.decode(Te[ae],{stream:!(ot&&ae==We-1)});Te.length=0,this.h.g+=B,this.C=0,Pt=this.h.g}else Pt=this.g.oa();if(this.o=de==200,Yt(this.i,this.u,this.A,this.l,this.R,Pr,de),this.o){if(this.T&&!this.K){t:{if(this.g){var Ln,gr=this.g;if((Ln=gr.g?gr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ln)){var Yn=Ln;break t}}Yn=null}if(de=Yn)be(this.i,this.l,de,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,de);else{this.o=!1,this.s=3,rn(12),dr(this),ur(this);break e}}if(this.P){de=!0;let Jr;for(;!this.J&&this.C<Pt.length;)if(Jr=Ot(this,Pt),Jr==ct){Pr==4&&(this.s=4,rn(14),de=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==at){this.s=4,rn(15),be(this.i,this.l,Pt,"[Invalid Chunk]"),de=!1;break}else be(this.i,this.l,Jr,null),Rs(this,Jr);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pr!=4||Pt.length!=0||this.h.h||(this.s=1,rn(16),de=!1),this.o=this.o&&de,!de)be(this.i,this.l,Pt,"[Invalid Chunked Response]"),dr(this),ur(this);else if(0<Pt.length&&!this.W){this.W=!0;var ar=this.j;ar.g==this&&ar.ba&&!ar.M&&(ar.j.info("Great, no buffering proxy detected. Bytes received: "+Pt.length),il(ar),ar.M=!0,rn(11))}}else be(this.i,this.l,Pt,null),Rs(this,Pt);Pr==4&&dr(this),this.o&&!this.J&&(Pr==4?ll(this.j,this):(this.o=!1,$t(this)))}else El(this.g),de==400&&0<Pt.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),dr(this),ur(this)}}}catch{}finally{}};function Jt(B){return B.g?B.u=="GET"&&B.L!=2&&B.j.Ca:!1}function Ot(B,ae){var de=B.C,Te=ae.indexOf(`
`,de);return Te==-1?ct:(de=Number(ae.substring(de,Te)),isNaN(de)?at:(Te+=1,Te+de>ae.length?ct:(ae=ae.slice(Te,Te+de),B.C=Te+de,ae)))}dt.prototype.cancel=function(){this.J=!0,dr(this)};function $t(B){B.S=Date.now()+B.I,Cn(B,B.I)}function Cn(B,ae){if(B.B!=null)throw Error("WatchDog timer not null");B.B=Nr(p(B.ba,B),ae)}function cr(B){B.B&&(o.clearTimeout(B.B),B.B=null)}dt.prototype.ba=function(){this.B=null;const B=Date.now();0<=B-this.S?(Pe(this.i,this.A),this.L!=2&&(zs(),rn(17)),dr(this),this.s=2,ur(this)):Cn(this,this.S-B)};function ur(B){B.j.G==0||B.J||ll(B.j,B)}function dr(B){cr(B);var ae=B.M;ae&&typeof ae.ma=="function"&&ae.ma(),B.M=null,Tr(B.U),B.g&&(ae=B.g,B.g=null,ae.abort(),ae.ma())}function Rs(B,ae){try{var de=B.j;if(de.G!=0&&(de.g==B||Rn(de.h,B))){if(!B.K&&Rn(de.h,B)&&de.G==3){try{var Te=de.Da.g.parse(ae)}catch{Te=null}if(Array.isArray(Te)&&Te.length==3){var We=Te;if(We[0]==0){e:if(!de.u){if(de.g)if(de.g.F+3e3<B.F)ol(de),Nc(de);else break e;kl(de),rn(18)}}else de.za=We[1],0<de.za-de.T&&37500>We[2]&&de.F&&de.v==0&&!de.C&&(de.C=Nr(p(de.Za,de),6e3));if(1>=Fs(de.h)&&de.ca){try{de.ca()}catch{}de.ca=void 0}}else si(de,11)}else if((B.K||de.g==B)&&ol(de),!F(ae))for(We=de.Da.g.parse(ae),ae=0;ae<We.length;ae++){let Yn=We[ae];if(de.T=Yn[0],Yn=Yn[1],de.G==2)if(Yn[0]=="c"){de.K=Yn[1],de.ia=Yn[2];const ar=Yn[3];ar!=null&&(de.la=ar,de.j.info("VER="+de.la));const Pr=Yn[4];Pr!=null&&(de.Aa=Pr,de.j.info("SVER="+de.Aa));const Eo=Yn[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(Te=1.5*Eo,de.L=Te,de.j.info("backChannelRequestTimeoutMs_="+Te)),Te=de;const Jr=B.g;if(Jr){const Pi=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var ot=Te.h;ot.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Pn(ot,ot.h),ot.h=null))}if(Te.D){const Ci=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ci&&(Te.ya=Ci,Fn(Te.I,Te.D,Ci))}}de.G=3,de.l&&de.l.ua(),de.ba&&(de.R=Date.now()-B.F,de.j.info("Handshake RTT: "+de.R+"ms")),Te=de;var Pt=B;if(Te.qa=Y(Te,Te.J?Te.ia:null,Te.W),Pt.K){qs(Te.h,Pt);var Ln=Pt,gr=Te.L;gr&&(Ln.I=gr),Ln.B&&(cr(Ln),$t(Ln)),Te.g=Pt}else _i(Te);0<de.i.length&&Tl(de)}else Yn[0]!="stop"&&Yn[0]!="close"||si(de,7);else de.G==3&&(Yn[0]=="stop"||Yn[0]=="close"?Yn[0]=="stop"?si(de,7):Co(de):Yn[0]!="noop"&&de.l&&de.l.ta(Yn),de.v=0)}}zs(4)}catch{}}var ba=class{constructor(B,ae){this.g=B,this.map=ae}};function Gs(B){this.l=B||10,o.PerformanceNavigationTiming?(B=o.performance.getEntriesByType("navigation"),B=0<B.length&&(B[0].nextHopProtocol=="hq"||B[0].nextHopProtocol=="h2")):B=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=B?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(B){return B.h?!0:B.g?B.g.size>=B.j:!1}function Fs(B){return B.h?1:B.g?B.g.size:0}function Rn(B,ae){return B.h?B.h==ae:B.g?B.g.has(ae):!1}function Pn(B,ae){B.g?B.g.add(ae):B.h=ae}function qs(B,ae){B.h&&B.h==ae?B.h=null:B.g&&B.g.has(ae)&&B.g.delete(ae)}Gs.prototype.cancel=function(){if(this.i=Ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const B of this.g.values())B.cancel();this.g.clear()}};function Ji(B){if(B.h!=null)return B.i.concat(B.h.D);if(B.g!=null&&B.g.size!==0){let ae=B.i;for(const de of B.g.values())ae=ae.concat(de.D);return ae}return y(B.i)}function tl(B){if(B.V&&typeof B.V=="function")return B.V();if(typeof Map<"u"&&B instanceof Map||typeof Set<"u"&&B instanceof Set)return Array.from(B.values());if(typeof B=="string")return B.split("");if(l(B)){for(var ae=[],de=B.length,Te=0;Te<de;Te++)ae.push(B[Te]);return ae}ae=[],de=0;for(Te in B)ae[de++]=B[Te];return ae}function bo(B){if(B.na&&typeof B.na=="function")return B.na();if(!B.V||typeof B.V!="function"){if(typeof Map<"u"&&B instanceof Map)return Array.from(B.keys());if(!(typeof Set<"u"&&B instanceof Set)){if(l(B)||typeof B=="string"){var ae=[];B=B.length;for(var de=0;de<B;de++)ae.push(de);return ae}ae=[],de=0;for(const Te in B)ae[de++]=Te;return ae}}}function Qn(B,ae){if(B.forEach&&typeof B.forEach=="function")B.forEach(ae,void 0);else if(l(B)||typeof B=="string")Array.prototype.forEach.call(B,ae,void 0);else for(var de=bo(B),Te=tl(B),We=Te.length,ot=0;ot<We;ot++)ae.call(void 0,Te[ot],de&&de[ot],B)}var pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bl(B,ae){if(B){B=B.split("&");for(var de=0;de<B.length;de++){var Te=B[de].indexOf("="),We=null;if(0<=Te){var ot=B[de].substring(0,Te);We=B[de].substring(Te+1)}else ot=B[de];ae(ot,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function _r(B){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,B instanceof _r){this.h=B.h,_l(this,B.j),this.o=B.o,this.g=B.g,Zi(this,B.s),this.l=B.l;var ae=B.i,de=new Fi;de.i=ae.i,ae.g&&(de.g=new Map(ae.g),de.h=ae.h),_a(this,de),this.m=B.m}else B&&(ae=String(B).match(pr))?(this.h=!1,_l(this,ae[1]||"",!0),this.o=Ca(ae[2]||""),this.g=Ca(ae[3]||"",!0),Zi(this,ae[4]),this.l=Ca(ae[5]||"",!0),_a(this,ae[6]||"",!0),this.m=Ca(ae[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}_r.prototype.toString=function(){var B=[],ae=this.j;ae&&B.push(yi(ae,nl,!0),":");var de=this.g;return(de||ae=="file")&&(B.push("//"),(ae=this.o)&&B.push(yi(ae,nl,!0),"@"),B.push(encodeURIComponent(String(de)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.s,de!=null&&B.push(":",String(de))),(de=this.l)&&(this.g&&de.charAt(0)!="/"&&B.push("/"),B.push(yi(de,de.charAt(0)=="/"?eo:Jl,!0))),(de=this.i.toString())&&B.push("?",de),(de=this.m)&&B.push("#",yi(de,to)),B.join("")};function rs(B){return new _r(B)}function _l(B,ae,de){B.j=de?Ca(ae,!0):ae,B.j&&(B.j=B.j.replace(/:$/,""))}function Zi(B,ae){if(ae){if(ae=Number(ae),isNaN(ae)||0>ae)throw Error("Bad port number "+ae);B.s=ae}else B.s=null}function _a(B,ae,de){ae instanceof Fi?(B.i=ae,wi(B.i,B.h)):(de||(ae=yi(ae,rl)),B.i=new Fi(ae,B.h))}function Fn(B,ae,de){B.i.set(ae,de)}function ti(B){return Fn(B,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),B}function Ca(B,ae){return B?ae?decodeURI(B.replace(/%25/g,"%2525")):decodeURIComponent(B):""}function yi(B,ae,de){return typeof B=="string"?(B=encodeURI(B).replace(ae,Tc),de&&(B=B.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B):null}function Tc(B){return B=B.charCodeAt(0),"%"+(B>>4&15).toString(16)+(B&15).toString(16)}var nl=/[#\/\?@]/g,Jl=/[#\?:]/g,eo=/[#\?]/g,rl=/[#\?@]/g,to=/#/g;function Fi(B,ae){this.h=this.g=null,this.i=B||null,this.j=!!ae}function Gr(B){B.g||(B.g=new Map,B.h=0,B.i&&bl(B.i,function(ae,de){B.add(decodeURIComponent(ae.replace(/\+/g," ")),de)}))}t=Fi.prototype,t.add=function(B,ae){Gr(this),this.i=null,B=bn(this,B);var de=this.g.get(B);return de||this.g.set(B,de=[]),de.push(ae),this.h+=1,this};function _o(B,ae){Gr(B),ae=bn(B,ae),B.g.has(ae)&&(B.i=null,B.h-=B.g.get(ae).length,B.g.delete(ae))}function Di(B,ae){return Gr(B),ae=bn(B,ae),B.g.has(ae)}t.forEach=function(B,ae){Gr(this),this.g.forEach(function(de,Te){de.forEach(function(We){B.call(ae,We,Te,this)},this)},this)},t.na=function(){Gr(this);const B=Array.from(this.g.values()),ae=Array.from(this.g.keys()),de=[];for(let Te=0;Te<ae.length;Te++){const We=B[Te];for(let ot=0;ot<We.length;ot++)de.push(ae[Te])}return de},t.V=function(B){Gr(this);let ae=[];if(typeof B=="string")Di(this,B)&&(ae=ae.concat(this.g.get(bn(this,B))));else{B=Array.from(this.g.values());for(let de=0;de<B.length;de++)ae=ae.concat(B[de])}return ae},t.set=function(B,ae){return Gr(this),this.i=null,B=bn(this,B),Di(this,B)&&(this.h-=this.g.get(B).length),this.g.set(B,[ae]),this.h+=1,this},t.get=function(B,ae){return B?(B=this.V(B),0<B.length?String(B[0]):ae):ae};function Dn(B,ae,de){_o(B,ae),0<de.length&&(B.i=null,B.g.set(bn(B,ae),y(de)),B.h+=de.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const B=[],ae=Array.from(this.g.keys());for(var de=0;de<ae.length;de++){var Te=ae[de];const ot=encodeURIComponent(String(Te)),Pt=this.V(Te);for(Te=0;Te<Pt.length;Te++){var We=ot;Pt[Te]!==""&&(We+="="+encodeURIComponent(String(Pt[Te]))),B.push(We)}}return this.i=B.join("&")};function bn(B,ae){return ae=String(ae),B.j&&(ae=ae.toLowerCase()),ae}function wi(B,ae){ae&&!B.j&&(Gr(B),B.i=null,B.g.forEach(function(de,Te){var We=Te.toLowerCase();Te!=We&&(_o(this,Te),Dn(this,We,de))},B)),B.j=ae}function rr(B,ae){const de=new Xr;if(o.Image){const Te=new Image;Te.onload=x(Ua,de,"TestLoadImage: loaded",!0,ae,Te),Te.onerror=x(Ua,de,"TestLoadImage: error",!1,ae,Te),Te.onabort=x(Ua,de,"TestLoadImage: abort",!1,ae,Te),Te.ontimeout=x(Ua,de,"TestLoadImage: timeout",!1,ae,Te),o.setTimeout(function(){Te.ontimeout&&Te.ontimeout()},1e4),Te.src=B}else ae(!1)}function bi(B,ae){const de=new Xr,Te=new AbortController,We=setTimeout(()=>{Te.abort(),Ua(de,"TestPingServer: timeout",!1,ae)},1e4);fetch(B,{signal:Te.signal}).then(ot=>{clearTimeout(We),ot.ok?Ua(de,"TestPingServer: ok",!0,ae):Ua(de,"TestPingServer: server error",!1,ae)}).catch(()=>{clearTimeout(We),Ua(de,"TestPingServer: error",!1,ae)})}function Ua(B,ae,de,Te,We){try{We&&(We.onload=null,We.onerror=null,We.onabort=null,We.ontimeout=null),Te(de)}catch{}}function Li(){this.g=new Lr}function ni(B,ae,de){const Te=de||"";try{Qn(B,function(We,ot){let Pt=We;u(We)&&(Pt=In(We)),ae.push(Te+ot+"="+encodeURIComponent(Pt))})}catch(We){throw ae.push(Te+"type="+encodeURIComponent("_badmap")),We}}function ri(B){this.l=B.Ub||null,this.j=B.eb||!1}C(ri,Zn),ri.prototype.g=function(){return new no(this.l,this.j)},ri.prototype.i=function(B){return function(){return B}}({});function no(B,ae){Gt.call(this),this.D=B,this.o=ae,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(no,Gt),t=no.prototype,t.open=function(B,ae){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=B,this.A=ae,this.readyState=1,Ps(this)},t.send=function(B){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ae={headers:this.u,method:this.B,credentials:this.m,cache:void 0};B&&(ae.body=B),(this.D||o).fetch(new Request(this.A,ae)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},t.Sa=function(B){if(this.g&&(this.l=B,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=B.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")B.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in B){if(this.j=B.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sl(this)}else B.text().then(this.Ra.bind(this),this.ga.bind(this))};function sl(B){B.j.read().then(B.Pa.bind(B)).catch(B.ga.bind(B))}t.Pa=function(B){if(this.g){if(this.o&&B.value)this.response.push(B.value);else if(!this.o){var ae=B.value?B.value:new Uint8Array(0);(ae=this.v.decode(ae,{stream:!B.done}))&&(this.response=this.responseText+=ae)}B.done?qr(this):Ps(this),this.readyState==3&&sl(this)}},t.Ra=function(B){this.g&&(this.response=this.responseText=B,qr(this))},t.Qa=function(B){this.g&&(this.response=B,qr(this))},t.ga=function(){this.g&&qr(this)};function qr(B){B.readyState=4,B.l=null,B.j=null,B.v=null,Ps(B)}t.setRequestHeader=function(B,ae){this.u.append(B,ae)},t.getResponseHeader=function(B){return this.h&&this.h.get(B.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const B=[],ae=this.h.entries();for(var de=ae.next();!de.done;)de=de.value,B.push(de[0]+": "+de[1]),de=ae.next();return B.join(`\r
`)};function Ps(B){B.onreadystatechange&&B.onreadystatechange.call(B)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(B){this.m=B?"include":"same-origin"}});function ro(B){let ae="";return j(B,function(de,Te){ae+=Te,ae+=":",ae+=de,ae+=`\r
`}),ae}function Ks(B,ae,de){e:{for(Te in de){var Te=!1;break e}Te=!0}Te||(de=ro(de),typeof B=="string"?de!=null&&encodeURIComponent(String(de)):Fn(B,ae,de))}function Cr(B){Gt.call(this),this.headers=new Map,this.o=B||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Cr,Gt);var al=/^https?$/i,Ri=["POST","PUT"];t=Cr.prototype,t.Ha=function(B){this.J=B},t.ea=function(B,ae,de,Te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+B);ae=ae?ae.toUpperCase():"GET",this.D=B,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Me.g(),this.v=this.o?ya(this.o):ya(Me),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(ae,String(B),!0),this.B=!1}catch(ot){lu(this,ot);return}if(B=de||"",de=new Map(this.headers),Te)if(Object.getPrototypeOf(Te)===Object.prototype)for(var We in Te)de.set(We,Te[We]);else if(typeof Te.keys=="function"&&typeof Te.get=="function")for(const ot of Te.keys())de.set(ot,Te.get(ot));else throw Error("Unknown input type for opt_headers: "+String(Te));Te=Array.from(de.keys()).find(ot=>ot.toLowerCase()=="content-type"),We=o.FormData&&B instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Ri,ae,void 0))||Te||We||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Pt]of de)this.g.setRequestHeader(ot,Pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ds(this),this.u=!0,this.g.send(B),this.u=!1}catch(ot){lu(this,ot)}};function lu(B,ae){B.h=!1,B.g&&(B.j=!0,B.g.abort(),B.j=!1),B.l=ae,B.m=5,Cl(B),so(B)}function Cl(B){B.A||(B.A=!0,Wt(B,"complete"),Wt(B,"error"))}t.abort=function(B){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=B||7,Wt(this,"complete"),Wt(this,"abort"),so(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),so(this,!0)),Cr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?er(this):this.bb())},t.bb=function(){er(this)};function er(B){if(B.h&&typeof i<"u"&&(!B.v[1]||Ss(B)!=4||B.Z()!=2)){if(B.u&&Ss(B)==4)Qt(B.Ea,0,B);else if(Wt(B,"readystatechange"),Ss(B)==4){B.h=!1;try{const Pt=B.Z();e:switch(Pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ae=!0;break e;default:ae=!1}var de;if(!(de=ae)){var Te;if(Te=Pt===0){var We=String(B.D).match(pr)[1]||null;!We&&o.self&&o.self.location&&(We=o.self.location.protocol.slice(0,-1)),Te=!al.test(We?We.toLowerCase():"")}de=Te}if(de)Wt(B,"complete"),Wt(B,"success");else{B.m=6;try{var ot=2<Ss(B)?B.g.statusText:""}catch{ot=""}B.l=ot+" ["+B.Z()+"]",Cl(B)}}finally{so(B)}}}}function so(B,ae){if(B.g){ds(B);const de=B.g,Te=B.v[0]?()=>{}:null;B.g=null,B.v=null,ae||Wt(B,"ready");try{de.onreadystatechange=Te}catch{}}}function ds(B){B.I&&(o.clearTimeout(B.I),B.I=null)}t.isActive=function(){return!!this.g};function Ss(B){return B.g?B.g.readyState:0}t.Z=function(){try{return 2<Ss(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(B){if(this.g){var ae=this.g.responseText;return B&&ae.indexOf(B)==0&&(ae=ae.substring(B.length)),nr(ae)}};function cu(B){try{if(!B.g)return null;if("response"in B.g)return B.g.response;switch(B.H){case"":case"text":return B.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in B.g)return B.g.mozResponseArrayBuffer}return null}catch{return null}}function El(B){const ae={};B=(B.g&&2<=Ss(B)&&B.g.getAllResponseHeaders()||"").split(`\r
`);for(let Te=0;Te<B.length;Te++){if(F(B[Te]))continue;var de=P(B[Te]);const We=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const ot=ae[We]||[];ae[We]=ot,ot.push(de)}E(ae,function(Te){return Te.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(B,ae,de){return de&&de.internalChannelParams&&de.internalChannelParams[B]||ae}function Sl(B){this.Aa=0,this.i=[],this.j=new Xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,B),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,B),this.cb=ca("retryDelaySeedMs",1e4,B),this.Wa=ca("forwardChannelMaxRetries",2,B),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,B),this.pa=B&&B.xmlHttpFactory||void 0,this.Xa=B&&B.Tb||void 0,this.Ca=B&&B.useFetchStreams||!1,this.L=void 0,this.J=B&&B.supportsCrossDomainXhr||!1,this.K="",this.h=new Gs(B&&B.concurrentRequestLimit),this.Da=new Li,this.P=B&&B.fastHandshake||!1,this.O=B&&B.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=B&&B.Rb||!1,B&&B.xa&&this.j.xa(),B&&B.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&B&&B.detectBufferingProxy||!1,this.ja=void 0,B&&B.longPollingTimeout&&0<B.longPollingTimeout&&(this.ja=B.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sl.prototype,t.la=8,t.G=1,t.connect=function(B,ae,de,Te){rn(0),this.W=B,this.H=ae||{},de&&Te!==void 0&&(this.H.OSID=de,this.H.OAID=Te),this.F=this.X,this.I=Y(this,null,this.W),Tl(this)};function Co(B){if(Zl(B),B.G==3){var ae=B.U++,de=rs(B.I);if(Fn(de,"SID",B.K),Fn(de,"RID",ae),Fn(de,"TYPE","terminate"),Nl(B,de),ae=new dt(B,B.j,ae),ae.L=2,ae.v=ti(rs(de)),de=!1,o.navigator&&o.navigator.sendBeacon)try{de=o.navigator.sendBeacon(ae.v.toString(),"")}catch{}!de&&o.Image&&(new Image().src=ae.v,de=!0),de||(ae.g=ge(ae.j,null),ae.g.ea(ae.v)),ae.F=Date.now(),$t(ae)}kc(B)}function Nc(B){B.g&&(il(B),B.g.cancel(),B.g=null)}function Zl(B){Nc(B),B.u&&(o.clearTimeout(B.u),B.u=null),ol(B),B.h.cancel(),B.s&&(typeof B.s=="number"&&o.clearTimeout(B.s),B.s=null)}function Tl(B){if(!la(B.h)&&!B.s){B.s=!0;var ae=B.Ga;oe||X(),K||(oe(),K=!0),ne.add(ae,B),B.B=0}}function uu(B,ae){return Fs(B.h)>=B.h.j-(B.s?1:0)?!1:B.s?(B.i=ae.D.concat(B.i),!0):B.G==1||B.G==2||B.B>=(B.Va?0:B.Wa)?!1:(B.s=Nr(p(B.Ga,B,ae),Il(B,B.B)),B.B++,!0)}t.Ga=function(B){if(this.s)if(this.s=null,this.G==1){if(!B){this.U=Math.floor(1e5*Math.random()),B=this.U++;const We=new dt(this,this.j,B);let ot=this.o;if(this.S&&(ot?(ot=S(ot),z(ot,this.S)):ot=this.S),this.m!==null||this.O||(We.H=ot,ot=null),this.P)e:{for(var ae=0,de=0;de<this.i.length;de++){t:{var Te=this.i[de];if("__data__"in Te.map&&(Te=Te.map.__data__,typeof Te=="string")){Te=Te.length;break t}Te=void 0}if(Te===void 0)break;if(ae+=Te,4096<ae){ae=de;break e}if(ae===4096||de===this.i.length-1){ae=de+1;break e}}ae=1e3}else ae=1e3;ae=Bl(this,We,ae),de=rs(this.I),Fn(de,"RID",B),Fn(de,"CVER",22),this.D&&Fn(de,"X-HTTP-Session-Id",this.D),Nl(this,de),ot&&(this.O?ae="headers="+encodeURIComponent(String(ro(ot)))+"&"+ae:this.m&&Ks(de,this.m,ot)),Pn(this.h,We),this.Ua&&Fn(de,"TYPE","init"),this.P?(Fn(de,"$req",ae),Fn(de,"SID","null"),We.T=!0,Bt(We,de,null)):Bt(We,de,ae),this.G=2}}else this.G==3&&(B?Ea(this,B):this.i.length==0||la(this.h)||Ea(this))};function Ea(B,ae){var de;ae?de=ae.l:de=B.U++;const Te=rs(B.I);Fn(Te,"SID",B.K),Fn(Te,"RID",de),Fn(Te,"AID",B.T),Nl(B,Te),B.m&&B.o&&Ks(Te,B.m,B.o),de=new dt(B,B.j,de,B.B+1),B.m===null&&(de.H=B.o),ae&&(B.i=ae.D.concat(B.i)),ae=Bl(B,de,1e3),de.I=Math.round(.5*B.wa)+Math.round(.5*B.wa*Math.random()),Pn(B.h,de),Bt(de,Te,ae)}function Nl(B,ae){B.H&&j(B.H,function(de,Te){Fn(ae,Te,de)}),B.l&&Qn({},function(de,Te){Fn(ae,Te,de)})}function Bl(B,ae,de){de=Math.min(B.i.length,de);var Te=B.l?p(B.l.Na,B.l,B):null;e:{var We=B.i;let ot=-1;for(;;){const Pt=["count="+de];ot==-1?0<de?(ot=We[0].g,Pt.push("ofs="+ot)):ot=0:Pt.push("ofs="+ot);let Ln=!0;for(let gr=0;gr<de;gr++){let Yn=We[gr].g;const ar=We[gr].map;if(Yn-=ot,0>Yn)ot=Math.max(0,We[gr].g-100),Ln=!1;else try{ni(ar,Pt,"req"+Yn+"_")}catch{Te&&Te(ar)}}if(Ln){Te=Pt.join("&");break e}}}return B=B.i.splice(0,de),ae.D=B,Te}function _i(B){if(!B.g&&!B.u){B.Y=1;var ae=B.Fa;oe||X(),K||(oe(),K=!0),ne.add(ae,B),B.v=0}}function kl(B){return B.g||B.u||3<=B.v?!1:(B.Y++,B.u=Nr(p(B.Fa,B),Il(B,B.v)),B.v++,!0)}t.Fa=function(){if(this.u=null,Bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var B=2*this.R;this.j.info("BP detection timer enabled: "+B),this.A=Nr(p(this.ab,this),B)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Nc(this),Bc(this))};function il(B){B.A!=null&&(o.clearTimeout(B.A),B.A=null)}function Bc(B){B.g=new dt(B,B.j,"rpc",B.Y),B.m===null&&(B.g.H=B.o),B.g.O=0;var ae=rs(B.qa);Fn(ae,"RID","rpc"),Fn(ae,"SID",B.K),Fn(ae,"AID",B.T),Fn(ae,"CI",B.F?"0":"1"),!B.F&&B.ja&&Fn(ae,"TO",B.ja),Fn(ae,"TYPE","xmlhttp"),Nl(B,ae),B.m&&B.o&&Ks(ae,B.m,B.o),B.L&&(B.g.I=B.L);var de=B.g;B=B.ia,de.L=1,de.v=ti(rs(ae)),de.m=null,de.P=!0,jt(de,B)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),kl(this),rn(19))};function ol(B){B.C!=null&&(o.clearTimeout(B.C),B.C=null)}function ll(B,ae){var de=null;if(B.g==ae){ol(B),il(B),B.g=null;var Te=2}else if(Rn(B.h,ae))de=ae.D,qs(B.h,ae),Te=1;else return;if(B.G!=0){if(ae.o)if(Te==1){de=ae.m?ae.m.length:0,ae=Date.now()-ae.F;var We=B.B;Te=wa(),Wt(Te,new Rr(Te,de)),Tl(B)}else _i(B);else if(We=ae.s,We==3||We==0&&0<ae.X||!(Te==1&&uu(B,ae)||Te==2&&kl(B)))switch(de&&0<de.length&&(ae=B.h,ae.i=ae.i.concat(de)),We){case 1:si(B,5);break;case 4:si(B,10);break;case 3:si(B,6);break;default:si(B,2)}}}function Il(B,ae){let de=B.Ta+Math.floor(Math.random()*B.cb);return B.isActive()||(de*=2),de*ae}function si(B,ae){if(B.j.info("Error code "+ae),ae==2){var de=p(B.fb,B),Te=B.Xa;const We=!Te;Te=new _r(Te||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_l(Te,"https"),ti(Te),We?rr(Te.toString(),de):bi(Te.toString(),de)}else rn(2);B.G=0,B.l&&B.l.sa(ae),kc(B),Zl(B)}t.fb=function(B){B?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function kc(B){if(B.G=0,B.ka=[],B.l){const ae=Ji(B.h);(ae.length!=0||B.i.length!=0)&&(T(B.ka,ae),T(B.ka,B.i),B.h.i.length=0,y(B.i),B.i.length=0),B.l.ra()}}function Y(B,ae,de){var Te=de instanceof _r?rs(de):new _r(de);if(Te.g!="")ae&&(Te.g=ae+"."+Te.g),Zi(Te,Te.s);else{var We=o.location;Te=We.protocol,ae=ae?ae+"."+We.hostname:We.hostname,We=+We.port;var ot=new _r(null);Te&&_l(ot,Te),ae&&(ot.g=ae),We&&Zi(ot,We),de&&(ot.l=de),Te=ot}return de=B.D,ae=B.ya,de&&ae&&Fn(Te,de,ae),Fn(Te,"VER",B.la),Nl(B,Te),Te}function ge(B,ae,de){if(ae&&!B.J)throw Error("Can't create secondary domain capable XhrIo object.");return ae=B.Ca&&!B.pa?new Cr(new ri({eb:de})):new Cr(B.pa),ae.Ha(B.J),ae}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ue(){}t=Ue.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ze(){}ze.prototype.g=function(B,ae){return new Xe(B,ae)};function Xe(B,ae){Gt.call(this),this.g=new Sl(ae),this.l=B,this.h=ae&&ae.messageUrlParams||null,B=ae&&ae.messageHeaders||null,ae&&ae.clientProtocolHeaderRequired&&(B?B["X-Client-Protocol"]="webchannel":B={"X-Client-Protocol":"webchannel"}),this.g.o=B,B=ae&&ae.initMessageHeaders||null,ae&&ae.messageContentType&&(B?B["X-WebChannel-Content-Type"]=ae.messageContentType:B={"X-WebChannel-Content-Type":ae.messageContentType}),ae&&ae.va&&(B?B["X-WebChannel-Client-Profile"]=ae.va:B={"X-WebChannel-Client-Profile":ae.va}),this.g.S=B,(B=ae&&ae.Sb)&&!F(B)&&(this.g.m=B),this.v=ae&&ae.supportsCrossDomainXhr||!1,this.u=ae&&ae.sendRawJson||!1,(ae=ae&&ae.httpSessionIdParam)&&!F(ae)&&(this.g.D=ae,B=this.h,B!==null&&ae in B&&(B=this.h,ae in B&&delete B[ae])),this.j=new qt(this)}C(Xe,Gt),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){Co(this.g)},Xe.prototype.o=function(B){var ae=this.g;if(typeof B=="string"){var de={};de.__data__=B,B=de}else this.u&&(de={},de.__data__=In(B),B=de);ae.i.push(new ba(ae.Ya++,B)),ae.G==3&&Tl(ae)},Xe.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,Xe.aa.N.call(this)};function gt(B){Is.call(this),B.__headers__&&(this.headers=B.__headers__,this.statusCode=B.__status__,delete B.__headers__,delete B.__status__);var ae=B.__sm__;if(ae){e:{for(const de in ae){B=de;break e}B=void 0}(this.i=B)&&(B=this.i,ae=ae!==null&&B in ae?ae[B]:void 0),this.data=ae}else this.data=B}C(gt,Is);function Rt(){lr.call(this),this.status=1}C(Rt,lr);function qt(B){this.g=B}C(qt,Ue),qt.prototype.ua=function(){Wt(this.g,"a")},qt.prototype.ta=function(B){Wt(this.g,new gt(B))},qt.prototype.sa=function(B){Wt(this.g,new Rt)},qt.prototype.ra=function(){Wt(this.g,"b")},ze.prototype.createWebChannel=ze.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,sM=function(){return new ze},rM=function(){return wa()},nM=vn,jE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Ry=De,Le.COMPLETE="complete",tM=Le,wr.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,xg=wr,Cr.prototype.listenOnce=Cr.prototype.L,Cr.prototype.getLastError=Cr.prototype.Ka,Cr.prototype.getLastErrorCode=Cr.prototype.Ba,Cr.prototype.getStatus=Cr.prototype.Z,Cr.prototype.getResponseJson=Cr.prototype.Oa,Cr.prototype.getResponseText=Cr.prototype.oa,Cr.prototype.send=Cr.prototype.ea,Cr.prototype.setWithCredentials=Cr.prototype.Ha,eM=Cr}).apply(typeof S1<"u"?S1:typeof self<"u"?self:typeof window<"u"?window:{});const aI="@firebase/firestore",iI="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jo.UNAUTHENTICATED=new jo(null),jo.GOOGLE_CREDENTIALS=new jo("google-credentials-uid"),jo.FIRST_PARTY=new jo("first-party-uid"),jo.MOCK_USER=new jo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new RT("@firebase/firestore");function tm(){return Oh.logLevel}function hn(t,...e){if(Oh.logLevel<=Qr.DEBUG){const n=e.map(KT);Oh.debug(`Firestore (${rp}): ${t}`,...n)}}function ad(t,...e){if(Oh.logLevel<=Qr.ERROR){const n=e.map(KT);Oh.error(`Firestore (${rp}): ${t}`,...n)}}function Um(t,...e){if(Oh.logLevel<=Qr.WARN){const n=e.map(KT);Oh.warn(`Firestore (${rp}): ${t}`,...n)}}function KT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aM(t,r,n)}function aM(t,e,n){let r=`FIRESTORE (${rp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ad(r),new Error(r)}function ps(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||aM(e,s,r)}function or(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class on extends _A{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jo.UNAUTHENTICATED))}shutdown(){}}class RK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class PK{constructor(e){this.t=e,this.currentUser=jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ps(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new JA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new JA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new JA)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ps(typeof r.accessToken=="string",31837,{l:r}),new iM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ps(e===null||typeof e=="string",2055,{h:e}),new jo(e)}}class MK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=jo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ps(this.o===void 0,3512);const r=a=>{a.error!=null&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,hn("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ps(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jK(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Hr(t,e){return t<e?-1:t>e?1:0}function QE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return rC(s)===rC(a)?Hr(s,a):rC(s)?1:-1}return Hr(t.length,e.length)}const QK=55296,HK=57343;function rC(t){const e=t.charCodeAt(0);return e>=QK&&e<=HK}function Om(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="__name__";class lA{constructor(e,n,r){n===void 0?n=0:n>e.length&&Wn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Wn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lA.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lA?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=lA.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Hr(e.length,n.length)}static compareSegments(e,n){const r=lA.isNumericId(e),s=lA.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?lA.extractNumericId(e).compare(lA.extractNumericId(n)):QE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xf.fromString(e.substring(4,e.length-2))}}class Hs extends lA{construct(e,n,r){return new Hs(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new on(St.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Hs(n)}static emptyPath(){return new Hs([])}}const VK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class go extends lA{construct(e,n,r){return new go(e,n,r)}static isValidIdentifier(e){return VK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),go.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lI}static keyField(){return new go([lI])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new on(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new on(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new on(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(a(),s++)}if(a(),i)throw new on(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new go(n)}static emptyPath(){return new go([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.path=e}static fromPath(e){return new Bn(Hs.fromString(e))}static fromName(e){return new Bn(Hs.fromString(e).popFirst(5))}static empty(){return new Bn(Hs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Hs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Hs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bn(new Hs(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t,e,n){if(!n)throw new on(St.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zK(t,e,n,r){if(e===!0&&r===!0)throw new on(St.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cI(t){if(!Bn.isDocumentKey(t))throw new on(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uI(t){if(Bn.isDocumentKey(t))throw new on(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function E2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Wn(12329,{type:typeof t})}function xl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new on(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=E2(t);throw new on(St.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function GK(t,e){if(e<=0)throw new on(St.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){const n={typeString:t};return e&&(n.value=e),n}function ev(t,e){if(!lM(t))throw new on(St.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new on(St.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=-62135596800,dI=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dI);return new Tn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new on(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new on(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AI)throw new on(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new on(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dI}_compareTo(e){return this.seconds===e.seconds?Hr(this.nanoseconds,e.nanoseconds):Hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ev(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:pi("string",Tn._jsonSchemaVersion),seconds:pi("number"),nanoseconds:pi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{static fromTimestamp(e){return new sr(e)}static min(){return new sr(new Tn(0,0))}static max(){return new sr(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=-1;function qK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=sr.fromTimestamp(r===1e9?new Tn(n+1,0):new Tn(n,r));return new Bf(s,Bn.empty(),e)}function KK(t){return new Bf(t.readTime,t.key,dx)}class Bf{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bf(sr.min(),Bn.empty(),dx)}static max(){return new Bf(sr.max(),Bn.empty(),dx)}}function $K(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Bn.comparator(t.documentKey,e.documentKey),n!==0?n:Hr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(t){if(t.code!==St.FAILED_PRECONDITION||t.message!==WK)throw t;hn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Wn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Lt((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Lt?n:Lt.resolve(n)}catch(n){return Lt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Lt.reject(n)}static resolve(e){return new Lt((n,r)=>{n(e)})}static reject(e){return new Lt((n,r)=>{r(e)})}static waitFor(e){return new Lt((n,r)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&n()},l=>r(l))}),i=!0,a===s&&n()})}static or(e){let n=Lt.resolve(!1);for(const r of e)n=n.next(s=>s?Lt.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Lt((r,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(d=>{i[u]=d,++o,o===a&&r(i)},d=>s(d))}})}static doWhile(e,n){return new Lt((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function XK(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ap(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}S2.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=-1;function T2(t){return t==null}function dw(t){return t===0&&1/t==-1/0}function JK(t){return typeof t=="number"&&Number.isInteger(t)&&!dw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="";function ZK(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fI(e)),e=e$(t.get(n),e);return fI(e)}function e$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case cM:n+="";break;default:n+=a}}return n}function fI(t){return t+cM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.comparator=e,this.root=n||mo.EMPTY}insert(e,n){return new xa(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new xa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new T1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new T1(this.root,e,this.comparator,!1)}getReverseIterator(){return new T1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new T1(this.root,e,this.comparator,!0)}}class T1{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mo{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??mo.RED,this.left=s??mo.EMPTY,this.right=a??mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new mo(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mo.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Wn(27949);return e+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn(57766)}get value(){throw Wn(16141)}get color(){throw Wn(16727)}get left(){throw Wn(29726)}get right(){throw Wn(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new mo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.comparator=e,this.data=new xa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mI(this.data.getIterator())}getIteratorFrom(e){return new mI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ki(this.comparator);return n.data=e,n}}class mI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.fields=e,e.sort(go.comparator)}static empty(){return new wc([])}unionWith(e){let n=new ki(go.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wc(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Om(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AM("Invalid base64 string: "+a):a}}(e);return new yo(n)}static fromUint8Array(e){const n=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new yo(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yo.EMPTY_BYTE_STRING=new yo("");const t$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kf(t){if(ps(!!t,39018),typeof t=="string"){let e=0;const n=t$.exec(t);if(ps(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$a(t.seconds),nanos:$a(t.nanos)}}function $a(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function If(t){return typeof t=="string"?yo.fromBase64String(t):yo.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="server_timestamp",fM="__type__",hM="__previous_value__",mM="__local_write_time__";function YT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fM])==null?void 0:r.stringValue)===dM}function N2(t){const e=t.mapValue.fields[hM];return YT(e)?N2(e):e}function fx(t){const e=kf(t.mapValue.fields[mM].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,n,r,s,a,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const fw="(default)";class hx{constructor(e,n){this.projectId=e,this.database=n||fw}static empty(){return new hx("","")}get isDefaultDatabase(){return this.database===fw}isEqual(e){return e instanceof hx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="__type__",r$="__max__",N1={mapValue:{}},gM="__vector__",hw="value";function Ff(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?YT(t)?4:a$(t)?9007199254740991:s$(t)?10:11:Wn(28295,{value:t})}function wA(t,e){if(t===e)return!0;const n=Ff(t);if(n!==Ff(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fx(t).isEqual(fx(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=kf(s.timestampValue),o=kf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return If(s.bytesValue).isEqual(If(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return $a(s.geoPointValue.latitude)===$a(a.geoPointValue.latitude)&&$a(s.geoPointValue.longitude)===$a(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return $a(s.integerValue)===$a(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=$a(s.doubleValue),o=$a(a.doubleValue);return i===o?dw(i)===dw(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Om(t.arrayValue.values||[],e.arrayValue.values||[],wA);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(hI(i)!==hI(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!wA(i[l],o[l])))return!1;return!0}(t,e);default:return Wn(52216,{left:t})}}function mx(t,e){return(t.values||[]).find(n=>wA(n,e))!==void 0}function jm(t,e){if(t===e)return 0;const n=Ff(t),r=Ff(e);if(n!==r)return Hr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Hr(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=$a(a.integerValue||a.doubleValue),l=$a(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return pI(t.timestampValue,e.timestampValue);case 4:return pI(fx(t),fx(e));case 5:return QE(t.stringValue,e.stringValue);case 6:return function(a,i){const o=If(a),l=If(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=Hr(o[u],l[u]);if(d!==0)return d}return Hr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=Hr($a(a.latitude),$a(i.latitude));return o!==0?o:Hr($a(a.longitude),$a(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gI(t.arrayValue,e.arrayValue);case 10:return function(a,i){var p,x,C,y;const o=a.fields||{},l=i.fields||{},u=(p=o[hw])==null?void 0:p.arrayValue,d=(x=l[hw])==null?void 0:x.arrayValue,m=Hr(((C=u==null?void 0:u.values)==null?void 0:C.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return m!==0?m:gI(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===N1.mapValue&&i===N1.mapValue)return 0;if(a===N1.mapValue)return 1;if(i===N1.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const p=QE(l[m],d[m]);if(p!==0)return p;const x=jm(o[l[m]],u[d[m]]);if(x!==0)return x}return Hr(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Wn(23264,{he:n})}}function pI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Hr(t,e);const n=kf(t),r=kf(e),s=Hr(n.seconds,r.seconds);return s!==0?s:Hr(n.nanos,r.nanos)}function gI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=jm(n[s],r[s]);if(a)return a}return Hr(n.length,r.length)}function Qm(t){return HE(t)}function HE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return If(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Bn.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=HE(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const i of r)a?a=!1:s+=",",s+=`${i}:${HE(n.fields[i])}`;return s+"}"}(t.mapValue):Wn(61005,{value:t})}function Py(t){switch(Ff(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=N2(t);return e?16+Py(e):16;case 5:return 2*t.stringValue.length;case 6:return If(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Py(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Vf(r.fields,(a,i)=>{s+=a.length+Py(i)}),s}(t.mapValue);default:throw Wn(13486,{value:t})}}function xI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function VE(t){return!!t&&"integerValue"in t}function XT(t){return!!t&&"arrayValue"in t}function vI(t){return!!t&&"nullValue"in t}function yI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function My(t){return!!t&&"mapValue"in t}function s$(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pM])==null?void 0:r.stringValue)===gM}function jg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Vf(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jg(t.arrayValue.values[n]);return e}return{...t}}function a$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===r$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.value=e}static empty(){return new Gl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!My(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jg(n)}setAll(e){let n=go.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=jg(i):s.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());My(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];My(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vf(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Gl(jg(this.value))}}function xM(t){const e=[];return Vf(t.fields,(n,r)=>{const s=new go([n]);if(My(r)){const a=xM(r.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new wc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r,s,a,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new zo(e,0,sr.min(),sr.min(),sr.min(),Gl.empty(),0)}static newFoundDocument(e,n,r,s){return new zo(e,1,n,sr.min(),r,s,0)}static newNoDocument(e,n){return new zo(e,2,n,sr.min(),sr.min(),Gl.empty(),0)}static newUnknownDocument(e,n){return new zo(e,3,n,sr.min(),sr.min(),Gl.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(sr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.position=e,this.inclusive=n}}function wI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?r=Bn.comparator(Bn.fromName(i.referenceValue),n.key):r=jm(i,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n="asc"){this.field=e,this.dir=n}}function i$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{}class mi extends vM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new l$(e,n,r):n==="array-contains"?new A$(e,r):n==="in"?new d$(e,r):n==="not-in"?new f$(e,r):n==="array-contains-any"?new h$(e,r):new mi(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new c$(e,r):new u$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jm(n,this.value)):n!==null&&Ff(this.value)===Ff(n)&&this.matchesComparison(jm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Wn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ru extends vM{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ru(e,n)}matches(e){return yM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yM(t){return t.op==="and"}function wM(t){return o$(t)&&yM(t)}function o$(t){for(const e of t.filters)if(e instanceof Ru)return!1;return!0}function zE(t){if(t instanceof mi)return t.field.canonicalString()+t.op.toString()+Qm(t.value);if(wM(t))return t.filters.map(e=>zE(e)).join(",");{const e=t.filters.map(n=>zE(n)).join(",");return`${t.op}(${e})`}}function bM(t,e){return t instanceof mi?function(r,s){return s instanceof mi&&r.op===s.op&&r.field.isEqual(s.field)&&wA(r.value,s.value)}(t,e):t instanceof Ru?function(r,s){return s instanceof Ru&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,i,o)=>a&&bM(i,s.filters[o]),!0):!1}(t,e):void Wn(19439)}function _M(t){return t instanceof mi?function(n){return`${n.field.canonicalString()} ${n.op} ${Qm(n.value)}`}(t):t instanceof Ru?function(n){return n.op.toString()+" {"+n.getFilters().map(_M).join(" ,")+"}"}(t):"Filter"}class l$ extends mi{constructor(e,n,r){super(e,n,r),this.key=Bn.fromName(r.referenceValue)}matches(e){const n=Bn.comparator(e.key,this.key);return this.matchesComparison(n)}}class c$ extends mi{constructor(e,n){super(e,"in",n),this.keys=CM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class u$ extends mi{constructor(e,n){super(e,"not-in",n),this.keys=CM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CM(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Bn.fromName(r.referenceValue))}class A$ extends mi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return XT(n)&&mx(n.arrayValue,this.value)}}class d$ extends mi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mx(this.value.arrayValue,n)}}class f$ extends mi{constructor(e,n){super(e,"not-in",n)}matches(e){if(mx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mx(this.value.arrayValue,n)}}class h$ extends mi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!XT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mx(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e,n=null,r=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function _I(t,e=null,n=[],r=[],s=null,a=null,i=null){return new m$(t,e,n,r,s,a,i)}function JT(t){const e=or(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),T2(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qm(r)).join(",")),e.Te=n}return e.Te}function ZT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!i$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bI(t.startAt,e.startAt)&&bI(t.endAt,e.endAt)}function GE(t){return Bn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n=null,r=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function p$(t,e,n,r,s,a,i,o){return new ip(t,e,n,r,s,a,i,o)}function B2(t){return new ip(t)}function CI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EM(t){return t.collectionGroup!==null}function Qg(t){const e=or(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new ki(go.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new px(a,r))}),n.has(go.keyField().canonicalString())||e.Ie.push(new px(go.keyField(),r))}return e.Ie}function mA(t){const e=or(t);return e.Ee||(e.Ee=g$(e,Qg(t))),e.Ee}function g$(t,e){if(t.limitType==="F")return _I(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new px(s.field,a)});const n=t.endAt?new mw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mw(t.startAt.position,t.startAt.inclusive):null;return _I(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function qE(t,e){const n=t.filters.concat([e]);return new ip(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pw(t,e,n){return new ip(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function k2(t,e){return ZT(mA(t),mA(e))&&t.limitType===e.limitType}function SM(t){return`${JT(mA(t))}|lt:${t.limitType}`}function nm(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>_M(s)).join(", ")}]`),T2(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Qm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Qm(s)).join(",")),`Target(${r})`}(mA(t))}; limitType=${t.limitType})`}function I2(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Bn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Qg(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,l){const u=wI(i,o,l);return i.inclusive?u<=0:u<0}(r.startAt,Qg(r),s)||r.endAt&&!function(i,o,l){const u=wI(i,o,l);return i.inclusive?u>=0:u>0}(r.endAt,Qg(r),s))}(t,e)}function x$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TM(t){return(e,n)=>{let r=!1;for(const s of Qg(t)){const a=v$(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function v$(t,e,n){const r=t.field.isKeyField()?Bn.comparator(e.key,n.key):function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?jm(l,u):Wn(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wn(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vf(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return uM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new xa(Bn.comparator);function id(){return y$}const NM=new xa(Bn.comparator);function vg(...t){let e=NM;for(const n of t)e=e.insert(n.key,n);return e}function BM(t){let e=NM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wh(){return Hg()}function kM(){return Hg()}function Hg(){return new Zh(t=>t.toString(),(t,e)=>t.isEqual(e))}const w$=new xa(Bn.comparator),b$=new ki(Bn.comparator);function Vr(...t){let e=b$;for(const n of t)e=e.add(n);return e}const _$=new ki(Hr);function C$(){return _$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dw(e)?"-0":e}}function IM(t){return{integerValue:""+t}}function E$(t,e){return JK(e)?IM(e):e5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this._=void 0}}function S$(t,e,n){return t instanceof gx?function(s,a){const i={fields:{[fM]:{stringValue:dM},[mM]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&YT(a)&&(a=N2(a)),a&&(i.fields[hM]=a),{mapValue:i}}(n,e):t instanceof Hm?DM(t,e):t instanceof xx?LM(t,e):function(s,a){const i=FM(s,a),o=EI(i)+EI(s.Ae);return VE(i)&&VE(s.Ae)?IM(o):e5(s.serializer,o)}(t,e)}function T$(t,e,n){return t instanceof Hm?DM(t,e):t instanceof xx?LM(t,e):n}function FM(t,e){return t instanceof gw?function(r){return VE(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class gx extends F2{}class Hm extends F2{constructor(e){super(),this.elements=e}}function DM(t,e){const n=RM(e);for(const r of t.elements)n.some(s=>wA(s,r))||n.push(r);return{arrayValue:{values:n}}}class xx extends F2{constructor(e){super(),this.elements=e}}function LM(t,e){let n=RM(e);for(const r of t.elements)n=n.filter(s=>!wA(s,r));return{arrayValue:{values:n}}}class gw extends F2{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function EI(t){return $a(t.integerValue||t.doubleValue)}function RM(t){return XT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n){this.field=e,this.transform=n}}function N$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Hm&&s instanceof Hm||r instanceof xx&&s instanceof xx?Om(r.elements,s.elements,wA):r instanceof gw&&s instanceof gw?wA(r.Ae,s.Ae):r instanceof gx&&s instanceof gx}(t.transform,e.transform)}class B${constructor(e,n){this.version=e,this.transformResults=n}}class vl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vl}static exists(e){return new vl(void 0,e)}static updateTime(e){return new vl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class D2{}function MM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new L2(t.key,vl.none()):new tv(t.key,t.data,vl.none());{const n=t.data,r=Gl.empty();let s=new ki(go.comparator);for(let a of e.fields)if(!s.has(a)){let i=n.field(a);i===null&&a.length>1&&(a=a.popLast(),i=n.field(a)),i===null?r.delete(a):r.set(a,i),s=s.add(a)}return new zf(t.key,r,new wc(s.toArray()),vl.none())}}function k$(t,e,n){t instanceof tv?function(s,a,i){const o=s.value.clone(),l=TI(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof zf?function(s,a,i){if(!Uy(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=TI(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(UM(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Vg(t,e,n,r){return t instanceof tv?function(a,i,o,l){if(!Uy(a.precondition,i))return o;const u=a.value.clone(),d=NI(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zf?function(a,i,o,l){if(!Uy(a.precondition,i))return o;const u=NI(a.fieldTransforms,l,i),d=i.data;return d.setAll(UM(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,i,o){return Uy(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function I$(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=FM(r.transform,s||null);a!=null&&(n===null&&(n=Gl.empty()),n.set(r.field,a))}return n||null}function SI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Om(r,s,(a,i)=>N$(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tv extends D2{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zf extends D2{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function TI(t,e,n){const r=new Map;ps(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);r.set(a.field,T$(i,o,n[s]))}return r}function NI(t,e,n){const r=new Map;for(const s of t){const a=s.transform,i=n.data.field(s.field);r.set(s.field,S$(a,i,e))}return r}class L2 extends D2{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F$ extends D2{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&k$(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kM();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=n.has(s.key)?null:o;const l=MM(i,o);l!==null&&r.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(sr.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vr())}isEqual(e){return this.batchId===e.batchId&&Om(this.mutations,e.mutations,(n,r)=>SI(n,r))&&Om(this.baseMutations,e.baseMutations,(n,r)=>SI(n,r))}}class t5{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ps(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return w$}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,r[i].version);return new t5(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Yr;function P$(t){switch(t){case St.OK:return Wn(64938);case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0;default:return Wn(15467,{code:t})}}function OM(t){if(t===void 0)return ad("GRPC error has no .code"),St.UNKNOWN;switch(t){case Ai.OK:return St.OK;case Ai.CANCELLED:return St.CANCELLED;case Ai.UNKNOWN:return St.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return St.INTERNAL;case Ai.UNAVAILABLE:return St.UNAVAILABLE;case Ai.UNAUTHENTICATED:return St.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case Ai.NOT_FOUND:return St.NOT_FOUND;case Ai.ALREADY_EXISTS:return St.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return St.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case Ai.ABORTED:return St.ABORTED;case Ai.OUT_OF_RANGE:return St.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return St.UNIMPLEMENTED;case Ai.DATA_LOSS:return St.DATA_LOSS;default:return Wn(39323,{code:t})}}(Yr=Ai||(Ai={}))[Yr.OK=0]="OK",Yr[Yr.CANCELLED=1]="CANCELLED",Yr[Yr.UNKNOWN=2]="UNKNOWN",Yr[Yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yr[Yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yr[Yr.NOT_FOUND=5]="NOT_FOUND",Yr[Yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yr[Yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yr[Yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yr[Yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yr[Yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yr[Yr.ABORTED=10]="ABORTED",Yr[Yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yr[Yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yr[Yr.INTERNAL=13]="INTERNAL",Yr[Yr.UNAVAILABLE=14]="UNAVAILABLE",Yr[Yr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=new xf([4294967295,4294967295],0);function BI(t){const e=M$().encode(t),n=new ZP;return n.update(e),new Uint8Array(n.digest())}function kI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new xf([n,r],0),new xf([s,a],0)]}class n5{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yg(`Invalid padding: ${n}`);if(r<0)throw new yg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xf.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(xf.fromNumber(r)));return s.compare(U$)===1&&(s=new xf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=BI(e),[r,s]=kI(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);if(!this.we(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new n5(a,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const n=BI(e),[r,s]=kI(n);for(let a=0;a<this.hashCount;a++){const i=this.ye(r,s,a);this.Se(i)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new R2(sr.min(),s,new xa(Hr),id(),Vr())}}class nv{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nv(r,n,Vr(),Vr(),Vr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class jM{constructor(e,n){this.targetId=e,this.Ce=n}}class QM{constructor(e,n,r=yo.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class II{constructor(){this.ve=0,this.Fe=FI(),this.Me=yo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vr(),n=Vr(),r=Vr();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Wn(38017,{changeType:a})}}),new nv(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=FI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ps(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O${constructor(e){this.Ge=e,this.ze=new Map,this.je=id(),this.Je=B1(),this.He=B1(),this.Ye=new xa(Hr)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Wn(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(GE(a))if(r===0){const i=new Bn(a.path);this.et(n,i,zo.newNoDocument(i,sr.min()))}else ps(r===1,20013,{expectedCount:r});else{const i=this._t(n);if(i!==r){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let i,o;try{i=If(r).toUint8Array()}catch(l){if(l instanceof AM)return Um("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new n5(i,s,a)}catch(l){return Um(l instanceof yg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&GE(o.target)){const l=new Bn(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,zo.newNoDocument(l,e))}a.Be&&(n.set(i,a.ke()),a.qe())}});let r=Vr();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new R2(e,n,this.Ye,this.je,r);return this.je=id(),this.Je=B1(),this.He=B1(),this.Ye=new xa(Hr),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new II,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ki(Hr),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ki(Hr),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||hn("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new II),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function B1(){return new xa(Bn.comparator)}function FI(){return new xa(Bn.comparator)}const j$={asc:"ASCENDING",desc:"DESCENDING"},Q$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H$={and:"AND",or:"OR"};class V${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function KE(t,e){return t.useProto3Json||T2(e)?e:{value:e}}function xw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z$(t,e){return xw(t,e.toTimestamp())}function pA(t){return ps(!!t,49232),sr.fromTimestamp(function(n){const r=kf(n);return new Tn(r.seconds,r.nanos)}(t))}function r5(t,e){return $E(t,e).canonicalString()}function $E(t,e){const n=function(s){return new Hs(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VM(t){const e=Hs.fromString(t);return ps($M(e),10190,{key:e.toString()}),e}function WE(t,e){return r5(t.databaseId,e.path)}function sC(t,e){const n=VM(e);if(n.get(1)!==t.databaseId.projectId)throw new on(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new on(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Bn(GM(n))}function zM(t,e){return r5(t.databaseId,e)}function G$(t){const e=VM(t);return e.length===4?Hs.emptyPath():GM(e)}function YE(t){return new Hs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GM(t){return ps(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function DI(t,e,n){return{name:WE(t,e),fields:n.value.mapValue.fields}}function q$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Wn(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(ps(d===void 0||typeof d=="string",58123),yo.fromBase64String(d||"")):(ps(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yo.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?St.UNKNOWN:OM(u.code);return new on(d,u.message||"")}(i);n=new QM(r,s,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sC(t,r.document.name),a=pA(r.document.updateTime),i=r.document.createTime?pA(r.document.createTime):sr.min(),o=new Gl({mapValue:{fields:r.document.fields}}),l=zo.newFoundDocument(s,a,i,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Oy(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sC(t,r.document),a=r.readTime?pA(r.readTime):sr.min(),i=zo.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Oy([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sC(t,r.document),a=r.removedTargetIds||[];n=new Oy([],a,s,null)}else{if(!("filter"in e))return Wn(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,i=new R$(s,a),o=r.targetId;n=new jM(o,i)}}return n}function K$(t,e){let n;if(e instanceof tv)n={update:DI(t,e.key,e.value)};else if(e instanceof L2)n={delete:WE(t,e.key)};else if(e instanceof zf)n={update:DI(t,e.key,e.data),updateMask:nW(e.fieldMask)};else{if(!(e instanceof F$))return Wn(16599,{Vt:e.type});n={verify:WE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,i){const o=i.transform;if(o instanceof gx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Hm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof gw)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Wn(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:z$(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Wn(27497)}(t,e.precondition)),n}function $$(t,e){return t&&t.length>0?(ps(e!==void 0,14353),t.map(n=>function(s,a){let i=s.updateTime?pA(s.updateTime):pA(a);return i.isEqual(sr.min())&&(i=pA(a)),new B$(i,s.transformResults||[])}(n,e))):[]}function W$(t,e){return{documents:[zM(t,e.path)]}}function Y$(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zM(t,s);const a=function(u){if(u.length!==0)return KM(Ru.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const i=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:rm(p.field),direction:Z$(p.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=KE(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function X$(t){let e=G$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ps(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(m){const p=qM(m);return p instanceof Ru&&wM(p)?p.getFilters():[p]}(n.where));let i=[];n.orderBy&&(i=function(m){return m.map(p=>function(C){return new px(sm(C.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(m){let p;return p=typeof m=="object"?m.value:m,T2(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(m){const p=!!m.before,x=m.values||[];return new mw(x,p)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const p=!m.before,x=m.values||[];return new mw(x,p)}(n.endAt)),p$(e,s,i,a,o,"F",l,u)}function J$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sm(n.unaryFilter.field);return mi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=sm(n.unaryFilter.field);return mi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sm(n.unaryFilter.field);return mi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sm(n.unaryFilter.field);return mi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Wn(61313);default:return Wn(60726)}}(t):t.fieldFilter!==void 0?function(n){return mi.create(sm(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Wn(58110);default:return Wn(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ru.create(n.compositeFilter.filters.map(r=>qM(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Wn(1026)}}(n.compositeFilter.op))}(t):Wn(30097,{filter:t})}function Z$(t){return j$[t]}function eW(t){return Q$[t]}function tW(t){return H$[t]}function rm(t){return{fieldPath:t.canonicalString()}}function sm(t){return go.fromServerFormat(t.fieldPath)}function KM(t){return t instanceof mi?function(n){if(n.op==="=="){if(yI(n.value))return{unaryFilter:{field:rm(n.field),op:"IS_NAN"}};if(vI(n.value))return{unaryFilter:{field:rm(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yI(n.value))return{unaryFilter:{field:rm(n.field),op:"IS_NOT_NAN"}};if(vI(n.value))return{unaryFilter:{field:rm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(n.field),op:eW(n.op),value:n.value}}}(t):t instanceof Ru?function(n){const r=n.getFilters().map(s=>KM(s));return r.length===1?r[0]:{compositeFilter:{op:tW(n.op),filters:r}}}(t):Wn(54877,{filter:t})}function nW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $M(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r,s,a=sr.min(),i=sr.min(),o=yo.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new of(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new of(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new of(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new of(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.yt=e}}function sW(t){const e=X$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this.Cn=new iW}addToCollectionParentIndex(e,n){return this.Cn.add(n),Lt.resolve()}getCollectionParents(e,n){return Lt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Lt.resolve()}deleteFieldIndex(e,n){return Lt.resolve()}deleteAllFieldIndexes(e){return Lt.resolve()}createTargetIndexes(e,n){return Lt.resolve()}getDocumentsMatchingTarget(e,n){return Lt.resolve(null)}getIndexType(e,n){return Lt.resolve(0)}getFieldIndexes(e,n){return Lt.resolve([])}getNextCollectionGroupToUpdate(e){return Lt.resolve(null)}getMinOffset(e,n){return Lt.resolve(Bf.min())}getMinOffsetFromCollectionGroup(e,n){return Lt.resolve(Bf.min())}updateCollectionGroup(e,n,r){return Lt.resolve()}updateIndexEntries(e,n){return Lt.resolve()}}class iW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ki(Hs.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ki(Hs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WM=41943040;class Vl{static withCacheSize(e){return new Vl(e,Vl.DEFAULT_COLLECTION_PERCENTILE,Vl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vl.DEFAULT_COLLECTION_PERCENTILE=10,Vl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vl.DEFAULT=new Vl(WM,Vl.DEFAULT_COLLECTION_PERCENTILE,Vl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vl.DISABLED=new Vl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vm(0)}static cr(){return new Vm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="LruGarbageCollector",oW=1048576;function PI([t,e],[n,r]){const s=Hr(t,n);return s===0?Hr(e,r):s}class lW{constructor(e){this.Ir=e,this.buffer=new ki(PI),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){hn(RI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ap(n)?hn(RI,"Ignoring IndexedDB error during garbage collection: ",n):await sp(n)}await this.Vr(3e5)})}}class uW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Lt.resolve(S2.ce);const r=new lW(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(hn("LruGarbageCollector","Garbage collection skipped; disabled"),Lt.resolve(LI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(hn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LI):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(hn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,i=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,o=Date.now(),this.removeTargets(e,r,n))).next(m=>(a=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),tm()<=Qr.DEBUG&&hn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${m} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Lt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:m})))}}function AW(t,e){return new uW(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(){this.changes=new Zh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zo.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Lt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vg(r.mutation,s,wc.empty(),Tn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Vr()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Vr()){const s=wh();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let i=vg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=wh();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Vr()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let a=id();const i=Hg(),o=function(){return Hg()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof zf)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Vg(d.mutation,u,d.mutation.getFieldMask(),Tn.now())):i.set(u.key,wc.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>i.set(u,d)),n.forEach((u,d)=>o.set(u,new fW(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Hg();let s=new xa((i,o)=>i-o),a=Vr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||wc.empty();d=o.applyToLocalView(u,d),r.set(l,d);const m=(s.get(o.batchId)||Vr()).add(l);s=s.insert(o.batchId,m)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,m=kM();d.forEach(p=>{if(!a.has(p)){const x=MM(n.get(p),r.get(p));x!==null&&m.set(p,x),a=a.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Lt.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return Bn.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Lt.resolve(wh());let o=dx,l=a;return i.next(u=>Lt.forEach(u,(d,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),a.get(d)?Lt.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,Vr())).next(d=>({batchId:o,changes:BM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Bn(n)).next(r=>{let s=vg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let i=vg();return this.indexManager.getCollectionParents(e,a).next(o=>Lt.forEach(o,l=>{const u=function(m,p){return new ip(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((m,p)=>{i=i.insert(m,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(i=>{a.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=vg();return i.forEach((l,u)=>{const d=a.get(l);d!==void 0&&Vg(d.mutation,u,wc.empty(),Tn.now()),I2(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Lt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:pA(s.createTime)}}(n)),Lt.resolve()}getNamedQuery(e,n){return Lt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:sW(s.bundledQuery),readTime:pA(s.readTime)}}(n)),Lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(){this.overlays=new xa(Bn.comparator),this.qr=new Map}getOverlay(e,n){return Lt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wh();return Lt.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),Lt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),Lt.resolve()}getOverlaysForCollection(e,n,r){const s=wh(),a=n.length+1,i=new Bn(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Lt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new xa((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=wh(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=wh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return Lt.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new L$(n,r));let a=this.qr.get(n);a===void 0&&(a=Vr(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(){this.sessionToken=yo.EMPTY_BYTE_STRING}getSessionToken(e){return Lt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Lt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.Qr=new ki(Gi.$r),this.Ur=new ki(Gi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gi(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Gi(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Bn(new Hs([])),r=new Gi(n,e),s=new Gi(n,e+1),a=[];return this.Ur.forEachInRange([r,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Bn(new Hs([])),r=new Gi(n,e),s=new Gi(n,e+1);let a=Vr();return this.Ur.forEachInRange([r,s],i=>{a=a.add(i.key)}),a}containsKey(e){const n=new Gi(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Bn.comparator(e.key,n.key)||Hr(e.Yr,n.Yr)}static Kr(e,n){return Hr(e.Yr,n.Yr)||Bn.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ki(Gi.$r)}checkEmpty(e){return Lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new D$(a,n,r,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new Gi(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Lt.resolve(i)}lookupMutationBatch(e,n){return Lt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return Lt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Lt.resolve(this.mutationQueue.length===0?WT:this.tr-1)}getAllMutationBatches(e){return Lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gi(n,0),s=new Gi(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),Lt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ki(Hr);return n.forEach(s=>{const a=new Gi(s,0),i=new Gi(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{r=r.add(o.Yr)})}),Lt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Bn.isDocumentKey(a)||(a=a.child(""));const i=new Gi(new Bn(a),0);let o=new ki(Hr);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Yr)),!0)},i),Lt.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ps(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Lt.forEach(n.mutations,s=>{const a=new Gi(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Gi(n,0),s=this.Zr.firstAfterOrEqual(r);return Lt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Lt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e){this.ri=e,this.docs=function(){return new xa(Bn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,i=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Lt.resolve(r?r.document.mutableCopy():zo.newInvalidDocument(n))}getEntries(e,n){let r=id();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():zo.newInvalidDocument(s))}),Lt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=id();const i=n.path,o=new Bn(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||$K(KK(d),r)<=0||(s.has(d.key)||I2(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Lt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Wn(9500)}ii(e,n){return Lt.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yW(this)}getSize(e){return Lt.resolve(this.size)}}class yW extends dW{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Lt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e){this.persistence=e,this.si=new Zh(n=>JT(n),ZT),this.lastRemoteSnapshotVersion=sr.min(),this.highestTargetId=0,this.oi=0,this._i=new s5,this.targetCount=0,this.ai=Vm.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Lt.resolve()}getLastRemoteSnapshotVersion(e){return Lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Lt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Lt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vm(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Lt.resolve()}updateTargetData(e,n){return this.Pr(n),Lt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Lt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Lt.waitFor(a).next(()=>s)}getTargetCount(e){return Lt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Lt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Lt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),Lt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Lt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Lt.resolve(r)}containsKey(e,n){return Lt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n){this.ui={},this.overlays={},this.ci=new S2(0),this.li=!1,this.li=!0,this.hi=new gW,this.referenceDelegate=e(this),this.Pi=new wW(this),this.indexManager=new aW,this.remoteDocumentCache=function(s){return new vW(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new rW(n),this.Ii=new mW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new xW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){hn("MemoryPersistence","Starting transaction:",e);const s=new bW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return Lt.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class bW extends YK{constructor(e){super(),this.currentSequenceNumber=e}}class a5{constructor(e){this.persistence=e,this.Ri=new s5,this.Vi=null}static mi(e){return new a5(e)}get fi(){if(this.Vi)return this.Vi;throw Wn(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Lt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Lt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Lt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lt.forEach(this.fi,r=>{const s=Bn.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,sr.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Lt.or([()=>Lt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vw{constructor(e,n){this.persistence=e,this.pi=new Zh(r=>ZK(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=AW(this,n)}static mi(e,n){return new vw(e,n)}Ei(){}di(e){return Lt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Lt.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?Lt.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,n).next(o=>{o||(r++,a.removeEntry(i,sr.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Lt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Lt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Lt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Lt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Py(e.data.value)),n}br(e,n,r){return Lt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Lt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Vr(),s=Vr();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new i5(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ZV()?8:XK(Xo())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new _W;return this.Ss(e,n,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,i,o.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(tm()<=Qr.DEBUG&&hn("QueryEngine","SDK will not create cache indexes for query:",nm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Lt.resolve()):(tm()<=Qr.DEBUG&&hn("QueryEngine","Query:",nm(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(tm()<=Qr.DEBUG&&hn("QueryEngine","The SDK decides to create cache indexes for query:",nm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mA(n))):Lt.resolve())}ys(e,n){if(CI(n))return Lt.resolve(null);let r=mA(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pw(n,null,"F"),r=mA(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const i=Vr(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,o);return this.Cs(n,u,i,l.readTime)?this.ys(e,pw(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,s){return CI(n)||s.isEqual(sr.min())?Lt.resolve(null):this.ps.getDocuments(e,r).next(a=>{const i=this.Ds(n,a);return this.Cs(n,i,r,s)?Lt.resolve(null):(tm()<=Qr.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nm(n)),this.vs(e,i,n,qK(s,dx)).next(o=>o))})}Ds(e,n){let r=new ki(TM(e));return n.forEach((s,a)=>{I2(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return tm()<=Qr.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",nm(n)),this.ps.getDocumentsMatchingQuery(e,n,Bf.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="LocalStore",EW=3e8;class SW{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new xa(Hr),this.xs=new Zh(a=>JT(a),ZT),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function TW(t,e,n,r){return new SW(t,e,n,r)}async function XM(t,e){const n=or(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const i=[],o=[];let l=Vr();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function NW(t,e){const n=or(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const m=u.batch,p=m.keys();let x=Lt.resolve();return p.forEach(C=>{x=x.next(()=>d.getEntry(l,C)).next(y=>{const T=u.docVersions.get(C);ps(T!==null,48541),y.version.compareTo(T)<0&&(m.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),x.next(()=>o.mutationQueue.removeMutationBatch(l,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Vr();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JM(t){const e=or(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BW(t,e){const n=or(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach((d,m)=>{const p=s.get(m);if(!p)return;o.push(n.Pi.removeMatchingKeys(a,d.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,d.addedDocuments,m)));let x=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(yo.EMPTY_BYTE_STRING,sr.min()).withLastLimboFreeSnapshotVersion(sr.min()):d.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(d.resumeToken,r)),s=s.insert(m,x),function(y,T,I){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=EW?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,x,d)&&o.push(n.Pi.updateTargetData(a,x))});let l=id(),u=Vr();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(kW(a,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(sr.min())){const d=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return Lt.waitFor(o).next(()=>i.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.Ms=s,a))}function kW(t,e,n){let r=Vr(),s=Vr();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let i=id();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(sr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):hn(o5,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:s}})}function IW(t,e){const n=or(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=WT),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FW(t,e){const n=or(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,Lt.resolve(s)):n.Pi.allocateTargetId(r).next(i=>(s=new of(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function XE(t,e,n){const r=or(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!ap(i))throw i;hn(o5,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function MI(t,e,n){const r=or(t);let s=sr.min(),a=Vr();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const m=or(l),p=m.xs.get(d);return p!==void 0?Lt.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,d)}(r,i,mA(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(i,e,n?s:sr.min(),n?a:Vr())).next(o=>(DW(r,x$(e),o),{documents:o,Qs:a})))}function DW(t,e,n){let r=t.Os.get(e)||sr.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class UI{constructor(){this.activeTargetIds=C$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LW{constructor(){this.Mo=new UI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new UI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="ConnectivityMonitor";class jI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){hn(OI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){hn(OI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k1=null;function JE(){return k1===null?k1=function(){return 268435456+Math.round(2147483648*Math.random())}():k1++,"0x"+k1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="RestConnection",PW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===fw?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const i=JE(),o=this.zo(e,n.toUriEncodedString());hn(aC,`Sending RPC '${e}' ${i}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:u}=new URL(o),d=Xh(u);return this.Jo(e,o,l,r,d).then(m=>(hn(aC,`Received RPC '${e}' ${i}: `,m),m),m=>{throw Um(aC,`RPC '${e}' ${i} failed with error: `,m,"url: ",o,"request:",r),m})}Ho(e,n,r,s,a,i){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=PW[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="WebChannelConnection";class OW extends MW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const i=JE();return new Promise((o,l)=>{const u=new eM;u.setWithCredentials(!0),u.listenOnce(tM.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ry.NO_ERROR:const m=u.getResponseJson();hn(Do,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case Ry.TIMEOUT:hn(Do,`RPC '${e}' ${i} timed out`),l(new on(St.DEADLINE_EXCEEDED,"Request time out"));break;case Ry.HTTP_ERROR:const p=u.getStatus();if(hn(Do,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const y=function(I){const F=I.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(F)>=0?F:St.UNKNOWN}(C.status);l(new on(y,C.message))}else l(new on(St.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new on(St.UNAVAILABLE,"Connection failed."));break;default:Wn(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{hn(Do,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);hn(Do,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=JE(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=sM(),o=rM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=a.join("");hn(Do,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=i.createWebChannel(d,l);this.I_(m);let p=!1,x=!1;const C=new UW({Yo:T=>{x?hn(Do,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(hn(Do,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),hn(Do,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},Zo:()=>m.close()}),y=(T,I,F)=>{T.listen(I,M=>{try{F(M)}catch(O){setTimeout(()=>{throw O},0)}})};return y(m,xg.EventType.OPEN,()=>{x||(hn(Do,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),y(m,xg.EventType.CLOSE,()=>{x||(x=!0,hn(Do,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(m))}),y(m,xg.EventType.ERROR,T=>{x||(x=!0,Um(Do,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),C.a_(new on(St.UNAVAILABLE,"The operation could not be completed")))}),y(m,xg.EventType.MESSAGE,T=>{var I;if(!x){const F=T.data[0];ps(!!F,16349);const M=F,O=(M==null?void 0:M.error)||((I=M[0])==null?void 0:I.error);if(O){hn(Do,`RPC '${e}' stream ${s} received error:`,O);const Q=O.status;let j=function(k){const z=Ai[k];if(z!==void 0)return OM(z)}(Q),E=O.message;j===void 0&&(j=St.INTERNAL,E="Unknown error status: "+Q+" with message "+O.message),x=!0,C.a_(new on(j,E)),m.close()}else hn(Do,`RPC '${e}' stream ${s} received:`,F),C.u_(F)}}),y(o,nM.STAT_EVENT,T=>{T.stat===jE.PROXY?hn(Do,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===jE.NOPROXY&&hn(Do,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function iC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){return new V$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&hn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="PersistentStream";class eU{constructor(e,n,r,s,a,i,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZM(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===St.RESOURCE_EXHAUSTED?(ad(n.toString()),ad("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===St.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new on(St.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return hn(QI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(hn(QI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jW extends eU{constructor(e,n,r,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=q$(this.serializer,e),r=function(a){if(!("targetChange"in a))return sr.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?sr.min():i.readTime?pA(i.readTime):sr.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=YE(this.serializer),n.addTarget=function(a,i){let o;const l=i.target;if(o=GE(l)?{documents:W$(a,l)}:{query:Y$(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=HM(a,i.resumeToken);const u=KE(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(sr.min())>0){o.readTime=xw(a,i.snapshotVersion.toTimestamp());const u=KE(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=J$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=YE(this.serializer),n.removeTarget=e,this.q_(n)}}class QW extends eU{constructor(e,n,r,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ps(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ps(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ps(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$$(e.writeResults,e.commitTime),r=pA(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=YE(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>K$(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{}class VW extends HW{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new on(St.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,$E(n,r),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new on(St.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,$E(n,r),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new on(St.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ad(n),this.aa=!1):hn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RemoteStore";class GW{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{r.enqueueAndForget(async()=>{e0(this)&&(hn(jh,"Restarting streams for network reachability change."),await async function(l){const u=or(l);u.Ea.add(4),await rv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await M2(u)}(this))})}),this.Ra=new zW(r,s)}}async function M2(t){if(e0(t))for(const e of t.da)await e(!0)}async function rv(t){for(const e of t.da)await e(!1)}function tU(t,e){const n=or(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),A5(n)?u5(n):op(n).O_()&&c5(n,e))}function l5(t,e){const n=or(t),r=op(n);n.Ia.delete(e),r.O_()&&nU(n,e),n.Ia.size===0&&(r.O_()?r.L_():e0(n)&&n.Ra.set("Unknown"))}function c5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sr.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}op(t).Y_(e)}function nU(t,e){t.Va.Ue(e),op(t).Z_(e)}function u5(t){t.Va=new O$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),op(t).start(),t.Ra.ua()}function A5(t){return e0(t)&&!op(t).x_()&&t.Ia.size>0}function e0(t){return or(t).Ea.size===0}function rU(t){t.Va=void 0}async function qW(t){t.Ra.set("Online")}async function KW(t){t.Ia.forEach((e,n)=>{c5(t,e)})}async function $W(t,e){rU(t),A5(t)?(t.Ra.ha(e),u5(t)):t.Ra.set("Unknown")}async function WW(t,e,n){if(t.Ra.set("Online"),e instanceof QM&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(r){hn(jh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yw(t,r)}else if(e instanceof Oy?t.Va.Ze(e):e instanceof jM?t.Va.st(e):t.Va.tt(e),!n.isEqual(sr.min()))try{const r=await JM(t.localStore);n.compareTo(r)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(yo.EMPTY_BYTE_STRING,d.snapshotVersion)),nU(a,l);const m=new of(d.target,l,u,d.sequenceNumber);c5(a,m)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){hn(jh,"Failed to raise snapshot:",r),await yw(t,r)}}async function yw(t,e,n){if(!ap(e))throw e;t.Ea.add(1),await rv(t),t.Ra.set("Offline"),n||(n=()=>JM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{hn(jh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await M2(t)})}function sU(t,e){return e().catch(n=>yw(t,n,e))}async function U2(t){const e=or(t),n=Df(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:WT;for(;YW(e);)try{const s=await IW(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,XW(e,s)}catch(s){await yw(e,s)}aU(e)&&iU(e)}function YW(t){return e0(t)&&t.Ta.length<10}function XW(t,e){t.Ta.push(e);const n=Df(t);n.O_()&&n.X_&&n.ea(e.mutations)}function aU(t){return e0(t)&&!Df(t).x_()&&t.Ta.length>0}function iU(t){Df(t).start()}async function JW(t){Df(t).ra()}async function ZW(t){const e=Df(t);for(const n of t.Ta)e.ea(n.mutations)}async function eY(t,e,n){const r=t.Ta.shift(),s=t5.from(r,e,n);await sU(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await U2(t)}async function tY(t,e){e&&Df(t).X_&&await async function(r,s){if(function(i){return P$(i)&&i!==St.ABORTED}(s.code)){const a=r.Ta.shift();Df(r).B_(),await sU(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await U2(r)}}(t,e),aU(t)&&iU(t)}async function HI(t,e){const n=or(t);n.asyncQueue.verifyOperationInProgress(),hn(jh,"RemoteStore received new credentials");const r=e0(n);n.Ea.add(3),await rv(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await M2(n)}async function nY(t,e){const n=or(t);e?(n.Ea.delete(2),await M2(n)):e||(n.Ea.add(2),await rv(n),n.Ra.set("Unknown"))}function op(t){return t.ma||(t.ma=function(n,r,s){const a=or(n);return a.sa(),new jW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:qW.bind(null,t),t_:KW.bind(null,t),r_:$W.bind(null,t),H_:WW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),A5(t)?u5(t):t.Ra.set("Unknown")):(await t.ma.stop(),rU(t))})),t.ma}function Df(t){return t.fa||(t.fa=function(n,r,s){const a=or(n);return a.sa(),new QW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:JW.bind(null,t),r_:tY.bind(null,t),ta:ZW.bind(null,t),na:eY.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await U2(t)):(await t.fa.stop(),t.Ta.length>0&&(hn(jh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new JA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const i=Date.now()+r,o=new d5(e,n,i,s,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new on(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f5(t,e){if(ad("AsyncQueue",`${e}: ${t}`),ap(t))return new on(St.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static emptySet(e){return new vm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Bn.comparator(n.key,r.key):(n,r)=>Bn.comparator(n.key,r.key),this.keyedMap=vg(),this.sortedSet=new xa(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.ga=new xa(Bn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Wn(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class zm{constructor(e,n,r,s,a,i,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new zm(e,n,vm.emptySet(n),i,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&k2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class sY{constructor(){this.queries=zI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=or(n),a=s.queries;s.queries=zI(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new on(St.ABORTED,"Firestore shutting down"))}}function zI(){return new Zh(t=>SM(t),k2)}async function h5(t,e){const n=or(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new rY,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=f5(i,`Initialization of query '${nm(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&p5(n)}async function m5(t,e){const n=or(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aY(t,e){const n=or(t);let r=!1;for(const s of e){const a=s.query,i=n.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(r=!0);i.wa=s}}r&&p5(n)}function iY(t,e,n){const r=or(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function p5(t){t.Ca.forEach(e=>{e.next()})}var ZE,GI;(GI=ZE||(ZE={})).Ma="default",GI.Cache="cache";class g5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ZE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.key=e}}class lU{constructor(e){this.key=e}}class oY{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vr(),this.mutatedKeys=Vr(),this.eu=TM(e),this.tu=new vm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new VI,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const p=s.get(d),x=I2(this.query,m)?m:null,C=!!p&&this.mutatedKeys.has(p.key),y=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let T=!1;p&&x?p.data.isEqual(x.data)?C!==y&&(r.track({type:3,doc:x}),T=!0):this.su(p,x)||(r.track({type:2,doc:x}),T=!0,(l&&this.eu(x,l)>0||u&&this.eu(x,u)<0)&&(o=!0)):!p&&x?(r.track({type:0,doc:x}),T=!0):p&&!x&&(r.track({type:1,doc:p}),T=!0,(l||u)&&(o=!0)),T&&(x?(i=i.add(x),a=y?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:i,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,m)=>function(x,C){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn(20277,{Rt:T})}};return y(x)-y(C)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new zm(this.query,e.tu,a,i,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vr(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new lU(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new oU(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Vr();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const x5="SyncEngine";class lY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cY{constructor(e){this.key=e,this.hu=!1}}class uY{constructor(e,n,r,s,a,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Zh(o=>SM(o),k2),this.Iu=new Map,this.Eu=new Set,this.du=new xa(Bn.comparator),this.Au=new Map,this.Ru=new s5,this.Vu={},this.mu=new Map,this.fu=Vm.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AY(t,e,n=!0){const r=hU(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await cU(r,e,n,!0),s}async function dY(t,e){const n=hU(t);await cU(n,e,!0,!1)}async function cU(t,e,n,r){const s=await FW(t.localStore,mA(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await fY(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&tU(t.remoteStore,s),o}async function fY(t,e,n,r,s){t.pu=(m,p,x)=>async function(y,T,I,F){let M=T.view.ru(I);M.Cs&&(M=await MI(y.localStore,T.query,!1).then(({documents:E})=>T.view.ru(E,M)));const O=F&&F.targetChanges.get(T.targetId),Q=F&&F.targetMismatches.get(T.targetId)!=null,j=T.view.applyChanges(M,y.isPrimaryClient,O,Q);return KI(y,T.targetId,j.au),j.snapshot}(t,m,p,x);const a=await MI(t.localStore,e,!0),i=new oY(e,a.Qs),o=i.ru(a.documents),l=nv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);KI(t,n,u.au);const d=new lY(e,n,i);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function hY(t,e,n){const r=or(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(i=>!k2(i,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await XE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&l5(r.remoteStore,s.targetId),eS(r,s.targetId)}).catch(sp)):(eS(r,s.targetId),await XE(r.localStore,s.targetId,!0))}async function mY(t,e){const n=or(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),l5(n.remoteStore,r.targetId))}async function pY(t,e,n){const r=_Y(t);try{const s=await function(i,o){const l=or(i),u=Tn.now(),d=o.reduce((x,C)=>x.add(C.key),Vr());let m,p;return l.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=id(),y=Vr();return l.Ns.getEntries(x,d).next(T=>{C=T,C.forEach((I,F)=>{F.isValidDocument()||(y=y.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(x,C)).next(T=>{m=T;const I=[];for(const F of o){const M=I$(F,m.get(F.key).overlayedDocument);M!=null&&I.push(new zf(F.key,M,xM(M.value.mapValue),vl.exists(!0)))}return l.mutationQueue.addMutationBatch(x,u,I,o)}).next(T=>{p=T;const I=T.applyToLocalDocumentSet(m,y);return l.documentOverlayCache.saveOverlays(x,T.batchId,I)})}).then(()=>({batchId:p.batchId,changes:BM(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new xa(Hr)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(r,s.batchId,n),await sv(r,s.changes),await U2(r.remoteStore)}catch(s){const a=f5(s,"Failed to persist write");n.reject(a)}}async function uU(t,e){const n=or(t);try{const r=await BW(n.localStore,e);e.targetChanges.forEach((s,a)=>{const i=n.Au.get(a);i&&(ps(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?ps(i.hu,14607):s.removedDocuments.size>0&&(ps(i.hu,42227),i.hu=!1))}),await sv(n,r,e)}catch(r){await sp(r)}}function qI(t,e,n){const r=or(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=or(i);l.onlineState=o;let u=!1;l.queries.forEach((d,m)=>{for(const p of m.Sa)p.va(o)&&(u=!0)}),u&&p5(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gY(t,e,n){const r=or(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let i=new xa(Bn.comparator);i=i.insert(a,zo.newNoDocument(a,sr.min()));const o=Vr().add(a),l=new R2(sr.min(),new Map,new xa(Hr),i,o);await uU(r,l),r.du=r.du.remove(a),r.Au.delete(e),v5(r)}else await XE(r.localStore,e,!1).then(()=>eS(r,e,n)).catch(sp)}async function xY(t,e){const n=or(t),r=e.batch.batchId;try{const s=await NW(n.localStore,e);dU(n,r,null),AU(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sv(n,s)}catch(s){await sp(s)}}async function vY(t,e,n){const r=or(t);try{const s=await function(i,o){const l=or(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(m=>(ps(m!==null,37113),d=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);dU(r,e,n),AU(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sv(r,s)}catch(s){await sp(s)}}function AU(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function dU(t,e,n){const r=or(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function eS(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||fU(t,r)})}function fU(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(l5(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),v5(t))}function KI(t,e,n){for(const r of n)r instanceof oU?(t.Ru.addReference(r.key,e),yY(t,r)):r instanceof lU?(hn(x5,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||fU(t,r.key)):Wn(19791,{wu:r})}function yY(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(hn(x5,"New document in limbo: "+n),t.Eu.add(r),v5(t))}function v5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Bn(Hs.fromString(e)),r=t.fu.next();t.Au.set(r,new cY(n)),t.du=t.du.insert(n,r),tU(t.remoteStore,new of(mA(B2(n.path)),r,"TargetPurposeLimboResolution",S2.ce))}}async function sv(t,e,n){const r=or(t),s=[],a=[],i=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{i.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){s.push(u);const m=i5.As(l.targetId,u);a.push(m)}}))}),await Promise.all(i),r.Pu.H_(s),await async function(l,u){const d=or(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Lt.forEach(u,p=>Lt.forEach(p.Es,x=>d.persistence.referenceDelegate.addReference(m,p.targetId,x)).next(()=>Lt.forEach(p.ds,x=>d.persistence.referenceDelegate.removeReference(m,p.targetId,x)))))}catch(m){if(!ap(m))throw m;hn(o5,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const x=d.Ms.get(p),C=x.snapshotVersion,y=x.withLastLimboFreeSnapshotVersion(C);d.Ms=d.Ms.insert(p,y)}}}(r.localStore,a))}async function wY(t,e){const n=or(t);if(!n.currentUser.isEqual(e)){hn(x5,"User change. New user:",e.toKey());const r=await XM(n.localStore,e);n.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new on(St.CANCELLED,i))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sv(n,r.Ls)}}function bY(t,e){const n=or(t),r=n.Au.get(e);if(r&&r.hu)return Vr().add(r.key);{let s=Vr();const a=n.Iu.get(e);if(!a)return s;for(const i of a){const o=n.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function hU(t){const e=or(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gY.bind(null,e),e.Pu.H_=aY.bind(null,e.eventManager),e.Pu.yu=iY.bind(null,e.eventManager),e}function _Y(t){const e=or(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vY.bind(null,e),e}class ww{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=P2(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return TW(this.persistence,new CW,e.initialUser,this.serializer)}Cu(e){return new YM(a5.mi,this.serializer)}Du(e){return new LW}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ww.provider={build:()=>new ww};class CY extends ww{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ps(this.persistence.referenceDelegate instanceof vw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cW(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vl.withCacheSize(this.cacheSizeBytes):Vl.DEFAULT;return new YM(r=>vw.mi(r,n),this.serializer)}}class tS{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wY.bind(null,this.syncEngine),await nY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sY}()}createDatastore(e){const n=P2(e.databaseInfo.databaseId),r=function(a){return new OW(a)}(e.databaseInfo);return function(a,i,o,l){return new VW(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,i,o){return new GW(r,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>qI(this.syncEngine,n,0),function(){return jI.v()?new jI:new RW}())}createSyncEngine(e,n){return function(s,a,i,o,l,u,d){const m=new uY(s,a,i,o,l,u);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=or(s);hn(jh,"RemoteStore shutting down."),a.Ea.add(5),await rv(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}tS.provider={build:()=>new tS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ad("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="FirestoreClient";class EY{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=jo.UNAUTHENTICATED,this.clientId=$T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async i=>{hn(Lf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(hn(Lf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new JA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=f5(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function oC(t,e){t.asyncQueue.verifyOperationInProgress(),hn(Lf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XM(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $I(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SY(t);hn(Lf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HI(e.remoteStore,s)),t._onlineComponents=e}async function SY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){hn(Lf,"Using user provided OfflineComponentProvider");try{await oC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===St.FAILED_PRECONDITION||s.code===St.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Um("Error using user provided cache. Falling back to memory cache: "+n),await oC(t,new ww)}}else hn(Lf,"Using default OfflineComponentProvider"),await oC(t,new CY(void 0));return t._offlineComponents}async function mU(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(hn(Lf,"Using user provided OnlineComponentProvider"),await $I(t,t._uninitializedComponentsProvider._online)):(hn(Lf,"Using default OnlineComponentProvider"),await $I(t,new tS))),t._onlineComponents}function TY(t){return mU(t).then(e=>e.syncEngine)}async function bw(t){const e=await mU(t),n=e.eventManager;return n.onListen=AY.bind(null,e.syncEngine),n.onUnlisten=hY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mY.bind(null,e.syncEngine),n}function NY(t,e,n={}){const r=new JA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new y5({next:p=>{d.Nu(),i.enqueueAndForget(()=>m5(a,m));const x=p.docs.has(o);!x&&p.fromCache?u.reject(new on(St.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&l&&l.source==="server"?u.reject(new on(St.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new g5(B2(o.path),d,{includeMetadataChanges:!0,qa:!0});return h5(a,m)}(await bw(t),t.asyncQueue,e,n,r)),r.promise}function BY(t,e,n={}){const r=new JA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new y5({next:p=>{d.Nu(),i.enqueueAndForget(()=>m5(a,m)),p.fromCache&&l.source==="server"?u.reject(new on(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new g5(o,d,{includeMetadataChanges:!0,qa:!0});return h5(a,m)}(await bw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU="firestore.googleapis.com",YI=!0;class XI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new on(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gU,this.ssl=YI}else this.host=e.host,this.ssl=e.ssl??YI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oW)throw new on(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pU(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new on(St.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class O2{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new on(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new on(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LK;switch(r.type){case"firstParty":return new UK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new on(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=WI.get(n);r&&(hn("ComponentProvider","Removing Datastore"),WI.delete(n),r.terminate())}(this),Promise.resolve()}}function kY(t,e,n,r={}){var u;t=xl(t,O2);const s=Xh(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(DT(`https://${o}`),LT("Firestore",!0)),a.host!==gU&&a.host!==o&&Um("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:r};if(!Tf(l,i)&&(t._setSettings(l),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=jo.MOCK_USER;else{d=zV(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new on(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new jo(p)}t._authCredentials=new RK(new iM(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hd(this.firestore,e,this._query)}}class La{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new La(this.firestore,e,this._key)}toJSON(){return{type:La._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ev(n,La._jsonSchema))return new La(e,r||null,new Bn(Hs.fromString(n.referencePath)))}}La._jsonSchemaVersion="firestore/documentReference/1.0",La._jsonSchema={type:pi("string",La._jsonSchemaVersion),referencePath:pi("string")};class vf extends hd{constructor(e,n,r){super(e,n,B2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new La(this.firestore,null,new Bn(e))}withConverter(e){return new vf(this.firestore,e,this._path)}}function zt(t,e,...n){if(t=ia(t),oM("collection","path",e),t instanceof O2){const r=Hs.fromString(e,...n);return uI(r),new vf(t,null,r)}{if(!(t instanceof La||t instanceof vf))throw new on(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hs.fromString(e,...n));return uI(r),new vf(t.firestore,null,r)}}function Mn(t,e,...n){if(t=ia(t),arguments.length===1&&(e=$T.newId()),oM("doc","path",e),t instanceof O2){const r=Hs.fromString(e,...n);return cI(r),new La(t,null,new Bn(r))}{if(!(t instanceof La||t instanceof vf))throw new on(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hs.fromString(e,...n));return cI(r),new La(t.firestore,t instanceof vf?t.converter:null,new Bn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="AsyncQueue";class ZI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZM(this,"async_queue_retry"),this._c=()=>{const r=iC();r&&hn(JI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=iC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=iC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new JA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ap(e))throw e;hn(JI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ad("INTERNAL UNHANDLED ERROR: ",e3(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=d5.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Wn(47125,{Pc:e3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function e3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class bA extends O2{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ZI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZI(e),this._firestoreClient=void 0,await e}}}function xU(t,e){const n=typeof t=="object"?t:UT(),r=typeof t=="string"?t:fw,s=y2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=AP("firestore");a&&kY(s,...a)}return s}function av(t){if(t._terminated)throw new on(St.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IY(t),t._firestoreClient}function IY(t){var r,s,a;const e=t._freezeSettings(),n=function(o,l,u,d){return new n$(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pU(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new EY(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jc(yo.fromBase64String(e))}catch(n){throw new on(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jc(yo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ev(e,Jc._jsonSchema))return Jc.fromBase64String(e.bytes)}}Jc._jsonSchemaVersion="firestore/bytes/1.0",Jc._jsonSchema={type:pi("string",Jc._jsonSchemaVersion),bytes:pi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new on(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new go(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new on(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new on(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Hr(this._lat,e._lat)||Hr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gA._jsonSchemaVersion}}static fromJSON(e){if(ev(e,gA._jsonSchema))return new gA(e.latitude,e.longitude)}}gA._jsonSchemaVersion="firestore/geoPoint/1.0",gA._jsonSchema={type:pi("string",gA._jsonSchemaVersion),latitude:pi("number"),longitude:pi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ev(e,xA._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xA(e.vectorValues);throw new on(St.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xA._jsonSchemaVersion="firestore/vectorValue/1.0",xA._jsonSchema={type:pi("string",xA._jsonSchemaVersion),vectorValues:pi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY=/^__.*__$/;class DY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zf(e,this.data,this.fieldMask,n,this.fieldTransforms):new tv(e,this.data,n,this.fieldTransforms)}}class vU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zf(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn(40011,{Ac:t})}}class j2{constructor(e,n,r,s,a,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new j2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _w(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yU(this.Ac)&&FY.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||P2(e)}Cc(e,n,r,s=!1){return new j2({Ac:e,methodName:n,Dc:r,path:go.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lv(t){const e=t._freezeSettings(),n=P2(t._databaseId);return new LY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w5(t,e,n,r,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);C5("Data must be an object, but it was:",i,r);const o=_U(r,i);let l,u;if(a.merge)l=new wc(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const m of a.mergeFields){const p=nS(e,m,n);if(!i.contains(p))throw new on(St.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);EU(d,p)||d.push(p)}l=new wc(d),u=i.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=i.fieldTransforms;return new DY(new Gl(o),l,u)}class Q2 extends ov{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q2}}function RY(t,e,n){return new j2({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class b5 extends ov{_toFieldTransform(e){return new PM(e.path,new gx)}isEqual(e){return e instanceof b5}}class _5 extends ov{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RY(this,e,!0),r=this.vc.map(a=>lp(a,n)),s=new Hm(r);return new PM(e.path,s)}isEqual(e){return e instanceof _5&&Tf(this.vc,e.vc)}}function wU(t,e,n,r){const s=t.Cc(1,e,n);C5("Data must be an object, but it was:",s,r);const a=[],i=Gl.empty();Vf(r,(l,u)=>{const d=E5(e,l,n);u=ia(u);const m=s.yc(d);if(u instanceof Q2)a.push(d);else{const p=lp(u,m);p!=null&&(a.push(d),i.set(d,p))}});const o=new wc(a);return new vU(i,o,s.fieldTransforms)}function bU(t,e,n,r,s,a){const i=t.Cc(1,e,n),o=[nS(e,r,n)],l=[s];if(a.length%2!=0)throw new on(St.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)o.push(nS(e,a[p])),l.push(a[p+1]);const u=[],d=Gl.empty();for(let p=o.length-1;p>=0;--p)if(!EU(u,o[p])){const x=o[p];let C=l[p];C=ia(C);const y=i.yc(x);if(C instanceof Q2)u.push(x);else{const T=lp(C,y);T!=null&&(u.push(x),d.set(x,T))}}const m=new wc(u);return new vU(d,m,i.fieldTransforms)}function PY(t,e,n,r=!1){return lp(n,t.Cc(r?4:3,e))}function lp(t,e){if(CU(t=ia(t)))return C5("Unsupported field value:",e,t),_U(t,e);if(t instanceof ov)return function(r,s){if(!yU(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let i=0;for(const o of r){let l=lp(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=ia(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Tn.fromDate(r);return{timestampValue:xw(s.serializer,a)}}if(r instanceof Tn){const a=new Tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xw(s.serializer,a)}}if(r instanceof gA)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jc)return{bytesValue:HM(s.serializer,r._byteString)};if(r instanceof La){const a=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:r5(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xA)return function(i,o){return{mapValue:{fields:{[pM]:{stringValue:gM},[hw]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return e5(o.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${E2(r)}`)}(t,e)}function _U(t,e){const n={};return uM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vf(t,(r,s)=>{const a=lp(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function CU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tn||t instanceof gA||t instanceof Jc||t instanceof La||t instanceof ov||t instanceof xA)}function C5(t,e,n){if(!CU(n)||!lM(n)){const r=E2(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function nS(t,e,n){if((e=ia(e))instanceof iv)return e._internalPath;if(typeof e=="string")return E5(t,e);throw _w("Field path arguments must be of type string or ",t,!1,void 0,n)}const MY=new RegExp("[~\\*/\\[\\]]");function E5(t,e,n){if(e.search(MY)>=0)throw _w(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iv(...e.split("."))._internalPath}catch{throw _w(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _w(t,e,n,r,s){const a=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new on(St.INVALID_ARGUMENT,o+t+l)}function EU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new La(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(H2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UY extends SU{data(){return super.data()}}function H2(t,e){return typeof e=="string"?E5(t,e):e instanceof iv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new on(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S5{}class T5 extends S5{}function mn(t,e,...n){let r=[];e instanceof S5&&r.push(e),r=r.concat(n),function(a){const i=a.filter(l=>l instanceof N5).length,o=a.filter(l=>l instanceof V2).length;if(i>1||i>0&&o>0)throw new on(St.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class V2 extends T5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new V2(e,n,r)}_apply(e){const n=this._parse(e);return NU(e._query,n),new hd(e.firestore,e.converter,qE(e._query,n))}_parse(e){const n=lv(e.firestore);return function(a,i,o,l,u,d,m){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new on(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){r3(m,d);const C=[];for(const y of m)C.push(n3(l,a,y));p={arrayValue:{values:C}}}else p=n3(l,a,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||r3(m,d),p=PY(o,i,m,d==="in"||d==="not-in");return mi.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cs(t,e,n){const r=e,s=H2("where",t);return V2._create(s,r,n)}class N5 extends S5{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new N5(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ru.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)NU(i,l),i=qE(i,l)}(e._query,n),new hd(e.firestore,e.converter,qE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B5 extends T5{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new B5(e,n)}_apply(e){const n=function(s,a,i){if(s.startAt!==null)throw new on(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new on(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new px(a,i)}(e._query,this._field,this._direction);return new hd(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new ip(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Dr(t,e="asc"){const n=e,r=H2("orderBy",t);return B5._create(r,n)}class k5 extends T5{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new k5(e,n,r)}_apply(e){return new hd(e.firestore,e.converter,pw(e._query,this._limit,this._limitType))}}function yf(t){return GK("limit",t),k5._create("limit",t,"F")}function n3(t,e,n){if(typeof(n=ia(n))=="string"){if(n==="")throw new on(St.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EM(e)&&n.indexOf("/")!==-1)throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Hs.fromString(n));if(!Bn.isDocumentKey(r))throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xI(t,new Bn(r))}if(n instanceof La)return xI(t,n._key);throw new on(St.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E2(n)}.`)}function r3(t,e){if(!Array.isArray(t)||t.length===0)throw new on(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NU(t,e){const n=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new on(St.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new on(St.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OY{convertValue(e,n="none"){switch(Ff(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $a(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(If(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Wn(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vf(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[hw].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>$a(i.doubleValue));return new xA(n)}convertGeoPoint(e){return new gA($a(e.latitude),$a(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=N2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fx(e));default:return null}}convertTimestamp(e){const n=kf(e);return new Tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Hs.fromString(e);ps($M(r),9688,{name:e});const s=new hx(r.get(1),r.get(3)),a=new Bn(r.popFirst(5));return s.isEqual(n)||ad(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sh extends SU{constructor(e,n,r,s,a,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(H2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new on(St.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sh._jsonSchema={type:pi("string",Sh._jsonSchemaVersion),bundleSource:pi("string","DocumentSnapshot"),bundleName:pi("string"),bundle:pi("string")};class jy extends Sh{data(e={}){return super.data(e)}}class Th{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jy(this._firestore,this._userDataWriter,r.key,r,new wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new on(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new jy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new wg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new jy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new wg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:jY(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new on(St.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Th._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$T.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){t=xl(t,La);const e=xl(t.firestore,bA);return NY(av(e),t._key).then(n=>BU(e,t,n))}Th._jsonSchemaVersion="firestore/querySnapshot/1.0",Th._jsonSchema={type:pi("string",Th._jsonSchemaVersion),bundleSource:pi("string","QuerySnapshot"),bundleName:pi("string"),bundle:pi("string")};class F5 extends OY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new La(this.firestore,null,n)}}function gi(t){t=xl(t,hd);const e=xl(t.firestore,bA),n=av(e),r=new F5(e);return TU(t._query),BY(n,t._query).then(s=>new Th(e,r,t,s))}function wo(t,e,n){t=xl(t,La);const r=xl(t.firestore,bA),s=I5(t.converter,e,n);return Av(r,[w5(lv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vl.none())])}function uv(t,e,n,...r){t=xl(t,La);const s=xl(t.firestore,bA),a=lv(s);let i;return i=typeof(e=ia(e))=="string"||e instanceof iv?bU(a,"updateDoc",t._key,e,n,r):wU(a,"updateDoc",t._key,e),Av(s,[i.toMutation(t._key,vl.exists(!0))])}function Yi(t){return Av(xl(t.firestore,bA),[new L2(t._key,vl.none())])}function na(t,e){const n=xl(t.firestore,bA),r=Mn(t),s=I5(t.converter,e);return Av(n,[w5(lv(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vl.exists(!1))]).then(()=>r)}function Un(t,...e){var l,u,d;t=ia(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||t3(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(t3(e[r])){const m=e[r];e[r]=(l=m.next)==null?void 0:l.bind(m),e[r+1]=(u=m.error)==null?void 0:u.bind(m),e[r+2]=(d=m.complete)==null?void 0:d.bind(m)}let a,i,o;if(t instanceof La)i=xl(t.firestore,bA),o=B2(t._key.path),a={next:m=>{e[r]&&e[r](BU(i,t,m))},error:e[r+1],complete:e[r+2]};else{const m=xl(t,hd);i=xl(m.firestore,bA),o=m._query;const p=new F5(i);a={next:x=>{e[r]&&e[r](new Th(i,p,m,x))},error:e[r+1],complete:e[r+2]},TU(t._query)}return function(p,x,C,y){const T=new y5(y),I=new g5(x,T,C);return p.asyncQueue.enqueueAndForget(async()=>h5(await bw(p),I)),()=>{T.Nu(),p.asyncQueue.enqueueAndForget(async()=>m5(await bw(p),I))}}(av(i),o,s,a)}function Av(t,e){return function(r,s){const a=new JA;return r.asyncQueue.enqueueAndForget(async()=>pY(await TY(r),s,a)),a.promise}(av(t),e)}function BU(t,e,n){const r=n.docs.get(e._key),s=new F5(t);return new Sh(t,s,e._key,r,new wg(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lv(e)}set(e,n,r){this._verifyNotCommitted();const s=lC(e,this._firestore),a=I5(s.converter,n,r),i=w5(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,vl.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=lC(e,this._firestore);let i;return i=typeof(n=ia(n))=="string"||n instanceof iv?bU(this._dataReader,"WriteBatch.update",a._key,n,r,s):wU(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(i.toMutation(a._key,vl.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=lC(e,this._firestore);return this._mutations=this._mutations.concat(new L2(n._key,vl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new on(St.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lC(t,e){if((t=ia(t)).firestore!==e)throw new on(St.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function HY(){return new b5("serverTimestamp")}function VY(...t){return new _5("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){return av(t=xl(t,bA)),new QY(t,e=>Av(t,e))}(function(e,n=!0){(function(s){rp=s})(tp),Mh(new Nf("firestore",(r,{instanceIdentifier:s,options:a})=>{const i=r.getProvider("app").getImmediate(),o=new bA(new PK(r.getProvider("auth-internal")),new OK(i,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new on(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hx(u.options.projectId,d)}(i,s),i);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),dA(aI,iI,e),dA(aI,iI,"esm2020")})();const zY={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},kU=MT(zY),dv=JP(kU),Sr=xU(kU),GY=Object.freeze(Object.defineProperty({__proto__:null,auth:dv,db:Sr},Symbol.toStringTag,{value:"Module"})),qY=async(t,e)=>{try{return(await gq(dv,t,e)).user}catch(n){throw console.error("Error en loginUser helper:",n),n}},cC=async()=>{try{await yq(dv)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},KY=async t=>{try{await pq(dv,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},IU=async t=>{try{const e=Mn(Sr,"usuarios",t),n=await cv(e);return n.exists()?{id:n.id,...n.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var tn=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(tn||{}),Or=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(Or||{}),gh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(gh||{});const $Y=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),vi="w-6 h-6",z2="w-24 h-24",L5=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),WY=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),YY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),XY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),bg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),_g=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),FU=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),JY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:z2,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),ZY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:z2,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),eX=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:z2,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),tX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:z2,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),nX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),I1=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),uC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),F1=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),AC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),rX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),sX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),aX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),iX=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),i3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),oX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),dC=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),lX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:vi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),cX=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:vi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),o3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:vi,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),uX=[{id:tn.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(JY,{})},{id:tn.PROFESORADO,label:"Profesorado",icon:c.jsx(ZY,{})},{id:tn.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(eX,{})},{id:tn.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(tX,{})}],AX={[tn.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(nX,{})},{name:"Administración",icon:c.jsx(iX,{})},{name:"Seguimiento Curricular",icon:c.jsx(cX,{})},{name:"Acompañamiento docente",icon:c.jsx(aX,{})},{name:"Análisis Taxonómico",icon:c.jsx(o3,{})},{name:"Interdisciplinario",icon:c.jsx(dC,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(s3,{})},{name:"Crear horarios",icon:c.jsx(uC,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(F1,{})},{name:"Inclusión",icon:c.jsx(i3,{})},{name:"Calendario Académico",icon:c.jsx(I1,{})},{name:"Muro de Anuncios",icon:c.jsx(bg,{})},{name:"Mensajería Interna",icon:c.jsx(_g,{})},{name:"Generador de Actas",icon:c.jsx(AC,{})}],[tn.PROFESORADO]:[{name:"Planificación",icon:c.jsx(a3,{})},{name:"Mis Acompañamientos",icon:c.jsx(oX,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(rX,{})},{name:"Análisis Taxonómico",icon:c.jsx(o3,{})},{name:"Interdisciplinario",icon:c.jsx(dC,{})},{name:"Inclusión",icon:c.jsx(i3,{})},{name:"Actividades Remotas",icon:c.jsx(sX,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(AC,{})},{name:"Evaluaciones Formativas",icon:c.jsx(F1,{})},{name:"Calendario Académico",icon:c.jsx(I1,{})},{name:"Muro de Anuncios",icon:c.jsx(bg,{})},{name:"Mensajería Interna",icon:c.jsx(_g,{})},{name:"Generador de Actas",icon:c.jsx(s3,{})}],[tn.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(F1,{})},{name:"Asistencia Dual",icon:c.jsx(uC,{})},{name:"Pañol",icon:c.jsx(lX,{})},{name:"Gestión de Empresas",icon:c.jsx($Y,{})},{name:"Calendario Académico",icon:c.jsx(I1,{})},{name:"Muro de Anuncios",icon:c.jsx(bg,{})},{name:"Mensajería Interna",icon:c.jsx(_g,{})},{name:"Generador de Actas",icon:c.jsx(AC,{})}],[tn.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(a3,{})},{name:"Evaluación Formativa",icon:c.jsx(F1,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(dC,{})},{name:"Asistencia a Empresa",icon:c.jsx(uC,{})},{name:"Calendario Académico",icon:c.jsx(I1,{})},{name:"Muro de Anuncios",icon:c.jsx(bg,{})},{name:"Mensajería Interna",icon:c.jsx(_g,{})}]},l3=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],D1=["Pendiente","En Proceso","Cumplida"],Cw=["1º Medio","2º Medio","3º Medio","4º Medio"],Cc=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],Ja=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],rS=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Qy=["Lunes","Martes","Miércoles","Jueves","Viernes"],sS=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],dX={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},sf={[Or.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Or.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Or.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Or.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},fX=Object.values(gh),fC=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],hC=["Vinculado","Desvinculado","En proceso","Empresa"],Nh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],hX=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],Ew=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],zg=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],DU=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],L1=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],mX=({onLoginAttempt:t,onForgotPasswordRequest:e,error:n})=>{const[r,s]=se.useState(""),[a,i]=se.useState(""),[o,l]=se.useState("login"),u=p=>{p.preventDefault(),t(r,a)},d=p=>{p.preventDefault(),e(r),l("forgot_sent")},m=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:r}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:p=>s(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:p=>i(p.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),n&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:n})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L5,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:m()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},mC=({trigger:t,children:e,onOpen:n})=>{const[r,s]=se.useState(!1),a=se.useRef(null),i=()=>{const l=!r;s(l),l&&n&&n()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return se.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:a,children:[c.jsx("div",{onClick:i,children:t}),r&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},c3="usuariosLiceo",pX=({user:t,onClose:e,onSave:n})=>{const[r,s]=se.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...r,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...r};try{const u=localStorage.getItem(c3);let d=u?JSON.parse(u):[];const m=d.findIndex(p=>p.id===t.id);m>-1?d[m]=l:d.push(l),localStorage.setItem(c3,JSON.stringify(d)),n(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:r.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:r.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},u3="usuariosLiceo",gX=({user:t,onClose:e,onSave:n})=>{const[r,s]=se.useState(""),[a,i]=se.useState(""),[o,l]=se.useState(null),u=d=>{if(d.preventDefault(),l(null),!r){l("La contraseña no puede estar en blanco.");return}if(r!==a){l("Las contraseñas no coinciden.");return}const m={...t,password:r};try{const p=localStorage.getItem(u3);let x=p?JSON.parse(p):[];const C=x.findIndex(y=>y.id===t.id);C>-1?x[C]=m:x.push(m),localStorage.setItem(u3,JSON.stringify(x)),n(m),e()}catch(p){console.error("Failed to save new password:",p),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:r,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},A3="anunciosMuro",d3="mensajesInternos",f3="lir-read-status",xX=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",n=String(e).split(" ").filter(r=>r).map(r=>r[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:n.substring(0,2)})},vX=({currentUser:t,onLogout:e,onNavigate:n,onUserUpdate:r,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=se.useState([]),[m,p]=se.useState([]),[x,C]=se.useState(!1),[y,T]=se.useState(!1),I=se.useCallback(()=>{try{const Q=localStorage.getItem(`${f3}-${t.id}`);return Q?JSON.parse(Q):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),F=se.useCallback(Q=>{try{localStorage.setItem(`${f3}-${t.id}`,JSON.stringify(Q))}catch(j){console.error("Failed to set read status:",j)}},[t.id]);se.useEffect(()=>{const Q=JSON.parse(localStorage.getItem(A3)||"[]"),j=I();d(Q.filter(S=>!j.announcements.includes(S.id)));const E=JSON.parse(localStorage.getItem(d3)||"[]");p(E.filter(S=>S.para===t.email).sort((S,k)=>new Date(k.fecha).getTime()-new Date(S.fecha).getTime()).slice(0,5))},[t.id,I,o]);const M=()=>{const Q=I(),j=JSON.parse(localStorage.getItem(A3)||"[]").map(E=>E.id);Q.announcements=j,F(Q),d([])},O=()=>{const Q=I(),E=JSON.parse(localStorage.getItem(d3)||"[]").filter(S=>S.para===t.email).map(S=>S.id);Q.messages=[...new Set([...Q.messages,...E])],F(Q),l()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(YY,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>n("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(XY,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(mC,{onOpen:M,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(bg,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(Q=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:Q.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:Q.mensaje})]},Q.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>n("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(mC,{onOpen:O,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(_g,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[m.slice(0,3).map(Q=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",Q.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:Q.asunto})]},Q.id)),m.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>n("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(mC,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(xX,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>C(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>T(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),a&&c.jsx("li",{children:c.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),x&&c.jsx(pX,{user:t,onClose:()=>C(!1),onSave:r}),y&&c.jsx(gX,{user:t,onClose:()=>T(!1),onSave:r})]})};var Ah={};const yX={apiKey:Ah.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:Ah.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:Ah.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:Ah.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:Ah.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:Ah.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:Ah.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},LU=Rk().length===0?MT(yX):Rk()[0],Ut=xU(LU),wX=JP(LU),fv="reemplazos_docentes",bX="usuarios",R5=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},_X=t=>{const e=t.data();return{id:t.id,...e}},CX=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Tn.fromDate(new Date),fechaActualizacion:Tn.fromDate(new Date)};return(await na(zt(Ut,fv),n)).id}catch(n){throw console.error("Error al guardar reemplazo:",n),new Error("No se pudo guardar el reemplazo")}},EX=async(t,e)=>{try{const n=Mn(Ut,fv,t),r=await cv(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await Yi(n)}catch(n){throw console.error("Error al eliminar reemplazo:",n),new Error("No se pudo eliminar el reemplazo")}},SX=(t,e,n=50)=>{try{const r=mn(zt(Ut,fv),cs("userId","==",t),Dr("diaAusencia","desc"),yf(n));return Un(r,s=>{const a=s.docs.map(R5);e(a)},s=>{console.error("Error en suscripción a reemplazos:",s),e([])})}catch(r){return console.error("Error al crear la suscripción de reemplazos:",r),()=>{}}},TX=t=>{try{const e=mn(zt(Ut,bX),cs("profile","==",tn.PROFESORADO));return Un(e,r=>{const s=r.docs.map(_X);t(s)},r=>{console.error("Error al obtener la lista de profesores:",r),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},NX=async t=>{try{const e=mn(zt(Ut,fv),cs("userId","==",t)),r=(await gi(e)).docs.map(R5),s=r.length,a=r.filter(o=>o.resultado==="Hora realizada").length,i=r.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},BX=async(t,e)=>{try{if(!e.trim())return[];const n=mn(zt(Ut,fv),cs("userId","==",t),Dr("diaAusencia","desc"),yf(100)),s=(await gi(n)).docs.map(R5),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(n){return console.error("Error en búsqueda de reemplazos:",n),[]}},kX=Array.from({length:12},(t,e)=>e+1),h3={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},IX=t=>{const[e,n]=se.useState([]),[r,s]=se.useState(!0),[a,i]=se.useState(null);se.useEffect(()=>t?SX(t,m=>{n(m),s(!1)}):void 0,[t]);const o=se.useCallback(async d=>{try{return i(null),await CX(d,t)}catch(m){throw i(m instanceof Error?m.message:"Error al guardar"),m}},[t]),l=se.useCallback(async d=>{try{i(null),await EX(d,t)}catch(m){throw i(m instanceof Error?m.message:"Error al eliminar"),m}},[t]),u=se.useCallback(async d=>{try{return i(null),d.trim()?await BX(t,d):e}catch(m){return i(m instanceof Error?m.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:r,error:a,save:o,remove:l,search:u}},FX=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0);se.useEffect(()=>TX(i=>{e(i),r(!1)}),[]);const s=se.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:n}},DX=({selectedBlocks:t,onChange:e,legend:n,disabled:r=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:n}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:kX.map(s=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${r?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:r,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),LX=({userId:t})=>{const[e,n]=se.useState(null),[r,s]=se.useState(!1),a=se.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await NX(t);n(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{s(!1)}},[t]);return se.useEffect(()=>{t&&a()},[t,a]),r?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},RX=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:n,save:r,remove:s,search:a,loading:i,error:o}=IX(e),{profesorNames:l,loading:u}=FX(),[d,m]=se.useState(h3),[p,x]=se.useState(""),[C,y]=se.useState([]),[T,I]=se.useState(null),[F,M]=se.useState(!1),[O,Q]=se.useState(!1);se.useEffect(()=>{(async()=>{if(!p.trim()){y(n);return}Q(!0);try{const R=await a(p);y(R)}catch(R){console.error("Error en búsqueda:",R),y(n)}finally{Q(!1)}})()},[n,p,a]);const j=se.useCallback(P=>{const{name:R,value:G}=P.target;m(q=>({...q,[R]:G}))},[]),E=se.useCallback(P=>{const R=parseInt(P.target.value,10);m(G=>{const q=G.bloquesAfectados,le=q.includes(R)?q.filter(ee=>ee!==R):[...q,R].sort((ee,oe)=>ee-oe);return{...G,bloquesAfectados:le}})},[]),S=se.useCallback(async P=>{P.preventDefault(),I(null),M(!0);const{docenteAusente:R,asignaturaAusente:G,curso:q,diaAusencia:le,bloquesAfectados:ee,docenteReemplazante:oe,asignaturaReemplazante:K}=d;if(!R||!G||!q||!le||!oe||!K||ee.length===0){I("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),M(!1);return}if(R===oe){I("El docente ausente y el reemplazante no pueden ser la misma persona."),M(!1);return}const ne=new Date(le),X=new Date;if(X.setHours(0,0,0,0),ne<X&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){M(!1);return}try{const ce=G.trim().toLowerCase()===K.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",V={...d,resultado:ce};await r(V),m(h3);const J=ce==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",re=document.createElement("div");re.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",re.textContent=J,document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},3e3)}catch(ce){console.error("Error al guardar reemplazo:",ce),I("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{M(!1)}},[d,r]),k=se.useCallback(async P=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await s(P)}catch(R){console.error("Error al eliminar reemplazo:",R),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),z="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(LX,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:j,className:z,disabled:F,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:j,className:z,disabled:F,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),Cc.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:j,className:z,disabled:F,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ja.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:j,className:z,disabled:F,required:!0})]}),c.jsx(DX,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:E,disabled:F})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:j,className:z,disabled:F,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:j,className:z,disabled:F,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),Cc.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(T||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:T||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:F||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[F&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),F?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:p,onChange:P=>x(P.target.value),className:`${z} md:w-1/2 pl-10`,disabled:O}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:O?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),p&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:O?"Buscando...":`${C.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:C.length>0?C.map(P=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(P.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[P.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[P.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:P.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:P.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>k(P.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:F,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},P.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:p?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),C.length>0&&!p&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",C.length," registros"]})]})]})},PX=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=zt(Sr,"reemplazos"),n=mn(e,Dr("fecha","desc"));return Un(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar reemplazos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},MX=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=zt(Sr,"acompanamientos"),n=mn(e,Dr("fecha","desc"));return Un(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar acompañamientos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},UX=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=zt(Sr,"calendar_events"),n=mn(e,Dr("date","asc"));return Un(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},nA=({title:t,value:e,description:n,isLoading:r=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),r?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]})]}),dh=({title:t,data:e,colorClass:n,valueFormatter:r=a=>String(a),isLoading:s=!1})=>{const a=se.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=se.useMemo(()=>Math.max(...a,1),[a]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:r(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},OX=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,a]=se.useState([]),[i,o]=se.useState(!0),[l,u]=se.useState(null);return se.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const m=3,p=()=>{d++,d>=m&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const x=PX(T=>{e(T),p()}),C=MX(T=>{r(T),p()}),y=UX(T=>{a(T),p()});return()=>{x(),C(),y()}}catch(x){console.error("❌ Error al configurar suscripciones del dashboard:",x),u(x instanceof Error?x.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:n,calendarEvents:s,loading:i,error:l}},jX=({currentUser:t})=>{var m,p;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(m=t==null?void 0:t.profile)==null?void 0:m.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((p=t==null?void 0:t.profile)==null?void 0:p.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:n,calendarEvents:r,loading:s,error:a}=OX(),[i,o]=se.useState(zg);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:n.length,calendarEvents:r.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),se.useEffect(()=>{try{const x=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(x?JSON.parse(x):zg)}catch(x){console.error("Error al leer rúbrica personalizada",x),o(zg)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),a)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=se.useMemo(()=>{const x=e.length;if(x===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const C=e.filter(Q=>Q.resultado==="Hora realizada").length,y=x-C,T=`${(C/x*100).toFixed(1)}%`,I=(Q,j)=>Q.reduce((E,S)=>{const k=S[j];return typeof k=="string"&&(E[k]=(E[k]||0)+1),E},{}),F=I(e,"docenteAusente"),M=I(e,"docenteReemplazante"),O=I(e,"curso");return{totalInasistencias:x,horasRealizadas:C,horasCubiertas:y,tasaCobertura:T,inasistenciasPorDocente:Object.entries(F).map(([Q,j])=>({label:Q,value:j})),reemplazosPorDocente:Object.entries(M).map(([Q,j])=>({label:Q,value:j})),inasistenciasPorCurso:Object.entries(O).map(([Q,j])=>({label:Q,value:j})),distribucionResultados:[{label:"Hora Realizada",value:C},{label:"Hora Cubierta",value:y}]}},[e]),u=se.useMemo(()=>{const x=n.length;if(x===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const C=new Map;i.forEach(j=>{j.criteria.forEach(E=>{C.set(E.name,j.domain)})});let y=0,T=0;const I={},F={};n.forEach(j=>{I[j.docente]||(I[j.docente]={total:0,count:0}),Object.entries(j.rubricaResultados).forEach(([E,S])=>{y+=S,T++,I[j.docente].total+=S,I[j.docente].count++;const k=C.get(E);k&&(F[k]||(F[k]={total:0,count:0}),F[k].total+=S,F[k].count++)})});const M=T>0?(y/T).toFixed(2):"N/A",O=Object.entries(I).map(([j,E])=>({label:j,value:E.count>0?(E.total/E.count).toFixed(2):0})),Q=Object.entries(F).map(([j,E])=>({label:j,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:x,promedioGeneral:M,desempenoPorDocente:O,desempenoPorDominio:Q}},[n,i]),d=se.useMemo(()=>{const x={[Or.EVALUACION]:0,[Or.ACTO]:0,[Or.ACTIVIDAD_FOCALIZADA]:0,[Or.SALIDA_PEDAGOGICA]:0};for(const y of r)x.hasOwnProperty(y.type)&&x[y.type]++;const C=Object.entries(x).map(([y,T])=>({label:sf[y].label,value:T}));return{totalEvaluaciones:x[Or.EVALUACION],totalActos:x[Or.ACTO],totalActividadesFocalizadas:x[Or.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:x[Or.SALIDA_PEDAGOGICA],distribucionEventos:C}},[r]);return s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&r.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(nA,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),c.jsx(nA,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),c.jsx(nA,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),c.jsx(nA,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(dh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),c.jsx(dh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),c.jsx(dh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),c.jsx(dh,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(nA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:s}),c.jsx(nA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(dh,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:x=>Number(x).toFixed(2),isLoading:s}),c.jsx(dh,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:x=>Number(x).toFixed(2),isLoading:s})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(nA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),c.jsx(nA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:s}),c.jsx(nA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),c.jsx(nA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(dh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.filter(x=>new Date(x.date)>=new Date).slice(0,5).map((x,C)=>{var y,T;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:x.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(x.date).toLocaleDateString("es-CL")}),x.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",x.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=sf[x.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((T=sf[x.type])==null?void 0:T.label)||x.type})]})},x.id||C)}),r.filter(x=>new Date(x.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+n.length+r.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(x=>x.docenteAusente),...n.map(x=>x.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(x=>x.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var m3;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(m3||(m3={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p3;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(p3||(p3={}));var g3;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(g3||(g3={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=["user","model","function","system"];var v3;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(v3||(v3={}));var y3;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(y3||(y3={}));var w3;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(w3||(w3={}));var b3;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(b3||(b3={}));var Gg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Gg||(Gg={}));var _3;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(_3||(_3={}));var C3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(C3||(C3={}));var E3;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(E3||(E3={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class R0 extends qo{constructor(e,n){super(e),this.response=n}}class RU extends qo{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class wf extends qo{}class PU extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX="https://generativelanguage.googleapis.com",HX="v1beta",VX="0.24.1",zX="genai-js";var Qh;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Qh||(Qh={}));class GX{constructor(e,n,r,s,a){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||HX;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||QX}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function qX(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${zX}/${VX}`),e.join(" ")}async function KX(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",qX(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new wf(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,a]of r.entries()){if(s==="x-goog-api-key")throw new wf(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new wf(`Header name ${s} can only be set using the apiClient field`);n.append(s,a)}}return n}async function $X(t,e,n,r,s,a){const i=new GX(t,e,n,r,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},JX(a)),{method:"POST",headers:await KX(i),body:s})}}async function hv(t,e,n,r,s,a={},i=fetch){const{url:o,fetchOptions:l}=await $X(t,e,n,r,s,a);return WX(o,l,i)}async function WX(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){YX(s,t)}return r.ok||await XX(r,t),r}function YX(t,e){let n=t;throw n.name==="AbortError"?(n=new PU(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof RU||t instanceof wf||(n=new qo(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function XX(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new RU(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function JX(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new R0(`${Yd(t)}`,t);return ZX(t)}else if(t.promptFeedback)throw new R0(`Text not available. ${Yd(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new R0(`${Yd(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),S3(t)[0]}else if(t.promptFeedback)throw new R0(`Function call not available. ${Yd(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hy(t.candidates[0]))throw new R0(`${Yd(t)}`,t);return S3(t)}else if(t.promptFeedback)throw new R0(`Function call not available. ${Yd(t)}`,t)},t}function ZX(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function S3(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const i of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const eJ=[Gg.RECITATION,Gg.SAFETY,Gg.LANGUAGE];function Hy(t){return!!t.finishReason&&eJ.includes(t.finishReason)}function Yd(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];Hy(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function vx(t){return this instanceof vx?(this.v=t,this):new vx(t)}function tJ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(p){r[p]&&(s[p]=function(x){return new Promise(function(C,y){a.push([p,x,C,y])>1||o(p,x)})})}function o(p,x){try{l(r[p](x))}catch(C){m(a[0][3],C)}}function l(p){p.value instanceof vx?Promise.resolve(p.value.v).then(u,d):m(a[0][2],p)}function u(p){o("next",p)}function d(p){o("throw",p)}function m(p,x){p(x),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function nJ(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=aJ(e),[r,s]=n.tee();return{stream:sJ(r),response:rJ(s)}}async function rJ(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return P5(iJ(e));e.push(s)}}function sJ(t){return tJ(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield vx(n.read());if(s)break;yield yield vx(P5(r))}})}function aJ(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){r.error(new qo("Failed to parse stream"));return}r.close();return}s+=i;let l=s.match(T3),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new qo(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),s=s.substring(l[0].length),l=s.match(T3)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new PU("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function iJ(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let s=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=a.citationMetadata,n.candidates[s].groundingMetadata=a.groundingMetadata,n.candidates[s].finishReason=a.finishReason,n.candidates[s].finishMessage=a.finishMessage,n.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[s].content||(n.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),n.candidates[s].content.parts.push(i)}s++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e,n,r){const s=await hv(e,Qh.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return nJ(s)}async function UU(t,e,n,r){const a=await(await hv(e,Qh.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:P5(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function yx(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return oJ(e)}function oJ(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),s=!0):(e.parts.push(a),r=!0);if(r&&s)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new qo("No content is provided for sending chat message.");return r?e:n}function lJ(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new wf("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=yx(t);r.contents=[a]}return{generateContentRequest:r}}function N3(t){let e;return t.contents?e=t:e={contents:[yx(t)]},t.systemInstruction&&(e.systemInstruction=OU(t.systemInstruction)),e}function cJ(t){return typeof t=="string"||Array.isArray(t)?{content:yx(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],uJ={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function AJ(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new qo(`First content should be with role 'user', got ${r}`);if(!x3.includes(r))throw new qo(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(x3)}`);if(!Array.isArray(s))throw new qo("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new qo("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of B3)l in o&&(a[l]+=1);const i=uJ[r];for(const o of B3)if(!i.includes(o)&&a[o]>0)throw new qo(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function k3(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="SILENT_ERROR";class dJ{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(AJ(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const u=yx(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),n);let p;return this._sendPromise=this._sendPromise.then(()=>UU(this._apiKey,this.model,d,m)).then(x=>{var C;if(k3(x.response)){this._history.push(u);const y=Object.assign({parts:[],role:"model"},(C=x.response.candidates)===null||C===void 0?void 0:C[0].content);this._history.push(y)}else{const y=Yd(x.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}p=x}).catch(x=>{throw this._sendPromise=Promise.resolve(),x}),await this._sendPromise,p}async sendMessageStream(e,n={}){var r,s,a,i,o,l;await this._sendPromise;const u=yx(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),n),p=MU(this._apiKey,this.model,d,m);return this._sendPromise=this._sendPromise.then(()=>p).catch(x=>{throw new Error(I3)}).then(x=>x.response).then(x=>{if(k3(x)){this._history.push(u);const C=Object.assign({},x.candidates[0].content);C.role||(C.role="model"),this._history.push(C)}else{const C=Yd(x);C&&console.warn(`sendMessageStream() was unsuccessful. ${C}. Inspect response object for details.`)}}).catch(x=>{x.message!==I3&&console.error(x)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fJ(t,e,n,r){return(await hv(e,Qh.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hJ(t,e,n,r){return(await hv(e,Qh.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function mJ(t,e,n,r){const s=n.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await hv(e,Qh.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=OU(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=N3(e),a=Object.assign(Object.assign({},this._requestOptions),n);return UU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}async generateContentStream(e,n={}){var r;const s=N3(e),a=Object.assign(Object.assign({},this._requestOptions),n);return MU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}startChat(e){var n;return new dJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=lJ(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return fJ(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=cJ(e),s=Object.assign(Object.assign({},this._requestOptions),n);return hJ(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return mJ(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new F3(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new wf("Cached content must contain a `name` field.");if(!e.model)throw new wf("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(n!=null&&n[i]&&e[i]&&(n==null?void 0:n[i])!==e[i]){if(i==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new wf(`Different value for "${i}" specified in modelParams (${n[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new F3(this.apiKey,a,r)}}const M5="horario_asignaciones",jU="horarios_generados",pJ="usuarios",QU=t=>{const e=t.data();return{id:t.id,...e}},gJ=t=>{const e=mn(zt(Ut,M5));return Un(e,r=>{const s=r.docs.map(a=>QU(a));t(s)},r=>{console.error("Error al suscribirse a las asignaciones:",r),t([])})},xJ=async t=>{try{return(await na(zt(Ut,M5),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},vJ=async t=>{try{const e=Mn(Ut,M5,t);await Yi(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},D3=async t=>{try{const e=Mn(Ut,jU,"global");await wo(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},yJ=t=>{const e=Mn(Ut,jU,"global");return Un(e,r=>{r.exists()?t(r.data().data||{}):t({})},r=>{console.error("Error al suscribirse a los horarios:",r),t({})})},wJ=t=>{const e=mn(zt(Ut,pJ),cs("profile","==",tn.PROFESORADO));return Un(e,r=>{const s=r.docs.map(a=>QU(a));t(s)},r=>{console.error("Error al suscribirse a los profesores:",r),t([])})},bJ=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ja.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:Qy.map(e=>c.jsxs(wt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+Ja.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),sS.map(({bloque:n,inicio:r,fin:s})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:n}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${r} - ${s}`}),Ja.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[n];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${n}`)})]},`${e}-${n}`))]},e))})]})}),_J=()=>{const[t,e]=se.useState([]),[n,r]=se.useState({curso:"",asignatura:"",profesor:""}),[s,a]=se.useState([]),[i,o]=se.useState({}),[l,u]=se.useState(Ja[0]),[d,m]=se.useState(!1),[p,x]=se.useState(!0),[C,y]=se.useState(null),[T,I]=se.useState(null),[F,M]=se.useState(null),[O,Q]=se.useState({asignatura:"",profesor:""}),[j,E]=se.useState("edicion"),[S,k]=se.useState("");se.useEffect(()=>{x(!0);const K=gJ(e),ne=yJ(o),X=wJ(ce=>{const V=ce.map(J=>J.nombreCompleto).sort();a(V),x(!1)});return()=>{K(),ne(),X()}},[]);const z=async K=>{if(K.preventDefault(),y(null),!n.curso||!n.asignatura||!n.profesor){y("Todos los campos de la asignación son obligatorios.");return}try{await xJ({curso:n.curso,asignatura:n.asignatura,profesor:n.profesor}),r({curso:"",asignatura:"",profesor:""})}catch(ne){y(ne instanceof Error?ne.message:"Error al guardar la asignación.")}},P=async K=>{try{await vJ(K)}catch(ne){y(ne instanceof Error?ne.message:"Error al eliminar la asignación.")}},R=async()=>{if(t.length===0){y("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}m(!0),y(null),I(null);try{const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=new xi(K),X=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Qy.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(sS,null,2)}
                - Cursos del liceo: ${Ja.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(dX,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${S||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,ie=(await(await ne.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),fe=JSON.parse(ie);await D3(fe),I("¡Horario generado y guardado con éxito!")}catch(K){console.error("Error al generar horario con IA:",K),y("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{m(!1)}},G=(K,ne,X)=>{M({dia:K,bloque:ne}),Q({asignatura:(X==null?void 0:X.asignatura)||"",profesor:(X==null?void 0:X.profesor)||""})},q=async()=>{if(!F)return;const{dia:K,bloque:ne}=F,X=JSON.parse(JSON.stringify(i));X[l]||(X[l]={}),X[l][K]||(X[l][K]={}),X[l][K][ne]={asignatura:O.asignatura||null,profesor:O.profesor||null};try{await D3(X),M(null)}catch(ce){y(ce instanceof Error?ce.message:"Error al guardar la edición.")}},le="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=()=>{const K=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Qy.map(ne=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:ne},ne))]})}),c.jsx("tbody",{children:sS.map(({bloque:ne,inicio:X,fin:ce})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:ne}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${X} - ${ce}`})]}),Qy.map(V=>{var ie;const J=(F==null?void 0:F.dia)===V&&(F==null?void 0:F.bloque)===ne,re=(ie=K[V])==null?void 0:ie[ne];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!J&&G(V,ne,re),children:J?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:O.asignatura,onChange:fe=>Q(Se=>({...Se,asignatura:fe.target.value})),className:le+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:O.profesor,onChange:fe=>Q(Se=>({...Se,profesor:fe.target.value})),className:le+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>M(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:q,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):re!=null&&re.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:re.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",re.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${V}-${ne}`)})]},ne))})]})})},oe=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:n.curso,onChange:K=>r(ne=>({...ne,curso:K.target.value})),className:le,children:[c.jsx("option",{value:"",children:"Seleccione"}),Ja.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:n.asignatura,onChange:K=>r(ne=>({...ne,asignatura:K.target.value})),className:le,children:[c.jsx("option",{value:"",children:"Seleccione"}),Cc.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:n.profesor,onChange:K=>r(ne=>({...ne,profesor:K.target.value})),className:le,children:[c.jsx("option",{value:"",children:"Seleccione"}),s.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(K=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[K.curso," - ",K.asignatura," - ",c.jsx("strong",{children:K.profesor})]}),c.jsx("button",{onClick:()=>P(K.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},K.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:S,onChange:K=>k(K.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:le})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:R,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),C&&c.jsx("p",{className:"text-red-600",children:C}),T&&c.jsx("p",{className:"text-green-600",children:T})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:K=>u(K.target.value),className:le+" md:w-1/3",children:Ja.map(K=>c.jsx("option",{value:K,children:K},K))})]}),Object.keys(i).length>0?ee():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return p?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>E("edicion"),className:`${j==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>E("global"),className:`${j==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),j==="edicion"?oe():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(bJ,{horarios:i})]})]})},G2="acciones",CJ=async()=>{try{const t=mn(zt(Sr,G2),Dr("fechaRegistro","desc"));return(await gi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},EJ=async t=>{try{return{id:(await na(zt(Sr,G2),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},L3=async(t,e)=>{try{const n=Mn(Sr,G2,t);await uv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acción:",n,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},SJ=async t=>{try{const e=Mn(Sr,G2,t);await Yi(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},R3={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},TJ={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},NJ=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!1),[s,a]=se.useState(null),[i,o]=se.useState(R3),[l,u]=se.useState(null),[d,m]=se.useState(""),[p,x]=se.useState(""),[C,y]=se.useState(""),T=se.useCallback(async()=>{r(!0);try{const k=await CJ();e(k),a(null)}catch(k){console.error("Error al cargar acciones:",k),a("No se pudieron cargar las acciones pedagógicas.")}finally{r(!1)}},[]);se.useEffect(()=>{T()},[T]);const I=se.useCallback(k=>{const{name:z,value:P}=k.target;o(R=>({...R,[z]:P}))},[]),F=se.useCallback(()=>{o(R3),u(null),a(null)},[]),M=se.useCallback(async k=>{if(k.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){a("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{l?await L3(l,i):await EJ(i),await T(),F()}catch(z){console.error("Error al guardar acción:",z),a("Error al guardar la acción.")}},[i,l,T,F]),O=se.useCallback(k=>{window.scrollTo({top:0,behavior:"smooth"}),u(k.id),o({...k,enlaceDocumento:k.enlaceDocumento||""})},[]),Q=se.useCallback(async k=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await SJ(k),await T()}catch(z){console.error("Error al eliminar acción:",z),a("No se pudo eliminar la acción.")}},[T]),j=se.useCallback(async k=>{try{const z=t.find(P=>P.id===k);if(z){const R=(D1.indexOf(z.estado)+1)%D1.length,G=D1[R];await L3(k,{estado:G}),await T()}}catch(z){console.error("Error al cambiar estado:",z),a("No se pudo cambiar el estado de la acción.")}},[t,T]),E=se.useMemo(()=>t.filter(k=>{const z=d===""||k.responsable.toLowerCase().includes(d.toLowerCase())||k.descripcion.toLowerCase().includes(d.toLowerCase()),P=p===""||k.area===p,R=C===""||k.estado===C;return z&&P&&R}),[t,d,p,C]),S="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:I,className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:I,placeholder:"Nombre del responsable",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:I,className:S,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),l3.map(k=>c.jsx("option",{value:k,children:k},k))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:I,rows:3,placeholder:"Detalle de la acción a realizar...",className:S})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:I,className:S})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{htmlFor:"enlaceDocumento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace a Documento (Opcional)"}),c.jsx("input",{type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:I,placeholder:"https://ejemplo.com/documento",className:S})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:F,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:k=>m(k.target.value),className:S+" md:col-span-1"}),c.jsxs("select",{value:p,onChange:k=>x(k.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),l3.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsxs("select",{value:C,onChange:k=>y(k.target.value),className:S,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),D1.map(k=>c.jsx("option",{value:k,children:k},k))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:n?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10",children:"Cargando..."})}):E.length>0?E.map(k=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:k.responsable}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:k.area})]}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:k.descripcion}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:["Reg: ",k.fechaRegistro]}),c.jsxs("div",{className:"font-semibold",children:["Comp: ",k.fechaCumplimiento]})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>j(k.id),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${TJ[k.estado]}`,children:k.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[k.enlaceDocumento&&c.jsx("a",{href:k.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"text-indigo-600 hover:text-indigo-800 p-1 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 inline-block align-middle",children:"🔗"}),c.jsx("button",{onClick:()=>O(k),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>Q(k.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},k.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No se encontraron acciones."})})})]})})]})]})},q2="planificaciones",HU="actividades_calendario",VU=t=>{var n,r,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n))==null?void 0:s.toISOString())||e.fechaCreacion}},BJ=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Tn.fromDate(new Date),fechaActualizacion:Tn.fromDate(new Date)};return(await na(zt(Ut,q2),n)).id}catch(n){throw console.error("Error al guardar planificación:",n),new Error("No se pudo guardar la planificación")}},kJ=async(t,e,n)=>{try{const r=Mn(Ut,q2,t),s=await cv(r);if(!s.exists()||s.data().userId!==n)throw new Error("No tienes permisos para actualizar esta planificación");await uv(r,{...e,fechaActualizacion:Tn.fromDate(new Date)})}catch(r){throw console.error("Error al actualizar planificación:",r),new Error("No se pudo actualizar la planificación")}},IJ=async(t,e)=>{try{const n=Mn(Ut,q2,t),r=await cv(n);if(!r.exists()||r.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await Yi(n)}catch(n){throw console.error("Error al eliminar planificación:",n),new Error("No se pudo eliminar la planificación")}},FJ=(t,e)=>{const n=mn(zt(Ut,q2),cs("userId","==",t),Dr("fechaCreacion","desc"));return Un(n,r=>{const s=r.docs.map(VU);e(s)},r=>{console.error("Error en suscripción a planificaciones:",r)})},DJ=async(t,e)=>{try{const n={...t,userId:e,fechaCreacion:Tn.fromDate(new Date),fechaActualizacion:Tn.fromDate(new Date)};return(await na(zt(Ut,HU),n)).id}catch(n){throw console.error("Error al guardar actividad:",n),new Error("No se pudo guardar la actividad")}},LJ=(t,e)=>{const n=mn(zt(Ut,HU),cs("userId","==",t),Dr("fecha","desc"));return Un(n,r=>{const s=r.docs.map(VU);e(s)},r=>{console.error("Error en suscripción a actividades:",r)})},RJ=t=>{const[e,n]=se.useState([]),[r,s]=se.useState(!0),[a,i]=se.useState(null);return se.useEffect(()=>t?(s(!0),FJ(t,m=>{n(m),s(!1)})):void 0,[t]),{planificaciones:e,loading:r,error:a,save:async d=>{try{return i(null),await BJ(d,t)}catch(m){throw i(m.message||"Error al guardar planificación"),m}},update:async(d,m)=>{try{i(null),await kJ(d,m,t)}catch(p){throw i(p.message||"Error al actualizar planificación"),p}},remove:async d=>{try{i(null),await IJ(d,t)}catch(m){throw i(m.message||"Error al eliminar planificación"),m}}}},aS=t=>{const e=new Date().toISOString();console.log(`[${e}] API Call: ${t}`)},PJ=t=>{const[e,n]=se.useState([]),[r,s]=se.useState(!0),[a,i]=se.useState(null);se.useEffect(()=>t?LJ(t,u=>{n(u),s(!1)}):void 0,[t]);const o=se.useCallback(async l=>{try{return i(null),await DJ(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:r,error:a,save:o}},MJ=({lesson:t,onClose:e,onSave:n,isLoading:r=!1})=>{const[s,a]=se.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await n(s),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:r})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:r,children:[r&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},UJ=({plan:t,onEditLesson:e,onUseLesson:n,isLoading:r=!1,onUpdatePlan:s})=>{const[a,i]=se.useState(t.progreso??0),[o,l]=se.useState(!1),u=async d=>{const m=parseInt(d.target.value,10);i(m),l(!0);try{t.id&&s&&(await s(t.id,{progreso:m}),console.log("✅ Progreso actualizado exitosamente"))}catch(p){console.error("❌ Error completo:",p),alert(`Error al guardar el avance: ${p.message}`),i(t.progreso??0)}finally{l(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:a,onChange:u,disabled:o||r}),c.jsxs("span",{className:"font-bold w-12",children:[a,"%"]}),o&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((d,m)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",m+1,": ",d.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(m,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:r,children:"Editar"}),c.jsx("button",{onClick:()=>n(d,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:r,children:"Usar para Plan de Clase"})]})]},m))})]})},OJ=({plan:t,onBack:e,onSave:n,onDelete:r,isLoading:s=!1})=>{const[a,i]=se.useState(t),[o,l]=se.useState(!1),u=m=>{const{name:p,value:x}=m.target,[C,y]=p.split(".");i(C==="momentosClase"?T=>({...T,momentosClase:{...T.momentosClase,[y]:x}}):T=>({...T,[p]:x}))},d=async()=>{l(!0);try{await n(a)}catch(m){console.error("Error al guardar plan de clase:",m)}finally{l(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:s||o,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:a.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:a.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:a.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:s||o})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("button",{onClick:()=>r(t.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:"🗑️ Eliminar Plan"}),c.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:s||o,children:[o&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},jJ=({userId:t})=>{const{actividades:e,save:n}=PJ(t),[r,s]=se.useState("list"),[a,i]=se.useState(null),[o,l]=se.useState(!1),[u,d]=se.useState(!1),m={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[p,x]=se.useState(m);se.useEffect(()=>{r==="summary"&&a&&C()},[r,a,t]);const C=async()=>{if(a)try{d(!1)}catch(j){console.error("Error al verificar evento en calendario:",j)}},y=j=>{const{name:E,value:S}=j.target;x(k=>({...k,[E]:S}))},T=(j,E,S)=>{x(k=>({...k,tareas:k.tareas.map(z=>z.id===j?{...z,[E]:S}:z)}))},I=()=>{x(j=>({...j,tareas:[...j.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},F=j=>{x(E=>({...E,tareas:E.tareas.filter(S=>S.id!==j)}))},M=async j=>{j.preventDefault(),l(!0);const E=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${p.nombre}
    - Descripción: ${p.descripcion}
    - Tareas: ${p.tareas.map(S=>S.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{aS("Planificación - Actividad Calendario");const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=(await(await new xi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),q={...p,objetivo:G.replace(/(\*\*|\*)/g,"")},le=await n(q),ee={...q,id:le};i(ee),s("summary")}catch(S){console.error("Error al generar objetivo con IA:",S),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const k={...p,objetivo:"No generado"},z=await n(k),P={...k,id:z};i(P),s("summary")}catch(k){console.error("Error al guardar actividad:",k),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},O=async j=>{if(j)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},Q="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return r==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:M,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:p.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:Q,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:p.fecha,onChange:y,className:Q,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:p.hora,onChange:y,className:Q,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:p.descripcion,onChange:y,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:Q,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:p.ubicacion,onChange:y,placeholder:"Ubicación",className:Q,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:p.participantes,onChange:y,placeholder:"Participantes",className:Q,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:p.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:Q,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:I,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:p.tareas.map((j,E)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>F(j.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:j.descripcion,onChange:S=>T(j.id,"descripcion",S.target.value),placeholder:`Descripción de la Tarea ${E+1}`,rows:2,className:Q,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:j.responsable,onChange:S=>T(j.id,"responsable",S.target.value),placeholder:"Responsable",className:Q,required:!0,disabled:o}),c.jsx("input",{value:j.recursos,onChange:S=>T(j.id,"recursos",S.target.value),placeholder:"Recursos Necesarios",className:Q,disabled:o})]})]},j.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):r==="summary"&&a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:a.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:a.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:a.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:a.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:a.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:a.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>O(a),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{s("form"),x(m)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(j=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:j.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(j.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",j.ubicacion]})]},j.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},QJ=({currentUser:t})=>{const e=t.uid||t.email||t.id||"",{planificaciones:n,save:r,update:s,remove:a,loading:i}=RJ(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=se.useState(o),[d,m]=se.useState(null),[p,x]=se.useState(!1),[C,y]=se.useState(null),[T,I]=se.useState("unidad"),[F,M]=se.useState(null),[O,Q]=se.useState(null),j=se.useMemo(()=>t.asignaturas||[],[t.asignaturas]),E=se.useMemo(()=>{const X=t.cursos||[],ce=new Set;return X.forEach(V=>{V.startsWith("1º")?ce.add("1º Medio"):V.startsWith("2º")?ce.add("2º Medio"):V.startsWith("3º")?ce.add("3º Medio"):V.startsWith("4º")&&ce.add("4º Medio")}),Array.from(ce)},[t.cursos]);se.useEffect(()=>{u(X=>({...X,asignatura:j[0]||"",nivel:E[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:t.uid,email:t.email,id:t.id,nombreCompleto:t.nombreCompleto},userId:e,planificacionesCount:n.length,planificacionesAutores:n.map(X=>({id:X.id,autor:X.autor,tipo:X.tipo,coincideConUserId:X.autor===e}))})},[j,E,t,e,n]);const S=X=>{const{name:ce,value:V}=X.target;u(J=>({...J,[ce]:ce==="cantidadClases"?parseInt(V,10):V}))},k=()=>{const{asignatura:X,nivel:ce,nombreUnidad:V,contenidos:J,cantidadClases:re,observaciones:ie,ideasParaUnidad:fe}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${X}
    - Nivel: ${ce}
    - Nombre de la Unidad: "${V}"
    - Contenidos clave a trabajar (insumo principal): "${J}"
    - Cantidad de clases para la unidad: ${re}
    - Ideas y perspectiva del docente para la unidad: "${fe||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ie||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${re} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},z=async X=>{if(X.preventDefault(),x(!0),y(null),!l.contenidos||!l.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),x(!1);return}try{aS("Planificación - Unidad");const ce="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new xi(ce).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=k(),ie={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},ve=(await(await J.generateContent({contents:[{parts:[{text:re}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),ye=JSON.parse(ve),we={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ye.objetivosAprendizaje,indicadoresEvaluacion:ye.indicadoresEvaluacion,detallesLeccion:ye.detallesLeccion};if(d)await s(d.id,we),m({...we,id:d.id});else{const me=await r(we);m({...we,id:me})}}catch(ce){console.error("Error al generar planificación con IA",ce),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{x(!1)}},P=async(X,ce)=>{x(!0),y(null);const V=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ce.asignatura}
    - Nivel: ${ce.nivel}
    - Objetivo de la clase: ${X.objetivosAprendizaje}
    - Contenidos: ${X.contenidosConceptuales}
    - Actividades sugeridas: ${X.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{aS("Planificación - Utilizar Clase");const J="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new xi(J).getGenerativeModel({model:"gemini-1.5-flash-latest"}),fe={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ye=(await(await ie.generateContent({contents:[{parts:[{text:V}]}],generationConfig:{responseMimeType:"application/json",responseSchema:fe}})).response).text(),we=JSON.parse(ye),me={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:ce.asignatura,nivel:ce.nivel,contenidos:X.contenidosConceptuales,observaciones:"",nombreClase:X.actividades,duracionClase:80,momentosClase:we,detalleLeccionOrigen:X};await r(me),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),I("clase")}catch(J){console.error("Error al generar plan de clase con IA",J),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{x(!1)}},R=X=>{X.tipo==="Unidad"&&(u({asignatura:X.asignatura,nivel:X.nivel,nombreUnidad:X.nombreUnidad,contenidos:X.contenidos,cantidadClases:X.cantidadClases,observaciones:X.observaciones,ideasParaUnidad:X.ideasParaUnidad||""}),m(X),window.scrollTo({top:0,behavior:"smooth"}))},G=async X=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await a(X),(d==null?void 0:d.id)===X&&(m(null),u(o))}catch(ce){console.error("Error al eliminar planificación:",ce),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},q=async X=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await a(X),(F==null?void 0:F.id)===X&&M(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(ce){console.error("Error al eliminar plan de clase:",ce),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},le=(X,ce)=>{d&&Q({planId:d.id,lessonIndex:X,lessonData:ce})},ee=async X=>{if(O)try{const{planId:ce,lessonIndex:V}=O,J=n.find(fe=>fe.id===ce&&fe.tipo==="Unidad");if(!J)return;const re=[...J.detallesLeccion];re[V]=X;const ie={...J,detallesLeccion:re};await s(ce,ie),m(ie),Q(null)}catch(ce){console.error("Error al actualizar lección:",ce),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},oe="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:z,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:S,className:oe,disabled:p,children:j.length>0?j.map(X=>c.jsx("option",{value:X,children:X},X)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:S,className:oe,disabled:p,children:E.length>0?E.map(X=>c.jsx("option",{value:X,children:X},X)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:S,className:oe,placeholder:"Ej: La Célula y sus procesos",disabled:p})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:S,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:oe,disabled:p})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:S,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:oe,disabled:p})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:S,className:oe,min:"1",max:"20",disabled:p})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:S,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:oe,disabled:p})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:p||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:p?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:C})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(UJ,{plan:d,onEditLesson:le,onUseLesson:P,onUpdatePlan:s,isLoading:p})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:n.filter(X=>X.tipo==="Unidad").length>0?n.filter(X=>X.tipo==="Unidad").map(X=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===X.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:X.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(X.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",X.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>R(X),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:p,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>G(X.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:p,children:"🗑️"})]})]})},X.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),ne=()=>{const X=n.filter(ce=>ce.tipo==="Clase").sort((ce,V)=>new Date(V.fechaCreacion).getTime()-new Date(ce.fechaCreacion).getTime());return F?c.jsx(OJ,{plan:F,onBack:()=>M(null),onDelete:q,onSave:async ce=>{try{await s(ce.id,ce),M(ce)}catch(V){console.error("Error al actualizar plan de clase:",V),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:p}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:X.length>0?X.map(ce=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ce.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ce.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ce.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>M(ce),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ce.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>I("unidad"),className:`${T==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>I("clase"),className:`${T==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>I("calendario"),className:`${T==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),T==="unidad"&&K(),T==="clase"&&ne(),T==="calendario"&&c.jsx(jJ,{userId:e}),O&&c.jsx(MJ,{lesson:O.lessonData,onClose:()=>Q(null),onSave:ee,isLoading:p})]})},K2="events",HJ=async()=>{try{const t=mn(zt(Sr,K2),Dr("date","asc"));return(await gi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},VJ=async t=>{try{return{id:(await na(zt(Sr,K2),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},zJ=async(t,e)=>{try{const n=Mn(Sr,K2,t);await uv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar evento:",n,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},GJ=async t=>{try{const e=Mn(Sr,K2,t);await Yi(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},qJ=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],KJ=t=>{switch(t.type){case Or.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Or.ACTO:return`Acto: ${t.ubicacion}`;case Or.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Or.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},$J=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s,date:a,isLoading:i})=>{const[o,l]=se.useState({});se.useEffect(()=>{l(s||{type:Or.EVALUACION,subtype:gh.PRUEBA_PARCIAL,asignatura:Cc[0],curso:Ja[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=y=>{const{name:T,value:I}=y.target;l(F=>({...F,[T]:I}))},m=y=>{l(T=>{if(T.type===Or.SALIDA_PEDAGOGICA){const I=T.cursos||[],F=I.includes(y)?I.filter(M=>M!==y):[...I,y];return{...T,cursos:F.sort()}}return T})},p=y=>{var I;y.preventDefault();let T;switch(o.type){case Or.EVALUACION:const F={date:a,type:Or.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===gh.RUBRICA||o.subtype===gh.PAUTA_COTEJO)&&((I=o.enlace)!=null&&I.trim())&&(F.enlace=o.enlace.trim()),T=F;break;case Or.ACTO:T={date:a,type:Or.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Or.ACTIVIDAD_FOCALIZADA:T={date:a,type:Or.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Or.SALIDA_PEDAGOGICA:T={date:a,type:Or.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}n(T)};if(!t)return null;const x=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),C=()=>{switch(o.type){case Or.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:fX.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:Cc.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ja.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===gh.RUBRICA||o.subtype===gh.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case Or.ACTO:case Or.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case Or.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:Ja.map(y=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>m(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:y})]},y))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:c.jsxs("form",{onSubmit:p,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:x}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(Or).map(y=>c.jsx("option",{value:y,children:y},y))})]}),C()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:s&&r&&c.jsx("button",{type:"button",onClick:r,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},WJ=({profile:t})=>{const[e,n]=se.useState(new Date),[r,s]=se.useState([]),[a,i]=se.useState(!1),[o,l]=se.useState(null),[u,d]=se.useState(!1),[m,p]=se.useState(Object.values(Or)),[x,C]=se.useState(!1),[y,T]=se.useState(null),[I,F]=se.useState(null),M=se.useCallback(async()=>{i(!0);try{const P=await HJ();s(P),l(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);se.useEffect(()=>{M()},[M]);const O=se.useMemo(()=>{const P=e.getFullYear(),R=e.getMonth(),G=new Date(P,R,1).getDay(),q=new Date(P,R+1,0).getDate(),le=[];let ee=1;for(let oe=0;oe<6;oe++){const K=[];for(let ne=0;ne<7;ne++)oe===0&&ne<G||ee>q?K.push(null):(K.push(new Date(P,R,ee)),ee++);if(le.push(K),ee>q)break}return le},[e]),Q=P=>{p(R=>R.includes(P)?R.filter(G=>G!==P):[...R,P])},j=()=>{m.length===Object.values(Or).length?p([]):p(Object.values(Or))},E=P=>{t!==tn.ESTUDIANTE&&(T(P.toISOString().split("T")[0]),F(null),C(!0))},S=(P,R)=>{R.stopPropagation(),t!==tn.ESTUDIANTE&&(T(P.date),F(P),C(!0))},k=async P=>{d(!0);try{I?await zJ(I.id,P):await VJ(P),await M(),C(!1)}catch(R){console.error("Error al guardar evento:",R);const G=R instanceof Error?R.message:"Error desconocido";l(`Error al guardar el evento: ${G}`)}finally{d(!1)}},z=async()=>{if(I){d(!0);try{await GJ(I.id),await M(),C(!1)}catch(P){console.error("Error al eliminar evento:",P);const R=P instanceof Error?P.message:"Error desconocido";l(`No se pudo eliminar el evento: ${R}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&r.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:j,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:m.length===Object.values(Or).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Or).map(P=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${m.includes(P)?`shadow-sm ${sf[P].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:m.includes(P),onChange:()=>Q(P),className:"hidden"}),c.jsx("span",{children:sf[P].icon}),c.jsx("span",{children:sf[P].label})]},P))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>n(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>n(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:qJ.map(P=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:P},P))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:O.flat().map((P,R)=>{const G=P&&P.toDateString()===new Date().toDateString(),q=P==null?void 0:P.toISOString().split("T")[0],le=q?r.filter(ee=>ee.date===q&&m.includes(ee.type)):[];return c.jsx("div",{onClick:()=>P&&E(P),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${P?t!==tn.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:P&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${G?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:P.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:le.map(ee=>c.jsxs("div",{onClick:oe=>S(ee,oe),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${sf[ee.type].color}`,children:[c.jsx("span",{children:sf[ee.type].icon}),c.jsx("span",{className:"truncate",children:KJ(ee)})]},ee.id))}),t!==tn.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},R)})})]}),x&&c.jsx($J,{isOpen:x,onClose:()=>C(!1),onSave:k,onDelete:z,event:I,date:y,isLoading:u})]})},$2="anuncios",YJ=async()=>{try{const t=mn(zt(Sr,$2),Dr("fechaPublicacion","desc"));return(await gi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},XJ=async t=>{try{return{id:(await na(zt(Sr,$2),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},JJ=async(t,e)=>{try{const n=Mn(Sr,$2,t);await uv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar anuncio:",n,"ID:",t),new Error("No se pudo actualizar el anuncio")}},ZJ=async t=>{try{const e=Mn(Sr,$2,t);await Yi(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},P3=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],eZ=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState(!1),[a,i]=se.useState(null),[o,l]=se.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=se.useState({tipo:"Todos",cursos:[]}),m=se.useCallback(async()=>{s(!0);try{const E=await YJ();n(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);se.useEffect(()=>{m()},[m]);const p=E=>{const{name:S,value:k}=E.target;l(z=>({...z,[S]:k}))},x=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},C=E=>{d(S=>{var z;if(S.tipo!=="Cursos")return S;const k=(z=S.cursos)!=null&&z.includes(E)?S.cursos.filter(P=>P!==E):[...S.cursos||[],E];return{...S,cursos:k}})},y=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const S={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await XJ(S),await m(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(S){console.error("Error al crear anuncio:",S),i("Error al publicar el anuncio en la nube.")}},T=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await ZJ(E),await m()}catch(S){console.error("Error al eliminar anuncio:",S),i("No se pudo eliminar el anuncio en la nube.")}},I=async E=>{try{const S=e.find(k=>k.id===E);S&&(await JJ(E,{destacado:!S.destacado}),await m())}catch(S){console.error("Error al actualizar anuncio:",S),i("No se pudo actualizar el estado del anuncio en la nube.")}},F=se.useMemo(()=>[...e].sort((E,S)=>E.destacado&&!S.destacado?-1:!E.destacado&&S.destacado?1:new Date(S.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[e]),M=se.useMemo(()=>{const E=t.profile,S=t.curso;return F.filter(k=>{if(E===tn.SUBDIRECCION)return!0;if(!k.destinatarios)return E!==tn.ESTUDIANTE;const{tipo:z,cursos:P}=k.destinatarios;return z==="Todos"||z==="Profesores"&&E===tn.PROFESORADO||z==="Coordinación TP"&&E===tn.COORDINACION_TP?!0:z==="Cursos"?E===tn.ESTUDIANTE?P==null?void 0:P.includes(S||""):!0:!1})},[F,t]),O=E=>t.profile===tn.ESTUDIANTE?!1:t.profile===tn.SUBDIRECCION||t.profile===E.profileCreador,Q=()=>t.profile===tn.SUBDIRECCION||t.profile===tn.PROFESORADO,j="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==tn.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:p,required:!0,className:j})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:p,required:!0,rows:4,className:j})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(E=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>x(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinación TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ja.map(E=>{var S;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(S=u.cursos)==null?void 0:S.includes(E),onChange:()=>C(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:p,placeholder:"https://ejemplo.com/documento.pdf",className:j})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!r&&M.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!r&&M.length>0&&M.map((E,S)=>{const k=P3[S%P3.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${k.bg} ${k.rotate}`,children:[E.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:E.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[Q()&&c.jsx("button",{onClick:()=>I(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),O(E)&&c.jsx("button",{onClick:()=>T(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},zU="api_logs",tZ=async(t,e)=>{try{const n={module:t,userId:e.id,userEmail:e.email,userName:e.nombreCompleto,timestamp:Tn.fromDate(new Date)};await na(zt(Ut,zU),n)}catch(n){console.error("Error al registrar la llamada a la API en Firestore:",n)}},nZ=t=>{const e=mn(zt(Ut,zU),Dr("timestamp","desc"));return Un(e,r=>{const s=r.docs.map(a=>{var o,l;const i=a.data();return{id:a.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});t(s)},r=>{console.error("Error al suscribirse a los logs de API:",r),t([])})},od=(t,e)=>{if(!e||!e.id||!e.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}tZ(t,e)},U5="actas_de_reunion",rZ=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},sZ=t=>{const e=mn(zt(Ut,U5),Dr("fechaCreacion","desc"));return Un(e,r=>{const s=r.docs.map(a=>rZ(a));t(s)},r=>{console.error("Error al suscribirse a las actas:",r),t([])})},aZ=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Tn.fromDate(new Date(t.fechaCreacion))};return(await na(zt(Ut,U5),n)).id}catch(n){throw console.error("Error al crear el acta:",n),new Error("No se pudo crear el acta.")}},iZ=async t=>{try{const e=Mn(Ut,U5,t);await Yi(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},GU=window.SpeechRecognition||window.webkitSpeechRecognition,M3=!!GU,oZ=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),lZ=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState(null),[a,i]=se.useState({tipoReunion:fC[0],asistentes:"",textoReunion:""}),[o,l]=se.useState(!1),[u,d]=se.useState(!1),[m,p]=se.useState(!0),[x,C]=se.useState(null),y=se.useRef(null);se.useEffect(()=>{p(!0);const E=sZ(S=>{n(S),!r&&S.length>0&&s(S[0]),p(!1)});return()=>E()},[r]);const T=E=>{const{name:S,value:k}=E.target;i(z=>({...z,[S]:k}))},I=se.useCallback(()=>{var E;if(!M3){C("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=y.current)==null||E.stop():(y.current=new GU,y.current.lang="es-CL",y.current.continuous=!0,y.current.interimResults=!0,y.current.onresult=S=>{let k="";for(let z=S.resultIndex;z<S.results.length;++z)S.results[z].isFinal&&(k+=S.results[z][0].transcript+". ");i(z=>({...z,textoReunion:z.textoReunion+k}))},y.current.onstart=()=>l(!0),y.current.onend=()=>l(!1),y.current.onerror=S=>{console.error("Speech recognition error",S.error),C(`Error de reconocimiento: ${S.error}`),l(!1)},y.current.start())},[o]),F=async E=>{E.preventDefault();const{tipoReunion:S,asistentes:k,textoReunion:z}=a;if(!S||!k.trim()||!z.trim()){C("Todos los campos son obligatorios.");return}d(!0),C(null);try{od("Generador de Actas");const P="",G=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro"}),q=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${z}"
                
                Asistentes a la reunión para referencia de nombres: ${k}
            `,K=(await(await G.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ne=JSON.parse(K),X={fechaCreacion:new Date().toISOString(),...a,...ne},ce=await aZ(X,t);i({tipoReunion:fC[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),C("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},M=async E=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await iZ(E),(r==null?void 0:r.id)===E&&s(e.length>1?e[1]:null)}catch(S){console.error("Error deleting acta:",S),alert("No se pudo eliminar el acta.")}},O=E=>{s(E)},Q=E=>E.temas||E.acuerdos||E.plazos||E.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),E.temas&&E.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((k,z)=>c.jsx("li",{children:k},z))})]}),E.acuerdos&&E.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((k,z)=>c.jsx("li",{children:k},z))})]}),E.plazos&&E.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((k,z)=>c.jsx("li",{children:k},z))})]}),E.responsables&&E.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((k,z)=>c.jsx("li",{children:k},z))})]})]}):null,j="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return m?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:T,required:!0,className:j,children:fC.map(E=>c.jsx("option",{value:E,children:E},E))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:T,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:j})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:T,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:j}),M3&&c.jsx("button",{type:"button",onClick:I,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(oZ,{isListening:o})})]})]}),x&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:x}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(E=>c.jsxs("button",{onClick:()=>O(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:r?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${r.tipoReunion}`}),c.jsx("button",{onClick:()=>M(r.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(r.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(r.asistentes||"").split(",").map((E,S)=>E.trim()&&c.jsx("li",{children:E.trim()},S))}),Q(r),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:r.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},cZ="modulepreload",uZ=function(t){return"/"+t},U3={},Sw=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(n.map(u=>{if(u=uZ(u),u in U3)return;U3[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":cZ,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((x,C)=>{p.addEventListener("load",x),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function _s(t){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(t)}var Ko=Uint8Array,bc=Uint16Array,O5=Int32Array,W2=new Ko([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Y2=new Ko([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iS=new Ko([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qU=function(t,e){for(var n=new bc(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new O5(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},KU=qU(W2,2),$U=KU.b,oS=KU.r;$U[28]=258,oS[258]=28;var WU=qU(Y2,0),AZ=WU.b,O3=WU.r,lS=new bc(32768);for(var Zs=0;Zs<32768;++Zs){var Vd=(Zs&43690)>>1|(Zs&21845)<<1;Vd=(Vd&52428)>>2|(Vd&13107)<<2,Vd=(Vd&61680)>>4|(Vd&3855)<<4,lS[Zs]=((Vd&65280)>>8|(Vd&255)<<8)>>1}var vA=function(t,e,n){for(var r=t.length,s=0,a=new bc(e);s<r;++s)t[s]&&++a[t[s]-1];var i=new bc(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(n){o=new bc(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],m=i[t[s]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)o[lS[m]>>l]=u}else for(o=new bc(r),s=0;s<r;++s)t[s]&&(o[s]=lS[i[t[s]-1]++]>>15-t[s]);return o},Rf=new Ko(288);for(var Zs=0;Zs<144;++Zs)Rf[Zs]=8;for(var Zs=144;Zs<256;++Zs)Rf[Zs]=9;for(var Zs=256;Zs<280;++Zs)Rf[Zs]=7;for(var Zs=280;Zs<288;++Zs)Rf[Zs]=8;var wx=new Ko(32);for(var Zs=0;Zs<32;++Zs)wx[Zs]=5;var dZ=vA(Rf,9,0),fZ=vA(Rf,9,1),hZ=vA(wx,5,0),mZ=vA(wx,5,1),pC=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},bu=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},gC=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},j5=function(t){return(t+7)/8|0},YU=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ko(t.subarray(e,n))},pZ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Su=function(t,e,n){var r=new Error(e||pZ[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Su),!n)throw r;return r},gZ=function(t,e,n,r){var s=t.length,a=0;if(!s||e.f&&!e.l)return n||new Ko(0);var i=!n,o=i||e.i!=2,l=e.i;i&&(n=new Ko(s*3));var u=function(me){var he=n.length;if(me>he){var Ve=new Ko(Math.max(he*2,me));Ve.set(n),n=Ve}},d=e.f||0,m=e.p||0,p=e.b||0,x=e.l,C=e.d,y=e.m,T=e.n,I=s*8;do{if(!x){d=bu(t,m,1);var F=bu(t,m+1,3);if(m+=3,F)if(F==1)x=fZ,C=mZ,y=9,T=5;else if(F==2){var j=bu(t,m,31)+257,E=bu(t,m+10,15)+4,S=j+bu(t,m+5,31)+1;m+=14;for(var k=new Ko(S),z=new Ko(19),P=0;P<E;++P)z[iS[P]]=bu(t,m+P*3,7);m+=E*3;for(var R=pC(z),G=(1<<R)-1,q=vA(z,R,1),P=0;P<S;){var le=q[bu(t,m,G)];m+=le&15;var M=le>>4;if(M<16)k[P++]=M;else{var ee=0,oe=0;for(M==16?(oe=3+bu(t,m,3),m+=2,ee=k[P-1]):M==17?(oe=3+bu(t,m,7),m+=3):M==18&&(oe=11+bu(t,m,127),m+=7);oe--;)k[P++]=ee}}var K=k.subarray(0,j),ne=k.subarray(j);y=pC(K),T=pC(ne),x=vA(K,y,1),C=vA(ne,T,1)}else Su(1);else{var M=j5(m)+4,O=t[M-4]|t[M-3]<<8,Q=M+O;if(Q>s){l&&Su(0);break}o&&u(p+O),n.set(t.subarray(M,Q),p),e.b=p+=O,e.p=m=Q*8,e.f=d;continue}if(m>I){l&&Su(0);break}}o&&u(p+131072);for(var X=(1<<y)-1,ce=(1<<T)-1,V=m;;V=m){var ee=x[gC(t,m)&X],J=ee>>4;if(m+=ee&15,m>I){l&&Su(0);break}if(ee||Su(2),J<256)n[p++]=J;else if(J==256){V=m,x=null;break}else{var re=J-254;if(J>264){var P=J-257,ie=W2[P];re=bu(t,m,(1<<ie)-1)+$U[P],m+=ie}var fe=C[gC(t,m)&ce],Se=fe>>4;fe||Su(3),m+=fe&15;var ne=AZ[Se];if(Se>3){var ie=Y2[Se];ne+=gC(t,m)&(1<<ie)-1,m+=ie}if(m>I){l&&Su(0);break}o&&u(p+131072);var ve=p+re;if(p<ne){var ye=a-ne,we=Math.min(ne,ve);for(ye+p<0&&Su(3);p<we;++p)n[p]=r[ye+p]}for(;p<ve;++p)n[p]=n[p-ne]}}e.l=x,e.p=V,e.b=p,e.f=d,x&&(d=1,e.m=y,e.d=C,e.n=T)}while(!d);return p!=n.length&&i?YU(n,0,p):n.subarray(0,p)},VA=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ng=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},xC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return{t:JU,l:0};if(s==1){var i=new Ko(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(Q,j){return Q.f-j.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,m=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[u].f<n[m].f?u++:m++],l=n[u!=d&&n[u].f<n[m].f?u++:m++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<s;++r)a[r].s>p&&(p=a[r].s);var x=new bc(p+1),C=cS(n[d-1],x,0);if(C>e){var r=0,y=0,T=C-e,I=1<<T;for(a.sort(function(j,E){return x[E.s]-x[j.s]||j.f-E.f});r<s;++r){var F=a[r].s;if(x[F]>e)y+=I-(1<<C-x[F]),x[F]=e;else break}for(y>>=T;y>0;){var M=a[r].s;x[M]<e?y-=1<<e-x[M]++-1:++r}for(;r>=0&&y;--r){var O=a[r].s;x[O]==e&&(--x[O],++y)}C=e}return{t:new Ko(x),l:C}},cS=function(t,e,n){return t.s==-1?Math.max(cS(t.l,e,n+1),cS(t.r,e,n+1)):e[t.s]=n},j3=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new bc(++e),r=0,s=t[0],a=1,i=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:n.subarray(0,r),n:e}},rg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},XU=function(t,e,n){var r=n.length,s=j5(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<r;++a)t[s+a+4]=n[a];return(s+4+r)*8},Q3=function(t,e,n,r,s,a,i,o,l,u,d){VA(e,d++,n),++s[256];for(var m=xC(s,15),p=m.t,x=m.l,C=xC(a,15),y=C.t,T=C.l,I=j3(p),F=I.c,M=I.n,O=j3(y),Q=O.c,j=O.n,E=new bc(19),S=0;S<F.length;++S)++E[F[S]&31];for(var S=0;S<Q.length;++S)++E[Q[S]&31];for(var k=xC(E,7),z=k.t,P=k.l,R=19;R>4&&!z[iS[R-1]];--R);var G=u+5<<3,q=rg(s,Rf)+rg(a,wx)+i,le=rg(s,p)+rg(a,y)+i+14+3*R+rg(E,z)+2*E[16]+3*E[17]+7*E[18];if(l>=0&&G<=q&&G<=le)return XU(e,d,t.subarray(l,l+u));var ee,oe,K,ne;if(VA(e,d,1+(le<q)),d+=2,le<q){ee=vA(p,x,0),oe=p,K=vA(y,T,0),ne=y;var X=vA(z,P,0);VA(e,d,M-257),VA(e,d+5,j-1),VA(e,d+10,R-4),d+=14;for(var S=0;S<R;++S)VA(e,d+3*S,z[iS[S]]);d+=3*R;for(var ce=[F,Q],V=0;V<2;++V)for(var J=ce[V],S=0;S<J.length;++S){var re=J[S]&31;VA(e,d,X[re]),d+=z[re],re>15&&(VA(e,d,J[S]>>5&127),d+=J[S]>>12)}}else ee=dZ,oe=Rf,K=hZ,ne=wx;for(var S=0;S<o;++S){var ie=r[S];if(ie>255){var re=ie>>18&31;ng(e,d,ee[re+257]),d+=oe[re+257],re>7&&(VA(e,d,ie>>23&31),d+=W2[re]);var fe=ie&31;ng(e,d,K[fe]),d+=ne[fe],fe>3&&(ng(e,d,ie>>5&8191),d+=Y2[fe])}else ng(e,d,ee[ie]),d+=oe[ie]}return ng(e,d,ee[256]),d+oe[256]},xZ=new O5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),JU=new Ko(0),vZ=function(t,e,n,r,s,a){var i=a.z||t.length,o=new Ko(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var m=xZ[e-1],p=m>>13,x=m&8191,C=(1<<n)-1,y=a.p||new bc(32768),T=a.h||new bc(C+1),I=Math.ceil(n/3),F=2*I,M=function(nt){return(t[nt]^t[nt+1]<<I^t[nt+2]<<F)&C},O=new O5(25e3),Q=new bc(288),j=new bc(32),E=0,S=0,k=a.i||0,z=0,P=a.w||0,R=0;k+2<i;++k){var G=M(k),q=k&32767,le=T[G];if(y[q]=le,T[G]=q,P<=k){var ee=i-k;if((E>7e3||z>24576)&&(ee>423||!u)){d=Q3(t,l,0,O,Q,j,S,z,R,k-R,d),z=E=S=0,R=k;for(var oe=0;oe<286;++oe)Q[oe]=0;for(var oe=0;oe<30;++oe)j[oe]=0}var K=2,ne=0,X=x,ce=q-le&32767;if(ee>2&&G==M(k-ce))for(var V=Math.min(p,ee)-1,J=Math.min(32767,k),re=Math.min(258,ee);ce<=J&&--X&&q!=le;){if(t[k+K]==t[k+K-ce]){for(var ie=0;ie<re&&t[k+ie]==t[k+ie-ce];++ie);if(ie>K){if(K=ie,ne=ce,ie>V)break;for(var fe=Math.min(ce,ie-2),Se=0,oe=0;oe<fe;++oe){var ve=k-ce+oe&32767,ye=y[ve],we=ve-ye&32767;we>Se&&(Se=we,le=ve)}}}q=le,le=y[q],ce+=q-le&32767}if(ne){O[z++]=268435456|oS[K]<<18|O3[ne];var me=oS[K]&31,he=O3[ne]&31;S+=W2[me]+Y2[he],++Q[257+me],++j[he],P=k+K,++E}else O[z++]=t[k],++Q[t[k]]}}for(k=Math.max(k,P);k<i;++k)O[z++]=t[k],++Q[t[k]];d=Q3(t,l,u,O,Q,j,S,z,R,k-R,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=T,a.p=y,a.i=k,a.w=P)}else{for(var k=a.w||0;k<i+u;k+=65535){var Ve=k+65535;Ve>=i&&(l[d/8|0]=u,Ve=i),d=XU(l,d+1,t.subarray(k,Ve))}a.i=i}return YU(o,0,r+j5(d)+s)},ZU=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,a=n.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},yZ=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Ko(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return vZ(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},e8=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},wZ=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=ZU();s.p(e.dictionary),e8(t,2,s.d())}},bZ=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Su(6,"invalid zlib data"),(t[1]>>5&1)==1&&Su(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function uS(t,e){e||(e={});var n=ZU();n.p(t);var r=yZ(t,e,e.dictionary?6:2,4);return wZ(r,e),e8(r,r.length-4,n.d()),r}function _Z(t,e){return gZ(t.subarray(bZ(t),-4),{i:2},e,e)}var CZ=typeof TextDecoder<"u"&&new TextDecoder,EZ=0;try{CZ.decode(JU,{stream:!0}),EZ=1}catch{}var qn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vC(){qn.console&&typeof qn.console.log=="function"&&qn.console.log.apply(qn.console,arguments)}var Ls={log:vC,warn:function(t){qn.console&&(typeof qn.console.warn=="function"?qn.console.warn.apply(qn.console,arguments):vC.call(null,arguments))},error:function(t){qn.console&&(typeof qn.console.error=="function"?qn.console.error.apply(qn.console,arguments):vC(t))}};function yC(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){mh(r.response,e,n)},r.onerror=function(){Ls.error("could not download file")},r.send()}function H3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function R1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var qg,AS,mh=qn.saveAs||((typeof window>"u"?"undefined":_s(window))!=="object"||window!==qn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=qn.URL||qn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?H3(s.href)?yC(t,e,n):R1(s,s.target="_blank"):R1(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){R1(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(H3(t))yC(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){R1(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:_s(a)!=="object"&&(Ls.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return yC(t,e,n);var s=t.type==="application/octet-stream",a=/constructor/i.test(qn.HTMLElement)||qn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":_s(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=qn.URL||qn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function t8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wC(t,e){var n=t[0],r=t[1],s=t[2],a=t[3];n=Lo(n,r,s,a,e[0],7,-680876936),a=Lo(a,n,r,s,e[1],12,-389564586),s=Lo(s,a,n,r,e[2],17,606105819),r=Lo(r,s,a,n,e[3],22,-1044525330),n=Lo(n,r,s,a,e[4],7,-176418897),a=Lo(a,n,r,s,e[5],12,1200080426),s=Lo(s,a,n,r,e[6],17,-1473231341),r=Lo(r,s,a,n,e[7],22,-45705983),n=Lo(n,r,s,a,e[8],7,1770035416),a=Lo(a,n,r,s,e[9],12,-1958414417),s=Lo(s,a,n,r,e[10],17,-42063),r=Lo(r,s,a,n,e[11],22,-1990404162),n=Lo(n,r,s,a,e[12],7,1804603682),a=Lo(a,n,r,s,e[13],12,-40341101),s=Lo(s,a,n,r,e[14],17,-1502002290),n=Ro(n,r=Lo(r,s,a,n,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Ro(a,n,r,s,e[6],9,-1069501632),s=Ro(s,a,n,r,e[11],14,643717713),r=Ro(r,s,a,n,e[0],20,-373897302),n=Ro(n,r,s,a,e[5],5,-701558691),a=Ro(a,n,r,s,e[10],9,38016083),s=Ro(s,a,n,r,e[15],14,-660478335),r=Ro(r,s,a,n,e[4],20,-405537848),n=Ro(n,r,s,a,e[9],5,568446438),a=Ro(a,n,r,s,e[14],9,-1019803690),s=Ro(s,a,n,r,e[3],14,-187363961),r=Ro(r,s,a,n,e[8],20,1163531501),n=Ro(n,r,s,a,e[13],5,-1444681467),a=Ro(a,n,r,s,e[2],9,-51403784),s=Ro(s,a,n,r,e[7],14,1735328473),n=Po(n,r=Ro(r,s,a,n,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Po(a,n,r,s,e[8],11,-2022574463),s=Po(s,a,n,r,e[11],16,1839030562),r=Po(r,s,a,n,e[14],23,-35309556),n=Po(n,r,s,a,e[1],4,-1530992060),a=Po(a,n,r,s,e[4],11,1272893353),s=Po(s,a,n,r,e[7],16,-155497632),r=Po(r,s,a,n,e[10],23,-1094730640),n=Po(n,r,s,a,e[13],4,681279174),a=Po(a,n,r,s,e[0],11,-358537222),s=Po(s,a,n,r,e[3],16,-722521979),r=Po(r,s,a,n,e[6],23,76029189),n=Po(n,r,s,a,e[9],4,-640364487),a=Po(a,n,r,s,e[12],11,-421815835),s=Po(s,a,n,r,e[15],16,530742520),n=Mo(n,r=Po(r,s,a,n,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Mo(a,n,r,s,e[7],10,1126891415),s=Mo(s,a,n,r,e[14],15,-1416354905),r=Mo(r,s,a,n,e[5],21,-57434055),n=Mo(n,r,s,a,e[12],6,1700485571),a=Mo(a,n,r,s,e[3],10,-1894986606),s=Mo(s,a,n,r,e[10],15,-1051523),r=Mo(r,s,a,n,e[1],21,-2054922799),n=Mo(n,r,s,a,e[8],6,1873313359),a=Mo(a,n,r,s,e[15],10,-30611744),s=Mo(s,a,n,r,e[6],15,-1560198380),r=Mo(r,s,a,n,e[13],21,1309151649),n=Mo(n,r,s,a,e[4],6,-145523070),a=Mo(a,n,r,s,e[11],10,-1120210379),s=Mo(s,a,n,r,e[2],15,718787259),r=Mo(r,s,a,n,e[9],21,-343485551),t[0]=lf(n,t[0]),t[1]=lf(r,t[1]),t[2]=lf(s,t[2]),t[3]=lf(a,t[3])}function X2(t,e,n,r,s,a){return e=lf(lf(e,t),lf(r,a)),lf(e<<s|e>>>32-s,n)}function Lo(t,e,n,r,s,a,i){return X2(e&n|~e&r,t,e,s,a,i)}function Ro(t,e,n,r,s,a,i){return X2(e&r|n&~r,t,e,s,a,i)}function Po(t,e,n,r,s,a,i){return X2(e^n^r,t,e,s,a,i)}function Mo(t,e,n,r,s,a,i){return X2(n^(e|~r),t,e,s,a,i)}function n8(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)wC(r,SZ(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(wC(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,wC(r,s),r}function SZ(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}qg=qn.atob.bind(qn),AS=qn.btoa.bind(qn);var V3="0123456789abcdef".split("");function TZ(t){for(var e="",n=0;n<4;n++)e+=V3[t>>8*n+4&15]+V3[t>>8*n&15];return e}function NZ(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function dS(t){return n8(t).map(NZ).join("")}var BZ=function(t){for(var e=0;e<t.length;e++)t[e]=TZ(t[e]);return t.join("")}(n8("hello"))!="5d41402abc4b2a76b9719d911017c592";function lf(t,e){if(BZ){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fS(t,e){var n,r,s,a;if(t!==n){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var m=e.length,p=0,x=0,C="";for(l=0;l<m;l++)x=(x+(d=o[p=(p+1)%256]))%256,o[p]=o[x],o[x]=d,i=o[(o[p]+o[x])%256],C+=String.fromCharCode(e.charCodeAt(l)^i);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var z3={print:4,modify:8,copy:16,"annot-forms":32};function am(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(z3.perm!==void 0)throw new Error("Invalid permission: "+o);s+=z3[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=dS(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=fS(this.encryptionKey,this.padding)}function im(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function G3(t){if(_s(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[n]){var i=e[n][a];try{i[0].apply(t,r)}catch(o){qn.console&&Ls.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tw(t){if(!(this instanceof Tw))return new Tw(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function r8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xh(t,e,n,r,s){if(!(this instanceof xh))return new xh(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,r8.call(this,r,s)}function Am(t,e,n,r,s){if(!(this instanceof Am))return new Am(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,r8.call(this,r,s)}function En(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;_s(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,p={},x={internal:{},__private__:{}};x.__private__.PubSub=G3;var C="1.3",y=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(Y){C=Y};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return T};var I=x.__private__.getPageFormat=function(Y){return T[Y]};s=s||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},M=F.COMPAT;function O(){this.saveGraphicsState(),Ie(new rn(_t,0,0,-_t,0,si()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),u="n",M=F.ADVANCED}function Q(){this.restoreGraphicsState(),u="S",M=F.COMPAT}var j=x.__private__.combineFontStyleAndFontWeight=function(Y,ge){if(Y=="bold"&&ge=="normal"||Y=="bold"&&ge==400||Y=="normal"&&ge=="italic"||Y=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(Y=ge==400||ge==="normal"?Y==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||Y!=="normal"?(ge==700?"bold":ge)+""+Y:"bold"),Y};x.advancedAPI=function(Y){var ge=M===F.COMPAT;return ge&&O.call(this),typeof Y!="function"||(Y(this),ge&&Q.call(this)),this},x.compatAPI=function(Y){var ge=M===F.ADVANCED;return ge&&Q.call(this),typeof Y!="function"||(Y(this),ge&&O.call(this)),this},x.isAdvancedAPI=function(){return M===F.ADVANCED};var E,S=function(Y){if(M!==F.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=x.roundToPrecision=x.__private__.roundToPrecision=function(Y,ge){var Ue=e||ge;if(isNaN(Y)||isNaN(Ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(Ue).replace(/0+$/,"")};E=x.hpf=x.__private__.hpf=typeof l=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,l)}:l==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,16)};var z=x.f2=x.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return k(Y,2)},P=x.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return k(Y,3)},R=x.scale=x.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return M===F.COMPAT?Y*_t:M===F.ADVANCED?Y:void 0},G=function(Y){return M===F.COMPAT?si()-Y:M===F.ADVANCED?Y:void 0},q=function(Y){return R(G(Y))};x.__private__.setPrecision=x.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(e=parseInt(Y,10))};var le,ee="00000000000000000000000000000000",oe=x.__private__.getFileId=function(){return ee},K=x.__private__.setFileId=function(Y){return ee=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Gr=new am(d.userPermissions,d.userPassword,d.ownerPassword,ee)),ee};x.setFileId=function(Y){return K(Y),this},x.getFileId=function(){return oe()};var ne=x.__private__.convertDateToPDFDate=function(Y){var ge=Y.getTimezoneOffset(),Ue=ge<0?"+":"-",ze=Math.floor(Math.abs(ge/60)),Xe=Math.abs(ge%60),gt=[Ue,re(ze),"'",re(Xe),"'"].join("");return["D:",Y.getFullYear(),re(Y.getMonth()+1),re(Y.getDate()),re(Y.getHours()),re(Y.getMinutes()),re(Y.getSeconds()),gt].join("")},X=x.__private__.convertPDFDateToDate=function(Y){var ge=parseInt(Y.substr(2,4),10),Ue=parseInt(Y.substr(6,2),10)-1,ze=parseInt(Y.substr(8,2),10),Xe=parseInt(Y.substr(10,2),10),gt=parseInt(Y.substr(12,2),10),Rt=parseInt(Y.substr(14,2),10);return new Date(ge,Ue,ze,Xe,gt,Rt,0)},ce=x.__private__.setCreationDate=function(Y){var ge;if(Y===void 0&&(Y=new Date),Y instanceof Date)ge=ne(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=Y}return le=ge},V=x.__private__.getCreationDate=function(Y){var ge=le;return Y==="jsDate"&&(ge=X(le)),ge};x.setCreationDate=function(Y){return ce(Y),this},x.getCreationDate=function(Y){return V(Y)};var J,re=x.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},ie=x.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},fe=0,Se=[],ve=[],ye=0,we=[],me=[],he=!1,Ve=ve,nt=function(){fe=0,ye=0,ve=[],Se=[],we=[],Fe=Yt(),De=Yt()};x.__private__.setCustomOutputDestination=function(Y){he=!0,Ve=Y};var Oe=function(Y){he||(Ve=Y)};x.__private__.resetCustomOutputDestination=function(){he=!1,Ve=ve};var Ie=x.__private__.out=function(Y){return Y=Y.toString(),ye+=Y.length+1,Ve.push(Y),Ve},je=x.__private__.write=function(Y){return Ie(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},Ke=x.__private__.getArrayBuffer=function(Y){for(var ge=Y.length,Ue=new ArrayBuffer(ge),ze=new Uint8Array(Ue);ge--;)ze[ge]=Y.charCodeAt(ge);return Ue},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return st};var vt=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(Y){return vt=M===F.ADVANCED?Y/_t:Y,this};var Tt,xt=x.__private__.getFontSize=x.getFontSize=function(){return M===F.COMPAT?vt:vt*_t},Vt=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(Y){return Vt=Y,this},x.__private__.getR2L=x.getR2L=function(){return Vt};var Kt,cn=x.__private__.setZoomMode=function(Y){var ge=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Tt=Y;else if(isNaN(Y)){if(ge.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Tt=Y}else Tt=parseInt(Y,10)};x.__private__.getZoomMode=function(){return Tt};var Gt,Wt=x.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');Kt=Y};x.__private__.getPageMode=function(){return Kt};var sn=x.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');Gt=Y};x.__private__.getLayoutMode=function(){return Gt},x.__private__.setDisplayMode=x.setDisplayMode=function(Y,ge,Ue){return cn(Y),sn(ge),Wt(Ue),this};var Qt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(Y){if(Object.keys(Qt).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qt[Y]},x.__private__.getDocumentProperties=function(){return Qt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(Y){for(var ge in Qt)Qt.hasOwnProperty(ge)&&Y[ge]&&(Qt[ge]=Y[ge]);return this},x.__private__.setDocumentProperty=function(Y,ge){if(Object.keys(Qt).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qt[Y]=ge};var Ht,_t,On,An,Tr,In={},nr={},Lr=[],Zn={},ya={},wr={},us={},Is=null,lr=0,vn=[],Ar=new G3(x),wa=t.hotfixes||[],As={},zs={},oa=[],rn=function Y(ge,Ue,ze,Xe,gt,Rt){if(!(this instanceof Y))return new Y(ge,Ue,ze,Xe,gt,Rt);isNaN(ge)&&(ge=1),isNaN(Ue)&&(Ue=0),isNaN(ze)&&(ze=0),isNaN(Xe)&&(Xe=1),isNaN(gt)&&(gt=0),isNaN(Rt)&&(Rt=0),this._matrix=[ge,Ue,ze,Xe,gt,Rt]};Object.defineProperty(rn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(rn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(rn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(rn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(rn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(rn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(rn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(rn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(rn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(rn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(rn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(rn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(rn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rn.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(Y)},rn.prototype.multiply=function(Y){var ge=Y.sx*this.sx+Y.shy*this.shx,Ue=Y.sx*this.shy+Y.shy*this.sy,ze=Y.shx*this.sx+Y.sy*this.shx,Xe=Y.shx*this.shy+Y.sy*this.sy,gt=Y.tx*this.sx+Y.ty*this.shx+this.tx,Rt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new rn(ge,Ue,ze,Xe,gt,Rt)},rn.prototype.decompose=function(){var Y=this.sx,ge=this.shy,Ue=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty,Rt=Math.sqrt(Y*Y+ge*ge),qt=(Y/=Rt)*Ue+(ge/=Rt)*ze;Ue-=Y*qt,ze-=ge*qt;var B=Math.sqrt(Ue*Ue+ze*ze);return qt/=B,Y*(ze/=B)<ge*(Ue/=B)&&(Y=-Y,ge=-ge,qt=-qt,Rt=-Rt),{scale:new rn(Rt,0,0,B,0,0),translate:new rn(1,0,0,1,Xe,gt),rotate:new rn(Y,ge,-ge,Y,0,0),skew:new rn(1,0,qt,1,0,0)}},rn.prototype.toString=function(Y){return this.join(" ")},rn.prototype.inversed=function(){var Y=this.sx,ge=this.shy,Ue=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty,Rt=1/(Y*ze-ge*Ue),qt=ze*Rt,B=-ge*Rt,ae=-Ue*Rt,de=Y*Rt;return new rn(qt,B,ae,de,-qt*Xe-ae*gt,-B*Xe-de*gt)},rn.prototype.applyToPoint=function(Y){var ge=Y.x*this.sx+Y.y*this.shx+this.tx,Ue=Y.x*this.shy+Y.y*this.sy+this.ty;return new Bl(ge,Ue)},rn.prototype.applyToRectangle=function(Y){var ge=this.applyToPoint(Y),Ue=this.applyToPoint(new Bl(Y.x+Y.w,Y.y+Y.h));return new _i(ge.x,ge.y,Ue.x-ge.x,Ue.y-ge.y)},rn.prototype.clone=function(){var Y=this.sx,ge=this.shy,Ue=this.shx,ze=this.sy,Xe=this.tx,gt=this.ty;return new rn(Y,ge,Ue,ze,Xe,gt)},x.Matrix=rn;var Rr=x.matrixMult=function(Y,ge){return ge.multiply(Y)},Nr=new rn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Nr;var Xr=function(Y,ge){if(!ya[Y]){var Ue=(ge instanceof xh?"Sh":"P")+(Object.keys(Zn).length+1).toString(10);ge.id=Ue,ya[Y]=Ue,Zn[Ue]=ge,Ar.publish("addPattern",ge)}};x.ShadingPattern=xh,x.TilingPattern=Am,x.addShadingPattern=function(Y,ge){return S("addShadingPattern()"),Xr(Y,ge),this},x.beginTilingPattern=function(Y){S("beginTilingPattern()"),il(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},x.endTilingPattern=function(Y,ge){S("endTilingPattern()"),ge.stream=me[J].join(`
`),Xr(Y,ge),Ar.publish("endTilingPattern",ge),oa.pop().restore()};var br=x.__private__.newObject=function(){var Y=Yt();return be(Y,!0),Y},Yt=x.__private__.newObjectDeferred=function(){return fe++,Se[fe]=function(){return ye},fe},be=function(Y,ge){return ge=typeof ge=="boolean"&&ge,Se[Y]=ye,ge&&Ie(Y+" 0 obj"),Y},Pe=x.__private__.newAdditionalObject=function(){var Y={objId:Yt(),content:""};return we.push(Y),Y},Fe=Yt(),De=Yt(),Le=x.__private__.decodeColorString=function(Y){var ge=Y.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length===5&&(ge[4]==="k"||ge[4]==="K")&&(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var Ue=parseFloat(ge[0]);ge=[Ue,Ue,Ue,"r"]}for(var ze="#",Xe=0;Xe<3;Xe++)ze+=("0"+Math.floor(255*parseFloat(ge[Xe])).toString(16)).slice(-2);return ze},Me=x.__private__.encodeColorString=function(Y){var ge;typeof Y=="string"&&(Y={ch1:Y});var Ue=Y.ch1,ze=Y.ch2,Xe=Y.ch3,gt=Y.ch4,Rt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ue=="string"&&Ue.charAt(0)!=="#"){var qt=new t8(Ue);if(qt.ok)Ue=qt.toHex();else if(!/^\d*\.?\d*$/.test(Ue))throw new Error('Invalid color "'+Ue+'" passed to jsPDF.encodeColorString.')}if(typeof Ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ue)&&(Ue="#"+Ue[1]+Ue[1]+Ue[2]+Ue[2]+Ue[3]+Ue[3]),typeof Ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ue)){var B=parseInt(Ue.substr(1),16);Ue=B>>16&255,ze=B>>8&255,Xe=255&B}if(ze===void 0||gt===void 0&&Ue===ze&&ze===Xe)if(typeof Ue=="string")ge=Ue+" "+Rt[0];else switch(Y.precision){case 2:ge=z(Ue/255)+" "+Rt[0];break;case 3:default:ge=P(Ue/255)+" "+Rt[0]}else if(gt===void 0||_s(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return ge=["1.","1.","1.",Rt[1]].join(" ");if(typeof Ue=="string")ge=[Ue,ze,Xe,Rt[1]].join(" ");else switch(Y.precision){case 2:ge=[z(Ue/255),z(ze/255),z(Xe/255),Rt[1]].join(" ");break;default:case 3:ge=[P(Ue/255),P(ze/255),P(Xe/255),Rt[1]].join(" ")}}else if(typeof Ue=="string")ge=[Ue,ze,Xe,gt,Rt[2]].join(" ");else switch(Y.precision){case 2:ge=[z(Ue),z(ze),z(Xe),z(gt),Rt[2]].join(" ");break;case 3:default:ge=[P(Ue),P(ze),P(Xe),P(gt),Rt[2]].join(" ")}return ge},et=x.__private__.getFilters=function(){return i},dt=x.__private__.putStream=function(Y){var ge=(Y=Y||{}).data||"",Ue=Y.filters||et(),ze=Y.alreadyAppliedFilters||[],Xe=Y.addLength1||!1,gt=ge.length,Rt=Y.objectId,qt=function(Ln){return Ln};if(d!==null&&Rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(qt=Gr.encryptor(Rt,0));var B={};Ue===!0&&(Ue=["FlateEncode"]);var ae=Y.additionalKeyValues||[],de=(B=En.API.processDataByFilters!==void 0?En.API.processDataByFilters(ge,Ue):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(ze)?ze.join(" "):ze.toString());if(B.data.length!==0&&(ae.push({key:"Length",value:B.data.length}),Xe===!0&&ae.push({key:"Length1",value:gt})),de.length!=0)if(de.split("/").length-1==1)ae.push({key:"Filter",value:de});else{ae.push({key:"Filter",value:"["+de+"]"});for(var Te=0;Te<ae.length;Te+=1)if(ae[Te].key==="DecodeParms"){for(var We=[],ot=0;ot<B.reverseChain.split("/").length-1;ot+=1)We.push("null");We.push(ae[Te].value),ae[Te].value="["+We.join(" ")+"]"}}Ie("<<");for(var Pt=0;Pt<ae.length;Pt++)Ie("/"+ae[Pt].key+" "+ae[Pt].value);Ie(">>"),B.data.length!==0&&(Ie("stream"),Ie(qt(B.data)),Ie("endstream"))},Je=x.__private__.putPage=function(Y){var ge=Y.number,Ue=Y.data,ze=Y.objId,Xe=Y.contentsObjId;be(ze,!0),Ie("<</Type /Page"),Ie("/Parent "+Y.rootDictionaryObjId+" 0 R"),Ie("/Resources "+Y.resourceDictionaryObjId+" 0 R"),Ie("/MediaBox ["+parseFloat(E(Y.mediaBox.bottomLeftX))+" "+parseFloat(E(Y.mediaBox.bottomLeftY))+" "+E(Y.mediaBox.topRightX)+" "+E(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&Ie("/CropBox ["+E(Y.cropBox.bottomLeftX)+" "+E(Y.cropBox.bottomLeftY)+" "+E(Y.cropBox.topRightX)+" "+E(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&Ie("/BleedBox ["+E(Y.bleedBox.bottomLeftX)+" "+E(Y.bleedBox.bottomLeftY)+" "+E(Y.bleedBox.topRightX)+" "+E(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&Ie("/TrimBox ["+E(Y.trimBox.bottomLeftX)+" "+E(Y.trimBox.bottomLeftY)+" "+E(Y.trimBox.topRightX)+" "+E(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&Ie("/ArtBox ["+E(Y.artBox.bottomLeftX)+" "+E(Y.artBox.bottomLeftY)+" "+E(Y.artBox.topRightX)+" "+E(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&Ie("/UserUnit "+Y.userUnit),Ar.publish("putPage",{objId:ze,pageContext:vn[ge],pageNumber:ge,page:Ue}),Ie("/Contents "+Xe+" 0 R"),Ie(">>"),Ie("endobj");var gt=Ue.join(`
`);return M===F.ADVANCED&&(gt+=`
Q`),be(Xe,!0),dt({data:gt,filters:et(),objectId:Xe}),Ie("endobj"),ze},at=x.__private__.putPages=function(){var Y,ge,Ue=[];for(Y=1;Y<=lr;Y++)vn[Y].objId=Yt(),vn[Y].contentsObjId=Yt();for(Y=1;Y<=lr;Y++)Ue.push(Je({number:Y,data:me[Y],objId:vn[Y].objId,contentsObjId:vn[Y].contentsObjId,mediaBox:vn[Y].mediaBox,cropBox:vn[Y].cropBox,bleedBox:vn[Y].bleedBox,trimBox:vn[Y].trimBox,artBox:vn[Y].artBox,userUnit:vn[Y].userUnit,rootDictionaryObjId:Fe,resourceDictionaryObjId:De}));be(Fe,!0),Ie("<</Type /Pages");var ze="/Kids [";for(ge=0;ge<lr;ge++)ze+=Ue[ge]+" 0 R ";Ie(ze+"]"),Ie("/Count "+lr),Ie(">>"),Ie("endobj"),Ar.publish("postPutPages")},ct=function(Y){Ar.publish("putFont",{font:Y,out:Ie,newObject:br,putStream:dt}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=br(),Ie("<<"),Ie("/Type /Font"),Ie("/BaseFont /"+im(Y.postScriptName)),Ie("/Subtype /Type1"),typeof Y.encoding=="string"&&Ie("/Encoding /"+Y.encoding),Ie("/FirstChar 32"),Ie("/LastChar 255"),Ie(">>"),Ie("endobj"))},Bt=function(){for(var Y in In)In.hasOwnProperty(Y)&&(m===!1||m===!0&&p.hasOwnProperty(Y))&&ct(In[Y])},jt=function(Y){Y.objectNumber=br();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[E(Y.x),E(Y.y),E(Y.x+Y.width),E(Y.y+Y.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var Ue=Y.pages[1].join(`
`);dt({data:Ue,additionalKeyValues:ge,objectId:Y.objectNumber}),Ie("endobj")},Jt=function(){for(var Y in As)As.hasOwnProperty(Y)&&jt(As[Y])},Ot=function(Y,ge){var Ue,ze=[],Xe=1/(ge-1);for(Ue=0;Ue<1;Ue+=Xe)ze.push(Ue);if(ze.push(1),Y[0].offset!=0){var gt={offset:0,color:Y[0].color};Y.unshift(gt)}if(Y[Y.length-1].offset!=1){var Rt={offset:1,color:Y[Y.length-1].color};Y.push(Rt)}for(var qt="",B=0,ae=0;ae<ze.length;ae++){for(Ue=ze[ae];Ue>Y[B+1].offset;)B++;var de=Y[B].offset,Te=(Ue-de)/(Y[B+1].offset-de),We=Y[B].color,ot=Y[B+1].color;qt+=ie(Math.round((1-Te)*We[0]+Te*ot[0]).toString(16))+ie(Math.round((1-Te)*We[1]+Te*ot[1]).toString(16))+ie(Math.round((1-Te)*We[2]+Te*ot[2]).toString(16))}return qt.trim()},$t=function(Y,ge){ge||(ge=21);var Ue=br(),ze=Ot(Y.colors,ge),Xe=[];Xe.push({key:"FunctionType",value:"0"}),Xe.push({key:"Domain",value:"[0.0 1.0]"}),Xe.push({key:"Size",value:"["+ge+"]"}),Xe.push({key:"BitsPerSample",value:"8"}),Xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:ze,additionalKeyValues:Xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ue}),Ie("endobj"),Y.objectNumber=br(),Ie("<< /ShadingType "+Y.type),Ie("/ColorSpace /DeviceRGB");var gt="/Coords ["+E(parseFloat(Y.coords[0]))+" "+E(parseFloat(Y.coords[1]))+" ";Y.type===2?gt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3])):gt+=E(parseFloat(Y.coords[2]))+" "+E(parseFloat(Y.coords[3]))+" "+E(parseFloat(Y.coords[4]))+" "+E(parseFloat(Y.coords[5])),Ie(gt+="]"),Y.matrix&&Ie("/Matrix ["+Y.matrix.toString()+"]"),Ie("/Function "+Ue+" 0 R"),Ie("/Extend [true true]"),Ie(">>"),Ie("endobj")},Cn=function(Y,ge){var Ue=Yt(),ze=br();ge.push({resourcesOid:Ue,objectOid:ze}),Y.objectNumber=ze;var Xe=[];Xe.push({key:"Type",value:"/Pattern"}),Xe.push({key:"PatternType",value:"1"}),Xe.push({key:"PaintType",value:"1"}),Xe.push({key:"TilingType",value:"1"}),Xe.push({key:"BBox",value:"["+Y.boundingBox.map(E).join(" ")+"]"}),Xe.push({key:"XStep",value:E(Y.xStep)}),Xe.push({key:"YStep",value:E(Y.yStep)}),Xe.push({key:"Resources",value:Ue+" 0 R"}),Y.matrix&&Xe.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),dt({data:Y.stream,additionalKeyValues:Xe,objectId:Y.objectNumber}),Ie("endobj")},cr=function(Y){var ge;for(ge in Zn)Zn.hasOwnProperty(ge)&&(Zn[ge]instanceof xh?$t(Zn[ge]):Zn[ge]instanceof Am&&Cn(Zn[ge],Y))},ur=function(Y){for(var ge in Y.objectNumber=br(),Ie("<<"),Y)switch(ge){case"opacity":Ie("/ca "+z(Y[ge]));break;case"stroke-opacity":Ie("/CA "+z(Y[ge]))}Ie(">>"),Ie("endobj")},dr=function(){var Y;for(Y in wr)wr.hasOwnProperty(Y)&&ur(wr[Y])},Rs=function(){for(var Y in Ie("/XObject <<"),As)As.hasOwnProperty(Y)&&As[Y].objectNumber>=0&&Ie("/"+Y+" "+As[Y].objectNumber+" 0 R");Ar.publish("putXobjectDict"),Ie(">>")},ba=function(){Gr.oid=br(),Ie("<<"),Ie("/Filter /Standard"),Ie("/V "+Gr.v),Ie("/R "+Gr.r),Ie("/U <"+Gr.toHexString(Gr.U)+">"),Ie("/O <"+Gr.toHexString(Gr.O)+">"),Ie("/P "+Gr.P),Ie(">>"),Ie("endobj")},Gs=function(){for(var Y in Ie("/Font <<"),In)In.hasOwnProperty(Y)&&(m===!1||m===!0&&p.hasOwnProperty(Y))&&Ie("/"+Y+" "+In[Y].objectNumber+" 0 R");Ie(">>")},la=function(){if(Object.keys(Zn).length>0){for(var Y in Ie("/Shading <<"),Zn)Zn.hasOwnProperty(Y)&&Zn[Y]instanceof xh&&Zn[Y].objectNumber>=0&&Ie("/"+Y+" "+Zn[Y].objectNumber+" 0 R");Ar.publish("putShadingPatternDict"),Ie(">>")}},Fs=function(Y){if(Object.keys(Zn).length>0){for(var ge in Ie("/Pattern <<"),Zn)Zn.hasOwnProperty(ge)&&Zn[ge]instanceof x.TilingPattern&&Zn[ge].objectNumber>=0&&Zn[ge].objectNumber<Y&&Ie("/"+ge+" "+Zn[ge].objectNumber+" 0 R");Ar.publish("putTilingPatternDict"),Ie(">>")}},Rn=function(){if(Object.keys(wr).length>0){var Y;for(Y in Ie("/ExtGState <<"),wr)wr.hasOwnProperty(Y)&&wr[Y].objectNumber>=0&&Ie("/"+Y+" "+wr[Y].objectNumber+" 0 R");Ar.publish("putGStateDict"),Ie(">>")}},Pn=function(Y){be(Y.resourcesOid,!0),Ie("<<"),Ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Gs(),la(),Fs(Y.objectOid),Rn(),Rs(),Ie(">>"),Ie("endobj")},qs=function(){var Y=[];Bt(),dr(),Jt(),cr(Y),Ar.publish("putResources"),Y.forEach(Pn),Pn({resourcesOid:De,objectOid:Number.MAX_SAFE_INTEGER}),Ar.publish("postPutResources")},Ji=function(){Ar.publish("putAdditionalObjects");for(var Y=0;Y<we.length;Y++){var ge=we[Y];be(ge.objId,!0),Ie(ge.content),Ie("endobj")}Ar.publish("postPutAdditionalObjects")},tl=function(Y){nr[Y.fontName]=nr[Y.fontName]||{},nr[Y.fontName][Y.fontStyle]=Y.id},bo=function(Y,ge,Ue,ze,Xe){var gt={id:"F"+(Object.keys(In).length+1).toString(10),postScriptName:Y,fontName:ge,fontStyle:Ue,encoding:ze,isStandardFont:Xe||!1,metadata:{}};return Ar.publish("addFont",{font:gt,instance:this}),In[gt.id]=gt,tl(gt),gt.id},Qn=function(Y){for(var ge=0,Ue=st.length;ge<Ue;ge++){var ze=bo.call(this,Y[ge][0],Y[ge][1],Y[ge][2],st[ge][3],!0);m===!1&&(p[ze]=!0);var Xe=Y[ge][0].split("-");tl({id:ze,fontName:Xe[0],fontStyle:Xe[1]||""})}Ar.publish("addFonts",{fonts:In,dictionary:nr})},pr=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(ze){var ge=ze.stack||"";~ge.indexOf(" at ")&&(ge=ge.split(" at ")[1]);var Ue="Error in function "+ge.split(`
`)[0].split("<")[0]+": "+ze.message;if(!qn.console)throw new Error(Ue);qn.console.error(Ue,ze),qn.alert&&alert(Ue)}},Y.foo.bar=Y,Y.foo},bl=function(Y,ge){var Ue,ze,Xe,gt,Rt,qt,B,ae,de;if(Xe=(ge=ge||{}).sourceEncoding||"Unicode",Rt=ge.outputEncoding,(ge.autoencode||Rt)&&In[Ht].metadata&&In[Ht].metadata[Xe]&&In[Ht].metadata[Xe].encoding&&(gt=In[Ht].metadata[Xe].encoding,!Rt&&In[Ht].encoding&&(Rt=In[Ht].encoding),!Rt&&gt.codePages&&(Rt=gt.codePages[0]),typeof Rt=="string"&&(Rt=gt[Rt]),Rt)){for(B=!1,qt=[],Ue=0,ze=Y.length;Ue<ze;Ue++)(ae=Rt[Y.charCodeAt(Ue)])?qt.push(String.fromCharCode(ae)):qt.push(Y[Ue]),qt[Ue].charCodeAt(0)>>8&&(B=!0);Y=qt.join("")}for(Ue=Y.length;B===void 0&&Ue!==0;)Y.charCodeAt(Ue-1)>>8&&(B=!0),Ue--;if(!B)return Y;for(qt=ge.noBOM?[]:[254,255],Ue=0,ze=Y.length;Ue<ze;Ue++){if((de=(ae=Y.charCodeAt(Ue))>>8)>>8)throw new Error("Character at position "+Ue+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(de),qt.push(ae-(de<<8))}return String.fromCharCode.apply(void 0,qt)},_r=x.__private__.pdfEscape=x.pdfEscape=function(Y,ge){return bl(Y,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rs=x.__private__.beginPage=function(Y){me[++lr]=[],vn[lr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},_a(lr),Oe(me[J])},_l=function(Y,ge){var Ue,ze,Xe;switch(n=ge||n,typeof Y=="string"&&(Ue=I(Y.toLowerCase()),Array.isArray(Ue)&&(ze=Ue[0],Xe=Ue[1])),Array.isArray(Y)&&(ze=Y[0]*_t,Xe=Y[1]*_t),isNaN(ze)&&(ze=s[0],Xe=s[1]),(ze>14400||Xe>14400)&&(Ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ze=Math.min(14400,ze),Xe=Math.min(14400,Xe)),s=[ze,Xe],n.substr(0,1)){case"l":Xe>ze&&(s=[Xe,ze]);break;case"p":ze>Xe&&(s=[Xe,ze])}rs(s),lu(al),Ie(ca),uu!==0&&Ie(uu+" J"),Ea!==0&&Ie(Ea+" j"),Ar.publish("addPage",{pageNumber:lr})},Zi=function(Y){Y>0&&Y<=lr&&(me.splice(Y,1),vn.splice(Y,1),lr--,J>lr&&(J=lr),this.setPage(J))},_a=function(Y){Y>0&&Y<=lr&&(J=Y)},Fn=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return me.length-1},ti=function(Y,ge,Ue){var ze,Xe=void 0;return Ue=Ue||{},Y=Y!==void 0?Y:In[Ht].fontName,ge=ge!==void 0?ge:In[Ht].fontStyle,ze=Y.toLowerCase(),nr[ze]!==void 0&&nr[ze][ge]!==void 0?Xe=nr[ze][ge]:nr[Y]!==void 0&&nr[Y][ge]!==void 0?Xe=nr[Y][ge]:Ue.disableWarning===!1&&Ls.warn("Unable to look up font label for font '"+Y+"', '"+ge+"'. Refer to getFontList() for available fonts."),Xe||Ue.noFallback||(Xe=nr.times[ge])==null&&(Xe=nr.times.normal),Xe},Ca=x.__private__.putInfo=function(){var Y=br(),ge=function(ze){return ze};for(var Ue in d!==null&&(ge=Gr.encryptor(Y,0)),Ie("<<"),Ie("/Producer ("+_r(ge("jsPDF "+En.version))+")"),Qt)Qt.hasOwnProperty(Ue)&&Qt[Ue]&&Ie("/"+Ue.substr(0,1).toUpperCase()+Ue.substr(1)+" ("+_r(ge(Qt[Ue]))+")");Ie("/CreationDate ("+_r(ge(le))+")"),Ie(">>"),Ie("endobj")},yi=x.__private__.putCatalog=function(Y){var ge=(Y=Y||{}).rootDictionaryObjId||Fe;switch(br(),Ie("<<"),Ie("/Type /Catalog"),Ie("/Pages "+ge+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":Ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ie("/OpenAction [3 0 R /Fit]");break;case"original":Ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ue=""+Tt;Ue.substr(Ue.length-1)==="%"&&(Tt=parseInt(Tt)/100),typeof Tt=="number"&&Ie("/OpenAction [3 0 R /XYZ null null "+z(Tt)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":Ie("/PageLayout /OneColumn");break;case"single":Ie("/PageLayout /SinglePage");break;case"two":case"twoleft":Ie("/PageLayout /TwoColumnLeft");break;case"tworight":Ie("/PageLayout /TwoColumnRight")}Kt&&Ie("/PageMode /"+Kt),Ar.publish("putCatalog"),Ie(">>"),Ie("endobj")},Tc=x.__private__.putTrailer=function(){Ie("trailer"),Ie("<<"),Ie("/Size "+(fe+1)),Ie("/Root "+fe+" 0 R"),Ie("/Info "+(fe-1)+" 0 R"),d!==null&&Ie("/Encrypt "+Gr.oid+" 0 R"),Ie("/ID [ <"+ee+"> <"+ee+"> ]"),Ie(">>")},nl=x.__private__.putHeader=function(){Ie("%PDF-"+C),Ie("%ºß¬à")},Jl=x.__private__.putXRef=function(){var Y="0000000000";Ie("xref"),Ie("0 "+(fe+1)),Ie("0000000000 65535 f ");for(var ge=1;ge<=fe;ge++)typeof Se[ge]=="function"?Ie((Y+Se[ge]()).slice(-10)+" 00000 n "):Se[ge]!==void 0?Ie((Y+Se[ge]).slice(-10)+" 00000 n "):Ie("0000000000 00000 n ")},eo=x.__private__.buildDocument=function(){nt(),Oe(ve),Ar.publish("buildDocument"),nl(),at(),Ji(),qs(),d!==null&&ba(),Ca(),yi();var Y=ye;return Jl(),Tc(),Ie("startxref"),Ie(""+Y),Ie("%%EOF"),Oe(me[J]),ve.join(`
`)},rl=x.__private__.getBlob=function(Y){return new Blob([Ke(Y)],{type:"application/pdf"})},to=x.output=x.__private__.output=pr(function(Y,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",Y){case void 0:return eo();case"save":x.save(ge.filename);break;case"arraybuffer":return Ke(eo());case"blob":return rl(eo());case"bloburi":case"bloburl":if(qn.URL!==void 0&&typeof qn.URL.createObjectURL=="function")return qn.URL&&qn.URL.createObjectURL(rl(eo()))||void 0;Ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ue="",ze=eo();try{Ue=AS(ze)}catch{Ue=AS(unescape(encodeURIComponent(ze)))}return"data:application/pdf;filename="+ge.filename+";base64,"+Ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qn)==="[object Window]"){var Xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(Xe=ge.pdfObjectUrl,gt="");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Xe+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",qt=qn.open();return qt!==null&&qt.document.write(Rt),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qn)==="[object Window]"){var B='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',ae=qn.open();if(ae!==null){ae.document.write(B);var de=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=ge.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(de.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Te='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',We=qn.open();if(We!==null&&(We.document.write(Te),We.document.title=ge.filename),We||typeof safari>"u")return We;break;case"datauri":case"dataurl":return qn.document.location.href=this.output("datauristring",ge);default:return null}}),Fi=function(Y){return Array.isArray(wa)===!0&&wa.indexOf(Y)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=Fi("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var Gr=null;ce(),K();var _o=function(Y){return d!==null?Gr.encryptor(Y,0):function(ge){return ge}},Di=x.__private__.getPageInfo=x.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vn[Y].objId,pageNumber:Y,pageContext:vn[Y]}},Dn=x.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in vn)if(vn[ge].objId===Y)break;return Di(ge)},bn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:vn[J].objId,pageNumber:J,pageContext:vn[J]}};x.addPage=function(){return _l.apply(this,arguments),this},x.setPage=function(){return _a.apply(this,arguments),Oe.call(this,me[J]),this},x.insertPage=function(Y){return this.addPage(),this.movePage(J,Y),this},x.movePage=function(Y,ge){var Ue,ze;if(Y>ge){Ue=me[Y],ze=vn[Y];for(var Xe=Y;Xe>ge;Xe--)me[Xe]=me[Xe-1],vn[Xe]=vn[Xe-1];me[ge]=Ue,vn[ge]=ze,this.setPage(ge)}else if(Y<ge){Ue=me[Y],ze=vn[Y];for(var gt=Y;gt<ge;gt++)me[gt]=me[gt+1],vn[gt]=vn[gt+1];me[ge]=Ue,vn[ge]=ze,this.setPage(ge)}return this},x.deletePage=function(){return Zi.apply(this,arguments),this},x.__private__.text=x.text=function(Y,ge,Ue,ze,Xe){var gt,Rt,qt,B,ae,de,Te,We,ot,Pt=(ze=ze||{}).scope||this;if(typeof Y=="number"&&typeof ge=="number"&&(typeof Ue=="string"||Array.isArray(Ue))){var Ln=Ue;Ue=ge,ge=Y,Y=Ln}if(arguments[3]instanceof rn?(S("The transform parameter of text() with a Matrix value"),ot=Xe):(qt=arguments[4],B=arguments[5],_s(Te=arguments[3])==="object"&&Te!==null||(typeof qt=="string"&&(B=qt,qt=null),typeof Te=="string"&&(B=Te,Te=null),typeof Te=="number"&&(qt=Te,Te=null),ze={flags:Te,angle:qt,align:B})),isNaN(ge)||isNaN(Ue)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Pt;var gr="",Yn=!1,ar=typeof ze.lineHeightFactor=="number"?ze.lineHeightFactor:Cr,Pr=Pt.internal.scaleFactor;function Eo(fr){return fr=fr.split("	").join(Array(ze.TabLen||9).join(" ")),_r(fr,Te)}function Jr(fr){for(var hr,fs=fr.concat(),Zr=[],io=fs.length;io--;)typeof(hr=fs.shift())=="string"?Zr.push(hr):Array.isArray(fr)&&(hr.length===1||hr[1]===void 0&&hr[2]===void 0)?Zr.push(hr[0]):Zr.push([hr[0],hr[1],hr[2]]);return Zr}function Pi(fr,hr){var fs;if(typeof fr=="string")fs=hr(fr)[0];else if(Array.isArray(fr)){for(var Zr,io,nc=fr.concat(),No=[],rc=nc.length;rc--;)typeof(Zr=nc.shift())=="string"?No.push(hr(Zr)[0]):Array.isArray(Zr)&&typeof Zr[0]=="string"&&(io=hr(Zr[0],Zr[1],Zr[2]),No.push([io[0],io[1],io[2]]));fs=No}return fs}var Ci=!1,Ic=!0;if(typeof Y=="string")Ci=!0;else if(Array.isArray(Y)){var Fl=Y.concat();Rt=[];for(var Fc,Ms=Fl.length;Ms--;)(typeof(Fc=Fl.shift())!="string"||Array.isArray(Fc)&&typeof Fc[0]!="string")&&(Ic=!1);Ci=Ic}if(Ci===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var Dc=vt/Pt.internal.scaleFactor,Mi=Dc*(ar-1);switch(ze.baseline){case"bottom":Ue-=Mi;break;case"top":Ue+=Dc-Mi;break;case"hanging":Ue+=Dc-2*Mi;break;case"middle":Ue+=Dc/2-Mi}if((de=ze.maxWidth||0)>0&&(typeof Y=="string"?Y=Pt.splitTextToSize(Y,de):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(fr,hr){return fr.concat(Pt.splitTextToSize(hr,de))},[]))),gt={text:Y,x:ge,y:Ue,options:ze,mutex:{pdfEscape:_r,activeFontKey:Ht,fonts:In,activeFontSize:vt}},Ar.publish("preProcessText",gt),Y=gt.text,qt=(ze=gt.options).angle,!(ot instanceof rn)&&qt&&typeof qt=="number"){qt*=Math.PI/180,ze.rotationDirection===0&&(qt=-qt),M===F.ADVANCED&&(qt=-qt);var Dl=Math.cos(qt),ju=Math.sin(qt);ot=new rn(Dl,ju,-ju,Dl,0,0)}else qt&&qt instanceof rn&&(ot=qt);M!==F.ADVANCED||ot||(ot=Nr),(ae=ze.charSpace||Zl)!==void 0&&(gr+=E(R(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(We=ze.horizontalScale)!==void 0&&(gr+=E(100*We)+` Tz
`),ze.lang;var ai=-1,$f=ze.renderingMode!==void 0?ze.renderingMode:ze.stroke,ao=Pt.internal.getCurrentPageInfo().pageContext;switch($f){case 0:case!1:case"fill":ai=0;break;case 1:case!0:case"stroke":ai=1;break;case 2:case"fillThenStroke":ai=2;break;case 3:case"invisible":ai=3;break;case 4:case"fillAndAddForClipping":ai=4;break;case 5:case"strokeAndAddPathForClipping":ai=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ai=6;break;case 7:case"addToPathForClipping":ai=7}var vd=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;ai!==-1?gr+=ai+` Tr
`:vd!==-1&&(gr+=`0 Tr
`),ai!==-1&&(ao.usedRenderingMode=ai),B=ze.align||"left";var Oa,Sa=vt*ar,ii=Pt.internal.pageSize.getWidth(),Lc=In[Ht];ae=ze.charSpace||Zl,de=ze.maxWidth||0,Te=Object.assign({autoencode:!0,noBOM:!0},ze.flags);var Ll=[],Rl=function(fr){return Pt.getStringUnitWidth(fr,{font:Lc,charSpace:ae,fontSize:vt,doKerning:!1})*vt/Pr};if(Object.prototype.toString.call(Y)==="[object Array]"){var Ta;Rt=Jr(Y),B!=="left"&&(Oa=Rt.map(Rl));var ua,cl=0;if(B==="right"){ge-=Oa[0],Y=[],Ms=Rt.length;for(var Aa=0;Aa<Ms;Aa++)Aa===0?(ua=ds(ge),Ta=Ss(Ue)):(ua=R(cl-Oa[Aa]),Ta=-Sa),Y.push([Rt[Aa],ua,Ta]),cl=Oa[Aa]}else if(B==="center"){ge-=Oa[0]/2,Y=[],Ms=Rt.length;for(var Ui=0;Ui<Ms;Ui++)Ui===0?(ua=ds(ge),Ta=Ss(Ue)):(ua=R((cl-Oa[Ui])/2),Ta=-Sa),Y.push([Rt[Ui],ua,Ta]),cl=Oa[Ui]}else if(B==="left"){Y=[],Ms=Rt.length;for(var So=0;So<Ms;So++)Y.push(Rt[So])}else if(B==="justify"&&Lc.encoding==="Identity-H"){Y=[],Ms=Rt.length,de=de!==0?de:ii;for(var To=0,Us=0;Us<Ms;Us++)if(Ta=Us===0?Ss(Ue):-Sa,ua=Us===0?ds(ge):To,Us<Ms-1){var Oi=R((de-Oa[Us])/(Rt[Us].split(" ").length-1)),ra=Rt[Us].split(" ");Y.push([ra[0]+" ",ua,Ta]),To=0;for(var Ei=1;Ei<ra.length;Ei++){var Au=(Rl(ra[Ei-1]+" "+ra[Ei])-Rl(ra[Ei]))*Pr+Oi;Ei==ra.length-1?Y.push([ra[Ei],Au,0]):Y.push([ra[Ei]+" ",Au,0]),To-=Au}}else Y.push([Rt[Us],ua,Ta]);Y.push(["",To,0])}else{if(B!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],Ms=Rt.length,de=de!==0?de:ii,Us=0;Us<Ms;Us++)Ta=Us===0?Ss(Ue):-Sa,ua=Us===0?ds(ge):0,Us<Ms-1?Ll.push(E(R((de-Oa[Us])/(Rt[Us].split(" ").length-1)))):Ll.push(0),Y.push([Rt[Us],ua,Ta])}}var ul=typeof ze.R2L=="boolean"?ze.R2L:Vt;ul===!0&&(Y=Pi(Y,function(fr,hr,fs){return[fr.split("").reverse().join(""),hr,fs]})),gt={text:Y,x:ge,y:Ue,options:ze,mutex:{pdfEscape:_r,activeFontKey:Ht,fonts:In,activeFontSize:vt}},Ar.publish("postProcessText",gt),Y=gt.text,Yn=gt.mutex.isHex||!1;var Qu=In[Ht].encoding;Qu!=="WinAnsiEncoding"&&Qu!=="StandardEncoding"||(Y=Pi(Y,function(fr,hr,fs){return[Eo(fr),hr,fs]})),Rt=Jr(Y),Y=[];for(var ja,Al,Rc,Pl=0,Hu=1,ec=Array.isArray(Rt[0])?Hu:Pl,tc="",dl=function(fr,hr,fs){var Zr="";return fs instanceof rn?(fs=typeof ze.angle=="number"?Rr(fs,new rn(1,0,0,1,fr,hr)):Rr(new rn(1,0,0,1,fr,hr),fs),M===F.ADVANCED&&(fs=Rr(new rn(1,0,0,-1,0,0),fs)),Zr=fs.join(" ")+` Tm
`):Zr=E(fr)+" "+E(hr)+` Td
`,Zr},Os=0;Os<Rt.length;Os++){switch(tc="",ec){case Hu:Rc=(Yn?"<":"(")+Rt[Os][0]+(Yn?">":")"),ja=parseFloat(Rt[Os][1]),Al=parseFloat(Rt[Os][2]);break;case Pl:Rc=(Yn?"<":"(")+Rt[Os]+(Yn?">":")"),ja=ds(ge),Al=Ss(Ue)}Ll!==void 0&&Ll[Os]!==void 0&&(tc=Ll[Os]+` Tw
`),Os===0?Y.push(tc+dl(ja,Al,ot)+Rc):ec===Pl?Y.push(tc+Rc):ec===Hu&&Y.push(tc+dl(ja,Al,ot)+Rc)}Y=ec===Pl?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Na=`BT
/`;return Na+=Ht+" "+vt+` Tf
`,Na+=E(vt*ar)+` TL
`,Na+=Co+`
`,Na+=gr,Na+=Y,Ie(Na+="ET"),p[Ht]=!0,Pt};var wi=x.__private__.clip=x.clip=function(Y){return Ie(Y==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return wi("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Ie("n"),this};var rr=x.__private__.isValidStyle=function(Y){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(ge=!0),ge};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(Y){return rr(Y)&&(u=Y),this};var bi=x.__private__.getStyle=x.getStyle=function(Y){var ge=u;switch(Y){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=Y}return ge},Ua=x.close=function(){return Ie("h"),this};x.stroke=function(){return Ie("S"),this},x.fill=function(Y){return Li("f",Y),this},x.fillEvenOdd=function(Y){return Li("f*",Y),this},x.fillStroke=function(Y){return Li("B",Y),this},x.fillStrokeEvenOdd=function(Y){return Li("B*",Y),this};var Li=function(Y,ge){_s(ge)==="object"?no(ge,Y):Ie(Y)},ni=function(Y){Y===null||M===F.ADVANCED&&Y===void 0||(Y=bi(Y),Ie(Y))};function ri(Y,ge,Ue,ze,Xe){var gt=new Am(ge||this.boundingBox,Ue||this.xStep,ze||this.yStep,this.gState,Xe||this.matrix);gt.stream=this.stream;var Rt=Y+"$$"+this.cloneIndex+++"$$";return Xr(Rt,gt),gt}var no=function(Y,ge){var Ue=ya[Y.key],ze=Zn[Ue];if(ze instanceof xh)Ie("q"),Ie(sl(ge)),ze.gState&&x.setGState(ze.gState),Ie(Y.matrix.toString()+" cm"),Ie("/"+Ue+" sh"),Ie("Q");else if(ze instanceof Am){var Xe=new rn(1,0,0,-1,0,si());Y.matrix&&(Xe=Xe.multiply(Y.matrix||Nr),Ue=ri.call(ze,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Xe).id),Ie("q"),Ie("/Pattern cs"),Ie("/"+Ue+" scn"),ze.gState&&x.setGState(ze.gState),Ie(ge),Ie("Q")}},sl=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},qr=x.moveTo=function(Y,ge){return Ie(E(R(Y))+" "+E(q(ge))+" m"),this},Ps=x.lineTo=function(Y,ge){return Ie(E(R(Y))+" "+E(q(ge))+" l"),this},ro=x.curveTo=function(Y,ge,Ue,ze,Xe,gt){return Ie([E(R(Y)),E(q(ge)),E(R(Ue)),E(q(ze)),E(R(Xe)),E(q(gt)),"c"].join(" ")),this};x.__private__.line=x.line=function(Y,ge,Ue,ze,Xe){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||isNaN(ze)||!rr(Xe))throw new Error("Invalid arguments passed to jsPDF.line");return M===F.COMPAT?this.lines([[Ue-Y,ze-ge]],Y,ge,[1,1],Xe||"S"):this.lines([[Ue-Y,ze-ge]],Y,ge,[1,1]).stroke()},x.__private__.lines=x.lines=function(Y,ge,Ue,ze,Xe,gt){var Rt,qt,B,ae,de,Te,We,ot,Pt,Ln,gr,Yn;if(typeof Y=="number"&&(Yn=Ue,Ue=ge,ge=Y,Y=Yn),ze=ze||[1,1],gt=gt||!1,isNaN(ge)||isNaN(Ue)||!Array.isArray(Y)||!Array.isArray(ze)||!rr(Xe)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qr(ge,Ue),Rt=ze[0],qt=ze[1],ae=Y.length,Ln=ge,gr=Ue,B=0;B<ae;B++)(de=Y[B]).length===2?(Ln=de[0]*Rt+Ln,gr=de[1]*qt+gr,Ps(Ln,gr)):(Te=de[0]*Rt+Ln,We=de[1]*qt+gr,ot=de[2]*Rt+Ln,Pt=de[3]*qt+gr,Ln=de[4]*Rt+Ln,gr=de[5]*qt+gr,ro(Te,We,ot,Pt,Ln,gr));return gt&&Ua(),ni(Xe),this},x.path=function(Y){for(var ge=0;ge<Y.length;ge++){var Ue=Y[ge],ze=Ue.c;switch(Ue.op){case"m":qr(ze[0],ze[1]);break;case"l":Ps(ze[0],ze[1]);break;case"c":ro.apply(this,ze);break;case"h":Ua()}}return this},x.__private__.rect=x.rect=function(Y,ge,Ue,ze,Xe){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||isNaN(ze)||!rr(Xe))throw new Error("Invalid arguments passed to jsPDF.rect");return M===F.COMPAT&&(ze=-ze),Ie([E(R(Y)),E(q(ge)),E(R(Ue)),E(R(ze)),"re"].join(" ")),ni(Xe),this},x.__private__.triangle=x.triangle=function(Y,ge,Ue,ze,Xe,gt,Rt){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||isNaN(ze)||isNaN(Xe)||isNaN(gt)||!rr(Rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ue-Y,ze-ge],[Xe-Ue,gt-ze],[Y-Xe,ge-gt]],Y,ge,[1,1],Rt,!0),this},x.__private__.roundedRect=x.roundedRect=function(Y,ge,Ue,ze,Xe,gt,Rt){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||isNaN(ze)||isNaN(Xe)||isNaN(gt)||!rr(Rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return Xe=Math.min(Xe,.5*Ue),gt=Math.min(gt,.5*ze),this.lines([[Ue-2*Xe,0],[Xe*qt,0,Xe,gt-gt*qt,Xe,gt],[0,ze-2*gt],[0,gt*qt,-Xe*qt,gt,-Xe,gt],[2*Xe-Ue,0],[-Xe*qt,0,-Xe,-gt*qt,-Xe,-gt],[0,2*gt-ze],[0,-gt*qt,Xe*qt,-gt,Xe,-gt]],Y+Xe,ge,[1,1],Rt,!0),this},x.__private__.ellipse=x.ellipse=function(Y,ge,Ue,ze,Xe){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||isNaN(ze)||!rr(Xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*Ue,Rt=4/3*(Math.SQRT2-1)*ze;return qr(Y+Ue,ge),ro(Y+Ue,ge-Rt,Y+gt,ge-ze,Y,ge-ze),ro(Y-gt,ge-ze,Y-Ue,ge-Rt,Y-Ue,ge),ro(Y-Ue,ge+Rt,Y-gt,ge+ze,Y,ge+ze),ro(Y+gt,ge+ze,Y+Ue,ge+Rt,Y+Ue,ge),ni(Xe),this},x.__private__.circle=x.circle=function(Y,ge,Ue,ze){if(isNaN(Y)||isNaN(ge)||isNaN(Ue)||!rr(ze))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,ge,Ue,Ue,ze)},x.setFont=function(Y,ge,Ue){return Ue&&(ge=j(ge,Ue)),Ht=ti(Y,ge,{disableWarning:!1}),this};var Ks=x.__private__.getFont=x.getFont=function(){return In[ti.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var Y,ge,Ue={};for(Y in nr)if(nr.hasOwnProperty(Y))for(ge in Ue[Y]=[],nr[Y])nr[Y].hasOwnProperty(ge)&&Ue[Y].push(ge);return Ue},x.addFont=function(Y,ge,Ue,ze,Xe){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?Xe=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(Ue=j(Ue,ze)),Xe=Xe||"Identity-H",bo.call(this,Y,ge,Ue,Xe)};var Cr,al=t.lineWidth||.200025,Ri=x.__private__.getLineWidth=x.getLineWidth=function(){return al},lu=x.__private__.setLineWidth=x.setLineWidth=function(Y){return al=Y,Ie(E(R(Y))+" w"),this};x.__private__.setLineDash=En.API.setLineDash=En.API.setLineDashPattern=function(Y,ge){if(Y=Y||[],ge=ge||0,isNaN(ge)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(Ue){return E(R(Ue))}).join(" "),ge=E(R(ge)),Ie("["+Y+"] "+ge+" d"),this};var Cl=x.__private__.getLineHeight=x.getLineHeight=function(){return vt*Cr};x.__private__.getLineHeight=x.getLineHeight=function(){return vt*Cr};var er=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(Cr=Y),this},so=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Cr};er(t.lineHeight);var ds=x.__private__.getHorizontalCoordinate=function(Y){return R(Y)},Ss=x.__private__.getVerticalCoordinate=function(Y){return M===F.ADVANCED?Y:vn[J].mediaBox.topRightY-vn[J].mediaBox.bottomLeftY-R(Y)},cu=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(Y){return E(ds(Y))},El=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(Y){return E(Ss(Y))},ca=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Le(ca)},x.__private__.setStrokeColor=x.setDrawColor=function(Y,ge,Ue,ze){return ca=Me({ch1:Y,ch2:ge,ch3:Ue,ch4:ze,pdfColorType:"draw",precision:2}),Ie(ca),this};var Sl=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Le(Sl)},x.__private__.setFillColor=x.setFillColor=function(Y,ge,Ue,ze){return Sl=Me({ch1:Y,ch2:ge,ch3:Ue,ch4:ze,pdfColorType:"fill",precision:2}),Ie(Sl),this};var Co=t.textColor||"0 g",Nc=x.__private__.getTextColor=x.getTextColor=function(){return Le(Co)};x.__private__.setTextColor=x.setTextColor=function(Y,ge,Ue,ze){return Co=Me({ch1:Y,ch2:ge,ch3:Ue,ch4:ze,pdfColorType:"text",precision:3}),this};var Zl=t.charSpace,Tl=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Zl||0)};x.__private__.setCharSpace=x.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zl=Y,this};var uu=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(Y){var ge=x.CapJoinStyles[Y];if(ge===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uu=ge,Ie(ge+" J"),this};var Ea=0;x.__private__.setLineJoin=x.setLineJoin=function(Y){var ge=x.CapJoinStyles[Y];if(ge===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ea=ge,Ie(ge+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ie(E(R(Y))+" M"),this},x.GState=Tw,x.setGState=function(Y){(Y=typeof Y=="string"?wr[us[Y]]:Nl(null,Y)).equals(Is)||(Ie("/"+Y.id+" gs"),Is=Y)};var Nl=function(Y,ge){if(!Y||!us[Y]){var Ue=!1;for(var ze in wr)if(wr.hasOwnProperty(ze)&&wr[ze].equals(ge)){Ue=!0;break}if(Ue)ge=wr[ze];else{var Xe="GS"+(Object.keys(wr).length+1).toString(10);wr[Xe]=ge,ge.id=Xe}return Y&&(us[Y]=ge.id),Ar.publish("addGState",ge),ge}};x.addGState=function(Y,ge){return Nl(Y,ge),this},x.saveGraphicsState=function(){return Ie("q"),Lr.push({key:Ht,size:vt,color:Co}),this},x.restoreGraphicsState=function(){Ie("Q");var Y=Lr.pop();return Ht=Y.key,vt=Y.size,Co=Y.color,Is=null,this},x.setCurrentTransformationMatrix=function(Y){return Ie(Y.toString()+" cm"),this},x.comment=function(Y){return Ie("#"+Y),this};var Bl=function(Y,ge){var Ue=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ue},set:function(gt){isNaN(gt)||(Ue=parseFloat(gt))}});var ze=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ze},set:function(gt){isNaN(gt)||(ze=parseFloat(gt))}});var Xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Xe},set:function(gt){Xe=gt.toString()}}),this},_i=function(Y,ge,Ue,ze){Bl.call(this,Y,ge),this.type="rect";var Xe=Ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Xe},set:function(Rt){isNaN(Rt)||(Xe=parseFloat(Rt))}});var gt=ze||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(Rt){isNaN(Rt)||(gt=parseFloat(Rt))}}),this},kl=function(){this.page=lr,this.currentPage=J,this.pages=me.slice(0),this.pagesContext=vn.slice(0),this.x=On,this.y=An,this.matrix=Tr,this.width=ll(J),this.height=si(J),this.outputDestination=Ve,this.id="",this.objectNumber=-1};kl.prototype.restore=function(){lr=this.page,J=this.currentPage,vn=this.pagesContext,me=this.pages,On=this.x,An=this.y,Tr=this.matrix,Il(J,this.width),kc(J,this.height),Ve=this.outputDestination};var il=function(Y,ge,Ue,ze,Xe){oa.push(new kl),lr=J=0,me=[],On=Y,An=ge,Tr=Xe,rs([Ue,ze])},Bc=function(Y){if(zs[Y])oa.pop().restore();else{var ge=new kl,Ue="Xo"+(Object.keys(As).length+1).toString(10);ge.id=Ue,zs[Y]=Ue,As[Ue]=ge,Ar.publish("addFormObject",ge),oa.pop().restore()}};for(var ol in x.beginFormObject=function(Y,ge,Ue,ze,Xe){return il(Y,ge,Ue,ze,Xe),this},x.endFormObject=function(Y){return Bc(Y),this},x.doFormObject=function(Y,ge){var Ue=As[zs[Y]];return Ie("q"),Ie(ge.toString()+" cm"),Ie("/"+Ue.id+" Do"),Ie("Q"),this},x.getFormObject=function(Y){var ge=As[zs[Y]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},x.save=function(Y,ge){return Y=Y||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?(mh(rl(eo()),Y),typeof mh.unload=="function"&&qn.setTimeout&&setTimeout(mh.unload,911),this):new Promise(function(Ue,ze){try{var Xe=mh(rl(eo()),Y);typeof mh.unload=="function"&&qn.setTimeout&&setTimeout(mh.unload,911),Ue(Xe)}catch(gt){ze(gt.message)}})},En.API)En.API.hasOwnProperty(ol)&&(ol==="events"&&En.API.events.length?function(Y,ge){var Ue,ze,Xe;for(Xe=ge.length-1;Xe!==-1;Xe--)Ue=ge[Xe][0],ze=ge[Xe][1],Y.subscribe.apply(Y,[Ue].concat(typeof ze=="function"?[ze]:ze))}(Ar,En.API.events):x[ol]=En.API[ol]);var ll=x.getPageWidth=function(Y){return(vn[Y=Y||J].mediaBox.topRightX-vn[Y].mediaBox.bottomLeftX)/_t},Il=x.setPageWidth=function(Y,ge){vn[Y].mediaBox.topRightX=ge*_t+vn[Y].mediaBox.bottomLeftX},si=x.getPageHeight=function(Y){return(vn[Y=Y||J].mediaBox.topRightY-vn[Y].mediaBox.bottomLeftY)/_t},kc=x.setPageHeight=function(Y,ge){vn[Y].mediaBox.topRightY=ge*_t+vn[Y].mediaBox.bottomLeftY};return x.internal={pdfEscape:_r,getStyle:bi,getFont:Ks,getFontSize:xt,getCharSpace:Tl,getTextColor:Nc,getLineHeight:Cl,getLineHeightFactor:so,getLineWidth:Ri,write:je,getHorizontalCoordinate:ds,getVerticalCoordinate:Ss,getCoordinateString:cu,getVerticalCoordinateString:El,collections:{},newObject:br,newAdditionalObject:Pe,newObjectDeferred:Yt,newObjectDeferredBegin:be,getFilters:et,putStream:dt,events:Ar,scaleFactor:_t,pageSize:{getWidth:function(){return ll(J)},setWidth:function(Y){Il(J,Y)},getHeight:function(){return si(J)},setHeight:function(Y){kc(J,Y)}},encryptionOptions:d,encryption:Gr,getEncryptor:_o,output:to,getNumberOfPages:Fn,pages:me,out:Ie,f2:z,f3:P,getPageInfo:Di,getPageInfoByObjId:Dn,getCurrentPageInfo:bn,getPDFVersion:y,Point:Bl,Rectangle:_i,Matrix:rn,hasHotfix:Fi},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return ll(J)},set:function(Y){Il(J,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return si(J)},set:function(Y){kc(J,Y)},enumerable:!0,configurable:!0}),Qn.call(x,st),Ht="F1",_l(s,n),Ar.publish("initialized"),x}am.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},am.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},am.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},am.prototype.processOwnerPassword=function(t,e){return fS(dS(e).substr(0,5),t)},am.prototype.encryptor=function(t,e){var n=dS(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return fS(n,r)}},Tw.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||_s(t)!==_s(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},En.API={events:[]},En.version="2.5.2";var Fa=En.API,Q5=1,t0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},P0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ir=function(t){return t.toFixed(2)},zd=function(t){return t.toFixed(5)};Fa.__acroform__={};var Xl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},q3=function(t){return t*Q5},aA=function(t){var e=new a8,n=gn.internal.getHeight(t)||0,r=gn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ir(r)),Number(ir(n))],e},kZ=Fa.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},IZ=Fa.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},FZ=Fa.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Wa=Fa.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return FZ(t,e-1)},Ya=Fa.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kZ(t,e-1)},Xa=Fa.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return IZ(t,e-1)},DZ=Fa.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(ir(l.lowerLeft_X)),Number(ir(l.lowerLeft_Y)),Number(ir(l.upperRight_X)),Number(ir(l.upperRight_Y))]},LZ=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=hS(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+ir(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=aA(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},hS=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var a=n,i=gn.internal.getHeight(t)||0;i=i<0?-i:i;var o=gn.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(P,R,G){if(P+1<s.length){var q=R+" "+s[P+1][0];return P1(q,t,G).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,m=P1("3",t,a).height,p=t.multiline?i-a:(i-m)/2,x=p+=2,C=0,y=0,T=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+P1(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var I="",F=0,M=0;M<s.length;M++)if(s.hasOwnProperty(M)){var O=!1;if(s[M].length!==1&&T!==s[M].length-1){if((m+2)*(F+2)+2>i)continue e;I+=s[M][T],O=!0,y=M,M--}else{I=(I+=s[M][T]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var Q=parseInt(M),j=l(Q,I,a),E=M>=s.length-1;if(j&&!E){I+=" ",T=0;continue}if(j||E){if(E)y=Q;else if(t.multiline&&(m+2)*(F+2)+2>i)continue e}else{if(!t.multiline||(m+2)*(F+2)+2>i)continue e;y=Q}}for(var S="",k=C;k<=y;k++){var z=s[k];if(t.multiline){if(k===y){S+=z[T]+" ",T=(T+1)%z.length;continue}if(k===C){S+=z[z.length-1]+" ";continue}}S+=z[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=P1(S,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=ir(u)+" "+ir(x)+` Td
`,e+="("+t0(S)+`) Tj
`,e+=-ir(u)+` 0 Td
`,x=-(a+2),d=0,C=O?y:y+1,F++,I=""}break}return r.text=e,r.fontSize=a,r},P1=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},RZ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},PZ=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},MZ=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),_s(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},UZ=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Pu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(RZ)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new i8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&PZ(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var i in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(i)){var o=r[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=DZ(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=gn.createDefaultAppearanceStream(o),_s(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=LZ(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var m="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var x=o.appearanceStreamContent[p];if(m+="/"+p+" ",m+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var i in x)if(x.hasOwnProperty(i)){var C=x[i];typeof C=="function"&&(C=C.call(s,o)),m+="/"+i+" "+C+" ",s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(s,o)),m+="/"+i+" "+C,s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&MZ(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},s8=Fa.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),_s(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+t0(r(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bC=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+t0(r(t))+")"},uA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uA.prototype.toString=function(){return this.objId+" 0 R"},uA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},uA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:s8(s,this.objId,this.scope)}):s instanceof uA?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var a8=function(){uA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Xl(a8,uA);var i8=function(){uA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+t0(n(t))+")"}},set:function(n){t=n}})};Xl(i8,uA);var Pu=function t(){uA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wa(e,3)},set:function(I){I?this.F=Ya(e,3):this.F=Xa(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');n=I}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(I){r=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(I){r[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(I){r[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(I){r[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(I){r[3]=I}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Nw)return;a="FieldObject"+t.FieldNum++}var I=function(F){return F};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+t0(I(a))+")"},set:function(I){a=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(I){a=I}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(I){i=I}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(I){o=I}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(I){l=I}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Q5:u},set:function(I){u=I}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(I){d=I}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Nw||this instanceof Bh))return bC(m,this.objId,this.scope)},set:function(I){I=I.toString(),m=I}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ki?p:bC(p,this.objId,this.scope)},set:function(I){I=I.toString(),p=this instanceof Ki?I:I.substr(0,1)==="("?P0(I.substr(1,I.length-2)):P0(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?P0(p.substr(1,p.length-1)):p},set:function(I){I=I.toString(),p=this instanceof Ki?"/"+I:I}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ki?x:bC(x,this.objId,this.scope)},set:function(I){I=I.toString(),x=this instanceof Ki?I:I.substr(0,1)==="("?P0(I.substr(1,I.length-2)):P0(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?P0(x.substr(1,x.length-1)):x},set:function(I){I=I.toString(),x=this instanceof Ki?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(I){I=!!I,y=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(I){C=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,1)},set:function(I){I?this.Ff=Ya(this.Ff,1):this.Ff=Xa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,2)},set:function(I){I?this.Ff=Ya(this.Ff,2):this.Ff=Xa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,3)},set:function(I){I?this.Ff=Ya(this.Ff,3):this.Ff=Xa(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');T=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(T){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Xl(Pu,uA);var ym=function(){Pu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return s8(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,18)},set:function(n){n?this.Ff=Ya(this.Ff,18):this.Ff=Xa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ya(this.Ff,19):this.Ff=Xa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,20)},set:function(n){n?(this.Ff=Ya(this.Ff,20),e.sort()):this.Ff=Xa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,22)},set:function(n){n?this.Ff=Ya(this.Ff,22):this.Ff=Xa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,23)},set:function(n){n?this.Ff=Ya(this.Ff,23):this.Ff=Xa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,27)},set:function(n){n?this.Ff=Ya(this.Ff,27):this.Ff=Xa(this.Ff,27)}}),this.hasAppearanceStream=!1};Xl(ym,Pu);var wm=function(){ym.call(this),this.fontName="helvetica",this.combo=!1};Xl(wm,ym);var bm=function(){wm.call(this),this.combo=!0};Xl(bm,wm);var Vy=function(){bm.call(this),this.edit=!0};Xl(Vy,bm);var Ki=function(){Pu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,15)},set:function(n){n?this.Ff=Ya(this.Ff,15):this.Ff=Xa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,16)},set:function(n){n?this.Ff=Ya(this.Ff,16):this.Ff=Xa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,17)},set:function(n){n?this.Ff=Ya(this.Ff,17):this.Ff=Xa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,26)},set:function(n){n?this.Ff=Ya(this.Ff,26):this.Ff=Xa(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+t0(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){_s(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Xl(Ki,Pu);var zy=function(){Ki.call(this),this.pushButton=!0};Xl(zy,Ki);var _m=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xl(_m,Ki);var Nw=function(){var t,e;Pu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),r)i.push("/"+a+" ("+t0(s(r[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){_s(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xl(Nw,Pu),_m.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},_m.prototype.createOption=function(t){var e=new Nw;return e.Parent=this,e.optionName=t,this.Kids.push(e),OZ.call(this.scope,e),e};var Gy=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gn.CheckBox.createAppearanceStream()};Xl(Gy,Ki);var Bh=function(){Pu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,13)},set:function(e){e?this.Ff=Ya(this.Ff,13):this.Ff=Xa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,21)},set:function(e){e?this.Ff=Ya(this.Ff,21):this.Ff=Xa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,23)},set:function(e){e?this.Ff=Ya(this.Ff,23):this.Ff=Xa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,24)},set:function(e){e?this.Ff=Ya(this.Ff,24):this.Ff=Xa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,25)},set:function(e){e?this.Ff=Ya(this.Ff,25):this.Ff=Xa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,26)},set:function(e){e?this.Ff=Ya(this.Ff,26):this.Ff=Xa(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xl(Bh,Pu);var qy=function(){Bh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wa(this.Ff,14)},set:function(t){t?this.Ff=Ya(this.Ff,14):this.Ff=Xa(this.Ff,14)}}),this.password=!0};Xl(qy,Bh);var gn={CheckBox:{createAppearanceStream:function(){return{N:{On:gn.CheckBox.YesNormal},D:{On:gn.CheckBox.YesPushDown,Off:gn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=hS(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ir(gn.internal.getWidth(t))+" "+ir(gn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ir(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],a=gn.internal.getHeight(t),i=gn.internal.getWidth(t),o=hS(t,t.caption);return s.push("1 g"),s.push("0 0 "+ir(i)+" "+ir(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ir(i-1)+" "+ir(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+ir(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ir(gn.internal.getWidth(t))+" "+ir(gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:gn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=gn.RadioButton.Circle.YesNormal,e.D[t]=gn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=gn.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+zd(gn.internal.getWidth(t)/2)+" "+zd(gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*gn.internal.Bezier_C).toFixed(5)),i=Number((r*gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+zd(gn.internal.getWidth(t)/2)+" "+zd(gn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+zd(gn.internal.getWidth(t)/2)+" "+zd(gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=[],r=gn.internal.getWidth(t)<=gn.internal.getHeight(t)?gn.internal.getWidth(t)/4:gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+zd(gn.internal.getWidth(t)/2)+" "+zd(gn.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:gn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=gn.RadioButton.Cross.YesNormal,e.D[t]=gn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=aA(t);e.scope=t.scope;var n=[],r=gn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ir(gn.internal.getWidth(t)-2)+" "+ir(gn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ir(r.x1.x)+" "+ir(r.x1.y)+" m"),n.push(ir(r.x2.x)+" "+ir(r.x2.y)+" l"),n.push(ir(r.x4.x)+" "+ir(r.x4.y)+" m"),n.push(ir(r.x3.x)+" "+ir(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=gn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ir(gn.internal.getWidth(t))+" "+ir(gn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ir(gn.internal.getWidth(t)-2)+" "+ir(gn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ir(n.x1.x)+" "+ir(n.x1.y)+" m"),r.push(ir(n.x2.x)+" "+ir(n.x2.y)+" l"),r.push(ir(n.x4.x)+" "+ir(n.x4.y)+" m"),r.push(ir(n.x3.x)+" "+ir(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=aA(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ir(gn.internal.getWidth(t))+" "+ir(gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};gn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=gn.internal.getWidth(t),n=gn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},gn.internal.getWidth=function(t){var e=0;return _s(t)==="object"&&(e=q3(t.Rect[2])),e},gn.internal.getHeight=function(t){var e=0;return _s(t)==="object"&&(e=q3(t.Rect[3])),e};var OZ=Fa.addField=function(t){if(UZ(this,t),!(t instanceof Pu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Fa.AcroFormChoiceField=ym,Fa.AcroFormListBox=wm,Fa.AcroFormComboBox=bm,Fa.AcroFormEditBox=Vy,Fa.AcroFormButton=Ki,Fa.AcroFormPushButton=zy,Fa.AcroFormRadioButton=_m,Fa.AcroFormCheckBox=Gy,Fa.AcroFormTextField=Bh,Fa.AcroFormPasswordField=qy,Fa.AcroFormAppearance=gn,Fa.AcroForm={ChoiceField:ym,ListBox:wm,ComboBox:bm,EditBox:Vy,Button:Ki,PushButton:zy,RadioButton:_m,CheckBox:Gy,TextField:Bh,PasswordField:qy,Appearance:gn},En.AcroForm={ChoiceField:ym,ListBox:wm,ComboBox:bm,EditBox:Vy,Button:Ki,PushButton:zy,RadioButton:_m,CheckBox:Gy,TextField:Bh,PasswordField:qy,Appearance:gn};En.AcroForm;function o8(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(P,R){var G,q,le,ee,oe,K=e;if((R=R||e)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(j(P))for(oe in n)for(le=n[oe],G=0;G<le.length;G+=1){for(ee=!0,q=0;q<le[G].length;q+=1)if(le[G][q]!==void 0&&le[G][q]!==P[q]){ee=!1;break}if(ee===!0){K=oe;break}}else for(oe in n)for(le=n[oe],G=0;G<le.length;G+=1){for(ee=!0,q=0;q<le[G].length;q+=1)if(le[G][q]!==void 0&&le[G][q]!==P.charCodeAt(q)){ee=!1;break}if(ee===!0){K=oe;break}}return K===e&&R!==e&&(K=R),K},s=function P(R){for(var G=this.internal.write,q=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:R.width}),ee.push({key:"Height",value:R.height}),R.colorSpace===T.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===T.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var oe="",K=0,ne=R.transparency.length;K<ne;K++)oe+=R.transparency[K]+" "+R.transparency[K]+" ";ee.push({key:"Mask",value:"["+oe+"]"})}R.sMask!==void 0&&ee.push({key:"SMask",value:R.objectId+1+" 0 R"});var X=R.filter!==void 0?["/"+R.filter]:void 0;if(q({data:R.data,additionalKeyValues:ee,alreadyAppliedFilters:X,objectId:R.objectId}),G("endobj"),"sMask"in R&&R.sMask!==void 0){var ce="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,V={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:ce,data:R.sMask};"filter"in R&&(V.filter=R.filter),P.call(this,V)}if(R.colorSpace===T.INDEXED){var J=this.internal.newObject();q({data:S(new Uint8Array(R.palette)),objectId:J}),G("endobj")}},a=function(){var P=this.internal.collections.addImage_images;for(var R in P)s.call(this,P[R])},i=function(){var P,R=this.internal.collections.addImage_images,G=this.internal.write;for(var q in R)G("/I"+(P=R[q]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof t["process"+P.toUpperCase()]=="function"},m=function(P){return _s(P)==="object"&&P.nodeType===1},p=function(P,R){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var G=""+P.getAttribute("src");if(G.indexOf("data:image/")===0)return qg(unescape(G).split("base64,").pop());var q=t.loadFile(G,!0);if(q!==void 0)return q}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var le;switch(R){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;case"JPEG":case"JPG":default:le="image/jpeg"}return qg(P.toDataURL(le,1).split("base64,").pop())}},x=function(P){var R=this.internal.collections.addImage_images;if(R){for(var G in R)if(P===R[G].alias)return R[G]}},C=function(P,R,G){return P||R||(P=-96,R=-96),P<0&&(P=-1*G.width*72/P/this.internal.scaleFactor),R<0&&(R=-1*G.height*72/R/this.internal.scaleFactor),P===0&&(P=R*G.width/G.height),R===0&&(R=P*G.height/G.width),[P,R]},y=function(P,R,G,q,le,ee){var oe=C.call(this,G,q,le),K=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,X=l.call(this);if(G=oe[0],q=oe[1],X[le.index]=le,ee){ee*=Math.PI/180;var ce=Math.cos(ee),V=Math.sin(ee),J=function(ie){return ie.toFixed(4)},re=[J(ce),J(V),J(-1*V),J(ce),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,K(P),ne(R+q),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([K(G),"0","0",K(q),"0","0","cm"].join(" "))):this.internal.write([K(G),"0","0",K(q),K(P),ne(R+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=t.__addimage__.sHashCode=function(P){var R,G,q=0;if(typeof P=="string")for(G=P.length,R=0;R<G;R++)q=(q<<5)-q+P.charCodeAt(R),q|=0;else if(j(P))for(G=P.byteLength/2,R=0;R<G;R++)q=(q<<5)-q+P[R],q|=0;return q},M=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var R=!0;return P.length===0&&(R=!1),P.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(R=!1),R},O=t.__addimage__.extractImageFromDataUrl=function(P){var R=(P=P||"").split("base64,"),G=null;if(R.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(q)&&(G={mimeType:q[1],charset:q[2],data:R[1]})}return G},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(P){return Q()&&P instanceof ArrayBuffer};var j=t.__addimage__.isArrayBufferView=function(P){return Q()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(P){for(var R=P.length,G=new Uint8Array(R),q=0;q<R;q++)G[q]=P.charCodeAt(q);return G},S=t.__addimage__.arrayBufferToBinaryString=function(P){for(var R="",G=j(P)?P:new Uint8Array(P),q=0;q<G.length;q+=8192)R+=String.fromCharCode.apply(null,G.subarray(q,q+8192));return R};t.addImage=function(){var P,R,G,q,le,ee,oe,K,ne;if(typeof arguments[1]=="number"?(R=e,G=arguments[1],q=arguments[2],le=arguments[3],ee=arguments[4],oe=arguments[5],K=arguments[6],ne=arguments[7]):(R=arguments[1],G=arguments[2],q=arguments[3],le=arguments[4],ee=arguments[5],oe=arguments[6],K=arguments[7],ne=arguments[8]),_s(P=arguments[0])==="object"&&!m(P)&&"imageData"in P){var X=P;P=X.imageData,R=X.format||R||e,G=X.x||G||0,q=X.y||q||0,le=X.w||X.width||le,ee=X.h||X.height||ee,oe=X.alias||oe,K=X.compression||K,ne=X.rotation||X.angle||ne}var ce=this.internal.getFilters();if(K===void 0&&ce.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(G)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var V=k.call(this,P,R,oe,K);return y.call(this,G,q,le,ee,V,ne),this};var k=function(P,R,G,q){var le,ee,oe;if(typeof P=="string"&&r(P)===e){P=unescape(P);var K=z(P,!1);(K!==""||(K=t.loadFile(P,!0))!==void 0)&&(P=K)}if(m(P)&&(P=p(P,R)),R=r(P,R),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((oe=G)==null||oe.length===0)&&(G=function(ne){return typeof ne=="string"||j(ne)?F(ne):j(ne.data)?F(ne.data):null}(P)),(le=x.call(this,G))||(Q()&&(P instanceof Uint8Array||R==="RGBA"||(ee=P,P=E(P))),le=this["process"+R.toUpperCase()](P,u.call(this),G,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:I.NONE}(q),ee)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},z=t.__addimage__.convertBase64ToBinaryString=function(P,R){var G;R=typeof R!="boolean"||R;var q,le="";if(typeof P=="string"){q=(G=O(P))!==null?G.data:P;try{le=qg(q)}catch(ee){if(R)throw M(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};t.getImageProperties=function(P){var R,G,q="";if(m(P)&&(P=p(P)),typeof P=="string"&&r(P)===e&&((q=z(P,!1))===""&&(q=t.loadFile(P)||""),P=q),G=r(P),!d(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!Q()||P instanceof Uint8Array||(P=E(P)),!(R=this["process"+G.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=G,R}})(En.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};En.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,m=0;m<u.length&&!d;m++)switch((r=u[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(y.objId),F=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+x(I(r.contents))+")",a+=" /Popup "+T.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+x(I(F))+") >>",y.content=a;var M=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(a+=" /Open true"),a+=" >>",T.content=a,this.internal.write(y.objId,"0 R",T.objId,"0 R");break;case"freetext":s="/Rect ["+i(r.bounds.x)+" "+o(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+x(C(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var j=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+j+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+s),h:u(r+a)},options:i,type:"link"})},t.textWithLink=function(n,r,s,a){var i,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(n,r,s,a),s+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,s-u,o,i,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(En.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(y){var T=0,I=n,F="",M=0;for(T=0;T<y.length;T+=1)I[y.charCodeAt(T)]!==void 0?(M++,typeof(I=I[y.charCodeAt(T)])=="number"&&(F+=String.fromCharCode(I),I=n,M=0),T===y.length-1&&(I=n,F+=y.charAt(T-(M-1)),T-=M-1,M=0)):(I=n,F+=y.charAt(T-M),T-=M,M=0);return F};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,T,I){return i(y)?a(y)===!1?-1:!u(y)||!i(T)&&!i(I)||!i(I)&&o(T)||o(y)&&!i(T)||o(y)&&l(T)||o(y)&&o(T)?0:d(y)&&i(T)&&!o(T)&&i(I)&&u(I)?3:o(y)||!i(I)?1:2:-1},x=function(y){var T=0,I=0,F=0,M="",O="",Q="",j=(y=y||"").split("\\s+"),E=[];for(T=0;T<j.length;T+=1){for(E.push(""),I=0;I<j[T].length;I+=1)M=j[T][I],O=j[T][I-1],Q=j[T][I+1],i(M)?(F=p(M,O,Q),E[T]+=F!==-1?String.fromCharCode(e[M.charCodeAt(0)][F]):M):E[T]+=M;E[T]=m(E[T])}return E.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var y,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(T)){var F=0;for(I=[],F=0;F<T.length;F+=1)Array.isArray(T[F])?I.push([x(T[F][0]),T[F][1],T[F][2]]):I.push([x(T[F])]);y=I}else y=x(T);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",C])}(En.API),En.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(En.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(y){x=y}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(y){C=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,x=0,C=0,y=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var I=u.maxWidth;I>0?typeof l=="string"?l=this.splitTextToSize(l,I):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(M,O){return M.concat(T.splitTextToSize(O,I))},[])):l=Array.isArray(l)?l:[l];for(var F=0;F<l.length;F++)x<(y=this.getStringUnitWidth(l[F],{font:m})*d)&&(x=y);return x!==0&&(C=l.length),{w:x/=p,h:Math.max((C*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,x&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,m,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var x,C,y,T,I=[],F=[],M=[],O={},Q={},j=[],E=[],S=(p=p||{}).autoSize||!1,k=p.printHeaders!==!1,z=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,P=p.margins||Object.assign({width:this.getPageWidth()},e),R=typeof p.padding=="number"?p.padding:3,G=p.headerBackgroundColor||"#c8c8c8",q=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=q,this.setFontSize(z),m==null)F=I=Object.keys(d[0]),M=I.map(function(){return"left"});else if(Array.isArray(m)&&_s(m[0])==="object")for(I=m.map(function(X){return X.name}),F=m.map(function(X){return X.prompt||X.name||""}),M=m.map(function(X){return X.align||"left"}),x=0;x<m.length;x+=1)Q[m[x].name]=m[x].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(F=I=m,M=I.map(function(){return"left"}));if(S||Array.isArray(m)&&typeof m[0]=="string")for(x=0;x<I.length;x+=1){for(O[T=I[x]]=d.map(function(X){return X[T]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(F[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=O[T],this.setFont(void 0,"normal"),y=0;y<C.length;y+=1)j.push(this.getTextDimensions(C[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[T]=Math.max.apply(null,j)+R+R,j=[]}if(k){var le={};for(x=0;x<I.length;x+=1)le[I[x]]={},le[I[x]].text=F[x],le[I[x]].align=M[x];var ee=o.call(this,le,Q);E=I.map(function(X){return new a(l,u,Q[X],ee,le[X].text,void 0,le[X].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var oe=m.reduce(function(X,ce){return X[ce.name]=ce.align,X},{});for(x=0;x<d.length;x+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:x,data:d[x]},this);var K=o.call(this,d[x],Q);for(y=0;y<I.length;y+=1){var ne=d[x][I[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:x,col:y,data:ne},this),i.call(this,new a(l,u,Q[I[y]],K,ne,x+2,oe[I[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(x){var C=l[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,u[x]-d-d)},this).map(function(x){return this.getLineHeightFactor()*x.length*m/p+d+d},this).reduce(function(x,C){return Math.max(x,C)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){d=this.internal.__cell__.tableHeaderRow[x].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(C)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(En.API);var l8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},c8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],mS=o8(c8),u8=[100,200,300,400,500,600,700,800,900],jZ=o8(u8);function pS(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return l8[a=a||"normal"]?a:"normal"}(t.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof mS[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function K3(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var QZ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function W3(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function HZ(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},QZ,n.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=pS(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[r]))throw new Error("Could not find a font-family for the rule '"+W3(a)+"' and default family '"+r+"'.");if(i=function(l,u){if(u[l])return u[l];var d=mS[l],m=d<=mS.normal?-1:1,p=K3(u,c8,d,m);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=l8[l],m=0;m<d.length;++m)if(u[d[m]])return u[d[m]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=jZ[l],m=K3(u,u8,d,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+W3(a)+"'.");return i}function Y3(t){return t.trimLeft()}function VZ(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function zZ(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var M1,X3,J3,_C=["times"];(function(t){var e,n,r,s,a,i,o,l,u,d=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new l,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new i,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new i,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var m=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=V;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(Oe){re=!!Oe}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Oe){ie=!!Oe}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(Oe){isNaN(Oe)||(fe=Oe)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(Oe){isNaN(Oe)||(Se=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Oe){var Ie;typeof Oe=="number"?Ie=[Oe,Oe,Oe,Oe]:((Ie=new Array(4))[0]=Oe[0],Ie[1]=Oe.length>=2?Oe[1]:Ie[0],Ie[2]=Oe.length>=3?Oe[2]:Ie[0],Ie[3]=Oe.length>=4?Oe[3]:Ie[1]),u.margin=Ie}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(Oe){ve=Oe}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(Oe){ye=Oe}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(Oe){we=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Oe){Oe instanceof d&&(u=Oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Oe){u.path=Oe}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(Oe){me=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var Ie;Ie=p(Oe),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var Ie=p(Oe);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){["butt","round","square"].indexOf(Oe)!==-1&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){["bevel","round","miter"].indexOf(Oe)!==-1&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){["right","end","center","left","start"].indexOf(Oe)!==-1&&(this.ctx.textAlign=Oe)}});var he=null;function Ve(Oe,Ie){if(he===null){var je=function(Ke){var st=[];return Object.keys(Ke).forEach(function(vt){Ke[vt].forEach(function(Tt){var xt=null;switch(Tt){case"bold":xt={family:vt,weight:"bold"};break;case"italic":xt={family:vt,style:"italic"};break;case"bolditalic":xt={family:vt,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:vt}}xt!==null&&(xt.ref={name:vt,style:Tt},st.push(xt))})}),st}(Oe.getFontList());he=function(Ke){for(var st={},vt=0;vt<Ke.length;++vt){var Tt=pS(Ke[vt]),xt=Tt.family,Vt=Tt.stretch,Kt=Tt.style,cn=Tt.weight;st[xt]=st[xt]||{},st[xt][Vt]=st[xt][Vt]||{},st[xt][Vt][Kt]=st[xt][Vt][Kt]||{},st[xt][Vt][Kt][cn]=Tt}return st}(je.concat(Ie))}return he}var nt=null;Object.defineProperty(this,"fontFaces",{get:function(){return nt},set:function(Oe){he=null,nt=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var Ie;if(this.ctx.font=Oe,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Oe))!==null){var je=Ie[1],Ke=(Ie[2],Ie[3]),st=Ie[4],vt=(Ie[5],Ie[6]),Tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(Tt==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:Tt==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var xt=function(Qt){var Ht,_t,On=[],An=Qt.trim();if(An==="")return _C;if(An in $3)return[$3[An]];for(;An!=="";){switch(_t=null,Ht=(An=Y3(An)).charAt(0)){case'"':case"'":_t=VZ(An.substring(1),Ht);break;default:_t=zZ(An)}if(_t===null||(On.push(_t[0]),(An=Y3(_t[1]))!==""&&An.charAt(0)!==","))return _C;An=An.replace(/^,/,"")}return On}(vt);if(this.fontFaces){var Vt=HZ(Ve(this.pdf,this.fontFaces),xt.map(function(Qt){return{family:Qt,stretch:"normal",weight:Ke,style:je}}));this.pdf.setFont(Vt.ref.name,Vt.ref.style)}else{var Kt="";(Ke==="bold"||parseInt(Ke,10)>=700||je==="bold")&&(Kt="bold"),je==="italic"&&(Kt+="italic"),Kt.length===0&&(Kt="normal");for(var cn="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Wt=0;Wt<xt.length;Wt++){if(this.pdf.internal.getFont(xt[Wt],Kt,{noFallback:!0,disableWarning:!0})!==void 0){cn=xt[Wt];break}if(Kt==="bolditalic"&&this.pdf.internal.getFont(xt[Wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)cn=xt[Wt],Kt="bold";else if(this.pdf.internal.getFont(xt[Wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){cn=xt[Wt],Kt="normal";break}}if(cn===""){for(var sn=0;sn<xt.length;sn++)if(Gt[xt[sn]]){cn=Gt[xt[sn]];break}}cn=cn===""?"Times":cn,this.pdf.setFont(cn,Kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};m.prototype.setLineDash=function(V){this.lineDash=V},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){O.call(this,"fill",!1)},m.prototype.stroke=function(){O.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(V,J){if(isNaN(V)||isNaN(J))throw Ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new i(V,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new i(V,J)},m.prototype.closePath=function(){var V=new i(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&_s(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){V=new i(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(V.x,V.y)},m.prototype.lineTo=function(V,J){if(isNaN(V)||isNaN(J))throw Ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new i(V,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new i(re.x,re.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},m.prototype.quadraticCurveTo=function(V,J,re,ie){if(isNaN(re)||isNaN(ie)||isNaN(V)||isNaN(J))throw Ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new i(re,ie)),Se=this.ctx.transform.applyToPoint(new i(V,J));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new i(fe.x,fe.y)},m.prototype.bezierCurveTo=function(V,J,re,ie,fe,Se){if(isNaN(fe)||isNaN(Se)||isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie))throw Ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new i(fe,Se)),ye=this.ctx.transform.applyToPoint(new i(V,J)),we=this.ctx.transform.applyToPoint(new i(re,ie));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:we.x,y2:we.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new i(ve.x,ve.y)},m.prototype.arc=function(V,J,re,ie,fe,Se){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie)||isNaN(fe))throw Ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new i(V,J));V=ve.x,J=ve.y;var ye=this.ctx.transform.applyToPoint(new i(0,re)),we=this.ctx.transform.applyToPoint(new i(0,0));re=Math.sqrt(Math.pow(ye.x-we.x,2)+Math.pow(ye.y-we.y,2))}Math.abs(fe-ie)>=2*Math.PI&&(ie=0,fe=2*Math.PI),this.path.push({type:"arc",x:V,y:J,radius:re,startAngle:ie,endAngle:fe,counterclockwise:Se})},m.prototype.arcTo=function(V,J,re,ie,fe){throw new Error("arcTo not implemented.")},m.prototype.rect=function(V,J,re,ie){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie))throw Ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,J),this.lineTo(V+re,J),this.lineTo(V+re,J+ie),this.lineTo(V,J+ie),this.lineTo(V,J),this.lineTo(V+re,J),this.lineTo(V,J)},m.prototype.fillRect=function(V,J,re,ie){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie))throw Ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,J,re,ie),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},m.prototype.strokeRect=function(V,J,re,ie){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie))throw Ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(V,J,re,ie),this.stroke())},m.prototype.clearRect=function(V,J,re,ie){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie))throw Ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,J,re,ie))},m.prototype.save=function(V){V=typeof V!="boolean"||V;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},m.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(V){var J,re,ie,fe;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))J=0,re=0,ie=0,fe=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(Se!==null)J=parseInt(Se[1]),re=parseInt(Se[2]),ie=parseInt(Se[3]),fe=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)J=parseInt(Se[1]),re=parseInt(Se[2]),ie=parseInt(Se[3]),fe=parseFloat(Se[4]);else{if(fe=1,typeof V=="string"&&V.charAt(0)!=="#"){var ve=new t8(V);V=ve.ok?ve.toHex():"#000000"}V.length===4?(J=V.substring(1,2),J+=J,re=V.substring(2,3),re+=re,ie=V.substring(3,4),ie+=ie):(J=V.substring(1,3),re=V.substring(3,5),ie=V.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),ie=parseInt(ie,16)}}return{r:J,g:re,b:ie,a:fe,style:V}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(V,J,re,ie){if(isNaN(J)||isNaN(re)||typeof V!="string")throw Ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!x.call(this)){var fe=K(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;R.call(this,{text:V,x:J,y:re,scale:Se,angle:fe,align:this.textAlign,maxWidth:ie})}},m.prototype.strokeText=function(V,J,re,ie){if(isNaN(J)||isNaN(re)||typeof V!="string")throw Ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){ie=isNaN(ie)?void 0:ie;var fe=K(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;R.call(this,{text:V,x:J,y:re,scale:Se,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ie})}},m.prototype.measureText=function(V){if(typeof V!="string")throw Ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,ie=J.internal.getFontSize(),fe=J.getStringUnitWidth(V)*ie/J.internal.scaleFactor,Se=function(ve){var ye=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this};return new Se({width:fe*=Math.round(96*re/72*1e4)/1e4})},m.prototype.scale=function(V,J){if(isNaN(V)||isNaN(J))throw Ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new l(V,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.rotate=function(V){if(isNaN(V))throw Ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new l(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},m.prototype.translate=function(V,J){if(isNaN(V)||isNaN(J))throw Ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new l(1,0,0,1,V,J);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.transform=function(V,J,re,ie,fe,Se){if(isNaN(V)||isNaN(J)||isNaN(re)||isNaN(ie)||isNaN(fe)||isNaN(Se))throw Ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(V,J,re,ie,fe,Se);this.ctx.transform=this.ctx.transform.multiply(ve)},m.prototype.setTransform=function(V,J,re,ie,fe,Se){V=isNaN(V)?1:V,J=isNaN(J)?0:J,re=isNaN(re)?0:re,ie=isNaN(ie)?1:ie,fe=isNaN(fe)?0:fe,Se=isNaN(Se)?0:Se,this.ctx.transform=new l(V,J,re,ie,fe,Se)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(V,J,re,ie,fe,Se,ve,ye,we){var me=this.pdf.getImageProperties(V),he=1,Ve=1,nt=1,Oe=1;ie!==void 0&&ye!==void 0&&(nt=ye/ie,Oe=we/fe,he=me.width/ie*ye/ie,Ve=me.height/fe*we/fe),Se===void 0&&(Se=J,ve=re,J=0,re=0),ie!==void 0&&ye===void 0&&(ye=ie,we=fe),ie===void 0&&ye===void 0&&(ye=me.width,we=me.height);for(var Ie,je=this.ctx.transform.decompose(),Ke=K(je.rotate.shx),st=new l,vt=(st=(st=(st=st.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(Se-J*nt,ve-re*Oe,ie*he,fe*Ve)),Tt=T.call(this,vt),xt=[],Vt=0;Vt<Tt.length;Vt+=1)xt.indexOf(Tt[Vt])===-1&&xt.push(Tt[Vt]);if(M(xt),this.autoPaging)for(var Kt=xt[0],cn=xt[xt.length-1],Gt=Kt;Gt<cn+1;Gt++){this.pdf.setPage(Gt);var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],sn=Gt===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Gt===1?0:Qt+(Gt-2)*Ht;if(this.ctx.clip_path.length!==0){var On=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ie,this.posX+this.margin[3],-_t+sn+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=On}var An=JSON.parse(JSON.stringify(vt));An=F([An],this.posX+this.margin[3],-_t+sn+this.ctx.prevPageLastElemOffset)[0];var Tr=(Gt>Kt||Gt<cn)&&y.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Ht,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",An.x,An.y,An.w,An.h,null,null,Ke),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(V,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,Ke)};var T=function(V,J,re){var ie=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":ie.push(Math.floor((V.y+fe)/re)+1);break;case"arc":ie.push(Math.floor((V.y+fe-V.radius)/re)+1),ie.push(Math.floor((V.y+fe+V.radius)/re)+1);break;case"qct":var Se=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);ie.push(Math.floor((Se.y+fe)/re)+1),ie.push(Math.floor((Se.y+Se.h+fe)/re)+1);break;case"bct":var ve=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);ie.push(Math.floor((ve.y+fe)/re)+1),ie.push(Math.floor((ve.y+ve.h+fe)/re)+1);break;case"rect":ie.push(Math.floor((V.y+fe)/re)+1),ie.push(Math.floor((V.y+V.h+fe)/re)+1)}for(var ye=0;ye<ie.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ye];)I.call(this);return ie},I=function(){var V=this.fillStyle,J=this.strokeStyle,re=this.font,ie=this.lineCap,fe=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=J,this.font=re,this.lineCap=ie,this.lineWidth=fe,this.lineJoin=Se},F=function(V,J,re){for(var ie=0;ie<V.length;ie++)switch(V[ie].type){case"bct":V[ie].x2+=J,V[ie].y2+=re;case"qct":V[ie].x1+=J,V[ie].y1+=re;case"mt":case"lt":case"arc":default:V[ie].x+=J,V[ie].y+=re}return V},M=function(V){return V.sort(function(J,re){return J-re})},O=function(V,J){for(var re,ie,fe=this.fillStyle,Se=this.strokeStyle,ve=this.lineCap,ye=this.lineWidth,we=Math.abs(ye*this.ctx.transform.scaleX),me=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),nt=[],Oe=0;Oe<Ve.length;Oe++)if(Ve[Oe].x!==void 0)for(var Ie=T.call(this,Ve[Oe]),je=0;je<Ie.length;je+=1)nt.indexOf(Ie[je])===-1&&nt.push(Ie[je]);for(var Ke=0;Ke<nt.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<nt[Ke];)I.call(this);if(M(nt),this.autoPaging)for(var st=nt[0],vt=nt[nt.length-1],Tt=st;Tt<vt+1;Tt++){this.pdf.setPage(Tt),this.fillStyle=fe,this.strokeStyle=Se,this.lineCap=ve,this.lineWidth=we,this.lineJoin=me;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=Tt===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Tt===1?0:Kt+(Tt-2)*cn;if(this.ctx.clip_path.length!==0){var Wt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(re,this.posX+this.margin[3],-Gt+Vt+this.ctx.prevPageLastElemOffset),Q.call(this,V,!0),this.path=Wt}if(ie=JSON.parse(JSON.stringify(he)),this.path=F(ie,this.posX+this.margin[3],-Gt+Vt+this.ctx.prevPageLastElemOffset),J===!1||Tt===0){var sn=(Tt>st||Tt<vt)&&y.call(this);sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,cn,null).clip().discardPath()),Q.call(this,V,J),sn&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}else this.lineWidth=we,Q.call(this,V,J),this.lineWidth=ye;this.path=he},Q=function(V,J){if((V!=="stroke"||J||!C.call(this))&&(V==="stroke"||J||!x.call(this))){for(var re,ie,fe=[],Se=this.path,ve=0;ve<Se.length;ve++){var ye=Se[ve];switch(ye.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:ye,deltas:[],abs:[]});break;case"lt":var we=fe.length;if(Se[ve-1]&&!isNaN(Se[ve-1].x)&&(re=[ye.x-Se[ve-1].x,ye.y-Se[ve-1].y],we>0)){for(;we>=0;we--)if(fe[we-1].close!==!0&&fe[we-1].begin!==!0){fe[we-1].deltas.push(re),fe[we-1].abs.push(ye);break}}break;case"bct":re=[ye.x1-Se[ve-1].x,ye.y1-Se[ve-1].y,ye.x2-Se[ve-1].x,ye.y2-Se[ve-1].y,ye.x-Se[ve-1].x,ye.y-Se[ve-1].y],fe[fe.length-1].deltas.push(re);break;case"qct":var me=Se[ve-1].x+2/3*(ye.x1-Se[ve-1].x),he=Se[ve-1].y+2/3*(ye.y1-Se[ve-1].y),Ve=ye.x+2/3*(ye.x1-ye.x),nt=ye.y+2/3*(ye.y1-ye.y),Oe=ye.x,Ie=ye.y;re=[me-Se[ve-1].x,he-Se[ve-1].y,Ve-Se[ve-1].x,nt-Se[ve-1].y,Oe-Se[ve-1].x,Ie-Se[ve-1].y],fe[fe.length-1].deltas.push(re);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(ye)}}ie=J?null:V==="stroke"?"stroke":"fill";for(var je=!1,Ke=0;Ke<fe.length;Ke++)if(fe[Ke].arc)for(var st=fe[Ke].abs,vt=0;vt<st.length;vt++){var Tt=st[vt];Tt.type==="arc"?S.call(this,Tt.x,Tt.y,Tt.radius,Tt.startAngle,Tt.endAngle,Tt.counterclockwise,void 0,J,!je):G.call(this,Tt.x,Tt.y),je=!0}else if(fe[Ke].close===!0)this.pdf.internal.out("h"),je=!1;else if(fe[Ke].begin!==!0){var xt=fe[Ke].start.x,Vt=fe[Ke].start.y;q.call(this,fe[Ke].deltas,xt,Vt),je=!0}ie&&k.call(this,ie),J&&z.call(this)}},j=function(V){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-re;case"top":return V+J-re;case"hanging":return V+J-2*re;case"middle":return V+J/2-re;case"ideographic":return V;case"alphabetic":default:return V}},E=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(J,re){this.colorStops.push([J,re])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(V,J,re,ie,fe,Se,ve,ye,we){for(var me=ee.call(this,re,ie,fe,Se),he=0;he<me.length;he++){var Ve=me[he];he===0&&(we?P.call(this,Ve.x1+V,Ve.y1+J):G.call(this,Ve.x1+V,Ve.y1+J)),le.call(this,V,J,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}ye?z.call(this):k.call(this,ve)},k=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(V,J){this.pdf.internal.out(n(V)+" "+r(J)+" m")},R=function(V){var J;switch(V.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var re=this.pdf.getTextDimensions(V.text),ie=j.call(this,V.y),fe=E.call(this,ie)-re.h,Se=this.ctx.transform.applyToPoint(new i(V.x,ie)),ve=this.ctx.transform.decompose(),ye=new l;ye=(ye=(ye=ye.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var we,me,he,Ve=this.ctx.transform.applyToRectangle(new o(V.x,ie,re.w,re.h)),nt=ye.applyToRectangle(new o(V.x,fe,re.w,re.h)),Oe=T.call(this,nt),Ie=[],je=0;je<Oe.length;je+=1)Ie.indexOf(Oe[je])===-1&&Ie.push(Oe[je]);if(M(Ie),this.autoPaging)for(var Ke=Ie[0],st=Ie[Ie.length-1],vt=Ke;vt<st+1;vt++){this.pdf.setPage(vt);var Tt=vt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[2],Kt=Vt-this.margin[0],cn=this.pdf.internal.pageSize.width-this.margin[1],Gt=cn-this.margin[3],Wt=vt===1?0:xt+(vt-2)*Kt;if(this.ctx.clip_path.length!==0){var sn=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(we,this.posX+this.margin[3],-1*Wt+Tt),Q.call(this,"fill",!0),this.path=sn}var Qt=F([JSON.parse(JSON.stringify(nt))],this.posX+this.margin[3],-Wt+Tt+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*V.scale),he=this.lineWidth,this.lineWidth=he*V.scale);var Ht=this.autoPaging!=="text";if(Ht||Qt.y+Qt.h<=Vt){if(Ht||Qt.y>=Tt&&Qt.x<=cn){var _t=Ht?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||cn-Qt.x)[0],On=F([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Wt+Tt+this.ctx.prevPageLastElemOffset)[0],An=Ht&&(vt>Ke||vt<st)&&y.call(this);An&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Kt,null).clip().discardPath()),this.pdf.text(_t,On.x,On.y,{angle:V.angle,align:J,renderingMode:V.renderingMode}),An&&this.pdf.restoreGraphicsState()}}else Qt.y<Vt&&(this.ctx.prevPageLastElemOffset+=Vt-Qt.y);V.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=he)}else V.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*V.scale),he=this.lineWidth,this.lineWidth=he*V.scale),this.pdf.text(V.text,Se.x+this.posX,Se.y+this.posY,{angle:V.angle,align:J,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=he)},G=function(V,J,re,ie){re=re||0,ie=ie||0,this.pdf.internal.out(n(V+re)+" "+r(J+ie)+" l")},q=function(V,J,re){return this.pdf.lines(V,J,re,null,null)},le=function(V,J,re,ie,fe,Se,ve,ye){this.pdf.internal.out([e(s(re+V)),e(a(ie+J)),e(s(fe+V)),e(a(Se+J)),e(s(ve+V)),e(a(ye+J)),"c"].join(" "))},ee=function(V,J,re,ie){for(var fe=2*Math.PI,Se=Math.PI/2;J>re;)J-=fe;var ve=Math.abs(re-J);ve<fe&&ie&&(ve=fe-ve);for(var ye=[],we=ie?-1:1,me=J;ve>1e-5;){var he=me+we*Math.min(ve,Se);ye.push(oe.call(this,V,me,he)),ve-=Math.abs(he-me),me=he}return ye},oe=function(V,J,re){var ie=(re-J)/2,fe=V*Math.cos(ie),Se=V*Math.sin(ie),ve=fe,ye=-Se,we=ve*ve+ye*ye,me=we+ve*fe+ye*Se,he=4/3*(Math.sqrt(2*we*me)-me)/(ve*Se-ye*fe),Ve=ve-he*ye,nt=ye+he*ve,Oe=Ve,Ie=-nt,je=ie+J,Ke=Math.cos(je),st=Math.sin(je);return{x1:V*Math.cos(J),y1:V*Math.sin(J),x2:Ve*Ke-nt*st,y2:Ve*st+nt*Ke,x3:Oe*Ke-Ie*st,y3:Oe*st+Ie*Ke,x4:V*Math.cos(re),y4:V*Math.sin(re)}},K=function(V){return 180*V/Math.PI},ne=function(V,J,re,ie,fe,Se){var ve=V+.5*(re-V),ye=J+.5*(ie-J),we=fe+.5*(re-fe),me=Se+.5*(ie-Se),he=Math.min(V,fe,ve,we),Ve=Math.max(V,fe,ve,we),nt=Math.min(J,Se,ye,me),Oe=Math.max(J,Se,ye,me);return new o(he,nt,Ve-he,Oe-nt)},X=function(V,J,re,ie,fe,Se,ve,ye){var we,me,he,Ve,nt,Oe,Ie,je,Ke,st,vt,Tt,xt,Vt,Kt=re-V,cn=ie-J,Gt=fe-re,Wt=Se-ie,sn=ve-fe,Qt=ye-Se;for(me=0;me<41;me++)Ke=(Ie=(he=V+(we=me/40)*Kt)+we*((nt=re+we*Gt)-he))+we*(nt+we*(fe+we*sn-nt)-Ie),st=(je=(Ve=J+we*cn)+we*((Oe=ie+we*Wt)-Ve))+we*(Oe+we*(Se+we*Qt-Oe)-je),me==0?(vt=Ke,Tt=st,xt=Ke,Vt=st):(vt=Math.min(vt,Ke),Tt=Math.min(Tt,st),xt=Math.max(xt,Ke),Vt=Math.max(Vt,st));return new o(Math.round(vt),Math.round(Tt),Math.round(xt-vt),Math.round(Vt-Tt))},ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,J,re=(V=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(En.API),function(t){var e=function(a){var i,o,l,u,d,m,p,x,C,y;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(m=(d=((d=((d=((d=(d-(y=d%85))/85)-(C=d%85))/85)-(x=d%85))/85)-(p=d%85))/85)%85,o.push(m+33,p+33,x+33,C+33,y+33)):o.push(122);return function(T,I){for(var F=I;F>0;F--)T.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},n=function(a){var i,o,l,u,d,m=String,p="length",x=255,C="charCodeAt",y="slice",T="replace";for(a[y](-2),a=a[y](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],u=0,d=(a+=i="uuuuu"[y](a[p]%5||5))[p];d>u;u+=5)o=52200625*(a[C](u)-33)+614125*(a[C](u+1)-33)+7225*(a[C](u+2)-33)+85*(a[C](u+3)-33)+(a[C](u+4)-33),l.push(x&o>>24,x&o>>16,x&o>>8,x&o);return function(I,F){for(var M=F;M>0;M--)I.pop()}(l,i[p]),m.fromCharCode.apply(m,l)},r=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=uS(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(En.API),function(t){t.loadFile=function(e,n,r){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var m=new XMLHttpRequest,p=0,x=function(C){var y=C.length,T=[],I=String.fromCharCode;for(p=0;p<y;p+=1)T.push(I(255&C.charCodeAt(p)));return T.join("")};if(m.open("GET",l,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?d(x(this.responseText)):d(void 0)}),m.send(null),u&&m.status===200)return x(m.responseText)}(s,a,i)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(En.API),function(t){function e(){return(qn.html2canvas?Promise.resolve(qn.html2canvas):Sw(()=>Promise.resolve().then(()=>BSe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function n(){return(qn.DOMPurify?Promise.resolve(qn.DOMPurify):Sw(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var r=function(i){var o=_s(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||m.appendChild(l(p,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var x=u[p],C=x.src.find(function(y){return y.format==="truetype"});C&&l.addFont(C.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),o(this.prop.container,m)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(r(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(r(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||En.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,u),m}).then(u,d).then(function(m){return l.updateProgress(1),m})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,En.getPageSize=function(i,o,l){if(_s(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,m=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var x,C=0,y=0;if(p.hasOwnProperty(m))C=p[m][1]/d,y=p[m][0]/d;else try{C=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",y>C&&(x=y,y=C,C=x);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",C>y&&(x=y,y=C,C=x)}return{width:y,height:C,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(pS):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(En.API),En.API.addJS=function(t){return J3=t,this.internal.events.subscribe("postPutResources",function(){M1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(M1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),X3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+J3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){M1!==void 0&&X3!==void 0&&this.internal.out("/Names <</JavaScript "+M1+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=r.exec(i);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var m=n.internal.newObject();d.push(m);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var i={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(i),i},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var i=r.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=n.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(En.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=i||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(m){for(var p,x=256*m.charCodeAt(4)+m.charCodeAt(5),C=m.length,y={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=x,e.indexOf(m.charCodeAt(T+1))!==-1){p=256*m.charCodeAt(T+5)+m.charCodeAt(T+6),y={width:256*m.charCodeAt(T+7)+m.charCodeAt(T+8),height:p,numcomponents:m.charCodeAt(T+9)};break}x=256*m.charCodeAt(T+2)+m.charCodeAt(T+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:s}}return d}}(En.API);var M0,U1,Z3,eF,tF,GZ=function(){var t,e,n;function r(a){var i,o,l,u,d,m,p,x,C,y,T,I,F,M;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(i=this.readUInt32(),C=(function(){var O,Q;for(Q=[],O=0;O<4;++O)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,m.delay=1e3*d/u,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,i-=4),a=(m!=null?m.data:void 0)||this.imgData,I=0;0<=i?I<i:I>i;0<=i?++I:--I)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(F=0;0<=y?F<y:F>y;0<=y?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":p=(T=this.read(i)).indexOf(0),x=String.fromCharCode.apply(String,T.slice(0,p)),this.text[x]=String.fromCharCode.apply(String,T.slice(p+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(m,p,x,C){var y,T,I,F,M,O,Q,j,E,S,k,z,P,R,G,q,le,ee,oe,K,ne,X=Math.ceil((u.width-m)/x),ce=Math.ceil((u.height-p)/C),V=u.width==X&&u.height==ce;for(R=i*X,z=V?o:new Uint8Array(R*ce),O=a.length,P=0,T=0;P<ce&&l<O;){switch(a[l++]){case 0:for(F=le=0;le<R;F=le+=1)z[T++]=a[l++];break;case 1:for(F=ee=0;ee<R;F=ee+=1)y=a[l++],M=F<i?0:z[T-i],z[T++]=(y+M)%256;break;case 2:for(F=oe=0;oe<R;F=oe+=1)y=a[l++],I=(F-F%i)/i,G=P&&z[(P-1)*R+I*i+F%i],z[T++]=(G+y)%256;break;case 3:for(F=K=0;K<R;F=K+=1)y=a[l++],I=(F-F%i)/i,M=F<i?0:z[T-i],G=P&&z[(P-1)*R+I*i+F%i],z[T++]=(y+Math.floor((M+G)/2))%256;break;case 4:for(F=ne=0;ne<R;F=ne+=1)y=a[l++],I=(F-F%i)/i,M=F<i?0:z[T-i],P===0?G=q=0:(G=z[(P-1)*R+I*i+F%i],q=I&&z[(P-1)*R+(I-1)*i+F%i]),Q=M+G-q,j=Math.abs(Q-M),S=Math.abs(Q-G),k=Math.abs(Q-q),E=j<=S&&j<=k?M:S<=k?G:q,z[T++]=(y+E)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!V){var J=((p+P*C)*u.width+m)*i,re=P*R;for(F=0;F<X;F+=1){for(var ie=0;ie<i;ie+=1)o[J++]=z[re++];J+=(x-1)*i}}P++}}return a=_Z(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var a,i,o,l,u,d,m,p,x;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=m=0,p=o.length;m<p;i=m+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(x=d[a++])!=null?x:255;return u},r.prototype.copyToImageData=function(a,i){var o,l,u,d,m,p,x,C,y,T,I;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),l=4,o=!0),C=(u=a.data||a).length,m=y||i,d=p=0,l===1)for(;d<C;)x=y?4*i[d/4]:p,T=m[x++],u[d++]=T,u[d++]=T,u[d++]=T,u[d++]=o?m[x++]:255,p=x;else for(;d<C;)x=y?4*i[d/4]:p,u[d++]=m[x++],u[d++]=m[x++],u[d++]=m[x++],u[d++]=o?m[x++]:255,p=x},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(qn)==="[object Window]"){try{e=qn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var i,o,l,u,d,m,p,x;if(this.animation){for(x=[],o=d=0,m=(p=this.animation.frames).length;d<m;o=++d)i=p[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,x.push(i.image=t(l));return x}},r.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(a){var i,o,l,u,d,m,p=this;return o=0,m=this.animation,u=m.numFrames,l=m.frames,d=m.numPlays,(i=function(){var x,C;if(x=o++%u,C=l[x],p.renderFrame(a,x),u>1&&o/u<d)return p.animation._timeout=setTimeout(i,C.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function qZ(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],m=0,p=null,x=0,C=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];m=t[e++]|t[e++]<<8,p=t[e++],(1&y)==0&&(p=null),x=y>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,M=t[e++]|t[e++]<<8,O=t[e++],Q=O>>6&1,j=1<<(7&O)+1,E=o,S=l,k=!1;O>>7&&(k=!0,E=e,S=j,e+=3*j);var z=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:T,y:I,width:F,height:M,has_local_palette:k,palette_offset:E,palette_size:S,data_offset:z,data_length:e-z,transparent_index:p,interlaced:!!Q,delay:m,disposal:x});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return C},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,G){var q=this.frameInfo(R),le=q.width*q.height,ee=new Uint8Array(le);nF(t,q.data_offset,ee,le);var oe=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ne=q.width,X=n-ne,ce=ne,V=4*(q.y*n+q.x),J=4*((q.y+q.height)*n+q.x),re=V,ie=4*X;q.interlaced===!0&&(ie+=4*n*7);for(var fe=8,Se=0,ve=ee.length;Se<ve;++Se){var ye=ee[Se];if(ce===0&&(ce=ne,(re+=ie)>=J&&(ie=4*X+4*n*(fe-1),re=V+(ne+X)*(fe<<1),fe>>=1)),ye===K)re+=4;else{var we=t[oe+3*ye],me=t[oe+3*ye+1],he=t[oe+3*ye+2];G[re++]=he,G[re++]=me,G[re++]=we,G[re++]=255}--ce}},this.decodeAndBlitFrameRGBA=function(R,G){var q=this.frameInfo(R),le=q.width*q.height,ee=new Uint8Array(le);nF(t,q.data_offset,ee,le);var oe=q.palette_offset,K=q.transparent_index;K===null&&(K=256);var ne=q.width,X=n-ne,ce=ne,V=4*(q.y*n+q.x),J=4*((q.y+q.height)*n+q.x),re=V,ie=4*X;q.interlaced===!0&&(ie+=4*n*7);for(var fe=8,Se=0,ve=ee.length;Se<ve;++Se){var ye=ee[Se];if(ce===0&&(ce=ne,(re+=ie)>=J&&(ie=4*X+4*n*(fe-1),re=V+(ne+X)*(fe<<1),fe>>=1)),ye===K)re+=4;else{var we=t[oe+3*ye],me=t[oe+3*ye+1],he=t[oe+3*ye+2];G[re++]=we,G[re++]=me,G[re++]=he,G[re++]=255}--ce}}}function nF(t,e,n,r){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,m=0,p=0,x=t[e++],C=new Int32Array(4096),y=null;;){for(;d<16&&x!==0;)m|=t[e++]<<d,d+=8,x===1?x=t[e++]:--x;if(d<l)break;var T=m&u;if(m>>=l,d-=l,T!==a){if(T===i)break;for(var I=T<o?T:y,F=0,M=I;M>a;)M=C[M]>>8,++F;var O=M;if(p+F+(I!==T?1:0)>r)return void Ls.log("Warning, gif stream longer than expected.");n[p++]=O;var Q=p+=F;for(I!==T&&(n[p++]=O),M=I;F--;)M=C[M],n[--Q]=255&M,M>>=8;y!==null&&o<4096&&(C[o++]=y<<8|O,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=T}else o=i+1,u=(1<<(l=s+1))-1,y=null}return p!==r&&Ls.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function CC(t){var e,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),m=new Array(65535),p=new Array(65535),x=new Array(64),C=new Array(64),y=[],T=0,I=7,F=new Array(64),M=new Array(64),O=new Array(64),Q=new Array(256),j=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(V,J){for(var re=0,ie=0,fe=new Array,Se=1;Se<=16;Se++){for(var ve=1;ve<=V[Se];ve++)fe[J[ie]]=[],fe[J[ie]][0]=re,fe[J[ie]][1]=Se,ie++,re++;re*=2}return fe}function oe(V){for(var J=V[0],re=V[1]-1;re>=0;)J&1<<re&&(T|=1<<I),re--,--I<0&&(T==255?(K(255),K(0)):K(T),I=7,T=0)}function K(V){y.push(V)}function ne(V){K(V>>8&255),K(255&V)}function X(V,J,re,ie,fe){for(var Se,ve=fe[0],ye=fe[240],we=function(st,vt){var Tt,xt,Vt,Kt,cn,Gt,Wt,sn,Qt,Ht,_t=0;for(Qt=0;Qt<8;++Qt){Tt=st[_t],xt=st[_t+1],Vt=st[_t+2],Kt=st[_t+3],cn=st[_t+4],Gt=st[_t+5],Wt=st[_t+6];var On=Tt+(sn=st[_t+7]),An=Tt-sn,Tr=xt+Wt,In=xt-Wt,nr=Vt+Gt,Lr=Vt-Gt,Zn=Kt+cn,ya=Kt-cn,wr=On+Zn,us=On-Zn,Is=Tr+nr,lr=Tr-nr;st[_t]=wr+Is,st[_t+4]=wr-Is;var vn=.707106781*(lr+us);st[_t+2]=us+vn,st[_t+6]=us-vn;var Ar=.382683433*((wr=ya+Lr)-(lr=In+An)),wa=.5411961*wr+Ar,As=1.306562965*lr+Ar,zs=.707106781*(Is=Lr+In),oa=An+zs,rn=An-zs;st[_t+5]=rn+wa,st[_t+3]=rn-wa,st[_t+1]=oa+As,st[_t+7]=oa-As,_t+=8}for(_t=0,Qt=0;Qt<8;++Qt){Tt=st[_t],xt=st[_t+8],Vt=st[_t+16],Kt=st[_t+24],cn=st[_t+32],Gt=st[_t+40],Wt=st[_t+48];var Rr=Tt+(sn=st[_t+56]),Nr=Tt-sn,Xr=xt+Wt,br=xt-Wt,Yt=Vt+Gt,be=Vt-Gt,Pe=Kt+cn,Fe=Kt-cn,De=Rr+Pe,Le=Rr-Pe,Me=Xr+Yt,et=Xr-Yt;st[_t]=De+Me,st[_t+32]=De-Me;var dt=.707106781*(et+Le);st[_t+16]=Le+dt,st[_t+48]=Le-dt;var Je=.382683433*((De=Fe+be)-(et=br+Nr)),at=.5411961*De+Je,ct=1.306562965*et+Je,Bt=.707106781*(Me=be+br),jt=Nr+Bt,Jt=Nr-Bt;st[_t+40]=Jt+at,st[_t+24]=Jt-at,st[_t+8]=jt+ct,st[_t+56]=jt-ct,_t++}for(Qt=0;Qt<64;++Qt)Ht=st[Qt]*vt[Qt],x[Qt]=Ht>0?Ht+.5|0:Ht-.5|0;return x}(V,J),me=0;me<64;++me)C[E[me]]=we[me];var he=C[0]-re;re=C[0],he==0?oe(ie[0]):(oe(ie[p[Se=32767+he]]),oe(m[Se]));for(var Ve=63;Ve>0&&C[Ve]==0;)Ve--;if(Ve==0)return oe(ve),re;for(var nt,Oe=1;Oe<=Ve;){for(var Ie=Oe;C[Oe]==0&&Oe<=Ve;)++Oe;var je=Oe-Ie;if(je>=16){nt=je>>4;for(var Ke=1;Ke<=nt;++Ke)oe(ye);je&=15}Se=32767+C[Oe],oe(fe[(je<<4)+p[Se]]),oe(m[Se]),Oe++}return Ve!=63&&oe(ve),re}function ce(V){V=Math.min(Math.max(V,1),100),a!=V&&(function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var fe=i((re[ie]*J+50)/100);fe=Math.min(Math.max(fe,1),255),o[E[ie]]=fe}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var ye=i((Se[ve]*J+50)/100);ye=Math.min(Math.max(ye,1),255),l[E[ve]]=ye}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,he=0;he<8;he++)for(var Ve=0;Ve<8;Ve++)u[me]=1/(o[E[me]]*we[he]*we[Ve]*8),d[me]=1/(l[E[me]]*we[he]*we[Ve]*8),me++}(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),a=V)}this.encode=function(V,J){J&&ce(J),y=new Array,T=0,I=7,ne(65496),ne(65504),ne(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ne(1),ne(1),K(0),K(0),function(){ne(65499),ne(132),K(0);for(var xt=0;xt<64;xt++)K(o[xt]);K(1);for(var Vt=0;Vt<64;Vt++)K(l[Vt])}(),function(xt,Vt){ne(65472),ne(17),K(8),ne(Vt),ne(xt),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(V.width,V.height),function(){ne(65476),ne(418),K(0);for(var xt=0;xt<16;xt++)K(S[xt+1]);for(var Vt=0;Vt<=11;Vt++)K(k[Vt]);K(16);for(var Kt=0;Kt<16;Kt++)K(z[Kt+1]);for(var cn=0;cn<=161;cn++)K(P[cn]);K(1);for(var Gt=0;Gt<16;Gt++)K(R[Gt+1]);for(var Wt=0;Wt<=11;Wt++)K(G[Wt]);K(17);for(var sn=0;sn<16;sn++)K(q[sn+1]);for(var Qt=0;Qt<=161;Qt++)K(le[Qt])}(),ne(65498),ne(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var re=0,ie=0,fe=0;T=0,I=7,this.encode.displayName="_encode_";for(var Se,ve,ye,we,me,he,Ve,nt,Oe,Ie=V.data,je=V.width,Ke=V.height,st=4*je,vt=0;vt<Ke;){for(Se=0;Se<st;){for(me=st*vt+Se,Ve=-1,nt=0,Oe=0;Oe<64;Oe++)he=me+(nt=Oe>>3)*st+(Ve=4*(7&Oe)),vt+nt>=Ke&&(he-=st*(vt+1+nt-Ke)),Se+Ve>=st&&(he-=Se+Ve-st+4),ve=Ie[he++],ye=Ie[he++],we=Ie[he++],F[Oe]=(j[ve]+j[ye+256>>0]+j[we+512>>0]>>16)-128,M[Oe]=(j[ve+768>>0]+j[ye+1024>>0]+j[we+1280>>0]>>16)-128,O[Oe]=(j[ve+1280>>0]+j[ye+1536>>0]+j[we+1792>>0]>>16)-128;re=X(F,u,re,e,r),ie=X(M,d,ie,n,s),fe=X(O,d,fe,n,s),Se+=32}vt+=8}if(I>=0){var Tt=[];Tt[1]=I+1,Tt[0]=(1<<I+1)-1,oe(Tt)}return ne(65497),new Uint8Array(y)},t=t||50,function(){for(var V=String.fromCharCode,J=0;J<256;J++)Q[J]=V(J)}(),e=ee(S,k),n=ee(R,G),r=ee(z,P),s=ee(q,le),function(){for(var V=1,J=2,re=1;re<=15;re++){for(var ie=V;ie<J;ie++)p[32767+ie]=re,m[32767+ie]=[],m[32767+ie][1]=re,m[32767+ie][0]=ie;for(var fe=-(J-1);fe<=-V;fe++)p[32767+fe]=re,m[32767+fe]=[],m[32767+fe][1]=re,m[32767+fe][0]=J-1+fe;V<<=1,J<<=1}}(),function(){for(var V=0;V<256;V++)j[V]=19595*V,j[V+256>>0]=38470*V,j[V+512>>0]=7471*V+32768,j[V+768>>0]=-11059*V,j[V+1024>>0]=-21709*V,j[V+1280>>0]=32768*V+8421375,j[V+1536>>0]=-27439*V,j[V+1792>>0]=-5329*V}(),ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _u(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rF(t){function e(S){if(!S)throw Error("assert :P")}function n(S,k,z){for(var P=0;4>P;P++)if(S[k+P]!=z.charCodeAt(P))return!0;return!1}function r(S,k,z,P,R){for(var G=0;G<R;G++)S[k+G]=z[P+G]}function s(S,k,z,P){for(var R=0;R<P;R++)S[k+R]=z}function a(S){return new Int32Array(S)}function i(S,k){for(var z=[],P=0;P<S;P++)z.push(new k);return z}function o(S,k){var z=[];return function P(R,G,q){for(var le=q[G],ee=0;ee<le&&(R.push(q.length>G+1?[]:new k),!(q.length<G+1));ee++)P(R[ee],G+1,q)}(z,0,S),z}var l=function(){var S=this;function k(N,H){for(var te=1<<H-1>>>0;N&te;)te>>>=1;return te?(N&te-1)+te:N}function z(N,H,te,ue,xe){e(!(ue%te));do N[H+(ue-=te)]=xe;while(0<ue)}function P(N,H,te,ue,xe){if(e(2328>=xe),512>=xe)var _e=a(512);else if((_e=a(xe))==null)return 0;return function(Ee,Ne,ke,Re,Ge,ut){var it,Ze,kt=Ne,pt=1<<ke,qe=a(16),Ye=a(16);for(e(Ge!=0),e(Re!=null),e(Ee!=null),e(0<ke),Ze=0;Ze<Ge;++Ze){if(15<Re[Ze])return 0;++qe[Re[Ze]]}if(qe[0]==Ge)return 0;for(Ye[1]=0,it=1;15>it;++it){if(qe[it]>1<<it)return 0;Ye[it+1]=Ye[it]+qe[it]}for(Ze=0;Ze<Ge;++Ze)it=Re[Ze],0<Re[Ze]&&(ut[Ye[it]++]=Ze);if(Ye[15]==1)return(Re=new R).g=0,Re.value=ut[0],z(Ee,kt,1,pt,Re),pt;var bt,It=-1,Et=pt-1,ln=0,en=1,yn=1,nn=1<<ke;for(Ze=0,it=1,Ge=2;it<=ke;++it,Ge<<=1){if(en+=yn<<=1,0>(yn-=qe[it]))return 0;for(;0<qe[it];--qe[it])(Re=new R).g=it,Re.value=ut[Ze++],z(Ee,kt+ln,Ge,nn,Re),ln=k(ln,it)}for(it=ke+1,Ge=2;15>=it;++it,Ge<<=1){if(en+=yn<<=1,0>(yn-=qe[it]))return 0;for(;0<qe[it];--qe[it]){if(Re=new R,(ln&Et)!=It){for(kt+=nn,bt=1<<(It=it)-ke;15>It&&!(0>=(bt-=qe[It]));)++It,bt<<=1;pt+=nn=1<<(bt=It-ke),Ee[Ne+(It=ln&Et)].g=bt+ke,Ee[Ne+It].value=kt-Ne-It}Re.g=it-ke,Re.value=ut[Ze++],z(Ee,kt+(ln>>ke),Ge,nn,Re),ln=k(ln,it)}}return en!=2*Ye[15]-1?0:pt}(N,H,te,ue,xe,_e)}function R(){this.value=this.g=0}function G(){this.value=this.g=0}function q(){this.G=i(5,R),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ms,G)}function le(N,H,te,ue){e(N!=null),e(H!=null),e(2147483648>ue),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=H,N.pa=te,N.Jd=H,N.Yc=te+ue,N.Zc=4<=ue?te+ue-4+1:te,Se(N)}function ee(N,H){for(var te=0;0<H--;)te|=ye(N,128)<<H;return te}function oe(N,H){var te=ee(N,H);return ve(N)?-te:te}function K(N,H,te,ue){var xe,_e=0;for(e(N!=null),e(H!=null),e(4294967288>ue),N.Sb=ue,N.Ra=0,N.u=0,N.h=0,4<ue&&(ue=4),xe=0;xe<ue;++xe)_e+=H[te+xe]<<8*xe;N.Ra=_e,N.bb=ue,N.oa=H,N.pa=te}function ne(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<Dl-8>>>0,++N.bb,N.u-=8;re(N)&&(N.h=1,N.u=0)}function X(N,H){if(e(0<=H),!N.h&&H<=Mi){var te=J(N)&Dc[H];return N.u+=H,ne(N),te}return N.h=1,N.u=0}function ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(N){return N.Ra>>>(N.u&Dl-1)>>>0}function re(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>Dl}function ie(N,H){N.u=H,N.h=re(N)}function fe(N){N.u>=ju&&(e(N.u>=ju),ne(N))}function Se(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function ve(N){return ee(N,1)}function ye(N,H){var te=N.Ca;0>N.b&&Se(N);var ue=N.b,xe=te*H>>>8,_e=(N.I>>>ue>xe)+0;for(_e?(te-=xe,N.I-=xe+1<<ue>>>0):te=xe+1,ue=te,xe=0;256<=ue;)xe+=8,ue>>=8;return ue=7^xe+ai[ue],N.b-=ue,N.Ca=(te<<ue)-1,_e}function we(N,H,te){N[H+0]=te>>24&255,N[H+1]=te>>16&255,N[H+2]=te>>8&255,N[H+3]=te>>0&255}function me(N,H){return N[H+0]<<0|N[H+1]<<8}function he(N,H){return me(N,H)|N[H+2]<<16}function Ve(N,H){return me(N,H)|me(N,H+2)<<16}function nt(N,H){var te=1<<H;return e(N!=null),e(0<H),N.X=a(te),N.X==null?0:(N.Mb=32-H,N.Xa=H,1)}function Oe(N,H){e(N!=null),e(H!=null),e(N.Xa==H.Xa),r(H.X,0,N.X,0,1<<H.Xa)}function Ie(){this.X=[],this.Xa=this.Mb=0}function je(N,H,te,ue){e(te!=null),e(ue!=null);var xe=te[0],_e=ue[0];return xe==0&&(xe=(N*_e+H/2)/H),_e==0&&(_e=(H*xe+N/2)/N),0>=xe||0>=_e?0:(te[0]=xe,ue[0]=_e,1)}function Ke(N,H){return N+(1<<H)-1>>>H}function st(N,H){return((4278255360&N)+(4278255360&H)>>>0&4278255360)+((16711935&N)+(16711935&H)>>>0&16711935)>>>0}function vt(N,H){S[H]=function(te,ue,xe,_e,Ee,Ne,ke){var Re;for(Re=0;Re<Ee;++Re){var Ge=S[N](Ne[ke+Re-1],xe,_e+Re);Ne[ke+Re]=st(te[ue+Re],Ge)}}}function Tt(){this.ud=this.hd=this.jd=0}function xt(N,H){return((4278124286&(N^H))>>>1)+(N&H)>>>0}function Vt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Kt(N,H){return Vt(N+(N-H+.5>>1))}function cn(N,H,te){return Math.abs(H-te)-Math.abs(N-te)}function Gt(N,H,te,ue,xe,_e,Ee){for(ue=_e[Ee-1],te=0;te<xe;++te)_e[Ee+te]=ue=st(N[H+te],ue)}function Wt(N,H,te,ue,xe){var _e;for(_e=0;_e<te;++_e){var Ee=N[H+_e],Ne=Ee>>8&255,ke=16711935&(ke=(ke=16711935&Ee)+((Ne<<16)+Ne));ue[xe+_e]=(4278255360&Ee)+ke>>>0}}function sn(N,H){H.jd=N>>0&255,H.hd=N>>8&255,H.ud=N>>16&255}function Qt(N,H,te,ue,xe,_e){var Ee;for(Ee=0;Ee<ue;++Ee){var Ne=H[te+Ee],ke=Ne>>>8,Re=Ne,Ge=255&(Ge=(Ge=Ne>>>16)+((N.jd<<24>>24)*(ke<<24>>24)>>>5));Re=255&(Re=(Re=Re+((N.hd<<24>>24)*(ke<<24>>24)>>>5))+((N.ud<<24>>24)*(Ge<<24>>24)>>>5)),xe[_e+Ee]=(4278255360&Ne)+(Ge<<16)+Re}}function Ht(N,H,te,ue,xe){S[H]=function(_e,Ee,Ne,ke,Re,Ge,ut,it,Ze){for(ke=ut;ke<it;++ke)for(ut=0;ut<Ze;++ut)Re[Ge++]=xe(Ne[ue(_e[Ee++])])},S[N]=function(_e,Ee,Ne,ke,Re,Ge,ut){var it=8>>_e.b,Ze=_e.Ea,kt=_e.K[0],pt=_e.w;if(8>it)for(_e=(1<<_e.b)-1,pt=(1<<it)-1;Ee<Ne;++Ee){var qe,Ye=0;for(qe=0;qe<Ze;++qe)qe&_e||(Ye=ue(ke[Re++])),Ge[ut++]=xe(kt[Ye&pt]),Ye>>=it}else S["VP8LMapColor"+te](ke,Re,kt,pt,Ge,ut,Ee,Ne,Ze)}}function _t(N,H,te,ue,xe){for(te=H+te;H<te;){var _e=N[H++];ue[xe++]=_e>>16&255,ue[xe++]=_e>>8&255,ue[xe++]=_e>>0&255}}function On(N,H,te,ue,xe){for(te=H+te;H<te;){var _e=N[H++];ue[xe++]=_e>>16&255,ue[xe++]=_e>>8&255,ue[xe++]=_e>>0&255,ue[xe++]=_e>>24&255}}function An(N,H,te,ue,xe){for(te=H+te;H<te;){var _e=(Ee=N[H++])>>16&240|Ee>>12&15,Ee=Ee>>0&240|Ee>>28&15;ue[xe++]=_e,ue[xe++]=Ee}}function Tr(N,H,te,ue,xe){for(te=H+te;H<te;){var _e=(Ee=N[H++])>>16&248|Ee>>13&7,Ee=Ee>>5&224|Ee>>3&31;ue[xe++]=_e,ue[xe++]=Ee}}function In(N,H,te,ue,xe){for(te=H+te;H<te;){var _e=N[H++];ue[xe++]=_e>>0&255,ue[xe++]=_e>>8&255,ue[xe++]=_e>>16&255}}function nr(N,H,te,ue,xe,_e){if(_e==0)for(te=H+te;H<te;)we(ue,((_e=N[H++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),xe+=32;else r(ue,xe,N,H,te)}function Lr(N,H){S[H][0]=S[N+"0"],S[H][1]=S[N+"1"],S[H][2]=S[N+"2"],S[H][3]=S[N+"3"],S[H][4]=S[N+"4"],S[H][5]=S[N+"5"],S[H][6]=S[N+"6"],S[H][7]=S[N+"7"],S[H][8]=S[N+"8"],S[H][9]=S[N+"9"],S[H][10]=S[N+"10"],S[H][11]=S[N+"11"],S[H][12]=S[N+"12"],S[H][13]=S[N+"13"],S[H][14]=S[N+"0"],S[H][15]=S[N+"0"]}function Zn(N){return N==zu||N==sc||N==ac||N==h}function ya(){this.eb=[],this.size=this.A=this.fb=0}function wr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function us(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ya,this.f.kb=new wr,this.sd=null}function Is(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vn(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Ar(N,H){var te=N.T,ue=H.ba.f.RGBA,xe=ue.eb,_e=ue.fb+N.ka*ue.A,Ee=Ws[H.ba.S],Ne=N.y,ke=N.O,Re=N.f,Ge=N.N,ut=N.ea,it=N.W,Ze=H.cc,kt=H.dc,pt=H.Mc,qe=H.Nc,Ye=N.ka,bt=N.ka+N.T,It=N.U,Et=It+1>>1;for(Ye==0?Ee(Ne,ke,null,null,Re,Ge,ut,it,Re,Ge,ut,it,xe,_e,null,null,It):(Ee(H.ec,H.fc,Ne,ke,Ze,kt,pt,qe,Re,Ge,ut,it,xe,_e-ue.A,xe,_e,It),++te);Ye+2<bt;Ye+=2)Ze=Re,kt=Ge,pt=ut,qe=it,Ge+=N.Rc,it+=N.Rc,_e+=2*ue.A,Ee(Ne,(ke+=2*N.fa)-N.fa,Ne,ke,Ze,kt,pt,qe,Re,Ge,ut,it,xe,_e-ue.A,xe,_e,It);return ke+=N.fa,N.j+bt<N.o?(r(H.ec,H.fc,Ne,ke,It),r(H.cc,H.dc,Re,Ge,Et),r(H.Mc,H.Nc,ut,it,Et),te--):1&bt||Ee(Ne,ke,null,null,Re,Ge,ut,it,Re,Ge,ut,it,xe,_e+ue.A,null,null,It),te}function wa(N,H,te){var ue=N.F,xe=[N.J];if(ue!=null){var _e=N.U,Ee=H.ba.S,Ne=Ee==Pc||Ee==ac;H=H.ba.f.RGBA;var ke=[0],Re=N.ka;ke[0]=N.T,N.Kb&&(Re==0?--ke[0]:(--Re,xe[0]-=N.width),N.j+N.ka+N.T==N.o&&(ke[0]=N.o-N.j-Re));var Ge=H.eb;Re=H.fb+Re*H.A,N=hr(ue,xe[0],N.width,_e,ke,Ge,Re+(Ne?0:3),H.A),e(te==ke),N&&Zn(Ee)&&Na(Ge,Re,Ne,_e,ke,H.A)}return 0}function As(N){var H=N.ma,te=H.ba.S,ue=11>te,xe=te==fu||te==Vu||te==Pc||te==Ml||te==12||Zn(te);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!Ic(H.Oa,N,xe?11:12))return 0;if(xe&&Zn(te)&&Rt(),N.da)alert("todo:use_scaling");else{if(ue){if(H.Ib=vn,N.Kb){if(te=N.U+1>>1,H.memory=a(N.U+2*te),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+N.U,H.Mc=H.cc,H.Nc=H.dc+te,H.Ib=Ar,Rt()}}else alert("todo:EmitYUV");xe&&(H.Jb=wa,ue&&Xe())}if(ue&&!Iv){for(N=0;256>N;++N)jb[N]=89858*(N-128)+Qa>>Uc,Wf[N]=-22014*(N-128)+Qa,xp[N]=-45773*(N-128),Ha[N]=113618*(N-128)+Qa>>Uc;for(N=Ku;N<f0;++N)H=76283*(N-16)+Qa>>Uc,Yf[N-Ku]=ar(H,255),vp[N-Ku]=ar(H+8>>4,15);Iv=1}return 1}function zs(N){var H=N.ma,te=N.U,ue=N.T;return e(!(1&N.ka)),0>=te||0>=ue?0:(te=H.Ib(N,H),H.Jb!=null&&H.Jb(N,H,te),H.Dc+=te,1)}function oa(N){N.ma.memory=null}function rn(N,H,te,ue){return X(N,8)!=47?0:(H[0]=X(N,14)+1,te[0]=X(N,14)+1,ue[0]=X(N,1),X(N,3)!=0?0:!N.h)}function Rr(N,H){if(4>N)return N+1;var te=N-2>>1;return(2+(1&N)<<te)+X(H,te)+1}function Nr(N,H){return 120<H?H-120:1<=(te=((te=Qe[H-1])>>4)*N+(8-(15&te)))?te:1;var te}function Xr(N,H,te){var ue=J(te),xe=N[H+=255&ue].g-8;return 0<xe&&(ie(te,te.u+8),ue=J(te),H+=N[H].value,H+=ue&(1<<xe)-1),ie(te,te.u+N[H].g),N[H].value}function br(N,H,te){return te.g+=N.g,te.value+=N.value<<H>>>0,e(8>=te.g),N.g}function Yt(N,H,te){var ue=N.xc;return e((H=ue==0?0:N.vc[N.md*(te>>ue)+(H>>ue)])<N.Wb),N.Ya[H]}function be(N,H,te,ue){var xe=N.ab,_e=N.c*H,Ee=N.C;H=Ee+H;var Ne=te,ke=ue;for(ue=N.Ta,te=N.Ua;0<xe--;){var Re=N.gc[xe],Ge=Ee,ut=H,it=Ne,Ze=ke,kt=(ke=ue,Ne=te,Re.Ea);switch(e(Ge<ut),e(ut<=Re.nc),Re.hc){case 2:vd(it,Ze,(ut-Ge)*kt,ke,Ne);break;case 0:var pt=Ge,qe=ut,Ye=ke,bt=Ne,It=(nn=Re).Ea;pt==0&&($f(it,Ze,null,null,1,Ye,bt),Gt(it,Ze+1,0,0,It-1,Ye,bt+1),Ze+=It,bt+=It,++pt);for(var Et=1<<nn.b,ln=Et-1,en=Ke(It,nn.b),yn=nn.K,nn=nn.w+(pt>>nn.b)*en;pt<qe;){var Kr=yn,ss=nn,Er=1;for(ao(it,Ze,Ye,bt-It,1,Ye,bt);Er<It;){var xr=(Er&~ln)+Et;xr>It&&(xr=It),(0,Ll[Kr[ss++]>>8&15])(it,Ze+ +Er,Ye,bt+Er-It,xr-Er,Ye,bt+Er),Er=xr}Ze+=It,bt+=It,++pt&ln||(nn+=en)}ut!=Re.nc&&r(ke,Ne-kt,ke,Ne+(ut-Ge-1)*kt,kt);break;case 1:for(kt=it,qe=Ze,It=(it=Re.Ea)-(bt=it&~(Ye=(Ze=1<<Re.b)-1)),pt=Ke(it,Re.b),Et=Re.K,Re=Re.w+(Ge>>Re.b)*pt;Ge<ut;){for(ln=Et,en=Re,yn=new Tt,nn=qe+bt,Kr=qe+it;qe<nn;)sn(ln[en++],yn),Rl(yn,kt,qe,Ze,ke,Ne),qe+=Ze,Ne+=Ze;qe<Kr&&(sn(ln[en++],yn),Rl(yn,kt,qe,It,ke,Ne),qe+=It,Ne+=It),++Ge&Ye||(Re+=pt)}break;case 3:if(it==ke&&Ze==Ne&&0<Re.b){for(qe=ke,it=kt=Ne+(ut-Ge)*kt-(bt=(ut-Ge)*Ke(Re.Ea,Re.b)),Ze=ke,Ye=Ne,pt=[],bt=(It=bt)-1;0<=bt;--bt)pt[bt]=Ze[Ye+bt];for(bt=It-1;0<=bt;--bt)qe[it+bt]=pt[bt];Oa(Re,Ge,ut,ke,kt,ke,Ne)}else Oa(Re,Ge,ut,it,Ze,ke,Ne)}Ne=ue,ke=te}ke!=te&&r(ue,te,Ne,ke,_e)}function Pe(N,H){var te=N.V,ue=N.Ba+N.c*N.C,xe=H-N.C;if(e(H<=N.l.o),e(16>=xe),0<xe){var _e=N.l,Ee=N.Ta,Ne=N.Ua,ke=_e.width;if(be(N,xe,te,ue),xe=Ne=[Ne],e((te=N.C)<(ue=H)),e(_e.v<_e.va),ue>_e.o&&(ue=_e.o),te<_e.j){var Re=_e.j-te;te=_e.j,xe[0]+=Re*ke}if(te>=ue?te=0:(xe[0]+=4*_e.v,_e.ka=te-_e.j,_e.U=_e.va-_e.v,_e.T=ue-te,te=1),te){if(Ne=Ne[0],11>(te=N.ca).S){var Ge=te.f.RGBA,ut=(ue=te.S,xe=_e.U,_e=_e.T,Re=Ge.eb,Ge.A),it=_e;for(Ge=Ge.fb+N.Ma*Ge.A;0<it--;){var Ze=Ee,kt=Ne,pt=xe,qe=Re,Ye=Ge;switch(ue){case oi:Ta(Ze,kt,pt,qe,Ye);break;case fu:ua(Ze,kt,pt,qe,Ye);break;case zu:ua(Ze,kt,pt,qe,Ye),Na(qe,Ye,0,pt,1,0);break;case hl:Ui(Ze,kt,pt,qe,Ye);break;case Vu:nr(Ze,kt,pt,qe,Ye,1);break;case sc:nr(Ze,kt,pt,qe,Ye,1),Na(qe,Ye,0,pt,1,0);break;case Pc:nr(Ze,kt,pt,qe,Ye,0);break;case ac:nr(Ze,kt,pt,qe,Ye,0),Na(qe,Ye,1,pt,1,0);break;case Ml:cl(Ze,kt,pt,qe,Ye);break;case h:cl(Ze,kt,pt,qe,Ye),fr(qe,Ye,pt,1,0);break;case yd:Aa(Ze,kt,pt,qe,Ye);break;default:e(0)}Ne+=ke,Ge+=ut}N.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=te.height)}}N.C=H,e(N.C<=N.i)}function Fe(N){var H;if(0<N.ua)return 0;for(H=0;H<N.Wb;++H){var te=N.Ya[H].G,ue=N.Ya[H].H;if(0<te[1][ue[1]+0].g||0<te[2][ue[2]+0].g||0<te[3][ue[3]+0].g)return 0}return 1}function De(N,H,te,ue,xe,_e){if(N.Z!=0){var Ee=N.qd,Ne=N.rd;for(e(es[N.Z]!=null);H<te;++H)es[N.Z](Ee,Ne,ue,xe,ue,xe,_e),Ee=ue,Ne=xe,xe+=_e;N.qd=Ee,N.rd=Ne}}function Le(N,H){var te=N.l.ma,ue=te.Z==0||te.Z==1?N.l.j:N.C;if(ue=N.C<ue?ue:N.C,e(H<=N.l.o),H>ue){var xe=N.l.width,_e=te.ca,Ee=te.tb+xe*ue,Ne=N.V,ke=N.Ba+N.c*ue,Re=N.gc;e(N.ab==1),e(Re[0].hc==3),ii(Re[0],ue,H,Ne,ke,_e,Ee),De(te,ue,H,_e,Ee,xe)}N.C=N.Ma=H}function Me(N,H,te,ue,xe,_e,Ee){var Ne=N.$/ue,ke=N.$%ue,Re=N.m,Ge=N.s,ut=te+N.$,it=ut;xe=te+ue*xe;var Ze=te+ue*_e,kt=280+Ge.ua,pt=N.Pb?Ne:16777216,qe=0<Ge.ua?Ge.Wa:null,Ye=Ge.wc,bt=ut<Ze?Yt(Ge,ke,Ne):null;e(N.C<_e),e(Ze<=xe);var It=!1;e:for(;;){for(;It||ut<Ze;){var Et=0;if(Ne>=pt){var ln=ut-te;e((pt=N).Pb),pt.wd=pt.m,pt.xd=ln,0<pt.s.ua&&Oe(pt.s.Wa,pt.s.vb),pt=Ne+ht}if(ke&Ye||(bt=Yt(Ge,ke,Ne)),e(bt!=null),bt.Qb&&(H[ut]=bt.qb,It=!0),!It)if(fe(Re),bt.jc){Et=Re,ln=H;var en=ut,yn=bt.pd[J(Et)&Ms-1];e(bt.jc),256>yn.g?(ie(Et,Et.u+yn.g),ln[en]=yn.value,Et=0):(ie(Et,Et.u+yn.g-256),e(256<=yn.value),Et=yn.value),Et==0&&(It=!0)}else Et=Xr(bt.G[0],bt.H[0],Re);if(Re.h)break;if(It||256>Et){if(!It)if(bt.nd)H[ut]=(bt.qb|Et<<8)>>>0;else{if(fe(Re),It=Xr(bt.G[1],bt.H[1],Re),fe(Re),ln=Xr(bt.G[2],bt.H[2],Re),en=Xr(bt.G[3],bt.H[3],Re),Re.h)break;H[ut]=(en<<24|It<<16|Et<<8|ln)>>>0}if(It=!1,++ut,++ke>=ue&&(ke=0,++Ne,Ee!=null&&Ne<=_e&&!(Ne%16)&&Ee(N,Ne),qe!=null))for(;it<ut;)Et=H[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et}else if(280>Et){if(Et=Rr(Et-256,Re),ln=Xr(bt.G[4],bt.H[4],Re),fe(Re),ln=Nr(ue,ln=Rr(ln,Re)),Re.h)break;if(ut-te<ln||xe-ut<Et)break e;for(en=0;en<Et;++en)H[ut+en]=H[ut+en-ln];for(ut+=Et,ke+=Et;ke>=ue;)ke-=ue,++Ne,Ee!=null&&Ne<=_e&&!(Ne%16)&&Ee(N,Ne);if(e(ut<=xe),ke&Ye&&(bt=Yt(Ge,ke,Ne)),qe!=null)for(;it<ut;)Et=H[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et}else{if(!(Et<kt))break e;for(It=Et-280,e(qe!=null);it<ut;)Et=H[it++],qe.X[(506832829*Et&4294967295)>>>qe.Mb]=Et;Et=ut,e(!(It>>>(ln=qe).Xa)),H[Et]=ln.X[It],It=!0}It||e(Re.h==re(Re))}if(N.Pb&&Re.h&&ut<xe)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Oe(N.s.vb,N.s.Wa);else{if(Re.h)break e;Ee!=null&&Ee(N,Ne>_e?_e:Ne),N.a=0,N.$=ut-te}return 1}return N.a=3,0}function et(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var H=N.Wa;H!=null&&(H.X=null),N.vb=null,e(N!=null)}function dt(){var N=new Bc;return N==null?null:(N.a=0,N.xb=hu,Lr("Predictor","VP8LPredictors"),Lr("Predictor","VP8LPredictors_C"),Lr("PredictorAdd","VP8LPredictorsAdd"),Lr("PredictorAdd","VP8LPredictorsAdd_C"),vd=Wt,Rl=Qt,Ta=_t,ua=On,cl=An,Aa=Tr,Ui=In,S.VP8LMapColor32b=Sa,S.VP8LMapColor8b=Lc,N)}function Je(N,H,te,ue,xe){var _e=1,Ee=[N],Ne=[H],ke=ue.m,Re=ue.s,Ge=null,ut=0;e:for(;;){if(te)for(;_e&&X(ke,1);){var it=Ee,Ze=Ne,kt=ue,pt=1,qe=kt.m,Ye=kt.gc[kt.ab],bt=X(qe,2);if(kt.Oc&1<<bt)_e=0;else{switch(kt.Oc|=1<<bt,Ye.hc=bt,Ye.Ea=it[0],Ye.nc=Ze[0],Ye.K=[null],++kt.ab,e(4>=kt.ab),bt){case 0:case 1:Ye.b=X(qe,3)+2,pt=Je(Ke(Ye.Ea,Ye.b),Ke(Ye.nc,Ye.b),0,kt,Ye.K),Ye.K=Ye.K[0];break;case 3:var It,Et=X(qe,8)+1,ln=16<Et?0:4<Et?1:2<Et?2:3;if(it[0]=Ke(Ye.Ea,ln),Ye.b=ln,It=pt=Je(Et,1,0,kt,Ye.K)){var en,yn=Et,nn=Ye,Kr=1<<(8>>nn.b),ss=a(Kr);if(ss==null)It=0;else{var Er=nn.K[0],xr=nn.w;for(ss[0]=nn.K[0][0],en=1;en<1*yn;++en)ss[en]=st(Er[xr+en],ss[en-1]);for(;en<4*Kr;++en)ss[en]=0;nn.K[0]=null,nn.K[0]=ss,It=1}}pt=It;break;case 2:break;default:e(0)}_e=pt}}if(Ee=Ee[0],Ne=Ne[0],_e&&X(ke,1)&&!(_e=1<=(ut=X(ke,4))&&11>=ut)){ue.a=3;break e}var hs;if(hs=_e)t:{var as,tr,xs,kn=ue,Gn=Ee,zr=Ne,$r=ut,ci=te,Va=kn.m,fa=kn.s,ha=[null],Ba=1,Ol=0,is=rt[$r];n:for(;;){if(ci&&X(Va,1)){var ka=X(Va,3)+2,lc=Ke(Gn,ka),$u=Ke(zr,ka),FA=lc*$u;if(!Je(lc,$u,0,kn,ha))break n;for(ha=ha[0],fa.xc=ka,as=0;as<FA;++as){var Wu=ha[as]>>8&65535;ha[as]=Wu,Wu>=Ba&&(Ba=Wu+1)}}if(Va.h)break n;for(tr=0;5>tr;++tr){var js=Z[tr];!tr&&0<$r&&(js+=1<<$r),Ol<js&&(Ol=js)}var Xf=i(Ba*is,R),h0=Ba,lo=i(h0,q);if(lo==null)var Ys=null;else e(65536>=h0),Ys=lo;var DA=a(Ol);if(Ys==null||DA==null||Xf==null){kn.a=1;break n}var Yu=Xf;for(as=xs=0;as<Ba;++as){var ko=Ys[as],Xu=ko.G,Io=ko.H,Jf=0,wd=1,m0=0;for(tr=0;5>tr;++tr){js=Z[tr],Xu[tr]=Yu,Io[tr]=xs,!tr&&0<$r&&(js+=1<<$r);s:{var Zf,p0=js,eh=kn,bd=DA,Lv=Yu,Rv=xs,th=0,pu=eh.m,Hb=X(pu,1);if(s(bd,0,0,p0),Hb){var Pv=X(pu,1)+1,Mv=X(pu,1),yp=X(pu,Mv==0?1:8);bd[yp]=1,Pv==2&&(bd[yp=X(pu,8)]=1);var _d=1}else{var wp=a(19),bp=X(pu,4)+4;if(19<bp){eh.a=3;var nh=0;break s}for(Zf=0;Zf<bp;++Zf)wp[Ce[Zf]]=X(pu,3);var g0=void 0,Cd=void 0,Uv=eh,Ov=wp,gu=p0,rh=bd,x0=0,cc=Uv.m,Ed=8,_p=i(128,R);r:for(;P(_p,0,7,Ov,19);){if(X(cc,1)){var jv=2+2*X(cc,3);if((g0=2+X(cc,jv))>gu)break r}else g0=gu;for(Cd=0;Cd<gu&&g0--;){fe(cc);var Cp=_p[0+(127&J(cc))];ie(cc,cc.u+Cp.g);var LA=Cp.value;if(16>LA)rh[Cd++]=LA,LA!=0&&(Ed=LA);else{var Qv=LA==16,Ep=LA-16,Sp=D[Ep],Tp=X(cc,w[Ep])+Sp;if(Cd+Tp>gu)break r;for(var Hv=Qv?Ed:0;0<Tp--;)rh[Cd++]=Hv}}x0=1;break r}x0||(Uv.a=3),_d=x0}(_d=_d&&!pu.h)&&(th=P(Lv,Rv,8,bd,p0)),_d&&th!=0?nh=th:(eh.a=3,nh=0)}if(nh==0)break n;if(wd&&Ae[tr]==1&&(wd=Yu[xs].g==0),Jf+=Yu[xs].g,xs+=nh,3>=tr){var RA,v0=DA[0];for(RA=1;RA<js;++RA)DA[RA]>v0&&(v0=DA[RA]);m0+=v0}}if(ko.nd=wd,ko.Qb=0,wd&&(ko.qb=(Xu[3][Io[3]+0].value<<24|Xu[1][Io[1]+0].value<<16|Xu[2][Io[2]+0].value)>>>0,Jf==0&&256>Xu[0][Io[0]+0].value&&(ko.Qb=1,ko.qb+=Xu[0][Io[0]+0].value<<8)),ko.jc=!ko.Qb&&6>m0,ko.jc){var sh,xu=ko;for(sh=0;sh<Ms;++sh){var Oc=sh,vu=xu.pd[Oc],ah=xu.G[0][xu.H[0]+Oc];256<=ah.value?(vu.g=ah.g+256,vu.value=ah.value):(vu.g=0,vu.value=0,Oc>>=br(ah,8,vu),Oc>>=br(xu.G[1][xu.H[1]+Oc],16,vu),Oc>>=br(xu.G[2][xu.H[2]+Oc],0,vu),br(xu.G[3][xu.H[3]+Oc],24,vu))}}}fa.vc=ha,fa.Wb=Ba,fa.Ya=Ys,fa.yc=Xf,hs=1;break t}hs=0}if(!(_e=hs)){ue.a=3;break e}if(0<ut){if(Re.ua=1<<ut,!nt(Re.Wa,ut)){ue.a=1,_e=0;break e}}else Re.ua=0;var ih=ue,Np=Ee,Vv=Ne,Bp=ih.s,kp=Bp.xc;if(ih.c=Np,ih.i=Vv,Bp.md=Ke(Np,kp),Bp.wc=kp==0?-1:(1<<kp)-1,te){ue.xb=A0;break e}if((Ge=a(Ee*Ne))==null){ue.a=1,_e=0;break e}_e=(_e=Me(ue,Ge,0,Ee,Ne,Ne,null))&&!ke.h;break e}return _e?(xe!=null?xe[0]=Ge:(e(Ge==null),e(te)),ue.$=0,te||et(Re)):et(Re),_e}function at(N,H){var te=N.c*N.i,ue=te+H+16*H;return e(N.c<=H),N.V=a(ue),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+te+H,1)}function ct(N,H){var te=N.C,ue=H-te,xe=N.V,_e=N.Ba+N.c*te;for(e(H<=N.l.o);0<ue;){var Ee=16<ue?16:ue,Ne=N.l.ma,ke=N.l.width,Re=ke*Ee,Ge=Ne.ca,ut=Ne.tb+ke*te,it=N.Ta,Ze=N.Ua;be(N,Ee,xe,_e),fs(it,Ze,Ge,ut,Re),De(Ne,te,te+Ee,Ge,ut,ke),ue-=Ee,xe+=Ee*N.c,te+=Ee}e(te==H),N.C=N.Ma=H}function Bt(){this.ub=this.yd=this.td=this.Rb=0}function jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ot(){this.Yb=function(){var N=[];return function H(te,ue,xe){for(var _e=xe[ue],Ee=0;Ee<_e&&(te.push(xe.length>ue+1?[]:0),!(xe.length<ue+1));Ee++)H(te[Ee],ue+1,xe)}(N,0,[3,11]),N}()}function $t(){this.jb=a(3),this.Wc=o([4,8],Ot),this.Xc=o([4,17],Ot)}function Cn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function ur(){this.Na=this.la=0}function dr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ba(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new Rs),this.aa=0,this.l=new Fs}function Gs(){this.y=a(16),this.f=a(8),this.ea=a(8)}function la(){this.cb=this.a=0,this.sc="",this.m=new ce,this.Od=new Bt,this.Kc=new jt,this.ed=new Cn,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new ba,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ce),this.ia=0,this.pb=i(4,dr),this.Pa=new $t,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gs),this.Hd=0,this.rb=Array(new ur),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rs),this.L=this.aa=0,this.gd=o([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rn(){var N=new la;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,dn||(dn=tl)),N}function Pn(N,H,te){return N.a==0&&(N.a=H,N.sc=te,N.cb=0),0}function qs(N,H,te){return 3<=te&&N[H+0]==157&&N[H+1]==1&&N[H+2]==42}function Ji(N,H){if(N==null)return 0;if(N.a=0,N.sc="OK",H==null)return Pn(N,2,"null VP8Io passed to VP8GetHeaders()");var te=H.data,ue=H.w,xe=H.ha;if(4>xe)return Pn(N,7,"Truncated header.");var _e=te[ue+0]|te[ue+1]<<8|te[ue+2]<<16,Ee=N.Od;if(Ee.Rb=!(1&_e),Ee.td=_e>>1&7,Ee.yd=_e>>4&1,Ee.ub=_e>>5,3<Ee.td)return Pn(N,3,"Incorrect keyframe parameters.");if(!Ee.yd)return Pn(N,4,"Frame not displayable.");ue+=3,xe-=3;var Ne=N.Kc;if(Ee.Rb){if(7>xe)return Pn(N,7,"cannot parse picture header");if(!qs(te,ue,xe))return Pn(N,3,"Bad code word");Ne.c=16383&(te[ue+4]<<8|te[ue+3]),Ne.Td=te[ue+4]>>6,Ne.i=16383&(te[ue+6]<<8|te[ue+5]),Ne.Ud=te[ue+6]>>6,ue+=7,xe-=7,N.za=Ne.c+15>>4,N.Ub=Ne.i+15>>4,H.width=Ne.c,H.height=Ne.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,s((_e=N.Pa).jb,0,255,_e.jb.length),e((_e=N.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,s(_e.Zb,0,0,_e.Zb.length),s(_e.Lb,0,0,_e.Lb)}if(Ee.ub>xe)return Pn(N,7,"bad partition length");le(_e=N.m,te,ue,Ee.ub),ue+=Ee.ub,xe-=Ee.ub,Ee.Rb&&(Ne.Ld=ve(_e),Ne.Kd=ve(_e)),Ne=N.Qa;var ke,Re=N.Pa;if(e(_e!=null),e(Ne!=null),Ne.Cb=ve(_e),Ne.Cb){if(Ne.Bb=ve(_e),ve(_e)){for(Ne.Fb=ve(_e),ke=0;4>ke;++ke)Ne.Zb[ke]=ve(_e)?oe(_e,7):0;for(ke=0;4>ke;++ke)Ne.Lb[ke]=ve(_e)?oe(_e,6):0}if(Ne.Bb)for(ke=0;3>ke;++ke)Re.jb[ke]=ve(_e)?ee(_e,8):255}else Ne.Bb=0;if(_e.Ka)return Pn(N,3,"cannot parse segment header");if((Ne=N.ed).zd=ve(_e),Ne.Tb=ee(_e,6),Ne.wb=ee(_e,3),Ne.Pc=ve(_e),Ne.Pc&&ve(_e)){for(Re=0;4>Re;++Re)ve(_e)&&(Ne.vd[Re]=oe(_e,6));for(Re=0;4>Re;++Re)ve(_e)&&(Ne.od[Re]=oe(_e,6))}if(N.L=Ne.Tb==0?0:Ne.zd?1:2,_e.Ka)return Pn(N,3,"cannot parse filter header");var Ge=xe;if(xe=ke=ue,ue=ke+Ge,Ne=Ge,N.Xb=(1<<ee(N.m,2))-1,Ge<3*(Re=N.Xb))te=7;else{for(ke+=3*Re,Ne-=3*Re,Ge=0;Ge<Re;++Ge){var ut=te[xe+0]|te[xe+1]<<8|te[xe+2]<<16;ut>Ne&&(ut=Ne),le(N.Jc[+Ge],te,ke,ut),ke+=ut,Ne-=ut,xe+=3}le(N.Jc[+Re],te,ke,Ne),te=ke<ue?0:5}if(te!=0)return Pn(N,te,"cannot parse partitions");for(te=ee(ke=N.m,7),xe=ve(ke)?oe(ke,4):0,ue=ve(ke)?oe(ke,4):0,Ne=ve(ke)?oe(ke,4):0,Re=ve(ke)?oe(ke,4):0,ke=ve(ke)?oe(ke,4):0,Ge=N.Qa,ut=0;4>ut;++ut){if(Ge.Cb){var it=Ge.Zb[ut];Ge.Fb||(it+=te)}else{if(0<ut){N.pb[ut]=N.pb[0];continue}it=te}var Ze=N.pb[ut];Ze.Sc[0]=Ft[ar(it+xe,127)],Ze.Sc[1]=an[ar(it+0,127)],Ze.Eb[0]=2*Ft[ar(it+ue,127)],Ze.Eb[1]=101581*an[ar(it+Ne,127)]>>16,8>Ze.Eb[1]&&(Ze.Eb[1]=8),Ze.Qc[0]=Ft[ar(it+Re,117)],Ze.Qc[1]=an[ar(it+ke,127)],Ze.lc=it+ke}if(!Ee.Rb)return Pn(N,4,"Not a key frame.");for(ve(_e),Ee=N.Pa,te=0;4>te;++te){for(xe=0;8>xe;++xe)for(ue=0;3>ue;++ue)for(Ne=0;11>Ne;++Ne)Re=ye(_e,Bo[te][xe][ue][Ne])?ee(_e,8):$s[te][xe][ue][Ne],Ee.Wc[te][xe].Yb[ue][Ne]=Re;for(xe=0;17>xe;++xe)Ee.Xc[te][xe]=Ee.Wc[te][u0[xe]]}return N.kc=ve(_e),N.kc&&(N.Bd=ee(_e,8)),N.cb=1}function tl(N,H,te,ue,xe,_e,Ee){var Ne=H[xe].Yb[te];for(te=0;16>xe;++xe){if(!ye(N,Ne[te+0]))return xe;for(;!ye(N,Ne[te+1]);)if(Ne=H[++xe].Yb[0],te=0,xe==16)return 16;var ke=H[xe+1].Yb;if(ye(N,Ne[te+2])){var Re=N,Ge=0;if(ye(Re,(it=Ne)[(ut=te)+3]))if(ye(Re,it[ut+6])){for(Ne=0,ut=2*(Ge=ye(Re,it[ut+8]))+(it=ye(Re,it[ut+9+Ge])),Ge=0,it=xn[ut];it[Ne];++Ne)Ge+=Ge+ye(Re,it[Ne]);Ge+=3+(8<<ut)}else ye(Re,it[ut+7])?(Ge=7+2*ye(Re,165),Ge+=ye(Re,145)):Ge=5+ye(Re,159);else Ge=ye(Re,it[ut+4])?3+ye(Re,it[ut+5]):2;Ne=ke[2]}else Ge=1,Ne=ke[1];ke=Ee+zn[xe],0>(Re=N).b&&Se(Re);var ut,it=Re.b,Ze=(ut=Re.Ca>>1)-(Re.I>>it)>>31;--Re.b,Re.Ca+=Ze,Re.Ca|=1,Re.I-=(ut+1&Ze)<<it,_e[ke]=((Ge^Ze)-Ze)*ue[(0<xe)+0]}return 16}function bo(N){var H=N.rb[N.sb-1];H.la=0,H.Na=0,s(N.zc,0,0,N.zc.length),N.ja=0}function Qn(N,H){if(N==null)return 0;if(H==null)return Pn(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!Ji(N,H))return 0;if(e(N.cb),H.ac==null||H.ac(H)){H.ob&&(N.L=0);var te=mu[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=H.v-te>>4,N.zb=H.j-te>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=H.o+15+te>>4,N.Hb=H.va+15+te>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var ue=N.ed;for(te=0;4>te;++te){var xe;if(N.Qa.Cb){var _e=N.Qa.Lb[te];N.Qa.Fb||(_e+=ue.Tb)}else _e=ue.Tb;for(xe=0;1>=xe;++xe){var Ee=N.gd[te][xe],Ne=_e;if(ue.Pc&&(Ne+=ue.vd[0],xe&&(Ne+=ue.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var ke=Ne;0<ue.wb&&(ke=4<ue.wb?ke>>2:ke>>1)>9-ue.wb&&(ke=9-ue.wb),1>ke&&(ke=1),Ee.dd=ke,Ee.tc=2*Ne+ke,Ee.ld=40<=Ne?2:15<=Ne?1:0}else Ee.tc=0;Ee.La=xe}}}te=0}else Pn(N,6,"Frame setup failed"),te=N.a;if(te=te==0){if(te){N.$c=0,0<N.Aa||(N.Ic=Fv);e:{te=N.Ic,ue=4*(ke=N.za);var Re=32*ke,Ge=ke+1,ut=0<N.L?ke*(0<N.Aa?2:1):0,it=(N.Aa==2?2:1)*ke;if((Ee=ue+832+(xe=3*(16*te+mu[N.L])/2*Re)+(_e=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=Ee)te=0;else{if(Ee>N.Vb){if(N.Vb=0,N.Ec=a(Ee),N.Fc=0,N.Ec==null){te=Pn(N,1,"no memory during frame initialization.");break e}N.Vb=Ee}Ee=N.Ec,Ne=N.Fc,N.Ac=Ee,N.Bc=Ne,Ne+=ue,N.Gd=i(Re,Gs),N.Hd=0,N.rb=i(Ge+1,ur),N.sb=1,N.wa=ut?i(ut,cr):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=ke),e(!0),N.oc=Ee,N.pc=Ne,Ne+=832,N.ya=i(it,Rs),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=ke),N.R=16*ke,N.B=8*ke,ke=(Re=mu[N.L])*N.R,Re=Re/2*N.B,N.sa=Ee,N.ta=Ne+ke,N.qa=N.sa,N.ra=N.ta+16*te*N.R+Re,N.Ha=N.qa,N.Ia=N.ra+8*te*N.B+Re,N.$c=0,Ne+=xe,N.mb=_e?Ee:null,N.nb=_e?Ne:null,e(Ne+_e<=N.Fc+N.Vb),bo(N),s(N.Ac,N.Bc,0,ue),te=1}}if(te){if(H.ka=0,H.y=N.sa,H.O=N.ta,H.f=N.qa,H.N=N.ra,H.ea=N.Ha,H.Vd=N.Ia,H.fa=N.R,H.Rc=N.B,H.F=null,H.J=0,!rc){for(te=-255;255>=te;++te)Zr[255+te]=0>te?-te:te;for(te=-1020;1020>=te;++te)io[1020+te]=-128>te?-128:127<te?127:te;for(te=-112;112>=te;++te)nc[112+te]=-16>te?-16:15<te?15:te;for(te=-255;510>=te;++te)No[255+te]=0>te?0:255<te?255:te;rc=1}So=Ca,To=Zi,Oi=_a,ra=Fn,Ei=ti,Us=_l,Au=Sl,ul=Co,Qu=Tl,ja=uu,Al=Nc,Rc=Zl,Pl=Ea,Hu=Nl,ec=so,tc=ds,dl=Ss,Os=cu,Si[0]=rr,Si[1]=Tc,Si[2]=bn,Si[3]=wi,Si[4]=bi,Si[5]=Li,Si[6]=Ua,Si[7]=ni,Si[8]=no,Si[9]=ri,ic[0]=Fi,ic[1]=Jl,ic[2]=eo,ic[3]=rl,ic[4]=Gr,ic[5]=_o,ic[6]=Di,ji[0]=ro,ji[1]=nl,ji[2]=sl,ji[3]=qr,ji[4]=Cr,ji[5]=Ks,ji[6]=al,te=1}else te=0}te&&(te=function(Ze,kt){for(Ze.M=0;Ze.M<Ze.Va;++Ze.M){var pt,qe=Ze.Jc[Ze.M&Ze.Xb],Ye=Ze.m,bt=Ze;for(pt=0;pt<bt.za;++pt){var It=Ye,Et=bt,ln=Et.Ac,en=Et.Bc+4*pt,yn=Et.zc,nn=Et.ya[Et.aa+pt];if(Et.Qa.Bb?nn.$b=ye(It,Et.Pa.jb[0])?2+ye(It,Et.Pa.jb[2]):ye(It,Et.Pa.jb[1]):nn.$b=0,Et.kc&&(nn.Ad=ye(It,Et.Bd)),nn.Za=!ye(It,145)+0,nn.Za){var Kr=nn.Ob,ss=0;for(Et=0;4>Et;++Et){var Er,xr=yn[0+Et];for(Er=0;4>Er;++Er){xr=li[ln[en+Er]][xr];for(var hs=gs[ye(It,xr[0])];0<hs;)hs=gs[2*hs+ye(It,xr[hs])];xr=-hs,ln[en+Er]=xr}r(Kr,ss,ln,en,4),ss+=4,yn[0+Et]=xr}}else xr=ye(It,156)?ye(It,128)?1:3:ye(It,163)?2:0,nn.Ob[0]=xr,s(ln,en,xr,4),s(yn,0,xr,4);nn.Dd=ye(It,142)?ye(It,114)?ye(It,183)?1:3:2:0}if(bt.m.Ka)return Pn(Ze,7,"Premature end-of-partition0 encountered.");for(;Ze.ja<Ze.za;++Ze.ja){if(bt=qe,It=(Ye=Ze).rb[Ye.sb-1],ln=Ye.rb[Ye.sb+Ye.ja],pt=Ye.ya[Ye.aa+Ye.ja],en=Ye.kc?pt.Ad:0)It.la=ln.la=0,pt.Za||(It.Na=ln.Na=0),pt.Hc=0,pt.Gc=0,pt.ia=0;else{var as,tr;if(It=ln,ln=bt,en=Ye.Pa.Xc,yn=Ye.ya[Ye.aa+Ye.ja],nn=Ye.pb[yn.$b],Et=yn.ad,Kr=0,ss=Ye.rb[Ye.sb-1],xr=Er=0,s(Et,Kr,0,384),yn.Za)var xs=0,kn=en[3];else{hs=a(16);var Gn=It.Na+ss.Na;if(Gn=dn(ln,en[1],Gn,nn.Eb,0,hs,0),It.Na=ss.Na=(0<Gn)+0,1<Gn)So(hs,0,Et,Kr);else{var zr=hs[0]+3>>3;for(hs=0;256>hs;hs+=16)Et[Kr+hs]=zr}xs=1,kn=en[0]}var $r=15&It.la,ci=15&ss.la;for(hs=0;4>hs;++hs){var Va=1&ci;for(zr=tr=0;4>zr;++zr)$r=$r>>1|(Va=(Gn=dn(ln,kn,Gn=Va+(1&$r),nn.Sc,xs,Et,Kr))>xs)<<7,tr=tr<<2|(3<Gn?3:1<Gn?2:Et[Kr+0]!=0),Kr+=16;$r>>=4,ci=ci>>1|Va<<7,Er=(Er<<8|tr)>>>0}for(kn=$r,xs=ci>>4,as=0;4>as;as+=2){for(tr=0,$r=It.la>>4+as,ci=ss.la>>4+as,hs=0;2>hs;++hs){for(Va=1&ci,zr=0;2>zr;++zr)Gn=Va+(1&$r),$r=$r>>1|(Va=0<(Gn=dn(ln,en[2],Gn,nn.Qc,0,Et,Kr)))<<3,tr=tr<<2|(3<Gn?3:1<Gn?2:Et[Kr+0]!=0),Kr+=16;$r>>=2,ci=ci>>1|Va<<5}xr|=tr<<4*as,kn|=$r<<4<<as,xs|=(240&ci)<<as}It.la=kn,ss.la=xs,yn.Hc=Er,yn.Gc=xr,yn.ia=43690&xr?0:nn.ia,en=!(Er|xr)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[pt.$b][pt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!en),bt.Ka)return Pn(Ze,7,"Premature end-of-file encountered.")}if(bo(Ze),Ye=kt,bt=1,pt=(qe=Ze).D,It=0<qe.L&&qe.M>=qe.zb&&qe.M<=qe.Va,qe.Aa==0)e:{if(pt.M=qe.M,pt.uc=It,Pi(qe,pt),bt=1,pt=(tr=qe.D).Nb,It=(xr=mu[qe.L])*qe.R,ln=xr/2*qe.B,hs=16*pt*qe.R,zr=8*pt*qe.B,en=qe.sa,yn=qe.ta-It+hs,nn=qe.qa,Et=qe.ra-ln+zr,Kr=qe.Ha,ss=qe.Ia-ln+zr,ci=($r=tr.M)==0,Er=$r>=qe.Va-1,qe.Aa==2&&Pi(qe,tr),tr.uc)for(Va=(Gn=qe).D.M,e(Gn.D.uc),tr=Gn.yb;tr<Gn.Hb;++tr){xs=tr,kn=Va;var fa=(ha=(js=Gn).D).Nb;as=js.R;var ha=ha.wa[ha.Y+xs],Ba=js.sa,Ol=js.ta+16*fa*as+16*xs,is=ha.dd,ka=ha.tc;if(ka!=0)if(e(3<=ka),js.L==1)0<xs&&tc(Ba,Ol,as,ka+4),ha.La&&Os(Ba,Ol,as,ka),0<kn&&ec(Ba,Ol,as,ka+4),ha.La&&dl(Ba,Ol,as,ka);else{var lc=js.B,$u=js.qa,FA=js.ra+8*fa*lc+8*xs,Wu=js.Ha,js=js.Ia+8*fa*lc+8*xs;fa=ha.ld,0<xs&&(ul(Ba,Ol,as,ka+4,is,fa),ja($u,FA,Wu,js,lc,ka+4,is,fa)),ha.La&&(Rc(Ba,Ol,as,ka,is,fa),Hu($u,FA,Wu,js,lc,ka,is,fa)),0<kn&&(Au(Ba,Ol,as,ka+4,is,fa),Qu($u,FA,Wu,js,lc,ka+4,is,fa)),ha.La&&(Al(Ba,Ol,as,ka,is,fa),Pl($u,FA,Wu,js,lc,ka,is,fa))}}if(qe.ia&&alert("todo:DitherRow"),Ye.put!=null){if(tr=16*$r,$r=16*($r+1),ci?(Ye.y=qe.sa,Ye.O=qe.ta+hs,Ye.f=qe.qa,Ye.N=qe.ra+zr,Ye.ea=qe.Ha,Ye.W=qe.Ia+zr):(tr-=xr,Ye.y=en,Ye.O=yn,Ye.f=nn,Ye.N=Et,Ye.ea=Kr,Ye.W=ss),Er||($r-=xr),$r>Ye.o&&($r=Ye.o),Ye.F=null,Ye.J=null,qe.Fa!=null&&0<qe.Fa.length&&tr<$r&&(Ye.J=kc(qe,Ye,tr,$r-tr),Ye.F=qe.mb,Ye.F==null&&Ye.F.length==0)){bt=Pn(qe,3,"Could not decode alpha data.");break e}tr<Ye.j&&(xr=Ye.j-tr,tr=Ye.j,e(!(1&xr)),Ye.O+=qe.R*xr,Ye.N+=qe.B*(xr>>1),Ye.W+=qe.B*(xr>>1),Ye.F!=null&&(Ye.J+=Ye.width*xr)),tr<$r&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=tr-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=$r-tr,bt=Ye.put(Ye))}pt+1!=qe.Ic||Er||(r(qe.sa,qe.ta-It,en,yn+16*qe.R,It),r(qe.qa,qe.ra-ln,nn,Et+8*qe.B,ln),r(qe.Ha,qe.Ia-ln,Kr,ss+8*qe.B,ln))}if(!bt)return Pn(Ze,6,"Output aborted.")}return 1}(N,H)),H.bc!=null&&H.bc(H),te&=1}return te?(N.cb=0,te):0}function pr(N,H,te,ue,xe){xe=N[H+te+32*ue]+(xe>>3),N[H+te+32*ue]=-256&xe?0>xe?0:255:xe}function bl(N,H,te,ue,xe,_e){pr(N,H,0,te,ue+xe),pr(N,H,1,te,ue+_e),pr(N,H,2,te,ue-_e),pr(N,H,3,te,ue-xe)}function _r(N){return(20091*N>>16)+N}function rs(N,H,te,ue){var xe,_e=0,Ee=a(16);for(xe=0;4>xe;++xe){var Ne=N[H+0]+N[H+8],ke=N[H+0]-N[H+8],Re=(35468*N[H+4]>>16)-_r(N[H+12]),Ge=_r(N[H+4])+(35468*N[H+12]>>16);Ee[_e+0]=Ne+Ge,Ee[_e+1]=ke+Re,Ee[_e+2]=ke-Re,Ee[_e+3]=Ne-Ge,_e+=4,H++}for(xe=_e=0;4>xe;++xe)Ne=(N=Ee[_e+0]+4)+Ee[_e+8],ke=N-Ee[_e+8],Re=(35468*Ee[_e+4]>>16)-_r(Ee[_e+12]),pr(te,ue,0,0,Ne+(Ge=_r(Ee[_e+4])+(35468*Ee[_e+12]>>16))),pr(te,ue,1,0,ke+Re),pr(te,ue,2,0,ke-Re),pr(te,ue,3,0,Ne-Ge),_e++,ue+=32}function _l(N,H,te,ue){var xe=N[H+0]+4,_e=35468*N[H+4]>>16,Ee=_r(N[H+4]),Ne=35468*N[H+1]>>16;bl(te,ue,0,xe+Ee,N=_r(N[H+1]),Ne),bl(te,ue,1,xe+_e,N,Ne),bl(te,ue,2,xe-_e,N,Ne),bl(te,ue,3,xe-Ee,N,Ne)}function Zi(N,H,te,ue,xe){rs(N,H,te,ue),xe&&rs(N,H+16,te,ue+4)}function _a(N,H,te,ue){To(N,H+0,te,ue,1),To(N,H+32,te,ue+128,1)}function Fn(N,H,te,ue){var xe;for(N=N[H+0]+4,xe=0;4>xe;++xe)for(H=0;4>H;++H)pr(te,ue,H,xe,N)}function ti(N,H,te,ue){N[H+0]&&ra(N,H+0,te,ue),N[H+16]&&ra(N,H+16,te,ue+4),N[H+32]&&ra(N,H+32,te,ue+128),N[H+48]&&ra(N,H+48,te,ue+128+4)}function Ca(N,H,te,ue){var xe,_e=a(16);for(xe=0;4>xe;++xe){var Ee=N[H+0+xe]+N[H+12+xe],Ne=N[H+4+xe]+N[H+8+xe],ke=N[H+4+xe]-N[H+8+xe],Re=N[H+0+xe]-N[H+12+xe];_e[0+xe]=Ee+Ne,_e[8+xe]=Ee-Ne,_e[4+xe]=Re+ke,_e[12+xe]=Re-ke}for(xe=0;4>xe;++xe)Ee=(N=_e[0+4*xe]+3)+_e[3+4*xe],Ne=_e[1+4*xe]+_e[2+4*xe],ke=_e[1+4*xe]-_e[2+4*xe],Re=N-_e[3+4*xe],te[ue+0]=Ee+Ne>>3,te[ue+16]=Re+ke>>3,te[ue+32]=Ee-Ne>>3,te[ue+48]=Re-ke>>3,ue+=64}function yi(N,H,te){var ue,xe=H-32,_e=da,Ee=255-N[xe-1];for(ue=0;ue<te;++ue){var Ne,ke=_e,Re=Ee+N[H-1];for(Ne=0;Ne<te;++Ne)N[H+Ne]=ke[Re+N[xe+Ne]];H+=32}}function Tc(N,H){yi(N,H,4)}function nl(N,H){yi(N,H,8)}function Jl(N,H){yi(N,H,16)}function eo(N,H){var te;for(te=0;16>te;++te)r(N,H+32*te,N,H-32,16)}function rl(N,H){var te;for(te=16;0<te;--te)s(N,H,N[H-1],16),H+=32}function to(N,H,te){var ue;for(ue=0;16>ue;++ue)s(H,te+32*ue,N,16)}function Fi(N,H){var te,ue=16;for(te=0;16>te;++te)ue+=N[H-1+32*te]+N[H+te-32];to(ue>>5,N,H)}function Gr(N,H){var te,ue=8;for(te=0;16>te;++te)ue+=N[H-1+32*te];to(ue>>4,N,H)}function _o(N,H){var te,ue=8;for(te=0;16>te;++te)ue+=N[H+te-32];to(ue>>4,N,H)}function Di(N,H){to(128,N,H)}function Dn(N,H,te){return N+2*H+te+2>>2}function bn(N,H){var te,ue=H-32;for(ue=new Uint8Array([Dn(N[ue-1],N[ue+0],N[ue+1]),Dn(N[ue+0],N[ue+1],N[ue+2]),Dn(N[ue+1],N[ue+2],N[ue+3]),Dn(N[ue+2],N[ue+3],N[ue+4])]),te=0;4>te;++te)r(N,H+32*te,ue,0,ue.length)}function wi(N,H){var te=N[H-1],ue=N[H-1+32],xe=N[H-1+64],_e=N[H-1+96];we(N,H+0,16843009*Dn(N[H-1-32],te,ue)),we(N,H+32,16843009*Dn(te,ue,xe)),we(N,H+64,16843009*Dn(ue,xe,_e)),we(N,H+96,16843009*Dn(xe,_e,_e))}function rr(N,H){var te,ue=4;for(te=0;4>te;++te)ue+=N[H+te-32]+N[H-1+32*te];for(ue>>=3,te=0;4>te;++te)s(N,H+32*te,ue,4)}function bi(N,H){var te=N[H-1+0],ue=N[H-1+32],xe=N[H-1+64],_e=N[H-1-32],Ee=N[H+0-32],Ne=N[H+1-32],ke=N[H+2-32],Re=N[H+3-32];N[H+0+96]=Dn(ue,xe,N[H-1+96]),N[H+1+96]=N[H+0+64]=Dn(te,ue,xe),N[H+2+96]=N[H+1+64]=N[H+0+32]=Dn(_e,te,ue),N[H+3+96]=N[H+2+64]=N[H+1+32]=N[H+0+0]=Dn(Ee,_e,te),N[H+3+64]=N[H+2+32]=N[H+1+0]=Dn(Ne,Ee,_e),N[H+3+32]=N[H+2+0]=Dn(ke,Ne,Ee),N[H+3+0]=Dn(Re,ke,Ne)}function Ua(N,H){var te=N[H+1-32],ue=N[H+2-32],xe=N[H+3-32],_e=N[H+4-32],Ee=N[H+5-32],Ne=N[H+6-32],ke=N[H+7-32];N[H+0+0]=Dn(N[H+0-32],te,ue),N[H+1+0]=N[H+0+32]=Dn(te,ue,xe),N[H+2+0]=N[H+1+32]=N[H+0+64]=Dn(ue,xe,_e),N[H+3+0]=N[H+2+32]=N[H+1+64]=N[H+0+96]=Dn(xe,_e,Ee),N[H+3+32]=N[H+2+64]=N[H+1+96]=Dn(_e,Ee,Ne),N[H+3+64]=N[H+2+96]=Dn(Ee,Ne,ke),N[H+3+96]=Dn(Ne,ke,ke)}function Li(N,H){var te=N[H-1+0],ue=N[H-1+32],xe=N[H-1+64],_e=N[H-1-32],Ee=N[H+0-32],Ne=N[H+1-32],ke=N[H+2-32],Re=N[H+3-32];N[H+0+0]=N[H+1+64]=_e+Ee+1>>1,N[H+1+0]=N[H+2+64]=Ee+Ne+1>>1,N[H+2+0]=N[H+3+64]=Ne+ke+1>>1,N[H+3+0]=ke+Re+1>>1,N[H+0+96]=Dn(xe,ue,te),N[H+0+64]=Dn(ue,te,_e),N[H+0+32]=N[H+1+96]=Dn(te,_e,Ee),N[H+1+32]=N[H+2+96]=Dn(_e,Ee,Ne),N[H+2+32]=N[H+3+96]=Dn(Ee,Ne,ke),N[H+3+32]=Dn(Ne,ke,Re)}function ni(N,H){var te=N[H+0-32],ue=N[H+1-32],xe=N[H+2-32],_e=N[H+3-32],Ee=N[H+4-32],Ne=N[H+5-32],ke=N[H+6-32],Re=N[H+7-32];N[H+0+0]=te+ue+1>>1,N[H+1+0]=N[H+0+64]=ue+xe+1>>1,N[H+2+0]=N[H+1+64]=xe+_e+1>>1,N[H+3+0]=N[H+2+64]=_e+Ee+1>>1,N[H+0+32]=Dn(te,ue,xe),N[H+1+32]=N[H+0+96]=Dn(ue,xe,_e),N[H+2+32]=N[H+1+96]=Dn(xe,_e,Ee),N[H+3+32]=N[H+2+96]=Dn(_e,Ee,Ne),N[H+3+64]=Dn(Ee,Ne,ke),N[H+3+96]=Dn(Ne,ke,Re)}function ri(N,H){var te=N[H-1+0],ue=N[H-1+32],xe=N[H-1+64],_e=N[H-1+96];N[H+0+0]=te+ue+1>>1,N[H+2+0]=N[H+0+32]=ue+xe+1>>1,N[H+2+32]=N[H+0+64]=xe+_e+1>>1,N[H+1+0]=Dn(te,ue,xe),N[H+3+0]=N[H+1+32]=Dn(ue,xe,_e),N[H+3+32]=N[H+1+64]=Dn(xe,_e,_e),N[H+3+64]=N[H+2+64]=N[H+0+96]=N[H+1+96]=N[H+2+96]=N[H+3+96]=_e}function no(N,H){var te=N[H-1+0],ue=N[H-1+32],xe=N[H-1+64],_e=N[H-1+96],Ee=N[H-1-32],Ne=N[H+0-32],ke=N[H+1-32],Re=N[H+2-32];N[H+0+0]=N[H+2+32]=te+Ee+1>>1,N[H+0+32]=N[H+2+64]=ue+te+1>>1,N[H+0+64]=N[H+2+96]=xe+ue+1>>1,N[H+0+96]=_e+xe+1>>1,N[H+3+0]=Dn(Ne,ke,Re),N[H+2+0]=Dn(Ee,Ne,ke),N[H+1+0]=N[H+3+32]=Dn(te,Ee,Ne),N[H+1+32]=N[H+3+64]=Dn(ue,te,Ee),N[H+1+64]=N[H+3+96]=Dn(xe,ue,te),N[H+1+96]=Dn(_e,xe,ue)}function sl(N,H){var te;for(te=0;8>te;++te)r(N,H+32*te,N,H-32,8)}function qr(N,H){var te;for(te=0;8>te;++te)s(N,H,N[H-1],8),H+=32}function Ps(N,H,te){var ue;for(ue=0;8>ue;++ue)s(H,te+32*ue,N,8)}function ro(N,H){var te,ue=8;for(te=0;8>te;++te)ue+=N[H+te-32]+N[H-1+32*te];Ps(ue>>4,N,H)}function Ks(N,H){var te,ue=4;for(te=0;8>te;++te)ue+=N[H+te-32];Ps(ue>>3,N,H)}function Cr(N,H){var te,ue=4;for(te=0;8>te;++te)ue+=N[H-1+32*te];Ps(ue>>3,N,H)}function al(N,H){Ps(128,N,H)}function Ri(N,H,te){var ue=N[H-te],xe=N[H+0],_e=3*(xe-ue)+du[1020+N[H-2*te]-N[H+te]],Ee=fl[112+(_e+4>>3)];N[H-te]=da[255+ue+fl[112+(_e+3>>3)]],N[H+0]=da[255+xe-Ee]}function lu(N,H,te,ue){var xe=N[H+0],_e=N[H+te];return oo[255+N[H-2*te]-N[H-te]]>ue||oo[255+_e-xe]>ue}function Cl(N,H,te,ue){return 4*oo[255+N[H-te]-N[H+0]]+oo[255+N[H-2*te]-N[H+te]]<=ue}function er(N,H,te,ue,xe){var _e=N[H-3*te],Ee=N[H-2*te],Ne=N[H-te],ke=N[H+0],Re=N[H+te],Ge=N[H+2*te],ut=N[H+3*te];return 4*oo[255+Ne-ke]+oo[255+Ee-Re]>ue?0:oo[255+N[H-4*te]-_e]<=xe&&oo[255+_e-Ee]<=xe&&oo[255+Ee-Ne]<=xe&&oo[255+ut-Ge]<=xe&&oo[255+Ge-Re]<=xe&&oo[255+Re-ke]<=xe}function so(N,H,te,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Cl(N,H+ue,te,xe)&&Ri(N,H+ue,te)}function ds(N,H,te,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Cl(N,H+ue*te,1,xe)&&Ri(N,H+ue*te,1)}function Ss(N,H,te,ue){var xe;for(xe=3;0<xe;--xe)so(N,H+=4*te,te,ue)}function cu(N,H,te,ue){var xe;for(xe=3;0<xe;--xe)ds(N,H+=4,te,ue)}function El(N,H,te,ue,xe,_e,Ee,Ne){for(_e=2*_e+1;0<xe--;){if(er(N,H,te,_e,Ee))if(lu(N,H,te,Ne))Ri(N,H,te);else{var ke=N,Re=H,Ge=te,ut=ke[Re-2*Ge],it=ke[Re-Ge],Ze=ke[Re+0],kt=ke[Re+Ge],pt=ke[Re+2*Ge],qe=27*(bt=du[1020+3*(Ze-it)+du[1020+ut-kt]])+63>>7,Ye=18*bt+63>>7,bt=9*bt+63>>7;ke[Re-3*Ge]=da[255+ke[Re-3*Ge]+bt],ke[Re-2*Ge]=da[255+ut+Ye],ke[Re-Ge]=da[255+it+qe],ke[Re+0]=da[255+Ze-qe],ke[Re+Ge]=da[255+kt-Ye],ke[Re+2*Ge]=da[255+pt-bt]}H+=ue}}function ca(N,H,te,ue,xe,_e,Ee,Ne){for(_e=2*_e+1;0<xe--;){if(er(N,H,te,_e,Ee))if(lu(N,H,te,Ne))Ri(N,H,te);else{var ke=N,Re=H,Ge=te,ut=ke[Re-Ge],it=ke[Re+0],Ze=ke[Re+Ge],kt=fl[112+((pt=3*(it-ut))+4>>3)],pt=fl[112+(pt+3>>3)],qe=kt+1>>1;ke[Re-2*Ge]=da[255+ke[Re-2*Ge]+qe],ke[Re-Ge]=da[255+ut+pt],ke[Re+0]=da[255+it-kt],ke[Re+Ge]=da[255+Ze-qe]}H+=ue}}function Sl(N,H,te,ue,xe,_e){El(N,H,te,1,16,ue,xe,_e)}function Co(N,H,te,ue,xe,_e){El(N,H,1,te,16,ue,xe,_e)}function Nc(N,H,te,ue,xe,_e){var Ee;for(Ee=3;0<Ee;--Ee)ca(N,H+=4*te,te,1,16,ue,xe,_e)}function Zl(N,H,te,ue,xe,_e){var Ee;for(Ee=3;0<Ee;--Ee)ca(N,H+=4,1,te,16,ue,xe,_e)}function Tl(N,H,te,ue,xe,_e,Ee,Ne){El(N,H,xe,1,8,_e,Ee,Ne),El(te,ue,xe,1,8,_e,Ee,Ne)}function uu(N,H,te,ue,xe,_e,Ee,Ne){El(N,H,1,xe,8,_e,Ee,Ne),El(te,ue,1,xe,8,_e,Ee,Ne)}function Ea(N,H,te,ue,xe,_e,Ee,Ne){ca(N,H+4*xe,xe,1,8,_e,Ee,Ne),ca(te,ue+4*xe,xe,1,8,_e,Ee,Ne)}function Nl(N,H,te,ue,xe,_e,Ee,Ne){ca(N,H+4,1,xe,8,_e,Ee,Ne),ca(te,ue+4,1,xe,8,_e,Ee,Ne)}function Bl(){this.ba=new us,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _i(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function il(){this.ua=0,this.Wa=new Ie,this.vb=new Ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new R}function Bc(){this.xb=this.a=0,this.l=new Fs,this.ca=new us,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new il,this.ab=0,this.gc=i(4,kl),this.Oc=0}function ol(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ll(N,H,te,ue,xe,_e,Ee){for(N=N==null?0:N[H+0],H=0;H<Ee;++H)xe[_e+H]=N+te[ue+H]&255,N=xe[_e+H]}function Il(N,H,te,ue,xe,_e,Ee){var Ne;if(N==null)ll(null,null,te,ue,xe,_e,Ee);else for(Ne=0;Ne<Ee;++Ne)xe[_e+Ne]=N[H+Ne]+te[ue+Ne]&255}function si(N,H,te,ue,xe,_e,Ee){if(N==null)ll(null,null,te,ue,xe,_e,Ee);else{var Ne,ke=N[H+0],Re=ke,Ge=ke;for(Ne=0;Ne<Ee;++Ne)Re=Ge+(ke=N[H+Ne])-Re,Ge=te[ue+Ne]+(-256&Re?0>Re?0:255:Re)&255,Re=ke,xe[_e+Ne]=Ge}}function kc(N,H,te,ue){var xe=H.width,_e=H.o;if(e(N!=null&&H!=null),0>te||0>=ue||te+ue>_e)return null;if(!N.Cc){if(N.ga==null){var Ee;if(N.ga=new ol,(Ee=N.ga==null)||(Ee=H.width*H.o,e(N.Gb.length==0),N.Gb=a(Ee),N.Uc=0,N.Gb==null?Ee=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ee=1),Ee=!Ee),!Ee){Ee=N.ga;var Ne=N.Fa,ke=N.P,Re=N.qc,Ge=N.mb,ut=N.nb,it=ke+1,Ze=Re-1,kt=Ee.l;if(e(Ne!=null&&Ge!=null&&H!=null),es[0]=null,es[1]=ll,es[2]=Il,es[3]=si,Ee.ca=Ge,Ee.tb=ut,Ee.c=H.width,Ee.i=H.height,e(0<Ee.c&&0<Ee.i),1>=Re)H=0;else if(Ee.$a=Ne[ke+0]>>0&3,Ee.Z=Ne[ke+0]>>2&3,Ee.Lc=Ne[ke+0]>>4&3,ke=Ne[ke+0]>>6&3,0>Ee.$a||1<Ee.$a||4<=Ee.Z||1<Ee.Lc||ke)H=0;else if(kt.put=zs,kt.ac=As,kt.bc=oa,kt.ma=Ee,kt.width=H.width,kt.height=H.height,kt.Da=H.Da,kt.v=H.v,kt.va=H.va,kt.j=H.j,kt.o=H.o,Ee.$a)e:{e(Ee.$a==1),H=dt();t:for(;;){if(H==null){H=0;break e}if(e(Ee!=null),Ee.mc=H,H.c=Ee.c,H.i=Ee.i,H.l=Ee.l,H.l.ma=Ee,H.l.width=Ee.c,H.l.height=Ee.i,H.a=0,K(H.m,Ne,it,Ze),!Je(Ee.c,Ee.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&Fe(H.s)?(Ee.ic=1,Ne=H.c*H.i,H.Ta=null,H.Ua=0,H.V=a(Ne),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(Ee.ic=0,H=at(H,Ee.c)),!H))break t;H=1;break e}Ee.mc=null,H=0}else H=Ze>=Ee.c*Ee.i;Ee=!H}if(Ee)return null;N.ga.Lc!=1?N.Ga=0:ue=_e-te}e(N.ga!=null),e(te+ue<=_e);e:{if(H=(Ne=N.ga).c,_e=Ne.l.o,Ne.$a==0){if(it=N.rc,Ze=N.Vc,kt=N.Fa,ke=N.P+1+te*H,Re=N.mb,Ge=N.nb+te*H,e(ke<=N.P+N.qc),Ne.Z!=0)for(e(es[Ne.Z]!=null),Ee=0;Ee<ue;++Ee)es[Ne.Z](it,Ze,kt,ke,Re,Ge,H),it=Re,Ze=Ge,Ge+=H,ke+=H;else for(Ee=0;Ee<ue;++Ee)r(Re,Ge,kt,ke,H),it=Re,Ze=Ge,Ge+=H,ke+=H;N.rc=it,N.Vc=Ze}else{if(e(Ne.mc!=null),H=te+ue,e((Ee=Ne.mc)!=null),e(H<=Ee.i),Ee.C>=H)H=1;else if(Ne.ic||Xe(),Ne.ic){Ne=Ee.V,it=Ee.Ba,Ze=Ee.c;var pt=Ee.i,qe=(kt=1,ke=Ee.$/Ze,Re=Ee.$%Ze,Ge=Ee.m,ut=Ee.s,Ee.$),Ye=Ze*pt,bt=Ze*H,It=ut.wc,Et=qe<bt?Yt(ut,Re,ke):null;e(qe<=Ye),e(H<=pt),e(Fe(ut));t:for(;;){for(;!Ge.h&&qe<bt;){if(Re&It||(Et=Yt(ut,Re,ke)),e(Et!=null),fe(Ge),256>(pt=Xr(Et.G[0],Et.H[0],Ge)))Ne[it+qe]=pt,++qe,++Re>=Ze&&(Re=0,++ke<=H&&!(ke%16)&&Le(Ee,ke));else{if(!(280>pt)){kt=0;break t}pt=Rr(pt-256,Ge);var ln,en=Xr(Et.G[4],Et.H[4],Ge);if(fe(Ge),!(qe>=(en=Nr(Ze,en=Rr(en,Ge)))&&Ye-qe>=pt)){kt=0;break t}for(ln=0;ln<pt;++ln)Ne[it+qe+ln]=Ne[it+qe+ln-en];for(qe+=pt,Re+=pt;Re>=Ze;)Re-=Ze,++ke<=H&&!(ke%16)&&Le(Ee,ke);qe<bt&&Re&It&&(Et=Yt(ut,Re,ke))}e(Ge.h==re(Ge))}Le(Ee,ke>H?H:ke);break t}!kt||Ge.h&&qe<Ye?(kt=0,Ee.a=Ge.h?5:3):Ee.$=qe,H=kt}else H=Me(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,H,ct);if(!H){ue=0;break e}}te+ue>=_e&&(N.Cc=1),ue=1}if(!ue)return null;if(N.Cc&&((ue=N.ga)!=null&&(ue.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+te*xe}function Y(N,H,te,ue,xe,_e){for(;0<xe--;){var Ee,Ne=N,ke=H+(te?1:0),Re=N,Ge=H+(te?0:3);for(Ee=0;Ee<ue;++Ee){var ut=Re[Ge+4*Ee];ut!=255&&(ut*=32897,Ne[ke+4*Ee+0]=Ne[ke+4*Ee+0]*ut>>23,Ne[ke+4*Ee+1]=Ne[ke+4*Ee+1]*ut>>23,Ne[ke+4*Ee+2]=Ne[ke+4*Ee+2]*ut>>23)}H+=_e}}function ge(N,H,te,ue,xe){for(;0<ue--;){var _e;for(_e=0;_e<te;++_e){var Ee=N[H+2*_e+0],Ne=15&(Re=N[H+2*_e+1]),ke=4369*Ne,Re=(240&Re|Re>>4)*ke>>16;N[H+2*_e+0]=(240&Ee|Ee>>4)*ke>>16&240|(15&Ee|Ee<<4)*ke>>16>>4&15,N[H+2*_e+1]=240&Re|Ne}H+=xe}}function Ue(N,H,te,ue,xe,_e,Ee,Ne){var ke,Re,Ge=255;for(Re=0;Re<xe;++Re){for(ke=0;ke<ue;++ke){var ut=N[H+ke];_e[Ee+4*ke]=ut,Ge&=ut}H+=te,Ee+=Ne}return Ge!=255}function ze(N,H,te,ue,xe){var _e;for(_e=0;_e<xe;++_e)te[ue+_e]=N[H+_e]>>8}function Xe(){Na=Y,fr=ge,hr=Ue,fs=ze}function gt(N,H,te){S[N]=function(ue,xe,_e,Ee,Ne,ke,Re,Ge,ut,it,Ze,kt,pt,qe,Ye,bt,It){var Et,ln=It-1>>1,en=Ne[ke+0]|Re[Ge+0]<<16,yn=ut[it+0]|Ze[kt+0]<<16;e(ue!=null);var nn=3*en+yn+131074>>2;for(H(ue[xe+0],255&nn,nn>>16,pt,qe),_e!=null&&(nn=3*yn+en+131074>>2,H(_e[Ee+0],255&nn,nn>>16,Ye,bt)),Et=1;Et<=ln;++Et){var Kr=Ne[ke+Et]|Re[Ge+Et]<<16,ss=ut[it+Et]|Ze[kt+Et]<<16,Er=en+Kr+yn+ss+524296,xr=Er+2*(Kr+yn)>>3;nn=xr+en>>1,en=(Er=Er+2*(en+ss)>>3)+Kr>>1,H(ue[xe+2*Et-1],255&nn,nn>>16,pt,qe+(2*Et-1)*te),H(ue[xe+2*Et-0],255&en,en>>16,pt,qe+(2*Et-0)*te),_e!=null&&(nn=Er+yn>>1,en=xr+ss>>1,H(_e[Ee+2*Et-1],255&nn,nn>>16,Ye,bt+(2*Et-1)*te),H(_e[Ee+2*Et+0],255&en,en>>16,Ye,bt+(2*Et+0)*te)),en=Kr,yn=ss}1&It||(nn=3*en+yn+131074>>2,H(ue[xe+It-1],255&nn,nn>>16,pt,qe+(It-1)*te),_e!=null&&(nn=3*yn+en+131074>>2,H(_e[Ee+It-1],255&nn,nn>>16,Ye,bt+(It-1)*te)))}}function Rt(){Ws[oi]=oc,Ws[fu]=Ul,Ws[hl]=Mc,Ws[Vu]=Gu,Ws[Pc]=kA,Ws[Ml]=qu,Ws[yd]=d0,Ws[zu]=Ul,Ws[sc]=Gu,Ws[ac]=kA,Ws[h]=qu}function qt(N){return N&-16384?0>N?0:255:N>>Ob}function B(N,H){return qt((19077*N>>8)+(26149*H>>8)-14234)}function ae(N,H,te){return qt((19077*N>>8)-(6419*H>>8)-(13320*te>>8)+8708)}function de(N,H){return qt((19077*N>>8)+(33050*H>>8)-17685)}function Te(N,H,te,ue,xe){ue[xe+0]=B(N,te),ue[xe+1]=ae(N,H,te),ue[xe+2]=de(N,H)}function We(N,H,te,ue,xe){ue[xe+0]=de(N,H),ue[xe+1]=ae(N,H,te),ue[xe+2]=B(N,te)}function ot(N,H,te,ue,xe){var _e=ae(N,H,te);H=_e<<3&224|de(N,H)>>3,ue[xe+0]=248&B(N,te)|_e>>5,ue[xe+1]=H}function Pt(N,H,te,ue,xe){var _e=240&de(N,H)|15;ue[xe+0]=240&B(N,te)|ae(N,H,te)>>4,ue[xe+1]=_e}function Ln(N,H,te,ue,xe){ue[xe+0]=255,Te(N,H,te,ue,xe+1)}function gr(N,H,te,ue,xe){We(N,H,te,ue,xe),ue[xe+3]=255}function Yn(N,H,te,ue,xe){Te(N,H,te,ue,xe),ue[xe+3]=255}function ar(N,H){return 0>N?0:N>H?H:N}function Pr(N,H,te){S[N]=function(ue,xe,_e,Ee,Ne,ke,Re,Ge,ut){for(var it=Ge+(-2&ut)*te;Ge!=it;)H(ue[xe+0],_e[Ee+0],Ne[ke+0],Re,Ge),H(ue[xe+1],_e[Ee+0],Ne[ke+0],Re,Ge+te),xe+=2,++Ee,++ke,Ge+=2*te;1&ut&&H(ue[xe+0],_e[Ee+0],Ne[ke+0],Re,Ge)}}function Eo(N,H,te){return te==0?N==0?H==0?6:5:H==0?4:0:te}function Jr(N,H,te,ue,xe){switch(N>>>30){case 3:To(H,te,ue,xe,0);break;case 2:Us(H,te,ue,xe);break;case 1:ra(H,te,ue,xe)}}function Pi(N,H){var te,ue,xe=H.M,_e=H.Nb,Ee=N.oc,Ne=N.pc+40,ke=N.oc,Re=N.pc+584,Ge=N.oc,ut=N.pc+600;for(te=0;16>te;++te)Ee[Ne+32*te-1]=129;for(te=0;8>te;++te)ke[Re+32*te-1]=129,Ge[ut+32*te-1]=129;for(0<xe?Ee[Ne-1-32]=ke[Re-1-32]=Ge[ut-1-32]=129:(s(Ee,Ne-32-1,127,21),s(ke,Re-32-1,127,9),s(Ge,ut-32-1,127,9)),ue=0;ue<N.za;++ue){var it=H.ya[H.aa+ue];if(0<ue){for(te=-1;16>te;++te)r(Ee,Ne+32*te-4,Ee,Ne+32*te+12,4);for(te=-1;8>te;++te)r(ke,Re+32*te-4,ke,Re+32*te+4,4),r(Ge,ut+32*te-4,Ge,ut+32*te+4,4)}var Ze=N.Gd,kt=N.Hd+ue,pt=it.ad,qe=it.Hc;if(0<xe&&(r(Ee,Ne-32,Ze[kt].y,0,16),r(ke,Re-32,Ze[kt].f,0,8),r(Ge,ut-32,Ze[kt].ea,0,8)),it.Za){var Ye=Ee,bt=Ne-32+16;for(0<xe&&(ue>=N.za-1?s(Ye,bt,Ze[kt].y[15],4):r(Ye,bt,Ze[kt+1].y,0,4)),te=0;4>te;te++)Ye[bt+128+te]=Ye[bt+256+te]=Ye[bt+384+te]=Ye[bt+0+te];for(te=0;16>te;++te,qe<<=2)Ye=Ee,bt=Ne+IA[te],Si[it.Ob[te]](Ye,bt),Jr(qe,pt,16*+te,Ye,bt)}else if(Ye=Eo(ue,xe,it.Ob[0]),ic[Ye](Ee,Ne),qe!=0)for(te=0;16>te;++te,qe<<=2)Jr(qe,pt,16*+te,Ee,Ne+IA[te]);for(te=it.Gc,Ye=Eo(ue,xe,it.Dd),ji[Ye](ke,Re),ji[Ye](Ge,ut),qe=pt,Ye=ke,bt=Re,255&(it=te>>0)&&(170&it?Oi(qe,256,Ye,bt):Ei(qe,256,Ye,bt)),it=Ge,qe=ut,255&(te>>=8)&&(170&te?Oi(pt,320,it,qe):Ei(pt,320,it,qe)),xe<N.Ub-1&&(r(Ze[kt].y,0,Ee,Ne+480,16),r(Ze[kt].f,0,ke,Re+224,8),r(Ze[kt].ea,0,Ge,ut+224,8)),te=8*_e*N.B,Ze=N.sa,kt=N.ta+16*ue+16*_e*N.R,pt=N.qa,it=N.ra+8*ue+te,qe=N.Ha,Ye=N.Ia+8*ue+te,te=0;16>te;++te)r(Ze,kt+te*N.R,Ee,Ne+32*te,16);for(te=0;8>te;++te)r(pt,it+te*N.B,ke,Re+32*te,8),r(qe,Ye+te*N.B,Ge,ut+32*te,8)}}function Ci(N,H,te,ue,xe,_e,Ee,Ne,ke){var Re=[0],Ge=[0],ut=0,it=ke!=null?ke.kd:0,Ze=ke??new _i;if(N==null||12>te)return 7;Ze.data=N,Ze.w=H,Ze.ha=te,H=[H],te=[te],Ze.gb=[Ze.gb];e:{var kt=H,pt=te,qe=Ze.gb;if(e(N!=null),e(pt!=null),e(qe!=null),qe[0]=0,12<=pt[0]&&!n(N,kt[0],"RIFF")){if(n(N,kt[0]+8,"WEBP")){qe=3;break e}var Ye=Ve(N,kt[0]+4);if(12>Ye||4294967286<Ye){qe=3;break e}if(it&&Ye>pt[0]-8){qe=7;break e}qe[0]=Ye,kt[0]+=12,pt[0]-=12}qe=0}if(qe!=0)return qe;for(Ye=0<Ze.gb[0],te=te[0];;){e:{var bt=N;pt=H,qe=te;var It=Re,Et=Ge,ln=kt=[0];if((nn=ut=[ut])[0]=0,8>qe[0])qe=7;else{if(!n(bt,pt[0],"VP8X")){if(Ve(bt,pt[0]+4)!=10){qe=3;break e}if(18>qe[0]){qe=7;break e}var en=Ve(bt,pt[0]+8),yn=1+he(bt,pt[0]+12);if(2147483648<=yn*(bt=1+he(bt,pt[0]+15))){qe=3;break e}ln!=null&&(ln[0]=en),It!=null&&(It[0]=yn),Et!=null&&(Et[0]=bt),pt[0]+=18,qe[0]-=18,nn[0]=1}qe=0}}if(ut=ut[0],kt=kt[0],qe!=0)return qe;if(pt=!!(2&kt),!Ye&&ut)return 3;if(_e!=null&&(_e[0]=!!(16&kt)),Ee!=null&&(Ee[0]=pt),Ne!=null&&(Ne[0]=0),Ee=Re[0],kt=Ge[0],ut&&pt&&ke==null){qe=0;break}if(4>te){qe=7;break}if(Ye&&ut||!Ye&&!ut&&!n(N,H[0],"ALPH")){te=[te],Ze.na=[Ze.na],Ze.P=[Ze.P],Ze.Sa=[Ze.Sa];e:{en=N,qe=H,Ye=te;var nn=Ze.gb;It=Ze.na,Et=Ze.P,ln=Ze.Sa,yn=22,e(en!=null),e(Ye!=null),bt=qe[0];var Kr=Ye[0];for(e(It!=null),e(ln!=null),It[0]=null,Et[0]=null,ln[0]=0;;){if(qe[0]=bt,Ye[0]=Kr,8>Kr){qe=7;break e}var ss=Ve(en,bt+4);if(4294967286<ss){qe=3;break e}var Er=8+ss+1&-2;if(yn+=Er,0<nn&&yn>nn){qe=3;break e}if(!n(en,bt,"VP8 ")||!n(en,bt,"VP8L")){qe=0;break e}if(Kr[0]<Er){qe=7;break e}n(en,bt,"ALPH")||(It[0]=en,Et[0]=bt+8,ln[0]=ss),bt+=Er,Kr-=Er}}if(te=te[0],Ze.na=Ze.na[0],Ze.P=Ze.P[0],Ze.Sa=Ze.Sa[0],qe!=0)break}te=[te],Ze.Ja=[Ze.Ja],Ze.xa=[Ze.xa];e:if(nn=N,qe=H,Ye=te,It=Ze.gb[0],Et=Ze.Ja,ln=Ze.xa,en=qe[0],bt=!n(nn,en,"VP8 "),yn=!n(nn,en,"VP8L"),e(nn!=null),e(Ye!=null),e(Et!=null),e(ln!=null),8>Ye[0])qe=7;else{if(bt||yn){if(nn=Ve(nn,en+4),12<=It&&nn>It-12){qe=3;break e}if(it&&nn>Ye[0]-8){qe=7;break e}Et[0]=nn,qe[0]+=8,Ye[0]-=8,ln[0]=yn}else ln[0]=5<=Ye[0]&&nn[en+0]==47&&!(nn[en+4]>>5),Et[0]=Ye[0];qe=0}if(te=te[0],Ze.Ja=Ze.Ja[0],Ze.xa=Ze.xa[0],H=H[0],qe!=0)break;if(4294967286<Ze.Ja)return 3;if(Ne==null||pt||(Ne[0]=Ze.xa?2:1),Ee=[Ee],kt=[kt],Ze.xa){if(5>te){qe=7;break}Ne=Ee,it=kt,pt=_e,N==null||5>te?N=0:5<=te&&N[H+0]==47&&!(N[H+4]>>5)?(Ye=[0],nn=[0],It=[0],K(Et=new V,N,H,te),rn(Et,Ye,nn,It)?(Ne!=null&&(Ne[0]=Ye[0]),it!=null&&(it[0]=nn[0]),pt!=null&&(pt[0]=It[0]),N=1):N=0):N=0}else{if(10>te){qe=7;break}Ne=kt,N==null||10>te||!qs(N,H+3,te-3)?N=0:(it=N[H+0]|N[H+1]<<8|N[H+2]<<16,pt=16383&(N[H+7]<<8|N[H+6]),N=16383&(N[H+9]<<8|N[H+8]),1&it||3<(it>>1&7)||!(it>>4&1)||it>>5>=Ze.Ja||!pt||!N?N=0:(Ee&&(Ee[0]=pt),Ne&&(Ne[0]=N),N=1))}if(!N||(Ee=Ee[0],kt=kt[0],ut&&(Re[0]!=Ee||Ge[0]!=kt)))return 3;ke!=null&&(ke[0]=Ze,ke.offset=H-ke.w,e(4294967286>H-ke.w),e(ke.offset==ke.ha-te));break}return qe==0||qe==7&&ut&&ke==null?(_e!=null&&(_e[0]|=Ze.na!=null&&0<Ze.na.length),ue!=null&&(ue[0]=Ee),xe!=null&&(xe[0]=kt),0):qe}function Ic(N,H,te){var ue=H.width,xe=H.height,_e=0,Ee=0,Ne=ue,ke=xe;if(H.Da=N!=null&&0<N.Da,H.Da&&(Ne=N.cd,ke=N.bd,_e=N.v,Ee=N.j,11>te||(_e&=-2,Ee&=-2),0>_e||0>Ee||0>=Ne||0>=ke||_e+Ne>ue||Ee+ke>xe))return 0;if(H.v=_e,H.j=Ee,H.va=_e+Ne,H.o=Ee+ke,H.U=Ne,H.T=ke,H.da=N!=null&&0<N.da,H.da){if(!je(Ne,ke,te=[N.ib],_e=[N.hb]))return 0;H.ib=te[0],H.hb=_e[0]}return H.ob=N!=null&&N.ob,H.Kb=N==null||!N.Sd,H.da&&(H.ob=H.ib<3*ue/4&&H.hb<3*xe/4,H.Kb=0),1}function Fl(N){if(N==null)return 2;if(11>N.S){var H=N.f.RGBA;H.fb+=(N.height-1)*H.A,H.A=-H.A}else H=N.f.kb,N=N.height,H.O+=(N-1)*H.fa,H.fa=-H.fa,H.N+=(N-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(N-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(N-1)*H.lb,H.lb=-H.lb);return 0}function Fc(N,H,te,ue){if(ue==null||0>=N||0>=H)return 2;if(te!=null){if(te.Da){var xe=te.cd,_e=te.bd,Ee=-2&te.v,Ne=-2&te.j;if(0>Ee||0>Ne||0>=xe||0>=_e||Ee+xe>N||Ne+_e>H)return 2;N=xe,H=_e}if(te.da){if(!je(N,H,xe=[te.ib],_e=[te.hb]))return 2;N=xe[0],H=_e[0]}}ue.width=N,ue.height=H;e:{var ke=ue.width,Re=ue.height;if(N=ue.S,0>=ke||0>=Re||!(N>=oi&&13>N))N=2;else{if(0>=ue.Rd&&ue.sd==null){Ee=_e=xe=H=0;var Ge=(Ne=ke*Dv[N])*Re;if(11>N||(_e=(Re+1)/2*(H=(ke+1)/2),N==12&&(Ee=(xe=ke)*Re)),(Re=a(Ge+2*_e+Ee))==null){N=1;break e}ue.sd=Re,11>N?((ke=ue.f.RGBA).eb=Re,ke.fb=0,ke.A=Ne,ke.size=Ge):((ke=ue.f.kb).y=Re,ke.O=0,ke.fa=Ne,ke.Fd=Ge,ke.f=Re,ke.N=0+Ge,ke.Ab=H,ke.Cd=_e,ke.ea=Re,ke.W=0+Ge+_e,ke.Db=H,ke.Ed=_e,N==12&&(ke.F=Re,ke.J=0+Ge+2*_e),ke.Tc=Ee,ke.lb=xe)}if(H=1,xe=ue.S,_e=ue.width,Ee=ue.height,xe>=oi&&13>xe)if(11>xe)N=ue.f.RGBA,H&=(Ne=Math.abs(N.A))*(Ee-1)+_e<=N.size,H&=Ne>=_e*Dv[xe],H&=N.eb!=null;else{N=ue.f.kb,Ne=(_e+1)/2,Ge=(Ee+1)/2,ke=Math.abs(N.fa),Re=Math.abs(N.Ab);var ut=Math.abs(N.Db),it=Math.abs(N.lb),Ze=it*(Ee-1)+_e;H&=ke*(Ee-1)+_e<=N.Fd,H&=Re*(Ge-1)+Ne<=N.Cd,H=(H&=ut*(Ge-1)+Ne<=N.Ed)&ke>=_e&Re>=Ne&ut>=Ne,H&=N.y!=null,H&=N.f!=null,H&=N.ea!=null,xe==12&&(H&=it>=_e,H&=Ze<=N.Tc,H&=N.F!=null)}else H=0;N=H?0:2}}return N!=0||te!=null&&te.fd&&(N=Fl(ue)),N}var Ms=64,Dc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mi=24,Dl=32,ju=8,ai=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(N){return N},S.Predictor2=function(N,H,te){return H[te+0]},S.Predictor3=function(N,H,te){return H[te+1]},S.Predictor4=function(N,H,te){return H[te-1]},S.Predictor5=function(N,H,te){return xt(xt(N,H[te+1]),H[te+0])},S.Predictor6=function(N,H,te){return xt(N,H[te-1])},S.Predictor7=function(N,H,te){return xt(N,H[te+0])},S.Predictor8=function(N,H,te){return xt(H[te-1],H[te+0])},S.Predictor9=function(N,H,te){return xt(H[te+0],H[te+1])},S.Predictor10=function(N,H,te){return xt(xt(N,H[te-1]),xt(H[te+0],H[te+1]))},S.Predictor11=function(N,H,te){var ue=H[te+0];return 0>=cn(ue>>24&255,N>>24&255,(H=H[te-1])>>24&255)+cn(ue>>16&255,N>>16&255,H>>16&255)+cn(ue>>8&255,N>>8&255,H>>8&255)+cn(255&ue,255&N,255&H)?ue:N},S.Predictor12=function(N,H,te){var ue=H[te+0];return(Vt((N>>24&255)+(ue>>24&255)-((H=H[te-1])>>24&255))<<24|Vt((N>>16&255)+(ue>>16&255)-(H>>16&255))<<16|Vt((N>>8&255)+(ue>>8&255)-(H>>8&255))<<8|Vt((255&N)+(255&ue)-(255&H)))>>>0},S.Predictor13=function(N,H,te){var ue=H[te-1];return(Kt((N=xt(N,H[te+0]))>>24&255,ue>>24&255)<<24|Kt(N>>16&255,ue>>16&255)<<16|Kt(N>>8&255,ue>>8&255)<<8|Kt(N>>0&255,ue>>0&255))>>>0};var $f=S.PredictorAdd0;S.PredictorAdd1=Gt,vt("Predictor2","PredictorAdd2"),vt("Predictor3","PredictorAdd3"),vt("Predictor4","PredictorAdd4"),vt("Predictor5","PredictorAdd5"),vt("Predictor6","PredictorAdd6"),vt("Predictor7","PredictorAdd7"),vt("Predictor8","PredictorAdd8"),vt("Predictor9","PredictorAdd9"),vt("Predictor10","PredictorAdd10"),vt("Predictor11","PredictorAdd11"),vt("Predictor12","PredictorAdd12"),vt("Predictor13","PredictorAdd13");var ao=S.PredictorAdd2;Ht("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var vd,Oa=S.ColorIndexInverseTransform,Sa=S.MapARGB,ii=S.VP8LColorIndexInverseTransformAlpha,Lc=S.MapAlpha,Ll=S.VP8LPredictorsAdd=[];Ll.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Rl,Ta,ua,cl,Aa,Ui,So,To,Us,Oi,ra,Ei,Au,ul,Qu,ja,Al,Rc,Pl,Hu,ec,tc,dl,Os,Na,fr,hr,fs,Zr=a(511),io=a(2041),nc=a(225),No=a(767),rc=0,du=io,fl=nc,da=No,oo=Zr,oi=0,fu=1,hl=2,Vu=3,Pc=4,Ml=5,yd=6,zu=7,sc=8,ac=9,h=10,w=[2,3,7],D=[3,3,11],Z=[280,256,256,256,40],Ae=[0,1,1,1,0],Ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ht=8,Ft=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],an=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dn=null,xn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$s=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],u0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ic=[],Si=[],ji=[],A0=1,hu=2,es=[],Ws=[];gt("UpsampleRgbLinePair",Te,3),gt("UpsampleBgrLinePair",We,3),gt("UpsampleRgbaLinePair",Yn,4),gt("UpsampleBgraLinePair",gr,4),gt("UpsampleArgbLinePair",Ln,4),gt("UpsampleRgba4444LinePair",Pt,2),gt("UpsampleRgb565LinePair",ot,2);var oc=S.UpsampleRgbLinePair,Mc=S.UpsampleBgrLinePair,Ul=S.UpsampleRgbaLinePair,Gu=S.UpsampleBgraLinePair,kA=S.UpsampleArgbLinePair,qu=S.UpsampleRgba4444LinePair,d0=S.UpsampleRgb565LinePair,Uc=16,Qa=1<<Uc-1,Ku=-227,f0=482,Ob=6,Iv=0,jb=a(256),Ha=a(256),xp=a(256),Wf=a(256),Yf=a(f0-Ku),vp=a(f0-Ku);Pr("YuvToRgbRow",Te,3),Pr("YuvToBgrRow",We,3),Pr("YuvToRgbaRow",Yn,4),Pr("YuvToBgraRow",gr,4),Pr("YuvToArgbRow",Ln,4),Pr("YuvToRgba4444Row",Pt,2),Pr("YuvToRgb565Row",ot,2);var IA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mu=[0,2,8],Qb=[8,7,6,4,4,2,2,2,1,1,1,1],Fv=1;this.WebPDecodeRGBA=function(N,H,te,ue,xe){var _e=fu,Ee=new Bl,Ne=new us;Ee.ba=Ne,Ne.S=_e,Ne.width=[Ne.width],Ne.height=[Ne.height];var ke=Ne.width,Re=Ne.height,Ge=new Is;if(Ge==null||N==null)var ut=2;else e(Ge!=null),ut=Ci(N,H,te,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(ut!=0?ke=0:(ke!=null&&(ke[0]=Ge.width[0]),Re!=null&&(Re[0]=Ge.height[0]),ke=1),ke){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ue!=null&&(ue[0]=Ne.width),xe!=null&&(xe[0]=Ne.height);e:{if(ue=new Fs,(xe=new _i).data=N,xe.w=H,xe.ha=te,xe.kd=1,H=[0],e(xe!=null),((N=Ci(xe.data,xe.w,xe.ha,null,null,null,H,null,xe))==0||N==7)&&H[0]&&(N=4),(H=N)==0){if(e(Ee!=null),ue.data=xe.data,ue.w=xe.w+xe.offset,ue.ha=xe.ha-xe.offset,ue.put=zs,ue.ac=As,ue.bc=oa,ue.ma=Ee,xe.xa){if((N=dt())==null){Ee=1;break e}if(function(it,Ze){var kt=[0],pt=[0],qe=[0];t:for(;;){if(it==null)return 0;if(Ze==null)return it.a=2,0;if(it.l=Ze,it.a=0,K(it.m,Ze.data,Ze.w,Ze.ha),!rn(it.m,kt,pt,qe)){it.a=3;break t}if(it.xb=hu,Ze.width=kt[0],Ze.height=pt[0],!Je(kt[0],pt[0],1,it,null))break t;return 1}return e(it.a!=0),0}(N,ue)){if(ue=(H=Fc(ue.width,ue.height,Ee.Oa,Ee.ba))==0){t:{ue=N;n:for(;;){if(ue==null){ue=0;break t}if(e(ue.s.yc!=null),e(ue.s.Ya!=null),e(0<ue.s.Wb),e((te=ue.l)!=null),e((xe=te.ma)!=null),ue.xb!=0){if(ue.ca=xe.ba,ue.tb=xe.tb,e(ue.ca!=null),!Ic(xe.Oa,te,Vu)){ue.a=2;break n}if(!at(ue,te.width)||te.da)break n;if((te.da||Zn(ue.ca.S))&&Xe(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&Xe()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!nt(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break n}ue.xb=0}if(!Me(ue,ue.V,ue.Ba,ue.c,ue.i,te.o,Pe))break n;xe.Dc=ue.Ma,ue=1;break t}e(ue.a!=0),ue=0}ue=!ue}ue&&(H=N.a)}else H=N.a}else{if((N=new Rn)==null){Ee=1;break e}if(N.Fa=xe.na,N.P=xe.P,N.qc=xe.Sa,Ji(N,ue)){if((H=Fc(ue.width,ue.height,Ee.Oa,Ee.ba))==0){if(N.Aa=0,te=Ee.Oa,e((xe=N)!=null),te!=null){if(0<(ke=0>(ke=te.Md)?0:100<ke?255:255*ke/100)){for(Re=Ge=0;4>Re;++Re)12>(ut=xe.pb[Re]).lc&&(ut.ia=ke*Qb[0>ut.lc?0:ut.lc]>>3),Ge|=ut.ia;Ge&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=te.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}Qn(N,ue)||(H=N.a)}}else H=N.a}H==0&&Ee.Oa!=null&&Ee.Oa.fd&&(H=Fl(Ee.ba))}Ee=H}_e=Ee!=0?null:11>_e?Ne.f.RGBA.eb:Ne.f.kb.y}else _e=null;return _e};var Dv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,k){for(var z="",P=0;P<4;P++)z+=String.fromCharCode(S[k++]);return z}function d(S,k){return(S[k+0]<<0|S[k+1]<<8|S[k+2]<<16)>>>0}function m(S,k){return(S[k+0]<<0|S[k+1]<<8|S[k+2]<<16|S[k+3]<<24)>>>0}new l;var p=[0],x=[0],C=[],y=new l,T=t,I=function(S,k){var z={},P=0,R=!1,G=0,q=0;if(z.frames=[],!function(J,re,ie,fe){for(var Se=0;Se<fe;Se++)if(J[re+Se]!=ie.charCodeAt(Se))return!0;return!1}(S,k,"RIFF",4)){var le,ee;for(m(S,k+=4),k+=8;k<S.length;){var oe=u(S,k),K=m(S,k+=4);k+=4;var ne=K+(1&K);switch(oe){case"VP8 ":case"VP8L":z.frames[P]===void 0&&(z.frames[P]={}),(V=z.frames[P]).src_off=R?q:k-8,V.src_size=G+K+8,P++,R&&(R=!1,G=0,q=0);break;case"VP8X":(V=z.header={}).feature_flags=S[k];var X=k+4;V.canvas_width=1+d(S,X),X+=3,V.canvas_height=1+d(S,X),X+=3;break;case"ALPH":R=!0,G=ne+8,q=k-8;break;case"ANIM":(V=z.header).bgcolor=m(S,k),X=k+4,V.loop_count=(le=S)[(ee=X)+0]<<0|le[ee+1]<<8,X+=2;break;case"ANMF":var ce,V;(V=z.frames[P]={}).offset_x=2*d(S,k),k+=3,V.offset_y=2*d(S,k),k+=3,V.width=1+d(S,k),k+=3,V.height=1+d(S,k),k+=3,V.duration=d(S,k),k+=3,ce=S[k++],V.dispose=1&ce,V.blend=ce>>1&1}oe!="ANMF"&&(k+=ne)}return z}}(T,0);I.response=T,I.rgbaoutput=!0,I.dataurl=!1;var F=I.header?I.header:null,M=I.frames?I.frames:null;if(F){F.loop_counter=F.loop_count,p=[F.canvas_height],x=[F.canvas_width];for(var O=0;O<M.length&&M[O].blend!=0;O++);}var Q=M[0],j=y.WebPDecodeRGBA(T,Q.src_off,Q.src_size,x,p);Q.rgba=j,Q.imgwidth=x[0],Q.imgheight=p[0];for(var E=0;E<x[0]*p[0]*4;E++)C[E]=j[E];return this.width=x,this.height=p,this.data=C,this}(function(t){var e=function(){return typeof uS=="function"},n=function(p,x,C,y){var T=4,I=i;switch(y){case t.image_compression.FAST:T=1,I=a;break;case t.image_compression.MEDIUM:T=6,I=o;break;case t.image_compression.SLOW:T=9,I=l}p=r(p,x,C,I);var F=uS(p,{level:T});return t.__addimage__.arrayBufferToBinaryString(F)},r=function(p,x,C,y){for(var T,I,F,M=p.length/x,O=new Uint8Array(p.length+M),Q=d(),j=0;j<M;j+=1){if(F=j*x,T=p.subarray(F,F+x),y)O.set(y(T,C,I),F+j);else{for(var E,S=Q.length,k=[];E<S;E+=1)k[E]=Q[E](T,C,I);var z=m(k.concat());O.set(k[z],F+j)}I=T}return O},s=function(p){var x=Array.apply([],p);return x.unshift(0),x},a=function(p,x){var C,y=[],T=p.length;y[0]=1;for(var I=0;I<T;I+=1)C=p[I-x]||0,y[I+1]=p[I]-C+256&255;return y},i=function(p,x,C){var y,T=[],I=p.length;T[0]=2;for(var F=0;F<I;F+=1)y=C&&C[F]||0,T[F+1]=p[F]-y+256&255;return T},o=function(p,x,C){var y,T,I=[],F=p.length;I[0]=3;for(var M=0;M<F;M+=1)y=p[M-x]||0,T=C&&C[M]||0,I[M+1]=p[M]+256-(y+T>>>1)&255;return I},l=function(p,x,C){var y,T,I,F,M=[],O=p.length;M[0]=4;for(var Q=0;Q<O;Q+=1)y=p[Q-x]||0,T=C&&C[Q]||0,I=C&&C[Q-x]||0,F=u(y,T,I),M[Q+1]=p[Q]-F+256&255;return M},u=function(p,x,C){if(p===x&&x===C)return p;var y=Math.abs(x-C),T=Math.abs(p-C),I=Math.abs(p+x-C-C);return y<=T&&y<=I?p:T<=I?x:C},d=function(){return[s,a,i,o,l]},m=function(p){var x=p.map(function(C){return C.reduce(function(y,T){return y+Math.abs(T)},0)});return x.indexOf(Math.min.apply(null,x))};t.processPNG=function(p,x,C,y){var T,I,F,M,O,Q,j,E,S,k,z,P,R,G,q,le=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(F=new GZ(p)).imgData,I=F.bits,T=F.colorSpace,O=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){S=(E=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,z=new Uint8Array(S*F.colors),k=new Uint8Array(S);var oe,K=F.pixelBitlength-F.bits;for(G=0,q=0;G<S;G++){for(R=E[G],oe=0;oe<K;)z[q++]=R>>>oe&255,oe+=F.bits;k[G]=R>>>oe&255}}if(F.bits===16){S=(E=new Uint32Array(F.decodePixels().buffer)).length,z=new Uint8Array(S*(32/F.pixelBitlength)*F.colors),k=new Uint8Array(S*(32/F.pixelBitlength)),P=F.colors>1,G=0,q=0;for(var ne=0;G<S;)R=E[G++],z[q++]=R>>>0&255,P&&(z[q++]=R>>>16&255,R=E[G++],z[q++]=R>>>0&255),k[ne++]=R>>>16&255;I=8}y!==t.image_compression.NONE&&e()?(p=n(z,F.width*F.colors,F.colors,y),j=n(k,F.width,1,y)):(p=z,j=k,le=void 0)}if(F.colorType===3&&(T=this.color_spaces.INDEXED,Q=F.palette,F.transparency.indexed)){var X=F.transparency.indexed,ce=0;for(G=0,S=X.length;G<S;++G)ce+=X[G];if((ce/=255)===S-1&&X.indexOf(0)!==-1)M=[X.indexOf(0)];else if(ce!==S){for(E=F.decodePixels(),k=new Uint8Array(E.length),G=0,S=E.length;G<S;G++)k[G]=X[E[G]];j=n(k,F.width,1)}}var V=function(J){var re;switch(J){case t.image_compression.FAST:re=11;break;case t.image_compression.MEDIUM:re=13;break;case t.image_compression.SLOW:re=14;break;default:re=12}return re}(y);return le===this.decode.FLATE_DECODE&&(ee="/Predictor "+V+" "),ee+="/Colors "+O+" /BitsPerComponent "+I+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(j&&this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),{alias:C,data:p,index:x,filter:le,decodeParameters:ee,transparency:M,palette:Q,sMask:j,predictor:V,width:F.width,height:F.height,bitsPerComponent:I,colorSpace:T}}}})(En.API),function(t){t.processGIF89A=function(e,n,r,s){var a=new qZ(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new CC(100).encode(u,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(En.API),_u.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_u.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ls.log("bit decode error:"+n)}},_u.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}n!==0&&(this.pos+=4-n)}},_u.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},_u.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},_u.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},_u.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&n)/n*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},_u.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},_u.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},_u.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var a=new _u(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new CC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(En.API),rF.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var a=new rF(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new CC(100).encode(l,100);return t.processJPEG.call(this,u,n,r,s)}}(En.API),En.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=r[u],m=r[u+1],p=r[u+2],x=r[u+3];a[o++]=d,a[o++]=m,a[o++]=p,i[l++]=x}var C=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},En.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},M0=En.API,U1=M0.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,m=e.doKerning!==!1,p=0,x=t.length,C=0,y=o[0]||l,T=[];for(n=0;n<x;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?T.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(p=m&&_s(u[r])==="object"&&!isNaN(parseInt(u[r][C],10))?u[r][C]/d:0,T.push((o[r]||y)/l+p)),C=r;return T},Z3=M0.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return M0.processArabic&&(t=M0.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:U1.apply(this,arguments).reduce(function(a,i){return a+i},0)},eF=function(t,e,n,r){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<n;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>r&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},tF=function(t,e,n){n||(n={});var r,s,a,i,o,l,u,d=[],m=[d],p=n.textIndent||0,x=0,C=0,y=t.split(" "),T=U1.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var I=Array(l).join(" "),F=[];y.map(function(O){(O=O.split(/\s*\n/)).length>1?F=F.concat(O.map(function(Q,j){return(j&&Q.length?`
`:"")+Q})):F.push(O[0])}),y=F,l=Z3.apply(this,[I,n])}for(a=0,i=y.length;a<i;a++){var M=0;if(r=y[a],l&&r[0]==`
`&&(r=r.substr(1),M=1),p+x+(C=(s=U1.apply(this,[r,n])).reduce(function(O,Q){return O+Q},0))>e||M){if(C>e){for(o=eF.apply(this,[r,s,e-(p+x),e]),d.push(o.shift()),d=[o.pop()];o.length;)m.push([o.shift()]);C=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(O,Q){return O+Q},0)}else d=[r];m.push(d),p=C+l,x=T}else d.push(r),p+=x+C,x=T}return u=l?function(O,Q){return(Q?I:"")+O.join(" ")}:function(O){return O.join(" ")},m.map(u)},M0.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var m=this.internal.getFont(d.fontName,d.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(tF.apply(this,[r[o],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var a=function(m){return"0x"+parseInt(m,10).toString(16)},i=t.__fontmetrics__.compress=function(m){var p,x,C,y,T=["{"];for(var I in m){if(p=m[I],isNaN(parseInt(I,10))?x="'"+I+"'":(I=parseInt(I,10),x=(x=a(I).slice(2)).slice(0,-1)+r[x.slice(-1)]),typeof p=="number")p<0?(C=a(p).slice(3),y="-"):(C=a(p).slice(2),y=""),C=y+C.slice(0,-1)+r[C.slice(-1)];else{if(_s(p)!=="object")throw new Error("Don't know what to do with value type "+_s(p)+".");C=i(p)}T.push(x+C)}return T.push("}"),T.join("")},o=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,x,C,y,T={},I=1,F=T,M=[],O="",Q="",j=m.length-1,E=1;E<j;E+=1)(y=m[E])=="'"?p?(C=p.join(""),p=void 0):p=[]:p?p.push(y):y=="{"?(M.push([F,C]),F={},C=void 0):y=="}"?((x=M.pop())[0][x[1]]=F,C=void 0,F=x[0]):y=="-"?I=-1:C===void 0?n.hasOwnProperty(y)?(O+=n[y],C=parseInt(O,16)*I,I=1,O=""):O+=y:n.hasOwnProperty(y)?(Q+=n[y],F[C]=parseInt(Q,16)*I,I=1,C=void 0,Q=""):Q+=y;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var p=m.font,x=d.Unicode[p.postScriptName];x&&(p.metadata.Unicode={},p.metadata.Unicode.widths=x.widths,p.metadata.Unicode.kerning=x.kerning);var C=u.Unicode[p.postScriptName];C&&(p.metadata.Unicode.encoding=C,p.encoding=C.codePages[0])}])}(En.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(qg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,r)}}])}(En),function(t){function e(){return(qn.canvg?Promise.resolve(qn.canvg):Sw(()=>import("./index.es-B6ua1P7v.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}En.API.addSvgAsImage=function(n,r,s,a,i,o,l,u){if(isNaN(r)||isNaN(s))throw Ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw Ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var m=d.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(C){return C.fromString(m,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(p)}).then(function(){x.addImage(d.toDataURL("image/jpeg",1),r,s,a,i,l,u)})}}(),En.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},En.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,m=0;function p(C,y){var T,I=!1;for(T=0;T<C.length;T+=1)C[T]===y&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=o.length;for(m=0;m<x;m+=1)n[o[m]].value=n[o[m]].defaultValue,n[o[m]].explicitSet=!1}if(_s(t)==="object"){for(s in t)if(a=t[s],p(o,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&p(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,y=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?y.push("/"+C+" /"+n[C].value):y.push("/"+C+" "+n[C].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(En.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],m=0,p=a.length;m<p;++m){if(o=i.metadata.characterToGlyph(a.charCodeAt(m)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(m),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var i,o,l,u,d,m,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,p=(o=Object.keys(a).sort(function(x,C){return x-C})).length;m<p;m++)i=o[m],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),x="",C=0;C<p.length;C++)x+=String.fromCharCode(p[C]);var y=u();d({data:x,addLength1:!0,objectId:y}),l("endobj");var T=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var I=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+im(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var F=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+im(o.fontName)),l("/FontDescriptor "+I+" 0 R"),l("/W "+t.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+im(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+F+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,p="",x=0;x<m.length;x++)p+=String.fromCharCode(m[x]);var C=u();d({data:p,addLength1:!0,objectId:C}),l("endobj");var y=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var T=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+im(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var I=0;I<o.metadata.hmtx.widths.length;I++)o.metadata.hmtx.widths[I]=parseInt(o.metadata.hmtx.widths[I]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+im(o.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},m=a.mutex||{},p=m.pdfEscape,x=m.activeFontKey,C=m.fonts,y=x,T="",I=0,F="",M=C[y].encoding;if(C[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:m};for(F=o,y=x,Array.isArray(o)&&(F=o[0]),I=0;I<F.length;I+=1)C[y].metadata.hasOwnProperty("cmap")&&(i=C[y].metadata.cmap.unicode.codeMap[F[I].charCodeAt(0)]),i||F[I].charCodeAt(0)<256&&C[y].metadata.hasOwnProperty("Unicode")?T+=F[I]:T+="";var O="";return parseInt(y.slice(1))<14||M==="WinAnsiEncoding"?O=p(T,y).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(O=n(T,C[y])),m.isHex=!0,{text:O,x:l,y:u,options:d,mutex:m}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(En),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(En.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,a,i,o,l,u,d,m=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,M=0;this.__bidiEngine__={};var O=function(P){var R=P.charCodeAt(),G=R>>8,q=y[G];return q!==void 0?m[256*q+(255&R)]:G===252||G===253?"AL":I.test(G)?"L":G===8?"R":"N"},Q=function(P){for(var R,G=0;G<P.length;G++){if((R=O(P.charAt(G)))==="L")return!1;if(R==="R")return!0}return!1},j=function(P,R,G,q){var le,ee,oe,K,ne=R[q];switch(ne){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(ne="AN");break;case"AL":F=!0,ne="R";break;case"WS":ne="N";break;case"CS":q<1||q+1>=R.length||(le=G[q-1])!=="EN"&&le!=="AN"||(ee=R[q+1])!=="EN"&&ee!=="AN"?ne="N":F&&(ee="AN"),ne=ee===le?ee:"N";break;case"ES":ne=(le=q>0?G[q-1]:"B")==="EN"&&q+1<R.length&&R[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&G[q-1]==="EN"){ne="EN";break}if(F){ne="N";break}for(oe=q+1,K=R.length;oe<K&&R[oe]==="ET";)oe++;ne=oe<K&&R[oe]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(K=R.length,oe=q+1;oe<K&&R[oe]==="NSM";)oe++;if(oe<K){var X=P[q],ce=X>=1425&&X<=2303||X===64286;if(le=R[oe],ce&&(le==="R"||le==="AL")){ne="R";break}}}ne=q<1||(le=R[q-1])==="B"?"N":G[q-1];break;case"B":F=!1,s=!0,ne=M;break;case"S":a=!0,ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":ne="N"}return ne},E=function(P,R,G){var q=P.split("");return G&&S(q,G,{hiLevel:M}),q.reverse(),R&&R.reverse(),q.join("")},S=function(P,R,G){var q,le,ee,oe,K,ne=-1,X=P.length,ce=0,V=[],J=M?x:p,re=[];for(F=!1,s=!1,a=!1,le=0;le<X;le++)re[le]=O(P[le]);for(ee=0;ee<X;ee++){if(K=ce,V[ee]=j(P,re,V,ee),q=240&(ce=J[K][C[V[ee]]]),ce&=15,R[ee]=oe=J[ce][5],q>0)if(q===16){for(le=ne;le<ee;le++)R[le]=1;ne=-1}else ne=-1;if(J[ce][6])ne===-1&&(ne=ee);else if(ne>-1){for(le=ne;le<ee;le++)R[le]=oe;ne=-1}re[ee]==="B"&&(R[ee]=0),G.hiLevel|=oe}a&&function(ie,fe,Se){for(var ve=0;ve<Se;ve++)if(ie[ve]==="S"){fe[ve]=M;for(var ye=ve-1;ye>=0&&ie[ye]==="WS";ye--)fe[ye]=M}}(re,R,X)},k=function(P,R,G,q,le){if(!(le.hiLevel<P)){if(P===1&&M===1&&!s)return R.reverse(),void(G&&G.reverse());for(var ee,oe,K,ne,X=R.length,ce=0;ce<X;){if(q[ce]>=P){for(K=ce+1;K<X&&q[K]>=P;)K++;for(ne=ce,oe=K-1;ne<oe;ne++,oe--)ee=R[ne],R[ne]=R[oe],R[oe]=ee,G&&(ee=G[ne],G[ne]=G[oe],G[oe]=ee);ce=K}ce++}}},z=function(P,R,G){var q=P.split(""),le={hiLevel:M};return G||(G=[]),S(q,G,le),function(ee,oe,K){if(K.hiLevel!==0&&d)for(var ne,X=0;X<ee.length;X++)oe[X]===1&&(ne=T.indexOf(ee[X]))>=0&&(ee[X]=T[ne+1])}(q,G,le),k(2,q,R,G,le),k(1,q,R,G,le),q.join("")};return this.__bidiEngine__.doBidiReorder=function(P,R,G){if(function(le,ee){if(ee)for(var oe=0;oe<le.length;oe++)ee[oe]=oe;o===void 0&&(o=Q(le)),u===void 0&&(u=Q(le))}(P,R),i||!l||u)if(i&&l&&o^u)M=o?1:0,P=E(P,R,G);else if(!i&&l&&u)M=o?1:0,P=z(P,R,G),P=E(P,R);else if(!i||o||l||u){if(i&&!l&&o^u)P=E(P,R),o?(M=0,P=z(P,R,G)):(M=1,P=z(P,R,G),P=E(P,R));else if(i&&o&&!l&&u)M=1,P=z(P,R,G),P=E(P,R);else if(!i&&!l&&o^u){var q=d;o?(M=1,P=z(P,R,G),M=0,d=!1,P=z(P,R,G),d=q):(M=0,P=z(P,R,G),P=E(P,R),M=1,d=!1,P=z(P,R,G),d=q,P=E(P,R))}}else M=0,P=z(P,R,G);else M=o?1:0,P=z(P,R,G);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),i=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([n.doBidiReorder(s[o])]);r.text=i}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(En),En.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Pf(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new oee(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new KZ(this.contents),this.head=new WZ(this),this.name=new eee(this),this.cmap=new A8(this),this.toUnicode={},this.hhea=new YZ(this),this.maxp=new tee(this),this.hmtx=new nee(this),this.post=new JZ(this),this.os2=new XZ(this),this.loca=new iee(this),this.glyf=new ree(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return i*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Mu,Pf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,a,i,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),KZ=function(){var t;function e(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,a,i,o,l,u,d,m,p,x,C,y;for(y in x=Object.keys(n).length,l=Math.log(2),m=16*Math.floor(Math.log(x)/l),i=Math.floor(m/l),d=16*x-m,(s=new Pf).writeInt(this.scalarType),s.writeShort(x),s.writeShort(m),s.writeShort(i),s.writeShort(d),a=16*x,u=s.pos+a,o=null,C=[],n)for(p=n[y],s.writeString(y),s.writeInt(t(p)),s.writeInt(u),s.writeInt(p.length),C=C.concat(p),y==="head"&&(o=u),u+=p.length;u%4;)C.push(0),u++;return s.write(C),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,a,i;for(n=d8.call(n);n.length%4;)n.push(0);for(a=new Pf(n),s=0,r=0,i=n.length;r<i;r=r+=4)s+=a.readUInt32();return 4294967295&s},e}(),$Z={}.hasOwnProperty,CA=function(t,e){for(var n in e)$Z.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Mu=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var WZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Pf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),sF=function(){function t(e,n){var r,s,a,i,o,l,u,d,m,p,x,C,y,T,I,F,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(x=e.readUInt16(),p=x/2,e.pos+=6,a=function(){var O,Q;for(Q=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)Q.push(e.readUInt16());return Q}(),e.pos+=2,y=function(){var O,Q;for(Q=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)Q.push(e.readUInt16());return Q}(),u=function(){var O,Q;for(Q=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)Q.push(e.readUInt16());return Q}(),d=function(){var O,Q;for(Q=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)Q.push(e.readUInt16());return Q}(),s=(this.length-e.pos+this.offset)/2,o=function(){var O,Q;for(Q=[],l=O=0;0<=s?O<s:O>s;l=0<=s?++O:--O)Q.push(e.readUInt16());return Q}(),l=I=0,M=a.length;I<M;l=++I)for(T=a[l],r=F=C=y[l];C<=T?F<=T:F>=T;r=C<=T?++F:--F)d[l]===0?i=r+u[l]:(i=o[d[l]/2+(r-C)-(p-l)]||0)!==0&&(i+=u[l]),this.codeMap[r]=65535&i}e.pos=m}return t.encode=function(e,n){var r,s,a,i,o,l,u,d,m,p,x,C,y,T,I,F,M,O,Q,j,E,S,k,z,P,R,G,q,le,ee,oe,K,ne,X,ce,V,J,re,ie,fe,Se,ve,ye,we,me,he;switch(q=new Pf,i=Object.keys(e).sort(function(Ve,nt){return Ve-nt}),n){case"macroman":for(y=0,T=function(){var Ve=[];for(C=0;C<256;++C)Ve.push(0);return Ve}(),F={0:0},a={},le=0,ne=i.length;le<ne;le++)F[ye=e[s=i[le]]]==null&&(F[ye]=++y),a[s]={old:e[s],new:F[e[s]]},T[s]=F[e[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(T),{charMap:a,subtable:q.data,maxGlyphID:y+1};case"unicode":for(R=[],m=[],M=0,F={},r={},I=u=null,ee=0,X=i.length;ee<X;ee++)F[Q=e[s=i[ee]]]==null&&(F[Q]=++M),r[s]={old:Q,new:F[Q]},o=F[Q]-s,I!=null&&o===u||(I&&m.push(I),R.push(s),u=o),I=s;for(I&&m.push(I),m.push(65535),R.push(65535),z=2*(k=R.length),S=2*Math.pow(Math.log(k)/Math.LN2,2),p=Math.log(S/2)/Math.LN2,E=2*k-S,l=[],j=[],x=[],C=oe=0,ce=R.length;oe<ce;C=++oe){if(P=R[C],d=m[C],P===65535){l.push(0),j.push(0);break}if(P-(G=r[P].new)>=32768)for(l.push(0),j.push(2*(x.length+k-C)),s=K=P;P<=d?K<=d:K>=d;s=P<=d?++K:--K)x.push(r[s].new);else l.push(G-P),j.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*k+2*x.length),q.writeUInt16(0),q.writeUInt16(z),q.writeUInt16(S),q.writeUInt16(p),q.writeUInt16(E),Se=0,V=m.length;Se<V;Se++)s=m[Se],q.writeUInt16(s);for(q.writeUInt16(0),ve=0,J=R.length;ve<J;ve++)s=R[ve],q.writeUInt16(s);for(we=0,re=l.length;we<re;we++)o=l[we],q.writeUInt16(o);for(me=0,ie=j.length;me<ie;me++)O=j[me],q.writeUInt16(O);for(he=0,fe=x.length;he<fe;he++)y=x[he],q.writeUInt16(y);return{charMap:r,subtable:q.data,maxGlyphID:M+1}}},t}(),A8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new sF(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=sF.encode(n,r),(a=new Pf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),YZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),XZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),JZ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var i;for(s=n.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(n.readUInt32());return u}).call(this)}},e}(),ZZ=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},eee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,a,i,o,l,u,d,m,p,x;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},i=m=0,p=s.length;m<p;i=++m)a=s[i],n.pos=a.offset,d=n.readString(a.length),o=new ZZ(d,a),u[x=a.nameID]==null&&(u[x]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),tee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),nee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,a,i,o,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,m;for(m=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)m.push(n.readInt16());return m}(),this.widths=(function(){var d,m,p,x;for(x=[],d=0,m=(p=this.metrics).length;d<m;d++)i=p[d],x.push(i.advance);return x}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),d8=[].slice,ree=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,a,i,o,l,u,d,m,p;return n in this.cache?this.cache[n]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(n),(a=i.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new Pf(r.read(a))).readShort(),d=l.readShort(),p=l.readShort(),u=l.readShort(),m=l.readShort(),this.cache[n]=o===-1?new aee(l,d,p,u,m):new see(l,o,d,p,u,m),this.cache[n]))},e.prototype.encode=function(n,r,s){var a,i,o,l,u;for(o=[],i=[],l=0,u=r.length;l<u;l++)a=n[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),see=function(){function t(e,n,r,s,a,i){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),aee=function(){function t(e,n,r,s,a){var i,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Pf(d8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),iee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return CA(e,Mu),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*n.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(n.readUInt32());return i}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<r.length&&r[i]==o){++i,s[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*s.length),m=0;m<s.length;++m)d[4*m+3]=255&s[m],d[4*m+2]=(65280&s[m])>>8,d[4*m+1]=(16711680&s[m])>>16,d[4*m]=(4278190080&s[m])>>24;return d},e}(),oee=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],s[a]=r;return s},t.prototype.encode=function(e,n){var r,s,a,i,o,l,u,d,m,p,x,C,y,T,I;for(s in r=A8.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),x={0:0},I=r.charMap)x[(l=I[s]).old]=l.new;for(C in p=r.maxGlyphID,i)C in x||(x[C]=p++);return d=function(F){var M,O;for(M in O={},F)O[F[M]]=M;return O}(x),m=Object.keys(d).sort(function(F,M){return F-M}),y=function(){var F,M,O;for(O=[],F=0,M=m.length;F<M;F++)o=m[F],O.push(d[o]);return O}(),a=this.font.glyf.encode(i,y,x),u=this.font.loca.encode(a.offsets,y),T={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();En.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+n},e}();function f8(t,e,n,r,s){r=r||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,m="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(m=typeof t=="string"?t.split(d):t,p=m.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*u:r.valign==="bottom"&&(n-=p*u),r.halign==="center"||r.halign==="right"){var x=o;if(r.halign==="center"&&(x*=.5),m&&p>=1){for(var C=0;C<m.length;C++)s.text(m[C],e-s.getStringUnitWidth(m[C])*x,n),n+=u;return s}e-=s.getStringUnitWidth(t)*x}return r.halign==="justify"?s.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(t,e,n),s}var aF={},Cm=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:aF=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,s,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,s,a){return this.jsPDFDocument.rect(e,n,r,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return aF||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),gS=function(t,e){return gS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},gS(t,e)};function h8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var m8=function(t){h8(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function lee(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function cee(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Bw(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],s=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function p8(t,e,n,r){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=g8(s,!1);i&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,i)}function g8(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function J2(t,e){var n,r,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function x8(t,e){var n=J2(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function uee(t,e,n,r,s){var a={},i=1.3333333333333333,o=EC(e,function(M){return s.getComputedStyle(M).backgroundColor});o!=null&&(a.fillColor=o);var l=EC(e,function(M){return s.getComputedStyle(M).color});l!=null&&(a.textColor=l);var u=dee(r,n);u&&(a.cellPadding=u);var d="borderTopColor",m=i*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var x=(parseFloat(p)||0)/m;x&&(a.lineWidth=x)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var C=EC(e,function(M){return s.getComputedStyle(M)[d]});C!=null&&(a.lineColor=C);var y=["left","right","center","justify"];y.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),y=["middle","bottom","top"],y.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var T=parseInt(r.fontSize||"");isNaN(T)||(a.fontSize=T/i);var I=Aee(r);I&&(a.fontStyle=I);var F=(r.fontFamily||"").toLowerCase();return t.indexOf(F)!==-1&&(a.font=F),a}function Aee(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function EC(t,e){var n=v8(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function v8(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:v8(t.parentElement,e):n}function dee(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),i=J2(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function y8(t,e,n,r,s){var a,i;r===void 0&&(r=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],m=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:m,foot:p};for(var x=0;x<o.rows.length;x++){var C=o.rows[x],y=(i=(a=C==null?void 0:C.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),T=fee(l,u,n,C,r,s);T&&(y==="thead"?d.push(T):y==="tfoot"?p.push(T):m.push(T))}return{head:d,body:m,foot:p}}function fee(t,e,n,r,s,a){for(var i=new m8(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=uee(t,l,e,u,n)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:hee(l)})}}var m=n.getComputedStyle(r);if(i.length>0&&(s||m.display!=="none"))return i}function hee(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function mee(t,e,n){for(var r=0,s=[t,e,n];r<s.length;r++){var a=s[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function WA(t,e,n,r,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function w8(t,e){var n=new Cm(t),r=n.getDocumentOptions(),s=n.getGlobalOptions();mee(s,r,e);var a=WA({},s,r,e),i;typeof window<"u"&&(i=window);var o=pee(s,r,e),l=gee(s,r,e),u=xee(n,a),d=yee(n,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function pee(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],m=n[l];r.columnStyles=WA({},u,d,m)}else{var p=[t,e,n],x=p.map(function(C){return C[l]||{}});r[l]=WA({},x[0],x[1],x[2])}},a=0,i=Object.keys(r);a<i.length;a++){var o=i[a];s(o)}return r}function gee(t,e,n){for(var r=[t,e,n],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=r;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function xee(t,e){var n,r,s,a,i,o,l,u,d,m,p,x,C=J2(e.margin,40/t.scaleFactor()),y=(n=vee(t,e.startY))!==null&&n!==void 0?n:C.top,T;e.showFoot===!0?T="everyPage":e.showFoot===!1?T="never":T=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var I;e.showHead===!0?I="everyPage":e.showHead===!1?I="never":I=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var F=(a=e.useCss)!==null&&a!==void 0?a:!1,M=e.theme||(F?"plain":"striped"),O=!!e.horizontalPageBreak,Q=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:F,theme:M,startY:y,margin:C,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:I,showFoot:T,tableLineWidth:(m=e.tableLineWidth)!==null&&m!==void 0?m:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:O,horizontalPageBreakRepeat:Q,horizontalPageBreakBehaviour:(x=e.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function vee(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),s=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var i=n.startPageNumber+n.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function yee(t,e,n){var r=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(n){var o=y8(t,e.html,n,i,e.useCss)||{};r=o.head||r,s=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||wee(r,s,a);return{columns:l,head:r,body:s,foot:a}}function wee(t,e,n){var r=t[0]||e[0]||n[0]||[],s=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(r)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var xS=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),bee=function(t){h8(e,t);function e(n,r,s,a,i,o){var l=t.call(this,n,r,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(xS),_ee=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,s,a,i){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new bee(e,this,r,s,a,i),m=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],m)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var a=s[r];a(new xS(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var a=s[r];a(new xS(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),b8=function(){function t(e,n,r,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof m8&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,s){var a;return Math.max(r,((a=n.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var s=n.cells[r.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(s,a){var i=r.cells[a.index];if(!i)return 0;var o=n.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t}(),_8=function(){function t(e,n,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*n,a=r*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=J2(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),Cee=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,s=e.allRows();r<s.length;r++){var a=s[r],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(n=Math.max(n,i.styles.cellWidth))}return n},t}();function Eee(t,e){See(t,e);var n=[],r=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var s=e.getWidth(t.pageSize().width)-r;s&&(s=vS(n,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=vS(n,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Nee(e),Bee(e,t),Tee(e)}function See(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,s=x8(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var m=u.padding("horizontal");u.contentWidth=Bw(u.text,u.styles,t)+m;var p=Bw(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var x=10/n;u.minWidth=u.styles.minCellWidth||x,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},m=d.cellWidth||d.minCellWidth;m&&typeof m=="number"&&(l.minWidth=m,l.wrappedWidth=m)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function vS(t,e,n){for(var r=e,s=t.reduce(function(x,C){return x+C.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=r*o,u=i.width+l,d=n(i),m=u<d?d:u;e-=m-i.width,i.width=m}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(x){return e<0?x.width>n(x):!0});p.length&&(e=vS(p,e,n))}return e}function Tee(t){for(var e={},n=1,r=t.allRows(),s=0;s<r.length;s++)for(var a=r[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var m=r.length-s,p=d.rowSpan>m?m:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function Nee(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(s){var u=s;delete r.cells[l.index],s=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function Bee(t,e){for(var n={count:0,height:0},r=0,s=t.allRows();r<s.length;r++){for(var a=s[r],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=iF(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=iF(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var m=u.styles.overflow(u.text,d);typeof m=="string"?u.text=[m]:u.text=m}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<p*u.rowSpan?n={height:p,count:u.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function iF(t,e,n,r,s){return t.map(function(a){return kee(a,e,n,r,s)})}function kee(t,e,n,r,s){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Bw(t,n,r))return t;for(;e<Bw(t+s,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function C8(t,e){var n=new Cm(t),r=Iee(e,n.scaleFactor()),s=new _ee(e,r);return Eee(n,s),n.applyStyles(n.userStyles),s}function Iee(t,e){var n=t.content,r=Dee(n.columns);if(n.head.length===0){var s=oF(r,"head");s&&n.head.push(s)}if(n.foot.length===0){var s=oF(r,"foot");s&&n.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:r,head:SC("head",n.head,r,i,a,e),body:SC("body",n.body,r,i,a,e),foot:SC("foot",n.foot,r,i,a,e)}}function SC(t,e,n,r,s,a){var i={},o=e.map(function(l,u){for(var d=0,m={},p=0,x=0,C=0,y=n;C<y.length;C++){var T=y[C];if(i[T.index]==null||i[T.index].left===0)if(x===0){var I=void 0;Array.isArray(l)?I=l[T.index-p-d]:I=l[T.dataKey];var F={};typeof I=="object"&&!Array.isArray(I)&&(F=(I==null?void 0:I.styles)||{});var M=Lee(t,T,u,s,r,a,F),O=new _8(I,M,t);m[T.dataKey]=O,m[T.index]=O,x=O.colSpan-1,i[T.index]={left:O.rowSpan-1,times:x}}else x--,p++;else i[T.index].left--,x=i[T.index].times,d++}return new b8(l,u,t,m)});return o}function oF(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var s=Fee(e,r.raw);s!=null&&(n[r.dataKey]=s)}}),Object.keys(n).length>0?n:null}function Fee(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Dee(t){return t.map(function(e,n){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:n:s=n,new Cee(s,e,n)})}function Lee(t,e,n,r,s,a,i){var o=cee(r),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=WA({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},m=t==="body"?d:{},p=t==="body"&&n%2===0?WA({},o.alternateRow,s.alternateRowStyles):{},x=lee(a),C=WA({},x,u,p,m);return WA(C,i)}function Ree(t,e,n){var r;n===void 0&&(n={});var s=x8(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var x=e.columns.find(function(C){return C.dataKey===p||C.index===p});x&&!a.has(x.index)&&(a.set(x.index,!0),i.push(x.index),o.push(e.columns[x.index]),s-=x.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var m=e.columns[d].wrappedWidth;if(u||s>=m)u=!1,i.push(d),o.push(e.columns[d]),s-=m;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Pee(t,e){for(var n=[],r=0;r<e.columns.length;r++){var s=Ree(t,e,{start:r});s.columns.length&&(n.push(s),r=s.lastIndex)}return n}function E8(t,e){var n=e.settings,r=n.startY,s=n.margin,a={x:s.left,y:r},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+s.bottom+i;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,x){return p+x.height},0);o+=u}var d=new Cm(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(T8(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var m=WA({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?Mee(d,e,m,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return ld(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,x){var C=x===e.body.length-1;kw(d,e,p,C,m,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return ld(d,e,p,a,e.columns)})),p8(d,e,m,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Mee(t,e,n,r){var s=Pee(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Kg(t,e,n,r,u.columns,!0):lF(t,e,r,u.columns),Uee(t,e,n,r,u.columns),TC(t,e,r,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?Kg(t,e,n,r,d,!0):lF(t,e,r,d),u=cF(t,e,i+1,r,d),TC(t,e,r,d)}var m=u-i;s.slice(1).forEach(function(p){t.applyStyles(t.userStyles),Kg(t,e,n,r,p.columns,!0),cF(t,e,i+1,r,p.columns,m),TC(t,e,r,p.columns)}),i=u};i<e.body.length-1;)l()}function lF(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return ld(t,e,a,n,r)})}function Uee(t,e,n,r,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;kw(t,e,a,o,n,r,s)})}function cF(t,e,n,r,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,i).forEach(function(l,u){var d=n+u===e.body.length-1,m=S8(t,e,d,r);l.canEntireRowFit(m,s)&&(ld(t,e,l,r,s),o=n+u)}),o}function TC(t,e,n,r){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return ld(t,e,a,n,r)})}function Oee(t,e,n){var r=n.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/r);return Math.max(0,a)}function jee(t,e,n,r){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=n.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new _8(u.raw,u.styles,u.section);d=WA(d,u),d.text=[];var m=Oee(u,e,r);u.text.length>m&&(d.text=u.text.splice(m,u.text.length));var p=r.scaleFactor(),x=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,x),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,x),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var C=new b8(t.raw,-1,t.section,s,!0);C.height=a;for(var y=0,T=n.columns;y<T.length;y++){var l=T[y],d=C.cells[l.index];d&&(d.height=C.height);var u=t.cells[l.index];u&&(u.height=t.height)}return C}function Qee(t,e,n,r){var s=t.pageSize().height,a=r.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),m=e.getMaxCellHeight(r.columns)>o;return m?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function kw(t,e,n,r,s,a,i){var o=S8(t,e,r,a);if(n.canEntireRowFit(o,i))ld(t,e,n,a,i);else if(Qee(t,n,o,e)){var l=jee(n,o,e,t);ld(t,e,n,a,i),Kg(t,e,s,a,i),kw(t,e,l,r,s,a,i)}else Kg(t,e,s,a,i),kw(t,e,n,r,s,a,i)}function ld(t,e,n,r,s){r.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}Hee(t,l,r);var d=l.getTextPos();f8(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function Hee(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=g8(r.lineWidth,r.fillColor);s&&t.rect(e.x,n.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),Vee(t,e,n,r.lineWidth))}function Vee(t,e,n,r){var s,a,i,o;r.top&&(s=n.x,a=n.y,i=n.x+e.width,o=n.y,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.top,s,a,i,o)),r.bottom&&(s=n.x,a=n.y+e.height,i=n.x+e.width,o=n.y+e.height,r.right&&(i+=.5*r.right),r.left&&(s-=.5*r.left),l(r.bottom,s,a,i,o)),r.left&&(s=n.x,a=n.y,i=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,s,a,i,o)),r.right&&(s=n.x+e.width,a=n.y,i=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,s,a,i,o));function l(u,d,m,p,x){t.getDocument().setLineWidth(u),t.getDocument().line(d,m,p,x,"S")}}function S8(t,e,n,r){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-s}function Kg(t,e,n,r,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return ld(t,e,o,r,s)}),e.callEndPageHooks(t,r);var i=e.settings.margin;p8(t,e,n,r),T8(t),e.pageNumber++,r.x=i.left,r.y=i.top,n.y=i.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return ld(t,e,o,r,s)}),t.applyStyles(t.userStyles))}function T8(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function zee(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],s=w8(this,r),a=C8(this,s);return E8(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,s){f8(e,n,r,s,this)},t.API.autoTableSetDefaults=function(e){return Cm.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Cm.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Cm(this),a=y8(s,e,window,n,!1),i=a.head,o=a.body,l=((r=i[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var NC;function _c(t,e){var n=w8(t,e),r=C8(t,n);E8(t,r)}try{if(typeof window<"u"&&window){var uF=window,AF=uF.jsPDF||((NC=uF.jspdf)===null||NC===void 0?void 0:NC.jsPDF);AF&&zee(AF)}}catch(t){console.error("Could not apply autoTable plugin",t)}const H5="evaluaciones_pruebas",V5="evaluaciones_rubricas_estaticas",z5="evaluaciones_rubricas_interactivas",Gee="usuarios",Z2=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion}},qee=t=>{const e=mn(zt(Ut,H5),Dr("fechaCreacion","desc"));return Un(e,r=>{t(r.docs.map(s=>Z2(s)))},r=>{console.error("Error al suscribirse a las pruebas:",r),t([])})},Kee=async t=>{try{const{id:e,...n}=t,r=Mn(Ut,H5,e);await wo(r,{...n,fechaCreacion:Tn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},$ee=async t=>{try{await Yi(Mn(Ut,H5,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},Wee=t=>{const e=mn(zt(Ut,V5),Dr("fechaCreacion","desc"));return Un(e,r=>{t(r.docs.map(s=>Z2(s)))},r=>{console.error("Error al suscribirse a las rúbricas estáticas:",r),t([])})},Yee=async t=>{try{const{id:e,...n}=t,r=Mn(Ut,V5,e);await wo(r,{...n,fechaCreacion:Tn.fromDate(new Date(n.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Xee=async t=>{try{await Yi(Mn(Ut,V5,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Jee=t=>{const e=mn(zt(Ut,z5));return Un(e,r=>{t(r.docs.map(s=>Z2(s)))},r=>{console.error("Error al suscribirse a las rúbricas interactivas:",r),t([])})},Zee=async t=>{try{const{id:e,...n}=t,r=Mn(Ut,z5,e);await wo(r,n)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},ete=async t=>{try{return(await na(zt(Ut,z5),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},tte=t=>{const e=mn(zt(Ut,Gee));return Un(e,r=>{t(r.docs.map(s=>Z2(s)))},r=>{console.error("Error al suscribirse a los usuarios:",r),t([])})},nte=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],dF={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},Ky=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},rte=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),ste=({item:t,index:e,showAnswers:n})=>{const r=se.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=n&&a===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),n&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:r.map((s,a)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),n&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>c.jsxs("li",{children:[c.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=n&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},ate=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(null),[s,a]=se.useState(!1),[i,o]=se.useState(!1),[l,u]=se.useState(null),[d,m]=se.useState(!1),p={nombre:"",asignatura:Cc[0],nivel:Cw[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[x,C]=se.useState(p);se.useEffect(()=>{const E=qee(e);return()=>E()},[]);const y=E=>{const{name:S,value:k}=E.target;C(z=>({...z,[S]:k}))},T=E=>{C(S=>{const k={...S.tiposActividad};return k[E]?delete k[E]:k[E]=dF[E][0],{...S,tiposActividad:k}})},I=(E,S)=>{C(k=>({...k,tiposActividad:{...k.tiposActividad,[E]:S}}))},F=E=>{C(S=>{const k=S.selectedNee.includes(E)?S.selectedNee.filter(z=>z!==E):[...S.selectedNee,E];return{...S,selectedNee:k}})},M=async E=>{if(E.preventDefault(),!x.nombre.trim()||!x.contenido.trim()||Object.keys(x.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),u(null);const S=Object.entries(x.tiposActividad).map(([P,R])=>`- ${R} ítem(s) de tipo '${P}'`).join(`
`),k=x.isNee&&x.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${x.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",z=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${x.nombre}
            - Asignatura: ${x.asignatura}
            - Nivel: ${x.nivel}
            - Contenido a evaluar: "${x.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${S}
            - Nivel de Dificultad General: ${x.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${k}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{od("Evaluación - Pruebas");const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",oe=(await(await new xi(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(oe);let ne=0;K.actividades.forEach(ce=>{ce.items.forEach(V=>{ne+=V.puntaje||0,V.tipo==="Comprensión de lectura"&&V.preguntas&&V.preguntas.forEach(J=>{ne+=J.puntaje||0})})});const X={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:x.nombre,asignatura:x.asignatura,nivel:x.nivel,contenidoOriginal:x.contenido,tiposActividadOriginal:x.tiposActividad,objetivo:K.objetivo,instruccionesGenerales:K.instruccionesGenerales,puntajeIdeal:ne,actividades:K.actividades,dificultad:x.dificultad,...x.isNee&&{adaptacionNEE:x.selectedNee}};r(X),m(!1)}catch(P){console.error(P),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},O=async()=>{if(n)try{await Kee(n),alert("Prueba guardada con éxito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},Q=async E=>{if(window.confirm("¿Eliminar esta prueba?"))try{await $ee(E),(n==null?void 0:n.id)===E&&r(null)}catch(S){console.error(S),alert("No se pudo eliminar la prueba.")}},j=async E=>{o(!0);const S=new En("p","mm","a4"),k=20,z=S.internal.pageSize.getHeight(),P=S.internal.pageSize.getWidth(),R=P-k*2;let G=k;const q=oe=>{oe.setFillColor(230,230,230),oe.rect(0,0,P,25,"F"),oe.setFontSize(9),oe.setTextColor(0,0,0),oe.text("LICEO INDUSTRIAL DE RECOLETA",k,15,{align:"left"}),oe.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",P-k,15,{align:"right"})};q(S),G=30,S.setTextColor(0,0,0),S.setFont("helvetica","bold"),S.setFontSize(16),S.text(E.nombre,P/2,G,{align:"center"}),G+=10,_c(S,{startY:G,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:oe=>{q(S)}}),G=S.lastAutoTable.finalY+10;const le=oe=>{G+oe>z-k&&(S.addPage(),q(S),G=k+15,S.setTextColor(0,0,0))},ee=(oe,K)=>{S.setFont("helvetica",K.isBold?"bold":"normal"),S.setFontSize(K.fontSize);const ne=Array.isArray(oe)?oe.join(`
`):oe;return S.getTextDimensions(ne,{maxWidth:K.width}).h};for(const oe of E.actividades){let K=ee(oe.titulo,{fontSize:12,width:R,isBold:!0})+ee(oe.instrucciones,{fontSize:10,width:R})+12;le(K),S.setFont("helvetica","bold"),S.setFontSize(12),S.setTextColor(0,0,0),S.text(oe.titulo,k,G),G+=8,S.setFont("helvetica","normal"),S.setFontSize(10);const ne=S.splitTextToSize(oe.instrucciones,R);S.text(ne,k,G),G+=ne.length*(10*.35*1.15)+4;for(const[X,ce]of oe.items.entries()){let V=0;const J=`${X+1}. ${ce.pregunta} (${ce.puntaje} pts)`;switch(V+=ee(J,{fontSize:10,width:R,isBold:!0}),ce.tipo){case"Selección múltiple":ce.opciones.forEach(fe=>{V+=ee(fe,{fontSize:10,width:R-5})+3}),V+=7;break;case"Verdadero o Falso":V+=10;break;case"Desarrollo":V+=30;break;case"Términos pareados":V+=ce.pares.length*12+20;break;case"Comprensión de lectura":const ie=ce;V+=ee(ie.texto,{fontSize:10,width:R-10})+10,ie.preguntas.forEach(fe=>{const Se=`${fe.pregunta} (${fe.puntaje} pts)`;V+=ee(Se,{fontSize:10,width:R-5,isBold:!0}),fe.tipo==="Selección múltiple"?(fe.opciones.forEach(ve=>{V+=ee(ve,{fontSize:10,width:R-10})+3}),V+=7):fe.tipo==="Desarrollo"&&(V+=30),V+=5}),V+=15;break}le(V),S.setFont("helvetica","bold"),S.setFontSize(10),S.setTextColor(0,0,0);const re=S.splitTextToSize(J,R);if(S.text(re,k,G),G+=re.length*5+4,S.setFont("helvetica","normal"),ce.tipo==="Selección múltiple")ce.opciones.forEach((ie,fe)=>{S.text(`${String.fromCharCode(65+fe)}) ${ie}`,k+5,G),G+=7});else if(ce.tipo==="Verdadero o Falso")S.text("V ______    F ______",k+5,G),G+=10;else if(ce.tipo==="Desarrollo")S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(k,G,R,25,"FD"),G+=30;else if(ce.tipo==="Términos pareados"){const ie=[...ce.pares.map(Se=>Se.definicion)].sort(()=>Math.random()-.5),fe=ce.pares.map((Se,ve)=>[`${ve+1}. ${Se.concepto}`,`(   ) ${ie[ve]}`]);_c(S,{startY:G,head:[["Columna A: Concepto","Columna B: Definición"]],body:fe,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Se=>q(S)}),G=S.lastAutoTable.finalY+10}else if(ce.tipo==="Comprensión de lectura"){const ie=ce;S.setFillColor(240,240,240),S.setDrawColor(200,200,200);const fe=S.splitTextToSize(ie.texto,R-10),Se=fe.length*(10*.35*1.15)+8;S.rect(k,G,R,Se,"FD"),G+=4,S.setFont("helvetica","normal"),S.setFontSize(10),S.setTextColor(0,0,0),S.text(fe,k+5,G),G+=Se;for(const[ve,ye]of ie.preguntas.entries()){const we=`${ve+1}. ${ye.pregunta} (${ye.puntaje} pts)`;S.setFont("helvetica","bold");const me=S.splitTextToSize(we,R-5);S.text(me,k+5,G),G+=me.length*5+4,S.setFont("helvetica","normal"),ye.tipo==="Selección múltiple"?ye.opciones.forEach((he,Ve)=>{S.text(`${String.fromCharCode(65+Ve)}) ${he}`,k+10,G),G+=7}):ye.tipo==="Desarrollo"&&(S.setDrawColor(200,200,200),S.setFillColor(245,245,245),S.rect(k+5,G,R-5,25,"FD"),G+=30)}}G+=5}}S.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>r(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>m(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(rte,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:O,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>j(n),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(FU,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:n.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",n.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",n.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",n.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",n.dificultad||"Intermedio"]}),n.adaptacionNEE&&n.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",n.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",n.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",n.instruccionesGenerales]})]}),n.actividades.map(E=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),c.jsx("div",{className:"space-y-6",children:E.items.map((S,k)=>c.jsx(ste,{item:S,index:k,showAnswers:d},S.id))})]},E.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:x.nombre,onChange:y,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:x.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Cc.map(E=>c.jsx("option",{children:E},E))}),c.jsx("select",{name:"nivel",value:x.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Cw.map(E=>c.jsx("option",{children:E},E))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((E,S)=>c.jsx("button",{type:"button",onClick:()=>C(k=>({...k,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${S===0?"rounded-l-lg":""} ${S===2?"rounded-r-lg":""}
                                            ${x.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.isNee,onChange:E=>C(S=>({...S,isNee:E.target.checked,selectedNee:E.target.checked?S.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),x.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:Ew.map(E=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:x.selectedNee.includes(E),onChange:()=>F(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),c.jsx("textarea",{name:"contenido",value:x.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:nte.map(E=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!x.tiposActividad[E],onChange:()=>T(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),x.tiposActividad[E]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),dF[E].map(S=>c.jsx("button",{type:"button",onClick:()=>I(E,S),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${x.tiposActividad[E]===S?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:S},S))]})]},E))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(E=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>r(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>Q(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},ite=({rubricas:t,onSave:e,onDelete:n,onCreate:r})=>{const[s,a]=se.useState(null),[i,o]=se.useState("list"),[l,u]=se.useState(!1),[d,m]=se.useState(""),p=async(Q,j)=>{if(!Q.trim()||!j.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const E=`Crea una rúbrica de evaluación detallada sobre "${Q}" con el propósito de "${j}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{od("Evaluación - Rúbricas");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new xi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),le=JSON.parse(q),ee={id:crypto.randomUUID(),titulo:Q,descripcion:j,fechaCreacion:new Date().toISOString(),dimensiones:le.map(oe=>({id:crypto.randomUUID(),nombre:oe.dimension,niveles:{insuficiente:oe.insuficiente,suficiente:oe.suficiente,competente:oe.competente,avanzado:oe.avanzado}}))};a(ee)}catch(k){console.error(k),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},x=async()=>{if(!d.trim()||!s)return;const Q=crypto.randomUUID(),j={id:Q,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(k=>k?{...k,dimensiones:[...k.dimensiones,j]}:null),m("");const E=`Para una rúbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(k=>k.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,S={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{od("Evaluación - Rúbricas (Añadir Dimensión)");const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=(await(await new xi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:S}})).response).text(),le=JSON.parse(q);a(ee=>ee?{...ee,dimensiones:ee.dimensiones.map(oe=>oe.id===Q?{...oe,niveles:le,isLoading:!1}:oe)}:null)}catch(k){console.error("Error generating dimension descriptors:",k),alert("No se pudieron generar los descriptores."),a(z=>z?{...z,dimensiones:z.dimensiones.filter(P=>P.id!==Q)}:null)}},C=()=>{if(!s)return;t.some(j=>j.id===s.id)?e(s):r(s),o("list"),a(null)},y=Q=>{a(Q),o("form")},T=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},I=(Q,j,E)=>{s&&a(S=>S?{...S,dimensiones:S.dimensiones.map(k=>k.id!==Q?k:j==="nombre"?{...k,nombre:E}:{...k,niveles:{...k.niveles,[j]:E}})}:null)},F=(Q,j)=>{a(E=>E?{...E,[Q]:j}:null)},M=Q=>{s&&a(j=>j?{...j,dimensiones:j.dimensiones.filter(E=>E.id!==Q)}:null)},O=()=>{if(!s)return null;const Q="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",j=`${Q} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:s.titulo,onChange:E=>F("titulo",E.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${Q} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:s.descripcion,onChange:E=>F("descripcion",E.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${Q} mt-1`})]})]}),s.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>p(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),s.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:E.nombre,onChange:S=>I(E.id,"nombre",S.target.value),rows:4,className:j})}),Object.keys(E.niveles).map(S=>c.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:E.niveles[S],onChange:k=>I(E.id,S,k.target.value),rows:4,className:j})},S)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>M(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},E.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:E=>m(E.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${Q} mt-1`})]}),c.jsx("button",{onClick:x,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:C,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(Q=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:Q.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:Q.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>y(Q),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>n(Q.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},Q.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):O()},ote=({allUsers:t,rubricasEstaticas:e})=>{const[n,r]=se.useState([]),[s,a]=se.useState(null),[i,o]=se.useState(null),[l,u]=se.useState({rubricaEstaticaId:"",curso:""}),[d,m]=se.useState(null);se.useEffect(()=>{const F=Jee(r);return()=>F()},[]);const p=async F=>{F.preventDefault();const M=e.find(Q=>Q.id===l.rubricaEstaticaId);if(!M||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const O={nombre:M.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:M.id,resultados:{}};try{await ete(O),u({rubricaEstaticaId:"",curso:""})}catch(Q){console.error(Q),alert("No se pudo crear la evaluación con rúbrica.")}},x=F=>{a(F),o(JSON.parse(JSON.stringify(F)))},C=(F,M,O)=>{i&&o(Q=>{if(!Q)return null;const j=JSON.parse(JSON.stringify(Q));return j.resultados[F]||(j.resultados[F]={puntajes:{},feedback:""}),j.resultados[F].puntajes[M]=O,j})},y=async()=>{if(i)try{await Zee(i),a(i),alert("Cambios guardados.")}catch(F){console.error(F),alert("No se pudieron guardar los cambios.")}},T=se.useCallback(F=>{const M=i,O=e.find(z=>z.id===(M==null?void 0:M.rubricaEstaticaId));if(!M||!O)return{score:0,maxScore:0,grade:"N/A"};const Q=O.dimensiones.length*4,j=M.resultados[F];if(!j)return{score:0,maxScore:Q,grade:"1.0"};const E=Object.values(j.puntajes).reduce((z,P)=>z+P,0),S=1+6*(E/Q),k=Q>0?S.toFixed(1):"1.0";return{score:E,maxScore:Q,grade:k}},[i,e]),I=async F=>{if(!i)return;const M=e.find(E=>E.id===i.rubricaEstaticaId),O=i.resultados[F];if(!M||!O||Object.keys(O.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}m(F);const j=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${M.dimensiones.map(E=>`${E.nombre}: ${O.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${M.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{od("Evaluación - Rúbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=(await(await new xi(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(j)).response).text();o(G=>{if(!G)return null;const q=JSON.parse(JSON.stringify(G));return q.resultados[F].feedback=R.replace(/(\*\*|\*)/g,""),q})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{m(null)}};if(s&&i){const F=e.find(O=>O.id===s.rubricaEstaticaId),M=t.filter(O=>O.profile===tn.ESTUDIANTE&&Ky(O.curso||"")===s.curso).map(O=>O.nombreCompleto).sort();return F?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),c.jsx("p",{className:"text-slate-500",children:s.curso})]}),c.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),F.dimensiones.map(O=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:O.nombre},O.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:M.map(O=>{var S;const{score:Q,maxScore:j,grade:E}=T(O);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:O}),F.dimensiones.map(k=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(z=>{var P;return c.jsx("button",{onClick:()=>C(O,k.id,z),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((P=i.resultados[O])==null?void 0:P.puntajes[k.id])===z?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:z},z)})})},k.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[Q,"/",j]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((S=i.resultados[O])==null?void 0:S.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>I(O),disabled:d===O,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===O?"...":"Generar IA"})]})})]},O)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:F=>u({...l,rubricaEstaticaId:F.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(F=>c.jsx("option",{value:F.id,children:F.titulo},F.id))]}),c.jsxs("select",{value:l.curso,onChange:F=>u({...l,curso:F.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),Ja.map(F=>c.jsx("option",{value:F,children:F},F))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:n.map(F=>c.jsxs("button",{onClick:()=>x(F),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:F.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:F.curso})]},F.id))})]})]})},lte=({allUsers:t})=>{const[e,n]=se.useState(""),r=se.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===tn.ESTUDIANTE&&a.curso).map(a=>Ky(a.curso)))).sort(),[t]),s=se.useMemo(()=>{const a=t.filter(i=>i.profile===tn.ESTUDIANTE);return e?a.filter(i=>Ky(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:a=>n(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),r.map(a=>c.jsx("option",{value:a,children:a},a))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Ky(a.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},cte=()=>{const[t,e]=se.useState("pruebas"),[n,r]=se.useState([]),[s,a]=se.useState([]),[i,o]=se.useState(!0);se.useEffect(()=>{o(!0);const m=tte(r),p=Wee(x=>{a(x),o(!1)});return()=>{m(),p()}},[]);const l=async m=>{try{await Yee(m)}catch(p){console.error(p),alert("No se pudo guardar la rúbrica.")}},u=async m=>{try{await Xee(m)}catch(p){console.error(p),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:m,label:p})=>c.jsx("button",{onClick:()=>e(m),className:`${t===m?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:p});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(ate,{}),t==="rubricas"&&c.jsx(ite,{rubricas:s,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(ote,{allUsers:n,rubricasEstaticas:s}),t==="nominas"&&c.jsx(lte,{allUsers:n})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Iw={};Iw.version="0.18.5";var N8=1252,ute=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],G5={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},q5=function(t){ute.indexOf(t)!=-1&&(N8=G5[0]=t)};function Ate(){q5(1252)}var Bu=function(t){q5(t)};function K5(){Bu(1200),Ate()}function fF(t){for(var e=[],n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}function dte(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function B8(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var Cg=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?dte(t.slice(2)):e==254&&n==255?B8(t.slice(2)):e==65279?t.slice(1):t},O1=function(e){return String.fromCharCode(e)},hF=function(e){return String.fromCharCode(e)},bx,cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _x(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),a=n>>2,r=t.charCodeAt(u++),i=(n&3)<<4|r>>4,s=t.charCodeAt(u++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=cf.charAt(a)+cf.charAt(i)+cf.charAt(o)+cf.charAt(l);return e}function Ec(t){var e="",n=0,r=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=cf.indexOf(t.charAt(u++)),i=cf.indexOf(t.charAt(u++)),n=a<<2|i>>4,e+=String.fromCharCode(n),o=cf.indexOf(t.charAt(u++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=cf.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Br=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),md=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Mf(t){return Br?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function mF(t){return Br?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var vc=function(e){return Br?md(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function eb(t){if(typeof ArrayBuffer>"u")return vc(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function Gf(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function fte(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function $5(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return $5(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var $i=Br?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:md(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),s=0;for(e=0,n=0;e<t.length;n+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function hte(t){for(var e=[],n=0,r=t.length+250,s=Mf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(i&3)<<4,s[n++]=128|o&63}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|i&63;n>r&&(e.push(s.slice(0,n)),n=0,s=Mf(65535),r=65530)}return e.push(s.slice(0,n)),$i(e)}var yl=/\u0000/g,Eg=/[\u0001-\u0006]/g;function Em(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function ku(t,e){var n=""+t;return n.length>=e?n:Da("0",e-n.length)+n}function W5(t,e){var n=""+t;return n.length>=e?n:Da(" ",e-n.length)+n}function Fw(t,e){var n=""+t;return n.length>=e?n:n+Da(" ",e-n.length)}function mte(t,e){var n=""+Math.round(t);return n.length>=e?n:Da("0",e-n.length)+n}function pte(t,e){var n=""+t;return n.length>=e?n:Da("0",e-n.length)+n}var pF=Math.pow(2,32);function U0(t,e){if(t>pF||t<-pF)return mte(t,e);var n=Math.round(t);return pte(n,e)}function Dw(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var gF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],BC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gte(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var Vn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},xF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xte={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Lw(t,e,n){for(var r=t<0?-1:1,s=t*r,a=0,i=1,o=0,l=1,u=0,d=0,m=Math.floor(s);u<e&&(m=Math.floor(s),o=m*i+a,d=m*u+l,!(s-m<5e-8));)s=1/(s-m),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!n)return[0,r*o,d];var p=Math.floor(r*o/d);return[p,r*o-p*d,d]}function bh(t,e,n){if(t>2958465||t<0)return null;var r=t|0,s=Math.floor(86400*(t-r)),a=0,i=[],o={D:r,T:s,u:86400*(t-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=Cte(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var k8=new Date(1899,11,31,0,0,0),vte=k8.getTime(),yte=new Date(1900,2,1,0,0,0);function I8(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=yte&&(n+=1440*60*1e3),(n-(vte+(t.getTimezoneOffset()-k8.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Y5(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function wte(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function bte(t){var e=t<0?12:11,n=Y5(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function _te(t){var e=Y5(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Cx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=bte(t):e===10?n=t.toFixed(10).substr(0,12):n=_te(t),Y5(wte(n.toUpperCase()))}function Hh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Cx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return iu(14,I8(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Cte(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Ete(t,e,n,r){var s="",a=0,i=0,o=n.y,l,u=0;switch(t){case 98:o=n.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,u=e.length;break;case 3:return BC[n.m-1][1];case 5:return BC[n.m-1][0];default:return BC[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,u=e.length;break;case 3:return gF[n.q][0];default:return gF[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?ku(n.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(n.S+n.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=ku(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?ku(l,u):"";return d}function uf(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var F8=/%/g;function Ste(t,e,n){var r=e.replace(F8,""),s=e.length-r.length;return ZA(t,r,n*Math.pow(10,2*s))+Da("%",s)}function Tte(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ZA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function D8(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+D8(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),n.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var L8=/# (\?+)( ?)\/( ?)(\d+)/;function Nte(t,e,n){var r=parseInt(t[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(a===0?"":""+a)+" "+(i===0?Da(" ",t[1].length+1+t[4].length):W5(i,t[1].length)+t[2]+"/"+t[3]+ku(o,t[4].length))}function Bte(t,e,n){return n+(e===0?"":""+e)+Da(" ",t[1].length+2+t[4].length)}var R8=/^#*0*\.([0#]+)/,P8=/\).*[0#]/,M8=/\(###\) ###\\?-####/;function pl(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function vF(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function yF(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function kte(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Ite(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function zc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(P8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?zc("n",r,n):"("+zc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Tte(t,e,n);if(e.indexOf("%")!==-1)return Ste(t,e,n);if(e.indexOf("E")!==-1)return D8(e,n);if(e.charCodeAt(0)===36)return"$"+zc(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+U0(l,e.length);if(e.match(/^[#?]+$/))return s=U0(n,0),s==="0"&&(s=""),s.length>e.length?s:pl(e.substr(0,e.length-s.length))+s;if(a=e.match(L8))return Nte(a,l,u);if(e.match(/^#+0+$/))return u+U0(l,e.length-e.indexOf("0"));if(a=e.match(R8))return s=vF(n,a[1].length).replace(/^([^\.]+)$/,"$1."+pl(a[1])).replace(/\.$/,"."+pl(a[1])).replace(/\.(\d*)$/,function(C,y){return"."+y+Da("0",pl(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+vF(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+uf(U0(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+zc(t,e,-n):uf(""+(Math.floor(n)+kte(n,a[1].length)))+"."+ku(yF(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return zc(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Em(zc(t,e.replace(/[\\-]/g,""),n)),i=0,Em(Em(e.replace(/\\/g,"")).replace(/[0#]/g,function(C){return i<s.length?s.charAt(i++):C==="0"?"0":""}));if(e.match(M8))return s=zc(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Lw(l,Math.pow(10,i)-1,!1),s=""+u,d=ZA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Fw(o[2],i),d.length<a[4].length&&(d=pl(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Lw(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?W5(o[1],i)+a[2]+"/"+a[3]+Fw(o[2],i):Da(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=U0(n,0),e.length<=s.length?s:pl(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var m=e.indexOf(".")-i,p=e.length-s.length-m;return pl(e.substr(0,m)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=yF(n,a[1].length),n<0?"-"+zc(t,e,-n):uf(Ite(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(C){return"00,"+(C.length<3?ku(0,3-C.length):"")+C})+"."+ku(i,a[1].length);switch(e){case"###,##0.00":return zc(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var x=uf(U0(l,0));return x!=="0"?u+x:"";case"###,###.00":return zc(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return zc(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Fte(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ZA(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Dte(t,e,n){var r=e.replace(F8,""),s=e.length-r.length;return ZA(t,r,n*Math.pow(10,2*s))+Da("%",s)}function U8(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+U8(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),n=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!n.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function iA(t,e,n){if(t.charCodeAt(0)===40&&!e.match(P8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?iA("n",r,n):"("+iA("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Fte(t,e,n);if(e.indexOf("%")!==-1)return Dte(t,e,n);if(e.indexOf("E")!==-1)return U8(e,n);if(e.charCodeAt(0)===36)return"$"+iA(t,e.substr(e.charAt(1)==" "?2:1),n);var s,a,i,o,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+ku(l,e.length);if(e.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>e.length?s:pl(e.substr(0,e.length-s.length))+s;if(a=e.match(L8))return Bte(a,l,u);if(e.match(/^#+0+$/))return u+ku(l,e.length-e.indexOf("0"));if(a=e.match(R8))return s=(""+n).replace(/^([^\.]+)$/,"$1."+pl(a[1])).replace(/\.$/,"."+pl(a[1])),s=s.replace(/\.(\d*)$/,function(C,y){return"."+y+Da("0",pl(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+uf(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+iA(t,e,-n):uf(""+n)+"."+Da("0",a[1].length);if(a=e.match(/^#,#*,#0/))return iA(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Em(iA(t,e.replace(/[\\-]/g,""),n)),i=0,Em(Em(e.replace(/\\/g,"")).replace(/[0#]/g,function(C){return i<s.length?s.charAt(i++):C==="0"?"0":""}));if(e.match(M8))return s=iA(t,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Lw(l,Math.pow(10,i)-1,!1),s=""+u,d=ZA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Fw(o[2],i),d.length<a[4].length&&(d=pl(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Lw(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?W5(o[1],i)+a[2]+"/"+a[3]+Fw(o[2],i):Da(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+n,e.length<=s.length?s:pl(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var m=e.indexOf(".")-i,p=e.length-s.length-m;return pl(e.substr(0,m)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+iA(t,e,-n):uf(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(C){return"00,"+(C.length<3?ku(0,3-C.length):"")+C})+"."+ku(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var x=uf(""+l);return x!=="0"?u+x:"";default:if(e.match(/\.[0#?]*$/))return iA(t,e.slice(0,e.lastIndexOf(".")),n)+pl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ZA(t,e,n){return(n|0)===n?iA(t,e,n):zc(t,e,n)}function Lte(t){for(var e=[],n=!1,r=0,s=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(s,r-s),s=r+1}if(e[e.length]=t.substr(s),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var O8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function cp(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":Dw(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(O8))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Rte(t,e,n,r){for(var s=[],a="",i=0,o="",l="t",u,d,m,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Dw(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(m=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(m);s[s.length]={t:"t",v:a},++i;break;case"\\":var x=t.charAt(++i),C=x==="("||x===")"?x:"t";s[s.length]={t:C,v:x},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=bh(e,n,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=bh(e,n),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=bh(e,n)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,p="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(O8)){if(u==null&&(u=bh(e,n),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",cp(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var T=0,I=0,F;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",T<1&&(T=1);break;case"s":(F=s[i].v.match(/\.0+$/))&&(I=Math.max(I,F[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&s[i].v.match(/[Hh]/)&&(T=1),T<2&&s[i].v.match(/[Mm]/)&&(T=2),T<3&&s[i].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var M="",O;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Ete(s[i].t.charCodeAt(0),s[i].v,u,I),s[i].t="t";break;case"n":case"?":for(O=i+1;s[O]!=null&&((o=s[O].t)==="?"||o==="D"||(o===" "||o==="t")&&s[O+1]!=null&&(s[O+1].t==="?"||s[O+1].t==="t"&&s[O+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[O].v==="/"||s[O].v===" "&&s[O+1]!=null&&s[O+1].t=="?"));)s[i].v+=s[O].v,s[O]={v:"",t:";"},++O;M+=s[i].v,i=O-1;break;case"G":s[i].t="t",s[i].v=Hh(e,n);break}var Q="",j,E;if(M.length>0){M.charCodeAt(0)==40?(j=e<0&&M.charCodeAt(0)===45?-e:e,E=ZA("n",M,j)):(j=e<0&&r>1?-e:e,E=ZA("n",M,j),j<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),O=E.length-1;var S=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){S=i;break}var k=s.length;if(S===s.length&&E.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(O>=s[i].v.length-1?(O-=s[i].v.length,s[i].v=E.substr(O+1,s[i].v.length)):O<0?s[i].v="":(s[i].v=E.substr(0,O+1),O=-1),s[i].t="t",k=i);O>=0&&k<s.length&&(s[k].v=E.substr(0,O+1)+s[k].v)}else if(S!==s.length&&E.indexOf("E")===-1){for(O=E.indexOf(".")-1,i=S;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===S?s[i].v.indexOf(".")-1:s[i].v.length-1,Q=s[i].v.substr(d+1);d>=0;--d)O>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(Q=E.charAt(O--)+Q);s[i].v=Q,s[i].t="t",k=i}for(O>=0&&k<s.length&&(s[k].v=E.substr(0,O+1)+s[k].v),O=E.indexOf(".")+1,i=S;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==S)){for(d=s[i].v.indexOf(".")>-1&&i===S?s[i].v.indexOf(".")+1:0,Q=s[i].v.substr(0,d);d<s[i].v.length;++d)O<E.length&&(Q+=E.charAt(O++));s[i].v=Q,s[i].t="t",k=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(j=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=ZA(s[i].t,s[i].v,j),s[i].t="t");var z="";for(i=0;i!==s.length;++i)s[i]!=null&&(z+=s[i].v);return z}var wF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function bF(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Pte(t,e){var n=Lte(t),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var i=n[0].match(wF),o=n[1].match(wF);return bF(e,i)?[r,n[0]]:bF(e,o)?[r,n[1]]:[r,n[i!=null&&o!=null?2:1]]}return[r,a]}function iu(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Vn)[t],r==null&&(r=n.table&&n.table[xF[t]]||Vn[xF[t]]),r==null&&(r=xte[t]||"General");break}if(Dw(r,0))return Hh(e,n);e instanceof Date&&(e=I8(e,n.date1904));var s=Pte(r,e);if(Dw(s[1]))return Hh(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Rte(s[1],e,n,s[0])}function ed(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Vn[n]==null){e<0&&(e=n);continue}if(Vn[n]==t){e=n;break}}e<0&&(e=391)}return Vn[e]=t,e}function tb(t){for(var e=0;e!=392;++e)t[e]!==void 0&&ed(t[e],e)}function up(){Vn=gte()}var Mte={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},j8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Ute(t){var e=typeof t=="number"?Vn[t]:t;return e=e.replace(j8,"(\\d+)"),new RegExp("^"+e+"$")}function Ote(t,e,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(j8)||[]).forEach(function(m,p){var x=parseInt(n[p+1],10);switch(m.toLowerCase().charAt(0)){case"y":r=x;break;case"d":a=x;break;case"h":i=x;break;case"s":l=x;break;case"m":i>=0?o=x:s=x;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:r==-1&&s==-1&&a==-1?d:u+"T"+d}var jte=function(){var t={};t.version="1.2.0";function e(){for(var E=0,S=new Array(256),k=0;k!=256;++k)E=k,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[k]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var n=e();function r(E){var S=0,k=0,z=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)P[z]=E[z];for(z=0;z!=256;++z)for(k=E[z],S=256+z;S<4096;S+=256)k=P[S]=k>>>8^E[k&255];var R=[];for(z=1;z!=16;++z)R[z-1]=typeof Int32Array<"u"?P.subarray(z*256,z*256+256):P.slice(z*256,z*256+256);return R}var s=r(n),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],m=s[6],p=s[7],x=s[8],C=s[9],y=s[10],T=s[11],I=s[12],F=s[13],M=s[14];function O(E,S){for(var k=S^-1,z=0,P=E.length;z<P;)k=k>>>8^n[(k^E.charCodeAt(z++))&255];return~k}function Q(E,S){for(var k=S^-1,z=E.length-15,P=0;P<z;)k=M[E[P++]^k&255]^F[E[P++]^k>>8&255]^I[E[P++]^k>>16&255]^T[E[P++]^k>>>24]^y[E[P++]]^C[E[P++]]^x[E[P++]]^p[E[P++]]^m[E[P++]]^d[E[P++]]^u[E[P++]]^l[E[P++]]^o[E[P++]]^i[E[P++]]^a[E[P++]]^n[E[P++]];for(z+=15;P<z;)k=k>>>8^n[(k^E[P++])&255];return~k}function j(E,S){for(var k=S^-1,z=0,P=E.length,R=0,G=0;z<P;)R=E.charCodeAt(z++),R<128?k=k>>>8^n[(k^R)&255]:R<2048?(k=k>>>8^n[(k^(192|R>>6&31))&255],k=k>>>8^n[(k^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,G=E.charCodeAt(z++)&1023,k=k>>>8^n[(k^(240|R>>8&7))&255],k=k>>>8^n[(k^(128|R>>2&63))&255],k=k>>>8^n[(k^(128|G>>6&15|(R&3)<<4))&255],k=k>>>8^n[(k^(128|G&63))&255]):(k=k>>>8^n[(k^(224|R>>12&15))&255],k=k>>>8^n[(k^(128|R>>6&63))&255],k=k>>>8^n[(k^(128|R&63))&255]);return~k}return t.table=n,t.bstr=O,t.buf=Q,t.str=j,t}(),Nn=function(){var e={};e.version="1.2.1";function n(be,Pe){for(var Fe=be.split("/"),De=Pe.split("/"),Le=0,Me=0,et=Math.min(Fe.length,De.length);Le<et;++Le){if(Me=Fe[Le].length-De[Le].length)return Me;if(Fe[Le]!=De[Le])return Fe[Le]<De[Le]?-1:1}return Fe.length-De.length}function r(be){if(be.charAt(be.length-1)=="/")return be.slice(0,-1).indexOf("/")===-1?be:r(be.slice(0,-1));var Pe=be.lastIndexOf("/");return Pe===-1?be:be.slice(0,Pe+1)}function s(be){if(be.charAt(be.length-1)=="/")return s(be.slice(0,-1));var Pe=be.lastIndexOf("/");return Pe===-1?be:be.slice(Pe+1)}function a(be,Pe){typeof Pe=="string"&&(Pe=new Date(Pe));var Fe=Pe.getHours();Fe=Fe<<6|Pe.getMinutes(),Fe=Fe<<5|Pe.getSeconds()>>>1,be.write_shift(2,Fe);var De=Pe.getFullYear()-1980;De=De<<4|Pe.getMonth()+1,De=De<<5|Pe.getDate(),be.write_shift(2,De)}function i(be){var Pe=be.read_shift(2)&65535,Fe=be.read_shift(2)&65535,De=new Date,Le=Fe&31;Fe>>>=5;var Me=Fe&15;Fe>>>=4,De.setMilliseconds(0),De.setFullYear(Fe+1980),De.setMonth(Me-1),De.setDate(Le);var et=Pe&31;Pe>>>=5;var dt=Pe&63;return Pe>>>=6,De.setHours(Pe),De.setMinutes(dt),De.setSeconds(et<<1),De}function o(be){po(be,0);for(var Pe={},Fe=0;be.l<=be.length-4;){var De=be.read_shift(2),Le=be.read_shift(2),Me=be.l+Le,et={};switch(De){case 21589:Fe=be.read_shift(1),Fe&1&&(et.mtime=be.read_shift(4)),Le>5&&(Fe&2&&(et.atime=be.read_shift(4)),Fe&4&&(et.ctime=be.read_shift(4))),et.mtime&&(et.mt=new Date(et.mtime*1e3));break}be.l=Me,Pe[De]=et}return Pe}var l;function u(){return l||(l={})}function d(be,Pe){if(be[0]==80&&be[1]==75)return wr(be,Pe);if((be[0]|32)==109&&(be[1]|32)==105)return oa(be,Pe);if(be.length<512)throw new Error("CFB file size "+be.length+" < 512");var Fe=3,De=512,Le=0,Me=0,et=0,dt=0,Je=0,at=[],ct=be.slice(0,512);po(ct,0);var Bt=m(ct);switch(Fe=Bt[0],Fe){case 3:De=512;break;case 4:De=4096;break;case 0:if(Bt[1]==0)return wr(be,Pe);default:throw new Error("Major Version: Expected 3 or 4 saw "+Fe)}De!==512&&(ct=be.slice(0,De),po(ct,28));var jt=be.slice(0,De);p(ct,Fe);var Jt=ct.read_shift(4,"i");if(Fe===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);ct.l+=4,et=ct.read_shift(4,"i"),ct.l+=4,ct.chk("00100000","Mini Stream Cutoff Size: "),dt=ct.read_shift(4,"i"),Le=ct.read_shift(4,"i"),Je=ct.read_shift(4,"i"),Me=ct.read_shift(4,"i");for(var Ot=-1,$t=0;$t<109&&(Ot=ct.read_shift(4,"i"),!(Ot<0));++$t)at[$t]=Ot;var Cn=x(be,De);T(Je,Me,Cn,De,at);var cr=F(Cn,et,at,De);cr[et].name="!Directory",Le>0&&dt!==G&&(cr[dt].name="!MiniFAT"),cr[at[0]].name="!FAT",cr.fat_addrs=at,cr.ssz=De;var ur={},dr=[],Rs=[],ba=[];M(et,cr,Cn,dr,Le,ur,Rs,dt),C(Rs,ba,dr),dr.shift();var Gs={FileIndex:Rs,FullPaths:ba};return Pe&&Pe.raw&&(Gs.raw={header:jt,sectors:Cn}),Gs}function m(be){if(be[be.l]==80&&be[be.l+1]==75)return[0,0];be.chk(q,"Header Signature: "),be.l+=16;var Pe=be.read_shift(2,"u");return[be.read_shift(2,"u"),Pe]}function p(be,Pe){var Fe=9;switch(be.l+=2,Fe=be.read_shift(2)){case 9:if(Pe!=3)throw new Error("Sector Shift: Expected 9 saw "+Fe);break;case 12:if(Pe!=4)throw new Error("Sector Shift: Expected 12 saw "+Fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Fe)}be.chk("0600","Mini Sector Shift: "),be.chk("000000000000","Reserved: ")}function x(be,Pe){for(var Fe=Math.ceil(be.length/Pe)-1,De=[],Le=1;Le<Fe;++Le)De[Le-1]=be.slice(Le*Pe,(Le+1)*Pe);return De[Fe-1]=be.slice(Fe*Pe),De}function C(be,Pe,Fe){for(var De=0,Le=0,Me=0,et=0,dt=0,Je=Fe.length,at=[],ct=[];De<Je;++De)at[De]=ct[De]=De,Pe[De]=Fe[De];for(;dt<ct.length;++dt)De=ct[dt],Le=be[De].L,Me=be[De].R,et=be[De].C,at[De]===De&&(Le!==-1&&at[Le]!==Le&&(at[De]=at[Le]),Me!==-1&&at[Me]!==Me&&(at[De]=at[Me])),et!==-1&&(at[et]=De),Le!==-1&&De!=at[De]&&(at[Le]=at[De],ct.lastIndexOf(Le)<dt&&ct.push(Le)),Me!==-1&&De!=at[De]&&(at[Me]=at[De],ct.lastIndexOf(Me)<dt&&ct.push(Me));for(De=1;De<Je;++De)at[De]===De&&(Me!==-1&&at[Me]!==Me?at[De]=at[Me]:Le!==-1&&at[Le]!==Le&&(at[De]=at[Le]));for(De=1;De<Je;++De)if(be[De].type!==0){if(dt=De,dt!=at[dt])do dt=at[dt],Pe[De]=Pe[dt]+"/"+Pe[De];while(dt!==0&&at[dt]!==-1&&dt!=at[dt]);at[De]=-1}for(Pe[0]+="/",De=1;De<Je;++De)be[De].type!==2&&(Pe[De]+="/")}function y(be,Pe,Fe){for(var De=be.start,Le=be.size,Me=[],et=De;Fe&&Le>0&&et>=0;)Me.push(Pe.slice(et*R,et*R+R)),Le-=R,et=vh(Fe,et*4);return Me.length===0?yt(0):$i(Me).slice(0,be.size)}function T(be,Pe,Fe,De,Le){var Me=G;if(be===G){if(Pe!==0)throw new Error("DIFAT chain shorter than expected")}else if(be!==-1){var et=Fe[be],dt=(De>>>2)-1;if(!et)return;for(var Je=0;Je<dt&&(Me=vh(et,Je*4))!==G;++Je)Le.push(Me);T(vh(et,De-4),Pe-1,Fe,De,Le)}}function I(be,Pe,Fe,De,Le){var Me=[],et=[];Le||(Le=[]);var dt=De-1,Je=0,at=0;for(Je=Pe;Je>=0;){Le[Je]=!0,Me[Me.length]=Je,et.push(be[Je]);var ct=Fe[Math.floor(Je*4/De)];if(at=Je*4&dt,De<4+at)throw new Error("FAT boundary crossed: "+Je+" 4 "+De);if(!be[ct])break;Je=vh(be[ct],at)}return{nodes:Me,data:LF([et])}}function F(be,Pe,Fe,De){var Le=be.length,Me=[],et=[],dt=[],Je=[],at=De-1,ct=0,Bt=0,jt=0,Jt=0;for(ct=0;ct<Le;++ct)if(dt=[],jt=ct+Pe,jt>=Le&&(jt-=Le),!et[jt]){Je=[];var Ot=[];for(Bt=jt;Bt>=0;){Ot[Bt]=!0,et[Bt]=!0,dt[dt.length]=Bt,Je.push(be[Bt]);var $t=Fe[Math.floor(Bt*4/De)];if(Jt=Bt*4&at,De<4+Jt)throw new Error("FAT boundary crossed: "+Bt+" 4 "+De);if(!be[$t]||(Bt=vh(be[$t],Jt),Ot[Bt]))break}Me[jt]={nodes:dt,data:LF([Je])}}return Me}function M(be,Pe,Fe,De,Le,Me,et,dt){for(var Je=0,at=De.length?2:0,ct=Pe[be].data,Bt=0,jt=0,Jt;Bt<ct.length;Bt+=128){var Ot=ct.slice(Bt,Bt+128);po(Ot,64),jt=Ot.read_shift(2),Jt=r4(Ot,0,jt-at),De.push(Jt);var $t={name:Jt,type:Ot.read_shift(1),color:Ot.read_shift(1),L:Ot.read_shift(4,"i"),R:Ot.read_shift(4,"i"),C:Ot.read_shift(4,"i"),clsid:Ot.read_shift(16),state:Ot.read_shift(4,"i"),start:0,size:0},Cn=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);Cn!==0&&($t.ct=O(Ot,Ot.l-8));var cr=Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2)+Ot.read_shift(2);cr!==0&&($t.mt=O(Ot,Ot.l-8)),$t.start=Ot.read_shift(4,"i"),$t.size=Ot.read_shift(4,"i"),$t.size<0&&$t.start<0&&($t.size=$t.type=0,$t.start=G,$t.name=""),$t.type===5?(Je=$t.start,Le>0&&Je!==G&&(Pe[Je].name="!StreamData")):$t.size>=4096?($t.storage="fat",Pe[$t.start]===void 0&&(Pe[$t.start]=I(Fe,$t.start,Pe.fat_addrs,Pe.ssz)),Pe[$t.start].name=$t.name,$t.content=Pe[$t.start].data.slice(0,$t.size)):($t.storage="minifat",$t.size<0?$t.size=0:Je!==G&&$t.start!==G&&Pe[Je]&&($t.content=y($t,Pe[Je].data,(Pe[dt]||{}).data))),$t.content&&po($t.content,0),Me[Jt]=$t,et.push($t)}}function O(be,Pe){return new Date((xc(be,Pe+4)/1e7*Math.pow(2,32)+xc(be,Pe)/1e7-11644473600)*1e3)}function Q(be,Pe){return u(),d(l.readFileSync(be),Pe)}function j(be,Pe){var Fe=Pe&&Pe.type;switch(Fe||Br&&Buffer.isBuffer(be)&&(Fe="buffer"),Fe||"base64"){case"file":return Q(be,Pe);case"base64":return d(vc(Ec(be)),Pe);case"binary":return d(vc(be),Pe)}return d(be,Pe)}function E(be,Pe){var Fe=Pe||{},De=Fe.root||"Root Entry";if(be.FullPaths||(be.FullPaths=[]),be.FileIndex||(be.FileIndex=[]),be.FullPaths.length!==be.FileIndex.length)throw new Error("inconsistent CFB structure");be.FullPaths.length===0&&(be.FullPaths[0]=De+"/",be.FileIndex[0]={name:De,type:5}),Fe.CLSID&&(be.FileIndex[0].clsid=Fe.CLSID),S(be)}function S(be){var Pe="Sh33tJ5";if(!Nn.find(be,"/"+Pe)){var Fe=yt(4);Fe[0]=55,Fe[1]=Fe[3]=50,Fe[2]=54,be.FileIndex.push({name:Pe,type:2,content:Fe,size:4,L:69,R:69,C:69}),be.FullPaths.push(be.FullPaths[0]+Pe),k(be)}}function k(be,Pe){E(be);for(var Fe=!1,De=!1,Le=be.FullPaths.length-1;Le>=0;--Le){var Me=be.FileIndex[Le];switch(Me.type){case 0:De?Fe=!0:(be.FileIndex.pop(),be.FullPaths.pop());break;case 1:case 2:case 5:De=!0,isNaN(Me.R*Me.L*Me.C)&&(Fe=!0),Me.R>-1&&Me.L>-1&&Me.R==Me.L&&(Fe=!0);break;default:Fe=!0;break}}if(!(!Fe&&!Pe)){var et=new Date(1987,1,19),dt=0,Je=Object.create?Object.create(null):{},at=[];for(Le=0;Le<be.FullPaths.length;++Le)Je[be.FullPaths[Le]]=!0,be.FileIndex[Le].type!==0&&at.push([be.FullPaths[Le],be.FileIndex[Le]]);for(Le=0;Le<at.length;++Le){var ct=r(at[Le][0]);De=Je[ct],De||(at.push([ct,{name:s(ct).replace("/",""),type:1,clsid:ee,ct:et,mt:et,content:null}]),Je[ct]=!0)}for(at.sort(function(Jt,Ot){return n(Jt[0],Ot[0])}),be.FullPaths=[],be.FileIndex=[],Le=0;Le<at.length;++Le)be.FullPaths[Le]=at[Le][0],be.FileIndex[Le]=at[Le][1];for(Le=0;Le<at.length;++Le){var Bt=be.FileIndex[Le],jt=be.FullPaths[Le];if(Bt.name=s(jt).replace("/",""),Bt.L=Bt.R=Bt.C=-(Bt.color=1),Bt.size=Bt.content?Bt.content.length:0,Bt.start=0,Bt.clsid=Bt.clsid||ee,Le===0)Bt.C=at.length>1?1:-1,Bt.size=0,Bt.type=5;else if(jt.slice(-1)=="/"){for(dt=Le+1;dt<at.length&&r(be.FullPaths[dt])!=jt;++dt);for(Bt.C=dt>=at.length?-1:dt,dt=Le+1;dt<at.length&&r(be.FullPaths[dt])!=r(jt);++dt);Bt.R=dt>=at.length?-1:dt,Bt.type=1}else r(be.FullPaths[Le+1]||"")==r(jt)&&(Bt.R=Le+1),Bt.type=2}}}function z(be,Pe){var Fe=Pe||{};if(Fe.fileType=="mad")return rn(be,Fe);switch(k(be),Fe.fileType){case"zip":return Is(be,Fe)}var De=function(Jt){for(var Ot=0,$t=0,Cn=0;Cn<Jt.FileIndex.length;++Cn){var cr=Jt.FileIndex[Cn];if(cr.content){var ur=cr.content.length;ur>0&&(ur<4096?Ot+=ur+63>>6:$t+=ur+511>>9)}}for(var dr=Jt.FullPaths.length+3>>2,Rs=Ot+7>>3,ba=Ot+127>>7,Gs=Rs+$t+dr+ba,la=Gs+127>>7,Fs=la<=109?0:Math.ceil((la-109)/127);Gs+la+Fs+127>>7>la;)Fs=++la<=109?0:Math.ceil((la-109)/127);var Rn=[1,Fs,la,ba,dr,$t,Ot,0];return Jt.FileIndex[0].size=Ot<<6,Rn[7]=(Jt.FileIndex[0].start=Rn[0]+Rn[1]+Rn[2]+Rn[3]+Rn[4]+Rn[5])+(Rn[6]+7>>3),Rn}(be),Le=yt(De[7]<<9),Me=0,et=0;{for(Me=0;Me<8;++Me)Le.write_shift(1,le[Me]);for(Me=0;Me<8;++Me)Le.write_shift(2,0);for(Le.write_shift(2,62),Le.write_shift(2,3),Le.write_shift(2,65534),Le.write_shift(2,9),Le.write_shift(2,6),Me=0;Me<3;++Me)Le.write_shift(2,0);for(Le.write_shift(4,0),Le.write_shift(4,De[2]),Le.write_shift(4,De[0]+De[1]+De[2]+De[3]-1),Le.write_shift(4,0),Le.write_shift(4,4096),Le.write_shift(4,De[3]?De[0]+De[1]+De[2]-1:G),Le.write_shift(4,De[3]),Le.write_shift(-4,De[1]?De[0]-1:G),Le.write_shift(4,De[1]),Me=0;Me<109;++Me)Le.write_shift(-4,Me<De[2]?De[1]+Me:-1)}if(De[1])for(et=0;et<De[1];++et){for(;Me<236+et*127;++Me)Le.write_shift(-4,Me<De[2]?De[1]+Me:-1);Le.write_shift(-4,et===De[1]-1?G:et+1)}var dt=function(Jt){for(et+=Jt;Me<et-1;++Me)Le.write_shift(-4,Me+1);Jt&&(++Me,Le.write_shift(-4,G))};for(et=Me=0,et+=De[1];Me<et;++Me)Le.write_shift(-4,oe.DIFSECT);for(et+=De[2];Me<et;++Me)Le.write_shift(-4,oe.FATSECT);dt(De[3]),dt(De[4]);for(var Je=0,at=0,ct=be.FileIndex[0];Je<be.FileIndex.length;++Je)ct=be.FileIndex[Je],ct.content&&(at=ct.content.length,!(at<4096)&&(ct.start=et,dt(at+511>>9)));for(dt(De[6]+7>>3);Le.l&511;)Le.write_shift(-4,oe.ENDOFCHAIN);for(et=Me=0,Je=0;Je<be.FileIndex.length;++Je)ct=be.FileIndex[Je],ct.content&&(at=ct.content.length,!(!at||at>=4096)&&(ct.start=et,dt(at+63>>6)));for(;Le.l&511;)Le.write_shift(-4,oe.ENDOFCHAIN);for(Me=0;Me<De[4]<<2;++Me){var Bt=be.FullPaths[Me];if(!Bt||Bt.length===0){for(Je=0;Je<17;++Je)Le.write_shift(4,0);for(Je=0;Je<3;++Je)Le.write_shift(4,-1);for(Je=0;Je<12;++Je)Le.write_shift(4,0);continue}ct=be.FileIndex[Me],Me===0&&(ct.start=ct.size?ct.start-1:G);var jt=Me===0&&Fe.root||ct.name;if(at=2*(jt.length+1),Le.write_shift(64,jt,"utf16le"),Le.write_shift(2,at),Le.write_shift(1,ct.type),Le.write_shift(1,ct.color),Le.write_shift(-4,ct.L),Le.write_shift(-4,ct.R),Le.write_shift(-4,ct.C),ct.clsid)Le.write_shift(16,ct.clsid,"hex");else for(Je=0;Je<4;++Je)Le.write_shift(4,0);Le.write_shift(4,ct.state||0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,0),Le.write_shift(4,ct.start),Le.write_shift(4,ct.size),Le.write_shift(4,0)}for(Me=1;Me<be.FileIndex.length;++Me)if(ct=be.FileIndex[Me],ct.size>=4096)if(Le.l=ct.start+1<<9,Br&&Buffer.isBuffer(ct.content))ct.content.copy(Le,Le.l,0,ct.size),Le.l+=ct.size+511&-512;else{for(Je=0;Je<ct.size;++Je)Le.write_shift(1,ct.content[Je]);for(;Je&511;++Je)Le.write_shift(1,0)}for(Me=1;Me<be.FileIndex.length;++Me)if(ct=be.FileIndex[Me],ct.size>0&&ct.size<4096)if(Br&&Buffer.isBuffer(ct.content))ct.content.copy(Le,Le.l,0,ct.size),Le.l+=ct.size+63&-64;else{for(Je=0;Je<ct.size;++Je)Le.write_shift(1,ct.content[Je]);for(;Je&63;++Je)Le.write_shift(1,0)}if(Br)Le.l=Le.length;else for(;Le.l<Le.length;)Le.write_shift(1,0);return Le}function P(be,Pe){var Fe=be.FullPaths.map(function(Je){return Je.toUpperCase()}),De=Fe.map(function(Je){var at=Je.split("/");return at[at.length-(Je.slice(-1)=="/"?2:1)]}),Le=!1;Pe.charCodeAt(0)===47?(Le=!0,Pe=Fe[0].slice(0,-1)+Pe):Le=Pe.indexOf("/")!==-1;var Me=Pe.toUpperCase(),et=Le===!0?Fe.indexOf(Me):De.indexOf(Me);if(et!==-1)return be.FileIndex[et];var dt=!Me.match(Eg);for(Me=Me.replace(yl,""),dt&&(Me=Me.replace(Eg,"!")),et=0;et<Fe.length;++et)if((dt?Fe[et].replace(Eg,"!"):Fe[et]).replace(yl,"")==Me||(dt?De[et].replace(Eg,"!"):De[et]).replace(yl,"")==Me)return be.FileIndex[et];return null}var R=64,G=-2,q="d0cf11e0a1b11ae1",le=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",oe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:G,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(be,Pe,Fe){u();var De=z(be,Fe);l.writeFileSync(Pe,De)}function ne(be){for(var Pe=new Array(be.length),Fe=0;Fe<be.length;++Fe)Pe[Fe]=String.fromCharCode(be[Fe]);return Pe.join("")}function X(be,Pe){var Fe=z(be,Pe);switch(Pe&&Pe.type||"buffer"){case"file":return u(),l.writeFileSync(Pe.filename,Fe),Fe;case"binary":return typeof Fe=="string"?Fe:ne(Fe);case"base64":return _x(typeof Fe=="string"?Fe:ne(Fe));case"buffer":if(Br)return Buffer.isBuffer(Fe)?Fe:md(Fe);case"array":return typeof Fe=="string"?vc(Fe):Fe}return Fe}var ce;function V(be){try{var Pe=be.InflateRaw,Fe=new Pe;if(Fe._processChunk(new Uint8Array([3,0]),Fe._finishFlushFlag),Fe.bytesRead)ce=be;else throw new Error("zlib does not expose bytesRead")}catch(De){console.error("cannot use native zlib: "+(De.message||De))}}function J(be,Pe){if(!ce)return Zn(be,Pe);var Fe=ce.InflateRaw,De=new Fe,Le=De._processChunk(be.slice(be.l),De._finishFlushFlag);return be.l+=De.bytesRead,Le}function re(be){return ce?ce.deflateRawSync(be):Ht(be)}var ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ve(be){var Pe=(be<<1|be<<11)&139536|(be<<5|be<<15)&558144;return(Pe>>16|Pe>>8|Pe)&255}for(var ye=typeof Uint8Array<"u",we=ye?new Uint8Array(256):[],me=0;me<256;++me)we[me]=ve(me);function he(be,Pe){var Fe=we[be&255];return Pe<=8?Fe>>>8-Pe:(Fe=Fe<<8|we[be>>8&255],Pe<=16?Fe>>>16-Pe:(Fe=Fe<<8|we[be>>16&255],Fe>>>24-Pe))}function Ve(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=6?0:be[De+1]<<8))>>>Fe&3}function nt(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=5?0:be[De+1]<<8))>>>Fe&7}function Oe(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=4?0:be[De+1]<<8))>>>Fe&15}function Ie(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=3?0:be[De+1]<<8))>>>Fe&31}function je(be,Pe){var Fe=Pe&7,De=Pe>>>3;return(be[De]|(Fe<=1?0:be[De+1]<<8))>>>Fe&127}function Ke(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3,Me=(1<<Fe)-1,et=be[Le]>>>De;return Fe<8-De||(et|=be[Le+1]<<8-De,Fe<16-De)||(et|=be[Le+2]<<16-De,Fe<24-De)||(et|=be[Le+3]<<24-De),et&Me}function st(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return De<=5?be[Le]|=(Fe&7)<<De:(be[Le]|=Fe<<De&255,be[Le+1]=(Fe&7)>>8-De),Pe+3}function vt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe=(Fe&1)<<De,be[Le]|=Fe,Pe+1}function Tt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe<<=De,be[Le]|=Fe&255,Fe>>>=8,be[Le+1]=Fe,Pe+8}function xt(be,Pe,Fe){var De=Pe&7,Le=Pe>>>3;return Fe<<=De,be[Le]|=Fe&255,Fe>>>=8,be[Le+1]=Fe&255,be[Le+2]=Fe>>>8,Pe+16}function Vt(be,Pe){var Fe=be.length,De=2*Fe>Pe?2*Fe:Pe+5,Le=0;if(Fe>=Pe)return be;if(Br){var Me=mF(De);if(be.copy)be.copy(Me);else for(;Le<be.length;++Le)Me[Le]=be[Le];return Me}else if(ye){var et=new Uint8Array(De);if(et.set)et.set(be);else for(;Le<Fe;++Le)et[Le]=be[Le];return et}return be.length=De,be}function Kt(be){for(var Pe=new Array(be),Fe=0;Fe<be;++Fe)Pe[Fe]=0;return Pe}function cn(be,Pe,Fe){var De=1,Le=0,Me=0,et=0,dt=0,Je=be.length,at=ye?new Uint16Array(32):Kt(32);for(Me=0;Me<32;++Me)at[Me]=0;for(Me=Je;Me<Fe;++Me)be[Me]=0;Je=be.length;var ct=ye?new Uint16Array(Je):Kt(Je);for(Me=0;Me<Je;++Me)at[Le=be[Me]]++,De<Le&&(De=Le),ct[Me]=0;for(at[0]=0,Me=1;Me<=De;++Me)at[Me+16]=dt=dt+at[Me-1]<<1;for(Me=0;Me<Je;++Me)dt=be[Me],dt!=0&&(ct[Me]=at[dt+16]++);var Bt=0;for(Me=0;Me<Je;++Me)if(Bt=be[Me],Bt!=0)for(dt=he(ct[Me],De)>>De-Bt,et=(1<<De+4-Bt)-1;et>=0;--et)Pe[dt|et<<Bt]=Bt&15|Me<<4;return De}var Gt=ye?new Uint16Array(512):Kt(512),Wt=ye?new Uint16Array(32):Kt(32);if(!ye){for(var sn=0;sn<512;++sn)Gt[sn]=0;for(sn=0;sn<32;++sn)Wt[sn]=0}(function(){for(var be=[],Pe=0;Pe<32;Pe++)be.push(5);cn(be,Wt,32);var Fe=[];for(Pe=0;Pe<=143;Pe++)Fe.push(8);for(;Pe<=255;Pe++)Fe.push(9);for(;Pe<=279;Pe++)Fe.push(7);for(;Pe<=287;Pe++)Fe.push(8);cn(Fe,Gt,288)})();var Qt=function(){for(var Pe=ye?new Uint8Array(32768):[],Fe=0,De=0;Fe<Se.length-1;++Fe)for(;De<Se[Fe+1];++De)Pe[De]=Fe;for(;De<32768;++De)Pe[De]=29;var Le=ye?new Uint8Array(259):[];for(Fe=0,De=0;Fe<fe.length-1;++Fe)for(;De<fe[Fe+1];++De)Le[De]=Fe;function Me(dt,Je){for(var at=0;at<dt.length;){var ct=Math.min(65535,dt.length-at),Bt=at+ct==dt.length;for(Je.write_shift(1,+Bt),Je.write_shift(2,ct),Je.write_shift(2,~ct&65535);ct-- >0;)Je[Je.l++]=dt[at++]}return Je.l}function et(dt,Je){for(var at=0,ct=0,Bt=ye?new Uint16Array(32768):[];ct<dt.length;){var jt=Math.min(65535,dt.length-ct);if(jt<10){for(at=st(Je,at,+(ct+jt==dt.length)),at&7&&(at+=8-(at&7)),Je.l=at/8|0,Je.write_shift(2,jt),Je.write_shift(2,~jt&65535);jt-- >0;)Je[Je.l++]=dt[ct++];at=Je.l*8;continue}at=st(Je,at,+(ct+jt==dt.length)+2);for(var Jt=0;jt-- >0;){var Ot=dt[ct];Jt=(Jt<<5^Ot)&32767;var $t=-1,Cn=0;if(($t=Bt[Jt])&&($t|=ct&-32768,$t>ct&&($t-=32768),$t<ct))for(;dt[$t+Cn]==dt[ct+Cn]&&Cn<250;)++Cn;if(Cn>2){Ot=Le[Cn],Ot<=22?at=Tt(Je,at,we[Ot+1]>>1)-1:(Tt(Je,at,3),at+=5,Tt(Je,at,we[Ot-23]>>5),at+=3);var cr=Ot<8?0:Ot-4>>2;cr>0&&(xt(Je,at,Cn-fe[Ot]),at+=cr),Ot=Pe[ct-$t],at=Tt(Je,at,we[Ot]>>3),at-=3;var ur=Ot<4?0:Ot-2>>1;ur>0&&(xt(Je,at,ct-$t-Se[Ot]),at+=ur);for(var dr=0;dr<Cn;++dr)Bt[Jt]=ct&32767,Jt=(Jt<<5^dt[ct])&32767,++ct;jt-=Cn-1}else Ot<=143?Ot=Ot+48:at=vt(Je,at,1),at=Tt(Je,at,we[Ot]),Bt[Jt]=ct&32767,++ct}at=Tt(Je,at,0)-1}return Je.l=(at+7)/8|0,Je.l}return function(Je,at){return Je.length<8?Me(Je,at):et(Je,at)}}();function Ht(be){var Pe=yt(50+Math.floor(be.length*1.1)),Fe=Qt(be,Pe);return Pe.slice(0,Fe)}var _t=ye?new Uint16Array(32768):Kt(32768),On=ye?new Uint16Array(32768):Kt(32768),An=ye?new Uint16Array(128):Kt(128),Tr=1,In=1;function nr(be,Pe){var Fe=Ie(be,Pe)+257;Pe+=5;var De=Ie(be,Pe)+1;Pe+=5;var Le=Oe(be,Pe)+4;Pe+=4;for(var Me=0,et=ye?new Uint8Array(19):Kt(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=1,at=ye?new Uint8Array(8):Kt(8),ct=ye?new Uint8Array(8):Kt(8),Bt=et.length,jt=0;jt<Le;++jt)et[ie[jt]]=Me=nt(be,Pe),Je<Me&&(Je=Me),at[Me]++,Pe+=3;var Jt=0;for(at[0]=0,jt=1;jt<=Je;++jt)ct[jt]=Jt=Jt+at[jt-1]<<1;for(jt=0;jt<Bt;++jt)(Jt=et[jt])!=0&&(dt[jt]=ct[Jt]++);var Ot=0;for(jt=0;jt<Bt;++jt)if(Ot=et[jt],Ot!=0){Jt=we[dt[jt]]>>8-Ot;for(var $t=(1<<7-Ot)-1;$t>=0;--$t)An[Jt|$t<<Ot]=Ot&7|jt<<3}var Cn=[];for(Je=1;Cn.length<Fe+De;)switch(Jt=An[je(be,Pe)],Pe+=Jt&7,Jt>>>=3){case 16:for(Me=3+Ve(be,Pe),Pe+=2,Jt=Cn[Cn.length-1];Me-- >0;)Cn.push(Jt);break;case 17:for(Me=3+nt(be,Pe),Pe+=3;Me-- >0;)Cn.push(0);break;case 18:for(Me=11+je(be,Pe),Pe+=7;Me-- >0;)Cn.push(0);break;default:Cn.push(Jt),Je<Jt&&(Je=Jt);break}var cr=Cn.slice(0,Fe),ur=Cn.slice(Fe);for(jt=Fe;jt<286;++jt)cr[jt]=0;for(jt=De;jt<30;++jt)ur[jt]=0;return Tr=cn(cr,_t,286),In=cn(ur,On,30),Pe}function Lr(be,Pe){if(be[0]==3&&!(be[1]&3))return[Mf(Pe),2];for(var Fe=0,De=0,Le=mF(Pe||1<<18),Me=0,et=Le.length>>>0,dt=0,Je=0;(De&1)==0;){if(De=nt(be,Fe),Fe+=3,De>>>1)De>>1==1?(dt=9,Je=5):(Fe=nr(be,Fe),dt=Tr,Je=In);else{Fe&7&&(Fe+=8-(Fe&7));var at=be[Fe>>>3]|be[(Fe>>>3)+1]<<8;if(Fe+=32,at>0)for(!Pe&&et<Me+at&&(Le=Vt(Le,Me+at),et=Le.length);at-- >0;)Le[Me++]=be[Fe>>>3],Fe+=8;continue}for(;;){!Pe&&et<Me+32767&&(Le=Vt(Le,Me+32767),et=Le.length);var ct=Ke(be,Fe,dt),Bt=De>>>1==1?Gt[ct]:_t[ct];if(Fe+=Bt&15,Bt>>>=4,(Bt>>>8&255)===0)Le[Me++]=Bt;else{if(Bt==256)break;Bt-=257;var jt=Bt<8?0:Bt-4>>2;jt>5&&(jt=0);var Jt=Me+fe[Bt];jt>0&&(Jt+=Ke(be,Fe,jt),Fe+=jt),ct=Ke(be,Fe,Je),Bt=De>>>1==1?Wt[ct]:On[ct],Fe+=Bt&15,Bt>>>=4;var Ot=Bt<4?0:Bt-2>>1,$t=Se[Bt];for(Ot>0&&($t+=Ke(be,Fe,Ot),Fe+=Ot),!Pe&&et<Jt&&(Le=Vt(Le,Jt+100),et=Le.length);Me<Jt;)Le[Me]=Le[Me-$t],++Me}}}return Pe?[Le,Fe+7>>>3]:[Le.slice(0,Me),Fe+7>>>3]}function Zn(be,Pe){var Fe=be.slice(be.l||0),De=Lr(Fe,Pe);return be.l+=De[1],De[0]}function ya(be,Pe){if(be)typeof console<"u"&&console.error(Pe);else throw new Error(Pe)}function wr(be,Pe){var Fe=be;po(Fe,0);var De=[],Le=[],Me={FileIndex:De,FullPaths:Le};E(Me,{root:Pe.root});for(var et=Fe.length-4;(Fe[et]!=80||Fe[et+1]!=75||Fe[et+2]!=5||Fe[et+3]!=6)&&et>=0;)--et;Fe.l=et+4,Fe.l+=4;var dt=Fe.read_shift(2);Fe.l+=6;var Je=Fe.read_shift(4);for(Fe.l=Je,et=0;et<dt;++et){Fe.l+=20;var at=Fe.read_shift(4),ct=Fe.read_shift(4),Bt=Fe.read_shift(2),jt=Fe.read_shift(2),Jt=Fe.read_shift(2);Fe.l+=8;var Ot=Fe.read_shift(4),$t=o(Fe.slice(Fe.l+Bt,Fe.l+Bt+jt));Fe.l+=Bt+jt+Jt;var Cn=Fe.l;Fe.l=Ot+4,us(Fe,at,ct,Me,$t),Fe.l=Cn}return Me}function us(be,Pe,Fe,De,Le){be.l+=2;var Me=be.read_shift(2),et=be.read_shift(2),dt=i(be);if(Me&8257)throw new Error("Unsupported ZIP encryption");for(var Je=be.read_shift(4),at=be.read_shift(4),ct=be.read_shift(4),Bt=be.read_shift(2),jt=be.read_shift(2),Jt="",Ot=0;Ot<Bt;++Ot)Jt+=String.fromCharCode(be[be.l++]);if(jt){var $t=o(be.slice(be.l,be.l+jt));($t[21589]||{}).mt&&(dt=$t[21589].mt),((Le||{})[21589]||{}).mt&&(dt=Le[21589].mt)}be.l+=jt;var Cn=be.slice(be.l,be.l+at);switch(et){case 8:Cn=J(be,ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+et)}var cr=!1;Me&8&&(Je=be.read_shift(4),Je==134695760&&(Je=be.read_shift(4),cr=!0),at=be.read_shift(4),ct=be.read_shift(4)),at!=Pe&&ya(cr,"Bad compressed size: "+Pe+" != "+at),ct!=Fe&&ya(cr,"Bad uncompressed size: "+Fe+" != "+ct),Nr(De,Jt,Cn,{unsafe:!0,mt:dt})}function Is(be,Pe){var Fe=Pe||{},De=[],Le=[],Me=yt(1),et=Fe.compression?8:0,dt=0,Je=0,at=0,ct=0,Bt=0,jt=be.FullPaths[0],Jt=jt,Ot=be.FileIndex[0],$t=[],Cn=0;for(Je=1;Je<be.FullPaths.length;++Je)if(Jt=be.FullPaths[Je].slice(jt.length),Ot=be.FileIndex[Je],!(!Ot.size||!Ot.content||Jt=="Sh33tJ5")){var cr=ct,ur=yt(Jt.length);for(at=0;at<Jt.length;++at)ur.write_shift(1,Jt.charCodeAt(at)&127);ur=ur.slice(0,ur.l),$t[Bt]=jte.buf(Ot.content,0);var dr=Ot.content;et==8&&(dr=re(dr)),Me=yt(30),Me.write_shift(4,67324752),Me.write_shift(2,20),Me.write_shift(2,dt),Me.write_shift(2,et),Ot.mt?a(Me,Ot.mt):Me.write_shift(4,0),Me.write_shift(-4,$t[Bt]),Me.write_shift(4,dr.length),Me.write_shift(4,Ot.content.length),Me.write_shift(2,ur.length),Me.write_shift(2,0),ct+=Me.length,De.push(Me),ct+=ur.length,De.push(ur),ct+=dr.length,De.push(dr),Me=yt(46),Me.write_shift(4,33639248),Me.write_shift(2,0),Me.write_shift(2,20),Me.write_shift(2,dt),Me.write_shift(2,et),Me.write_shift(4,0),Me.write_shift(-4,$t[Bt]),Me.write_shift(4,dr.length),Me.write_shift(4,Ot.content.length),Me.write_shift(2,ur.length),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(4,0),Me.write_shift(4,cr),Cn+=Me.l,Le.push(Me),Cn+=ur.length,Le.push(ur),++Bt}return Me=yt(22),Me.write_shift(4,101010256),Me.write_shift(2,0),Me.write_shift(2,0),Me.write_shift(2,Bt),Me.write_shift(2,Bt),Me.write_shift(4,Cn),Me.write_shift(4,ct),Me.write_shift(2,0),$i([$i(De),$i(Le),Me])}var lr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function vn(be,Pe){if(be.ctype)return be.ctype;var Fe=be.name||"",De=Fe.match(/\.([^\.]+)$/);return De&&lr[De[1]]||Pe&&(De=(Fe=Pe).match(/[\.\\]([^\.\\])+$/),De&&lr[De[1]])?lr[De[1]]:"application/octet-stream"}function Ar(be){for(var Pe=_x(be),Fe=[],De=0;De<Pe.length;De+=76)Fe.push(Pe.slice(De,De+76));return Fe.join(`\r
`)+`\r
`}function wa(be){var Pe=be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(at){var ct=at.charCodeAt(0).toString(16).toUpperCase();return"="+(ct.length==1?"0"+ct:ct)});Pe=Pe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Pe.charAt(0)==`
`&&(Pe="=0D"+Pe.slice(1)),Pe=Pe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Fe=[],De=Pe.split(`\r
`),Le=0;Le<De.length;++Le){var Me=De[Le];if(Me.length==0){Fe.push("");continue}for(var et=0;et<Me.length;){var dt=76,Je=Me.slice(et,et+dt);Je.charAt(dt-1)=="="?dt--:Je.charAt(dt-2)=="="?dt-=2:Je.charAt(dt-3)=="="&&(dt-=3),Je=Me.slice(et,et+dt),et+=dt,et<Me.length&&(Je+="="),Fe.push(Je)}}return Fe.join(`\r
`)}function As(be){for(var Pe=[],Fe=0;Fe<be.length;++Fe){for(var De=be[Fe];Fe<=be.length&&De.charAt(De.length-1)=="=";)De=De.slice(0,De.length-1)+be[++Fe];Pe.push(De)}for(var Le=0;Le<Pe.length;++Le)Pe[Le]=Pe[Le].replace(/[=][0-9A-Fa-f]{2}/g,function(Me){return String.fromCharCode(parseInt(Me.slice(1),16))});return vc(Pe.join(`\r
`))}function zs(be,Pe,Fe){for(var De="",Le="",Me="",et,dt=0;dt<10;++dt){var Je=Pe[dt];if(!Je||Je.match(/^\s*$/))break;var at=Je.match(/^(.*?):\s*([^\s].*)$/);if(at)switch(at[1].toLowerCase()){case"content-location":De=at[2].trim();break;case"content-type":Me=at[2].trim();break;case"content-transfer-encoding":Le=at[2].trim();break}}switch(++dt,Le.toLowerCase()){case"base64":et=vc(Ec(Pe.slice(dt).join("")));break;case"quoted-printable":et=As(Pe.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Le)}var ct=Nr(be,De.slice(Fe.length),et,{unsafe:!0});Me&&(ct.ctype=Me)}function oa(be,Pe){if(ne(be.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Fe=Pe&&Pe.root||"",De=(Br&&Buffer.isBuffer(be)?be.toString("binary"):ne(be)).split(`\r
`),Le=0,Me="";for(Le=0;Le<De.length;++Le)if(Me=De[Le],!!/^Content-Location:/i.test(Me)&&(Me=Me.slice(Me.indexOf("file")),Fe||(Fe=Me.slice(0,Me.lastIndexOf("/")+1)),Me.slice(0,Fe.length)!=Fe))for(;Fe.length>0&&(Fe=Fe.slice(0,Fe.length-1),Fe=Fe.slice(0,Fe.lastIndexOf("/")+1),Me.slice(0,Fe.length)!=Fe););var et=(De[1]||"").match(/boundary="(.*?)"/);if(!et)throw new Error("MAD cannot find boundary");var dt="--"+(et[1]||""),Je=[],at=[],ct={FileIndex:Je,FullPaths:at};E(ct);var Bt,jt=0;for(Le=0;Le<De.length;++Le){var Jt=De[Le];Jt!==dt&&Jt!==dt+"--"||(jt++&&zs(ct,De.slice(Bt,Le),Fe),Bt=Le)}return ct}function rn(be,Pe){var Fe=Pe||{},De=Fe.boundary||"SheetJS";De="------="+De;for(var Le=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+De.slice(2)+'"',"","",""],Me=be.FullPaths[0],et=Me,dt=be.FileIndex[0],Je=1;Je<be.FullPaths.length;++Je)if(et=be.FullPaths[Je].slice(Me.length),dt=be.FileIndex[Je],!(!dt.size||!dt.content||et=="Sh33tJ5")){et=et.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Cn){return"_x"+Cn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Cn){return"_u"+Cn.charCodeAt(0).toString(16)+"_"});for(var at=dt.content,ct=Br&&Buffer.isBuffer(at)?at.toString("binary"):ne(at),Bt=0,jt=Math.min(1024,ct.length),Jt=0,Ot=0;Ot<=jt;++Ot)(Jt=ct.charCodeAt(Ot))>=32&&Jt<128&&++Bt;var $t=Bt>=jt*4/5;Le.push(De),Le.push("Content-Location: "+(Fe.root||"file:///C:/SheetJS/")+et),Le.push("Content-Transfer-Encoding: "+($t?"quoted-printable":"base64")),Le.push("Content-Type: "+vn(dt,et)),Le.push(""),Le.push($t?wa(ct):Ar(ct))}return Le.push(De+`--\r
`),Le.join(`\r
`)}function Rr(be){var Pe={};return E(Pe,be),Pe}function Nr(be,Pe,Fe,De){var Le=De&&De.unsafe;Le||E(be);var Me=!Le&&Nn.find(be,Pe);if(!Me){var et=be.FullPaths[0];Pe.slice(0,et.length)==et?et=Pe:(et.slice(-1)!="/"&&(et+="/"),et=(et+Pe).replace("//","/")),Me={name:s(Pe),type:2},be.FileIndex.push(Me),be.FullPaths.push(et),Le||Nn.utils.cfb_gc(be)}return Me.content=Fe,Me.size=Fe?Fe.length:0,De&&(De.CLSID&&(Me.clsid=De.CLSID),De.mt&&(Me.mt=De.mt),De.ct&&(Me.ct=De.ct)),Me}function Xr(be,Pe){E(be);var Fe=Nn.find(be,Pe);if(Fe){for(var De=0;De<be.FileIndex.length;++De)if(be.FileIndex[De]==Fe)return be.FileIndex.splice(De,1),be.FullPaths.splice(De,1),!0}return!1}function br(be,Pe,Fe){E(be);var De=Nn.find(be,Pe);if(De){for(var Le=0;Le<be.FileIndex.length;++Le)if(be.FileIndex[Le]==De)return be.FileIndex[Le].name=s(Fe),be.FullPaths[Le]=Fe,!0}return!1}function Yt(be){k(be,!0)}return e.find=P,e.read=j,e.parse=d,e.write=X,e.writeFile=K,e.utils={cfb_new:Rr,cfb_add:Nr,cfb_del:Xr,cfb_mov:br,cfb_gc:Yt,ReadShift:$g,CheckField:lO,prep_blob:po,bconcat:$i,use_zlib:V,_deflateRaw:Ht,_inflateRaw:Zn,consts:oe},e}();function Qte(t){return typeof t=="string"?eb(t):Array.isArray(t)?fte(t):t}function mv(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=eb(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?AA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var s=new Blob([Qte(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Gf(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Hte(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+t)}function Ma(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function _F(t,e){for(var n=[],r=Ma(t),s=0;s!==r.length;++s)n[t[r[s]][e]]==null&&(n[t[r[s]][e]]=r[s]);return n}function nb(t){for(var e=[],n=Ma(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function rb(t){for(var e=[],n=Ma(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function Vte(t){for(var e=[],n=Ma(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var Rw=new Date(1899,11,30,0,0,0);function Ii(t,e){var n=t.getTime(),r=Rw.getTime()+(t.getTimezoneOffset()-Rw.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var Q8=new Date,zte=Rw.getTime()+(Q8.getTimezoneOffset()-Rw.getTimezoneOffset())*6e4,CF=Q8.getTimezoneOffset();function sb(t){var e=new Date;return e.setTime(t*24*60*60*1e3+zte),e.getTimezoneOffset()!==CF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-CF)*6e4),e}function Gte(t){var e=0,n=0,r=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(s[a],10)}return e}var EF=new Date("2017-02-19T19:06:09.000Z"),H8=isNaN(EF.getFullYear())?new Date("2/19/17"):EF,qte=H8.getFullYear()==2017;function ea(t,e){var n=new Date(t);if(qte)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(H8.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Vh(t,e){if(Br&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return AA(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return AA(B8(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return AA(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return AA(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return n[a]||a})}catch{}for(var r=[],s=0;s!=t.length;++s)r.push(String.fromCharCode(t[s]));return r.join("")}function ta(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=ta(t[n]));return e}function Da(t,e){for(var n="";n.length<e;)n+=t;return n}function Iu(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var Kte=["january","february","march","april","may","june","july","august","september","october","november","december"];function Gm(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Kte.indexOf(i)==-1)return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}var $te=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,r,s){if(t||typeof r=="string")return n.split(r);for(var a=n.split(r),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function V8(t){return t?t.content&&t.type?Vh(t.content,!0):t.data?Cg(t.data):t.asNodeBuffer&&Br?Cg(t.asNodeBuffer().toString("binary")):t.asBinary?Cg(t.asBinary()):t._data&&t._data.getContent?Cg(Vh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function z8(t){if(!t)return null;if(t.data)return fF(t.data);if(t.asNodeBuffer&&Br)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?fF(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Wte(t){return t&&t.name.slice(-4)===".bin"?z8(t):V8(t)}function Kc(t,e){for(var n=t.FullPaths||Ma(t.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return t.files?t.files[n[a]]:t.FileIndex[a]}return null}function X5(t,e){var n=Kc(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function di(t,e,n){if(!n)return Wte(X5(t,e));if(!e)return null;try{return di(t,e)}catch{return null}}function yc(t,e,n){if(!n)return V8(X5(t,e));if(!e)return null;try{return yc(t,e)}catch{return null}}function Yte(t,e,n){return z8(X5(t,e))}function SF(t){for(var e=t.FullPaths||Ma(t.files),n=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&n.push(e[r].replace(/^Root Entry[\/]/,""));return n.sort()}function yr(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Br?r=md(n):r=hte(n),Nn.utils.cfb_add(t,e,r)}Nn.utils.cfb_add(t,e,n)}else t.file(e,n)}function J5(){return Nn.utils.cfb_new()}function G8(t,e){switch(e.type){case"base64":return Nn.read(t,{type:"base64"});case"binary":return Nn.read(t,{type:"binary"});case"buffer":case"array":return Nn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Sg(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var r=t.split("/");r.length!==0;){var s=r.shift();s===".."?n.pop():s!=="."&&n.push(s)}return n.join("/")}var ei=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Xte=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,TF=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Jte=/<[^>]*>/g,el=ei.match(TF)?TF:Jte,Zte=/<\w*:/,ene=/<(\/?)\w+:/;function Jn(t,e,n){for(var r={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(r[0]=t.slice(0,s)),s===t.length)return r;var i=t.match(Xte),o=0,l="",u=0,d="",m="",p=1;if(i)for(u=0;u!=i.length;++u){for(m=i[u],a=0;a!=m.length&&m.charCodeAt(a)!==61;++a);for(d=m.slice(0,a).trim();m.charCodeAt(a+1)==32;)++a;for(p=(s=m.charCodeAt(a+1))==34||s==39?1:0,l=m.slice(a+1+p,m.length-p),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,r[d.toLowerCase()]=l;else{var x=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[x]&&d.slice(o-3,o)=="ext")continue;r[x]=l,r[x.toLowerCase()]=l}}return r}function EA(t){return t.replace(ene,"<$1")}var q8={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Z5=nb(q8),ts=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return q8[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),e4=/[&<>'"]/g,tne=/[\u0000-\u0008\u000b-\u001f]/g;function Cs(t){var e=t+"";return e.replace(e4,function(n){return Z5[n]}).replace(tne,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function NF(t){return Cs(t).replace(/ /g,"_x0020_")}var K8=/[\u0000-\u001f]/g;function t4(t){var e=t+"";return e.replace(e4,function(n){return Z5[n]}).replace(/\n/g,"<br/>").replace(K8,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function nne(t){var e=t+"";return e.replace(e4,function(n){return Z5[n]}).replace(K8,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var BF=function(){var t=/&#(\d+);/g;function e(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(t,e)}}();function rne(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Js(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function kC(t){for(var e="",n=0,r=0,s=0,a=0,i=0,o=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(s=t.charCodeAt(n++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(n++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function kF(t){var e=Mf(2*t.length),n,r,s=1,a=0,i=0,o;for(r=0;r<t.length;r+=s)s=1,(o=t.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(t.charCodeAt(r+1)&63),s=2):o<240?(n=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),s=3):(s=4,n=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,i=55296+(n>>>10&1023),n=56320+(n&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function IF(t){return md(t,"binary").toString("utf8")}var j1="foo bar bazâð£",ks=Br&&(IF(j1)==kC(j1)&&IF||kF(j1)==kC(j1)&&kF)||kC,AA=Br?function(t){return md(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,s=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Ex=function(){var t={};return function(n,r){var s=n+"|"+(r||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",r||"")}}(),$8=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)r=r.replace(t[s][0],t[s][1]);return r}}(),sne=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),ane=/<\/?(?:vt:)?variant>/g,ine=/<(?:vt:)([^>]*)>([\s\S]*)</;function FF(t,e){var n=Jn(t),r=t.match(sne(n.baseType))||[],s=[];if(r.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(a){var i=a.replace(ane,"").match(ine);i&&s.push({v:ks(i[2]),t:i[1]})}),s}var W8=/(^\s|\s$|\n)/;function xo(t,e){return"<"+t+(e.match(W8)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Sx(t){return Ma(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Xt(t,e,n){return"<"+t+(n!=null?Sx(n):"")+(e!=null?(e.match(W8)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function yS(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function one(t,e){switch(typeof t){case"string":var n=Xt("vt:lpwstr",Cs(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Xt((t|0)==t?"vt:i4":"vt:r8",Cs(String(t)));case"boolean":return Xt("vt:bool",t?"true":"false")}if(t instanceof Date)return Xt("vt:filetime",yS(t));throw new Error("Unable to serialize "+t)}function n4(t){if(Br&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ks(Gf($5(t)));throw new Error("Bad input format: expected Buffer or string")}var Tx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Bi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},n0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],gc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function lne(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return r==2047?s==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}function cne(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[n+o]=a&255;t[n+6]=(s&15)<<4|a&15,t[n+7]=s>>4|r}var DF=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var s=0,a=t[0][r].length;s<a;s+=n)e.push.apply(e,t[0][r].slice(s,s+n));return e},LF=Br?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:md(e)})):DF(t)}:DF,RF=function(t,e,n){for(var r=[],s=e;s<n;s+=2)r.push(String.fromCharCode(YA(t,s)));return r.join("").replace(yl,"")},r4=Br?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(yl,""):RF(t,e,n)}:RF,PF=function(t,e,n){for(var r=[],s=e;s<e+n;++s)r.push(("0"+t[s].toString(16)).slice(-2));return r.join("")},Y8=Br?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):PF(t,e,n)}:PF,MF=function(t,e,n){for(var r=[],s=e;s<n;s++)r.push(String.fromCharCode(om(t,s)));return r.join("")},pv=Br?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):MF(e,n,r)}:MF,X8=function(t,e){var n=xc(t,e);return n>0?pv(t,e+4,e+4+n-1):""},J8=X8,Z8=function(t,e){var n=xc(t,e);return n>0?pv(t,e+4,e+4+n-1):""},eO=Z8,tO=function(t,e){var n=2*xc(t,e);return n>0?pv(t,e+4,e+4+n-1):""},nO=tO,rO=function(e,n){var r=xc(e,n);return r>0?r4(e,n+4,n+4+r):""},sO=rO,aO=function(t,e){var n=xc(t,e);return n>0?pv(t,e+4,e+4+n):""},iO=aO,oO=function(t,e){return lne(t,e)},Pw=oO,s4=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Br&&(J8=function(e,n){if(!Buffer.isBuffer(e))return X8(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},eO=function(e,n){if(!Buffer.isBuffer(e))return Z8(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},nO=function(e,n){if(!Buffer.isBuffer(e))return tO(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},sO=function(e,n){if(!Buffer.isBuffer(e))return rO(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},iO=function(e,n){if(!Buffer.isBuffer(e))return aO(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},Pw=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):oO(e,n)},s4=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var om=function(t,e){return t[e]},YA=function(t,e){return t[e+1]*256+t[e]},une=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},xc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},vh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Ane=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function $g(t,e){var n="",r,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,Br&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(YA(this,u)),u+=2;t*=2;break;case"utf8":n=pv(this,this.l,this.l+t);break;case"utf16le":t*=2,n=r4(this,this.l,this.l+t);break;case"wstr":return $g.call(this,t,"dbcs");case"lpstr-ansi":n=J8(this,this.l),t=4+xc(this,this.l);break;case"lpstr-cp":n=eO(this,this.l),t=4+xc(this,this.l);break;case"lpwstr":n=nO(this,this.l),t=4+2*xc(this,this.l);break;case"lpp4":t=4+xc(this,this.l),n=sO(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+xc(this,this.l),n=iO(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(i=om(this,this.l+t++))!==0;)a.push(O1(i));n=a.join("");break;case"_wstr":for(t=0,n="";(i=YA(this,this.l+t))!==0;)a.push(O1(i)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=om(this,u),this.l=u+1,o=$g.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(O1(YA(this,u))),u+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=om(this,u),this.l=u+1,o=$g.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(O1(om(this,u))),u+=1}n=a.join("");break;default:switch(t){case 1:return r=om(this,this.l),this.l++,r;case 2:return r=(e==="i"?une:YA)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?vh:Ane)(this,this.l),this.l+=4,r):(s=xc(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=Pw(this,this.l):s=Pw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:n=Y8(this,this.l,t);break}}return this.l+=t,n}var dne=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},fne=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},hne=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function mne(t,e,n){var r=0,s=0;if(n==="dbcs"){for(s=0;s!=e.length;++s)hne(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(n==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,dne(this,e,this.l);break;case 8:if(r=8,n==="f"){cne(this,e,this.l);break}case 16:break;case-4:r=4,fne(this,e,this.l);break}return this.l+=r,this}function lO(t,e){var n=Y8(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function po(t,e){t.l=e,t.read_shift=$g,t.chk=lO,t.write_shift=mne}function Jo(t,e){t.l+=e}function yt(t){var e=Mf(t);return po(e,0),e}function pd(t,e,n){if(t){var r,s,a;po(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=Dx[o]||Dx[65535];for(r=t.read_shift(1),a=r&127,s=1;s<4&&r&128;++s)a+=((r=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,n);if(t.l=l,e(d,u,o))return}}}function $l(){var t=[],e=Br?256:2048,n=function(u){var d=yt(u);return po(d,0),d},r=n(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(u){return r&&u<r.length-r.l?r:(s(),r=n(Math.max(u+1,e)))},i=function(){return s(),$i(t)},o=function(u){s(),r=u,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function Mt(t,e,n,r){var s=+e,a;if(!isNaN(s)){r||(r=Dx[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&s4(n)&&t.push(n)}}function Wg(t,e,n){var r=ta(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function UF(t,e,n){var r=ta(t);return r.s=Wg(r.s,e.s,n),r.e=Wg(r.e,e.s,n),r}function Yg(t,e){if(t.cRel&&t.c<0)for(t=ta(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ta(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=Kn(t);return!t.cRel&&t.cRel!=null&&(n=xne(n)),!t.rRel&&t.rRel!=null&&(n=pne(n)),n}function IC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+pa(t.s.c)+":"+(t.e.cRel?"":"$")+pa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Za(t.s.r)+":"+(t.e.rRel?"":"$")+Za(t.e.r):Yg(t.s,e.biff)+":"+Yg(t.e,e.biff)}function a4(t){return parseInt(gne(t),10)-1}function Za(t){return""+(t+1)}function pne(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function gne(t){return t.replace(/\$(\d+)$/,"$1")}function i4(t){for(var e=vne(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function pa(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function xne(t){return t.replace(/^([A-Z])/,"$$$1")}function vne(t){return t.replace(/^\$([A-Z])/,"$1")}function yne(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ga(t){for(var e=0,n=0,r=0;r<t.length;++r){var s=t.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:e-1}}function Kn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Yl(t){var e=t.indexOf(":");return e==-1?{s:ga(t),e:ga(t)}:{s:ga(t.slice(0,e)),e:ga(t.slice(e+1))}}function mr(t,e){return typeof e>"u"||typeof e=="number"?mr(t.s,t.e):(typeof t!="string"&&(t=Kn(t)),typeof e!="string"&&(e=Kn(e)),t==e?t:t+":"+e)}function ns(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=t.length;for(n=0;r<a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.s.c=--n,n=0;r<a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(e.s.r=--n,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((s=t.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(e.e.c=--n,n=0;r!=a&&!((s=t.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return e.e.r=--n,e}function OF(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=iu(t.z,n?Ii(e):e)}catch{}try{return t.w=iu((t.XF||{}).numFmtId||(n?14:0),n?Ii(e):e)}catch{return""+e}}function cd(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?gd[t.v]||t.v:e==null?OF(t,t.v):OF(t,e))}function qf(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function cO(t,e,n){var r=n||{},s=t?Array.isArray(t):r.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?ga(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=ns(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var m=0;m!=e.length;++m)if(e[m]){if(!Array.isArray(e[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[m].length;++p)if(!(typeof e[m][p]>"u")){var x={v:e[m][p]},C=i+m,y=o+p;if(u.s.r>C&&(u.s.r=C),u.s.c>y&&(u.s.c=y),u.e.r<C&&(u.e.r=C),u.e.c<y&&(u.e.c=y),e[m][p]&&typeof e[m][p]=="object"&&!Array.isArray(e[m][p])&&!(e[m][p]instanceof Date))x=e[m][p];else if(Array.isArray(x.v)&&(x.f=e[m][p][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(r.nullError)x.t="e",x.v=0;else if(r.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=r.dateNF||Vn[14],r.cellDates?(x.t="d",x.w=iu(x.z,Ii(x.v))):(x.t="n",x.v=Ii(x.v),x.w=iu(x.z,x.v))):x.t="s";if(s)a[C]||(a[C]=[]),a[C][y]&&a[C][y].z&&(x.z=a[C][y].z),a[C][y]=x;else{var T=Kn({c:y,r:C});a[T]&&a[T].z&&(x.z=a[T].z),a[T]=x}}}return u.s.c<1e7&&(a["!ref"]=mr(u)),a}function Ap(t,e){return cO(null,t,e)}function wne(t){return t.read_shift(4,"i")}function Fu(t,e){return e||(e=yt(4)),e.write_shift(4,t),e}function Yo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Wi(t,e){var n=!1;return e==null&&(n=!0,e=yt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function bne(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function _ne(t,e){return e||(e=yt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function o4(t,e){var n=t.l,r=t.read_shift(1),s=Yo(t),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(bne(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=n+e,i}function Cne(t,e){var n=!1;return e==null&&(n=!0,e=yt(15+4*t.t.length)),e.write_shift(1,0),Wi(t.t,e),n?e.slice(0,e.l):e}var Ene=o4;function Sne(t,e){var n=!1;return e==null&&(n=!0,e=yt(23+4*t.t.length)),e.write_shift(1,1),Wi(t.t,e),e.write_shift(4,1),_ne({},e),n?e.slice(0,e.l):e}function ou(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function r0(t,e){return e==null&&(e=yt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function s0(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function a0(t,e){return e==null&&(e=yt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Tne=Yo,uO=Wi;function l4(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Mw(t,e){var n=!1;return e==null&&(n=!0,e=yt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Nne=Yo,wS=l4,c4=Mw;function u4(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var s=r===0?Pw([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):vh(e,0)>>2;return n?s/100:s}function AO(t,e){e==null&&(e=yt(4));var n=0,r=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?s:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function dO(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Bne(t,e){return e||(e=yt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var i0=dO,dp=Bne;function $o(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function zh(t,e){return(e||yt(8)).write_shift(8,t,"f")}function kne(t){var e={},n=t.read_shift(1),r=n>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var u=kh[s];u&&(e.rgb=Bx(u));break;case 2:e.rgb=Bx([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Uw(t,e){if(e||(e=yt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Ine(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function Fne(t,e){e||(e=yt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function fO(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=t.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function Dne(t){return fO(t,1)}function Lne(t){return fO(t,2)}var A4=2,Hl=3,Q1=11,jF=12,Ow=19,H1=64,Rne=65,Pne=71,Mne=4108,Une=4126,qi=80,hO=81,One=[qi,hO],bS={1:{n:"CodePage",t:A4},2:{n:"Category",t:qi},3:{n:"PresentationFormat",t:qi},4:{n:"ByteCount",t:Hl},5:{n:"LineCount",t:Hl},6:{n:"ParagraphCount",t:Hl},7:{n:"SlideCount",t:Hl},8:{n:"NoteCount",t:Hl},9:{n:"HiddenCount",t:Hl},10:{n:"MultimediaClipCount",t:Hl},11:{n:"ScaleCrop",t:Q1},12:{n:"HeadingPairs",t:Mne},13:{n:"TitlesOfParts",t:Une},14:{n:"Manager",t:qi},15:{n:"Company",t:qi},16:{n:"LinksUpToDate",t:Q1},17:{n:"CharacterCount",t:Hl},19:{n:"SharedDoc",t:Q1},22:{n:"HyperlinksChanged",t:Q1},23:{n:"AppVersion",t:Hl,p:"version"},24:{n:"DigSig",t:Rne},26:{n:"ContentType",t:qi},27:{n:"ContentStatus",t:qi},28:{n:"Language",t:qi},29:{n:"Version",t:qi},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},_S={1:{n:"CodePage",t:A4},2:{n:"Title",t:qi},3:{n:"Subject",t:qi},4:{n:"Author",t:qi},5:{n:"Keywords",t:qi},6:{n:"Comments",t:qi},7:{n:"Template",t:qi},8:{n:"LastAuthor",t:qi},9:{n:"RevNumber",t:qi},10:{n:"EditTime",t:H1},11:{n:"LastPrinted",t:H1},12:{n:"CreatedDate",t:H1},13:{n:"ModifiedDate",t:H1},14:{n:"PageCount",t:Hl},15:{n:"WordCount",t:Hl},16:{n:"CharCount",t:Hl},17:{n:"Thumbnail",t:Pne},18:{n:"Application",t:qi},19:{n:"DocSecurity",t:Hl},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},QF={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},jne=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Qne(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Hne=Qne([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),kh=ta(Hne),gd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},mO={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},CS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},V1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function d4(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Vne(t){var e=d4();if(!t||!t.match)return e;var n={};if((t.match(el)||[]).forEach(function(r){var s=Jn(r);switch(s[0].replace(Zte,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[s.Extension]=s.ContentType;break;case"<Override":e[CS[s.ContentType]]!==void 0&&e[CS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Bi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function pO(t,e){var n=Vte(CS),r=[],s;r[r.length]=ei,r[r.length]=Xt("Types",null,{xmlns:Bi.CT,"xmlns:xsd":Bi.xsd,"xmlns:xsi":Bi.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Xt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],r[r.length]=Xt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:V1[l][e.bookType]||V1[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Xt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:V1[l][e.bookType]||V1[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){r[r.length]=Xt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:n[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Fr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Nx(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Xg(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(t.match(el)||[]).forEach(function(s){var a=Jn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Sg(a.Target,e);n[o]=i,r[a.Id]=i}}),n["!id"]=r,n}function Sm(t){var e=[ei,Xt("Relationships",null,{xmlns:Bi.RELS})];return Ma(t["!id"]).forEach(function(n){e[e.length]=Xt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function bs(t,e,n,r,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=n,[Fr.HLINK,Fr.XPATH,Fr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var zne="application/vnd.oasis.opendocument.spreadsheet";function Gne(t,e){for(var n=n4(t),r,s;r=Tx.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(s=Jn(r[0],!1),s.path=="/"&&s.type!==zne)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function qne(t){var e=[ei];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function HF(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Kne(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function $ne(t){var e=[ei];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(HF(t[n][0],t[n][1])),e.push(Kne("",t[n][0]));return e.push(HF("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function gO(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Iw.version+"</meta:generator></office:meta></office:document-meta>"}var su=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Wne=function(){for(var t=new Array(su.length),e=0;e<su.length;++e){var n=su[e],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return t}();function xO(t){var e={};t=ks(t);for(var n=0;n<su.length;++n){var r=su[n],s=t.match(Wne[n]);s!=null&&s.length>0&&(e[r[1]]=ts(s[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=ea(e[r[1]]))}return e}function FC(t,e,n,r,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Cs(e),r[r.length]=n?Xt(t,e,n):xo(t,e))}function vO(t,e){var n=e||{},r=[ei,Xt("cp:coreProperties",null,{"xmlns:cp":Bi.CORE_PROPS,"xmlns:dc":Bi.dc,"xmlns:dcterms":Bi.dcterms,"xmlns:dcmitype":Bi.dcmitype,"xmlns:xsi":Bi.xsi})],s={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&FC("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:yS(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),t.ModifiedDate!=null&&FC("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:yS(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=su.length;++a){var i=su[a],o=n.Props&&n.Props[i[1]]!=null?n.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&FC(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Ih=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yO=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wO(t,e,n,r){var s=[];if(typeof t=="string")s=FF(t,r);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?FF(e,r).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l);break}o+=l}}function Yne(t,e,n){var r={};return e||(e={}),t=ks(t),Ih.forEach(function(s){var a=(t.match(Ex(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=ts(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(r[s[1]]=i[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&wO(r.HeadingPairs,r.TitlesOfParts,e,n),e}function bO(t){var e=[],n=Xt;return t||(t={}),t.Application="SheetJS",e[e.length]=ei,e[e.length]=Xt("Properties",null,{xmlns:Bi.EXT_PROPS,"xmlns:vt":Bi.vt}),Ih.forEach(function(r){if(t[r[1]]!==void 0){var s;switch(r[2]){case"string":s=Cs(String(t[r[1]]));break;case"bool":s=t[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=n(r[0],s))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Cs(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Xne=/<[^>]+>[^<]*/g;function Jne(t,e){var n={},r="",s=t.match(Xne);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Jn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=ts(o.name);break;case"</property>":r=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":n[r]=ts(d);break;case"bool":n[r]=Js(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=ea(d);break;case"cy":case"error":n[r]=ts(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return n}function _O(t){var e=[ei,Xt("Properties",null,{xmlns:Bi.CUST_PROPS,"xmlns:vt":Bi.vt})];if(!t)return e.join("");var n=1;return Ma(t).forEach(function(s){++n,e[e.length]=Xt("property",one(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Cs(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var ES={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},DC;function Zne(t,e,n){DC||(DC=nb(ES)),e=DC[e]||e,t[e]=n}function ere(t,e){var n=[];return Ma(ES).map(function(r){for(var s=0;s<su.length;++s)if(su[s][1]==r)return su[s];for(s=0;s<Ih.length;++s)if(Ih[s][1]==r)return Ih[s];throw r}).forEach(function(r){if(t[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(xo(ES[r[1]]||r[1],s))}}),Xt("DocumentProperties",n.join(""),{xmlns:gc.o})}function tre(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return t&&Ma(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<su.length;++i)if(a==su[i][1])return;for(i=0;i<Ih.length;++i)if(a==Ih[i][1])return;for(i=0;i<n.length;++i)if(a==n[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Xt(NF(a),o,{"dt:dt":l}))}}),e&&Ma(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Xt(NF(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+gc.o+'">'+s.join("")+"</"+r+">"}function f4(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nre(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),s=(n-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=yt(8);return i.write_shift(4,r),i.write_shift(4,s),i}function CO(t,e,n){var r=t.l,s=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-r&3;)++t.l;return s}function EO(t,e,n){var r=t.read_shift(0,"lpwstr");return r}function SO(t,e,n){return e===31?EO(t):CO(t,e,n)}function SS(t,e,n){return SO(t,e,n===!1?0:4)}function rre(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return SO(t,e,0)}function sre(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r){var s=t.l;n[r]=t.read_shift(0,"lpwstr").replace(yl,""),t.l-s&2&&(t.l+=2)}return n}function are(t){for(var e=t.read_shift(4),n=[],r=0;r!=e;++r)n[r]=t.read_shift(0,"lpstr-cp").replace(yl,"");return n}function ire(t){var e=t.l,n=jw(t,hO);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var r=jw(t,Hl);return[n,r]}function ore(t){for(var e=t.read_shift(4),n=[],r=0;r<e/2;++r)n.push(ire(t));return n}function VF(t,e){for(var n=t.read_shift(4),r={},s=0;s!=n;++s){var a=t.read_shift(4),i=t.read_shift(4);r[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(yl,"").replace(Eg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),r}function TO(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function lre(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function jw(t,e,n){var r=t.read_shift(2),s,a=n||{};if(t.l+=2,e!==jF&&r!==e&&One.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===jF?r:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return CO(t,r,4).replace(yl,"");case 31:return EO(t);case 64:return f4(t);case 65:return TO(t);case 71:return lre(t);case 80:return SS(t,r,!a.raw).replace(yl,"");case 81:return rre(t,r).replace(yl,"");case 4108:return ore(t);case 4126:case 4127:return r==4127?sre(t):are(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function zF(t,e){var n=yt(4),r=yt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=yt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=nre(e);break;case 31:case 80:for(r=yt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return $i([n,r])}function GF(t,e){var n=t.l,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),m=t.read_shift(4);a[i]=[d,m+n]}a.sort(function(F,M){return F[1]-M[1]});var p={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var x=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,x=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],x=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],x=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(x=!1,t.l=a[i][1]),x)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var C=e[a[i][0]];if(p[C.n]=jw(t,C.t,{raw:!0}),C.p==="version"&&(p[C.n]=String(p[C.n]>>16)+"."+("0000"+String(p[C.n]&65535)).slice(-4)),C.n=="CodePage")switch(p[C.n]){case 0:p[C.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Bu(o=p[C.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[C.n])}}else if(a[i][0]===1){if(o=p.CodePage=jw(t,A4),Bu(o),l!==-1){var y=t.l;t.l=a[l][1],u=VF(t,o),t.l=y}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=VF(t,o)}else{var T=u[a[i][0]],I;switch(t[t.l]){case 65:t.l+=4,I=TO(t);break;case 30:t.l+=4,I=SS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,I=SS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,I=t.read_shift(4,"i");break;case 19:t.l+=4,I=t.read_shift(4);break;case 5:t.l+=4,I=t.read_shift(8,"f");break;case 11:t.l+=4,I=qa(t,4);break;case 64:t.l+=4,I=ea(f4(t));break;default:throw new Error("unparsed value: "+t[t.l])}p[T]=I}}return t.l=n+r,p}var NO=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function cre(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function qF(t,e,n){var r=yt(8),s=[],a=[],i=8,o=0,l=yt(8),u=yt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=yt(8),u.write_shift(4,0),s.unshift(u);var d=[yt(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var m=t[o][0];for(l=yt(8+2*(m.length+1)+(m.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,m.length+1),l.write_shift(0,m,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=$i(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(NO.indexOf(t[o][0])>-1||yO.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],x=0;if(e){x=+e[t[o][0]];var C=n[x];if(C.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}l=zF(C.t,p)}else{var T=cre(p);T==-1&&(T=31,p=String(p)),l=zF(T,p)}a.push(l),u=yt(8),u.write_shift(4,e?x:2+o),s.push(u),i+=8+l.length}var I=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,I),I+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),$i([r].concat(s).concat(a))}function KF(t,e,n){var r=t.content;if(!r)return{};po(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),d=r.read_shift(16);if(d!==Nn.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(s=r.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),s===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);s===2&&(i=r.read_shift(16),l=r.read_shift(4));var m=GF(r,e),p={SystemIdentifier:u};for(var x in m)p[x]=m[x];if(p.FMTID=a,s===1)return p;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var C;try{C=GF(r,null)}catch{}for(x in C)p[x]=C[x];return p.FMTID=[a,i],p}function $F(t,e,n,r,s,a){var i=yt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Nn.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=qF(t,n,r);if(o.push(l),s){var u=qF(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return $i(o)}function Gd(t,e){return t.read_shift(e),null}function ure(t,e){e||(e=yt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Are(t,e,n){for(var r=[],s=t.l+e;t.l<s;)r.push(n(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return r}function qa(t,e){return t.read_shift(e)===1}function gl(t,e){return e||(e=yt(2)),e.write_shift(2,+!!t),e}function fi(t){return t.read_shift(2,"u")}function Wc(t,e){return e||(e=yt(2)),e.write_shift(2,t),e}function BO(t,e){return Are(t,e,fi)}function dre(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function kO(t,e,n){return n||(n=yt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function gv(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?t.read_shift(r,s):"";return i}function fre(t){var e=t.read_shift(2),n=t.read_shift(1),r=n&4,s=n&8,a=1+(n&1),i=0,o,l={};s&&(i=t.read_shift(2)),r&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),r&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function hre(t){var e=t.t||"",n=yt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=yt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[n,r];return $i(s)}function Gh(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function xv(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):Gh(t,r,n)}function o0(t,e,n){if(n.biff>5)return xv(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function IO(t,e,n){return n||(n=yt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function mre(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function pre(t){var e=t.read_shift(4),n=t.l,r=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),t.l=n);var s=t.read_shift((r?e-24:e)>>1,"utf16le").replace(yl,"");return r&&(t.l+=24),s}function gre(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var r=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return n+r.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(yl,"");return n+i}function xre(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return pre(t);case"0303000000000000c000000000000046":return gre(t);default:throw new Error("Unsupported Moniker "+n)}}function z1(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(yl,""):"";return n}function WF(t,e){e||(e=yt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function vre(t,e){var n=t.l+e,r=t.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,m;s&16&&(a=z1(t,n-t.l)),s&128&&(i=z1(t,n-t.l)),(s&257)===257&&(o=z1(t,n-t.l)),(s&257)===1&&(l=xre(t,n-t.l)),s&8&&(u=z1(t,n-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(m=f4(t)),t.l=n;var p=i||o||l||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var x={Target:p};return d&&(x.guid=d),m&&(x.time=m),a&&(x.Tooltip=a),x}function yre(t){var e=yt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)e.write_shift(4,i[n]);if(a==28)r=r.slice(1),WF(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)e.write_shift(2,o.charCodeAt(n));e.write_shift(2,0),a&8&&WF(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)e.write_shift(1,parseInt(i[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function FO(t){var e=t.read_shift(1),n=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1);return[e,n,r,s]}function DO(t,e){var n=FO(t);return n[3]=0,n}function SA(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return{r:e,c:n,ixfe:r}}function qh(t,e,n,r){return r||(r=yt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function wre(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function bre(t,e,n){return e===0?"":o0(t,e,n)}function _re(t,e,n){var r=n.biff>8?4:2,s=t.read_shift(r),a=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[s,a,i]}function LO(t){var e=t.read_shift(2),n=u4(t);return[e,n]}function Cre(t,e,n){t.l+=4,e-=4;var r=t.l+e,s=gv(t,e,n),a=t.read_shift(2);if(r-=t.l,a!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return t.l+=a,s}function ab(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:n}}}function RO(t,e){return e||(e=yt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function PO(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(1),s=t.read_shift(1);return{s:{c:r,r:e},e:{c:s,r:n}}}var Ere=PO;function MO(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2);return t.l+=12,[n,e,r]}function Sre(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Tre(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Uo(t){t.l+=2,t.l+=t.read_shift(2)}var Nre={0:Uo,4:Uo,5:Uo,6:Uo,7:Tre,8:Uo,9:Uo,10:Uo,11:Uo,12:Uo,13:Sre,14:Uo,15:Uo,16:Uo,17:Uo,18:Uo,19:Uo,20:Uo,21:MO};function Bre(t,e){for(var n=t.l+e,r=[];t.l<n;){var s=t.read_shift(2);t.l-=2;try{r.push(Nre[s](t,n-t.l))}catch{return t.l=n,r}}return t.l!=n&&(t.l=n),r}function G1(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function h4(t,e,n){var r=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=yt(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function kre(t,e){return e===0||t.read_shift(2),1200}function Ire(t,e,n){if(n.enc)return t.l+=e,"";var r=t.l,s=o0(t,0,n);return t.read_shift(e+r-t.l),s}function Fre(t,e){var n=!e||e.biff==8,r=yt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function Dre(t,e,n){var r=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function Lre(t,e,n){var r=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=gv(t,0,n);return i.length===0&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}function Rre(t,e){var n=!e||e.biff>=8?2:1,r=yt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function Pre(t,e){for(var n=t.l+e,r=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<n;++i)a.push(fre(t));return a.Count=r,a.Unique=s,a}function Mre(t,e){var n=yt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],s=0;s<t.length;++s)r[s]=hre(t[s]);var a=$i([n].concat(r));return a.parts=[n.length].concat(r.map(function(i){return i.length})),a}function Ure(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function Ore(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var r=t.read_shift(1);return t.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=n/20),e}function jre(t){var e=wre(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function Qre(t){return t.read_shift(2),t.read_shift(4)}function YF(t,e,n){var r=0;n&&n.biff==2||(r=t.read_shift(2));var s=t.read_shift(2);n&&n.biff==2&&(r=1-(s>>15),s&=32767);var a={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[a,s]}function Hre(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,n],Dim:[r,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Vre(){var t=yt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function zre(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=t.read_shift(2);return{RTL:r&64}}function Gre(t){var e=yt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function qre(){}function Kre(t,e,n){var r={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return r.name=gv(t,0,n),r}function $re(t,e){var n=t.name||"Arial",r=e&&e.biff==5,s=r?15+n.length:16+2*n.length,a=yt(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function Wre(t){var e=SA(t);return e.isst=t.read_shift(4),e}function Yre(t,e,n,r){var s=yt(10);return qh(t,e,r,s),s.write_shift(4,n),s}function Xre(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=t.l+e,s=SA(t);n.biff==2&&t.l++;var a=xv(t,r-t.l,n);return s.val=a,s}function Jre(t,e,n,r,s){var a=!s||s.biff==8,i=yt(8+ +a+(1+a)*n.length);return qh(t,e,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}function Zre(t,e,n){var r=t.read_shift(2),s=o0(t,0,n);return[r,s]}function ese(t,e,n,r){var s=n&&n.biff==5;r||(r=yt(s?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}var tse=o0;function XF(t,e,n){var r=t.l+e,s=n.biff==8||!n.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function nse(t,e){var n=e.biff==8||!e.biff?4:2,r=yt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function rse(t){var e=t.read_shift(2),n=t.read_shift(2),r=LO(t);return{r:e,c:n,ixfe:r[0],rknum:r[1]}}function sse(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(LO(t));if(t.l!==n)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r,c:s,C:i,rkrec:a}}function ase(t,e){for(var n=t.l+e-2,r=t.read_shift(2),s=t.read_shift(2),a=[];t.l<n;)a.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r,c:s,C:i,ixfe:a}}function ise(t,e,n,r){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=jne[o>>26],r.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function ose(t,e,n){var r={};return r.ifnt=t.read_shift(2),r.numFmtId=t.read_shift(2),r.flags=t.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=ise(t,e,r.fStyle,n),r}function JF(t,e,n,r){var s=n&&n.biff==5;r||(r=yt(s?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function lse(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function cse(t){var e=yt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function ZF(t,e,n){var r=SA(t);(n.biff==2||e==9)&&++t.l;var s=dre(t);return r.val=s,r.t=s===!0||s===!1?"b":"e",r}function use(t,e,n,r,s,a){var i=yt(8);return qh(t,e,r,i),kO(n,a,i),i}function Ase(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=SA(t),s=$o(t);return r.val=s,r}function dse(t,e,n,r){var s=yt(14);return qh(t,e,r,s),zh(n,s),s}var eD=bre;function fse(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(n.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Gh(t,a),o=[];r>t.l;)o.push(xv(t));return[a,s,i,o]}function tD(t,e,n){var r=t.read_shift(2),s,a={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(s=Cre(t,e-2,n)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var hse=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function nD(t,e,n){var r=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),l=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var u=Gh(t,i,n);s&32&&(u=hse[u.charCodeAt(0)]);var d=r-t.l;n&&n.biff==2&&--d;var m=r==t.l||o===0||!(d>0)?[]:Ble(t,d,n,o);return{chKey:a,Name:u,itab:l,rgce:m}}function UO(t,e,n){if(n.biff<8)return mse(t,e,n);for(var r=[],s=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(_re(t,n.biff>8?12:6,n));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return r}function mse(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=gv(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function pse(t,e,n){if(n.biff<8){t.l+=e;return}var r=t.read_shift(2),s=t.read_shift(2),a=Gh(t,r,n),i=Gh(t,s,n);return[a,i]}function gse(t,e,n){var r=PO(t);t.l++;var s=t.read_shift(1);return e-=8,[kle(t,e,n),s,r]}function rD(t,e,n){var r=Ere(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[r,Tle(t,e,n)]}function xse(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,r=t.read_shift(4);return[e,n,r]}function vse(t,e,n){if(!(n.biff<8)){var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=o0(t,0,n);return n.biff<8&&t.read_shift(1),[{r,c:s},o,i,a]}}function yse(t,e,n){return vse(t,e,n)}function wse(t,e){for(var n=[],r=t.read_shift(2);r--;)n.push(ab(t));return n}function bse(t){var e=yt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)RO(t[n],e);return e}function _se(t,e,n){if(n&&n.biff<8)return Ese(t,e,n);var r=MO(t),s=Bre(t,e-22,r[1]);return{cmo:r,ft:s}}var Cse={8:function(t,e){var n=t.l+e;t.l+=10;var r=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=n,{fmt:r}}};function Ese(t,e,n){t.l+=4;var r=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((Cse[r]||Jo)(t,e,n)),{cmo:[s,r,a],ft:i}}function Sse(t,e,n){var r=t.l,s="";try{t.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=mre(t,6,n);var o=t.read_shift(2);t.read_shift(2),fi(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-r!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],m=Gh(t,t.lens[u+1]-t.lens[u]-1);if(s+=m,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=r+e,{t:s}}catch{return t.l=r+e,{t:s}}}function Tse(t,e){var n=ab(t);t.l+=16;var r=vre(t,e-24);return[n,r]}function Nse(t){var e=yt(24),n=ga(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return $i([e,yre(t[1])])}function Bse(t,e){t.read_shift(2);var n=ab(t),r=t.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(yl,""),[n,r]}function kse(t){var e=t[1].Tooltip,n=yt(10+2*(e.length+1));n.write_shift(2,2048);var r=ga(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<e.length;++s)n.write_shift(2,e.charCodeAt(s));return n.write_shift(2,0),n}function Ise(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=QF[n]||n,n=t.read_shift(2),e[1]=QF[n]||n,e}function Fse(t){return t||(t=yt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Dse(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(DO(t));return n}function Lse(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(DO(t));return n}function Rse(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function OO(t,e,n){if(!n.cellStyles)return Jo(t,e);var r=n&&n.biff>=12?4:2,s=t.read_shift(r),a=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function Pse(t,e){var n=yt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Mse(t,e){var n={};return e<32||(t.l+=16,n.header=$o(t),n.footer=$o(t),t.l+=2),n}function Use(t,e,n){var r={area:!1};if(n.biff!=5)return t.l+=e,r;var s=t.read_shift(1);return t.l+=3,s&16&&(r.area=!0),r}function Ose(t){for(var e=yt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var jse=SA,Qse=BO,Hse=xv;function Vse(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s={fmt:e,env:n,len:r,data:t.slice(t.l,t.l+r)};return t.l+=r,s}function zse(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=SA(t);++t.l;var s=o0(t,e-7,n);return r.t="str",r.val=s,r}function Gse(t){var e=SA(t);++t.l;var n=$o(t);return e.t="n",e.val=n,e}function qse(t,e,n){var r=yt(15);return bv(r,t,e),r.write_shift(8,n,"f"),r}function Kse(t){var e=SA(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function $se(t,e,n){var r=yt(9);return bv(r,t,e),r.write_shift(2,n),r}function Wse(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Yse(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Xse(t,e,n){var r=t.l+e,s=SA(t),a=t.read_shift(2),i=Gh(t,a,n);return t.l=r,s.t="str",s.val=i,s}var Jse=[2,3,48,49,131,139,140,245],TS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=nb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var u=[],d=Mf(1);switch(l.type){case"base64":d=vc(Ec(o));break;case"binary":d=vc(o);break;case"buffer":case"array":d=o;break}po(d,0);var m=d.read_shift(1),p=!!(m&136),x=!1,C=!1;switch(m){case 2:break;case 3:break;case 48:x=!0,p=!0;break;case 49:x=!0,p=!0;break;case 131:break;case 139:break;case 140:C=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var y=0,T=521;m==2&&(y=d.read_shift(2)),d.l+=3,m!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),m!=2&&(T=d.read_shift(2));var I=d.read_shift(2),F=l.codepage||1252;m!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(F=t[d[d.l]]),d.l+=1,d.l+=2),C&&(d.l+=36);for(var M=[],O={},Q=Math.min(d.length,m==2?521:T-10-(x?264:0)),j=C?32:11;d.l<Q&&d[d.l]!=13;)switch(O={},O.name=bx.utils.decode(F,d.slice(d.l,d.l+j)).replace(/[\u0000\r\n].*$/g,""),d.l+=j,O.type=String.fromCharCode(d.read_shift(1)),m!=2&&!C&&(O.offset=d.read_shift(4)),O.len=d.read_shift(1),m==2&&(O.offset=d.read_shift(2)),O.dec=d.read_shift(1),O.name.length&&M.push(O),m!=2&&(d.l+=C?13:14),O.type){case"B":(!x||O.len!=8)&&l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(d[d.l]!==13&&(d.l=T-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=T;var E=0,S=0;for(u[0]=[],S=0;S!=M.length;++S)u[0][S]=M[S].name;for(;y-- >0;){if(d[d.l]===42){d.l+=I;continue}for(++d.l,u[++E]=[],S=0,S=0;S!=M.length;++S){var k=d.slice(d.l,d.l+M[S].len);d.l+=M[S].len,po(k,0);var z=bx.utils.decode(F,k);switch(M[S].type){case"C":z.trim().length&&(u[E][S]=z.replace(/\s+$/,""));break;case"D":z.length===8?u[E][S]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):u[E][S]=z;break;case"F":u[E][S]=parseFloat(z.trim());break;case"+":case"I":u[E][S]=C?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":u[E][S]=!0;break;case"N":case"F":u[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[E][S]="##MEMO##"+(C?parseInt(z.trim(),10):k.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(u[E][S]=+z||0);break;case"@":u[E][S]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":u[E][S]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":u[E][S]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][S]=-k.read_shift(-8,"f");break;case"B":if(x&&M[S].len==8){u[E][S]=k.read_shift(8,"f");break}case"G":case"P":k.l+=M[S].len;break;case"0":if(M[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+M[S].type)}}}if(m!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=M,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ap(n(o,u),u);return d["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,d}function s(o,l){try{return qf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Bu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=$l(),m=Vw(o,{header:1,raw:!0,cellDates:!0}),p=m[0],x=m.slice(1),C=o["!cols"]||[],y=0,T=0,I=0,F=1;for(y=0;y<p.length;++y){if(((C[y]||{}).DBF||{}).name){p[y]=C[y].DBF.name,++I;continue}if(p[y]!=null){if(++I,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(T=0;T<1024;++T)if(p.indexOf(p[y]+"_"+T)==-1){p[y]+="_"+T;break}}}}var M=ns(o["!ref"]),O=[],Q=[],j=[];for(y=0;y<=M.e.c-M.s.c;++y){var E="",S="",k=0,z=[];for(T=0;T<x.length;++T)x[T][y]!=null&&z.push(x[T][y]);if(z.length==0||p[y]==null){O[y]="?";continue}for(T=0;T<z.length;++T){switch(typeof z[T]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=z[T]instanceof Date?"D":"C";break;default:S="C"}k=Math.max(k,String(z[T]).length),E=E&&E!=S?"C":S}k>250&&(k=250),S=((C[y]||{}).DBF||{}).type,S=="C"&&C[y].DBF.len>k&&(k=C[y].DBF.len),E=="B"&&S=="N"&&(E="N",j[y]=C[y].DBF.dec,k=C[y].DBF.len),Q[y]=E=="C"||S=="N"?k:a[E]||0,F+=Q[y],O[y]=E}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,x.length),P.write_shift(2,296+32*I),P.write_shift(2,F),y=0;y<4;++y)P.write_shift(4,0);for(P.write_shift(4,0|(+e[N8]||3)<<8),y=0,T=0;y<p.length;++y)if(p[y]!=null){var R=d.next(32),G=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,G,"sbcs"),R.write_shift(1,O[y]=="?"?"C":O[y],"sbcs"),R.write_shift(4,T),R.write_shift(1,Q[y]||a[O[y]]||0),R.write_shift(1,j[y]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),T+=Q[y]||a[O[y]]||0}var q=d.next(264);for(q.write_shift(4,13),y=0;y<65;++y)q.write_shift(4,0);for(y=0;y<x.length;++y){var le=d.next(F);for(le.write_shift(1,0),T=0;T<p.length;++T)if(p[T]!=null)switch(O[T]){case"L":le.write_shift(1,x[y][T]==null?63:x[y][T]?84:70);break;case"B":le.write_shift(8,x[y][T]||0,"f");break;case"N":var ee="0";for(typeof x[y][T]=="number"&&(ee=x[y][T].toFixed(j[T]||0)),I=0;I<Q[T]-ee.length;++I)le.write_shift(1,32);le.write_shift(1,ee,"sbcs");break;case"D":x[y][T]?(le.write_shift(4,("0000"+x[y][T].getFullYear()).slice(-4),"sbcs"),le.write_shift(2,("00"+(x[y][T].getMonth()+1)).slice(-2),"sbcs"),le.write_shift(2,("00"+x[y][T].getDate()).slice(-2),"sbcs")):le.write_shift(8,"00000000","sbcs");break;case"C":var oe=String(x[y][T]!=null?x[y][T]:"").slice(0,Q[T]);for(le.write_shift(1,oe,"sbcs"),I=0;I<Q[T]-oe.length;++I)le.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),jO=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ma(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(p,x){var C=t[x];return typeof C=="number"?hF(C):C},r=function(p,x,C){var y=x.charCodeAt(0)-32<<4|C.charCodeAt(0)-48;return y==59?p:hF(y)};t["|"]=254;function s(p,x){switch(x.type){case"base64":return a(Ec(p),x);case"binary":return a(p,x);case"buffer":return a(Br&&Buffer.isBuffer(p)?p.toString("binary"):Gf(p),x);case"array":return a(Vh(p),x)}throw new Error("Unrecognized type "+x.type)}function a(p,x){var C=p.split(/[\n\r]+/),y=-1,T=-1,I=0,F=0,M=[],O=[],Q=null,j={},E=[],S=[],k=[],z=0,P;for(+x.codepage>=0&&Bu(+x.codepage);I!==C.length;++I){z=0;var R=C[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),G=R.replace(/;;/g,"\0").split(";").map(function(ie){return ie.replace(/\u0000/g,";")}),q=G[0],le;if(R.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":G[1].charAt(0)=="P"&&O.push(R.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,oe=!1,K=!1,ne=!1,X=-1,ce=-1;for(F=1;F<G.length;++F)switch(G[F].charAt(0)){case"A":break;case"X":T=parseInt(G[F].slice(1))-1,oe=!0;break;case"Y":for(y=parseInt(G[F].slice(1))-1,oe||(T=0),P=M.length;P<=y;++P)M[P]=[];break;case"K":le=G[F].slice(1),le.charAt(0)==='"'?le=le.slice(1,le.length-1):le==="TRUE"?le=!0:le==="FALSE"?le=!1:isNaN(Iu(le))?isNaN(Gm(le).getDate())||(le=ea(le)):(le=Iu(le),Q!==null&&cp(Q)&&(le=sb(le))),ee=!0;break;case"E":ne=!0;var V=Tm(G[F].slice(1),{r:y,c:T});M[y][T]=[M[y][T],V];break;case"S":K=!0,M[y][T]=[M[y][T],"S5S"];break;case"G":break;case"R":X=parseInt(G[F].slice(1))-1;break;case"C":ce=parseInt(G[F].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+R)}if(ee&&(M[y][T]&&M[y][T].length==2?M[y][T][0]=le:M[y][T]=le,Q=null),K){if(ne)throw new Error("SYLK shared formula cannot have own formula");var J=X>-1&&M[X][ce];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");M[y][T][1]=sj(J[1],{r:y-X,c:T-ce})}break;case"F":var re=0;for(F=1;F<G.length;++F)switch(G[F].charAt(0)){case"X":T=parseInt(G[F].slice(1))-1,++re;break;case"Y":for(y=parseInt(G[F].slice(1))-1,P=M.length;P<=y;++P)M[P]=[];break;case"M":z=parseInt(G[F].slice(1))/20;break;case"F":break;case"G":break;case"P":Q=O[parseInt(G[F].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=G[F].slice(1).split(" "),P=parseInt(k[0],10);P<=parseInt(k[1],10);++P)z=parseInt(k[2],10),S[P-1]=z===0?{hidden:!0}:{wch:z},Uf(S[P-1]);break;case"C":T=parseInt(G[F].slice(1))-1,S[T]||(S[T]={});break;case"R":y=parseInt(G[F].slice(1))-1,E[y]||(E[y]={}),z>0?(E[y].hpt=z,E[y].hpx=Km(z)):z===0&&(E[y].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+R)}re<1&&(Q=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+R)}}return E.length>0&&(j["!rows"]=E),S.length>0&&(j["!cols"]=S),x&&x.sheetRows&&(M=M.slice(0,x.sheetRows)),[M,j]}function i(p,x){var C=s(p,x),y=C[0],T=C[1],I=Ap(y,x);return Ma(T).forEach(function(F){I[F]=T[F]}),I}function o(p,x){return qf(i(p,x),x)}function l(p,x,C,y){var T="C;Y"+(C+1)+";X"+(y+1)+";K";switch(p.t){case"n":T+=p.v||0,p.f&&!p.F&&(T+=";E"+y4(p.f,{r:C,c:y}));break;case"b":T+=p.v?"TRUE":"FALSE";break;case"e":T+=p.w||p.v;break;case"d":T+='"'+(p.w||p.v)+'"';break;case"s":T+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function u(p,x){x.forEach(function(C,y){var T="F;W"+(y+1)+" "+(y+1)+" ";C.hidden?T+="0":(typeof C.width=="number"&&!C.wpx&&(C.wpx=kx(C.width)),typeof C.wpx=="number"&&!C.wch&&(C.wch=Ix(C.wpx)),typeof C.wch=="number"&&(T+=Math.round(C.wch))),T.charAt(T.length-1)!=" "&&p.push(T)})}function d(p,x){x.forEach(function(C,y){var T="F;";C.hidden?T+="M0;":C.hpt?T+="M"+20*C.hpt+";":C.hpx&&(T+="M"+20*Fx(C.hpx)+";"),T.length>2&&p.push(T+"R"+(y+1))})}function m(p,x){var C=["ID;PWXL;N;E"],y=[],T=ns(p["!ref"]),I,F=Array.isArray(p),M=`\r
`;C.push("P;PGeneral"),C.push("F;P0;DG0G8;M255"),p["!cols"]&&u(C,p["!cols"]),p["!rows"]&&d(C,p["!rows"]),C.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var O=T.s.r;O<=T.e.r;++O)for(var Q=T.s.c;Q<=T.e.c;++Q){var j=Kn({r:O,c:Q});I=F?(p[O]||[])[Q]:p[j],!(!I||I.v==null&&(!I.f||I.F))&&y.push(l(I,p,O,Q))}return C.join(M)+M+y.join(M)+M+"E"+M}return{to_workbook:o,to_sheet:i,from_sheet:m}}(),QO=function(){function t(a,i){switch(i.type){case"base64":return e(Ec(a),i);case"binary":return e(a,i);case"buffer":return e(Br&&Buffer.isBuffer(a)?a.toString("binary"):Gf(a),i);case"array":return e(Vh(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,m=[];d!==o.length;++d){if(o[d].trim()==="BOT"){m[++l]=[],u=0;continue}if(!(l<0)){var p=o[d].trim().split(","),x=p[0],C=p[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+x){case-1:if(y==="BOT"){m[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?m[l][u]=!0:y==="FALSE"?m[l][u]=!1:isNaN(Iu(C))?isNaN(Gm(C).getDate())?m[l][u]=C:m[l][u]=ea(C):m[l][u]=Iu(C),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),m[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(m=m.slice(0,i.sheetRows)),m}function n(a,i){return Ap(t(a,i),i)}function r(a,i){return qf(n(a,i),i)}var s=function(){var a=function(l,u,d,m,p){l.push(u),l.push(d+","+m),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,u,d,m){l.push(u+","+d),l.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(l){var u=[],d=ns(l["!ref"]),m,p=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var x=d.s.r;x<=d.e.r;++x){i(u,-1,0,"BOT");for(var C=d.s.c;C<=d.e.c;++C){var y=Kn({r:x,c:C});if(m=p?(l[x]||[])[C]:l[y],!m){i(u,1,0,"");continue}switch(m.t){case"n":var T=m.w;!T&&m.v!=null&&(T=m.v),T==null?m.f&&!m.F?i(u,1,0,"="+m.f):i(u,1,0,""):i(u,0,T,"V");break;case"b":i(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=iu(m.z||Vn[14],Ii(ea(m.v)))),i(u,0,m.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var I=`\r
`,F=u.join(I);return F}}();return{to_workbook:r,to_sheet:n,from_sheet:s}}(),HO=function(){function t(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(m,p){for(var x=m.split(`
`),C=-1,y=-1,T=0,I=[];T!==x.length;++T){var F=x[T].trim().split(":");if(F[0]==="cell"){var M=ga(F[1]);if(I.length<=M.r)for(C=I.length;C<=M.r;++C)I[C]||(I[C]=[]);switch(C=M.r,y=M.c,F[2]){case"t":I[C][y]=t(F[3]);break;case"v":I[C][y]=+F[3];break;case"vtf":var O=F[F.length-1];case"vtc":switch(F[3]){case"nl":I[C][y]=!!+F[4];break;default:I[C][y]=+F[4];break}F[2]=="vtf"&&(I[C][y]=[I[C][y],O])}}}return p&&p.sheetRows&&(I=I.slice(0,p.sheetRows)),I}function r(m,p){return Ap(n(m,p),p)}function s(m,p){return qf(r(m,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var p=[],x=[],C,y="",T=Yl(m["!ref"]),I=Array.isArray(m),F=T.s.r;F<=T.e.r;++F)for(var M=T.s.c;M<=T.e.c;++M)if(y=Kn({r:F,c:M}),C=I?(m[F]||[])[M]:m[y],!(!C||C.v==null||C.t==="z")){switch(x=["cell",y,"t"],C.t){case"s":case"str":x.push(e(C.v));break;case"n":C.f?(x[2]="vtf",x[3]="n",x[4]=C.v,x[5]=e(C.f)):(x[2]="v",x[3]=C.v);break;case"b":x[2]="vt"+(C.f?"f":"c"),x[3]="nl",x[4]=C.v?"1":"0",x[5]=e(C.f||(C.v?"TRUE":"FALSE"));break;case"d":var O=Ii(ea(C.v));x[2]="vtc",x[3]="nd",x[4]=""+O,x[5]=C.w||iu(C.z||Vn[14],O);break;case"e":continue}p.push(x.join(":"))}return p.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(m){return[a,i,o,i,u(m),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:d}}(),qm=function(){function t(d,m,p,x,C){C.raw?m[p][x]=d:d===""||(d==="TRUE"?m[p][x]=!0:d==="FALSE"?m[p][x]=!1:isNaN(Iu(d))?isNaN(Gm(d).getDate())?m[p][x]=d:m[p][x]=ea(d):m[p][x]=Iu(d))}function e(d,m){var p=m||{},x=[];if(!d||d.length===0)return x;for(var C=d.split(/[\r\n]/),y=C.length-1;y>=0&&C[y].length===0;)--y;for(var T=10,I=0,F=0;F<=y;++F)I=C[F].indexOf(" "),I==-1?I=C[F].length:I++,T=Math.max(T,I);for(F=0;F<=y;++F){x[F]=[];var M=0;for(t(C[F].slice(0,T).trim(),x,F,M,p),M=1;M<=(C[F].length-T)/10+1;++M)t(C[F].slice(T+(M-1)*10,T+M*10).trim(),x,F,M,p)}return p.sheetRows&&(x=x.slice(0,p.sheetRows)),x}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(d){for(var m={},p=!1,x=0,C=0;x<d.length;++x)(C=d.charCodeAt(x))==34?p=!p:!p&&C in n&&(m[C]=(m[C]||0)+1);C=[];for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&C.push([m[x],x]);if(!C.length){m=r;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&C.push([m[x],x])}return C.sort(function(y,T){return y[0]-T[0]||r[y[1]]-r[T[1]]}),n[C.pop()[1]]||44}function a(d,m){var p=m||{},x="",C=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(x=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(x=d.charAt(4),d=d.slice(6)):x=s(d.slice(0,1024)):p&&p.FS?x=p.FS:x=s(d.slice(0,1024));var T=0,I=0,F=0,M=0,O=0,Q=x.charCodeAt(0),j=!1,E=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var k=p.dateNF!=null?Ute(p.dateNF):null;function z(){var P=d.slice(M,O),R={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)R.t="z";else if(p.raw)R.t="s",R.v=P;else if(P.trim().length===0)R.t="s",R.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(R.t="s",R.v=P.slice(2,-1).replace(/""/g,'"')):foe(P)?(R.t="n",R.f=P.slice(1)):(R.t="s",R.v=P);else if(P=="TRUE")R.t="b",R.v=!0;else if(P=="FALSE")R.t="b",R.v=!1;else if(!isNaN(F=Iu(P)))R.t="n",p.cellText!==!1&&(R.w=P),R.v=F;else if(!isNaN(Gm(P).getDate())||k&&P.match(k)){R.z=p.dateNF||Vn[14];var G=0;k&&P.match(k)&&(P=Ote(P,p.dateNF,P.match(k)||[]),G=1),p.cellDates?(R.t="d",R.v=ea(P,G)):(R.t="n",R.v=Ii(ea(P,G))),p.cellText!==!1&&(R.w=iu(R.z,R.v instanceof Date?Ii(R.v):R.v)),p.cellNF||delete R.z}else R.t="s",R.v=P;if(R.t=="z"||(p.dense?(C[T]||(C[T]=[]),C[T][I]=R):C[Kn({c:I,r:T})]=R),M=O+1,S=d.charCodeAt(M),y.e.c<I&&(y.e.c=I),y.e.r<T&&(y.e.r=T),E==Q)++I;else if(I=0,++T,p.sheetRows&&p.sheetRows<=T)return!0}e:for(;O<d.length;++O)switch(E=d.charCodeAt(O)){case 34:S===34&&(j=!j);break;case Q:case 10:case 13:if(!j&&z())break e;break}return O-M>0&&z(),C["!ref"]=mr(y),C}function i(d,m){return!(m&&m.PRN)||m.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,m):Ap(e(d,m),m)}function o(d,m){var p="",x=m.type=="string"?[0,0,0,0]:N4(d,m);switch(m.type){case"base64":p=Ec(d);break;case"binary":p=d;break;case"buffer":m.codepage==65001?p=d.toString("utf8"):m.codepage&&typeof bx<"u"||(p=Br&&Buffer.isBuffer(d)?d.toString("binary"):Gf(d));break;case"array":p=Vh(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+m.type)}return x[0]==239&&x[1]==187&&x[2]==191?p=ks(p.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?p=ks(p):m.type=="binary"&&typeof bx<"u",p.slice(0,19)=="socialcalc:version:"?HO.to_sheet(m.type=="string"?p:ks(p),m):i(p,m)}function l(d,m){return qf(o(d,m),m)}function u(d){for(var m=[],p=ns(d["!ref"]),x,C=Array.isArray(d),y=p.s.r;y<=p.e.r;++y){for(var T=[],I=p.s.c;I<=p.e.c;++I){var F=Kn({r:y,c:I});if(x=C?(d[y]||[])[I]:d[F],!x||x.v==null){T.push("          ");continue}for(var M=(x.w||(cd(x),x.w)||"").slice(0,10);M.length<10;)M+=" ";T.push(M+(I===0?" ":""))}m.push(T.join(""))}return m.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function Zse(t,e){var n=e||{},r=!!n.WTF;n.WTF=!0;try{var s=jO.to_workbook(t,n);return n.WTF=r,s}catch(a){if(n.WTF=r,!a.message.match(/SYLK bad record ID/)&&r)throw a;return qm.to_workbook(t,e)}}var Fh=function(){function t(V,J,re){if(V){po(V,V.l||0);for(var ie=re.Enum||X;V.l<V.length;){var fe=V.read_shift(2),Se=ie[fe]||ie[65535],ve=V.read_shift(2),ye=V.l+ve,we=Se.f&&Se.f(V,ve,re);if(V.l=ye,J(we,Se,fe))return}}}function e(V,J){switch(J.type){case"base64":return n(vc(Ec(V)),J);case"binary":return n(vc(V),J);case"buffer":case"array":return n(V,J)}throw"Unsupported type "+J.type}function n(V,J){if(!V)return V;var re=J||{},ie=re.dense?[]:{},fe="Sheet1",Se="",ve=0,ye={},we=[],me=[],he={s:{r:0,c:0},e:{r:0,c:0}},Ve=re.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)re.Enum=X,t(V,function(je,Ke,st){switch(st){case 0:re.vers=je,je>=4096&&(re.qpro=!0);break;case 6:he=je;break;case 204:je&&(Se=je);break;case 222:Se=je;break;case 15:case 51:re.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:st==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=re.dateNF||Vn[14],re.cellDates&&(je[1].t="d",je[1].v=sb(je[1].v))),re.qpro&&je[3]>ve&&(ie["!ref"]=mr(he),ye[fe]=ie,we.push(fe),ie=re.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},ve=je[3],fe=Se||"Sheet"+(ve+1),Se="");var vt=re.dense?(ie[je[0].r]||[])[je[0].c]:ie[Kn(je[0])];if(vt){vt.t=je[1].t,vt.v=je[1].v,je[1].z!=null&&(vt.z=je[1].z),je[1].f!=null&&(vt.f=je[1].f);break}re.dense?(ie[je[0].r]||(ie[je[0].r]=[]),ie[je[0].r][je[0].c]=je[1]):ie[Kn(je[0])]=je[1];break}},re);else if(V[2]==26||V[2]==14)re.Enum=ce,V[2]==14&&(re.qpro=!0,V.l=0),t(V,function(je,Ke,st){switch(st){case 204:fe=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>ve&&(ie["!ref"]=mr(he),ye[fe]=ie,we.push(fe),ie=re.dense?[]:{},he={s:{r:0,c:0},e:{r:0,c:0}},ve=je[3],fe="Sheet"+(ve+1)),Ve>0&&je[0].r>=Ve)break;re.dense?(ie[je[0].r]||(ie[je[0].r]=[]),ie[je[0].r][je[0].c]=je[1]):ie[Kn(je[0])]=je[1],he.e.c<je[0].c&&(he.e.c=je[0].c),he.e.r<je[0].r&&(he.e.r=je[0].r);break;case 27:je[14e3]&&(me[je[14e3][0]]=je[14e3][1]);break;case 1537:me[je[0]]=je[1],je[0]==ve&&(fe=je[1]);break}},re);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(ie["!ref"]=mr(he),ye[Se||fe]=ie,we.push(Se||fe),!me.length)return{SheetNames:we,Sheets:ye};for(var nt={},Oe=[],Ie=0;Ie<me.length;++Ie)ye[we[Ie]]?(Oe.push(me[Ie]||we[Ie]),nt[me[Ie]]=ye[me[Ie]]||ye[we[Ie]]):(Oe.push(me[Ie]),nt[me[Ie]]={"!ref":"A1"});return{SheetNames:Oe,Sheets:nt}}function r(V,J){var re=J||{};if(+re.codepage>=0&&Bu(+re.codepage),re.type=="string")throw new Error("Cannot write WK1 to JS string");var ie=$l(),fe=ns(V["!ref"]),Se=Array.isArray(V),ve=[];Zt(ie,0,a(1030)),Zt(ie,6,l(fe));for(var ye=Math.min(fe.e.r,8191),we=fe.s.r;we<=ye;++we)for(var me=Za(we),he=fe.s.c;he<=fe.e.c;++he){we===fe.s.r&&(ve[he]=pa(he));var Ve=ve[he]+me,nt=Se?(V[we]||[])[he]:V[Ve];if(!(!nt||nt.t=="z"))if(nt.t=="n")(nt.v|0)==nt.v&&nt.v>=-32768&&nt.v<=32767?Zt(ie,13,x(we,he,nt.v)):Zt(ie,14,y(we,he,nt.v));else{var Oe=cd(nt);Zt(ie,15,m(we,he,Oe.slice(0,239)))}}return Zt(ie,1),ie.end()}function s(V,J){var re=J||{};if(+re.codepage>=0&&Bu(+re.codepage),re.type=="string")throw new Error("Cannot write WK3 to JS string");var ie=$l();Zt(ie,0,i(V));for(var fe=0,Se=0;fe<V.SheetNames.length;++fe)(V.Sheets[V.SheetNames[fe]]||{})["!ref"]&&Zt(ie,27,ne(V.SheetNames[fe],Se++));var ve=0;for(fe=0;fe<V.SheetNames.length;++fe){var ye=V.Sheets[V.SheetNames[fe]];if(!(!ye||!ye["!ref"])){for(var we=ns(ye["!ref"]),me=Array.isArray(ye),he=[],Ve=Math.min(we.e.r,8191),nt=we.s.r;nt<=Ve;++nt)for(var Oe=Za(nt),Ie=we.s.c;Ie<=we.e.c;++Ie){nt===we.s.r&&(he[Ie]=pa(Ie));var je=he[Ie]+Oe,Ke=me?(ye[nt]||[])[Ie]:ye[je];if(!(!Ke||Ke.t=="z"))if(Ke.t=="n")Zt(ie,23,z(nt,Ie,ve,Ke.v));else{var st=cd(Ke);Zt(ie,22,E(nt,Ie,ve,st.slice(0,239)))}}++ve}}return Zt(ie,1),ie.end()}function a(V){var J=yt(2);return J.write_shift(2,V),J}function i(V){var J=yt(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var re=0,ie=0,fe=0,Se=0;Se<V.SheetNames.length;++Se){var ve=V.SheetNames[Se],ye=V.Sheets[ve];if(!(!ye||!ye["!ref"])){++fe;var we=Yl(ye["!ref"]);re<we.e.r&&(re=we.e.r),ie<we.e.c&&(ie=we.e.c)}}return re>8191&&(re=8191),J.write_shift(2,re),J.write_shift(1,fe),J.write_shift(1,ie),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function o(V,J,re){var ie={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&re.qpro?(ie.s.c=V.read_shift(1),V.l++,ie.s.r=V.read_shift(2),ie.e.c=V.read_shift(1),V.l++,ie.e.r=V.read_shift(2),ie):(ie.s.c=V.read_shift(2),ie.s.r=V.read_shift(2),J==12&&re.qpro&&(V.l+=2),ie.e.c=V.read_shift(2),ie.e.r=V.read_shift(2),J==12&&re.qpro&&(V.l+=2),ie.s.c==65535&&(ie.s.c=ie.e.c=ie.s.r=ie.e.r=0),ie)}function l(V){var J=yt(8);return J.write_shift(2,V.s.c),J.write_shift(2,V.s.r),J.write_shift(2,V.e.c),J.write_shift(2,V.e.r),J}function u(V,J,re){var ie=[{c:0,r:0},{t:"n",v:0},0,0];return re.qpro&&re.vers!=20768?(ie[0].c=V.read_shift(1),ie[3]=V.read_shift(1),ie[0].r=V.read_shift(2),V.l+=2):(ie[2]=V.read_shift(1),ie[0].c=V.read_shift(2),ie[0].r=V.read_shift(2)),ie}function d(V,J,re){var ie=V.l+J,fe=u(V,J,re);if(fe[1].t="s",re.vers==20768){V.l++;var Se=V.read_shift(1);return fe[1].v=V.read_shift(Se,"utf8"),fe}return re.qpro&&V.l++,fe[1].v=V.read_shift(ie-V.l,"cstr"),fe}function m(V,J,re){var ie=yt(7+re.length);ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,V),ie.write_shift(1,39);for(var fe=0;fe<ie.length;++fe){var Se=re.charCodeAt(fe);ie.write_shift(1,Se>=128?95:Se)}return ie.write_shift(1,0),ie}function p(V,J,re){var ie=u(V,J,re);return ie[1].v=V.read_shift(2,"i"),ie}function x(V,J,re){var ie=yt(7);return ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,V),ie.write_shift(2,re,"i"),ie}function C(V,J,re){var ie=u(V,J,re);return ie[1].v=V.read_shift(8,"f"),ie}function y(V,J,re){var ie=yt(13);return ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,V),ie.write_shift(8,re,"f"),ie}function T(V,J,re){var ie=V.l+J,fe=u(V,J,re);if(fe[1].v=V.read_shift(8,"f"),re.qpro)V.l=ie;else{var Se=V.read_shift(2);O(V.slice(V.l,V.l+Se),fe),V.l+=Se}return fe}function I(V,J,re){var ie=J&32768;return J&=-32769,J=(ie?V:0)+(J>=8192?J-16384:J),(ie?"":"$")+(re?pa(J):Za(J))}var F={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},M=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(V,J){po(V,0);for(var re=[],ie=0,fe="",Se="",ve="",ye="";V.l<V.length;){var we=V[V.l++];switch(we){case 0:re.push(V.read_shift(8,"f"));break;case 1:Se=I(J[0].c,V.read_shift(2),!0),fe=I(J[0].r,V.read_shift(2),!1),re.push(Se+fe);break;case 2:{var me=I(J[0].c,V.read_shift(2),!0),he=I(J[0].r,V.read_shift(2),!1);Se=I(J[0].c,V.read_shift(2),!0),fe=I(J[0].r,V.read_shift(2),!1),re.push(me+he+":"+Se+fe)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:re.push("("+re.pop()+")");break;case 5:re.push(V.read_shift(2));break;case 6:{for(var Ve="";we=V[V.l++];)Ve+=String.fromCharCode(we);re.push('"'+Ve.replace(/"/g,'""')+'"')}break;case 8:re.push("-"+re.pop());break;case 23:re.push("+"+re.pop());break;case 22:re.push("NOT("+re.pop()+")");break;case 20:case 21:ye=re.pop(),ve=re.pop(),re.push(["AND","OR"][we-20]+"("+ve+","+ye+")");break;default:if(we<32&&M[we])ye=re.pop(),ve=re.pop(),re.push(ve+M[we]+ye);else if(F[we]){if(ie=F[we][1],ie==69&&(ie=V[V.l++]),ie>re.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+re.join("|")+"|");return}var nt=re.slice(-ie);re.length-=ie,re.push(F[we][0]+"("+nt.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}re.length==1?J[1].f=""+re[0]:console.error("WK1 bad formula parse |"+re.join("|")+"|")}function Q(V){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=V.read_shift(2),J[3]=V[V.l++],J[0].c=V[V.l++],J}function j(V,J){var re=Q(V);return re[1].t="s",re[1].v=V.read_shift(J-4,"cstr"),re}function E(V,J,re,ie){var fe=yt(6+ie.length);fe.write_shift(2,V),fe.write_shift(1,re),fe.write_shift(1,J),fe.write_shift(1,39);for(var Se=0;Se<ie.length;++Se){var ve=ie.charCodeAt(Se);fe.write_shift(1,ve>=128?95:ve)}return fe.write_shift(1,0),fe}function S(V,J){var re=Q(V);re[1].v=V.read_shift(2);var ie=re[1].v>>1;if(re[1].v&1)switch(ie&7){case 0:ie=(ie>>3)*5e3;break;case 1:ie=(ie>>3)*500;break;case 2:ie=(ie>>3)/20;break;case 3:ie=(ie>>3)/200;break;case 4:ie=(ie>>3)/2e3;break;case 5:ie=(ie>>3)/2e4;break;case 6:ie=(ie>>3)/16;break;case 7:ie=(ie>>3)/64;break}return re[1].v=ie,re}function k(V,J){var re=Q(V),ie=V.read_shift(4),fe=V.read_shift(4),Se=V.read_shift(2);if(Se==65535)return ie===0&&fe===3221225472?(re[1].t="e",re[1].v=15):ie===0&&fe===3489660928?(re[1].t="e",re[1].v=42):re[1].v=0,re;var ve=Se&32768;return Se=(Se&32767)-16446,re[1].v=(1-ve*2)*(fe*Math.pow(2,Se+32)+ie*Math.pow(2,Se)),re}function z(V,J,re,ie){var fe=yt(14);if(fe.write_shift(2,V),fe.write_shift(1,re),fe.write_shift(1,J),ie==0)return fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(2,65535),fe;var Se=0,ve=0,ye=0,we=0;return ie<0&&(Se=1,ie=-ie),ve=Math.log2(ie)|0,ie/=Math.pow(2,ve-31),we=ie>>>0,(we&2147483648)==0&&(ie/=2,++ve,we=ie>>>0),ie-=we,we|=2147483648,we>>>=0,ie*=Math.pow(2,32),ye=ie>>>0,fe.write_shift(4,ye),fe.write_shift(4,we),ve+=16383+(Se?32768:0),fe.write_shift(2,ve),fe}function P(V,J){var re=k(V);return V.l+=J-14,re}function R(V,J){var re=Q(V),ie=V.read_shift(4);return re[1].v=ie>>6,re}function G(V,J){var re=Q(V),ie=V.read_shift(8,"f");return re[1].v=ie,re}function q(V,J){var re=G(V);return V.l+=J-10,re}function le(V,J){return V[V.l+J-1]==0?V.read_shift(J,"cstr"):""}function ee(V,J){var re=V[V.l++];re>J-1&&(re=J-1);for(var ie="";ie.length<re;)ie+=String.fromCharCode(V[V.l++]);return ie}function oe(V,J,re){if(!(!re.qpro||J<21)){var ie=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var fe=V.read_shift(J-21,"cstr");return[ie,fe]}}function K(V,J){for(var re={},ie=V.l+J;V.l<ie;){var fe=V.read_shift(2);if(fe==14e3){for(re[fe]=[0,""],re[fe][0]=V.read_shift(2);V[V.l];)re[fe][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return re}function ne(V,J){var re=yt(5+V.length);re.write_shift(2,14e3),re.write_shift(2,J);for(var ie=0;ie<V.length;++ie){var fe=V.charCodeAt(ie);re[re.l++]=fe>127?95:fe}return re[re.l++]=0,re}var X={0:{n:"BOF",f:fi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:C},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:le},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},ce={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:G},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:le},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:oe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}();function eae(t){var e={},n=t.match(el),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=Jn(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=G5[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var tae=function(){var t=Ex("t"),e=Ex("rPr");function n(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:ts(i[1])},l=a.match(e);return l&&(o.s=eae(l[1])),o}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(r,"").split(s).map(n).filter(function(o){return o.v})}}(),nae=function(){var e=/(\r\n|\n)/g;function n(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function r(s){var a=[[],s.v,[]];return s.v?(s.s&&n(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(r).join("")}}(),rae=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sae=/<(?:\w+:)?r>/,aae=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function m4(t,e){var n=e?e.cellHTML:!0,r={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=ts(ks(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=ks(t),n&&(r.h=t4(r.t))):t.match(sae)&&(r.r=ks(t),r.t=ts(ks((t.replace(aae,"").match(rae)||[]).join("").replace(el,""))),n&&(r.h=nae(tae(r.r)))),r):{t:""}}var iae=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,oae=/<(?:\w+:)?(?:si|sstItem)>/g,lae=/<\/(?:\w+:)?(?:si|sstItem)>/;function cae(t,e){var n=[],r="";if(!t)return n;var s=t.match(iae);if(s){r=s[2].replace(oae,"").split(lae);for(var a=0;a!=r.length;++a){var i=m4(r[a].trim(),e);i!=null&&(n[n.length]=i)}s=Jn(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}var uae=/^\s|\s$|[\t\n\r]/;function VO(t,e){if(!e.bookSST)return"";var n=[ei];n[n.length]=Xt("sst",null,{xmlns:n0[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var s=t[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(uae)&&(a+=' xml:space="preserve"'),a+=">"+Cs(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Aae(t){return[t.read_shift(4),t.read_shift(4)]}function dae(t,e){var n=[],r=!1;return pd(t,function(a,i,o){switch(o){case 159:n.Count=a[0],n.Unique=a[1];break;case 19:n.push(a);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function fae(t,e){return e||(e=yt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var hae=Cne;function mae(t){var e=$l();Mt(e,159,fae(t));for(var n=0;n<t.length;++n)Mt(e,19,hae(t[n]));return Mt(e,160),e.end()}function zO(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function td(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function pae(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=td(t,4),e.U=td(t,4),e.W=td(t,4),e}function gae(t){for(var e=t.read_shift(4),n=t.l+e-4,r={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(r.name=t.read_shift(0,"lpp4"),r.comps=a,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return r}function xae(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(gae(t));return e}function vae(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function yae(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=td(t,4),e.U=td(t,4),e.W=td(t,4),e}function wae(t){var e=yae(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function GO(t,e){var n=t.l+e,r={};r.Flags=t.read_shift(4)&63,t.l+=4,r.AlgID=t.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=r.Flags==36;break;case 26625:s=r.Flags==4;break;case 0:s=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=t.read_shift(4),r.KeySize=t.read_shift(4),r.ProviderType=t.read_shift(4),t.l+=8,r.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,r}function qO(t,e){var n={},r=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,r),t.l=r,n}function bae(t){var e=td(t);switch(e.Minor){case 2:return[e.Minor,_ae(t)];case 3:return[e.Minor,Cae()];case 4:return[e.Minor,Eae(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function _ae(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),r=GO(t,n),s=qO(t,t.length-t.l);return{t:"Std",h:r,v:s}}function Cae(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Eae(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),r={};return n.replace(el,function(a){var i=Jn(a);switch(EA(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=i[o]});break;case"<dataIntegrity":r.encryptedHmacKey=i.encryptedHmacKey,r.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(i);break;default:throw i[0]}}),r}function Sae(t,e){var n={},r=n.EncryptionVersionInfo=td(t,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,n.EncryptionHeader=GO(t,s),e-=s,n.EncryptionVerifier=qO(t,e),n}function Tae(t){var e={},n=e.EncryptionVersionInfo=td(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function p4(t){var e=0,n,r=zO(t),s=r.length+1,a,i,o,l,u;for(n=Mf(s),n[0]=r.length,a=1;a!=s;++a)n[a]=r[a-1];for(a=s-1;a>=0;--a)i=n[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var KO=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(i){return(i/2|i*128)&255},s=function(i,o){return r(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],m=0;m!=7;++m)d&64&&(o^=n[l]),d*=2,--l;return o};return function(i){for(var o=zO(i),l=a(o),u=o.length,d=Mf(16),m=0;m!=16;++m)d[m]=0;var p,x,C;for((u&1)===1&&(p=l>>8,d[u]=s(t[0],p),--u,p=l&255,x=o[o.length-1],d[u]=s(x,p));u>0;)--u,p=l>>8,d[u]=s(o[u],p),--u,p=l&255,d[u]=s(o[u],p);for(u=15,C=15-o.length;C>0;)p=l>>8,d[u]=s(t[C],p),--u,--C,p=l&255,d[u]=s(o[u],p),--u,--C;return d}}(),Nae=function(t,e,n,r,s){s||(s=e),r||(r=KO(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=r[n],i=(i>>5|i<<3)&255,s[a]=i,++n;return[s,n,r]},Bae=function(t){var e=0,n=KO(t);return function(r){var s=Nae("",r,e,n);return e=s[1],s[0]}};function kae(t,e,n,r){var s={key:fi(t),verificationBytes:fi(t)};return n.password&&(s.verifier=p4(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=Bae(n.password)),s}function Iae(t,e,n){var r=n||{};return r.Info=t.read_shift(2),t.l-=2,r.Info===1?r.Data=Tae(t):r.Data=Sae(t,e),r}function Fae(t,e,n){var r={Type:n.biff>=8?t.read_shift(2):0};return r.Type?Iae(t,e-2,r):kae(t,n.biff>=8?e:e-2,n,r),r}var $O=function(){function t(s,a){switch(a.type){case"base64":return e(Ec(s),a);case"binary":return e(s,a);case"buffer":return e(Br&&Buffer.isBuffer(s)?s.toString("binary"):Gf(s),a);case"array":return e(Vh(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,m){Array.isArray(o)&&(o[m]=[]);for(var p=/\\\w+\b/g,x=0,C,y=-1;C=p.exec(d);){switch(C[0]){case"\\cell":var T=d.slice(x,p.lastIndex-C[0].length);if(T[0]==" "&&(T=T.slice(1)),++y,T.length){var I={v:T,t:"s"};Array.isArray(o)?o[m][y]=I:o[Kn({r:m,c:y})]=I}break}x=p.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=mr(u),o}function n(s,a){return qf(t(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=ns(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var m=Kn({r:u,c:d});o=l?(s[u]||[])[d]:s[m],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(cd(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function Dae(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Bx(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function Lae(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((n-r)/i+6)%6;break;case n:o=(r-e)/i+2;break;case r:o=(e-n)/i+4;break}return[o/6,l,u/2]}function Rae(t){var e=t[0],n=t[1],r=t[2],s=n*2*(r<.5?r:1-r),a=r-s/2,i=[a,a,a],o=6*e,l;if(n!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function Qw(t,e){if(e===0)return t;var n=Lae(Dae(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),Bx(Rae(n))}var WO=6,Pae=15,Mae=1,Go=WO;function kx(t){return Math.floor((t+Math.round(128/Go)/256)*Go)}function Ix(t){return Math.floor((t-5)/Go*100+.5)/100}function Hw(t){return Math.round((t*Go+5)/Go*256)/256}function LC(t){return Hw(Ix(kx(t)))}function g4(t){var e=Math.abs(t-LC(t)),n=Go;if(e>.005)for(Go=Mae;Go<Pae;++Go)Math.abs(t-LC(t))<=e&&(e=Math.abs(t-LC(t)),n=Go);Go=n}function Uf(t){t.width?(t.wpx=kx(t.width),t.wch=Ix(t.wpx),t.MDW=Go):t.wpx?(t.wch=Ix(t.wpx),t.width=Hw(t.wch),t.MDW=Go):typeof t.wch=="number"&&(t.width=Hw(t.wch),t.wpx=kx(t.width),t.MDW=Go),t.customWidth&&delete t.customWidth}var Uae=96,YO=Uae;function Fx(t){return t*96/YO}function Km(t){return t*YO/96}var Oae={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function jae(t,e,n,r){e.Borders=[];var s={},a=!1;(t[0].match(el)||[]).forEach(function(i){var o=Jn(i);switch(EA(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Js(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Js(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Qae(t,e,n,r){e.Fills=[];var s={},a=!1;(t[0].match(el)||[]).forEach(function(i){var o=Jn(i);switch(EA(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Hae(t,e,n,r){e.Fonts=[];var s={},a=!1;(t[0].match(el)||[]).forEach(function(i){var o=Jn(i);switch(EA(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=ks(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Js(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Js(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Js(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Js(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Js(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Js(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Js(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=G5[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Js(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=kh[s.color.index];s.color.index==81&&(l=kh[1]),l||(l=kh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=Qw(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Vae(t,e,n){e.NumberFmt=[];for(var r=Ma(Vn),s=0;s<r.length;++s)e.NumberFmt[r[s]]=Vn[r[s]];var a=t[0].match(el);if(a)for(s=0;s<a.length;++s){var i=Jn(a[s]);switch(EA(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=ts(ks(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}ed(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function zae(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Xt("numFmt",null,{numFmtId:r,formatCode:Cs(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Xt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var q1=["numFmtId","fillId","fontId","borderId","xfId"],K1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Gae(t,e,n){e.CellXf=[];var r,s=!1;(t[0].match(el)||[]).forEach(function(a){var i=Jn(a),o=0;switch(EA(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=i,delete r[0],o=0;o<q1.length;++o)r[q1[o]]&&(r[q1[o]]=parseInt(r[q1[o]],10));for(o=0;o<K1.length;++o)r[K1[o]]&&(r[K1[o]]=Js(r[K1[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Js(i.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function qae(t){var e=[];return e[e.length]=Xt("cellXfs",null),t.forEach(function(n){e[e.length]=Xt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Xt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Kae=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=o.match(e))&&Vae(m,d,u),(m=o.match(s))&&Hae(m,d,l,u),(m=o.match(r))&&Qae(m,d,l,u),(m=o.match(a))&&jae(m,d,l,u),(m=o.match(n))&&Gae(m,d,u),d}}();function XO(t,e){var n=[ei,Xt("styleSheet",null,{xmlns:n0[0],"xmlns:vt":Bi.vt})],r;return t.SSF&&(r=zae(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=qae(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function $ae(t,e){var n=t.read_shift(2),r=Yo(t);return[n,r]}function Wae(t,e,n){n||(n=yt(6+4*e.length)),n.write_shift(2,t),Wi(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function Yae(t,e,n){var r={};r.sz=t.read_shift(2)/20;var s=Ine(t);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=kne(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Yo(t),r}function Xae(t,e){e||(e=yt(153)),e.write_shift(2,t.sz*20),Fne(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Uw(t.color,e);var r=0;return r=2,e.write_shift(1,r),Wi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Jae=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],RC,Zae=Jo;function sD(t,e){e||(e=yt(84)),RC||(RC=nb(Jae));var n=RC[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(Uw({auto:1},e),Uw({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function eie(t,e){var n=t.l+e,r=t.read_shift(2),s=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:s}}function JO(t,e,n){n||(n=yt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function sg(t,e){return e||(e=yt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var tie=Jo;function nie(t,e){return e||(e=yt(51)),e.write_shift(1,0),sg(null,e),sg(null,e),sg(null,e),sg(null,e),sg(null,e),e.length>e.l?e.slice(0,e.l):e}function rie(t,e){return e||(e=yt(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Mw(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function sie(t,e,n){var r=yt(2052);return r.write_shift(4,t),Mw(e,r),Mw(n,r),r.length>r.l?r.slice(0,r.l):r}function aie(t,e,n){var r={};r.NumberFmt=[];for(var s in Vn)r.NumberFmt[s]=Vn[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return pd(t,function(l,u,d){switch(d){case 44:r.NumberFmt[l[0]]=l[1],ed(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=Qw(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||n.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function iie(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++n}),n!=0&&(Mt(t,615,Fu(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Mt(t,44,Wae(s,e[s]))}),Mt(t,616))}}function oie(t){var e=1;Mt(t,611,Fu(e)),Mt(t,43,Xae({sz:12,color:{theme:1},name:"Calibri",family:2})),Mt(t,612)}function lie(t){var e=2;Mt(t,603,Fu(e)),Mt(t,45,sD({patternType:"none"})),Mt(t,45,sD({patternType:"gray125"})),Mt(t,604)}function cie(t){var e=1;Mt(t,613,Fu(e)),Mt(t,46,nie()),Mt(t,614)}function uie(t){var e=1;Mt(t,626,Fu(e)),Mt(t,47,JO({numFmtId:0},65535)),Mt(t,627)}function Aie(t,e){Mt(t,617,Fu(e.length)),e.forEach(function(n){Mt(t,47,JO(n,0))}),Mt(t,618)}function die(t){var e=1;Mt(t,619,Fu(e)),Mt(t,48,rie({xfId:0,name:"Normal"})),Mt(t,620)}function fie(t){var e=0;Mt(t,505,Fu(e)),Mt(t,506)}function hie(t){var e=0;Mt(t,508,sie(e,"TableStyleMedium9","PivotStyleMedium4")),Mt(t,509)}function mie(t,e){var n=$l();return Mt(n,278),iie(n,t.SSF),oie(n),lie(n),cie(n),uie(n),Aie(n,e.cellXfs),die(n),fie(n),hie(n),Mt(n,279),n.end()}var pie=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function gie(t,e,n){e.themeElements.clrScheme=[];var r={};(t[0].match(el)||[]).forEach(function(s){var a=Jn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[pie.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function xie(){}function vie(){}var yie=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,wie=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,bie=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function _ie(t,e,n){e.themeElements={};var r;[["clrScheme",yie,gie],["fontScheme",wie,xie],["fmtScheme",bie,vie]].forEach(function(s){if(!(r=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,e,n)})}var Cie=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ZO(t,e){(!t||t.length===0)&&(t=x4());var n,r={};if(!(n=t.match(Cie)))throw new Error("themeElements not found in theme");return _ie(n[0],r,e),r.raw=t,r}function x4(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[ei];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Eie(t,e,n){var r=t.l+e,s=t.read_shift(4);if(s!==124226){if(!n.cellStyles){t.l=r;return}var a=t.slice(t.l);t.l=r;var i;try{i=G8(a,{type:"array"})}catch{return}var o=yc(i,"theme/theme/theme1.xml",!0);if(o)return ZO(o,n)}}function Sie(t){return t.read_shift(4)}function Tie(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Nie(t,4);break;case 2:e.xclrValue=FO(t);break;case 3:e.xclrValue=Sie(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Nie(t,e){return Jo(t,e)}function Bie(t,e){return Jo(t,e)}function kie(t){var e=t.read_shift(2),n=t.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Tie(t);break;case 6:r[1]=Bie(t,n);break;case 14:case 15:r[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return r}function Iie(t,e){var n=t.l+e;t.l+=2;var r=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(kie(t,n-t.l));return{ixfe:r,ext:a}}function Fie(t,e){e.forEach(function(n){n[0]})}function Die(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Yo(t)}}function Lie(t){var e=yt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Wi(t.name,e),e.slice(0,e.l)}function Rie(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Pie(t){var e=yt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function Mie(t,e){var n=yt(8+2*e.length);return n.write_shift(4,t),Wi(e,n),n.slice(0,n.l)}function Uie(t){return t.l+=4,t.read_shift(4)!=0}function Oie(t,e){var n=yt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function jie(t,e,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return pd(t,function(l,u,d){switch(d){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(m){o==1?r.Cell.push({type:r.Types[m[0]-1].name,index:m[1]}):o==0&&r.Value.push({type:r.Types[m[0]-1].name,index:m[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Qie(){var t=$l();return Mt(t,332),Mt(t,334,Fu(1)),Mt(t,335,Lie({name:"XLDAPR",version:12e4,flags:3496657072})),Mt(t,336),Mt(t,339,Mie(1,"XLDAPR")),Mt(t,52),Mt(t,35,Fu(514)),Mt(t,4096,Fu(0)),Mt(t,4097,Wc(1)),Mt(t,36),Mt(t,53),Mt(t,340),Mt(t,337,Oie(1)),Mt(t,51,Pie([[1,0]])),Mt(t,338),Mt(t,333),t.end()}function Hie(t,e,n){var r={Types:[],Cell:[],Value:[]};if(!t)return r;var s=!1,a=2,i;return t.replace(el,function(o){var l=Jn(o);switch(EA(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==l.name&&(i=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):a==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function ej(){var t=[ei];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Vie(t){var e=[];if(!t)return e;var n=1;return(t.match(el)||[]).forEach(function(r){var s=Jn(r);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?n=s.i:s.i=n,e.push(s);break}}),e}function zie(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=Kn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function Gie(t,e,n){var r=[];return pd(t,function(a,i,o){switch(o){case 63:r.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function qie(t,e,n,r){if(!t)return t;var s=r||{},a=!1;pd(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function Kie(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}var dm=1024;function tj(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Xt("xml",null,{"xmlns:v":gc.v,"xmlns:o":gc.o,"xmlns:x":gc.x,"xmlns:mv":gc.mv}).replace(/\/>/,">"),Xt("o:shapelayout",Xt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Xt("v:shapetype",[Xt("v:stroke",null,{joinstyle:"miter"}),Xt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];dm<t*1e3;)dm+=1e3;return e.forEach(function(a){var i=ga(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Xt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Xt("v:fill",l,o),d={on:"t",obscured:"t"};++dm,s=s.concat(["<v:shape"+Sx({id:"_x0000_s"+dm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Xt("v:shadow",null,d),Xt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),xo("x:AutoFill","False"),xo("x:Row",String(i.r)),xo("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function aD(t,e,n,r){var s=Array.isArray(t),a;e.forEach(function(i){var o=ga(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=ns(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=mr(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:n};i.h&&(d.h=i.h);for(var m=a.c.length-1;m>=0;--m){if(!n&&a.c[m].T)return;n&&!a.c[m].T&&a.c.splice(m,1)}if(n&&r){for(m=0;m<r.length;++m)if(d.a==r[m].id){d.a=r[m].name||d.a;break}}a.c.push(d)})}function $ie(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&n.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Jn(o[0]),u={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=ga(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var m=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!m&&!!m[1]&&m4(m[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=p.h),r.push(u)}}}}),r}function nj(t){var e=[ei,Xt("comments",null,{xmlns:n0[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(s){var a=Cs(s.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=n.indexOf(Cs(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(xo("t",Cs(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(xo("t",Cs(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Wie(t,e){var n=[],r=!1,s={},a=0;return t.replace(el,function(o,l){var u=Jn(o);switch(EA(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&n.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),n}function Yie(t,e,n){var r=[ei,Xt("ThreadedComments",null,{xmlns:Bi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(Xt("threadedComment",xo("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Xie(t,e){var n=[],r=!1;return t.replace(el,function(a){var i=Jn(a);switch(EA(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),n}function Jie(t){var e=[ei,Xt("personList",null,{xmlns:Bi.TCMNT,"xmlns:x":n0[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Xt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Zie(t){var e={};e.iauthor=t.read_shift(4);var n=i0(t);return e.rfx=n.s,e.ref=Kn(n.s),t.l+=16,e}function eoe(t,e){return e==null&&(e=yt(36)),e.write_shift(4,t[1].iauthor),dp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var toe=Yo;function noe(t){return Wi(t.slice(0,54))}function roe(t,e){var n=[],r=[],s={},a=!1;return pd(t,function(o,l,u){switch(u){case 632:r.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function soe(t){var e=$l(),n=[];return Mt(e,628),Mt(e,630),t.forEach(function(r){r[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),Mt(e,632,noe(s.a)))})}),Mt(e,631),Mt(e,633),t.forEach(function(r){r[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var a={s:ga(r[0]),e:ga(r[0])};Mt(e,635,eoe([a,s])),s.t&&s.t.length>0&&Mt(e,637,Sne(s)),Mt(e,636),delete s.iauthor})}),Mt(e,634),Mt(e,629),e.end()}var aoe="application/vnd.ms-office.vbaProject";function ioe(t){var e=Nn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Nn.utils.cfb_add(e,s,t.FileIndex[r].content)}}),Nn.write(e)}function ooe(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Nn.utils.cfb_add(t,s,e.FileIndex[r].content)}})}var rj=["xlsb","xlsm","xlam","biff8","xla"];function loe(){return{"!type":"dialog"}}function coe(){return{"!type":"dialog"}}function uoe(){return{"!type":"macro"}}function Aoe(){return{"!type":"macro"}}var Tm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+pa(d)+(l?"":"$")+Za(u)}return function(s,a){return e=a,s.replace(t,n)}}(),v4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,y4=function(){return function(e,n){return e.replace(v4,function(r,s,a,i,o,l){var u=i4(i)-(a?0:n.c),d=a4(l)-(o?0:n.r),m=d==0?"":o?d+1:"["+d+"]",p=u==0?"":a?u+1:"["+u+"]";return s+"R"+m+"C"+p})}}();function sj(t,e){return t.replace(v4,function(n,r,s,a,i,o){return r+(s=="$"?s+a:pa(i4(a)+e.c))+(i=="$"?i+o:Za(a4(o)+e.r))})}function doe(t,e,n){var r=Yl(e),s=r.s,a=ga(n),i={r:a.r-s.r,c:a.c-s.c};return sj(t,i)}function foe(t){return t.length!=1}function iD(t){return t.replace(/_xlfn\./g,"")}function ui(t){t.l+=1}function Of(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function aj(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return ij(t);n.biff==12&&(r=4)}var s=t.read_shift(r),a=t.read_shift(r),i=Of(t),o=Of(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function ij(t){var e=Of(t),n=Of(t),r=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function hoe(t,e,n){if(n.biff<8)return ij(t);var r=t.read_shift(n.biff==12?4:2),s=t.read_shift(n.biff==12?4:2),a=Of(t),i=Of(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function oj(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return moe(t);var r=t.read_shift(n&&n.biff==12?4:2),s=Of(t);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function moe(t){var e=Of(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function poe(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function goe(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return xoe(t);var s=t.read_shift(r>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function xoe(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:s,rRel:r}}function voe(t,e,n){var r=(t[t.l++]&96)>>5,s=aj(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,s]}function yoe(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=aj(t,a,n);return[r,s,i]}function woe(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function boe(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,s]}function _oe(t,e,n){var r=(t[t.l++]&96)>>5,s=hoe(t,e-1,n);return[r,s]}function Coe(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function oD(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Eoe(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(t.read_shift(n&&n.biff==2?1:2));return s}function Soe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Toe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Noe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Boe(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function lj(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function koe(t){return t.read_shift(2),lj(t)}function Ioe(t){return t.read_shift(2),lj(t)}function Foe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=oj(t,0,n);return[r,s]}function Doe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=goe(t,0,n);return[r,s]}function Loe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=oj(t,0,n);return[r,s,a]}function Roe(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(n&&n.biff<=3?1:2);return[Ule[s],Aj[s],r]}function Poe(t,e,n){var r=t[t.l++],s=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Moe(t);return[s,(a[0]===0?Aj:Mle)[a[1]]]}function Moe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Uoe(t,e,n){t.l+=n&&n.biff==2?3:4}function Ooe(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function joe(t){return t.l++,gd[t.read_shift(1)]}function Qoe(t){return t.l++,t.read_shift(2)}function Hoe(t){return t.l++,t.read_shift(1)!==0}function Voe(t){return t.l++,$o(t)}function zoe(t,e,n){return t.l++,gv(t,e-1,n)}function Goe(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=qa(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=gd[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=$o(t);break;case 2:n[1]=o0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function qoe(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((n.biff==12?i0:ab)(t));return s}function Koe(t,e,n){var r=0,s=0;n.biff==12?(r=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Goe(t,n.biff);return i}function $oe(t,e,n){var r=t.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=t.read_shift(s);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function Woe(t,e,n){if(n.biff==5)return Yoe(t);var r=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[r,s,a]}function Yoe(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function Xoe(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Joe(t,e,n){var r=t.read_shift(1)>>>5&3,s=t.read_shift(n&&n.biff==2?1:2);return[r,s]}function Zoe(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function ele(t,e,n){var r=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,s]}var tle=Jo,nle=Jo,rle=Jo;function vv(t,e,n){return t.l+=2,[poe(t)]}function w4(t){return t.l+=6,[]}var sle=vv,ale=w4,ile=w4,ole=vv;function cj(t){return t.l+=2,[fi(t),t.read_shift(2)&1]}var lle=vv,cle=cj,ule=w4,Ale=vv,dle=vv,fle=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function hle(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=fle[n>>2&31];return{ixti:e,coltype:n&3,rt:i,idx:r,c:s,C:a}}function mle(t){return t.l+=2,[t.read_shift(4)]}function ple(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function gle(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function xle(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function vle(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function yle(t){return t.l+=4,[0,0]}var lD={1:{n:"PtgExp",f:Ooe},2:{n:"PtgTbl",f:rle},3:{n:"PtgAdd",f:ui},4:{n:"PtgSub",f:ui},5:{n:"PtgMul",f:ui},6:{n:"PtgDiv",f:ui},7:{n:"PtgPower",f:ui},8:{n:"PtgConcat",f:ui},9:{n:"PtgLt",f:ui},10:{n:"PtgLe",f:ui},11:{n:"PtgEq",f:ui},12:{n:"PtgGe",f:ui},13:{n:"PtgGt",f:ui},14:{n:"PtgNe",f:ui},15:{n:"PtgIsect",f:ui},16:{n:"PtgUnion",f:ui},17:{n:"PtgRange",f:ui},18:{n:"PtgUplus",f:ui},19:{n:"PtgUminus",f:ui},20:{n:"PtgPercent",f:ui},21:{n:"PtgParen",f:ui},22:{n:"PtgMissArg",f:ui},23:{n:"PtgStr",f:zoe},26:{n:"PtgSheet",f:ple},27:{n:"PtgEndSheet",f:gle},28:{n:"PtgErr",f:joe},29:{n:"PtgBool",f:Hoe},30:{n:"PtgInt",f:Qoe},31:{n:"PtgNum",f:Voe},32:{n:"PtgArray",f:Coe},33:{n:"PtgFunc",f:Roe},34:{n:"PtgFuncVar",f:Poe},35:{n:"PtgName",f:$oe},36:{n:"PtgRef",f:Foe},37:{n:"PtgArea",f:voe},38:{n:"PtgMemArea",f:Xoe},39:{n:"PtgMemErr",f:tle},40:{n:"PtgMemNoMem",f:nle},41:{n:"PtgMemFunc",f:Joe},42:{n:"PtgRefErr",f:Zoe},43:{n:"PtgAreaErr",f:woe},44:{n:"PtgRefN",f:Doe},45:{n:"PtgAreaN",f:_oe},46:{n:"PtgMemAreaN",f:xle},47:{n:"PtgMemNoMemN",f:vle},57:{n:"PtgNameX",f:Woe},58:{n:"PtgRef3d",f:Loe},59:{n:"PtgArea3d",f:yoe},60:{n:"PtgRefErr3d",f:ele},61:{n:"PtgAreaErr3d",f:boe},255:{}},wle={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ble={1:{n:"PtgElfLel",f:cj},2:{n:"PtgElfRw",f:Ale},3:{n:"PtgElfCol",f:sle},6:{n:"PtgElfRwV",f:dle},7:{n:"PtgElfColV",f:ole},10:{n:"PtgElfRadical",f:lle},11:{n:"PtgElfRadicalS",f:ule},13:{n:"PtgElfColS",f:ale},15:{n:"PtgElfColSV",f:ile},16:{n:"PtgElfRadicalLel",f:cle},25:{n:"PtgList",f:hle},29:{n:"PtgSxName",f:mle},255:{}},_le={0:{n:"PtgAttrNoop",f:yle},1:{n:"PtgAttrSemi",f:Boe},2:{n:"PtgAttrIf",f:Toe},4:{n:"PtgAttrChoose",f:Eoe},8:{n:"PtgAttrGoto",f:Soe},16:{n:"PtgAttrSum",f:Uoe},32:{n:"PtgAttrBaxcel",f:oD},33:{n:"PtgAttrBaxcel",f:oD},64:{n:"PtgAttrSpace",f:koe},65:{n:"PtgAttrSpaceSemi",f:Ioe},128:{n:"PtgAttrIfError",f:Noe},255:{}};function yv(t,e,n,r){if(r.biff<8)return Jo(t,e);for(var s=t.l+e,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=Koe(t,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=qoe(t,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&r.biff==12&&(n[i][1][1]=t.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return e=s-t.l,e!==0&&a.push(Jo(t,e)),a}function wv(t,e,n){for(var r=t.l+e,s,a,i=[];r!=t.l;)e=r-t.l,a=t[t.l],s=lD[a]||lD[wle[a]],(a===24||a===25)&&(s=(a===24?ble:_le)[t[t.l+1]]),!s||!s.f?Jo(t,e):i.push([s.n,s.f(t,e,n)]);return i}function Cle(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Ele={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Sle(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function uj(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(t[r[0]][0]){case 357:return s=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(s=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function cD(t,e,n){var r=uj(t,e,n);return r=="#REF"?r:Sle(r,n)}function Ho(t,e,n,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,m=0,p=0,x,C="";if(!t[0]||!t[0][0])return"";for(var y=-1,T="",I=0,F=t[0].length;I<F;++I){var M=t[0][I];switch(M[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:T=Da(" ",t[0][y][1][1]);break;case 1:T=Da("\r",t[0][y][1][1]);break;default:if(T="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+T,y=-1}o.push(u+Ele[M[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Wg(M[1][1],i,s),o.push(Yg(d,a));break;case"PtgRefN":d=n?Wg(M[1][1],n,s):M[1][1],o.push(Yg(d,a));break;case"PtgRef3d":m=M[1][1],d=Wg(M[1][2],i,s),C=cD(r,m,s),o.push(C+"!"+Yg(d,a));break;case"PtgFunc":case"PtgFuncVar":var O=M[1][0],Q=M[1][1];O||(O=0),O&=127;var j=O==0?[]:o.slice(-O);o.length-=O,Q==="User"&&(Q=j.shift()),o.push(Q+"("+j.join(",")+")");break;case"PtgBool":o.push(M[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(M[1]);break;case"PtgNum":o.push(String(M[1]));break;case"PtgStr":o.push('"'+M[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(M[1]);break;case"PtgAreaN":x=UF(M[1][1],n?{s:n}:i,s),o.push(IC(x,s));break;case"PtgArea":x=UF(M[1][1],i,s),o.push(IC(x,s));break;case"PtgArea3d":m=M[1][1],x=M[1][2],C=cD(r,m,s),o.push(C+"!"+IC(x,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=M[1][2];var E=(r.names||[])[p-1]||(r[0]||[])[p],S=E?E.Name:"SH33TJSNAME"+String(p);S&&S.slice(0,6)=="_xlfn."&&!s.xlfn&&(S=S.slice(6)),o.push(S);break;case"PtgNameX":var k=M[1][1];p=M[1][2];var z;if(s.biff<=5)k<0&&(k=-k),r[k]&&(z=r[k][p]);else{var P="";if(((r[k]||[])[0]||[])[0]==14849||(((r[k]||[])[0]||[])[0]==1025?r[k][p]&&r[k][p].itab>0&&(P=r.SheetNames[r[k][p].itab-1]+"!"):P=r.SheetNames[p-1]+"!"),r[k]&&r[k][p])P+=r[k][p].Name;else if(r[0]&&r[0][p])P+=r[0][p].Name;else{var R=(uj(r,k,s)||"").split(";;");R[p-1]?P=R[p-1]:P+="SH33TJSERRX"}o.push(P);break}z||(z={Name:"SH33TJSERRY"}),o.push(z.Name);break;case"PtgParen":var G="(",q=")";if(y>=0){switch(T="",t[0][y][1][0]){case 2:G=Da(" ",t[0][y][1][1])+G;break;case 3:G=Da("\r",t[0][y][1][1])+G;break;case 4:q=Da(" ",t[0][y][1][1])+q;break;case 5:q=Da("\r",t[0][y][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(G+o.pop()+q);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:M[1][1],r:M[1][0]};var le={c:n.c,r:n.r};if(r.sharedf[Kn(d)]){var ee=r.sharedf[Kn(d)];o.push(Ho(ee,i,le,r,s))}else{var oe=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,le,r,s)),oe=!0;break}oe||o.push(M[1])}break;case"PtgArray":o.push("{"+Cle(M[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+M[1].idx+"[#"+M[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(M));default:throw new Error("Unrecognized Formula Token: "+String(M))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&K.indexOf(t[0][I][0])==-1){M=t[0][y];var ne=!0;switch(M[1][0]){case 4:ne=!1;case 0:T=Da(" ",M[1][1]);break;case 5:ne=!1;case 1:T=Da("\r",M[1][1]);break;default:if(T="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+M[1][0])}o.push((ne?T:"")+o.pop()+(ne?"":T)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Tle(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Jo(t,e-2)];var o=wv(t,i,n);return e!==i+s&&(a=yv(t,e-i-s,o,n)),t.l=r,[o,a]}function Nle(t,e,n){var r=t.l+e,s=n.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Jo(t,e-2)];var o=wv(t,i,n);return e!==i+s&&(a=yv(t,e-i-s,o,n)),t.l=r,[o,a]}function Ble(t,e,n,r){var s=t.l+e,a=wv(t,r,n),i;return s!==t.l&&(i=yv(t,s-t.l,a,n)),[a,i]}function kle(t,e,n){var r=t.l+e,s,a=t.read_shift(2),i=wv(t,a,n);return a==65535?[[],Jo(t,e-2)]:(e!==a+2&&(s=yv(t,r-a-2,i,n)),[i,s])}function Ile(t){var e;if(YA(t,t.l+6)!==65535)return[$o(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Fle(t){if(t==null){var e=yt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return zh(t);return zh(0)}function PC(t,e,n){var r=t.l+e,s=SA(t);n.biff==2&&++t.l;var a=Ile(t),i=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var o=Nle(t,r-t.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Dle(t,e,n,r,s){var a=qh(e,n,s),i=Fle(t.v),o=yt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=yt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var m=$i([a,i,o,u]);return m}function ib(t,e,n){var r=t.read_shift(4),s=wv(t,r,n),a=t.read_shift(4),i=a>0?yv(t,a,s,n):null;return[s,i]}var Lle=ib,ob=ib,Rle=ib,Ple=ib,Mle={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Aj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ule={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uD(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Ole(t){var e="of:="+t.replace(v4,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function MC(t){var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function jle(t){return t.replace(/\./,"!")}var Jg={},Nm={},Zg=typeof Map<"u";function b4(t,e,n){var r=0,s=t.length;if(n){if(Zg?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=Zg?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<s;++r)if(t[r].t===e)return t.Count++,r;return t[s]={t:e},t.Count++,t.Unique++,n&&(Zg?(n.has(e)||n.set(e,[]),n.get(e).push(s)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(s))),s}function lb(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Go=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=Ix(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=Hw(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function Dh(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function Kf(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(r==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){ed(e.z,s),n.ssf[s]=e.z,n.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===r)return s;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function dj(t,e,n,r,s,a){try{r.cellNF&&(t.z=Vn[e])}catch(o){if(r.WTF)throw o}if(!(t.t==="z"&&!r.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ea(t.v)),(!r||r.cellText!==!1)&&t.t!=="z")try{if(Vn[e]==null&&ed(Mte[e]||"General",e),t.t==="e")t.w=t.w||gd[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cx(t.v);else if(t.t==="d"){var i=Ii(t.v);(i|0)===i?t.w=i.toString(10):t.w=Cx(i)}else{if(t.v===void 0)return"";t.w=Hh(t.v,Nm)}else t.t==="d"?t.w=iu(e,Ii(t.v),Nm):t.w=iu(e,t.v,Nm)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&n!=null)try{t.s=a.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Qw(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),r.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Qw(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),r.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&a.Fills)throw o}}}function Qle(t,e,n){if(t&&t["!ref"]){var r=ns(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function Hle(t,e){var n=ns(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=mr(n))}var Vle=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,zle=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Gle=/<(?:\w:)?hyperlink [^>]*>/mg,qle=/"(\w*:\w*)"/,Kle=/<(?:\w:)?col\b[^>]*[\/]?>/g,$le=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Wle=/<(?:\w:)?pageMargins[^>]*\/>/g,fj=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Yle=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Xle=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Jle(t,e,n,r,s,a,i){if(!t)return t;r||(r={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",m=t.match(zle);m?(u=t.slice(0,m.index),d=t.slice(m.index+m[0].length)):u=d=t;var p=u.match(fj);p?_4(p[0],o,s,n):(p=u.match(Yle))&&ece(p[0],p[1]||"",o,s,n);var x=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var C=u.slice(x,x+50).match(qle);C&&Hle(o,C[1])}var y=u.match(Xle);y&&y[1]&&fce(y[1],s);var T=[];if(e.cellStyles){var I=u.match(Kle);I&&lce(T,I)}m&&pce(m[1],o,e,l,a,i);var F=d.match($le);F&&(o["!autofilter"]=uce(F[0]));var M=[],O=d.match(Vle);if(O)for(x=0;x!=O.length;++x)M[x]=ns(O[x].slice(O[x].indexOf('"')+1));var Q=d.match(Gle);Q&&ace(o,Q,r);var j=d.match(Wle);if(j&&(o["!margins"]=ice(Jn(j[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=mr(l)),e.sheetRows>0&&o["!ref"]){var E=ns(o["!ref"]);e.sheetRows<=+E.e.r&&(E.e.r=e.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=mr(E))}return T.length>0&&(o["!cols"]=T),M.length>0&&(o["!merges"]=M),o}function Zle(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+mr(t[n])+'"/>';return e+"</mergeCells>"}function _4(t,e,n,r){var s=Jn(t);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=ts(ks(s.codeName)))}function ece(t,e,n,r,s){_4(t.slice(0,t.indexOf(">")),n,r,s)}function tce(t,e,n,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}a=!0,i.codeName=AA(Cs(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Xt("outlinePr",null,u)}!a&&!o||(s[s.length]=Xt("sheetPr",o,i))}var nce=["objects","scenarios","selectLockedCells","selectUnlockedCells"],rce=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function sce(t){var e={sheet:1};return nce.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),rce.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=p4(t.password).toString(16).toUpperCase()),Xt("sheetProtection",null,e)}function ace(t,e,n){for(var r=Array.isArray(t),s=0;s!=e.length;++s){var a=Jn(ks(e[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+ts(a.location))):(a.Target="#"+ts(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=ns(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Kn({c:u,r:l});r?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function ice(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function oce(t){return Dh(t),Xt("pageMargins",null,t)}function lce(t,e){for(var n=!1,r=0;r!=e.length;++r){var s=Jn(e[r],!0);s.hidden&&(s.hidden=Js(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,g4(s.width)),Uf(s);a<=i;)t[a++]=ta(s)}}function cce(t,e){for(var n=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(n[n.length]=Xt("col",null,lb(s,r)));return n[n.length]="</cols>",n.join("")}function uce(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function Ace(t,e,n,r){var s=typeof t.ref=="string"?t.ref:mr(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=Yl(s);i.s.r==i.e.r&&(i.e.r=Yl(e["!ref"]).e.r,s=mr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Xt("autoFilter",null,{ref:s})}var dce=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function fce(t,e){e.Views||(e.Views=[{}]),(t.match(dce)||[]).forEach(function(n,r){var s=Jn(n);e.Views[r]||(e.Views[r]={}),+s.zoomScale&&(e.Views[r].zoom=+s.zoomScale),Js(s.rightToLeft)&&(e.Views[r].RTL=!0)})}function hce(t,e,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Xt("sheetViews",Xt("sheetView",null,s),{})}function mce(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=gd[t.v];break;case"d":r&&r.cellDates?s=ea(t.v,-1).toISOString():(t=ta(t),t.t="n",s=""+(t.v=Ii(ea(t.v)))),typeof t.z>"u"&&(t.z=Vn[14]);break;default:s=t.v;break}var o=xo("v",Cs(s)),l={r:e},u=Kf(r.cellXfs,t,r);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=xo("v",""+b4(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Xt("f",Cs(t.f),d)+(t.v!=null?o:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),Xt("c",o,l)}var pce=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Ex("v"),i=Ex("f");return function(l,u,d,m,p,x){for(var C=0,y="",T=[],I=[],F=0,M=0,O=0,Q="",j,E,S=0,k=0,z,P,R=0,G=0,q=Array.isArray(x.CellXf),le,ee=[],oe=[],K=Array.isArray(u),ne=[],X={},ce=!1,V=!!d.sheetStubs,J=l.split(e),re=0,ie=J.length;re!=ie;++re){y=J[re].trim();var fe=y.length;if(fe!==0){var Se=0;e:for(C=0;C<fe;++C)switch(y[C]){case">":if(y[C-1]!="/"){++C;break e}if(d&&d.cellStyles){if(E=Jn(y.slice(Se,C),!0),S=E.r!=null?parseInt(E.r,10):S+1,k=-1,d.sheetRows&&d.sheetRows<S)continue;X={},ce=!1,E.ht&&(ce=!0,X.hpt=parseFloat(E.ht),X.hpx=Km(X.hpt)),E.hidden=="1"&&(ce=!0,X.hidden=!0),E.outlineLevel!=null&&(ce=!0,X.level=+E.outlineLevel),ce&&(ne[S-1]=X)}break;case"<":Se=C;break}if(Se>=C)break;if(E=Jn(y.slice(Se,C),!0),S=E.r!=null?parseInt(E.r,10):S+1,k=-1,!(d.sheetRows&&d.sheetRows<S)){m.s.r>S-1&&(m.s.r=S-1),m.e.r<S-1&&(m.e.r=S-1),d&&d.cellStyles&&(X={},ce=!1,E.ht&&(ce=!0,X.hpt=parseFloat(E.ht),X.hpx=Km(X.hpt)),E.hidden=="1"&&(ce=!0,X.hidden=!0),E.outlineLevel!=null&&(ce=!0,X.level=+E.outlineLevel),ce&&(ne[S-1]=X)),T=y.slice(C).split(t);for(var ve=0;ve!=T.length&&T[ve].trim().charAt(0)=="<";++ve);for(T=T.slice(ve),C=0;C!=T.length;++C)if(y=T[C].trim(),y.length!==0){if(I=y.match(n),F=C,M=0,O=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,I!=null&&I.length===2){for(F=0,Q=I[1],M=0;M!=Q.length&&!((O=Q.charCodeAt(M)-64)<1||O>26);++M)F=26*F+O;--F,k=F}else++k;for(M=0;M!=y.length&&y.charCodeAt(M)!==62;++M);if(++M,E=Jn(y.slice(0,M),!0),E.r||(E.r=Kn({r:S-1,c:k})),Q=y.slice(M),j={t:""},(I=Q.match(a))!=null&&I[1]!==""&&(j.v=ts(I[1])),d.cellFormula){if((I=Q.match(i))!=null&&I[1]!==""){if(j.f=ts(ks(I[1])).replace(/\r\n/g,`
`),d.xlfn||(j.f=iD(j.f)),I[0].indexOf('t="array"')>-1)j.F=(Q.match(s)||[])[1],j.F.indexOf(":")>-1&&ee.push([ns(j.F),j.F]);else if(I[0].indexOf('t="shared"')>-1){P=Jn(I[0]);var ye=ts(ks(I[1]));d.xlfn||(ye=iD(ye)),oe[parseInt(P.si,10)]=[P,ye,E.r]}}else(I=Q.match(/<f[^>]*\/>/))&&(P=Jn(I[0]),oe[P.si]&&(j.f=doe(oe[P.si][1],oe[P.si][2],E.r)));var we=ga(E.r);for(M=0;M<ee.length;++M)we.r>=ee[M][0].s.r&&we.r<=ee[M][0].e.r&&we.c>=ee[M][0].s.c&&we.c<=ee[M][0].e.c&&(j.F=ee[M][1])}if(E.t==null&&j.v===void 0)if(j.f||j.F)j.v=0,j.t="n";else if(V)j.t="z";else continue;else j.t=E.t||"n";switch(m.s.c>k&&(m.s.c=k),m.e.c<k&&(m.e.c=k),j.t){case"n":if(j.v==""||j.v==null){if(!V)continue;j.t="z"}else j.v=parseFloat(j.v);break;case"s":if(typeof j.v>"u"){if(!V)continue;j.t="z"}else z=Jg[parseInt(j.v,10)],j.v=z.t,j.r=z.r,d.cellHTML&&(j.h=z.h);break;case"str":j.t="s",j.v=j.v!=null?ks(j.v):"",d.cellHTML&&(j.h=t4(j.v));break;case"inlineStr":I=Q.match(r),j.t="s",I!=null&&(z=m4(I[1]))?(j.v=z.t,d.cellHTML&&(j.h=z.h)):j.v="";break;case"b":j.v=Js(j.v);break;case"d":d.cellDates?j.v=ea(j.v,1):(j.v=Ii(ea(j.v,1)),j.t="n");break;case"e":(!d||d.cellText!==!1)&&(j.w=j.v),j.v=mO[j.v];break}if(R=G=0,le=null,q&&E.s!==void 0&&(le=x.CellXf[E.s],le!=null&&(le.numFmtId!=null&&(R=le.numFmtId),d.cellStyles&&le.fillId!=null&&(G=le.fillId))),dj(j,R,G,d,p,x),d.cellDates&&q&&j.t=="n"&&cp(Vn[R])&&(j.t="d",j.v=sb(j.v)),E.cm&&d.xlmeta){var me=(d.xlmeta.Cell||[])[+E.cm-1];me&&me.type=="XLDAPR"&&(j.D=!0)}if(K){var he=ga(E.r);u[he.r]||(u[he.r]=[]),u[he.r][he.c]=j}else u[E.r]=j}}}}ne.length>0&&(u["!rows"]=ne)}}();function gce(t,e,n,r){var s=[],a=[],i=ns(t["!ref"]),o="",l,u="",d=[],m=0,p=0,x=t["!rows"],C=Array.isArray(t),y={r:u},T,I=-1;for(p=i.s.c;p<=i.e.c;++p)d[p]=pa(p);for(m=i.s.r;m<=i.e.r;++m){for(a=[],u=Za(m),p=i.s.c;p<=i.e.c;++p){l=d[p]+u;var F=C?(t[m]||[])[p]:t[l];F!==void 0&&(o=mce(F,l,t,e))!=null&&a.push(o)}(a.length>0||x&&x[m])&&(y={r:u},x&&x[m]&&(T=x[m],T.hidden&&(y.hidden=1),I=-1,T.hpx?I=Fx(T.hpx):T.hpt&&(I=T.hpt),I>-1&&(y.ht=I,y.customHeight=1),T.level&&(y.outlineLevel=T.level)),s[s.length]=Xt("row",a.join(""),y))}if(x)for(;m<x.length;++m)x&&x[m]&&(y={r:m+1},T=x[m],T.hidden&&(y.hidden=1),I=-1,T.hpx?I=Fx(T.hpx):T.hpt&&(I=T.hpt),I>-1&&(y.ht=I,y.customHeight=1),T.level&&(y.outlineLevel=T.level),s[s.length]=Xt("row","",y));return s.join("")}function hj(t,e,n,r){var s=[ei,Xt("worksheet",null,{xmlns:n0[0],"xmlns:r":Bi.r})],a=n.SheetNames[t],i=0,o="",l=n.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=ns(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=mr(d)}r||(r={}),l["!comments"]=[];var m=[];tce(l,n,t,e,s),s[s.length]=Xt("dimension",null,{ref:u}),s[s.length]=hce(l,e,t,n),e.sheetFormat&&(s[s.length]=Xt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=cce(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=gce(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=sce(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Ace(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Zle(l["!merges"]));var p=-1,x,C=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(x={ref:y[0]},y[1].Target.charAt(0)!="#"&&(C=bs(r,-1,Cs(y[1].Target).replace(/#.*$/,""),Fr.HLINK),x["r:id"]="rId"+C),(p=y[1].Target.indexOf("#"))>-1&&(x.location=Cs(y[1].Target.slice(p+1))),y[1].Tooltip&&(x.tooltip=Cs(y[1].Tooltip)),s[s.length]=Xt("hyperlink",null,x))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=oce(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=xo("ignoredErrors",Xt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),m.length>0&&(C=bs(r,-1,"../drawings/drawing"+(t+1)+".xml",Fr.DRAW),s[s.length]=Xt("drawing",null,{"r:id":"rId"+C}),l["!drawing"]=m),l["!comments"].length>0&&(C=bs(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Fr.VML),s[s.length]=Xt("legacyDrawing",null,{"r:id":"rId"+C}),l["!legacy"]=C),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function xce(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=s/20),n}function vce(t,e,n){var r=yt(145),s=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;s.hpx?a=Fx(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var m=-1,p=-1,x=d<<10;x<d+1<<10;++x){u.c=x;var C=Array.isArray(n)?(n[u.r]||[])[u.c]:n[Kn(u)];C&&(m<0&&(m=x),p=x)}m<0||(++o,r.write_shift(4,m),r.write_shift(4,p))}var y=r.l;return r.l=l,r.write_shift(4,o),r.l=y,r.length>r.l?r.slice(0,r.l):r}function yce(t,e,n,r){var s=vce(r,n,e);(s.length>17||(e["!rows"]||[])[r])&&Mt(t,0,s)}var wce=i0,bce=dp;function _ce(){}function Cce(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Tne(t),n}function Ece(t,e,n){n==null&&(n=yt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return Uw({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),uO(t,n),n.slice(0,n.l)}function Sce(t){var e=ou(t);return[e]}function Tce(t,e,n){return n==null&&(n=yt(8)),r0(e,n)}function Nce(t){var e=s0(t);return[e]}function Bce(t,e,n){return n==null&&(n=yt(4)),a0(e,n)}function kce(t){var e=ou(t),n=t.read_shift(1);return[e,n,"b"]}function Ice(t,e,n){return n==null&&(n=yt(9)),r0(e,n),n.write_shift(1,t.v?1:0),n}function Fce(t){var e=s0(t),n=t.read_shift(1);return[e,n,"b"]}function Dce(t,e,n){return n==null&&(n=yt(5)),a0(e,n),n.write_shift(1,t.v?1:0),n}function Lce(t){var e=ou(t),n=t.read_shift(1);return[e,n,"e"]}function Rce(t,e,n){return n==null&&(n=yt(9)),r0(e,n),n.write_shift(1,t.v),n}function Pce(t){var e=s0(t),n=t.read_shift(1);return[e,n,"e"]}function Mce(t,e,n){return n==null&&(n=yt(8)),a0(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function Uce(t){var e=ou(t),n=t.read_shift(4);return[e,n,"s"]}function Oce(t,e,n){return n==null&&(n=yt(12)),r0(e,n),n.write_shift(4,e.v),n}function jce(t){var e=s0(t),n=t.read_shift(4);return[e,n,"s"]}function Qce(t,e,n){return n==null&&(n=yt(8)),a0(e,n),n.write_shift(4,e.v),n}function Hce(t){var e=ou(t),n=$o(t);return[e,n,"n"]}function Vce(t,e,n){return n==null&&(n=yt(16)),r0(e,n),zh(t.v,n),n}function mj(t){var e=s0(t),n=$o(t);return[e,n,"n"]}function zce(t,e,n){return n==null&&(n=yt(12)),a0(e,n),zh(t.v,n),n}function Gce(t){var e=ou(t),n=u4(t);return[e,n,"n"]}function qce(t,e,n){return n==null&&(n=yt(12)),r0(e,n),AO(t.v,n),n}function Kce(t){var e=s0(t),n=u4(t);return[e,n,"n"]}function $ce(t,e,n){return n==null&&(n=yt(8)),a0(e,n),AO(t.v,n),n}function Wce(t){var e=ou(t),n=o4(t);return[e,n,"is"]}function Yce(t){var e=ou(t),n=Yo(t);return[e,n,"str"]}function Xce(t,e,n){return n==null&&(n=yt(12+4*t.v.length)),r0(e,n),Wi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Jce(t){var e=s0(t),n=Yo(t);return[e,n,"str"]}function Zce(t,e,n){return n==null&&(n=yt(8+4*t.v.length)),a0(e,n),Wi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function eue(t,e,n){var r=t.l+e,s=ou(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(n.cellFormula){t.l+=2;var o=ob(t,r-t.l,n);i[3]=Ho(o,null,s,n.supbooks,n)}else t.l=r;return i}function tue(t,e,n){var r=t.l+e,s=ou(t);s.r=n["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(n.cellFormula){t.l+=2;var o=ob(t,r-t.l,n);i[3]=Ho(o,null,s,n.supbooks,n)}else t.l=r;return i}function nue(t,e,n){var r=t.l+e,s=ou(t);s.r=n["!row"];var a=$o(t),i=[s,a,"n"];if(n.cellFormula){t.l+=2;var o=ob(t,r-t.l,n);i[3]=Ho(o,null,s,n.supbooks,n)}else t.l=r;return i}function rue(t,e,n){var r=t.l+e,s=ou(t);s.r=n["!row"];var a=Yo(t),i=[s,a,"str"];if(n.cellFormula){t.l+=2;var o=ob(t,r-t.l,n);i[3]=Ho(o,null,s,n.supbooks,n)}else t.l=r;return i}var sue=i0,aue=dp;function iue(t,e){return e==null&&(e=yt(4)),e.write_shift(4,t),e}function oue(t,e){var n=t.l+e,r=i0(t),s=l4(t),a=Yo(t),i=Yo(t),o=Yo(t);t.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function lue(t,e){var n=yt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));dp({s:ga(t[0]),e:ga(t[0])},n),c4("rId"+e,n);var r=t[1].Target.indexOf("#"),s=r==-1?"":t[1].Target.slice(r+1);return Wi(s||"",n),Wi(t[1].Tooltip||"",n),Wi("",n),n.slice(0,n.l)}function cue(){}function uue(t,e,n){var r=t.l+e,s=dO(t),a=t.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=Lle(t,r-t.l,n);i[1]=o}else t.l=r;return i}function Aue(t,e,n){var r=t.l+e,s=i0(t),a=[s];if(n.cellFormula){var i=Ple(t,r-t.l,n);a[1]=i,t.l=r}else t.l=r;return a}function due(t,e,n){n==null&&(n=yt(18));var r=lb(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),n.write_shift(2,s),n}var pj=["left","right","top","bottom","header","footer"];function fue(t){var e={};return pj.forEach(function(n){e[n]=$o(t)}),e}function hue(t,e){return e==null&&(e=yt(48)),Dh(t),pj.forEach(function(n){zh(t[n],e)}),e}function mue(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function pue(t,e,n){n==null&&(n=yt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function gue(t){var e=yt(24);return e.write_shift(4,4),e.write_shift(4,1),dp(t,e),e}function xue(t,e){return e==null&&(e=yt(66)),e.write_shift(2,t.password?p4(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function vue(){}function yue(){}function wue(t,e,n,r,s,a,i){if(!t)return t;var o=e||{};r||(r={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,p=!1,x,C,y,T,I,F,M,O,Q,j=[];o.biff=12,o["!row"]=0;var E=0,S=!1,k=[],z={},P=o.supbooks||s.supbooks||[[]];if(P.sharedf=z,P.arrayf=k,P.SheetNames=s.SheetNames||s.Sheets.map(function(K){return K.name}),!o.supbooks&&(o.supbooks=P,s.Names))for(var R=0;R<s.Names.length;++R)P[0][R+1]=s.Names[R];var G=[],q=[],le=!1;Dx[16]={n:"BrtShortReal",f:mj};var ee;if(pd(t,function(ne,X,ce){if(!p)switch(ce){case 148:u=ne;break;case 0:x=ne,o.sheetRows&&o.sheetRows<=x.r&&(p=!0),O=Za(T=x.r),o["!row"]=x.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=Km(ne.hpt)),q[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(C={t:ne[2]},ne[2]){case"n":C.v=ne[1];break;case"s":M=Jg[ne[1]],C.v=M.t,C.r=M.r;break;case"b":C.v=!!ne[1];break;case"e":C.v=ne[1],o.cellText!==!1&&(C.w=gd[C.v]);break;case"str":C.t="s",C.v=ne[1];break;case"is":C.t="s",C.v=ne[1].t;break}if((y=i.CellXf[ne[0].iStyleRef])&&dj(C,y.numFmtId,null,o,a,i),I=ne[0].c==-1?I+1:ne[0].c,o.dense?(l[T]||(l[T]=[]),l[T][I]=C):l[pa(I)+O]=C,o.cellFormula){for(S=!1,E=0;E<k.length;++E){var V=k[E];x.r>=V[0].s.r&&x.r<=V[0].e.r&&I>=V[0].s.c&&I<=V[0].e.c&&(C.F=mr(V[0]),S=!0)}!S&&ne.length>3&&(C.f=ne[3])}if(d.s.r>x.r&&(d.s.r=x.r),d.s.c>I&&(d.s.c=I),d.e.r<x.r&&(d.e.r=x.r),d.e.c<I&&(d.e.c=I),o.cellDates&&y&&C.t=="n"&&cp(Vn[y.numFmtId])){var J=bh(C.v);J&&(C.t="d",C.v=new Date(J.y,J.m-1,J.d,J.H,J.M,J.S,J.u))}ee&&(ee.type=="XLDAPR"&&(C.D=!0),ee=void 0);break;case 1:case 12:if(!o.sheetStubs||m)break;C={t:"z",v:void 0},I=ne[0].c==-1?I+1:ne[0].c,o.dense?(l[T]||(l[T]=[]),l[T][I]=C):l[pa(I)+O]=C,d.s.r>x.r&&(d.s.r=x.r),d.s.c>I&&(d.s.c=I),d.e.r<x.r&&(d.e.r=x.r),d.e.c<I&&(d.e.c=I),ee&&(ee.type=="XLDAPR"&&(C.D=!0),ee=void 0);break;case 176:j.push(ne);break;case 49:ee=((o.xlmeta||{}).Cell||[])[ne-1];break;case 494:var re=r["!id"][ne.relId];for(re?(ne.Target=re.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=re):ne.relId==""&&(ne.Target="#"+ne.loc),T=ne.rfx.s.r;T<=ne.rfx.e.r;++T)for(I=ne.rfx.s.c;I<=ne.rfx.e.c;++I)o.dense?(l[T]||(l[T]=[]),l[T][I]||(l[T][I]={t:"z",v:void 0}),l[T][I].l=ne):(F=Kn({c:I,r:T}),l[F]||(l[F]={t:"z",v:void 0}),l[F].l=ne);break;case 426:if(!o.cellFormula)break;k.push(ne),Q=o.dense?l[T][I]:l[pa(I)+O],Q.f=Ho(ne[1],d,{r:x.r,c:I},P,o),Q.F=mr(ne[0]);break;case 427:if(!o.cellFormula)break;z[Kn(ne[0].s)]=ne[1],Q=o.dense?l[T][I]:l[pa(I)+O],Q.f=Ho(ne[1],d,{r:x.r,c:I},P,o);break;case 60:if(!o.cellStyles)break;for(;ne.e>=ne.s;)G[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},le||(le=!0,g4(ne.w/256)),Uf(G[ne.e+1]);break;case 161:l["!autofilter"]={ref:mr(ne)};break;case 476:l["!margins"]=ne;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),ne.name&&(s.Sheets[n].CodeName=ne.name),(ne.above||ne.left)&&(l["!outline"]={above:ne.above,left:ne.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),ne.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!X.T){if(!m||o.WTF)throw new Error("Unexpected record 0x"+ce.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=mr(u||d)),o.sheetRows&&l["!ref"]){var oe=ns(l["!ref"]);o.sheetRows<=+oe.e.r&&(oe.e.r=o.sheetRows-1,oe.e.r>d.e.r&&(oe.e.r=d.e.r),oe.e.r<oe.s.r&&(oe.s.r=oe.e.r),oe.e.c>d.e.c&&(oe.e.c=d.e.c),oe.e.c<oe.s.c&&(oe.s.c=oe.e.c),l["!fullref"]=l["!ref"],l["!ref"]=mr(oe))}return j.length>0&&(l["!merges"]=j),G.length>0&&(l["!cols"]=G),q.length>0&&(l["!rows"]=q),l}function bue(t,e,n,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ta(e),e.z=e.z||Vn[14],e.v=Ii(ea(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:n,c:r};switch(l.s=Kf(s.cellXfs,e,s),e.l&&a["!links"].push([Kn(l),e.l]),e.c&&a["!comments"].push([Kn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=b4(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Mt(t,18,Qce(e,l)):Mt(t,7,Oce(e,l))):(l.t="str",i?Mt(t,17,Zce(e,l)):Mt(t,6,Xce(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Mt(t,13,$ce(e,l)):Mt(t,2,qce(e,l)):i?Mt(t,16,zce(e,l)):Mt(t,5,Vce(e,l)),!0;case"b":return l.t="b",i?Mt(t,15,Dce(e,l)):Mt(t,4,Ice(e,l)),!0;case"e":return l.t="e",i?Mt(t,14,Mce(e,l)):Mt(t,3,Rce(e,l)),!0}return i?Mt(t,12,Bce(e,l)):Mt(t,1,Tce(e,l)),!0}function _ue(t,e,n,r){var s=ns(e["!ref"]||"A1"),a,i="",o=[];Mt(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Za(d),yce(t,e,s,d);var m=!1;if(d<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(o[p]=pa(p)),a=o[p]+i;var x=l?(e[d]||[])[p]:e[a];if(!x){m=!1;continue}m=bue(t,x,d,p,r,e,m)}}Mt(t,146)}function Cue(t,e){!e||!e["!merges"]||(Mt(t,177,iue(e["!merges"].length)),e["!merges"].forEach(function(n){Mt(t,176,aue(n))}),Mt(t,178))}function Eue(t,e){!e||!e["!cols"]||(Mt(t,390),e["!cols"].forEach(function(n,r){n&&Mt(t,60,due(r,n))}),Mt(t,391))}function Sue(t,e){!e||!e["!ref"]||(Mt(t,648),Mt(t,649,gue(ns(e["!ref"]))),Mt(t,650))}function Tue(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var s=bs(n,-1,r[1].Target.replace(/#.*$/,""),Fr.HLINK);Mt(t,494,lue(r,s))}}),delete e["!links"]}function Nue(t,e,n,r){if(e["!comments"].length>0){var s=bs(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Fr.VML);Mt(t,551,c4("rId"+s)),e["!legacy"]=s}}function Bue(t,e,n,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:mr(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=Yl(a);o.s.r==o.e.r&&(o.e.r=Yl(e["!ref"]).e.r,a=mr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Mt(t,161,dp(ns(a))),Mt(t,162)}}function kue(t,e,n){Mt(t,133),Mt(t,137,pue(e,n)),Mt(t,138),Mt(t,134)}function Iue(t,e){e["!protect"]&&Mt(t,535,xue(e["!protect"]))}function Fue(t,e,n,r){var s=$l(),a=n.SheetNames[t],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[t].CodeName||o)}catch{}var l=ns(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Mt(s,129),(n.vbaraw||i["!outline"])&&Mt(s,147,Ece(o,i["!outline"])),Mt(s,148,bce(l)),kue(s,i,n.Workbook),Eue(s,i),_ue(s,i,t,e),Iue(s,i),Bue(s,i,n,t),Cue(s,i),Tue(s,i,r),i["!margins"]&&Mt(s,476,hue(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Sue(s,i),Nue(s,i,t,r),Mt(s,130),s.end()}function Due(t){var e=[],n=t.match(/^<c:numCache>/),r;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=n?+i[2]:i[2])});var s=ts((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){r=a.replace(/<.*?>/g,"")}),[e,s,r]}function Lue(t,e,n,r,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var p=Due(m);d.s.r=d.s.c=0,d.e.c=o,u=pa(o),p[0].forEach(function(x,C){i[u+Za(C)]={t:"n",v:x,z:p[1]},l=C}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=mr(d)),i}function Rue(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(fj);return o&&_4(o[0],a,s,n),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}function Pue(t,e){t.l+=10;var n=Yo(t);return{name:n}}function Mue(t,e,n,r,s){if(!t)return t;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return pd(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),l.name&&(s.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}var C4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Uue=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Oue=[],jue=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function AD(t,e){for(var n=0;n!=t.length;++n)for(var r=t[n],s=0;s!=e.length;++s){var a=e[s];if(r[a[0]]==null)r[a[0]]=a[1];else switch(a[2]){case"bool":typeof r[a[0]]=="string"&&(r[a[0]]=Js(r[a[0]]));break;case"int":typeof r[a[0]]=="string"&&(r[a[0]]=parseInt(r[a[0]],10));break}}}function dD(t,e){for(var n=0;n!=e.length;++n){var r=e[n];if(t[r[0]]==null)t[r[0]]=r[1];else switch(r[2]){case"bool":typeof t[r[0]]=="string"&&(t[r[0]]=Js(t[r[0]]));break;case"int":typeof t[r[0]]=="string"&&(t[r[0]]=parseInt(t[r[0]],10));break}}}function gj(t){dD(t.WBProps,C4),dD(t.CalcPr,jue),AD(t.WBView,Uue),AD(t.Sheets,Oue),Nm.date1904=Js(t.WBProps.date1904)}function Que(t){return!t.Workbook||!t.Workbook.WBProps?"false":Js(t.Workbook.WBProps.date1904)?"true":"false"}var Hue="][*?/\\".split("");function xj(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Hue.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function Vue(t,e,n){t.forEach(function(r,s){xj(r);for(var a=0;a<s;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function zue(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Vue(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)Qle(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}var Gue=/<\w+:workbook/;function que(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(t.replace(el,function(l,u){var d=Jn(l);switch(EA(d[0])){case"<?xml":break;case"<workbook":l.match(Gue)&&(s="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":C4.forEach(function(m){if(d[m[0]]!=null)switch(m[2]){case"bool":n.WBProps[m[0]]=Js(d[m[0]]);break;case"int":n.WBProps[m[0]]=parseInt(d[m[0]],10);break;default:n.WBProps[m[0]]=d[m[0]]}}),d.codeName&&(n.WBProps.CodeName=ks(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=ts(ks(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":a={},a.Name=ks(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Js(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=ts(ks(t.slice(i,u))),n.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),n0.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return gj(n),n}function vj(t){var e=[ei];e[e.length]=Xt("workbook",null,{xmlns:n0[0],"xmlns:r":Bi.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(C4.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Xt("workbookPr",null,r);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Cs(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Xt("sheet",null,i)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Xt("definedName",Cs(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Kue(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=wS(t),n.name=Yo(t),n}function $ue(t,e){return e||(e=yt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),c4(t.strRelID,e),Wi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Wue(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var s=e>8?Yo(t):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Yue(t,e){e||(e=yt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),uO(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Xue(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function Jue(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=Nne(t),i=Rle(t,0,n),o=l4(t);t.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Zue(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Dx[16]={n:"BrtFRTArchID$",f:Xue},pd(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Ho(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),s=!0;break;case 36:r.pop(),s=!1;break;case 37:r.push(d),s=!0;break;case 38:r.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),gj(n),n.Names=a,n.supbooks=i,n}function eAe(t,e){Mt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,s={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};Mt(t,156,$ue(s))}Mt(t,144)}function tAe(t,e){e||(e=yt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Wi("SheetJS",e),Wi(Iw.version,e),Wi(Iw.version,e),Wi("7262",e),e.length>e.l?e.slice(0,e.l):e}function nAe(t,e){e||(e=yt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function rAe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&s==-1?s=r:n[r].Hidden==1&&a==-1&&(a=r);a>s||(Mt(t,135),Mt(t,158,nAe(s)),Mt(t,136))}}function sAe(t,e){var n=$l();return Mt(n,131),Mt(n,128,tAe()),Mt(n,153,Yue(t.Workbook&&t.Workbook.WBProps||null)),rAe(n,t),eAe(n,t),Mt(n,132),n.end()}function aAe(t,e,n){return e.slice(-4)===".bin"?Zue(t,n):que(t,n)}function iAe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?wue(t,r,n,s,a,i,o):Jle(t,r,n,s,a,i,o)}function oAe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?Mue(t,r,n,s,a):Rue(t,r,n,s,a)}function lAe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?uoe():Aoe()}function cAe(t,e,n,r,s,a,i,o){return e.slice(-4)===".bin"?loe():coe()}function uAe(t,e,n,r){return e.slice(-4)===".bin"?aie(t,n,r):Kae(t,n,r)}function AAe(t,e,n){return ZO(t,n)}function dAe(t,e,n){return e.slice(-4)===".bin"?dae(t,n):cae(t,n)}function fAe(t,e,n){return e.slice(-4)===".bin"?roe(t,n):$ie(t,n)}function hAe(t,e,n){return e.slice(-4)===".bin"?Gie(t):Vie(t)}function mAe(t,e,n,r){return n.slice(-4)===".bin"?qie(t,e,n,r):void 0}function pAe(t,e,n){return e.slice(-4)===".bin"?jie(t,e,n):Hie(t,e,n)}function gAe(t,e,n){return(e.slice(-4)===".bin"?sAe:vj)(t)}function xAe(t,e,n,r,s){return(e.slice(-4)===".bin"?Fue:hj)(t,n,r,s)}function vAe(t,e,n){return(e.slice(-4)===".bin"?mie:XO)(t,n)}function yAe(t,e,n){return(e.slice(-4)===".bin"?mae:VO)(t,n)}function wAe(t,e,n){return(e.slice(-4)===".bin"?soe:nj)(t)}function bAe(t){return(t.slice(-4)===".bin"?Qie:ej)()}var yj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,wj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Cu(t,e){var n=t.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var s=t.match(yj),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(wj),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}function _Ae(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var r=t.match(yj),s,a,i,o;if(r)for(o=0;o!=r.length;++o)s=r[o].match(wj),(a=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),n[i]=s[2].slice(1,s[2].length-1));return n}var ex;function CAe(t,e){var n=ex[t]||ts(t);return n==="General"?Hh(e):iu(n,e)}function EAe(t,e,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Js(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=ea(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[ts(e)]=s}function SAe(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||gd[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cx(t.v):t.w=Hh(t.v):t.w=CAe(e||"General",t.v)}catch(a){if(n.WTF)throw a}try{var r=ex[e]||e||"General";if(n.cellNF&&(t.z=r),n.cellDates&&t.t=="n"&&cp(r)){var s=bh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(n.WTF)throw a}}}function TAe(t,e,n){if(n.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=Oae[r.Pattern]||r.Pattern)}t[e.ID]=e}function NAe(t,e,n,r,s,a,i,o,l,u){var d="General",m=r.StyleID,p={};u=u||{};var x=[],C=0;for(m===void 0&&o&&(m=o.StyleID),m===void 0&&i&&(m=i.StyleID);a[m]!==void 0&&(a[m].nf&&(d=a[m].nf),a[m].Interior&&x.push(a[m].Interior),!!a[m].Parent);)m=a[m].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=Js(t);break;case"String":r.t="s",r.r=BF(ts(t)),r.v=t.indexOf("<")>-1?ts(e||t).replace(/<.*?>/g,""):r.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),r.v=(ea(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=ts(t):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+t),r.t||(r.t="n");break;case"Error":r.t="e",r.v=mO[t],u.cellText!==!1&&(r.w=t);break;default:t==""&&e==""?r.t="z":(r.t="s",r.v=BF(e||t));break}if(SAe(r,d,u),u.cellFormula!==!1)if(r.Formula){var y=ts(r.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),r.f=Tm(y,s),delete r.Formula,r.ArrayRange=="RC"?r.F=Tm("RC:RC",s):r.ArrayRange&&(r.F=Tm(r.ArrayRange,s),l.push([ns(r.F),r.F]))}else for(C=0;C<l.length;++C)s.r>=l[C][0].s.r&&s.r<=l[C][0].e.r&&s.c>=l[C][0].s.c&&s.c<=l[C][0].e.c&&(r.F=l[C][1]);u.cellStyles&&(x.forEach(function(T){!p.patternType&&T.patternType&&(p.patternType=T.patternType)}),r.s=p),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function BAe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function UC(t,e){var n=e||{};up();var r=Cg(n4(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=ks(r));var s=r.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ta(n);return i.type="string",qm.to_workbook(r,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ke){s.indexOf("<"+Ke)>=0&&(a=!0)}),a)return hde(r,n);ex={"General Number":"General","General Date":Vn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Vn[15],"Short Date":Vn[14],"Long Time":Vn[19],"Medium Time":Vn[18],"Short Time":Vn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Vn[2],Standard:Vn[4],Percent:Vn[10],Scientific:Vn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},m=[],p=n.dense?[]:{},x="",C={},y={},T=Cu('<Data ss:Type="String">'),I=0,F=0,M=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},Q={},j={},E="",S=0,k=[],z={},P={},R=0,G=[],q=[],le={},ee=[],oe,K=!1,ne=[],X=[],ce={},V=0,J=0,re={Sheets:[],WBProps:{date1904:!1}},ie={};Tx.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var fe="";o=Tx.exec(r);)switch(o[3]=(fe=o[3]).toLowerCase()){case"data":if(fe=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?NAe(r.slice(I,o.index),E,T,l[l.length-1][0]=="comment"?le:C,{c:F,r:M},Q,ee[F],y,ne,n):(E="",T=Cu(o[0]),I=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(q.length>0&&(C.c=q),(!n.sheetRows||n.sheetRows>M)&&C.v!==void 0&&(n.dense?(p[M]||(p[M]=[]),p[M][F]=C):p[pa(F)+Za(M)]=C),C.HRef&&(C.l={Target:ts(C.HRef)},C.HRefScreenTip&&(C.l.Tooltip=C.HRefScreenTip),delete C.HRef,delete C.HRefScreenTip),(C.MergeAcross||C.MergeDown)&&(V=F+(parseInt(C.MergeAcross,10)|0),J=M+(parseInt(C.MergeDown,10)|0),k.push({s:{c:F,r:M},e:{c:V,r:J}})),!n.sheetStubs)C.MergeAcross?F=V+1:++F;else if(C.MergeAcross||C.MergeDown){for(var Se=F;Se<=V;++Se)for(var ve=M;ve<=J;++ve)(Se>F||ve>M)&&(n.dense?(p[ve]||(p[ve]=[]),p[ve][Se]={t:"z"}):p[pa(Se)+Za(ve)]={t:"z"});F=V+1}else++F;else C=_Ae(o[0]),C.Index&&(F=+C.Index-1),F<O.s.c&&(O.s.c=F),F>O.e.c&&(O.e.c=F),o[0].slice(-2)==="/>"&&++F,q=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(M<O.s.r&&(O.s.r=M),M>O.e.r&&(O.e.r=M),o[0].slice(-2)==="/>"&&(y=Cu(o[0]),y.Index&&(M=+y.Index-1)),F=0,++M):(y=Cu(o[0]),y.Index&&(M=+y.Index-1),ce={},(y.AutoFitHeight=="0"||y.Height)&&(ce.hpx=parseInt(y.Height,10),ce.hpt=Fx(ce.hpx),X[M]=ce),y.Hidden=="1"&&(ce.hidden=!0,X[M]=ce));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));m.push(x),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(p["!ref"]=mr(O),n.sheetRows&&n.sheetRows<=O.e.r&&(p["!fullref"]=p["!ref"],O.e.r=n.sheetRows-1,p["!ref"]=mr(O))),k.length&&(p["!merges"]=k),ee.length>0&&(p["!cols"]=ee),X.length>0&&(p["!rows"]=X),d[x]=p}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},M=F=0,l.push([o[3],!1]),u=Cu(o[0]),x=ts(u.Name),p=n.dense?[]:{},k=[],ne=[],X=[],ie={name:x,Hidden:0},re.Sheets.push(ie);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ee=[],K=!1}break;case"style":o[1]==="/"?TAe(Q,j,n):j=Cu(o[0]);break;case"numberformat":j.nf=ts(Cu(o[0]).Format||"General"),ex[j.nf]&&(j.nf=ex[j.nf]);for(var ye=0;ye!=392&&Vn[ye]!=j.nf;++ye);if(ye==392){for(ye=57;ye!=392;++ye)if(Vn[ye]==null){ed(j.nf,ye);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(oe=Cu(o[0]),oe.Hidden&&(oe.hidden=!0,delete oe.Hidden),oe.Width&&(oe.wpx=parseInt(oe.Width,10)),!K&&oe.wpx>10){K=!0,Go=WO;for(var we=0;we<ee.length;++we)ee[we]&&Uf(ee[we])}K&&Uf(oe),ee[oe.Index-1||ee.length]=oe;for(var me=0;me<+oe.Span;++me)ee[ee.length]=ta(oe);break;case"namedrange":if(o[1]==="/")break;re.Names||(re.Names=[]);var he=Jn(o[0]),Ve={Name:he.Name,Ref:Tm(he.RefersTo.slice(1),{r:0,c:0})};re.Sheets.length>0&&(Ve.Sheet=re.Sheets.length-1),re.Names.push(Ve);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=r.slice(S,o.index):S=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;j.Interior=Cu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Zne(z,fe,r.slice(R,o.index)):R=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));BAe(le),q.push(le)}else l.push([o[3],!1]),u=Cu(o[0]),le={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var nt=Cu(o[0]);p["!autofilter"]={ref:Tm(nt.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return gD(r,n);var Oe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Oe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Oe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":re.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Oe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Oe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(R,o.index)){case"SheetHidden":ie.Hidden=1;break;case"SheetVeryHidden":ie.Hidden=2;break}else R=o.index+o[0].length;break;case"header":p["!margins"]||Dh(p["!margins"]={},"xlml"),isNaN(+Jn(o[0]).Margin)||(p["!margins"].header=+Jn(o[0]).Margin);break;case"footer":p["!margins"]||Dh(p["!margins"]={},"xlml"),isNaN(+Jn(o[0]).Margin)||(p["!margins"].footer=+Jn(o[0]).Margin);break;case"pagemargins":var Ie=Jn(o[0]);p["!margins"]||Dh(p["!margins"]={},"xlml"),isNaN(+Ie.Top)||(p["!margins"].top=+Ie.Top),isNaN(+Ie.Left)||(p["!margins"].left=+Ie.Left),isNaN(+Ie.Right)||(p["!margins"].right=+Ie.Right),isNaN(+Ie.Bottom)||(p["!margins"].bottom=+Ie.Bottom);break;case"displayrighttoleft":re.Views||(re.Views=[]),re.Views[0]||(re.Views[0]={}),re.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Oe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Oe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Oe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Oe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Oe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Oe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Oe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Oe=!1}break;case"smarttags":break;default:Oe=!1;break}if(Oe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?EAe(P,fe,G,r.slice(R,o.index)):(G=o,R=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var je={};return!n.bookSheets&&!n.bookProps&&(je.Sheets=d),je.SheetNames=m,je.Workbook=re,je.SSF=ta(Vn),je.Props=z,je.Custprops=P,je}function NS(t,e){switch(S4(e=e||{}),e.type||"base64"){case"base64":return UC(Ec(t),e);case"binary":case"buffer":case"file":return UC(t,e);case"array":return UC(Gf(t),e)}}function kAe(t,e){var n=[];return t.Props&&n.push(ere(t.Props,e)),t.Custprops&&n.push(tre(t.Props,t.Custprops)),n.join("")}function IAe(){return""}function FAe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(Xt("NumberFormat",null,{"ss:Format":Cs(Vn[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};n.push(Xt("Style",a.join(""),i))}),Xt("Styles",n.join(""))}function bj(t){return Xt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+y4(t.Ref,{r:0,c:0})})}function DAe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(bj(s)))}return Xt("Names",n.join(""))}function LAe(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(bj(o)))}return a.join("")}function RAe(t,e,n,r){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Xt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Xt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Xt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Xt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(xo("ProtectContents","True")),t["!protect"].objects&&s.push(xo("ProtectObjects","True")),t["!protect"].scenarios&&s.push(xo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(xo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(xo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Xt("WorksheetOptions",s.join(""),{xmlns:gc.x})}function PAe(t){return t.map(function(e){var n=rne(e.t||""),r=Xt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Xt("Comment",r,{"ss:Author":e.a})}).join("")}function MAe(t,e,n,r,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Cs(y4(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=ga(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Cs(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Cs(t.l.Tooltip))),n["!merges"])for(var u=n["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var m="",p="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":m="Number",p=String(t.v);break;case"b":m="Boolean",p=t.v?"1":"0";break;case"e":m="Error",p=gd[t.v];break;case"d":m="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Vn[14]);break;case"s":m="String",p=nne(t.v||"");break}var x=Kf(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+x),o["ss:Index"]=i.c+1;var C=t.v!=null?p:"",y=t.t=="z"?"":'<Data ss:Type="'+m+'">'+C+"</Data>";return(t.c||[]).length>0&&(y+=PAe(t.c)),Xt("Cell",y,o)}function UAe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Km(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function OAe(t,e,n,r){if(!t["!ref"])return"";var s=ns(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(T,I){Uf(T);var F=!!T.width,M=lb(I,T),O={"ss:Index":I+1};F&&(O["ss:Width"]=kx(M.width)),T.hidden&&(O["ss:Hidden"]="1"),o.push(Xt("Column",null,O))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[UAe(u,(t["!rows"]||[])[u])],m=s.s.c;m<=s.e.c;++m){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>m)&&!(a[i].s.r>u)&&!(a[i].e.c<m)&&!(a[i].e.r<u)){(a[i].s.c!=m||a[i].s.r!=u)&&(p=!0);break}if(!p){var x={r:u,c:m},C=Kn(x),y=l?(t[u]||[])[m]:t[C];d.push(MAe(y,C,t,e,n,r,x))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function jAe(t,e,n){var r=[],s=n.SheetNames[t],a=n.Sheets[s],i=a?LAe(a,e,t,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?OAe(a,e,t,n):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(RAe(a,e,t,n)),r.join("")}function QAe(t,e){e||(e={}),t.SSF||(t.SSF=ta(Vn)),t.SSF&&(up(),tb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Kf(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(kAe(t,e)),n.push(IAe()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Xt("Worksheet",jAe(r,e,t),{"ss:Name":Cs(t.SheetNames[r])}));return n[2]=FAe(t,e),n[3]=DAe(t),ei+Xt("Workbook",n.join(""),{xmlns:gc.ss,"xmlns:o":gc.o,"xmlns:x":gc.x,"xmlns:ss":gc.ss,"xmlns:dt":gc.dt,"xmlns:html":gc.html})}function HAe(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=Dne(n),n.length-n.l<=4)return e;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=Lne(n),r=n.read_shift(4),r==0||r>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var VAe=[60,1084,2066,2165,2175];function zAe(t,e,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=YA(n,n.l),u=BS[l],d=0;u!=null&&VAe.indexOf(l)>-1;)a=YA(n,n.l+2),d=n.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=n.slice(d,n.l+4+a),i.push(o),n.l+=4+a,u=BS[l=YA(n,n.l)];var m=$i(i);po(m,0);var p=0;m.lens=[];for(var x=0;x<i.length;++x)m.lens.push(p),p+=i[x].length;if(m.length<r)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+m.length+" < "+r;return e.f(m,m.length,s)}function rA(t,e,n){if(t.t!=="z"&&t.XF){var r=0;try{r=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Vn[r])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||gd[t.v]:r===0||r=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Cx(t.v):t.w=Hh(t.v):t.w=iu(r,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&r&&t.t=="n"&&cp(Vn[r]||String(r))){var s=bh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function $1(t,e,n){return{v:t,ixfe:e,t:n}}function GAe(t,e){var n={opts:{}},r={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},m,p="",x,C,y,T,I={},F=[],M,O,Q=[],j=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},k=function(Ht){return Ht<8?kh[Ht]:Ht<64&&j[Ht-8]||kh[Ht]},z=function(Ht,_t,On){var An=_t.XF.data;if(!(!An||!An.patternType||!On||!On.cellStyles)){_t.s={},_t.s.patternType=An.patternType;var Tr;(Tr=Bx(k(An.icvFore)))&&(_t.s.fgColor={rgb:Tr}),(Tr=Bx(k(An.icvBack)))&&(_t.s.bgColor={rgb:Tr})}},P=function(Ht,_t,On){if(!(ce>1)&&!(On.sheetRows&&Ht.r>=On.sheetRows)){if(On.cellStyles&&_t.XF&&_t.XF.data&&z(Ht,_t,On),delete _t.ixfe,delete _t.XF,m=Ht,p=Kn(Ht),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ht.r<i.s.r&&(i.s.r=Ht.r),Ht.c<i.s.c&&(i.s.c=Ht.c),Ht.r+1>i.e.r&&(i.e.r=Ht.r+1),Ht.c+1>i.e.c&&(i.e.c=Ht.c+1),On.cellFormula&&_t.f){for(var An=0;An<F.length;++An)if(!(F[An][0].s.c>Ht.c||F[An][0].s.r>Ht.r)&&!(F[An][0].e.c<Ht.c||F[An][0].e.r<Ht.r)){_t.F=mr(F[An][0]),(F[An][0].s.c!=Ht.c||F[An][0].s.r!=Ht.r)&&delete _t.f,_t.f&&(_t.f=""+Ho(F[An][1],i,Ht,ne,R));break}}On.dense?(s[Ht.r]||(s[Ht.r]=[]),s[Ht.r][Ht.c]=_t):s[p]=_t}},R={enc:!1,sbcch:0,snames:[],sharedf:I,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(R.password=e.password);var G,q=[],le=[],ee=[],oe=[],K=!1,ne=[];ne.SheetNames=R.snames,ne.sharedf=R.sharedf,ne.arrayf=R.arrayf,ne.names=[],ne.XTI=[];var X=0,ce=0,V=0,J=[],re=[],ie;R.codepage=1200,Bu(1200);for(var fe=!1;t.l<t.length-1;){var Se=t.l,ve=t.read_shift(2);if(ve===0&&X===10)break;var ye=t.l===t.length?0:t.read_shift(2),we=BS[ve];if(we&&we.f){if(e.bookSheets&&X===133&&ve!==133)break;if(X=ve,we.r===2||we.r==12){var me=t.read_shift(2);if(ye-=2,!R.enc&&me!==ve&&((me&255)<<8|me>>8)!==ve)throw new Error("rt mismatch: "+me+"!="+ve);we.r==12&&(t.l+=10,ye-=10)}var he={};if(ve===10?he=we.f(t,ye,R):he=zAe(ve,we,t,ye,R),ce==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(ve){case 34:n.opts.Date1904=E.WBProps.date1904=he;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(R.enc||(t.l=0),R.enc=he,!e.password)throw new Error("File is password-protected");if(he.valid==null)throw new Error("Encryption scheme unsupported");if(!he.valid)throw new Error("Password is incorrect");break;case 92:R.lastuser=he;break;case 66:var Ve=Number(he);switch(Ve){case 21010:Ve=1200;break;case 32768:Ve=1e4;break;case 32769:Ve=1252;break}Bu(R.codepage=Ve),fe=!0;break;case 317:R.rrtabid=he;break;case 25:R.winlocked=he;break;case 439:n.opts.RefreshAll=he;break;case 12:n.opts.CalcCount=he;break;case 16:n.opts.CalcDelta=he;break;case 17:n.opts.CalcIter=he;break;case 13:n.opts.CalcMode=he;break;case 14:n.opts.CalcPrecision=he;break;case 95:n.opts.CalcSaveRecalc=he;break;case 15:R.CalcRefMode=he;break;case 2211:n.opts.FullCalc=he;break;case 129:he.fDialog&&(s["!type"]="dialog"),he.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),he.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:Q.push(he);break;case 430:ne.push([he]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(he);break;case 24:case 536:ie={Name:he.Name,Ref:Ho(he.rgce,i,null,ne,R)},he.itab>0&&(ie.Sheet=he.itab-1),ne.names.push(ie),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(he),he.Name=="_xlnm._FilterDatabase"&&he.itab>0&&he.rgce&&he.rgce[0]&&he.rgce[0][0]&&he.rgce[0][0][0]=="PtgArea3d"&&(re[he.itab-1]={ref:mr(he.rgce[0][0][1][2])});break;case 22:R.ExternCount=he;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(he),ne.XTI=ne.XTI.concat(he);break;case 2196:if(R.biff<8)break;ie!=null&&(ie.Comment=he[1]);break;case 18:s["!protect"]=he;break;case 19:he!==0&&R.WTF&&console.error("Password verifier: "+he);break;case 133:a[he.pos]=he,R.snames.push(he.name);break;case 10:{if(--ce)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=mr(i),e.sheetRows&&e.sheetRows<=i.e.r){var nt=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=mr(i),i.e.r=nt}i.e.r++,i.e.c++}q.length>0&&(s["!merges"]=q),le.length>0&&(s["!objects"]=le),ee.length>0&&(s["!cols"]=ee),oe.length>0&&(s["!rows"]=oe),E.Sheets.push(S)}u===""?d=s:r[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(R.biff===8&&(R.biff={9:2,521:3,1033:4}[ve]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[he.BIFFVer]||8),R.biffguess=he.BIFFVer==0,he.BIFFVer==0&&he.dt==4096&&(R.biff=5,fe=!0,Bu(R.codepage=28591)),R.biff==8&&he.BIFFVer==0&&he.dt==16&&(R.biff=2),ce++)break;if(s=e.dense?[]:{},R.biff<8&&!fe&&(fe=!0,Bu(R.codepage=e.codepage||1252)),R.biff<5||he.BIFFVer==0&&he.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Oe={pos:t.l-ye,name:u};a[Oe.pos]=Oe,R.snames.push(u)}else u=(a[Se]||{name:""}).name;he.dt==32&&(s["!type"]="chart"),he.dt==64&&(s["!type"]="macro"),q=[],le=[],R.arrayf=F=[],ee=[],oe=[],K=!1,S={Hidden:(a[Se]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[he.r]||[])[he.c]:s[Kn({c:he.c,r:he.r})])&&++he.c,M={ixfe:he.ixfe,XF:Q[he.ixfe]||{},v:he.val,t:"n"},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e);break;case 5:case 517:M={ixfe:he.ixfe,XF:Q[he.ixfe],v:he.val,t:he.t},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e);break;case 638:M={ixfe:he.ixfe,XF:Q[he.ixfe],v:he.rknum,t:"n"},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e);break;case 189:for(var Ie=he.c;Ie<=he.C;++Ie){var je=he.rkrec[Ie-he.c][0];M={ixfe:je,XF:Q[je],v:he.rkrec[Ie-he.c][1],t:"n"},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:Ie,r:he.r},M,e)}break;case 6:case 518:case 1030:{if(he.val=="String"){o=he;break}if(M=$1(he.val,he.cell.ixfe,he.tt),M.XF=Q[M.ixfe],e.cellFormula){var Ke=he.formula;if(Ke&&Ke[0]&&Ke[0][0]&&Ke[0][0][0]=="PtgExp"){var st=Ke[0][0][1][0],vt=Ke[0][0][1][1],Tt=Kn({r:st,c:vt});I[Tt]?M.f=""+Ho(he.formula,i,he.cell,ne,R):M.F=((e.dense?(s[st]||[])[vt]:s[Tt])||{}).F}else M.f=""+Ho(he.formula,i,he.cell,ne,R)}V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P(he.cell,M,e),o=he}break;case 7:case 519:if(o)o.val=he,M=$1(he,o.cell.ixfe,"s"),M.XF=Q[M.ixfe],e.cellFormula&&(M.f=""+Ho(o.formula,i,o.cell,ne,R)),V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P(o.cell,M,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(he);var xt=Kn(he[0].s);if(x=e.dense?(s[he[0].s.r]||[])[he[0].s.c]:s[xt],e.cellFormula&&x){if(!o||!xt||!x)break;x.f=""+Ho(he[1],i,he[0],ne,R),x.F=mr(he[0])}}break;case 1212:{if(!e.cellFormula)break;if(p){if(!o)break;I[Kn(o.cell)]=he[0],x=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[Kn(o.cell)],(x||{}).f=""+Ho(he[0],i,m,ne,R)}}break;case 253:M=$1(l[he.isst].t,he.ixfe,"s"),l[he.isst].h&&(M.h=l[he.isst].h),M.XF=Q[M.ixfe],V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e);break;case 513:e.sheetStubs&&(M={ixfe:he.ixfe,XF:Q[he.ixfe],t:"z"},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e));break;case 190:if(e.sheetStubs)for(var Vt=he.c;Vt<=he.C;++Vt){var Kt=he.ixfe[Vt-he.c];M={ixfe:Kt,XF:Q[Kt],t:"z"},V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:Vt,r:he.r},M,e)}break;case 214:case 516:case 4:M=$1(he.val,he.ixfe,"s"),M.XF=Q[M.ixfe],V>0&&(M.z=J[M.ixfe>>8&63]),rA(M,e,n.opts.Date1904),P({c:he.c,r:he.r},M,e);break;case 0:case 512:ce===1&&(i=he);break;case 252:l=he;break;case 1054:if(R.biff==4){J[V++]=he[1];for(var cn=0;cn<V+163&&Vn[cn]!=he[1];++cn);cn>=163&&ed(he[1],V+163)}else ed(he[1],he[0]);break;case 30:{J[V++]=he;for(var Gt=0;Gt<V+163&&Vn[Gt]!=he;++Gt);Gt>=163&&ed(he,V+163)}break;case 229:q=q.concat(he);break;case 93:le[he.cmo[0]]=R.lastobj=he;break;case 438:R.lastobj.TxO=he;break;case 127:R.lastobj.ImData=he;break;case 440:for(T=he[0].s.r;T<=he[0].e.r;++T)for(y=he[0].s.c;y<=he[0].e.c;++y)x=e.dense?(s[T]||[])[y]:s[Kn({c:y,r:T})],x&&(x.l=he[1]);break;case 2048:for(T=he[0].s.r;T<=he[0].e.r;++T)for(y=he[0].s.c;y<=he[0].e.c;++y)x=e.dense?(s[T]||[])[y]:s[Kn({c:y,r:T})],x&&x.l&&(x.l.Tooltip=he[1]);break;case 28:{if(R.biff<=5&&R.biff>=2)break;x=e.dense?(s[he[0].r]||[])[he[0].c]:s[Kn(he[0])];var Wt=le[he[2]];x||(e.dense?(s[he[0].r]||(s[he[0].r]=[]),x=s[he[0].r][he[0].c]={t:"z"}):x=s[Kn(he[0])]={t:"z"},i.e.r=Math.max(i.e.r,he[0].r),i.s.r=Math.min(i.s.r,he[0].r),i.e.c=Math.max(i.e.c,he[0].c),i.s.c=Math.min(i.s.c,he[0].c)),x.c||(x.c=[]),C={a:he[1],t:Wt.TxO.t},x.c.push(C)}break;case 2173:Fie(Q[he.ixfe],he.ext);break;case 125:{if(!R.cellStyles)break;for(;he.e>=he.s;)ee[he.e--]={width:he.w/256,level:he.level||0,hidden:!!(he.flags&1)},K||(K=!0,g4(he.w/256)),Uf(ee[he.e+1])}break;case 520:{var sn={};he.level!=null&&(oe[he.r]=sn,sn.level=he.level),he.hidden&&(oe[he.r]=sn,sn.hidden=!0),he.hpt&&(oe[he.r]=sn,sn.hpt=he.hpt,sn.hpx=Km(he.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Dh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ve]]=he;break;case 161:s["!margins"]||Dh(s["!margins"]={}),s["!margins"].header=he.header,s["!margins"].footer=he.footer;break;case 574:he.RTL&&(E.Views[0].RTL=!0);break;case 146:j=he;break;case 2198:G=he;break;case 140:O=he;break;case 442:u?S.CodeName=he||S.name:E.WBProps.CodeName=he||"ThisWorkbook";break}}else we||console.error("Missing Info for XLS Record 0x"+ve.toString(16)),t.l+=ye}return n.SheetNames=Ma(a).sort(function(Qt,Ht){return Number(Qt)-Number(Ht)}).map(function(Qt){return a[Qt].name}),e.bookSheets||(n.Sheets=r),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&re.forEach(function(Qt,Ht){n.Sheets[n.SheetNames[Ht]]["!autofilter"]=Qt}),n.Strings=l,n.SSF=ta(Vn),R.enc&&(n.Encryption=R.enc),G&&(n.Themes=G),n.Metadata={},O!==void 0&&(n.Metadata.Country=O),ne.names.length>0&&(E.Names=ne.names),n.Workbook=E,n}var tx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function qAe(t,e,n){var r=Nn.find(t,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=KF(r,bS,tx.DSI);for(var a in s)e[a]=s[a]}catch(u){if(n.WTF)throw u}var i=Nn.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=KF(i,_S,tx.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(n.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(wO(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function KAe(t,e){var n=[],r=[],s=[],a=0,i,o=_F(bS,"n"),l=_F(_S,"n");if(t.Props)for(i=Ma(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=Ma(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?n:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)NO.indexOf(s[a][0])>-1||yO.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);r.length&&Nn.utils.cfb_add(e,"/SummaryInformation",$F(r,tx.SI,l,_S)),(n.length||u.length)&&Nn.utils.cfb_add(e,"/DocumentSummaryInformation",$F(n,tx.DSI,o,bS,u.length?u:null,tx.UDI))}function _j(t,e){e||(e={}),S4(e),K5(),e.codepage&&q5(e.codepage);var n,r;if(t.FullPaths){if(Nn.find(t,"/encryption"))throw new Error("File is password-protected");n=Nn.find(t,"!CompObj"),r=Nn.find(t,"/Workbook")||Nn.find(t,"/Book")}else{switch(e.type){case"base64":t=vc(Ec(t));break;case"binary":t=vc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}po(t,0),r={content:t}}var s,a;if(n&&HAe(n),e.bookProps&&!e.bookSheets)s={};else{var i=Br?"buffer":"array";if(r&&r.content)s=GAe(r.content,e);else if((a=Nn.find(t,"PerfectOffice_MAIN"))&&a.content)s=Fh.to_workbook(a.content,(e.type=i,e));else if((a=Nn.find(t,"NativeContent_MAIN"))&&a.content)s=Fh.to_workbook(a.content,(e.type=i,e));else throw(a=Nn.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Nn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=ioe(t))}var o={};return t.FullPaths&&qAe(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function $Ae(t,e){var n=e||{},r=Nn.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Nn.utils.cfb_add(r,s,Cj(t,n)),n.biff==8&&(t.Props||t.Custprops)&&KAe(t,r),n.biff==8&&t.vbaraw&&ooe(r,Nn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var Dx={0:{f:xce},1:{f:Sce},2:{f:Gce},3:{f:Lce},4:{f:kce},5:{f:Hce},6:{f:Yce},7:{f:Uce},8:{f:rue},9:{f:nue},10:{f:eue},11:{f:tue},12:{f:Nce},13:{f:Kce},14:{f:Pce},15:{f:Fce},16:{f:mj},17:{f:Jce},18:{f:jce},19:{f:o4},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Jue},40:{},42:{},43:{f:Yae},44:{f:$ae},45:{f:Zae},46:{f:tie},47:{f:eie},48:{},49:{f:wne},50:{},51:{f:Rie},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:OO},62:{f:Wce},63:{f:zie},64:{f:vue},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Jo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:mue},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Cce},148:{f:wce,p:16},151:{f:cue},152:{},153:{f:Wue},154:{},155:{},156:{f:Kue},157:{},158:{},159:{T:1,f:Aae},160:{T:-1},161:{T:1,f:i0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:sue},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Die},336:{T:-1},337:{f:Uie,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:wS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:UO},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:uue},427:{f:Aue},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:fue},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:_ce},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:oue},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:wS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:toe},633:{T:1},634:{T:-1},635:{T:1,f:Zie},636:{T:-1},637:{f:Ene},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Pue},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:yue},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},BS={6:{f:PC},10:{f:Gd},12:{f:fi},13:{f:fi},14:{f:qa},15:{f:qa},16:{f:$o},17:{f:qa},18:{f:qa},19:{f:fi},20:{f:eD},21:{f:eD},23:{f:UO},24:{f:nD},25:{f:qa},26:{},27:{},28:{f:yse},29:{},34:{f:qa},35:{f:tD},38:{f:$o},39:{f:$o},40:{f:$o},41:{f:$o},42:{f:qa},43:{f:qa},47:{f:Fae},49:{f:Kre},51:{f:fi},60:{},61:{f:Hre},64:{f:qa},65:{f:qre},66:{f:fi},77:{},80:{},81:{},82:{},85:{f:fi},89:{},90:{},91:{},92:{f:Ire},93:{f:_se},94:{},95:{f:qa},96:{},97:{},99:{f:qa},125:{f:OO},128:{f:lse},129:{f:Dre},130:{f:fi},131:{f:qa},132:{f:qa},133:{f:Lre},134:{},140:{f:Ise},141:{f:fi},144:{},146:{f:Lse},151:{},152:{},153:{},154:{},155:{},156:{f:fi},157:{},158:{},160:{f:Qse},161:{f:Mse},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:sse},190:{f:ase},193:{f:Gd},197:{},198:{},199:{},200:{},201:{},202:{f:qa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:fi},220:{},221:{f:qa},222:{},224:{f:ose},225:{f:kre},226:{f:Gd},227:{},229:{f:wse},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Pre},253:{f:Wre},255:{f:Ure},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:BO},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qa},353:{f:Gd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:fse},431:{f:qa},432:{},433:{},434:{},437:{},438:{f:Sse},439:{f:qa},440:{f:Tse},441:{},442:{f:xv},443:{},444:{f:fi},445:{},446:{},448:{f:Gd},449:{f:Qre,r:2},450:{f:Gd},512:{f:XF},513:{f:jse},515:{f:Ase},516:{f:Xre},517:{f:ZF},519:{f:Hse},520:{f:Ore},523:{},545:{f:rD},549:{f:YF},566:{},574:{f:zre},638:{f:rse},659:{},1048:{},1054:{f:Zre},1084:{},1212:{f:gse},2048:{f:Bse},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:G1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Gd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Rse,r:12},2173:{f:Iie,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:pse,r:12},2197:{},2198:{f:Eie,r:12},2199:{},2200:{},2201:{},2202:{f:xse,r:12},2203:{f:Gd},2204:{},2205:{},2206:{},2207:{},2211:{f:jre},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:fi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Use},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Dse},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:XF},1:{},2:{f:Kse},3:{f:Gse},4:{f:zse},5:{f:ZF},7:{f:Wse},8:{},9:{f:G1},11:{},22:{f:fi},30:{f:tse},31:{},32:{},33:{f:rD},36:{},37:{f:YF},50:{f:Yse},62:{},52:{},67:{},68:{f:fi},69:{},86:{},126:{},127:{f:Vse},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Xse},223:{},234:{},354:{},421:{},518:{f:PC},521:{f:G1},536:{f:nD},547:{f:tD},561:{},579:{},1030:{f:PC},1033:{f:G1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Zt(t,e,n,r){var s=e;if(!isNaN(s)){var a=r||(n||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&s4(n)&&t.push(n)}}function WAe(t,e,n,r){var s=(n||[]).length||0;if(s<=8224)return Zt(t,e,n,s);var a=e;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u}}}function bv(t,e,n){return t||(t=yt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function YAe(t,e,n,r){var s=yt(9);return bv(s,t,e),kO(n,r||"b",s),s}function XAe(t,e,n){var r=yt(8+2*n.length);return bv(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function JAe(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Ii(ea(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Zt(t,2,$se(n,r,s)):Zt(t,3,qse(n,r,s));return;case"b":case"e":Zt(t,5,YAe(n,r,e.v,e.t));return;case"s":case"str":Zt(t,4,XAe(n,r,(e.v||"").slice(0,255)));return}Zt(t,1,bv(null,n,r))}function ZAe(t,e,n,r){var s=Array.isArray(e),a=ns(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=mr(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Za(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=pa(d)),i=l[d]+o;var m=s?(e[u]||[])[d]:e[i];m&&JAe(t,m,u,d)}}}function ede(t,e){for(var n=e||{},r=$l(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(s=a);if(s==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Zt(r,n.biff==4?1033:n.biff==3?521:9,h4(t,16,n)),ZAe(r,t.Sheets[t.SheetNames[s]],s,n),Zt(r,10),r.end()}function tde(t,e,n){Zt(t,49,$re({sz:12,name:"Arial"},n))}function nde(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Zt(t,1054,ese(s,e[s],n))})}function rde(t,e){var n=yt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Zt(t,2151,n),n=yt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),RO(ns(e["!ref"]||"A1"),n),n.write_shift(4,4),Zt(t,2152,n)}function sde(t,e){for(var n=0;n<16;++n)Zt(t,224,JF({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Zt(t,224,JF(r,0,e))})}function ade(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Zt(t,440,Nse(r)),r[1].Tooltip&&Zt(t,2048,kse(r))}delete e["!links"]}function ide(t,e){if(e){var n=0;e.forEach(function(r,s){++n<=256&&r&&Zt(t,125,Pse(lb(s,r),s))})}}function ode(t,e,n,r,s){var a=16+Kf(s.cellXfs,e,s);if(e.v==null&&!e.bf){Zt(t,513,qh(n,r,a));return}if(e.bf)Zt(t,6,Dle(e,n,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Ii(ea(e.v)):e.v;Zt(t,515,dse(n,r,i,a));break;case"b":case"e":Zt(t,517,use(n,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=b4(s.Strings,e.v,s.revStrings);Zt(t,253,Yre(n,r,o,a))}else Zt(t,516,Jre(n,r,(e.v||"").slice(0,255),a,s));break;default:Zt(t,513,qh(n,r,a))}}function lde(t,e,n){var r=$l(),s=n.SheetNames[t],a=n.Sheets[s]||{},i=(n||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,m="",p=[],x=ns(a["!ref"]||"A1"),C=u?65536:16384;if(x.e.c>255||x.e.r>=C){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");x.e.c=Math.min(x.e.c,255),x.e.r=Math.min(x.e.c,C-1)}Zt(r,2057,h4(n,16,e)),Zt(r,13,Wc(1)),Zt(r,12,Wc(100)),Zt(r,15,gl(!0)),Zt(r,17,gl(!1)),Zt(r,16,zh(.001)),Zt(r,95,gl(!0)),Zt(r,42,gl(!1)),Zt(r,43,gl(!1)),Zt(r,130,Wc(1)),Zt(r,128,cse()),Zt(r,131,gl(!1)),Zt(r,132,gl(!1)),u&&ide(r,a["!cols"]),Zt(r,512,nse(x,e)),u&&(a["!links"]=[]);for(var y=x.s.r;y<=x.e.r;++y){m=Za(y);for(var T=x.s.c;T<=x.e.c;++T){y===x.s.r&&(p[T]=pa(T)),d=p[T]+m;var I=l?(a[y]||[])[T]:a[d];I&&(ode(r,I,y,T,e),u&&I.l&&a["!links"].push([d,I.l]))}}var F=o.CodeName||o.name||s;return u&&Zt(r,574,Gre((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Zt(r,229,bse(a["!merges"])),u&&ade(r,a),Zt(r,442,IO(F)),u&&rde(r,a),Zt(r,10),r.end()}function cde(t,e,n){var r=$l(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=n.biff==8,l=n.biff==5;if(Zt(r,2057,h4(t,5,n)),n.bookType=="xla"&&Zt(r,135),Zt(r,225,o?Wc(1200):null),Zt(r,193,ure(2)),l&&Zt(r,191),l&&Zt(r,192),Zt(r,226),Zt(r,92,Fre("SheetJS",n)),Zt(r,66,Wc(o?1200:1252)),o&&Zt(r,353,Wc(0)),o&&Zt(r,448),Zt(r,317,Ose(t.SheetNames.length)),o&&t.vbaraw&&Zt(r,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Zt(r,442,IO(u))}Zt(r,156,Wc(17)),Zt(r,25,gl(!1)),Zt(r,18,gl(!1)),Zt(r,19,Wc(0)),o&&Zt(r,431,gl(!1)),o&&Zt(r,444,Wc(0)),Zt(r,61,Vre()),Zt(r,64,gl(!1)),Zt(r,141,Wc(0)),Zt(r,34,gl(Que(t)=="true")),Zt(r,14,gl(!0)),o&&Zt(r,439,gl(!1)),Zt(r,218,Wc(0)),tde(r,t,n),nde(r,t.SSF,n),sde(r,n),o&&Zt(r,352,gl(!1));var d=r.end(),m=$l();o&&Zt(m,140,Fse()),o&&n.Strings&&WAe(m,252,Mre(n.Strings)),Zt(m,10);var p=m.end(),x=$l(),C=0,y=0;for(y=0;y<t.SheetNames.length;++y)C+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var T=d.length+C+p.length;for(y=0;y<t.SheetNames.length;++y){var I=a[y]||{};Zt(x,133,Rre({pos:T,hs:I.Hidden||0,dt:0,name:t.SheetNames[y]},n)),T+=e[y].length}var F=x.end();if(C!=F.length)throw new Error("BS8 "+C+" != "+F.length);var M=[];return d.length&&M.push(d),F.length&&M.push(F),p.length&&M.push(p),$i(M)}function ude(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=ta(Vn)),t&&t.SSF&&(up(),tb(t.SSF),n.revssf=rb(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,T4(n),n.cellXfs=[],Kf(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)r[r.length]=lde(s,n,t);return r.unshift(cde(t,r,n)),$i(r)}function Cj(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var s=Yl(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return ude(t,e);case 4:case 3:case 2:return ede(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function fD(t,e){var n=e||{},r=n.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=$te(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,m=0,p=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},C=[];for(i=0;i<l.length;++i){var y=l[i].trim(),T=y.slice(0,3).toLowerCase();if(T=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}d=0;continue}if(!(T!="<td"&&T!="<th")){var I=y.split(/<\/t[dh]>/i);for(o=0;o<I.length;++o){var F=I[o].trim();if(F.match(/<t[dh]/i)){for(var M=F,O=0;M.charAt(0)=="<"&&(O=M.indexOf(">"))>-1;)M=M.slice(O+1);for(var Q=0;Q<C.length;++Q){var j=C[Q];j.s.c==d&&j.s.r<u&&u<=j.e.r&&(d=j.e.c+1,Q=-1)}var E=Jn(F.slice(0,F.indexOf(">")));p=E.colspan?+E.colspan:1,((m=+E.rowspan)>1||p>1)&&C.push({s:{r:u,c:d},e:{r:u+(m||1)-1,c:d+p-1}});var S=E.t||E["data-t"]||"";if(!M.length){d+=p;continue}if(M=$8(M),x.s.r>u&&(x.s.r=u),x.e.r<u&&(x.e.r=u),x.s.c>d&&(x.s.c=d),x.e.c<d&&(x.e.c=d),!M.length){d+=p;continue}var k={t:"s",v:M};n.raw||!M.trim().length||S=="s"||(M==="TRUE"?k={t:"b",v:!0}:M==="FALSE"?k={t:"b",v:!1}:isNaN(Iu(M))?isNaN(Gm(M).getDate())||(k={t:"d",v:ea(M)},n.cellDates||(k={t:"n",v:Ii(k.v)}),k.z=n.dateNF||Vn[14]):k={t:"n",v:Iu(M)}),n.dense?(r[u]||(r[u]=[]),r[u][d]=k):r[Kn({r:u,c:d})]=k,d+=p}}}}return r["!ref"]=mr(x),C.length&&(r["!merges"]=C),r}function Ade(t,e,n,r){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>n||s[u].s.c>i)&&!(s[u].e.r<n||s[u].e.c<i)){if(s[u].s.r<n||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Kn({r:n,c:i}),m=r.dense?(t[n]||[])[i]:t[d],p=m&&m.v!=null&&(m.h||t4(m.w||(cd(m),m.w)||""))||"",x={};o>1&&(x.rowspan=o),l>1&&(x.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":m&&(x["data-t"]=m&&m.t||"z",m.v!=null&&(x["data-v"]=m.v),m.z!=null&&(x["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+m.l.Target+'">'+p+"</a>")),x.id=(r.id||"sjs")+"-"+d,a.push(Xt("td",p,x))}}var C="<tr>";return C+a.join("")+"</tr>"}var dde='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',fde="</body></html>";function hde(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return qf(fD(n[0],e),e);var r=I4();return n.forEach(function(s,a){F4(r,fD(s,e),"Sheet"+(a+1))}),r}function mde(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function Ej(t,e){var n=e||{},r=n.header!=null?n.header:dde,s=n.footer!=null?n.footer:fde,a=[r],i=Yl(t["!ref"]);n.dense=Array.isArray(t),a.push(mde(t,i,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(Ade(t,i,o,n));return a.push("</table>"+s),a.join("")}function Sj(t,e,n){var r=n||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?ga(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=Yl(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var m=[],p=0,x=t["!rows"]||(t["!rows"]=[]),C=0,y=0,T=0,I=0,F=0,M=0;for(t["!cols"]||(t["!cols"]=[]);C<o.length&&y<l;++C){var O=o[C];if(hD(O)){if(r.display)continue;x[y]={hidden:!0}}var Q=O.children;for(T=I=0;T<Q.length;++T){var j=Q[T];if(!(r.display&&hD(j))){var E=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):$8(j.innerHTML),S=j.getAttribute("data-z")||j.getAttribute("z");for(p=0;p<m.length;++p){var k=m[p];k.s.c==I+a&&k.s.r<y+s&&y+s<=k.e.r&&(I=k.e.c+1-a,p=-1)}M=+j.getAttribute("colspan")||1,((F=+j.getAttribute("rowspan")||1)>1||M>1)&&m.push({s:{r:y+s,c:I+a},e:{r:y+s+(F||1)-1,c:I+a+(M||1)-1}});var z={t:"s",v:E},P=j.getAttribute("data-t")||j.getAttribute("t")||"";E!=null&&(E.length==0?z.t=P||"z":r.raw||E.trim().length==0||P=="s"||(E==="TRUE"?z={t:"b",v:!0}:E==="FALSE"?z={t:"b",v:!1}:isNaN(Iu(E))?isNaN(Gm(E).getDate())||(z={t:"d",v:ea(E)},r.cellDates||(z={t:"n",v:Ii(z.v)}),z.z=r.dateNF||Vn[14]):z={t:"n",v:Iu(E)})),z.z===void 0&&S!=null&&(z.z=S);var R="",G=j.getElementsByTagName("A");if(G&&G.length)for(var q=0;q<G.length&&!(G[q].hasAttribute("href")&&(R=G[q].getAttribute("href"),R.charAt(0)!="#"));++q);R&&R.charAt(0)!="#"&&(z.l={Target:R}),r.dense?(t[y+s]||(t[y+s]=[]),t[y+s][I+a]=z):t[Kn({c:I+a,r:y+s})]=z,u.e.c<I+a&&(u.e.c=I+a),I+=M}}++y}return m.length&&(t["!merges"]=(t["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,y-1+s),t["!ref"]=mr(u),y>=l&&(t["!fullref"]=mr((u.e.r=o.length-C+y-1+s,u))),t}function Tj(t,e){var n=e||{},r=n.dense?[]:{};return Sj(r,t,e)}function pde(t,e){return qf(Tj(t,e),e)}function hD(t){var e="",n=gde(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function gde(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function xde(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=ts(e.replace(/<[^>]*>/g,""));return[n]}var mD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Nj(t,e){var n=e||{},r=n4(t),s=[],a,i,o={name:""},l="",u=0,d,m,p={},x=[],C=n.dense?[]:{},y,T,I={value:""},F="",M=0,O=[],Q=-1,j=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,k={},z=[],P={},R=0,G=0,q=[],le=1,ee=1,oe=[],K={Names:[]},ne={},X=["",""],ce=[],V={},J="",re=0,ie=!1,fe=!1,Se=0;for(Tx.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Tx.exec(r);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?C["!ref"]=mr(E):C["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=E.e.r&&(C["!fullref"]=C["!ref"],E.e.r=n.sheetRows-1,C["!ref"]=mr(E)),z.length&&(C["!merges"]=z),q.length&&(C["!rows"]=q),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),x.push(d.name),p[d.name]=C,fe=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Jn(y[0],!1),Q=j=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,C=n.dense?[]:{},z=[],q=[],fe=!0);break;case"table-row-group":y[1]==="/"?--S:++S;break;case"table-row":case"行":if(y[1]==="/"){Q+=le,le=1;break}if(m=Jn(y[0],!1),m.行号?Q=m.行号-1:Q==-1&&(Q=0),le=+m["number-rows-repeated"]||1,le<10)for(Se=0;Se<le;++Se)S>0&&(q[Q+Se]={level:S});j=-1;break;case"covered-table-cell":y[1]!=="/"&&++j,n.sheetStubs&&(n.dense?(C[Q]||(C[Q]=[]),C[Q][j]={t:"z"}):C[Kn({r:Q,c:j})]={t:"z"}),F="",O=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++j,I=Jn(y[0],!1),ee=parseInt(I["number-columns-repeated"]||"1",10),T={t:"z",v:null},I.formula&&n.cellFormula!=!1&&(T.f=uD(ts(I.formula))),(I.数据类型||I["value-type"])=="string"&&(T.t="s",T.v=ts(I["string-value"]||""),n.dense?(C[Q]||(C[Q]=[]),C[Q][j]=T):C[Kn({r:Q,c:j})]=T),j+=ee-1;else if(y[1]!=="/"){++j,F="",M=0,O=[],ee=1;var ve=le?Q+le-1:Q;if(j>E.e.c&&(E.e.c=j),j<E.s.c&&(E.s.c=j),Q<E.s.r&&(E.s.r=Q),ve>E.e.r&&(E.e.r=ve),I=Jn(y[0],!1),ce=[],V={},T={t:I.数据类型||I["value-type"],v:null},n.cellFormula)if(I.formula&&(I.formula=ts(I.formula)),I["number-matrix-columns-spanned"]&&I["number-matrix-rows-spanned"]&&(R=parseInt(I["number-matrix-rows-spanned"],10)||0,G=parseInt(I["number-matrix-columns-spanned"],10)||0,P={s:{r:Q,c:j},e:{r:Q+R-1,c:j+G-1}},T.F=mr(P),oe.push([P,T.F])),I.formula)T.f=uD(I.formula);else for(Se=0;Se<oe.length;++Se)Q>=oe[Se][0].s.r&&Q<=oe[Se][0].e.r&&j>=oe[Se][0].s.c&&j<=oe[Se][0].e.c&&(T.F=oe[Se][1]);switch((I["number-columns-spanned"]||I["number-rows-spanned"])&&(R=parseInt(I["number-rows-spanned"],10)||0,G=parseInt(I["number-columns-spanned"],10)||0,P={s:{r:Q,c:j},e:{r:Q+R-1,c:j+G-1}},z.push(P)),I["number-columns-repeated"]&&(ee=parseInt(I["number-columns-repeated"],10)),T.t){case"boolean":T.t="b",T.v=Js(I["boolean-value"]);break;case"float":T.t="n",T.v=parseFloat(I.value);break;case"percentage":T.t="n",T.v=parseFloat(I.value);break;case"currency":T.t="n",T.v=parseFloat(I.value);break;case"date":T.t="d",T.v=ea(I["date-value"]),n.cellDates||(T.t="n",T.v=Ii(T.v)),T.z="m/d/yy";break;case"time":T.t="n",T.v=Gte(I["time-value"])/86400,n.cellDates&&(T.t="d",T.v=sb(T.v)),T.z="HH:MM:SS";break;case"number":T.t="n",T.v=parseFloat(I.数据数值);break;default:if(T.t==="string"||T.t==="text"||!T.t)T.t="s",I["string-value"]!=null&&(F=ts(I["string-value"]),O=[]);else throw new Error("Unsupported value type "+T.t)}}else{if(ie=!1,T.t==="s"&&(T.v=F||"",O.length&&(T.R=O),ie=M==0),ne.Target&&(T.l=ne),ce.length>0&&(T.c=ce,ce=[]),F&&n.cellText!==!1&&(T.w=F),ie&&(T.t="z",delete T.v),(!ie||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=Q))for(var ye=0;ye<le;++ye){if(ee=parseInt(I["number-columns-repeated"]||"1",10),n.dense)for(C[Q+ye]||(C[Q+ye]=[]),C[Q+ye][j]=ye==0?T:ta(T);--ee>0;)C[Q+ye][j+ee]=ta(T);else for(C[Kn({r:Q+ye,c:j})]=T;--ee>0;)C[Kn({r:Q+ye,c:j+ee})]=ta(T);E.e.c<=j&&(E.e.c=j)}ee=parseInt(I["number-columns-repeated"]||"1",10),j+=ee-1,ee=0,T={},F="",O=[]}ne={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;V.t=F,O.length&&(V.R=O),V.a=J,ce.push(V)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);J="",re=0,F="",M=0,O=[];break;case"creator":y[1]==="/"?J=r.slice(re,y.index):re=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);F="",M=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(k[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Jn(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Jn(y[0],!1),l+=mD[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Jn(y[0],!1),l+=mD[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=r.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Jn(y[0],!1),X=MC(i["cell-range-address"]);var we={Name:i.name,Ref:X[0]+"!"+X[1]};fe&&(we.Sheet=x.length),K.Names.push(we);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!I||!I["string-value"])){var me=xde(r.slice(M,y.index));F=(F.length>0?F+`
`:"")+me[0]}else Jn(y[0],!1),M=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{X=MC(Jn(y[0])["target-range-address"]),p[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(ne=Jn(y[0],!1),!ne.href)break;ne.Target=ts(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(X=MC(ne.Target.slice(1)),ne.Target="#"+X[0]+"!"+X[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(n.WTF)throw new Error(y)}}var he={Sheets:p,SheetNames:x,Workbook:K};return n.bookSheets&&delete he.Sheets,he}function pD(t,e){e=e||{},Kc(t,"META-INF/manifest.xml")&&Gne(di(t,"META-INF/manifest.xml"),e);var n=yc(t,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=Nj(ks(n),e);return Kc(t,"meta.xml")&&(r.Props=xO(di(t,"meta.xml"))),r}function gD(t,e){return Nj(t,e)}var vde=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Sx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ei+e}}(),xD=function(){var t=function(a){return Cs(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Cs(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,m=Yl(a["!ref"]||"A1"),p=a["!merges"]||[],x=0,C=Array.isArray(a);if(a["!cols"])for(d=0;d<=m.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",T=a["!rows"]||[];for(u=0;u<m.s.r;++u)y=T[u]?' table:style-name="ro'+T[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=m.e.r;++u){for(y=T[u]?' table:style-name="ro'+T[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<m.s.c;++d)l.push(e);for(;d<=m.e.c;++d){var I=!1,F={},M="";for(x=0;x!=p.length;++x)if(!(p[x].s.c>d)&&!(p[x].s.r>u)&&!(p[x].e.c<d)&&!(p[x].e.r<u)){(p[x].s.c!=d||p[x].s.r!=u)&&(I=!0),F["table:number-columns-spanned"]=p[x].e.c-p[x].s.c+1,F["table:number-rows-spanned"]=p[x].e.r-p[x].s.r+1;break}if(I){l.push(n);continue}var O=Kn({r:u,c:d}),Q=C?(a[u]||[])[d]:a[O];if(Q&&Q.f&&(F["table:formula"]=Cs(Ole(Q.f)),Q.F&&Q.F.slice(0,O.length)==O)){var j=Yl(Q.F);F["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,F["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!Q){l.push(e);continue}switch(Q.t){case"b":M=Q.v?"TRUE":"FALSE",F["office:value-type"]="boolean",F["office:boolean-value"]=Q.v?"true":"false";break;case"n":M=Q.w||String(Q.v||0),F["office:value-type"]="float",F["office:value"]=Q.v||0;break;case"s":case"str":M=Q.v==null?"":Q.v,F["office:value-type"]="string";break;case"d":M=Q.w||ea(Q.v).toISOString(),F["office:value-type"]="date",F["office:date-value"]=ea(Q.v).toISOString(),F["table:style-name"]="ce1";break;default:l.push(e);continue}var E=t(M);if(Q.l&&Q.l.Target){var S=Q.l.Target;S=S.charAt(0)=="#"?"#"+jle(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Xt("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}l.push("          "+Xt("table:table-cell",Xt("text:p",E,{}),F)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var m=u["!cols"][d];if(m.width==null&&m.wpx==null&&m.wch==null)continue;Uf(m),m.ods=o;var p=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var m=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ei],u=Sx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Sx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(gO().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var m=0;m!=i.SheetNames.length;++m)l.push(r(i.Sheets[i.SheetNames[m]],i,m));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function Bj(t,e){if(e.bookType=="fods")return xD(t,e);var n=J5(),r="",s=[],a=[];return r="mimetype",yr(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",yr(n,r,xD(t,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",yr(n,r,vde(t,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",yr(n,r,ei+gO()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",yr(n,r,$ne(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",yr(n,r,qne(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Kh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function kS(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ks(Gf(t))}function yde(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):vc(AA(t))}function wde(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function jf(t){var e=t.reduce(function(s,a){return s+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(s){n.set(s,r),r+=s.length}),n}function vD(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function bde(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,r=t[e+14]&1,s=e+13;s>=e;--s)r=r*256+t[s];return(t[e+15]&128?-r:r)*Math.pow(10,n-6176)}function _de(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=n>=0?0:128}function Lx(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function ws(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Pa(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function ls(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],s=Lx(t,n),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=n[0];t[n[0]++]>=128;);o=t.slice(l,n[0])}break;case 5:i=4,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 1:i=8,o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 2:i=Lx(t,n),o=t.slice(n[0],n[0]+i),n[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function fo(t){var e=[];return t.forEach(function(n,r){n.forEach(function(s){s.data&&(e.push(ws(r*8+s.type)),s.type==2&&e.push(ws(s.data.length)),e.push(s.data))})}),jf(e)}function E4(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function Gc(t){for(var e,n=[],r=[0];r[0]<t.length;){var s=Lx(t,r),a=ls(t.slice(r[0],r[0]+s));r[0]+=s;var i={id:Pa(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=ls(o.data),u=Pa(l[3][0].data);i.messages.push({meta:l,data:t.slice(r[0],r[0]+u)}),r[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=Pa(a[3][0].data)>>>0>0),n.push(i)}return n}function O0(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:ws(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:ws(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:ws(i.data.length)}],r[2].push({data:fo(i.meta),type:2})});var a=fo(r);e.push(ws(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),jf(e)}function Cde(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=Lx(e,n),s=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var i=e[n[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[n[0]],o>1&&(i|=e[n[0]+1]<<8),o>2&&(i|=e[n[0]+2]<<16),o>3&&(i|=e[n[0]+3]<<24),i>>>=0,i++,n[0]+=o}s.push(e.slice(n[0],n[0]+i)),n[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(u=(e[n[0]++]>>2)+1,a==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),s=[jf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=jf(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function qc(t){for(var e=[],n=0;n<t.length;){var r=t[n++],s=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(Cde(r,t.slice(n,n+s))),n+=s}if(n!==t.length)throw new Error("data is not a valid framed stream!");return jf(e)}function j0(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),s=new Uint8Array(4);e.push(s);var a=ws(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return jf(e)}function Ede(t,e,n,r){var s=Kh(t),a=s.getUint32(4,!0),i=(r>1?12:8)+vD(a&(r>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=vD(a&(r>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var m;switch(t[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:e[l]};break;case 5:m={t:"d",v:d};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:n[o]};else if(l>-1)m={t:"s",v:e[l]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return m}function Sde(t,e,n){var r=Kh(t),s=r.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=bde(t,a),a+=16),s&2&&(u=r.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+r.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=r.getUint32(a,!0),a+=4),s&16&&(i=r.getUint32(a,!0),a+=4);var m;switch(t[1]){case 0:break;case 2:m={t:"n",v:l};break;case 3:m={t:"s",v:e[o]};break;case 5:m={t:"d",v:d};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(i>-1)m={t:"s",v:n[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:m={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return m}function OC(t,e){var n=new Uint8Array(32),r=Kh(n),s=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,_de(n,s,t.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,s)}function jC(t,e){var n=new Uint8Array(32),r=Kh(n),s=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,s)}function Tde(t,e,n){switch(t[0]){case 0:case 1:case 2:case 3:return Ede(t,e,n,t[0]);case 5:return Sde(t,e,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Qo(t){var e=ls(t);return Lx(e[1][0].data)}function yD(t,e){var n=ls(e.data),r=Pa(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(i){var o=ls(i.data),l=Pa(o[1][0].data)>>>0;switch(r){case 1:a[l]=kS(o[3][0].data);break;case 8:{var u=t[Qo(o[9][0].data)][0],d=ls(u.data),m=t[Qo(d[1][0].data)][0],p=Pa(m.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var x=ls(m.data);a[l]=x[3].map(function(C){return kS(C.data)}).join("")}break}}),a}function Nde(t,e){var n,r,s,a,i,o,l,u,d,m,p,x,C,y,T=ls(t),I=Pa(T[1][0].data)>>>0,F=Pa(T[2][0].data)>>>0,M=((r=(n=T[8])==null?void 0:n[0])==null?void 0:r.data)&&Pa(T[8][0].data)>0||!1,O,Q;if((a=(s=T[7])==null?void 0:s[0])!=null&&a.data&&e!=0)O=(o=(i=T[7])==null?void 0:i[0])==null?void 0:o.data,Q=(u=(l=T[6])==null?void 0:l[0])==null?void 0:u.data;else if((m=(d=T[4])==null?void 0:d[0])!=null&&m.data&&e!=1)O=(x=(p=T[4])==null?void 0:p[0])==null?void 0:x.data,Q=(y=(C=T[3])==null?void 0:C[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var j=M?4:1,E=Kh(O),S=[],k=0;k<O.length/2;++k){var z=E.getUint16(k*2,!0);z<65535&&S.push([k,z])}if(S.length!=F)throw"Expected ".concat(F," cells, found ").concat(S.length);var P=[];for(k=0;k<S.length-1;++k)P[S[k][0]]=Q.subarray(S[k][1]*j,S[k+1][1]*j);return S.length>=1&&(P[S[S.length-1][0]]=Q.subarray(S[S.length-1][1]*j)),{R:I,cells:P}}function Bde(t,e){var n,r=ls(e.data),s=(n=r==null?void 0:r[7])!=null&&n[0]?Pa(r[7][0].data)>>>0>0?1:0:-1,a=E4(r[5],function(i){return Nde(i,s)});return{nrows:Pa(r[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function kde(t,e,n){var r,s=ls(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Pa(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Pa(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=mr(a);var i=ls(s[4][0].data),o=yD(t,t[Qo(i[4][0].data)][0]),l=(r=i[17])!=null&&r[0]?yD(t,t[Qo(i[17][0].data)][0]):[],u=ls(i[3][0].data),d=0;u[1].forEach(function(m){var p=ls(m.data),x=t[Qo(p[2][0].data)][0],C=Pa(x.meta[1][0].data);if(C!=6002)throw new Error("6001 unexpected reference to ".concat(C));var y=Bde(t,x);y.data.forEach(function(T,I){T.forEach(function(F,M){var O=Kn({r:d+I,c:M}),Q=Tde(F,o,l);Q&&(n[O]=Q)})}),d+=y.nrows})}function Ide(t,e){var n=ls(e.data),r={"!ref":"A1"},s=t[Qo(n[2][0].data)],a=Pa(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return kde(t,s[0],r),r}function Fde(t,e){var n,r=ls(e.data),s={name:(n=r[1])!=null&&n[0]?kS(r[1][0].data):"",sheets:[]},a=E4(r[2],Qo);return a.forEach(function(i){t[i].forEach(function(o){var l=Pa(o.meta[1][0].data);l==6e3&&s.sheets.push(Ide(t,o))})}),s}function Dde(t,e){var n=I4(),r=ls(e.data),s=E4(r[1],Qo);if(s.forEach(function(a){t[a].forEach(function(i){var o=Pa(i.meta[1][0].data);if(o==2){var l=Fde(t,i);l.sheets.forEach(function(u,d){F4(n,u,d==0?l.name:l.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function QC(t){var e,n,r,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=qc(l.content)}catch(m){return console.log("?? "+l.content.length+" "+(m.message||m))}var d;try{d=Gc(u)}catch(m){return console.log("## "+(m.message||m))}d.forEach(function(m){a[m.id]=m.messages,i.push(m.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(r=(n=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:n.meta)==null?void 0:r[1])==null?void 0:s[0].data)&&Pa(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=Pa(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Dde(a,o)}function Lde(t,e,n){var r,s,a,i;if(!((r=t[6])!=null&&r[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Pa(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Kh(t[7][0].data),d=0,m=[],p=Kh(t[4][0].data),x=0,C=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),p.setUint16(y*2,x,!0);var T,I;switch(typeof e[y]){case"string":T=OC({t:"s",v:e[y]},n),I=jC({t:"s",v:e[y]},n);break;case"number":T=OC({t:"n",v:e[y]},n),I=jC({t:"n",v:e[y]},n);break;case"boolean":T=OC({t:"b",v:e[y]},n),I=jC({t:"b",v:e[y]},n);break;default:throw new Error("Unsupported value "+e[y])}m.push(T),d+=T.length,C.push(I),x+=I.length,++l}for(t[2][0].data=ws(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return t[6][0].data=jf(m),t[3][0].data=jf(C),l}function Rde(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Yl(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(mr(r)));var a=Vw(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(J){return J.forEach(function(re){typeof re=="string"&&i.push(re)})});var o={},l=[],u=Nn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(J,re){return[J,u.FullPaths[re]]}).forEach(function(J){var re=J[0],ie=J[1];if(re.type==2&&re.name.match(/\.iwa/)){var fe=re.content,Se=qc(fe),ve=Gc(Se);ve.forEach(function(ye){l.push(ye.id),o[ye.id]={deps:[],location:ie,type:Pa(ye.messages[0].meta[1][0].data)}})}}),l.sort(function(J,re){return J-re});var d=l.filter(function(J){return J>1}).map(function(J){return[J,ws(J)]});u.FileIndex.map(function(J,re){return[J,u.FullPaths[re]]}).forEach(function(J){var re=J[0];if(J[1],!!re.name.match(/\.iwa/)){var ie=Gc(qc(re.content));ie.forEach(function(fe){fe.messages.forEach(function(Se){d.forEach(function(ve){fe.messages.some(function(ye){return Pa(ye.meta[1][0].data)!=11006&&wde(ye.data,ve[1])})&&o[ve[0]].deps.push(fe.id)})})})}});for(var m=Nn.find(u,o[1].location),p=Gc(qc(m.content)),x,C=0;C<p.length;++C){var y=p[C];y.id==1&&(x=y)}var T=Qo(ls(x.messages[0].data)[1][0].data);for(m=Nn.find(u,o[T].location),p=Gc(qc(m.content)),C=0;C<p.length;++C)y=p[C],y.id==T&&(x=y);for(T=Qo(ls(x.messages[0].data)[2][0].data),m=Nn.find(u,o[T].location),p=Gc(qc(m.content)),C=0;C<p.length;++C)y=p[C],y.id==T&&(x=y);for(T=Qo(ls(x.messages[0].data)[2][0].data),m=Nn.find(u,o[T].location),p=Gc(qc(m.content)),C=0;C<p.length;++C)y=p[C],y.id==T&&(x=y);var I=ls(x.messages[0].data);{I[6][0].data=ws(r.e.r+1),I[7][0].data=ws(r.e.c+1);var F=Qo(I[46][0].data),M=Nn.find(u,o[F].location),O=Gc(qc(M.content));{for(var Q=0;Q<O.length&&O[Q].id!=F;++Q);if(O[Q].id!=F)throw"Bad ColumnRowUIDMapArchive";var j=ls(O[Q].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var E=0;E<=r.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:ws(E+420690)}],j[1].push({type:2,data:fo(S)}),j[2].push({type:0,data:ws(E)}),j[3].push({type:0,data:ws(E)})}j[4]=[],j[5]=[],j[6]=[];for(var k=0;k<=r.e.r;++k)S=[],S[1]=S[2]=[{type:0,data:ws(k+726270)}],j[4].push({type:2,data:fo(S)}),j[5].push({type:0,data:ws(k)}),j[6].push({type:0,data:ws(k)});O[Q].messages[0].data=fo(j)}M.content=j0(O0(O)),M.size=M.content.length,delete I[46];var z=ls(I[4][0].data);{z[7][0].data=ws(r.e.r+1);var P=ls(z[1][0].data),R=Qo(P[2][0].data);M=Nn.find(u,o[R].location),O=Gc(qc(M.content));{if(O[0].id!=R)throw"Bad HeaderStorageBucket";var G=ls(O[0].messages[0].data);for(k=0;k<a.length;++k){var q=ls(G[2][0].data);q[1][0].data=ws(k),q[4][0].data=ws(a[k].length),G[2][k]={type:G[2][0].type,data:fo(q)}}O[0].messages[0].data=fo(G)}M.content=j0(O0(O)),M.size=M.content.length;var le=Qo(z[2][0].data);M=Nn.find(u,o[le].location),O=Gc(qc(M.content));{if(O[0].id!=le)throw"Bad HeaderStorageBucket";for(G=ls(O[0].messages[0].data),E=0;E<=r.e.c;++E)q=ls(G[2][0].data),q[1][0].data=ws(E),q[4][0].data=ws(r.e.r+1),G[2][E]={type:G[2][0].type,data:fo(q)};O[0].messages[0].data=fo(G)}M.content=j0(O0(O)),M.size=M.content.length;var ee=Qo(z[4][0].data);(function(){for(var J=Nn.find(u,o[ee].location),re=Gc(qc(J.content)),ie,fe=0;fe<re.length;++fe){var Se=re[fe];Se.id==ee&&(ie=Se)}var ve=ls(ie.messages[0].data);{ve[3]=[];var ye=[];i.forEach(function(he,Ve){ye[1]=[{type:0,data:ws(Ve)}],ye[2]=[{type:0,data:ws(1)}],ye[3]=[{type:2,data:yde(he)}],ve[3].push({type:2,data:fo(ye)})})}ie.messages[0].data=fo(ve);var we=O0(re),me=j0(we);J.content=me,J.size=J.content.length})();var oe=ls(z[3][0].data);{var K=oe[1][0];delete oe[2];var ne=ls(K.data);{var X=Qo(ne[2][0].data);(function(){for(var J=Nn.find(u,o[X].location),re=Gc(qc(J.content)),ie,fe=0;fe<re.length;++fe){var Se=re[fe];Se.id==X&&(ie=Se)}var ve=ls(ie.messages[0].data);{delete ve[6],delete oe[7];var ye=new Uint8Array(ve[5][0].data);ve[5]=[];for(var we=0,me=0;me<=r.e.r;++me){var he=ls(ye);we+=Lde(he,a[me],i),he[1][0].data=ws(me),ve[5].push({data:fo(he),type:2})}ve[1]=[{type:0,data:ws(r.e.c+1)}],ve[2]=[{type:0,data:ws(r.e.r+1)}],ve[3]=[{type:0,data:ws(we)}],ve[4]=[{type:0,data:ws(r.e.r+1)}]}ie.messages[0].data=fo(ve);var Ve=O0(re),nt=j0(Ve);J.content=nt,J.size=J.content.length})()}K.data=fo(ne)}z[3][0].data=fo(oe)}I[4][0].data=fo(z)}x.messages[0].data=fo(I);var ce=O0(p),V=j0(ce);return m.content=V,m.size=m.content.length,u}function kj(t){return function(n){for(var r=0;r!=t.length;++r){var s=t[r];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function S4(t){kj([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function T4(t){kj([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Pde(t){return Fr.WS.indexOf(t)>-1?"sheet":t==Fr.CS?"chart":t==Fr.DS?"dialog":t==Fr.MS?"macro":t&&t.length?t:"sheet"}function Mde(t,e){if(!t)return 0;try{t=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,t["!id"][r.id].Target,Pde(t["!id"][r.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Ude(t,e,n,r,s,a,i,o,l,u,d,m){try{a[r]=Xg(yc(t,n,!0),e);var p=di(t,e),x;switch(o){case"sheet":x=iAe(p,e,s,l,a[r],u,d,m);break;case"chart":if(x=oAe(p,e,s,l,a[r],u,d,m),!x||!x["!drawel"])break;var C=Sg(x["!drawel"].Target,e),y=Nx(C),T=Kie(yc(t,C,!0),Xg(yc(t,y,!0),C)),I=Sg(T,C),F=Nx(I);x=Lue(yc(t,I,!0),I,l,Xg(yc(t,F,!0),I),u,x);break;case"macro":x=lAe(p,e,s,l,a[r],u,d,m);break;case"dialog":x=cAe(p,e,s,l,a[r],u,d,m);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=x;var M=[];a&&a[r]&&Ma(a[r]).forEach(function(O){var Q="";if(a[r][O].Type==Fr.CMNT){Q=Sg(a[r][O].Target,e);var j=fAe(di(t,Q,!0),Q,l);if(!j||!j.length)return;aD(x,j,!1)}a[r][O].Type==Fr.TCMNT&&(Q=Sg(a[r][O].Target,e),M=M.concat(Wie(di(t,Q,!0),l)))}),M&&M.length&&aD(x,M,!0,l.people||[])}catch(O){if(l.WTF)throw O}}function Vc(t){return t.charAt(0)=="/"?t.slice(1):t}function Ode(t,e){if(up(),e=e||{},S4(e),Kc(t,"META-INF/manifest.xml")||Kc(t,"objectdata.xml"))return pD(t,e);if(Kc(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof QC<"u"){if(t.FileIndex)return QC(t);var n=Nn.utils.cfb_new();return SF(t).forEach(function(q){yr(n,q,Yte(t,q))}),QC(n)}throw new Error("Unsupported NUMBERS file")}if(!Kc(t,"[Content_Types].xml"))throw Kc(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Kc(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=SF(t),s=Vne(yc(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",di(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!di(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Jg=[],s.sst)try{Jg=dAe(di(t,Vc(s.sst)),s.sst,e)}catch(q){if(e.WTF)throw q}e.cellStyles&&s.themes.length&&(l=AAe(yc(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=uAe(di(t,Vc(s.style)),s.style,l,e))}s.links.map(function(q){try{var le=Xg(yc(t,Nx(Vc(q))),q);return mAe(di(t,Vc(q)),le,q,e)}catch{}});var d=aAe(di(t,Vc(s.workbooks[0])),s.workbooks[0],e),m={},p="";s.coreprops.length&&(p=di(t,Vc(s.coreprops[0]),!0),p&&(m=xO(p)),s.extprops.length!==0&&(p=di(t,Vc(s.extprops[0]),!0),p&&Yne(p,m,e)));var x={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(p=yc(t,Vc(s.custprops[0]),!0),p&&(x=Jne(p,e)));var C={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(le){return le.name}):m.Worksheets&&m.SheetNames.length>0&&(i=m.SheetNames),e.bookProps&&(C.Props=m,C.Custprops=x),e.bookSheets&&typeof i<"u"&&(C.SheetNames=i),e.bookSheets?C.SheetNames:e.bookProps))return C;i={};var y={};e.bookDeps&&s.calcchain&&(y=hAe(di(t,Vc(s.calcchain)),s.calcchain));var T=0,I={},F,M;{var O=d.Sheets;m.Worksheets=O.length,m.SheetNames=[];for(var Q=0;Q!=O.length;++Q)m.SheetNames[Q]=O[Q].name}var j=a?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),S=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Kc(t,S)||(S="xl/_rels/workbook."+j+".rels");var k=Xg(yc(t,S,!0),S.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=pAe(di(t,Vc(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Xie(di(t,Vc(s.people[0])),e)),k&&(k=Mde(k,d.Sheets));var z=di(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(T=0;T!=m.Worksheets;++T){var P="sheet";if(k&&k[T]?(F="xl/"+k[T][1].replace(/[\/]?xl\//,""),Kc(t,F)||(F=k[T][1]),Kc(t,F)||(F=S.replace(/_rels\/.*$/,"")+k[T][1]),P=k[T][2]):(F="xl/worksheets/sheet"+(T+1-z)+"."+j,F=F.replace(/sheet0\./,"sheet.")),M=F.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(T!=e.sheets)continue e;break;case"string":if(m.SheetNames[T].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var R=!1,G=0;G!=e.sheets.length;++G)typeof e.sheets[G]=="number"&&e.sheets[G]==T&&(R=1),typeof e.sheets[G]=="string"&&e.sheets[G].toLowerCase()==m.SheetNames[T].toLowerCase()&&(R=1);if(!R)continue e}}Ude(t,F,M,m.SheetNames[T],T,I,i,P,e,d,l,u)}return C={Directory:s,Workbook:d,Props:m,Custprops:x,Deps:y,Sheets:i,SheetNames:m.SheetNames,Strings:Jg,Styles:u,Themes:l,SSF:ta(Vn)},e&&e.bookFiles&&(t.files?(C.keys=r,C.files=t.files):(C.keys=[],C.files={},t.FullPaths.forEach(function(q,le){q=q.replace(/^Root Entry[\/]/,""),C.keys.push(q),C.files[q]=t.FileIndex[le]}))),e&&e.bookVBA&&(s.vba.length>0?C.vbaraw=di(t,Vc(s.vba[0]),!0):s.defaults&&s.defaults.bin===aoe&&(C.vbaraw=di(t,"xl/vbaProject.bin",!0))),C}function jde(t,e){var n=e||{},r="Workbook",s=Nn.find(t,r);try{if(r="/!DataSpaces/Version",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(pae(s.content),r="/!DataSpaces/DataSpaceMap",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=xae(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=vae(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);wae(s.content)}catch{}if(r="/EncryptionInfo",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=bae(s.content);if(r="/EncryptedPackage",s=Nn.find(t,r),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function Qde(t,e){return e.bookType=="ods"?Bj(t,e):e.bookType=="numbers"?Rde(t,e):e.bookType=="xlsb"?Hde(t,e):Vde(t,e)}function Hde(t,e){dm=1024,t&&!t.SSF&&(t.SSF=ta(Vn)),t&&t.SSF&&(up(),tb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Zg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=rj.indexOf(e.bookType)>-1,s=d4();T4(e=e||{});var a=J5(),i="",o=0;if(e.cellXfs=[],Kf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",yr(a,i,vO(t.Props,e)),s.coreprops.push(i),bs(e.rels,2,i,Fr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,yr(a,i,bO(t.Props)),s.extprops.push(i),bs(e.rels,3,i,Fr.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",yr(a,i,_O(t.Custprops)),s.custprops.push(i),bs(e.rels,4,i,Fr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,yr(a,i,xAe(o-1,i,e,t,d)),s.sheets.push(i),bs(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Fr.WS[0])}if(m){var x=m["!comments"],C=!1,y="";x&&x.length>0&&(y="xl/comments"+o+"."+n,yr(a,y,wAe(x,y)),s.comments.push(y),bs(d,-1,"../comments"+o+"."+n,Fr.CMNT),C=!0),m["!legacy"]&&C&&yr(a,"xl/drawings/vmlDrawing"+o+".vml",tj(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&yr(a,Nx(i),Sm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,yr(a,i,yAe(e.Strings,i,e)),s.strs.push(i),bs(e.wbrels,-1,"sharedStrings."+n,Fr.SST)),i="xl/workbook."+n,yr(a,i,gAe(t,i)),s.workbooks.push(i),bs(e.rels,1,i,Fr.WB),i="xl/theme/theme1.xml",yr(a,i,x4(t.Themes,e)),s.themes.push(i),bs(e.wbrels,-1,"theme/theme1.xml",Fr.THEME),i="xl/styles."+n,yr(a,i,vAe(t,i,e)),s.styles.push(i),bs(e.wbrels,-1,"styles."+n,Fr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",yr(a,i,t.vbaraw),s.vba.push(i),bs(e.wbrels,-1,"vbaProject.bin",Fr.VBA)),i="xl/metadata."+n,yr(a,i,bAe(i)),s.metadata.push(i),bs(e.wbrels,-1,"metadata."+n,Fr.XLMETA),yr(a,"[Content_Types].xml",pO(s,e)),yr(a,"_rels/.rels",Sm(e.rels)),yr(a,"xl/_rels/workbook."+n+".rels",Sm(e.wbrels)),delete e.revssf,delete e.ssf,a}function Vde(t,e){dm=1024,t&&!t.SSF&&(t.SSF=ta(Vn)),t&&t.SSF&&(up(),tb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Zg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=rj.indexOf(e.bookType)>-1,s=d4();T4(e=e||{});var a=J5(),i="",o=0;if(e.cellXfs=[],Kf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",yr(a,i,vO(t.Props,e)),s.coreprops.push(i),bs(e.rels,2,i,Fr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,yr(a,i,bO(t.Props)),s.extprops.push(i),bs(e.rels,3,i,Fr.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",yr(a,i,_O(t.Custprops)),s.custprops.push(i),bs(e.rels,4,i,Fr.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var m={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],x=(p||{})["!type"]||"sheet";switch(x){case"chart":default:i="xl/worksheets/sheet"+o+"."+n,yr(a,i,hj(o-1,e,t,m)),s.sheets.push(i),bs(e.wbrels,-1,"worksheets/sheet"+o+"."+n,Fr.WS[0])}if(p){var C=p["!comments"],y=!1,T="";if(C&&C.length>0){var I=!1;C.forEach(function(F){F[1].forEach(function(M){M.T==!0&&(I=!0)})}),I&&(T="xl/threadedComments/threadedComment"+o+"."+n,yr(a,T,Yie(C,d,e)),s.threadedcomments.push(T),bs(m,-1,"../threadedComments/threadedComment"+o+"."+n,Fr.TCMNT)),T="xl/comments"+o+"."+n,yr(a,T,nj(C)),s.comments.push(T),bs(m,-1,"../comments"+o+"."+n,Fr.CMNT),y=!0}p["!legacy"]&&y&&yr(a,"xl/drawings/vmlDrawing"+o+".vml",tj(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}m["!id"].rId1&&yr(a,Nx(i),Sm(m))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+n,yr(a,i,VO(e.Strings,e)),s.strs.push(i),bs(e.wbrels,-1,"sharedStrings."+n,Fr.SST)),i="xl/workbook."+n,yr(a,i,vj(t)),s.workbooks.push(i),bs(e.rels,1,i,Fr.WB),i="xl/theme/theme1.xml",yr(a,i,x4(t.Themes,e)),s.themes.push(i),bs(e.wbrels,-1,"theme/theme1.xml",Fr.THEME),i="xl/styles."+n,yr(a,i,XO(t,e)),s.styles.push(i),bs(e.wbrels,-1,"styles."+n,Fr.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",yr(a,i,t.vbaraw),s.vba.push(i),bs(e.wbrels,-1,"vbaProject.bin",Fr.VBA)),i="xl/metadata."+n,yr(a,i,ej()),s.metadata.push(i),bs(e.wbrels,-1,"metadata."+n,Fr.XLMETA),d.length>1&&(i="xl/persons/person.xml",yr(a,i,Jie(d)),s.people.push(i),bs(e.wbrels,-1,"persons/person.xml",Fr.PEOPLE)),yr(a,"[Content_Types].xml",pO(s,e)),yr(a,"_rels/.rels",Sm(e.rels)),yr(a,"xl/_rels/workbook."+n+".rels",Sm(e.wbrels)),delete e.revssf,delete e.ssf,a}function N4(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Ec(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function zde(t,e){return Nn.find(t,"EncryptedPackage")?jde(t,e):_j(t,e)}function Gde(t,e){var n,r=t,s=e||{};return s.type||(s.type=Br&&Buffer.isBuffer(t)?"buffer":"base64"),n=G8(r,s),Ode(n,s)}function Ij(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return NS(t.slice(n),e);default:break e}return qm.to_workbook(t,e)}function qde(t,e){var n="",r=N4(t,e);switch(e.type){case"base64":n=Ec(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=Vh(t);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=ks(n)),e.type="binary",Ij(n,e)}function Kde(t,e){var n=t;return e.type=="base64"&&(n=Ec(n)),n=bx.utils.decode(1200,n.slice(2),"str"),e.type="binary",Ij(n,e)}function $de(t){return t.match(/[^\x00-\x7F]/)?AA(t):t}function HC(t,e,n,r){return r?(n.type="string",qm.to_workbook(t,n)):qm.to_workbook(e,n)}function Rx(t,e){K5();var n=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Rx(new Uint8Array(t),(n=ta(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=t,s=[0,0,0,0],a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),Nm={},n.dateNF&&(Nm.dateNF=n.dateNF),n.type||(n.type=Br&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=Br?"buffer":"binary",r=Hte(t),typeof Uint8Array<"u"&&!Br&&(n.type="array")),n.type=="string"&&(a=!0,n.type="binary",n.codepage=65001,r=$de(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return n=ta(n),n.type="array",Rx($5(r),n)}switch((s=N4(r,n))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return zde(Nn.read(r,n),n);break;case 9:if(s[1]<=8)return _j(r,n);break;case 60:return NS(r,n);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Zse(r,n);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return QO.to_workbook(r,n);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Gde(r,n):HC(t,r,n,a);case 239:return s[3]===60?NS(r,n):HC(t,r,n,a);case 255:if(s[1]===254)return Kde(r,n);if(s[1]===0&&s[2]===2&&s[3]===0)return Fh.to_workbook(r,n);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Fh.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return TS.to_workbook(r,n);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return $O.to_workbook(r,n);break;case 10:case 13:case 32:return qde(r,n);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Jse.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?TS.to_workbook(r,n):HC(t,r,n,a)}function Fj(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return mv(e.file,Nn.write(t,{type:Br?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Nn.write(t,e)}function Wde(t,e){var n=ta(e||{}),r=Qde(t,n);return Yde(r,n)}function Yde(t,e){var n={},r=Br?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Nn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(eb(s))}return e.password&&typeof encrypt_agile<"u"?Fj(encrypt_agile(s,e.password),e):e.type==="file"?mv(e.file,s):e.type=="string"?ks(s):s}function Xde(t,e){var n=e||{},r=$Ae(t,n);return Fj(r,n)}function oA(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return _x(AA(r));case"binary":return AA(r);case"string":return t;case"file":return mv(e.file,r,"utf8");case"buffer":return Br?md(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):oA(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Jde(t,e){switch(e.type){case"base64":return _x(t);case"binary":return t;case"string":return t;case"file":return mv(e.file,t,"binary");case"buffer":return Br?md(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function W1(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?_x(n):e.type=="string"?ks(n):n;case"file":return mv(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function Dj(t,e){K5(),zue(t);var n=ta(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=Dj(t,n);return n.type="array",eb(r)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=t.SheetNames.indexOf(n.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return oA(QAe(t,n),n);case"slk":case"sylk":return oA(jO.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"htm":case"html":return oA(Ej(t.Sheets[t.SheetNames[s]],n),n);case"txt":return Jde(Lj(t.Sheets[t.SheetNames[s]],n),n);case"csv":return oA(k4(t.Sheets[t.SheetNames[s]],n),n,"\uFEFF");case"dif":return oA(QO.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"dbf":return W1(TS.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"prn":return oA(qm.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"rtf":return oA($O.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"eth":return oA(HO.from_sheet(t.Sheets[t.SheetNames[s]],n),n);case"fods":return oA(Bj(t,n),n);case"wk1":return W1(Fh.sheet_to_wk1(t.Sheets[t.SheetNames[s]],n),n);case"wk3":return W1(Fh.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),W1(Cj(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Xde(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Wde(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Zde(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function B4(t,e,n){var r={};return r.type="file",r.file=e,Zde(r),Dj(t,r)}function efe(t,e,n,r,s,a,i,o){var l=Za(n),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),m=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:n,enumerable:!1})}catch{p.__rowNum__=n}else p.__rowNum__=n;if(!i||t[n])for(var x=e.s.c;x<=e.e.c;++x){var C=i?t[n][x]:t[r[x]+l];if(C===void 0||C.t===void 0){if(u===void 0)continue;a[x]!=null&&(p[a[x]]=u);continue}var y=C.v;switch(C.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+C.t)}if(a[x]!=null){if(y==null)if(C.t=="e"&&y===null)p[a[x]]=null;else if(u!==void 0)p[a[x]]=u;else if(d&&y===null)p[a[x]]=null;else continue;else p[a[x]]=d&&(C.t!=="n"||C.t==="n"&&o.rawNumbers!==!1)?y:cd(C,y,o);y!=null&&(m=!1)}}return{row:p,isempty:m}}function Vw(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof d){case"string":l=ns(d);break;case"number":l=ns(t["!ref"]),l.s.r=d;break;default:l=d}r>0&&(s=0);var m=Za(l.s.r),p=[],x=[],C=0,y=0,T=Array.isArray(t),I=l.s.r,F=0,M={};T&&!t[I]&&(t[I]=[]);var O=u.skipHidden&&t["!cols"]||[],Q=u.skipHidden&&t["!rows"]||[];for(F=l.s.c;F<=l.e.c;++F)if(!(O[F]||{}).hidden)switch(p[F]=pa(F),n=T?t[I][F]:t[p[F]+m],r){case 1:a[F]=F-l.s.c;break;case 2:a[F]=p[F];break;case 3:a[F]=u.header[F-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=i=cd(n,null,u),y=M[i]||0,!y)M[i]=1;else{do o=i+"_"+y++;while(M[o]);M[i]=y,M[o]=1}a[F]=o}for(I=l.s.r+s;I<=l.e.r;++I)if(!(Q[I]||{}).hidden){var j=efe(t,l,I,p,r,a,T,u);(j.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(x[C++]=j.row)}return x.length=C,x}var wD=/"/g;function tfe(t,e,n,r,s,a,i,o){for(var l=!0,u=[],d="",m=Za(n),p=e.s.c;p<=e.e.c;++p)if(r[p]){var x=o.dense?(t[n]||[])[p]:t[r[p]+m];if(x==null)d="";else if(x.v!=null){l=!1,d=""+(o.rawNumbers&&x.t=="n"?x.v:cd(x,null,o));for(var C=0,y=0;C!==d.length;++C)if((y=d.charCodeAt(C))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(wD,'""')+'"';break}d=="ID"&&(d='"ID"')}else x.f!=null&&!x.F?(l=!1,d="="+x.f,d.indexOf(",")>=0&&(d='"'+d.replace(wD,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function k4(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var s=ns(t["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",m=[];r.dense=Array.isArray(t);for(var p=r.skipHidden&&t["!cols"]||[],x=r.skipHidden&&t["!rows"]||[],C=s.s.c;C<=s.e.c;++C)(p[C]||{}).hidden||(m[C]=pa(C));for(var y=0,T=s.s.r;T<=s.e.r;++T)(x[T]||{}).hidden||(d=tfe(t,s,T,m,i,l,a,r),d!=null&&(r.strip&&(d=d.replace(u,"")),(d||r.blankrows!==!1)&&n.push((y++?o:"")+d)));return delete r.dense,n.join("")}function Lj(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=k4(t,e);return n}function nfe(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var s=ns(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=pa(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Za(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,n=u?(t[d]||[])[o]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function Rj(t,e,n){var r=n||{},s=+!r.skipHeader,a=t||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?ga(r.origin):r.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var m=ns(a["!ref"]);d.e.c=Math.max(d.e.c,m.e.c),d.e.r=Math.max(d.e.r,m.e.r),i==-1&&(i=m.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var p=r.header||[],x=0;e.forEach(function(y,T){Ma(y).forEach(function(I){(x=p.indexOf(I))==-1&&(p[x=p.length]=I);var F=y[I],M="z",O="",Q=Kn({c:o+x,r:i+T+s});u=Px(a,Q),F&&typeof F=="object"&&!(F instanceof Date)?a[Q]=F:(typeof F=="number"?M="n":typeof F=="boolean"?M="b":typeof F=="string"?M="s":F instanceof Date?(M="d",r.cellDates||(M="n",F=Ii(F)),O=r.dateNF||Vn[14]):F===null&&r.nullError&&(M="e",F=0),u?(u.t=M,u.v=F,delete u.w,delete u.R,O&&(u.z=O)):a[Q]=u={t:M,v:F},O&&(u.z=O))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var C=Za(i);if(s)for(x=0;x<p.length;++x)a[pa(x+o)+C]={t:"s",v:p[x]};return a["!ref"]=mr(d),a}function rfe(t,e){return Rj(null,t,e)}function Px(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=ga(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Px(t,Kn(e)):Px(t,Kn({r:e,c:n||0}))}function sfe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function I4(){return{SheetNames:[],Sheets:{}}}function F4(t,e,n,r){var s=1;if(!n)for(;s<=65535&&t.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&t.SheetNames.indexOf(n=i+s)!=-1;++s);}if(xj(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function afe(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=sfe(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function ife(t,e){return t.z=e,t}function Pj(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function ofe(t,e,n){return Pj(t,"#"+e,n)}function lfe(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function cfe(t,e,n,r){for(var s=typeof e!="string"?e:ns(e),a=typeof e=="string"?e:mr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Px(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return t}var eu={encode_col:pa,encode_row:Za,encode_cell:Kn,encode_range:mr,decode_col:i4,decode_row:a4,split_cell:yne,decode_cell:ga,decode_range:Yl,format_cell:cd,sheet_add_aoa:cO,sheet_add_json:Rj,sheet_add_dom:Sj,aoa_to_sheet:Ap,json_to_sheet:rfe,table_to_sheet:Tj,table_to_book:pde,sheet_to_csv:k4,sheet_to_txt:Lj,sheet_to_json:Vw,sheet_to_html:Ej,sheet_to_formulae:nfe,sheet_to_row_object_array:Vw,sheet_get_cell:Px,book_new:I4,book_append_sheet:F4,book_set_sheet_visibility:afe,cell_set_number_format:ife,cell_set_hyperlink:Pj,cell_set_internal_link:ofe,cell_add_comment:lfe,sheet_set_array_formula:cfe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ufe=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let r=0,s=0;const a=[];for(const l of n)try{const u=zt(Sr,l),d=await gi(u),m=d.size;r+=m,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:m});let p=0;d.docs.forEach(x=>{const C=x.data();C.createdAt&&new Date(C.createdAt)>=e&&p++}),s+=p}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=zt(Sr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=mn(l,cs("timestamp",">=",u.toISOString()),Dr("timestamp","desc")),m=await gi(d),p={};m.docs.forEach(x=>{const C=x.data(),y=new Date(C.timestamp).toLocaleDateString("es-CL");p[y]=(p[y]||0)+1}),Object.entries(p).sort(([x],[C])=>new Date(x).getTime()-new Date(C).getTime()).forEach(([x,C])=>{i.push({label:x,value:C})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:r,collectionsActivity:a.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},bD=500,Q0=({title:t,value:e,description:n,alert:r})=>c.jsxs("div",{className:`p-5 rounded-xl border ${r?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${r?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),n&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:n})]}),VC=({title:t,data:e,colorClass:n})=>{const r=se.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${n} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/r*100}%`}})})]},s.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},Afe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,a]=se.useState(null),[i,o]=se.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});se.useEffect(()=>{r(!0);const m=nZ(C=>{e(C),r(!1)}),p=async()=>{try{const C=await ufe();o(C)}catch(C){console.error("Error al cargar estadísticas de Firestore:",C)}};p();const x=setInterval(p,300*1e3);return()=>{m(),clearInterval(x)}},[]);const{stats:l,userStats:u,moduleStats:d}=se.useMemo(()=>{const m=new Date,p=new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),x=p-m.getDay()*24*60*60*1e3,C=new Date(m.getFullYear(),m.getMonth(),1).getTime(),y={today:0,week:0,month:0},T={},I={};t.forEach(O=>{const Q=new Date(O.timestamp).getTime();Q>=p&&y.today++,Q>=x&&y.week++,Q>=C&&y.month++;const j=O.userEmail||"Desconocido";T[j]||(T[j]={email:j,today:0,month:0,total:0}),T[j].total++,Q>=p&&T[j].today++,Q>=C&&T[j].month++,I[O.module]=(I[O.module]||0)+1});const F=Object.values(T).sort((O,Q)=>Q.total-O.total),M=Object.entries(I).map(([O,Q])=>({label:O,value:Q})).sort((O,Q)=>Q.value-O.value);return{stats:y,userStats:F,moduleStats:M}},[t]);return c.jsxs("div",{className:"space-y-8",children:[s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!n&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(Q0,{title:"Llamadas Hoy",value:n?"--":l.today,description:`Límite recomendado: ${bD}`,alert:l.today>bD}),c.jsx(Q0,{title:"Llamadas esta Semana",value:n?"--":l.week}),c.jsx(Q0,{title:"Llamadas este Mes",value:n?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(VC,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!n&&u.length>0?u.map(m=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:m.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:m.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:m.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:m.total})]},m.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:n?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Q0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(Q0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(Q0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(VC,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(VC,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe="type.googleapis.com/google.protobuf.Int64Value",ffe="type.googleapis.com/google.protobuf.UInt64Value";function Mj(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function zw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>zw(e));if(typeof t=="function"||typeof t=="object")return Mj(t,e=>zw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $m(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case dfe:case ffe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$m(e)):typeof t=="function"||typeof t=="object"?Mj(t,e=>$m(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ql extends _A{constructor(e,n,r){super(`${D4}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ql.prototype)}}function hfe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Gw(t,e){let n=hfe(t),r=n,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!_D[i])return new ql("internal","internal");n=_D[i],r=i}const o=a.message;typeof o=="string"&&(r=o),s=a.details,s!==void 0&&(s=$m(s))}}catch{}return n==="ok"?null:new ql(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Xc(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="us-central1",pfe=/^data: (.*?)(?:\n|$)/;function gfe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ql("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class xfe{constructor(e,n,r,s,a=IS,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new mfe(e,n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=IS}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function vfe(t,e,n){const r=Xh(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(DT(t.emulatorOrigin),LT("Functions",!0))}function yfe(t,e,n){const r=s=>bfe(t,e,s,{});return r.stream=(s,a)=>Cfe(t,e,s,a),r}async function wfe(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function Uj(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function bfe(t,e,n,r){const s=t._url(e);return _fe(t,s,n,r)}async function _fe(t,e,n,r){n=zw(n);const s={data:n},a=await Uj(t,r),i=r.timeout||7e4,o=gfe(i),l=await Promise.race([wfe(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new ql("cancelled","Firebase Functions instance was deleted.");const u=Gw(l.status,l.json);if(u)throw u;if(!l.json)throw new ql("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new ql("internal","Response is missing data field.");return{data:$m(d)}}function Cfe(t,e,n,r){const s=t._url(e);return Efe(t,s,n,r||{})}async function Efe(t,e,n,r){var p;n=zw(n);const s={data:n},a=await Uj(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const y=new ql("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const C=Gw(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let o,l;const u=new Promise((x,C)=>{o=x,l=C});(p=r==null?void 0:r.signal)==null||p.addEventListener("abort",()=>{const x=new ql("cancelled","Request was cancelled.");l(x)});const d=i.body.getReader(),m=Sfe(d,o,l,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const x=m.getReader();return{async next(){const{value:C,done:y}=await x.read();return{value:C,done:y}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:u}}function Sfe(t,e,n,r){const s=(i,o)=>{const l=i.match(pfe);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e($m(d.result));return}if("message"in d){o.enqueue($m(d.message));return}if("error"in d){const m=Gw(0,d);o.error(m),n(m);return}}catch(d){if(d instanceof ql){o.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(r!=null&&r.aborted){const u=new ql("cancelled","Request was cancelled");return i.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),i),i.close();return}if(r!=null&&r.aborted){const p=new ql("cancelled","Request was cancelled");i.error(p),n(p),await t.cancel();return}o+=a.decode(u,{stream:!0});const m=o.split(`
`);o=m.pop()||"";for(const p of m)p.trim()&&s(p.trim(),i);return l()}catch(u){const d=u instanceof ql?u:Gw(0,null);i.error(d),n(d)}}},cancel(){return t.cancel()}})}const CD="@firebase/functions",ED="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tfe="auth-internal",Nfe="app-check-internal",Bfe="messaging-internal";function kfe(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(Tfe),i=n.getProvider(Bfe),o=n.getProvider(Nfe);return new xfe(s,a,i,o,r)};Mh(new Nf(D4,e,"PUBLIC").setMultipleInstances(!0)),dA(CD,ED,t),dA(CD,ED,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t=UT(),e=IS){const r=y2(ia(t),D4).getImmediate({identifier:e}),s=AP("functions");return s&&Ife(r,...s),r}function Ife(t,e,n){vfe(ia(t),e,n)}function H0(t,e,n){return yfe(ia(t),e)}kfe();const SD=zt(Sr,"usuarios");async function Oj(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",SD);const t=await gi(SD);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(n=>{const r=n.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:n.id,...r}),{id:n.id,...r}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const TD=Object.values(tn),zC=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",Ffe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!1),[s,a]=se.useState("Usuarios"),[i,o]=se.useState({nombreCompleto:"",email:"",rut:"",profile:tn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=se.useState(null),[d,m]=se.useState(""),[p,x]=se.useState(""),[C,y]=se.useState(""),[T,I]=se.useState(null),[F,M]=se.useState(null),[O,Q]=se.useState(null),j=se.useCallback(async()=>{r(!0);try{const K=await Oj();e(K)}catch(K){console.error("Error al cargar usuarios",K),I("No se pudieron cargar los usuarios.")}finally{r(!1)}},[]);se.useEffect(()=>{j()},[j]);const E=se.useCallback(K=>{const{name:ne,value:X}=K.target;o(ce=>({...ce,[ne]:X,curso:ne==="profile"&&X!==tn.ESTUDIANTE?"":ce.curso,cursos:ne==="profile"&&X!==tn.PROFESORADO?[]:ce.cursos,asignaturas:ne==="profile"&&X!==tn.PROFESORADO?[]:ce.asignaturas}))},[]),S=se.useCallback((K,ne)=>{o(X=>{const ce=X[K]||[],V=ce.includes(ne)?ce.filter(J=>J!==ne):[...ce,ne];return{...X,[K]:V}})},[]),k=se.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:tn.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),I(null)},[]),z=se.useCallback(async K=>{K.preventDefault(),I(null);const{nombreCompleto:ne,email:X,profile:ce,curso:V,password:J}=i;if(!ne.trim()||!X.trim()){I("Nombre Completo y Email son obligatorios.");return}if(ce===tn.ESTUDIANTE&&!V){I('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(J!=null&&J.trim())){I("La contraseña es obligatoria al crear un nuevo usuario.");return}const re=ag();try{if(l){const ie=H0(re,"updateUser"),fe={...i,password:(J==null?void 0:J.trim())||void 0,curso:ce===tn.ESTUDIANTE?zC(V||""):void 0};await ie(fe)}else{const ie=H0(re,"createUser"),fe={...i,curso:ce===tn.ESTUDIANTE?zC(V||""):void 0};await ie(fe)}await j(),k()}catch(ie){console.error("Error al guardar usuario:",ie),I(ie.message||"Error al guardar el usuario.")}},[i,l,j,k]),P=se.useCallback(K=>{u(K.email),o({nombreCompleto:K.nombreCompleto,email:K.email,rut:K.rut||"",profile:K.profile,password:"",curso:K.curso||"",cursos:K.cursos||[],asignaturas:K.asignaturas||[]}),setTimeout(()=>{const ne=document.querySelector("form");ne&&ne.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),R=se.useCallback(async K=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${K}? Esta acción es irreversible.`))try{const ne=ag();await H0(ne,"deleteUser")({email:K}),await j()}catch(ne){console.error("Error al eliminar usuario:",ne),I(ne.message||"No se pudo borrar el usuario.")}},[j]),G=async K=>{var J;const ne=(J=K.target.files)==null?void 0:J[0];if(!ne)return;M({message:"Procesando archivo...",isError:!1});const X=ag(),ce=H0(X,"createUser"),V=new FileReader;V.onload=async re=>{var ie;try{const fe=new Uint8Array((ie=re.target)==null?void 0:ie.result),Se=Rx(fe,{type:"array"}),ve=Se.Sheets[Se.SheetNames[0]],ye=eu.sheet_to_json(ve);if(ye.length===0){M({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const we=ye.map(Oe=>{const Ie=Oe.Nombre||Oe.nombre,je=Oe.Correo||Oe.correo||Oe.Email||Oe.email,Ke=Oe.Curso||Oe.curso,st=Oe.RUT||Oe.rut;return!Ie||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ce({nombreCompleto:String(Ie).trim(),email:String(je).trim(),profile:tn.ESTUDIANTE,curso:zC(String(Ke).trim()),rut:st?String(st).trim():"",password:"recoleta"}).catch(vt=>({email:je,error:vt.message}))}),me=await Promise.all(we),he=me.filter(Oe=>!Oe.error).length,Ve=me.filter(Oe=>Oe.error);let nt=`Carga completada. ${he} estudiantes agregados.`;Ve.length>0&&(nt+=` ${Ve.length} fallaron.`,console.error("Errores en carga masiva:",Ve)),M({message:nt,isError:Ve.length>0}),await j()}catch(fe){M({message:`Error: ${fe.message}`,isError:!0})}},V.readAsArrayBuffer(ne),K.target.value=""},q=async K=>{var J;const ne=(J=K.target.files)==null?void 0:J[0];if(!ne)return;Q({message:"Procesando archivo...",isError:!1});const X=ag(),ce=H0(X,"createUser"),V=new FileReader;V.onload=async re=>{var ie;try{const fe=new Uint8Array((ie=re.target)==null?void 0:ie.result),Se=Rx(fe,{type:"array"}),ve=Se.Sheets[Se.SheetNames[0]],ye=eu.sheet_to_json(ve);if(ye.length===0){Q({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const we=ye.map(Oe=>{const Ie=Oe.Nombre||Oe.nombre,je=Oe.Correo||Oe.correo||Oe.Email||Oe.email,Ke=Oe.Perfil||Oe.perfil||Oe.Profile||Oe.profile,st=Oe.RUT||Oe.rut;return!Ie||!je||!Ke?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):ce({nombreCompleto:String(Ie).trim(),email:String(je).trim(),profile:Ke,rut:st?String(st).trim():"",password:"recoleta"}).catch(vt=>({email:je,error:vt.message}))}),me=await Promise.all(we),he=me.filter(Oe=>!Oe.error).length,Ve=me.filter(Oe=>Oe.error);let nt=`Carga completada. ${he} usuarios agregados.`;Ve.length>0&&(nt+=` ${Ve.length} fallaron.`,console.error("Errores en carga masiva:",Ve)),Q({message:nt,isError:Ve.length>0}),await j()}catch(fe){Q({message:`Error: ${fe.message}`,isError:!0})}},V.readAsArrayBuffer(ne),K.target.value=""},le="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",ee=se.useMemo(()=>Array.from(new Set(t.filter(K=>K.profile===tn.ESTUDIANTE&&K.curso).map(K=>K.curso))).sort(),[t]),oe=se.useMemo(()=>t.filter(K=>(d===""||K.nombreCompleto.toLowerCase().includes(d.toLowerCase())||K.email.toLowerCase().includes(d.toLowerCase()))&&(p===""||K.profile===p)&&(C===""||K.curso===C)),[t,d,p,C]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:G,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),F&&c.jsx("p",{className:`text-sm mt-2 ${F.isError?"text-red-600":"text-green-600"}`,children:F.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),O&&c.jsx("p",{className:`text-sm mt-2 ${O.isError?"text-red-600":"text-green-600"}`,children:O.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:z,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:le,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:le,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:le})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:le})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:E,className:le,required:!0,children:TD.map(K=>c.jsx("option",{value:K,children:K},K))})]}),i.profile===tn.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:le,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),Ja.map(K=>c.jsx("option",{value:K,children:K},K))]})]})]}),i.profile===tn.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ja.map(K=>{var ne;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((ne=i.cursos)==null?void 0:ne.includes(K))||!1,onChange:()=>S("cursos",K),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),i.profile===tn.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Cc.map(K=>{var ne;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((ne=i.asignaturas)==null?void 0:ne.includes(K))||!1,onChange:()=>S("asignaturas",K),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:K})]},K)})})]}),T&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:T}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const K=ag(),X=await H0(K,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",X),I("✅ Custom claim agregado exitosamente")}catch(K){console.error("❌ Error al agregar custom claim:",K),I(`Error: ${K.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var K,ne,X,ce,V;try{const{auth:J}=await Sw(async()=>{const{auth:fe}=await Promise.resolve().then(()=>GY);return{auth:fe}},void 0);console.log("🔍 Usuario actual:",(K=J.currentUser)==null?void 0:K.email);const re=await((ne=J.currentUser)==null?void 0:ne.getIdToken(!0));console.log("🔑 Token refreshed:",!!re);const ie=await((X=J.currentUser)==null?void 0:X.getIdTokenResult());console.log("📋 Claims completos:",ie==null?void 0:ie.claims),console.log("👤 Profile claim:",(ce=ie==null?void 0:ie.claims)==null?void 0:ce.profile),((V=ie==null?void 0:ie.claims)==null?void 0:V.profile)==="SUBDIRECCION"?I("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):I(`❌ Custom claim faltante. Claims: ${JSON.stringify(ie==null?void 0:ie.claims)}`)}catch(J){console.error("❌ Error verificando token:",J),I(`Error verificando token: ${J.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:K=>m(K.target.value),className:le})}),c.jsx("div",{children:c.jsxs("select",{value:p,onChange:K=>x(K.target.value),className:le,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),TD.map(K=>c.jsx("option",{value:K,children:K},K))]})}),c.jsx("div",{children:c.jsxs("select",{value:C,onChange:K=>y(K.target.value),className:le,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),ee.map(K=>c.jsx("option",{value:K,children:K},K))]})})]}),n?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:oe.map(K=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:K.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:K.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${K.profile===tn.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":K.profile===tn.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:K.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[K.profile===tn.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:K.curso||"Sin curso"}),K.profile===tn.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[K.cursos&&K.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.cursos.slice(0,3).map(ne=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:ne},ne)),K.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.cursos.length-3]})]})]}),K.asignaturas&&K.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.asignaturas.slice(0,2).map(ne=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:ne},ne)),K.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",K.asignaturas.length-2]})]})]}),(!K.cursos||K.cursos.length===0)&&(!K.asignaturas||K.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),K.profile!==tn.ESTUDIANTE&&K.profile!==tn.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>P(K),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>R(K.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},K.email))})]}),oe.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&c.jsx(Afe,{})]})},Wm="seguimiento_dual_records",Dfe=t=>{const e=t.data(),n=r=>r&&typeof r.toDate=="function"?r.toDate().toISOString().split("T")[0]:r;return{id:t.id,...e,fechaDesvinculacion:n(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:n(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:n(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:n(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:n(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:n(e.fechaSupervisionExcepcional)}},Lfe=t=>{const e=mn(zt(Ut,Wm),Dr("nombreEstudiante","asc"));return Un(e,r=>{const s=r.docs.map(a=>Dfe(a));t(s)},r=>{console.error("Error al suscribirse a los registros de seguimiento:",r),t([])})},qw=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(r=>{e[r]&&typeof e[r]=="string"&&(e[r]=Tn.fromDate(new Date(e[r]+"T00:00:00")))}),e},Rfe=async t=>{try{const e=qw(t);return(await na(zt(Ut,Wm),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},ND=async(t,e)=>{try{const n=Mn(Ut,Wm,t),r=qw(e);await wo(n,r,{merge:!0})}catch(n){throw console.error("Error al actualizar el registro:",n),new Error("No se pudo actualizar el registro.")}},Pfe=async t=>{try{const e=Mn(Ut,Wm,t);await Yi(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},Mfe=async t=>{const e=D5(Ut),n=zt(Ut,Wm);let r=0,s=0;for(const a of t){const i=mn(n,cs("rutEstudiante","==",a.rutEstudiante)),o=await gi(i);if(o.empty){const l=Mn(n);e.set(l,qw(a)),s++}else{const l=o.docs[0].id,u=Mn(Ut,Wm,l);e.set(u,qw(a),{merge:!0}),r++}}return await e.commit(),{updated:r,created:s}},Ufe={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Ofe=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),n=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const n=new Date(e);return isNaN(n.getTime())?null:n.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},jfe=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},Qfe=({record:t,onSave:e,onClose:n})=>{const[r,s]=se.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:m,checked:p}=l.target;s(x=>({...x,[u]:m==="checkbox"?p:d}))},o=()=>{e(r)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:n,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:r.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!r.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:r.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!r.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:r.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!r.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:r.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!r.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:r.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!r.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:r.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:r.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Hfe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),s=se.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Nh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:hC[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=se.useState(s),[o,l]=se.useState(null),[u,d]=se.useState(""),[m,p]=se.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[x,C]=se.useState(null),[y,T]=se.useState(null),[I,F]=se.useState(!1),[M,O]=se.useState(null);se.useEffect(()=>{r(!0);const K=Lfe(ne=>{e(ne),r(!1)});return()=>K()},[]);const Q=se.useCallback(K=>{const{name:ne,value:X}=K.target;i(ce=>({...ce,[ne]:X}))},[]),j=se.useCallback(K=>{const{name:ne,value:X}=K.target;p(ce=>({...ce,[ne]:X}))},[]),E=se.useCallback(()=>{i(s),l(null),C(null)},[s]),S=async K=>{K.preventDefault(),C(null);const X=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ce=>{var V;return!((V=a[ce])!=null&&V.trim())});if(X){C(`El campo '${X}' es obligatorio.`);return}try{o?await ND(o,a):await Rfe(a),E()}catch(ce){console.error(ce),C("No se pudo guardar el registro.")}},k=se.useCallback(K=>{window.scrollTo({top:0,behavior:"smooth"}),l(K.id),i(K)},[]),z=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await Pfe(K)}catch(ne){console.error(ne),C("No se pudo eliminar el registro.")}},P=K=>{O(K),F(!0)},R=()=>{O(null),F(!1)},G=async K=>{try{await ND(K.id,K),R()}catch(ne){console.error(ne),alert("No se pudieron guardar los cambios de supervisión.")}},q=()=>{const K=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],ne=eu.aoa_to_sheet([K]),X=eu.book_new();eu.book_append_sheet(X,ne,"Plantilla"),B4(X,"Plantilla_Seguimiento_Dual.xlsx")},le=K=>{var ce;const ne=(ce=K.target.files)==null?void 0:ce[0];if(!ne)return;T({message:"Procesando archivo...",isError:!1});const X=new FileReader;X.onload=async V=>{var J;try{const re=new Uint8Array((J=V.target)==null?void 0:J.result),ie=Rx(re,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),fe=ie.SheetNames[0],Se=ie.Sheets[fe],ve=eu.sheet_to_json(Se,{raw:!1,dateNF:"yyyy-mm-dd"});if(ve.length===0)throw new Error("El archivo está vacío.");const ye={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},we=Object.keys(ve[0]).map(nt=>nt.trim().toLowerCase()),he=["nombre","rut","curso 2025","empresa","estado"].find(nt=>!we.includes(nt));if(he)throw new Error(`Falta la columna requerida: '${he}'`);const Ve=ve.map((nt,Oe)=>{try{const Ie={};for(const je in nt){const Ke=ye[je.trim().toLowerCase()];if(Ke){let st=nt[je];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ke)?(st=Ofe(st),st&&(Ie[Ke]=st)):Ke.includes("realizada")?Ie[Ke]=jfe(st):st!=null&&st!==""&&(Ie[Ke]=String(st).trim())}}return!Ie.nombreEstudiante||!Ie.rutEstudiante?(console.warn(`Fila ${Oe+2}: Faltan campos requeridos`),null):Ie}catch(Ie){return console.error(`Error procesando fila ${Oe+2}:`,Ie),null}}).filter(nt=>nt!==null);if(console.log("Registros procesados:",Ve),Ve.length>0){const{updated:nt,created:Oe}=await Mfe(Ve);T({message:`Carga exitosa. ${Oe} registros creados, ${nt} actualizados.`,isError:!1})}else T({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(re){console.error("Error completo:",re),T({message:`Error al procesar el archivo: ${re.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},X.readAsArrayBuffer(ne)},ee="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",oe=se.useMemo(()=>t.filter(K=>(u===""||K.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||K.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||K.rutEstudiante.includes(u))&&(m.curso===""||K.curso===m.curso)&&(m.empresa===""||K.nombreEmpresa===m.empresa)&&(m.estado===""||K.estado===m.estado)&&(m.comuna===""||K.comuna===m.comuna)&&(m.profesor===""||K.profesorTutorEmpresa===m.profesor)).sort((K,ne)=>K.nombreEstudiante.localeCompare(ne.nombreEstudiante)),[t,u,m]);return se.useMemo(()=>{const K=new Set,ne=new Set;return t.forEach(X=>{X.nombreEmpresa&&K.add(X.nombreEmpresa),X.comuna&&ne.add(X.comuna)}),{empresas:Array.from(K).sort(),comunas:Array.from(ne).sort()}},[t]),n?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),c.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:Q,className:ee,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:Q,className:ee,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:a.curso,onChange:Q,className:ee,required:!0,children:Nh.map(K=>c.jsx("option",{value:K,children:K},K))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:Q,className:ee,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),rS.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:Q,className:ee,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:Q,className:ee})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:Q,className:ee})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:Q,className:ee})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:a.estado,onChange:Q,className:ee,children:hC.map(K=>c.jsx("option",{value:K,children:K},K))})]})]}),a.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:Q,className:`${ee} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:Q,className:`${ee} border-red-300`})]})]}),x&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:x}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:q,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:le,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),y&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${y.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:K=>d(K.target.value),className:`${ee} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:m.curso,onChange:j,className:ee,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Nh.map(K=>c.jsx("option",{children:K},K))]}),c.jsxs("select",{name:"estado",value:m.estado,onChange:j,className:ee,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),hC.map(K=>c.jsx("option",{children:K},K))]}),c.jsxs("select",{name:"profesor",value:m.profesor,onChange:j,className:ee,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),rS.map(K=>c.jsx("option",{children:K},K))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:oe.map(K=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:K.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:K.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ufe[K.estado]}`,children:K.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>P(K),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>k(K),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>z(K.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},K.id))})]})})]}),I&&M&&c.jsx(Qfe,{record:M,onClose:R,onSave:G})]})},jj="actividades_remotas",Vfe="respuestas_actividades",zfe="usuarios",L4=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Gfe=t=>{const e=mn(zt(Ut,jj),Dr("fechaCreacion","desc"));return Un(e,r=>{const s=r.docs.map(a=>L4(a));t(s)},r=>{console.error("Error al suscribirse a las actividades:",r),t([])})},qfe=async t=>{try{const e={...t,fechaCreacion:Tn.fromDate(new Date),plazoEntrega:Tn.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await na(zt(Ut,jj),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},Kfe=t=>{const e=mn(zt(Ut,Vfe));return Un(e,r=>{const s=r.docs.map(a=>L4(a));t(s)},r=>{console.error("Error al suscribirse a las respuestas:",r),t([])})},$fe=t=>{const e=mn(zt(Ut,zfe));return Un(e,r=>{const s=r.docs.map(a=>L4(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},GC={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},Wfe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),Yfe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,a]=se.useState([]),[i,o]=se.useState(null),[l,u]=se.useState(!1),[d,m]=se.useState(!1),[p,x]=se.useState(!0),[C,y]=se.useState(null),[T,I]=se.useState(""),[F,M]=se.useState(null),[O,Q]=se.useState([]),j={asignatura:Cc[0],nivel:Cw[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[E,S]=se.useState(j);se.useEffect(()=>{x(!0);const ve=Gfe(e),ye=Kfe(r),we=$fe(me=>{a(me),x(!1)});return()=>{ve(),ye(),we()}},[]);const k=ve=>{S(ye=>({...ye,[ve.target.name]:ve.target.value}))},z=ve=>{S(ye=>({...ye,recursos:{...ye.recursos,[ve.target.name]:ve.target.value}}))},P=ve=>{ve.target.files&&Q(Array.from(ve.target.files))},R=ve=>{S(ye=>{const we=ye.tipos.includes(ve)?ye.tipos.filter(he=>he!==ve):[...ye.tipos,ve],me={...ye.cantidadPreguntas};return we.includes(ve)?me[ve]||(me[ve]=GC[ve][0]):delete me[ve],{...ye,tipos:we,cantidadPreguntas:me}})},G=(ve,ye)=>{S(we=>({...we,cantidadPreguntas:{...we.cantidadPreguntas,[ve]:ye}}))},q=ve=>{S(ye=>{var me;const we=(me=ye.cursosDestino)!=null&&me.includes(ve)?ye.cursosDestino.filter(he=>he!==ve):[...ye.cursosDestino||[],ve];return{...ye,cursosDestino:we}})},le=ve=>{S(ye=>{var me;const we=(me=ye.estudiantesDestino)!=null&&me.includes(ve)?ye.estudiantesDestino.filter(he=>he!==ve):[...ye.estudiantesDestino||[],ve];return{...ye,estudiantesDestino:we}})},ee=()=>{const{tipos:ve,contenido:ye,asignatura:we,nivel:me,cantidadPreguntas:he}=E;let Ve=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${ye}"
Asignatura: ${we}
Nivel: ${me}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${ye}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return ve.forEach(nt=>{const Oe=he[nt]||GC[nt][0];switch(nt){case"Quiz":Ve+=`- **Quiz**: Un array de ${Oe} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Ve+=`- **Comprensión de Lectura**: Un array de ${Oe} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Ve+=`- **Términos Pareados**: Un array de ${Oe} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Ve+=`- **Desarrollo**: Un array de ${Oe} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Ve};function oe(ve,ye){if(ve==="Desarrollo"){if(Array.isArray(ye))return ye.map(we=>{if(typeof we=="string"){const me=we.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return me?{pregunta:me[1].trim(),rubrica:me[2].trim()}:{pregunta:we.trim(),rubrica:""}}return we&&typeof we=="object"?{pregunta:we.pregunta||we.Pregunta||we.texto||"",rubrica:we.rubrica||we.Rubrica||we.rúbrica||we.Rúbrica||""}:{pregunta:String(we),rubrica:""}});if(typeof ye=="string")return ye.split(/\n\n|\n- |\d+\. /).map(we=>{const me=we.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return me?{pregunta:me[1].trim(),rubrica:me[2].trim()}:{pregunta:we.trim(),rubrica:""}}).filter(we=>we.pregunta)}if(ve==="Términos Pareados"){if(Array.isArray(ye))return ye.map((we,me)=>{if(typeof we=="string"){const he=we.match(/^(.+?)[\s:-–]+(.+)$/);return he?{id:me,concepto:he[1].trim(),definicion:he[2].trim()}:{id:me,concepto:we.trim(),definicion:""}}return we&&typeof we=="object"?{id:me,concepto:we.concepto||we.termino||"",definicion:we.definicion||we.significado||""}:{id:me,concepto:String(we),definicion:""}});if(typeof ye=="object"&&ye!==null)return Object.entries(ye).map(([we,me],he)=>({id:he,concepto:we,definicion:me}));if(typeof ye=="string")return ye.split(/\n|;/).map((we,me)=>{const he=we.match(/^(.+?)[\s:-–]+(.+)$/);return he?{id:me,concepto:he[1].trim(),definicion:he[2].trim()}:{id:me,concepto:we.trim(),definicion:""}}).filter(we=>we.concepto)}if(ve==="Comprensión de Lectura"){if(ye&&typeof ye=="object"&&Array.isArray(ye.preguntas))return{texto:ye.texto||"",preguntas:ye.preguntas.map(we=>({pregunta:we.pregunta||we.Pregunta||"",opciones:we.opciones||we.Opciones||[],respuestaCorrecta:we.respuestaCorrecta||we.respuesta||""}))};if(Array.isArray(ye)){const we=ye.find(me=>me&&typeof me=="object"&&"texto"in me&&"preguntas"in me);return we?{texto:we.texto||"",preguntas:(we.preguntas||[]).map(me=>({pregunta:me.pregunta||me.Pregunta||"",opciones:me.opciones||me.Opciones||[],respuestaCorrecta:me.respuestaCorrecta||me.respuesta||""}))}:{texto:ye.map(me=>typeof me=="string"?me:JSON.stringify(me)).join(`
`),preguntas:[]}}if(typeof ye=="string"){const[we,me]=ye.split(/Preguntas:|\nPreguntas:/i);let he=[];return me&&(he=me.split(/\n- |\n\d+\. /).filter(Boolean).map(Ve=>{const nt=Ve.split(/Opciones:|\nOpciones:/i),Oe=nt[0].trim();let Ie=[],je="";nt[1]&&(Ie=nt[1].split(/;|\n|,/).map(st=>st.trim()).filter(Boolean));const Ke=Ve.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return Ke&&(je=Ke[1].trim()),{pregunta:Oe,opciones:Ie,respuestaCorrecta:je}})),{texto:(we==null?void 0:we.trim())||ye,preguntas:he}}}return ye}const K=async ve=>{var ye;if(ve.preventDefault(),!E.contenido.trim()||E.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}m(!0),y(null);try{const we=await Promise.all(O.map(async xt=>({nombre:xt.name,url:await Wfe(xt)}))),me="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Ve=new xi(me).getGenerativeModel({model:"gemini-1.5-flash-latest"}),nt=ee(),Ke=(await(await(await Ve.generateContent(nt)).response).text()).replace(/^```json\s*|```\s*$/g,""),st=JSON.parse(Ke),vt={};for(const xt of E.tipos)vt[xt]=oe(xt,(ye=st.actividades)==null?void 0:ye[xt]);const Tt={id:"",fechaCreacion:new Date().toISOString(),...E,recursos:{...E.recursos,archivos:we},introduccion:st.introduccion,generatedContent:vt};M(Tt)}catch(we){console.error("Error al generar actividad con IA",we),y("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+we.message)}finally{m(!1)}},ne=async()=>{if(F)try{await qfe(F),S(j),Q([]),u(!1),M(null)}catch(ve){console.error("Error al guardar la actividad:",ve),y("No se pudo guardar la actividad en la base de datos.")}},X=se.useMemo(()=>{var we,me;if(!i||!s)return[];const ve=s.filter(he=>{var Ve;return he.profile===tn.ESTUDIANTE&&((Ve=i.cursosDestino)==null?void 0:Ve.includes(he.curso||""))}).map(he=>he.nombreCompleto),ye=i.estudiantesDestino||[];if(!((we=i.cursosDestino)!=null&&we.length)&&!((me=i.estudiantesDestino)!=null&&me.length)){const he=i.nivel.charAt(0);return s.filter(Ve=>{var nt;return Ve.profile===tn.ESTUDIANTE&&((nt=Ve.curso)==null?void 0:nt.startsWith(he))}).map(Ve=>Ve.nombreCompleto).sort()}return Array.from(new Set([...ve,...ye])).sort()},[i,s]),ce=se.useMemo(()=>n.filter(ve=>ve.actividadId===(i==null?void 0:i.id)),[n,i]),V=se.useMemo(()=>s.filter(ve=>ve.profile===tn.ESTUDIANTE).sort((ve,ye)=>ve.nombreCompleto.localeCompare(ye.nombreCompleto)),[s]),J=se.useMemo(()=>T.trim()?V.filter(ve=>ve.nombreCompleto.toLowerCase().includes(T.toLowerCase())):V,[V,T]),re=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:X.map(ve=>{const ye=ce.find(we=>we.estudianteId===ve);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:ve}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:ye?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ye?`${ye.puntaje}/${ye.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:ye?new Date(ye.fechaCompletado).toLocaleString("es-CL"):"-"})]},ve)})})]})})]})]}),ie=()=>{var ve,ye;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:K,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:E.asignatura,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:Cc.map(we=>c.jsx("option",{value:we,children:we},we))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:E.nivel,onChange:k,className:"w-full border-slate-300 rounded-md shadow-sm",children:Cw.map(we=>c.jsx("option",{value:we,children:we},we))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(ve=E.recursos)==null?void 0:ve.instrucciones,onChange:z,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(ye=E.recursos)==null?void 0:ye.enlaces,onChange:z,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Ja.map(we=>{var me;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(me=E.cursosDestino)==null?void 0:me.includes(we),onChange:()=>q(we),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:we})]},we)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:T,onChange:we=>I(we.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:J.map(we=>{var me;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(me=E.estudiantesDestino)==null?void 0:me.includes(we.nombreCompleto),onChange:()=>le(we.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:we.nombreCompleto,children:we.nombreCompleto})]},we.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:hX.map(we=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:E.tipos.includes(we),onChange:()=>R(we),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:we})]}),E.tipos.includes(we)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),GC[we].map(me=>c.jsx("button",{type:"button",onClick:()=>G(we,me),className:`px-3 py-1 rounded-full font-semibold text-xs ${E.cantidadPreguntas[we]===me?"bg-amber-500 text-white":"bg-slate-200"}`,children:me},me))]})]},we))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:E.contenido,onChange:k,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:E.plazoEntrega,onChange:k,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),C&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:C}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},fe=()=>{var ve;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:F==null?void 0:F.introduccion})]}),(F==null?void 0:F.recursos)&&(F.recursos.instrucciones||F.recursos.enlaces||((ve=F.recursos.archivos)==null?void 0:ve.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[F.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:F.recursos.instrucciones}),F.recursos.enlaces&&c.jsx("div",{children:F.recursos.enlaces.split(`
`).map((ye,we)=>ye.trim()&&c.jsx("a",{href:ye,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:ye},we))}),F.recursos.archivos&&F.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:F.recursos.archivos.map(ye=>c.jsx("li",{className:"text-slate-700",children:ye.nombre},ye.nombre))})]})]}),F==null?void 0:F.tipos.map(ye=>{const we=F.generatedContent[ye];return we?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:ye}),c.jsxs("div",{className:"space-y-4 text-sm",children:[ye==="Quiz"&&Array.isArray(we)&&we.map((me,he)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:me.opciones.map((Ve,nt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+nt),"."]})," ",Ve]},nt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",me.respuestaCorrecta]})]},he)),ye==="Comprensión de Lectura"&&we&&typeof we=="object"&&Array.isArray(we.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:we.texto}),we.preguntas.map((me,he)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:me.opciones.map((Ve,nt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+nt),"."]})," ",Ve]},nt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",me.respuestaCorrecta]})]},he))]}),ye==="Términos Pareados"&&Array.isArray(we)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:we.map(me=>c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:me.concepto}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:me.definicion})]},me.id))})]})}),ye==="Desarrollo"&&Array.isArray(we)&&we.map((me,he)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[he+1,". ",me.pregunta]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",me.rubrica]})]},he)),(ye==="Quiz"||ye==="Términos Pareados"||ye==="Desarrollo")&&!Array.isArray(we)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:ye}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),ye==="Comprensión de Lectura"&&(!we||typeof we!="object"||!Array.isArray(we.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},ye):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>M(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:ne,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},Se=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(ve=>{var me,he;const ye=[];(me=ve.cursosDestino)!=null&&me.length&&ye.push(`Cursos: ${ve.cursosDestino.join(", ")}`),(he=ve.estudiantesDestino)!=null&&he.length&&ye.push(`Estudiantes: ${ve.estudiantesDestino.length}`);const we=ye.length?ye.join(" | "):`Todo ${ve.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[ve.asignatura," - ",ve.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",we," | Creado: ",new Date(ve.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(ve),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},ve.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return p?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:F?fe():i?re():l?ie():Se()})},Xfe="actividades_remotas",Qj="respuestas_actividades",Hj=t=>{var n,r,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Jfe=(t,e)=>{if(!t.curso)return e([]),()=>{};const n=t.curso.charAt(0),r=mn(zt(Ut,Xfe),Dr("fechaCreacion","desc"));return Un(r,s=>{const i=s.docs.map(o=>Hj(o)).filter(o=>{var m,p,x,C;const l=!((m=o.cursosDestino)!=null&&m.length)&&!((p=o.estudiantesDestino)!=null&&p.length),u=((x=o.cursosDestino)==null?void 0:x.includes(t.curso))??!1,d=((C=o.estudiantesDestino)==null?void 0:C.includes(t.nombreCompleto))??!1;return u||d?!0:l?o.nivel.charAt(0)===n:!1});e(i)},s=>{console.error("Error al suscribirse a actividades disponibles:",s),e([])})},Zfe=(t,e)=>{const n=mn(zt(Ut,Qj),cs("estudianteId","==",t));return Un(n,r=>{const s=r.docs.map(a=>Hj(a));e(s)},r=>{console.error("Error al suscribirse a las respuestas del estudiante:",r),e([])})},ehe=async t=>{try{const e={...t,fechaCompletado:Tn.fromDate(new Date)};return(await na(zt(Ut,Qj),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},the=t=>[...t].sort(()=>Math.random()-.5),nhe=(t,e)=>{if(e===0)return"1.0";const r=e*.6;let s;return t>=r?s=4+(t-r)*3/(e-r):s=1+t*3/(r||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},BD=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rhe=({actividad:t,onComplete:e,currentUser:n})=>{var F,M,O,Q;const[r,s]=se.useState({}),[a,i]=se.useState(!1),[o,l]=se.useState(!1),[u,d]=se.useState(!1),[m,p]=se.useState({}),x=`progress-${n.id}-${t.id}`;se.useEffect(()=>{const j={};t.tipos.forEach(E=>{if(E==="Términos Pareados"){const S=t.generatedContent[E];S&&(j[E]=the(S.map(k=>k.definicion)))}}),p(j);try{const E=localStorage.getItem(x);E&&s(JSON.parse(E))}catch(E){console.error("Could not load saved progress",E)}},[t,x]);const C=(j,E)=>{s(S=>({...S,[j]:E}))},y=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(x,JSON.stringify(r)),d(!0),setTimeout(()=>d(!1),2e3)}catch(j){console.error("Could not save progress",j),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},T=async()=>{i(!0);let j=0,E=0;const S=[],k={},z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let P=null;P=new xi(z);for(const G of t.tipos){const q=t.generatedContent[G],le=r[G];if(G==="Quiz"||G==="Comprensión de Lectura"){const ee=G==="Quiz"?q:q.preguntas,oe=le||{};let K=0,ne=0;ee.forEach((X,ce)=>{ne+=1,oe[ce]===X.respuestaCorrecta&&(K+=1)}),j+=K,E+=ne,S.push(`${G}: ${K}/${ne} correctas.`),k[G]={puntaje:K,puntajeMaximo:ne}}else if(G==="Términos Pareados"){const ee=q,oe=le||{};let K=0,ne=0;ee.forEach(X=>{ne+=2,oe[X.id]===X.definicion&&(K+=2)}),j+=K,E+=ne,S.push(`${G}: ${K/2}/${ee.length} correctas.`),k[G]={puntaje:K,puntajeMaximo:ne}}else if(G==="Desarrollo"){const ee=q,oe=le||{};let K=0,ne=0;for(let X=0;X<ee.length;X++){const ce=ee[X];if(ne+=3,!P){S.push(`${G} #${X+1}: No se pudo evaluar automáticamente.`);continue}try{od("Autoaprendizaje - Evaluar Desarrollo");const V=P.getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${ce.pregunta}".
                        Rúbrica: "${ce.rubrica}".
                        Respuesta del estudiante: "${oe[X]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,Se=(await(await V.generateContent(J)).response).text().replace(/^```json\s*|```\s*$/g,""),ve=JSON.parse(Se),ye=Math.max(0,Math.min(3,parseInt(ve.puntaje,10)||0));K+=ye,S.push(`${G} #${X+1}: Puntaje ${ye}/3. (${ve.feedback})`)}catch(V){console.error("Error evaluating development question:",V),S.push(`${G} #${X+1}: No se pudo evaluar automáticamente.`)}}j+=K,E+=ne,k[G]={puntaje:K,puntajeMaximo:ne}}}let R;if(P){const G=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${j} de ${E}.
                Detalle por sección: ${JSON.stringify(k)}
                Respuestas de desarrollo: ${JSON.stringify(r.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{od("Autoaprendizaje - Retroalimentación Detallada");const K=(await(await P.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,"");R=JSON.parse(K)}catch(q){console.error("Error generating detailed feedback:",q)}}e({respuestas:r,puntaje:j,puntajeMaximo:E,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${j} de ${E}.`,calificacion:nhe(j,E),puntajesPorSeccion:k},R),localStorage.removeItem(x),i(!1)},I=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((F=t.recursos.archivos)==null?void 0:F.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),I&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((M=t.recursos)==null?void 0:M.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((O=t.recursos)==null?void 0:O.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((j,E)=>j.trim()&&c.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:j},E))]}),((Q=t.recursos)==null?void 0:Q.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((j,E)=>c.jsx("li",{children:c.jsx("a",{href:j.url,download:j.nombre,className:"text-blue-500 hover:underline",children:j.nombre})},E))})]})]})]}),t.tipos.map(j=>{const E=t.generatedContent[j];if(!E)return null;switch(j){case"Quiz":case"Comprensión de Lectura":{const S=j==="Quiz",k=E,z=S?k:k.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:j}),!S&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:k.texto}),c.jsx("div",{className:"space-y-6",children:z.map((P,R)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[R+1,". ",P.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:P.opciones.map((G,q)=>{var le;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${j}-${R}-${t.id}`,value:G,checked:((le=r[j])==null?void 0:le[R])===G,onChange:()=>C(j,{...r[j]||{},[R]:G}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:G})]},q)})})]},`${j}-${R}`))})]},j)}case"Términos Pareados":{const S=E,k=m[j]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:j}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),S.map(z=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:z.concepto},z.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),S.map(z=>{var P;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((P=r[j])==null?void 0:P[z.id])||"",onChange:R=>C(j,{...r[j]||{},[z.id]:R.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definición..."}),k.map((R,G)=>c.jsx("option",{value:R,children:R},G))]})},z.id)})]})]})]},j)}case"Desarrollo":{const S=E;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:j}),S.map((k,z)=>{var P;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:k.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rúbrica:"})," ",k.rubrica]}),c.jsx("textarea",{value:((P=r[j])==null?void 0:P[z])||"",onChange:R=>C(j,{...r[j]||{},[z]:R.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},z)})]},j)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:y,disabled:a||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(BD,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:T,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?c.jsxs(c.Fragment,{children:[c.jsx(BD,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},she=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState([]),[a,i]=se.useState(null),[o,l]=se.useState("list"),[u,d]=se.useState(null),[m,p]=se.useState(null),[x,C]=se.useState(!0);se.useEffect(()=>{C(!0);const F=Jfe(t,n),M=Zfe(t.nombreCompleto,O=>{s(O),C(!1)});return()=>{F(),M()}},[t]);const y=F=>{p(F)},T=()=>{m&&(i(m),l("activity"),p(null))},I=se.useCallback(async(F,M)=>{if(!a)return;const O={actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...F,retroalimentacionDetallada:M};try{const Q=await ehe(O);d({...O,id:Q}),l("result")}catch(Q){console.error("Error saving submission:",Q),alert("No se pudo guardar tu respuesta. El error fue: "+Q.message)}},[a,t.nombreCompleto]);if(x)return c.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&a)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),c.jsx(rhe,{actividad:a,onComplete:I,currentUser:t})]});if(o==="result"&&u){const F=u.retroalimentacionDetallada,M=u.puntajesPorSeccion||{},O=(Q,j)=>{const E=j>0?Q/j:0;return E<.4?"bg-red-100 text-red-800":E<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),F?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:F.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${O(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:F.areasDeFortaleza.map((Q,j)=>c.jsx("li",{children:Q},j))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:F.areasDeMejora.map((Q,j)=>c.jsx("li",{children:Q},j))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(M).map(([Q,{puntaje:j,puntajeMaximo:E}])=>{var S;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:Q}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${O(j,E)}`,children:[j," / ",E]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(S=F.feedbackPorSeccion)==null?void 0:S[Q]})]},Q)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:F.planDeMejora.map((Q,j)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:Q.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:Q.detalle})]})]},j))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),c.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>p(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(F=>{const M=r.find(Q=>Q.actividadId===F.id),O=!!M;return c.jsx("div",{className:`p-4 border rounded-lg ${O?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[F.asignatura," - ",F.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",F.plazoEntrega]})]}),O?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(M),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",M.puntaje,"/",M.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>y(F),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},F.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},cb="estudiantes_inclusion",ahe="usuarios",Vj=t=>{const e=t.data();return{id:t.id,...e}},ihe=t=>{const e=mn(zt(Ut,cb));return Un(e,r=>{const s=r.docs.map(a=>Vj(a));t(s)},r=>{console.error("Error al suscribirse a estudiantes de inclusión:",r),t([])})},ohe=t=>{const e=mn(zt(Ut,ahe));return Un(e,r=>{const s=r.docs.map(a=>Vj(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},lhe=async t=>{try{return(await na(zt(Ut,cb),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},che=async(t,e)=>{try{const{id:n,...r}=e,s=Mn(Ut,cb,t);await wo(s,r)}catch(n){throw console.error("Error al actualizar estudiante de inclusión:",n),new Error("No se pudo actualizar la ficha del estudiante.")}},uhe=async t=>{try{const e=Mn(Ut,cb,t);await Yi(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},Ahe=({student:t,onClose:e,onSave:n,profesores:r})=>{const[s,a]=se.useState("intervenciones"),[i,o]=se.useState(t);se.useEffect(()=>{o(t)},[t]);const[l,u]=se.useState(null),d={responsable:"",accion:"",observaciones:""},[m,p]=se.useState(d),[x,C]=se.useState({trimestre:"T1",meta:""}),[y,T]=se.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[I,F]=se.useState(null),[M,O]=se.useState(!1),Q={motivo:"",acuerdos:"",asistentes:""},[j,E]=se.useState(Q),S=()=>{n(i),e()},k=()=>{if(!m.responsable||!m.accion){alert("Responsable y Acción son campos obligatorios.");return}let me;l?me=(i.intervenciones||[]).map(Ve=>Ve.id===l.id?{...Ve,...m}:Ve):me=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...m},...i.intervenciones||[]];const he=me.sort((Ve,nt)=>new Date(nt.fecha).getTime()-new Date(Ve.fecha).getTime());o(Ve=>({...Ve,intervenciones:he})),p(d),u(null)},z=me=>{u(me),p({responsable:me.responsable,accion:me.accion,observaciones:me.observaciones})},P=me=>{window.confirm("¿Eliminar esta intervención?")&&o(he=>({...he,intervenciones:(he.intervenciones||[]).filter(Ve=>Ve.id!==me)}))},R=me=>{const{name:he,value:Ve}=me.target;o(nt=>({...nt,[he]:Ve,fechaActualizacionApoyos:new Date().toISOString()}))},G=()=>{if(!x.meta.trim())return;const me={...x,id:crypto.randomUUID(),cumplida:!1};o(he=>({...he,metasProgreso:[...he.metasProgreso||[],me]})),C({trimestre:"T1",meta:""})},q=me=>{o(he=>({...he,metasProgreso:(he.metasProgreso||[]).map(Ve=>Ve.id===me?{...Ve,cumplida:!Ve.cumplida}:Ve)}))},le=me=>{o(he=>({...he,metasProgreso:(he.metasProgreso||[]).filter(Ve=>Ve.id!==me)}))},ee=se.useMemo(()=>{const me=i.metasProgreso||[];if(me.length===0)return{percent:0,color:"bg-slate-300"};const he=me.filter(Oe=>Oe.cumplida).length,Ve=Math.round(he/me.length*100),nt=Ve<40?"bg-red-500":Ve<75?"bg-yellow-500":"bg-green-500";return{percent:Ve,color:nt}},[i.metasProgreso]),oe=se.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const me=new Date(i.fechaActualizacionApoyos),he=new Date;return he.setMonth(he.getMonth()-3),me<he},[i.fechaActualizacionApoyos]),K=()=>{if(!y.titulo.trim()||!y.fecha)return;const me={...y,id:crypto.randomUUID(),resuelta:!1};o(he=>({...he,alertas:[...he.alertas||[],me].sort((Ve,nt)=>new Date(Ve.fecha).getTime()-new Date(nt.fecha).getTime())})),T({titulo:"",fecha:new Date().toISOString().split("T")[0]})},ne=me=>{o(he=>({...he,alertas:(he.alertas||[]).map(Ve=>Ve.id===me?{...Ve,resuelta:!Ve.resuelta}:Ve)}))},X=me=>{o(he=>({...he,alertas:(he.alertas||[]).filter(Ve=>Ve.id!==me)}))},ce=me=>{me.target.files&&me.target.files[0]&&F(me.target.files[0])},V=()=>{if(!I)return;O(!0);const me=new FileReader;me.readAsDataURL(I),me.onloadend=()=>{const he={id:crypto.randomUUID(),nombre:I.name,url:me.result,fechaSubida:new Date().toISOString()};o(Ve=>({...Ve,archivos:[he,...Ve.archivos||[]]})),F(null),O(!1)},me.onerror=()=>{alert("Error al leer el archivo."),O(!1)}},J=me=>{window.confirm("¿Eliminar este archivo?")&&o(he=>({...he,archivos:(he.archivos||[]).filter(Ve=>Ve.id!==me)}))},re=()=>{if(!j.motivo.trim()||!j.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const me={...j,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(he=>({...he,reuniones:[me,...he.reuniones||[]].sort((Ve,nt)=>new Date(nt.fecha).getTime()-new Date(Ve.fecha).getTime())})),E(Q)},ie=me=>{window.confirm("¿Eliminar este registro de reunión?")&&o(he=>({...he,reuniones:(he.reuniones||[]).filter(Ve=>Ve.id!==me)}))},fe=()=>{var st,vt,Tt;const me=new En("p","mm","a4"),he=20,Ve=me.internal.pageSize.getWidth(),nt=me.internal.pageSize.getHeight();let Oe=he;const Ie=xt=>{xt.setFontSize(10),xt.setTextColor(100),xt.text("Ficha de Seguimiento - Módulo Inclusión",he,15)};Ie(me),me.setFontSize(18),me.setFont("helvetica","bold"),me.setTextColor(40),me.text(i.nombre,he,Oe+10),Oe+=15,me.setFontSize(11),me.setFont("helvetica","normal"),me.setTextColor(80),me.text(`Curso: ${i.curso}`,he,Oe),me.text(`Dificultad: ${i.dificultad}`,he,Oe+6),Oe+=15;const je=xt=>{Oe+xt>nt-he&&(me.addPage(),Ie(me),Oe=he)},Ke=xt=>{je(15),me.setFontSize(14),me.setFont("helvetica","bold"),me.text(xt,he,Oe),Oe+=10};if((st=i.intervenciones)!=null&&st.length&&(Ke("Historial de Intervenciones"),_c(me,{startY:Oe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(xt=>[new Date(xt.fecha).toLocaleDateString("es-CL"),xt.responsable,xt.accion,xt.observaciones||""]),theme:"grid",didDrawPage:xt=>Ie(me)}),Oe=me.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){je(30),Ke("Seguimiento y Apoyos"),me.setFontSize(11),me.setFont("helvetica","normal");const xt=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Vt=me.splitTextToSize(xt,Ve-he*2);me.text(Vt,he,Oe),Oe+=Vt.length*5+10}(vt=i.metasProgreso)!=null&&vt.length&&(je(30),Ke("Metas de Progreso"),_c(me,{startY:Oe,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(xt=>[xt.trimestre,xt.meta,xt.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:xt=>Ie(me)}),Oe=me.lastAutoTable.finalY+10),(Tt=i.reuniones)!=null&&Tt.length&&(Ke("Reuniones con Apoderados"),_c(me,{startY:Oe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(xt=>[new Date(xt.fecha).toLocaleDateString("es-CL"),xt.motivo,xt.acuerdos,xt.asistentes]),theme:"grid",didDrawPage:xt=>Ie(me)})),me.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},Se=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:m.responsable,onChange:me=>p(he=>({...he,responsable:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),r.map(me=>c.jsx("option",{value:me,children:me},me))]}),c.jsx("textarea",{value:m.accion,onChange:me=>p(he=>({...he,accion:me.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:m.observaciones,onChange:me=>p(he=>({...he,observaciones:me.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),p(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:k,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(me=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:me.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - ",me.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>z(me),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>P(me.id),className:"text-red-500",children:"🗑️"})]})]})},me.id))})]}),ve=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),oe&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:R,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:R,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",ee.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${ee.color} h-4 rounded-full transition-all duration-500`,style:{width:`${ee.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:x.trimestre,onChange:me=>C(he=>({...he,trimestre:me.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:x.meta,onChange:me=>C(he=>({...he,meta:me.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:G,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(me=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:me.cumplida,onChange:()=>q(me.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${me.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[me.trimestre,":"]})," ",me.meta]}),c.jsx("button",{onClick:()=>le(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]})]}),ye=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:y.titulo,onChange:me=>T(he=>({...he,titulo:me.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:y.fecha,onChange:me=>T(he=>({...he,fecha:me.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:K,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(me=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:me.resuelta,onChange:()=>ne(me.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${me.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[me.titulo," (",new Date(me.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>X(me.id),className:"text-red-500 text-sm",children:"🗑️"})]},me.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ce,className:"w-full text-sm"}),c.jsx("button",{onClick:V,disabled:!I||M,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:M?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(me=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:me.url,download:me.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:me.nombre}),c.jsx("button",{onClick:()=>J(me.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},me.id))})]})]}),we=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:j.motivo,onChange:me=>E(he=>({...he,motivo:me.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:j.acuerdos,onChange:me=>E(he=>({...he,acuerdos:me.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:j.asistentes,onChange:me=>E(he=>({...he,asistentes:me.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:re,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(me=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:me.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",me.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(me.fecha).toLocaleString("es-CL")," - Asistentes: ",me.asistentes]})]}),c.jsx("button",{onClick:()=>ie(me.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},me.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:me=>me.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:fe,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(me=>c.jsx("button",{onClick:()=>a(me),className:`${s===me?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:me==="alertas"?"Alertas y Archivos":me==="seguimiento"?"Seguimiento y Metas":me},me))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&Se(),s==="seguimiento"&&ve(),s==="reuniones"&&we(),s==="alertas"&&ye()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},dhe=({student:t,onClose:e,onConfirm:n})=>{const[r,s]=se.useState(Ew[0]),a=()=>{n(t,r)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:r,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Ew.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},kD=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState([]),[a,i]=se.useState(!0),[o,l]=se.useState(null),[u,d]=se.useState(null),[m,p]=se.useState(""),[x,C]=se.useState(""),[y,T]=se.useState("");se.useEffect(()=>{i(!0);const S=ihe(z=>{n(z),i(!1)}),k=ohe(z=>{s(z)});return()=>{S(),k()}},[]);const I=async(S,k)=>{if(e.some(P=>P.nombre===S.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const z={nombre:S.nombreCompleto,curso:S.curso||"",dificultad:k,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await lhe(z)}catch(P){console.error("Error al agregar estudiante:",P),alert("Hubo un error al agregar al estudiante al programa.")}},F=async S=>{try{await che(S.id,S)}catch(k){console.error("Error al actualizar la ficha:",k),alert("Hubo un error al guardar los cambios en la ficha.")}},M=async S=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await uhe(S),(o==null?void 0:o.id)===S&&l(null)}catch(k){console.error("Error al eliminar estudiante:",k),alert("Hubo un error al eliminar al estudiante.")}},O=S=>{if(j.length===0){alert("No hay datos para exportar.");return}const k=j.map(z=>{var P;return{Nombre:z.nombre,Curso:z.curso,Dificultad:z.dificultad,"N° Intervenciones":((P=z.intervenciones)==null?void 0:P.length)||0,"Alertas Pendientes":(z.alertas||[]).filter(R=>!R.resuelta).length}});if(S==="xlsx"){const z=eu.json_to_sheet(k),P=eu.book_new();eu.book_append_sheet(P,z,"Estudiantes_Inclusion"),B4(P,"Estudiantes_Inclusion.xlsx")}else{const z=new En;z.text("Listado de Estudiantes - Programa de Inclusión",14,15),_c(z,{startY:20,head:[Object.keys(k[0])],body:k.map(Object.values)}),z.save("Estudiantes_Inclusion.pdf")}},Q=se.useMemo(()=>r.filter(S=>{var k;return S.profile===tn.ESTUDIANTE&&(((k=t.cursos)==null?void 0:k.includes(S.curso||""))||t.profile===tn.SUBDIRECCION)}).filter(S=>!e.some(k=>k.nombre===S.nombreCompleto)),[r,e,t]),j=se.useMemo(()=>e.filter(S=>S.nombre.toLowerCase().includes(m.toLowerCase())&&(x===""||S.curso===x)&&(y===""||S.dificultad===y)).sort((S,k)=>S.nombre.localeCompare(k.nombre)),[e,m,x,y]),E=se.useMemo(()=>r.filter(S=>S.profile===tn.PROFESORADO).map(S=>S.nombreCompleto).sort(),[r]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",j.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>O("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>O("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:m,onChange:S=>p(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:x,onChange:S=>C(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Ja.map(S=>c.jsx("option",{children:S},S))]}),c.jsxs("select",{value:y,onChange:S=>T(S.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),Ew.map(S=>c.jsx("option",{children:S},S))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:j.map(S=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[S.curso," - ",S.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(S),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>M(S.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},S.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:Q.map(S=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:S.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:S.curso})]}),c.jsx("button",{onClick:()=>d(S),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},S.id))})]})]}),u&&c.jsx(dhe,{student:u,onClose:()=>d(null),onConfirm:(S,k)=>{I(S,k),d(null)}}),o&&c.jsx(Ahe,{student:o,onClose:()=>l(null),onSave:F,profesores:E})]})},zj="asistencia_dual",fhe=t=>{var n,r;const e=t.data();return{id:t.id,...e,fechaHora:((r=(n=e.fechaHora)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaHora}},hhe=(t,e)=>{const n=mn(zt(Ut,zj),cs("emailEstudiante","==",t),Dr("fechaHora","desc"));return Un(n,s=>{const a=s.docs.map(i=>fhe(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},mhe=async t=>{try{const e={...t,fechaHora:Tn.fromDate(new Date(t.fechaHora))};await na(zt(Ut,zj),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},phe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),ghe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),xhe=({currentUser:t})=>{const[e,n]=se.useState(t.curso||""),[r,s]=se.useState([]),[a,i]=se.useState(!1),[o,l]=se.useState(!0),[u,d]=se.useState(null);se.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const p=hhe(t.email,x=>{s(x),l(!1)});return()=>p()},[t.email]);const m=p=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async x=>{const C={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:p,fechaHora:new Date().toISOString(),ubicacion:{latitud:x.coords.latitude,longitud:x.coords.longitude}};try{await mhe(C),d({text:`¡Marca de ${p} registrada con éxito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},x=>{console.error("Geolocation error:",x);let C="No se pudo obtener la ubicación.";switch(x.code){case x.PERMISSION_DENIED:C="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case x.POSITION_UNAVAILABLE:C="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case x.TIMEOUT:C="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:C=`Ocurrió un error desconocido al obtener la ubicación (código: ${x.code}).`;break}d({text:C,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:p=>n(p.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),Nh.map(p=>c.jsx("option",{value:p,children:p},p))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>m("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>m("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):r.length>0?r.map(p=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(p.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${p.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[p.tipo==="Entrada"?c.jsx(phe,{}):c.jsx(ghe,{}),p.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:p.curso})]},p.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},vhe=async()=>{try{console.log("🔍 Debugging users collection...");const t=zt(Sr,"users"),e=mn(t,yf(10)),n=await gi(e),r={exists:!0,totalDocs:n.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return n.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};r.sampleDocs.push(l),Object.keys(o).forEach(u=>s.add(u))}),r.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>r.sampleDocs.filter(o=>a in o.data).length>r.sampleDocs.length*.5)},console.log("Users collection debug result:",r),r}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},yhe=async(t,e)=>{var l,u,d;const n=new Date(t,e,1),r=new Date(t,e+1,0,23,59,59,999),s=Tn.fromDate(n),a=Tn.fromDate(r),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const m of i)try{const p=zt(Sr,m);try{const x=mn(p,cs("fechaHora",">=",s),cs("fechaHora","<=",a)),C=await gi(x);o[m]={exists:!0,hasDateField:!0,count:C.size,sampleDoc:((l=C.docs[0])==null?void 0:l.data())||null}}catch{const C=["fecha","timestamp","createdAt"];let y=!1;for(const T of C)try{const I=mn(p,cs(T,">=",s),cs(T,"<=",a)),F=await gi(I);o[m]={exists:!0,hasDateField:T,count:F.size,sampleDoc:((u=F.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const T=mn(p,Dr("__name__"),yf(5)),I=await gi(T);o[m]={exists:!0,hasDateField:!1,count:I.size,sampleDoc:((d=I.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(p){o[m]={exists:!1,error:p instanceof Error?p.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},whe=(t,e,n,r)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=Tn.fromDate(s),o=Tn.fromDate(a),l=[],u=new Map,d=()=>{const p=Array.from(u.values());console.log(`📊 Total registros encontrados: ${p.length}`),p.length>0&&console.log("📅 Registros por día:",p.reduce((x,C)=>{let y;C.fechaHora instanceof Date?y=C.fechaHora:typeof C.fechaHora=="string"?y=new Date(C.fechaHora):y=new Date;const T=y.getDate();return x[T]=(x[T]||0)+1,x},{})),n(p)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(p=>{try{console.log(`🔍 Configurando suscripción para: ${p}`);const x=zt(Sr,p),C=mn(x,cs("fechaHora",">=",i),cs("fechaHora","<=",o),Dr("fechaHora","desc")),y=Un(C,T=>{console.log(`📋 ${p}: ${T.size} documentos encontrados con filtro`),T.size>0?(console.log(`✅ Registros encontrados en ${p}:`),Array.from(u.keys()).filter(F=>F.startsWith(`${p}_`)).forEach(F=>u.delete(F)),T.docs.forEach((F,M)=>{var O;if(M<5){const Q=F.data();let j;(O=Q.fechaHora)!=null&&O.toDate?j=Q.fechaHora.toDate():typeof Q.fechaHora=="string"?j=new Date(Q.fechaHora):j=new Date,console.log(`   ${M+1}. ${Q.emailEstudiante} - ${j.toLocaleString()} - ${Q.tipo}`),console.log(`      📅 Fecha original: ${Q.fechaHora} (tipo: ${typeof Q.fechaHora})`)}}),T.forEach(F=>{var E;const M=F.data();let O;(E=M.fechaHora)!=null&&E.toDate?O=M.fechaHora.toDate():typeof M.fechaHora=="string"?O=new Date(M.fechaHora):M.fechaHora instanceof Date?O=M.fechaHora:M.fechaHora?O=new Date(M.fechaHora):O=new Date;const Q={id:F.id,emailEstudiante:M.emailEstudiante||M.email||"",nombreEstudiante:M.nombreEstudiante||M.nombre||"",curso:M.curso||"",fechaHora:O,tipo:M.tipo,ubicacion:M.ubicacion||null,observaciones:M.observaciones||"",...M},j=`${p}_${F.id}`;u.set(j,Q)}),d()):console.log(`⚪ ${p}: vacía, manteniendo datos existentes`)},T=>{console.warn(`⚠️ Error con filtro en ${p}:`,T),console.log(`🔄 Intentando estrategia alternativa en ${p}...`);const I=mn(x,yf(200)),F=Un(I,O=>{if(console.log(`📋 ${p} (sin filtro): ${O.size} documentos`),O.size>0){const j=O.docs[0].data();console.log(`📄 Estructura en ${p}:`,Object.keys(j)),console.log("📄 Primer documento:",j)}const Q=O.docs.filter(j=>{var k;const E=j.data();if(!E.fechaHora)return!1;let S;return(k=E.fechaHora)!=null&&k.toDate?S=E.fechaHora.toDate():typeof E.fechaHora=="string"?S=new Date(E.fechaHora):E.fechaHora instanceof Date?S=E.fechaHora:S=new Date(E.fechaHora),S>=s&&S<=a});console.log(`📅 ${p}: ${Q.length} registros después de filtro manual`),Q.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${p}_`)).forEach(E=>u.delete(E)),Q.forEach(E=>{var R;const S=E.data();let k;(R=S.fechaHora)!=null&&R.toDate?k=S.fechaHora.toDate():typeof S.fechaHora=="string"?k=new Date(S.fechaHora):S.fechaHora instanceof Date?k=S.fechaHora:k=new Date(S.fechaHora);const z={id:E.id,emailEstudiante:S.emailEstudiante||S.email||"",nombreEstudiante:S.nombreEstudiante||S.nombre||"",curso:S.curso||"",fechaHora:k,tipo:S.tipo,ubicacion:S.ubicacion||null,observaciones:S.observaciones||"",...S},P=`${p}_${E.id}`;u.set(P,z)}),d())}),M=l.findIndex(O=>O===y);M>=0?l[M]=F:l.push(F)});l.push(y)}catch(x){console.warn(`❌ Error configurando ${p}:`,x)}}),()=>{l.forEach(p=>{try{p()}catch(x){console.warn("Error unsubscribing:",x)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),r&&r(new Error(`Error al configurar suscripción: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},bhe=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const n=["usuarios","users"],r=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,m)=>(d[m.profile]=(d[m.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===tn.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return n.forEach(o=>{try{const l=zt(Sr,o),u=mn(l),d=Un(u,m=>{m.size>0?(console.log(`✅ Encontrados ${m.size} usuarios en colección: ${o}`),i=!0,Array.from(s.keys()).filter(x=>x.startsWith(`${o}_`)).forEach(x=>s.delete(x)),m.forEach(x=>{var C,y,T,I;try{const F=x.data(),M=F.email||F.userEmail||F.mail||F.correo||"",O=F.nombreCompleto||F.displayName||F.name||F.nombre||F.fullName||"",Q=F.curso||F.course||F.class||F.grade||"";let j=F.profile||F.role||F.tipo||F.userType||tn.ESTUDIANTE;if(typeof j=="string"){const k=j.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?j=tn.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?j=tn.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?j=tn.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(j=tn.COORDINADOR_TP)}const E={id:x.id,email:M,nombreCompleto:O,curso:Q,profile:j,activo:F.activo!==!1,fechaCreacion:((y=(C=F.fechaCreacion)==null?void 0:C.toDate)==null?void 0:y.call(C))||new Date(F.fechaCreacion)||new Date,ultimaActividad:((I=(T=F.ultimaActividad)==null?void 0:T.toDate)==null?void 0:I.call(T))||new Date(F.ultimaActividad)||new Date,...F},S=`${o}_${x.id}`;s.set(S,E)}catch(F){console.warn(`Error procesando documento ${x.id} en ${o}:`,F)}}),a()):console.log(`⚪ Colección ${o}: vacía`)},m=>{console.warn(`⚠️ Error en colección ${o}:`,m)});r.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{r.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(n){return console.error("Error setting up multi-collection users subscription:",n),e&&e(new Error(`Error al configurar suscripción multi-colección: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},_he=(t,e)=>{try{console.log("Setting up users subscription...");const n=zt(Sr,"users"),r=mn(n);return Un(r,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(d=>{var m,p,x,C;try{const y=d.data();console.log(`Processing user doc ${d.id}:`,y);const T=y.email||y.userEmail||y.mail||"",I=y.nombreCompleto||y.displayName||y.name||y.nombre||"",F=y.curso||y.course||y.class||"";let M=y.profile||y.role||y.tipo||tn.ESTUDIANTE;if(typeof M=="string"){const Q=M.toLowerCase();Q.includes("estudiante")||Q.includes("student")||Q.includes("alumno")?M=tn.ESTUDIANTE:Q.includes("coordinador")||Q.includes("coordinator")?M=tn.COORDINADOR_TP:Q.includes("profesor")||Q.includes("teacher")||Q.includes("docente")?M=tn.PROFESOR:(Q.includes("subdireccion")||Q.includes("subdir"))&&(M=tn.COORDINADOR_TP)}const O={id:d.id,email:T,nombreCompleto:I,curso:F,profile:M,activo:y.activo!==!1,fechaCreacion:((p=(m=y.fechaCreacion)==null?void 0:m.toDate)==null?void 0:p.call(m))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((C=(x=y.ultimaActividad)==null?void 0:x.toDate)==null?void 0:C.call(x))||new Date(y.ultimaActividad)||new Date,...y};i.push(O)}catch(y){console.warn(`Error processing user document ${d.id}:`,y)}}),i.sort((d,m)=>d.nombreCompleto.localeCompare(m.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,m)=>(d[m.profile]=(d[m.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===tn.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(n){return console.error("Error setting up subscribeToAllUsers:",n),e&&e(new Error(`Error al configurar suscripción de usuarios: ${n instanceof Error?n.message:"Error desconocido"}`)),()=>{}}},Y1=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Che=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),Ehe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),She=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,a]=se.useState(!0),[i,o]=se.useState(null),[l,u]=se.useState(new Date),[d,m]=se.useState("todos"),[p,x]=se.useState("");se.useEffect(()=>{a(!0),o(null);const j=l.getFullYear(),E=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",j,"Mes:",E);let S=!1,k=!1;const z=()=>{S&&k&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const R=zt(Sr,"asistencia_dual"),G=mn(R,yf(5)),q=await gi(G);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${q.size}`),q.size>0)q.docs.forEach((le,ee)=>{const oe=le.data();console.log(`   ${ee+1}. ${le.id.slice(0,8)} - ${oe.emailEstudiante} - ${oe.tipo}`),console.log("      Fecha original:",oe.fechaHora),console.log("      Todos los campos:",Object.keys(oe))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const le=["asistenciaEmpresa","asistencia_empresa"];for(const ee of le)try{const oe=zt(Sr,ee),K=mn(oe,yf(3)),ne=await gi(K);if(console.log(`📋 ${ee}: ${ne.size} documentos`),ne.size>0){const X=ne.docs[0].data();console.log("   Estructura:",Object.keys(X)),console.log("   Email:",X.emailEstudiante||X.email),console.log("   Fecha:",X.fechaHora||X.fecha)}}catch(oe){console.log(`❌ ${ee}: ${oe instanceof Error?oe.message:"Error"}`)}}}catch(R){console.error("❌ Error en prueba directa:",R),R.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):R.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),yhe(j,E).then(R=>{console.log("🔍 Debug info for collections:",R),Object.entries(R).forEach(([G,q])=>{if(q.exists&&q.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${G.toUpperCase()}:`),console.log(`   📊 Total documentos: ${q.totalDocs}`),console.log(`   📅 Documentos del período: ${q.count}`),console.log(`   🔑 Campo de fecha: ${q.hasDateField}`),q.sampleDoc){console.log("   📄 Documento ejemplo:",q.sampleDoc);const le=q.sampleDoc,ee=le.emailEstudiante||le.email||le.userEmail||le.correo||"NO ENCONTRADO",oe=le.tipo||le.type||le.action||le.tipoRegistro||"NO ENCONTRADO",K=le.fechaHora||le.fecha||le.timestamp||le.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${ee}`),console.log(`   📝 Tipo registro: ${oe}`),console.log(`   📅 Fecha: ${K}`),console.log("   🗂️ Todos los campos:",Object.keys(le))}q.filteredDocs&&q.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",q.filteredDocs.length),q.filteredDocs.forEach((le,ee)=>{ee<3&&console.log(`      ${ee+1}. ID: ${le.id}`,le.data)}))}else q.exists?console.log(`⚪ Colección ${G}: vacía`):console.log(`❌ Colección ${G}: no existe`)})}).catch(R=>{console.error("Debug error:",R)}),vhe().then(R=>{console.log("🔍 Debug info for users:",R),(!R.exists||R.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async q=>{var le;try{const ee=zt(Sr,q),oe=mn(ee,yf(5)),K=await gi(oe);K.size>0?(console.log(`✅ Encontrada colección alternativa: ${q} con ${K.size} documentos`),console.log("Documento muestra:",(le=K.docs[0])==null?void 0:le.data())):console.log(`❌ Colección ${q}: vacía`)}catch{console.log(`❌ Colección ${q}: no existe`)}}))}).catch(R=>{console.error("Users debug error:",R)});try{console.log("Configurando suscripción a asistencia...");const R=whe(j,E,q=>{if(console.log("✅ Received registros:",q.length),q.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",q[0]);const le=[...new Set(q.map(ce=>ce.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",le);const ee=[...new Set(q.map(ce=>ce.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",ee);const oe=q.reduce((ce,V)=>{const J=new Date(V.fechaHora).getDate();return ce[J]||(ce[J]=[]),ce[J].push(V),ce},{});console.log("📅 Registros por día del mes:",Object.keys(oe).map(ce=>({dia:parseInt(ce),cantidad:oe[parseInt(ce)].length})));const K=n.map(ce=>ce.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",K);const ne=le.filter(ce=>K.includes(ce)),X=le.filter(ce=>!K.includes(ce));console.log("✅ Emails que coinciden:",ne),console.log("❌ Emails que NO coinciden:",X)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(q),S=!0,z()},q=>{console.error("❌ Error fetching asistencia:",q),o("Error al cargar datos de asistencia: "+q.message),S=!0,z()});console.log("Configurando suscripción a usuarios...");const G=bhe(q=>{if(console.log("✅ Received users (multi-collection):",q.length),q.length>0){console.log("Sample user:",q[0]);const le=q.filter(ee=>ee.profile===tn.ESTUDIANTE&&ee.curso);console.log("Dual students found:",le.length),le.forEach(ee=>{console.log(`- ${ee.nombreCompleto} (${ee.curso}) - ${ee.email}`)})}r(q),k=!0,z()},q=>{console.error("❌ Error fetching users (multi-collection):",q),console.log("🔄 Intentando con función original de usuarios...");const le=_he(ee=>{console.log("✅ Received users (fallback):",ee.length),r(ee),k=!0,z()},ee=>{console.error("❌ Error en fallback también:",ee),o("Error al cargar estudiantes: "+q.message),k=!0,z()})});return()=>{console.log("Limpiando suscripciones..."),R&&R(),G&&G()}}catch(R){console.error("❌ Error setting up subscriptions:",R),o("Error al inicializar conexiones: "+(R instanceof Error?R.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:C,monthName:y,year:T}=se.useMemo(()=>{const j=l.getFullYear(),E=l.getMonth();return{monthDays:new Date(j,E+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:j}},[l]),I=se.useMemo(()=>{let j=n.filter(E=>E.profile===tn.ESTUDIANTE&&E.curso&&Nh.includes(Y1(E.curso)));if(d!=="todos"&&(j=j.filter(E=>Y1(E.curso||"")===d)),p&&(j=j.filter(E=>E.nombreCompleto.toLowerCase().includes(p.toLowerCase()))),t.length>0){const E=[...new Set(t.map(z=>z.emailEstudiante).filter(Boolean))],S=j.map(z=>z.email),k=E.filter(z=>!S.includes(z));if(k.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",k);const P=k.map(R=>{const G=t.find(q=>q.emailEstudiante===R);return{id:R,email:R,nombreCompleto:(G==null?void 0:G.nombreEstudiante)||R.split("@")[0],curso:(G==null?void 0:G.curso)||"3ºC",profile:tn.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(R=>{const G=d==="todos"||Y1(R.curso)===d,q=!p||R.nombreCompleto.toLowerCase().includes(p.toLowerCase());return G&&q&&Nh.includes(Y1(R.curso))});j=[...j,...P]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${j.length}`),j.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),j.sort((E,S)=>E.nombreCompleto.localeCompare(S.nombreCompleto))},[n,d,p,t]),F=se.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${I.length}`);const j=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),j):(t.forEach((E,S)=>{const k=E.emailEstudiante;if(!k)return;let z;if(E.fechaHora instanceof Date)z=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)z=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")z=new Date(E.fechaHora);else{console.warn("Fecha no válida en registro:",E);return}const P=z.getDate(),R=z.getMonth(),G=z.getFullYear();S<3&&console.log(`📅 Registro ${S+1}:`,{email:k,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:z.toLocaleString(),año:G,mes:R,día:P}),j.has(k)||j.set(k,new Map);const q=j.get(k);q.has(P)||q.set(P,{});const le=q.get(P);E.tipo==="Entrada"?(!le.entrada||z<new Date(le.entrada.fechaHora))&&(le.entrada=E):E.tipo==="Salida"&&(!le.salida||z>new Date(le.salida.fechaHora))&&(le.salida=E)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:j.size,estudiantes:Array.from(j.keys()),registrosPorEstudiante:Array.from(j.entries()).map(([E,S])=>({email:E,dias:Array.from(S.keys()),totalRegistros:Array.from(S.values()).reduce((k,z)=>k+(z.entrada?1:0)+(z.salida?1:0),0)}))}),j)},[t]),M=j=>{u(E=>{const S=new Date(E);return S.setMonth(S.getMonth()+j),S})},O=j=>{j!=null&&j.latitud&&(j!=null&&j.longitud)&&window.open(`https://www.google.com/maps?q=${j.latitud},${j.longitud}`,"_blank")},Q=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>M(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${T}`}),c.jsx("button",{onClick:()=>M(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:j=>m(j.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),Nh.map(j=>c.jsx("option",{value:j,children:j},j))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:p,onChange:j=>x(j.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:C},(j,E)=>{const k=new Date(T,l.getMonth(),E+1).getDay(),z=k===0||k===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${z?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:Q[k]}),c.jsx("div",{children:E+1})]},E)})]})}),c.jsx("tbody",{children:I.length>0?I.map(j=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:j.nombreCompleto}),Array.from({length:C},(E,S)=>{var G;const k=S+1,z=(G=F.get(j.email))==null?void 0:G.get(k),P=new Date(T,l.getMonth(),S+1),R=P.getDay()===0||P.getDay()===6;return j.email==="alexis.robles@industrialderecoleta.cl"&&k===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:j.email,day:k,hasDataForStudent:F.has(j.email),studentDayRecords:z,allAttendanceKeys:Array.from(F.keys()),daysForStudent:F.get(j.email)?Array.from(F.get(j.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(z==null?void 0:z.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q;return O((q=z.entrada)==null?void 0:q.ubicacion)},children:[c.jsx(Che,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(z.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(z==null?void 0:z.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var q;return O((q=z.salida)==null?void 0:q.ubicacion)},children:[c.jsx(Ehe,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(z.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},k)})]},j.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:C+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},ub="evaluaciones_formativas",Ab="calificaciones_formativas",R4="trabajos_grupales_formativos",The="usuarios",P4=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},Nhe=(t,e,n)=>{const r=mn(zt(Ut,ub),cs("curso","==",t),cs("asignatura","==",e),Dr("fecha","asc"));return Un(r,s=>{n(s.docs.map(a=>P4(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),n([])})},Bhe=async(t,e)=>{const n=D5(Ut),r=Mn(zt(Ut,ub));n.set(r,{...t,fecha:Tn.fromDate(new Date(t.fecha+"T00:00:00"))});const s=Mn(Ut,Ab,r.id);return n.set(s,e),await n.commit(),r.id},khe=async(t,e)=>{const n=Mn(Ut,ub,t);await wo(n,e,{merge:!0})},Ihe=async t=>{const e=D5(Ut);e.delete(Mn(Ut,ub,t)),e.delete(Mn(Ut,Ab,t)),await e.commit()},Fhe=(t,e)=>{if(t.length===0)return e({}),()=>{};const n=t.map(r=>{const s=Mn(Ut,Ab,r);return Un(s,a=>{a.exists()&&e({[r]:a.data()})})});return()=>n.forEach(r=>r())},Dhe=async(t,e)=>{const n=Mn(Ut,Ab,t);await wo(n,e,{merge:!0})},Lhe=(t,e,n)=>{const r=mn(zt(Ut,R4),cs("curso","==",t),cs("asignatura","==",e),Dr("fechaPresentacion","desc"));return Un(r,s=>{n(s.docs.map(a=>P4(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),n([])})},Rhe=async t=>{const e={...t,fechaPresentacion:Tn.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await na(zt(Ut,R4),e)},Phe=async(t,e)=>{const n=Mn(Ut,R4,t);await wo(n,e,{merge:!0})},Mhe=t=>{const e=mn(zt(Ut,The));return Un(e,n=>{t(n.docs.map(r=>P4(r)))},n=>{console.error("Error al suscribirse a usuarios:",n),t([])})},Gj=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Kw={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},qj=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},Uhe=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(n=>{const r=qj(n);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(n),className:`relative w-full h-48 rounded-md shadow-lg ${r.bg} ${r.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${r.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${r.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:n.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:n.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]},n)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),Ohe=({curso:t,asignaturas:e,onSelect:n,onBack:r})=>{const s=qj(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>c.jsxs("button",{onClick:()=>n(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:Kw[a]||Kw.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},jhe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=se.useState([]),[i,o]=se.useState({}),[l,u]=se.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,m]=se.useState(null),[p,x]=se.useState(null),[C,y]=se.useState(!0),T=se.useMemo(()=>n.filter(S=>S.profile===tn.ESTUDIANTE&&Gj(S.curso||"")===t).map(S=>S.nombreCompleto).sort((S,k)=>S.localeCompare(k)),[n,t]);se.useEffect(()=>{y(!0);const S=Nhe(t,e,k=>{a(k);const z=k.map(R=>R.id),P=Fhe(z,R=>{o(G=>({...G,...R}))});return y(!1),()=>P()});return()=>S()},[t,e]);const I=S=>{const{name:k,value:z}=S.target;d?m(P=>P?{...P,[k]:z}:null):u(P=>({...P,[k]:z}))},F=async S=>{if(S.preventDefault(),x(null),!l.nombreActividad.trim()){x("El nombre de la actividad es obligatorio.");return}const k={asignatura:e,curso:t,...l},z=T.reduce((P,R)=>(P[R]="trabajado",P),{});try{await Bhe(k,z),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),x("No se pudo crear la evaluación.")}},M=(S,k)=>{var G;const P=(((G=i[S])==null?void 0:G[k])||"trabajado")==="trabajado"?"no trabajado":"trabajado",R={...i,[S]:{...i[S]||{},[k]:P}};o(R),Dhe(S,{[k]:P}).catch(q=>{console.error("Error updating grade:",q)})},O=S=>m(S),Q=async()=>{if(d)try{await khe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),m(null)}catch(S){console.error(S),x("No se pudo guardar la edición.")}},j=async S=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await Ihe(S)}catch(k){console.error(k),x("No se pudo eliminar la evaluación.")}},E=se.useCallback(S=>{if(s.length===0)return"-";let k=0,z=0;return s.forEach(P=>{var G;const R=(G=i[P.id])==null?void 0:G[S];R==="trabajado"?(k+=7,z++):R==="no trabajado"&&(k+=2,z++)}),z===0?"-":(k/z).toFixed(1)},[i,s]);return C?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:I,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),p&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:p})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(S=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===S.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:I,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:Q,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:S.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:S.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>O(S),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>j(S.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},S.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:T.map(S=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:S}),s.map(k=>{var R;const P=((R=i[k.id])==null?void 0:R[S])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>M(k.id,S),className:`text-3xl transition-opacity duration-200 ${P?"opacity-100":"opacity-20"}`,children:Kw[e]||Kw.Default})},k.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(S)})]},S))})]})})]})},Qhe=({curso:t,asignatura:e,allUsers:n,onBack:r})=>{const[s,a]=se.useState([]),[i,o]=se.useState(null),[l,u]=se.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,m]=se.useState({}),[p,x]=se.useState(2),C=se.useMemo(()=>n.filter(O=>O.profile===tn.ESTUDIANTE&&Gj(O.curso||"")===t).sort((O,Q)=>O.nombreCompleto.localeCompare(Q.nombreCompleto)),[n,t]);se.useEffect(()=>{const O=Lhe(t,e,a);return()=>O()},[t,e]),se.useEffect(()=>{if(i){const O={};i.grupos.forEach(Q=>{Q.integrantes.forEach(j=>{O[j.nombre]={groupNumber:String(Q.numero),role:j.rol||""}})}),m(O)}else m({})},[i]);const y=async O=>{if(O.preventDefault(),!l.nombre.trim())return;const Q={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await Rhe(Q),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(j){console.error(j),alert("No se pudo crear la actividad grupal.")}},T=async()=>{if(!i)return;const O=new Map;for(const j of C){const E=d[j.nombreCompleto];if(E&&E.groupNumber){const S=parseInt(E.groupNumber,10);isNaN(S)||(O.has(S)||O.set(S,[]),O.get(S).push({nombre:j.nombreCompleto,rol:E.role||""}))}}const Q=Array.from(O.entries()).map(([j,E])=>({numero:j,integrantes:E})).sort((j,E)=>j.numero-E.numero);try{await Phe(i.id,{grupos:Q}),alert("Grupos guardados con éxito.")}catch(j){console.error(j),alert("No se pudieron guardar los grupos.")}},I=()=>{if(p<2){alert("Debe haber al menos 2 grupos.");return}const O=[...C].sort(()=>Math.random()-.5),Q={};O.forEach((j,E)=>{var S;Q[j.nombreCompleto]={groupNumber:String(E%p+1),role:((S=d[j.nombreCompleto])==null?void 0:S.role)||""}}),m(Q)},F=(O,Q,j)=>{m(E=>({...E,[O]:{...E[O]||{groupNumber:"",role:""},[Q]:j}}))},M=se.useMemo(()=>{const O=new Map;return Object.entries(d).forEach(([Q,j])=>{j.groupNumber&&(O.has(j.groupNumber)||O.set(j.groupNumber,[]),O.get(j.groupNumber).push({nombre:Q,rol:j.role}))}),Array.from(O.entries()).sort((Q,j)=>parseInt(Q[0])-parseInt(j[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:T,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:p,onChange:O=>x(parseInt(O.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:I,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:C.map(O=>{var Q;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:O.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((Q=d[O.nombreCompleto])==null?void 0:Q.groupNumber)||"",onChange:j=>F(O.nombreCompleto,"groupNumber",j.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},O.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:M.map(([O,Q])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",O]}),c.jsx("ul",{className:"space-y-2",children:Q.map(j=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:j.nombre}),c.jsxs("select",{value:j.rol||"",onChange:E=>F(j.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),DU.map(E=>c.jsx("option",{value:E,children:E},E))]})]},j.nombre))})]},O))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:O=>u({...l,nombre:O.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:O=>u({...l,fecha:O.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(O=>c.jsxs("button",{onClick:()=>o(O),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:O.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",O.fechaPresentacion]})]},O.id))]})]})},Hhe=({currentUser:t})=>{const[e,n]=se.useState("calificaciones"),[r,s]=se.useState(null),[a,i]=se.useState(null),[o,l]=se.useState([]),[u,d]=se.useState(!0);se.useEffect(()=>{d(!0);const y=Mhe(T=>{l(T),d(!1)});return()=>y()},[]);const m=se.useMemo(()=>t.cursos||[],[t.cursos]),p=se.useMemo(()=>t.asignaturas||[],[t.asignaturas]),x=({tab:y,label:T})=>c.jsx("button",{onClick:()=>n(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:T}),C=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!r)return c.jsx(Uhe,{cursos:m,onSelect:s});if(!a)return c.jsx(Ohe,{curso:r,asignaturas:p,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return c.jsx(jhe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(Qhe,{curso:r,asignatura:a,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(x,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(x,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:C()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vhe,zhe;function Ghe(){return{geminiUrl:Vhe,vertexUrl:zhe}}function qhe(t,e,n,r){var s,a;if(!(t!=null&&t.baseUrl)){const i=Ghe();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(a=i.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l0{}function wn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function b(t,e,n){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];b(d,e.slice(a+1),n[u])}else for(const u of l)b(u,e.slice(a+1),n)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];b(l[0],e.slice(a+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function v(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>v(i,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FS(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ID;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ID||(ID={}));var FD;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(FD||(FD={}));var Af;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Af||(Af={}));var DD;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(DD||(DD={}));var LD;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(LD||(LD={}));var RD;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(RD||(RD={}));var PD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(PD||(PD={}));var MD;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(MD||(MD={}));var UD;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(UD||(UD={}));var OD;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(OD||(OD={}));var jD;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(jD||(jD={}));var QD;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(QD||(QD={}));var HD;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HD||(HD={}));var VD;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(VD||(VD={}));var zD;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(zD||(zD={}));var GD;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(GD||(GD={}));var $w;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})($w||($w={}));var qD;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qD||(qD={}));var DS;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(DS||(DS={}));var KD;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(KD||(KD={}));var $D;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})($D||($D={}));var WD;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(WD||(WD={}));var YD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(YD||(YD={}));var XD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(XD||(XD={}));var JD;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(JD||(JD={}));var ZD;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ZD||(ZD={}));var eL;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(eL||(eL={}));var tL;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tL||(tL={}));var nL;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nL||(nL={}));var rL;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rL||(rL={}));var sL;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sL||(sL={}));var aL;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(aL||(aL={}));var iL;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(iL||(iL={}));var oL;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(oL||(oL={}));var lL;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(lL||(lL={}));var cL;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cL||(cL={}));var uL;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uL||(uL={}));var AL;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(AL||(AL={}));var dL;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dL||(dL={}));var fL;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fL||(fL={}));var hL;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hL||(hL={}));var fm;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fm||(fm={}));class LS{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ig{get text(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const m=[];for(const p of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[x,C]of Object.entries(p))x!=="text"&&x!=="thought"&&(C!==null||C!==void 0)&&m.push(x);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,u+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const m of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[p,x]of Object.entries(m))p!=="inlineData"&&(x!==null||x!==void 0)&&d.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,a,i,o,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,a,i,o,l,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class mL{}class pL{}class Khe{}class $he{}class gL{}class xL{}class vL{}class Whe{}class yL{}class wL{}class bL{}class _L{}class Yhe{}class Xhe{}class Jhe{}class CL{}class Zhe{get text(){var e,n,r;let s="",a=!1;const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Ww{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Ww;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const s=e.response;if(s){const a=new yL,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?FS(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,r.response=a}}else{const s=e.response;if(s){const a=new yL,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?FS(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,r.response=a}}return r}}class e0e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Es(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Kj(t,e){const n=Es(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function $j(t){return Array.isArray(t)?t.map(e=>Yw(e)):[Yw(t)]}function Yw(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Wj(t){const e=Yw(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yj(t){const e=Yw(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EL(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Xj(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>EL(e)):[EL(t)]}function RS(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function SL(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TL(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wo(t){if(t==null)throw new Error("ContentUnion is required");return RS(t)?t:{role:"user",parts:Xj(t)}}function Jj(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Wo(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Wo(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Wo(n)):[Wo(e)]}function au(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(SL(t)||TL(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wo(t)]}const e=[],n=[],r=RS(t[0]);for(const s of t){const a=RS(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(SL(s)||TL(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:Xj(n)}),e}function t0e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Af).includes(n[0].toUpperCase())?n[0].toUpperCase():Af.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Af).includes(r.toUpperCase())?r.toUpperCase():Af.TYPE_UNSPECIFIED})}}function Bm(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&t0e(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(Af).includes(o.toUpperCase())?o.toUpperCase():Af.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=Bm(o);else if(r.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(Bm(u))}e[i]=l}else if(s.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=Bm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function M4(t){return Bm(t)}function U4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function O4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function fp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Bm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Bm(e.response));return t}function hp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function n0e(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function xd(t,e){if(typeof e!="string")throw new Error("name must be a string");return n0e(t,e,"cachedContents")}function Zj(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function c0(t){return FS(t)}function r0e(t){return t!=null&&typeof t=="object"&&"name"in t}function s0e(t){return t!=null&&typeof t=="object"&&"video"in t}function a0e(t){return t!=null&&typeof t=="object"&&"uri"in t}function e7(t){var e;let n;if(r0e(t)&&(n=t.name),!(a0e(t)&&(n=t.uri,n===void 0))&&!(s0e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function t7(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function n7(t){for(const e of["models","tunedModels","publisherModels"])if(i0e(t,e))return t[e];return[]}function i0e(t,e){return t!==null&&typeof t=="object"&&e in t}function o0e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function l0e(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const i=o0e(s,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function r7(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function c0e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mp(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function s7(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u0e(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function A0e(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function d0e(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function f0e(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],u0e(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],A0e(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],d0e(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function a7(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>f0e(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function h0e(t){const e={},n=v(t,["anyOf"]);n!=null&&b(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&b(e,["default"],r);const s=v(t,["description"]);s!=null&&b(e,["description"],s);const a=v(t,["enum"]);a!=null&&b(e,["enum"],a);const i=v(t,["example"]);i!=null&&b(e,["example"],i);const o=v(t,["format"]);o!=null&&b(e,["format"],o);const l=v(t,["items"]);l!=null&&b(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&b(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&b(e,["maxLength"],d);const m=v(t,["maxProperties"]);m!=null&&b(e,["maxProperties"],m);const p=v(t,["maximum"]);p!=null&&b(e,["maximum"],p);const x=v(t,["minItems"]);x!=null&&b(e,["minItems"],x);const C=v(t,["minLength"]);C!=null&&b(e,["minLength"],C);const y=v(t,["minProperties"]);y!=null&&b(e,["minProperties"],y);const T=v(t,["minimum"]);T!=null&&b(e,["minimum"],T);const I=v(t,["nullable"]);I!=null&&b(e,["nullable"],I);const F=v(t,["pattern"]);F!=null&&b(e,["pattern"],F);const M=v(t,["properties"]);M!=null&&b(e,["properties"],M);const O=v(t,["propertyOrdering"]);O!=null&&b(e,["propertyOrdering"],O);const Q=v(t,["required"]);Q!=null&&b(e,["required"],Q);const j=v(t,["title"]);j!=null&&b(e,["title"],j);const E=v(t,["type"]);return E!=null&&b(e,["type"],E),e}function m0e(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&b(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&b(e,["threshold"],r),e}function p0e(t){const e={},n=v(t,["behavior"]);n!=null&&b(e,["behavior"],n);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["name"]);s!=null&&b(e,["name"],s);const a=v(t,["parameters"]);a!=null&&b(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&b(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&b(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function g0e(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function x0e(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],g0e(n)),e}function v0e(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function y0e(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],v0e(n)),e}function w0e(){return{}}function b0e(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>p0e(u))),b(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&b(e,["googleSearch"],x0e(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&b(e,["googleSearchRetrieval"],y0e(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&b(e,["urlContext"],w0e());const i=v(t,["codeExecution"]);i!=null&&b(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&b(e,["computerUse"],o),e}function _0e(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&b(e,["allowedFunctionNames"],r),e}function C0e(t){const e={},n=v(t,["latitude"]);n!=null&&b(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&b(e,["longitude"],r),e}function E0e(t){const e={},n=v(t,["latLng"]);n!=null&&b(e,["latLng"],C0e(n));const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function S0e(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],_0e(n));const r=v(t,["retrievalConfig"]);return r!=null&&b(e,["retrievalConfig"],E0e(r)),e}function T0e(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function i7(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],T0e(n)),e}function N0e(t){const e={},n=v(t,["speaker"]);n!=null&&b(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&b(e,["voiceConfig"],i7(r)),e}function B0e(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>N0e(s))),b(e,["speakerVoiceConfigs"],r)}return e}function k0e(t){const e={},n=v(t,["voiceConfig"]);n!=null&&b(e,["voiceConfig"],i7(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&b(e,["multiSpeakerVoiceConfig"],B0e(r));const s=v(t,["languageCode"]);return s!=null&&b(e,["languageCode"],s),e}function I0e(t){const e={},n=v(t,["includeThoughts"]);n!=null&&b(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&b(e,["thinkingBudget"],r),e}function F0e(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],a7(Wo(s)));const a=v(e,["temperature"]);a!=null&&b(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&b(r,["topP"],i);const o=v(e,["topK"]);o!=null&&b(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&b(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&b(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&b(r,["stopSequences"],d);const m=v(e,["responseLogprobs"]);m!=null&&b(r,["responseLogprobs"],m);const p=v(e,["logprobs"]);p!=null&&b(r,["logprobs"],p);const x=v(e,["presencePenalty"]);x!=null&&b(r,["presencePenalty"],x);const C=v(e,["frequencyPenalty"]);C!=null&&b(r,["frequencyPenalty"],C);const y=v(e,["seed"]);y!=null&&b(r,["seed"],y);const T=v(e,["responseMimeType"]);T!=null&&b(r,["responseMimeType"],T);const I=v(e,["responseSchema"]);I!=null&&b(r,["responseSchema"],h0e(M4(I)));const F=v(e,["responseJsonSchema"]);if(F!=null&&b(r,["responseJsonSchema"],F),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=v(e,["safetySettings"]);if(n!==void 0&&M!=null){let P=M;Array.isArray(P)&&(P=P.map(R=>m0e(R))),b(n,["safetySettings"],P)}const O=v(e,["tools"]);if(n!==void 0&&O!=null){let P=hp(O);Array.isArray(P)&&(P=P.map(R=>b0e(fp(R)))),b(n,["tools"],P)}const Q=v(e,["toolConfig"]);if(n!==void 0&&Q!=null&&b(n,["toolConfig"],S0e(Q)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=v(e,["cachedContent"]);n!==void 0&&j!=null&&b(n,["cachedContent"],xd(t,j));const E=v(e,["responseModalities"]);E!=null&&b(r,["responseModalities"],E);const S=v(e,["mediaResolution"]);S!=null&&b(r,["mediaResolution"],S);const k=v(e,["speechConfig"]);if(k!=null&&b(r,["speechConfig"],k0e(U4(k))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=v(e,["thinkingConfig"]);return z!=null&&b(r,["thinkingConfig"],I0e(z)),r}function D0e(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["request","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>a7(o))),b(n,["request","contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["request","generationConfig"],F0e(t,a,n)),n}function L0e(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=v(e,["fileName"]);r!=null&&b(n,["fileName"],r);const s=v(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>D0e(t,i))),b(n,["requests","requests"],a)}return n}function R0e(t,e){const n={},r=v(t,["displayName"]);if(e!==void 0&&r!=null&&b(e,["batch","displayName"],r),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function P0e(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["src"]);s!=null&&b(n,["batch","inputConfig"],L0e(t,r7(t,s)));const a=v(e,["config"]);return a!=null&&b(n,["config"],R0e(a,n)),n}function M0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function U0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function O0e(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);if(e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function j0e(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],O0e(n,e)),e}function Q0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function H0e(t){const e={},n=v(t,["format"]);n!=null&&b(e,["instancesFormat"],n);const r=v(t,["gcsUri"]);r!=null&&b(e,["gcsSource","uris"],r);const s=v(t,["bigqueryUri"]);if(s!=null&&b(e,["bigquerySource","inputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function V0e(t){const e={},n=v(t,["format"]);n!=null&&b(e,["predictionsFormat"],n);const r=v(t,["gcsUri"]);r!=null&&b(e,["gcsDestination","outputUriPrefix"],r);const s=v(t,["bigqueryUri"]);if(s!=null&&b(e,["bigqueryDestination","outputUri"],s),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function z0e(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&b(e,["displayName"],r);const s=v(t,["dest"]);return e!==void 0&&s!=null&&b(e,["outputConfig"],V0e(c0e(s))),n}function G0e(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["model"],Es(t,r));const s=v(e,["src"]);s!=null&&b(n,["inputConfig"],H0e(r7(t,s)));const a=v(e,["config"]);return a!=null&&b(n,["config"],z0e(a,n)),n}function q0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function K0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function $0e(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),n}function W0e(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],$0e(n,e)),e}function Y0e(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],mp(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function X0e(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function J0e(t){const e={},n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Z0e(t){const e={},n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function eme(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],X0e(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],J0e(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Z0e(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function tme(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>eme(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function nme(t){const e={},n=v(t,["citationSources"]);return n!=null&&b(e,["citations"],n),e}function rme(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&b(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&b(e,["urlRetrievalStatus"],r),e}function sme(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>rme(s))),b(e,["urlMetadata"],r)}return e}function ame(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],tme(n));const r=v(t,["citationMetadata"]);r!=null&&b(e,["citationMetadata"],nme(r));const s=v(t,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&b(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&b(e,["urlContextMetadata"],sme(i));const o=v(t,["avgLogprobs"]);o!=null&&b(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&b(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const m=v(t,["safetyRatings"]);return m!=null&&b(e,["safetyRatings"],m),e}function ime(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>ame(l))),b(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&b(e,["usageMetadata"],i),e}function o7(t){const e={},n=v(t,["details"]);n!=null&&b(e,["details"],n);const r=v(t,["code"]);r!=null&&b(e,["code"],r);const s=v(t,["message"]);return s!=null&&b(e,["message"],s),e}function ome(t){const e={},n=v(t,["response"]);n!=null&&b(e,["response"],ime(n));const r=v(t,["error"]);return r!=null&&b(e,["error"],o7(r)),e}function lme(t){const e={},n=v(t,["responsesFile"]);n!=null&&b(e,["fileName"],n);const r=v(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ome(a))),b(e,["inlinedResponses"],s)}return e}function PS(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["metadata","displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["metadata","state"]);s!=null&&b(e,["state"],s7(s));const a=v(t,["metadata","createTime"]);a!=null&&b(e,["createTime"],a);const i=v(t,["metadata","endTime"]);i!=null&&b(e,["endTime"],i);const o=v(t,["metadata","updateTime"]);o!=null&&b(e,["updateTime"],o);const l=v(t,["metadata","model"]);l!=null&&b(e,["model"],l);const u=v(t,["metadata","output"]);return u!=null&&b(e,["dest"],lme(u)),e}function cme(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>PS(i))),b(e,["batchJobs"],a)}return e}function ume(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],o7(s)),e}function l7(t){const e={},n=v(t,["details"]);n!=null&&b(e,["details"],n);const r=v(t,["code"]);r!=null&&b(e,["code"],r);const s=v(t,["message"]);return s!=null&&b(e,["message"],s),e}function Ame(t){const e={},n=v(t,["instancesFormat"]);n!=null&&b(e,["format"],n);const r=v(t,["gcsSource","uris"]);r!=null&&b(e,["gcsUri"],r);const s=v(t,["bigquerySource","inputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function dme(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&b(e,["format"],n);const r=v(t,["gcsDestination","outputUriPrefix"]);r!=null&&b(e,["gcsUri"],r);const s=v(t,["bigqueryDestination","outputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function MS(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["state"]);s!=null&&b(e,["state"],s7(s));const a=v(t,["error"]);a!=null&&b(e,["error"],l7(a));const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const o=v(t,["startTime"]);o!=null&&b(e,["startTime"],o);const l=v(t,["endTime"]);l!=null&&b(e,["endTime"],l);const u=v(t,["updateTime"]);u!=null&&b(e,["updateTime"],u);const d=v(t,["model"]);d!=null&&b(e,["model"],d);const m=v(t,["inputConfig"]);m!=null&&b(e,["src"],Ame(m));const p=v(t,["outputConfig"]);return p!=null&&b(e,["dest"],dme(p)),e}function fme(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>MS(i))),b(e,["batchJobs"],a)}return e}function hme(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],l7(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $h;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($h||($h={}));class _v{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mme extends l0{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new _v($h.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=G0e(this.apiClient,e);return o=wn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>MS(d))}else{const u=P0e(this.apiClient,e);return o=wn("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>PS(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=q0e(this.apiClient,e);return o=wn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>MS(d))}else{const u=M0e(this.apiClient,e);return o=wn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>PS(d))}}async cancel(e){var n,r,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=K0e(this.apiClient,e);i=wn("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=U0e(this.apiClient,e);i=wn("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=W0e(e);return o=wn("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=fme(d),p=new CL;return Object.assign(p,m),p})}else{const u=j0e(e);return o=wn("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=cme(d),p=new CL;return Object.assign(p,m),p})}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Y0e(this.apiClient,e);return o=wn("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>hme(d))}else{const u=Q0e(this.apiClient,e);return o=wn("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>ume(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pme(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function gme(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function xme(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function vme(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],pme(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],gme(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],xme(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function NL(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>vme(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function yme(t){const e={},n=v(t,["behavior"]);n!=null&&b(e,["behavior"],n);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["name"]);s!=null&&b(e,["name"],s);const a=v(t,["parameters"]);a!=null&&b(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&b(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&b(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function wme(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function bme(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],wme(n)),e}function _me(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function Cme(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],_me(n)),e}function Eme(){return{}}function Sme(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>yme(u))),b(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&b(e,["googleSearch"],bme(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&b(e,["googleSearchRetrieval"],Cme(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&b(e,["urlContext"],Eme());const i=v(t,["codeExecution"]);i!=null&&b(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&b(e,["computerUse"],o),e}function Tme(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&b(e,["allowedFunctionNames"],r),e}function Nme(t){const e={},n=v(t,["latitude"]);n!=null&&b(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&b(e,["longitude"],r),e}function Bme(t){const e={},n=v(t,["latLng"]);n!=null&&b(e,["latLng"],Nme(n));const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function kme(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],Tme(n));const r=v(t,["retrievalConfig"]);return r!=null&&b(e,["retrievalConfig"],Bme(r)),e}function Ime(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&b(e,["ttl"],r);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&b(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let d=au(i);Array.isArray(d)&&(d=d.map(m=>NL(m))),b(e,["contents"],d)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&b(e,["systemInstruction"],NL(Wo(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>Sme(m))),b(e,["tools"],d)}const u=v(t,["toolConfig"]);if(e!==void 0&&u!=null&&b(e,["toolConfig"],kme(u)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Fme(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["model"],Kj(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],Ime(s,n)),n}function Dme(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function Lme(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function Rme(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&b(e,["ttl"],r);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),n}function Pme(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],Rme(s,n)),n}function Mme(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function Ume(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],Mme(n,e)),e}function Ome(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function jme(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["data"]);r!=null&&b(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function Qme(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function Hme(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],Ome(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],jme(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Qme(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function BL(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Hme(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function Vme(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["parameters"]);s!=null&&b(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&b(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&b(e,["responseJsonSchema"],o),e}function zme(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function Gme(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],zme(n)),e}function qme(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function Kme(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],qme(n)),e}function $me(){return{}}function Wme(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&b(e,["apiKeyString"],n),e}function Yme(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&b(e,["apiKeyConfig"],Wme(n));const r=v(t,["authType"]);r!=null&&b(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&b(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&b(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&b(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&b(e,["oidcConfig"],o),e}function Xme(t){const e={},n=v(t,["authConfig"]);return n!=null&&b(e,["authConfig"],Yme(n)),e}function Jme(){return{}}function Zme(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Vme(p))),b(e,["functionDeclarations"],m)}const r=v(t,["retrieval"]);r!=null&&b(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&b(e,["googleSearch"],Gme(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&b(e,["googleSearchRetrieval"],Kme(a)),v(t,["enterpriseWebSearch"])!=null&&b(e,["enterpriseWebSearch"],$me());const o=v(t,["googleMaps"]);o!=null&&b(e,["googleMaps"],Xme(o)),v(t,["urlContext"])!=null&&b(e,["urlContext"],Jme());const u=v(t,["codeExecution"]);u!=null&&b(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&b(e,["computerUse"],d),e}function epe(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&b(e,["allowedFunctionNames"],r),e}function tpe(t){const e={},n=v(t,["latitude"]);n!=null&&b(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&b(e,["longitude"],r),e}function npe(t){const e={},n=v(t,["latLng"]);n!=null&&b(e,["latLng"],tpe(n));const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function rpe(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],epe(n));const r=v(t,["retrievalConfig"]);return r!=null&&b(e,["retrievalConfig"],npe(r)),e}function spe(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&b(e,["ttl"],r);const s=v(t,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const a=v(t,["displayName"]);e!==void 0&&a!=null&&b(e,["displayName"],a);const i=v(t,["contents"]);if(e!==void 0&&i!=null){let m=au(i);Array.isArray(m)&&(m=m.map(p=>BL(p))),b(e,["contents"],m)}const o=v(t,["systemInstruction"]);e!==void 0&&o!=null&&b(e,["systemInstruction"],BL(Wo(o)));const l=v(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>Zme(p))),b(e,["tools"],m)}const u=v(t,["toolConfig"]);e!==void 0&&u!=null&&b(e,["toolConfig"],rpe(u));const d=v(t,["kmsKeyName"]);return e!==void 0&&d!=null&&b(e,["encryption_spec","kmsKeyName"],d),n}function ape(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["model"],Kj(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],spe(s,n)),n}function ipe(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function ope(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function lpe(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&b(e,["ttl"],r);const s=v(t,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),n}function cpe(t,e){const n={},r=v(e,["name"]);r!=null&&b(n,["_url","name"],xd(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],lpe(s,n)),n}function upe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function Ape(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],upe(n,e)),e}function $y(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["model"]);s!=null&&b(e,["model"],s);const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&b(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&b(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function dpe(){return{}}function fpe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>$y(i))),b(e,["cachedContents"],a)}return e}function Wy(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["model"]);s!=null&&b(e,["model"],s);const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const i=v(t,["updateTime"]);i!=null&&b(e,["updateTime"],i);const o=v(t,["expireTime"]);o!=null&&b(e,["expireTime"],o);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function hpe(){return{}}function mpe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Wy(i))),b(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ppe extends l0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _v($h.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ape(this.apiClient,e);return o=wn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Wy(d))}else{const u=Fme(this.apiClient,e);return o=wn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>$y(d))}}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ipe(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Wy(d))}else{const u=Dme(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>$y(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ope(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=hpe(),m=new bL;return Object.assign(m,d),m})}else{const u=Lme(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=dpe(),m=new bL;return Object.assign(m,d),m})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=cpe(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Wy(d))}else{const u=Pme(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>$y(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Ape(e);return o=wn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=mpe(d),p=new _L;return Object.assign(p,m),p})}else{const u=Ume(e);return o=wn("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=fpe(d),p=new _L;return Object.assign(p,m),p})}}}function kL(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xs(t){return this instanceof Xs?(this.v=t,this):new Xs(t)}function km(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(x){return function(C){return Promise.resolve(C).then(x,m)}}function o(x,C){r[x]&&(s[x]=function(y){return new Promise(function(T,I){a.push([x,y,T,I])>1||l(x,y)})},C&&(s[x]=C(s[x])))}function l(x,C){try{u(r[x](C))}catch(y){p(a[0][3],y)}}function u(x){x.value instanceof Xs?Promise.resolve(x.value.v).then(d,m):p(a[0][2],x)}function d(x){l("next",x)}function m(x){l("throw",x)}function p(x,C){x(C),a.shift(),a.length&&l(a[0][0],a[0][1])}}function nx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof kL=="function"?kL(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gpe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:c7(n)}function c7(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function xpe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function IL(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!c7(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class vpe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ype(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ype{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),xpe(a)}async sendMessage(e){var n;await this.sendPromise;const r=Wo(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,u=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];d!=null&&(p=(o=d.slice(m))!==null&&o!==void 0?o:[]);const x=u?[u]:[];this.recordHistory(r,x,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=Wo(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?IL(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return km(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var m=!0,p=nx(e),x;x=yield Xs(p.next()),i=x.done,!i;m=!0){u=x.value,m=!1;const C=u;if(gpe(C)){const y=(s=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;y!==void 0&&d.push(y)}yield yield Xs(C)}}catch(C){o={error:C}}finally{try{!m&&!i&&(l=p.return)&&(yield Xs(l.call(p)))}finally{if(o)throw o.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...IL(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class db extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,db.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wpe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function bpe(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],wpe(n,e)),e}function _pe(t){const e={},n=v(t,["details"]);n!=null&&b(e,["details"],n);const r=v(t,["message"]);r!=null&&b(e,["message"],r);const s=v(t,["code"]);return s!=null&&b(e,["code"],s),e}function Cpe(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["mimeType"]);s!=null&&b(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&b(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&b(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&b(e,["updateTime"],l);const u=v(t,["sha256Hash"]);u!=null&&b(e,["sha256Hash"],u);const d=v(t,["uri"]);d!=null&&b(e,["uri"],d);const m=v(t,["downloadUri"]);m!=null&&b(e,["downloadUri"],m);const p=v(t,["state"]);p!=null&&b(e,["state"],p);const x=v(t,["source"]);x!=null&&b(e,["source"],x);const C=v(t,["videoMetadata"]);C!=null&&b(e,["videoMetadata"],C);const y=v(t,["error"]);return y!=null&&b(e,["error"],_pe(y)),e}function Epe(t){const e={},n=v(t,["file"]);n!=null&&b(e,["file"],Cpe(n));const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function Spe(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","file"],e7(n));const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function Tpe(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","file"],e7(n));const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function Npe(t){const e={},n=v(t,["details"]);n!=null&&b(e,["details"],n);const r=v(t,["message"]);r!=null&&b(e,["message"],r);const s=v(t,["code"]);return s!=null&&b(e,["code"],s),e}function US(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["mimeType"]);s!=null&&b(e,["mimeType"],s);const a=v(t,["sizeBytes"]);a!=null&&b(e,["sizeBytes"],a);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const o=v(t,["expirationTime"]);o!=null&&b(e,["expirationTime"],o);const l=v(t,["updateTime"]);l!=null&&b(e,["updateTime"],l);const u=v(t,["sha256Hash"]);u!=null&&b(e,["sha256Hash"],u);const d=v(t,["uri"]);d!=null&&b(e,["uri"],d);const m=v(t,["downloadUri"]);m!=null&&b(e,["downloadUri"],m);const p=v(t,["state"]);p!=null&&b(e,["state"],p);const x=v(t,["source"]);x!=null&&b(e,["source"],x);const C=v(t,["videoMetadata"]);C!=null&&b(e,["videoMetadata"],C);const y=v(t,["error"]);return y!=null&&b(e,["error"],Npe(y)),e}function Bpe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>US(i))),b(e,["files"],a)}return e}function kpe(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function Ipe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fpe extends l0{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _v($h.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>US(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=bpe(e);return a=wn("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Bpe(l),d=new Yhe;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Epe(e);return a=wn("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const u=kpe(l),d=new Xhe;return Object.assign(d,u),d})}}async get(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Spe(e);return a=wn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>US(l))}}async delete(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Tpe(e);return a=wn("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(()=>{const l=Ipe(),u=new Jhe;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dpe(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function u7(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],Dpe(n)),e}function Lpe(t){const e={},n=v(t,["speaker"]);n!=null&&b(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&b(e,["voiceConfig"],u7(r)),e}function Rpe(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Lpe(s))),b(e,["speakerVoiceConfigs"],r)}return e}function Ppe(t){const e={},n=v(t,["voiceConfig"]);n!=null&&b(e,["voiceConfig"],u7(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&b(e,["multiSpeakerVoiceConfig"],Rpe(r));const s=v(t,["languageCode"]);return s!=null&&b(e,["languageCode"],s),e}function Mpe(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function Upe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Ope(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function jpe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],Mpe(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],Upe(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Ope(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function Qpe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>jpe(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function Hpe(t){const e={},n=v(t,["behavior"]);n!=null&&b(e,["behavior"],n);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["name"]);s!=null&&b(e,["name"],s);const a=v(t,["parameters"]);a!=null&&b(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&b(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&b(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function Vpe(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function zpe(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],Vpe(n)),e}function Gpe(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function qpe(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],Gpe(n)),e}function Kpe(){return{}}function $pe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Hpe(u))),b(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&b(e,["googleSearch"],zpe(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&b(e,["googleSearchRetrieval"],qpe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&b(e,["urlContext"],Kpe());const i=v(t,["codeExecution"]);i!=null&&b(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&b(e,["computerUse"],o),e}function Wpe(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function FL(){return{}}function Ype(t){const e={},n=v(t,["disabled"]);n!=null&&b(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&b(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&b(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&b(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&b(e,["silenceDurationMs"],i),e}function Xpe(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&b(e,["automaticActivityDetection"],Ype(n));const r=v(t,["activityHandling"]);r!=null&&b(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&b(e,["turnCoverage"],s),e}function Jpe(t){const e={},n=v(t,["targetTokens"]);return n!=null&&b(e,["targetTokens"],n),e}function Zpe(t){const e={},n=v(t,["triggerTokens"]);n!=null&&b(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&b(e,["slidingWindow"],Jpe(r)),e}function ege(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&b(e,["proactiveAudio"],n),e}function tge(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","seed"],d);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","speechConfig"],Ppe(O4(m)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],p);const x=v(t,["systemInstruction"]);e!==void 0&&x!=null&&b(e,["setup","systemInstruction"],Qpe(Wo(x)));const C=v(t,["tools"]);if(e!==void 0&&C!=null){let Q=hp(C);Array.isArray(Q)&&(Q=Q.map(j=>$pe(fp(j)))),b(e,["setup","tools"],Q)}const y=v(t,["sessionResumption"]);e!==void 0&&y!=null&&b(e,["setup","sessionResumption"],Wpe(y));const T=v(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&b(e,["setup","inputAudioTranscription"],FL());const I=v(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&b(e,["setup","outputAudioTranscription"],FL());const F=v(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&b(e,["setup","realtimeInputConfig"],Xpe(F));const M=v(t,["contextWindowCompression"]);e!==void 0&&M!=null&&b(e,["setup","contextWindowCompression"],Zpe(M));const O=v(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],ege(O)),n}function nge(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["setup","model"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],tge(s,n)),n}function rge(){return{}}function sge(){return{}}function age(t){const e={},n=v(t,["media"]);n!=null&&b(e,["mediaChunks"],$j(n));const r=v(t,["audio"]);r!=null&&b(e,["audio"],Yj(r));const s=v(t,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&b(e,["video"],Wj(a));const i=v(t,["text"]);return i!=null&&b(e,["text"],i),v(t,["activityStart"])!=null&&b(e,["activityStart"],rge()),v(t,["activityEnd"])!=null&&b(e,["activityEnd"],sge()),e}function A7(t){const e={},n=v(t,["text"]);n!=null&&b(e,["text"],n);const r=v(t,["weight"]);return r!=null&&b(e,["weight"],r),e}function ige(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>A7(s))),b(e,["weightedPrompts"],r)}return e}function d7(t){const e={},n=v(t,["temperature"]);n!=null&&b(e,["temperature"],n);const r=v(t,["topK"]);r!=null&&b(e,["topK"],r);const s=v(t,["seed"]);s!=null&&b(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&b(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&b(e,["bpm"],i);const o=v(t,["density"]);o!=null&&b(e,["density"],o);const l=v(t,["brightness"]);l!=null&&b(e,["brightness"],l);const u=v(t,["scale"]);u!=null&&b(e,["scale"],u);const d=v(t,["muteBass"]);d!=null&&b(e,["muteBass"],d);const m=v(t,["muteDrums"]);m!=null&&b(e,["muteDrums"],m);const p=v(t,["onlyBassAndDrums"]);return p!=null&&b(e,["onlyBassAndDrums"],p),e}function oge(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&b(e,["musicGenerationConfig"],d7(n)),e}function f7(t){const e={},n=v(t,["model"]);return n!=null&&b(e,["model"],n),e}function h7(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>A7(s))),b(e,["weightedPrompts"],r)}return e}function OS(t){const e={},n=v(t,["setup"]);n!=null&&b(e,["setup"],f7(n));const r=v(t,["clientContent"]);r!=null&&b(e,["clientContent"],h7(r));const s=v(t,["musicGenerationConfig"]);s!=null&&b(e,["musicGenerationConfig"],d7(s));const a=v(t,["playbackControl"]);return a!=null&&b(e,["playbackControl"],a),e}function lge(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function cge(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],lge(n)),e}function uge(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&b(e,["voiceConfig"],cge(n)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function Age(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function dge(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["data"]);r!=null&&b(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function fge(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function hge(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],Age(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],dge(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],fge(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function mge(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>hge(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function pge(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["parameters"]);s!=null&&b(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&b(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&b(e,["responseJsonSchema"],o),e}function gge(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function xge(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],gge(n)),e}function vge(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function yge(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],vge(n)),e}function wge(){return{}}function bge(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&b(e,["apiKeyString"],n),e}function _ge(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&b(e,["apiKeyConfig"],bge(n));const r=v(t,["authType"]);r!=null&&b(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&b(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&b(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&b(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&b(e,["oidcConfig"],o),e}function Cge(t){const e={},n=v(t,["authConfig"]);return n!=null&&b(e,["authConfig"],_ge(n)),e}function Ege(){return{}}function Sge(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>pge(p))),b(e,["functionDeclarations"],m)}const r=v(t,["retrieval"]);r!=null&&b(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&b(e,["googleSearch"],xge(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&b(e,["googleSearchRetrieval"],yge(a)),v(t,["enterpriseWebSearch"])!=null&&b(e,["enterpriseWebSearch"],wge());const o=v(t,["googleMaps"]);o!=null&&b(e,["googleMaps"],Cge(o)),v(t,["urlContext"])!=null&&b(e,["urlContext"],Ege());const u=v(t,["codeExecution"]);u!=null&&b(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&b(e,["computerUse"],d),e}function Tge(t){const e={},n=v(t,["handle"]);n!=null&&b(e,["handle"],n);const r=v(t,["transparent"]);return r!=null&&b(e,["transparent"],r),e}function DL(){return{}}function Nge(t){const e={},n=v(t,["disabled"]);n!=null&&b(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&b(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&b(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&b(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&b(e,["silenceDurationMs"],i),e}function Bge(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&b(e,["automaticActivityDetection"],Nge(n));const r=v(t,["activityHandling"]);r!=null&&b(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&b(e,["turnCoverage"],s),e}function kge(t){const e={},n=v(t,["targetTokens"]);return n!=null&&b(e,["targetTokens"],n),e}function Ige(t){const e={},n=v(t,["triggerTokens"]);n!=null&&b(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&b(e,["slidingWindow"],kge(r)),e}function Fge(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&b(e,["proactiveAudio"],n),e}function Dge(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","seed"],d);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","speechConfig"],uge(O4(m)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],p);const x=v(t,["systemInstruction"]);e!==void 0&&x!=null&&b(e,["setup","systemInstruction"],mge(Wo(x)));const C=v(t,["tools"]);if(e!==void 0&&C!=null){let Q=hp(C);Array.isArray(Q)&&(Q=Q.map(j=>Sge(fp(j)))),b(e,["setup","tools"],Q)}const y=v(t,["sessionResumption"]);e!==void 0&&y!=null&&b(e,["setup","sessionResumption"],Tge(y));const T=v(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&b(e,["setup","inputAudioTranscription"],DL());const I=v(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&b(e,["setup","outputAudioTranscription"],DL());const F=v(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&b(e,["setup","realtimeInputConfig"],Bge(F));const M=v(t,["contextWindowCompression"]);e!==void 0&&M!=null&&b(e,["setup","contextWindowCompression"],Ige(M));const O=v(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],Fge(O)),n}function Lge(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["setup","model"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],Dge(s,n)),n}function Rge(){return{}}function Pge(){return{}}function Mge(t){const e={},n=v(t,["media"]);n!=null&&b(e,["mediaChunks"],$j(n));const r=v(t,["audio"]);r!=null&&b(e,["audio"],Yj(r));const s=v(t,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const a=v(t,["video"]);a!=null&&b(e,["video"],Wj(a));const i=v(t,["text"]);return i!=null&&b(e,["text"],i),v(t,["activityStart"])!=null&&b(e,["activityStart"],Rge()),v(t,["activityEnd"])!=null&&b(e,["activityEnd"],Pge()),e}function Uge(){return{}}function Oge(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function jge(t){const e={},n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Qge(t){const e={},n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Hge(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],Oge(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],jge(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Qge(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function Vge(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Hge(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function LL(t){const e={},n=v(t,["text"]);n!=null&&b(e,["text"],n);const r=v(t,["finished"]);return r!=null&&b(e,["finished"],r),e}function zge(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&b(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&b(e,["urlRetrievalStatus"],r),e}function Gge(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zge(s))),b(e,["urlMetadata"],r)}return e}function qge(t){const e={},n=v(t,["modelTurn"]);n!=null&&b(e,["modelTurn"],Vge(n));const r=v(t,["turnComplete"]);r!=null&&b(e,["turnComplete"],r);const s=v(t,["interrupted"]);s!=null&&b(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&b(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&b(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&b(e,["inputTranscription"],LL(o));const l=v(t,["outputTranscription"]);l!=null&&b(e,["outputTranscription"],LL(l));const u=v(t,["urlContextMetadata"]);return u!=null&&b(e,["urlContextMetadata"],Gge(u)),e}function Kge(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const r=v(t,["args"]);r!=null&&b(e,["args"],r);const s=v(t,["name"]);return s!=null&&b(e,["name"],s),e}function $ge(t){const e={},n=v(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Kge(s))),b(e,["functionCalls"],r)}return e}function Wge(t){const e={},n=v(t,["ids"]);return n!=null&&b(e,["ids"],n),e}function X1(t){const e={},n=v(t,["modality"]);n!=null&&b(e,["modality"],n);const r=v(t,["tokenCount"]);return r!=null&&b(e,["tokenCount"],r),e}function Yge(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&b(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&b(e,["cachedContentTokenCount"],r);const s=v(t,["responseTokenCount"]);s!=null&&b(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&b(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&b(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&b(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(x=>X1(x))),b(e,["promptTokensDetails"],p)}const u=v(t,["cacheTokensDetails"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(x=>X1(x))),b(e,["cacheTokensDetails"],p)}const d=v(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(x=>X1(x))),b(e,["responseTokensDetails"],p)}const m=v(t,["toolUsePromptTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(x=>X1(x))),b(e,["toolUsePromptTokensDetails"],p)}return e}function Xge(t){const e={},n=v(t,["timeLeft"]);return n!=null&&b(e,["timeLeft"],n),e}function Jge(t){const e={},n=v(t,["newHandle"]);n!=null&&b(e,["newHandle"],n);const r=v(t,["resumable"]);r!=null&&b(e,["resumable"],r);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&b(e,["lastConsumedClientMessageIndex"],s),e}function Zge(t){const e={};v(t,["setupComplete"])!=null&&b(e,["setupComplete"],Uge());const r=v(t,["serverContent"]);r!=null&&b(e,["serverContent"],qge(r));const s=v(t,["toolCall"]);s!=null&&b(e,["toolCall"],$ge(s));const a=v(t,["toolCallCancellation"]);a!=null&&b(e,["toolCallCancellation"],Wge(a));const i=v(t,["usageMetadata"]);i!=null&&b(e,["usageMetadata"],Yge(i));const o=v(t,["goAway"]);o!=null&&b(e,["goAway"],Xge(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&b(e,["sessionResumptionUpdate"],Jge(l)),e}function exe(){return{}}function txe(t){const e={},n=v(t,["text"]);n!=null&&b(e,["text"],n);const r=v(t,["weight"]);return r!=null&&b(e,["weight"],r),e}function nxe(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>txe(s))),b(e,["weightedPrompts"],r)}return e}function rxe(t){const e={},n=v(t,["temperature"]);n!=null&&b(e,["temperature"],n);const r=v(t,["topK"]);r!=null&&b(e,["topK"],r);const s=v(t,["seed"]);s!=null&&b(e,["seed"],s);const a=v(t,["guidance"]);a!=null&&b(e,["guidance"],a);const i=v(t,["bpm"]);i!=null&&b(e,["bpm"],i);const o=v(t,["density"]);o!=null&&b(e,["density"],o);const l=v(t,["brightness"]);l!=null&&b(e,["brightness"],l);const u=v(t,["scale"]);u!=null&&b(e,["scale"],u);const d=v(t,["muteBass"]);d!=null&&b(e,["muteBass"],d);const m=v(t,["muteDrums"]);m!=null&&b(e,["muteDrums"],m);const p=v(t,["onlyBassAndDrums"]);return p!=null&&b(e,["onlyBassAndDrums"],p),e}function sxe(t){const e={},n=v(t,["clientContent"]);n!=null&&b(e,["clientContent"],nxe(n));const r=v(t,["musicGenerationConfig"]);return r!=null&&b(e,["musicGenerationConfig"],rxe(r)),e}function axe(t){const e={},n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);r!=null&&b(e,["mimeType"],r);const s=v(t,["sourceMetadata"]);return s!=null&&b(e,["sourceMetadata"],sxe(s)),e}function ixe(t){const e={},n=v(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>axe(s))),b(e,["audioChunks"],r)}return e}function oxe(t){const e={},n=v(t,["text"]);n!=null&&b(e,["text"],n);const r=v(t,["filteredReason"]);return r!=null&&b(e,["filteredReason"],r),e}function lxe(t){const e={};v(t,["setupComplete"])!=null&&b(e,["setupComplete"],exe());const r=v(t,["serverContent"]);r!=null&&b(e,["serverContent"],ixe(r));const s=v(t,["filteredPrompt"]);return s!=null&&b(e,["filteredPrompt"],oxe(s)),e}function cxe(t){const e={},n=v(t,["sessionId"]);return n!=null&&b(e,["sessionId"],n),e}function uxe(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function Axe(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["data"]);r!=null&&b(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function dxe(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function fxe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],uxe(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],Axe(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],dxe(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function hxe(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fxe(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function RL(t){const e={},n=v(t,["text"]);n!=null&&b(e,["text"],n);const r=v(t,["finished"]);return r!=null&&b(e,["finished"],r),e}function mxe(t){const e={},n=v(t,["modelTurn"]);n!=null&&b(e,["modelTurn"],hxe(n));const r=v(t,["turnComplete"]);r!=null&&b(e,["turnComplete"],r);const s=v(t,["interrupted"]);s!=null&&b(e,["interrupted"],s);const a=v(t,["groundingMetadata"]);a!=null&&b(e,["groundingMetadata"],a);const i=v(t,["generationComplete"]);i!=null&&b(e,["generationComplete"],i);const o=v(t,["inputTranscription"]);o!=null&&b(e,["inputTranscription"],RL(o));const l=v(t,["outputTranscription"]);return l!=null&&b(e,["outputTranscription"],RL(l)),e}function pxe(t){const e={},n=v(t,["args"]);n!=null&&b(e,["args"],n);const r=v(t,["name"]);return r!=null&&b(e,["name"],r),e}function gxe(t){const e={},n=v(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>pxe(s))),b(e,["functionCalls"],r)}return e}function xxe(t){const e={},n=v(t,["ids"]);return n!=null&&b(e,["ids"],n),e}function J1(t){const e={},n=v(t,["modality"]);n!=null&&b(e,["modality"],n);const r=v(t,["tokenCount"]);return r!=null&&b(e,["tokenCount"],r),e}function vxe(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&b(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&b(e,["cachedContentTokenCount"],r);const s=v(t,["candidatesTokenCount"]);s!=null&&b(e,["responseTokenCount"],s);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&b(e,["toolUsePromptTokenCount"],a);const i=v(t,["thoughtsTokenCount"]);i!=null&&b(e,["thoughtsTokenCount"],i);const o=v(t,["totalTokenCount"]);o!=null&&b(e,["totalTokenCount"],o);const l=v(t,["promptTokensDetails"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(C=>J1(C))),b(e,["promptTokensDetails"],x)}const u=v(t,["cacheTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(C=>J1(C))),b(e,["cacheTokensDetails"],x)}const d=v(t,["candidatesTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(C=>J1(C))),b(e,["responseTokensDetails"],x)}const m=v(t,["toolUsePromptTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(C=>J1(C))),b(e,["toolUsePromptTokensDetails"],x)}const p=v(t,["trafficType"]);return p!=null&&b(e,["trafficType"],p),e}function yxe(t){const e={},n=v(t,["timeLeft"]);return n!=null&&b(e,["timeLeft"],n),e}function wxe(t){const e={},n=v(t,["newHandle"]);n!=null&&b(e,["newHandle"],n);const r=v(t,["resumable"]);r!=null&&b(e,["resumable"],r);const s=v(t,["lastConsumedClientMessageIndex"]);return s!=null&&b(e,["lastConsumedClientMessageIndex"],s),e}function bxe(t){const e={},n=v(t,["setupComplete"]);n!=null&&b(e,["setupComplete"],cxe(n));const r=v(t,["serverContent"]);r!=null&&b(e,["serverContent"],mxe(r));const s=v(t,["toolCall"]);s!=null&&b(e,["toolCall"],gxe(s));const a=v(t,["toolCallCancellation"]);a!=null&&b(e,["toolCallCancellation"],xxe(a));const i=v(t,["usageMetadata"]);i!=null&&b(e,["usageMetadata"],vxe(i));const o=v(t,["goAway"]);o!=null&&b(e,["goAway"],yxe(o));const l=v(t,["sessionResumptionUpdate"]);return l!=null&&b(e,["sessionResumptionUpdate"],wxe(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _xe(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function Cxe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Exe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Sxe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],_xe(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],Cxe(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Exe(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function fb(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Sxe(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function Txe(t){const e={},n=v(t,["anyOf"]);n!=null&&b(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&b(e,["default"],r);const s=v(t,["description"]);s!=null&&b(e,["description"],s);const a=v(t,["enum"]);a!=null&&b(e,["enum"],a);const i=v(t,["example"]);i!=null&&b(e,["example"],i);const o=v(t,["format"]);o!=null&&b(e,["format"],o);const l=v(t,["items"]);l!=null&&b(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&b(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&b(e,["maxLength"],d);const m=v(t,["maxProperties"]);m!=null&&b(e,["maxProperties"],m);const p=v(t,["maximum"]);p!=null&&b(e,["maximum"],p);const x=v(t,["minItems"]);x!=null&&b(e,["minItems"],x);const C=v(t,["minLength"]);C!=null&&b(e,["minLength"],C);const y=v(t,["minProperties"]);y!=null&&b(e,["minProperties"],y);const T=v(t,["minimum"]);T!=null&&b(e,["minimum"],T);const I=v(t,["nullable"]);I!=null&&b(e,["nullable"],I);const F=v(t,["pattern"]);F!=null&&b(e,["pattern"],F);const M=v(t,["properties"]);M!=null&&b(e,["properties"],M);const O=v(t,["propertyOrdering"]);O!=null&&b(e,["propertyOrdering"],O);const Q=v(t,["required"]);Q!=null&&b(e,["required"],Q);const j=v(t,["title"]);j!=null&&b(e,["title"],j);const E=v(t,["type"]);return E!=null&&b(e,["type"],E),e}function Nxe(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&b(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&b(e,["threshold"],r),e}function Bxe(t){const e={},n=v(t,["behavior"]);n!=null&&b(e,["behavior"],n);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["name"]);s!=null&&b(e,["name"],s);const a=v(t,["parameters"]);a!=null&&b(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&b(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&b(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function kxe(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function Ixe(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],kxe(n)),e}function Fxe(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function Dxe(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],Fxe(n)),e}function Lxe(){return{}}function Rxe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Bxe(u))),b(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&b(e,["googleSearch"],Ixe(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&b(e,["googleSearchRetrieval"],Dxe(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&b(e,["urlContext"],Lxe());const i=v(t,["codeExecution"]);i!=null&&b(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&b(e,["computerUse"],o),e}function Pxe(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&b(e,["allowedFunctionNames"],r),e}function Mxe(t){const e={},n=v(t,["latitude"]);n!=null&&b(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&b(e,["longitude"],r),e}function Uxe(t){const e={},n=v(t,["latLng"]);n!=null&&b(e,["latLng"],Mxe(n));const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function Oxe(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],Pxe(n));const r=v(t,["retrievalConfig"]);return r!=null&&b(e,["retrievalConfig"],Uxe(r)),e}function jxe(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function m7(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],jxe(n)),e}function Qxe(t){const e={},n=v(t,["speaker"]);n!=null&&b(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&b(e,["voiceConfig"],m7(r)),e}function Hxe(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Qxe(s))),b(e,["speakerVoiceConfigs"],r)}return e}function Vxe(t){const e={},n=v(t,["voiceConfig"]);n!=null&&b(e,["voiceConfig"],m7(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&b(e,["multiSpeakerVoiceConfig"],Hxe(r));const s=v(t,["languageCode"]);return s!=null&&b(e,["languageCode"],s),e}function zxe(t){const e={},n=v(t,["includeThoughts"]);n!=null&&b(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&b(e,["thinkingBudget"],r),e}function Gxe(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],fb(Wo(s)));const a=v(e,["temperature"]);a!=null&&b(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&b(r,["topP"],i);const o=v(e,["topK"]);o!=null&&b(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&b(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&b(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&b(r,["stopSequences"],d);const m=v(e,["responseLogprobs"]);m!=null&&b(r,["responseLogprobs"],m);const p=v(e,["logprobs"]);p!=null&&b(r,["logprobs"],p);const x=v(e,["presencePenalty"]);x!=null&&b(r,["presencePenalty"],x);const C=v(e,["frequencyPenalty"]);C!=null&&b(r,["frequencyPenalty"],C);const y=v(e,["seed"]);y!=null&&b(r,["seed"],y);const T=v(e,["responseMimeType"]);T!=null&&b(r,["responseMimeType"],T);const I=v(e,["responseSchema"]);I!=null&&b(r,["responseSchema"],Txe(M4(I)));const F=v(e,["responseJsonSchema"]);if(F!=null&&b(r,["responseJsonSchema"],F),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=v(e,["safetySettings"]);if(n!==void 0&&M!=null){let P=M;Array.isArray(P)&&(P=P.map(R=>Nxe(R))),b(n,["safetySettings"],P)}const O=v(e,["tools"]);if(n!==void 0&&O!=null){let P=hp(O);Array.isArray(P)&&(P=P.map(R=>Rxe(fp(R)))),b(n,["tools"],P)}const Q=v(e,["toolConfig"]);if(n!==void 0&&Q!=null&&b(n,["toolConfig"],Oxe(Q)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=v(e,["cachedContent"]);n!==void 0&&j!=null&&b(n,["cachedContent"],xd(t,j));const E=v(e,["responseModalities"]);E!=null&&b(r,["responseModalities"],E);const S=v(e,["mediaResolution"]);S!=null&&b(r,["mediaResolution"],S);const k=v(e,["speechConfig"]);if(k!=null&&b(r,["speechConfig"],Vxe(U4(k))),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=v(e,["thinkingConfig"]);return z!=null&&b(r,["thinkingConfig"],zxe(z)),r}function PL(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>fb(o))),b(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["generationConfig"],Gxe(t,a,n)),n}function qxe(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&b(e,["requests[]","taskType"],r);const s=v(t,["title"]);e!==void 0&&s!=null&&b(e,["requests[]","title"],s);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&b(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Kxe(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);s!=null&&b(n,["requests[]","content"],Jj(t,s));const a=v(e,["config"]);a!=null&&b(n,["config"],qxe(a,n));const i=v(e,["model"]);return i!==void 0&&b(n,["requests[]","model"],Es(t,i)),n}function $xe(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&b(e,["parameters","sampleCount"],r);const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=v(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&b(e,["parameters","safetySetting"],i);const o=v(t,["personGeneration"]);e!==void 0&&o!=null&&b(e,["parameters","personGeneration"],o);const l=v(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&b(e,["parameters","includeSafetyAttributes"],l);const u=v(t,["includeRaiReason"]);e!==void 0&&u!=null&&b(e,["parameters","includeRaiReason"],u);const d=v(t,["language"]);e!==void 0&&d!=null&&b(e,["parameters","language"],d);const m=v(t,["outputMimeType"]);e!==void 0&&m!=null&&b(e,["parameters","outputOptions","mimeType"],m);const p=v(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&b(e,["parameters","outputOptions","compressionQuality"],p),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Wxe(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&b(n,["config"],$xe(a,n)),n}function Yxe(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","name"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function Xxe(t,e,n){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&b(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&b(n,["_query","pageToken"],a);const i=v(e,["filter"]);n!==void 0&&i!=null&&b(n,["_query","filter"],i);const o=v(e,["queryBase"]);return n!==void 0&&o!=null&&b(n,["_url","models_url"],t7(t,o)),r}function Jxe(t,e){const n={},r=v(e,["config"]);return r!=null&&b(n,["config"],Xxe(t,r,n)),n}function Zxe(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&b(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&b(e,["defaultCheckpointId"],a),n}function eve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","name"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],Zxe(s,n)),n}function tve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","name"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function nve(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>fb(o))),b(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["config"],nve(a)),n}function sve(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],c0(n));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function ave(t,e){const n={},r=v(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&b(e,["parameters","sampleCount"],r),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=v(t,["durationSeconds"]);if(e!==void 0&&s!=null&&b(e,["parameters","durationSeconds"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);if(e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a),v(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=v(t,["personGeneration"]);if(e!==void 0&&i!=null&&b(e,["parameters","personGeneration"],i),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=v(t,["negativePrompt"]);e!==void 0&&o!=null&&b(e,["parameters","negativePrompt"],o);const l=v(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&b(e,["parameters","enhancePrompt"],l),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(v(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ive(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const a=v(e,["image"]);if(a!=null&&b(n,["instances[0]","image"],sve(a)),v(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=v(e,["config"]);return i!=null&&b(n,["config"],ave(i,n)),n}function ove(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function lve(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["data"]);r!=null&&b(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function cve(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function uve(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],ove(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],lve(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],cve(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function pp(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>uve(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function Ave(t){const e={},n=v(t,["anyOf"]);n!=null&&b(e,["anyOf"],n);const r=v(t,["default"]);r!=null&&b(e,["default"],r);const s=v(t,["description"]);s!=null&&b(e,["description"],s);const a=v(t,["enum"]);a!=null&&b(e,["enum"],a);const i=v(t,["example"]);i!=null&&b(e,["example"],i);const o=v(t,["format"]);o!=null&&b(e,["format"],o);const l=v(t,["items"]);l!=null&&b(e,["items"],l);const u=v(t,["maxItems"]);u!=null&&b(e,["maxItems"],u);const d=v(t,["maxLength"]);d!=null&&b(e,["maxLength"],d);const m=v(t,["maxProperties"]);m!=null&&b(e,["maxProperties"],m);const p=v(t,["maximum"]);p!=null&&b(e,["maximum"],p);const x=v(t,["minItems"]);x!=null&&b(e,["minItems"],x);const C=v(t,["minLength"]);C!=null&&b(e,["minLength"],C);const y=v(t,["minProperties"]);y!=null&&b(e,["minProperties"],y);const T=v(t,["minimum"]);T!=null&&b(e,["minimum"],T);const I=v(t,["nullable"]);I!=null&&b(e,["nullable"],I);const F=v(t,["pattern"]);F!=null&&b(e,["pattern"],F);const M=v(t,["properties"]);M!=null&&b(e,["properties"],M);const O=v(t,["propertyOrdering"]);O!=null&&b(e,["propertyOrdering"],O);const Q=v(t,["required"]);Q!=null&&b(e,["required"],Q);const j=v(t,["title"]);j!=null&&b(e,["title"],j);const E=v(t,["type"]);return E!=null&&b(e,["type"],E),e}function dve(t){const e={},n=v(t,["featureSelectionPreference"]);return n!=null&&b(e,["featureSelectionPreference"],n),e}function fve(t){const e={},n=v(t,["method"]);n!=null&&b(e,["method"],n);const r=v(t,["category"]);r!=null&&b(e,["category"],r);const s=v(t,["threshold"]);return s!=null&&b(e,["threshold"],s),e}function hve(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["parameters"]);s!=null&&b(e,["parameters"],s);const a=v(t,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const i=v(t,["response"]);i!=null&&b(e,["response"],i);const o=v(t,["responseJsonSchema"]);return o!=null&&b(e,["responseJsonSchema"],o),e}function mve(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function pve(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],mve(n)),e}function gve(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function xve(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],gve(n)),e}function vve(){return{}}function yve(t){const e={},n=v(t,["apiKeyString"]);return n!=null&&b(e,["apiKeyString"],n),e}function wve(t){const e={},n=v(t,["apiKeyConfig"]);n!=null&&b(e,["apiKeyConfig"],yve(n));const r=v(t,["authType"]);r!=null&&b(e,["authType"],r);const s=v(t,["googleServiceAccountConfig"]);s!=null&&b(e,["googleServiceAccountConfig"],s);const a=v(t,["httpBasicAuthConfig"]);a!=null&&b(e,["httpBasicAuthConfig"],a);const i=v(t,["oauthConfig"]);i!=null&&b(e,["oauthConfig"],i);const o=v(t,["oidcConfig"]);return o!=null&&b(e,["oidcConfig"],o),e}function bve(t){const e={},n=v(t,["authConfig"]);return n!=null&&b(e,["authConfig"],wve(n)),e}function _ve(){return{}}function p7(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>hve(p))),b(e,["functionDeclarations"],m)}const r=v(t,["retrieval"]);r!=null&&b(e,["retrieval"],r);const s=v(t,["googleSearch"]);s!=null&&b(e,["googleSearch"],pve(s));const a=v(t,["googleSearchRetrieval"]);a!=null&&b(e,["googleSearchRetrieval"],xve(a)),v(t,["enterpriseWebSearch"])!=null&&b(e,["enterpriseWebSearch"],vve());const o=v(t,["googleMaps"]);o!=null&&b(e,["googleMaps"],bve(o)),v(t,["urlContext"])!=null&&b(e,["urlContext"],_ve());const u=v(t,["codeExecution"]);u!=null&&b(e,["codeExecution"],u);const d=v(t,["computerUse"]);return d!=null&&b(e,["computerUse"],d),e}function Cve(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["allowedFunctionNames"]);return r!=null&&b(e,["allowedFunctionNames"],r),e}function Eve(t){const e={},n=v(t,["latitude"]);n!=null&&b(e,["latitude"],n);const r=v(t,["longitude"]);return r!=null&&b(e,["longitude"],r),e}function Sve(t){const e={},n=v(t,["latLng"]);n!=null&&b(e,["latLng"],Eve(n));const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function Tve(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],Cve(n));const r=v(t,["retrievalConfig"]);return r!=null&&b(e,["retrievalConfig"],Sve(r)),e}function Nve(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function Bve(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],Nve(n)),e}function kve(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&b(e,["voiceConfig"],Bve(n)),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&b(e,["languageCode"],r),e}function Ive(t){const e={},n=v(t,["includeThoughts"]);n!=null&&b(e,["includeThoughts"],n);const r=v(t,["thinkingBudget"]);return r!=null&&b(e,["thinkingBudget"],r),e}function Fve(t,e,n){const r={},s=v(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],pp(Wo(s)));const a=v(e,["temperature"]);a!=null&&b(r,["temperature"],a);const i=v(e,["topP"]);i!=null&&b(r,["topP"],i);const o=v(e,["topK"]);o!=null&&b(r,["topK"],o);const l=v(e,["candidateCount"]);l!=null&&b(r,["candidateCount"],l);const u=v(e,["maxOutputTokens"]);u!=null&&b(r,["maxOutputTokens"],u);const d=v(e,["stopSequences"]);d!=null&&b(r,["stopSequences"],d);const m=v(e,["responseLogprobs"]);m!=null&&b(r,["responseLogprobs"],m);const p=v(e,["logprobs"]);p!=null&&b(r,["logprobs"],p);const x=v(e,["presencePenalty"]);x!=null&&b(r,["presencePenalty"],x);const C=v(e,["frequencyPenalty"]);C!=null&&b(r,["frequencyPenalty"],C);const y=v(e,["seed"]);y!=null&&b(r,["seed"],y);const T=v(e,["responseMimeType"]);T!=null&&b(r,["responseMimeType"],T);const I=v(e,["responseSchema"]);I!=null&&b(r,["responseSchema"],Ave(M4(I)));const F=v(e,["responseJsonSchema"]);F!=null&&b(r,["responseJsonSchema"],F);const M=v(e,["routingConfig"]);M!=null&&b(r,["routingConfig"],M);const O=v(e,["modelSelectionConfig"]);O!=null&&b(r,["modelConfig"],dve(O));const Q=v(e,["safetySettings"]);if(n!==void 0&&Q!=null){let le=Q;Array.isArray(le)&&(le=le.map(ee=>fve(ee))),b(n,["safetySettings"],le)}const j=v(e,["tools"]);if(n!==void 0&&j!=null){let le=hp(j);Array.isArray(le)&&(le=le.map(ee=>p7(fp(ee)))),b(n,["tools"],le)}const E=v(e,["toolConfig"]);n!==void 0&&E!=null&&b(n,["toolConfig"],Tve(E));const S=v(e,["labels"]);n!==void 0&&S!=null&&b(n,["labels"],S);const k=v(e,["cachedContent"]);n!==void 0&&k!=null&&b(n,["cachedContent"],xd(t,k));const z=v(e,["responseModalities"]);z!=null&&b(r,["responseModalities"],z);const P=v(e,["mediaResolution"]);P!=null&&b(r,["mediaResolution"],P);const R=v(e,["speechConfig"]);R!=null&&b(r,["speechConfig"],kve(U4(R)));const G=v(e,["audioTimestamp"]);G!=null&&b(r,["audioTimestamp"],G);const q=v(e,["thinkingConfig"]);return q!=null&&b(r,["thinkingConfig"],Ive(q)),r}function ML(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>pp(o))),b(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["generationConfig"],Fve(t,a,n)),n}function Dve(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&b(e,["instances[]","task_type"],r);const s=v(t,["title"]);e!==void 0&&s!=null&&b(e,["instances[]","title"],s);const a=v(t,["outputDimensionality"]);e!==void 0&&a!=null&&b(e,["parameters","outputDimensionality"],a);const i=v(t,["mimeType"]);e!==void 0&&i!=null&&b(e,["instances[]","mimeType"],i);const o=v(t,["autoTruncate"]);return e!==void 0&&o!=null&&b(e,["parameters","autoTruncate"],o),n}function Lve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);s!=null&&b(n,["instances[]","content"],Jj(t,s));const a=v(e,["config"]);return a!=null&&b(n,["config"],Dve(a,n)),n}function Rve(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&b(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&b(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&b(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&b(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&b(e,["parameters","seed"],l);const u=v(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&b(e,["parameters","safetySetting"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&b(e,["parameters","personGeneration"],d);const m=v(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&b(e,["parameters","includeSafetyAttributes"],m);const p=v(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);const x=v(t,["language"]);e!==void 0&&x!=null&&b(e,["parameters","language"],x);const C=v(t,["outputMimeType"]);e!==void 0&&C!=null&&b(e,["parameters","outputOptions","mimeType"],C);const y=v(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&b(e,["parameters","outputOptions","compressionQuality"],y);const T=v(t,["addWatermark"]);e!==void 0&&T!=null&&b(e,["parameters","addWatermark"],T);const I=v(t,["imageSize"]);e!==void 0&&I!=null&&b(e,["parameters","sampleImageSize"],I);const F=v(t,["enhancePrompt"]);return e!==void 0&&F!=null&&b(e,["parameters","enhancePrompt"],F),n}function Pve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const a=v(e,["config"]);return a!=null&&b(n,["config"],Rve(a,n)),n}function hb(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const r=v(t,["imageBytes"]);r!=null&&b(e,["bytesBase64Encoded"],c0(r));const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function Mve(t){const e={},n=v(t,["maskMode"]);n!=null&&b(e,["maskMode"],n);const r=v(t,["segmentationClasses"]);r!=null&&b(e,["maskClasses"],r);const s=v(t,["maskDilation"]);return s!=null&&b(e,["dilation"],s),e}function Uve(t){const e={},n=v(t,["controlType"]);n!=null&&b(e,["controlType"],n);const r=v(t,["enableControlImageComputation"]);return r!=null&&b(e,["computeControl"],r),e}function Ove(t){const e={},n=v(t,["styleDescription"]);return n!=null&&b(e,["styleDescription"],n),e}function jve(t){const e={},n=v(t,["subjectType"]);n!=null&&b(e,["subjectType"],n);const r=v(t,["subjectDescription"]);return r!=null&&b(e,["subjectDescription"],r),e}function Qve(t){const e={},n=v(t,["referenceImage"]);n!=null&&b(e,["referenceImage"],hb(n));const r=v(t,["referenceId"]);r!=null&&b(e,["referenceId"],r);const s=v(t,["referenceType"]);s!=null&&b(e,["referenceType"],s);const a=v(t,["maskImageConfig"]);a!=null&&b(e,["maskImageConfig"],Mve(a));const i=v(t,["controlImageConfig"]);i!=null&&b(e,["controlImageConfig"],Uve(i));const o=v(t,["styleImageConfig"]);o!=null&&b(e,["styleImageConfig"],Ove(o));const l=v(t,["subjectImageConfig"]);return l!=null&&b(e,["subjectImageConfig"],jve(l)),e}function Hve(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&b(e,["parameters","storageUri"],r);const s=v(t,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&b(e,["parameters","sampleCount"],a);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&b(e,["parameters","aspectRatio"],i);const o=v(t,["guidanceScale"]);e!==void 0&&o!=null&&b(e,["parameters","guidanceScale"],o);const l=v(t,["seed"]);e!==void 0&&l!=null&&b(e,["parameters","seed"],l);const u=v(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&b(e,["parameters","safetySetting"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&b(e,["parameters","personGeneration"],d);const m=v(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&b(e,["parameters","includeSafetyAttributes"],m);const p=v(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);const x=v(t,["language"]);e!==void 0&&x!=null&&b(e,["parameters","language"],x);const C=v(t,["outputMimeType"]);e!==void 0&&C!=null&&b(e,["parameters","outputOptions","mimeType"],C);const y=v(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&b(e,["parameters","outputOptions","compressionQuality"],y);const T=v(t,["addWatermark"]);e!==void 0&&T!=null&&b(e,["parameters","addWatermark"],T);const I=v(t,["editMode"]);e!==void 0&&I!=null&&b(e,["parameters","editMode"],I);const F=v(t,["baseSteps"]);return e!==void 0&&F!=null&&b(e,["parameters","editConfig","baseSteps"],F),n}function Vve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const a=v(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Qve(l))),b(n,["instances[0]","referenceImages"],o)}const i=v(e,["config"]);return i!=null&&b(n,["config"],Hve(i,n)),n}function zve(t,e){const n={},r=v(t,["includeRaiReason"]);e!==void 0&&r!=null&&b(e,["parameters","includeRaiReason"],r);const s=v(t,["outputMimeType"]);e!==void 0&&s!=null&&b(e,["parameters","outputOptions","mimeType"],s);const a=v(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&b(e,["parameters","outputOptions","compressionQuality"],a);const i=v(t,["enhanceInputImage"]);e!==void 0&&i!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=v(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=v(t,["numberOfImages"]);e!==void 0&&l!=null&&b(e,["parameters","sampleCount"],l);const u=v(t,["mode"]);return e!==void 0&&u!=null&&b(e,["parameters","mode"],u),n}function Gve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["image"]);s!=null&&b(n,["instances[0]","image"],hb(s));const a=v(e,["upscaleFactor"]);a!=null&&b(n,["parameters","upscaleConfig","upscaleFactor"],a);const i=v(e,["config"]);return i!=null&&b(n,["config"],zve(i,n)),n}function qve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","name"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function Kve(t,e,n){const r={},s=v(e,["pageSize"]);n!==void 0&&s!=null&&b(n,["_query","pageSize"],s);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&b(n,["_query","pageToken"],a);const i=v(e,["filter"]);n!==void 0&&i!=null&&b(n,["_query","filter"],i);const o=v(e,["queryBase"]);return n!==void 0&&o!=null&&b(n,["_url","models_url"],t7(t,o)),r}function $ve(t,e){const n={},r=v(e,["config"]);return r!=null&&b(n,["config"],Kve(t,r,n)),n}function Wve(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&b(e,["displayName"],r);const s=v(t,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&b(e,["defaultCheckpointId"],a),n}function Yve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],Wve(s,n)),n}function Xve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","name"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],s),n}function Jve(t,e){const n={},r=v(t,["systemInstruction"]);e!==void 0&&r!=null&&b(e,["systemInstruction"],pp(Wo(r)));const s=v(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>p7(o))),b(e,["tools"],i)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&b(e,["generationConfig"],a),n}function Zve(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>pp(o))),b(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["config"],Jve(a,n)),n}function e1e(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["contents"]);if(s!=null){let i=au(s);Array.isArray(i)&&(i=i.map(o=>pp(o))),b(n,["contents"],i)}const a=v(e,["config"]);return a!=null&&b(n,["config"],a),n}function t1e(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["gcsUri"],n);const r=v(t,["videoBytes"]);r!=null&&b(e,["bytesBase64Encoded"],c0(r));const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function n1e(t,e){const n={},r=v(t,["numberOfVideos"]);e!==void 0&&r!=null&&b(e,["parameters","sampleCount"],r);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);const a=v(t,["fps"]);e!==void 0&&a!=null&&b(e,["parameters","fps"],a);const i=v(t,["durationSeconds"]);e!==void 0&&i!=null&&b(e,["parameters","durationSeconds"],i);const o=v(t,["seed"]);e!==void 0&&o!=null&&b(e,["parameters","seed"],o);const l=v(t,["aspectRatio"]);e!==void 0&&l!=null&&b(e,["parameters","aspectRatio"],l);const u=v(t,["resolution"]);e!==void 0&&u!=null&&b(e,["parameters","resolution"],u);const d=v(t,["personGeneration"]);e!==void 0&&d!=null&&b(e,["parameters","personGeneration"],d);const m=v(t,["pubsubTopic"]);e!==void 0&&m!=null&&b(e,["parameters","pubsubTopic"],m);const p=v(t,["negativePrompt"]);e!==void 0&&p!=null&&b(e,["parameters","negativePrompt"],p);const x=v(t,["enhancePrompt"]);e!==void 0&&x!=null&&b(e,["parameters","enhancePrompt"],x);const C=v(t,["generateAudio"]);e!==void 0&&C!=null&&b(e,["parameters","generateAudio"],C);const y=v(t,["lastFrame"]);e!==void 0&&y!=null&&b(e,["instances[0]","lastFrame"],hb(y));const T=v(t,["compressionQuality"]);return e!==void 0&&T!=null&&b(e,["parameters","compressionQuality"],T),n}function r1e(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["_url","model"],Es(t,r));const s=v(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const a=v(e,["image"]);a!=null&&b(n,["instances[0]","image"],hb(a));const i=v(e,["video"]);i!=null&&b(n,["instances[0]","video"],t1e(i));const o=v(e,["config"]);return o!=null&&b(n,["config"],n1e(o,n)),n}function s1e(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function a1e(t){const e={},n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function i1e(t){const e={},n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function o1e(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],s1e(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],a1e(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],i1e(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function l1e(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>o1e(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function c1e(t){const e={},n=v(t,["citationSources"]);return n!=null&&b(e,["citations"],n),e}function u1e(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&b(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&b(e,["urlRetrievalStatus"],r),e}function A1e(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>u1e(s))),b(e,["urlMetadata"],r)}return e}function d1e(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],l1e(n));const r=v(t,["citationMetadata"]);r!=null&&b(e,["citationMetadata"],c1e(r));const s=v(t,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const a=v(t,["finishReason"]);a!=null&&b(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&b(e,["urlContextMetadata"],A1e(i));const o=v(t,["avgLogprobs"]);o!=null&&b(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&b(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const m=v(t,["safetyRatings"]);return m!=null&&b(e,["safetyRatings"],m),e}function UL(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>d1e(l))),b(e,["candidates"],o)}const s=v(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const i=v(t,["usageMetadata"]);return i!=null&&b(e,["usageMetadata"],i),e}function f1e(t){const e={},n=v(t,["values"]);return n!=null&&b(e,["values"],n),e}function h1e(){return{}}function m1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>f1e(i))),b(e,["embeddings"],a)}return v(t,["metadata"])!=null&&b(e,["metadata"],h1e()),e}function p1e(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],c0(n));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function g7(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&b(e,["scores"],r);const s=v(t,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function g1e(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],p1e(n));const r=v(t,["raiFilteredReason"]);r!=null&&b(e,["raiFilteredReason"],r);const s=v(t,["_self"]);return s!=null&&b(e,["safetyAttributes"],g7(s)),e}function x1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>g1e(i))),b(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],g7(s)),e}function v1e(t){const e={},n=v(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&b(e,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function jS(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["description"]);s!=null&&b(e,["description"],s);const a=v(t,["version"]);a!=null&&b(e,["version"],a);const i=v(t,["_self"]);i!=null&&b(e,["tunedModelInfo"],v1e(i));const o=v(t,["inputTokenLimit"]);o!=null&&b(e,["inputTokenLimit"],o);const l=v(t,["outputTokenLimit"]);l!=null&&b(e,["outputTokenLimit"],l);const u=v(t,["supportedGenerationMethods"]);return u!=null&&b(e,["supportedActions"],u),e}function y1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=n7(s);Array.isArray(a)&&(a=a.map(i=>jS(i))),b(e,["models"],a)}return e}function w1e(){return{}}function b1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);r!=null&&b(e,["totalTokens"],r);const s=v(t,["cachedContentTokenCount"]);return s!=null&&b(e,["cachedContentTokenCount"],s),e}function _1e(t){const e={},n=v(t,["video","uri"]);n!=null&&b(e,["uri"],n);const r=v(t,["video","encodedVideo"]);r!=null&&b(e,["videoBytes"],c0(r));const s=v(t,["encoding"]);return s!=null&&b(e,["mimeType"],s),e}function C1e(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],_1e(n)),e}function E1e(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>C1e(i))),b(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&b(e,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function S1e(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["metadata"]);r!=null&&b(e,["metadata"],r);const s=v(t,["done"]);s!=null&&b(e,["done"],s);const a=v(t,["error"]);a!=null&&b(e,["error"],a);const i=v(t,["response","generateVideoResponse"]);return i!=null&&b(e,["response"],E1e(i)),e}function T1e(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function N1e(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["data"]);r!=null&&b(e,["data"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function B1e(t){const e={},n=v(t,["displayName"]);n!=null&&b(e,["displayName"],n);const r=v(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function k1e(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],T1e(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],N1e(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],B1e(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function I1e(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>k1e(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function F1e(t){const e={},n=v(t,["citations"]);return n!=null&&b(e,["citations"],n),e}function D1e(t){const e={},n=v(t,["retrievedUrl"]);n!=null&&b(e,["retrievedUrl"],n);const r=v(t,["urlRetrievalStatus"]);return r!=null&&b(e,["urlRetrievalStatus"],r),e}function L1e(t){const e={},n=v(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>D1e(s))),b(e,["urlMetadata"],r)}return e}function R1e(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],I1e(n));const r=v(t,["citationMetadata"]);r!=null&&b(e,["citationMetadata"],F1e(r));const s=v(t,["finishMessage"]);s!=null&&b(e,["finishMessage"],s);const a=v(t,["finishReason"]);a!=null&&b(e,["finishReason"],a);const i=v(t,["urlContextMetadata"]);i!=null&&b(e,["urlContextMetadata"],L1e(i));const o=v(t,["avgLogprobs"]);o!=null&&b(e,["avgLogprobs"],o);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const u=v(t,["index"]);u!=null&&b(e,["index"],u);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const m=v(t,["safetyRatings"]);return m!=null&&b(e,["safetyRatings"],m),e}function OL(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>R1e(d))),b(e,["candidates"],u)}const s=v(t,["createTime"]);s!=null&&b(e,["createTime"],s);const a=v(t,["responseId"]);a!=null&&b(e,["responseId"],a);const i=v(t,["modelVersion"]);i!=null&&b(e,["modelVersion"],i);const o=v(t,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function P1e(t){const e={},n=v(t,["truncated"]);n!=null&&b(e,["truncated"],n);const r=v(t,["token_count"]);return r!=null&&b(e,["tokenCount"],r),e}function M1e(t){const e={},n=v(t,["values"]);n!=null&&b(e,["values"],n);const r=v(t,["statistics"]);return r!=null&&b(e,["statistics"],P1e(r)),e}function U1e(t){const e={},n=v(t,["billableCharacterCount"]);return n!=null&&b(e,["billableCharacterCount"],n),e}function O1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>M1e(i))),b(e,["embeddings"],a)}const s=v(t,["metadata"]);return s!=null&&b(e,["metadata"],U1e(s)),e}function j1e(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&b(e,["imageBytes"],c0(r));const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function x7(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&b(e,["scores"],r);const s=v(t,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function j4(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],j1e(n));const r=v(t,["raiFilteredReason"]);r!=null&&b(e,["raiFilteredReason"],r);const s=v(t,["_self"]);s!=null&&b(e,["safetyAttributes"],x7(s));const a=v(t,["prompt"]);return a!=null&&b(e,["enhancedPrompt"],a),e}function Q1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>j4(i))),b(e,["generatedImages"],a)}const s=v(t,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],x7(s)),e}function H1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>j4(a))),b(e,["generatedImages"],s)}return e}function V1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>j4(a))),b(e,["generatedImages"],s)}return e}function z1e(t){const e={},n=v(t,["endpoint"]);n!=null&&b(e,["name"],n);const r=v(t,["deployedModelId"]);return r!=null&&b(e,["deployedModelId"],r),e}function G1e(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&b(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&b(e,["createTime"],r);const s=v(t,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function q1e(t){const e={},n=v(t,["checkpointId"]);n!=null&&b(e,["checkpointId"],n);const r=v(t,["epoch"]);r!=null&&b(e,["epoch"],r);const s=v(t,["step"]);return s!=null&&b(e,["step"],s),e}function QS(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["displayName"]);r!=null&&b(e,["displayName"],r);const s=v(t,["description"]);s!=null&&b(e,["description"],s);const a=v(t,["versionId"]);a!=null&&b(e,["version"],a);const i=v(t,["deployedModels"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(p=>z1e(p))),b(e,["endpoints"],m)}const o=v(t,["labels"]);o!=null&&b(e,["labels"],o);const l=v(t,["_self"]);l!=null&&b(e,["tunedModelInfo"],G1e(l));const u=v(t,["defaultCheckpointId"]);u!=null&&b(e,["defaultCheckpointId"],u);const d=v(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>q1e(p))),b(e,["checkpoints"],m)}return e}function K1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["_self"]);if(s!=null){let a=n7(s);Array.isArray(a)&&(a=a.map(i=>QS(i))),b(e,["models"],a)}return e}function $1e(){return{}}function W1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);return r!=null&&b(e,["totalTokens"],r),e}function Y1e(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["tokensInfo"]);return r!=null&&b(e,["tokensInfo"],r),e}function X1e(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&b(e,["videoBytes"],c0(r));const s=v(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function J1e(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],X1e(n)),e}function Z1e(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>J1e(i))),b(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&b(e,["raiMediaFilteredCount"],r);const s=v(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function eye(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const r=v(t,["metadata"]);r!=null&&b(e,["metadata"],r);const s=v(t,["done"]);s!=null&&b(e,["done"],s);const a=v(t,["error"]);a!=null&&b(e,["error"],a);const i=v(t,["response"]);return i!=null&&b(e,["response"],Z1e(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tye="Content-Type",nye="X-Server-Timeout",rye="User-Agent",HS="x-goog-api-client",sye="1.12.0",aye=`google-genai-sdk/${sye}`,iye="v1beta1",oye="v1beta",jL=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class lye{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:iye,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:oye,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const i=setTimeout(()=>s.abort(),n.timeout);i&&typeof i.unref=="function"&&i.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&cye(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await QL(s),new LS(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await QL(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return km(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield Xs(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const m=JSON.parse(u);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),x=p.status,C=p.code,y=`got status: ${x}. ${JSON.stringify(m)}`;if(C>=400&&C<600)throw new db({message:y,status:C})}}catch(m){if(m.name==="ApiError")throw m}i+=u;let d=i.match(jL);for(;d;){const m=d[1];try{const p=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Xs(new LS(p)),i=i.slice(d[0].length),d=i.match(jL)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=aye+" "+this.clientOptions.userAgentExtra;return e[rye]=n,e[HS]=n,e[tye]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(nye,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,n);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:wn("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(r=i==null?void 0:i.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function QL(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new db({message:s,status:n}):new Error(s)}}function cye(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uye="mcp_used/unknown";let Aye=!1;function v7(t){for(const e of t)if(dye(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Aye}function y7(t){var e;const n=(e=t[HS])!==null&&e!==void 0?e:"";t[HS]=(n+` ${uye}`).trimStart()}function dye(t){return t!==null&&typeof t=="object"&&t instanceof Q4}function fye(t,e=100){return km(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield Xs(t.listTools({cursor:r}));for(const i of a.tools)yield yield Xs(i),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class Q4{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Q4(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(n=void 0,nx(fye(d))),u;u=await l.next(),e=u.done,!e;o=!0){s=u.value,o=!1;const m=s;i.push(m);const p=m.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=d}}catch(m){n={error:m}}finally{try{!o&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),l0e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hye(t,e,n){const r=new e0e;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const a=lxe(s);Object.assign(r,a),e(r)}class mye{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=xye(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(M=>{u=M}),m=e.callbacks,p=function(){u({})},x=this.apiClient,C={onopen:p,onmessage:M=>{hye(x,m.onmessage,M)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(M){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(M){}},y=this.webSocketFactory.create(l,gye(i),C);y.connect(),await d;const T=Es(this.apiClient,e.model),I=f7({model:T}),F=OS({setup:I});return y.send(JSON.stringify(F)),new pye(y,this.apiClient)}}class pye{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ige(e),r=h7(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=oge(e),r=OS(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=OS({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fm.PLAY)}pause(){this.sendPlaybackControl(fm.PAUSE)}stop(){this.sendPlaybackControl(fm.STOP)}resetContext(){this.sendPlaybackControl(fm.RESET_CONTEXT)}close(){this.conn.close()}}function gye(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function xye(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vye="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yye(t,e,n){const r=new Zhe;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=bxe(a);Object.assign(r,i)}else{const i=Zge(a);Object.assign(r,i)}e(r)}class wye{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new mye(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&v7(e.config.tools)&&y7(m);const p=Eye(m);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const k=this.apiClient.getApiKey();let z="BidiGenerateContent",P="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),z="BidiGenerateContentConstrained",P="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${z}?${P}=${k}`}let x=()=>{};const C=new Promise(k=>{x=k}),y=e.callbacks,T=function(){var k;(k=y==null?void 0:y.onopen)===null||k===void 0||k.call(y),x({})},I=this.apiClient,F={onopen:T,onmessage:k=>{yye(I,y.onmessage,k)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(k){}},M=this.webSocketFactory.create(d,Cye(p),F);M.connect(),await C;let O=Es(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const k=this.apiClient.getProject(),z=this.apiClient.getLocation();O=`projects/${k}/locations/${z}/`+O}let Q={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$w.AUDIO]}:e.config.responseModalities=[$w.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],E=[];for(const k of j)if(this.isCallableTool(k)){const z=k;E.push(await z.tool())}else E.push(k);E.length>0&&(e.config.tools=E);const S={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Q=Lge(this.apiClient,S):Q=nge(this.apiClient,S),delete Q.config,M.send(JSON.stringify(Q)),new _ye(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const bye={turnComplete:!0};class _ye{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=au(n.turns),e.isVertexAI()?r=r.map(s=>pp(s)):r=r.map(s=>fb(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(vye)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},bye),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Mge(e)}:n={realtimeInput:age(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Cye(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Eye(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HL=10;function VL(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Im(i)){s=!0;break}if(!s)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Im(t){return"callTool"in t&&typeof t.callTool=="function"}function Sye(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Im(s)))!==null&&r!==void 0?r:!1}function Tye(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!Im(s)))!==null&&r!==void 0?r:!1}function zL(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nye extends l0{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Sye(n)||VL(n.config))return await this.generateContentInternal(l);if(Tye(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const m=au(l.contents),p=(a=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:HL;let x=0;for(;x<p&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const C=u.candidates[0].content,y=[];for(const T of(o=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(Im(T)){const F=await T.callTool(u.functionCalls);y.push(...F)}x++,d={role:"user",parts:y},l.contents=au(l.contents),l.contents.push(C),l.contents.push(d),zL(l.config)&&(m.push(C),m.push(d))}return zL(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),VL(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new _v($h.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>Im(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&v7(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),y7(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Im(i)){const o=i,l=await o.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:HL;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,m){var p,x;return km(this,arguments,function*(){for(var C,y,T,I;o<a;){i&&(o++,i=!1);const Q=yield Xs(u.processParamsMaybeAddMcpUsage(m)),j=yield Xs(u.generateContentStreamInternal(Q)),E=[],S=[];try{for(var F=!0,M=(y=void 0,nx(j)),O;O=yield Xs(M.next()),C=O.done,!C;F=!0){I=O.value,F=!1;const k=I;if(yield yield Xs(k),k.candidates&&(!((p=k.candidates[0])===null||p===void 0)&&p.content)){S.push(k.candidates[0].content);for(const z of(x=k.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(o<a&&z.functionCall){if(!z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(z.functionCall.name)){const P=yield Xs(d.get(z.functionCall.name).callTool([z.functionCall]));E.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${z.functionCall.name}`)}}}}catch(k){y={error:k}}finally{try{!F&&!C&&(T=M.return)&&(yield Xs(T.call(M)))}finally{if(y)throw y.error}}if(E.length>0){i=!0;const k=new ig;k.candidates=[{content:{role:"user",parts:E}}],yield yield Xs(k);const z=[];z.push(...S),z.push({role:"user",parts:E});const P=au(m.contents).concat(z);m.contents=P}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ML(this.apiClient,e);return o=wn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=OL(d),p=new ig;return Object.assign(p,m),p})}else{const u=PL(this.apiClient,e);return o=wn("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=UL(d),p=new ig;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ML(this.apiClient,e);return o=wn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(m){return km(this,arguments,function*(){var p,x,C,y;try{for(var T=!0,I=nx(m),F;F=yield Xs(I.next()),p=F.done,!p;T=!0){y=F.value,T=!1;const M=y,O=OL(yield Xs(M.json()));O.sdkHttpResponse={headers:M.headers};const Q=new ig;Object.assign(Q,O),yield yield Xs(Q)}}catch(M){x={error:M}}finally{try{!T&&!p&&(C=I.return)&&(yield Xs(C.call(I)))}finally{if(x)throw x.error}}})})}else{const u=PL(this.apiClient,e);return o=wn("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(m){return km(this,arguments,function*(){var p,x,C,y;try{for(var T=!0,I=nx(m),F;F=yield Xs(I.next()),p=F.done,!p;T=!0){y=F.value,T=!1;const M=y,O=UL(yield Xs(M.json()));O.sdkHttpResponse={headers:M.headers};const Q=new ig;Object.assign(Q,O),yield yield Xs(Q)}}catch(M){x={error:M}}finally{try{!T&&!p&&(C=I.return)&&(yield Xs(C.call(I)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Lve(this.apiClient,e);return o=wn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=O1e(d),p=new mL;return Object.assign(p,m),p})}else{const u=Kxe(this.apiClient,e);return o=wn("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=m1e(d),p=new mL;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Pve(this.apiClient,e);return o=wn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=Q1e(d),p=new pL;return Object.assign(p,m),p})}else{const u=Wxe(this.apiClient,e);return o=wn("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=x1e(d),p=new pL;return Object.assign(p,m),p})}}async editImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Vve(this.apiClient,e);return a=wn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=H1e(l),d=new Khe;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Gve(this.apiClient,e);return a=wn("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=V1e(l),d=new $he;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=qve(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>QS(d))}else{const u=Yxe(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>jS(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=$ve(this.apiClient,e);return o=wn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=K1e(d),p=new gL;return Object.assign(p,m),p})}else{const u=Jxe(this.apiClient,e);return o=wn("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=y1e(d),p=new gL;return Object.assign(p,m),p})}}async update(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Yve(this.apiClient,e);return o=wn("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>QS(d))}else{const u=eve(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>jS(d))}}async delete(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Xve(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(()=>{const d=$1e(),m=new xL;return Object.assign(m,d),m})}else{const u=tve(this.apiClient,e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=w1e(),m=new xL;return Object.assign(m,d),m})}}async countTokens(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Zve(this.apiClient,e);return o=wn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=W1e(d),p=new vL;return Object.assign(p,m),p})}else{const u=rve(this.apiClient,e);return o=wn("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=b1e(d),p=new vL;return Object.assign(p,m),p})}}async computeTokens(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=e1e(this.apiClient,e);return a=wn("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Y1e(l),d=new Whe;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=r1e(this.apiClient,e);return o=wn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>{const m=eye(d),p=new Ww;return Object.assign(p,m),p})}else{const u=ive(this.apiClient,e);return o=wn("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const m=S1e(d),p=new Ww;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bye(t){const e={},n=v(t,["operationName"]);n!=null&&b(e,["_url","operationName"],n);const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function kye(t){const e={},n=v(t,["operationName"]);n!=null&&b(e,["_url","operationName"],n);const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function Iye(t){const e={},n=v(t,["operationName"]);n!=null&&b(e,["operationName"],n);const r=v(t,["resourceName"]);r!=null&&b(e,["_url","resourceName"],r);const s=v(t,["config"]);return s!=null&&b(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fye extends l0{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kye(e);return o=wn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i}else{const u=Bye(e);return o=wn("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Iye(e);return a=wn("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dye(t){const e={},n=v(t,["voiceName"]);return n!=null&&b(e,["voiceName"],n),e}function w7(t){const e={},n=v(t,["prebuiltVoiceConfig"]);return n!=null&&b(e,["prebuiltVoiceConfig"],Dye(n)),e}function Lye(t){const e={},n=v(t,["speaker"]);n!=null&&b(e,["speaker"],n);const r=v(t,["voiceConfig"]);return r!=null&&b(e,["voiceConfig"],w7(r)),e}function Rye(t){const e={},n=v(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Lye(s))),b(e,["speakerVoiceConfigs"],r)}return e}function Pye(t){const e={},n=v(t,["voiceConfig"]);n!=null&&b(e,["voiceConfig"],w7(n));const r=v(t,["multiSpeakerVoiceConfig"]);r!=null&&b(e,["multiSpeakerVoiceConfig"],Rye(r));const s=v(t,["languageCode"]);return s!=null&&b(e,["languageCode"],s),e}function Mye(t){const e={},n=v(t,["fps"]);n!=null&&b(e,["fps"],n);const r=v(t,["endOffset"]);r!=null&&b(e,["endOffset"],r);const s=v(t,["startOffset"]);return s!=null&&b(e,["startOffset"],s),e}function Uye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&b(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Oye(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function jye(t){const e={},n=v(t,["videoMetadata"]);n!=null&&b(e,["videoMetadata"],Mye(n));const r=v(t,["thought"]);r!=null&&b(e,["thought"],r);const s=v(t,["inlineData"]);s!=null&&b(e,["inlineData"],Uye(s));const a=v(t,["fileData"]);a!=null&&b(e,["fileData"],Oye(a));const i=v(t,["thoughtSignature"]);i!=null&&b(e,["thoughtSignature"],i);const o=v(t,["codeExecutionResult"]);o!=null&&b(e,["codeExecutionResult"],o);const l=v(t,["executableCode"]);l!=null&&b(e,["executableCode"],l);const u=v(t,["functionCall"]);u!=null&&b(e,["functionCall"],u);const d=v(t,["functionResponse"]);d!=null&&b(e,["functionResponse"],d);const m=v(t,["text"]);return m!=null&&b(e,["text"],m),e}function Qye(t){const e={},n=v(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>jye(a))),b(e,["parts"],s)}const r=v(t,["role"]);return r!=null&&b(e,["role"],r),e}function Hye(t){const e={},n=v(t,["behavior"]);n!=null&&b(e,["behavior"],n);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["name"]);s!=null&&b(e,["name"],s);const a=v(t,["parameters"]);a!=null&&b(e,["parameters"],a);const i=v(t,["parametersJsonSchema"]);i!=null&&b(e,["parametersJsonSchema"],i);const o=v(t,["response"]);o!=null&&b(e,["response"],o);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function Vye(t){const e={},n=v(t,["startTime"]);n!=null&&b(e,["startTime"],n);const r=v(t,["endTime"]);return r!=null&&b(e,["endTime"],r),e}function zye(t){const e={},n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],Vye(n)),e}function Gye(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const r=v(t,["dynamicThreshold"]);return r!=null&&b(e,["dynamicThreshold"],r),e}function qye(t){const e={},n=v(t,["dynamicRetrievalConfig"]);return n!=null&&b(e,["dynamicRetrievalConfig"],Gye(n)),e}function Kye(){return{}}function $ye(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Hye(u))),b(e,["functionDeclarations"],l)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&b(e,["googleSearch"],zye(r));const s=v(t,["googleSearchRetrieval"]);if(s!=null&&b(e,["googleSearchRetrieval"],qye(s)),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(v(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");v(t,["urlContext"])!=null&&b(e,["urlContext"],Kye());const i=v(t,["codeExecution"]);i!=null&&b(e,["codeExecution"],i);const o=v(t,["computerUse"]);return o!=null&&b(e,["computerUse"],o),e}function Wye(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GL(){return{}}function Yye(t){const e={},n=v(t,["disabled"]);n!=null&&b(e,["disabled"],n);const r=v(t,["startOfSpeechSensitivity"]);r!=null&&b(e,["startOfSpeechSensitivity"],r);const s=v(t,["endOfSpeechSensitivity"]);s!=null&&b(e,["endOfSpeechSensitivity"],s);const a=v(t,["prefixPaddingMs"]);a!=null&&b(e,["prefixPaddingMs"],a);const i=v(t,["silenceDurationMs"]);return i!=null&&b(e,["silenceDurationMs"],i),e}function Xye(t){const e={},n=v(t,["automaticActivityDetection"]);n!=null&&b(e,["automaticActivityDetection"],Yye(n));const r=v(t,["activityHandling"]);r!=null&&b(e,["activityHandling"],r);const s=v(t,["turnCoverage"]);return s!=null&&b(e,["turnCoverage"],s),e}function Jye(t){const e={},n=v(t,["targetTokens"]);return n!=null&&b(e,["targetTokens"],n),e}function Zye(t){const e={},n=v(t,["triggerTokens"]);n!=null&&b(e,["triggerTokens"],n);const r=v(t,["slidingWindow"]);return r!=null&&b(e,["slidingWindow"],Jye(r)),e}function ewe(t){const e={},n=v(t,["proactiveAudio"]);return n!=null&&b(e,["proactiveAudio"],n),e}function twe(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig"],r);const s=v(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=v(t,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const i=v(t,["topP"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","topP"],i);const o=v(t,["topK"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topK"],o);const l=v(t,["maxOutputTokens"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","maxOutputTokens"],l);const u=v(t,["mediaResolution"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","mediaResolution"],u);const d=v(t,["seed"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","seed"],d);const m=v(t,["speechConfig"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","speechConfig"],Pye(O4(m)));const p=v(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],p);const x=v(t,["systemInstruction"]);e!==void 0&&x!=null&&b(e,["setup","systemInstruction"],Qye(Wo(x)));const C=v(t,["tools"]);if(e!==void 0&&C!=null){let Q=hp(C);Array.isArray(Q)&&(Q=Q.map(j=>$ye(fp(j)))),b(e,["setup","tools"],Q)}const y=v(t,["sessionResumption"]);e!==void 0&&y!=null&&b(e,["setup","sessionResumption"],Wye(y));const T=v(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&b(e,["setup","inputAudioTranscription"],GL());const I=v(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&b(e,["setup","outputAudioTranscription"],GL());const F=v(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&b(e,["setup","realtimeInputConfig"],Xye(F));const M=v(t,["contextWindowCompression"]);e!==void 0&&M!=null&&b(e,["setup","contextWindowCompression"],Zye(M));const O=v(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],ewe(O)),n}function nwe(t,e){const n={},r=v(e,["model"]);r!=null&&b(n,["setup","model"],Es(t,r));const s=v(e,["config"]);return s!=null&&b(n,["config"],twe(s,n)),n}function rwe(t,e,n){const r={},s=v(e,["expireTime"]);n!==void 0&&s!=null&&b(n,["expireTime"],s);const a=v(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&b(n,["newSessionExpireTime"],a);const i=v(e,["uses"]);n!==void 0&&i!=null&&b(n,["uses"],i);const o=v(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&b(n,["bidiGenerateContentSetup"],nwe(t,o));const l=v(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&b(n,["fieldMask"],l),r}function swe(t,e){const n={},r=v(e,["config"]);return r!=null&&b(n,["config"],rwe(t,r,n)),n}function awe(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iwe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function owe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=iwe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class lwe extends l0{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=swe(this.apiClient,e);a=wn("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=owe(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>awe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cwe(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function uwe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),n}function Awe(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],uwe(n,e)),e}function dwe(t){const e={},n=v(t,["textInput"]);n!=null&&b(e,["textInput"],n);const r=v(t,["output"]);return r!=null&&b(e,["output"],r),e}function fwe(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=v(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>dwe(s))),b(e,["examples","examples"],r)}return e}function hwe(t,e){const n={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=v(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&b(e,["displayName"],r),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&b(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&b(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=v(t,["batchSize"]);e!==void 0&&i!=null&&b(e,["tuningTask","hyperparameters","batchSize"],i);const o=v(t,["learningRate"]);return e!==void 0&&o!=null&&b(e,["tuningTask","hyperparameters","learningRate"],o),n}function mwe(t){const e={},n=v(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const r=v(t,["trainingDataset"]);r!=null&&b(e,["tuningTask","trainingData"],fwe(r));const s=v(t,["config"]);return s!=null&&b(e,["config"],hwe(s,e)),e}function pwe(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const r=v(t,["config"]);return r!=null&&b(e,["config"],r),e}function gwe(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),n}function xwe(t){const e={},n=v(t,["config"]);return n!=null&&b(e,["config"],gwe(n,e)),e}function vwe(t,e){const n={},r=v(t,["gcsUri"]);e!==void 0&&r!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=v(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],s),v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ywe(t,e){const n={},r=v(t,["gcsUri"]);r!=null&&b(n,["validationDatasetUri"],r);const s=v(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function wwe(t,e){const n={},r=v(t,["validationDataset"]);e!==void 0&&r!=null&&b(e,["supervisedTuningSpec"],ywe(r,n));const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&b(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&b(e,["description"],a);const i=v(t,["epochCount"]);e!==void 0&&i!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=v(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=v(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=v(t,["adapterSize"]);if(e!==void 0&&u!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function bwe(t){const e={},n=v(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const r=v(t,["trainingDataset"]);r!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],vwe(r,e));const s=v(t,["config"]);return s!=null&&b(e,["config"],wwe(s,e)),e}function _we(t){const e={},n=v(t,["name"]);n!=null&&b(e,["model"],n);const r=v(t,["name"]);return r!=null&&b(e,["endpoint"],r),e}function b7(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["state"]);s!=null&&b(e,["state"],Zj(s));const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const i=v(t,["tuningTask","startTime"]);i!=null&&b(e,["startTime"],i);const o=v(t,["tuningTask","completeTime"]);o!=null&&b(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&b(e,["updateTime"],l);const u=v(t,["description"]);u!=null&&b(e,["description"],u);const d=v(t,["baseModel"]);d!=null&&b(e,["baseModel"],d);const m=v(t,["_self"]);m!=null&&b(e,["tunedModel"],_we(m));const p=v(t,["distillationSpec"]);p!=null&&b(e,["distillationSpec"],p);const x=v(t,["experiment"]);x!=null&&b(e,["experiment"],x);const C=v(t,["labels"]);C!=null&&b(e,["labels"],C);const y=v(t,["pipelineJob"]);y!=null&&b(e,["pipelineJob"],y);const T=v(t,["satisfiesPzi"]);T!=null&&b(e,["satisfiesPzi"],T);const I=v(t,["satisfiesPzs"]);I!=null&&b(e,["satisfiesPzs"],I);const F=v(t,["serviceAccount"]);F!=null&&b(e,["serviceAccount"],F);const M=v(t,["tunedModelDisplayName"]);return M!=null&&b(e,["tunedModelDisplayName"],M),e}function Cwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>b7(i))),b(e,["tuningJobs"],a)}return e}function Ewe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["metadata"]);s!=null&&b(e,["metadata"],s);const a=v(t,["done"]);a!=null&&b(e,["done"],a);const i=v(t,["error"]);return i!=null&&b(e,["error"],i),e}function Swe(t){const e={},n=v(t,["checkpointId"]);n!=null&&b(e,["checkpointId"],n);const r=v(t,["epoch"]);r!=null&&b(e,["epoch"],r);const s=v(t,["step"]);s!=null&&b(e,["step"],s);const a=v(t,["endpoint"]);return a!=null&&b(e,["endpoint"],a),e}function Twe(t){const e={},n=v(t,["model"]);n!=null&&b(e,["model"],n);const r=v(t,["endpoint"]);r!=null&&b(e,["endpoint"],r);const s=v(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Swe(i))),b(e,["checkpoints"],a)}return e}function VS(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&b(e,["name"],r);const s=v(t,["state"]);s!=null&&b(e,["state"],Zj(s));const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const i=v(t,["startTime"]);i!=null&&b(e,["startTime"],i);const o=v(t,["endTime"]);o!=null&&b(e,["endTime"],o);const l=v(t,["updateTime"]);l!=null&&b(e,["updateTime"],l);const u=v(t,["error"]);u!=null&&b(e,["error"],u);const d=v(t,["description"]);d!=null&&b(e,["description"],d);const m=v(t,["baseModel"]);m!=null&&b(e,["baseModel"],m);const p=v(t,["tunedModel"]);p!=null&&b(e,["tunedModel"],Twe(p));const x=v(t,["supervisedTuningSpec"]);x!=null&&b(e,["supervisedTuningSpec"],x);const C=v(t,["tuningDataStats"]);C!=null&&b(e,["tuningDataStats"],C);const y=v(t,["encryptionSpec"]);y!=null&&b(e,["encryptionSpec"],y);const T=v(t,["partnerModelTuningSpec"]);T!=null&&b(e,["partnerModelTuningSpec"],T);const I=v(t,["distillationSpec"]);I!=null&&b(e,["distillationSpec"],I);const F=v(t,["experiment"]);F!=null&&b(e,["experiment"],F);const M=v(t,["labels"]);M!=null&&b(e,["labels"],M);const O=v(t,["pipelineJob"]);O!=null&&b(e,["pipelineJob"],O);const Q=v(t,["satisfiesPzi"]);Q!=null&&b(e,["satisfiesPzi"],Q);const j=v(t,["satisfiesPzs"]);j!=null&&b(e,["satisfiesPzs"],j);const E=v(t,["serviceAccount"]);E!=null&&b(e,["serviceAccount"],E);const S=v(t,["tunedModelDisplayName"]);return S!=null&&b(e,["tunedModelDisplayName"],S),e}function Nwe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&b(e,["nextPageToken"],r);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>VS(i))),b(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bwe extends l0{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new _v($h.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:DS.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=pwe(e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>VS(d))}else{const u=cwe(e);return o=wn("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>b7(d))}}async listInternal(e){var n,r,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=xwe(e);return o=wn("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=Nwe(d),p=new wL;return Object.assign(p,m),p})}else{const u=Awe(e);return o=wn("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:d.headers},p})),i.then(d=>{const m=Cwe(d),p=new wL;return Object.assign(p,m),p})}}async tuneInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=bwe(e);return a=wn("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>VS(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=mwe(e);return a=wn("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>Ewe(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kwe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Iwe=1024*1024*8,Fwe=3,Dwe=1e3,Lwe=2,qC="x-goog-upload-status";async function Rwe(t,e,n){var r,s,a;let i=0,o=0,l=new LS(new Response),u="upload";for(i=t.size;o<i;){const m=Math.min(Iwe,i-o),p=t.slice(o,o+m);o+m>=i&&(u+=", finalize");let x=0,C=Dwe;for(;x<Fwe&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(m)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[qC]));)x++,await Mwe(C),C=C*Lwe;if(o+=m,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[qC])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[qC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Pwe(t){return{size:t.size,type:t.type}}function Mwe(t){return new Promise(e=>setTimeout(e,t))}class Uwe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rwe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Pwe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Owe{create(e,n,r){return new jwe(e,n,r)}}class jwe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qL="x-goog-api-key";class Qwe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(qL)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qL,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hwe="gl-node/";class Vwe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=qhe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new Qwe(this.apiKey);this.apiClient=new lye({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Hwe+"web",uploader:new Uwe,downloader:new kwe}),this.models=new Nye(this.apiClient),this.live=new wye(this.apiClient,s,new Owe),this.batches=new mme(this.apiClient),this.chats=new vpe(this.models,this.apiClient),this.caches=new ppe(this.apiClient),this.files=new Fpe(this.apiClient),this.operations=new Fye(this.apiClient),this.authTokens=new lwe(this.apiClient),this.tunings=new Bwe(this.apiClient)}}const Cv="acompanamientos",zwe=async()=>{try{const t=mn(zt(Sr,Cv),Dr("fecha","desc"));return(await gi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},Gwe=async t=>{try{return{id:(await na(zt(Sr,Cv),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},qwe=async(t,e)=>{try{const n=Mn(Sr,Cv,t);await uv(n,{...e,updatedAt:new Date().toISOString()})}catch(n){throw console.error("Error al actualizar acompañamiento:",n,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},Kwe=async t=>{try{const e=Mn(Sr,Cv,t);await Yi(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},$we=async t=>{try{const e=mn(zt(Sr,Cv),cs("docente","==",t),Dr("fecha","desc"));return(await gi(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},Wwe=async()=>{try{const t=Mn(Sr,"configuracion","rubricaAcompanamiento"),e=await cv(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},Ywe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,a]=se.useState(!1),[i,o]=se.useState(!1),[l,u]=se.useState(null),[d,m]=se.useState("list"),[p,x]=se.useState(null),[C,y]=se.useState(!1),[T,I]=se.useState(!1),F=zg,M=se.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[O,Q]=se.useState(M),j=se.useCallback(async()=>{a(!0);try{const K=await zwe();e(K),u(null)}catch(K){console.error("Error al cargar acompañamientos desde Firestore",K),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),E=se.useCallback(async()=>{o(!0);try{const ne=(await Oj()).filter(X=>X.profile===tn.PROFESORADO).map(X=>X.nombreCompleto).sort();r(ne)}catch(K){console.error("Error al cargar profesores desde Firestore",K),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);se.useEffect(()=>{j(),E()},[j,E]);const S=K=>{Q(ne=>({...ne,[K.target.name]:K.target.value}))},k=(K,ne)=>{Q(X=>({...X,rubricaResultados:{...X.rubricaResultados,[K]:ne}}))},z=async()=>{y(!0);const{rubricaResultados:K,observacionesGenerales:ne}=O;let X=`Resultados de la Rúbrica:
`;F.forEach(V=>{V.criteria.forEach(J=>{const re=K[J.name];if(re&&J.levels[re-1]){const ie=J.levels[re-1];X+=`- Criterio: "${J.name}" | Nivel: ${re} (${ie})
`}})}),X+=`
Observaciones Generales del Evaluador:
${ne||"No se proveyeron observaciones adicionales."}`;const ce=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${X}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{od("Acompañamiento - Consolidar Feedback");const re=(await new Vwe({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ce})).text.replace(/(\*\*|\*)/g,"");Q(ie=>({...ie,retroalimentacionConsolidada:re}))}catch(V){console.error("Error al generar retroalimentación con IA",V),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{y(!1)}},P=async()=>{const K=p;if(!K)return;I(!0);const ne=t.find(we=>we.id===K);if(!ne){I(!1);return}const X=new En({orientation:"p",unit:"mm",format:"a4"}),ce=20,V=X.internal.pageSize.getWidth(),J=X.internal.pageSize.getHeight(),re=V-ce*2;let ie=ce;const fe=we=>{we.setFont("helvetica","bold"),we.setFontSize(10),we.setTextColor(100),we.text("LICEO INDUSTRIAL DE RECOLETA",V/2,15,{align:"center"})};fe(X),X.setFont("helvetica","bold"),X.setFontSize(18),X.setTextColor(40),X.text("Informe de Acompañamiento Docente",V/2,ie+10,{align:"center"}),ie+=25,_c(X,{startY:ie,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},ne.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(ne.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},ne.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},ne.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),ie=X.lastAutoTable.finalY+10;const Se=[],ve=["Débil","Incipiente","Satisfactorio","Avanzado"];F.forEach(we=>{Se.push([{content:we.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),we.criteria.forEach(me=>{const he=ne.rubricaResultados[me.name],Ve=he?ve[he-1]:"No evaluado";Se.push([me.name,Ve])})}),_c(X,{startY:ie,head:[["Indicador","Nivel de Logro"]],body:Se,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:we=>{we.pageNumber>1&&fe(X)}}),ie=X.lastAutoTable.finalY+15;const ye=(we,me)=>{ie>J-ce-10&&(X.addPage(),fe(X),ie=ce),X.setFont("helvetica",me.style),X.setFontSize(me.size);const he=X.splitTextToSize(we,re),Ve=he.length*(me.size*.352778*1.15);ie+Ve>J-ce&&(X.addPage(),fe(X),ie=ce),X.text(he,ce,ie,{align:"left"}),ie+=Ve+(me.isTitle?5:8)};ne.retroalimentacionConsolidada?ne.retroalimentacionConsolidada.split(/(?=## )/).forEach(me=>{if(me.trim()){const he=me.trim().split(`
`),Ve=he[0].replace("## ",""),nt=he.slice(1).join(`
`).trim();ye(Ve,{size:14,style:"bold",isTitle:!0}),ye(nt,{size:11,style:"normal",isTitle:!1})}}):(ye("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),ye("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),X.save(`Acompanamiento_${ne.docente.replace(/\s/g,"_")}_${new Date(ne.fecha).toLocaleDateString("es-CL")}.pdf`),I(!1)},R=async K=>{if(K.preventDefault(),!O.docente||!O.curso||!O.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let ne=p;if(p)await qwe(p,O);else{const X=await Gwe(O);x(X.id),Q({...O}),ne=X.id}await j(),ne&&alert("¡Guardado correctamente!")}catch(ne){console.error("Error al guardar acompañamiento:",ne),u("Error al guardar el registro en la nube.")}},G=()=>{Q(M),x(null),m("form"),u(null)},q=K=>{Q(K),x(K.id),m("form"),u(null)},le=async K=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await Kwe(K),await j()}catch(ne){console.error("Error al eliminar acompañamiento:",ne),u("No se pudo eliminar el registro en la nube.")}},ee=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:G,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(K=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:K.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.curso," - ",K.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(K.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>q(K),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>le(K.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},K.id))})]}),oe=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:R,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:p?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>m("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:O.docente,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),n.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:O.curso,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Ja.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:O.asignatura,onChange:S,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),Cc.map(K=>c.jsx("option",{value:K,children:K},K))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:O.bloques,onChange:S,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:F.map(K=>c.jsx(wt.Fragment,{children:K.criteria.map((ne,X)=>c.jsxs("tr",{children:[X===0&&c.jsx("td",{rowSpan:K.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:K.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ne.name}),ne.levels.map((ce,V)=>{const J=V+1,re=O.rubricaResultados[ne.name]===J;return c.jsx("td",{onClick:()=>k(ne.name,J),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${re?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ce},J)})]},ne.name))},K.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:O.observacionesGenerales,onChange:S,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:O.retroalimentacionConsolidada,onChange:S,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:z,disabled:C,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:C?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:P,disabled:!p||T,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:T?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?ee():oe()})]})},H4="mensajes_internos",Xwe="usuarios",_7="mensajes_read_status",C7=t=>{var n,r;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fecha}},Jwe=(t,e)=>{const n=mn(zt(Ut,H4),cs("participants","array-contains",t),Dr("fecha","desc"));return Un(n,s=>{const a=s.docs.map(i=>C7(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},Zwe=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:Tn.fromDate(new Date)};await na(zt(Ut,H4),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},e2e=async t=>{try{const e=Mn(Ut,H4,t);await Yi(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},t2e=(t,e)=>{const n=Mn(Ut,_7,t);return Un(n,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},n2e=async(t,e)=>{try{const n=Mn(Ut,_7,t);await wo(n,{messages:VY(e)},{merge:!0})}catch(n){throw console.error("Error al marcar mensaje como leído:",n),new Error("No se pudo actualizar el estado de lectura.")}},r2e=t=>{const e=mn(zt(Ut,Xwe),Dr("nombreCompleto","asc"));return Un(e,r=>{const s=r.docs.map(a=>C7(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},s2e=({currentUser:t,refreshUnreadCount:e})=>{const[n,r]=se.useState("inbox"),[s,a]=se.useState([]),[i,o]=se.useState([]),[l,u]=se.useState(null),[d,m]=se.useState({announcements:[],messages:[]}),[p,x]=se.useState(!0),C={para:"",asunto:"",cuerpo:""},[y,T]=se.useState(C);se.useEffect(()=>{if(!t.id||!t.email){x(!1);return}x(!0);const E=Jwe(t.email,z=>{a(z),x(!1)}),S=r2e(o),k=t2e(t.id,z=>{m(z),e()});return()=>{E(),S(),k()}},[t.id,t.email,e]);const I=E=>{u(E),n==="inbox"&&!d.messages.includes(E.id)&&n2e(t.id,E.id).catch(S=>{console.error("Failed to mark message as read:",S)})},F=async E=>{if(E.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const S={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await Zwe(S),T(C),r("sent")}catch(k){console.error("Error sending message:",k),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},M=async E=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await e2e(E),u(null)}catch(S){console.error("Error deleting message:",S),alert("No se pudo eliminar el mensaje.")}},O=E=>{T({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),r("compose")},Q=se.useMemo(()=>s.filter(E=>E.para===t.email),[s,t.email]),j=se.useMemo(()=>s.filter(E=>E.de===t.email),[s,t.email]);return p?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{r("compose"),u(null),T(C)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{r("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{r("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${n==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),n!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(n==="inbox"?Q:j).map(E=>{const S=n==="inbox"&&!d.messages.includes(E.id);return c.jsxs("div",{onClick:()=>I(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${S?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:n==="inbox"?E.de:`Para: ${E.para}`}),S&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${S?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:n==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:y.para,onChange:E=>T({...y,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==t.email).map(E=>c.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:E=>T({...y,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:E=>T({...y,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[n==="inbox"&&c.jsx("button",{onClick:()=>O(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>M(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zS=function(t,e){return zS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},zS(t,e)};function Uu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var GS=function(){return GS=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},GS.apply(this,arguments)};function ml(t,e,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(m){i(m)}}function l(d){try{u(r.throw(d))}catch(m){i(m)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((r=r.apply(t,[])).next())})}function Oo(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Z1(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||e)}var ud=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),mb=function(t,e){return ud.fromClientRect(t,e.getBoundingClientRect())},a2e=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new ud(0,0,r,s)},pb=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Ka=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},KL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ey=0;ey<KL.length;ey++)i2e[KL.charCodeAt(ey)]=ey;var $L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ty=0;ty<$L.length;ty++)Tg[$L.charCodeAt(ty)]=ty;var o2e=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=Tg[t.charCodeAt(r)],i=Tg[t.charCodeAt(r+1)],o=Tg[t.charCodeAt(r+2)],l=Tg[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},l2e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},c2e=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Lh=5,V4=11,KC=2,u2e=V4-Lh,E7=65536>>Lh,A2e=1<<Lh,$C=A2e-1,d2e=1024>>Lh,f2e=E7+d2e,h2e=f2e,m2e=32,p2e=h2e+m2e,g2e=65536>>V4,x2e=1<<u2e,v2e=x2e-1,WL=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},y2e=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},w2e=function(t,e){var n=o2e(t),r=Array.isArray(n)?c2e(n):new Uint32Array(n),s=Array.isArray(n)?l2e(n):new Uint16Array(n),a=24,i=WL(s,a/2,r[4]/2),o=r[5]===2?WL(s,(a+r[4])/2):y2e(r,Math.ceil((a+r[4])/4));return new b2e(r[0],r[1],r[2],r[3],i,o)},b2e=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Lh],n=(n<<KC)+(e&$C),this.data[n];if(e<=65535)return n=this.index[E7+(e-55296>>Lh)],n=(n<<KC)+(e&$C),this.data[n];if(e<this.highStart)return n=p2e-g2e+(e>>V4),n=this.index[n],n+=e>>Lh&v2e,n=this.index[n],n=(n<<KC)+(e&$C),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),YL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ny=0;ny<YL.length;ny++)_2e[YL.charCodeAt(ny)]=ny;var C2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",XL=50,E2e=1,S7=2,T7=3,S2e=4,T2e=5,JL=7,N7=8,ZL=9,df=10,qS=11,e6=12,KS=13,N2e=14,Ng=15,$S=16,ry=17,og=18,B2e=19,t6=20,WS=21,lg=22,WC=23,V0=24,pc=25,Bg=26,kg=27,z0=28,k2e=29,yh=30,I2e=31,sy=32,ay=33,YS=34,XS=35,JS=36,Mx=37,ZS=38,Yy=39,Xy=40,YC=41,B7=42,F2e=43,D2e=[9001,65288],k7="!",jr="×",iy="÷",eT=w2e(C2e),zA=[yh,JS],tT=[E2e,S7,T7,T2e],I7=[df,N7],n6=[kg,Bg],L2e=tT.concat(I7),r6=[ZS,Yy,Xy,YS,XS],R2e=[Ng,KS],P2e=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(a,i){var o=eT.get(a);if(o>XL?(s.push(!0),o-=XL):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(i),n.push($S);if(o===S2e||o===qS){if(i===0)return r.push(i),n.push(yh);var l=n[i-1];return L2e.indexOf(l)===-1?(r.push(r[i-1]),n.push(l)):(r.push(i),n.push(yh))}if(r.push(i),o===I2e)return n.push(e==="strict"?WS:Mx);if(o===B7||o===k2e)return n.push(yh);if(o===F2e)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(Mx):n.push(yh);n.push(o)}),[r,n,s]},XC=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==df)break}if(s===df)for(var a=n;a>0;){a--;var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=n;l<=r.length;){l++;var i=r[l];if(i===e)return!0;if(i!==df)break}if(o!==df)break}return!1},s6=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===df)n--;else return r}return 0},M2e=function(t,e,n,r,s){if(n[r]===0)return jr;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return jr;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,d=e[o];if(l===S7&&d===T7)return jr;if(tT.indexOf(l)!==-1)return k7;if(tT.indexOf(d)!==-1||I7.indexOf(d)!==-1)return jr;if(s6(a,e)===N7)return iy;if(eT.get(t[a])===qS||(l===sy||l===ay)&&eT.get(t[o])===qS||l===JL||d===JL||l===ZL||[df,KS,Ng].indexOf(l)===-1&&d===ZL||[ry,og,B2e,V0,z0].indexOf(d)!==-1||s6(a,e)===lg||XC(WC,lg,a,e)||XC([ry,og],WS,a,e)||XC(e6,e6,a,e))return jr;if(l===df)return iy;if(l===WC||d===WC)return jr;if(d===$S||l===$S)return iy;if([KS,Ng,WS].indexOf(d)!==-1||l===N2e||u===JS&&R2e.indexOf(l)!==-1||l===z0&&d===JS||d===t6||zA.indexOf(d)!==-1&&l===pc||zA.indexOf(l)!==-1&&d===pc||l===kg&&[Mx,sy,ay].indexOf(d)!==-1||[Mx,sy,ay].indexOf(l)!==-1&&d===Bg||zA.indexOf(l)!==-1&&n6.indexOf(d)!==-1||n6.indexOf(l)!==-1&&zA.indexOf(d)!==-1||[kg,Bg].indexOf(l)!==-1&&(d===pc||[lg,Ng].indexOf(d)!==-1&&e[o+1]===pc)||[lg,Ng].indexOf(l)!==-1&&d===pc||l===pc&&[pc,z0,V0].indexOf(d)!==-1)return jr;if([pc,z0,V0,ry,og].indexOf(d)!==-1)for(var m=a;m>=0;){var p=e[m];if(p===pc)return jr;if([z0,V0].indexOf(p)!==-1)m--;else break}if([kg,Bg].indexOf(d)!==-1)for(var m=[ry,og].indexOf(l)!==-1?i:a;m>=0;){var p=e[m];if(p===pc)return jr;if([z0,V0].indexOf(p)!==-1)m--;else break}if(ZS===l&&[ZS,Yy,YS,XS].indexOf(d)!==-1||[Yy,YS].indexOf(l)!==-1&&[Yy,Xy].indexOf(d)!==-1||[Xy,XS].indexOf(l)!==-1&&d===Xy||r6.indexOf(l)!==-1&&[t6,Bg].indexOf(d)!==-1||r6.indexOf(d)!==-1&&l===kg||zA.indexOf(l)!==-1&&zA.indexOf(d)!==-1||l===V0&&zA.indexOf(d)!==-1||zA.concat(pc).indexOf(l)!==-1&&d===lg&&D2e.indexOf(t[o])===-1||zA.concat(pc).indexOf(d)!==-1&&l===og)return jr;if(l===YC&&d===YC){for(var x=n[a],C=1;x>0&&(x--,e[x]===YC);)C++;if(C%2!==0)return jr}return l===sy&&d===ay?jr:iy},U2e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=P2e(t,e.lineBreak),r=n[0],s=n[1],a=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[pc,yh,B7].indexOf(o)!==-1?Mx:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[r,s,i]},O2e=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===k7,this.start=r,this.end=s}return t.prototype.slice=function(){return Ka.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),j2e=function(t,e){var n=pb(t),r=U2e(n,e),s=r[0],a=r[1],i=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=jr;u<o&&(d=M2e(n,a,s,++u,i))===jr;);if(d!==jr||u===o){var m=new O2e(n,d,l,u);return l=u,{value:m,done:!1}}return{done:!0,value:null}}}},Q2e=1,H2e=2,Ev=4,a6=8,Xw=10,i6=47,rx=92,V2e=9,z2e=32,oy=34,cg=61,G2e=35,q2e=36,K2e=37,ly=39,cy=40,ug=41,$2e=95,zl=45,W2e=33,Y2e=60,X2e=62,J2e=64,Z2e=91,ebe=93,tbe=61,nbe=123,uy=63,rbe=125,o6=124,sbe=126,abe=128,l6=65533,JC=42,_h=43,ibe=44,obe=58,lbe=59,Ux=46,cbe=0,ube=8,Abe=11,dbe=14,fbe=31,hbe=127,sA=-1,F7=48,D7=97,L7=101,mbe=102,pbe=117,gbe=122,R7=65,P7=69,M7=70,xbe=85,vbe=90,Vo=function(t){return t>=F7&&t<=57},ybe=function(t){return t>=55296&&t<=57343},G0=function(t){return Vo(t)||t>=R7&&t<=M7||t>=D7&&t<=mbe},wbe=function(t){return t>=D7&&t<=gbe},bbe=function(t){return t>=R7&&t<=vbe},_be=function(t){return wbe(t)||bbe(t)},Cbe=function(t){return t>=abe},Ay=function(t){return t===Xw||t===V2e||t===z2e},Jw=function(t){return _be(t)||Cbe(t)||t===$2e},c6=function(t){return Jw(t)||Vo(t)||t===zl},Ebe=function(t){return t>=cbe&&t<=ube||t===Abe||t>=dbe&&t<=fbe||t===hbe},Xd=function(t,e){return t!==rx?!1:e!==Xw},dy=function(t,e,n){return t===zl?Jw(e)||Xd(e,n):Jw(t)?!0:!!(t===rx&&Xd(t,e))},ZC=function(t,e,n){return t===_h||t===zl?Vo(e)?!0:e===Ux&&Vo(n):Vo(t===Ux?e:t)},Sbe=function(t){var e=0,n=1;(t[e]===_h||t[e]===zl)&&(t[e]===zl&&(n=-1),e++);for(var r=[];Vo(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Ka.apply(void 0,r),10):0;t[e]===Ux&&e++;for(var a=[];Vo(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(Ka.apply(void 0,a),10):0;(t[e]===P7||t[e]===L7)&&e++;var l=1;(t[e]===_h||t[e]===zl)&&(t[e]===zl&&(l=-1),e++);for(var u=[];Vo(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Ka.apply(void 0,u),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},Tbe={type:2},Nbe={type:3},Bbe={type:4},kbe={type:13},Ibe={type:8},Fbe={type:21},Dbe={type:9},Lbe={type:10},Rbe={type:11},Pbe={type:12},Mbe={type:14},fy={type:23},Ube={type:1},Obe={type:25},jbe={type:24},Qbe={type:26},Hbe={type:27},Vbe={type:28},zbe={type:29},Gbe={type:31},nT={type:32},U7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(pb(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==nT;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case oy:return this.consumeStringToken(oy);case G2e:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(c6(n)||Xd(r,s)){var a=dy(n,r,s)?H2e:Q2e,i=this.consumeName();return{type:5,value:i,flags:a}}break;case q2e:if(this.peekCodePoint(0)===cg)return this.consumeCodePoint(),kbe;break;case ly:return this.consumeStringToken(ly);case cy:return Tbe;case ug:return Nbe;case JC:if(this.peekCodePoint(0)===cg)return this.consumeCodePoint(),Mbe;break;case _h:if(ZC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ibe:return Bbe;case zl:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(ZC(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(dy(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===zl&&u===X2e)return this.consumeCodePoint(),this.consumeCodePoint(),jbe;break;case Ux:if(ZC(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case i6:if(this.peekCodePoint(0)===JC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===JC&&(d=this.consumeCodePoint(),d===i6))return this.consumeToken();if(d===sA)return this.consumeToken()}break;case obe:return Qbe;case lbe:return Hbe;case Y2e:if(this.peekCodePoint(0)===W2e&&this.peekCodePoint(1)===zl&&this.peekCodePoint(2)===zl)return this.consumeCodePoint(),this.consumeCodePoint(),Obe;break;case J2e:var m=this.peekCodePoint(0),p=this.peekCodePoint(1),x=this.peekCodePoint(2);if(dy(m,p,x)){var i=this.consumeName();return{type:7,value:i}}break;case Z2e:return Vbe;case rx:if(Xd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ebe:return zbe;case tbe:if(this.peekCodePoint(0)===cg)return this.consumeCodePoint(),Ibe;break;case nbe:return Rbe;case rbe:return Pbe;case pbe:case xbe:var C=this.peekCodePoint(0),y=this.peekCodePoint(1);return C===_h&&(G0(y)||y===uy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case o6:if(this.peekCodePoint(0)===cg)return this.consumeCodePoint(),Dbe;if(this.peekCodePoint(0)===o6)return this.consumeCodePoint(),Fbe;break;case sbe:if(this.peekCodePoint(0)===cg)return this.consumeCodePoint(),Lbe;break;case sA:return nT}return Ay(e)?(this.consumeWhiteSpace(),Gbe):Vo(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Jw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ka(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();G0(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===uy&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Ka.apply(void 0,e.map(function(l){return l===uy?F7:l})),16),a=parseInt(Ka.apply(void 0,e.map(function(l){return l===uy?M7:l})),16);return{type:30,start:s,end:a}}var i=parseInt(Ka.apply(void 0,e),16);if(this.peekCodePoint(0)===zl&&G0(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];G0(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var a=parseInt(Ka.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===cy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===cy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sA)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===ly||n===oy){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sA||this.peekCodePoint(0)===ug)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),fy)}for(;;){var s=this.consumeCodePoint();if(s===sA||s===ug)return{type:22,value:Ka.apply(void 0,e)};if(Ay(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sA||this.peekCodePoint(0)===ug?(this.consumeCodePoint(),{type:22,value:Ka.apply(void 0,e)}):(this.consumeBadUrlRemnants(),fy);if(s===oy||s===ly||s===cy||Ebe(s))return this.consumeBadUrlRemnants(),fy;if(s===rx)if(Xd(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),fy;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Ay(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ug||e===sA)return;Xd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Ka.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===sA||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===Xw)return this._value.splice(0,r),Ube;if(s===rx){var a=this._value[r+1];a!==sA&&a!==void 0&&(a===Xw?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):Xd(s,a)&&(n+=this.consumeStringSlice(r),n+=Ka(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Ev,r=this.peekCodePoint(0);for((r===_h||r===zl)&&e.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===Ux&&Vo(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=a6;Vo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===P7||r===L7)&&((s===_h||s===zl)&&Vo(a)||Vo(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=a6;Vo(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Sbe(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(dy(s,a,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===K2e?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(G0(e)){for(var n=Ka(e);G0(this.peekCodePoint(0))&&n.length<6;)n+=Ka(this.consumeCodePoint());Ay(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||ybe(r)||r>1114111?l6:r}return e===sA?l6:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(c6(n))e+=Ka(n);else if(Xd(n,this.peekCodePoint(0)))e+=Ka(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),O7=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new U7;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Kbe(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nT:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Sv=function(t){return t.type===15},gp=function(t){return t.type===17},Bs=function(t){return t.type===20},qbe=function(t){return t.type===0},rT=function(t,e){return Bs(t)&&t.value===e},j7=function(t){return t.type!==31},Ym=function(t){return t.type!==31&&t.type!==4},TA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},Kbe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Qf=function(t){return t.type===17||t.type===15},hi=function(t){return t.type===16||Qf(t)},Q7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},vo={type:17,number:0,flags:Ev},z4={type:16,number:50,flags:Ev},ff={type:16,number:100,flags:Ev},Ig=function(t,e,n){var r=t[0],s=t[1];return[Vs(r,e),Vs(typeof s<"u"?s:r,n)]},Vs=function(t,e){if(t.type===16)return t.number/100*e;if(Sv(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},H7="deg",V7="grad",z7="rad",G7="turn",gb={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case H7:return Math.PI*e.number/180;case V7:return Math.PI/200*e.number;case z7:return e.number;case G7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},q7=function(t){return t.type===15&&(t.unit===H7||t.unit===V7||t.unit===z7||t.unit===G7)},K7=function(t){var e=t.filter(Bs).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[vo,vo];case"to top":case"bottom":return tu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[vo,ff];case"to right":case"left":return tu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ff,ff];case"to bottom":case"top":return tu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ff,vo];case"to left":case"right":return tu(270)}return 0},tu=function(t){return Math.PI*t/180},bf={name:"color",parse:function(t,e){if(e.type===18){var n=$be[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return hf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return hf(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return hf(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return hf(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=nd[e.value.toUpperCase()];if(typeof o<"u")return o}return nd.TRANSPARENT}},_f=function(t){return(255&t)===0},zi=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},hf=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},u6=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},A6=function(t,e){var n=e.filter(Ym);if(n.length===3){var r=n.map(u6),s=r[0],a=r[1],i=r[2];return hf(s,a,i,1)}if(n.length===4){var o=n.map(u6),s=o[0],a=o[1],i=o[2],l=o[3];return hf(s,a,i,l)}return 0};function eE(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var d6=function(t,e){var n=e.filter(Ym),r=n[0],s=n[1],a=n[2],i=n[3],o=(r.type===17?tu(r.number):gb.parse(t,r))/(Math.PI*2),l=hi(s)?s.number/100:0,u=hi(a)?a.number/100:0,d=typeof i<"u"&&hi(i)?Vs(i,1):1;if(l===0)return hf(u*255,u*255,u*255,1);var m=u<=.5?u*(l+1):u+l-u*l,p=u*2-m,x=eE(p,m,o+1/3),C=eE(p,m,o),y=eE(p,m,o-1/3);return hf(x*255,C*255,y*255,d)},$be={hsl:d6,hsla:d6,rgb:A6,rgba:A6},sx=function(t,e){return bf.parse(t,O7.create(e).parseComponentValue())},nd={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Wbe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ybe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xb=function(t,e){var n=bf.parse(t,e[0]),r=e[1];return r&&hi(r)?{color:n,stop:r}:{color:n,stop:null}},f6=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=vo),r.stop===null&&(r.stop=ff);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=Vs(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var u=null,i=0;i<s.length;i++){var d=s[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var m=i-u,p=s[u-1],x=(d-p)/(m+1),C=1;C<=m;C++)s[u+C-1]=x*C;u=null}}return t.map(function(y,T){var I=y.color;return{color:I,stop:Math.max(Math.min(1,s[T]/e),0)}})},Xbe=function(t,e,n){var r=e/2,s=n/2,a=Vs(t[0],e)-r,i=s-Vs(t[1],n);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},Jbe=function(t,e,n){var r=typeof t=="number"?t:Xbe(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),a=e/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,u=Math.cos(r-Math.PI/2)*o;return[s,a-u,a+u,i-l,i+l]},Eu=function(t,e){return Math.sqrt(t*t+e*e)},h6=function(t,e,n,r,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],d=Eu(n-l,r-u);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Zbe=function(t,e,n,r,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)a=i=Math.min(Eu(e,n),Eu(e,n-s),Eu(e-r,n),Eu(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),l=h6(r,s,e,n,!0),u=l[0],d=l[1];a=Eu(u-e,(d-n)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)a=i=Math.max(Eu(e,n),Eu(e,n-s),Eu(e-r,n),Eu(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),m=h6(r,s,e,n,!1),u=m[0],d=m[1];a=Eu(u-e,(d-n)/o),i=o*a}break}return Array.isArray(t.size)&&(a=Vs(t.size[0],r),i=t.size.length===2?Vs(t.size[1],s):a),[a,i]},e_e=function(t,e){var n=tu(180),r=[];return TA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){n=K7(s);return}else if(q7(i)){n=gb.parse(t,i);return}}var o=xb(t,s);r.push(o)}),{angle:n,stops:r,type:1}},hy=function(t,e){var n=tu(180),r=[];return TA(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=K7(s);return}else if(q7(i)){n=(gb.parse(t,i)+tu(270))%tu(360);return}}var o=xb(t,s);r.push(o)}),{angle:n,stops:r,type:1}},t_e=function(t,e){var n=tu(180),r=[],s=1,a=0,i=3,o=[];return TA(e).forEach(function(l,u){var d=l[0];if(u===0){if(Bs(d)&&d.value==="linear"){s=1;return}else if(Bs(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var m=bf.parse(t,d.values[0]);r.push({stop:vo,color:m})}else if(d.name==="to"){var m=bf.parse(t,d.values[0]);r.push({stop:ff,color:m})}else if(d.name==="color-stop"){var p=d.values.filter(Ym);if(p.length===2){var m=bf.parse(t,p[1]),x=p[0];gp(x)&&r.push({stop:{type:16,number:x.number*100,flags:x.flags},color:m})}}}}),s===1?{angle:(n+tu(180))%tu(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}},$7="closest-side",W7="farthest-side",Y7="closest-corner",X7="farthest-corner",J7="circle",Z7="ellipse",eQ="cover",tQ="contain",n_e=function(t,e){var n=0,r=3,s=[],a=[];return TA(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(m,p){if(u)if(Bs(p))switch(p.value){case"center":return a.push(z4),m;case"top":case"left":return a.push(vo),m;case"right":case"bottom":return a.push(ff),m}else(hi(p)||Qf(p))&&a.push(p);else if(Bs(p))switch(p.value){case J7:return n=0,!1;case Z7:return n=1,!1;case"at":return u=!0,!1;case $7:return r=0,!1;case eQ:case W7:return r=1,!1;case tQ:case Y7:return r=2,!1;case X7:return r=3,!1}else if(Qf(p)||hi(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return m},l)}if(l){var d=xb(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:a,type:2}},my=function(t,e){var n=0,r=3,s=[],a=[];return TA(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,m){if(Bs(m))switch(m.value){case"center":return a.push(z4),!1;case"top":case"left":return a.push(vo),!1;case"right":case"bottom":return a.push(ff),!1}else if(hi(m)||Qf(m))return a.push(m),!1;return d},l):o===1&&(l=i.reduce(function(d,m){if(Bs(m))switch(m.value){case J7:return n=0,!1;case Z7:return n=1,!1;case tQ:case $7:return r=0,!1;case W7:return r=1,!1;case Y7:return r=2,!1;case eQ:case X7:return r=3,!1}else if(Qf(m)||hi(m))return Array.isArray(r)||(r=[]),r.push(m),!1;return d},l)),l){var u=xb(t,i);s.push(u)}}),{size:r,shape:n,stops:s,position:a,type:2}},r_e=function(t){return t.type===1},s_e=function(t){return t.type===2},G4={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=nQ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function a_e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!nQ[t.name])}var nQ={"linear-gradient":e_e,"-moz-linear-gradient":hy,"-ms-linear-gradient":hy,"-o-linear-gradient":hy,"-webkit-linear-gradient":hy,"radial-gradient":n_e,"-moz-radial-gradient":my,"-ms-radial-gradient":my,"-o-radial-gradient":my,"-webkit-radial-gradient":my,"-webkit-gradient":t_e},i_e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Ym(r)&&a_e(r)}).map(function(r){return G4.parse(t,r)})}},o_e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bs(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},l_e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return TA(e).map(function(n){return n.filter(hi)}).map(Q7)}},c_e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return TA(e).map(function(n){return n.filter(Bs).map(function(r){return r.value}).join(" ")}).map(u_e)}},u_e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Fm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Fm||(Fm={}));var A_e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return TA(e).map(function(n){return n.filter(d_e)})}},d_e=function(t){return Bs(t)||hi(t)},vb=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},f_e=vb("top"),h_e=vb("right"),m_e=vb("bottom"),p_e=vb("left"),yb=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return Q7(n.filter(hi))}}},g_e=yb("top-left"),x_e=yb("top-right"),v_e=yb("bottom-right"),y_e=yb("bottom-left"),wb=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w_e=wb("top"),b_e=wb("right"),__e=wb("bottom"),C_e=wb("left"),bb=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Sv(n)?n.number:0}}},E_e=bb("top"),S_e=bb("right"),T_e=bb("bottom"),N_e=bb("left"),B_e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k_e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},I_e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Bs).reduce(function(n,r){return n|F_e(r.value)},0)}},F_e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},D_e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},L_e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Zw;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Zw||(Zw={}));var R_e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Zw.STRICT;case"normal":default:return Zw.NORMAL}}},P_e={name:"line-height",initialValue:"normal",prefix:!1,type:4},m6=function(t,e){return Bs(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hi(t)?Vs(t,e):e},M_e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:G4.parse(t,e)}},U_e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},sT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_b=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},O_e=_b("top"),j_e=_b("right"),Q_e=_b("bottom"),H_e=_b("left"),V_e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Bs).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},z_e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Cb=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},G_e=Cb("top"),q_e=Cb("right"),K_e=Cb("bottom"),$_e=Cb("left"),W_e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Y_e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},X_e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rT(e[0],"none")?[]:TA(e).map(function(n){for(var r={color:nd.TRANSPARENT,offsetX:vo,offsetY:vo,blur:vo},s=0,a=0;a<n.length;a++){var i=n[a];Qf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=bf.parse(t,i)}return r})}},J_e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Z_e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=nCe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},eCe=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},tCe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,a,i,o]:null},nCe={matrix:eCe,matrix3d:tCe},p6={type:16,number:50,flags:Ev},rCe=[p6,p6],sCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(hi);return n.length!==2?rCe:[n[0],n[1]]}},aCe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ax;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ax||(ax={}));var iCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ax.BREAK_ALL;case"keep-all":return ax.KEEP_ALL;case"normal":default:return ax.NORMAL}}},oCe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(gp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},rQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},lCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return gp(e)?e.number:1}},cCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Bs).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},ACe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},dCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(gp(e))return e.number;if(Bs(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},hCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Bs).map(function(n){return n.value})}},mCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ni=function(t,e){return(t&e)!==0},pCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},gCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(j7),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&gp(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},xCe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(j7),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(Bs(a)&&a.value!=="none"){var o=i&&gp(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},vCe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Sv).map(function(n){return rQ.parse(t,n)})}},yCe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(qbe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},g6=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},wCe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rT(e[0],"none")?[]:TA(e).map(function(n){for(var r={color:255,offsetX:vo,offsetY:vo,blur:vo,spread:vo,inset:!1},s=0,a=0;a<n.length;a++){var i=n[a];rT(i,"inset")?r.inset=!0:Qf(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=bf.parse(t,i)}return r})}},bCe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Bs).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},_Ce={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},CCe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Sv(e)?e.number:0}},ECe=function(){function t(e,n){var r,s;this.animationDuration=fn(e,vCe,n.animationDuration),this.backgroundClip=fn(e,Wbe,n.backgroundClip),this.backgroundColor=fn(e,Ybe,n.backgroundColor),this.backgroundImage=fn(e,i_e,n.backgroundImage),this.backgroundOrigin=fn(e,o_e,n.backgroundOrigin),this.backgroundPosition=fn(e,l_e,n.backgroundPosition),this.backgroundRepeat=fn(e,c_e,n.backgroundRepeat),this.backgroundSize=fn(e,A_e,n.backgroundSize),this.borderTopColor=fn(e,f_e,n.borderTopColor),this.borderRightColor=fn(e,h_e,n.borderRightColor),this.borderBottomColor=fn(e,m_e,n.borderBottomColor),this.borderLeftColor=fn(e,p_e,n.borderLeftColor),this.borderTopLeftRadius=fn(e,g_e,n.borderTopLeftRadius),this.borderTopRightRadius=fn(e,x_e,n.borderTopRightRadius),this.borderBottomRightRadius=fn(e,v_e,n.borderBottomRightRadius),this.borderBottomLeftRadius=fn(e,y_e,n.borderBottomLeftRadius),this.borderTopStyle=fn(e,w_e,n.borderTopStyle),this.borderRightStyle=fn(e,b_e,n.borderRightStyle),this.borderBottomStyle=fn(e,__e,n.borderBottomStyle),this.borderLeftStyle=fn(e,C_e,n.borderLeftStyle),this.borderTopWidth=fn(e,E_e,n.borderTopWidth),this.borderRightWidth=fn(e,S_e,n.borderRightWidth),this.borderBottomWidth=fn(e,T_e,n.borderBottomWidth),this.borderLeftWidth=fn(e,N_e,n.borderLeftWidth),this.boxShadow=fn(e,wCe,n.boxShadow),this.color=fn(e,B_e,n.color),this.direction=fn(e,k_e,n.direction),this.display=fn(e,I_e,n.display),this.float=fn(e,D_e,n.cssFloat),this.fontFamily=fn(e,ACe,n.fontFamily),this.fontSize=fn(e,dCe,n.fontSize),this.fontStyle=fn(e,mCe,n.fontStyle),this.fontVariant=fn(e,hCe,n.fontVariant),this.fontWeight=fn(e,fCe,n.fontWeight),this.letterSpacing=fn(e,L_e,n.letterSpacing),this.lineBreak=fn(e,R_e,n.lineBreak),this.lineHeight=fn(e,P_e,n.lineHeight),this.listStyleImage=fn(e,M_e,n.listStyleImage),this.listStylePosition=fn(e,U_e,n.listStylePosition),this.listStyleType=fn(e,sT,n.listStyleType),this.marginTop=fn(e,O_e,n.marginTop),this.marginRight=fn(e,j_e,n.marginRight),this.marginBottom=fn(e,Q_e,n.marginBottom),this.marginLeft=fn(e,H_e,n.marginLeft),this.opacity=fn(e,lCe,n.opacity);var a=fn(e,V_e,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=fn(e,z_e,n.overflowWrap),this.paddingTop=fn(e,G_e,n.paddingTop),this.paddingRight=fn(e,q_e,n.paddingRight),this.paddingBottom=fn(e,K_e,n.paddingBottom),this.paddingLeft=fn(e,$_e,n.paddingLeft),this.paintOrder=fn(e,bCe,n.paintOrder),this.position=fn(e,Y_e,n.position),this.textAlign=fn(e,W_e,n.textAlign),this.textDecorationColor=fn(e,cCe,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=fn(e,uCe,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=fn(e,X_e,n.textShadow),this.textTransform=fn(e,J_e,n.textTransform),this.transform=fn(e,Z_e,n.transform),this.transformOrigin=fn(e,sCe,n.transformOrigin),this.visibility=fn(e,aCe,n.visibility),this.webkitTextStrokeColor=fn(e,_Ce,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=fn(e,CCe,n.webkitTextStrokeWidth),this.wordBreak=fn(e,iCe,n.wordBreak),this.zIndex=fn(e,oCe,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return _f(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ni(this.display,4)||Ni(this.display,33554432)||Ni(this.display,268435456)||Ni(this.display,536870912)||Ni(this.display,67108864)||Ni(this.display,134217728)},t}(),SCe=function(){function t(e,n){this.content=fn(e,pCe,n.content),this.quotes=fn(e,yCe,n.quotes)}return t}(),x6=function(){function t(e,n){this.counterIncrement=fn(e,gCe,n.counterIncrement),this.counterReset=fn(e,xCe,n.counterReset)}return t}(),fn=function(t,e,n){var r=new U7,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var a=new O7(r.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,Bs(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return gb.parse(t,a.parseComponentValue());case"color":return bf.parse(t,a.parseComponentValue());case"image":return G4.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Qf(o)?o:vo;case"length-percentage":var l=a.parseComponentValue();return hi(l)?l:vo;case"time":return rQ.parse(t,a.parseComponentValue())}break}},TCe="data-html2canvas-debug",NCe=function(t){var e=t.getAttribute(TCe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},aT=function(t,e){var n=NCe(t);return n===1||e===n},NA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,aT(n,3))debugger;this.styles=new ECe(e,window.getComputedStyle(n,null)),lT(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=mb(this.context,n),aT(n,4)&&(this.flags|=16)}return t}(),BCe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",v6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var py=0;py<v6.length;py++)Fg[v6.charCodeAt(py)]=py;var kCe=function(t){var e=t.length*.75,n=t.length,r,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<n;r+=4)a=Fg[t.charCodeAt(r)],i=Fg[t.charCodeAt(r+1)],o=Fg[t.charCodeAt(r+2)],l=Fg[t.charCodeAt(r+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},ICe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},FCe=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Rh=5,q4=11,tE=2,DCe=q4-Rh,sQ=65536>>Rh,LCe=1<<Rh,nE=LCe-1,RCe=1024>>Rh,PCe=sQ+RCe,MCe=PCe,UCe=32,OCe=MCe+UCe,jCe=65536>>q4,QCe=1<<DCe,HCe=QCe-1,y6=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},VCe=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},zCe=function(t,e){var n=kCe(t),r=Array.isArray(n)?FCe(n):new Uint32Array(n),s=Array.isArray(n)?ICe(n):new Uint16Array(n),a=24,i=y6(s,a/2,r[4]/2),o=r[5]===2?y6(s,(a+r[4])/2):VCe(r,Math.ceil((a+r[4])/4));return new GCe(r[0],r[1],r[2],r[3],i,o)},GCe=function(){function t(e,n,r,s,a,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Rh],n=(n<<tE)+(e&nE),this.data[n];if(e<=65535)return n=this.index[sQ+(e-55296>>Rh)],n=(n<<tE)+(e&nE),this.data[n];if(e<this.highStart)return n=OCe-jCe+(e>>q4),n=this.index[n],n+=e>>Rh&HCe,n=this.index[n],n=(n<<tE)+(e&nE),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),w6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qCe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gy=0;gy<w6.length;gy++)qCe[w6.charCodeAt(gy)]=gy;var KCe=1,rE=2,sE=3,b6=4,_6=5,$Ce=7,C6=8,aE=9,iE=10,E6=11,S6=12,T6=13,N6=14,oE=15,WCe=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=t.charCodeAt(n++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},YCe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},XCe=zCe(BCe),$c="×",lE="÷",JCe=function(t){return XCe.get(t)},ZCe=function(t,e,n){var r=n-2,s=e[r],a=e[n-1],i=e[n];if(a===rE&&i===sE)return $c;if(a===rE||a===sE||a===b6||i===rE||i===sE||i===b6)return lE;if(a===C6&&[C6,aE,E6,S6].indexOf(i)!==-1||(a===E6||a===aE)&&(i===aE||i===iE)||(a===S6||a===iE)&&i===iE||i===T6||i===_6||i===$Ce||a===KCe)return $c;if(a===T6&&i===N6){for(;s===_6;)s=e[--r];if(s===N6)return $c}if(a===oE&&i===oE){for(var o=0;s===oE;)o++,s=e[--r];if(o%2===0)return $c}return lE},eEe=function(t){var e=WCe(t),n=e.length,r=0,s=0,a=e.map(JCe);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=$c;r<n&&(i=ZCe(e,a,++r))===$c;);if(i!==$c||r===n){var o=YCe.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},tEe=function(t){for(var e=eEe(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},nEe=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(r),a===e)return!0}}return!1},rEe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=pb(r.data).map(function(l){return Ka(l)}),a=0,i={},o=s.every(function(l,u){n.setStart(r,a),n.setEnd(r,a+l.length);var d=n.getBoundingClientRect();a+=l.length;var m=d.x>i.x||d.y>i.y;return i=d,u===0?!0:m});return t.body.removeChild(e),o},sEe=function(){return typeof new Image().crossOrigin<"u"},aEe=function(){return typeof new XMLHttpRequest().responseType=="string"},iEe=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},B6=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},oEe=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=e.toDataURL();s.src=a;var i=iT(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),k6(i).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=n+"px",B6(l)?k6(iT(n,n,0,0,u)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),B6(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},iT=function(t,e,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},k6=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ho={get SUPPORT_RANGE_BOUNDS(){var t=nEe(document);return Object.defineProperty(ho,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ho.SUPPORT_RANGE_BOUNDS&&rEe(document);return Object.defineProperty(ho,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=iEe(document);return Object.defineProperty(ho,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?oEe(document):Promise.resolve(!1);return Object.defineProperty(ho,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=sEe();return Object.defineProperty(ho,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=aEe();return Object.defineProperty(ho,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ho,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ho,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ix=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),lEe=function(t,e,n,r){var s=AEe(e,n),a=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(ho.SUPPORT_RANGE_BOUNDS){var l=I6(r,i,o.length).getClientRects();if(l.length>1){var u=K4(o),d=0;u.forEach(function(p){a.push(new ix(p,ud.fromDOMRectList(t,I6(r,d+i,p.length).getClientRects()))),d+=p.length})}else a.push(new ix(o,ud.fromDOMRectList(t,l)))}else{var m=r.splitText(o.length);a.push(new ix(o,cEe(t,r))),r=m}else ho.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),a},cEe=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var a=mb(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return ud.EMPTY},I6=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},K4=function(t){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return tEe(t)},uEe=function(t,e){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return fEe(t,e)},AEe=function(t,e){return e.letterSpacing!==0?K4(t):uEe(t,e)},dEe=[32,160,4961,65792,65793,4153,4241],fEe=function(t,e){for(var n=j2e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,a=function(){if(s.value){var i=s.value.slice(),o=pb(i),l="";o.forEach(function(u){dEe.indexOf(u)===-1?l+=Ka(u):(l.length&&r.push(l),r.push(Ka(u)),l="")}),l.length&&r.push(l)}};!(s=n.next()).done;)a();return r},hEe=function(){function t(e,n,r){this.text=mEe(n.data,r.textTransform),this.textBounds=lEe(e,this.text,r,n)}return t}(),mEe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(pEe,gEe);case 2:return t.toUpperCase();default:return t}},pEe=/(^|\s|:|-|\(|\))([a-z])/g,gEe=function(t,e,n){return t.length>0?e+n.toUpperCase():t},aQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(NA),iQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(NA),oQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=new XMLSerializer,i=mb(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(NA),lQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(NA),oT=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(NA),xEe=[{type:15,flags:0,unit:"px",number:3}],vEe=[{type:16,flags:0,number:50}],yEe=function(t){return t.width>t.height?new ud(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new ud(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},wEe=function(t){var e=t.type===bEe?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},e2="checkbox",t2="radio",bEe="password",F6=707406591,$4=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=wEe(r),(s.type===e2||s.type===t2)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=yEe(s.bounds)),s.type){case e2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=xEe;break;case t2:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=vEe;break}return s}return e}(NA),cQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(NA),uQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(NA),AQ=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=fQ(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?sx(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):nd.TRANSPARENT,i=r.contentWindow.document.body?sx(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):nd.TRANSPARENT;s.backgroundColor=_f(a)?_f(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(NA),_Ee=["OL","UL","MENU"],Jy=function(t,e,n,r){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,hQ(s)&&s.data.trim().length>0)n.textNodes.push(new hEe(t,s,n.styles));else if(hm(s))if(xQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Jy(t,o,n,r)});else{var i=dQ(t,s);i.styles.isVisible()&&(CEe(s,i,r)?i.flags|=4:EEe(i.styles)&&(i.flags|=2),_Ee.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?Jy(t,s.shadowRoot,i,r):!n2(s)&&!mQ(s)&&!r2(s)&&Jy(t,s,i,r))}},dQ=function(t,e){return cT(e)?new aQ(t,e):pQ(e)?new iQ(t,e):mQ(e)?new oQ(t,e):SEe(e)?new lQ(t,e):TEe(e)?new oT(t,e):NEe(e)?new $4(t,e):r2(e)?new cQ(t,e):n2(e)?new uQ(t,e):gQ(e)?new AQ(t,e):new NA(t,e)},fQ=function(t,e){var n=dQ(t,e);return n.flags|=4,Jy(t,e,n,n),n},CEe=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||W4(t)&&n.styles.isTransparent()},EEe=function(t){return t.isPositioned()||t.isFloating()},hQ=function(t){return t.nodeType===Node.TEXT_NODE},hm=function(t){return t.nodeType===Node.ELEMENT_NODE},lT=function(t){return hm(t)&&typeof t.style<"u"&&!Zy(t)},Zy=function(t){return typeof t.className=="object"},SEe=function(t){return t.tagName==="LI"},TEe=function(t){return t.tagName==="OL"},NEe=function(t){return t.tagName==="INPUT"},BEe=function(t){return t.tagName==="HTML"},mQ=function(t){return t.tagName==="svg"},W4=function(t){return t.tagName==="BODY"},pQ=function(t){return t.tagName==="CANVAS"},D6=function(t){return t.tagName==="VIDEO"},cT=function(t){return t.tagName==="IMG"},gQ=function(t){return t.tagName==="IFRAME"},L6=function(t){return t.tagName==="STYLE"},kEe=function(t){return t.tagName==="SCRIPT"},n2=function(t){return t.tagName==="TEXTAREA"},r2=function(t){return t.tagName==="SELECT"},xQ=function(t){return t.tagName==="SLOT"},R6=function(t){return t.tagName.indexOf("-")>0},IEe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,a=!0;r!==null&&r.forEach(function(o){var l=n.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=n.counters[o.counter];i.push(o.counter),l||(l=n.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),P6={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},M6={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},FEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},DEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},q0=function(t,e,n,r,s,a){return t<e||t>n?Ox(t,s,a.length>0):r.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=r.values[l];return i},"")+a},vQ=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Ga=function(t,e,n,r,s){var a=n-e+1;return(t<0?"-":"")+(vQ(Math.abs(t),a,r,function(i){return Ka(Math.floor(i%a)+e)})+s)},fh=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return vQ(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},lm=1,$d=2,Wd=4,Dg=8,GA=function(t,e,n,r,s,a){if(t<-9999||t>9999)return Ox(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ni(a,lm)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ni(a,$d)||u===1&&l===1&&Ni(a,Wd)&&t>100||u===1&&l>1&&Ni(a,Dg)?o=e[u]+(l>0?n[l-1]:"")+o:u===1&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},U6="十百千萬",O6="拾佰仟萬",j6="マイナス",cE="마이너스",Ox=function(t,e,n){var r=n?". ":"",s=n?"、":"",a=n?", ":"",i=n?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Ga(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return fh(t,"〇一二三四五六七八九",s);case 6:return q0(t,1,3999,P6,3,r).toLowerCase();case 7:return q0(t,1,3999,P6,3,r);case 8:return Ga(t,945,969,!1,r);case 9:return Ga(t,97,122,!1,r);case 10:return Ga(t,65,90,!1,r);case 11:return Ga(t,1632,1641,!0,r);case 12:case 49:return q0(t,1,9999,M6,3,r);case 35:return q0(t,1,9999,M6,3,r).toLowerCase();case 13:return Ga(t,2534,2543,!0,r);case 14:case 30:return Ga(t,6112,6121,!0,r);case 15:return fh(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return fh(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return GA(t,"零一二三四五六七八九",U6,"負",s,$d|Wd|Dg);case 47:return GA(t,"零壹貳參肆伍陸柒捌玖",O6,"負",s,lm|$d|Wd|Dg);case 42:return GA(t,"零一二三四五六七八九",U6,"负",s,$d|Wd|Dg);case 41:return GA(t,"零壹贰叁肆伍陆柒捌玖",O6,"负",s,lm|$d|Wd|Dg);case 26:return GA(t,"〇一二三四五六七八九","十百千万",j6,s,0);case 25:return GA(t,"零壱弐参四伍六七八九","拾百千万",j6,s,lm|$d|Wd);case 31:return GA(t,"영일이삼사오육칠팔구","십백천만",cE,a,lm|$d|Wd);case 33:return GA(t,"零一二三四五六七八九","十百千萬",cE,a,0);case 32:return GA(t,"零壹貳參四五六七八九","拾百千",cE,a,lm|$d|Wd);case 18:return Ga(t,2406,2415,!0,r);case 20:return q0(t,1,19999,DEe,3,r);case 21:return Ga(t,2790,2799,!0,r);case 22:return Ga(t,2662,2671,!0,r);case 22:return q0(t,1,10999,FEe,3,r);case 23:return fh(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return fh(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ga(t,3302,3311,!0,r);case 28:return fh(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return fh(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return Ga(t,3792,3801,!0,r);case 37:return Ga(t,6160,6169,!0,r);case 38:return Ga(t,4160,4169,!0,r);case 39:return Ga(t,2918,2927,!0,r);case 40:return Ga(t,1776,1785,!0,r);case 43:return Ga(t,3046,3055,!0,r);case 44:return Ga(t,3174,3183,!0,r);case 45:return Ga(t,3664,3673,!0,r);case 46:return Ga(t,3872,3881,!0,r);case 3:default:return Ga(t,48,57,!0,r)}},yQ="data-html2canvas-ignore",Q6=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new IEe,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=LEe(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,u=MEe(s).then(function(){return ml(r,void 0,void 0,function(){var d,m;return Oo(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(QEe),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,m=this.clonedReferenceElement,typeof m>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,PEe(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,m)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(OEe(document.doctype)+"<html></html>"),jEe(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(aT(e,2))debugger;if(pQ(e))return this.createCanvasClone(e);if(D6(e))return this.createVideoClone(e);if(L6(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return cT(n)&&(cT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),R6(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return uE(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!hm(n)||!kEe(n)&&!n.hasAttribute(yQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!hm(n)||!L6(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(hm(a)&&xQ(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,a,r)},t.prototype.cloneNode=function(e,n){if(hQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&hm(e)&&(lT(e)||Zy(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&lT(s)&&(this.clonedReferenceElement=s),W4(s)&&zEe(s);var l=this.counters.parse(new x6(this.context,a)),u=this.resolvePseudoContent(e,s,i,ox.BEFORE);R6(e)&&(n=!0),D6(e)||this.cloneChildNodes(e,s,n),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,o,ox.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||Zy(e))&&!gQ(e)||n)&&uE(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(n2(e)||r2(e))&&(n2(s)||r2(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var a=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new x6(this.context,r));var l=new SCe(this.context,r),u=o.createElement("html2canvaspseudoelement");uE(r,u),l.content.forEach(function(m){if(m.type===0)u.appendChild(o.createTextNode(m.value));else if(m.type===22){var p=o.createElement("img");p.src=m.value,p.style.opacity="1",u.appendChild(p)}else if(m.type===18){if(m.name==="attr"){var x=m.values.filter(Bs);x.length&&u.appendChild(o.createTextNode(e.getAttribute(x[0].value)||""))}else if(m.name==="counter"){var C=m.values.filter(Ym),y=C[0],T=C[1];if(y&&Bs(y)){var I=a.counters.getCounterValue(y.value),F=T&&Bs(T)?sT.parse(a.context,T.value):3;u.appendChild(o.createTextNode(Ox(I,F,!1)))}}else if(m.name==="counters"){var M=m.values.filter(Ym),y=M[0],O=M[1],T=M[2];if(y&&Bs(y)){var Q=a.counters.getCounterValues(y.value),j=T&&Bs(T)?sT.parse(a.context,T.value):3,E=O&&O.type===0?O.value:"",S=Q.map(function(P){return Ox(P,j,!1)}).join(E);u.appendChild(o.createTextNode(S))}}}else if(m.type===20)switch(m.value){case"open-quote":u.appendChild(o.createTextNode(g6(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(g6(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(m.value))}}),u.className=uT+" "+AT;var d=s===ox.BEFORE?" "+uT:" "+AT;return Zy(n)?n.className.baseValue+=d:n.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),ox;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(ox||(ox={}));var LEe=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(yQ,"true"),t.body.appendChild(n),n},REe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},PEe=function(t){return Promise.all([].slice.call(t.images,0).map(REe))},MEe=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},UEe=["all","d","content"],uE=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);UEe.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},OEe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},jEe=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},QEe=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},HEe=":before",VEe=":after",uT="___html2canvas___pseudoelement_before",AT="___html2canvas___pseudoelement_after",H6=`{
    content: "" !important;
    display: none !important;
}`,zEe=function(t){GEe(t,"."+uT+HEe+H6+`
         .`+AT+VEe+H6)},GEe=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},wQ=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),qEe=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(dE(e)||YEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return ml(this,void 0,void 0,function(){var n,r,s,a,i=this;return Oo(this,function(o){switch(o.label){case 0:return n=wQ.isSameOrigin(e),r=!AE(e)&&this._options.useCORS===!0&&ho.SUPPORT_CORS_IMAGES&&!n,s=!AE(e)&&!n&&!dE(e)&&typeof this._options.proxy=="string"&&ho.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!AE(e)&&!dE(e)&&!s&&!r?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(XEe(a)||r)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=ho.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var m=new FileReader;m.addEventListener("load",function(){return a(m.result)},!1),m.addEventListener("error",function(p){return i(p)},!1),m.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var u=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),KEe=/^data:image\/svg\+xml/i,$Ee=/^data:image\/.*;base64,/i,WEe=/^data:image\/.*/i,YEe=function(t){return ho.SUPPORT_SVG_DRAWING||!JEe(t)},AE=function(t){return WEe.test(t)},XEe=function(t){return $Ee.test(t)},dE=function(t){return t.substr(0,4)==="blob"},JEe=function(t){return t.substr(-3).toLowerCase()==="svg"||KEe.test(t)},un=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),K0=function(t,e,n){return new un(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},xy=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=K0(this.start,this.startControl,e),s=K0(this.startControl,this.endControl,e),a=K0(this.endControl,this.end,e),i=K0(r,s,e),o=K0(s,a,e),l=K0(i,o,e);return n?new t(this.start,r,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Yc=function(t){return t.type===1},ZEe=function(){function t(e){var n=e.styles,r=e.bounds,s=Ig(n.borderTopLeftRadius,r.width,r.height),a=s[0],i=s[1],o=Ig(n.borderTopRightRadius,r.width,r.height),l=o[0],u=o[1],d=Ig(n.borderBottomRightRadius,r.width,r.height),m=d[0],p=d[1],x=Ig(n.borderBottomLeftRadius,r.width,r.height),C=x[0],y=x[1],T=[];T.push((a+l)/r.width),T.push((C+m)/r.width),T.push((i+y)/r.height),T.push((u+p)/r.height);var I=Math.max.apply(Math,T);I>1&&(a/=I,i/=I,l/=I,u/=I,m/=I,p/=I,C/=I,y/=I);var F=r.width-l,M=r.height-p,O=r.width-m,Q=r.height-y,j=n.borderTopWidth,E=n.borderRightWidth,S=n.borderBottomWidth,k=n.borderLeftWidth,z=Vs(n.paddingTop,e.bounds.width),P=Vs(n.paddingRight,e.bounds.width),R=Vs(n.paddingBottom,e.bounds.width),G=Vs(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?aa(r.left+k/3,r.top+j/3,a-k/3,i-j/3,ms.TOP_LEFT):new un(r.left+k/3,r.top+j/3),this.topRightBorderDoubleOuterBox=a>0||i>0?aa(r.left+F,r.top+j/3,l-E/3,u-j/3,ms.TOP_RIGHT):new un(r.left+r.width-E/3,r.top+j/3),this.bottomRightBorderDoubleOuterBox=m>0||p>0?aa(r.left+O,r.top+M,m-E/3,p-S/3,ms.BOTTOM_RIGHT):new un(r.left+r.width-E/3,r.top+r.height-S/3),this.bottomLeftBorderDoubleOuterBox=C>0||y>0?aa(r.left+k/3,r.top+Q,C-k/3,y-S/3,ms.BOTTOM_LEFT):new un(r.left+k/3,r.top+r.height-S/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?aa(r.left+k*2/3,r.top+j*2/3,a-k*2/3,i-j*2/3,ms.TOP_LEFT):new un(r.left+k*2/3,r.top+j*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?aa(r.left+F,r.top+j*2/3,l-E*2/3,u-j*2/3,ms.TOP_RIGHT):new un(r.left+r.width-E*2/3,r.top+j*2/3),this.bottomRightBorderDoubleInnerBox=m>0||p>0?aa(r.left+O,r.top+M,m-E*2/3,p-S*2/3,ms.BOTTOM_RIGHT):new un(r.left+r.width-E*2/3,r.top+r.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||y>0?aa(r.left+k*2/3,r.top+Q,C-k*2/3,y-S*2/3,ms.BOTTOM_LEFT):new un(r.left+k*2/3,r.top+r.height-S*2/3),this.topLeftBorderStroke=a>0||i>0?aa(r.left+k/2,r.top+j/2,a-k/2,i-j/2,ms.TOP_LEFT):new un(r.left+k/2,r.top+j/2),this.topRightBorderStroke=a>0||i>0?aa(r.left+F,r.top+j/2,l-E/2,u-j/2,ms.TOP_RIGHT):new un(r.left+r.width-E/2,r.top+j/2),this.bottomRightBorderStroke=m>0||p>0?aa(r.left+O,r.top+M,m-E/2,p-S/2,ms.BOTTOM_RIGHT):new un(r.left+r.width-E/2,r.top+r.height-S/2),this.bottomLeftBorderStroke=C>0||y>0?aa(r.left+k/2,r.top+Q,C-k/2,y-S/2,ms.BOTTOM_LEFT):new un(r.left+k/2,r.top+r.height-S/2),this.topLeftBorderBox=a>0||i>0?aa(r.left,r.top,a,i,ms.TOP_LEFT):new un(r.left,r.top),this.topRightBorderBox=l>0||u>0?aa(r.left+F,r.top,l,u,ms.TOP_RIGHT):new un(r.left+r.width,r.top),this.bottomRightBorderBox=m>0||p>0?aa(r.left+O,r.top+M,m,p,ms.BOTTOM_RIGHT):new un(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=C>0||y>0?aa(r.left,r.top+Q,C,y,ms.BOTTOM_LEFT):new un(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||i>0?aa(r.left+k,r.top+j,Math.max(0,a-k),Math.max(0,i-j),ms.TOP_LEFT):new un(r.left+k,r.top+j),this.topRightPaddingBox=l>0||u>0?aa(r.left+Math.min(F,r.width-E),r.top+j,F>r.width+E?0:Math.max(0,l-E),Math.max(0,u-j),ms.TOP_RIGHT):new un(r.left+r.width-E,r.top+j),this.bottomRightPaddingBox=m>0||p>0?aa(r.left+Math.min(O,r.width-k),r.top+Math.min(M,r.height-S),Math.max(0,m-E),Math.max(0,p-S),ms.BOTTOM_RIGHT):new un(r.left+r.width-E,r.top+r.height-S),this.bottomLeftPaddingBox=C>0||y>0?aa(r.left+k,r.top+Math.min(Q,r.height-S),Math.max(0,C-k),Math.max(0,y-S),ms.BOTTOM_LEFT):new un(r.left+k,r.top+r.height-S),this.topLeftContentBox=a>0||i>0?aa(r.left+k+G,r.top+j+z,Math.max(0,a-(k+G)),Math.max(0,i-(j+z)),ms.TOP_LEFT):new un(r.left+k+G,r.top+j+z),this.topRightContentBox=l>0||u>0?aa(r.left+Math.min(F,r.width+k+G),r.top+j+z,F>r.width+k+G?0:l-k+G,u-(j+z),ms.TOP_RIGHT):new un(r.left+r.width-(E+P),r.top+j+z),this.bottomRightContentBox=m>0||p>0?aa(r.left+Math.min(O,r.width-(k+G)),r.top+Math.min(M,r.height+j+z),Math.max(0,m-(E+P)),p-(S+R),ms.BOTTOM_RIGHT):new un(r.left+r.width-(E+P),r.top+r.height-(S+R)),this.bottomLeftContentBox=C>0||y>0?aa(r.left+k+G,r.top+Q,Math.max(0,C-(k+G)),y-(S+R),ms.BOTTOM_LEFT):new un(r.left+k+G,r.top+r.height-(S+R))}return t}(),ms;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ms||(ms={}));var aa=function(t,e,n,r,s){var a=4*((Math.sqrt(2)-1)/3),i=n*a,o=r*a,l=t+n,u=e+r;switch(s){case ms.TOP_LEFT:return new xy(new un(t,u),new un(t,u-o),new un(l-i,e),new un(l,e));case ms.TOP_RIGHT:return new xy(new un(t,e),new un(t+i,e),new un(l,u-o),new un(l,u));case ms.BOTTOM_RIGHT:return new xy(new un(l,e),new un(l,e+o),new un(t+i,u),new un(t,u));case ms.BOTTOM_LEFT:default:return new xy(new un(l,u),new un(l-i,u),new un(t,e+o),new un(t,e))}},s2=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},eSe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},a2=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},tSe=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),vy=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),nSe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),rSe=function(t){return t.type===0},bQ=function(t){return t.type===1},sSe=function(t){return t.type===2},V6=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},aSe=function(t,e,n,r,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,n);case 1:return a.add(e+r,n);case 2:return a.add(e+r,n+s);case 3:return a.add(e,n+s)}return a})},_Q=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),CQ=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new ZEe(this.container),this.container.styles.opacity<1&&this.effects.push(new nSe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new tSe(r,s,a))}if(this.container.styles.overflowX!==0){var i=s2(this.curves),o=a2(this.curves);V6(i,o)?this.effects.push(new vy(i,6)):(this.effects.push(new vy(i,2)),this.effects.push(new vy(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(l){return!bQ(l)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=s2(r.curves),o=a2(r.curves);V6(i,o)||s.unshift(new vy(o,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(l){return Ni(l.target,e)})},t}(),dT=function(t,e,n,r){t.container.elements.forEach(function(s){var a=Ni(s.flags,4),i=Ni(s.flags,2),o=new CQ(s,t);Ni(s.styles.display,2048)&&r.push(o);var l=Ni(s.flags,8)?[]:r;if(a||i){var u=a||s.styles.isPositioned()?n:e,d=new _Q(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var m=s.styles.zIndex.order;if(m<0){var p=0;u.negativeZIndex.some(function(C,y){return m>C.element.container.styles.zIndex.order?(p=y,!1):p>0}),u.negativeZIndex.splice(p,0,d)}else if(m>0){var x=0;u.positiveZIndex.some(function(C,y){return m>=C.element.container.styles.zIndex.order?(x=y+1,!1):x>0}),u.positiveZIndex.splice(x,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);dT(o,d,a?d:n,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),dT(o,e,n,l);Ni(s.flags,8)&&EQ(s,l)})},EQ=function(t,e){for(var n=t instanceof oT?t.start:1,r=t instanceof oT?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof lQ&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=Ox(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},iSe=function(t){var e=new CQ(t,null),n=new _Q(e),r=[];return dT(e,n,n,r),EQ(e.container,r),n},z6=function(t,e){switch(e){case 0:return nu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return nu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return nu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return nu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},oSe=function(t,e){switch(e){case 0:return nu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return nu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return nu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return nu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},lSe=function(t,e){switch(e){case 0:return nu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return nu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return nu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return nu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},cSe=function(t,e){switch(e){case 0:return yy(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return yy(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return yy(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return yy(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},yy=function(t,e){var n=[];return Yc(t)?n.push(t.subdivide(.5,!1)):n.push(t),Yc(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},nu=function(t,e,n,r){var s=[];return Yc(t)?s.push(t.subdivide(.5,!1)):s.push(t),Yc(n)?s.push(n.subdivide(.5,!0)):s.push(n),Yc(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Yc(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},SQ=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},i2=function(t){var e=t.styles,n=t.bounds,r=Vs(e.paddingLeft,n.width),s=Vs(e.paddingRight,n.width),a=Vs(e.paddingTop,n.width),i=Vs(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},uSe=function(t,e){return t===0?e.bounds:t===2?i2(e):SQ(e)},ASe=function(t,e){return t===0?e.bounds:t===2?i2(e):SQ(e)},fE=function(t,e,n){var r=uSe(cm(t.styles.backgroundOrigin,e),t),s=ASe(cm(t.styles.backgroundClip,e),t),a=dSe(cm(t.styles.backgroundSize,e),n,r),i=a[0],o=a[1],l=Ig(cm(t.styles.backgroundPosition,e),r.width-i,r.height-o),u=fSe(cm(t.styles.backgroundRepeat,e),l,a,r,s),d=Math.round(r.left+l[0]),m=Math.round(r.top+l[1]);return[u,d,m,i,o]},$0=function(t){return Bs(t)&&t.value===Fm.AUTO},wy=function(t){return typeof t=="number"},dSe=function(t,e,n){var r=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(hi(i)&&o&&hi(o))return[Vs(i,n.width),Vs(o,n.height)];var l=wy(a);if(Bs(i)&&(i.value===Fm.CONTAIN||i.value===Fm.COVER)){if(wy(a)){var u=n.width/n.height;return u<a!=(i.value===Fm.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var d=wy(r),m=wy(s),p=d||m;if($0(i)&&(!o||$0(o))){if(d&&m)return[r,s];if(!l&&!p)return[n.width,n.height];if(p&&l){var x=d?r:s*a,C=m?s:r/a;return[x,C]}var y=d?r:n.width,T=m?s:n.height;return[y,T]}if(l){var I=0,F=0;return hi(i)?I=Vs(i,n.width):hi(o)&&(F=Vs(o,n.height)),$0(i)?I=F*a:(!o||$0(o))&&(F=I/a),[I,F]}var M=null,O=null;if(hi(i)?M=Vs(i,n.width):o&&hi(o)&&(O=Vs(o,n.height)),M!==null&&(!o||$0(o))&&(O=d&&m?M/r*s:n.height),O!==null&&$0(i)&&(M=d&&m?O/s*r:n.width),M!==null&&O!==null)return[M,O];throw new Error("Unable to calculate background-size for element")},cm=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},fSe=function(t,e,n,r,s){var a=e[0],i=e[1],o=n[0],l=n[1];switch(t){case 2:return[new un(Math.round(r.left),Math.round(r.top+i)),new un(Math.round(r.left+r.width),Math.round(r.top+i)),new un(Math.round(r.left+r.width),Math.round(l+r.top+i)),new un(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new un(Math.round(r.left+a),Math.round(r.top)),new un(Math.round(r.left+a+o),Math.round(r.top)),new un(Math.round(r.left+a+o),Math.round(r.height+r.top)),new un(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new un(Math.round(r.left+a),Math.round(r.top+i)),new un(Math.round(r.left+a+o),Math.round(r.top+i)),new un(Math.round(r.left+a+o),Math.round(r.top+i+l)),new un(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new un(Math.round(s.left),Math.round(s.top)),new un(Math.round(s.left+s.width),Math.round(s.top)),new un(Math.round(s.left+s.width),Math.round(s.height+s.top)),new un(Math.round(s.left),Math.round(s.height+s.top))]}},hSe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",G6="Hidden Text",mSe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=hSe,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(G6)),r.appendChild(a),r.appendChild(s);var o=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(G6)),r.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),TQ=function(){function t(e,n){this.context=e,this.options=n}return t}(),pSe=1e4,gSe=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new mSe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),sSe(n)&&(this.ctx.globalAlpha=n.opacity),rSe(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),bQ(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return ml(this,void 0,void 0,function(){var r;return Oo(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return ml(this,void 0,void 0,function(){return Oo(this,function(r){switch(r.label){case 0:if(Ni(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=K4(n.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,n.bounds.top+s),o+a.ctx.measureText(l).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=bSe(n.fontFamily).join(", "),a=Sv(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(n,r){return ml(this,void 0,void 0,function(){var s,a,i,o,l,u,d,m,p=this;return Oo(this,function(x){return s=this.createFontStyle(r),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,m=r.paintOrder,n.textBounds.forEach(function(C){m.forEach(function(y){switch(y){case 0:p.ctx.fillStyle=zi(r.color),p.renderTextWithLetterSpacing(C,r.letterSpacing,u);var T=r.textShadow;T.length&&C.text.trim().length&&(T.slice(0).reverse().forEach(function(I){p.ctx.shadowColor=zi(I.color),p.ctx.shadowOffsetX=I.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=I.offsetY.number*p.options.scale,p.ctx.shadowBlur=I.blur.number,p.renderTextWithLetterSpacing(C,r.letterSpacing,u)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),r.textDecorationLine.length&&(p.ctx.fillStyle=zi(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(I){switch(I){case 1:p.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+u),C.bounds.width,1);break;case 2:p.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:p.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+d),C.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&C.text.trim().length&&(p.ctx.strokeStyle=zi(r.webkitTextStrokeColor),p.ctx.lineWidth=r.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+u)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=i2(n),i=a2(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return ml(this,void 0,void 0,function(){var r,s,a,i,o,l,F,F,u,d,m,p,O,x,C,Q,y,T,I,F,M,O,Q;return Oo(this,function(j){switch(j.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,i=0,o=r.textNodes,j.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:j.sent(),j.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof aQ))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return F=j.sent(),this.renderReplacedElement(r,s,F),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof iQ&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof oQ))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return F=j.sent(),this.renderReplacedElement(r,s,F),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof AQ&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:d=j.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),j.label=14;case 14:if(r instanceof $4&&(m=Math.min(r.bounds.width,r.bounds.height),r.type===e2?r.checked&&(this.ctx.save(),this.path([new un(r.bounds.left+m*.39363,r.bounds.top+m*.79),new un(r.bounds.left+m*.16,r.bounds.top+m*.5549),new un(r.bounds.left+m*.27347,r.bounds.top+m*.44071),new un(r.bounds.left+m*.39694,r.bounds.top+m*.5649),new un(r.bounds.left+m*.72983,r.bounds.top+m*.23),new un(r.bounds.left+m*.84,r.bounds.top+m*.34085),new un(r.bounds.left+m*.39363,r.bounds.top+m*.79)]),this.ctx.fillStyle=zi(F6),this.ctx.fill(),this.ctx.restore()):r.type===t2&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+m/2,r.bounds.top+m/2,m/4,0,Math.PI*2,!0),this.ctx.fillStyle=zi(F6),this.ctx.fill(),this.ctx.restore())),xSe(r)&&r.value.length){switch(p=this.createFontStyle(a),O=p[0],x=p[1],C=this.fontMetrics.getMetrics(O,x).baseline,this.ctx.font=O,this.ctx.fillStyle=zi(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ySe(r.styles.textAlign),Q=i2(r),y=0,r.styles.textAlign){case 1:y+=Q.width/2;break;case 2:y+=Q.width;break}T=Q.add(y,0,0,-Q.height/2+1),this.ctx.save(),this.path([new un(Q.left,Q.top),new un(Q.left+Q.width,Q.top),new un(Q.left+Q.width,Q.top+Q.height),new un(Q.left,Q.top+Q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ix(r.value,T),a.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ni(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(I=r.styles.listStyleImage,I.type!==0)return[3,18];F=void 0,M=I.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(M)];case 16:return F=j.sent(),this.ctx.drawImage(F,r.bounds.left-(F.width+10),r.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+M),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(O=this.createFontStyle(a)[0],this.ctx.font=O,this.ctx.fillStyle=zi(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Q=new ud(r.bounds.left,r.bounds.top+Vs(r.styles.paddingTop,r.bounds.width),r.bounds.width,m6(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ix(n.listValue,Q),a.letterSpacing,m6(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return ml(this,void 0,void 0,function(){var r,s,I,a,i,I,o,l,I,u,d,I,m,p,I,x,C,I,y,T,I;return Oo(this,function(F){switch(F.label){case 0:if(Ni(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:F.sent(),r=0,s=n.negativeZIndex,F.label=2;case 2:return r<s.length?(I=s[r],[4,this.renderStack(I)]):[3,5];case 3:F.sent(),F.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:F.sent(),a=0,i=n.nonInlineLevel,F.label=7;case 7:return a<i.length?(I=i[a],[4,this.renderNode(I)]):[3,10];case 8:F.sent(),F.label=9;case 9:return a++,[3,7];case 10:o=0,l=n.nonPositionedFloats,F.label=11;case 11:return o<l.length?(I=l[o],[4,this.renderStack(I)]):[3,14];case 12:F.sent(),F.label=13;case 13:return o++,[3,11];case 14:u=0,d=n.nonPositionedInlineLevel,F.label=15;case 15:return u<d.length?(I=d[u],[4,this.renderStack(I)]):[3,18];case 16:F.sent(),F.label=17;case 17:return u++,[3,15];case 18:m=0,p=n.inlineLevel,F.label=19;case 19:return m<p.length?(I=p[m],[4,this.renderNode(I)]):[3,22];case 20:F.sent(),F.label=21;case 21:return m++,[3,19];case 22:x=0,C=n.zeroOrAutoZIndexOrTransformedOrOpacity,F.label=23;case 23:return x<C.length?(I=C[x],[4,this.renderStack(I)]):[3,26];case 24:F.sent(),F.label=25;case 25:return x++,[3,23];case 26:y=0,T=n.positiveZIndex,F.label=27;case 27:return y<T.length?(I=T[y],[4,this.renderStack(I)]):[3,30];case 28:F.sent(),F.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var i=Yc(s)?s.start:s;a===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Yc(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return ml(this,void 0,void 0,function(){var r,s,a,i,o,l;return Oo(this,function(u){switch(u.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var m,p,x,z,ee,oe,G,q,S,C,z,ee,oe,G,q,y,T,I,F,M,O,Q,j,E,S,k,z,P,R,G,q,le,ee,oe,K,ne,X,ce,V,J,re,ie;return Oo(this,function(fe){switch(fe.label){case 0:if(d.type!==0)return[3,5];m=void 0,p=d.url,fe.label=1;case 1:return fe.trys.push([1,3,,4]),[4,a.context.cache.match(p)];case 2:return m=fe.sent(),[3,4];case 3:return fe.sent(),a.context.logger.error("Error loading background-image "+p),[3,4];case 4:return m&&(x=fE(n,r,[m.width,m.height,m.width/m.height]),z=x[0],ee=x[1],oe=x[2],G=x[3],q=x[4],S=a.ctx.createPattern(a.resizeImage(m,G,q),"repeat"),a.renderRepeat(z,S,ee,oe)),[3,6];case 5:r_e(d)?(C=fE(n,r,[null,null,null]),z=C[0],ee=C[1],oe=C[2],G=C[3],q=C[4],y=Jbe(d.angle,G,q),T=y[0],I=y[1],F=y[2],M=y[3],O=y[4],Q=document.createElement("canvas"),Q.width=G,Q.height=q,j=Q.getContext("2d"),E=j.createLinearGradient(I,M,F,O),f6(d.stops,T).forEach(function(Se){return E.addColorStop(Se.stop,zi(Se.color))}),j.fillStyle=E,j.fillRect(0,0,G,q),G>0&&q>0&&(S=a.ctx.createPattern(Q,"repeat"),a.renderRepeat(z,S,ee,oe))):s_e(d)&&(k=fE(n,r,[null,null,null]),z=k[0],P=k[1],R=k[2],G=k[3],q=k[4],le=d.position.length===0?[z4]:d.position,ee=Vs(le[0],G),oe=Vs(le[le.length-1],q),K=Zbe(d,ee,oe,G,q),ne=K[0],X=K[1],ne>0&&X>0&&(ce=a.ctx.createRadialGradient(P+ee,R+oe,0,P+ee,R+oe,ne),f6(d.stops,ne*2).forEach(function(Se){return ce.addColorStop(Se.stop,zi(Se.color))}),a.path(z),a.ctx.fillStyle=ce,ne!==X?(V=n.bounds.left+.5*n.bounds.width,J=n.bounds.top+.5*n.bounds.height,re=X/ne,ie=1/re,a.ctx.save(),a.ctx.translate(V,J),a.ctx.transform(1,0,0,re,0,0),a.ctx.translate(-V,-J),a.ctx.fillRect(P,ie*(R-J)+J,G,q*ie),a.ctx.restore()):a.ctx.fill())),fe.label=6;case 6:return r--,[2]}})},a=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return ml(this,void 0,void 0,function(){return Oo(this,function(a){return this.path(z6(s,r)),this.ctx.fillStyle=zi(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,a){return ml(this,void 0,void 0,function(){var i,o;return Oo(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=oSe(a,s),this.path(i),this.ctx.fillStyle=zi(n),this.ctx.fill(),o=lSe(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return ml(this,void 0,void 0,function(){var r,s,a,i,o,l,u,d,m=this;return Oo(this,function(p){switch(p.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!_f(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=vSe(cm(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),_f(r.backgroundColor)||(this.ctx.fillStyle=zi(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(x){m.ctx.save();var C=s2(n.curves),y=x.inset?0:pSe,T=aSe(C,-y+(x.inset?1:-1)*x.spread.number,(x.inset?1:-1)*x.spread.number,x.spread.number*(x.inset?-2:2),x.spread.number*(x.inset?-2:2));x.inset?(m.path(C),m.ctx.clip(),m.mask(T)):(m.mask(C),m.ctx.clip(),m.path(T)),m.ctx.shadowOffsetX=x.offsetX.number+y,m.ctx.shadowOffsetY=x.offsetY.number,m.ctx.shadowColor=zi(x.color),m.ctx.shadowBlur=x.blur.number,m.ctx.fillStyle=x.inset?zi(x.color):"rgba(0,0,0,1)",m.ctx.fill(),m.ctx.restore()}),p.label=2;case 2:o=0,l=0,u=a,p.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!_f(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,a,i){return ml(this,void 0,void 0,function(){var o,l,u,d,m,p,x,C,y,T,I,F,M,O,Q,j,Q,j;return Oo(this,function(E){return this.ctx.save(),o=cSe(a,s),l=z6(a,s),i===2&&(this.path(l),this.ctx.clip()),Yc(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Yc(l[1])?(m=l[1].end.x,p=l[1].end.y):(m=l[1].x,p=l[1].y),s===0||s===2?x=Math.abs(u-m):x=Math.abs(d-p),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),C=r<3?r*3:r*2,y=r<3?r*2:r,i===3&&(C=r,y=r),T=!0,x<=C*2?T=!1:x<=C*2+y?(I=x/(2*C+y),C*=I,y*=I):(F=Math.floor((x+y)/(C+y)),M=(x-F*C)/(F-1),O=(x-(F+1)*C)/F,y=O<=0||Math.abs(y-M)<Math.abs(y-O)?M:O),T&&(i===3?this.ctx.setLineDash([0,C+y]):this.ctx.setLineDash([C,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=zi(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Yc(l[0])&&(Q=l[3],j=l[0],this.ctx.beginPath(),this.formatPath([new un(Q.end.x,Q.end.y),new un(j.start.x,j.start.y)]),this.ctx.stroke()),Yc(l[1])&&(Q=l[1],j=l[2],this.ctx.beginPath(),this.formatPath([new un(Q.end.x,Q.end.y),new un(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return ml(this,void 0,void 0,function(){var r;return Oo(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=zi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=iSe(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(TQ),xSe=function(t){return t instanceof uQ||t instanceof cQ?!0:t instanceof $4&&t.type!==t2&&t.type!==e2},vSe=function(t,e){switch(t){case 0:return s2(e);case 2:return eSe(e);case 1:default:return a2(e)}},ySe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},wSe=["-apple-system","system-ui"],bSe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return wSe.indexOf(e)===-1}):t},_Se=function(t){Uu(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return ml(this,void 0,void 0,function(){var r,s;return Oo(this,function(a){switch(a.label){case 0:return r=iT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,CSe(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=zi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(TQ),CSe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ESe=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Z1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Z1([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Z1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Z1([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),SSe=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new ESe({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new qEe(this,e)}return t.instanceCount=1,t}(),NQ=function(t,e){return e===void 0&&(e={}),TSe(t,e)};typeof window<"u"&&wQ.setContext(window);var TSe=function(t,e){return ml(void 0,void 0,void 0,function(){var n,r,s,a,i,o,l,u,d,m,p,x,C,y,T,I,F,M,O,Q,E,j,E,S,k,z,P,R,G,q,le,ee,oe,K,ne,X,ce,V,J,re;return Oo(this,function(ie){switch(ie.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(k=e.imageTimeout)!==null&&k!==void 0?k:15e3,proxy:e.proxy,useCORS:(z=e.useCORS)!==null&&z!==void 0?z:!1},a=GS({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},s),i={windowWidth:(R=e.windowWidth)!==null&&R!==void 0?R:r.innerWidth,windowHeight:(G=e.windowHeight)!==null&&G!==void 0?G:r.innerHeight,scrollX:(q=e.scrollX)!==null&&q!==void 0?q:r.pageXOffset,scrollY:(le=e.scrollY)!==null&&le!==void 0?le:r.pageYOffset},o=new ud(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new SSe(a,o),u=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,d={allowTaint:(oe=e.allowTaint)!==null&&oe!==void 0?oe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),m=new Q6(l,t,d),p=m.clonedReferenceElement,p?[4,m.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=ie.sent(),C=W4(p)||BEe(p)?a2e(p.ownerDocument):mb(l,p),y=C.width,T=C.height,I=C.left,F=C.top,M=NSe(l,p,e.backgroundColor),O={canvas:e.canvas,backgroundColor:M,scale:(ne=(K=e.scale)!==null&&K!==void 0?K:r.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((X=e.x)!==null&&X!==void 0?X:0)+I,y:((ce=e.y)!==null&&ce!==void 0?ce:0)+F,width:(V=e.width)!==null&&V!==void 0?V:Math.ceil(y),height:(J=e.height)!==null&&J!==void 0?J:Math.ceil(T)},u?(l.logger.debug("Document cloned, using foreign object rendering"),E=new _Se(l,O),[4,E.render(p)]):[3,3];case 2:return Q=ie.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+I+","+F+" with size "+y+"x"+T+" using computed rendering"),l.logger.debug("Starting DOM parsing"),j=fQ(l,p),M===j.styles.backgroundColor&&(j.styles.backgroundColor=nd.TRANSPARENT),l.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),E=new gSe(l,O),[4,E.render(j)];case 4:Q=ie.sent(),ie.label=5;case 5:return(!((re=e.removeContainer)!==null&&re!==void 0)||re)&&(Q6.destroy(x)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,Q]}})})},NSe=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?sx(t,getComputedStyle(r.documentElement).backgroundColor):nd.TRANSPARENT,a=r.body?sx(t,getComputedStyle(r.body).backgroundColor):nd.TRANSPARENT,i=typeof n=="string"?sx(t,n):n===null?nd.TRANSPARENT:4294967295;return e===r.documentElement?_f(s)?_f(a)?i:a:s:i};const BSe=Object.freeze(Object.defineProperty({__proto__:null,default:NQ},Symbol.toStringTag,{value:"Module"})),Eb="proyectos_interdisciplinarios",BQ="entregas_interdisciplinarias",kSe="usuarios",Y4=t=>{const e=t.data();return{id:t.id,...e}},ISe=t=>{const e=mn(zt(Ut,Eb),Dr("nombreProyecto","asc"));return Un(e,r=>{const s=r.docs.map(a=>Y4(a));t(s)},r=>{console.error("Error al suscribirse a las planificaciones:",r),t([])})},FSe=async t=>{try{return(await na(zt(Ut,Eb),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},q6=async(t,e)=>{try{const{id:n,...r}=e,s=Mn(Ut,Eb,t);await wo(s,r)}catch(n){throw console.error("Error al actualizar la planificación:",n),new Error("No se pudo actualizar la planificación.")}},DSe=async t=>{try{const e=Mn(Ut,Eb,t);await Yi(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},LSe=(t,e)=>{const n=mn(zt(Ut,BQ),cs("planificacionId","==",t));return Un(n,s=>{const a=s.docs.map(i=>Y4(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},K6=async(t,e)=>{try{const n=Mn(Ut,BQ,t);await wo(n,{feedbackProfesor:e,fechaFeedback:Tn.fromDate(new Date)},{merge:!0})}catch(n){throw console.error("Error al guardar la retroalimentación:",n),new Error("No se pudo guardar la retroalimentación.")}},RSe=t=>{const e=mn(zt(Ut,kSe));return Un(e,r=>{const s=r.docs.map(a=>Y4(a));t(s)},r=>{console.error("Error al suscribirse a todos los usuarios:",r),t([])})},PSe=({planificaciones:t,onActivityUpdate:e})=>{const[n,r]=se.useState(null),s=se.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=se.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),m=new Date(`${l.fechaFin}T00:00:00`);return m<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&m>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(x=>x[0]).join("").toUpperCase(),d=x=>{let C=0;for(let y=0;y<x.length;y++)C=x.charCodeAt(y)+((C<<5)-C);return C},m=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],p=Math.abs(d(l))%m.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${m[p]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[m,p]=se.useState(l.activity),x=y=>{p({...m,[y.target.name]:y.target.value})},C=()=>{d(l.planId,m),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:m.nombre,onChange:x,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:m.responsables,onChange:x,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:m.fechaInicio,onChange:x,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:m.fechaFin,onChange:x,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:C,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const u=a(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&r({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),n&&c.jsx(o,{data:n,onClose:()=>r(null),onSave:e})]})},MSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),USe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),OSe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),jSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),QSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),HSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),VSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),zSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),fT=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),qd=({icon:t,label:e,children:n,aiButton:r})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),r]}),n]}),GSe=({initialPlan:t,onSave:e,onCancel:n})=>{const[r,s]=se.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=se.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=se.useState({nombre:"",fecha:""}),[u,d]=se.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[m,p]=se.useState(!1),[x,C]=se.useState(!1),[y,T]=se.useState(!1);se.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const I=async S=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}S==="objetivos"?p(!0):C(!0);const k="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let z="";S==="objetivos"?z=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${r.descripcionProyecto}"`:z=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${r.descripcionProyecto}"
            Objetivos (si existen): "${r.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const le=(await(await new xi(k).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(z)).response).text();s(ee=>({...ee,[S]:le.replace(/(\*\*|\*)/g,"")}))}catch(P){console.error(`Error al generar ${S}`,P),alert(`Hubo un error al generar los ${S}. Inténtelo de nuevo.`)}finally{S==="objetivos"?p(!1):C(!1)}},F=async()=>{if(!r.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}T(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${r.descripcionProyecto}"
            Docentes responsables: "${r.docentesResponsables}"
            Asignaturas involucradas: "${r.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const le=(await(await new xi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(le);s(oe=>{var K,ne,X;return{...oe,actividades:((K=ee.actividades)==null?void 0:K.map(ce=>({...ce,id:crypto.randomUUID()})))||oe.actividades,fechasClave:((ne=ee.fechasClave)==null?void 0:ne.map(ce=>({...ce,id:crypto.randomUUID()})))||oe.fechasClave,tareas:((X=ee.tareas)==null?void 0:X.map((ce,V)=>({...ce,id:crypto.randomUUID(),numero:V+1})))||oe.tareas}})}catch(z){console.error("Error al generar la estructura del proyecto:",z),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{T(!1)}},M=S=>{s(k=>({...k,[S.target.name]:S.target.value}))},O=(S,k)=>{s(z=>{const P=z[S],R=P.includes(k)?P.filter(G=>G!==k):[...P,k];return{...z,[S]:R}})},Q=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(S=>({...S,actividades:[...S.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},j=()=>{!o.nombre||!o.fecha||(s(S=>({...S,fechasClave:[...S.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},E=()=>{var k;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const S={id:crypto.randomUUID(),numero:(((k=r.tareas)==null?void 0:k.length)||0)+1,...u};s(z=>({...z,tareas:[...z.tareas||[],S]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(qd,{icon:c.jsx(MSe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:r.nombreProyecto,onChange:M,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(qd,{icon:c.jsx(USe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:r.docentesResponsables,onChange:M,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(qd,{icon:c.jsx(OSe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:Ja.map(S=>c.jsx("button",{type:"button",onClick:()=>O("cursos",S),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${r.cursos.includes(S)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:S},S))})}),c.jsx(qd,{icon:c.jsx(jSe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:Cc.map(S=>c.jsx("button",{type:"button",onClick:()=>O("asignaturas",S),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${r.asignaturas.includes(S)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:S},S))})}),c.jsx(qd,{icon:c.jsx(QSe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:r.descripcionProyecto,onChange:M,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(qd,{icon:c.jsx(HSe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>I("objetivos"),disabled:!r.descripcionProyecto.trim()||m,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(fT,{})}),children:m?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:r.objetivos,onChange:M,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(qd,{icon:c.jsx(VSe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>I("indicadoresLogro"),disabled:!r.descripcionProyecto.trim()||x,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(fT,{})}),children:x?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:r.indicadoresLogro,onChange:M,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(qd,{icon:c.jsx(zSe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:F,disabled:y||!r.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:y?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:a.nombre,onChange:S=>i({...a,nombre:S.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:a.fechaInicio,onChange:S=>i({...a,fechaInicio:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:a.fechaFin,onChange:S=>i({...a,fechaFin:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:r.actividades.map(S=>c.jsx("li",{children:S.nombre},S.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:S=>l({...o,nombre:S.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:S=>l({...o,fecha:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:j,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:r.fechasClave.map(S=>c.jsxs("li",{children:[S.nombre," (",S.fecha,")"]},S.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:S=>d({...u,instrucciones:S.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:S=>d({...u,fechaEntrega:S.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(r.tareas||[]).map(S=>c.jsxs("li",{children:[S.numero,". ",S.instrucciones]},S.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:n,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(r),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},$6=()=>{const[t,e]=se.useState([]),[n,r]=se.useState(!0),[s,a]=se.useState("list"),[i,o]=se.useState(null),[l,u]=se.useState(null),[d,m]=se.useState(null);se.useEffect(()=>{r(!0);const M=ISe(O=>{e(O),r(!1)});return()=>M()},[]);const p=se.useCallback(async(M,O)=>{const Q=t.find(j=>j.id===M);if(Q){const j={...Q,actividades:(Q.actividades||[]).map(E=>E.id===O.id?O:E)};await q6(M,j)}},[t]),x=async M=>{try{"id"in M&&M.id?await q6(M.id,M):await FSe(M),a("list"),o(null)}catch(O){console.error("Error al guardar la planificación:",O),alert("No se pudo guardar la planificación.")}},C=M=>{o(M),a("form")},y=async M=>{if(console.log("ID recibido por handleDelete:",M),!M){console.error("handleDelete fue llamado con un ID inválido:",M),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await DSe(M)}catch(O){console.error("Error al eliminar la planificación:",O),alert("No se pudo eliminar la planificación.")}},T=()=>{o(null),a("form")},I=async M=>{u(M.id);const O=new En("p","mm","a4"),Q=15,j=O.internal.pageSize.getWidth(),E=O.internal.pageSize.getHeight(),S=j-Q*2;let k=Q;const z=22,P=14,R=11,G=()=>{O.setFont("helvetica","normal"),O.setFontSize(9),O.setTextColor(150),O.text("Proyecto Interdisciplinario",Q,12),O.text("Liceo Industrial de Recoleta",j-Q,12,{align:"right"}),O.setDrawColor(220),O.line(Q,15,j-Q,15)},q=ne=>{k+ne>E-Q&&(O.addPage(),G(),k=Q+15)},le=(ne,X)=>{if(!X||Array.isArray(X)&&X.length===0||typeof X=="string"&&!X.trim())return;const ce=10;O.setFontSize(R);const V=Array.isArray(X)?X.join(", "):String(X),J=O.splitTextToSize(V,S),re=J.length*(R*.35*1.15);q(ce+re+12),O.setFont("helvetica","bold"),O.setFontSize(P),O.setTextColor(40),O.text(ne,Q,k),k+=6,O.setDrawColor(200),O.line(Q,k,Q+30,k),k+=8,O.setFont("helvetica","normal"),O.setFontSize(R),O.setTextColor(80),O.text(J,Q,k),k+=re+12};G(),k=Q+20,O.setFont("helvetica","bold"),O.setFontSize(z),O.setTextColor(0);const ee=O.splitTextToSize(M.nombreProyecto,S);if(O.text(ee,Q,k),k+=ee.length*(z*.4)+10,_c(O,{startY:k,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},M.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},M.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},M.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:R,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),k=O.lastAutoTable.finalY+15,le("Descripción del Proyecto",M.descripcionProyecto),le("Objetivos de Aprendizaje",M.objetivos),le("Indicadores de Logro",M.indicadoresLogro),M.tareas&&M.tareas.length>0){const ne=M.tareas.map(ce=>[ce.numero.toString(),ce.instrucciones,ce.fechaEntrega]),X=(ne.length+1)*10+15;q(X+15),O.setFont("helvetica","bold"),O.setFontSize(P),O.setTextColor(40),O.text("Tareas para Estudiantes",Q,k),k+=10,_c(O,{startY:k,head:[["#","Instrucciones","Fecha de Entrega"]],body:ne,theme:"striped",headStyles:{fillColor:[52,73,94]}}),k=O.lastAutoTable.finalY+15}const oe=document.getElementById("gantt-container-vertical");if(oe)try{const X=(await NQ(oe,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");O.addPage(),G(),k=Q+15,O.setFont("helvetica","bold"),O.setFontSize(P),O.setTextColor(40),O.text("Cronograma del Proyecto",Q,k),k+=10;const ce=O.getImageProperties(X),V=S,J=ce.height*V/ce.width;O.addImage(X,"PNG",Q,k,V,J)}catch(ne){console.error("Error generating timeline image:",ne)}const K=O.internal.pages.length-1;for(let ne=1;ne<=K;ne++)O.setPage(ne),O.setFont("helvetica","normal"),O.setFontSize(9),O.setTextColor(150),O.text(`Página ${ne} de ${K}`,j-Q,O.internal.pageSize.getHeight()-10,{align:"right"});O.save(`Proyecto_${M.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},F=({plan:M,onBack:O})=>{var le,ee;const[Q,j]=se.useState([]),[E,S]=se.useState([]),[k,z]=se.useState(((le=M.tareas)==null?void 0:le[0])||null),[P,R]=se.useState(null);se.useEffect(()=>{const oe=RSe(j),K=LSe(M.id,S);return()=>{oe(),K()}},[M.id]);const G=se.useMemo(()=>Q.filter(oe=>oe.profile===tn.ESTUDIANTE&&M.cursos.includes(oe.curso||"")).sort((oe,K)=>oe.nombreCompleto.localeCompare(K.nombreCompleto)),[Q,M.cursos]),q=async oe=>{var X;R(oe.id);const K="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ne=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${k==null?void 0:k.instrucciones}"
                - Comentario del estudiante: "${oe.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${oe.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((X=oe.archivoAdjunto)==null?void 0:X.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const ie=(await(await new xi(K).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(ne)).response).text().replace(/(\*\*|\*)/g,"");await K6(oe.id,ie)}catch(ce){console.error("Error al generar feedback con IA:",ce),alert("No se pudo generar la retroalimentación.")}finally{R(null)}};return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",M.nombreProyecto]}),c.jsx("button",{onClick:O,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:k.id,onChange:oe=>{var K;return z(((K=M.tareas)==null?void 0:K.find(ne=>ne.id===oe.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(ee=M.tareas)==null?void 0:ee.map(oe=>c.jsxs("option",{value:oe.id,children:["Tarea ",oe.numero,": ",oe.instrucciones]},oe.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:G.map(oe=>{const K=E.find(ne=>ne.tareaId===k.id&&ne.estudianteId===oe.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[oe.nombreCompleto," - ",K!=null&&K.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),K?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[K.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",K.observacionesEstudiante]}),K.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:K.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:K.enlaceUrl})]}),K.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:K.archivoAdjunto.url,download:K.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:K.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:K.feedbackProfesor||"",onBlur:ne=>K6(K.id,ne.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},K.id),c.jsx("button",{onClick:()=>q(K),disabled:P===K.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:P===K.id?"...":c.jsx(fT,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},oe.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return n?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(F,{plan:d,onBack:()=>m(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(M=>(console.log("Inspeccionando objeto plan:",M),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:M.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(M.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>m(M),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>I(M),disabled:l===M.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===M.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>C(M),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>y(M.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},M.id)))})]}):c.jsx(GSe,{initialPlan:i,onSave:x,onCancel:()=>{a("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(PSe,{planificaciones:t,onActivityUpdate:p})})]})},hE="pañolMaquinas",W6="pañolRegistros",qSe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=se.useState(s),[o,l]=se.useState(null),u={nombre:"",especialidad:"Industrial"},[d,m]=se.useState(u),[p,x]=se.useState(null),[C,y]=se.useState({maquinaId:"",curso:"",profesor:"",fecha:""});se.useEffect(()=>{try{const R=localStorage.getItem(hE);if(R&&JSON.parse(R).length>0)e(JSON.parse(R));else{const q=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(q),localStorage.setItem(hE,JSON.stringify(q))}const G=localStorage.getItem(W6);G&&r(JSON.parse(G))}catch(R){console.error("Error al cargar datos de Pañol desde localStorage",R)}},[]);const T=se.useCallback(R=>{e(R),localStorage.setItem(hE,JSON.stringify(R))},[]),I=se.useCallback(R=>{r(R),localStorage.setItem(W6,JSON.stringify(R))},[]),F=R=>{R.preventDefault(),d.nombre.trim()&&(T(p?t.map(G=>G.id===p.id?{...p,...d}:G):[{...d,id:crypto.randomUUID()},...t]),m(u),x(null))},M=se.useCallback(R=>{if(n.some(G=>G.maquinaId===R)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&T(t.filter(G=>G.id!==R))},[t,n,T]),O=R=>{R.preventDefault();const G=o||a;if(!G.curso||!G.profesorResponsable.trim()||!G.maquinaId||G.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}I(o?n.map(q=>q.id===o.id?o:q):[{...a,id:crypto.randomUUID()},...n]),i(s),l(null)},Q=se.useCallback(R=>{window.confirm("¿Eliminar este registro de uso?")&&I(n.filter(G=>G.id!==R))},[n,I]),j=se.useMemo(()=>n.filter(R=>(C.maquinaId===""||R.maquinaId===C.maquinaId)&&(C.curso===""||R.curso===C.curso)&&(C.profesor===""||R.profesorResponsable.toLowerCase().includes(C.profesor.toLowerCase()))&&(C.fecha===""||R.fecha===C.fecha)).sort((R,G)=>new Date(G.fecha).getTime()-new Date(R.fecha).getTime()),[n,C]),E=se.useMemo(()=>new Map(t.map(R=>[R.id,R])),[t]),S=()=>{const R=j.map(le=>{var ee,oe;return{Fecha:le.fecha,Curso:le.curso,Profesor:le.profesorResponsable,Máquina:((ee=E.get(le.maquinaId))==null?void 0:ee.nombre)||"N/A",Especialidad:((oe=E.get(le.maquinaId))==null?void 0:oe.especialidad)||"N/A","Total Horas":le.totalHoras,Observaciones:le.observaciones}}),G=eu.json_to_sheet(R),q=eu.book_new();eu.book_append_sheet(q,G,"RegistrosPañol"),B4(q,"Registros_Pañol.xlsx")},k=()=>{const R=new En;_c(R,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:j.map(G=>{var q,le;return[G.fecha,G.curso,G.profesorResponsable,((q=E.get(G.maquinaId))==null?void 0:q.nombre)||"N/A",((le=E.get(G.maquinaId))==null?void 0:le.especialidad)||"N/A",G.totalHoras,G.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:G=>{R.setFontSize(10),R.setFont("helvetica","bold"),R.text("LICEO INDUSTRIAL DE RECOLETA",G.settings.margin.left,15)}}),R.save("Registros_Pañol.pdf")},z="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",P=()=>{const R=o||a,G=o?l:i;return c.jsxs("form",{onSubmit:O,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:R.fecha,onChange:q=>G({...R,fecha:q.target.value}),className:z,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:R.curso,onChange:q=>G({...R,curso:q.target.value}),className:z,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),Ja.map(q=>c.jsx("option",{children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:R.profesorResponsable,onChange:q=>G({...R,profesorResponsable:q.target.value}),className:z,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),rS.map(q=>c.jsx("option",{value:q,children:q},q))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:R.maquinaId,onChange:q=>G({...R,maquinaId:q.target.value}),className:z,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(q=>c.jsx("option",{value:q.id,children:q.nombre},q.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:R.totalHoras,onChange:q=>G({...R,totalHoras:Number(q.target.value)}),className:z,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:R.observaciones,onChange:q=>G({...R,observaciones:q.target.value}),placeholder:"Observaciones...",className:`${z}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),P()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:F,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:R=>m({...d,nombre:R.target.value}),placeholder:"Nombre máquina",className:z}),c.jsxs("select",{value:d.especialidad,onChange:R=>m({...d,especialidad:R.target.value}),className:z,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:p?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(R=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[R.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",R.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{x(R),m(R)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>M(R.id),className:"text-red-500",children:"🗑️"})]})]},R.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:S,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:k,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:C.fecha,onChange:R=>y({...C,fecha:R.target.value}),className:z}),c.jsxs("select",{value:C.curso,onChange:R=>y({...C,curso:R.target.value}),className:z,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),Ja.map(R=>c.jsx("option",{children:R},R))]}),c.jsxs("select",{value:C.maquinaId,onChange:R=>y({...C,maquinaId:R.target.value}),className:z,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(R=>c.jsx("option",{value:R.id,children:R.nombre},R.id))]}),c.jsx("input",{value:C.profesor,onChange:R=>y({...C,profesor:R.target.value}),placeholder:"Buscar profesor...",className:z})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:j.map(R=>{var G;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:R.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((G=E.get(R.maquinaId))==null?void 0:G.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[R.profesorResponsable," (",R.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:R.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(R),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>Q(R.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},R.id)})})]})})]})]})]})};function wl(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=wl(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var mE={exports:{}},pE={},gE={exports:{}},xE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y6;function KSe(){if(Y6)return xE;Y6=1;var t=$x();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(m,p){var x=p(),C=r({inst:{value:x,getSnapshot:p}}),y=C[0].inst,T=C[1];return a(function(){y.value=x,y.getSnapshot=p,l(y)&&T({inst:y})},[m,x,p]),s(function(){return l(y)&&T({inst:y}),m(function(){l(y)&&T({inst:y})})},[m]),i(x),x}function l(m){var p=m.getSnapshot;m=m.value;try{var x=p();return!n(m,x)}catch{return!0}}function u(m,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return xE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,xE}var X6;function $Se(){return X6||(X6=1,gE.exports=KSe()),gE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6;function WSe(){if(J6)return pE;J6=1;var t=$x(),e=$Se();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return pE.useSyncExternalStoreWithSelector=function(u,d,m,p,x){var C=a(null);if(C.current===null){var y={hasValue:!1,value:null};C.current=y}else y=C.current;C=o(function(){function I(j){if(!F){if(F=!0,M=j,j=p(j),x!==void 0&&y.hasValue){var E=y.value;if(x(E,j))return O=E}return O=j}if(E=O,r(M,j))return E;var S=p(j);return x!==void 0&&x(E,S)?(M=j,E):(M=j,O=S)}var F=!1,M,O,Q=m===void 0?null:m;return[function(){return I(d())},Q===null?void 0:function(){return I(Q())}]},[d,m,p,x]);var T=s(u,C[0],C[1]);return i(function(){y.hasValue=!0,y.value=T},[T]),l(T),T},pE}var Z6;function YSe(){return Z6||(Z6=1,mE.exports=WSe()),mE.exports}var XSe=YSe();const JSe=Kx(XSe),ZSe={},eR=t=>{let e;const n=new Set,r=(d,m)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const x=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(C=>C(e,x))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(ZSe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,l);return l},eTe=t=>t?eR(t):eR,{useDebugValue:tTe}=wt,{useSyncExternalStoreWithSelector:nTe}=JSe,rTe=t=>t;function kQ(t,e=rTe,n){const r=nTe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tTe(r),r}const tR=(t,e)=>{const n=eTe(t),r=(s,a=e)=>kQ(n,s,a);return Object.assign(r,n),r},sTe=(t,e)=>t?tR(t,e):tR;function Zo(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var aTe={value:()=>{}};function Sb(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ew(n)}function ew(t){this._=t}function iTe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ew.prototype=Sb.prototype={constructor:ew,on:function(t,e){var n=this._,r=iTe(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=oTe(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=nR(n[s],t.name,e);else if(e==null)for(s in n)n[s]=nR(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ew(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function oTe(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function nR(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=aTe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var hT="http://www.w3.org/1999/xhtml";const rR={svg:"http://www.w3.org/2000/svg",xhtml:hT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tb(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),rR.hasOwnProperty(e)?{space:rR[e],local:t}:t}function lTe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hT&&e.documentElement.namespaceURI===hT?e.createElement(t):e.createElementNS(n,t)}}function cTe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function IQ(t){var e=Tb(t);return(e.local?cTe:lTe)(e)}function uTe(){}function X4(t){return t==null?uTe:function(){return this.querySelector(t)}}function ATe(t){typeof t!="function"&&(t=X4(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=new Array(i),l,u,d=0;d<i;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Sc(r,this._parents)}function dTe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function fTe(){return[]}function FQ(t){return t==null?fTe:function(){return this.querySelectorAll(t)}}function hTe(t){return function(){return dTe(t.apply(this,arguments))}}function mTe(t){typeof t=="function"?t=hTe(t):t=FQ(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var i=e[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(r.push(t.call(l,l.__data__,u,i)),s.push(l));return new Sc(r,s)}function DQ(t){return function(){return this.matches(t)}}function LQ(t){return function(e){return e.matches(t)}}var pTe=Array.prototype.find;function gTe(t){return function(){return pTe.call(this.children,t)}}function xTe(){return this.firstElementChild}function vTe(t){return this.select(t==null?xTe:gTe(typeof t=="function"?t:LQ(t)))}var yTe=Array.prototype.filter;function wTe(){return Array.from(this.children)}function bTe(t){return function(){return yTe.call(this.children,t)}}function _Te(t){return this.selectAll(t==null?wTe:bTe(typeof t=="function"?t:LQ(t)))}function CTe(t){typeof t!="function"&&(t=DQ(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new Sc(r,this._parents)}function RQ(t){return new Array(t.length)}function ETe(){return new Sc(this._enter||this._groups.map(RQ),this._parents)}function o2(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}o2.prototype={constructor:o2,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function STe(t){return function(){return t}}function TTe(t,e,n,r,s,a){for(var i=0,o,l=e.length,u=a.length;i<u;++i)(o=e[i])?(o.__data__=a[i],r[i]=o):n[i]=new o2(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function NTe(t,e,n,r,s,a,i){var o,l,u=new Map,d=e.length,m=a.length,p=new Array(d),x;for(o=0;o<d;++o)(l=e[o])&&(p[o]=x=i.call(l,l.__data__,o,e)+"",u.has(x)?s[o]=l:u.set(x,l));for(o=0;o<m;++o)x=i.call(t,a[o],o,a)+"",(l=u.get(x))?(r[o]=l,l.__data__=a[o],u.delete(x)):n[o]=new o2(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(p[o])===l&&(s[o]=l)}function BTe(t){return t.__data__}function kTe(t,e){if(!arguments.length)return Array.from(this,BTe);var n=e?NTe:TTe,r=this._parents,s=this._groups;typeof t!="function"&&(t=STe(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=r[u],m=s[u],p=m.length,x=ITe(t.call(d,d&&d.__data__,u,r)),C=x.length,y=o[u]=new Array(C),T=i[u]=new Array(C),I=l[u]=new Array(p);n(d,m,y,T,I,x,e);for(var F=0,M=0,O,Q;F<C;++F)if(O=y[F]){for(F>=M&&(M=F+1);!(Q=T[M])&&++M<C;);O._next=Q||null}}return i=new Sc(i,r),i._enter=o,i._exit=l,i}function ITe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function FTe(){return new Sc(this._exit||this._groups.map(RQ),this._parents)}function DTe(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function LTe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var u=n[l],d=r[l],m=u.length,p=o[l]=new Array(m),x,C=0;C<m;++C)(x=u[C]||d[C])&&(p[C]=x);for(;l<s;++l)o[l]=n[l];return new Sc(o,this._parents)}function RTe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function PTe(t){t||(t=MTe);function e(m,p){return m&&p?t(m.__data__,p.__data__):!m-!p}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],o=i.length,l=s[a]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new Sc(s,this._parents).order()}function MTe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function UTe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function OTe(){return Array.from(this)}function jTe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function QTe(){let t=0;for(const e of this)++t;return t}function HTe(){return!this.node()}function VTe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function zTe(t){return function(){this.removeAttribute(t)}}function GTe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qTe(t,e){return function(){this.setAttribute(t,e)}}function KTe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $Te(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function WTe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function YTe(t,e){var n=Tb(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?GTe:zTe:typeof e=="function"?n.local?WTe:$Te:n.local?KTe:qTe)(n,e))}function PQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function XTe(t){return function(){this.style.removeProperty(t)}}function JTe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ZTe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function e5e(t,e,n){return arguments.length>1?this.each((e==null?XTe:typeof e=="function"?ZTe:JTe)(t,e,n??"")):Xm(this.node(),t)}function Xm(t,e){return t.style.getPropertyValue(e)||PQ(t).getComputedStyle(t,null).getPropertyValue(e)}function t5e(t){return function(){delete this[t]}}function n5e(t,e){return function(){this[t]=e}}function r5e(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function s5e(t,e){return arguments.length>1?this.each((e==null?t5e:typeof e=="function"?r5e:n5e)(t,e)):this.node()[t]}function MQ(t){return t.trim().split(/^|\s+/)}function J4(t){return t.classList||new UQ(t)}function UQ(t){this._node=t,this._names=MQ(t.getAttribute("class")||"")}UQ.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function OQ(t,e){for(var n=J4(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function jQ(t,e){for(var n=J4(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function a5e(t){return function(){OQ(this,t)}}function i5e(t){return function(){jQ(this,t)}}function o5e(t,e){return function(){(e.apply(this,arguments)?OQ:jQ)(this,t)}}function l5e(t,e){var n=MQ(t+"");if(arguments.length<2){for(var r=J4(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?o5e:e?a5e:i5e)(n,e))}function c5e(){this.textContent=""}function u5e(t){return function(){this.textContent=t}}function A5e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function d5e(t){return arguments.length?this.each(t==null?c5e:(typeof t=="function"?A5e:u5e)(t)):this.node().textContent}function f5e(){this.innerHTML=""}function h5e(t){return function(){this.innerHTML=t}}function m5e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function p5e(t){return arguments.length?this.each(t==null?f5e:(typeof t=="function"?m5e:h5e)(t)):this.node().innerHTML}function g5e(){this.nextSibling&&this.parentNode.appendChild(this)}function x5e(){return this.each(g5e)}function v5e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function y5e(){return this.each(v5e)}function w5e(t){var e=typeof t=="function"?t:IQ(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function b5e(){return null}function _5e(t,e){var n=typeof t=="function"?t:IQ(t),r=e==null?b5e:typeof e=="function"?e:X4(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function C5e(){var t=this.parentNode;t&&t.removeChild(this)}function E5e(){return this.each(C5e)}function S5e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function T5e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function N5e(t){return this.select(t?T5e:S5e)}function B5e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function k5e(t){return function(e){t.call(this,e,this.__data__)}}function I5e(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function F5e(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function D5e(t,e,n){return function(){var r=this.__on,s,a=k5e(e);if(r){for(var i=0,o=r.length;i<o;++i)if((s=r[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function L5e(t,e,n){var r=I5e(t+""),s,a=r.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(s=0,d=o[l];s<a;++s)if((i=r[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?D5e:F5e,s=0;s<a;++s)this.each(o(r[s],e,n));return this}function QQ(t,e,n){var r=PQ(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function R5e(t,e){return function(){return QQ(this,t,e)}}function P5e(t,e){return function(){return QQ(this,t,e.apply(this,arguments))}}function M5e(t,e){return this.each((typeof e=="function"?P5e:R5e)(t,e))}function*U5e(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var HQ=[null];function Sc(t,e){this._groups=t,this._parents=e}function Tv(){return new Sc([[document.documentElement]],HQ)}function O5e(){return this}Sc.prototype=Tv.prototype={constructor:Sc,select:ATe,selectAll:mTe,selectChild:vTe,selectChildren:_Te,filter:CTe,data:kTe,enter:ETe,exit:FTe,join:DTe,merge:LTe,selection:O5e,order:RTe,sort:PTe,call:UTe,nodes:OTe,node:jTe,size:QTe,empty:HTe,each:VTe,attr:YTe,style:e5e,property:s5e,classed:l5e,text:d5e,html:p5e,raise:x5e,lower:y5e,append:w5e,insert:_5e,remove:E5e,clone:N5e,datum:B5e,on:L5e,dispatch:M5e,[Symbol.iterator]:U5e};function Zc(t){return typeof t=="string"?new Sc([[document.querySelector(t)]],[document.documentElement]):new Sc([[t]],HQ)}function j5e(t){let e;for(;e=t.sourceEvent;)t=e;return t}function cA(t,e){if(t=j5e(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Q5e={passive:!1},jx={capture:!0,passive:!1};function vE(t){t.stopImmediatePropagation()}function Dm(t){t.preventDefault(),t.stopImmediatePropagation()}function VQ(t){var e=t.document.documentElement,n=Zc(t).on("dragstart.drag",Dm,jx);"onselectstart"in e?n.on("selectstart.drag",Dm,jx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zQ(t,e){var n=t.document.documentElement,r=Zc(t).on("dragstart.drag",null);e&&(r.on("click.drag",Dm,jx),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const by=t=>()=>t;function mT(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}mT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function H5e(t){return!t.ctrlKey&&!t.button}function V5e(){return this.parentNode}function z5e(t,e){return e??{x:t.x,y:t.y}}function G5e(){return navigator.maxTouchPoints||"ontouchstart"in this}function q5e(){var t=H5e,e=V5e,n=z5e,r=G5e,s={},a=Sb("start","drag","end"),i=0,o,l,u,d,m=0;function p(O){O.on("mousedown.drag",x).filter(r).on("touchstart.drag",T).on("touchmove.drag",I,Q5e).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(O,Q){if(!(d||!t.call(this,O,Q))){var j=M(this,e.call(this,O,Q),O,Q,"mouse");j&&(Zc(O.view).on("mousemove.drag",C,jx).on("mouseup.drag",y,jx),VQ(O.view),vE(O),u=!1,o=O.clientX,l=O.clientY,j("start",O))}}function C(O){if(Dm(O),!u){var Q=O.clientX-o,j=O.clientY-l;u=Q*Q+j*j>m}s.mouse("drag",O)}function y(O){Zc(O.view).on("mousemove.drag mouseup.drag",null),zQ(O.view,u),Dm(O),s.mouse("end",O)}function T(O,Q){if(t.call(this,O,Q)){var j=O.changedTouches,E=e.call(this,O,Q),S=j.length,k,z;for(k=0;k<S;++k)(z=M(this,E,O,Q,j[k].identifier,j[k]))&&(vE(O),z("start",O,j[k]))}}function I(O){var Q=O.changedTouches,j=Q.length,E,S;for(E=0;E<j;++E)(S=s[Q[E].identifier])&&(Dm(O),S("drag",O,Q[E]))}function F(O){var Q=O.changedTouches,j=Q.length,E,S;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<j;++E)(S=s[Q[E].identifier])&&(vE(O),S("end",O,Q[E]))}function M(O,Q,j,E,S,k){var z=a.copy(),P=cA(k||j,Q),R,G,q;if((q=n.call(O,new mT("beforestart",{sourceEvent:j,target:p,identifier:S,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:z}),E))!=null)return R=q.x-P[0]||0,G=q.y-P[1]||0,function le(ee,oe,K){var ne=P,X;switch(ee){case"start":s[S]=le,X=i++;break;case"end":delete s[S],--i;case"drag":P=cA(K||oe,Q),X=i;break}z.call(ee,O,new mT(ee,{sourceEvent:oe,subject:q,target:p,identifier:S,active:X,x:P[0]+R,y:P[1]+G,dx:P[0]-ne[0],dy:P[1]-ne[1],dispatch:z}),E)}}return p.filter=function(O){return arguments.length?(t=typeof O=="function"?O:by(!!O),p):t},p.container=function(O){return arguments.length?(e=typeof O=="function"?O:by(O),p):e},p.subject=function(O){return arguments.length?(n=typeof O=="function"?O:by(O),p):n},p.touchable=function(O){return arguments.length?(r=typeof O=="function"?O:by(!!O),p):r},p.on=function(){var O=a.on.apply(a,arguments);return O===a?p:O},p.clickDistance=function(O){return arguments.length?(m=(O=+O)*O,p):Math.sqrt(m)},p}function Z4(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function GQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nv(){}var Qx=.7,l2=1/Qx,Lm="\\s*([+-]?\\d+)\\s*",Hx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K5e=/^#([0-9a-f]{3,8})$/,$5e=new RegExp(`^rgb\\(${Lm},${Lm},${Lm}\\)$`),W5e=new RegExp(`^rgb\\(${yA},${yA},${yA}\\)$`),Y5e=new RegExp(`^rgba\\(${Lm},${Lm},${Lm},${Hx}\\)$`),X5e=new RegExp(`^rgba\\(${yA},${yA},${yA},${Hx}\\)$`),J5e=new RegExp(`^hsl\\(${Hx},${yA},${yA}\\)$`),Z5e=new RegExp(`^hsla\\(${Hx},${yA},${yA},${Hx}\\)$`),sR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Z4(Nv,Vx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aR,formatHex:aR,formatHex8:e4e,formatHsl:t4e,formatRgb:iR,toString:iR});function aR(){return this.rgb().formatHex()}function e4e(){return this.rgb().formatHex8()}function t4e(){return qQ(this).formatHsl()}function iR(){return this.rgb().formatRgb()}function Vx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=K5e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oR(e):n===3?new Kl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_y(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_y(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$5e.exec(t))?new Kl(e[1],e[2],e[3],1):(e=W5e.exec(t))?new Kl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Y5e.exec(t))?_y(e[1],e[2],e[3],e[4]):(e=X5e.exec(t))?_y(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=J5e.exec(t))?uR(e[1],e[2]/100,e[3]/100,1):(e=Z5e.exec(t))?uR(e[1],e[2]/100,e[3]/100,e[4]):sR.hasOwnProperty(t)?oR(sR[t]):t==="transparent"?new Kl(NaN,NaN,NaN,0):null}function oR(t){return new Kl(t>>16&255,t>>8&255,t&255,1)}function _y(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kl(t,e,n,r)}function n4e(t){return t instanceof Nv||(t=Vx(t)),t?(t=t.rgb(),new Kl(t.r,t.g,t.b,t.opacity)):new Kl}function pT(t,e,n,r){return arguments.length===1?n4e(t):new Kl(t,e,n,r??1)}function Kl(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Z4(Kl,pT,GQ(Nv,{brighter(t){return t=t==null?l2:Math.pow(l2,t),new Kl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qx:Math.pow(Qx,t),new Kl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kl(Ph(this.r),Ph(this.g),Ph(this.b),c2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lR,formatHex:lR,formatHex8:r4e,formatRgb:cR,toString:cR}));function lR(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}`}function r4e(){return`#${Ch(this.r)}${Ch(this.g)}${Ch(this.b)}${Ch((isNaN(this.opacity)?1:this.opacity)*255)}`}function cR(){const t=c2(this.opacity);return`${t===1?"rgb(":"rgba("}${Ph(this.r)}, ${Ph(this.g)}, ${Ph(this.b)}${t===1?")":`, ${t})`}`}function c2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ph(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ch(t){return t=Ph(t),(t<16?"0":"")+t.toString(16)}function uR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tu(t,e,n,r)}function qQ(t){if(t instanceof Tu)return new Tu(t.h,t.s,t.l,t.opacity);if(t instanceof Nv||(t=Vx(t)),!t)return new Tu;if(t instanceof Tu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Tu(i,o,l,t.opacity)}function s4e(t,e,n,r){return arguments.length===1?qQ(t):new Tu(t,e,n,r??1)}function Tu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Z4(Tu,s4e,GQ(Nv,{brighter(t){return t=t==null?l2:Math.pow(l2,t),new Tu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qx:Math.pow(Qx,t),new Tu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Kl(yE(t>=240?t-240:t+120,s,r),yE(t,s,r),yE(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Tu(AR(this.h),Cy(this.s),Cy(this.l),c2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=c2(this.opacity);return`${t===1?"hsl(":"hsla("}${AR(this.h)}, ${Cy(this.s)*100}%, ${Cy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function AR(t){return t=(t||0)%360,t<0?t+360:t}function Cy(t){return Math.max(0,Math.min(1,t||0))}function yE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const KQ=t=>()=>t;function a4e(t,e){return function(n){return t+n*e}}function i4e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o4e(t){return(t=+t)==1?$Q:function(e,n){return n-e?i4e(e,n,t):KQ(isNaN(e)?n:e)}}function $Q(t,e){var n=e-t;return n?a4e(t,n):KQ(isNaN(t)?e:t)}const dR=function t(e){var n=o4e(e);function r(s,a){var i=n((s=pT(s)).r,(a=pT(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),u=$Q(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function Jd(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var gT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wE=new RegExp(gT.source,"g");function l4e(t){return function(){return t}}function c4e(t){return function(e){return t(e)+""}}function u4e(t,e){var n=gT.lastIndex=wE.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=gT.exec(t))&&(s=wE.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:Jd(r,s)})),n=wE.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?c4e(l[0].x):l4e(e):(e=l.length,function(u){for(var d=0,m;d<e;++d)o[(m=l[d]).i]=m.x(u);return o.join("")})}var fR=180/Math.PI,xT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WQ(t,e,n,r,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*fR,skewX:Math.atan(l)*fR,scaleX:i,scaleY:o}}var Ey;function A4e(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?xT:WQ(e.a,e.b,e.c,e.d,e.e,e.f)}function d4e(t){return t==null||(Ey||(Ey=document.createElementNS("http://www.w3.org/2000/svg","g")),Ey.setAttribute("transform",t),!(t=Ey.transform.baseVal.consolidate()))?xT:(t=t.matrix,WQ(t.a,t.b,t.c,t.d,t.e,t.f))}function YQ(t,e,n,r){function s(u){return u.length?u.pop()+" ":""}function a(u,d,m,p,x,C){if(u!==m||d!==p){var y=x.push("translate(",null,e,null,n);C.push({i:y-4,x:Jd(u,m)},{i:y-2,x:Jd(d,p)})}else(m||p)&&x.push("translate("+m+e+p+n)}function i(u,d,m,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:m.push(s(m)+"rotate(",null,r)-2,x:Jd(u,d)})):d&&m.push(s(m)+"rotate("+d+r)}function o(u,d,m,p){u!==d?p.push({i:m.push(s(m)+"skewX(",null,r)-2,x:Jd(u,d)}):d&&m.push(s(m)+"skewX("+d+r)}function l(u,d,m,p,x,C){if(u!==m||d!==p){var y=x.push(s(x)+"scale(",null,",",null,")");C.push({i:y-4,x:Jd(u,m)},{i:y-2,x:Jd(d,p)})}else(m!==1||p!==1)&&x.push(s(x)+"scale("+m+","+p+")")}return function(u,d){var m=[],p=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,m,p),i(u.rotate,d.rotate,m,p),o(u.skewX,d.skewX,m,p),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,m,p),u=d=null,function(x){for(var C=-1,y=p.length,T;++C<y;)m[(T=p[C]).i]=T.x(x);return m.join("")}}}var f4e=YQ(A4e,"px, ","px)","deg)"),h4e=YQ(d4e,", ",")",")"),m4e=1e-12;function hR(t){return((t=Math.exp(t))+1/t)/2}function p4e(t){return((t=Math.exp(t))-1/t)/2}function g4e(t){return((t=Math.exp(2*t))-1)/(t+1)}const x4e=function t(e,n,r){function s(a,i){var o=a[0],l=a[1],u=a[2],d=i[0],m=i[1],p=i[2],x=d-o,C=m-l,y=x*x+C*C,T,I;if(y<m4e)I=Math.log(p/u)/e,T=function(E){return[o+E*x,l+E*C,u*Math.exp(e*E*I)]};else{var F=Math.sqrt(y),M=(p*p-u*u+r*y)/(2*u*n*F),O=(p*p-u*u-r*y)/(2*p*n*F),Q=Math.log(Math.sqrt(M*M+1)-M),j=Math.log(Math.sqrt(O*O+1)-O);I=(j-Q)/e,T=function(E){var S=E*I,k=hR(Q),z=u/(n*F)*(k*g4e(e*S+Q)-p4e(Q));return[o+z*x,l+z*C,u*k/hR(e*S+Q)]}}return T.duration=I*1e3*e/Math.SQRT2,T}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var Jm=0,Lg=0,Ag=0,XQ=1e3,u2,Rg,A2=0,Wh=0,Nb=0,zx=typeof performance=="object"&&performance.now?performance:Date,JQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function eN(){return Wh||(JQ(v4e),Wh=zx.now()+Nb)}function v4e(){Wh=0}function d2(){this._call=this._time=this._next=null}d2.prototype=ZQ.prototype={constructor:d2,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?eN():+n)+(e==null?0:+e),!this._next&&Rg!==this&&(Rg?Rg._next=this:u2=this,Rg=this),this._call=t,this._time=n,vT()},stop:function(){this._call&&(this._call=null,this._time=1/0,vT())}};function ZQ(t,e,n){var r=new d2;return r.restart(t,e,n),r}function y4e(){eN(),++Jm;for(var t=u2,e;t;)(e=Wh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Jm}function mR(){Wh=(A2=zx.now())+Nb,Jm=Lg=0;try{y4e()}finally{Jm=0,b4e(),Wh=0}}function w4e(){var t=zx.now(),e=t-A2;e>XQ&&(Nb-=e,A2=t)}function b4e(){for(var t,e=u2,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:u2=n);Rg=t,vT(r)}function vT(t){if(!Jm){Lg&&(Lg=clearTimeout(Lg));var e=t-Wh;e>24?(t<1/0&&(Lg=setTimeout(mR,t-zx.now()-Nb)),Ag&&(Ag=clearInterval(Ag))):(Ag||(A2=zx.now(),Ag=setInterval(w4e,XQ)),Jm=1,JQ(mR))}}function pR(t,e,n){var r=new d2;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var _4e=Sb("start","end","cancel","interrupt"),C4e=[],eH=0,gR=1,yT=2,tw=3,xR=4,wT=5,nw=6;function Bb(t,e,n,r,s,a){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;E4e(t,n,{name:e,index:r,group:s,on:_4e,tween:C4e,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:eH})}function tN(t,e){var n=Ou(t,e);if(n.state>eH)throw new Error("too late; already scheduled");return n}function BA(t,e){var n=Ou(t,e);if(n.state>tw)throw new Error("too late; already running");return n}function Ou(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function E4e(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=ZQ(a,0,n.time);function a(u){n.state=gR,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,m,p,x;if(n.state!==gR)return l();for(d in r)if(x=r[d],x.name===n.name){if(x.state===tw)return pR(i);x.state===xR?(x.state=nw,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[d]):+d<e&&(x.state=nw,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[d])}if(pR(function(){n.state===tw&&(n.state=xR,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=yT,n.on.call("start",t,t.__data__,n.index,n.group),n.state===yT){for(n.state=tw,s=new Array(p=n.tween.length),d=0,m=-1;d<p;++d)(x=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(s[++m]=x);s.length=m+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=wT,1),m=-1,p=s.length;++m<p;)s[m].call(t,d);n.state===wT&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=nw,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function rw(t,e){var n=t.__transition,r,s,a=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((r=n[i]).name!==e){a=!1;continue}s=r.state>yT&&r.state<wT,r.state=nw,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[i]}a&&delete t.__transition}}function S4e(t){return this.each(function(){rw(this,t)})}function T4e(t,e){var n,r;return function(){var s=BA(this,t),a=s.tween;if(a!==n){r=n=a;for(var i=0,o=r.length;i<o;++i)if(r[i].name===e){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function N4e(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=BA(this,t),i=a.tween;if(i!==r){s=(r=i).slice();for(var o={name:e,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function B4e(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ou(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((e==null?T4e:N4e)(n,t,e))}function nN(t,e,n){var r=t._id;return t.each(function(){var s=BA(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Ou(s,r).value[e]}}function tH(t,e){var n;return(typeof e=="number"?Jd:e instanceof Vx?dR:(n=Vx(e))?(e=n,dR):u4e)(t,e)}function k4e(t){return function(){this.removeAttribute(t)}}function I4e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function F4e(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===r?a:a=e(r=i,n)}}function D4e(t,e,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?a:a=e(r=i,n)}}function L4e(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function R4e(t,e,n){var r,s,a;return function(){var i,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o)))}}function P4e(t,e){var n=Tb(t),r=n==="transform"?h4e:tH;return this.attrTween(t,typeof e=="function"?(n.local?R4e:L4e)(n,r,nN(this,"attr."+t,e)):e==null?(n.local?I4e:k4e)(n):(n.local?D4e:F4e)(n,r,e))}function M4e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function U4e(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function O4e(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&U4e(t,a)),n}return s._value=e,s}function j4e(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&M4e(t,a)),n}return s._value=e,s}function Q4e(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Tb(t);return this.tween(n,(r.local?O4e:j4e)(r,e))}function H4e(t,e){return function(){tN(this,t).delay=+e.apply(this,arguments)}}function V4e(t,e){return e=+e,function(){tN(this,t).delay=e}}function z4e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?H4e:V4e)(e,t)):Ou(this.node(),e).delay}function G4e(t,e){return function(){BA(this,t).duration=+e.apply(this,arguments)}}function q4e(t,e){return e=+e,function(){BA(this,t).duration=e}}function K4e(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?G4e:q4e)(e,t)):Ou(this.node(),e).duration}function $4e(t,e){if(typeof e!="function")throw new Error;return function(){BA(this,t).ease=e}}function W4e(t){var e=this._id;return arguments.length?this.each($4e(e,t)):Ou(this.node(),e).ease}function Y4e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;BA(this,t).ease=n}}function X4e(t){if(typeof t!="function")throw new Error;return this.each(Y4e(this._id,t))}function J4e(t){typeof t!="function"&&(t=DQ(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],i=a.length,o=r[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new Ad(r,this._parents,this._name,this._id)}function Z4e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),i=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],d=l.length,m=i[o]=new Array(d),p,x=0;x<d;++x)(p=l[x]||u[x])&&(m[x]=p);for(;o<r;++o)i[o]=e[o];return new Ad(i,this._parents,this._name,this._id)}function eNe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function tNe(t,e,n){var r,s,a=eNe(e)?tN:BA;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}function nNe(t,e){var n=this._id;return arguments.length<2?Ou(this.node(),n).on.on(t):this.each(tNe(n,t,e))}function rNe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function sNe(){return this.on("end.remove",rNe(this._id))}function aNe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=X4(t));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var o=r[i],l=o.length,u=a[i]=new Array(l),d,m,p=0;p<l;++p)(d=o[p])&&(m=t.call(d,d.__data__,p,o))&&("__data__"in d&&(m.__data__=d.__data__),u[p]=m,Bb(u[p],e,n,p,u,Ou(d,n)));return new Ad(a,this._parents,e,n)}function iNe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=FQ(t));for(var r=this._groups,s=r.length,a=[],i=[],o=0;o<s;++o)for(var l=r[o],u=l.length,d,m=0;m<u;++m)if(d=l[m]){for(var p=t.call(d,d.__data__,m,l),x,C=Ou(d,n),y=0,T=p.length;y<T;++y)(x=p[y])&&Bb(x,e,n,y,p,C);a.push(p),i.push(d)}return new Ad(a,i,e,n)}var oNe=Tv.prototype.constructor;function lNe(){return new oNe(this._groups,this._parents)}function cNe(t,e){var n,r,s;return function(){var a=Xm(this,t),i=(this.style.removeProperty(t),Xm(this,t));return a===i?null:a===n&&i===r?s:s=e(n=a,r=i)}}function nH(t){return function(){this.style.removeProperty(t)}}function uNe(t,e,n){var r,s=n+"",a;return function(){var i=Xm(this,t);return i===s?null:i===r?a:a=e(r=i,n)}}function ANe(t,e,n){var r,s,a;return function(){var i=Xm(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Xm(this,t))),i===l?null:i===r&&l===s?a:(s=l,a=e(r=i,o))}}function dNe(t,e){var n,r,s,a="style."+e,i="end."+a,o;return function(){var l=BA(this,t),u=l.on,d=l.value[a]==null?o||(o=nH(e)):void 0;(u!==n||s!==d)&&(r=(n=u).copy()).on(i,s=d),l.on=r}}function fNe(t,e,n){var r=(t+="")=="transform"?f4e:tH;return e==null?this.styleTween(t,cNe(t,r)).on("end.style."+t,nH(t)):typeof e=="function"?this.styleTween(t,ANe(t,r,nN(this,"style."+t,e))).each(dNe(this._id,t)):this.styleTween(t,uNe(t,r,e),n).on("end.style."+t,null)}function hNe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function mNe(t,e,n){var r,s;function a(){var i=e.apply(this,arguments);return i!==s&&(r=(s=i)&&hNe(t,i,n)),r}return a._value=e,a}function pNe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,mNe(t,e,n??""))}function gNe(t){return function(){this.textContent=t}}function xNe(t){return function(){var e=t(this);this.textContent=e??""}}function vNe(t){return this.tween("text",typeof t=="function"?xNe(nN(this,"text",t)):gNe(t==null?"":t+""))}function yNe(t){return function(e){this.textContent=t.call(this,e)}}function wNe(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&yNe(s)),e}return r._value=t,r}function bNe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,wNe(t))}function _Ne(){for(var t=this._name,e=this._id,n=rH(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=Ou(l,e);Bb(l,t,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ad(r,this._parents,t,n)}function CNe(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var u=BA(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),s===0&&a()})}var ENe=0;function Ad(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function rH(){return++ENe}var qA=Tv.prototype;Ad.prototype={constructor:Ad,select:aNe,selectAll:iNe,selectChild:qA.selectChild,selectChildren:qA.selectChildren,filter:J4e,merge:Z4e,selection:lNe,transition:_Ne,call:qA.call,nodes:qA.nodes,node:qA.node,size:qA.size,empty:qA.empty,each:qA.each,on:nNe,attr:P4e,attrTween:Q4e,style:fNe,styleTween:pNe,text:vNe,textTween:bNe,remove:sNe,tween:B4e,delay:z4e,duration:K4e,ease:W4e,easeVarying:X4e,end:CNe,[Symbol.iterator]:qA[Symbol.iterator]};function SNe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var TNe={time:null,delay:0,duration:250,ease:SNe};function NNe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function BNe(t){var e,n;t instanceof Ad?(e=t._id,t=t._name):(e=rH(),(n=TNe).time=eN(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&Bb(l,t,e,u,i,n||NNe(l,e));return new Ad(r,this._parents,t,e)}Tv.prototype.interrupt=S4e;Tv.prototype.transition=BNe;const Sy=t=>()=>t;function kNe(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function XA(t,e,n){this.k=t,this.x=e,this.y=n}XA.prototype={constructor:XA,scale:function(t){return t===1?this:new XA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new XA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cf=new XA(1,0,0);XA.prototype;function bE(t){t.stopImmediatePropagation()}function dg(t){t.preventDefault(),t.stopImmediatePropagation()}function INe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function FNe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vR(){return this.__zoom||Cf}function DNe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function LNe(){return navigator.maxTouchPoints||"ontouchstart"in this}function RNe(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function PNe(){var t=INe,e=FNe,n=RNe,r=DNe,s=LNe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=x4e,u=Sb("start","zoom","end"),d,m,p,x=500,C=150,y=0,T=10;function I(q){q.property("__zoom",vR).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",P).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function(q,le,ee,oe){var K=q.selection?q.selection():q;K.property("__zoom",vR),q!==K?Q(q,le,ee,oe):K.interrupt().each(function(){j(this,arguments).event(oe).start().zoom(null,typeof le=="function"?le.apply(this,arguments):le).end()})},I.scaleBy=function(q,le,ee,oe){I.scaleTo(q,function(){var K=this.__zoom.k,ne=typeof le=="function"?le.apply(this,arguments):le;return K*ne},ee,oe)},I.scaleTo=function(q,le,ee,oe){I.transform(q,function(){var K=e.apply(this,arguments),ne=this.__zoom,X=ee==null?O(K):typeof ee=="function"?ee.apply(this,arguments):ee,ce=ne.invert(X),V=typeof le=="function"?le.apply(this,arguments):le;return n(M(F(ne,V),X,ce),K,i)},ee,oe)},I.translateBy=function(q,le,ee,oe){I.transform(q,function(){return n(this.__zoom.translate(typeof le=="function"?le.apply(this,arguments):le,typeof ee=="function"?ee.apply(this,arguments):ee),e.apply(this,arguments),i)},null,oe)},I.translateTo=function(q,le,ee,oe,K){I.transform(q,function(){var ne=e.apply(this,arguments),X=this.__zoom,ce=oe==null?O(ne):typeof oe=="function"?oe.apply(this,arguments):oe;return n(Cf.translate(ce[0],ce[1]).scale(X.k).translate(typeof le=="function"?-le.apply(this,arguments):-le,typeof ee=="function"?-ee.apply(this,arguments):-ee),ne,i)},oe,K)};function F(q,le){return le=Math.max(a[0],Math.min(a[1],le)),le===q.k?q:new XA(le,q.x,q.y)}function M(q,le,ee){var oe=le[0]-ee[0]*q.k,K=le[1]-ee[1]*q.k;return oe===q.x&&K===q.y?q:new XA(q.k,oe,K)}function O(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function Q(q,le,ee,oe){q.on("start.zoom",function(){j(this,arguments).event(oe).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(oe).end()}).tween("zoom",function(){var K=this,ne=arguments,X=j(K,ne).event(oe),ce=e.apply(K,ne),V=ee==null?O(ce):typeof ee=="function"?ee.apply(K,ne):ee,J=Math.max(ce[1][0]-ce[0][0],ce[1][1]-ce[0][1]),re=K.__zoom,ie=typeof le=="function"?le.apply(K,ne):le,fe=l(re.invert(V).concat(J/re.k),ie.invert(V).concat(J/ie.k));return function(Se){if(Se===1)Se=ie;else{var ve=fe(Se),ye=J/ve[2];Se=new XA(ye,V[0]-ve[0]*ye,V[1]-ve[1]*ye)}X.zoom(null,Se)}})}function j(q,le,ee){return!ee&&q.__zooming||new E(q,le)}function E(q,le){this.that=q,this.args=le,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,le),this.taps=0}E.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,le){return this.mouse&&q!=="mouse"&&(this.mouse[1]=le.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=le.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=le.invert(this.touch1[0])),this.that.__zoom=le,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var le=Zc(this.that).datum();u.call(q,this.that,new kNe(q,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:u}),le)}};function S(q,...le){if(!t.apply(this,arguments))return;var ee=j(this,le).event(q),oe=this.__zoom,K=Math.max(a[0],Math.min(a[1],oe.k*Math.pow(2,r.apply(this,arguments)))),ne=cA(q);if(ee.wheel)(ee.mouse[0][0]!==ne[0]||ee.mouse[0][1]!==ne[1])&&(ee.mouse[1]=oe.invert(ee.mouse[0]=ne)),clearTimeout(ee.wheel);else{if(oe.k===K)return;ee.mouse=[ne,oe.invert(ne)],rw(this),ee.start()}dg(q),ee.wheel=setTimeout(X,C),ee.zoom("mouse",n(M(F(oe,K),ee.mouse[0],ee.mouse[1]),ee.extent,i));function X(){ee.wheel=null,ee.end()}}function k(q,...le){if(p||!t.apply(this,arguments))return;var ee=q.currentTarget,oe=j(this,le,!0).event(q),K=Zc(q.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",J,!0),ne=cA(q,ee),X=q.clientX,ce=q.clientY;VQ(q.view),bE(q),oe.mouse=[ne,this.__zoom.invert(ne)],rw(this),oe.start();function V(re){if(dg(re),!oe.moved){var ie=re.clientX-X,fe=re.clientY-ce;oe.moved=ie*ie+fe*fe>y}oe.event(re).zoom("mouse",n(M(oe.that.__zoom,oe.mouse[0]=cA(re,ee),oe.mouse[1]),oe.extent,i))}function J(re){K.on("mousemove.zoom mouseup.zoom",null),zQ(re.view,oe.moved),dg(re),oe.event(re).end()}}function z(q,...le){if(t.apply(this,arguments)){var ee=this.__zoom,oe=cA(q.changedTouches?q.changedTouches[0]:q,this),K=ee.invert(oe),ne=ee.k*(q.shiftKey?.5:2),X=n(M(F(ee,ne),oe,K),e.apply(this,le),i);dg(q),o>0?Zc(this).transition().duration(o).call(Q,X,oe,q):Zc(this).call(I.transform,X,oe,q)}}function P(q,...le){if(t.apply(this,arguments)){var ee=q.touches,oe=ee.length,K=j(this,le,q.changedTouches.length===oe).event(q),ne,X,ce,V;for(bE(q),X=0;X<oe;++X)ce=ee[X],V=cA(ce,this),V=[V,this.__zoom.invert(V),ce.identifier],K.touch0?!K.touch1&&K.touch0[2]!==V[2]&&(K.touch1=V,K.taps=0):(K.touch0=V,ne=!0,K.taps=1+!!d);d&&(d=clearTimeout(d)),ne&&(K.taps<2&&(m=V[0],d=setTimeout(function(){d=null},x)),rw(this),K.start())}}function R(q,...le){if(this.__zooming){var ee=j(this,le).event(q),oe=q.changedTouches,K=oe.length,ne,X,ce,V;for(dg(q),ne=0;ne<K;++ne)X=oe[ne],ce=cA(X,this),ee.touch0&&ee.touch0[2]===X.identifier?ee.touch0[0]=ce:ee.touch1&&ee.touch1[2]===X.identifier&&(ee.touch1[0]=ce);if(X=ee.that.__zoom,ee.touch1){var J=ee.touch0[0],re=ee.touch0[1],ie=ee.touch1[0],fe=ee.touch1[1],Se=(Se=ie[0]-J[0])*Se+(Se=ie[1]-J[1])*Se,ve=(ve=fe[0]-re[0])*ve+(ve=fe[1]-re[1])*ve;X=F(X,Math.sqrt(Se/ve)),ce=[(J[0]+ie[0])/2,(J[1]+ie[1])/2],V=[(re[0]+fe[0])/2,(re[1]+fe[1])/2]}else if(ee.touch0)ce=ee.touch0[0],V=ee.touch0[1];else return;ee.zoom("touch",n(M(X,ce,V),ee.extent,i))}}function G(q,...le){if(this.__zooming){var ee=j(this,le).event(q),oe=q.changedTouches,K=oe.length,ne,X;for(bE(q),p&&clearTimeout(p),p=setTimeout(function(){p=null},x),ne=0;ne<K;++ne)X=oe[ne],ee.touch0&&ee.touch0[2]===X.identifier?delete ee.touch0:ee.touch1&&ee.touch1[2]===X.identifier&&delete ee.touch1;if(ee.touch1&&!ee.touch0&&(ee.touch0=ee.touch1,delete ee.touch1),ee.touch0)ee.touch0[1]=this.__zoom.invert(ee.touch0[0]);else if(ee.end(),ee.taps===2&&(X=cA(X,this),Math.hypot(m[0]-X[0],m[1]-X[1])<T)){var ce=Zc(this).on("dblclick.zoom");ce&&ce.apply(this,arguments)}}}return I.wheelDelta=function(q){return arguments.length?(r=typeof q=="function"?q:Sy(+q),I):r},I.filter=function(q){return arguments.length?(t=typeof q=="function"?q:Sy(!!q),I):t},I.touchable=function(q){return arguments.length?(s=typeof q=="function"?q:Sy(!!q),I):s},I.extent=function(q){return arguments.length?(e=typeof q=="function"?q:Sy([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),I):e},I.scaleExtent=function(q){return arguments.length?(a[0]=+q[0],a[1]=+q[1],I):[a[0],a[1]]},I.translateExtent=function(q){return arguments.length?(i[0][0]=+q[0][0],i[1][0]=+q[1][0],i[0][1]=+q[0][1],i[1][1]=+q[1][1],I):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},I.constrain=function(q){return arguments.length?(n=q,I):n},I.duration=function(q){return arguments.length?(o=+q,I):o},I.interpolate=function(q){return arguments.length?(l=q,I):l},I.on=function(){var q=u.on.apply(u,arguments);return q===u?I:q},I.clickDistance=function(q){return arguments.length?(y=(q=+q)*q,I):Math.sqrt(y)},I.tapDistance=function(q){return arguments.length?(T=+q,I):T},I}var MNe=iP();const kb=se.createContext(null),UNe=kb.Provider,dd={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},sH=dd.error001();function va(t,e){const n=se.useContext(kb);if(n===null)throw new Error(sH);return kQ(n,t,e)}const Xi=()=>{const t=se.useContext(kb);if(t===null)throw new Error(sH);return se.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},ONe=t=>t.userSelectionActive?"none":"all";function aH({position:t,children:e,className:n,style:r,...s}){const a=va(ONe),i=`${t}`.split("-");return wt.createElement("div",{className:wl(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},e)}function jNe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:wt.createElement(aH,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},wt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const QNe=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const m=se.useRef(null),[p,x]=se.useState({x:0,y:0,width:0,height:0}),C=wl(["react-flow__edge-textwrapper",u]);return se.useEffect(()=>{if(m.current){const y=m.current.getBBox();x({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:wt.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:C,visibility:p.width?"visible":"hidden",...d},s&&wt.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),wt.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:m,style:r},n),l)};var HNe=se.memo(QNe);const rN=t=>({width:t.offsetWidth,height:t.offsetHeight}),Zm=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),sN=(t={x:0,y:0},e)=>({x:Zm(t.x,e[0][0],e[1][0]),y:Zm(t.y,e[0][1],e[1][1])}),yR=(t,e,n)=>t<e?Zm(Math.abs(t-e),1,50)/50:t>n?-Zm(Math.abs(t-n),1,50)/50:0,iH=(t,e)=>{const n=yR(t.x,35,e.width-35)*20,r=yR(t.y,35,e.height-35)*20;return[n,r]},oH=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},VNe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),aN=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),zNe=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),wR=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),bT=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},GNe=t=>ru(t.width)&&ru(t.height)&&ru(t.x)&&ru(t.y),ru=t=>!isNaN(t)&&isFinite(t),Ra=Symbol.for("internals"),lH=["Enter"," ","Escape"],qNe=(t,e)=>{},KNe=t=>"nativeEvent"in t;function _T(t){var s,a;const e=KNe(t)?t.nativeEvent:t,n=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const cH=t=>"clientX"in t,Ef=(t,e)=>{var a,i;const n=cH(t),r=n?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},f2=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Bv=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:p,interactionWidth:x=20})=>wt.createElement(wt.Fragment,null,wt.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:p}),x&&wt.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&ru(n)&&ru(r)?wt.createElement(HNe,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);Bv.displayName="BaseEdge";function fg(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function uH({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,i=Math.abs(r-e)/2,o=r<e?r+i:r-i;return[a,o,s,i]}function AH({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+n*.125,u=e*.125+a*.375+o*.375+r*.125,d=Math.abs(l-t),m=Math.abs(u-e);return[l,u,d,m]}var Yh;(function(t){t.Strict="strict",t.Loose="loose"})(Yh||(Yh={}));var Eh;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Eh||(Eh={}));var Gx;(function(t){t.Partial="partial",t.Full="full"})(Gx||(Gx={}));var af;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(af||(af={}));var h2;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(h2||(h2={}));var Sn;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Sn||(Sn={}));function bR({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Sn.Left||t===Sn.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function dH({sourceX:t,sourceY:e,sourcePosition:n=Sn.Bottom,targetX:r,targetY:s,targetPosition:a=Sn.Top}){const[i,o]=bR({pos:n,x1:t,y1:e,x2:r,y2:s}),[l,u]=bR({pos:a,x1:r,y1:s,x2:t,y2:e}),[d,m,p,x]=AH({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${r},${s}`,d,m,p,x]}const iN=se.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Sn.Bottom,targetPosition:a=Sn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:m,style:p,markerEnd:x,markerStart:C,interactionWidth:y})=>{const[T,I,F]=dH({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return wt.createElement(Bv,{path:T,labelX:I,labelY:F,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:m,style:p,markerEnd:x,markerStart:C,interactionWidth:y})});iN.displayName="SimpleBezierEdge";const _R={[Sn.Left]:{x:-1,y:0},[Sn.Right]:{x:1,y:0},[Sn.Top]:{x:0,y:-1},[Sn.Bottom]:{x:0,y:1}},$Ne=({source:t,sourcePosition:e=Sn.Bottom,target:n})=>e===Sn.Left||e===Sn.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},CR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function WNe({source:t,sourcePosition:e=Sn.Bottom,target:n,targetPosition:r=Sn.Top,center:s,offset:a}){const i=_R[e],o=_R[r],l={x:t.x+i.x*a,y:t.y+i.y*a},u={x:n.x+o.x*a,y:n.y+o.y*a},d=$Ne({source:l,sourcePosition:e,target:u}),m=d.x!==0?"x":"y",p=d[m];let x=[],C,y;const T={x:0,y:0},I={x:0,y:0},[F,M,O,Q]=uH({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[m]*o[m]===-1){C=s.x??F,y=s.y??M;const E=[{x:C,y:l.y},{x:C,y:u.y}],S=[{x:l.x,y},{x:u.x,y}];i[m]===p?x=m==="x"?E:S:x=m==="x"?S:E}else{const E=[{x:l.x,y:u.y}],S=[{x:u.x,y:l.y}];if(m==="x"?x=i.x===p?S:E:x=i.y===p?E:S,e===r){const G=Math.abs(t[m]-n[m]);if(G<=a){const q=Math.min(a-1,a-G);i[m]===p?T[m]=(l[m]>t[m]?-1:1)*q:I[m]=(u[m]>n[m]?-1:1)*q}}if(e!==r){const G=m==="x"?"y":"x",q=i[m]===o[G],le=l[G]>u[G],ee=l[G]<u[G];(i[m]===1&&(!q&&le||q&&ee)||i[m]!==1&&(!q&&ee||q&&le))&&(x=m==="x"?E:S)}const k={x:l.x+T.x,y:l.y+T.y},z={x:u.x+I.x,y:u.y+I.y},P=Math.max(Math.abs(k.x-x[0].x),Math.abs(z.x-x[0].x)),R=Math.max(Math.abs(k.y-x[0].y),Math.abs(z.y-x[0].y));P>=R?(C=(k.x+z.x)/2,y=x[0].y):(C=x[0].x,y=(k.y+z.y)/2)}return[[t,{x:l.x+T.x,y:l.y+T.y},...x,{x:u.x+I.x,y:u.y+I.y},n],C,y,O,Q]}function YNe(t,e,n,r){const s=Math.min(CR(t,e)/2,CR(e,n)/2,r),{x:a,y:i}=e;if(t.x===a&&a===n.x||t.y===i&&i===n.y)return`L${a} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${a+s*u},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function CT({sourceX:t,sourceY:e,sourcePosition:n=Sn.Bottom,targetX:r,targetY:s,targetPosition:a=Sn.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,m,p,x,C]=WNe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[d.reduce((T,I,F)=>{let M="";return F>0&&F<d.length-1?M=YNe(d[F-1],I,d[F+1],i):M=`${F===0?"M":"L"}${I.x} ${I.y}`,T+=M,T},""),m,p,x,C]}const Ib=se.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:m=Sn.Bottom,targetPosition:p=Sn.Top,markerEnd:x,markerStart:C,pathOptions:y,interactionWidth:T})=>{const[I,F,M]=CT({sourceX:t,sourceY:e,sourcePosition:m,targetX:n,targetY:r,targetPosition:p,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return wt.createElement(Bv,{path:I,labelX:F,labelY:M,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:x,markerStart:C,interactionWidth:T})});Ib.displayName="SmoothStepEdge";const oN=se.memo(t=>{var e;return wt.createElement(Ib,{...t,pathOptions:se.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});oN.displayName="StepEdge";function XNe({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,i,o]=uH({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,i,o]}const lN=se.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:p,interactionWidth:x})=>{const[C,y,T]=XNe({sourceX:t,sourceY:e,targetX:n,targetY:r});return wt.createElement(Bv,{path:C,labelX:y,labelY:T,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:p,interactionWidth:x})});lN.displayName="StraightEdge";function Ty(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ER({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case Sn.Left:return[e-Ty(e-r,a),n];case Sn.Right:return[e+Ty(r-e,a),n];case Sn.Top:return[e,n-Ty(n-s,a)];case Sn.Bottom:return[e,n+Ty(s-n,a)]}}function fH({sourceX:t,sourceY:e,sourcePosition:n=Sn.Bottom,targetX:r,targetY:s,targetPosition:a=Sn.Top,curvature:i=.25}){const[o,l]=ER({pos:n,x1:t,y1:e,x2:r,y2:s,c:i}),[u,d]=ER({pos:a,x1:r,y1:s,x2:t,y2:e,c:i}),[m,p,x,C]=AH({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${s}`,m,p,x,C]}const m2=se.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Sn.Bottom,targetPosition:a=Sn.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:m,style:p,markerEnd:x,markerStart:C,pathOptions:y,interactionWidth:T})=>{const[I,F,M]=fH({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:y==null?void 0:y.curvature});return wt.createElement(Bv,{path:I,labelX:F,labelY:M,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:m,style:p,markerEnd:x,markerStart:C,interactionWidth:T})});m2.displayName="BezierEdge";const cN=se.createContext(null),JNe=cN.Provider;cN.Consumer;const ZNe=()=>se.useContext(cN),eBe=t=>"id"in t&&"source"in t&&"target"in t,tBe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,ET=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,nBe=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),rBe=(t,e)=>{if(!t.source||!t.target)return e;let n;return eBe(t)?n={...t}:n={...t,id:tBe(t)},nBe(n,e)?e:e.concat(n)},ST=({x:t,y:e},[n,r,s],a,[i,o])=>{const l={x:(t-n)/s,y:(e-r)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},hH=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Rm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},uN=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:i}=Rm(s,e).positionAbsolute;return VNe(r,aN({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return zNe(n)},mH=(t,e,[n,r,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},u=[];return t.forEach(d=>{const{width:m,height:p,selectable:x=!0,hidden:C=!1}=d;if(i&&!x||C)return!1;const{positionAbsolute:y}=Rm(d,o),T={x:y.x,y:y.y,width:m||0,height:p||0},I=bT(l,T),F=typeof m>"u"||typeof p>"u"||m===null||p===null,M=a&&I>0,O=(m||0)*(p||0);(F||M||I>=O||d.dragging)&&u.push(d)}),u},pH=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},gH=(t,e,n,r,s,a=.1)=>{const i=e/(t.width*(1+a)),o=n/(t.height*(1+a)),l=Math.min(i,o),u=Zm(l,r,s),d=t.x+t.width/2,m=t.y+t.height/2,p=e/2-d*u,x=n/2-m*u;return{x:p,y:x,zoom:u}},ph=(t,e=0)=>t.transition().duration(e);function SR(t,e,n,r){return(e[n]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function sBe(t,e,n,r,s,a){const{x:i,y:o}=Ef(t),u=e.elementsFromPoint(i,o).find(C=>C.classList.contains("react-flow__handle"));if(u){const C=u.getAttribute("data-nodeid");if(C){const y=AN(void 0,u),T=u.getAttribute("data-handleid"),I=a({nodeId:C,id:T,type:y});if(I){const F=s.find(M=>M.nodeId===C&&M.type===y&&M.id===T);return{handle:{id:T,type:y,nodeId:C,x:(F==null?void 0:F.x)||n.x,y:(F==null?void 0:F.y)||n.y},validHandleResult:I}}}}let d=[],m=1/0;if(s.forEach(C=>{const y=Math.sqrt((C.x-n.x)**2+(C.y-n.y)**2);if(y<=r){const T=a(C);y<=m&&(y<m?d=[{handle:C,validHandleResult:T}]:y===m&&d.push({handle:C,validHandleResult:T}),m=y)}}),!d.length)return{handle:null,validHandleResult:xH()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:C})=>C.isValid),x=d.some(({handle:C})=>C.type==="target");return d.find(({handle:C,validHandleResult:y})=>x?C.type==="target":p?y.isValid:!0)||d[0]}const aBe={source:null,target:null,sourceHandle:null,targetHandle:null},xH=()=>({handleDomNode:null,isValid:!1,connection:aBe,endHandle:null});function vH(t,e,n,r,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...xH(),handleDomNode:l};if(l){const d=AN(void 0,l),m=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),x=l.classList.contains("connectable"),C=l.classList.contains("connectableend"),y={source:o?m:n,sourceHandle:o?p:r,target:o?n:m,targetHandle:o?r:p};u.connection=y,x&&C&&(e===Yh.Strict?o&&d==="source"||!o&&d==="target":m!==n||p!==r)&&(u.endHandle={nodeId:m,handleId:p,type:d},u.isValid=a(y))}return u}function iBe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Ra]){const{handleBounds:i}=a[Ra];let o=[],l=[];i&&(o=SR(a,i,"source",`${e}-${n}-${r}`),l=SR(a,i,"target",`${e}-${n}-${r}`)),s.push(...o,...l)}return s},[])}function AN(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function _E(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function oBe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function yH({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=oH(t.target),{connectionMode:m,domNode:p,autoPanOnConnect:x,connectionRadius:C,onConnectStart:y,panBy:T,getNodes:I,cancelConnection:F}=a();let M=0,O;const{x:Q,y:j}=Ef(t),E=d==null?void 0:d.elementFromPoint(Q,j),S=AN(l,E),k=p==null?void 0:p.getBoundingClientRect();if(!k||!S)return;let z,P=Ef(t,k),R=!1,G=null,q=!1,le=null;const ee=iBe({nodes:I(),nodeId:n,handleId:e,handleType:S}),oe=()=>{if(!x)return;const[X,ce]=iH(P,k);T({x:X,y:ce}),M=requestAnimationFrame(oe)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:n,handleId:e,type:S},connectionEndHandle:null}),y==null||y(t,{nodeId:n,handleId:e,handleType:S});function K(X){const{transform:ce}=a();P=Ef(X,k);const{handle:V,validHandleResult:J}=sBe(X,d,ST(P,ce,!1,[1,1]),C,ee,re=>vH(re,m,n,e,s?"target":"source",o,d));if(O=V,R||(oe(),R=!0),le=J.handleDomNode,G=J.connection,q=J.isValid,i({connectionPosition:O&&q?hH({x:O.x,y:O.y},ce):P,connectionStatus:oBe(!!O,q),connectionEndHandle:J.endHandle}),!O&&!q&&!le)return _E(z);G.source!==G.target&&le&&(_E(z),z=le,le.classList.add("connecting","react-flow__handle-connecting"),le.classList.toggle("valid",q),le.classList.toggle("react-flow__handle-valid",q))}function ne(X){var ce,V;(O||le)&&G&&q&&(r==null||r(G)),(V=(ce=a()).onConnectEnd)==null||V.call(ce,X),l&&(u==null||u(X)),_E(z),F(),cancelAnimationFrame(M),R=!1,q=!1,G=null,le=null,d.removeEventListener("mousemove",K),d.removeEventListener("mouseup",ne),d.removeEventListener("touchmove",K),d.removeEventListener("touchend",ne)}d.addEventListener("mousemove",K),d.addEventListener("mouseup",ne),d.addEventListener("touchmove",K),d.addEventListener("touchend",ne)}const TR=()=>!0,lBe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),cBe=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},wH=se.forwardRef(({type:t="source",position:e=Sn.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:m,...p},x)=>{var k,z;const C=i||null,y=t==="target",T=Xi(),I=ZNe(),{connectOnClick:F,noPanClassName:M}=va(lBe,Zo),{connecting:O,clickConnecting:Q}=va(cBe(I,C,t),Zo);I||(z=(k=T.getState()).onError)==null||z.call(k,"010",dd.error010());const j=P=>{const{defaultEdgeOptions:R,onConnect:G,hasDefaultEdges:q}=T.getState(),le={...R,...P};if(q){const{edges:ee,setEdges:oe}=T.getState();oe(rBe(le,ee))}G==null||G(le),o==null||o(le)},E=P=>{if(!I)return;const R=cH(P);s&&(R&&P.button===0||!R)&&yH({event:P,handleId:C,nodeId:I,onConnect:j,isTarget:y,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||TR}),R?d==null||d(P):m==null||m(P)},S=P=>{const{onClickConnectStart:R,onClickConnectEnd:G,connectionClickStartHandle:q,connectionMode:le,isValidConnection:ee}=T.getState();if(!I||!q&&!s)return;if(!q){R==null||R(P,{nodeId:I,handleId:C,handleType:t}),T.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:C}});return}const oe=oH(P.target),K=n||ee||TR,{connection:ne,isValid:X}=vH({nodeId:I,id:C,type:t},le,q.nodeId,q.handleId||null,q.type,K,oe);X&&j(ne),G==null||G(P),T.setState({connectionClickStartHandle:null})};return wt.createElement("div",{"data-handleid":C,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${C}-${t}`,className:wl(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",M,u,{source:!y,target:y,connectable:r,connectablestart:s,connectableend:a,connecting:Q,connectionindicator:r&&(s&&!O||a&&O)}]),onMouseDown:E,onTouchStart:E,onClick:F?S:void 0,ref:x,...p},l)});wH.displayName="Handle";var ep=se.memo(wH);const bH=({data:t,isConnectable:e,targetPosition:n=Sn.Top,sourcePosition:r=Sn.Bottom})=>wt.createElement(wt.Fragment,null,wt.createElement(ep,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,wt.createElement(ep,{type:"source",position:r,isConnectable:e}));bH.displayName="DefaultNode";var TT=se.memo(bH);const _H=({data:t,isConnectable:e,sourcePosition:n=Sn.Bottom})=>wt.createElement(wt.Fragment,null,t==null?void 0:t.label,wt.createElement(ep,{type:"source",position:n,isConnectable:e}));_H.displayName="InputNode";var CH=se.memo(_H);const EH=({data:t,isConnectable:e,targetPosition:n=Sn.Top})=>wt.createElement(wt.Fragment,null,wt.createElement(ep,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);EH.displayName="OutputNode";var SH=se.memo(EH);const dN=()=>null;dN.displayName="GroupNode";const uBe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ny=t=>t.id;function ABe(t,e){return Zo(t.selectedNodes.map(Ny),e.selectedNodes.map(Ny))&&Zo(t.selectedEdges.map(Ny),e.selectedEdges.map(Ny))}const TH=se.memo(({onSelectionChange:t})=>{const e=Xi(),{selectedNodes:n,selectedEdges:r}=va(uBe,ABe);return se.useEffect(()=>{const s={nodes:n,edges:r};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});TH.displayName="SelectionListener";const dBe=t=>!!t.onSelectionChange;function fBe({onSelectionChange:t}){const e=va(dBe);return t||e?wt.createElement(TH,{onSelectionChange:t}):null}const hBe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function W0(t,e){se.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ir(t,e,n){se.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const mBe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:m,edgesFocusable:p,edgesUpdatable:x,elevateNodesOnSelect:C,minZoom:y,maxZoom:T,nodeExtent:I,onNodesChange:F,onEdgesChange:M,elementsSelectable:O,connectionMode:Q,snapGrid:j,snapToGrid:E,translateExtent:S,connectOnClick:k,defaultEdgeOptions:z,fitView:P,fitViewOptions:R,onNodesDelete:G,onEdgesDelete:q,onNodeDrag:le,onNodeDragStart:ee,onNodeDragStop:oe,onSelectionDrag:K,onSelectionDragStart:ne,onSelectionDragStop:X,noPanClassName:ce,nodeOrigin:V,rfId:J,autoPanOnConnect:re,autoPanOnNodeDrag:ie,onError:fe,connectionRadius:Se,isValidConnection:ve,nodeDragThreshold:ye})=>{const{setNodes:we,setEdges:me,setDefaultNodesAndEdges:he,setMinZoom:Ve,setMaxZoom:nt,setTranslateExtent:Oe,setNodeExtent:Ie,reset:je}=va(hBe,Zo),Ke=Xi();return se.useEffect(()=>{const st=r==null?void 0:r.map(vt=>({...vt,...z}));return he(n,st),()=>{je()}},[]),Ir("defaultEdgeOptions",z,Ke.setState),Ir("connectionMode",Q,Ke.setState),Ir("onConnect",s,Ke.setState),Ir("onConnectStart",a,Ke.setState),Ir("onConnectEnd",i,Ke.setState),Ir("onClickConnectStart",o,Ke.setState),Ir("onClickConnectEnd",l,Ke.setState),Ir("nodesDraggable",u,Ke.setState),Ir("nodesConnectable",d,Ke.setState),Ir("nodesFocusable",m,Ke.setState),Ir("edgesFocusable",p,Ke.setState),Ir("edgesUpdatable",x,Ke.setState),Ir("elementsSelectable",O,Ke.setState),Ir("elevateNodesOnSelect",C,Ke.setState),Ir("snapToGrid",E,Ke.setState),Ir("snapGrid",j,Ke.setState),Ir("onNodesChange",F,Ke.setState),Ir("onEdgesChange",M,Ke.setState),Ir("connectOnClick",k,Ke.setState),Ir("fitViewOnInit",P,Ke.setState),Ir("fitViewOnInitOptions",R,Ke.setState),Ir("onNodesDelete",G,Ke.setState),Ir("onEdgesDelete",q,Ke.setState),Ir("onNodeDrag",le,Ke.setState),Ir("onNodeDragStart",ee,Ke.setState),Ir("onNodeDragStop",oe,Ke.setState),Ir("onSelectionDrag",K,Ke.setState),Ir("onSelectionDragStart",ne,Ke.setState),Ir("onSelectionDragStop",X,Ke.setState),Ir("noPanClassName",ce,Ke.setState),Ir("nodeOrigin",V,Ke.setState),Ir("rfId",J,Ke.setState),Ir("autoPanOnConnect",re,Ke.setState),Ir("autoPanOnNodeDrag",ie,Ke.setState),Ir("onError",fe,Ke.setState),Ir("connectionRadius",Se,Ke.setState),Ir("isValidConnection",ve,Ke.setState),Ir("nodeDragThreshold",ye,Ke.setState),W0(t,we),W0(e,me),W0(y,Ve),W0(T,nt),W0(S,Oe),W0(I,Ie),null},NR={display:"none"},pBe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},NH="react-flow__node-desc",BH="react-flow__edge-desc",gBe="react-flow__aria-live",xBe=t=>t.ariaLiveMessage;function vBe({rfId:t}){const e=va(xBe);return wt.createElement("div",{id:`${gBe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:pBe},e)}function yBe({rfId:t,disableKeyboardA11y:e}){return wt.createElement(wt.Fragment,null,wt.createElement("div",{id:`${NH}-${t}`,style:NR},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),wt.createElement("div",{id:`${BH}-${t}`,style:NR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&wt.createElement(vBe,{rfId:t}))}var qx=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=se.useState(!1),s=se.useRef(!1),a=se.useRef(new Set([])),[i,o]=se.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.split("+")),d=u.reduce((m,p)=>m.concat(...p),[]);return[u,d]}return[[],[]]},[t]);return se.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&_T(x))return!1;const y=kR(x.code,o);a.current.add(x[y]),BR(i,a.current,!1)&&(x.preventDefault(),r(!0))},m=x=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&_T(x))return!1;const y=kR(x.code,o);BR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(x[y]),x.key==="Meta"&&a.current.clear(),s.current=!1},p=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",m),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",m),window.removeEventListener("blur",p)}}},[t,r]),n};function BR(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function kR(t,e){return e.includes(t)?"code":"key"}function kH(t,e,n,r){var o,l;const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),i=Rm(a,r);return kH(a,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=a[Ra])==null?void 0:o.z)??0)>(n.z??0)?((l=a[Ra])==null?void 0:l.z)??0:n.z??0},r)}function IH(t,e,n){t.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:o,z:l}=kH(r,t,{...r.position,z:((a=r[Ra])==null?void 0:a.z)??0},e);r.positionAbsolute={x:i,y:o},r[Ra].z=l,n!=null&&n[r.id]&&(r[Ra].isParent=!0)}})}function CE(t,e,n,r){const s=new Map,a={},i=r?1e3:0;return t.forEach(o=>{var x;const l=(ru(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},m=o.parentNode||o.parentId;m&&(a[m]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ra,{enumerable:!1,value:{handleBounds:p||(x=u==null?void 0:u[Ra])==null?void 0:x.handleBounds,z:l}}),s.set(o.id,d)}),IH(s,n,a),s}function FH(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:m}=t(),p=e.initial&&!u&&d;if(o&&l&&(p||!e.initial)){const C=n().filter(T=>{var F;const I=e.includeHiddenNodes?T.width&&T.height:!T.hidden;return(F=e.nodes)!=null&&F.length?I&&e.nodes.some(M=>M.id===T.id):I}),y=C.every(T=>T.width&&T.height);if(C.length>0&&y){const T=uN(C,m),{x:I,y:F,zoom:M}=gH(T,r,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),O=Cf.translate(I,F).scale(M);return typeof e.duration=="number"&&e.duration>0?o.transform(ph(l,e.duration),O):o.transform(l,O),!0}}return!1}function wBe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ra]:r[Ra],selected:n.selected})}),new Map(e)}function bBe(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function By({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:wBe(t,s)}),i==null||i(t)),e!=null&&e.length&&(u&&r({edges:bBe(e,a)}),o==null||o(e))}const Y0=()=>{},_Be={zoomIn:Y0,zoomOut:Y0,zoomTo:Y0,getZoom:()=>1,setViewport:Y0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Y0,fitBounds:Y0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},CBe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),EBe=()=>{const t=Xi(),{d3Zoom:e,d3Selection:n}=va(CBe,Zo);return se.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(ph(n,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(ph(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(ph(n,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,u=Cf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(ph(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>FH(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,m=o/2-s*d,p=l/2-a*d,x=Cf.translate(m,p).scale(d);e.transform(ph(n,i==null?void 0:i.duration),x)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:m,zoom:p}=gH(s,i,o,l,u,(a==null?void 0:a.padding)??.1),x=Cf.translate(d,m).scale(p);e.transform(ph(n,a==null?void 0:a.duration),x)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ST(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:u,y:d}=l.getBoundingClientRect(),m={x:s.x-u,y:s.y-d};return ST(m,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),u=hH(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:_Be,[e,n])};function Fb(){const t=EBe(),e=Xi(),n=se.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),r=se.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=se.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(T=>({...T}))},[]),a=se.useCallback(y=>{const{edges:T=[]}=e.getState();return T.find(I=>I.id===y)},[]),i=se.useCallback(y=>{const{getNodes:T,setNodes:I,hasDefaultNodes:F,onNodesChange:M}=e.getState(),O=T(),Q=typeof y=="function"?y(O):y;if(F)I(Q);else if(M){const j=Q.length===0?O.map(E=>({type:"remove",id:E.id})):Q.map(E=>({item:E,type:"reset"}));M(j)}},[]),o=se.useCallback(y=>{const{edges:T=[],setEdges:I,hasDefaultEdges:F,onEdgesChange:M}=e.getState(),O=typeof y=="function"?y(T):y;if(F)I(O);else if(M){const Q=O.length===0?T.map(j=>({type:"remove",id:j.id})):O.map(j=>({item:j,type:"reset"}));M(Q)}},[]),l=se.useCallback(y=>{const T=Array.isArray(y)?y:[y],{getNodes:I,setNodes:F,hasDefaultNodes:M,onNodesChange:O}=e.getState();if(M){const j=[...I(),...T];F(j)}else if(O){const Q=T.map(j=>({item:j,type:"add"}));O(Q)}},[]),u=se.useCallback(y=>{const T=Array.isArray(y)?y:[y],{edges:I=[],setEdges:F,hasDefaultEdges:M,onEdgesChange:O}=e.getState();if(M)F([...I,...T]);else if(O){const Q=T.map(j=>({item:j,type:"add"}));O(Q)}},[]),d=se.useCallback(()=>{const{getNodes:y,edges:T=[],transform:I}=e.getState(),[F,M,O]=I;return{nodes:y().map(Q=>({...Q})),edges:T.map(Q=>({...Q})),viewport:{x:F,y:M,zoom:O}}},[]),m=se.useCallback(({nodes:y,edges:T})=>{const{nodeInternals:I,getNodes:F,edges:M,hasDefaultNodes:O,hasDefaultEdges:Q,onNodesDelete:j,onEdgesDelete:E,onNodesChange:S,onEdgesChange:k}=e.getState(),z=(y||[]).map(le=>le.id),P=(T||[]).map(le=>le.id),R=F().reduce((le,ee)=>{const oe=ee.parentNode||ee.parentId,K=!z.includes(ee.id)&&oe&&le.find(X=>X.id===oe);return(typeof ee.deletable=="boolean"?ee.deletable:!0)&&(z.includes(ee.id)||K)&&le.push(ee),le},[]),G=M.filter(le=>typeof le.deletable=="boolean"?le.deletable:!0),q=G.filter(le=>P.includes(le.id));if(R||q){const le=pH(R,G),ee=[...q,...le],oe=ee.reduce((K,ne)=>(K.includes(ne.id)||K.push(ne.id),K),[]);if((Q||O)&&(Q&&e.setState({edges:M.filter(K=>!oe.includes(K.id))}),O&&(R.forEach(K=>{I.delete(K.id)}),e.setState({nodeInternals:new Map(I)}))),oe.length>0&&(E==null||E(ee),k&&k(oe.map(K=>({id:K,type:"remove"})))),R.length>0&&(j==null||j(R),S)){const K=R.map(ne=>({id:ne.id,type:"remove"}));S(K)}}},[]),p=se.useCallback(y=>{const T=GNe(y),I=T?null:e.getState().nodeInternals.get(y.id);return!T&&!I?[null,null,T]:[T?y:wR(I),I,T]},[]),x=se.useCallback((y,T=!0,I)=>{const[F,M,O]=p(y);return F?(I||e.getState().getNodes()).filter(Q=>{if(!O&&(Q.id===M.id||!Q.positionAbsolute))return!1;const j=wR(Q),E=bT(j,F);return T&&E>0||E>=F.width*F.height}):[]},[]),C=se.useCallback((y,T,I=!0)=>{const[F]=p(y);if(!F)return!1;const M=bT(F,T);return I&&M>0||M>=F.width*F.height},[]);return se.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:m,getIntersectingNodes:x,isNodeIntersecting:C}),[t,n,r,s,a,i,o,l,u,d,m,x,C])}const SBe={actInsideInputWithModifier:!1};var TBe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Xi(),{deleteElements:r}=Fb(),s=qx(t,SBe),a=qx(e);se.useEffect(()=>{if(s){const{edges:i,getNodes:o}=n.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),se.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function NBe(t){const e=Xi();se.useEffect(()=>{let n;const r=()=>{var a,i;if(!t.current)return;const s=rN(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",dd.error004())),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const fN={position:"absolute",width:"100%",height:"100%",top:0,left:0},BBe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ky=t=>({x:t.x,y:t.y,zoom:t.k}),X0=(t,e)=>t.target.closest(`.${e}`),IR=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),FR=t=>{const e=t.ctrlKey&&f2()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},kBe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),IBe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Eh.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:m=!0,defaultViewport:p,translateExtent:x,minZoom:C,maxZoom:y,zoomActivationKeyCode:T,preventScrolling:I=!0,children:F,noWheelClassName:M,noPanClassName:O})=>{const Q=se.useRef(),j=Xi(),E=se.useRef(!1),S=se.useRef(!1),k=se.useRef(null),z=se.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:R,d3ZoomHandler:G,userSelectionActive:q}=va(kBe,Zo),le=qx(T),ee=se.useRef(0),oe=se.useRef(!1),K=se.useRef();return NBe(k),se.useEffect(()=>{if(k.current){const ne=k.current.getBoundingClientRect(),X=PNe().scaleExtent([C,y]).translateExtent(x),ce=Zc(k.current).call(X),V=Cf.translate(p.x,p.y).scale(Zm(p.zoom,C,y)),J=[[0,0],[ne.width,ne.height]],re=X.constrain()(V,J,x);X.transform(ce,re),X.wheelDelta(FR),j.setState({d3Zoom:X,d3Selection:ce,d3ZoomHandler:ce.on("wheel.zoom"),transform:[re.x,re.y,re.k],domNode:k.current.closest(".react-flow")})}},[]),se.useEffect(()=>{R&&P&&(i&&!le&&!q?R.on("wheel.zoom",ne=>{if(X0(ne,M))return!1;ne.preventDefault(),ne.stopImmediatePropagation();const X=R.property("__zoom").k||1;if(ne.ctrlKey&&a){const ve=cA(ne),ye=FR(ne),we=X*Math.pow(2,ye);P.scaleTo(R,we,ve,ne);return}const ce=ne.deltaMode===1?20:1;let V=l===Eh.Vertical?0:ne.deltaX*ce,J=l===Eh.Horizontal?0:ne.deltaY*ce;!f2()&&ne.shiftKey&&l!==Eh.Vertical&&(V=ne.deltaY*ce,J=0),P.translateBy(R,-(V/X)*o,-(J/X)*o,{internal:!0});const re=ky(R.property("__zoom")),{onViewportChangeStart:ie,onViewportChange:fe,onViewportChangeEnd:Se}=j.getState();clearTimeout(K.current),oe.current||(oe.current=!0,e==null||e(ne,re),ie==null||ie(re)),oe.current&&(t==null||t(ne,re),fe==null||fe(re),K.current=setTimeout(()=>{n==null||n(ne,re),Se==null||Se(re),oe.current=!1},150))},{passive:!1}):typeof G<"u"&&R.on("wheel.zoom",function(ne,X){if(!I&&ne.type==="wheel"&&!ne.ctrlKey||X0(ne,M))return null;ne.preventDefault(),G.call(this,ne,X)},{passive:!1}))},[q,i,l,R,P,G,le,a,I,M,e,t,n]),se.useEffect(()=>{P&&P.on("start",ne=>{var V,J;if(!ne.sourceEvent||ne.sourceEvent.internal)return null;ee.current=(V=ne.sourceEvent)==null?void 0:V.button;const{onViewportChangeStart:X}=j.getState(),ce=ky(ne.transform);E.current=!0,z.current=ce,((J=ne.sourceEvent)==null?void 0:J.type)==="mousedown"&&j.setState({paneDragging:!0}),X==null||X(ce),e==null||e(ne.sourceEvent,ce)})},[P,e]),se.useEffect(()=>{P&&(q&&!E.current?P.on("zoom",null):q||P.on("zoom",ne=>{var ce;const{onViewportChange:X}=j.getState();if(j.setState({transform:[ne.transform.x,ne.transform.y,ne.transform.k]}),S.current=!!(r&&IR(m,ee.current??0)),(t||X)&&!((ce=ne.sourceEvent)!=null&&ce.internal)){const V=ky(ne.transform);X==null||X(V),t==null||t(ne.sourceEvent,V)}}))},[q,P,t,m,r]),se.useEffect(()=>{P&&P.on("end",ne=>{if(!ne.sourceEvent||ne.sourceEvent.internal)return null;const{onViewportChangeEnd:X}=j.getState();if(E.current=!1,j.setState({paneDragging:!1}),r&&IR(m,ee.current??0)&&!S.current&&r(ne.sourceEvent),S.current=!1,(n||X)&&BBe(z.current,ne.transform)){const ce=ky(ne.transform);z.current=ce,clearTimeout(Q.current),Q.current=setTimeout(()=>{X==null||X(ce),n==null||n(ne.sourceEvent,ce)},i?150:0)}})},[P,i,m,n,r]),se.useEffect(()=>{P&&P.filter(ne=>{const X=le||s,ce=a&&ne.ctrlKey;if((m===!0||Array.isArray(m)&&m.includes(1))&&ne.button===1&&ne.type==="mousedown"&&(X0(ne,"react-flow__node")||X0(ne,"react-flow__edge")))return!0;if(!m&&!X&&!i&&!u&&!a||q||!u&&ne.type==="dblclick"||X0(ne,M)&&ne.type==="wheel"||X0(ne,O)&&(ne.type!=="wheel"||i&&ne.type==="wheel"&&!le)||!a&&ne.ctrlKey&&ne.type==="wheel"||!X&&!i&&!ce&&ne.type==="wheel"||!m&&(ne.type==="mousedown"||ne.type==="touchstart")||Array.isArray(m)&&!m.includes(ne.button)&&ne.type==="mousedown")return!1;const V=Array.isArray(m)&&m.includes(ne.button)||!ne.button||ne.button<=1;return(!ne.ctrlKey||ne.type==="wheel")&&V})},[q,P,s,a,i,u,m,d,le]),wt.createElement("div",{className:"react-flow__renderer",ref:k,style:fN},F)},FBe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function DBe(){const{userSelectionActive:t,userSelectionRect:e}=va(FBe,Zo);return t&&e?wt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function DR(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);r.position.x=r.position.x-i,r.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);r.position.y=r.position.y-i,r.style.height+=i,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function DH(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&DR(r,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&DR(r,i);break}case"remove":return r}return r.push(i),r},n)}function LH(t,e){return DH(t,e)}function LBe(t,e){return DH(t,e)}const Zd=(t,e)=>({id:t,type:"select",selected:e});function mm(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(Zd(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(Zd(r.id,!1))),n},[])}const EE=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},RBe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),RH=se.memo(({isSelecting:t,selectionMode:e=Gx.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:m})=>{const p=se.useRef(null),x=Xi(),C=se.useRef(0),y=se.useRef(0),T=se.useRef(),{userSelectionActive:I,elementsSelectable:F,dragging:M}=va(RBe,Zo),O=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,y.current=0},Q=G=>{a==null||a(G),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},j=G=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){G.preventDefault();return}i==null||i(G)},E=o?G=>o(G):void 0,S=G=>{const{resetSelectedElements:q,domNode:le}=x.getState();if(T.current=le==null?void 0:le.getBoundingClientRect(),!F||!t||G.button!==0||G.target!==p.current||!T.current)return;const{x:ee,y:oe}=Ef(G,T.current);q(),x.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:oe,x:ee,y:oe}}),r==null||r(G)},k=G=>{const{userSelectionRect:q,nodeInternals:le,edges:ee,transform:oe,onNodesChange:K,onEdgesChange:ne,nodeOrigin:X,getNodes:ce}=x.getState();if(!t||!T.current||!q)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Ef(G,T.current),J=q.startX??0,re=q.startY??0,ie={...q,x:V.x<J?V.x:J,y:V.y<re?V.y:re,width:Math.abs(V.x-J),height:Math.abs(V.y-re)},fe=ce(),Se=mH(le,ie,oe,e===Gx.Partial,!0,X),ve=pH(Se,ee).map(we=>we.id),ye=Se.map(we=>we.id);if(C.current!==ye.length){C.current=ye.length;const we=mm(fe,ye);we.length&&(K==null||K(we))}if(y.current!==ve.length){y.current=ve.length;const we=mm(ee,ve);we.length&&(ne==null||ne(we))}x.setState({userSelectionRect:ie})},z=G=>{if(G.button!==0)return;const{userSelectionRect:q}=x.getState();!I&&q&&G.target===p.current&&(Q==null||Q(G)),x.setState({nodesSelectionActive:C.current>0}),O(),s==null||s(G)},P=G=>{I&&(x.setState({nodesSelectionActive:C.current>0}),s==null||s(G)),O()},R=F&&(t||I);return wt.createElement("div",{className:wl(["react-flow__pane",{dragging:M,selection:t}]),onClick:R?void 0:EE(Q,p),onContextMenu:EE(j,p),onWheel:EE(E,p),onMouseEnter:R?void 0:l,onMouseDown:R?S:void 0,onMouseMove:R?k:u,onMouseUp:R?z:void 0,onMouseLeave:R?P:d,ref:p,style:fN},m,wt.createElement(DBe,null))});RH.displayName="Pane";function PH(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:PH(r,e):!1}function LR(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function PBe(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!PH(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function MBe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function MH(t,e,n,r,s=[0,0],a){const i=MBe(t,t.extent||r);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const m=n.get(l),{x:p,y:x}=Rm(m,s).positionAbsolute;o=m&&ru(p)&&ru(x)&&ru(m.width)&&ru(m.height)?[[p+t.width*s[0],x+t.height*s[1]],[p+m.width-t.width+t.width*s[0],x+m.height-t.height+t.height*s[1]]]:o}else a==null||a("005",dd.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const m=n.get(l),{x:p,y:x}=Rm(m,s).positionAbsolute;o=[[t.extent[0][0]+p,t.extent[0][1]+x],[t.extent[1][0]+p,t.extent[1][1]+x]]}let u={x:0,y:0};if(l){const m=n.get(l);u=Rm(m,s).positionAbsolute}const d=o&&o!=="parent"?sN(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function SE({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const RR=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/n,y:(u.top-i.top-o.y)/n,...rN(l)}})};function hg(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function NT({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",dd.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):s([t])}function UBe(){const t=Xi();return se.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function TE(t){return(e,n,r)=>t==null?void 0:t(e,r)}function UH({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=Xi(),[l,u]=se.useState(!1),d=se.useRef([]),m=se.useRef({x:null,y:null}),p=se.useRef(0),x=se.useRef(null),C=se.useRef({x:0,y:0}),y=se.useRef(null),T=se.useRef(!1),I=se.useRef(!1),F=se.useRef(!1),M=UBe();return se.useEffect(()=>{if(t!=null&&t.current){const O=Zc(t.current),Q=({x:S,y:k})=>{const{nodeInternals:z,onNodeDrag:P,onSelectionDrag:R,updateNodePositions:G,nodeExtent:q,snapGrid:le,snapToGrid:ee,nodeOrigin:oe,onError:K}=o.getState();m.current={x:S,y:k};let ne=!1,X={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&q){const V=uN(d.current,oe);X=aN(V)}if(d.current=d.current.map(V=>{const J={x:S-V.distance.x,y:k-V.distance.y};ee&&(J.x=le[0]*Math.round(J.x/le[0]),J.y=le[1]*Math.round(J.y/le[1]));const re=[[q[0][0],q[0][1]],[q[1][0],q[1][1]]];d.current.length>1&&q&&!V.extent&&(re[0][0]=V.positionAbsolute.x-X.x+q[0][0],re[1][0]=V.positionAbsolute.x+(V.width??0)-X.x2+q[1][0],re[0][1]=V.positionAbsolute.y-X.y+q[0][1],re[1][1]=V.positionAbsolute.y+(V.height??0)-X.y2+q[1][1]);const ie=MH(V,J,z,re,oe,K);return ne=ne||V.position.x!==ie.position.x||V.position.y!==ie.position.y,V.position=ie.position,V.positionAbsolute=ie.positionAbsolute,V}),!ne)return;G(d.current,!0,!0),u(!0);const ce=s?P:TE(R);if(ce&&y.current){const[V,J]=SE({nodeId:s,dragItems:d.current,nodeInternals:z});ce(y.current,V,J)}},j=()=>{if(!x.current)return;const[S,k]=iH(C.current,x.current);if(S!==0||k!==0){const{transform:z,panBy:P}=o.getState();m.current.x=(m.current.x??0)-S/z[2],m.current.y=(m.current.y??0)-k/z[2],P({x:S,y:k})&&Q(m.current)}p.current=requestAnimationFrame(j)},E=S=>{var oe;const{nodeInternals:k,multiSelectionActive:z,nodesDraggable:P,unselectNodesAndEdges:R,onNodeDragStart:G,onSelectionDragStart:q}=o.getState();I.current=!0;const le=s?G:TE(q);(!i||!a)&&!z&&s&&((oe=k.get(s))!=null&&oe.selected||R()),s&&a&&i&&NT({id:s,store:o,nodeRef:t});const ee=M(S);if(m.current=ee,d.current=PBe(k,P,ee,s),le&&d.current){const[K,ne]=SE({nodeId:s,dragItems:d.current,nodeInternals:k});le(S.sourceEvent,K,ne)}};if(e)O.on(".drag",null);else{const S=q5e().on("start",k=>{const{domNode:z,nodeDragThreshold:P}=o.getState();P===0&&E(k),F.current=!1;const R=M(k);m.current=R,x.current=(z==null?void 0:z.getBoundingClientRect())||null,C.current=Ef(k.sourceEvent,x.current)}).on("drag",k=>{var G,q;const z=M(k),{autoPanOnNodeDrag:P,nodeDragThreshold:R}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!T.current&&I.current&&P&&(T.current=!0,j()),!I.current){const le=z.xSnapped-(((G=m==null?void 0:m.current)==null?void 0:G.x)??0),ee=z.ySnapped-(((q=m==null?void 0:m.current)==null?void 0:q.y)??0);Math.sqrt(le*le+ee*ee)>R&&E(k)}(m.current.x!==z.xSnapped||m.current.y!==z.ySnapped)&&d.current&&I.current&&(y.current=k.sourceEvent,C.current=Ef(k.sourceEvent,x.current),Q(z))}}).on("end",k=>{if(!(!I.current||F.current)&&(u(!1),T.current=!1,I.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:z,nodeInternals:P,onNodeDragStop:R,onSelectionDragStop:G}=o.getState(),q=s?R:TE(G);if(z(d.current,!1,!1),q){const[le,ee]=SE({nodeId:s,dragItems:d.current,nodeInternals:P});q(k.sourceEvent,le,ee)}}}).filter(k=>{const z=k.target;return!k.button&&(!n||!LR(z,`.${n}`,t))&&(!r||LR(z,r,t))});return O.call(S),()=>{O.on(".drag",null)}}}},[t,e,n,r,a,o,s,i,M]),l}function OH(){const t=Xi();return se.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),m=i().filter(F=>F.selected&&(F.draggable||d&&typeof F.draggable>"u")),p=o?l[0]:5,x=o?l[1]:5,C=n.isShiftPressed?4:1,y=n.x*p*C,T=n.y*x*C,I=m.map(F=>{if(F.positionAbsolute){const M={x:F.positionAbsolute.x+y,y:F.positionAbsolute.y+T};o&&(M.x=l[0]*Math.round(M.x/l[0]),M.y=l[1]*Math.round(M.y/l[1]));const{positionAbsolute:O,position:Q}=MH(F,M,r,s,void 0,u);F.position=Q,F.positionAbsolute=O}return F});a(I,!0,!1)},[])}const Pm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var mg=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:m,onMouseMove:p,onMouseLeave:x,onContextMenu:C,onDoubleClick:y,style:T,className:I,isDraggable:F,isSelectable:M,isConnectable:O,isFocusable:Q,selectNodesOnDrag:j,sourcePosition:E,targetPosition:S,hidden:k,resizeObserver:z,dragHandle:P,zIndex:R,isParent:G,noDragClassName:q,noPanClassName:le,initialized:ee,disableKeyboardA11y:oe,ariaLabel:K,rfId:ne,hasHandleBounds:X})=>{const ce=Xi(),V=se.useRef(null),J=se.useRef(null),re=se.useRef(E),ie=se.useRef(S),fe=se.useRef(r),Se=M||F||d||m||p||x,ve=OH(),ye=hg(n,ce.getState,m),we=hg(n,ce.getState,p),me=hg(n,ce.getState,x),he=hg(n,ce.getState,C),Ve=hg(n,ce.getState,y),nt=je=>{const{nodeDragThreshold:Ke}=ce.getState();if(M&&(!j||!F||Ke>0)&&NT({id:n,store:ce,nodeRef:V}),d){const st=ce.getState().nodeInternals.get(n);st&&d(je,{...st})}},Oe=je=>{if(!_T(je)&&!oe)if(lH.includes(je.key)&&M){const Ke=je.key==="Escape";NT({id:n,store:ce,unselect:Ke,nodeRef:V})}else F&&u&&Object.prototype.hasOwnProperty.call(Pm,je.key)&&(ce.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),ve({x:Pm[je.key].x,y:Pm[je.key].y,isShiftPressed:je.shiftKey}))};se.useEffect(()=>()=>{J.current&&(z==null||z.unobserve(J.current),J.current=null)},[]),se.useEffect(()=>{if(V.current&&!k){const je=V.current;(!ee||!X||J.current!==je)&&(J.current&&(z==null||z.unobserve(J.current)),z==null||z.observe(je),J.current=je)}},[k,ee,X]),se.useEffect(()=>{const je=fe.current!==r,Ke=re.current!==E,st=ie.current!==S;V.current&&(je||Ke||st)&&(je&&(fe.current=r),Ke&&(re.current=E),st&&(ie.current=S),ce.getState().updateNodeDimensions([{id:n,nodeElement:V.current,forceUpdate:!0}]))},[n,r,E,S]);const Ie=UH({nodeRef:V,disabled:k||!F,noDragClassName:q,handleSelector:P,nodeId:n,isSelectable:M,selectNodesOnDrag:j});return k?null:wt.createElement("div",{className:wl(["react-flow__node",`react-flow__node-${r}`,{[le]:F},I,{selected:u,selectable:M,parent:G,dragging:Ie}]),ref:V,style:{zIndex:R,transform:`translate(${o}px,${l}px)`,pointerEvents:Se?"all":"none",visibility:ee?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ye,onMouseMove:we,onMouseLeave:me,onContextMenu:he,onClick:nt,onDoubleClick:Ve,onKeyDown:Q?Oe:void 0,tabIndex:Q?0:void 0,role:Q?"button":void 0,"aria-describedby":oe?void 0:`${NH}-${ne}`,"aria-label":K},wt.createElement(JNe,{value:n},wt.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:i,selected:u,isConnectable:O,sourcePosition:E,targetPosition:S,dragging:Ie,dragHandle:P,zIndex:R})))};return e.displayName="NodeWrapper",se.memo(e)};const OBe=t=>{const e=t.getNodes().filter(n=>n.selected);return{...uN(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function jBe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Xi(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:u}=va(OBe,Zo),d=OH(),m=se.useRef(null);if(se.useEffect(()=>{var C;n||(C=m.current)==null||C.focus({preventScroll:!0})},[n]),UH({nodeRef:m}),u||!s||!a)return null;const p=t?C=>{const y=r.getState().getNodes().filter(T=>T.selected);t(C,y)}:void 0,x=C=>{Object.prototype.hasOwnProperty.call(Pm,C.key)&&d({x:Pm[C.key].x,y:Pm[C.key].y,isShiftPressed:C.shiftKey})};return wt.createElement("div",{className:wl(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},wt.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:s,height:a,top:o,left:i}}))}var QBe=se.memo(jBe);const HBe=t=>t.nodesSelectionActive,jH=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:m,selectionOnDrag:p,selectionMode:x,onSelectionStart:C,onSelectionEnd:y,multiSelectionKeyCode:T,panActivationKeyCode:I,zoomActivationKeyCode:F,elementsSelectable:M,zoomOnScroll:O,zoomOnPinch:Q,panOnScroll:j,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:z,defaultViewport:P,translateExtent:R,minZoom:G,maxZoom:q,preventScrolling:le,onSelectionContextMenu:ee,noWheelClassName:oe,noPanClassName:K,disableKeyboardA11y:ne})=>{const X=va(HBe),ce=qx(m),V=qx(I),J=V||z,re=V||j,ie=ce||p&&J!==!0;return TBe({deleteKeyCode:o,multiSelectionKeyCode:T}),wt.createElement(IBe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:M,zoomOnScroll:O,zoomOnPinch:Q,panOnScroll:re,panOnScrollSpeed:E,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:!ce&&J,defaultViewport:P,translateExtent:R,minZoom:G,maxZoom:q,zoomActivationKeyCode:F,preventScrolling:le,noWheelClassName:oe,noPanClassName:K},wt.createElement(RH,{onSelectionStart:C,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:J,isSelecting:!!ie,selectionMode:x},t,X&&wt.createElement(QBe,{onSelectionContextMenu:ee,noPanClassName:K,disableKeyboardA11y:ne})))};jH.displayName="FlowRenderer";var VBe=se.memo(jH);function zBe(t){return va(se.useCallback(n=>t?mH(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function GBe(t){const e={input:mg(t.input||CH),default:mg(t.default||TT),output:mg(t.output||SH),group:mg(t.group||dN)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=mg(t[a]||TT),s),n);return{...e,...r}}const qBe=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},KBe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),QH=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=va(KBe,Zo),o=zBe(t.onlyRenderVisibleElements),l=se.useRef(),u=se.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(m=>{const p=m.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));a(p)});return l.current=d,d},[]);return se.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),wt.createElement("div",{className:"react-flow__nodes",style:fN},o.map(d=>{var Q,j,E;let m=d.type||"default";t.nodeTypes[m]||(i==null||i("003",dd.error003(m)),m="default");const p=t.nodeTypes[m]||t.nodeTypes.default,x=!!(d.draggable||e&&typeof d.draggable>"u"),C=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||n&&typeof d.connectable>"u"),T=!!(d.focusable||r&&typeof d.focusable>"u"),I=t.nodeExtent?sN(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,F=(I==null?void 0:I.x)??0,M=(I==null?void 0:I.y)??0,O=qBe({x:F,y:M,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return wt.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:m,data:d.data,sourcePosition:d.sourcePosition||Sn.Bottom,targetPosition:d.targetPosition||Sn.Top,hidden:d.hidden,xPos:F,yPos:M,xPosOrigin:O.x,yPosOrigin:O.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:x,isSelectable:C,isConnectable:y,isFocusable:T,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((Q=d[Ra])==null?void 0:Q.z)??0,isParent:!!((j=d[Ra])!=null&&j.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ra])!=null&&E.handleBounds)})}))};QH.displayName="NodeRenderer";var $Be=se.memo(QH);const WBe=(t,e,n)=>n===Sn.Left?t-e:n===Sn.Right?t+e:t,YBe=(t,e,n)=>n===Sn.Top?t-e:n===Sn.Bottom?t+e:t,PR="react-flow__edgeupdater",MR=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>wt.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:wl([PR,`${PR}-${o}`]),cx:WBe(e,r,t),cy:YBe(n,r,t),r,stroke:"transparent",fill:"transparent"}),XBe=()=>!0;var J0=t=>{const e=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:y,style:T,source:I,target:F,sourceX:M,sourceY:O,targetX:Q,targetY:j,sourcePosition:E,targetPosition:S,elementsSelectable:k,hidden:z,sourceHandleId:P,targetHandleId:R,onContextMenu:G,onMouseEnter:q,onMouseMove:le,onMouseLeave:ee,reconnectRadius:oe,onReconnect:K,onReconnectStart:ne,onReconnectEnd:X,markerEnd:ce,markerStart:V,rfId:J,ariaLabel:re,isFocusable:ie,isReconnectable:fe,pathOptions:Se,interactionWidth:ve,disableKeyboardA11y:ye})=>{const we=se.useRef(null),[me,he]=se.useState(!1),[Ve,nt]=se.useState(!1),Oe=Xi(),Ie=se.useMemo(()=>`url('#${ET(V,J)}')`,[V,J]),je=se.useMemo(()=>`url('#${ET(ce,J)}')`,[ce,J]);if(z)return null;const Ke=_t=>{var Lr;const{edges:On,addSelectedEdges:An,unselectNodesAndEdges:Tr,multiSelectionActive:In}=Oe.getState(),nr=On.find(Zn=>Zn.id===n);nr&&(k&&(Oe.setState({nodesSelectionActive:!1}),nr.selected&&In?(Tr({nodes:[],edges:[nr]}),(Lr=we.current)==null||Lr.blur()):An([n])),i&&i(_t,nr))},st=fg(n,Oe.getState,o),vt=fg(n,Oe.getState,G),Tt=fg(n,Oe.getState,q),xt=fg(n,Oe.getState,le),Vt=fg(n,Oe.getState,ee),Kt=(_t,On)=>{if(_t.button!==0)return;const{edges:An,isValidConnection:Tr}=Oe.getState(),In=On?F:I,nr=(On?R:P)||null,Lr=On?"target":"source",Zn=Tr||XBe,ya=On,wr=An.find(lr=>lr.id===n);nt(!0),ne==null||ne(_t,wr,Lr);const us=lr=>{nt(!1),X==null||X(lr,wr,Lr)};yH({event:_t,handleId:nr,nodeId:In,onConnect:lr=>K==null?void 0:K(wr,lr),isTarget:ya,getState:Oe.getState,setState:Oe.setState,isValidConnection:Zn,edgeUpdaterType:Lr,onReconnectEnd:us})},cn=_t=>Kt(_t,!0),Gt=_t=>Kt(_t,!1),Wt=()=>he(!0),sn=()=>he(!1),Qt=!k&&!i,Ht=_t=>{var On;if(!ye&&lH.includes(_t.key)&&k){const{unselectNodesAndEdges:An,addSelectedEdges:Tr,edges:In}=Oe.getState();_t.key==="Escape"?((On=we.current)==null||On.blur(),An({edges:[In.find(Lr=>Lr.id===n)]})):Tr([n])}};return wt.createElement("g",{className:wl(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:u,inactive:Qt,updating:me}]),onClick:Ke,onDoubleClick:st,onContextMenu:vt,onMouseEnter:Tt,onMouseMove:xt,onMouseLeave:Vt,onKeyDown:ie?Ht:void 0,tabIndex:ie?0:void 0,role:ie?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":re===null?void 0:re||`Edge from ${I} to ${F}`,"aria-describedby":ie?`${BH}-${J}`:void 0,ref:we},!Ve&&wt.createElement(t,{id:n,source:I,target:F,selected:l,animated:u,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:y,data:a,style:T,sourceX:M,sourceY:O,targetX:Q,targetY:j,sourcePosition:E,targetPosition:S,sourceHandleId:P,targetHandleId:R,markerStart:Ie,markerEnd:je,pathOptions:Se,interactionWidth:ve}),fe&&wt.createElement(wt.Fragment,null,(fe==="source"||fe===!0)&&wt.createElement(MR,{position:E,centerX:M,centerY:O,radius:oe,onMouseDown:cn,onMouseEnter:Wt,onMouseOut:sn,type:"source"}),(fe==="target"||fe===!0)&&wt.createElement(MR,{position:S,centerX:Q,centerY:j,radius:oe,onMouseDown:Gt,onMouseEnter:Wt,onMouseOut:sn,type:"target"})))};return e.displayName="EdgeWrapper",se.memo(e)};function JBe(t){const e={default:J0(t.default||m2),straight:J0(t.bezier||lN),step:J0(t.step||oN),smoothstep:J0(t.step||Ib),simplebezier:J0(t.simplebezier||iN)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=J0(t[a]||m2),s),n);return{...e,...r}}function UR(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,s=((n==null?void 0:n.y)||0)+e.y,a=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case Sn.Top:return{x:r+a/2,y:s};case Sn.Right:return{x:r+a,y:s+i/2};case Sn.Bottom:return{x:r+a/2,y:s+i};case Sn.Left:return{x:r,y:s+i/2}}}function OR(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const ZBe=(t,e,n,r,s,a)=>{const i=UR(n,t,e),o=UR(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function eke({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=aN({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),m=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(m*p)>0}function jR(t){var r,s,a,i,o;const e=((r=t==null?void 0:t[Ra])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const tke=[{level:0,isMaxLevel:!0,edges:[]}];function nke(t,e,n=!1){let r=-1;const s=t.reduce((i,o)=>{var d,m;const l=ru(o.zIndex);let u=l?o.zIndex:0;if(n){const p=e.get(o.target),x=e.get(o.source),C=o.selected||(p==null?void 0:p.selected)||(x==null?void 0:x.selected),y=Math.max(((d=x==null?void 0:x[Ra])==null?void 0:d.z)||0,((m=p==null?void 0:p[Ra])==null?void 0:m.z)||0,1e3);u=(l?o.zIndex:0)+(C?y:0)}return i[u]?i[u].push(o):i[u]=[o],r=u>r?u:r,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?tke:a}function rke(t,e,n){const r=va(se.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&eke({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return nke(r,e,n)}const ske=({color:t="none",strokeWidth:e=1})=>wt.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ake=({color:t="none",strokeWidth:e=1})=>wt.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),QR={[h2.Arrow]:ske,[h2.ArrowClosed]:ake};function ike(t){const e=Xi();return se.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(QR,t)?QR[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",dd.error009(t)),null)},[t])}const oke=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=ike(e);return l?wt.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},wt.createElement(l,{color:n,strokeWidth:i})):null},lke=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=ET(i,e);r.includes(o)||(s.push({id:o,color:i.color||t,...i}),r.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},HH=({defaultColor:t,rfId:e})=>{const n=va(se.useCallback(lke({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return wt.createElement("defs",null,n.map(r=>wt.createElement(oke,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};HH.displayName="MarkerDefinitions";var cke=se.memo(HH);const uke=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),VH=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:m,onReconnect:p,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:y,children:T,disableKeyboardA11y:I})=>{const{edgesFocusable:F,edgesUpdatable:M,elementsSelectable:O,width:Q,height:j,connectionMode:E,nodeInternals:S,onError:k}=va(uke,Zo),z=rke(e,S,n);return Q?wt.createElement(wt.Fragment,null,z.map(({level:P,edges:R,isMaxLevel:G})=>wt.createElement("svg",{key:P,style:{zIndex:P},width:Q,height:j,className:"react-flow__edges react-flow__container"},G&&wt.createElement(cke,{defaultColor:t,rfId:r}),wt.createElement("g",null,R.map(q=>{const[le,ee,oe]=jR(S.get(q.source)),[K,ne,X]=jR(S.get(q.target));if(!oe||!X)return null;let ce=q.type||"default";s[ce]||(k==null||k("011",dd.error011(ce)),ce="default");const V=s[ce]||s.default,J=E===Yh.Strict?ne.target:(ne.target??[]).concat(ne.source??[]),re=OR(ee.source,q.sourceHandle),ie=OR(J,q.targetHandle),fe=(re==null?void 0:re.position)||Sn.Bottom,Se=(ie==null?void 0:ie.position)||Sn.Top,ve=!!(q.focusable||F&&typeof q.focusable>"u"),ye=q.reconnectable||q.updatable,we=typeof p<"u"&&(ye||M&&typeof ye>"u");if(!re||!ie)return k==null||k("008",dd.error008(re,q)),null;const{sourceX:me,sourceY:he,targetX:Ve,targetY:nt}=ZBe(le,re,fe,K,ie,Se);return wt.createElement(V,{key:q.id,id:q.id,className:wl([q.className,a]),type:ce,data:q.data,selected:!!q.selected,animated:!!q.animated,hidden:!!q.hidden,label:q.label,labelStyle:q.labelStyle,labelShowBg:q.labelShowBg,labelBgStyle:q.labelBgStyle,labelBgPadding:q.labelBgPadding,labelBgBorderRadius:q.labelBgBorderRadius,style:q.style,source:q.source,target:q.target,sourceHandleId:q.sourceHandle,targetHandleId:q.targetHandle,markerEnd:q.markerEnd,markerStart:q.markerStart,sourceX:me,sourceY:he,targetX:Ve,targetY:nt,sourcePosition:fe,targetPosition:Se,elementsSelectable:O,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:m,onReconnect:p,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:y,rfId:r,ariaLabel:q.ariaLabel,isFocusable:ve,isReconnectable:we,pathOptions:"pathOptions"in q?q.pathOptions:void 0,interactionWidth:q.interactionWidth,disableKeyboardA11y:I})})))),T):null};VH.displayName="EdgeRenderer";var Ake=se.memo(VH);const dke=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function fke({children:t}){const e=va(dke);return wt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function hke(t){const e=Fb(),n=se.useRef(!1);se.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const mke={[Sn.Left]:Sn.Right,[Sn.Right]:Sn.Left,[Sn.Top]:Sn.Bottom,[Sn.Bottom]:Sn.Top},zH=({nodeId:t,handleType:e,style:n,type:r=af.Bezier,CustomComponent:s,connectionStatus:a})=>{var j,E,S;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=va(se.useCallback(k=>({fromNode:k.nodeInternals.get(t),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[t]),Zo),m=(j=i==null?void 0:i[Ra])==null?void 0:j.handleBounds;let p=m==null?void 0:m[e];if(d===Yh.Loose&&(p=p||(m==null?void 0:m[e==="source"?"target":"source"])),!i||!p)return null;const x=o?p.find(k=>k.id===o):p[0],C=x?x.x+x.width/2:(i.width??0)/2,y=x?x.y+x.height/2:i.height??0,T=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+C,I=(((S=i.positionAbsolute)==null?void 0:S.y)??0)+y,F=x==null?void 0:x.position,M=F?mke[F]:null;if(!F||!M)return null;if(s)return wt.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:x,fromX:T,fromY:I,toX:l,toY:u,fromPosition:F,toPosition:M,connectionStatus:a});let O="";const Q={sourceX:T,sourceY:I,sourcePosition:F,targetX:l,targetY:u,targetPosition:M};return r===af.Bezier?[O]=fH(Q):r===af.Step?[O]=CT({...Q,borderRadius:0}):r===af.SmoothStep?[O]=CT(Q):r===af.SimpleBezier?[O]=dH(Q):O=`M${T},${I} ${l},${u}`,wt.createElement("path",{d:O,fill:"none",className:"react-flow__connection-path",style:n})};zH.displayName="ConnectionLine";const pke=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function gke({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:u}=va(pke,Zo);return!(s&&a&&o&&i)?null:wt.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},wt.createElement("g",{className:wl(["react-flow__connection",u])},wt.createElement(zH,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function HR(t,e){return se.useRef(null),Xi(),se.useMemo(()=>e(t),[t])}const GH=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:x,onSelectionContextMenu:C,onSelectionStart:y,onSelectionEnd:T,connectionLineType:I,connectionLineStyle:F,connectionLineComponent:M,connectionLineContainerStyle:O,selectionKeyCode:Q,selectionOnDrag:j,selectionMode:E,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:z,deleteKeyCode:P,onlyRenderVisibleElements:R,elementsSelectable:G,selectNodesOnDrag:q,defaultViewport:le,translateExtent:ee,minZoom:oe,maxZoom:K,preventScrolling:ne,defaultMarkerColor:X,zoomOnScroll:ce,zoomOnPinch:V,panOnScroll:J,panOnScrollSpeed:re,panOnScrollMode:ie,zoomOnDoubleClick:fe,panOnDrag:Se,onPaneClick:ve,onPaneMouseEnter:ye,onPaneMouseMove:we,onPaneMouseLeave:me,onPaneScroll:he,onPaneContextMenu:Ve,onEdgeContextMenu:nt,onEdgeMouseEnter:Oe,onEdgeMouseMove:Ie,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:st,onReconnectEnd:vt,reconnectRadius:Tt,noDragClassName:xt,noWheelClassName:Vt,noPanClassName:Kt,elevateEdgesOnSelect:cn,disableKeyboardA11y:Gt,nodeOrigin:Wt,nodeExtent:sn,rfId:Qt})=>{const Ht=HR(t,GBe),_t=HR(e,JBe);return hke(a),wt.createElement(VBe,{onPaneClick:ve,onPaneMouseEnter:ye,onPaneMouseMove:we,onPaneMouseLeave:me,onPaneContextMenu:Ve,onPaneScroll:he,deleteKeyCode:P,selectionKeyCode:Q,selectionOnDrag:j,selectionMode:E,onSelectionStart:y,onSelectionEnd:T,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:z,elementsSelectable:G,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ce,zoomOnPinch:V,zoomOnDoubleClick:fe,panOnScroll:J,panOnScrollSpeed:re,panOnScrollMode:ie,panOnDrag:Se,defaultViewport:le,translateExtent:ee,minZoom:oe,maxZoom:K,onSelectionContextMenu:C,preventScrolling:ne,noDragClassName:xt,noWheelClassName:Vt,noPanClassName:Kt,disableKeyboardA11y:Gt},wt.createElement(fke,null,wt.createElement(Ake,{edgeTypes:_t,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:R,onEdgeContextMenu:nt,onEdgeMouseEnter:Oe,onEdgeMouseMove:Ie,onEdgeMouseLeave:je,onReconnect:Ke,onReconnectStart:st,onReconnectEnd:vt,reconnectRadius:Tt,defaultMarkerColor:X,noPanClassName:Kt,elevateEdgesOnSelect:!!cn,disableKeyboardA11y:Gt,rfId:Qt},wt.createElement(gke,{style:F,type:I,component:M,containerStyle:O})),wt.createElement("div",{className:"react-flow__edgelabel-renderer"}),wt.createElement($Be,{nodeTypes:Ht,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:x,selectNodesOnDrag:q,onlyRenderVisibleElements:R,noPanClassName:Kt,noDragClassName:xt,disableKeyboardA11y:Gt,nodeOrigin:Wt,nodeExtent:sn,rfId:Qt})))};GH.displayName="GraphView";var xke=se.memo(GH);const BT=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Kd={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:BT,nodeExtent:BT,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Yh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:qNe,isValidConnection:void 0},vke=()=>sTe((t,e)=>({...Kd,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:CE(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?CE(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const m=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(m.transform),x=n.reduce((y,T)=>{const I=s.get(T.id);if(I!=null&&I.hidden)s.set(I.id,{...I,[Ra]:{...I[Ra],handleBounds:void 0}});else if(I){const F=rN(T.nodeElement);!!(F.width&&F.height&&(I.width!==F.width||I.height!==F.height||T.forceUpdate))&&(s.set(I.id,{...I,[Ra]:{...I[Ra],handleBounds:{source:RR(".source",T.nodeElement,p,u),target:RR(".target",T.nodeElement,p,u)}},...F}),y.push({id:I.id,type:"dimensions",dimensions:F}))}return y},[]);IH(s,u);const C=i||a&&!i&&FH(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:C}),(x==null?void 0:x.length)>0&&(r==null||r(x))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=n.map(o=>{const l={id:o.id,type:"position",dragging:s};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(a){const u=LH(n,o()),d=CE(u,s,i,l);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>Zd(l,!0)):(i=mm(a(),n),o=mm(s,[])),By({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let i,o=null;r?i=n.map(l=>Zd(l,!0)):(i=mm(s,n),o=mm(a(),[])),By({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),i=n||a(),o=r||s,l=i.map(d=>(d.selected=!1,Zd(d.id,!1))),u=o.map(d=>Zd(d.id,!1));By({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r==null||r.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r==null||r.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(o=>o.selected).map(o=>Zd(o.id,!1)),i=n.filter(o=>o.selected).map(o=>Zd(o.id,!1));By({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=sN(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!n.x&&!n.y)return!1;const u=Cf.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[s,a]],m=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,m),r[0]!==m.x||r[1]!==m.y||r[2]!==m.k},cancelConnection:()=>t({connectionNodeId:Kd.connectionNodeId,connectionHandleId:Kd.connectionHandleId,connectionHandleType:Kd.connectionHandleType,connectionStatus:Kd.connectionStatus,connectionStartHandle:Kd.connectionStartHandle,connectionEndHandle:Kd.connectionEndHandle}),reset:()=>t({...Kd})}),Object.is),hN=({children:t})=>{const e=se.useRef(null);return e.current||(e.current=vke()),wt.createElement(UNe,{value:e.current},t)};hN.displayName="ReactFlowProvider";const qH=({children:t})=>se.useContext(kb)?wt.createElement(wt.Fragment,null,t):wt.createElement(hN,null,t);qH.displayName="ReactFlowWrapper";const yke={input:CH,default:TT,output:SH,group:dN},wke={default:m2,straight:lN,step:oN,smoothstep:Ib,simplebezier:iN},bke=[0,0],_ke=[15,15],Cke={x:0,y:0,zoom:1},Eke={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},KH=se.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=yke,edgeTypes:i=wke,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:m,onMoveEnd:p,onConnect:x,onConnectStart:C,onConnectEnd:y,onClickConnectStart:T,onClickConnectEnd:I,onNodeMouseEnter:F,onNodeMouseMove:M,onNodeMouseLeave:O,onNodeContextMenu:Q,onNodeDoubleClick:j,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:k,onNodesDelete:z,onEdgesDelete:P,onSelectionChange:R,onSelectionDragStart:G,onSelectionDrag:q,onSelectionDragStop:le,onSelectionContextMenu:ee,onSelectionStart:oe,onSelectionEnd:K,connectionMode:ne=Yh.Strict,connectionLineType:X=af.Bezier,connectionLineStyle:ce,connectionLineComponent:V,connectionLineContainerStyle:J,deleteKeyCode:re="Backspace",selectionKeyCode:ie="Shift",selectionOnDrag:fe=!1,selectionMode:Se=Gx.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:ye=f2()?"Meta":"Control",zoomActivationKeyCode:we=f2()?"Meta":"Control",snapToGrid:me=!1,snapGrid:he=_ke,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:nt=!0,nodesDraggable:Oe,nodesConnectable:Ie,nodesFocusable:je,nodeOrigin:Ke=bke,edgesFocusable:st,edgesUpdatable:vt,elementsSelectable:Tt,defaultViewport:xt=Cke,minZoom:Vt=.5,maxZoom:Kt=2,translateExtent:cn=BT,preventScrolling:Gt=!0,nodeExtent:Wt,defaultMarkerColor:sn="#b1b1b7",zoomOnScroll:Qt=!0,zoomOnPinch:Ht=!0,panOnScroll:_t=!1,panOnScrollSpeed:On=.5,panOnScrollMode:An=Eh.Free,zoomOnDoubleClick:Tr=!0,panOnDrag:In=!0,onPaneClick:nr,onPaneMouseEnter:Lr,onPaneMouseMove:Zn,onPaneMouseLeave:ya,onPaneScroll:wr,onPaneContextMenu:us,children:Is,onEdgeContextMenu:lr,onEdgeDoubleClick:vn,onEdgeMouseEnter:Ar,onEdgeMouseMove:wa,onEdgeMouseLeave:As,onEdgeUpdate:zs,onEdgeUpdateStart:oa,onEdgeUpdateEnd:rn,onReconnect:Rr,onReconnectStart:Nr,onReconnectEnd:Xr,reconnectRadius:br=10,edgeUpdaterRadius:Yt=10,onNodesChange:be,onEdgesChange:Pe,noDragClassName:Fe="nodrag",noWheelClassName:De="nowheel",noPanClassName:Le="nopan",fitView:Me=!1,fitViewOptions:et,connectOnClick:dt=!0,attributionPosition:Je,proOptions:at,defaultEdgeOptions:ct,elevateNodesOnSelect:Bt=!0,elevateEdgesOnSelect:jt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ot=!0,autoPanOnNodeDrag:$t=!0,connectionRadius:Cn=20,isValidConnection:cr,onError:ur,style:dr,id:Rs,nodeDragThreshold:ba,...Gs},la)=>{const Fs=Rs||"1";return wt.createElement("div",{...Gs,style:{...dr,...Eke},ref:la,className:wl(["react-flow",s]),"data-testid":"rf__wrapper",id:Rs},wt.createElement(qH,null,wt.createElement(xke,{onInit:u,onMove:d,onMoveStart:m,onMoveEnd:p,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:F,onNodeMouseMove:M,onNodeMouseLeave:O,onNodeContextMenu:Q,onNodeDoubleClick:j,nodeTypes:a,edgeTypes:i,connectionLineType:X,connectionLineStyle:ce,connectionLineComponent:V,connectionLineContainerStyle:J,selectionKeyCode:ie,selectionOnDrag:fe,selectionMode:Se,deleteKeyCode:re,multiSelectionKeyCode:ye,panActivationKeyCode:ve,zoomActivationKeyCode:we,onlyRenderVisibleElements:Ve,selectNodesOnDrag:nt,defaultViewport:xt,translateExtent:cn,minZoom:Vt,maxZoom:Kt,preventScrolling:Gt,zoomOnScroll:Qt,zoomOnPinch:Ht,zoomOnDoubleClick:Tr,panOnScroll:_t,panOnScrollSpeed:On,panOnScrollMode:An,panOnDrag:In,onPaneClick:nr,onPaneMouseEnter:Lr,onPaneMouseMove:Zn,onPaneMouseLeave:ya,onPaneScroll:wr,onPaneContextMenu:us,onSelectionContextMenu:ee,onSelectionStart:oe,onSelectionEnd:K,onEdgeContextMenu:lr,onEdgeDoubleClick:vn,onEdgeMouseEnter:Ar,onEdgeMouseMove:wa,onEdgeMouseLeave:As,onReconnect:Rr??zs,onReconnectStart:Nr??oa,onReconnectEnd:Xr??rn,reconnectRadius:br??Yt,defaultMarkerColor:sn,noDragClassName:Fe,noWheelClassName:De,noPanClassName:Le,elevateEdgesOnSelect:jt,rfId:Fs,disableKeyboardA11y:Jt,nodeOrigin:Ke,nodeExtent:Wt}),wt.createElement(mBe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:C,onConnectEnd:y,onClickConnectStart:T,onClickConnectEnd:I,nodesDraggable:Oe,nodesConnectable:Ie,nodesFocusable:je,edgesFocusable:st,edgesUpdatable:vt,elementsSelectable:Tt,elevateNodesOnSelect:Bt,minZoom:Vt,maxZoom:Kt,nodeExtent:Wt,onNodesChange:be,onEdgesChange:Pe,snapToGrid:me,snapGrid:he,connectionMode:ne,translateExtent:cn,connectOnClick:dt,defaultEdgeOptions:ct,fitView:Me,fitViewOptions:et,onNodesDelete:z,onEdgesDelete:P,onNodeDragStart:E,onNodeDrag:S,onNodeDragStop:k,onSelectionDrag:q,onSelectionDragStart:G,onSelectionDragStop:le,noPanClassName:Le,nodeOrigin:Ke,rfId:Fs,autoPanOnConnect:Ot,autoPanOnNodeDrag:$t,onError:ur,connectionRadius:Cn,isValidConnection:cr,nodeDragThreshold:ba}),wt.createElement(fBe,{onSelectionChange:R}),Is,wt.createElement(jNe,{proOptions:at,position:Je}),wt.createElement(yBe,{rfId:Fs,disableKeyboardA11y:Jt})))});KH.displayName="ReactFlow";function $H(t){return e=>{const[n,r]=se.useState(e),s=se.useCallback(a=>r(i=>t(a,i)),[]);return[n,r,s]}}const Ske=$H(LH),Tke=$H(LBe);function Nke(){return wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},wt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Bke(){return wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},wt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function kke(){return wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},wt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Ike(){return wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},wt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Fke(){return wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},wt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Pg=({children:t,className:e,...n})=>wt.createElement("button",{type:"button",className:wl(["react-flow__controls-button",e]),...n},t);Pg.displayName="ControlButton";const Dke=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),WH=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:m="bottom-left"})=>{const p=Xi(),[x,C]=se.useState(!1),{isInteractive:y,minZoomReached:T,maxZoomReached:I}=va(Dke,Zo),{zoomIn:F,zoomOut:M,fitView:O}=Fb();if(se.useEffect(()=>{C(!0)},[]),!x)return null;const Q=()=>{F(),a==null||a()},j=()=>{M(),i==null||i()},E=()=>{O(s),o==null||o()},S=()=>{p.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return wt.createElement(aH,{className:wl(["react-flow__controls",u]),position:m,style:t,"data-testid":"rf__controls"},e&&wt.createElement(wt.Fragment,null,wt.createElement(Pg,{onClick:Q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:I},wt.createElement(Nke,null)),wt.createElement(Pg,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:T},wt.createElement(Bke,null))),n&&wt.createElement(Pg,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},wt.createElement(kke,null)),r&&wt.createElement(Pg,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},y?wt.createElement(Fke,null):wt.createElement(Ike,null)),d)};WH.displayName="Controls";var Lke=se.memo(WH),Du;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Du||(Du={}));function Rke({color:t,dimensions:e,lineWidth:n}){return wt.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Pke({color:t,radius:e}){return wt.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const Mke={[Du.Dots]:"#91919a",[Du.Lines]:"#eee",[Du.Cross]:"#e2e2e2"},Uke={[Du.Dots]:1,[Du.Lines]:1,[Du.Cross]:6},Oke=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function YH({id:t,variant:e=Du.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const u=se.useRef(null),{transform:d,patternId:m}=va(Oke,Zo),p=i||Mke[e],x=r||Uke[e],C=e===Du.Dots,y=e===Du.Cross,T=Array.isArray(n)?n:[n,n],I=[T[0]*d[2]||1,T[1]*d[2]||1],F=x*d[2],M=y?[F,F]:I,O=C?[F/a,F/a]:[M[0]/a,M[1]/a];return wt.createElement("svg",{className:wl(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},wt.createElement("pattern",{id:m+t,x:d[0]%I[0],y:d[1]%I[1],width:I[0],height:I[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`},C?wt.createElement(Pke,{color:p,radius:F/a}):wt.createElement(Rke,{dimensions:M,color:p,lineWidth:s})),wt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+t})`}))}YH.displayName="Background";var jke=se.memo(YH);function Qke(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),e&&(r.href=e),s.href=t,s.href}const Hke=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Sf(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let Z0=null;function XH(t={}){return Z0||(t.includeStyleProperties?(Z0=t.includeStyleProperties,Z0):(Z0=Sf(window.getComputedStyle(document.documentElement)),Z0))}function p2(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function Vke(t){const e=p2(t,"border-left-width"),n=p2(t,"border-right-width");return t.clientWidth+e+n}function zke(t){const e=p2(t,"border-top-width"),n=p2(t,"border-bottom-width");return t.clientHeight+e+n}function JH(t,e={}){const n=e.width||Vke(t),r=e.height||zke(t);return{width:n,height:r}}function Gke(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const mc=16384;function qke(t){(t.width>mc||t.height>mc)&&(t.width>mc&&t.height>mc?t.width>t.height?(t.height*=mc/t.width,t.width=mc):(t.width*=mc/t.height,t.height=mc):t.width>mc?(t.height*=mc/t.width,t.width=mc):(t.width*=mc/t.height,t.height=mc))}function g2(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Kke(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function $ke(t,e,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),Kke(s)}const Wl=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Wl(n,e)};function Wke(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Yke(t,e){return XH(e).map(n=>{const r=t.getPropertyValue(n),s=t.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function Xke(t,e,n,r){const s=`.${t}:${e}`,a=n.cssText?Wke(n):Yke(n,r);return document.createTextNode(`${s}{${a}}`)}function VR(t,e,n,r){const s=window.getComputedStyle(t,n),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=Hke();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Xke(i,n,s,r)),e.appendChild(o)}function Jke(t,e,n){VR(t,e,":before",n),VR(t,e,":after",n)}const zR="application/font-woff",GR="image/jpeg",Zke={woff:zR,woff2:zR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:GR,jpeg:GR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function eIe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function mN(t){const e=eIe(t).toLowerCase();return Zke[e]||""}function tIe(t){return t.split(/,/)[1]}function kT(t){return t.search(/^(data:)/)!==-1}function nIe(t,e){return`data:${e};base64,${t}`}async function ZH(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(n({res:r,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const NE={};function rIe(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function pN(t,e,n){const r=rIe(t,e,n.includeQueryParams);if(NE[r]!=null)return NE[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await ZH(t,n.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),tIe(o)));s=nIe(a,e)}catch(a){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return NE[r]=s,s}async function sIe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):g2(e)}async function aIe(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return g2(o)}const n=t.poster,r=mN(n),s=await pN(n,r,e);return g2(s)}async function iIe(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Db(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function oIe(t,e){return Wl(t,HTMLCanvasElement)?sIe(t):Wl(t,HTMLVideoElement)?aIe(t,e):Wl(t,HTMLIFrameElement)?iIe(t,e):t.cloneNode(e9(t))}const lIe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",e9=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function cIe(t,e,n){var r,s;if(e9(e))return e;let a=[];return lIe(t)&&t.assignedNodes?a=Sf(t.assignedNodes()):Wl(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?a=Sf(t.contentDocument.body.childNodes):a=Sf(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||Wl(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>Db(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function uIe(t,e,n){const r=e.style;if(!r)return;const s=window.getComputedStyle(t);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):XH(n).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Wl(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),r.setProperty(a,i,s.getPropertyPriority(a))})}function AIe(t,e){Wl(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Wl(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function dIe(t,e){if(Wl(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(s=>t.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function fIe(t,e,n){return Wl(e,Element)&&(uIe(t,e,n),Jke(t,e,n),AIe(t,e),dIe(t,e)),e}async function hIe(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let a=0;a<n.length;a++){const o=n[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!r[o]&&(r[o]=await Db(u,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function Db(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>oIe(r,e)).then(r=>cIe(t,r,e)).then(r=>fIe(t,r,e)).then(r=>hIe(r,e))}const t9=/url\((['"]?)([^'"]+?)\1\)/g,mIe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,pIe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function gIe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function xIe(t){const e=[];return t.replace(t9,(n,r,s)=>(e.push(s),n)),e.filter(n=>!kT(n))}async function vIe(t,e,n,r,s){try{const a=n?Qke(e,n):e,i=mN(e);let o;return s||(o=await pN(a,i,r)),t.replace(gIe(e),`$1${o}$3`)}catch{}return t}function yIe(t,{preferredFontFormat:e}){return e?t.replace(pIe,n=>{for(;;){const[r,,s]=mIe.exec(n)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):t}function n9(t){return t.search(t9)!==-1}async function r9(t,e,n){if(!n9(t))return t;const r=yIe(t,n);return xIe(r).reduce((a,i)=>a.then(o=>vIe(o,i,e,n)),Promise.resolve(r))}async function em(t,e,n){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(s){const a=await r9(s,null,n);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function wIe(t,e){await em("background",t,e)||await em("background-image",t,e),await em("mask",t,e)||await em("-webkit-mask",t,e)||await em("mask-image",t,e)||await em("-webkit-mask-image",t,e)}async function bIe(t,e){const n=Wl(t,HTMLImageElement);if(!(n&&!kT(t.src))&&!(Wl(t,SVGImageElement)&&!kT(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,s=await pN(r,mN(r),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=s):t.href.baseVal=s})}async function _Ie(t,e){const r=Sf(t.childNodes).map(s=>s9(s,e));await Promise.all(r).then(()=>t)}async function s9(t,e){Wl(t,Element)&&(await wIe(t,e),await bIe(t,e),await _Ie(t,e))}function CIe(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),t}const qR={};async function KR(t){let e=qR[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},qR[t]=e,e}async function $R(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),ZH(o,e.fetchRequestInit,({result:l})=>(n=n.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>n)}function WR(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(r);if(l===null){if(l=o.exec(r),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function EIe(t,e){const n=[],r=[];return t.forEach(s=>{if("cssRules"in s)try{Sf(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,u=KR(l).then(d=>$R(d,e)).then(d=>WR(d).forEach(m=>{try{s.insertRule(m,m.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:m,error:p})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&r.push(KR(s.href).then(o=>$R(o,e)).then(o=>WR(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(t.forEach(s=>{if("cssRules"in s)try{Sf(s.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),n))}function SIe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>n9(e.style.getPropertyValue("src")))}async function TIe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Sf(t.ownerDocument.styleSheets),r=await EIe(n,e);return SIe(r)}function a9(t){return t.trim().replace(/["']/g,"")}function NIe(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(a9(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&n(a)})}return n(t),e}async function BIe(t,e){const n=await TIe(t,e),r=NIe(t);return(await Promise.all(n.filter(a=>r.has(a9(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return r9(a.cssText,i,e)}))).join(`
`)}async function kIe(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await BIe(t,e);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function IIe(t,e={}){const{width:n,height:r}=JH(t,e),s=await Db(t,e,!0);return await kIe(s,e),await s9(s,e),CIe(s,e),await $ke(s,n,r)}async function FIe(t,e={}){const{width:n,height:r}=JH(t,e),s=await IIe(t,e),a=await g2(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||Gke(),u=e.canvasWidth||n,d=e.canvasHeight||r;return i.width=u*l,i.height=d*l,e.skipAutoScale||qke(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function Lb(t,e={}){return(await FIe(t,e)).toDataURL()}const i9="recursos_crucigramas",Rb="recursos_lineas_de_tiempo",Pb="recursos_mapas_mentales",o9="recursos_sopas_de_letras",Mb=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},DIe=t=>{const e=mn(zt(Ut,i9),Dr("fechaCreacion","desc"));return Un(e,n=>{const r=n.docs.map(s=>Mb(s));t(r)},n=>{console.error("Error al suscribirse a los crucigramas:",n),t([])})},LIe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:Tn.fromDate(new Date)};return(await na(zt(Ut,i9),n)).id}catch(n){throw console.error("Error al guardar el crucigrama:",n),new Error("No se pudo guardar el crucigrama.")}},RIe=t=>{const e=mn(zt(Ut,Rb),Dr("createdAt","desc"));return Un(e,n=>{const r=n.docs.map(s=>Mb(s));t(r)},n=>{console.error("Error al suscribirse a las líneas de tiempo:",n),t([])})},PIe=async(t,e)=>{try{const{id:n,...r}=t,s=Mn(Ut,Rb,n);await wo(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Tn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar la línea de tiempo:",n),new Error("No se pudo guardar la línea de tiempo.")}},MIe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Tn.fromDate(new Date)};return(await na(zt(Ut,Rb),n)).id}catch(n){throw console.error("Error al crear la línea de tiempo:",n),new Error("No se pudo crear la línea de tiempo.")}},UIe=async t=>{try{const e=Mn(Ut,Rb,t);await Yi(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},OIe=t=>{const e=mn(zt(Ut,Pb),Dr("createdAt","desc"));return Un(e,n=>{const r=n.docs.map(s=>Mb(s));t(r)},n=>{console.error("Error al suscribirse a los mapas mentales:",n),t([])})},jIe=async(t,e)=>{try{const{id:n,...r}=t,s=Mn(Ut,Pb,n);await wo(s,{...r,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Tn.fromDate(new Date(r.createdAt||Date.now()))},{merge:!0})}catch(n){throw console.error("Error al guardar el mapa mental:",n),new Error("No se pudo guardar el mapa mental.")}},QIe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Tn.fromDate(new Date)};return(await na(zt(Ut,Pb),n)).id}catch(n){throw console.error("Error al crear el mapa mental:",n),new Error("No se pudo crear el mapa mental.")}},HIe=async t=>{try{const e=Mn(Ut,Pb,t);await Yi(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},VIe=t=>{const e=mn(zt(Ut,o9),Dr("createdAt","desc"));return Un(e,n=>{const r=n.docs.map(s=>Mb(s));t(r)},n=>{console.error("Error al suscribirse a las sopas de letras:",n),t([])})},zIe=async(t,e)=>{try{const n={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:Tn.fromDate(new Date)};return(await na(zt(Ut,o9),n)).id}catch(n){throw console.error("Error al guardar la sopa de letras:",n),new Error("No se pudo guardar la sopa de letras.")}},GIe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qIe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),KIe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),$Ie=({data:t})=>{const e={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},n=e[t.type||"default"]||e.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${n} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(ep,{type:"target",position:Sn.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:t.icon||"🧠"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.type})]}),c.jsx(ep,{type:"source",position:Sn.Right,className:"w-2 h-2 !bg-slate-400"})]})},IT=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((n,r)=>n+IT(r,e),0),FT=(t,e="tree")=>{const n=[],r=[];if(e==="tree"){const i=(o,l,u)=>{n.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=IT(o,100);let m=u-d/2+100/2;(o.children||[]).forEach(p=>{const x=IT(p,100),C=m+x/2-100/2;r.push({id:`e-${o.id}-${p.id}`,source:o.id,target:p.id,type:"smoothstep",animated:!0}),i(p,l+1,C),m+=x})};i(t,0,0)}else{n.push({id:t.id,position:{x:0,y:0},data:{label:t.label,icon:t.icon,type:t.type},type:"custom"});const i=300,o=500;(t.children||[]).forEach((l,u)=>{const d=u/t.children.length*2*Math.PI;n.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),r.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((m,p)=>{const x=d+(p-(l.children.length-1)/2)*.25;n.push({id:m.id,position:{x:o*Math.cos(x),y:o*Math.sin(x)},data:{label:m.label,icon:m.icon,type:m.type},type:"custom"}),r.push({id:`e-${l.id}-${m.id}`,source:l.id,target:m.id,type:"smoothstep"})})})}return{nodes:n,edges:r}},l9=({node:t,onUpdate:e,onAddChild:n,onDelete:r,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(t.children||[]).map(o=>c.jsx(l9,{node:o,onUpdate:e,onAddChild:n,onDelete:r,level:s+1},o.id))]})},WIe={custom:$Ie},YIe=({mapData:t,onBack:e,onSave:n})=>{const[r,s]=se.useState(t.treeData),[a,i]=se.useState("tree"),[o,l]=se.useState(!1),[u,d,m]=Ske([]),[p,x,C]=Tke([]),{fitView:y}=Fb();se.useEffect(()=>{const{nodes:Q,edges:j}=FT(r,a);d(Q),x(j),setTimeout(()=>y({duration:300}),50)},[r,a,d,x,y]);const T=(Q,j)=>{const E=JSON.parse(JSON.stringify(r)),S=k=>k.id===Q?(k.label=j,!0):(k.children||[]).some(S);S(E),s(E)},I=Q=>{const j=JSON.parse(JSON.stringify(r)),E=S=>S.id===Q?(S.children||(S.children=[]),S.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(S.children||[]).some(E);E(j),s(j)},F=Q=>{const j=JSON.parse(JSON.stringify(r)),E=S=>{const k=(S.children||[]).findIndex(z=>z.id===Q);return k!==-1?(S.children.splice(k,1),!0):(S.children||[]).some(E)};E(j),s(j)},M=()=>{l(!0);const{nodes:Q,edges:j}=FT(r,a);n({...t,treeData:r,nodes:Q,edges:j}),setTimeout(()=>l(!1),1e3)},O=async Q=>{const j=document.querySelector(".react-flow");j&&Lb(j,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const S=document.createElement("a");S.download=`${t.tema}.png`,S.href=E,S.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(KH,{nodes:u,edges:p,onNodesChange:m,onEdgesChange:C,fitView:!0,nodeTypes:WIe,children:[c.jsx(Lke,{}),c.jsx(jke,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(qIe,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(KIe,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(l9,{node:r,onUpdate:T,onAddChild:I,onDelete:F})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>O(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:M,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},XIe=({onBack:t,currentUser:e})=>{const[n,r]=se.useState("list"),[s,a]=se.useState([]),[i,o]=se.useState(null),[l,u]=se.useState(!1),[d,m]=se.useState(!0),[p,x]=se.useState(""),[C,y]=se.useState(""),[T,I]=se.useState("");se.useEffect(()=>{m(!0);const E=OIe(S=>{a(S),m(!1)});return()=>E()},[]);const F=async E=>{if(E.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}u(!0);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",k=`
            Basado en el tema central "${p}", y considerando el contenido adicional "${T}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${p}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const le=(await(await new xi(S).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(k)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(le),oe=J=>({id:crypto.randomUUID(),label:J.label||"Sin etiqueta",icon:J.icon||"🧠",type:J.type||"default",children:(J.children||[]).map(oe)}),K=oe(ee),{nodes:ne,edges:X}=FT(K),ce={tema:p,nivel:C,treeData:K,nodes:ne,edges:X},V=await QIe(ce,e);o({...ce,id:V,createdAt:new Date().toISOString()}),r("editor")}catch(z){console.error("AI Generation Error:",z),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},M=async E=>{try{await jIe(E,e)}catch(S){console.error("Error saving mind map:",S),alert("No se pudo guardar el mapa mental.")}},O=E=>{o(E),r("editor")},Q=async E=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await HIe(E)}catch(S){console.error("Error deleting mind map:",S),alert("No se pudo eliminar el mapa mental.")}},j=()=>{switch(n){case"editor":return i?c.jsx(hN,{children:c.jsx(YIe,{mapData:i,onBack:()=>r("list"),onSave:M})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>r("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:p,onChange:E=>x(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:T,onChange:E=>I(E.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(GIe,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>r("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(E=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>O(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>Q(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),j()]})},JIe=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ZIe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),e3e=({onBack:t,currentUser:e})=>{const[n,r]=se.useState([]),[s,a]=se.useState("Media"),[i,o]=se.useState(10),[l,u]=se.useState(!1),[d,m]=se.useState(Array(10).fill("")),[p,x]=se.useState(""),[C,y]=se.useState(null),[T,I]=se.useState({ai:!1,puzzle:!1,data:!0}),F=se.useRef(null);se.useEffect(()=>{I(P=>({...P,data:!0}));const z=VIe(P=>{r(P),I(R=>({...R,data:!1}))});return()=>z()},[]),se.useEffect(()=>{m(z=>{const P=Array(i).fill("");for(let R=0;R<Math.min(z.length,i);R++)P[R]=z[R];return P})},[i]);const M=(z,P)=>{const R=[...d];R[z]=P,m(R)},O=async()=>{if(p.trim()){I(z=>({...z,ai:!0}));try{const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",R=new xi(z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,oe=(await(await R.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),K=JSON.parse(oe);if(!K.palabras||!Array.isArray(K.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const X=[...K.palabras.map(ce=>ce.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;X.length<i;)X.push("");m(X)}catch(z){console.error("Error generating words with AI:",z),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{I(z=>({...z,ai:!1}))}}},Q=(z,P,R,G,q,le)=>{for(let ee=0;ee<z.length;ee++){const oe=R+ee*q.y,K=G+ee*q.x;if(oe<0||oe>=le||K<0||K>=le||P[oe][K]&&P[oe][K]!==z[ee])return!1}return!0},j=(z,P,R,G,q)=>{for(let le=0;le<z.length;le++)P[R+le*q.y][G+le*q.x]=z[le]},E=async()=>{I(oe=>({...oe,puzzle:!0})),y(null),await new Promise(oe=>setTimeout(oe,100));const z=d.map(oe=>oe.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(z.length===0){alert("Por favor, ingrese al menos una palabra válida."),I(oe=>({...oe,puzzle:!1}));return}const P=Math.max(...z.map(oe=>oe.length));let R=Math.max(P,z.length)+2;s==="Media"&&(R+=3),s==="Difícil"&&(R+=5),R=Math.min(Math.max(R,10),25);const G=Array(R).fill(null).map(()=>Array(R).fill(null)),q=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fácil"&&q.push({x:1,y:-1}),s==="Difícil"&&q.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const oe of z.sort((K,ne)=>ne.length-K.length)){let K=!1;for(let ne=0;ne<100;ne++){const X=q[Math.floor(Math.random()*q.length)],ce=Math.floor(Math.random()*R),V=Math.floor(Math.random()*R);if(Q(oe,G,ce,V,X,R)){j(oe,G,ce,V,X),K=!0;break}}K||console.warn(`No se pudo colocar la palabra: ${oe}`)}const le=G.map(oe=>oe.map(K=>K||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),ee={tema:p||"Personalizado",grid:le.map(oe=>oe.join("")),words:z.sort()};try{const oe=await zIe(ee,e);y({...ee,id:oe,createdAt:new Date().toISOString()})}catch(oe){console.error("Error saving puzzle:",oe),alert("No se pudo guardar la sopa de letras.")}finally{I(oe=>({...oe,puzzle:!1}))}},S=()=>{F.current&&Lb(F.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(z=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=z,P.click()}).catch(z=>{console.error("oops, something went wrong!",z),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},k=()=>{var R;if(!C)return null;const z=((R=C.grid[0])==null?void 0:R.length)||1,P=C.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:F,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${z}, minmax(0, 1fr))`},children:P.map((G,q)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:G},q))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:C.words.map(G=>c.jsx("li",{children:G},G))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:S,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return T.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!C&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:s,onChange:z=>a(z.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(z=>c.jsx("button",{onClick:()=>{o(z),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===z?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:z},z)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:z=>o(parseInt(z.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:z=>x(z.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:O,disabled:T.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:T.ai?c.jsx(JIe,{}):c.jsxs(c.Fragment,{children:[c.jsx(ZIe,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((z,P)=>c.jsx("input",{type:"text",value:z,onChange:R=>M(P,R.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:E,disabled:T.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:T.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),C&&k()]})},t3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),r3e=({timeline:t,onSave:e,onBack:n})=>{const[r,s]=se.useState(t),[a,i]=se.useState(null),o=se.useRef(null),l=(x,C,y)=>{s(T=>({...T,events:T.events.map(I=>I.id===x?{...I,[C]:y}:I)}))},u=()=>{const x={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},C=[...r.events,x].sort((y,T)=>parseInt(y.date)-parseInt(T.date));s(y=>({...y,events:C}))},d=x=>{s(C=>({...C,events:C.events.filter(y=>y.id!==x)}))},m=async x=>{if(!x.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(x.id);const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",y=`
            Para una línea de tiempo sobre "${r.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${x.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const Q=(await(await new xi(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(y)).response).text().replace(/^```json\s*|```\s*$/g,""),j=JSON.parse(Q);s(E=>({...E,events:E.events.map(S=>S.id===x.id?{...S,date:j.date,description:j.description,icon:j.icon}:S).sort((S,k)=>parseInt(S.date)-parseInt(k.date))}))}catch(T){console.error("Error al generar descripción del hito:",T),alert("No se pudo autocompletar el hito.")}finally{i(null)}},p=()=>{o.current&&Lb(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(x=>{const C=document.createElement("a");C.download=`linea-tiempo-${r.tema.replace(/\s+/g,"_")}.png`,C.href=x,C.click()}).catch(x=>{console.error("Error al generar la imagen:",x),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:r.tema}),c.jsx("button",{onClick:n,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:r.events.sort((x,C)=>parseInt(x.date)-parseInt(C.date)).map((x,C)=>{const y=C%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:y&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:x.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:x.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:x.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!y&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:x.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:x.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:x.description})]})})})]},x.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:r.events.map(x=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:x.date,onChange:C=>l(x.id,"date",C.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:x.description,onChange:C=>l(x.id,"description",C.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>m(x),disabled:a===x.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:a===x.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(n3e,{})})]}),c.jsx("button",{onClick:()=>d(x.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},x.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:p,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(r),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},s3e=({onBack:t,currentUser:e})=>{const[n,r]=se.useState("list"),[s,a]=se.useState([]),[i,o]=se.useState(null),[l,u]=se.useState(!1),[d,m]=se.useState(!0),[p,x]=se.useState(""),[C,y]=se.useState(""),[T,I]=se.useState("");se.useEffect(()=>{m(!0);const Q=RIe(j=>{a(j),m(!1)});return()=>Q()},[]);const F=async Q=>{if(Q.preventDefault(),!p.trim()){alert("El tema es obligatorio.");return}u(!0);const j="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=C&&T?`entre ${C} y ${T}`:C?`a partir de ${C}`:T?`hasta ${T}`:"",S=`
            Genera una línea de tiempo sobre el tema "${p}" ${E}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const q=(await(await new xi(j).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(S)).response).text().replace(/^```json\s*|```\s*$/g,""),le=JSON.parse(q);if(!le.events||!Array.isArray(le.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const ee={tema:p,fechaInicio:C,fechaFin:T,events:le.events.map(K=>({id:crypto.randomUUID(),date:K.date||"Sin fecha",description:K.description||"Sin descripción",icon:K.icon||"🗓️"}))},oe=await MIe(ee,e);o({...ee,id:oe,createdAt:new Date().toISOString()}),r("editor")}catch(k){console.error("AI Generation Error:",k),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},M=async Q=>{try{await PIe(Q,e),r("list"),o(null)}catch(j){console.error("Error saving timeline:",j),alert("No se pudo guardar la línea de tiempo.")}},O=async Q=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await UIe(Q)}catch(j){console.error("Error deleting timeline:",j),alert("No se pudo eliminar la línea de tiempo.")}};return n==="editor"&&i?c.jsx(r3e,{timeline:i,onSave:M,onBack:()=>r("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:p,onChange:Q=>x(Q.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:C,onChange:Q=>y(Q.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:T,onChange:Q=>I(Q.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(t3e,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),s.length>0?s.map(Q=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:Q.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(Q.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(Q),r("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>O(Q.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},Q.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},a3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),YR=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),i3e=({onBack:t,currentUser:e})=>{const[n,r]=se.useState([]),[s,a]=se.useState(10),[i,o]=se.useState(!1),[l,u]=se.useState(Array(10).fill("")),[d,m]=se.useState(Array(10).fill("")),[p,x]=se.useState(""),[C,y]=se.useState(null),[T,I]=se.useState(!1),[F,M]=se.useState({ai:!1,puzzle:!1,data:!0}),[O,Q]=se.useState(null),j=se.useRef(null);se.useEffect(()=>{M(le=>({...le,data:!0}));const q=DIe(le=>{const ee=le.map(oe=>{const{grid_flat:K,grid_width:ne,...X}=oe,ce=[];if(K&&ne>0)for(let V=0;V<K.length;V+=ne)ce.push(K.slice(V,V+ne));return{...X,grid:ce}});r(ee),M(oe=>({...oe,data:!1}))});return()=>q()},[]),se.useEffect(()=>{const q=s;u(le=>Array.from({length:q},(ee,oe)=>le[oe]||"")),m(le=>Array.from({length:q},(ee,oe)=>le[oe]||""))},[s]);const E=(q,le)=>{const ee=[...l];ee[q]=le,u(ee)},S=(q,le)=>{const ee=[...d];ee[q]=le,m(ee)},k=async()=>{if(p.trim()){M(q=>({...q,ai:!0}));try{const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ee=new xi(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),oe=`
                Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${p}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${s} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ce=(await(await ee.generateContent(oe)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const V=ce.indexOf("{"),J=ce.lastIndexOf("}");V!==-1&&J!==-1&&(ce=ce.substring(V,J+1)),ce=ce.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ce.includes("__SPLIT__")&&(ce=ce.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Se,ve,ye,we)=>{const me=ye.split("__SPLIT__").map(he=>he.trim().replace(/,$/,""));return ve+me.join(",")+we})),ce=ce.replace(/,\s*]/g,"]");let re;try{re=JSON.parse(ce)}catch{console.error("Respuesta IA no es JSON válido:",ce),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),M(ve=>({...ve,ai:!1}));return}if(!re.items||!Array.isArray(re.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const ie=re.items.map(Se=>(Se.word||"").toUpperCase().replace(/\s/g,"")),fe=re.items.map(Se=>Se.clue||"");u(Array.from({length:s},(Se,ve)=>ie[ve]||"")),m(Array.from({length:s},(Se,ve)=>fe[ve]||""))}catch(q){console.error("Error generating words/clues with AI:",q),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{M(q=>({...q,ai:!1}))}}},z=async q=>{const le=l[q];if(!le||!le.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}Q(q);try{const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new xi(ee).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ne=`Para un crucigrama con el tema "${p||"general"}", genera una pista concisa y creativa para la palabra "${le}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,J=(await(await K.generateContent(ne)).response).text().replace(/^```json\s*|```\s*$/g,""),re=JSON.parse(J);re.clue&&S(q,re.clue)}catch(ee){console.error("Error generating clue with AI:",ee),alert("No se pudo generar la pista.")}finally{Q(null)}},P=se.useCallback(()=>{try{const q=l.map((je,Ke)=>({word:je.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Ke]})).filter(je=>je.word.length>0);if(q.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;q.sort((je,Ke)=>Ke.word.length-je.word.length);const le=q[0].word.length,ee=Math.max(le,q.length)*2;let oe=Array.from({length:ee},()=>Array(ee).fill(null));const K=[],ne=q.shift(),X=Math.floor(ee/2),ce=Math.floor((ee-ne.word.length)/2);for(let je=0;je<ne.word.length;je++)oe[X][ce+je]=ne.word[je];K.push({word:ne.word,clue:ne.clue,direction:"across",row:X,col:ce});for(const je of q){let Ke={score:-1,row:-1,col:-1,direction:"across"};for(const st of K)for(let vt=0;vt<st.word.length;vt++)for(let Tt=0;Tt<je.word.length;Tt++)if(st.word[vt]===je.word[Tt]){let xt=0,Vt,Kt,cn;st.direction==="across"?(cn="down",Vt=st.row-Tt,Kt=st.col+vt):(cn="across",Vt=st.row+vt,Kt=st.col-Tt);let Gt=!0;for(let Wt=0;Wt<je.word.length;Wt++){const sn=Vt+(cn==="down"?Wt:0),Qt=Kt+(cn==="across"?Wt:0);if(sn<0||sn>=ee||Qt<0||Qt>=ee){Gt=!1;break}const Ht=oe[sn][Qt],_t=sn===st.row+(st.direction==="down"?vt:0)&&Qt===st.col+(st.direction==="across"?vt:0);if(Ht&&!_t){Gt=!1;break}if(Ht&&_t&&Ht!==je.word[Tt]){Gt=!1;break}if(!_t){if(cn==="across"&&(sn>0&&oe[sn-1][Qt]||sn<ee-1&&oe[sn+1][Qt])){Gt=!1;break}if(cn==="down"&&(Qt>0&&oe[sn][Qt-1]||Qt<ee-1&&oe[sn][Qt+1])){Gt=!1;break}}Ht&&xt++}Gt&&xt>Ke.score&&(Ke={score:xt,row:Vt,col:Kt,direction:cn})}if(Ke.score>-1){for(let st=0;st<je.word.length;st++){const vt=Ke.row+(Ke.direction==="down"?st:0),Tt=Ke.col+(Ke.direction==="across"?st:0);oe[vt][Tt]=je.word[st]}K.push({word:je.word,clue:je.clue,direction:Ke.direction,row:Ke.row,col:Ke.col})}}let V=ee,J=-1,re=ee,ie=-1;K.forEach(je=>{V=Math.min(V,je.row),J=Math.max(J,je.row+(je.direction==="down"?je.word.length-1:0)),re=Math.min(re,je.col),ie=Math.max(ie,je.col+(je.direction==="across"?je.word.length-1:0))}),J===-1&&(V=K[0].row,J=K[0].row,re=K[0].col,ie=K[0].col+K[0].word.length-1);const fe=1,Se=Math.max(0,V-fe),ve=Math.min(ee,J+1+fe),ye=Math.max(0,re-fe),we=Math.min(ee,ie+1+fe),me=oe.slice(Se,ve).map(je=>je.slice(ye,we)),he=K.map(je=>({...je,row:je.row-Se,col:je.col-ye})).sort((je,Ke)=>je.row-Ke.row||je.col-Ke.col);let Ve=1;const nt=[],Oe=new Map;he.forEach(je=>{const Ke=`${je.row},${je.col}`;Oe.has(Ke)||Oe.set(Ke,Ve++),nt.push({...je,number:Oe.get(Ke)})});const Ie=me.map(je=>je.map(Ke=>({char:Ke,number:null})));return nt.forEach(je=>{const Ke=`${je.row},${je.col}`;Ie[je.row]&&Ie[je.row][je.col]!==void 0&&(Ie[je.row][je.col].number=Oe.get(Ke))}),{grid:Ie,clues:{across:nt.filter(je=>je.direction==="across").sort((je,Ke)=>je.number-Ke.number),down:nt.filter(je=>je.direction==="down").sort((je,Ke)=>je.number-Ke.number)}}}catch(q){return console.error("Error generating crossword grid:",q),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),R=async()=>{var le;M(ee=>({...ee,puzzle:!0})),y(null),await new Promise(ee=>setTimeout(ee,100));const q=P();if(q){const ee={creadorId:e.id,creadorNombre:e.nombreCompleto,tema:p||"Personalizado",grid:q.grid,clues:q.clues},{grid:oe,...K}=ee,ne={...K,grid_flat:oe.flat().map(X=>X.char||""),grid_width:((le=oe[0])==null?void 0:le.length)||0};try{const X=await LIe(ne,e);y({...ee,id:X,fechaCreacion:new Date().toISOString()})}catch(X){console.error("Error saving puzzle:",X),alert("No se pudo guardar el crucigrama en la base de datos.")}}M(ee=>({...ee,puzzle:!1}))},G=()=>{j.current&&(I(!1),setTimeout(()=>{Lb(j.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(q=>{const le=document.createElement("a");le.download="crucigrama.png",le.href=q,le.click()}).catch(q=>console.error("Error generating image",q))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),C?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:j,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${C.grid[0].length}, 2rem)`},children:C.grid.flat().map((q,le)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:q.char?"white":"black"},children:[q.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:q.number}),T&&q.char&&c.jsx("span",{children:q.char})]},le))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:C.clues.across.map(q=>c.jsxs("li",{children:[c.jsxs("strong",{children:[q.number,"."]})," ",q.clue]},`${q.word}-${q.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:C.clues.down.map(q=>c.jsxs("li",{children:[c.jsxs("strong",{children:[q.number,"."]})," ",q.clue]},`${q.word}-${q.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:T,onChange:()=>I(!T),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:G,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(q=>c.jsx("button",{onClick:()=>{a(q),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===q?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:q},q)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:s,onChange:q=>a(parseInt(q.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:p,onChange:q=>x(q.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:k,disabled:F.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:F.ai?c.jsx(a3e,{}):c.jsxs(c.Fragment,{children:[c.jsx(YR,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((q,le)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[le],onChange:ee=>E(le,ee.target.value),placeholder:`Palabra ${le+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[le],onChange:ee=>S(le,ee.target.value),placeholder:`Pista ${le+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>z(le),disabled:O===le,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:O===le?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(YR,{})})]})]},le))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:R,disabled:F.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:F.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},o3e=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(!0);return se.useEffect(()=>{const s=QP(wX,async a=>{if(a&&a.email)try{const i=await IU(a.email);e(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),e(null)}else e(null);r(!1)});return()=>s()},[]),{currentUser:t,loading:n}},l3e=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],c3e=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),u3e=()=>{const[t,e]=se.useState("menu"),{currentUser:n}=o3e(),r=()=>t!=="menu"&&!n?c.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):t==="mapasMentales"?c.jsx(XIe,{onBack:()=>e("menu"),currentUser:n}):t==="sopaDeLetras"?c.jsx(e3e,{onBack:()=>e("menu"),currentUser:n}):t==="lineasDeTiempo"?c.jsx(s3e,{onBack:()=>e("menu"),currentUser:n}):t==="crucigramas"?c.jsx(i3e,{onBack:()=>e("menu"),currentUser:n}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l3e.map(s=>c.jsx(c3e,{recurso:s,onClick:()=>e(s.id)},s.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:r()})},A3e="evaluaciones_formativas",d3e="calificaciones_formativas",c9="trabajos_grupales_formativos",u9=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fecha:((r=(n=e.fecha)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},f3e=(t,e)=>{const n=mn(zt(Ut,A3e),cs("curso","==",t));return Un(n,r=>{e(r.docs.map(s=>u9(s)))},r=>{console.error("Error subscribing to student evaluations:",r),e([])})},h3e=t=>{const e=mn(zt(Ut,d3e));return Un(e,n=>{const r={};n.forEach(s=>{r[s.id]=s.data()}),t(r)},n=>{console.error("Error subscribing to grades:",n),t({})})},m3e=(t,e)=>{const n=mn(zt(Ut,c9),cs("curso","==",t));return Un(n,r=>{e(r.docs.map(s=>u9(s)))},r=>{console.error("Error subscribing to group projects:",r),e([])})},p3e=async t=>{try{const{id:e,...n}=t,r=Mn(Ut,c9,e);await wo(r,n)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},g3e=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState({}),[a,i]=se.useState([]),[o,l]=se.useState(!0),[u,d]=se.useState(null),[m,p]=se.useState(!1),[x,C]=se.useState(null),y=se.useRef(null);se.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const O=f3e(t.curso,n),Q=h3e(s),j=m3e(t.curso,E=>{i(E),l(!1)});return()=>{O(),Q(),j()}},[t.curso]);const T=se.useMemo(()=>{if(!t.curso)return[];const Q=e.filter(j=>j.curso===t.curso).reduce((j,E)=>((j[E.asignatura]=j[E.asignatura]||[]).push(E),j),{});return Object.entries(Q).map(([j,E])=>{let S=0,k=0;const z=E.map(R=>{var le;const G=(le=r[R.id])==null?void 0:le[t.nombreCompleto];let q="No Trabajado";return G==="trabajado"?(S+=7,k++,q="Trabajado"):G==="no trabajado"&&(S+=2,k++,q="No Trabajado"),{id:R.id,nombreActividad:R.nombreActividad,fecha:R.fecha,estado:q}}).filter(R=>{var G;return(G=r[R.id])==null?void 0:G[t.nombreCompleto]}),P=k>0?(S/k).toFixed(1):"N/A";return{asignatura:j,promedio:P,actividades:z.sort((R,G)=>new Date(G.fecha).getTime()-new Date(R.fecha).getTime())}}).filter(j=>j.actividades.length>0).sort((j,E)=>j.asignatura.localeCompare(E.asignatura))},[e,r,t]);se.useEffect(()=>{if(T.reduce((k,z)=>k+z.actividades.length,0)===0){d(null);return}const Q=T.reduce((k,z)=>{const P=parseFloat(z.promedio);return isNaN(P)?k:k+P},0),j=T.length>0?Q/T.length:0,E=L1.find(k=>j>=k.promedioMin&&j<=k.promedioMax)||null,S=L1.filter(k=>j>=k.promedioMin);if(d({puntajeTotal:0,promedio:j,rangoActual:E,insigniasGanadas:S}),y.current!==null){const k=L1.find(z=>y.current>=z.promedioMin&&y.current<=z.promedioMax)||null;E&&(!k||E.nombre!==k.nombre)&&C(E)}y.current=j},[T]);const I=se.useMemo(()=>t.curso?a.filter(O=>O.curso===t.curso).map(O=>{const Q=O.grupos.find(j=>j.integrantes.some(E=>E.nombre===t.nombreCompleto));return Q?{...O,miGrupo:Q}:null}).filter(O=>O!==null).sort((O,Q)=>new Date(Q.fechaPresentacion).getTime()-new Date(O.fechaPresentacion).getTime()):[],[a,t]),F=async(O,Q)=>{const j=a.find(S=>S.id===O);if(!j)return;const E={...j,grupos:j.grupos.map(S=>S.integrantes.some(z=>z.nombre===t.nombreCompleto)?{...S,integrantes:S.integrantes.map(z=>z.nombre===t.nombreCompleto?{...z,rol:Q||void 0}:z)}:S)};try{await p3e(E)}catch(S){console.error("Error updating role:",S),alert("No se pudo actualizar el rol.")}},M=O=>{const Q=parseFloat(O);return isNaN(Q)?"bg-slate-400":Q<4?"bg-red-500":Q<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[x&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>C(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:O=>O.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:x.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:x.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:x.mensaje}),c.jsx("button",{onClick:()=>C(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:L1.map(O=>{const Q=u==null?void 0:u.insigniasGanadas.some(j=>j.nombre===O.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${Q?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:O.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${Q?"text-amber-700":"text-slate-600"}`,children:O.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",O.promedioMin," y ",O.promedioMax]})]})]},O.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>p(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),T.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(O=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:O.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${M(O.promedio)}`,children:O.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),O.actividades.map(Q=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:Q.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(Q.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${Q.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:Q.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},Q.id))]})]},O.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),I.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:I.map(O=>{const Q=O.miGrupo.integrantes.filter(E=>E.nombre!==t.nombreCompleto&&E.rol).map(E=>E.rol),j=DU.filter(E=>!Q.includes(E));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:O.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[O.asignatura," - Presentación: ",new Date(O.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",O.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:O.miGrupo.integrantes.map(E=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:E.nombre===t.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===t.nombreCompleto?c.jsxs("select",{value:E.rol||"",onChange:S=>F(O.id,S.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!j.includes(E.rol)&&c.jsx("option",{value:E.rol,children:E.rol}),j.map(S=>c.jsx("option",{value:S,children:S},S))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},O.id)})})]})]})},x3e="proyectos_interdisciplinarios",A9="entregas_interdisciplinarias",d9=t=>{var n,r,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((r=(n=e.fechaCreacion)==null?void 0:n.toDate)==null?void 0:r.call(n).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},v3e=(t,e)=>{const n=mn(zt(Ut,x3e),cs("cursos","array-contains",t));return Un(n,r=>{const s=r.docs.map(a=>d9(a));e(s)},r=>{console.error("Error al suscribirse a los proyectos:",r),e([])})},y3e=(t,e)=>{const n=mn(zt(Ut,A9),cs("estudianteId","==",t));return Un(n,r=>{const s=r.docs.map(a=>d9(a));e(s)},r=>{console.error("Error al suscribirse a las entregas:",r),e([])})},w3e=async t=>{try{const{id:e,...n}=t,r=Mn(Ut,A9,e),s={...n,fechaCompletado:Tn.fromDate(new Date(n.fechaCompletado||Date.now()))};await wo(r,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},b3e=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState([]),[a,i]=se.useState(null),[o,l]=se.useState(!0);se.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const m=v3e(t.curso,n),p=y3e(t.id,x=>{s(x),l(!1)});return()=>{m(),p()}},[t.curso,t.id]);const u=async m=>{try{await w3e(m)}catch(p){console.error("Failed to update submission:",p),alert("Hubo un error al guardar tu entrega.")}},d=({plan:m,tarea:p})=>{const x=se.useMemo(()=>{const Q=r.find(j=>j.planificacionId===m.id&&j.tareaId===p.id);return Q||{id:`${m.id}_${p.id}_${t.id}`,planificacionId:m.id,tareaId:p.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[m.id,p.id,r]),[C,y]=se.useState(!1),[T,I]=se.useState({observaciones:x.observacionesEstudiante||"",enlace:x.enlaceUrl||""}),F=Q=>{var E;const j=(E=Q.target.files)==null?void 0:E[0];j&&(alert(`Simulación: Archivo "${j.name}" listo para subir.`),u({...x,archivoAdjunto:{nombre:j.name,url:`simulated/path/${j.name}`},fechaCompletado:new Date().toISOString()}))},M=()=>{u({...x,observacionesEstudiante:T.observaciones,enlaceUrl:T.enlace,fechaCompletado:new Date().toISOString()})},O=()=>{u({...x,completada:!x.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:x.completada,onChange:O,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${x.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",p.numero,": ",p.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",p.fechaEntrega]}),p.recursoUrl&&c.jsx("a",{href:p.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>y(!C),className:"text-sm font-semibold",children:C?"Ocultar":"Entregar"})]}),C&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:T.observaciones,onChange:Q=>I({...T,observaciones:Q.target.value}),onBlur:M,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:T.enlace,onChange:Q=>I({...T,enlace:Q.target.value}),onBlur:M,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:F,className:"text-sm"}),x.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",x.archivoAdjunto.nombre]})]}),x.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:x.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(m=>{const p=m.tareas||[],C=r.filter(T=>T.planificacionId===m.id).filter(T=>T.completada).length,y=p.length>0?C/p.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(a===m.id?null:m.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:m.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(y),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${y}%`}})})]})]}),a===m.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:p.length>0?p.map(T=>c.jsx(d,{plan:m,tarea:T},T.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},m.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},_3e=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((n,r)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:n.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[n.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${n.value/4*100}%`}})})]},n.label+r))}),C3e=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState(!1),[a,i]=se.useState(null),[o,l]=se.useState(null),[u,d]=se.useState(zg),m=se.useCallback(async()=>{s(!0);try{const T=(await $we(t.nombreCompleto)).sort((I,F)=>new Date(F.fecha).getTime()-new Date(I.fecha).getTime());n(T),i(null)}catch(y){console.error("Error al cargar acompañamientos desde Firestore",y),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),p=se.useCallback(async()=>{try{const y=await Wwe();y&&d(y)}catch(y){console.error("Error al cargar rúbrica personalizada",y)}},[]);se.useEffect(()=>{m(),p()},[m,p]);const x=se.useMemo(()=>{if(!o)return[];const y={};return u.forEach(T=>{y[T.domain]={total:0,count:0},T.criteria.forEach(I=>{const F=o.rubricaResultados[I.name];F&&(y[T.domain].total+=F,y[T.domain].count++)})}),Object.entries(y).map(([T,I])=>({label:T,value:I.count>0?I.total/I.count:0}))},[o,u]),C=y=>{const T=new En;T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),T.setFont("helvetica","bold"),T.setFontSize(16),T.setTextColor(40),T.text("Informe de Acompañamiento Docente",T.internal.pageSize.getWidth()/2,25,{align:"center"}),T.setFontSize(12),T.setFont("helvetica","normal"),_c(T,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let I=T.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const O=[],Q=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(j=>{O.push([{content:j.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),j.criteria.forEach(E=>{const S=y.rubricaResultados[E.name],k=S?Q[S-1]:"No evaluado";O.push([E.name,k])})}),_c(T,{startY:I,head:[["Indicador","Nivel de Logro"]],body:O,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),I=T.lastAutoTable.finalY+15}const F=(O,Q)=>{if(!Q)return;I>250&&(T.addPage(),I=20,T.setFont("helvetica","bold"),T.setFontSize(10),T.setTextColor(100),T.text("LICEO INDUSTRIAL DE RECOLETA",T.internal.pageSize.getWidth()/2,15,{align:"center"}),I=25),T.setFont("helvetica","bold"),T.setFontSize(14),T.setTextColor(40),T.text(O,14,I),I+=8,T.setFont("helvetica","normal"),T.setFontSize(11),T.setTextColor(60);const j=T.splitTextToSize(Q.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);T.text(j,14,I),I+=j.length*5+10};F("Observaciones Generales",y.observacionesGenerales),F("Retroalimentación Consolidada",y.retroalimentacionConsolidada);const M=T.getNumberOfPages();for(let O=1;O<=M;O++)T.setPage(O),T.setFontSize(8),T.setTextColor(128),T.text(`Página ${O} de ${M}`,T.internal.pageSize.getWidth()/2,T.internal.pageSize.getHeight()-10,{align:"center"});T.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>C(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(FU,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(_3e,{data:x})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!r&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!r&&e.length>0?e.map(y=>c.jsx("button",{onClick:()=>l(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!r&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},E3e=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=zt(Sr,"planificaciones"),n=mn(e,Dr("fechaCreacion","desc"));return Un(n,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},S3e=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const n=zt(Sr,"planificaciones"),r=mn(n,cs("userId","==",t),Dr("fechaCreacion","desc"));return Un(r,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar planificaciones del usuario:",a),a})}catch(n){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",n),n}};class XR extends Map{constructor(e,n=B3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(JR(this,e))}has(e){return super.has(JR(this,e))}set(e,n){return super.set(T3e(this,e),n)}delete(e){return super.delete(N3e(this,e))}}function JR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function T3e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function N3e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function B3e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function k3e(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const ZR=Symbol("implicit");function f9(){var t=new XR,e=[],n=[],r=ZR;function s(a){let i=t.get(a);if(i===void 0){if(r!==ZR)return r;t.set(a,i=e.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new XR;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return f9(e,n).unknown(r)},k3e.apply(s,arguments),s}function I3e(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const F3e=I3e("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var D3e={value:function(){}};function h9(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sw(n)}function sw(t){this._=t}function L3e(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sw.prototype=h9.prototype={constructor:sw,on:function(t,e){var n=this._,r=L3e(t+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(t=r[a]).type)&&(s=R3e(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=r[a]).type)n[s]=eP(n[s],t.name,e);else if(e==null)for(s in n)n[s]=eP(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new sw(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function R3e(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function eP(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=D3e,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const P3e=Object.freeze(Object.defineProperty({__proto__:null,dispatch:h9},Symbol.toStringTag,{value:"Module"})),M3e=CV(P3e);var BE,tP;function U3e(){if(tP)return BE;tP=1;const t=M3e.dispatch,e=Math.PI/180,n={archimedean:y,rectangular:T},r=64,s=2048;BE=function(){var O=[256,256],Q=a,j=i,E=l,S=o,k=o,z=u,P=d,R=y,G=[],q=1/0,le=t("word","end"),ee=null,oe=Math.random,K={},ne=F;K.canvas=function(V){return arguments.length?(ne=M(V),K):ne},K.start=function(){var V=X(ne()),J=I((O[0]>>5)*O[1]),re=null,ie=G.length,fe=-1,Se=[],ve=G.map(function(we,me){return we.text=Q.call(this,we,me),we.font=j.call(this,we,me),we.style=S.call(this,we,me),we.weight=k.call(this,we,me),we.rotate=z.call(this,we,me),we.size=~~E.call(this,we,me),we.padding=P.call(this,we,me),we}).sort(function(we,me){return me.size-we.size});return ee&&clearInterval(ee),ee=setInterval(ye,0),ye(),K;function ye(){for(var we=Date.now();Date.now()-we<q&&++fe<ie&&ee;){var me=ve[fe];me.x=O[0]*(oe()+.5)>>1,me.y=O[1]*(oe()+.5)>>1,m(V,me,ve,fe),me.hasText&&ce(J,me,re)&&(Se.push(me),le.call("word",K,me),re?x(re,me):re=[{x:me.x+me.x0,y:me.y+me.y0},{x:me.x+me.x1,y:me.y+me.y1}],me.x-=O[0]>>1,me.y-=O[1]>>1)}fe>=ie&&(K.stop(),le.call("end",K,Se,re))}},K.stop=function(){ee&&(clearInterval(ee),ee=null);for(const V of G)delete V.sprite;return K};function X(V){const J=V.getContext("2d",{willReadFrequently:!0});V.width=V.height=1;const re=Math.sqrt(J.getImageData(0,0,1,1).data.length>>2);return V.width=(r<<5)/re,V.height=s/re,J.fillStyle=J.strokeStyle="red",{context:J,ratio:re}}function ce(V,J,re){O[0],O[1];for(var ie=J.x,fe=J.y,Se=Math.sqrt(O[0]*O[0]+O[1]*O[1]),ve=R(O),ye=oe()<.5?1:-1,we=-ye,me,he,Ve;(me=ve(we+=ye))&&(he=~~me[0],Ve=~~me[1],!(Math.min(Math.abs(he),Math.abs(Ve))>=Se));)if(J.x=ie+he,J.y=fe+Ve,!(J.x+J.x0<0||J.y+J.y0<0||J.x+J.x1>O[0]||J.y+J.y1>O[1])&&(!re||C(J,re))&&!p(J,V,O[0])){for(var nt=J.sprite,Oe=J.width>>5,Ie=O[0]>>5,je=J.x-(Oe<<4),Ke=je&127,st=32-Ke,vt=J.y1-J.y0,Tt=(J.y+J.y0)*Ie+(je>>5),xt,Vt=0;Vt<vt;Vt++){xt=0;for(var Kt=0;Kt<=Oe;Kt++)V[Tt+Kt]|=xt<<st|(Kt<Oe?(xt=nt[Vt*Oe+Kt])>>>Ke:0);Tt+=Ie}return!0}return!1}return K.timeInterval=function(V){return arguments.length?(q=V??1/0,K):q},K.words=function(V){return arguments.length?(G=V,K):G},K.size=function(V){return arguments.length?(O=[+V[0],+V[1]],K):O},K.font=function(V){return arguments.length?(j=M(V),K):j},K.fontStyle=function(V){return arguments.length?(S=M(V),K):S},K.fontWeight=function(V){return arguments.length?(k=M(V),K):k},K.rotate=function(V){return arguments.length?(z=M(V),K):z},K.text=function(V){return arguments.length?(Q=M(V),K):Q},K.spiral=function(V){return arguments.length?(R=n[V]||V,K):R},K.fontSize=function(V){return arguments.length?(E=M(V),K):E},K.padding=function(V){return arguments.length?(P=M(V),K):P},K.random=function(V){return arguments.length?(oe=V,K):oe},K.on=function(){var V=le.on.apply(le,arguments);return V===le?K:V},K};function a(O){return O.text}function i(){return"serif"}function o(){return"normal"}function l(O){return Math.sqrt(O.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function m(O,Q,j,E){if(!Q.sprite){var S=O.context,k=O.ratio;S.clearRect(0,0,(r<<5)/k,s/k);var z=0,P=0,R=0,G=j.length;for(--E;++E<G;){Q=j[E],S.save(),S.font=Q.style+" "+Q.weight+" "+~~((Q.size+1)/k)+"px "+Q.font;const me=S.measureText(Q.text),he=-Math.floor(me.width/2);let Ve=(me.width+1)*k,nt=Q.size<<1;if(Q.rotate){var q=Math.sin(Q.rotate*e),le=Math.cos(Q.rotate*e),ee=Ve*le,oe=Ve*q,K=nt*le,ne=nt*q;Ve=Math.max(Math.abs(ee+ne),Math.abs(ee-ne))+31>>5<<5,nt=~~Math.max(Math.abs(oe+K),Math.abs(oe-K))}else Ve=Ve+31>>5<<5;if(nt>R&&(R=nt),z+Ve>=r<<5&&(z=0,P+=R,R=0),P+nt>=s)break;S.translate((z+(Ve>>1))/k,(P+(nt>>1))/k),Q.rotate&&S.rotate(Q.rotate*e),S.fillText(Q.text,he,0),Q.padding&&(S.lineWidth=2*Q.padding,S.strokeText(Q.text,he,0)),S.restore(),Q.width=Ve,Q.height=nt,Q.xoff=z,Q.yoff=P,Q.x1=Ve>>1,Q.y1=nt>>1,Q.x0=-Q.x1,Q.y0=-Q.y1,Q.hasText=!0,z+=Ve}for(var X=S.getImageData(0,0,(r<<5)/k,s/k).data,ce=[];--E>=0;)if(Q=j[E],!!Q.hasText){for(var V=Q.width,J=V>>5,re=Q.y1-Q.y0,ie=0;ie<re*J;ie++)ce[ie]=0;if(z=Q.xoff,z==null)return;P=Q.yoff;for(var fe=0,Se=-1,ve=0;ve<re;ve++){for(var ie=0;ie<V;ie++){var ye=J*ve+(ie>>5),we=X[(P+ve)*(r<<5)+(z+ie)<<2]?1<<31-ie%32:0;ce[ye]|=we,fe|=we}fe?Se=ve:(Q.y0++,re--,ve--,P++)}Q.y1=Q.y0+Se,Q.sprite=ce.slice(0,(Q.y1-Q.y0)*J)}}}function p(O,Q,j){j>>=5;for(var E=O.sprite,S=O.width>>5,k=O.x-(S<<4),z=k&127,P=32-z,R=O.y1-O.y0,G=(O.y+O.y0)*j+(k>>5),q,le=0;le<R;le++){q=0;for(var ee=0;ee<=S;ee++)if((q<<P|(ee<S?(q=E[le*S+ee])>>>z:0))&Q[G+ee])return!0;G+=j}return!1}function x(O,Q){var j=O[0],E=O[1];Q.x+Q.x0<j.x&&(j.x=Q.x+Q.x0),Q.y+Q.y0<j.y&&(j.y=Q.y+Q.y0),Q.x+Q.x1>E.x&&(E.x=Q.x+Q.x1),Q.y+Q.y1>E.y&&(E.y=Q.y+Q.y1)}function C(O,Q){return O.x+O.x1>Q[0].x&&O.x+O.x0<Q[1].x&&O.y+O.y1>Q[0].y&&O.y+O.y0<Q[1].y}function y(O){var Q=O[0]/O[1];return function(j){return[Q*(j*=.1)*Math.cos(j),j*Math.sin(j)]}}function T(O){var Q=4,j=Q*O[0]/O[1],E=0,S=0;return function(k){var z=k<0?-1:1;switch(Math.sqrt(1+4*z*k)-z&3){case 0:E+=j;break;case 1:S+=Q;break;case 2:E-=j;break;default:S-=Q;break}return[E,S]}}function I(O){for(var Q=[],j=-1;++j<O;)Q[j]=0;return Q}function F(){return document.createElement("canvas")}function M(O){return typeof O=="function"?O:function(){return O}}return BE}var O3e=U3e();const j3e=Kx(O3e),Q3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),H3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),V3e=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),z3e=t=>{const[e,n]=se.useState([]),[r,s]=se.useState(!0),[a,i]=se.useState(null),o=se.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return se.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}try{let l;const u=d=>{n(d),s(!1),i(null)};if(o)l=E3e(u);else{const d=t.email||t.id||"";l=S3e(u,d)}return l}catch(l){i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:r,error:a,canViewAllPlans:o}},G3e=({plan:t,onClose:e})=>c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:n=>n.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(H3e,{})})]}),c.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),c.jsx("div",{className:"mt-3",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof t.progreso=="number"?`${t.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",t.detallesLeccion.length,")"]}),c.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:t.detallesLeccion.map((n,r)=>c.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",r+1,": ",n.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",n.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",n.contenidosConceptuales]})]})]},r))}),t.reflexionUnidad&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),t.reflexionUnidad.ordenHabilidades&&t.reflexionUnidad.ordenHabilidades.length>0?c.jsx("ul",{className:"space-y-2",children:t.reflexionUnidad.ordenHabilidades.map((n,r)=>c.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[c.jsxs("span",{className:"font-bold text-amber-500",children:[r+1,"."]})," ",n]},n))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.fortalezas||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.mejoras||"N/A"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:t.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),nP=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],q3e=["1º Medio","2º Medio","3º Medio","4º Medio"],K3e=({words:t})=>{const e=se.useRef(null);return se.useEffect(()=>{if(!t.length||!e.current)return;const n=Zc(e.current);n.selectAll("*").remove();const r=j3e().size([500,350]).words(t.map(a=>({...a}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(a=>Math.sqrt(a.value)*12).on("end",s);r.start();function s(a){n.attr("width",r.size()[0]).attr("height",r.size()[1]).append("g").attr("transform",`translate(${r.size()[0]/2},${r.size()[1]/2})`).selectAll("text").data(a).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>f9(F3e)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[t]),c.jsx("svg",{ref:e})},$3e=({planificaciones:t})=>{const[e,n]=se.useState("todos"),[r,s]=se.useState("todos"),a=se.useMemo(()=>["todos",...Array.from(new Set(t.map(d=>d.asignatura)))],[t]),i=se.useMemo(()=>t.filter(d=>(e==="todos"||d.nivel===e)&&(r==="todos"||d.asignatura===r)&&d.reflexionUnidad),[t,e,r]),o=se.useMemo(()=>{const d=nP.reduce((m,p)=>({...m,[p]:0}),{});return i.forEach(m=>{var p,x;return(x=(p=m.reflexionUnidad)==null?void 0:p.ordenHabilidades)==null?void 0:x.forEach((C,y)=>{d[C]!==void 0&&(d[C]+=nP.length-y)})}),Object.entries(d).map(([m,p])=>({text:m,value:p})).sort((m,p)=>p.value-m.value)},[i]),l=se.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),p=(i.map(x=>{var C,y;return`${((C=x.reflexionUnidad)==null?void 0:C.fortalezas)||""} ${((y=x.reflexionUnidad)==null?void 0:y.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((x,C)=>(d.has(C)||(x[C]=(x[C]||0)+1),x),{});return Object.entries(p).map(([x,C])=>({text:x,value:C})).sort((x,C)=>C.value-x.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsxs("select",{value:e,onChange:d=>n(d.target.value),className:u,children:[c.jsx("option",{value:"todos",children:"Todos los Niveles"}),q3e.map(d=>c.jsx("option",{value:d,children:d},d))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{value:r,onChange:d=>s(d.target.value),className:u,children:a.map(d=>c.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):c.jsx("ul",{className:"space-y-3",children:o.map((d,m)=>c.jsxs("li",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:m+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),c.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),c.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),l.length>0?c.jsx(K3e,{words:l}):c.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},W3e=({currentUser:t})=>{const{planificaciones:e,loading:n,error:r,canViewAllPlans:s}=z3e(t),[a,i]=se.useState("seguimiento"),[o,l]=se.useState("1º"),[u,d]=se.useState(null),[m,p]=se.useState(null),x=se.useMemo(()=>{const T={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return e.filter(I=>I.nivel===T[o]&&I.tipo==="Unidad")},[e,o]),C=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(t!=null&&t.id))return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{children:"Usuario no autenticado."})});if(n)return c.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[c.jsx(V3e,{}),c.jsx("span",{children:"Cargando planificaciones..."})]});if(r)return c.jsx("div",{className:"text-center py-8",children:c.jsxs("p",{className:"text-red-500",children:["Error: ",r]})});const y=()=>c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:C.map(T=>c.jsx("button",{onClick:()=>l(T.key),className:`${o===T.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:T.label},T.key))})}),x.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):c.jsx("div",{className:"space-y-4",children:Cc.map(T=>{const I=x.filter(M=>M.asignatura===T);if(I.length===0)return null;const F=u===T;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>d(F?null:T),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:T}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[I.length," unidad",I.length>1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform ${F?"rotate-180":""}`,children:c.jsx(Q3e,{})})]}),F&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:c.jsx("ul",{className:"space-y-3",children:I.map(M=>c.jsx("li",{children:c.jsxs("button",{onClick:()=>p(M),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:M.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",M.autor||"N/A"]})]})},M.id))})})]},T)})})]});return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&c.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>i("seguimiento"),className:`${a==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),c.jsx("button",{onClick:()=>i("analisis"),className:`${a==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),a==="seguimiento"&&y(),a==="analisis"&&c.jsx($3e,{planificaciones:e.filter(T=>T.tipo==="Unidad")})]}),m&&c.jsx(G3e,{plan:m,onClose:()=>p(null)})]})},Ub="analisisTaxonomicos",Y3e=async()=>{try{const t=mn(zt(Sr,Ub),Dr("uploadDate","desc"));return(await gi(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener todos los análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},X3e=async t=>{if(!t)return[];try{const e=mn(zt(Sr,Ub),cs("userId","==",t),Dr("uploadDate","desc"));return(await gi(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener análisis por usuario:",e),new Error("No se pudieron cargar los análisis del usuario")}},J3e=async t=>{try{return{id:(await na(zt(Sr,Ub),t)).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},Z3e=async t=>{try{const e=Mn(Sr,Ub,t);await Yi(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},kE=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],rP={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},eFe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),sP=({currentUser:t})=>{const[e,n]=se.useState([]),[r,s]=se.useState(!1),[a,i]=se.useState(null),[o,l]=se.useState(null),[u,d]=se.useState(""),[m,p]=se.useState(!1),[x,C]=se.useState(null),[y,T]=se.useState(null),I=se.useCallback(async()=>{if(t!=null&&t.id){s(!0);try{const j=t.profile==="SUBDIRECCION"?await Y3e():await X3e(t.id);n(j),i(null)}catch(j){console.error("Error al cargar análisis:",j),i("No se pudieron cargar los análisis.")}finally{s(!1)}}},[t]);se.useEffect(()=>{I()},[I]);const F=async j=>{var S;const E=(S=j.target.files)==null?void 0:S[0];if(E){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(E.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}C(E),d(E.name),i(null);const z=new FileReader;z.onloadend=()=>{var R;const P=(R=z.result)==null?void 0:R.split(",")[1];if(!P){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),T(null);return}T({mimeType:E.type,data:P})},z.onerror=()=>i("Error al leer el archivo."),z.readAsDataURL(E)}},M=async()=>{if(!u.trim()||!y){i("Debe subir un documento y asignarle un nombre para analizar.");return}p(!0),i(null);const j=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,E={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:kE}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:kE.reduce((S,k)=>({...S,[k]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{od("Análisis Taxonómico",t);const S="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new xi(S).getGenerativeModel({model:"gemini-1.5-flash-latest",generationConfig:{responseMimeType:"application/json",responseSchema:E}}),P={inlineData:{mimeType:y.mimeType,data:y.data}},G=(await z.generateContent([j,P])).response.text();let q;try{q=JSON.parse(G)}catch(oe){throw console.error("Error al parsear JSON:",oe),console.error("Respuesta recibida (no es JSON válido):",G),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const le={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:q.analysisResults,summary:q.summary},ee=await J3e(le);await I(),l(ee),d(""),C(null),T(null)}catch(S){console.error(S);const k=S instanceof Error?S.message:"Hubo un error al analizar el documento.";i(k)}finally{p(!1)}},O=async j=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await Z3e(j),await I(),(o==null?void 0:o.id)===j&&l(null)}catch{i("No se pudo eliminar el análisis.")}},Q=se.useMemo(()=>o?Object.values(o.summary).reduce((j,E)=>j+(E||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:F,accept:".pdf,.doc,.docx"}),c.jsx("span",{children:"Cargue un archivo"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500",children:x?x.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:j=>d(j.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:M,disabled:m||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:m?c.jsx(eFe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),r?c.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):e.length===0?c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:e.map(j=>c.jsxs("button",{onClick:()=>l(j),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===j.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:j.documentName}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(j.uploadDate).toLocaleString("es-CL")})]},j.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>O(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",Q," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:kE.map(j=>{const E=o.summary[j]||0,S=Q>0?E/Q*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:j}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[E," (",S.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${rP[j]} h-4 rounded-full`,style:{width:`${S}%`}})})]},j)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((j,E)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:j.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${rP[j.habilidadBloom]}`,children:j.habilidadBloom})})]},E))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},x2="empresas_practicas",tFe="usuarios",m9=t=>{const e=t.data();return{id:t.id,...e}};async function nFe(t){const n=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=TU_CLAVE_DE_API_DE_GOOGLE_MAPS&region=CL`;try{const s=await(await fetch(n)).json();return s.status==="OK"&&s.results[0]?s.results[0].geometry.location:(console.warn("Geocodificación no exitosa:",s.status),null)}catch(r){return console.error("Error en la llamada a la API de Geocodificación:",r),null}}const rFe=t=>{const e=mn(zt(Ut,x2),Dr("nombre","asc"));return Un(e,n=>{const r=n.docs.map(s=>m9(s));t(r)},n=>console.error("Error al suscribirse a empresas:",n))},sFe=async t=>{const e=t.calificaciones.reduce((r,s)=>r+(s.score||0),0),n={...t,puntajeTotal:e};if(t.direccion){const r=await nFe(t.direccion);r&&(n.coordenadas=r)}if("id"in t&&t.id){const{id:r,...s}=n,a=Mn(Ut,x2,r);return await wo(a,s,{merge:!0}),r}else return(await na(zt(Ut,x2),{...n,createdAt:HY()})).id},aFe=async t=>{const e=Mn(Ut,x2,t);await Yi(e)},iFe=t=>{const e=mn(zt(Ut,tFe),cs("profile","==",tn.ESTUDIANTE),Dr("nombreCompleto","asc"));return Un(e,n=>{const r=n.docs.map(s=>m9(s));t(r)},n=>console.error("Error al suscribirse a estudiantes:",n))};function p9(t,e){const n=se.useRef(e);se.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const oFe=1;function lFe(t){return Object.freeze({__version:oFe,map:t})}function cFe(t,e){return Object.freeze({...t,...e})}const gN=se.createContext(null);function g9(){const t=se.use(gN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function uFe(t){function e(n,r){const{instance:s,context:a}=t(n).current;se.useImperativeHandle(r,()=>s);const{children:i}=n;return i==null?null:wt.createElement(gN,{value:a},i)}return se.forwardRef(e)}function AFe(t){function e(n,r){const[s,a]=se.useState(!1),{instance:i}=t(n,a).current;se.useImperativeHandle(r,()=>i),se.useEffect(function(){s&&i.update()},[i,s,n.children]);const o=i._contentNode;return o?MNe.createPortal(n.children,o):null}return se.forwardRef(e)}function dFe(t){function e(n,r){const{instance:s}=t(n).current;return se.useImperativeHandle(r,()=>s),null}return se.forwardRef(e)}function x9(t,e){const n=se.useRef(void 0);se.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function xN(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function fFe(t,e){return function(r,s){const a=g9(),i=t(xN(r,a),a);return p9(a.map,r.attribution),x9(i.current,r.eventHandlers),e(i.current,a,r,s),i}}var Mg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var hFe=Mg.exports,aP;function mFe(){return aP||(aP=1,function(t,e){(function(n,r){r(e)})(hFe,function(n){var r="1.9.4";function s(h){var w,D,Z,Ae;for(D=1,Z=arguments.length;D<Z;D++){Ae=arguments[D];for(w in Ae)h[w]=Ae[w]}return h}var a=Object.create||function(){function h(){}return function(w){return h.prototype=w,new h}}();function i(h,w){var D=Array.prototype.slice;if(h.bind)return h.bind.apply(h,D.call(arguments,1));var Z=D.call(arguments,2);return function(){return h.apply(w,Z.length?Z.concat(D.call(arguments)):arguments)}}var o=0;function l(h){return"_leaflet_id"in h||(h._leaflet_id=++o),h._leaflet_id}function u(h,w,D){var Z,Ae,Ce,Qe;return Qe=function(){Z=!1,Ae&&(Ce.apply(D,Ae),Ae=!1)},Ce=function(){Z?Ae=arguments:(h.apply(D,arguments),setTimeout(Qe,w),Z=!0)},Ce}function d(h,w,D){var Z=w[1],Ae=w[0],Ce=Z-Ae;return h===Z&&D?h:((h-Ae)%Ce+Ce)%Ce+Ae}function m(){return!1}function p(h,w){if(w===!1)return h;var D=Math.pow(10,w===void 0?6:w);return Math.round(h*D)/D}function x(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function C(h){return x(h).split(/\s+/)}function y(h,w){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?a(h.options):{});for(var D in w)h.options[D]=w[D];return h.options}function T(h,w,D){var Z=[];for(var Ae in h)Z.push(encodeURIComponent(D?Ae.toUpperCase():Ae)+"="+encodeURIComponent(h[Ae]));return(!w||w.indexOf("?")===-1?"?":"&")+Z.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function F(h,w){return h.replace(I,function(D,Z){var Ae=w[Z];if(Ae===void 0)throw new Error("No value provided for variable "+D);return typeof Ae=="function"&&(Ae=Ae(w)),Ae})}var M=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function O(h,w){for(var D=0;D<h.length;D++)if(h[D]===w)return D;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var E=0;function S(h){var w=+new Date,D=Math.max(0,16-(w-E));return E=w+D,window.setTimeout(h,D)}var k=window.requestAnimationFrame||j("RequestAnimationFrame")||S,z=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function P(h,w,D){if(D&&k===S)h.call(w);else return k.call(window,i(h,w))}function R(h){h&&z.call(window,h)}var G={__proto__:null,extend:s,create:a,bind:i,get lastId(){return o},stamp:l,throttle:u,wrapNum:d,falseFn:m,formatNum:p,trim:x,splitWords:C,setOptions:y,getParamString:T,template:F,isArray:M,indexOf:O,emptyImageUrl:Q,requestFn:k,cancelFn:z,requestAnimFrame:P,cancelAnimFrame:R};function q(){}q.extend=function(h){var w=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},D=w.__super__=this.prototype,Z=a(D);Z.constructor=w,w.prototype=Z;for(var Ae in this)Object.prototype.hasOwnProperty.call(this,Ae)&&Ae!=="prototype"&&Ae!=="__super__"&&(w[Ae]=this[Ae]);return h.statics&&s(w,h.statics),h.includes&&(le(h.includes),s.apply(null,[Z].concat(h.includes))),s(Z,h),delete Z.statics,delete Z.includes,Z.options&&(Z.options=D.options?a(D.options):{},s(Z.options,h.options)),Z._initHooks=[],Z.callInitHooks=function(){if(!this._initHooksCalled){D.callInitHooks&&D.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,Qe=Z._initHooks.length;Ce<Qe;Ce++)Z._initHooks[Ce].call(this)}},w},q.include=function(h){var w=this.prototype.options;return s(this.prototype,h),h.options&&(this.prototype.options=w,this.mergeOptions(h.options)),this},q.mergeOptions=function(h){return s(this.prototype.options,h),this},q.addInitHook=function(h){var w=Array.prototype.slice.call(arguments,1),D=typeof h=="function"?h:function(){this[h].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(D),this};function le(h){if(!(typeof L>"u"||!L||!L.Mixin)){h=M(h)?h:[h];for(var w=0;w<h.length;w++)h[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(h,w,D){if(typeof h=="object")for(var Z in h)this._on(Z,h[Z],w);else{h=C(h);for(var Ae=0,Ce=h.length;Ae<Ce;Ae++)this._on(h[Ae],w,D)}return this},off:function(h,w,D){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var Z in h)this._off(Z,h[Z],w);else{h=C(h);for(var Ae=arguments.length===1,Ce=0,Qe=h.length;Ce<Qe;Ce++)Ae?this._off(h[Ce]):this._off(h[Ce],w,D)}return this},_on:function(h,w,D,Z){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(h,w,D)===!1){D===this&&(D=void 0);var Ae={fn:w,ctx:D};Z&&(Ae.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(Ae)}},_off:function(h,w,D){var Z,Ae,Ce;if(this._events&&(Z=this._events[h],!!Z)){if(arguments.length===1){if(this._firingCount)for(Ae=0,Ce=Z.length;Ae<Ce;Ae++)Z[Ae].fn=m;delete this._events[h];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var Qe=this._listens(h,w,D);if(Qe!==!1){var rt=Z[Qe];this._firingCount&&(rt.fn=m,this._events[h]=Z=Z.slice()),Z.splice(Qe,1)}}},fire:function(h,w,D){if(!this.listens(h,D))return this;var Z=s({},w,{type:h,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var Ae=this._events[h];if(Ae){this._firingCount=this._firingCount+1||1;for(var Ce=0,Qe=Ae.length;Ce<Qe;Ce++){var rt=Ae[Ce],ht=rt.fn;rt.once&&this.off(h,ht,rt.ctx),ht.call(rt.ctx||this,Z)}this._firingCount--}}return D&&this._propagateEvent(Z),this},listens:function(h,w,D,Z){typeof h!="string"&&console.warn('"string" type argument expected');var Ae=w;typeof w!="function"&&(Z=!!w,Ae=void 0,D=void 0);var Ce=this._events&&this._events[h];if(Ce&&Ce.length&&this._listens(h,Ae,D)!==!1)return!0;if(Z){for(var Qe in this._eventParents)if(this._eventParents[Qe].listens(h,w,D,Z))return!0}return!1},_listens:function(h,w,D){if(!this._events)return!1;var Z=this._events[h]||[];if(!w)return!!Z.length;D===this&&(D=void 0);for(var Ae=0,Ce=Z.length;Ae<Ce;Ae++)if(Z[Ae].fn===w&&Z[Ae].ctx===D)return Ae;return!1},once:function(h,w,D){if(typeof h=="object")for(var Z in h)this._on(Z,h[Z],w,!0);else{h=C(h);for(var Ae=0,Ce=h.length;Ae<Ce;Ae++)this._on(h[Ae],w,D,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[l(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[l(h)],this},_propagateEvent:function(h){for(var w in this._eventParents)this._eventParents[w].fire(h.type,s({layer:h.target,propagatedFrom:h.target},h),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var oe=q.extend(ee);function K(h,w,D){this.x=D?Math.round(h):h,this.y=D?Math.round(w):w}var ne=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(h){return this.clone()._add(X(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(X(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new K(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new K(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(h){h=X(h);var w=h.x-this.x,D=h.y-this.y;return Math.sqrt(w*w+D*D)},equals:function(h){return h=X(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=X(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function X(h,w,D){return h instanceof K?h:M(h)?new K(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new K(h.x,h.y):new K(h,w,D)}function ce(h,w){if(h)for(var D=w?[h,w]:h,Z=0,Ae=D.length;Z<Ae;Z++)this.extend(D[Z])}ce.prototype={extend:function(h){var w,D;if(!h)return this;if(h instanceof K||typeof h[0]=="number"||"x"in h)w=D=X(h);else if(h=V(h),w=h.min,D=h.max,!w||!D)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=D.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(D.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(D.y,this.max.y)),this},getCenter:function(h){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var w,D;return typeof h[0]=="number"||h instanceof K?h=X(h):h=V(h),h instanceof ce?(w=h.min,D=h.max):w=D=h,w.x>=this.min.x&&D.x<=this.max.x&&w.y>=this.min.y&&D.y<=this.max.y},intersects:function(h){h=V(h);var w=this.min,D=this.max,Z=h.min,Ae=h.max,Ce=Ae.x>=w.x&&Z.x<=D.x,Qe=Ae.y>=w.y&&Z.y<=D.y;return Ce&&Qe},overlaps:function(h){h=V(h);var w=this.min,D=this.max,Z=h.min,Ae=h.max,Ce=Ae.x>w.x&&Z.x<D.x,Qe=Ae.y>w.y&&Z.y<D.y;return Ce&&Qe},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var w=this.min,D=this.max,Z=Math.abs(w.x-D.x)*h,Ae=Math.abs(w.y-D.y)*h;return V(X(w.x-Z,w.y-Ae),X(D.x+Z,D.y+Ae))},equals:function(h){return h?(h=V(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function V(h,w){return!h||h instanceof ce?h:new ce(h,w)}function J(h,w){if(h)for(var D=w?[h,w]:h,Z=0,Ae=D.length;Z<Ae;Z++)this.extend(D[Z])}J.prototype={extend:function(h){var w=this._southWest,D=this._northEast,Z,Ae;if(h instanceof ie)Z=h,Ae=h;else if(h instanceof J){if(Z=h._southWest,Ae=h._northEast,!Z||!Ae)return this}else return h?this.extend(fe(h)||re(h)):this;return!w&&!D?(this._southWest=new ie(Z.lat,Z.lng),this._northEast=new ie(Ae.lat,Ae.lng)):(w.lat=Math.min(Z.lat,w.lat),w.lng=Math.min(Z.lng,w.lng),D.lat=Math.max(Ae.lat,D.lat),D.lng=Math.max(Ae.lng,D.lng)),this},pad:function(h){var w=this._southWest,D=this._northEast,Z=Math.abs(w.lat-D.lat)*h,Ae=Math.abs(w.lng-D.lng)*h;return new J(new ie(w.lat-Z,w.lng-Ae),new ie(D.lat+Z,D.lng+Ae))},getCenter:function(){return new ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof ie||"lat"in h?h=fe(h):h=re(h);var w=this._southWest,D=this._northEast,Z,Ae;return h instanceof J?(Z=h.getSouthWest(),Ae=h.getNorthEast()):Z=Ae=h,Z.lat>=w.lat&&Ae.lat<=D.lat&&Z.lng>=w.lng&&Ae.lng<=D.lng},intersects:function(h){h=re(h);var w=this._southWest,D=this._northEast,Z=h.getSouthWest(),Ae=h.getNorthEast(),Ce=Ae.lat>=w.lat&&Z.lat<=D.lat,Qe=Ae.lng>=w.lng&&Z.lng<=D.lng;return Ce&&Qe},overlaps:function(h){h=re(h);var w=this._southWest,D=this._northEast,Z=h.getSouthWest(),Ae=h.getNorthEast(),Ce=Ae.lat>w.lat&&Z.lat<D.lat,Qe=Ae.lng>w.lng&&Z.lng<D.lng;return Ce&&Qe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,w){return h?(h=re(h),this._southWest.equals(h.getSouthWest(),w)&&this._northEast.equals(h.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(h,w){return h instanceof J?h:new J(h,w)}function ie(h,w,D){if(isNaN(h)||isNaN(w))throw new Error("Invalid LatLng object: ("+h+", "+w+")");this.lat=+h,this.lng=+w,D!==void 0&&(this.alt=+D)}ie.prototype={equals:function(h,w){if(!h)return!1;h=fe(h);var D=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return D<=(w===void 0?1e-9:w)},toString:function(h){return"LatLng("+p(this.lat,h)+", "+p(this.lng,h)+")"},distanceTo:function(h){return ve.distance(this,fe(h))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(h){var w=180*h/40075017,D=w/Math.cos(Math.PI/180*this.lat);return re([this.lat-w,this.lng-D],[this.lat+w,this.lng+D])},clone:function(){return new ie(this.lat,this.lng,this.alt)}};function fe(h,w,D){return h instanceof ie?h:M(h)&&typeof h[0]!="object"?h.length===3?new ie(h[0],h[1],h[2]):h.length===2?new ie(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new ie(h.lat,"lng"in h?h.lng:h.lon,h.alt):w===void 0?null:new ie(h,w,D)}var Se={latLngToPoint:function(h,w){var D=this.projection.project(h),Z=this.scale(w);return this.transformation._transform(D,Z)},pointToLatLng:function(h,w){var D=this.scale(w),Z=this.transformation.untransform(h,D);return this.projection.unproject(Z)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var w=this.projection.bounds,D=this.scale(h),Z=this.transformation.transform(w.min,D),Ae=this.transformation.transform(w.max,D);return new ce(Z,Ae)},infinite:!1,wrapLatLng:function(h){var w=this.wrapLng?d(h.lng,this.wrapLng,!0):h.lng,D=this.wrapLat?d(h.lat,this.wrapLat,!0):h.lat,Z=h.alt;return new ie(D,w,Z)},wrapLatLngBounds:function(h){var w=h.getCenter(),D=this.wrapLatLng(w),Z=w.lat-D.lat,Ae=w.lng-D.lng;if(Z===0&&Ae===0)return h;var Ce=h.getSouthWest(),Qe=h.getNorthEast(),rt=new ie(Ce.lat-Z,Ce.lng-Ae),ht=new ie(Qe.lat-Z,Qe.lng-Ae);return new J(rt,ht)}},ve=s({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(h,w){var D=Math.PI/180,Z=h.lat*D,Ae=w.lat*D,Ce=Math.sin((w.lat-h.lat)*D/2),Qe=Math.sin((w.lng-h.lng)*D/2),rt=Ce*Ce+Math.cos(Z)*Math.cos(Ae)*Qe*Qe,ht=2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt));return this.R*ht}}),ye=6378137,we={R:ye,MAX_LATITUDE:85.0511287798,project:function(h){var w=Math.PI/180,D=this.MAX_LATITUDE,Z=Math.max(Math.min(D,h.lat),-D),Ae=Math.sin(Z*w);return new K(this.R*h.lng*w,this.R*Math.log((1+Ae)/(1-Ae))/2)},unproject:function(h){var w=180/Math.PI;return new ie((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*w,h.x*w/this.R)},bounds:function(){var h=ye*Math.PI;return new ce([-h,-h],[h,h])}()};function me(h,w,D,Z){if(M(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=w,this._c=D,this._d=Z}me.prototype={transform:function(h,w){return this._transform(h.clone(),w)},_transform:function(h,w){return w=w||1,h.x=w*(this._a*h.x+this._b),h.y=w*(this._c*h.y+this._d),h},untransform:function(h,w){return w=w||1,new K((h.x/w-this._b)/this._a,(h.y/w-this._d)/this._c)}};function he(h,w,D,Z){return new me(h,w,D,Z)}var Ve=s({},ve,{code:"EPSG:3857",projection:we,transformation:function(){var h=.5/(Math.PI*we.R);return he(h,.5,-h,.5)}()}),nt=s({},Ve,{code:"EPSG:900913"});function Oe(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function Ie(h,w){var D="",Z,Ae,Ce,Qe,rt,ht;for(Z=0,Ce=h.length;Z<Ce;Z++){for(rt=h[Z],Ae=0,Qe=rt.length;Ae<Qe;Ae++)ht=rt[Ae],D+=(Ae?"L":"M")+ht.x+" "+ht.y;D+=w?Yt.svg?"z":"x":""}return D||"M0 0"}var je=document.documentElement.style,Ke="ActiveXObject"in window,st=Ke&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),Tt=br("webkit"),xt=br("android"),Vt=br("android 2")||br("android 3"),Kt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),cn=xt&&br("Google")&&Kt<537&&!("AudioNode"in window),Gt=!!window.opera,Wt=!vt&&br("chrome"),sn=br("gecko")&&!Tt&&!Gt&&!Ke,Qt=!Wt&&br("safari"),Ht=br("phantom"),_t="OTransition"in je,On=navigator.platform.indexOf("Win")===0,An=Ke&&"transition"in je,Tr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vt,In="MozPerspective"in je,nr=!window.L_DISABLE_3D&&(An||Tr||In)&&!_t&&!Ht,Lr=typeof orientation<"u"||br("mobile"),Zn=Lr&&Tt,ya=Lr&&Tr,wr=!window.PointerEvent&&window.MSPointerEvent,us=!!(window.PointerEvent||wr),Is="ontouchstart"in window||!!window.TouchEvent,lr=!window.L_NO_TOUCH&&(Is||us),vn=Lr&&Gt,Ar=Lr&&sn,wa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,As=function(){var h=!1;try{var w=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",m,w),window.removeEventListener("testPassiveEventSupport",m,w)}catch{}return h}(),zs=function(){return!!document.createElement("canvas").getContext}(),oa=!!(document.createElementNS&&Oe("svg").createSVGRect),rn=!!oa&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rr=!oa&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var w=h.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),Nr=navigator.platform.indexOf("Mac")===0,Xr=navigator.platform.indexOf("Linux")===0;function br(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var Yt={ie:Ke,ielt9:st,edge:vt,webkit:Tt,android:xt,android23:Vt,androidStock:cn,opera:Gt,chrome:Wt,gecko:sn,safari:Qt,phantom:Ht,opera12:_t,win:On,ie3d:An,webkit3d:Tr,gecko3d:In,any3d:nr,mobile:Lr,mobileWebkit:Zn,mobileWebkit3d:ya,msPointer:wr,pointer:us,touch:lr,touchNative:Is,mobileOpera:vn,mobileGecko:Ar,retina:wa,passiveEvents:As,canvas:zs,svg:oa,vml:Rr,inlineSvg:rn,mac:Nr,linux:Xr},be=Yt.msPointer?"MSPointerDown":"pointerdown",Pe=Yt.msPointer?"MSPointerMove":"pointermove",Fe=Yt.msPointer?"MSPointerUp":"pointerup",De=Yt.msPointer?"MSPointerCancel":"pointercancel",Le={touchstart:be,touchmove:Pe,touchend:Fe,touchcancel:De},Me={touchstart:$t,touchmove:Ot,touchend:Ot,touchcancel:Ot},et={},dt=!1;function Je(h,w,D){return w==="touchstart"&&Jt(),Me[w]?(D=Me[w].bind(this,D),h.addEventListener(Le[w],D,!1),D):(console.warn("wrong event specified:",w),m)}function at(h,w,D){if(!Le[w]){console.warn("wrong event specified:",w);return}h.removeEventListener(Le[w],D,!1)}function ct(h){et[h.pointerId]=h}function Bt(h){et[h.pointerId]&&(et[h.pointerId]=h)}function jt(h){delete et[h.pointerId]}function Jt(){dt||(document.addEventListener(be,ct,!0),document.addEventListener(Pe,Bt,!0),document.addEventListener(Fe,jt,!0),document.addEventListener(De,jt,!0),dt=!0)}function Ot(h,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var D in et)w.touches.push(et[D]);w.changedTouches=[w],h(w)}}function $t(h,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&qr(w),Ot(h,w)}function Cn(h){var w={},D,Z;for(Z in h)D=h[Z],w[Z]=D&&D.bind?D.bind(h):D;return h=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var cr=200;function ur(h,w){h.addEventListener("dblclick",w);var D=0,Z;function Ae(Ce){if(Ce.detail!==1){Z=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var Qe=ro(Ce);if(!(Qe.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!Qe.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var rt=Date.now();rt-D<=cr?(Z++,Z===2&&w(Cn(Ce))):Z=1,D=rt}}}return h.addEventListener("click",Ae),{dblclick:w,simDblclick:Ae}}function dr(h,w){h.removeEventListener("dblclick",w.dblclick),h.removeEventListener("click",w.simDblclick)}var Rs=Zi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ba=Zi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gs=ba==="webkitTransition"||ba==="OTransition"?ba+"End":"transitionend";function la(h){return typeof h=="string"?document.getElementById(h):h}function Fs(h,w){var D=h.style[w]||h.currentStyle&&h.currentStyle[w];if((!D||D==="auto")&&document.defaultView){var Z=document.defaultView.getComputedStyle(h,null);D=Z?Z[w]:null}return D==="auto"?null:D}function Rn(h,w,D){var Z=document.createElement(h);return Z.className=w||"",D&&D.appendChild(Z),Z}function Pn(h){var w=h.parentNode;w&&w.removeChild(h)}function qs(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function Ji(h){var w=h.parentNode;w&&w.lastChild!==h&&w.appendChild(h)}function tl(h){var w=h.parentNode;w&&w.firstChild!==h&&w.insertBefore(h,w.firstChild)}function bo(h,w){if(h.classList!==void 0)return h.classList.contains(w);var D=_r(h);return D.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(D)}function Qn(h,w){if(h.classList!==void 0)for(var D=C(w),Z=0,Ae=D.length;Z<Ae;Z++)h.classList.add(D[Z]);else if(!bo(h,w)){var Ce=_r(h);bl(h,(Ce?Ce+" ":"")+w)}}function pr(h,w){h.classList!==void 0?h.classList.remove(w):bl(h,x((" "+_r(h)+" ").replace(" "+w+" "," ")))}function bl(h,w){h.className.baseVal===void 0?h.className=w:h.className.baseVal=w}function _r(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function rs(h,w){"opacity"in h.style?h.style.opacity=w:"filter"in h.style&&_l(h,w)}function _l(h,w){var D=!1,Z="DXImageTransform.Microsoft.Alpha";try{D=h.filters.item(Z)}catch{if(w===1)return}w=Math.round(w*100),D?(D.Enabled=w!==100,D.Opacity=w):h.style.filter+=" progid:"+Z+"(opacity="+w+")"}function Zi(h){for(var w=document.documentElement.style,D=0;D<h.length;D++)if(h[D]in w)return h[D];return!1}function _a(h,w,D){var Z=w||new K(0,0);h.style[Rs]=(Yt.ie3d?"translate("+Z.x+"px,"+Z.y+"px)":"translate3d("+Z.x+"px,"+Z.y+"px,0)")+(D?" scale("+D+")":"")}function Fn(h,w){h._leaflet_pos=w,Yt.any3d?_a(h,w):(h.style.left=w.x+"px",h.style.top=w.y+"px")}function ti(h){return h._leaflet_pos||new K(0,0)}var Ca,yi,Tc;if("onselectstart"in document)Ca=function(){bn(window,"selectstart",qr)},yi=function(){rr(window,"selectstart",qr)};else{var nl=Zi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ca=function(){if(nl){var h=document.documentElement.style;Tc=h[nl],h[nl]="none"}},yi=function(){nl&&(document.documentElement.style[nl]=Tc,Tc=void 0)}}function Jl(){bn(window,"dragstart",qr)}function eo(){rr(window,"dragstart",qr)}var rl,to;function Fi(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(Gr(),rl=h,to=h.style.outlineStyle,h.style.outlineStyle="none",bn(window,"keydown",Gr))}function Gr(){rl&&(rl.style.outlineStyle=to,rl=void 0,to=void 0,rr(window,"keydown",Gr))}function _o(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function Di(h){var w=h.getBoundingClientRect();return{x:w.width/h.offsetWidth||1,y:w.height/h.offsetHeight||1,boundingClientRect:w}}var Dn={__proto__:null,TRANSFORM:Rs,TRANSITION:ba,TRANSITION_END:Gs,get:la,getStyle:Fs,create:Rn,remove:Pn,empty:qs,toFront:Ji,toBack:tl,hasClass:bo,addClass:Qn,removeClass:pr,setClass:bl,getClass:_r,setOpacity:rs,testProp:Zi,setTransform:_a,setPosition:Fn,getPosition:ti,get disableTextSelection(){return Ca},get enableTextSelection(){return yi},disableImageDrag:Jl,enableImageDrag:eo,preventOutline:Fi,restoreOutline:Gr,getSizedParentNode:_o,getScale:Di};function bn(h,w,D,Z){if(w&&typeof w=="object")for(var Ae in w)Li(h,Ae,w[Ae],D);else{w=C(w);for(var Ce=0,Qe=w.length;Ce<Qe;Ce++)Li(h,w[Ce],D,Z)}return this}var wi="_leaflet_events";function rr(h,w,D,Z){if(arguments.length===1)bi(h),delete h[wi];else if(w&&typeof w=="object")for(var Ae in w)ni(h,Ae,w[Ae],D);else if(w=C(w),arguments.length===2)bi(h,function(rt){return O(w,rt)!==-1});else for(var Ce=0,Qe=w.length;Ce<Qe;Ce++)ni(h,w[Ce],D,Z);return this}function bi(h,w){for(var D in h[wi]){var Z=D.split(/\d/)[0];(!w||w(Z))&&ni(h,Z,null,null,D)}}var Ua={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Li(h,w,D,Z){var Ae=w+l(D)+(Z?"_"+l(Z):"");if(h[wi]&&h[wi][Ae])return this;var Ce=function(rt){return D.call(Z||h,rt||window.event)},Qe=Ce;!Yt.touchNative&&Yt.pointer&&w.indexOf("touch")===0?Ce=Je(h,w,Ce):Yt.touch&&w==="dblclick"?Ce=ur(h,Ce):"addEventListener"in h?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?h.addEventListener(Ua[w]||w,Ce,Yt.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(Ce=function(rt){rt=rt||window.event,Ri(h,rt)&&Qe(rt)},h.addEventListener(Ua[w],Ce,!1)):h.addEventListener(w,Qe,!1):h.attachEvent("on"+w,Ce),h[wi]=h[wi]||{},h[wi][Ae]=Ce}function ni(h,w,D,Z,Ae){Ae=Ae||w+l(D)+(Z?"_"+l(Z):"");var Ce=h[wi]&&h[wi][Ae];if(!Ce)return this;!Yt.touchNative&&Yt.pointer&&w.indexOf("touch")===0?at(h,w,Ce):Yt.touch&&w==="dblclick"?dr(h,Ce):"removeEventListener"in h?h.removeEventListener(Ua[w]||w,Ce,!1):h.detachEvent("on"+w,Ce),h[wi][Ae]=null}function ri(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function no(h){return Li(h,"wheel",ri),this}function sl(h){return bn(h,"mousedown touchstart dblclick contextmenu",ri),h._leaflet_disable_click=!0,this}function qr(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function Ps(h){return qr(h),ri(h),this}function ro(h){if(h.composedPath)return h.composedPath();for(var w=[],D=h.target;D;)w.push(D),D=D.parentNode;return w}function Ks(h,w){if(!w)return new K(h.clientX,h.clientY);var D=Di(w),Z=D.boundingClientRect;return new K((h.clientX-Z.left)/D.x-w.clientLeft,(h.clientY-Z.top)/D.y-w.clientTop)}var Cr=Yt.linux&&Yt.chrome?window.devicePixelRatio:Yt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function al(h){return Yt.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/Cr:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function Ri(h,w){var D=w.relatedTarget;if(!D)return!0;try{for(;D&&D!==h;)D=D.parentNode}catch{return!1}return D!==h}var lu={__proto__:null,on:bn,off:rr,stopPropagation:ri,disableScrollPropagation:no,disableClickPropagation:sl,preventDefault:qr,stop:Ps,getPropagationPath:ro,getMousePosition:Ks,getWheelDelta:al,isExternalTarget:Ri,addListener:bn,removeListener:rr},Cl=oe.extend({run:function(h,w,D,Z){this.stop(),this._el=h,this._inProgress=!0,this._duration=D||.25,this._easeOutPower=1/Math.max(Z||.5,.2),this._startPos=ti(h),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(h){var w=+new Date-this._startTime,D=this._duration*1e3;w<D?this._runFrame(this._easeOut(w/D),h):(this._runFrame(1),this._complete())},_runFrame:function(h,w){var D=this._startPos.add(this._offset.multiplyBy(h));w&&D._round(),Fn(this._el,D),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),er=oe.extend({options:{crs:Ve,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,w){w=y(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(fe(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ba&&Yt.any3d&&!Yt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bn(this._proxy,Gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,w,D){if(w=w===void 0?this._zoom:this._limitZoom(w),h=this._limitCenter(fe(h),w,this.options.maxBounds),D=D||{},this._stop(),this._loaded&&!D.reset&&D!==!0){D.animate!==void 0&&(D.zoom=s({animate:D.animate},D.zoom),D.pan=s({animate:D.animate,duration:D.duration},D.pan));var Z=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,w,D.zoom):this._tryAnimatedPan(h,D.pan);if(Z)return clearTimeout(this._sizeTimer),this}return this._resetView(h,w,D.pan&&D.pan.noMoveStart),this},setZoom:function(h,w){return this._loaded?this.setView(this.getCenter(),h,{zoom:w}):(this._zoom=h,this)},zoomIn:function(h,w){return h=h||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,w)},zoomOut:function(h,w){return h=h||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,w)},setZoomAround:function(h,w,D){var Z=this.getZoomScale(w),Ae=this.getSize().divideBy(2),Ce=h instanceof K?h:this.latLngToContainerPoint(h),Qe=Ce.subtract(Ae).multiplyBy(1-1/Z),rt=this.containerPointToLatLng(Ae.add(Qe));return this.setView(rt,w,{zoom:D})},_getBoundsCenterZoom:function(h,w){w=w||{},h=h.getBounds?h.getBounds():re(h);var D=X(w.paddingTopLeft||w.padding||[0,0]),Z=X(w.paddingBottomRight||w.padding||[0,0]),Ae=this.getBoundsZoom(h,!1,D.add(Z));if(Ae=typeof w.maxZoom=="number"?Math.min(w.maxZoom,Ae):Ae,Ae===1/0)return{center:h.getCenter(),zoom:Ae};var Ce=Z.subtract(D).divideBy(2),Qe=this.project(h.getSouthWest(),Ae),rt=this.project(h.getNorthEast(),Ae),ht=this.unproject(Qe.add(rt).divideBy(2).add(Ce),Ae);return{center:ht,zoom:Ae}},fitBounds:function(h,w){if(h=re(h),!h.isValid())throw new Error("Bounds are not valid.");var D=this._getBoundsCenterZoom(h,w);return this.setView(D.center,D.zoom,w)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,w){return this.setView(h,this._zoom,{pan:w})},panBy:function(h,w){if(h=X(h).round(),w=w||{},!h.x&&!h.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Cl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){Qn(this._mapPane,"leaflet-pan-anim");var D=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,D,w.duration||.25,w.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,w,D){if(D=D||{},D.animate===!1||!Yt.any3d)return this.setView(h,w,D);this._stop();var Z=this.project(this.getCenter()),Ae=this.project(h),Ce=this.getSize(),Qe=this._zoom;h=fe(h),w=w===void 0?Qe:w;var rt=Math.max(Ce.x,Ce.y),ht=rt*this.getZoomScale(Qe,w),Ft=Ae.distanceTo(Z)||1,an=1.42,dn=an*an;function xn(es){var Ws=es?-1:1,oc=es?ht:rt,Mc=ht*ht-rt*rt+Ws*dn*dn*Ft*Ft,Ul=2*oc*dn*Ft,Gu=Mc/Ul,kA=Math.sqrt(Gu*Gu+1)-Gu,qu=kA<1e-9?-18:Math.log(kA);return qu}function zn(es){return(Math.exp(es)-Math.exp(-es))/2}function gs(es){return(Math.exp(es)+Math.exp(-es))/2}function $s(es){return zn(es)/gs(es)}var li=xn(0);function Bo(es){return rt*(gs(li)/gs(li+an*es))}function u0(es){return rt*(gs(li)*$s(li+an*es)-zn(li))/dn}function ic(es){return 1-Math.pow(1-es,1.5)}var Si=Date.now(),ji=(xn(1)-li)/an,A0=D.duration?1e3*D.duration:1e3*ji*.8;function hu(){var es=(Date.now()-Si)/A0,Ws=ic(es)*ji;es<=1?(this._flyToFrame=P(hu,this),this._move(this.unproject(Z.add(Ae.subtract(Z).multiplyBy(u0(Ws)/Ft)),Qe),this.getScaleZoom(rt/Bo(Ws),Qe),{flyTo:!0})):this._move(h,w)._moveEnd(!0)}return this._moveStart(!0,D.noMoveStart),hu.call(this),this},flyToBounds:function(h,w){var D=this._getBoundsCenterZoom(h,w);return this.flyTo(D.center,D.zoom,w)},setMaxBounds:function(h){return h=re(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var w=this.options.minZoom;return this.options.minZoom=h,this._loaded&&w!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var w=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&w!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,w){this._enforcingBounds=!0;var D=this.getCenter(),Z=this._limitCenter(D,this._zoom,re(h));return D.equals(Z)||this.panTo(Z,w),this._enforcingBounds=!1,this},panInside:function(h,w){w=w||{};var D=X(w.paddingTopLeft||w.padding||[0,0]),Z=X(w.paddingBottomRight||w.padding||[0,0]),Ae=this.project(this.getCenter()),Ce=this.project(h),Qe=this.getPixelBounds(),rt=V([Qe.min.add(D),Qe.max.subtract(Z)]),ht=rt.getSize();if(!rt.contains(Ce)){this._enforcingBounds=!0;var Ft=Ce.subtract(rt.getCenter()),an=rt.extend(Ce).getSize().subtract(ht);Ae.x+=Ft.x<0?-an.x:an.x,Ae.y+=Ft.y<0?-an.y:an.y,this.panTo(this.unproject(Ae),w),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=s({animate:!1,pan:!0},h===!0?{animate:!0}:h);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var D=this.getSize(),Z=w.divideBy(2).round(),Ae=D.divideBy(2).round(),Ce=Z.subtract(Ae);return!Ce.x&&!Ce.y?this:(h.animate&&h.pan?this.panBy(Ce):(h.pan&&this._rawPanBy(Ce),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:D}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=s({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=i(this._handleGeolocationResponse,this),D=i(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,D,h):navigator.geolocation.getCurrentPosition(w,D,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var w=h.code,D=h.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+D+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var w=h.coords.latitude,D=h.coords.longitude,Z=new ie(w,D),Ae=Z.toBounds(h.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var Qe=this.getBoundsZoom(Ae);this.setView(Z,Ce.maxZoom?Math.min(Qe,Ce.maxZoom):Qe)}var rt={latlng:Z,bounds:Ae,timestamp:h.timestamp};for(var ht in h.coords)typeof h.coords[ht]=="number"&&(rt[ht]=h.coords[ht]);this.fire("locationfound",rt)}},addHandler:function(h,w){if(!w)return this;var D=this[h]=new w(this);return this._handlers.push(D),this.options[h]&&D.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)Pn(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,w){var D="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),Z=Rn("div",D,w||this._mapPane);return h&&(this._panes[h]=Z),Z},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),w=this.unproject(h.getBottomLeft()),D=this.unproject(h.getTopRight());return new J(w,D)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,w,D){h=re(h),D=X(D||[0,0]);var Z=this.getZoom()||0,Ae=this.getMinZoom(),Ce=this.getMaxZoom(),Qe=h.getNorthWest(),rt=h.getSouthEast(),ht=this.getSize().subtract(D),Ft=V(this.project(rt,Z),this.project(Qe,Z)).getSize(),an=Yt.any3d?this.options.zoomSnap:1,dn=ht.x/Ft.x,xn=ht.y/Ft.y,zn=w?Math.max(dn,xn):Math.min(dn,xn);return Z=this.getScaleZoom(zn,Z),an&&(Z=Math.round(Z/(an/100))*(an/100),Z=w?Math.ceil(Z/an)*an:Math.floor(Z/an)*an),Math.max(Ae,Math.min(Ce,Z))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,w){var D=this._getTopLeftPoint(h,w);return new ce(D,D.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,w){var D=this.options.crs;return w=w===void 0?this._zoom:w,D.scale(h)/D.scale(w)},getScaleZoom:function(h,w){var D=this.options.crs;w=w===void 0?this._zoom:w;var Z=D.zoom(h*D.scale(w));return isNaN(Z)?1/0:Z},project:function(h,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(fe(h),w)},unproject:function(h,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(X(h),w)},layerPointToLatLng:function(h){var w=X(h).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(h){var w=this.project(fe(h))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(fe(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(re(h))},distance:function(h,w){return this.options.crs.distance(fe(h),fe(w))},containerPointToLayerPoint:function(h){return X(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return X(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var w=this.containerPointToLayerPoint(X(h));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(h)))},mouseEventToContainerPoint:function(h){return Ks(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var w=this._container=la(h);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bn(w,"scroll",this._onScroll,this),this._containerId=l(w)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&Yt.any3d,Qn(h,"leaflet-container"+(Yt.touch?" leaflet-touch":"")+(Yt.retina?" leaflet-retina":"")+(Yt.ielt9?" leaflet-oldie":"")+(Yt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Fs(h,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fn(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qn(h.markerPane,"leaflet-zoom-hide"),Qn(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,w,D){Fn(this._mapPane,new K(0,0));var Z=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var Ae=this._zoom!==w;this._moveStart(Ae,D)._move(h,w)._moveEnd(Ae),this.fire("viewreset"),Z&&this.fire("load")},_moveStart:function(h,w){return h&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(h,w,D,Z){w===void 0&&(w=this._zoom);var Ae=this._zoom!==w;return this._zoom=w,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),Z?D&&D.pinch&&this.fire("zoom",D):((Ae||D&&D.pinch)&&this.fire("zoom",D),this.fire("move",D)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){Fn(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[l(this._container)]=this;var w=h?rr:bn;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),Yt.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=P(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,w){for(var D=[],Z,Ae=w==="mouseout"||w==="mouseover",Ce=h.target||h.srcElement,Qe=!1;Ce;){if(Z=this._targets[l(Ce)],Z&&(w==="click"||w==="preclick")&&this._draggableMoved(Z)){Qe=!0;break}if(Z&&Z.listens(w,!0)&&(Ae&&!Ri(Ce,h)||(D.push(Z),Ae))||Ce===this._container)break;Ce=Ce.parentNode}return!D.length&&!Qe&&!Ae&&this.listens(w,!0)&&(D=[this]),D},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var w=h.target||h.srcElement;if(!(!this._loaded||w._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(w))){var D=h.type;D==="mousedown"&&Fi(w),this._fireDOMEvent(h,D)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,w,D){if(h.type==="click"){var Z=s({},h);Z.type="preclick",this._fireDOMEvent(Z,Z.type,D)}var Ae=this._findEventTargets(h,w);if(D){for(var Ce=[],Qe=0;Qe<D.length;Qe++)D[Qe].listens(w,!0)&&Ce.push(D[Qe]);Ae=Ce.concat(Ae)}if(Ae.length){w==="contextmenu"&&qr(h);var rt=Ae[0],ht={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var Ft=rt.getLatLng&&(!rt._radius||rt._radius<=10);ht.containerPoint=Ft?this.latLngToContainerPoint(rt.getLatLng()):this.mouseEventToContainerPoint(h),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Ft?rt.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(Qe=0;Qe<Ae.length;Qe++)if(Ae[Qe].fire(w,ht,!0),ht.originalEvent._stopped||Ae[Qe].options.bubblingMouseEvents===!1&&O(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,w=this._handlers.length;h<w;h++)this._handlers[h].disable()},whenReady:function(h,w){return this._loaded?h.call(w||this,{target:this}):this.on("load",h,w),this},_getMapPanePos:function(){return ti(this._mapPane)||new K(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,w){var D=h&&w!==void 0?this._getNewPixelOrigin(h,w):this.getPixelOrigin();return D.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,w){var D=this.getSize()._divideBy(2);return this.project(h,w)._subtract(D)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,w,D){var Z=this._getNewPixelOrigin(D,w);return this.project(h,w)._subtract(Z)},_latLngBoundsToNewLayerBounds:function(h,w,D){var Z=this._getNewPixelOrigin(D,w);return V([this.project(h.getSouthWest(),w)._subtract(Z),this.project(h.getNorthWest(),w)._subtract(Z),this.project(h.getSouthEast(),w)._subtract(Z),this.project(h.getNorthEast(),w)._subtract(Z)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,w,D){if(!D)return h;var Z=this.project(h,w),Ae=this.getSize().divideBy(2),Ce=new ce(Z.subtract(Ae),Z.add(Ae)),Qe=this._getBoundsOffset(Ce,D,w);return Math.abs(Qe.x)<=1&&Math.abs(Qe.y)<=1?h:this.unproject(Z.add(Qe),w)},_limitOffset:function(h,w){if(!w)return h;var D=this.getPixelBounds(),Z=new ce(D.min.add(h),D.max.add(h));return h.add(this._getBoundsOffset(Z,w))},_getBoundsOffset:function(h,w,D){var Z=V(this.project(w.getNorthEast(),D),this.project(w.getSouthWest(),D)),Ae=Z.min.subtract(h.min),Ce=Z.max.subtract(h.max),Qe=this._rebound(Ae.x,-Ce.x),rt=this._rebound(Ae.y,-Ce.y);return new K(Qe,rt)},_rebound:function(h,w){return h+w>0?Math.round(h-w)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(w))},_limitZoom:function(h){var w=this.getMinZoom(),D=this.getMaxZoom(),Z=Yt.any3d?this.options.zoomSnap:1;return Z&&(h=Math.round(h/Z)*Z),Math.max(w,Math.min(D,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,w){var D=this._getCenterOffset(h)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(D)?!1:(this.panBy(D,w),!0)},_createAnimProxy:function(){var h=this._proxy=Rn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(w){var D=Rs,Z=this._proxy.style[D];_a(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),Z===this._proxy.style[D]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),w=this.getZoom();_a(this._proxy,this.project(h,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,w,D){if(this._animatingZoom)return!0;if(D=D||{},!this._zoomAnimated||D.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var Z=this.getZoomScale(w),Ae=this._getCenterOffset(h)._divideBy(1-1/Z);return D.animate!==!0&&!this.getSize().contains(Ae)?!1:(P(function(){this._moveStart(!0,D.noMoveStart||!1)._animateZoom(h,w,!0)},this),!0)},_animateZoom:function(h,w,D,Z){this._mapPane&&(D&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=w,Qn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:w,noUpdate:Z}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function so(h,w){return new er(h,w)}var ds=q.extend({options:{position:"topright"},initialize:function(h){y(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var w=this._map;return w&&w.removeControl(this),this.options.position=h,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var w=this._container=this.onAdd(h),D=this.getPosition(),Z=h._controlCorners[D];return Qn(w,"leaflet-control"),D.indexOf("bottom")!==-1?Z.insertBefore(w,Z.firstChild):Z.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Ss=function(h){return new ds(h)};er.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},w="leaflet-",D=this._controlContainer=Rn("div",w+"control-container",this._container);function Z(Ae,Ce){var Qe=w+Ae+" "+w+Ce;h[Ae+Ce]=Rn("div",Qe,D)}Z("top","left"),Z("top","right"),Z("bottom","left"),Z("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)Pn(this._controlCorners[h]);Pn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cu=ds.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,w,D,Z){return D<Z?-1:Z<D?1:0}},initialize:function(h,w,D){y(this,D),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var Z in h)this._addLayer(h[Z],Z);for(Z in w)this._addLayer(w[Z],Z,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return ds.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,w){return this._addLayer(h,w),this._map?this._update():this},addOverlay:function(h,w){return this._addLayer(h,w,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var w=this._getLayer(l(h));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){Qn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(Qn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):pr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",w=this._container=Rn("div",h),D=this.options.collapsed;w.setAttribute("aria-haspopup",!0),sl(w),no(w);var Z=this._section=Rn("section",h+"-list");D&&(this._map.on("click",this.collapse,this),bn(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ae=this._layersLink=Rn("a",h+"-toggle",w);Ae.href="#",Ae.title="Layers",Ae.setAttribute("role","button"),bn(Ae,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){qr(Ce),this._expandSafely()}},this),D||this.expand(),this._baseLayersList=Rn("div",h+"-base",Z),this._separator=Rn("div",h+"-separator",Z),this._overlaysList=Rn("div",h+"-overlays",Z),w.appendChild(Z)},_getLayer:function(h){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&l(this._layers[w].layer)===h)return this._layers[w]},_addLayer:function(h,w,D){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:w,overlay:D}),this.options.sortLayers&&this._layers.sort(i(function(Z,Ae){return this.options.sortFunction(Z.layer,Ae.layer,Z.name,Ae.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qs(this._baseLayersList),qs(this._overlaysList),this._layerControlInputs=[];var h,w,D,Z,Ae=0;for(D=0;D<this._layers.length;D++)Z=this._layers[D],this._addItem(Z),w=w||Z.overlay,h=h||!Z.overlay,Ae+=Z.overlay?0:1;return this.options.hideSingleBase&&(h=h&&Ae>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=w&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var w=this._getLayer(l(h.target)),D=w.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;D&&this._map.fire(D,w)},_createRadioElement:function(h,w){var D='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(w?' checked="checked"':"")+"/>",Z=document.createElement("div");return Z.innerHTML=D,Z.firstChild},_addItem:function(h){var w=document.createElement("label"),D=this._map.hasLayer(h.layer),Z;h.overlay?(Z=document.createElement("input"),Z.type="checkbox",Z.className="leaflet-control-layers-selector",Z.defaultChecked=D):Z=this._createRadioElement("leaflet-base-layers_"+l(this),D),this._layerControlInputs.push(Z),Z.layerId=l(h.layer),bn(Z,"click",this._onInputClick,this);var Ae=document.createElement("span");Ae.innerHTML=" "+h.name;var Ce=document.createElement("span");w.appendChild(Ce),Ce.appendChild(Z),Ce.appendChild(Ae);var Qe=h.overlay?this._overlaysList:this._baseLayersList;return Qe.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,w,D,Z=[],Ae=[];this._handlingClick=!0;for(var Ce=h.length-1;Ce>=0;Ce--)w=h[Ce],D=this._getLayer(w.layerId).layer,w.checked?Z.push(D):w.checked||Ae.push(D);for(Ce=0;Ce<Ae.length;Ce++)this._map.hasLayer(Ae[Ce])&&this._map.removeLayer(Ae[Ce]);for(Ce=0;Ce<Z.length;Ce++)this._map.hasLayer(Z[Ce])||this._map.addLayer(Z[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,w,D,Z=this._map.getZoom(),Ae=h.length-1;Ae>=0;Ae--)w=h[Ae],D=this._getLayer(w.layerId).layer,w.disabled=D.options.minZoom!==void 0&&Z<D.options.minZoom||D.options.maxZoom!==void 0&&Z>D.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,bn(h,"click",qr),this.expand();var w=this;setTimeout(function(){rr(h,"click",qr),w._preventClick=!1})}}),El=function(h,w,D){return new cu(h,w,D)},ca=ds.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var w="leaflet-control-zoom",D=Rn("div",w+" leaflet-bar"),Z=this.options;return this._zoomInButton=this._createButton(Z.zoomInText,Z.zoomInTitle,w+"-in",D,this._zoomIn),this._zoomOutButton=this._createButton(Z.zoomOutText,Z.zoomOutTitle,w+"-out",D,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),D},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,w,D,Z,Ae){var Ce=Rn("a",D,Z);return Ce.innerHTML=h,Ce.href="#",Ce.title=w,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",w),sl(Ce),bn(Ce,"click",Ps),bn(Ce,"click",Ae,this),bn(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var h=this._map,w="leaflet-disabled";pr(this._zoomInButton,w),pr(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(Qn(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(Qn(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});er.mergeOptions({zoomControl:!0}),er.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ca,this.addControl(this.zoomControl))});var Sl=function(h){return new ca(h)},Co=ds.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var w="leaflet-control-scale",D=Rn("div",w),Z=this.options;return this._addScales(Z,w+"-line",D),h.on(Z.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),D},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,w,D){h.metric&&(this._mScale=Rn("div",w,D)),h.imperial&&(this._iScale=Rn("div",w,D))},_update:function(){var h=this._map,w=h.getSize().y/2,D=h.distance(h.containerPointToLatLng([0,w]),h.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(D)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var w=this._getRoundNum(h),D=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,D,w/h)},_updateImperial:function(h){var w=h*3.2808399,D,Z,Ae;w>5280?(D=w/5280,Z=this._getRoundNum(D),this._updateScale(this._iScale,Z+" mi",Z/D)):(Ae=this._getRoundNum(w),this._updateScale(this._iScale,Ae+" ft",Ae/w))},_updateScale:function(h,w,D){h.style.width=Math.round(this.options.maxWidth*D)+"px",h.innerHTML=w},_getRoundNum:function(h){var w=Math.pow(10,(Math.floor(h)+"").length-1),D=h/w;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:1,w*D}}),Nc=function(h){return new Co(h)},Zl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Tl=ds.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Yt.inlineSvg?Zl+" ":"")+"Leaflet</a>"},initialize:function(h){y(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=Rn("div","leaflet-control-attribution"),sl(this._container);for(var w in h._layers)h._layers[w].getAttribution&&this.addAttribution(h._layers[w].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var w in this._attributions)this._attributions[w]&&h.push(w);var D=[];this.options.prefix&&D.push(this.options.prefix),h.length&&D.push(h.join(", ")),this._container.innerHTML=D.join(' <span aria-hidden="true">|</span> ')}}});er.mergeOptions({attributionControl:!0}),er.addInitHook(function(){this.options.attributionControl&&new Tl().addTo(this)});var uu=function(h){return new Tl(h)};ds.Layers=cu,ds.Zoom=ca,ds.Scale=Co,ds.Attribution=Tl,Ss.layers=El,Ss.zoom=Sl,Ss.scale=Nc,Ss.attribution=uu;var Ea=q.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ea.addTo=function(h,w){return h.addHandler(w,this),this};var Nl={Events:ee},Bl=Yt.touch?"touchstart mousedown":"mousedown",_i=oe.extend({options:{clickTolerance:3},initialize:function(h,w,D,Z){y(this,Z),this._element=h,this._dragStartTarget=w||h,this._preventOutline=D},enable:function(){this._enabled||(bn(this._dragStartTarget,Bl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_i._dragging===this&&this.finishDrag(!0),rr(this._dragStartTarget,Bl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!bo(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){_i._dragging===this&&this.finishDrag();return}if(!(_i._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(_i._dragging=this,this._preventOutline&&Fi(this._element),Jl(),Ca(),!this._moving)){this.fire("down");var w=h.touches?h.touches[0]:h,D=_o(this._element);this._startPoint=new K(w.clientX,w.clientY),this._startPos=ti(this._element),this._parentScale=Di(D);var Z=h.type==="mousedown";bn(document,Z?"mousemove":"touchmove",this._onMove,this),bn(document,Z?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var w=h.touches&&h.touches.length===1?h.touches[0]:h,D=new K(w.clientX,w.clientY)._subtract(this._startPoint);!D.x&&!D.y||Math.abs(D.x)+Math.abs(D.y)<this.options.clickTolerance||(D.x/=this._parentScale.x,D.y/=this._parentScale.y,qr(h),this._moved||(this.fire("dragstart"),this._moved=!0,Qn(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(D),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),Fn(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){pr(document.body,"leaflet-dragging"),this._lastTarget&&(pr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rr(document,"mousemove touchmove",this._onMove,this),rr(document,"mouseup touchend touchcancel",this._onUp,this),eo(),yi();var w=this._moved&&this._moving;this._moving=!1,_i._dragging=!1,w&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function kl(h,w,D){var Z,Ae=[1,4,2,8],Ce,Qe,rt,ht,Ft,an,dn,xn;for(Ce=0,an=h.length;Ce<an;Ce++)h[Ce]._code=gt(h[Ce],w);for(rt=0;rt<4;rt++){for(dn=Ae[rt],Z=[],Ce=0,an=h.length,Qe=an-1;Ce<an;Qe=Ce++)ht=h[Ce],Ft=h[Qe],ht._code&dn?Ft._code&dn||(xn=Xe(Ft,ht,dn,w,D),xn._code=gt(xn,w),Z.push(xn)):(Ft._code&dn&&(xn=Xe(Ft,ht,dn,w,D),xn._code=gt(xn,w),Z.push(xn)),Z.push(ht));h=Z}return h}function il(h,w){var D,Z,Ae,Ce,Qe,rt,ht,Ft,an;if(!h||h.length===0)throw new Error("latlngs not passed");B(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var dn=fe([0,0]),xn=re(h),zn=xn.getNorthWest().distanceTo(xn.getSouthWest())*xn.getNorthEast().distanceTo(xn.getNorthWest());zn<1700&&(dn=Bc(h));var gs=h.length,$s=[];for(D=0;D<gs;D++){var li=fe(h[D]);$s.push(w.project(fe([li.lat-dn.lat,li.lng-dn.lng])))}for(rt=ht=Ft=0,D=0,Z=gs-1;D<gs;Z=D++)Ae=$s[D],Ce=$s[Z],Qe=Ae.y*Ce.x-Ce.y*Ae.x,ht+=(Ae.x+Ce.x)*Qe,Ft+=(Ae.y+Ce.y)*Qe,rt+=Qe*3;rt===0?an=$s[0]:an=[ht/rt,Ft/rt];var Bo=w.unproject(X(an));return fe([Bo.lat+dn.lat,Bo.lng+dn.lng])}function Bc(h){for(var w=0,D=0,Z=0,Ae=0;Ae<h.length;Ae++){var Ce=fe(h[Ae]);w+=Ce.lat,D+=Ce.lng,Z++}return fe([w/Z,D/Z])}var ol={__proto__:null,clipPolygon:kl,polygonCenter:il,centroid:Bc};function ll(h,w){if(!w||!h.length)return h.slice();var D=w*w;return h=ge(h,D),h=kc(h,D),h}function Il(h,w,D){return Math.sqrt(qt(h,w,D,!0))}function si(h,w,D){return qt(h,w,D)}function kc(h,w){var D=h.length,Z=typeof Uint8Array<"u"?Uint8Array:Array,Ae=new Z(D);Ae[0]=Ae[D-1]=1,Y(h,Ae,w,0,D-1);var Ce,Qe=[];for(Ce=0;Ce<D;Ce++)Ae[Ce]&&Qe.push(h[Ce]);return Qe}function Y(h,w,D,Z,Ae){var Ce=0,Qe,rt,ht;for(rt=Z+1;rt<=Ae-1;rt++)ht=qt(h[rt],h[Z],h[Ae],!0),ht>Ce&&(Qe=rt,Ce=ht);Ce>D&&(w[Qe]=1,Y(h,w,D,Z,Qe),Y(h,w,D,Qe,Ae))}function ge(h,w){for(var D=[h[0]],Z=1,Ae=0,Ce=h.length;Z<Ce;Z++)Rt(h[Z],h[Ae])>w&&(D.push(h[Z]),Ae=Z);return Ae<Ce-1&&D.push(h[Ce-1]),D}var Ue;function ze(h,w,D,Z,Ae){var Ce=Z?Ue:gt(h,D),Qe=gt(w,D),rt,ht,Ft;for(Ue=Qe;;){if(!(Ce|Qe))return[h,w];if(Ce&Qe)return!1;rt=Ce||Qe,ht=Xe(h,w,rt,D,Ae),Ft=gt(ht,D),rt===Ce?(h=ht,Ce=Ft):(w=ht,Qe=Ft)}}function Xe(h,w,D,Z,Ae){var Ce=w.x-h.x,Qe=w.y-h.y,rt=Z.min,ht=Z.max,Ft,an;return D&8?(Ft=h.x+Ce*(ht.y-h.y)/Qe,an=ht.y):D&4?(Ft=h.x+Ce*(rt.y-h.y)/Qe,an=rt.y):D&2?(Ft=ht.x,an=h.y+Qe*(ht.x-h.x)/Ce):D&1&&(Ft=rt.x,an=h.y+Qe*(rt.x-h.x)/Ce),new K(Ft,an,Ae)}function gt(h,w){var D=0;return h.x<w.min.x?D|=1:h.x>w.max.x&&(D|=2),h.y<w.min.y?D|=4:h.y>w.max.y&&(D|=8),D}function Rt(h,w){var D=w.x-h.x,Z=w.y-h.y;return D*D+Z*Z}function qt(h,w,D,Z){var Ae=w.x,Ce=w.y,Qe=D.x-Ae,rt=D.y-Ce,ht=Qe*Qe+rt*rt,Ft;return ht>0&&(Ft=((h.x-Ae)*Qe+(h.y-Ce)*rt)/ht,Ft>1?(Ae=D.x,Ce=D.y):Ft>0&&(Ae+=Qe*Ft,Ce+=rt*Ft)),Qe=h.x-Ae,rt=h.y-Ce,Z?Qe*Qe+rt*rt:new K(Ae,Ce)}function B(h){return!M(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"}function ae(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),B(h)}function de(h,w){var D,Z,Ae,Ce,Qe,rt,ht,Ft;if(!h||h.length===0)throw new Error("latlngs not passed");B(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var an=fe([0,0]),dn=re(h),xn=dn.getNorthWest().distanceTo(dn.getSouthWest())*dn.getNorthEast().distanceTo(dn.getNorthWest());xn<1700&&(an=Bc(h));var zn=h.length,gs=[];for(D=0;D<zn;D++){var $s=fe(h[D]);gs.push(w.project(fe([$s.lat-an.lat,$s.lng-an.lng])))}for(D=0,Z=0;D<zn-1;D++)Z+=gs[D].distanceTo(gs[D+1])/2;if(Z===0)Ft=gs[0];else for(D=0,Ce=0;D<zn-1;D++)if(Qe=gs[D],rt=gs[D+1],Ae=Qe.distanceTo(rt),Ce+=Ae,Ce>Z){ht=(Ce-Z)/Ae,Ft=[rt.x-ht*(rt.x-Qe.x),rt.y-ht*(rt.y-Qe.y)];break}var li=w.unproject(X(Ft));return fe([li.lat+an.lat,li.lng+an.lng])}var Te={__proto__:null,simplify:ll,pointToSegmentDistance:Il,closestPointOnSegment:si,clipSegment:ze,_getEdgeIntersection:Xe,_getBitCode:gt,_sqClosestPointOnSegment:qt,isFlat:B,_flat:ae,polylineCenter:de},We={project:function(h){return new K(h.lng,h.lat)},unproject:function(h){return new ie(h.y,h.x)},bounds:new ce([-180,-90],[180,90])},ot={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var w=Math.PI/180,D=this.R,Z=h.lat*w,Ae=this.R_MINOR/D,Ce=Math.sqrt(1-Ae*Ae),Qe=Ce*Math.sin(Z),rt=Math.tan(Math.PI/4-Z/2)/Math.pow((1-Qe)/(1+Qe),Ce/2);return Z=-D*Math.log(Math.max(rt,1e-10)),new K(h.lng*w*D,Z)},unproject:function(h){for(var w=180/Math.PI,D=this.R,Z=this.R_MINOR/D,Ae=Math.sqrt(1-Z*Z),Ce=Math.exp(-h.y/D),Qe=Math.PI/2-2*Math.atan(Ce),rt=0,ht=.1,Ft;rt<15&&Math.abs(ht)>1e-7;rt++)Ft=Ae*Math.sin(Qe),Ft=Math.pow((1-Ft)/(1+Ft),Ae/2),ht=Math.PI/2-2*Math.atan(Ce*Ft)-Qe,Qe+=ht;return new ie(Qe*w,h.x*w/D)}},Pt={__proto__:null,LonLat:We,Mercator:ot,SphericalMercator:we},Ln=s({},ve,{code:"EPSG:3395",projection:ot,transformation:function(){var h=.5/(Math.PI*ot.R);return he(h,.5,-h,.5)}()}),gr=s({},ve,{code:"EPSG:4326",projection:We,transformation:he(1/180,1,-1/180,.5)}),Yn=s({},Se,{projection:We,transformation:he(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,w){var D=w.lng-h.lng,Z=w.lat-h.lat;return Math.sqrt(D*D+Z*Z)},infinite:!0});Se.Earth=ve,Se.EPSG3395=Ln,Se.EPSG3857=Ve,Se.EPSG900913=nt,Se.EPSG4326=gr,Se.Simple=Yn;var ar=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[l(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[l(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var w=h.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var D=this.getEvents();w.on(D,this),this.once("remove",function(){w.off(D,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});er.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var w=l(h);return this._layers[w]?this:(this._layers[w]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var w=l(h);return this._layers[w]?(this._loaded&&h.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return l(h)in this._layers},eachLayer:function(h,w){for(var D in this._layers)h.call(w,this._layers[D]);return this},_addLayers:function(h){h=h?M(h)?h:[h]:[];for(var w=0,D=h.length;w<D;w++)this.addLayer(h[w])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[l(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var w=l(h);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,w=-1/0,D=this._getZoomSpan();for(var Z in this._zoomBoundLayers){var Ae=this._zoomBoundLayers[Z].options;h=Ae.minZoom===void 0?h:Math.min(h,Ae.minZoom),w=Ae.maxZoom===void 0?w:Math.max(w,Ae.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=h===1/0?void 0:h,D!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pr=ar.extend({initialize:function(h,w){y(this,w),this._layers={};var D,Z;if(h)for(D=0,Z=h.length;D<Z;D++)this.addLayer(h[D])},addLayer:function(h){var w=this.getLayerId(h);return this._layers[w]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var w=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(h){var w=typeof h=="number"?h:this.getLayerId(h);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var w=Array.prototype.slice.call(arguments,1),D,Z;for(D in this._layers)Z=this._layers[D],Z[h]&&Z[h].apply(Z,w);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,w){for(var D in this._layers)h.call(w,this._layers[D]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return l(h)}}),Eo=function(h,w){return new Pr(h,w)},Jr=Pr.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),Pr.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),Pr.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new J;for(var w in this._layers){var D=this._layers[w];h.extend(D.getBounds?D.getBounds():D.getLatLng())}return h}}),Pi=function(h,w){return new Jr(h,w)},Ci=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){y(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,w){var D=this._getIconUrl(h);if(!D){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Z=this._createImg(D,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(Z,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Z.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),Z},_setIconStyles:function(h,w){var D=this.options,Z=D[w+"Size"];typeof Z=="number"&&(Z=[Z,Z]);var Ae=X(Z),Ce=X(w==="shadow"&&D.shadowAnchor||D.iconAnchor||Ae&&Ae.divideBy(2,!0));h.className="leaflet-marker-"+w+" "+(D.className||""),Ce&&(h.style.marginLeft=-Ce.x+"px",h.style.marginTop=-Ce.y+"px"),Ae&&(h.style.width=Ae.x+"px",h.style.height=Ae.y+"px")},_createImg:function(h,w){return w=w||document.createElement("img"),w.src=h,w},_getIconUrl:function(h){return Yt.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function Ic(h){return new Ci(h)}var Fl=Ci.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof Fl.imagePath!="string"&&(Fl.imagePath=this._detectIconPath()),(this.options.imagePath||Fl.imagePath)+Ci.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var w=function(D,Z,Ae){var Ce=Z.exec(D);return Ce&&Ce[Ae]};return h=w(h,/^url\((['"])?(.+)\1\)$/,2),h&&w(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=Rn("div","leaflet-default-icon-path",document.body),w=Fs(h,"background-image")||Fs(h,"backgroundImage");if(document.body.removeChild(h),w=this._stripUrl(w),w)return w;var D=document.querySelector('link[href$="leaflet.css"]');return D?D.href.substring(0,D.href.length-11-1):""}}),Fc=Ea.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new _i(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qn(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var w=this._marker,D=w._map,Z=this._marker.options.autoPanSpeed,Ae=this._marker.options.autoPanPadding,Ce=ti(w._icon),Qe=D.getPixelBounds(),rt=D.getPixelOrigin(),ht=V(Qe.min._subtract(rt).add(Ae),Qe.max._subtract(rt).subtract(Ae));if(!ht.contains(Ce)){var Ft=X((Math.max(ht.max.x,Ce.x)-ht.max.x)/(Qe.max.x-ht.max.x)-(Math.min(ht.min.x,Ce.x)-ht.min.x)/(Qe.min.x-ht.min.x),(Math.max(ht.max.y,Ce.y)-ht.max.y)/(Qe.max.y-ht.max.y)-(Math.min(ht.min.y,Ce.y)-ht.min.y)/(Qe.min.y-ht.min.y)).multiplyBy(Z);D.panBy(Ft,{animate:!1}),this._draggable._newPos._add(Ft),this._draggable._startPos._add(Ft),Fn(w._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=P(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,h)))},_onDrag:function(h){var w=this._marker,D=w._shadow,Z=ti(w._icon),Ae=w._map.layerPointToLatLng(Z);D&&Fn(D,Z),w._latlng=Ae,h.latlng=Ae,h.oldLatLng=this._oldLatLng,w.fire("move",h).fire("drag",h)},_onDragEnd:function(h){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),Ms=ar.extend({options:{icon:new Fl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,w){y(this,w),this._latlng=fe(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var w=this._latlng;return this._latlng=fe(h),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),D=h.icon.createIcon(this._icon),Z=!1;D!==this._icon&&(this._icon&&this._removeIcon(),Z=!0,h.title&&(D.title=h.title),D.tagName==="IMG"&&(D.alt=h.alt||"")),Qn(D,w),h.keyboard&&(D.tabIndex="0",D.setAttribute("role","button")),this._icon=D,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bn(D,"focus",this._panOnFocus,this);var Ae=h.icon.createShadow(this._shadow),Ce=!1;Ae!==this._shadow&&(this._removeShadow(),Ce=!0),Ae&&(Qn(Ae,w),Ae.alt=""),this._shadow=Ae,h.opacity<1&&this._updateOpacity(),Z&&this.getPane().appendChild(this._icon),this._initInteraction(),Ae&&Ce&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rr(this._icon,"focus",this._panOnFocus,this),Pn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pn(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&Fn(this._icon,h),this._shadow&&Fn(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var w=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(Qn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fc)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fc(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&rs(this._icon,h),this._shadow&&rs(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var w=this.options.icon.options,D=w.iconSize?X(w.iconSize):X(0,0),Z=w.iconAnchor?X(w.iconAnchor):X(0,0);h.panInside(this._latlng,{paddingTopLeft:Z,paddingBottomRight:D.subtract(Z)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Dc(h,w){return new Ms(h,w)}var Mi=ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return y(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dl=Mi.extend({options:{fill:!0,radius:10},initialize:function(h,w){y(this,w),this._latlng=fe(h),this._radius=this.options.radius},setLatLng:function(h){var w=this._latlng;return this._latlng=fe(h),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var w=h&&h.radius||this._radius;return Mi.prototype.setStyle.call(this,h),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,w=this._radiusY||h,D=this._clickTolerance(),Z=[h+D,w+D];this._pxBounds=new ce(this._point.subtract(Z),this._point.add(Z))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ju(h,w){return new Dl(h,w)}var ai=Dl.extend({initialize:function(h,w,D){if(typeof w=="number"&&(w=s({},D,{radius:w})),y(this,w),this._latlng=fe(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new J(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:Mi.prototype.setStyle,_project:function(){var h=this._latlng.lng,w=this._latlng.lat,D=this._map,Z=D.options.crs;if(Z.distance===ve.distance){var Ae=Math.PI/180,Ce=this._mRadius/ve.R/Ae,Qe=D.project([w+Ce,h]),rt=D.project([w-Ce,h]),ht=Qe.add(rt).divideBy(2),Ft=D.unproject(ht).lat,an=Math.acos((Math.cos(Ce*Ae)-Math.sin(w*Ae)*Math.sin(Ft*Ae))/(Math.cos(w*Ae)*Math.cos(Ft*Ae)))/Ae;(isNaN(an)||an===0)&&(an=Ce/Math.cos(Math.PI/180*w)),this._point=ht.subtract(D.getPixelOrigin()),this._radius=isNaN(an)?0:ht.x-D.project([Ft,h-an]).x,this._radiusY=ht.y-Qe.y}else{var dn=Z.unproject(Z.project(this._latlng).subtract([this._mRadius,0]));this._point=D.latLngToLayerPoint(this._latlng),this._radius=this._point.x-D.latLngToLayerPoint(dn).x}this._updateBounds()}});function $f(h,w,D){return new ai(h,w,D)}var ao=Mi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,w){y(this,w),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var w=1/0,D=null,Z=qt,Ae,Ce,Qe=0,rt=this._parts.length;Qe<rt;Qe++)for(var ht=this._parts[Qe],Ft=1,an=ht.length;Ft<an;Ft++){Ae=ht[Ft-1],Ce=ht[Ft];var dn=Z(h,Ae,Ce,!0);dn<w&&(w=dn,D=Z(h,Ae,Ce))}return D&&(D.distance=Math.sqrt(w)),D},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return de(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,w){return w=w||this._defaultShape(),h=fe(h),w.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new J,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return B(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var w=[],D=B(h),Z=0,Ae=h.length;Z<Ae;Z++)D?(w[Z]=fe(h[Z]),this._bounds.extend(w[Z])):w[Z]=this._convertLatLngs(h[Z]);return w},_project:function(){var h=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),w=new K(h,h);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(h,w,D){var Z=h[0]instanceof ie,Ae=h.length,Ce,Qe;if(Z){for(Qe=[],Ce=0;Ce<Ae;Ce++)Qe[Ce]=this._map.latLngToLayerPoint(h[Ce]),D.extend(Qe[Ce]);w.push(Qe)}else for(Ce=0;Ce<Ae;Ce++)this._projectLatlngs(h[Ce],w,D)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,D,Z,Ae,Ce,Qe,rt,ht;for(D=0,Ae=0,Ce=this._rings.length;D<Ce;D++)for(ht=this._rings[D],Z=0,Qe=ht.length;Z<Qe-1;Z++)rt=ze(ht[Z],ht[Z+1],h,Z,!0),rt&&(w[Ae]=w[Ae]||[],w[Ae].push(rt[0]),(rt[1]!==ht[Z+1]||Z===Qe-2)&&(w[Ae].push(rt[1]),Ae++))}},_simplifyPoints:function(){for(var h=this._parts,w=this.options.smoothFactor,D=0,Z=h.length;D<Z;D++)h[D]=ll(h[D],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,w){var D,Z,Ae,Ce,Qe,rt,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(D=0,Ce=this._parts.length;D<Ce;D++)for(rt=this._parts[D],Z=0,Qe=rt.length,Ae=Qe-1;Z<Qe;Ae=Z++)if(!(!w&&Z===0)&&Il(h,rt[Ae],rt[Z])<=ht)return!0;return!1}});function vd(h,w){return new ao(h,w)}ao._flat=ae;var Oa=ao.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return il(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var w=ao.prototype._convertLatLngs.call(this,h),D=w.length;return D>=2&&w[0]instanceof ie&&w[0].equals(w[D-1])&&w.pop(),w},_setLatLngs:function(h){ao.prototype._setLatLngs.call(this,h),B(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return B(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,w=this.options.weight,D=new K(w,w);if(h=new ce(h.min.subtract(D),h.max.add(D)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var Z=0,Ae=this._rings.length,Ce;Z<Ae;Z++)Ce=kl(this._rings[Z],h,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var w=!1,D,Z,Ae,Ce,Qe,rt,ht,Ft;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(Ce=0,ht=this._parts.length;Ce<ht;Ce++)for(D=this._parts[Ce],Qe=0,Ft=D.length,rt=Ft-1;Qe<Ft;rt=Qe++)Z=D[Qe],Ae=D[rt],Z.y>h.y!=Ae.y>h.y&&h.x<(Ae.x-Z.x)*(h.y-Z.y)/(Ae.y-Z.y)+Z.x&&(w=!w);return w||ao.prototype._containsPoint.call(this,h,!0)}});function Sa(h,w){return new Oa(h,w)}var ii=Jr.extend({initialize:function(h,w){y(this,w),this._layers={},h&&this.addData(h)},addData:function(h){var w=M(h)?h:h.features,D,Z,Ae;if(w){for(D=0,Z=w.length;D<Z;D++)Ae=w[D],(Ae.geometries||Ae.geometry||Ae.features||Ae.coordinates)&&this.addData(Ae);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(h))return this;var Qe=Lc(h,Ce);return Qe?(Qe.feature=Ui(h),Qe.defaultOptions=Qe.options,this.resetStyle(Qe),Ce.onEachFeature&&Ce.onEachFeature(h,Qe),this.addLayer(Qe)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=s({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(w){this._setLayerStyle(w,h)},this)},_setLayerStyle:function(h,w){h.setStyle&&(typeof w=="function"&&(w=w(h.feature)),h.setStyle(w))}});function Lc(h,w){var D=h.type==="Feature"?h.geometry:h,Z=D?D.coordinates:null,Ae=[],Ce=w&&w.pointToLayer,Qe=w&&w.coordsToLatLng||Rl,rt,ht,Ft,an;if(!Z&&!D)return null;switch(D.type){case"Point":return rt=Qe(Z),Ll(Ce,h,rt,w);case"MultiPoint":for(Ft=0,an=Z.length;Ft<an;Ft++)rt=Qe(Z[Ft]),Ae.push(Ll(Ce,h,rt,w));return new Jr(Ae);case"LineString":case"MultiLineString":return ht=Ta(Z,D.type==="LineString"?0:1,Qe),new ao(ht,w);case"Polygon":case"MultiPolygon":return ht=Ta(Z,D.type==="Polygon"?1:2,Qe),new Oa(ht,w);case"GeometryCollection":for(Ft=0,an=D.geometries.length;Ft<an;Ft++){var dn=Lc({geometry:D.geometries[Ft],type:"Feature",properties:h.properties},w);dn&&Ae.push(dn)}return new Jr(Ae);case"FeatureCollection":for(Ft=0,an=D.features.length;Ft<an;Ft++){var xn=Lc(D.features[Ft],w);xn&&Ae.push(xn)}return new Jr(Ae);default:throw new Error("Invalid GeoJSON object.")}}function Ll(h,w,D,Z){return h?h(w,D):new Ms(D,Z&&Z.markersInheritOptions&&Z)}function Rl(h){return new ie(h[1],h[0],h[2])}function Ta(h,w,D){for(var Z=[],Ae=0,Ce=h.length,Qe;Ae<Ce;Ae++)Qe=w?Ta(h[Ae],w-1,D):(D||Rl)(h[Ae]),Z.push(Qe);return Z}function ua(h,w){return h=fe(h),h.alt!==void 0?[p(h.lng,w),p(h.lat,w),p(h.alt,w)]:[p(h.lng,w),p(h.lat,w)]}function cl(h,w,D,Z){for(var Ae=[],Ce=0,Qe=h.length;Ce<Qe;Ce++)Ae.push(w?cl(h[Ce],B(h[Ce])?0:w-1,D,Z):ua(h[Ce],Z));return!w&&D&&Ae.length>0&&Ae.push(Ae[0].slice()),Ae}function Aa(h,w){return h.feature?s({},h.feature,{geometry:w}):Ui(w)}function Ui(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var So={toGeoJSON:function(h){return Aa(this,{type:"Point",coordinates:ua(this.getLatLng(),h)})}};Ms.include(So),ai.include(So),Dl.include(So),ao.include({toGeoJSON:function(h){var w=!B(this._latlngs),D=cl(this._latlngs,w?1:0,!1,h);return Aa(this,{type:(w?"Multi":"")+"LineString",coordinates:D})}}),Oa.include({toGeoJSON:function(h){var w=!B(this._latlngs),D=w&&!B(this._latlngs[0]),Z=cl(this._latlngs,D?2:w?1:0,!0,h);return w||(Z=[Z]),Aa(this,{type:(D?"Multi":"")+"Polygon",coordinates:Z})}}),Pr.include({toMultiPoint:function(h){var w=[];return this.eachLayer(function(D){w.push(D.toGeoJSON(h).geometry.coordinates)}),Aa(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(h){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(h);var D=w==="GeometryCollection",Z=[];return this.eachLayer(function(Ae){if(Ae.toGeoJSON){var Ce=Ae.toGeoJSON(h);if(D)Z.push(Ce.geometry);else{var Qe=Ui(Ce);Qe.type==="FeatureCollection"?Z.push.apply(Z,Qe.features):Z.push(Qe)}}}),D?Aa(this,{geometries:Z,type:"GeometryCollection"}):{type:"FeatureCollection",features:Z}}});function To(h,w){return new ii(h,w)}var Us=To,Oi=ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,w,D){this._url=h,this._bounds=re(w),y(this,D)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&Ji(this._image),this},bringToBack:function(){return this._map&&tl(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=re(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",w=this._image=h?this._url:Rn("img");if(Qn(w,"leaflet-image-layer"),this._zoomAnimated&&Qn(w,"leaflet-zoom-animated"),this.options.className&&Qn(w,this.options.className),w.onselectstart=m,w.onmousemove=m,w.onload=i(this.fire,this,"load"),w.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(h){var w=this._map.getZoomScale(h.zoom),D=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;_a(this._image,D,w)},_reset:function(){var h=this._image,w=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),D=w.getSize();Fn(h,w.min),h.style.width=D.x+"px",h.style.height=D.y+"px"},_updateOpacity:function(){rs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),ra=function(h,w,D){return new Oi(h,w,D)},Ei=Oi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",w=this._image=h?this._url:Rn("video");if(Qn(w,"leaflet-image-layer"),this._zoomAnimated&&Qn(w,"leaflet-zoom-animated"),this.options.className&&Qn(w,this.options.className),w.onselectstart=m,w.onmousemove=m,w.onloadeddata=i(this.fire,this,"load"),h){for(var D=w.getElementsByTagName("source"),Z=[],Ae=0;Ae<D.length;Ae++)Z.push(D[Ae].src);this._url=D.length>0?Z:[w.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var Qe=Rn("source");Qe.src=this._url[Ce],w.appendChild(Qe)}}});function Au(h,w,D){return new Ei(h,w,D)}var ul=Oi.extend({_initImage:function(){var h=this._image=this._url;Qn(h,"leaflet-image-layer"),this._zoomAnimated&&Qn(h,"leaflet-zoom-animated"),this.options.className&&Qn(h,this.options.className),h.onselectstart=m,h.onmousemove=m}});function Qu(h,w,D){return new ul(h,w,D)}var ja=ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,w){h&&(h instanceof ie||M(h))?(this._latlng=fe(h),y(this,w)):(y(this,h),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&rs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&rs(this._container,1),this.bringToFront(),this.options.interactive&&(Qn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(rs(this._container,0),this._removeTimeout=setTimeout(i(Pn,void 0,this._container),200)):Pn(this._container),this.options.interactive&&(pr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=fe(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ji(this._container),this},bringToBack:function(){return this._map&&tl(this._container),this},_prepareOpen:function(h){var w=this._source;if(!w._map)return!1;if(w instanceof Jr){w=null;var D=this._source._layers;for(var Z in D)if(D[Z]._map){w=D[Z];break}if(!w)return!1;this._source=w}if(!h)if(w.getCenter)h=w.getCenter();else if(w.getLatLng)h=w.getLatLng();else if(w.getBounds)h=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")h.innerHTML=w;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),w=X(this.options.offset),D=this._getAnchor();this._zoomAnimated?Fn(this._container,h.add(D)):w=w.add(h).add(D);var Z=this._containerBottom=-w.y,Ae=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=Z+"px",this._container.style.left=Ae+"px"}},_getAnchor:function(){return[0,0]}});er.include({_initOverlay:function(h,w,D,Z){var Ae=w;return Ae instanceof h||(Ae=new h(Z).setContent(w)),D&&Ae.setLatLng(D),Ae}}),ar.include({_initOverlay:function(h,w,D,Z){var Ae=D;return Ae instanceof h?(y(Ae,Z),Ae._source=this):(Ae=w&&!Z?w:new h(Z,this),Ae.setContent(D)),Ae}});var Al=ja.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,ja.prototype.openOn.call(this,h)},onAdd:function(h){ja.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mi||this._source.on("preclick",ri))},onRemove:function(h){ja.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mi||this._source.off("preclick",ri))},getEvents:function(){var h=ja.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",w=this._container=Rn("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),D=this._wrapper=Rn("div",h+"-content-wrapper",w);if(this._contentNode=Rn("div",h+"-content",D),sl(w),no(this._contentNode),bn(w,"contextmenu",ri),this._tipContainer=Rn("div",h+"-tip-container",w),this._tip=Rn("div",h+"-tip",this._tipContainer),this.options.closeButton){var Z=this._closeButton=Rn("a",h+"-close-button",w);Z.setAttribute("role","button"),Z.setAttribute("aria-label","Close popup"),Z.href="#close",Z.innerHTML='<span aria-hidden="true">&#215;</span>',bn(Z,"click",function(Ae){qr(Ae),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,w=h.style;w.width="",w.whiteSpace="nowrap";var D=h.offsetWidth;D=Math.min(D,this.options.maxWidth),D=Math.max(D,this.options.minWidth),w.width=D+1+"px",w.whiteSpace="",w.height="";var Z=h.offsetHeight,Ae=this.options.maxHeight,Ce="leaflet-popup-scrolled";Ae&&Z>Ae?(w.height=Ae+"px",Qn(h,Ce)):pr(h,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var w=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),D=this._getAnchor();Fn(this._container,w.add(D))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,w=parseInt(Fs(this._container,"marginBottom"),10)||0,D=this._container.offsetHeight+w,Z=this._containerWidth,Ae=new K(this._containerLeft,-D-this._containerBottom);Ae._add(ti(this._container));var Ce=h.layerPointToContainerPoint(Ae),Qe=X(this.options.autoPanPadding),rt=X(this.options.autoPanPaddingTopLeft||Qe),ht=X(this.options.autoPanPaddingBottomRight||Qe),Ft=h.getSize(),an=0,dn=0;Ce.x+Z+ht.x>Ft.x&&(an=Ce.x+Z-Ft.x+ht.x),Ce.x-an-rt.x<0&&(an=Ce.x-rt.x),Ce.y+D+ht.y>Ft.y&&(dn=Ce.y+D-Ft.y+ht.y),Ce.y-dn-rt.y<0&&(dn=Ce.y-rt.y),(an||dn)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([an,dn]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rc=function(h,w){return new Al(h,w)};er.mergeOptions({closePopupOnClick:!0}),er.include({openPopup:function(h,w,D){return this._initOverlay(Al,h,w,D).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),ar.include({bindPopup:function(h,w){return this._popup=this._initOverlay(Al,this._popup,h,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof Jr||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){Ps(h);var w=h.layer||h.target;if(this._popup._source===w&&!(w instanceof Mi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=w,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var Pl=ja.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){ja.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){ja.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=ja.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",w=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rn("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var w,D,Z=this._map,Ae=this._container,Ce=Z.latLngToContainerPoint(Z.getCenter()),Qe=Z.layerPointToContainerPoint(h),rt=this.options.direction,ht=Ae.offsetWidth,Ft=Ae.offsetHeight,an=X(this.options.offset),dn=this._getAnchor();rt==="top"?(w=ht/2,D=Ft):rt==="bottom"?(w=ht/2,D=0):rt==="center"?(w=ht/2,D=Ft/2):rt==="right"?(w=0,D=Ft/2):rt==="left"?(w=ht,D=Ft/2):Qe.x<Ce.x?(rt="right",w=0,D=Ft/2):(rt="left",w=ht+(an.x+dn.x)*2,D=Ft/2),h=h.subtract(X(w,D,!0)).add(an).add(dn),pr(Ae,"leaflet-tooltip-right"),pr(Ae,"leaflet-tooltip-left"),pr(Ae,"leaflet-tooltip-top"),pr(Ae,"leaflet-tooltip-bottom"),Qn(Ae,"leaflet-tooltip-"+rt),Fn(Ae,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&rs(this._container,h)},_animateZoom:function(h){var w=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(w)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Hu=function(h,w){return new Pl(h,w)};er.include({openTooltip:function(h,w,D){return this._initOverlay(Pl,h,w,D).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),ar.include({bindTooltip:function(h,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pl,this._tooltip,h,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var w=h?"off":"on",D={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?D.add=this._openTooltip:(D.mouseover=this._openTooltip,D.mouseout=this.closeTooltip,D.click=this._openTooltip,this._map?this._addFocusListeners():D.add=this._addFocusListeners),this._tooltip.options.sticky&&(D.mousemove=this._moveTooltip),this[w](D),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof Jr||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var w=typeof h.getElement=="function"&&h.getElement();w&&(bn(w,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),bn(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var w=typeof h.getElement=="function"&&h.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var w=h.latlng,D,Z;this._tooltip.options.sticky&&h.originalEvent&&(D=this._map.mouseEventToContainerPoint(h.originalEvent),Z=this._map.containerPointToLayerPoint(D),w=this._map.layerPointToLatLng(Z)),this._tooltip.setLatLng(w)}});var ec=Ci.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var w=h&&h.tagName==="DIV"?h:document.createElement("div"),D=this.options;if(D.html instanceof Element?(qs(w),w.appendChild(D.html)):w.innerHTML=D.html!==!1?D.html:"",D.bgPos){var Z=X(D.bgPos);w.style.backgroundPosition=-Z.x+"px "+-Z.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function tc(h){return new ec(h)}Ci.Default=Fl;var dl=ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Yt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){y(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),Pn(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ji(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(tl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof K?h:new K(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var w=this.getPane().children,D=-h(-1/0,1/0),Z=0,Ae=w.length,Ce;Z<Ae;Z++)Ce=w[Z].style.zIndex,w[Z]!==this._container&&Ce&&(D=h(D,+Ce));isFinite(D)&&(this.options.zIndex=D+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Yt.ielt9){rs(this._container,this.options.opacity);var h=+new Date,w=!1,D=!1;for(var Z in this._tiles){var Ae=this._tiles[Z];if(!(!Ae.current||!Ae.loaded)){var Ce=Math.min(1,(h-Ae.loaded)/200);rs(Ae.el,Ce),Ce<1?w=!0:(Ae.active?D=!0:this._onOpaqueTile(Ae),Ae.active=!0)}}D&&!this._noPrune&&this._pruneTiles(),w&&(R(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Rn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,w=this.options.maxZoom;if(h!==void 0){for(var D in this._levels)D=Number(D),this._levels[D].el.children.length||D===h?(this._levels[D].el.style.zIndex=w-Math.abs(h-D),this._onUpdateLevel(D)):(Pn(this._levels[D].el),this._removeTilesAtZoom(D),this._onRemoveLevel(D),delete this._levels[D]);var Z=this._levels[h],Ae=this._map;return Z||(Z=this._levels[h]={},Z.el=Rn("div","leaflet-tile-container leaflet-zoom-animated",this._container),Z.el.style.zIndex=w,Z.origin=Ae.project(Ae.unproject(Ae.getPixelOrigin()),h).round(),Z.zoom=h,this._setZoomTransform(Z,Ae.getCenter(),Ae.getZoom()),m(Z.el.offsetWidth),this._onCreateLevel(Z)),this._level=Z,Z}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var h,w,D=this._map.getZoom();if(D>this.options.maxZoom||D<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)w=this._tiles[h],w.retain=w.current;for(h in this._tiles)if(w=this._tiles[h],w.current&&!w.active){var Z=w.coords;this._retainParent(Z.x,Z.y,Z.z,Z.z-5)||this._retainChildren(Z.x,Z.y,Z.z,Z.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var w in this._tiles)this._tiles[w].coords.z===h&&this._removeTile(w)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)Pn(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,w,D,Z){var Ae=Math.floor(h/2),Ce=Math.floor(w/2),Qe=D-1,rt=new K(+Ae,+Ce);rt.z=+Qe;var ht=this._tileCoordsToKey(rt),Ft=this._tiles[ht];return Ft&&Ft.active?(Ft.retain=!0,!0):(Ft&&Ft.loaded&&(Ft.retain=!0),Qe>Z?this._retainParent(Ae,Ce,Qe,Z):!1)},_retainChildren:function(h,w,D,Z){for(var Ae=2*h;Ae<2*h+2;Ae++)for(var Ce=2*w;Ce<2*w+2;Ce++){var Qe=new K(Ae,Ce);Qe.z=D+1;var rt=this._tileCoordsToKey(Qe),ht=this._tiles[rt];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);D+1<Z&&this._retainChildren(Ae,Ce,D+1,Z)}},_resetView:function(h){var w=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var w=this.options;return w.minNativeZoom!==void 0&&h<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<h?w.maxNativeZoom:h},_setView:function(h,w,D,Z){var Ae=Math.round(w);this.options.maxZoom!==void 0&&Ae>this.options.maxZoom||this.options.minZoom!==void 0&&Ae<this.options.minZoom?Ae=void 0:Ae=this._clampZoom(Ae);var Ce=this.options.updateWhenZooming&&Ae!==this._tileZoom;(!Z||Ce)&&(this._tileZoom=Ae,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Ae!==void 0&&this._update(h),D||this._pruneTiles(),this._noPrune=!!D),this._setZoomTransforms(h,w)},_setZoomTransforms:function(h,w){for(var D in this._levels)this._setZoomTransform(this._levels[D],h,w)},_setZoomTransform:function(h,w,D){var Z=this._map.getZoomScale(D,h.zoom),Ae=h.origin.multiplyBy(Z).subtract(this._map._getNewPixelOrigin(w,D)).round();Yt.any3d?_a(h.el,Ae,Z):Fn(h.el,Ae)},_resetGrid:function(){var h=this._map,w=h.options.crs,D=this._tileSize=this.getTileSize(),Z=this._tileZoom,Ae=this._map.getPixelWorldBounds(this._tileZoom);Ae&&(this._globalTileRange=this._pxBoundsToTileRange(Ae)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,w.wrapLng[0]],Z).x/D.x),Math.ceil(h.project([0,w.wrapLng[1]],Z).x/D.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([w.wrapLat[0],0],Z).y/D.x),Math.ceil(h.project([w.wrapLat[1],0],Z).y/D.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var w=this._map,D=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),Z=w.getZoomScale(D,this._tileZoom),Ae=w.project(h,this._tileZoom).floor(),Ce=w.getSize().divideBy(Z*2);return new ce(Ae.subtract(Ce),Ae.add(Ce))},_update:function(h){var w=this._map;if(w){var D=this._clampZoom(w.getZoom());if(h===void 0&&(h=w.getCenter()),this._tileZoom!==void 0){var Z=this._getTiledPixelBounds(h),Ae=this._pxBoundsToTileRange(Z),Ce=Ae.getCenter(),Qe=[],rt=this.options.keepBuffer,ht=new ce(Ae.getBottomLeft().subtract([rt,-rt]),Ae.getTopRight().add([rt,-rt]));if(!(isFinite(Ae.min.x)&&isFinite(Ae.min.y)&&isFinite(Ae.max.x)&&isFinite(Ae.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ft in this._tiles){var an=this._tiles[Ft].coords;(an.z!==this._tileZoom||!ht.contains(new K(an.x,an.y)))&&(this._tiles[Ft].current=!1)}if(Math.abs(D-this._tileZoom)>1){this._setView(h,D);return}for(var dn=Ae.min.y;dn<=Ae.max.y;dn++)for(var xn=Ae.min.x;xn<=Ae.max.x;xn++){var zn=new K(xn,dn);if(zn.z=this._tileZoom,!!this._isValidTile(zn)){var gs=this._tiles[this._tileCoordsToKey(zn)];gs?gs.current=!0:Qe.push(zn)}}if(Qe.sort(function(li,Bo){return li.distanceTo(Ce)-Bo.distanceTo(Ce)}),Qe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $s=document.createDocumentFragment();for(xn=0;xn<Qe.length;xn++)this._addTile(Qe[xn],$s);this._level.el.appendChild($s)}}}},_isValidTile:function(h){var w=this._map.options.crs;if(!w.infinite){var D=this._globalTileRange;if(!w.wrapLng&&(h.x<D.min.x||h.x>D.max.x)||!w.wrapLat&&(h.y<D.min.y||h.y>D.max.y))return!1}if(!this.options.bounds)return!0;var Z=this._tileCoordsToBounds(h);return re(this.options.bounds).overlaps(Z)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var w=this._map,D=this.getTileSize(),Z=h.scaleBy(D),Ae=Z.add(D),Ce=w.unproject(Z,h.z),Qe=w.unproject(Ae,h.z);return[Ce,Qe]},_tileCoordsToBounds:function(h){var w=this._tileCoordsToNwSe(h),D=new J(w[0],w[1]);return this.options.noWrap||(D=this._map.wrapLatLngBounds(D)),D},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var w=h.split(":"),D=new K(+w[0],+w[1]);return D.z=+w[2],D},_removeTile:function(h){var w=this._tiles[h];w&&(Pn(w.el),delete this._tiles[h],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){Qn(h,"leaflet-tile");var w=this.getTileSize();h.style.width=w.x+"px",h.style.height=w.y+"px",h.onselectstart=m,h.onmousemove=m,Yt.ielt9&&this.options.opacity<1&&rs(h,this.options.opacity)},_addTile:function(h,w){var D=this._getTilePos(h),Z=this._tileCoordsToKey(h),Ae=this.createTile(this._wrapCoords(h),i(this._tileReady,this,h));this._initTile(Ae),this.createTile.length<2&&P(i(this._tileReady,this,h,null,Ae)),Fn(Ae,D),this._tiles[Z]={el:Ae,coords:h,current:!0},w.appendChild(Ae),this.fire("tileloadstart",{tile:Ae,coords:h})},_tileReady:function(h,w,D){w&&this.fire("tileerror",{error:w,tile:D,coords:h});var Z=this._tileCoordsToKey(h);D=this._tiles[Z],D&&(D.loaded=+new Date,this._map._fadeAnimated?(rs(D.el,0),R(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(D.active=!0,this._pruneTiles()),w||(Qn(D.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:D.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Yt.ielt9||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var w=new K(this._wrapX?d(h.x,this._wrapX):h.x,this._wrapY?d(h.y,this._wrapY):h.y);return w.z=h.z,w},_pxBoundsToTileRange:function(h){var w=this.getTileSize();return new ce(h.min.unscaleBy(w).floor(),h.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function Os(h){return new dl(h)}var Na=dl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,w){this._url=h,w=y(this,w),w.detectRetina&&Yt.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,w){return this._url===h&&w===void 0&&(w=!0),this._url=h,w||this.redraw(),this},createTile:function(h,w){var D=document.createElement("img");return bn(D,"load",i(this._tileOnLoad,this,w,D)),bn(D,"error",i(this._tileOnError,this,w,D)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(D.referrerPolicy=this.options.referrerPolicy),D.alt="",D.src=this.getTileUrl(h),D},getTileUrl:function(h){var w={r:Yt.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var D=this._globalTileRange.max.y-h.y;this.options.tms&&(w.y=D),w["-y"]=D}return F(this._url,s(w,this.options))},_tileOnLoad:function(h,w){Yt.ielt9?setTimeout(i(h,this,null,w),0):h(null,w)},_tileOnError:function(h,w,D){var Z=this.options.errorTileUrl;Z&&w.getAttribute("src")!==Z&&(w.src=Z),h(D,w)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,w=this.options.maxZoom,D=this.options.zoomReverse,Z=this.options.zoomOffset;return D&&(h=w-h),h+Z},_getSubdomain:function(h){var w=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var h,w;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(w=this._tiles[h].el,w.onload=m,w.onerror=m,!w.complete)){w.src=Q;var D=this._tiles[h].coords;Pn(w),delete this._tiles[h],this.fire("tileabort",{tile:w,coords:D})}},_removeTile:function(h){var w=this._tiles[h];if(w)return w.el.setAttribute("src",Q),dl.prototype._removeTile.call(this,h)},_tileReady:function(h,w,D){if(!(!this._map||D&&D.getAttribute("src")===Q))return dl.prototype._tileReady.call(this,h,w,D)}});function fr(h,w){return new Na(h,w)}var hr=Na.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,w){this._url=h;var D=s({},this.defaultWmsParams);for(var Z in w)Z in this.options||(D[Z]=w[Z]);w=y(this,w);var Ae=w.detectRetina&&Yt.retina?2:1,Ce=this.getTileSize();D.width=Ce.x*Ae,D.height=Ce.y*Ae,this.wmsParams=D},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,Na.prototype.onAdd.call(this,h)},getTileUrl:function(h){var w=this._tileCoordsToNwSe(h),D=this._crs,Z=V(D.project(w[0]),D.project(w[1])),Ae=Z.min,Ce=Z.max,Qe=(this._wmsVersion>=1.3&&this._crs===gr?[Ae.y,Ae.x,Ce.y,Ce.x]:[Ae.x,Ae.y,Ce.x,Ce.y]).join(","),rt=Na.prototype.getTileUrl.call(this,h);return rt+T(this.wmsParams,rt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Qe},setParams:function(h,w){return s(this.wmsParams,h),w||this.redraw(),this}});function fs(h,w){return new hr(h,w)}Na.WMS=hr,fr.wms=fs;var Zr=ar.extend({options:{padding:.1},initialize:function(h){y(this,h),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,w){var D=this._map.getZoomScale(w,this._zoom),Z=this._map.getSize().multiplyBy(.5+this.options.padding),Ae=this._map.project(this._center,w),Ce=Z.multiplyBy(-D).add(Ae).subtract(this._map._getNewPixelOrigin(h,w));Yt.any3d?_a(this._container,Ce,D):Fn(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,w=this._map.getSize(),D=this._map.containerPointToLayerPoint(w.multiplyBy(-h)).round();this._bounds=new ce(D,D.add(w.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),io=Zr.extend({options:{tolerance:0},getEvents:function(){var h=Zr.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");bn(h,"mousemove",this._onMouseMove,this),bn(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bn(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Pn(this._container),rr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var w in this._layers)h=this._layers[w],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var h=this._bounds,w=this._container,D=h.getSize(),Z=Yt.retina?2:1;Fn(w,h.min),w.width=Z*D.x,w.height=Z*D.y,w.style.width=D.x+"px",w.style.height=D.y+"px",Yt.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){Zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[l(h)]=h;var w=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var w=h._order,D=w.next,Z=w.prev;D?D.prev=Z:this._drawLast=Z,Z?Z.next=D:this._drawFirst=D,delete h._order,delete this._layers[l(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var w=h.options.dashArray.split(/[, ]+/),D=[],Z,Ae;for(Ae=0;Ae<w.length;Ae++){if(Z=Number(w[Ae]),isNaN(Z))return;D.push(Z)}h.options._dashArray=D}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var w=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(h._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(h._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var w=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,w=this._redrawBounds;if(this._ctx.save(),w){var D=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,D.x,D.y),this._ctx.clip()}this._drawing=!0;for(var Z=this._drawFirst;Z;Z=Z.next)h=Z.layer,(!w||h._pxBounds&&h._pxBounds.intersects(w))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,w){if(this._drawing){var D,Z,Ae,Ce,Qe=h._parts,rt=Qe.length,ht=this._ctx;if(rt){for(ht.beginPath(),D=0;D<rt;D++){for(Z=0,Ae=Qe[D].length;Z<Ae;Z++)Ce=Qe[D][Z],ht[Z?"lineTo":"moveTo"](Ce.x,Ce.y);w&&ht.closePath()}this._fillStroke(ht,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var w=h._point,D=this._ctx,Z=Math.max(Math.round(h._radius),1),Ae=(Math.max(Math.round(h._radiusY),1)||Z)/Z;Ae!==1&&(D.save(),D.scale(1,Ae)),D.beginPath(),D.arc(w.x,w.y/Ae,Z,0,Math.PI*2,!1),Ae!==1&&D.restore(),this._fillStroke(D,h)}},_fillStroke:function(h,w){var D=w.options;D.fill&&(h.globalAlpha=D.fillOpacity,h.fillStyle=D.fillColor||D.color,h.fill(D.fillRule||"evenodd")),D.stroke&&D.weight!==0&&(h.setLineDash&&h.setLineDash(w.options&&w.options._dashArray||[]),h.globalAlpha=D.opacity,h.lineWidth=D.weight,h.strokeStyle=D.color,h.lineCap=D.lineCap,h.lineJoin=D.lineJoin,h.stroke())},_onClick:function(h){for(var w=this._map.mouseEventToLayerPoint(h),D,Z,Ae=this._drawFirst;Ae;Ae=Ae.next)D=Ae.layer,D.options.interactive&&D._containsPoint(w)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(D))&&(Z=D);this._fireEvent(Z?[Z]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,w)}},_handleMouseOut:function(h){var w=this._hoveredLayer;w&&(pr(this._container,"leaflet-interactive"),this._fireEvent([w],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,w){if(!this._mouseHoverThrottled){for(var D,Z,Ae=this._drawFirst;Ae;Ae=Ae.next)D=Ae.layer,D.options.interactive&&D._containsPoint(w)&&(Z=D);Z!==this._hoveredLayer&&(this._handleMouseOut(h),Z&&(Qn(this._container,"leaflet-interactive"),this._fireEvent([Z],h,"mouseover"),this._hoveredLayer=Z)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,w,D){this._map._fireDOMEvent(w,D||w.type,h)},_bringToFront:function(h){var w=h._order;if(w){var D=w.next,Z=w.prev;if(D)D.prev=Z;else return;Z?Z.next=D:D&&(this._drawFirst=D),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(h)}},_bringToBack:function(h){var w=h._order;if(w){var D=w.next,Z=w.prev;if(Z)Z.next=D;else return;D?D.prev=Z:Z&&(this._drawLast=Z),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(h)}}});function nc(h){return Yt.canvas?new io(h):null}var No=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rc={_initContainer:function(){this._container=Rn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zr.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var w=h._container=No("shape");Qn(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",h._path=No("path"),w.appendChild(h._path),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){var w=h._container;this._container.appendChild(w),h.options.interactive&&h.addInteractiveTarget(w)},_removePath:function(h){var w=h._container;Pn(w),h.removeInteractiveTarget(w),delete this._layers[l(h)]},_updateStyle:function(h){var w=h._stroke,D=h._fill,Z=h.options,Ae=h._container;Ae.stroked=!!Z.stroke,Ae.filled=!!Z.fill,Z.stroke?(w||(w=h._stroke=No("stroke")),Ae.appendChild(w),w.weight=Z.weight+"px",w.color=Z.color,w.opacity=Z.opacity,Z.dashArray?w.dashStyle=M(Z.dashArray)?Z.dashArray.join(" "):Z.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=Z.lineCap.replace("butt","flat"),w.joinstyle=Z.lineJoin):w&&(Ae.removeChild(w),h._stroke=null),Z.fill?(D||(D=h._fill=No("fill")),Ae.appendChild(D),D.color=Z.fillColor||Z.color,D.opacity=Z.fillOpacity):D&&(Ae.removeChild(D),h._fill=null)},_updateCircle:function(h){var w=h._point.round(),D=Math.round(h._radius),Z=Math.round(h._radiusY||D);this._setPath(h,h._empty()?"M0 0":"AL "+w.x+","+w.y+" "+D+","+Z+" 0,"+65535*360)},_setPath:function(h,w){h._path.v=w},_bringToFront:function(h){Ji(h._container)},_bringToBack:function(h){tl(h._container)}},du=Yt.vml?No:Oe,fl=Zr.extend({_initContainer:function(){this._container=du("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=du("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pn(this._container),rr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var h=this._bounds,w=h.getSize(),D=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,D.setAttribute("width",w.x),D.setAttribute("height",w.y)),Fn(D,h.min),D.setAttribute("viewBox",[h.min.x,h.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(h){var w=h._path=du("path");h.options.className&&Qn(w,h.options.className),h.options.interactive&&Qn(w,"leaflet-interactive"),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){Pn(h._path),h.removeInteractiveTarget(h._path),delete this._layers[l(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var w=h._path,D=h.options;w&&(D.stroke?(w.setAttribute("stroke",D.color),w.setAttribute("stroke-opacity",D.opacity),w.setAttribute("stroke-width",D.weight),w.setAttribute("stroke-linecap",D.lineCap),w.setAttribute("stroke-linejoin",D.lineJoin),D.dashArray?w.setAttribute("stroke-dasharray",D.dashArray):w.removeAttribute("stroke-dasharray"),D.dashOffset?w.setAttribute("stroke-dashoffset",D.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),D.fill?(w.setAttribute("fill",D.fillColor||D.color),w.setAttribute("fill-opacity",D.fillOpacity),w.setAttribute("fill-rule",D.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(h,w){this._setPath(h,Ie(h._parts,w))},_updateCircle:function(h){var w=h._point,D=Math.max(Math.round(h._radius),1),Z=Math.max(Math.round(h._radiusY),1)||D,Ae="a"+D+","+Z+" 0 1,0 ",Ce=h._empty()?"M0 0":"M"+(w.x-D)+","+w.y+Ae+D*2+",0 "+Ae+-D*2+",0 ";this._setPath(h,Ce)},_setPath:function(h,w){h._path.setAttribute("d",w)},_bringToFront:function(h){Ji(h._path)},_bringToBack:function(h){tl(h._path)}});Yt.vml&&fl.include(rc);function da(h){return Yt.svg||Yt.vml?new fl(h):null}er.include({getRenderer:function(h){var w=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var w=this._paneRenderers[h];return w===void 0&&(w=this._createRenderer({pane:h}),this._paneRenderers[h]=w),w},_createRenderer:function(h){return this.options.preferCanvas&&nc(h)||da(h)}});var oo=Oa.extend({initialize:function(h,w){Oa.prototype.initialize.call(this,this._boundsToLatLngs(h),w)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=re(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function oi(h,w){return new oo(h,w)}fl.create=du,fl.pointsToPath=Ie,ii.geometryToLayer=Lc,ii.coordsToLatLng=Rl,ii.coordsToLatLngs=Ta,ii.latLngToCoords=ua,ii.latLngsToCoords=cl,ii.getFeature=Aa,ii.asFeature=Ui,er.mergeOptions({boxZoom:!0});var fu=Ea.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){bn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ca(),Jl(),this._startPoint=this._map.mouseEventToContainerPoint(h),bn(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=Rn("div","leaflet-zoom-box",this._container),Qn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var w=new ce(this._point,this._startPoint),D=w.getSize();Fn(this._box,w.min),this._box.style.width=D.x+"px",this._box.style.height=D.y+"px"},_finish:function(){this._moved&&(Pn(this._box),pr(this._container,"leaflet-crosshair")),yi(),eo(),rr(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var w=new J(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});er.addInitHook("addHandler","boxZoom",fu),er.mergeOptions({doubleClickZoom:!0});var hl=Ea.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var w=this._map,D=w.getZoom(),Z=w.options.zoomDelta,Ae=h.originalEvent.shiftKey?D-Z:D+Z;w.options.doubleClickZoom==="center"?w.setZoom(Ae):w.setZoomAround(h.containerPoint,Ae)}});er.addInitHook("addHandler","doubleClickZoom",hl),er.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vu=Ea.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new _i(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}Qn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pr(this._map._container,"leaflet-grab"),pr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=re(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var w=this._lastTime=+new Date,D=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(D),this._times.push(w),this._prunePositions(w)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,w){return h-(h-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;h.x<w.min.x&&(h.x=this._viscousLimit(h.x,w.min.x)),h.y<w.min.y&&(h.y=this._viscousLimit(h.y,w.min.y)),h.x>w.max.x&&(h.x=this._viscousLimit(h.x,w.max.x)),h.y>w.max.y&&(h.y=this._viscousLimit(h.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,w=Math.round(h/2),D=this._initialWorldOffset,Z=this._draggable._newPos.x,Ae=(Z-w+D)%h+w-D,Ce=(Z+w+D)%h-w-D,Qe=Math.abs(Ae+D)<Math.abs(Ce+D)?Ae:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Qe},_onDragEnd:function(h){var w=this._map,D=w.options,Z=!D.inertia||h.noInertia||this._times.length<2;if(w.fire("dragend",h),Z)w.fire("moveend");else{this._prunePositions(+new Date);var Ae=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,Qe=D.easeLinearity,rt=Ae.multiplyBy(Qe/Ce),ht=rt.distanceTo([0,0]),Ft=Math.min(D.inertiaMaxSpeed,ht),an=rt.multiplyBy(Ft/ht),dn=Ft/(D.inertiaDeceleration*Qe),xn=an.multiplyBy(-dn/2).round();!xn.x&&!xn.y?w.fire("moveend"):(xn=w._limitOffset(xn,w.options.maxBounds),P(function(){w.panBy(xn,{duration:dn,easeLinearity:Qe,noMoveStart:!0,animate:!0})}))}}});er.addInitHook("addHandler","dragging",Vu),er.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Pc=Ea.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),bn(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,w=document.documentElement,D=h.scrollTop||w.scrollTop,Z=h.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(Z,D)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var w=this._panKeys={},D=this.keyCodes,Z,Ae;for(Z=0,Ae=D.left.length;Z<Ae;Z++)w[D.left[Z]]=[-1*h,0];for(Z=0,Ae=D.right.length;Z<Ae;Z++)w[D.right[Z]]=[h,0];for(Z=0,Ae=D.down.length;Z<Ae;Z++)w[D.down[Z]]=[0,h];for(Z=0,Ae=D.up.length;Z<Ae;Z++)w[D.up[Z]]=[0,-1*h]},_setZoomDelta:function(h){var w=this._zoomKeys={},D=this.keyCodes,Z,Ae;for(Z=0,Ae=D.zoomIn.length;Z<Ae;Z++)w[D.zoomIn[Z]]=h;for(Z=0,Ae=D.zoomOut.length;Z<Ae;Z++)w[D.zoomOut[Z]]=-h},_addHooks:function(){bn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var w=h.keyCode,D=this._map,Z;if(w in this._panKeys){if(!D._panAnim||!D._panAnim._inProgress)if(Z=this._panKeys[w],h.shiftKey&&(Z=X(Z).multiplyBy(3)),D.options.maxBounds&&(Z=D._limitOffset(X(Z),D.options.maxBounds)),D.options.worldCopyJump){var Ae=D.wrapLatLng(D.unproject(D.project(D.getCenter()).add(Z)));D.panTo(Ae)}else D.panBy(Z)}else if(w in this._zoomKeys)D.setZoom(D.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&D._popup&&D._popup.options.closeOnEscapeKey)D.closePopup();else return;Ps(h)}}});er.addInitHook("addHandler","keyboard",Pc),er.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ml=Ea.extend({addHooks:function(){bn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var w=al(h),D=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var Z=Math.max(D-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),Z),Ps(h)},_performZoom:function(){var h=this._map,w=h.getZoom(),D=this._map.options.zoomSnap||0;h._stop();var Z=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Ae=4*Math.log(2/(1+Math.exp(-Math.abs(Z))))/Math.LN2,Ce=D?Math.ceil(Ae/D)*D:Ae,Qe=h._limitZoom(w+(this._delta>0?Ce:-Ce))-w;this._delta=0,this._startTime=null,Qe&&(h.options.scrollWheelZoom==="center"?h.setZoom(w+Qe):h.setZoomAround(this._lastMousePos,w+Qe))}});er.addInitHook("addHandler","scrollWheelZoom",Ml);var yd=600;er.mergeOptions({tapHold:Yt.touchNative&&Yt.safari&&Yt.mobile,tapTolerance:15});var zu=Ea.extend({addHooks:function(){bn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var w=h.touches[0];this._startPos=this._newPos=new K(w.clientX,w.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(bn(document,"touchend",qr),bn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),yd),bn(document,"touchend touchcancel contextmenu",this._cancel,this),bn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){rr(document,"touchend",qr),rr(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),rr(document,"touchend touchcancel contextmenu",this._cancel,this),rr(document,"touchmove",this._onMove,this)},_onMove:function(h){var w=h.touches[0];this._newPos=new K(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,w){var D=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});D._simulated=!0,w.target.dispatchEvent(D)}});er.addInitHook("addHandler","tapHold",zu),er.mergeOptions({touchZoom:Yt.touch,bounceAtZoomLimits:!0});var sc=Ea.extend({addHooks:function(){Qn(this._map._container,"leaflet-touch-zoom"),bn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pr(this._map._container,"leaflet-touch-zoom"),rr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var w=this._map;if(!(!h.touches||h.touches.length!==2||w._animatingZoom||this._zooming)){var D=w.mouseEventToContainerPoint(h.touches[0]),Z=w.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(D.add(Z)._divideBy(2))),this._startDist=D.distanceTo(Z),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),bn(document,"touchmove",this._onTouchMove,this),bn(document,"touchend touchcancel",this._onTouchEnd,this),qr(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var w=this._map,D=w.mouseEventToContainerPoint(h.touches[0]),Z=w.mouseEventToContainerPoint(h.touches[1]),Ae=D.distanceTo(Z)/this._startDist;if(this._zoom=w.getScaleZoom(Ae,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&Ae<1||this._zoom>w.getMaxZoom()&&Ae>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,Ae===1)return}else{var Ce=D._add(Z)._divideBy(2)._subtract(this._centerPoint);if(Ae===1&&Ce.x===0&&Ce.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var Qe=i(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=P(Qe,this,!0),qr(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),rr(document,"touchmove",this._onTouchMove,this),rr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});er.addInitHook("addHandler","touchZoom",sc),er.BoxZoom=fu,er.DoubleClickZoom=hl,er.Drag=Vu,er.Keyboard=Pc,er.ScrollWheelZoom=Ml,er.TapHold=zu,er.TouchZoom=sc,n.Bounds=ce,n.Browser=Yt,n.CRS=Se,n.Canvas=io,n.Circle=ai,n.CircleMarker=Dl,n.Class=q,n.Control=ds,n.DivIcon=ec,n.DivOverlay=ja,n.DomEvent=lu,n.DomUtil=Dn,n.Draggable=_i,n.Evented=oe,n.FeatureGroup=Jr,n.GeoJSON=ii,n.GridLayer=dl,n.Handler=Ea,n.Icon=Ci,n.ImageOverlay=Oi,n.LatLng=ie,n.LatLngBounds=J,n.Layer=ar,n.LayerGroup=Pr,n.LineUtil=Te,n.Map=er,n.Marker=Ms,n.Mixin=Nl,n.Path=Mi,n.Point=K,n.PolyUtil=ol,n.Polygon=Oa,n.Polyline=ao,n.Popup=Al,n.PosAnimation=Cl,n.Projection=Pt,n.Rectangle=oo,n.Renderer=Zr,n.SVG=fl,n.SVGOverlay=ul,n.TileLayer=Na,n.Tooltip=Pl,n.Transformation=me,n.Util=G,n.VideoOverlay=Ei,n.bind=i,n.bounds=V,n.canvas=nc,n.circle=$f,n.circleMarker=ju,n.control=Ss,n.divIcon=tc,n.extend=s,n.featureGroup=Pi,n.geoJSON=To,n.geoJson=Us,n.gridLayer=Os,n.icon=Ic,n.imageOverlay=ra,n.latLng=fe,n.latLngBounds=re,n.layerGroup=Eo,n.map=so,n.marker=Dc,n.point=X,n.polygon=Sa,n.polyline=vd,n.popup=Rc,n.rectangle=oi,n.setOptions=y,n.stamp=l,n.svg=da,n.svgOverlay=Qu,n.tileLayer=fr,n.tooltip=Hu,n.transformation=he,n.version=r,n.videoOverlay=Au;var ac=window.L;n.noConflict=function(){return window.L=ac,this},window.L=n})}(Mg,Mg.exports)),Mg.exports}var kv=mFe();const v9=Kx(kv);function vN(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function yN(t,e){return e==null?function(r,s){const a=se.useRef(void 0);return a.current||(a.current=t(r,s)),a}:function(r,s){const a=se.useRef(void 0);a.current||(a.current=t(r,s));const i=se.useRef(r),{instance:o}=a.current;return se.useEffect(function(){i.current!==r&&(e(o,r,i.current),i.current=r)},[o,r,e]),a}}function pFe(t,e){se.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function y9(t){return function(n){const r=g9(),s=t(xN(n,r),r);return p9(r.map,n.attribution),x9(s.current,n.eventHandlers),pFe(s.current,r),s}}function gFe(t,e){const n=yN(t,e),r=y9(n);return uFe(r)}function xFe(t,e){const n=yN(t),r=fFe(n,e);return AFe(r)}function vFe(t,e){const n=yN(t,e),r=y9(n);return dFe(r)}function yFe(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function wFe({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:i,style:o,whenReady:l,zoom:u,...d},m){const[p]=se.useState({className:s,id:a,style:o}),[x,C]=se.useState(null),y=se.useRef(void 0);se.useImperativeHandle(m,()=>(x==null?void 0:x.map)??null,[x]);const T=se.useCallback(F=>{if(F!==null&&!y.current){const M=new kv.Map(F,d);y.current=M,n!=null&&u!=null?M.setView(n,u):t!=null&&M.fitBounds(t,e),l!=null&&M.whenReady(l),C(lFe(M))}},[]);se.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const I=x?wt.createElement(gN,{value:x},r):i??null;return wt.createElement("div",{...p,ref:T},I)}const bFe=se.forwardRef(wFe),_Fe=gFe(function({position:e,...n},r){const s=new kv.Marker(e,n);return vN(s,cFe(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),CFe=xFe(function(e,n){const r=new kv.Popup(e,n.overlayContainer);return vN(r,n)},function(e,n,{position:r},s){se.useEffect(function(){const{instance:i}=e;function o(u){u.popup===i&&(i.update(),s(!0))}function l(u){u.popup===i&&s(!1)}return n.map.on({popupopen:o,popupclose:l}),n.overlayContainer==null?(r!=null&&i.setLatLng(r),i.openOn(n.map)):n.overlayContainer.bindPopup(i),function(){var d;n.map.off({popupopen:o,popupclose:l}),(d=n.overlayContainer)==null||d.unbindPopup(),n.map.removeLayer(i)}},[e,n,s,r])}),EFe=vFe(function({url:e,...n},r){const s=new kv.TileLayer(e,xN(n,r));return vN(s,r)},function(e,n,r){yFe(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete v9.Icon.Default.prototype._getIconUrl;v9.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const SFe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"}],TFe=()=>({nombre:"",rut:"",direccion:"",contacto:"",cupos:1,calificaciones:SFe.map(t=>({...t,score:null})),estudiantesAsignados:[]}),NFe=({empresas:t})=>{const e=t.filter(r=>{var s,a;return((s=r.coordenadas)==null?void 0:s.lat)&&((a=r.coordenadas)==null?void 0:a.lng)}),n=[-33.4489,-70.6693];return c.jsx("div",{className:"h-[600px] w-full rounded-lg overflow-hidden border dark:border-slate-700",children:c.jsxs(bFe,{center:n,zoom:11,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[c.jsx(EFe,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map(r=>c.jsx(_Fe,{position:[r.coordenadas.lat,r.coordenadas.lng],children:c.jsx(CFe,{children:c.jsxs("div",{className:"font-sans",children:[c.jsx("strong",{className:"font-bold block",children:r.nombre}),r.direccion]})})},r.id))]})})},BFe=()=>{const[t,e]=se.useState([]),[n,r]=se.useState([]),[s,a]=se.useState("list"),[i,o]=se.useState(null),[l,u]=se.useState(!0);se.useEffect(()=>{const x=rFe(e),C=iFe(y=>{r(y),u(!1)});return()=>{x(),C()}},[]);const d=async()=>{if(i)try{await sFe(i),a("list"),o(null)}catch(x){console.error("Error al guardar la empresa:",x),alert("No se pudo guardar la empresa.")}},m=async x=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await aFe(x)},p=(x,C)=>{o(y=>y?{...y,[x]:C}:null)};return l?c.jsx("div",{className:"text-center p-8",children:"Cargando gestión de empresas..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas para Prácticas TP"}),c.jsxs("div",{className:"flex items-center gap-4",children:[s!=="list"&&c.jsx("button",{onClick:()=>a("list"),className:"font-semibold",children:"← Volver a la lista"}),s==="list"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>a("map"),title:"Vista de Mapa",className:"bg-slate-200 dark:bg-slate-700 p-2 rounded-lg",children:"🗺️"}),c.jsx("button",{onClick:()=>{o(TFe()),a("form")},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg",children:"Crear Nueva Empresa"})]})]})]}),s==="map"&&c.jsx(NFe,{empresas:t}),s==="list"&&c.jsx("div",{className:"space-y-3",children:t.map(x=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:x.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[x.rut," | ",x.direccion]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>{o(JSON.parse(JSON.stringify(x))),a("form")},className:"text-sm font-semibold",children:"Editar"}),c.jsx("button",{onClick:()=>m(x.id),className:"text-sm text-red-500",children:"Eliminar"})]})]})},x.id))}),s==="form"&&i&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{value:i.nombre,onChange:x=>p("nombre",x.target.value),placeholder:"Nombre Empresa",className:"input-style"}),c.jsx("input",{value:i.rut,onChange:x=>p("rut",x.target.value),placeholder:"RUT Empresa",className:"input-style"}),c.jsx("input",{value:i.direccion,onChange:x=>p("direccion",x.target.value),placeholder:"Dirección",className:"input-style"}),c.jsx("input",{value:i.contacto,onChange:x=>p("contacto",x.target.value),placeholder:"Contacto",className:"input-style"})]}),c.jsx("p",{className:"text-sm text-slate-500",children:"Para una correcta visualización en el mapa, ingrese una dirección precisa (Calle, Número, Comuna, Ciudad)."}),c.jsx("button",{onClick:d,className:"w-full bg-amber-500 text-white font-bold py-2 rounded-lg",children:"Guardar Empresa"})]})]})},kFe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},IFe=({currentUser:t,onLogout:e,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=se.useMemo(()=>{const I=AX[o];return o!==tn.ESTUDIANTE?I:I.filter(F=>{if(F.name==="Asistencia a Empresa"){const M=kFe(t.curso||"");return M.startsWith("3º")||M.startsWith("4º")}return!0})},[o,t.curso]),[u,d]=se.useState(null),[m,p]=se.useState(!1);se.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const x=se.useCallback(I=>{d(I),window.innerWidth<768&&p(!1)},[]),C=se.useCallback(I=>{const F=l.find(M=>M.name===I);F&&x(F)},[l,x]),y=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(WY,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(I=>c.jsxs("button",{onClick:()=>x(I),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===I.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[I.icon,c.jsx("span",{className:"ml-4",children:I.name})]},I.name))})]}),T=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx(WJ,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx(eZ,{currentUser:t});if(u.name==="Mensajería Interna")return c.jsx(s2e,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(lZ,{});if(o===tn.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(jX,{currentUser:t});if(u.name==="Administración")return c.jsx(Ffe,{});if(u.name==="Seguimiento Curricular")return c.jsx(W3e,{currentUser:t});if(u.name==="Acompañamiento docente")return c.jsx(Ywe,{currentUser:t});if(u.name==="Análisis Taxonómico")return c.jsx(sP,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx($6,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(RX,{currentUser:t});if(u.name==="Crear horarios")return c.jsx(_J,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(NJ,{});if(u.name==="Inclusión")return c.jsx(kD,{currentUser:t})}if(o===tn.PROFESORADO){if(u.name==="Planificación")return c.jsx(QJ,{currentUser:t});if(u.name==="Mis Acompañamientos")return c.jsx(C3e,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return c.jsx(u3e,{});if(u.name==="Análisis Taxonómico")return c.jsx(sP,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx($6,{});if(u.name==="Inclusión")return c.jsx(kD,{currentUser:t});if(u.name==="Actividades Remotas")return c.jsx(Yfe,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx(cte,{});if(u.name==="Evaluaciones Formativas")return c.jsx(Hhe,{currentUser:t})}if(o===tn.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(Hfe,{});if(u.name==="Asistencia Dual")return c.jsx(She,{});if(u.name==="Pañol")return c.jsx(qSe,{});if(u.name==="Gestión de Empresas")return c.jsx(BFe,{})}if(o===tn.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx(she,{currentUser:t});if(u.name==="Evaluación Formativa")return c.jsx(g3e,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return c.jsx(b3e,{currentUser:t});if(u.name==="Asistencia a Empresa")return c.jsx(xhe,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(vX,{currentUser:t,onLogout:e,onNavigate:C,onUserUpdate:n,onChangeProfile:r,canChangeProfile:s,toggleSidebar:()=>p(!m),unreadMessagesCount:a,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[m&&c.jsx("div",{onClick:()=>p(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${m?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(y,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:T()})})]})]})},FFe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L5,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:uX.map(n=>c.jsxs("button",{onClick:()=>t(n.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:n.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:n.label})]},n.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),DFe=()=>{const[t,e]=se.useState(null),[n,r]=se.useState(null),[s,a]=se.useState(!0),[i,o]=se.useState(null),[l,u]=se.useState(!1),[d,m]=se.useState(null);se.useEffect(()=>{const F=QP(dv,async M=>{if(e(M),M)try{const O=await IU(M.email);O?(r(O),O.profile===tn.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await cC())}catch{o("Error al conectar con la base de datos."),await cC()}else r(null),m(null),u(!1),o(null);a(!1)});return()=>F()},[]);const p=async(F,M)=>{if(o(null),!F.trim()||!M.trim()){o("Por favor ingrese email y contraseña");return}try{await qY(F.trim(),M)}catch(O){switch(O.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},x=async F=>{try{await KY(F)}catch(M){console.error("Error al enviar email de recuperación:",M)}},C=F=>{m(F),u(!1)},y=()=>{u(!0),m(null)},T=async()=>{try{await cC()}catch(F){console.error("Error al cerrar sesión:",F)}};if(s)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(L5,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!n)return c.jsx(mX,{onLoginAttempt:p,onForgotPasswordRequest:x,error:i});if(l&&n.profile===tn.SUBDIRECCION)return c.jsx(FFe,{onSelectProfile:C,isAdminView:!0});const I=d||n.profile;return c.jsx(IFe,{currentUser:{...n,profile:I},onLogout:T,onChangeProfile:n.profile===tn.SUBDIRECCION?y:void 0,canChangeProfile:n.profile===tn.SUBDIRECCION})},w9=document.getElementById("root");if(!w9)throw new Error("Could not find root element to mount to");const LFe=LV.createRoot(w9);LFe.render(c.jsx(wt.StrictMode,{children:c.jsx(DFe,{})}));export{_s as _,RFe as c,Kx as g};
